{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"[VOT] - Voice Over Translation","options":{"check_for_updates":true,"user_modified":null,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":null,"unwrap":null,"run_at":null,"run_in":null,"tags":[],"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["*://*.youtube.com/*","*://*.youtube-nocookie.com/*","*://*.youtubekids.com/*","*://*.twitch.tv/*","*://*.xvideos.com/*","*://*.xvideos-ar.com/*","*://*.xvideos005.com/*","*://*.xv-ru.com/*","*://*.pornhub.com/*","*://*.pornhub.org/*","*://*.vk.com/*","*://*.vkvideo.ru/*","*://*.vk.ru/*","*://*.vimeo.com/*","*://*.imdb.com/*","*://*.9gag.com/*","*://*.twitter.com/*","*://*.x.com/*","*://*.facebook.com/*","*://*.rutube.ru/*","*://*.bilibili.com/*","*://my.mail.ru/*","*://*.bitchute.com/*","*://*.coursera.org/*","*://*.udemy.com/course/*","*://*.tiktok.com/*","*://*.douyin.com/*","*://rumble.com/*","*://*.eporner.com/*","*://*.dailymotion.com/*","*://*.ok.ru/*","*://trovo.live/*","*://disk.yandex.ru/*","*://disk.yandex.kz/*","*://disk.yandex.com/*","*://disk.yandex.com.am/*","*://disk.yandex.com.ge/*","*://disk.yandex.com.tr/*","*://disk.yandex.by/*","*://disk.yandex.az/*","*://disk.yandex.co.il/*","*://disk.yandex.ee/*","*://disk.yandex.lt/*","*://disk.yandex.lv/*","*://disk.yandex.md/*","*://disk.yandex.net/*","*://disk.yandex.tj/*","*://disk.yandex.tm/*","*://disk.yandex.uz/*","*://youtube.googleapis.com/embed/*","*://*.banned.video/*","*://*.madmaxworld.tv/*","*://*.weverse.io/*","*://*.newgrounds.com/*","*://*.egghead.io/*","*://*.youku.com/*","*://*.archive.org/*","*://*.patreon.com/*","*://*.reddit.com/*","*://*.kodik.info/*","*://*.kodik.biz/*","*://*.kodik.cc/*","*://*.kick.com/*","*://developer.apple.com/*","*://dev.epicgames.com/*","*://*.rapid-cloud.co/*","*://odysee.com/*","*://learning.sap.com/*","*://*.watchporn.to/*","*://*.linkedin.com/*","*://*.incestflix.net/*","*://*.incestflix.to/*","*://*.porntn.com/*","*://*.dzen.ru/*","*://*.cloudflarestream.com/*","*://*.loom.com/*","*://*.artstation.com/learning/*","*://*.rt.com/*","*://*.bitview.net/*","*://*.kickstarter.com/*","*://*.thisvid.com/*","*://*.ign.com/*","*://*.bunkr.site/*","*://*.bunkr.black/*","*://*.bunkr.cat/*","*://*.bunkr.media/*","*://*.bunkr.red/*","*://*.bunkr.ws/*","*://*.bunkr.org/*","*://*.bunkr.sk/*","*://*.bunkr.si/*","*://*.bunkr.su/*","*://*.bunkr.ci/*","*://*.bunkr.cr/*","*://*.bunkr.fi/*","*://*.bunkr.ph/*","*://*.bunkr.pk/*","*://*.bunkr.ps/*","*://*.bunkr.ru/*","*://*.bunkr.la/*","*://*.bunkr.is/*","*://*.bunkr.to/*","*://*.bunkr.ac/*","*://*.bunkr.ax/*","*://web.telegram.org/k/*","*://t2mc.toil.cc/*","*://mylearn.oracle.com/*","*://learn.deeplearning.ai/*","*://learn-staging.deeplearning.ai/*","*://learn-dev.deeplearning.ai/*","*://*.netacad.com/content/i2cs/*","*://*/*.mp4*","*://*/*.webm*","*://*.yewtu.be/*","*://yt.artemislena.eu/*","*://invidious.flokinet.to/*","*://iv.melmac.space/*","*://inv.nadeko.net/*","*://inv.tux.pizza/*","*://invidious.private.coffee/*","*://yt.drgnz.club/*","*://vid.puffyan.us/*","*://invidious.dhusch.de/*","*://*.piped.video/*","*://piped.tokhmi.xyz/*","*://piped.moomoo.me/*","*://piped.syncpundit.io/*","*://piped.mha.fi/*","*://watch.whatever.social/*","*://piped.garudalinux.org/*","*://efy.piped.pages.dev/*","*://watch.leptons.xyz/*","*://piped.lunar.icu/*","*://yt.dc09.ru/*","*://piped.mint.lgbt/*","*://*.il.ax/*","*://piped.privacy.com.de/*","*://piped.esmailelbob.xyz/*","*://piped.projectsegfau.lt/*","*://piped.in.projectsegfau.lt/*","*://piped.us.projectsegfau.lt/*","*://piped.privacydev.net/*","*://piped.palveluntarjoaja.eu/*","*://piped.smnz.de/*","*://piped.adminforge.de/*","*://piped.qdi.fi/*","*://piped.hostux.net/*","*://piped.chauvet.pro/*","*://piped.jotoma.de/*","*://piped.pfcd.me/*","*://piped.frontendfriendly.xyz/*","*://proxitok.pabloferreiro.es/*","*://proxitok.pussthecat.org/*","*://tok.habedieeh.re/*","*://proxitok.esmailelbob.xyz/*","*://proxitok.privacydev.net/*","*://tok.artemislena.eu/*","*://tok.adminforge.de/*","*://tt.vern.cc/*","*://cringe.whatever.social/*","*://proxitok.lunar.icu/*","*://proxitok.privacy.com.de/*","*://peertube.1312.media/*","*://tube.shanti.cafe/*","*://*.bee-tube.fr/*","*://video.sadmin.io/*","*://*.dalek.zone/*","*://review.peertube.biz/*","*://*.peervideo.club/*","*://tube.la-dina.net/*","*://peertube.tmp.rcp.tf/*","*://*.peertube.su/*","*://video.blender.org/*","*://videos.viorsan.com/*","*://tube-sciences-technologies.apps.education.fr/*","*://tube-numerique-educatif.apps.education.fr/*","*://tube-arts-lettres-sciences-humaines.apps.education.fr/*","*://*.beetoons.tv/*","*://comics.peertube.biz/*","*://*.makertube.net/*","*://*.poketube.fun/*","*://pt.sudovanilla.org/*","*://poke.ggtyler.dev/*","*://poke.uk2.littlekai.co.uk/*","*://poke.blahai.gay/*","*://*.ricktube.ru/*","*://*.coursehunter.net/*","*://*.coursetrain.net/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":["file://*/*.mp4*","file://*/*.webm*","*://accounts.youtube.com/*"],"merge_excludes":true,"use_connects":[],"orig_connects":["yandex.ru","disk.yandex.kz","disk.yandex.com","disk.yandex.com.am","disk.yandex.com.ge","disk.yandex.com.tr","disk.yandex.by","disk.yandex.az","disk.yandex.co.il","disk.yandex.ee","disk.yandex.lt","disk.yandex.lv","disk.yandex.md","disk.yandex.net","disk.yandex.tj","disk.yandex.tm","disk.yandex.uz","yandex.net","timeweb.cloud","raw.githubusercontent.com","vimeo.com","toil.cc","deno.dev","onrender.com","workers.dev","speed.cloudflare.com","porntn.com","googlevideo.com"],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_run_in":[],"orig_noframes":null,"orig_tags":[]}},"storage":{"ts":1758148918453,"data":{"locale-phrases":"s{\n  \"recommended\": \"рекомендуется\",\n  \"translateVideo\": \"Перевести видео\",\n  \"disableTranslate\": \"Отключить\",\n  \"translationSettings\": \"Настройки перевода\",\n  \"subtitlesSettings\": \"Настройки субтитров\",\n  \"resetSettings\": \"Сбросить настройки\",\n  \"videoBeingTranslated\": \"Видео переводится\",\n  \"videoLanguage\": \"Язык видео\",\n  \"translationLanguage\": \"Язык перевода\",\n  \"translationTake\": \"Перевод займёт\",\n  \"translationTakeMoreThanHour\": \"Перевод займёт больше часа\",\n  \"translationTakeAboutMinute\": \"Перевод займёт около минуты\",\n  \"translationTakeFewMinutes\": \"Перевод займёт несколько минут\",\n  \"translationTakeApproximatelyMinutes\": \"Перевод займёт примерно {0} минут\",\n  \"translationTakeApproximatelyMinute\": \"Перевод займёт примерно {0} минуты\",\n  \"requestTranslationFailed\": \"Не удалось запросить перевод видео\",\n  \"audioNotReceived\": \"Не получена ссылка на аудио\",\n  \"audioFormatNotSupported\": \"Формат аудио не поддерживается\",\n  \"VOTAutoTranslate\": \"Переводить при открытии\",\n  \"VOTDontTranslateYourLang\": \"Не переводить с родного языка\",\n  \"VOTVolume\": \"Громкость видео:\",\n  \"VOTVolumeTranslation\": \"Громкость перевода:\",\n  \"VOTAutoSetVolume\": \"Уменьшать громкость видео до\",\n  \"VOTShowVideoSlider\": \"Ползунок громкости видео\",\n  \"VOTSyncVolume\": \"Связать громкость перевода и видео\",\n  \"VOTDisableFromYourLang\": \"Вы отключили перевод видео на вашем языке\",\n  \"VOTVideoIsTooLong\": \"Видео слишком длинное\",\n  \"VOTNoVideoIDFound\": \"Не найден идентификатор (ID) видео\",\n  \"VOTSubtitles\": \"Субтитры\",\n  \"VOTSubtitlesDisabled\": \"Отключены\",\n  \"VOTSubtitlesMaxLength\": \"Максимальная длина субтитров\",\n  \"VOTHighlightWords\": \"Подсвечивать слова\",\n  \"VOTTranslatedFrom\": \"переведено с\",\n  \"VOTAutogenerated\": \"создано автоматически\",\n  \"VOTSettings\": \"Настройки VOT\",\n  \"VOTMenuLanguage\": \"Язык меню\",\n  \"VOTAuthors\": \"Авторы\",\n  \"VOTVersion\": \"Версия\",\n  \"VOTLoader\": \"Загрузчик\",\n  \"VOTBrowser\": \"Браузер\",\n  \"VOTShowPiPButton\": \"Показывать кнопку «Картинка в картинке»\",\n  \"langs\": {\n    \"auto\": \"Авто\",\n    \"az\": \"Азербайджанский\",\n    \"ay\": \"Аймара\",\n    \"ak\": \"Акан\",\n    \"sq\": \"Албанский\",\n    \"am\": \"Амхарский\",\n    \"en\": \"Английский\",\n    \"ar\": \"Арабский\",\n    \"hy\": \"Армянский\",\n    \"as\": \"Ассамский\",\n    \"af\": \"Африкаанс\",\n    \"eu\": \"Баскский\",\n    \"be\": \"Белорусский\",\n    \"bn\": \"Бенгальский\",\n    \"my\": \"Бирманский\",\n    \"bg\": \"Болгарский\",\n    \"bs\": \"Боснийский\",\n    \"bho\": \"Бходжпури\",\n    \"cy\": \"Валлийский\",\n    \"hu\": \"Венгерский\",\n    \"vi\": \"Вьетнамский\",\n    \"haw\": \"Гавайский\",\n    \"ht\": \"Гаитянский\",\n    \"gl\": \"Галисийский\",\n    \"lg\": \"Ганда\",\n    \"el\": \"Греческий\",\n    \"ka\": \"Грузинский\",\n    \"gn\": \"Гуарани\",\n    \"gu\": \"Гуджарати\",\n    \"gd\": \"Гэльский\",\n    \"da\": \"Датский\",\n    \"fy\": \"Западнофризский\",\n    \"zu\": \"Зулу\",\n    \"iw\": \"Иврит\",\n    \"ig\": \"Игбо\",\n    \"yi\": \"Идиш\",\n    \"id\": \"Индонезийский\",\n    \"ga\": \"Ирландский\",\n    \"is\": \"Исландский\",\n    \"es\": \"Испанский\",\n    \"it\": \"Итальянский\",\n    \"yo\": \"Йоруба\",\n    \"kk\": \"Казахский\",\n    \"kn\": \"Каннада\",\n    \"ca\": \"Каталанский\",\n    \"qu\": \"Кечуа\",\n    \"rw\": \"Киньяруанда\",\n    \"ky\": \"Киргизский\",\n    \"zh\": \"Китайский\",\n    \"zh-Hant\": \"Китайский (традиционный)\",\n    \"zh-Hans\": \"Китайский (упрощённый)\",\n    \"ko\": \"Корейский\",\n    \"co\": \"Корсиканский\",\n    \"xh\": \"Коса\",\n    \"ku\": \"Курдский\",\n    \"km\": \"Кхмерский\",\n    \"lo\": \"Лаосский\",\n    \"la\": \"Латинский\",\n    \"lv\": \"Латышский\",\n    \"ln\": \"Лингала\",\n    \"lt\": \"Литовский\",\n    \"lb\": \"Люксембургский\",\n    \"mk\": \"Македонский\",\n    \"mg\": \"Малагасийский\",\n    \"ms\": \"Малайский\",\n    \"ml\": \"Малаялам\",\n    \"dv\": \"Мальдивский\",\n    \"mt\": \"Мальтийский\",\n    \"mi\": \"Маори\",\n    \"mr\": \"Маратхи\",\n    \"mn\": \"Монгольский\",\n    \"de\": \"Немецкий\",\n    \"ne\": \"Непальский\",\n    \"nl\": \"Нидерландский\",\n    \"no\": \"Норвежский\",\n    \"ny\": \"Ньянджа\",\n    \"or\": \"Ория\",\n    \"om\": \"Оромо\",\n    \"pa\": \"Панджаби\",\n    \"fa\": \"Персидский\",\n    \"pl\": \"Польский\",\n    \"pt\": \"Португальский\",\n    \"ps\": \"Пушту\",\n    \"ro\": \"Румынский\",\n    \"ru\": \"Русский\",\n    \"sm\": \"Самоанский\",\n    \"sa\": \"Санскрит\",\n    \"ceb\": \"Себуано\",\n    \"nso\": \"Северный Сото\",\n    \"sr\": \"Сербский\",\n    \"si\": \"Сингальский\",\n    \"sd\": \"Синдхи\",\n    \"sk\": \"Словацкий\",\n    \"sl\": \"Словенский\",\n    \"so\": \"Сомали\",\n    \"sw\": \"Суахили\",\n    \"su\": \"Сунданский\",\n    \"tg\": \"Таджикский\",\n    \"th\": \"Тайский\",\n    \"ta\": \"Тамильский\",\n    \"tt\": \"Татарский\",\n    \"te\": \"Телугу\",\n    \"ti\": \"Тигринья\",\n    \"ts\": \"Тсонга\",\n    \"tr\": \"Турецкий\",\n    \"tk\": \"Туркменский\",\n    \"uz\": \"Узбекский\",\n    \"ug\": \"Уйгурский\",\n    \"uk\": \"Украинский\",\n    \"ur\": \"Урду\",\n    \"fil\": \"Филиппинский\",\n    \"fi\": \"Финский\",\n    \"fr\": \"Французский\",\n    \"ha\": \"Хауса\",\n    \"hi\": \"Хинди\",\n    \"hmn\": \"Хмонг\",\n    \"hr\": \"Хорватский\",\n    \"cs\": \"Чешский\",\n    \"sv\": \"Шведский\",\n    \"sn\": \"Шона\",\n    \"ee\": \"Эве\",\n    \"eo\": \"Эсперанто\",\n    \"et\": \"Эстонский\",\n    \"st\": \"Южный Сото\",\n    \"jv\": \"Яванский\",\n    \"ja\": \"Японский\",\n    \"kri\": \"Кри\"\n  },\n  \"streamNoConnectionToServer\": \"Нет подключения к серверу\",\n  \"searchField\": \"Поиск...\",\n  \"VOTTranslateAPIErrors\": \"Переводить ошибки из API\",\n  \"VOTDetectService\": \"Сервис определения языка\",\n  \"VOTProxyWorkerHost\": \"Введите адрес worker прокси-сервера\",\n  \"VOTM3u8ProxyHost\": \"Введите адрес m3u8 прокси-сервера\",\n  \"proxySettings\": \"Настройки прокси-сервера\",\n  \"translationTakeApproximatelyMinute2\": \"Перевод займёт примерно {0} минуту\",\n  \"VOTAudioBooster\": \"Расширенное увеличение громкости перевода\",\n  \"VOTSubtitlesDesign\": \"Оформление субтитров\",\n  \"VOTSubtitlesFontSize\": \"Размер шрифта субтитров\",\n  \"VOTSubtitlesOpacity\": \"Прозрачность фона субтитров\",\n  \"VOTSubtitlesDownloadFormat\": \"Формат для загрузки субтитров\",\n  \"VOTDownloadWithName\": \"Загружать файлы с названием видео\",\n  \"VOTUpdateLocaleFiles\": \"Обновить файлы локализации\",\n  \"VOTLocaleHash\": \"Хеш перевода\",\n  \"VOTUpdatedAt\": \"Обновлено в\",\n  \"VOTNeedWebAudioAPI\": \"Чтобы включить, у вас должен быть Web Audio API\",\n  \"VOTMediaCSPEnabledOnSite\": \"На этом сайте включен Media CSP\",\n  \"VOTOnlyBypassMediaCSP\": \"Использовать только для обхода Media CSP\",\n  \"VOTNewAudioPlayer\": \"Использовать новый аудиоплеер\",\n  \"VOTUseNewModel\": \"Использовать экспериментальный вариант голосов Yandex для некоторых видеороликов\",\n  \"TranslationDelayed\": \"Перевод немного задерживается\",\n  \"VOTTranslationCompletedNotify\": \"Перевод на {0} завершен!\",\n  \"VOTSendNotifyOnComplete\": \"Отправлять уведомление о том, что видео было переведено\",\n  \"VOTBugReport\": \"Сообщить об ошибке\",\n  \"VOTTranslateProxyDisabled\": \"Отключено\",\n  \"VOTTranslateProxyEnabled\": \"Включено\",\n  \"VOTTranslateProxyEverything\": \"Проксировать всё\",\n  \"VOTTranslateProxyStatus\": \"Режим проксирования\",\n  \"VOTTranslatedBy\": \"Переведено {0}\",\n  \"VOTStreamNotAvailable\": \"Трансляция перевода недоступна\",\n  \"VOTTranslationTextService\": \"Сервис перевода текста\",\n  \"VOTNotAffectToVoice\": \"Не влияет на перевод текста при озвучивании\",\n  \"DontTranslateSelectedLanguages\": \"Не переводите с выбранных языков\",\n  \"showVideoVolumeSlider\": \"Отображать ползунок громкости видео\",\n  \"hotkeysSettings\": \"Настройки горячих клавиш\",\n  \"None\": \"Нет\",\n  \"VOTUseLivelyVoice\": \"Использовать живые голоса. Будто все знают русский.\",\n  \"miscSettings\": \"Другие настройки\",\n  \"services\": {\n    \"yandexbrowser\": \"Яндекс Браузер\",\n    \"msedge\": \"Microsoft Edge\",\n    \"rust-server\": \"Сервер на Rust\"\n  },\n  \"aboutExtension\": \"О расширении\",\n  \"appearance\": \"Внешний вид\",\n  \"buttonPositionInWidePlayer\": \"Положение кнопки в широком плеере\",\n  \"position\": {\n    \"left\": \"Слева\",\n    \"right\": \"Справа\",\n    \"top\": \"Сверху\",\n    \"default\": \"По умолчанию\"\n  },\n  \"secs\": \"сек.\",\n  \"autoHideButtonDelay\": \"Задержка перед скрытием кнопки перевода\",\n  \"notFound\": \"не найдено\",\n  \"minButtonPositionContainer\": \"Положение кнопки меняется только на проигрывателях размером более 600 пикселей.\",\n  \"VOTTranslateProxyStatusDefault\": \"Полное отключение проксирования в вашей стране может привести к поломке расширения\",\n  \"PressTheKeyCombination\": \"Нажмите комбинацию клавиш...\",\n  \"VOTUseAudioDownload\": \"Использовать загрузку аудио\",\n  \"VOTUseAudioDownloadWarning\": \"Отключение загрузки аудио может нарушить работоспособность расширения\",\n  \"VOTAccountRequired\": \"Вам необходимо авторизоваться, чтобы использовать эту функцию\",\n  \"VOTMyAccount\": \"Мой аккаунт\",\n  \"VOTLogin\": \"Авторизоваться\",\n  \"VOTLogout\": \"Выйти\",\n  \"VOTRefresh\": \"Обновить\",\n  \"VOTYandexToken\": \"Введите OAuth-токен Яндекса\",\n  \"VOTYandexTokenInfo\": \"Вы можете вручную указать токен учетной записи в этом поле. Пожалуйста, обратите внимание, что мы не проверяем его действительность перед отправкой запроса на перевод\",\n  \"VOTLoginViaToken\": \"Войти с помощью токена\"\n}\n","locale-version":"n2","responseLanguage":"sru","locale-updated-at":"n1755940992","locale-hash":"s21d7399a32dbe8ab6125f6a10be6304f","localeUpdatedAt":"n1758148918","localePhrases":"s{\n  \"recommended\": \"рекомендуется\",\n  \"translateVideo\": \"Перевести видео\",\n  \"disableTranslate\": \"Отключить\",\n  \"translationSettings\": \"Настройки перевода\",\n  \"subtitlesSettings\": \"Настройки субтитров\",\n  \"resetSettings\": \"Сбросить настройки\",\n  \"videoBeingTranslated\": \"Видео переводится\",\n  \"videoLanguage\": \"Язык видео\",\n  \"translationLanguage\": \"Язык перевода\",\n  \"translationTake\": \"Перевод займёт\",\n  \"translationTakeMoreThanHour\": \"Перевод займёт больше часа\",\n  \"translationTakeAboutMinute\": \"Перевод займёт около минуты\",\n  \"translationTakeFewMinutes\": \"Перевод займёт несколько минут\",\n  \"translationTakeApproximatelyMinutes\": \"Перевод займёт примерно {0} минут\",\n  \"translationTakeApproximatelyMinute\": \"Перевод займёт примерно {0} минуты\",\n  \"requestTranslationFailed\": \"Не удалось запросить перевод видео\",\n  \"audioNotReceived\": \"Не получена ссылка на аудио\",\n  \"audioFormatNotSupported\": \"Формат аудио не поддерживается\",\n  \"VOTAutoTranslate\": \"Переводить при открытии\",\n  \"VOTDontTranslateYourLang\": \"Не переводить с родного языка\",\n  \"VOTVolume\": \"Громкость видео:\",\n  \"VOTVolumeTranslation\": \"Громкость перевода:\",\n  \"VOTAutoSetVolume\": \"Уменьшать громкость видео до\",\n  \"VOTShowVideoSlider\": \"Ползунок громкости видео\",\n  \"VOTSyncVolume\": \"Связать громкость перевода и видео\",\n  \"VOTDisableFromYourLang\": \"Вы отключили перевод видео на вашем языке\",\n  \"VOTVideoIsTooLong\": \"Видео слишком длинное\",\n  \"VOTNoVideoIDFound\": \"Не найден идентификатор (ID) видео\",\n  \"VOTSubtitles\": \"Субтитры\",\n  \"VOTSubtitlesDisabled\": \"Отключены\",\n  \"VOTSubtitlesMaxLength\": \"Максимальная длина субтитров\",\n  \"VOTHighlightWords\": \"Подсвечивать слова\",\n  \"VOTTranslatedFrom\": \"переведено с\",\n  \"VOTAutogenerated\": \"создано автоматически\",\n  \"VOTSettings\": \"Настройки VOT\",\n  \"VOTMenuLanguage\": \"Язык меню\",\n  \"VOTAuthors\": \"Авторы\",\n  \"VOTVersion\": \"Версия\",\n  \"VOTLoader\": \"Загрузчик\",\n  \"VOTBrowser\": \"Браузер\",\n  \"VOTShowPiPButton\": \"Показывать кнопку «Картинка в картинке»\",\n  \"langs\": {\n    \"auto\": \"Авто\",\n    \"az\": \"Азербайджанский\",\n    \"ay\": \"Аймара\",\n    \"ak\": \"Акан\",\n    \"sq\": \"Албанский\",\n    \"am\": \"Амхарский\",\n    \"en\": \"Английский\",\n    \"ar\": \"Арабский\",\n    \"hy\": \"Армянский\",\n    \"as\": \"Ассамский\",\n    \"af\": \"Африкаанс\",\n    \"eu\": \"Баскский\",\n    \"be\": \"Белорусский\",\n    \"bn\": \"Бенгальский\",\n    \"my\": \"Бирманский\",\n    \"bg\": \"Болгарский\",\n    \"bs\": \"Боснийский\",\n    \"bho\": \"Бходжпури\",\n    \"cy\": \"Валлийский\",\n    \"hu\": \"Венгерский\",\n    \"vi\": \"Вьетнамский\",\n    \"haw\": \"Гавайский\",\n    \"ht\": \"Гаитянский\",\n    \"gl\": \"Галисийский\",\n    \"lg\": \"Ганда\",\n    \"el\": \"Греческий\",\n    \"ka\": \"Грузинский\",\n    \"gn\": \"Гуарани\",\n    \"gu\": \"Гуджарати\",\n    \"gd\": \"Гэльский\",\n    \"da\": \"Датский\",\n    \"fy\": \"Западнофризский\",\n    \"zu\": \"Зулу\",\n    \"iw\": \"Иврит\",\n    \"ig\": \"Игбо\",\n    \"yi\": \"Идиш\",\n    \"id\": \"Индонезийский\",\n    \"ga\": \"Ирландский\",\n    \"is\": \"Исландский\",\n    \"es\": \"Испанский\",\n    \"it\": \"Итальянский\",\n    \"yo\": \"Йоруба\",\n    \"kk\": \"Казахский\",\n    \"kn\": \"Каннада\",\n    \"ca\": \"Каталанский\",\n    \"qu\": \"Кечуа\",\n    \"rw\": \"Киньяруанда\",\n    \"ky\": \"Киргизский\",\n    \"zh\": \"Китайский\",\n    \"zh-Hant\": \"Китайский (традиционный)\",\n    \"zh-Hans\": \"Китайский (упрощённый)\",\n    \"ko\": \"Корейский\",\n    \"co\": \"Корсиканский\",\n    \"xh\": \"Коса\",\n    \"ku\": \"Курдский\",\n    \"km\": \"Кхмерский\",\n    \"lo\": \"Лаосский\",\n    \"la\": \"Латинский\",\n    \"lv\": \"Латышский\",\n    \"ln\": \"Лингала\",\n    \"lt\": \"Литовский\",\n    \"lb\": \"Люксембургский\",\n    \"mk\": \"Македонский\",\n    \"mg\": \"Малагасийский\",\n    \"ms\": \"Малайский\",\n    \"ml\": \"Малаялам\",\n    \"dv\": \"Мальдивский\",\n    \"mt\": \"Мальтийский\",\n    \"mi\": \"Маори\",\n    \"mr\": \"Маратхи\",\n    \"mn\": \"Монгольский\",\n    \"de\": \"Немецкий\",\n    \"ne\": \"Непальский\",\n    \"nl\": \"Нидерландский\",\n    \"no\": \"Норвежский\",\n    \"ny\": \"Ньянджа\",\n    \"or\": \"Ория\",\n    \"om\": \"Оромо\",\n    \"pa\": \"Панджаби\",\n    \"fa\": \"Персидский\",\n    \"pl\": \"Польский\",\n    \"pt\": \"Португальский\",\n    \"ps\": \"Пушту\",\n    \"ro\": \"Румынский\",\n    \"ru\": \"Русский\",\n    \"sm\": \"Самоанский\",\n    \"sa\": \"Санскрит\",\n    \"ceb\": \"Себуано\",\n    \"nso\": \"Северный Сото\",\n    \"sr\": \"Сербский\",\n    \"si\": \"Сингальский\",\n    \"sd\": \"Синдхи\",\n    \"sk\": \"Словацкий\",\n    \"sl\": \"Словенский\",\n    \"so\": \"Сомали\",\n    \"sw\": \"Суахили\",\n    \"su\": \"Сунданский\",\n    \"tg\": \"Таджикский\",\n    \"th\": \"Тайский\",\n    \"ta\": \"Тамильский\",\n    \"tt\": \"Татарский\",\n    \"te\": \"Телугу\",\n    \"ti\": \"Тигринья\",\n    \"ts\": \"Тсонга\",\n    \"tr\": \"Турецкий\",\n    \"tk\": \"Туркменский\",\n    \"uz\": \"Узбекский\",\n    \"ug\": \"Уйгурский\",\n    \"uk\": \"Украинский\",\n    \"ur\": \"Урду\",\n    \"fil\": \"Филиппинский\",\n    \"fi\": \"Финский\",\n    \"fr\": \"Французский\",\n    \"ha\": \"Хауса\",\n    \"hi\": \"Хинди\",\n    \"hmn\": \"Хмонг\",\n    \"hr\": \"Хорватский\",\n    \"cs\": \"Чешский\",\n    \"sv\": \"Шведский\",\n    \"sn\": \"Шона\",\n    \"ee\": \"Эве\",\n    \"eo\": \"Эсперанто\",\n    \"et\": \"Эстонский\",\n    \"st\": \"Южный Сото\",\n    \"jv\": \"Яванский\",\n    \"ja\": \"Японский\",\n    \"kri\": \"Кри\"\n  },\n  \"streamNoConnectionToServer\": \"Нет подключения к серверу\",\n  \"searchField\": \"Поиск...\",\n  \"VOTTranslateAPIErrors\": \"Переводить ошибки из API\",\n  \"VOTDetectService\": \"Сервис определения языка\",\n  \"VOTProxyWorkerHost\": \"Введите адрес worker прокси-сервера\",\n  \"VOTM3u8ProxyHost\": \"Введите адрес m3u8 прокси-сервера\",\n  \"proxySettings\": \"Настройки прокси-сервера\",\n  \"translationTakeApproximatelyMinute2\": \"Перевод займёт примерно {0} минуту\",\n  \"VOTAudioBooster\": \"Расширенное увеличение громкости перевода\",\n  \"VOTSubtitlesDesign\": \"Оформление субтитров\",\n  \"VOTSubtitlesFontSize\": \"Размер шрифта субтитров\",\n  \"VOTSubtitlesOpacity\": \"Прозрачность фона субтитров\",\n  \"VOTSubtitlesDownloadFormat\": \"Формат для загрузки субтитров\",\n  \"VOTDownloadWithName\": \"Загружать файлы с названием видео\",\n  \"VOTUpdateLocaleFiles\": \"Обновить файлы локализации\",\n  \"VOTLocaleHash\": \"Хеш перевода\",\n  \"VOTUpdatedAt\": \"Обновлено в\",\n  \"VOTNeedWebAudioAPI\": \"Чтобы включить, у вас должен быть Web Audio API\",\n  \"VOTMediaCSPEnabledOnSite\": \"На этом сайте включен Media CSP\",\n  \"VOTOnlyBypassMediaCSP\": \"Использовать только для обхода Media CSP\",\n  \"VOTNewAudioPlayer\": \"Использовать новый аудиоплеер\",\n  \"VOTUseNewModel\": \"Использовать экспериментальный вариант голосов Yandex для некоторых видеороликов\",\n  \"TranslationDelayed\": \"Перевод немного задерживается\",\n  \"VOTTranslationCompletedNotify\": \"Перевод на {0} завершен!\",\n  \"VOTSendNotifyOnComplete\": \"Отправлять уведомление о том, что видео было переведено\",\n  \"VOTBugReport\": \"Сообщить об ошибке\",\n  \"VOTTranslateProxyDisabled\": \"Отключено\",\n  \"VOTTranslateProxyEnabled\": \"Включено\",\n  \"VOTTranslateProxyEverything\": \"Проксировать всё\",\n  \"VOTTranslateProxyStatus\": \"Режим проксирования\",\n  \"VOTTranslatedBy\": \"Переведено {0}\",\n  \"VOTStreamNotAvailable\": \"Трансляция перевода недоступна\",\n  \"VOTTranslationTextService\": \"Сервис перевода текста\",\n  \"VOTNotAffectToVoice\": \"Не влияет на перевод текста при озвучивании\",\n  \"DontTranslateSelectedLanguages\": \"Не переводите с выбранных языков\",\n  \"showVideoVolumeSlider\": \"Отображать ползунок громкости видео\",\n  \"hotkeysSettings\": \"Настройки горячих клавиш\",\n  \"None\": \"Нет\",\n  \"VOTUseLivelyVoice\": \"Использовать живые голоса. Будто все знают русский.\",\n  \"miscSettings\": \"Другие настройки\",\n  \"services\": {\n    \"yandexbrowser\": \"Яндекс Браузер\",\n    \"msedge\": \"Microsoft Edge\",\n    \"rust-server\": \"Сервер на Rust\"\n  },\n  \"aboutExtension\": \"О расширении\",\n  \"appearance\": \"Внешний вид\",\n  \"buttonPositionInWidePlayer\": \"Положение кнопки в широком плеере\",\n  \"position\": {\n    \"left\": \"Слева\",\n    \"right\": \"Справа\",\n    \"top\": \"Сверху\",\n    \"default\": \"По умолчанию\"\n  },\n  \"secs\": \"сек.\",\n  \"autoHideButtonDelay\": \"Задержка перед скрытием кнопки перевода\",\n  \"notFound\": \"не найдено\",\n  \"minButtonPositionContainer\": \"Положение кнопки меняется только на проигрывателях размером более 600 пикселей.\",\n  \"VOTTranslateProxyStatusDefault\": \"Полное отключение проксирования в вашей стране может привести к поломке расширения\",\n  \"PressTheKeyCombination\": \"Нажмите комбинацию клавиш...\",\n  \"VOTUseAudioDownload\": \"Использовать загрузку аудио\",\n  \"VOTUseAudioDownloadWarning\": \"Отключение загрузки аудио может нарушить работоспособность расширения\",\n  \"VOTAccountRequired\": \"Вам необходимо авторизоваться, чтобы использовать эту функцию\",\n  \"VOTMyAccount\": \"Мой аккаунт\",\n  \"VOTLogin\": \"Авторизоваться\",\n  \"VOTLogout\": \"Выйти\",\n  \"VOTRefresh\": \"Обновить\",\n  \"VOTYandexToken\": \"Введите OAuth-токен Яндекса\",\n  \"VOTYandexTokenInfo\": \"Вы можете вручную указать токен учетной записи в этом поле. Пожалуйста, обратите внимание, что мы не проверяем его действительность перед отправкой запроса на перевод\",\n  \"VOTLoginViaToken\": \"Войти с помощью токена\"\n}\n","localeHash":"s21d7399a32dbe8ab6125f6a10be6304f","localeLang":"sru","compatVersion":"s2025-05-09"}},"enabled":true,"position":1,"file_url":"https://raw.githubusercontent.com/ilyhalight/voice-over-translation/master/dist/vot.user.js","uuid":"dfa04394-8f47-4e19-9ff0-17226ad8dc69","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIFtWT1RdIC0gVm9pY2UgT3ZlciBUcmFuc2xhdGlvbgovLyBAbmFtZTpkZSAgICAgICAgW1ZPVF0gLSBWb2ljZS1PdmVyLVZpZGVvLcOcYmVyc2V0enVuZwovLyBAbmFtZTplcyAgICAgICAgW1ZPVF0gLSBUcmFkdWNjacOzbiBkZSB2w61kZW8gZW4gb2ZmCi8vIEBuYW1lOmZyICAgICAgICBbVk9UXSAtIFRyYWR1Y3Rpb24gdmlkw6lvIHZvaXgtb2ZmCi8vIEBuYW1lOml0ICAgICAgICBbVk9UXSAtIFRyYWR1emlvbmUgVmlkZW8gZnVvcmkgY2FtcG8KLy8gQG5hbWU6cnUgICAgICAgIFtWT1RdIC0g0JfQsNC60LDQtNGA0L7QstGL0Lkg0L/QtdGA0LXQstC+0LQg0LLQuNC00LXQvgovLyBAbmFtZTp6aCAgICAgICAgW1ZPVF0gLSDnlLvlpJbpn7Pop4bpopHnv7vor5EKLy8gQGRlc2NyaXB0aW9uICAgIEEgc21hbGwgZXh0ZW5zaW9uIHRoYXQgYWRkcyBhIFlhbmRleCBCcm93c2VyIHZpZGVvIHRyYW5zbGF0aW9uIHRvIG90aGVyIGJyb3dzZXJzCi8vIEBkZXNjcmlwdGlvbjpkZSBFaW5lIGtsZWluZSBFcndlaXRlcnVuZywgZGllIGVpbmUgVm9pY2Utb3Zlci3DnGJlcnNldHp1bmcgdm9uIFZpZGVvcyBhdXMgZGVtIFlhbmRleC1Ccm93c2VyIHp1IGFuZGVyZW4gQnJvd3Nlcm4gaGluenVmw7xndAovLyBAZGVzY3JpcHRpb246ZXMgVW5hIHBlcXVlw7FhIGV4dGVuc2nDs24gcXVlIGFncmVnYSB1bmEgdHJhZHVjY2nDs24gZGUgdm96IGVuIG9mZiBkZSB1biB2aWRlbyBkZSBZYW5kZXggQnJvd3NlciBhIG90cm9zIG5hdmVnYWRvcmVzCi8vIEBkZXNjcmlwdGlvbjpmciBVbmUgcGV0aXRlIGV4dGVuc2lvbiBxdWkgYWpvdXRlIGxhIHRyYWR1Y3Rpb24gdm9jYWxlIGRlIGxhIHZpZMOpbyBkdSBOYXZpZ2F0ZXVyIFlhbmRleCDDoCBkJ2F1dHJlcyBuYXZpZ2F0ZXVycwovLyBAZGVzY3JpcHRpb246aXQgVW5hIHBpY2NvbGEgZXN0ZW5zaW9uZSBjaGUgYWdnaXVuZ2UgbGEgdHJhZHV6aW9uZSB2b2NhbGUgZGVsIHZpZGVvIGRhbCBicm93c2VyIFlhbmRleCBhZCBhbHRyaSBicm93c2VyCi8vIEBkZXNjcmlwdGlvbjpydSDQndC10LHQvtC70YzRiNC+0LUg0YDQsNGB0YjQuNGA0LXQvdC40LUsINC60L7RgtC+0YDQvtC1INC00L7QsdCw0LLQu9GP0LXRgiDQt9Cw0LrQsNC00YDQvtCy0YvQuSDQv9C10YDQtdCy0L7QtCDQstC40LTQtdC+INC40Lcg0K/QvdC00LXQutGBINCR0YDQsNGD0LfQtdGA0LAg0LIg0LTRgNGD0LPQuNC1INCx0YDQsNGD0LfQtdGA0YsKLy8gQGRlc2NyaXB0aW9uOnpoIOS4gOS4quWwj+aJqeWxle+8jOWug+WinuWKoOS6huinhumikeS7jllhbmRleOa1j+iniOWZqOWIsOWFtuS7lua1j+iniOWZqOeahOeUu+Wklumfs+e/u+ivkQovLyBAZ3JhbnQgICAgICAgICAgdW5zYWZlV2luZG93Ci8vIEBncmFudCAgICAgICAgICBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgICAgICAgICAgR01fZGVsZXRlVmFsdWUKLy8gQGdyYW50ICAgICAgICAgIEdNX2xpc3RWYWx1ZXMKLy8gQGdyYW50ICAgICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICAgICBHTV9nZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQGdyYW50ICAgICAgICAgIEdNX25vdGlmaWNhdGlvbgovLyBAZ3JhbnQgICAgICAgICAgR01faW5mbwovLyBAZ3JhbnQgICAgICAgICAgd2luZG93LmZvY3VzCi8vIEByZXF1aXJlICAgICAgICBodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9obHMuanMvMS41LjE4L2hscy5saWdodC5taW4uanMKLy8gQHJlcXVpcmUgICAgICAgIGh0dHBzOi8vZ2lzdC5naXRodWJ1c2VyY29udGVudC5jb20vaWx5aGFsaWdodC82ZWI1YmI0ZGZmYzdjYTllM2M1N2Q2OTMzZTI0NTJmMy9yYXcvN2FiMzhhZjIyMjhkMGJlZDEzOTEyZTUwM2JjOGE5ZWU0YjExODI4ZC9nbS1hZGRzdHlsZS1wb2x5ZmlsbC5qcwovLyBAbWF0Y2ggICAgICAgICAgKjovLyoueW91dHViZS5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyoueW91dHViZS1ub2Nvb2tpZS5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyoueW91dHViZWtpZHMuY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLnR3aXRjaC50di8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi54dmlkZW9zLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi54dmlkZW9zLWFyLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi54dmlkZW9zMDA1LmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi54di1ydS5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyoucG9ybmh1Yi5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyoucG9ybmh1Yi5vcmcvKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyoudmsuY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLnZrdmlkZW8ucnUvKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyoudmsucnUvKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyoudmltZW8uY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmltZGIuY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLjlnYWcuY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLnR3aXR0ZXIuY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLnguY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmZhY2Vib29rLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5ydXR1YmUucnUvKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyouYmlsaWJpbGkuY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9teS5tYWlsLnJ1LyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJpdGNodXRlLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5jb3Vyc2VyYS5vcmcvKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyoudWRlbXkuY29tL2NvdXJzZS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi50aWt0b2suY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmRvdXlpbi5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3J1bWJsZS5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyouZXBvcm5lci5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyouZGFpbHltb3Rpb24uY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLm9rLnJ1LyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly90cm92by5saXZlLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9kaXNrLnlhbmRleC5ydS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vZGlzay55YW5kZXgua3ovKgovLyBAbWF0Y2ggICAgICAgICAgKjovL2Rpc2sueWFuZGV4LmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vZGlzay55YW5kZXguY29tLmFtLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9kaXNrLnlhbmRleC5jb20uZ2UvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL2Rpc2sueWFuZGV4LmNvbS50ci8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vZGlzay55YW5kZXguYnkvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL2Rpc2sueWFuZGV4LmF6LyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9kaXNrLnlhbmRleC5jby5pbC8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vZGlzay55YW5kZXguZWUvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL2Rpc2sueWFuZGV4Lmx0LyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9kaXNrLnlhbmRleC5sdi8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vZGlzay55YW5kZXgubWQvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL2Rpc2sueWFuZGV4Lm5ldC8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vZGlzay55YW5kZXgudGovKgovLyBAbWF0Y2ggICAgICAgICAgKjovL2Rpc2sueWFuZGV4LnRtLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9kaXNrLnlhbmRleC51ei8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8veW91dHViZS5nb29nbGVhcGlzLmNvbS9lbWJlZC8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5iYW5uZWQudmlkZW8vKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyoubWFkbWF4d29ybGQudHYvKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyoud2V2ZXJzZS5pby8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5uZXdncm91bmRzLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5lZ2doZWFkLmlvLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLnlvdWt1LmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5hcmNoaXZlLm9yZy8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5wYXRyZW9uLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5yZWRkaXQuY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmtvZGlrLmluZm8vKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyoua29kaWsuYml6LyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmtvZGlrLmNjLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmtpY2suY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9kZXZlbG9wZXIuYXBwbGUuY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9kZXYuZXBpY2dhbWVzLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5yYXBpZC1jbG91ZC5jby8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vb2R5c2VlLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vbGVhcm5pbmcuc2FwLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi53YXRjaHBvcm4udG8vKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyoubGlua2VkaW4uY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmluY2VzdGZsaXgubmV0LyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmluY2VzdGZsaXgudG8vKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyoucG9ybnRuLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5kemVuLnJ1LyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmNsb3VkZmxhcmVzdHJlYW0uY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmxvb20uY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmFydHN0YXRpb24uY29tL2xlYXJuaW5nLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLnJ0LmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5iaXR2aWV3Lm5ldC8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5raWNrc3RhcnRlci5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyoudGhpc3ZpZC5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyouaWduLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5idW5rci5zaXRlLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJ1bmtyLmJsYWNrLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJ1bmtyLmNhdC8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5idW5rci5tZWRpYS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5idW5rci5yZWQvKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyouYnVua3Iud3MvKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyouYnVua3Iub3JnLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJ1bmtyLnNrLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJ1bmtyLnNpLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJ1bmtyLnN1LyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJ1bmtyLmNpLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJ1bmtyLmNyLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJ1bmtyLmZpLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJ1bmtyLnBoLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJ1bmtyLnBrLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJ1bmtyLnBzLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJ1bmtyLnJ1LyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJ1bmtyLmxhLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJ1bmtyLmlzLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJ1bmtyLnRvLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJ1bmtyLmFjLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJ1bmtyLmF4LyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly93ZWIudGVsZWdyYW0ub3JnL2svKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3QybWMudG9pbC5jYy8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vbXlsZWFybi5vcmFjbGUuY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9sZWFybi5kZWVwbGVhcm5pbmcuYWkvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL2xlYXJuLXN0YWdpbmcuZGVlcGxlYXJuaW5nLmFpLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9sZWFybi1kZXYuZGVlcGxlYXJuaW5nLmFpLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLm5ldGFjYWQuY29tL2NvbnRlbnQvaTJjcy8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi8qLm1wNCoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLyoud2VibSoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLnlld3R1LmJlLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly95dC5hcnRlbWlzbGVuYS5ldS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vaW52aWRpb3VzLmZsb2tpbmV0LnRvLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9pdi5tZWxtYWMuc3BhY2UvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL2ludi5uYWRla28ubmV0LyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9pbnYudHV4LnBpenphLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9pbnZpZGlvdXMucHJpdmF0ZS5jb2ZmZWUvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3l0LmRyZ256LmNsdWIvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3ZpZC5wdWZmeWFuLnVzLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9pbnZpZGlvdXMuZGh1c2NoLmRlLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLnBpcGVkLnZpZGVvLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9waXBlZC50b2tobWkueHl6LyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9waXBlZC5tb29tb28ubWUvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3BpcGVkLnN5bmNwdW5kaXQuaW8vKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3BpcGVkLm1oYS5maS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vd2F0Y2gud2hhdGV2ZXIuc29jaWFsLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9waXBlZC5nYXJ1ZGFsaW51eC5vcmcvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL2VmeS5waXBlZC5wYWdlcy5kZXYvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3dhdGNoLmxlcHRvbnMueHl6LyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9waXBlZC5sdW5hci5pY3UvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3l0LmRjMDkucnUvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3BpcGVkLm1pbnQubGdidC8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5pbC5heC8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vcGlwZWQucHJpdmFjeS5jb20uZGUvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3BpcGVkLmVzbWFpbGVsYm9iLnh5ei8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vcGlwZWQucHJvamVjdHNlZ2ZhdS5sdC8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vcGlwZWQuaW4ucHJvamVjdHNlZ2ZhdS5sdC8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vcGlwZWQudXMucHJvamVjdHNlZ2ZhdS5sdC8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vcGlwZWQucHJpdmFjeWRldi5uZXQvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3BpcGVkLnBhbHZlbHVudGFyam9hamEuZXUvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3BpcGVkLnNtbnouZGUvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3BpcGVkLmFkbWluZm9yZ2UuZGUvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3BpcGVkLnFkaS5maS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vcGlwZWQuaG9zdHV4Lm5ldC8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vcGlwZWQuY2hhdXZldC5wcm8vKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3BpcGVkLmpvdG9tYS5kZS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vcGlwZWQucGZjZC5tZS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vcGlwZWQuZnJvbnRlbmRmcmllbmRseS54eXovKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3Byb3hpdG9rLnBhYmxvZmVycmVpcm8uZXMvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3Byb3hpdG9rLnB1c3N0aGVjYXQub3JnLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly90b2suaGFiZWRpZWVoLnJlLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9wcm94aXRvay5lc21haWxlbGJvYi54eXovKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3Byb3hpdG9rLnByaXZhY3lkZXYubmV0LyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly90b2suYXJ0ZW1pc2xlbmEuZXUvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3Rvay5hZG1pbmZvcmdlLmRlLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly90dC52ZXJuLmNjLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9jcmluZ2Uud2hhdGV2ZXIuc29jaWFsLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9wcm94aXRvay5sdW5hci5pY3UvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3Byb3hpdG9rLnByaXZhY3kuY29tLmRlLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9wZWVydHViZS4xMzEyLm1lZGlhLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly90dWJlLnNoYW50aS5jYWZlLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmJlZS10dWJlLmZyLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly92aWRlby5zYWRtaW4uaW8vKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyouZGFsZWsuem9uZS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vcmV2aWV3LnBlZXJ0dWJlLmJpei8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5wZWVydmlkZW8uY2x1Yi8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vdHViZS5sYS1kaW5hLm5ldC8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vcGVlcnR1YmUudG1wLnJjcC50Zi8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5wZWVydHViZS5zdS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vdmlkZW8uYmxlbmRlci5vcmcvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3ZpZGVvcy52aW9yc2FuLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vdHViZS1zY2llbmNlcy10ZWNobm9sb2dpZXMuYXBwcy5lZHVjYXRpb24uZnIvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3R1YmUtbnVtZXJpcXVlLWVkdWNhdGlmLmFwcHMuZWR1Y2F0aW9uLmZyLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly90dWJlLWFydHMtbGV0dHJlcy1zY2llbmNlcy1odW1haW5lcy5hcHBzLmVkdWNhdGlvbi5mci8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5iZWV0b29ucy50di8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vY29taWNzLnBlZXJ0dWJlLmJpei8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5tYWtlcnR1YmUubmV0LyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLnBva2V0dWJlLmZ1bi8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vcHQuc3Vkb3ZhbmlsbGEub3JnLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9wb2tlLmdndHlsZXIuZGV2LyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9wb2tlLnVrMi5saXR0bGVrYWkuY28udWsvKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3Bva2UuYmxhaGFpLmdheS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5yaWNrdHViZS5ydS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vKi5jb3Vyc2VodW50ZXIubmV0LyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly8qLmNvdXJzZXRyYWluLm5ldC8qCi8vIEBleGNsdWRlICAgICAgICBmaWxlOi8vKi8qLm1wNCoKLy8gQGV4Y2x1ZGUgICAgICAgIGZpbGU6Ly8qLyoud2VibSoKLy8gQGV4Y2x1ZGUgICAgICAgICo6Ly9hY2NvdW50cy55b3V0dWJlLmNvbS8qCi8vIEBjb25uZWN0ICAgICAgICB5YW5kZXgucnUKLy8gQGNvbm5lY3QgICAgICAgIGRpc2sueWFuZGV4Lmt6Ci8vIEBjb25uZWN0ICAgICAgICBkaXNrLnlhbmRleC5jb20KLy8gQGNvbm5lY3QgICAgICAgIGRpc2sueWFuZGV4LmNvbS5hbQovLyBAY29ubmVjdCAgICAgICAgZGlzay55YW5kZXguY29tLmdlCi8vIEBjb25uZWN0ICAgICAgICBkaXNrLnlhbmRleC5jb20udHIKLy8gQGNvbm5lY3QgICAgICAgIGRpc2sueWFuZGV4LmJ5Ci8vIEBjb25uZWN0ICAgICAgICBkaXNrLnlhbmRleC5hegovLyBAY29ubmVjdCAgICAgICAgZGlzay55YW5kZXguY28uaWwKLy8gQGNvbm5lY3QgICAgICAgIGRpc2sueWFuZGV4LmVlCi8vIEBjb25uZWN0ICAgICAgICBkaXNrLnlhbmRleC5sdAovLyBAY29ubmVjdCAgICAgICAgZGlzay55YW5kZXgubHYKLy8gQGNvbm5lY3QgICAgICAgIGRpc2sueWFuZGV4Lm1kCi8vIEBjb25uZWN0ICAgICAgICBkaXNrLnlhbmRleC5uZXQKLy8gQGNvbm5lY3QgICAgICAgIGRpc2sueWFuZGV4LnRqCi8vIEBjb25uZWN0ICAgICAgICBkaXNrLnlhbmRleC50bQovLyBAY29ubmVjdCAgICAgICAgZGlzay55YW5kZXgudXoKLy8gQGNvbm5lY3QgICAgICAgIHlhbmRleC5uZXQKLy8gQGNvbm5lY3QgICAgICAgIHRpbWV3ZWIuY2xvdWQKLy8gQGNvbm5lY3QgICAgICAgIHJhdy5naXRodWJ1c2VyY29udGVudC5jb20KLy8gQGNvbm5lY3QgICAgICAgIHZpbWVvLmNvbQovLyBAY29ubmVjdCAgICAgICAgdG9pbC5jYwovLyBAY29ubmVjdCAgICAgICAgZGVuby5kZXYKLy8gQGNvbm5lY3QgICAgICAgIG9ucmVuZGVyLmNvbQovLyBAY29ubmVjdCAgICAgICAgd29ya2Vycy5kZXYKLy8gQGNvbm5lY3QgICAgICAgIHNwZWVkLmNsb3VkZmxhcmUuY29tCi8vIEBjb25uZWN0ICAgICAgICBwb3JudG4uY29tCi8vIEBjb25uZWN0ICAgICAgICBnb29nbGV2aWRlby5jb20KLy8gQG5hbWVzcGFjZSAgICAgIHZvdAovLyBAdmVyc2lvbiAgICAgICAgMS4xMC41Ci8vIEBpY29uICAgICAgICAgICBodHRwczovL3RyYW5zbGF0ZS55YW5kZXgucnUvaWNvbnMvZmF2aWNvbi5pY28KLy8gQGF1dGhvciAgICAgICAgIFRvaWwsIFNhc2hhWHNlciwgTXJTb2N6ZWtYRCwgbXlub3ZlbGhvc3QsIHNvZGFwbmcKLy8gQGhvbWVwYWdlVVJMICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9pbHloYWxpZ2h0L3ZvaWNlLW92ZXItdHJhbnNsYXRpb24KLy8gQHVwZGF0ZVVSTCAgICAgIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9pbHloYWxpZ2h0L3ZvaWNlLW92ZXItdHJhbnNsYXRpb24vbWFzdGVyL2Rpc3Qvdm90LnVzZXIuanMKLy8gQGRvd25sb2FkVVJMICAgIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9pbHloYWxpZ2h0L3ZvaWNlLW92ZXItdHJhbnNsYXRpb24vbWFzdGVyL2Rpc3Qvdm90LnVzZXIuanMKLy8gQHN1cHBvcnRVUkwgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9pbHloYWxpZ2h0L3ZvaWNlLW92ZXItdHJhbnNsYXRpb24vaXNzdWVzCi8vID09L1VzZXJTY3JpcHQ9PQoKKCgpID0+IHsKCXZhciBkID0gewoJCSIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2NvcmUvZGlzdC9jbGllbnQuanMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgewoJCQkJCQlBeTogKCkgPT4gVk9UQ2xpZW50LAoJCQkJCQlQdTogKCkgPT4gVk9UV29ya2VyQ2xpZW50CgkJCQkJfSk7CgkJCQkJdmFyIGggPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL3NoYXJlZC9kaXN0L2RhdGEvY29uZmlnLmpzIiksIGcgPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL3NoYXJlZC9kaXN0L3V0aWxzL2xvZ2dlci5qcyIpLCBfID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9zaGFyZWQvZGlzdC9wcm90b3MveWFuZGV4LmpzIiksIHYgPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL3NoYXJlZC9kaXN0L3NlY3VyZS5qcyIpLCBiID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9zaGFyZWQvZGlzdC91dGlscy91dGlscy5qcyIpLCB4ID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9jb3JlL2Rpc3QvcHJvdG9idWYuanMiKSwgQyA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvY29yZS9kaXN0L3R5cGVzL3lhbmRleC5qcyIpLCB3ID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9jb3JlL2Rpc3QvdXRpbHMvdm90LmpzIiksIFQgPSBwKCIuL3NyYy91dGlscy9WT1RMb2NhbGl6ZWRFcnJvci5qcyIpLCBFID0gZChbVF0pOwoJCQkJCVQgPSAoRS50aGVuID8gKGF3YWl0IEUpKCkgOiBFKVswXTsKCQkJCQljbGFzcyBWT1RKU0Vycm9yIGV4dGVuZHMgRXJyb3IgewoJCQkJCQlkYXRhOwoJCQkJCQljb25zdHJ1Y3RvcihkLCBmID0gdm9pZCAwKSB7CgkJCQkJCQlzdXBlcihkKSwgdGhpcy5kYXRhID0gZiwgdGhpcy5uYW1lID0gIlZPVEpTRXJyb3IiLCB0aGlzLm1lc3NhZ2UgPSBkOwoJCQkJCQl9CgkJCQkJfQoJCQkJCWNsYXNzIE1pbmltYWxDbGllbnQgewoJCQkJCQlob3N0OwoJCQkJCQlzY2hlbWE7CgkJCQkJCWZldGNoOwoJCQkJCQlmZXRjaE9wdHM7CgkJCQkJCXNlc3Npb25zID0ge307CgkJCQkJCXVzZXJBZ2VudCA9IGguQS51c2VyQWdlbnQ7CgkJCQkJCWhlYWRlcnMgPSB7CgkJCQkJCQkiVXNlci1BZ2VudCI6IHRoaXMudXNlckFnZW50LAoJCQkJCQkJQWNjZXB0OiAiYXBwbGljYXRpb24veC1wcm90b2J1ZiIsCgkJCQkJCQkiQWNjZXB0LUxhbmd1YWdlIjogImVuIiwKCQkJCQkJCSJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24veC1wcm90b2J1ZiIsCgkJCQkJCQlQcmFnbWE6ICJuby1jYWNoZSIsCgkJCQkJCQkiQ2FjaGUtQ29udHJvbCI6ICJuby1jYWNoZSIKCQkJCQkJfTsKCQkJCQkJaG9zdFNjaGVtYVJlID0gLyhodHRwKHMpPyk6XC9cLy87CgkJCQkJCWNvbnN0cnVjdG9yKHsgaG9zdDogZCA9IGguQS5ob3N0LCBmZXRjaEZuOiBmID0gYi51OSwgZmV0Y2hPcHRzOiBwID0ge30sIGhlYWRlcnM6IG0gPSB7fSB9ID0ge30pIHsKCQkJCQkJCWxldCBnID0gdGhpcy5ob3N0U2NoZW1hUmUuZXhlYyhkKT8uWzFdOwoJCQkJCQkJdGhpcy5ob3N0ID0gZyA/IGQucmVwbGFjZShgJHtnfTovL2AsICIiKSA6IGQsIHRoaXMuc2NoZW1hID0gZyA/PyAiaHR0cHMiLCB0aGlzLmZldGNoID0gZiwgdGhpcy5mZXRjaE9wdHMgPSBwLCB0aGlzLmhlYWRlcnMgPSB7CgkJCQkJCQkJLi4udGhpcy5oZWFkZXJzLAoJCQkJCQkJCS4uLm0KCQkJCQkJCX07CgkJCQkJCX0KCQkJCQkJYXN5bmMgcmVxdWVzdChkLCBmLCBwID0ge30sIG0gPSAiUE9TVCIpIHsKCQkJCQkJCWxldCBoID0gdGhpcy5nZXRPcHRzKG5ldyBCbG9iKFtmXSksIHAsIG0pOwoJCQkJCQkJdHJ5IHsKCQkJCQkJCQlsZXQgZiA9IGF3YWl0IHRoaXMuZmV0Y2goYCR7dGhpcy5zY2hlbWF9Oi8vJHt0aGlzLmhvc3R9JHtkfWAsIGgpLCBwID0gYXdhaXQgZi5hcnJheUJ1ZmZlcigpOwoJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCXN1Y2Nlc3M6IGYuc3RhdHVzID09PSAyMDAsCgkJCQkJCQkJCWRhdGE6IHAKCQkJCQkJCQl9OwoJCQkJCQkJfSBjYXRjaCAoZCkgewoJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCXN1Y2Nlc3M6ICExLAoJCQkJCQkJCQlkYXRhOiBkPy5tZXNzYWdlCgkJCQkJCQkJfTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQlhc3luYyByZXF1ZXN0SlNPTihkLCBmID0gbnVsbCwgcCA9IHt9LCBtID0gIlBPU1QiKSB7CgkJCQkJCQlsZXQgaCA9IHRoaXMuZ2V0T3B0cyhmLCB7CgkJCQkJCQkJIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKCQkJCQkJCQkuLi5wCgkJCQkJCQl9LCBtKTsKCQkJCQkJCXRyeSB7CgkJCQkJCQkJbGV0IGYgPSBhd2FpdCB0aGlzLmZldGNoKGAke3RoaXMuc2NoZW1hfTovLyR7dGhpcy5ob3N0fSR7ZH1gLCBoKSwgcCA9IGF3YWl0IGYuanNvbigpOwoJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCXN1Y2Nlc3M6IGYuc3RhdHVzID09PSAyMDAsCgkJCQkJCQkJCWRhdGE6IHAKCQkJCQkJCQl9OwoJCQkJCQkJfSBjYXRjaCAoZCkgewoJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCXN1Y2Nlc3M6ICExLAoJCQkJCQkJCQlkYXRhOiBkPy5tZXNzYWdlCgkJCQkJCQkJfTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQlnZXRPcHRzKGQsIGYgPSB7fSwgcCA9ICJQT1NUIikgewoJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQltZXRob2Q6IHAsCgkJCQkJCQkJaGVhZGVyczogewoJCQkJCQkJCQkuLi50aGlzLmhlYWRlcnMsCgkJCQkJCQkJCS4uLmYKCQkJCQkJCQl9LAoJCQkJCQkJCWJvZHk6IGQsCgkJCQkJCQkJLi4udGhpcy5mZXRjaE9wdHMKCQkJCQkJCX07CgkJCQkJCX0KCQkJCQkJYXN5bmMgZ2V0U2Vzc2lvbihkKSB7CgkJCQkJCQlsZXQgZiA9ICgwLCBiLmxnKSgpLCBwID0gdGhpcy5zZXNzaW9uc1tkXTsKCQkJCQkJCWlmIChwICYmIHAudGltZXN0YW1wICsgcC5leHBpcmVzID4gZikgcmV0dXJuIHA7CgkJCQkJCQlsZXQgeyBzZWNyZXRLZXk6IG0sIGV4cGlyZXM6IGgsIHV1aWQ6IGcgfSA9IGF3YWl0IHRoaXMuY3JlYXRlU2Vzc2lvbihkKTsKCQkJCQkJCXJldHVybiB0aGlzLnNlc3Npb25zW2RdID0gewoJCQkJCQkJCXNlY3JldEtleTogbSwKCQkJCQkJCQlleHBpcmVzOiBoLAoJCQkJCQkJCXRpbWVzdGFtcDogZiwKCQkJCQkJCQl1dWlkOiBnCgkJCQkJCQl9LCB0aGlzLnNlc3Npb25zW2RdOwoJCQkJCQl9CgkJCQkJCWFzeW5jIGNyZWF0ZVNlc3Npb24oZCkgewoJCQkJCQkJbGV0IGYgPSAoMCwgdi55aykoKSwgcCA9IHguUC5lbmNvZGVTZXNzaW9uUmVxdWVzdChmLCBkKSwgbSA9IGF3YWl0IHRoaXMucmVxdWVzdCgiL3Nlc3Npb24vY3JlYXRlIiwgcCwgeyAiVnRyYW5zLVNpZ25hdHVyZSI6IGF3YWl0ICgwLCB2LmREKShwKSB9KTsKCQkJCQkJCWlmICghbS5zdWNjZXNzKSB0aHJvdyBuZXcgVk9USlNFcnJvcigiRmFpbGVkIHRvIHJlcXVlc3QgY3JlYXRlIHNlc3Npb24iLCBtKTsKCQkJCQkJCWxldCBoID0geC5QLmRlY29kZVNlc3Npb25SZXNwb25zZShtLmRhdGEpOwoJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkuLi5oLAoJCQkJCQkJCXV1aWQ6IGYKCQkJCQkJCX07CgkJCQkJCX0KCQkJCQl9CgkJCQkJY2xhc3MgVk9UQ2xpZW50IGV4dGVuZHMgTWluaW1hbENsaWVudCB7CgkJCQkJCWhvc3RWT1Q7CgkJCQkJCXNjaGVtYVZPVDsKCQkJCQkJYXBpVG9rZW47CgkJCQkJCXJlcXVlc3RMYW5nOwoJCQkJCQlyZXNwb25zZUxhbmc7CgkJCQkJCXBhdGhzID0gewoJCQkJCQkJdmlkZW9UcmFuc2xhdGlvbjogIi92aWRlby10cmFuc2xhdGlvbi90cmFuc2xhdGUiLAoJCQkJCQkJdmlkZW9UcmFuc2xhdGlvbkZhaWxBdWRpbzogIi92aWRlby10cmFuc2xhdGlvbi9mYWlsLWF1ZGlvLWpzIiwKCQkJCQkJCXZpZGVvVHJhbnNsYXRpb25BdWRpbzogIi92aWRlby10cmFuc2xhdGlvbi9hdWRpbyIsCgkJCQkJCQl2aWRlb1RyYW5zbGF0aW9uQ2FjaGU6ICIvdmlkZW8tdHJhbnNsYXRpb24vY2FjaGUiLAoJCQkJCQkJdmlkZW9TdWJ0aXRsZXM6ICIvdmlkZW8tc3VidGl0bGVzL2dldC1zdWJ0aXRsZXMiLAoJCQkJCQkJc3RyZWFtUGluZzogIi9zdHJlYW0tdHJhbnNsYXRpb24vcGluZy1zdHJlYW0iLAoJCQkJCQkJc3RyZWFtVHJhbnNsYXRpb246ICIvc3RyZWFtLXRyYW5zbGF0aW9uL3RyYW5zbGF0ZS1zdHJlYW0iCgkJCQkJCX07CgkJCQkJCWlzQ3VzdG9tTGluayhkKSB7CgkJCQkJCQlyZXR1cm4gISEoL1wuKG0zdTh8bTQoYXx2KXxtcGQpLy5leGVjKGQpID8/IC9eaHR0cHM6XC9cL2NkblwucXN0dlwub25cLmVwaWNnYW1lc1wuY29tLy5leGVjKGQpKTsKCQkJCQkJfQoJCQkJCQloZWFkZXJzVk9UID0gewoJCQkJCQkJIlVzZXItQWdlbnQiOiBgdm90LmpzLyR7aC5BLnZlcnNpb259YCwKCQkJCQkJCSJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCgkJCQkJCQlQcmFnbWE6ICJuby1jYWNoZSIsCgkJCQkJCQkiQ2FjaGUtQ29udHJvbCI6ICJuby1jYWNoZSIKCQkJCQkJfTsKCQkJCQkJY29uc3RydWN0b3IoeyBob3N0OiBkLCBob3N0Vk9UOiBmID0gaC5BLmhvc3RWT1QsIGZldGNoRm46IHAsIGZldGNoT3B0czogbSwgcmVxdWVzdExhbmc6IGcgPSAiZW4iLCByZXNwb25zZUxhbmc6IF8gPSAicnUiLCBhcGlUb2tlbjogdiwgaGVhZGVyczogYiB9ID0ge30pIHsKCQkJCQkJCXN1cGVyKHsKCQkJCQkJCQlob3N0OiBkLAoJCQkJCQkJCWZldGNoRm46IHAsCgkJCQkJCQkJZmV0Y2hPcHRzOiBtLAoJCQkJCQkJCWhlYWRlcnM6IGIKCQkJCQkJCX0pOwoJCQkJCQkJbGV0IHggPSB0aGlzLmhvc3RTY2hlbWFSZS5leGVjKGYpPy5bMV07CgkJCQkJCQl0aGlzLmhvc3RWT1QgPSB4ID8gZi5yZXBsYWNlKGAke3h9Oi8vYCwgIiIpIDogZiwgdGhpcy5zY2hlbWFWT1QgPSB4ID8/ICJodHRwcyIsIHRoaXMucmVxdWVzdExhbmcgPSBnLCB0aGlzLnJlc3BvbnNlTGFuZyA9IF8sIHRoaXMuYXBpVG9rZW4gPSB2OwoJCQkJCQl9CgkJCQkJCWdldCBhcGlUb2tlbkhlYWRlcigpIHsKCQkJCQkJCXJldHVybiB0aGlzLmFwaVRva2VuID8geyBBdXRob3JpemF0aW9uOiBgT0F1dGggJHt0aGlzLmFwaVRva2VufWAgfSA6IHt9OwoJCQkJCQl9CgkJCQkJCWFzeW5jIHJlcXVlc3RWT1QoZCwgZiwgcCA9IHt9KSB7CgkJCQkJCQlsZXQgbSA9IHRoaXMuZ2V0T3B0cyhKU09OLnN0cmluZ2lmeShmKSwgewoJCQkJCQkJCS4uLnRoaXMuaGVhZGVyc1ZPVCwKCQkJCQkJCQkuLi5wCgkJCQkJCQl9KTsKCQkJCQkJCXRyeSB7CgkJCQkJCQkJbGV0IGYgPSBhd2FpdCB0aGlzLmZldGNoKGAke3RoaXMuc2NoZW1hVk9UfTovLyR7dGhpcy5ob3N0Vk9UfSR7ZH1gLCBtKSwgcCA9IGF3YWl0IGYuanNvbigpOwoJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCXN1Y2Nlc3M6IGYuc3RhdHVzID09PSAyMDAsCgkJCQkJCQkJCWRhdGE6IHAKCQkJCQkJCQl9OwoJCQkJCQkJfSBjYXRjaCAoZCkgewoJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCXN1Y2Nlc3M6ICExLAoJCQkJCQkJCQlkYXRhOiBkPy5tZXNzYWdlCgkJCQkJCQkJfTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQlhc3luYyB0cmFuc2xhdGVWaWRlb1lBSW1wbCh7IHZpZGVvRGF0YTogZCwgcmVxdWVzdExhbmc6IGYgPSB0aGlzLnJlcXVlc3RMYW5nLCByZXNwb25zZUxhbmc6IHAgPSB0aGlzLnJlc3BvbnNlTGFuZywgdHJhbnNsYXRpb25IZWxwOiBtID0gbnVsbCwgaGVhZGVyczogXyA9IHt9LCBleHRyYU9wdHM6IGIgPSB7fSwgc2hvdWxkU2VuZEZhaWxlZEF1ZGlvOiB3ID0gITAgfSkgewoJCQkJCQkJbGV0IHsgdXJsOiBFLCBkdXJhdGlvbjogRCA9IGguQS5kZWZhdWx0RHVyYXRpb24gfSA9IGQsIE8gPSBhd2FpdCB0aGlzLmdldFNlc3Npb24oInZpZGVvLXRyYW5zbGF0aW9uIiksIEEgPSB4LlMuZW5jb2RlVHJhbnNsYXRpb25SZXF1ZXN0KEUsIEQsIGYsIHAsIG0sIGIpLCBqID0gdGhpcy5wYXRocy52aWRlb1RyYW5zbGF0aW9uLCBGID0gYXdhaXQgKDAsIHYuQzApKCJWdHJhbnMiLCBPLCBBLCBqKSwgVSA9IGIudXNlTGl2ZWx5Vm9pY2UgPyB0aGlzLmFwaVRva2VuSGVhZGVyIDoge30sIFcgPSBhd2FpdCB0aGlzLnJlcXVlc3QoaiwgQSwgewoJCQkJCQkJCS4uLkYsCgkJCQkJCQkJLi4uVSwKCQkJCQkJCQkuLi5fCgkJCQkJCQl9KTsKCQkJCQkJCWlmICghVy5zdWNjZXNzKSB0aHJvdyBuZXcgVC5uKCJyZXF1ZXN0VHJhbnNsYXRpb25GYWlsZWQiKTsKCQkJCQkJCWxldCBHID0geC5TLmRlY29kZVRyYW5zbGF0aW9uUmVzcG9uc2UoVy5kYXRhKTsKCQkJCQkJCWcuQS5sb2coInRyYW5zbGF0ZVZpZGVvIiwgRyk7CgkJCQkJCQlsZXQgeyBzdGF0dXM6IEssIHRyYW5zbGF0aW9uSWQ6IHEgfSA9IEc7CgkJCQkJCQlzd2l0Y2ggKEspIHsKCQkJCQkJCQljYXNlIEMudi5GQUlMRUQ6IHRocm93IEc/Lm1lc3NhZ2UgPyBuZXcgVk9USlNFcnJvcigiWWFuZGV4IGNvdWxkbid0IHRyYW5zbGF0ZSB2aWRlbyIsIEcpIDogbmV3IFQubigicmVxdWVzdFRyYW5zbGF0aW9uRmFpbGVkIik7CgkJCQkJCQkJY2FzZSBDLnYuRklOSVNIRUQ6CgkJCQkJCQkJY2FzZSBDLnYuUEFSVF9DT05URU5UOgoJCQkJCQkJCQlpZiAoIUcudXJsKSB0aHJvdyBuZXcgVC5uKCJhdWRpb05vdFJlY2VpdmVkIik7CgkJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCQl0cmFuc2xhdGlvbklkOiBxLAoJCQkJCQkJCQkJdHJhbnNsYXRlZDogITAsCgkJCQkJCQkJCQl1cmw6IEcudXJsLAoJCQkJCQkJCQkJc3RhdHVzOiBLLAoJCQkJCQkJCQkJcmVtYWluaW5nVGltZTogRy5yZW1haW5pbmdUaW1lID8/IC0xCgkJCQkJCQkJCX07CgkJCQkJCQkJY2FzZSBDLnYuV0FJVElORzoKCQkJCQkJCQljYXNlIEMudi5MT05HX1dBSVRJTkc6IHJldHVybiB7CgkJCQkJCQkJCXRyYW5zbGF0aW9uSWQ6IHEsCgkJCQkJCQkJCXRyYW5zbGF0ZWQ6ICExLAoJCQkJCQkJCQlzdGF0dXM6IEssCgkJCQkJCQkJCXJlbWFpbmluZ1RpbWU6IEcucmVtYWluaW5nVGltZQoJCQkJCQkJCX07CgkJCQkJCQkJY2FzZSBDLnYuQVVESU9fUkVRVUVTVEVEOiByZXR1cm4gRS5zdGFydHNXaXRoKCJodHRwczovL3lvdXR1LmJlLyIpICYmIHcgPyAoYXdhaXQgdGhpcy5yZXF1ZXN0VnRyYW5zRmFpbEF1ZGlvKEUpLCBhd2FpdCB0aGlzLnJlcXVlc3RWdHJhbnNBdWRpbyhFLCBHLnRyYW5zbGF0aW9uSWQsIHsKCQkJCQkJCQkJYXVkaW9GaWxlOiBuZXcgVWludDhBcnJheSgpLAoJCQkJCQkJCQlmaWxlSWQ6IEMuSi5XRUJfQVBJX0dFVF9BTExfR0VORVJBVElOR19VUkxTX0RBVEFfRlJPTV9JRlJBTUUKCQkJCQkJCQl9KSwgYXdhaXQgdGhpcy50cmFuc2xhdGVWaWRlb1lBSW1wbCh7CgkJCQkJCQkJCXZpZGVvRGF0YTogZCwKCQkJCQkJCQkJcmVxdWVzdExhbmc6IGYsCgkJCQkJCQkJCXJlc3BvbnNlTGFuZzogcCwKCQkJCQkJCQkJdHJhbnNsYXRpb25IZWxwOiBtLAoJCQkJCQkJCQloZWFkZXJzOiBfLAoJCQkJCQkJCQlzaG91bGRTZW5kRmFpbGVkQXVkaW86ICExCgkJCQkJCQkJfSkpIDogewoJCQkJCQkJCQl0cmFuc2xhdGlvbklkOiBxLAoJCQkJCQkJCQl0cmFuc2xhdGVkOiAhMSwKCQkJCQkJCQkJc3RhdHVzOiBLLAoJCQkJCQkJCQlyZW1haW5pbmdUaW1lOiBHLnJlbWFpbmluZ1RpbWUgPz8gLTEKCQkJCQkJCQl9OwoJCQkJCQkJCWNhc2UgQy52LlNFU1NJT05fUkVRVUlSRUQ6IHRocm93IG5ldyBWT1RKU0Vycm9yKCJZYW5kZXggYXV0aCByZXF1aXJlZCB0byB0cmFuc2xhdGUgdmlkZW8uIFNlZSBkb2NzIGZvciBtb3JlIGluZm8iLCBHKTsKCQkJCQkJCQlkZWZhdWx0OiB0aHJvdyBnLkEuZXJyb3IoIlVua25vd24gcmVzcG9uc2UiLCBHKSwgbmV3IFZPVEpTRXJyb3IoIlVua25vd24gcmVzcG9uc2UgZnJvbSBZYW5kZXgiLCBHKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQlhc3luYyB0cmFuc2xhdGVWaWRlb1ZPVEltcGwoeyB1cmw6IGQsIHZpZGVvSWQ6IGYsIHNlcnZpY2U6IHAsIHJlcXVlc3RMYW5nOiBtID0gdGhpcy5yZXF1ZXN0TGFuZywgcmVzcG9uc2VMYW5nOiBoID0gdGhpcy5yZXNwb25zZUxhbmcsIGhlYWRlcnM6IGcgPSB7fSwgcHJvdmlkZXI6IF8gPSAieWFuZGV4IiB9KSB7CgkJCQkJCQlsZXQgdiA9ICgwLCB3LnApKHAsIGYsIGQpLCBiID0gYXdhaXQgdGhpcy5yZXF1ZXN0Vk9UKHRoaXMucGF0aHMudmlkZW9UcmFuc2xhdGlvbiwgewoJCQkJCQkJCXByb3ZpZGVyOiBfLAoJCQkJCQkJCXNlcnZpY2U6IHYuc2VydmljZSwKCQkJCQkJCQl2aWRlb19pZDogdi52aWRlb0lkLAoJCQkJCQkJCWZyb21fbGFuZzogbSwKCQkJCQkJCQl0b19sYW5nOiBoLAoJCQkJCQkJCXJhd192aWRlbzogZAoJCQkJCQkJfSwgeyAuLi5nIH0pOwoJCQkJCQkJaWYgKCFiLnN1Y2Nlc3MpIHRocm93IG5ldyBULm4oInJlcXVlc3RUcmFuc2xhdGlvbkZhaWxlZCIpOwoJCQkJCQkJbGV0IHggPSBiLmRhdGE7CgkJCQkJCQlzd2l0Y2ggKHguc3RhdHVzKSB7CgkJCQkJCQkJY2FzZSAiZmFpbGVkIjogdGhyb3cgbmV3IFZPVEpTRXJyb3IoIllhbmRleCBjb3VsZG4ndCB0cmFuc2xhdGUgdmlkZW8iLCB4KTsKCQkJCQkJCQljYXNlICJzdWNjZXNzIjoKCQkJCQkJCQkJaWYgKCF4LnRyYW5zbGF0ZWRfdXJsKSB0aHJvdyBuZXcgVC5uKCJhdWRpb05vdFJlY2VpdmVkIik7CgkJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCQl0cmFuc2xhdGlvbklkOiBTdHJpbmcoeC5pZCksCgkJCQkJCQkJCQl0cmFuc2xhdGVkOiAhMCwKCQkJCQkJCQkJCXVybDogeC50cmFuc2xhdGVkX3VybCwKCQkJCQkJCQkJCXN0YXR1czogMSwKCQkJCQkJCQkJCXJlbWFpbmluZ1RpbWU6IC0xCgkJCQkJCQkJCX07CgkJCQkJCQkJY2FzZSAid2FpdGluZyI6IHJldHVybiB7CgkJCQkJCQkJCXRyYW5zbGF0aW9uSWQ6ICIiLAoJCQkJCQkJCQl0cmFuc2xhdGVkOiAhMSwKCQkJCQkJCQkJcmVtYWluaW5nVGltZTogeC5yZW1haW5pbmdfdGltZSwKCQkJCQkJCQkJc3RhdHVzOiAyLAoJCQkJCQkJCQltZXNzYWdlOiB4Lm1lc3NhZ2UKCQkJCQkJCQl9OwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWFzeW5jIHJlcXVlc3RWdHJhbnNGYWlsQXVkaW8oZCkgewoJCQkJCQkJbGV0IGYgPSBhd2FpdCB0aGlzLnJlcXVlc3RKU09OKHRoaXMucGF0aHMudmlkZW9UcmFuc2xhdGlvbkZhaWxBdWRpbywgSlNPTi5zdHJpbmdpZnkoeyB2aWRlb191cmw6IGQgfSksIHZvaWQgMCwgIlBVVCIpOwoJCQkJCQkJaWYgKCFmLmRhdGEgfHwgdHlwZW9mIGYuZGF0YSA9PSAic3RyaW5nIiB8fCBmLmRhdGEuc3RhdHVzICE9PSAxKSB0aHJvdyBuZXcgVk9USlNFcnJvcigiRmFpbGVkIHRvIHJlcXVlc3QgdG8gZmFrZSB2aWRlbyB0cmFuc2xhdGlvbiBmYWlsIGF1ZGlvIGpzIiwgZik7CgkJCQkJCQlyZXR1cm4gZjsKCQkJCQkJfQoJCQkJCQlhc3luYyByZXF1ZXN0VnRyYW5zQXVkaW8oZCwgZiwgcCwgbSwgaCA9IHt9KSB7CgkJCQkJCQlsZXQgZyA9IGF3YWl0IHRoaXMuZ2V0U2Vzc2lvbigidmlkZW8tdHJhbnNsYXRpb24iKSwgXyA9IHguUy5pc1BhcnRpYWxBdWRpb0J1ZmZlcihwKSA/IHguUy5lbmNvZGVUcmFuc2xhdGlvbkF1ZGlvUmVxdWVzdChkLCBmLCBwLCBtKSA6IHguUy5lbmNvZGVUcmFuc2xhdGlvbkF1ZGlvUmVxdWVzdChkLCBmLCBwLCB2b2lkIDApLCBiID0gdGhpcy5wYXRocy52aWRlb1RyYW5zbGF0aW9uQXVkaW8sIEMgPSBhd2FpdCAoMCwgdi5DMCkoIlZ0cmFucyIsIGcsIF8sIGIpLCB3ID0gYXdhaXQgdGhpcy5yZXF1ZXN0KGIsIF8sIHsKCQkJCQkJCQkuLi5DLAoJCQkJCQkJCS4uLmgKCQkJCQkJCX0sICJQVVQiKTsKCQkJCQkJCWlmICghdy5zdWNjZXNzKSB0aHJvdyBuZXcgVk9USlNFcnJvcigiRmFpbGVkIHRvIHJlcXVlc3QgdmlkZW8gdHJhbnNsYXRpb24gYXVkaW8iLCB3KTsKCQkJCQkJCXJldHVybiB4LlMuZGVjb2RlVHJhbnNsYXRpb25BdWRpb1Jlc3BvbnNlKHcuZGF0YSk7CgkJCQkJCX0KCQkJCQkJYXN5bmMgdHJhbnNsYXRlVmlkZW9DYWNoZSh7IHZpZGVvRGF0YTogZCwgcmVxdWVzdExhbmc6IGYgPSB0aGlzLnJlcXVlc3RMYW5nLCByZXNwb25zZUxhbmc6IHAgPSB0aGlzLnJlc3BvbnNlTGFuZywgaGVhZGVyczogbSA9IHt9IH0pIHsKCQkJCQkJCWxldCB7IHVybDogZywgZHVyYXRpb246IF8gPSBoLkEuZGVmYXVsdER1cmF0aW9uIH0gPSBkLCBiID0gYXdhaXQgdGhpcy5nZXRTZXNzaW9uKCJ2aWRlby10cmFuc2xhdGlvbiIpLCBDID0geC5TLmVuY29kZVRyYW5zbGF0aW9uQ2FjaGVSZXF1ZXN0KGcsIF8sIGYsIHApLCB3ID0gdGhpcy5wYXRocy52aWRlb1RyYW5zbGF0aW9uQ2FjaGUsIFQgPSBhd2FpdCAoMCwgdi5DMCkoIlZ0cmFucyIsIGIsIEMsIHcpLCBFID0gYXdhaXQgdGhpcy5yZXF1ZXN0KHcsIEMsIHsKCQkJCQkJCQkuLi5ULAoJCQkJCQkJCS4uLm0KCQkJCQkJCX0sICJQT1NUIik7CgkJCQkJCQlpZiAoIUUuc3VjY2VzcykgdGhyb3cgbmV3IFZPVEpTRXJyb3IoIkZhaWxlZCB0byByZXF1ZXN0IHZpZGVvIHRyYW5zbGF0aW9uIGNhY2hlIiwgRSk7CgkJCQkJCQlyZXR1cm4geC5TLmRlY29kZVRyYW5zbGF0aW9uQ2FjaGVSZXNwb25zZShFLmRhdGEpOwoJCQkJCQl9CgkJCQkJCWFzeW5jIHRyYW5zbGF0ZVZpZGVvKHsgdmlkZW9EYXRhOiBkLCByZXF1ZXN0TGFuZzogZiA9IHRoaXMucmVxdWVzdExhbmcsIHJlc3BvbnNlTGFuZzogcCA9IHRoaXMucmVzcG9uc2VMYW5nLCB0cmFuc2xhdGlvbkhlbHA6IG0gPSBudWxsLCBoZWFkZXJzOiBoID0ge30sIGV4dHJhT3B0czogZyA9IHt9LCBzaG91bGRTZW5kRmFpbGVkQXVkaW86IF8gPSAhMCB9KSB7CgkJCQkJCQlsZXQgeyB1cmw6IHYsIHZpZGVvSWQ6IGIsIGhvc3Q6IHggfSA9IGQ7CgkJCQkJCQlyZXR1cm4gdGhpcy5pc0N1c3RvbUxpbmsodikgPyBhd2FpdCB0aGlzLnRyYW5zbGF0ZVZpZGVvVk9USW1wbCh7CgkJCQkJCQkJdXJsOiB2LAoJCQkJCQkJCXZpZGVvSWQ6IGIsCgkJCQkJCQkJc2VydmljZTogeCwKCQkJCQkJCQlyZXF1ZXN0TGFuZzogZiwKCQkJCQkJCQlyZXNwb25zZUxhbmc6IHAsCgkJCQkJCQkJaGVhZGVyczogaCwKCQkJCQkJCQlwcm92aWRlcjogZy51c2VMaXZlbHlWb2ljZSA/ICJ5YW5kZXhfbGl2ZWx5IiA6ICJ5YW5kZXgiCgkJCQkJCQl9KSA6IGF3YWl0IHRoaXMudHJhbnNsYXRlVmlkZW9ZQUltcGwoewoJCQkJCQkJCXZpZGVvRGF0YTogZCwKCQkJCQkJCQlyZXF1ZXN0TGFuZzogZiwKCQkJCQkJCQlyZXNwb25zZUxhbmc6IHAsCgkJCQkJCQkJdHJhbnNsYXRpb25IZWxwOiBtLAoJCQkJCQkJCWhlYWRlcnM6IGgsCgkJCQkJCQkJZXh0cmFPcHRzOiBnLAoJCQkJCQkJCXNob3VsZFNlbmRGYWlsZWRBdWRpbzogXwoJCQkJCQkJfSk7CgkJCQkJCX0KCQkJCQkJYXN5bmMgZ2V0U3VidGl0bGVzWUFJbXBsKHsgdmlkZW9EYXRhOiBkLCByZXF1ZXN0TGFuZzogZiA9IHRoaXMucmVxdWVzdExhbmcsIGhlYWRlcnM6IHAgPSB7fSB9KSB7CgkJCQkJCQlsZXQgeyB1cmw6IG0gfSA9IGQsIGggPSBhd2FpdCB0aGlzLmdldFNlc3Npb24oInZpZGVvLXRyYW5zbGF0aW9uIiksIGcgPSB4LlMuZW5jb2RlU3VidGl0bGVzUmVxdWVzdChtLCBmKSwgXyA9IHRoaXMucGF0aHMudmlkZW9TdWJ0aXRsZXMsIGIgPSBhd2FpdCAoMCwgdi5DMCkoIlZzdWJzIiwgaCwgZywgXyksIEMgPSBhd2FpdCB0aGlzLnJlcXVlc3QoXywgZywgewoJCQkJCQkJCS4uLmIsCgkJCQkJCQkJLi4ucAoJCQkJCQkJfSk7CgkJCQkJCQlpZiAoIUMuc3VjY2VzcykgdGhyb3cgbmV3IFZPVEpTRXJyb3IoIkZhaWxlZCB0byByZXF1ZXN0IHZpZGVvIHN1YnRpdGxlcyIsIEMpOwoJCQkJCQkJbGV0IHcgPSB4LlMuZGVjb2RlU3VidGl0bGVzUmVzcG9uc2UoQy5kYXRhKSwgVCA9IHcuc3VidGl0bGVzLm1hcCgoZCkgPT4gewoJCQkJCQkJCWxldCB7IGxhbmd1YWdlOiBmLCB1cmw6IHAsIHRyYW5zbGF0ZWRMYW5ndWFnZTogbSwgdHJhbnNsYXRlZFVybDogaCB9ID0gZDsKCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQlsYW5ndWFnZTogZiwKCQkJCQkJCQkJdXJsOiBwLAoJCQkJCQkJCQl0cmFuc2xhdGVkTGFuZ3VhZ2U6IG0sCgkJCQkJCQkJCXRyYW5zbGF0ZWRVcmw6IGgKCQkJCQkJCQl9OwoJCQkJCQkJfSk7CgkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCXdhaXRpbmc6IHcud2FpdGluZywKCQkJCQkJCQlzdWJ0aXRsZXM6IFQKCQkJCQkJCX07CgkJCQkJCX0KCQkJCQkJYXN5bmMgZ2V0U3VidGl0bGVzVk9USW1wbCh7IHVybDogZCwgdmlkZW9JZDogZiwgc2VydmljZTogcCwgaGVhZGVyczogbSA9IHt9IH0pIHsKCQkJCQkJCWxldCBoID0gKDAsIHcucCkocCwgZiwgZCksIGcgPSBhd2FpdCB0aGlzLnJlcXVlc3RWT1QodGhpcy5wYXRocy52aWRlb1N1YnRpdGxlcywgewoJCQkJCQkJCXByb3ZpZGVyOiAieWFuZGV4IiwKCQkJCQkJCQlzZXJ2aWNlOiBoLnNlcnZpY2UsCgkJCQkJCQkJdmlkZW9faWQ6IGgudmlkZW9JZAoJCQkJCQkJfSwgbSk7CgkJCQkJCQlpZiAoIWcuc3VjY2VzcykgdGhyb3cgbmV3IFZPVEpTRXJyb3IoIkZhaWxlZCB0byByZXF1ZXN0IHZpZGVvIHN1YnRpdGxlcyIsIGcpOwoJCQkJCQkJbGV0IF8gPSBnLmRhdGEsIHYgPSBfLnJlZHVjZSgoZCwgZikgPT4gewoJCQkJCQkJCWlmICghZi5sYW5nX2Zyb20pIHJldHVybiBkOwoJCQkJCQkJCWxldCBwID0gXy5maW5kKChkKSA9PiBkLmxhbmcgPT09IGYubGFuZ19mcm9tKTsKCQkJCQkJCQlyZXR1cm4gcCAmJiBkLnB1c2goewoJCQkJCQkJCQlsYW5ndWFnZTogcC5sYW5nLAoJCQkJCQkJCQl1cmw6IHAuc3VidGl0bGVfdXJsLAoJCQkJCQkJCQl0cmFuc2xhdGVkTGFuZ3VhZ2U6IGYubGFuZywKCQkJCQkJCQkJdHJhbnNsYXRlZFVybDogZi5zdWJ0aXRsZV91cmwKCQkJCQkJCQl9KSwgZDsKCQkJCQkJCX0sIFtdKTsKCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJd2FpdGluZzogITEsCgkJCQkJCQkJc3VidGl0bGVzOiB2CgkJCQkJCQl9OwoJCQkJCQl9CgkJCQkJCWFzeW5jIGdldFN1YnRpdGxlcyh7IHZpZGVvRGF0YTogZCwgcmVxdWVzdExhbmc6IGYgPSB0aGlzLnJlcXVlc3RMYW5nLCBoZWFkZXJzOiBwID0ge30gfSkgewoJCQkJCQkJbGV0IHsgdXJsOiBtLCB2aWRlb0lkOiBoLCBob3N0OiBnIH0gPSBkOwoJCQkJCQkJcmV0dXJuIHRoaXMuaXNDdXN0b21MaW5rKG0pID8gYXdhaXQgdGhpcy5nZXRTdWJ0aXRsZXNWT1RJbXBsKHsKCQkJCQkJCQl1cmw6IG0sCgkJCQkJCQkJdmlkZW9JZDogaCwKCQkJCQkJCQlzZXJ2aWNlOiBnLAoJCQkJCQkJCWhlYWRlcnM6IHAKCQkJCQkJCX0pIDogYXdhaXQgdGhpcy5nZXRTdWJ0aXRsZXNZQUltcGwoewoJCQkJCQkJCXZpZGVvRGF0YTogZCwKCQkJCQkJCQlyZXF1ZXN0TGFuZzogZiwKCQkJCQkJCQloZWFkZXJzOiBwCgkJCQkJCQl9KTsKCQkJCQkJfQoJCQkJCQlhc3luYyBwaW5nU3RyZWFtKHsgcGluZ0lkOiBkLCBoZWFkZXJzOiBmID0ge30gfSkgewoJCQkJCQkJbGV0IHAgPSBhd2FpdCB0aGlzLmdldFNlc3Npb24oInZpZGVvLXRyYW5zbGF0aW9uIiksIG0gPSB4LlMuZW5jb2RlU3RyZWFtUGluZ1JlcXVlc3QoZCksIGggPSB0aGlzLnBhdGhzLnN0cmVhbVBpbmcsIGcgPSBhd2FpdCAoMCwgdi5DMCkoIlZ0cmFucyIsIHAsIG0sIGgpLCBfID0gYXdhaXQgdGhpcy5yZXF1ZXN0KGgsIG0sIHsKCQkJCQkJCQkuLi5nLAoJCQkJCQkJCS4uLmYKCQkJCQkJCX0pOwoJCQkJCQkJaWYgKCFfLnN1Y2Nlc3MpIHRocm93IG5ldyBWT1RKU0Vycm9yKCJGYWlsZWQgdG8gcmVxdWVzdCBzdHJlYW0gcGluZyIsIF8pOwoJCQkJCQkJcmV0dXJuICEwOwoJCQkJCQl9CgkJCQkJCWFzeW5jIHRyYW5zbGF0ZVN0cmVhbSh7IHZpZGVvRGF0YTogZCwgcmVxdWVzdExhbmc6IGYgPSB0aGlzLnJlcXVlc3RMYW5nLCByZXNwb25zZUxhbmc6IHAgPSB0aGlzLnJlc3BvbnNlTGFuZywgaGVhZGVyczogbSA9IHt9IH0pIHsKCQkJCQkJCWxldCB7IHVybDogaCB9ID0gZDsKCQkJCQkJCWlmICh0aGlzLmlzQ3VzdG9tTGluayhoKSkgdGhyb3cgbmV3IFQubigiVk9UU3RyZWFtTm90U3VwcG9ydGVkVXJsIik7CgkJCQkJCQlsZXQgYiA9IGF3YWl0IHRoaXMuZ2V0U2Vzc2lvbigidmlkZW8tdHJhbnNsYXRpb24iKSwgQyA9IHguUy5lbmNvZGVTdHJlYW1SZXF1ZXN0KGgsIGYsIHApLCB3ID0gdGhpcy5wYXRocy5zdHJlYW1UcmFuc2xhdGlvbiwgRSA9IGF3YWl0ICgwLCB2LkMwKSgiVnRyYW5zIiwgYiwgQywgdyksIEQgPSBhd2FpdCB0aGlzLnJlcXVlc3QodywgQywgewoJCQkJCQkJCS4uLkUsCgkJCQkJCQkJLi4ubQoJCQkJCQkJfSk7CgkJCQkJCQlpZiAoIUQuc3VjY2VzcykgdGhyb3cgbmV3IFZPVEpTRXJyb3IoIkZhaWxlZCB0byByZXF1ZXN0IHN0cmVhbSB0cmFuc2xhdGlvbiIsIEQpOwoJCQkJCQkJbGV0IE8gPSB4LlMuZGVjb2RlU3RyZWFtUmVzcG9uc2UoRC5kYXRhKSwgQSA9IE8uaW50ZXJ2YWw7CgkJCQkJCQlzd2l0Y2ggKEEpIHsKCQkJCQkJCQljYXNlIF8ucTguTk9fQ09OTkVDVElPTjoKCQkJCQkJCQljYXNlIF8ucTguVFJBTlNMQVRJTkc6IHJldHVybiB7CgkJCQkJCQkJCXRyYW5zbGF0ZWQ6ICExLAoJCQkJCQkJCQlpbnRlcnZhbDogQSwKCQkJCQkJCQkJbWVzc2FnZTogQSA9PT0gXy5xOC5OT19DT05ORUNUSU9OID8gInN0cmVhbU5vQ29ubmVjdGlvblRvU2VydmVyIiA6ICJ0cmFuc2xhdGlvblRha2VGZXdNaW51dGVzIgoJCQkJCQkJCX07CgkJCQkJCQkJY2FzZSBfLnE4LlNUUkVBTUlORzogcmV0dXJuIHsKCQkJCQkJCQkJdHJhbnNsYXRlZDogITAsCgkJCQkJCQkJCWludGVydmFsOiBBLAoJCQkJCQkJCQlwaW5nSWQ6IE8ucGluZ0lkLAoJCQkJCQkJCQlyZXN1bHQ6IE8udHJhbnNsYXRlZEluZm8KCQkJCQkJCQl9OwoJCQkJCQkJCWRlZmF1bHQ6IHRocm93IGcuQS5lcnJvcigiVW5rbm93biByZXNwb25zZSIsIE8pLCBuZXcgVk9USlNFcnJvcigiVW5rbm93biByZXNwb25zZSBmcm9tIFlhbmRleCIsIE8pOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJCWNsYXNzIFZPVFdvcmtlckNsaWVudCBleHRlbmRzIFZPVENsaWVudCB7CgkJCQkJCWNvbnN0cnVjdG9yKGQgPSB7fSkgewoJCQkJCQkJZC5ob3N0ID0gZC5ob3N0ID8/IGguQS5ob3N0V29ya2VyLCBzdXBlcihkKTsKCQkJCQkJfQoJCQkJCQlhc3luYyByZXF1ZXN0KGQsIGYsIHAgPSB7fSwgbSA9ICJQT1NUIikgewoJCQkJCQkJbGV0IGggPSB0aGlzLmdldE9wdHMoSlNPTi5zdHJpbmdpZnkoewoJCQkJCQkJCWhlYWRlcnM6IHsKCQkJCQkJCQkJLi4udGhpcy5oZWFkZXJzLAoJCQkJCQkJCQkuLi5wCgkJCQkJCQkJfSwKCQkJCQkJCQlib2R5OiBBcnJheS5mcm9tKGYpCgkJCQkJCQl9KSwgeyAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iIH0sIG0pOwoJCQkJCQkJdHJ5IHsKCQkJCQkJCQlsZXQgZiA9IGF3YWl0IHRoaXMuZmV0Y2goYCR7dGhpcy5zY2hlbWF9Oi8vJHt0aGlzLmhvc3R9JHtkfWAsIGgpLCBwID0gYXdhaXQgZi5hcnJheUJ1ZmZlcigpOwoJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCXN1Y2Nlc3M6IGYuc3RhdHVzID09PSAyMDAsCgkJCQkJCQkJCWRhdGE6IHAKCQkJCQkJCQl9OwoJCQkJCQkJfSBjYXRjaCAoZCkgewoJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCXN1Y2Nlc3M6ICExLAoJCQkJCQkJCQlkYXRhOiBkPy5tZXNzYWdlCgkJCQkJCQkJfTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQlhc3luYyByZXF1ZXN0SlNPTihkLCBmID0gbnVsbCwgcCA9IHt9LCBtID0gIlBPU1QiKSB7CgkJCQkJCQlsZXQgaCA9IHRoaXMuZ2V0T3B0cyhKU09OLnN0cmluZ2lmeSh7CgkJCQkJCQkJaGVhZGVyczogewoJCQkJCQkJCQkuLi50aGlzLmhlYWRlcnMsCgkJCQkJCQkJCSJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCgkJCQkJCQkJCUFjY2VwdDogImFwcGxpY2F0aW9uL2pzb24iLAoJCQkJCQkJCQkuLi5wCgkJCQkJCQkJfSwKCQkJCQkJCQlib2R5OiBmCgkJCQkJCQl9KSwgewoJCQkJCQkJCUFjY2VwdDogImFwcGxpY2F0aW9uL2pzb24iLAoJCQkJCQkJCSJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIKCQkJCQkJCX0sIG0pOwoJCQkJCQkJdHJ5IHsKCQkJCQkJCQlsZXQgZiA9IGF3YWl0IHRoaXMuZmV0Y2goYCR7dGhpcy5zY2hlbWF9Oi8vJHt0aGlzLmhvc3R9JHtkfWAsIGgpLCBwID0gYXdhaXQgZi5qc29uKCk7CgkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJc3VjY2VzczogZi5zdGF0dXMgPT09IDIwMCwKCQkJCQkJCQkJZGF0YTogcAoJCQkJCQkJCX07CgkJCQkJCQl9IGNhdGNoIChkKSB7CgkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJc3VjY2VzczogITEsCgkJCQkJCQkJCWRhdGE6IGQ/Lm1lc3NhZ2UKCQkJCQkJCQl9OwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJCW0oKTsKCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQltKGQpOwoJCQkJfQoJCQl9KTsKCQl9LAoJCSIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2NvcmUvZGlzdC9wcm90b2J1Zi5qcyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5kKGYsIHsKCQkJCVA6ICgpID0+IFlhbmRleFNlc3Npb25Qcm90b2J1ZiwKCQkJCVM6ICgpID0+IFlhbmRleFZPVFByb3RvYnVmCgkJCX0pOwoJCQl2YXIgbSA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvc2hhcmVkL2Rpc3QvcHJvdG9zL3lhbmRleC5qcyIpOwoJCQljbGFzcyBZYW5kZXhWT1RQcm90b2J1ZiB7CgkJCQlzdGF0aWMgZW5jb2RlVHJhbnNsYXRpb25SZXF1ZXN0KGQsIGYsIHAsIGgsIGcsIHsgZm9yY2VTb3VyY2VMYW5nOiBfID0gITEsIHdhc1N0cmVhbTogdiA9ICExLCB2aWRlb1RpdGxlOiBiID0gIiIsIGJ5cGFzc0NhY2hlOiB4ID0gITEsIHVzZUxpdmVseVZvaWNlOiBDID0gITEsIGZpcnN0UmVxdWVzdDogdyA9ICEwIH0gPSB7fSkgewoJCQkJCXJldHVybiBtLnl5LmVuY29kZSh7CgkJCQkJCXVybDogZCwKCQkJCQkJZmlyc3RSZXF1ZXN0OiB3LAoJCQkJCQlkdXJhdGlvbjogZiwKCQkJCQkJdW5rbm93bjA6IDEsCgkJCQkJCWxhbmd1YWdlOiBwLAoJCQkJCQlmb3JjZVNvdXJjZUxhbmc6IF8sCgkJCQkJCXVua25vd24xOiAwLAoJCQkJCQl0cmFuc2xhdGlvbkhlbHA6IGcgPz8gW10sCgkJCQkJCXJlc3BvbnNlTGFuZ3VhZ2U6IGgsCgkJCQkJCXdhc1N0cmVhbTogdiwKCQkJCQkJdW5rbm93bjI6IDEsCgkJCQkJCXVua25vd24zOiAyLAoJCQkJCQlieXBhc3NDYWNoZTogeCwKCQkJCQkJdXNlTGl2ZWx5Vm9pY2U6IEMsCgkJCQkJCXZpZGVvVGl0bGU6IGIKCQkJCQl9KS5maW5pc2goKTsKCQkJCX0KCQkJCXN0YXRpYyBkZWNvZGVUcmFuc2xhdGlvblJlc3BvbnNlKGQpIHsKCQkJCQlyZXR1cm4gbS5BSi5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoZCkpOwoJCQkJfQoJCQkJc3RhdGljIGVuY29kZVRyYW5zbGF0aW9uQ2FjaGVSZXF1ZXN0KGQsIGYsIHAsIGgpIHsKCQkJCQlyZXR1cm4gbS5ZeC5lbmNvZGUoewoJCQkJCQl1cmw6IGQsCgkJCQkJCWR1cmF0aW9uOiBmLAoJCQkJCQlsYW5ndWFnZTogcCwKCQkJCQkJcmVzcG9uc2VMYW5ndWFnZTogaAoJCQkJCX0pLmZpbmlzaCgpOwoJCQkJfQoJCQkJc3RhdGljIGRlY29kZVRyYW5zbGF0aW9uQ2FjaGVSZXNwb25zZShkKSB7CgkJCQkJcmV0dXJuIG0uWksuZGVjb2RlKG5ldyBVaW50OEFycmF5KGQpKTsKCQkJCX0KCQkJCXN0YXRpYyBpc1BhcnRpYWxBdWRpb0J1ZmZlcihkKSB7CgkJCQkJcmV0dXJuICJjaHVua0lkIiBpbiBkOwoJCQkJfQoJCQkJc3RhdGljIGVuY29kZVRyYW5zbGF0aW9uQXVkaW9SZXF1ZXN0KGQsIGYsIHAsIGgpIHsKCQkJCQlyZXR1cm4gaCAmJiBZYW5kZXhWT1RQcm90b2J1Zi5pc1BhcnRpYWxBdWRpb0J1ZmZlcihwKSA/IG0uWTcuZW5jb2RlKHsKCQkJCQkJdXJsOiBkLAoJCQkJCQl0cmFuc2xhdGlvbklkOiBmLAoJCQkJCQlwYXJ0aWFsQXVkaW9JbmZvOiB7CgkJCQkJCQkuLi5oLAoJCQkJCQkJYXVkaW9CdWZmZXI6IHAKCQkJCQkJfQoJCQkJCX0pLmZpbmlzaCgpIDogbS5ZNy5lbmNvZGUoewoJCQkJCQl1cmw6IGQsCgkJCQkJCXRyYW5zbGF0aW9uSWQ6IGYsCgkJCQkJCWF1ZGlvSW5mbzogcAoJCQkJCX0pLmZpbmlzaCgpOwoJCQkJfQoJCQkJc3RhdGljIGRlY29kZVRyYW5zbGF0aW9uQXVkaW9SZXNwb25zZShkKSB7CgkJCQkJcmV0dXJuIG0uV2kuZGVjb2RlKG5ldyBVaW50OEFycmF5KGQpKTsKCQkJCX0KCQkJCXN0YXRpYyBlbmNvZGVTdWJ0aXRsZXNSZXF1ZXN0KGQsIGYpIHsKCQkJCQlyZXR1cm4gbS5QNC5lbmNvZGUoewoJCQkJCQl1cmw6IGQsCgkJCQkJCWxhbmd1YWdlOiBmCgkJCQkJfSkuZmluaXNoKCk7CgkJCQl9CgkJCQlzdGF0aWMgZGVjb2RlU3VidGl0bGVzUmVzcG9uc2UoZCkgewoJCQkJCXJldHVybiBtLkxELmRlY29kZShuZXcgVWludDhBcnJheShkKSk7CgkJCQl9CgkJCQlzdGF0aWMgZW5jb2RlU3RyZWFtUGluZ1JlcXVlc3QoZCkgewoJCQkJCXJldHVybiBtLmtPLmVuY29kZSh7IHBpbmdJZDogZCB9KS5maW5pc2goKTsKCQkJCX0KCQkJCXN0YXRpYyBlbmNvZGVTdHJlYW1SZXF1ZXN0KGQsIGYsIHApIHsKCQkJCQlyZXR1cm4gbS5Ydi5lbmNvZGUoewoJCQkJCQl1cmw6IGQsCgkJCQkJCWxhbmd1YWdlOiBmLAoJCQkJCQlyZXNwb25zZUxhbmd1YWdlOiBwLAoJCQkJCQl1bmtub3duMDogMSwKCQkJCQkJdW5rbm93bjE6IDAKCQkJCQl9KS5maW5pc2goKTsKCQkJCX0KCQkJCXN0YXRpYyBkZWNvZGVTdHJlYW1SZXNwb25zZShkKSB7CgkJCQkJcmV0dXJuIG0ubl8uZGVjb2RlKG5ldyBVaW50OEFycmF5KGQpKTsKCQkJCX0KCQkJfQoJCQljbGFzcyBZYW5kZXhTZXNzaW9uUHJvdG9idWYgewoJCQkJc3RhdGljIGVuY29kZVNlc3Npb25SZXF1ZXN0KGQsIGYpIHsKCQkJCQlyZXR1cm4gbS5scy5lbmNvZGUoewoJCQkJCQl1dWlkOiBkLAoJCQkJCQltb2R1bGU6IGYKCQkJCQl9KS5maW5pc2goKTsKCQkJCX0KCQkJCXN0YXRpYyBkZWNvZGVTZXNzaW9uUmVzcG9uc2UoZCkgewoJCQkJCXJldHVybiBtLkJ2LmRlY29kZShuZXcgVWludDhBcnJheShkKSk7CgkJCQl9CgkJCX0KCQl9LAoJCSIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2NvcmUvZGlzdC90eXBlcy9zZXJ2aWNlLmpzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmQoZiwgeyByOiAoKSA9PiBtIH0pOwoJCQl2YXIgbTsKCQkJKGZ1bmN0aW9uKGQpIHsKCQkJCWQuY3VzdG9tID0gImN1c3RvbSIsIGQuZGlyZWN0bGluayA9ICJjdXN0b20iLCBkLnlvdXR1YmUgPSAieW91dHViZSIsIGQucGlwZWQgPSAicGlwZWQiLCBkLmludmlkaW91cyA9ICJpbnZpZGlvdXMiLCBkLnZrID0gInZrIiwgZC5uaW5lX2dhZyA9ICJuaW5lX2dhZyIsIGQuZ2FnID0gIm5pbmVfZ2FnIiwgZC50d2l0Y2ggPSAidHdpdGNoIiwgZC5wcm94aXRvayA9ICJwcm94aXRvayIsIGQudGlrdG9rID0gInRpa3RvayIsIGQudmltZW8gPSAidmltZW8iLCBkLnh2aWRlb3MgPSAieHZpZGVvcyIsIGQucG9ybmh1YiA9ICJwb3JuaHViIiwgZC50d2l0dGVyID0gInR3aXR0ZXIiLCBkLnggPSAidHdpdHRlciIsIGQucnVtYmxlID0gInJ1bWJsZSIsIGQuZmFjZWJvb2sgPSAiZmFjZWJvb2siLCBkLnJ1dHViZSA9ICJydXR1YmUiLCBkLmNvdWIgPSAiY291YiIsIGQuYmlsaWJpbGkgPSAiYmlsaWJpbGkiLCBkLm1haWxfcnUgPSAibWFpbHJ1IiwgZC5tYWlscnUgPSAibWFpbHJ1IiwgZC5iaXRjaHV0ZSA9ICJiaXRjaHV0ZSIsIGQuZXBvcm5lciA9ICJlcG9ybmVyIiwgZC5wZWVydHViZSA9ICJwZWVydHViZSIsIGQuZGFpbHltb3Rpb24gPSAiZGFpbHltb3Rpb24iLCBkLnRyb3ZvID0gInRyb3ZvIiwgZC55YW5kZXhkaXNrID0gInlhbmRleGRpc2siLCBkLm9rX3J1ID0gIm9rcnUiLCBkLm9rcnUgPSAib2tydSIsIGQuZ29vZ2xlZHJpdmUgPSAiZ29vZ2xlZHJpdmUiLCBkLmJhbm5lZHZpZGVvID0gImJhbm5lZHZpZGVvIiwgZC53ZXZlcnNlID0gIndldmVyc2UiLCBkLm5ld2dyb3VuZHMgPSAibmV3Z3JvdW5kcyIsIGQuZWdnaGVhZCA9ICJlZ2doZWFkIiwgZC55b3VrdSA9ICJ5b3VrdSIsIGQuYXJjaGl2ZSA9ICJhcmNoaXZlIiwgZC5rb2RpayA9ICJrb2RpayIsIGQucGF0cmVvbiA9ICJwYXRyZW9uIiwgZC5yZWRkaXQgPSAicmVkZGl0IiwgZC5raWNrID0gImtpY2siLCBkLmFwcGxlX2RldmVsb3BlciA9ICJhcHBsZV9kZXZlbG9wZXIiLCBkLmFwcGxlZGV2ZWxvcGVyID0gImFwcGxlX2RldmVsb3BlciIsIGQucG9rZXR1YmUgPSAicG9rZXR1YmUiLCBkLmVwaWNnYW1lcyA9ICJlcGljZ2FtZXMiLCBkLm9keXNlZSA9ICJvZHlzZWUiLCBkLmNvdXJzZWh1bnRlckxpa2UgPSAiY291cnNlaHVudGVyTGlrZSIsIGQuc2FwID0gInNhcCIsIGQud2F0Y2hwb3JudG8gPSAid2F0Y2hwb3JudG8iLCBkLmxpbmtlZGluID0gImxpbmtlZGluIiwgZC5yaWNrdHViZSA9ICJyaWNrdHViZSIsIGQuaW5jZXN0ZmxpeCA9ICJpbmNlc3RmbGl4IiwgZC5wb3JudG4gPSAicG9ybnRuIiwgZC5kemVuID0gImR6ZW4iLCBkLmNsb3VkZmxhcmVzdHJlYW0gPSAiY2xvdWRmbGFyZXN0cmVhbSIsIGQubG9vbSA9ICJsb29tIiwgZC5ydG5ld3MgPSAicnRuZXdzIiwgZC5iaXR2aWV3ID0gImJpdHZpZXciLCBkLnRoaXN2aWQgPSAidGhpc3ZpZCIsIGQuaWduID0gImlnbiIsIGQuYnVua3IgPSAiYnVua3IiLCBkLmltZGIgPSAiaW1kYiIsIGQudGVsZWdyYW0gPSAidGVsZWdyYW0iOwoJCQl9KShtIHx8PSB7fSk7CgkJfSwKCQkiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9jb3JlL2Rpc3QvdHlwZXMveWFuZGV4LmpzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmQoZiwgewoJCQkJSjogKCkgPT4gaCwKCQkJCXY6ICgpID0+IG0KCQkJfSk7CgkJCXZhciBtOwoJCQkoZnVuY3Rpb24oZCkgewoJCQkJZFtkLkZBSUxFRCA9IDBdID0gIkZBSUxFRCIsIGRbZC5GSU5JU0hFRCA9IDFdID0gIkZJTklTSEVEIiwgZFtkLldBSVRJTkcgPSAyXSA9ICJXQUlUSU5HIiwgZFtkLkxPTkdfV0FJVElORyA9IDNdID0gIkxPTkdfV0FJVElORyIsIGRbZC5QQVJUX0NPTlRFTlQgPSA1XSA9ICJQQVJUX0NPTlRFTlQiLCBkW2QuQVVESU9fUkVRVUVTVEVEID0gNl0gPSAiQVVESU9fUkVRVUVTVEVEIiwgZFtkLlNFU1NJT05fUkVRVUlSRUQgPSA3XSA9ICJTRVNTSU9OX1JFUVVJUkVEIjsKCQkJfSkobSB8fD0ge30pOwoJCQl2YXIgaDsKCQkJKGZ1bmN0aW9uKGQpIHsKCQkJCWQuV0VCX0FQSV9WSURFT19TUkNfRlJPTV9JRlJBTUUgPSAid2ViX2FwaV92aWRlb19zcmNfZnJvbV9pZnJhbWUiLCBkLldFQl9BUElfVklERU9fU1JDID0gIndlYl9hcGlfdmlkZW9fc3JjIiwgZC5XRUJfQVBJX0dFVF9BTExfR0VORVJBVElOR19VUkxTX0RBVEFfRlJPTV9JRlJBTUUgPSAid2ViX2FwaV9nZXRfYWxsX2dlbmVyYXRpbmdfdXJsc19kYXRhX2Zyb21faWZyYW1lIiwgZC5XRUJfQVBJX0dFVF9BTExfR0VORVJBVElOR19VUkxTX0RBVEFfRlJPTV9JRlJBTUVfVE1QX0VYUCA9ICJ3ZWJfYXBpX2dldF9hbGxfZ2VuZXJhdGluZ191cmxzX2RhdGFfZnJvbV9pZnJhbWVfdG1wX2V4cCIsIGQuV0VCX0FQSV9SRVBMQUNFRF9GRVRDSF9JTlNJREVfSUZSQU1FID0gIndlYl9hcGlfcmVwbGFjZWRfZmV0Y2hfaW5zaWRlX2lmcmFtZSIsIGQuQU5EUk9JRF9BUEkgPSAiYW5kcm9pZF9hcGkiLCBkLldFQl9BUElfU0xPVyA9ICJ3ZWJfYXBpX3Nsb3ciLCBkLldFQl9BUElfU1RFQUxfU0lHX0FORF9OID0gIndlYl9hcGlfc3RlYWxfc2lnX2FuZF9uIiwgZC5XRUJfQVBJX0NPTUJJTkVEID0gIndlYl9hcGlfZ2V0X2FsbF9nZW5lcmF0aW5nX3VybHNfZGF0YV9mcm9tX2lmcmFtZSx3ZWJfYXBpX3N0ZWFsX3NpZ19hbmRfbiI7CgkJCX0pKGggfHw9IHt9KTsKCQl9LAoJCSIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2NvcmUvZGlzdC91dGlscy92aWRlb0RhdGEuanMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuZChmLCB7CgkJCQkkOiAoKSA9PiBtLAoJCQkJQTogKCkgPT4gVmlkZW9EYXRhRXJyb3IKCQkJfSk7CgkJCWNsYXNzIFZpZGVvRGF0YUVycm9yIGV4dGVuZHMgRXJyb3IgewoJCQkJY29uc3RydWN0b3IoZCkgewoJCQkJCXN1cGVyKGQpLCB0aGlzLm5hbWUgPSAiVmlkZW9EYXRhRXJyb3IiLCB0aGlzLm1lc3NhZ2UgPSBkOwoJCQkJfQoJCQl9CgkJCWxldCBtID0gLyhmaWxlOlwvXC8oXC8pP3woaHR0cChzKT86XC9cLykoMTI3XC4wXC4wXC4xfGxvY2FsaG9zdHwxOTJcLjE2OFwuKFxkKXsxLDN9XC4oXGQpezEsM30pKS87CgkJfSwKCQkiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9jb3JlL2Rpc3QvdXRpbHMvdm90LmpzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmQoZiwgeyBwOiAoKSA9PiBjb252ZXJ0Vk9UIH0pOwoJCQl2YXIgbSA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvY29yZS9kaXN0L3R5cGVzL3NlcnZpY2UuanMiKTsKCQkJZnVuY3Rpb24gY29udmVydFZPVChkLCBmLCBwKSB7CgkJCQlyZXR1cm4gZCA9PT0gbS5yLnBhdHJlb24gPyB7CgkJCQkJc2VydmljZTogIm11eCIsCgkJCQkJdmlkZW9JZDogbmV3IFVSTChwKS5wYXRobmFtZS5zbGljZSgxKQoJCQkJfSA6IHsKCQkJCQlzZXJ2aWNlOiBkLAoJCQkJCXZpZGVvSWQ6IGYKCQkJCX07CgkJCX0KCQl9LAoJCSIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2V4dC9kaXN0L2NsaWVudC5qcyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5hKGQsIGFzeW5jIChkLCBtKSA9PiB7CgkJCQl0cnkgewoJCQkJCXAuZChmLCB7CgkJCQkJCUE6ICgpID0+IFZPVENsaWVudCwKCQkJCQkJUDogKCkgPT4gVk9UV29ya2VyQ2xpZW50CgkJCQkJfSk7CgkJCQkJdmFyIGggPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2NvcmUvZGlzdC9jbGllbnQuanMiKSwgZyA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvc2hhcmVkL2Rpc3Qvc2VjdXJlLmpzIiksIF8gPSBkKFtoXSk7CgkJCQkJaCA9IChfLnRoZW4gPyAoYXdhaXQgXykoKSA6IF8pWzBdOwoJCQkJCWNsYXNzIFZPVENsaWVudCBleHRlbmRzIGguQXkgewoJCQkJCQljb25zdHJ1Y3RvcihkKSB7CgkJCQkJCQlzdXBlcihkKSwgdGhpcy5oZWFkZXJzID0gewoJCQkJCQkJCS4uLmcuTUcsCgkJCQkJCQkJLi4udGhpcy5oZWFkZXJzCgkJCQkJCQl9OwoJCQkJCQl9CgkJCQkJfQoJCQkJCWNsYXNzIFZPVFdvcmtlckNsaWVudCBleHRlbmRzIGguUHUgewoJCQkJCQljb25zdHJ1Y3RvcihkKSB7CgkJCQkJCQlzdXBlcihkKSwgdGhpcy5oZWFkZXJzID0gewoJCQkJCQkJCS4uLmcuTUcsCgkJCQkJCQkJLi4udGhpcy5oZWFkZXJzCgkJCQkJCQl9OwoJCQkJCQl9CgkJCQkJfQoJCQkJCW0oKTsKCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQltKGQpOwoJCQkJfQoJCQl9KTsKCQl9LAoJCSIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2V4dC9kaXN0L2RhdGEvc2l0ZXMuanMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuZChmLCB7IEE6ICgpID0+IF8gfSk7CgkJCXZhciBtID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9jb3JlL2Rpc3QvdHlwZXMvc2VydmljZS5qcyIpLCBoID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9zaGFyZWQvZGlzdC9kYXRhL2FsdGVybmF0aXZlVXJscy5qcyIpLCBnID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9leHQvZGlzdC90eXBlcy9zZXJ2aWNlLmpzIik7CgkJCWxldCBfID0gWwoJCQkJewoJCQkJCWFkZGl0aW9uYWxEYXRhOiAibW9iaWxlIiwKCQkJCQlob3N0OiBtLnIueW91dHViZSwKCQkJCQl1cmw6ICJodHRwczovL3lvdXR1LmJlLyIsCgkJCQkJbWF0Y2g6IC9ebS55b3V0dWJlLmNvbSQvLAoJCQkJCXNlbGVjdG9yOiAiLnBsYXllci1jb250YWluZXIiLAoJCQkJCW5lZWRFeHRyYURhdGE6ICEwCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci55b3V0dWJlLAoJCQkJCXVybDogImh0dHBzOi8veW91dHUuYmUvIiwKCQkJCQltYXRjaDogL14od3d3Lik/eW91dHViZSgtbm9jb29raWV8a2lkcyk/LmNvbSQvLAoJCQkJCXNlbGVjdG9yOiAiLmh0bWw1LXZpZGVvLWNvbnRhaW5lcjpub3QoI2lubGluZS1wbGF5ZXIgKikiLAoJCQkJCW5lZWRFeHRyYURhdGE6ICEwCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci5pbnZpZGlvdXMsCgkJCQkJdXJsOiAiaHR0cHM6Ly95b3V0dS5iZS8iLAoJCQkJCW1hdGNoOiBoLlhtLAoJCQkJCXNlbGVjdG9yOiAiI3BsYXllciIsCgkJCQkJbmVlZEJ5cGFzc0NTUDogITAKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLnBpcGVkLAoJCQkJCXVybDogImh0dHBzOi8veW91dHUuYmUvIiwKCQkJCQltYXRjaDogaC5KbywKCQkJCQlzZWxlY3RvcjogIi5zaGFrYS12aWRlby1jb250YWluZXIiLAoJCQkJCW5lZWRCeXBhc3NDU1A6ICEwCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci5wb2tldHViZSwKCQkJCQl1cmw6ICJodHRwczovL3lvdXR1LmJlLyIsCgkJCQkJbWF0Y2g6IGguc3gsCgkJCQkJc2VsZWN0b3I6ICIudmlkZW8tcGxheWVyLWNvbnRhaW5lciIKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLnJpY2t0dWJlLAoJCQkJCXVybDogImh0dHBzOi8veW91dHUuYmUvIiwKCQkJCQltYXRjaDogaC5NeSwKCQkJCQlzZWxlY3RvcjogIiNvZnJhbWVwbGF5ZXIgPiBwanNkaXY6aGFzKHZpZGVvKSIKCQkJCX0sCgkJCQl7CgkJCQkJYWRkaXRpb25hbERhdGE6ICJtb2JpbGUiLAoJCQkJCWhvc3Q6IG0uci52aywKCQkJCQl1cmw6ICJodHRwczovL3ZrLmNvbS92aWRlbz96PSIsCgkJCQkJbWF0Y2g6IFsvXm0udmsuKGNvbXxydSkkLywgL15tLnZrdmlkZW8ucnUkL10sCgkJCQkJc2VsZWN0b3I6ICJ2ay12aWRlby1wbGF5ZXIiLAoJCQkJCXNoYWRvd1Jvb3Q6ICEwLAoJCQkJCW5lZWRFeHRyYURhdGE6ICEwCgkJCQl9LAoJCQkJewoJCQkJCWFkZGl0aW9uYWxEYXRhOiAiY2xpcHMiLAoJCQkJCWhvc3Q6IG0uci52aywKCQkJCQl1cmw6ICJodHRwczovL3ZrLmNvbS92aWRlbz96PSIsCgkJCQkJbWF0Y2g6IC9eKHd3dy58bS4pP3ZrLihjb218cnUpJC8sCgkJCQkJc2VsZWN0b3I6ICJkaXZbZGF0YS10ZXN0aWQ9XCJjbGlwY29udGFpbmVyLXZpZGVvXCJdIiwKCQkJCQluZWVkRXh0cmFEYXRhOiAhMAoJCQkJfSwKCQkJCXsKCQkJCQlob3N0OiBtLnIudmssCgkJCQkJdXJsOiAiaHR0cHM6Ly92ay5jb20vdmlkZW8/ej0iLAoJCQkJCW1hdGNoOiBbL14od3d3LnxtLik/dmsuKGNvbXxydSkkLywgL14od3d3LnxtLik/dmt2aWRlby5ydSQvXSwKCQkJCQlzZWxlY3RvcjogIi52aWRlb3BsYXllcl9tZWRpYSIsCgkJCQkJbmVlZEV4dHJhRGF0YTogITAKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLm5pbmVfZ2FnLAoJCQkJCXVybDogImh0dHBzOi8vOWdhZy5jb20vZ2FnLyIsCgkJCQkJbWF0Y2g6IC9eOWdhZy5jb20kLywKCQkJCQlzZWxlY3RvcjogIi52aWRlby1wb3N0IiwKCQkJCQluZWVkRXh0cmFEYXRhOiAhMAoJCQkJfSwKCQkJCXsKCQkJCQlob3N0OiBtLnIudHdpdGNoLAoJCQkJCXVybDogImh0dHBzOi8vdHdpdGNoLnR2LyIsCgkJCQkJbWF0Y2g6IFsKCQkJCQkJL15tLnR3aXRjaC50diQvLAoJCQkJCQkvXih3d3cuKT90d2l0Y2gudHYkLywKCQkJCQkJL15jbGlwcy50d2l0Y2gudHYkLywKCQkJCQkJL15wbGF5ZXIudHdpdGNoLnR2JC8KCQkJCQldLAoJCQkJCW5lZWRFeHRyYURhdGE6ICEwLAoJCQkJCXNlbGVjdG9yOiAiLnZpZGVvLXJlZiwgbWFpbiA+IGRpdiA+IHNlY3Rpb24gPiBkaXYgPiBkaXYgPiBkaXYiCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci5wcm94aXRvaywKCQkJCQl1cmw6ICJodHRwczovL3d3dy50aWt0b2suY29tLyIsCgkJCQkJbWF0Y2g6IGguVFAsCgkJCQkJc2VsZWN0b3I6ICIuY29sdW1uLmhhcy10ZXh0LWNlbnRlcmVkIgoJCQkJfSwKCQkJCXsKCQkJCQlob3N0OiBtLnIudGlrdG9rLAoJCQkJCXVybDogImh0dHBzOi8vd3d3LnRpa3Rvay5jb20vIiwKCQkJCQltYXRjaDogL14od3d3Lik/dGlrdG9rLmNvbSQvLAoJCQkJCXNlbGVjdG9yOiBudWxsCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IGcuUS5kb3V5aW4sCgkJCQkJdXJsOiAiaHR0cHM6Ly93d3cuZG91eWluLmNvbS8iLAoJCQkJCW1hdGNoOiAvXih3d3cuKT9kb3V5aW4uY29tLywKCQkJCQlzZWxlY3RvcjogIi54Zy12aWRlby1jb250YWluZXIiLAoJCQkJCW5lZWRFeHRyYURhdGE6ICEwLAoJCQkJCW5lZWRCeXBhc3NDU1A6ICEwCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci52aW1lbywKCQkJCQl1cmw6ICJodHRwczovL3ZpbWVvLmNvbS8iLAoJCQkJCW1hdGNoOiAvXnZpbWVvLmNvbSQvLAoJCQkJCW5lZWRFeHRyYURhdGE6ICEwLAoJCQkJCXNlbGVjdG9yOiAiLnBsYXllciIKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLnZpbWVvLAoJCQkJCXVybDogImh0dHBzOi8vcGxheWVyLnZpbWVvLmNvbS8iLAoJCQkJCW1hdGNoOiAvXnBsYXllci52aW1lby5jb20kLywKCQkJCQlhZGRpdGlvbmFsRGF0YTogImVtYmVkIiwKCQkJCQluZWVkRXh0cmFEYXRhOiAhMCwKCQkJCQluZWVkQnlwYXNzQ1NQOiAhMCwKCQkJCQlzZWxlY3RvcjogIi5wbGF5ZXIiCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci54dmlkZW9zLAoJCQkJCXVybDogImh0dHBzOi8vd3d3Lnh2aWRlb3MuY29tLyIsCgkJCQkJbWF0Y2g6IFsKCQkJCQkJL14od3d3Lik/eHZpZGVvcygtYXIpPy5jb20kLywKCQkJCQkJL14od3d3Lik/eHZpZGVvcyhcZFxkXGQpLmNvbSQvLAoJCQkJCQkvXih3d3cuKT94di1ydS5jb20kLwoJCQkJCV0sCgkJCQkJc2VsZWN0b3I6ICIjaGxzcGxheWVyIiwKCQkJCQluZWVkQnlwYXNzQ1NQOiAhMAoJCQkJfSwKCQkJCXsKCQkJCQlob3N0OiBtLnIucG9ybmh1YiwKCQkJCQl1cmw6ICJodHRwczovL3J0LnBvcm5odWIuY29tL3ZpZXdfdmlkZW8ucGhwP3ZpZXdrZXk9IiwKCQkJCQltYXRjaDogL15bYS16XSsucG9ybmh1Yi4oY29tfG9yZykkLywKCQkJCQlzZWxlY3RvcjogIi5tYWluUGxheWVyRGl2ID4gLnZpZGVvLWVsZW1lbnQtd3JhcHBlci1qcyA+IGRpdiIsCgkJCQkJZXZlbnRTZWxlY3RvcjogIi5tZ3BfZXZlbnRDYXRjaGVyIgoJCQkJfSwKCQkJCXsKCQkJCQlhZGRpdGlvbmFsRGF0YTogImVtYmVkIiwKCQkJCQlob3N0OiBtLnIucG9ybmh1YiwKCQkJCQl1cmw6ICJodHRwczovL3J0LnBvcm5odWIuY29tL3ZpZXdfdmlkZW8ucGhwP3ZpZXdrZXk9IiwKCQkJCQltYXRjaDogKGQpID0+IC9eW2Etel0rLnBvcm5odWIuKGNvbXxvcmcpJC8uZXhlYyhkLmhvc3QpICYmIGQucGF0aG5hbWUuc3RhcnRzV2l0aCgiL2VtYmVkLyIpLAoJCQkJCXNlbGVjdG9yOiAiI3BsYXllciIKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLnR3aXR0ZXIsCgkJCQkJdXJsOiAiaHR0cHM6Ly90d2l0dGVyLmNvbS9pL3N0YXR1cy8iLAoJCQkJCW1hdGNoOiAvXih0d2l0dGVyfHgpLmNvbSQvLAoJCQkJCXNlbGVjdG9yOiAiZGl2W2RhdGEtdGVzdGlkPVwidmlkZW9Db21wb25lbnRcIl0gPiBkaXY6bnRoLWNoaWxkKDEpID4gZGl2IiwKCQkJCQlldmVudFNlbGVjdG9yOiAiZGl2W2RhdGEtdGVzdGlkPVwidmlkZW9QbGF5ZXJcIl0iLAoJCQkJCW5lZWRCeXBhc3NDU1A6ICEwCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci5ydW1ibGUsCgkJCQkJdXJsOiAiaHR0cHM6Ly9ydW1ibGUuY29tLyIsCgkJCQkJbWF0Y2g6IC9ecnVtYmxlLmNvbSQvLAoJCQkJCXNlbGVjdG9yOiAiI3ZpZGVvUGxheWVyID4gLnZpZGVvUGxheWVyLVJ1bWJsZS1jbHMgPiBkaXYiCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci5mYWNlYm9vaywKCQkJCQl1cmw6ICJodHRwczovL2ZhY2Vib29rLmNvbS8iLAoJCQkJCW1hdGNoOiAoZCkgPT4gZC5ob3N0LmluY2x1ZGVzKCJmYWNlYm9vay5jb20iKSAmJiBkLnBhdGhuYW1lLmluY2x1ZGVzKCIvdmlkZW9zLyIpLAoJCQkJCXNlbGVjdG9yOiAiZGl2W3JvbGU9XCJtYWluXCJdIGRpdltkYXRhLXBhZ2VsZXQkPVwidmlkZW9cIiBpXSIsCgkJCQkJbmVlZEJ5cGFzc0NTUDogITAKCQkJCX0sCgkJCQl7CgkJCQkJYWRkaXRpb25hbERhdGE6ICJyZWVscyIsCgkJCQkJaG9zdDogbS5yLmZhY2Vib29rLAoJCQkJCXVybDogImh0dHBzOi8vZmFjZWJvb2suY29tLyIsCgkJCQkJbWF0Y2g6IChkKSA9PiBkLmhvc3QuaW5jbHVkZXMoImZhY2Vib29rLmNvbSIpICYmIGQucGF0aG5hbWUuaW5jbHVkZXMoIi9yZWVsLyIpLAoJCQkJCXNlbGVjdG9yOiAiZGl2W3JvbGU9XCJtYWluXCJdIiwKCQkJCQluZWVkQnlwYXNzQ1NQOiAhMAoJCQkJfSwKCQkJCXsKCQkJCQlob3N0OiBtLnIucnV0dWJlLAoJCQkJCXVybDogImh0dHBzOi8vcnV0dWJlLnJ1L3ZpZGVvLyIsCgkJCQkJbWF0Y2g6IC9ecnV0dWJlLnJ1JC8sCgkJCQkJc2VsZWN0b3I6ICIudmlkZW8tcGxheWVyID4gZGl2ID4gZGl2ID4gZGl2Om50aC1jaGlsZCgyKSIKCQkJCX0sCgkJCQl7CgkJCQkJYWRkaXRpb25hbERhdGE6ICJlbWJlZCIsCgkJCQkJaG9zdDogbS5yLnJ1dHViZSwKCQkJCQl1cmw6ICJodHRwczovL3J1dHViZS5ydS92aWRlby8iLAoJCQkJCW1hdGNoOiAvXnJ1dHViZS5ydSQvLAoJCQkJCXNlbGVjdG9yOiAiI2FwcCA+IGRpdiA+IGRpdiIKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLmJpbGliaWxpLAoJCQkJCXVybDogImh0dHBzOi8vd3d3LmJpbGliaWxpLmNvbS8iLAoJCQkJCW1hdGNoOiAvXih3d3d8bXxwbGF5ZXIpLmJpbGliaWxpLmNvbSQvLAoJCQkJCXNlbGVjdG9yOiAiLmJweC1wbGF5ZXItdmlkZW8td3JhcCIKCQkJCX0sCgkJCQl7CgkJCQkJYWRkaXRpb25hbERhdGE6ICJvbGQiLAoJCQkJCWhvc3Q6IG0uci5iaWxpYmlsaSwKCQkJCQl1cmw6ICJodHRwczovL3d3dy5iaWxpYmlsaS5jb20vIiwKCQkJCQltYXRjaDogL14od3d3fG0pLmJpbGliaWxpLmNvbSQvLAoJCQkJCXNlbGVjdG9yOiBudWxsCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci5tYWlscnUsCgkJCQkJdXJsOiAiaHR0cHM6Ly9teS5tYWlsLnJ1LyIsCgkJCQkJbWF0Y2g6IC9ebXkubWFpbC5ydSQvLAoJCQkJCXNlbGVjdG9yOiAiI2ItdmlkZW8td3JhcHBlciIKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLmJpdGNodXRlLAoJCQkJCXVybDogImh0dHBzOi8vd3d3LmJpdGNodXRlLmNvbS92aWRlby8iLAoJCQkJCW1hdGNoOiAvXih3d3cuKT9iaXRjaHV0ZS5jb20kLywKCQkJCQlzZWxlY3RvcjogIi52aWRlby1qcyIKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLmVwb3JuZXIsCgkJCQkJdXJsOiAiaHR0cHM6Ly93d3cuZXBvcm5lci5jb20vIiwKCQkJCQltYXRjaDogL14od3d3Lik/ZXBvcm5lci5jb20kLywKCQkJCQlzZWxlY3RvcjogIi52anMtdjciCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci5wZWVydHViZSwKCQkJCQl1cmw6ICJzdHViIiwKCQkJCQltYXRjaDogaC5mViwKCQkJCQlzZWxlY3RvcjogIi52anMtdjciCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci5kYWlseW1vdGlvbiwKCQkJCQl1cmw6ICJodHRwczovL2RhaS5seS8iLAoJCQkJCW1hdGNoOiAvXmdlbyhbXGRdKyk/LmRhaWx5bW90aW9uLmNvbSQvLAoJCQkJCXNlbGVjdG9yOiAiLnBsYXllciIKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLnRyb3ZvLAoJCQkJCXVybDogImh0dHBzOi8vdHJvdm8ubGl2ZS9zLyIsCgkJCQkJbWF0Y2g6IC9edHJvdm8ubGl2ZSQvLAoJCQkJCXNlbGVjdG9yOiAiLnBsYXllci12aWRlbyIKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLnlhbmRleGRpc2ssCgkJCQkJdXJsOiAiaHR0cHM6Ly95YWRpLnNrLyIsCgkJCQkJbWF0Y2g6IC9eZGlzay55YW5kZXguKHJ1fGt6fGNvbShcLihhbXxnZXx0cikpP3xieXxhenxjb1wuaWx8ZWV8bHR8bHZ8bWR8bmV0fHRqfHRtfHV6KSQvLAoJCQkJCXNlbGVjdG9yOiAiLnZpZGVvLXBsYXllcl9fcGxheWVyID4gZGl2Om50aC1jaGlsZCgxKSIsCgkJCQkJZXZlbnRTZWxlY3RvcjogIi52aWRlby1wbGF5ZXJfX3BsYXllciIsCgkJCQkJbmVlZEJ5cGFzc0NTUDogITAsCgkJCQkJbmVlZEV4dHJhRGF0YTogITAKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLm9rcnUsCgkJCQkJdXJsOiAiaHR0cHM6Ly9vay5ydS92aWRlby8iLAoJCQkJCW1hdGNoOiAvXm9rLnJ1JC8sCgkJCQkJc2VsZWN0b3I6ICJ2ay12aWRlby1wbGF5ZXIiLAoJCQkJCXNoYWRvd1Jvb3Q6ICEwCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci5nb29nbGVkcml2ZSwKCQkJCQl1cmw6ICJodHRwczovL2RyaXZlLmdvb2dsZS5jb20vZmlsZS9kLyIsCgkJCQkJbWF0Y2g6IC9eeW91dHViZS5nb29nbGVhcGlzLmNvbSQvLAoJCQkJCXNlbGVjdG9yOiAiLmh0bWw1LXZpZGVvLWNvbnRhaW5lciIKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLmJhbm5lZHZpZGVvLAoJCQkJCXVybDogImh0dHBzOi8vbWFkbWF4d29ybGQudHYvd2F0Y2g/aWQ9IiwKCQkJCQltYXRjaDogL14od3d3Lik/YmFubmVkLnZpZGVvfG1hZG1heHdvcmxkLnR2JC8sCgkJCQkJc2VsZWN0b3I6ICIudmpzLXY3IiwKCQkJCQluZWVkRXh0cmFEYXRhOiAhMAoJCQkJfSwKCQkJCXsKCQkJCQlob3N0OiBtLnIud2V2ZXJzZSwKCQkJCQl1cmw6ICJodHRwczovL3dldmVyc2UuaW8vIiwKCQkJCQltYXRjaDogL153ZXZlcnNlLmlvJC8sCgkJCQkJc2VsZWN0b3I6ICIud2VicGxheWVyLWludGVybmFsLXNvdXJjZS13cmFwcGVyIiwKCQkJCQluZWVkRXh0cmFEYXRhOiAhMAoJCQkJfSwKCQkJCXsKCQkJCQlob3N0OiBtLnIubmV3Z3JvdW5kcywKCQkJCQl1cmw6ICJodHRwczovL3d3dy5uZXdncm91bmRzLmNvbS8iLAoJCQkJCW1hdGNoOiAvXih3d3cuKT9uZXdncm91bmRzLmNvbSQvLAoJCQkJCXNlbGVjdG9yOiAiLm5nLXZpZGVvLXBsYXllciIKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLmVnZ2hlYWQsCgkJCQkJdXJsOiAiaHR0cHM6Ly9lZ2doZWFkLmlvLyIsCgkJCQkJbWF0Y2g6IC9eZWdnaGVhZC5pbyQvLAoJCQkJCXNlbGVjdG9yOiAiLmN1ZXBsYXllci1yZWFjdC12aWRlby1ob2xkZXIiCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci55b3VrdSwKCQkJCQl1cmw6ICJodHRwczovL3YueW91a3UuY29tLyIsCgkJCQkJbWF0Y2g6IC9edi55b3VrdS5jb20kLywKCQkJCQlzZWxlY3RvcjogIiN5a1BsYXllciIKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLmFyY2hpdmUsCgkJCQkJdXJsOiAiaHR0cHM6Ly9hcmNoaXZlLm9yZy9kZXRhaWxzLyIsCgkJCQkJbWF0Y2g6IC9eYXJjaGl2ZS5vcmckLywKCQkJCQlzZWxlY3RvcjogIi5qdy1tZWRpYSIKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLmtvZGlrLAoJCQkJCXVybDogInN0dWIiLAoJCQkJCW1hdGNoOiAvXmtvZGlrLihpbmZvfGJpenxjYykkLywKCQkJCQlzZWxlY3RvcjogIi5mcC1wbGF5ZXIiLAoJCQkJCW5lZWRFeHRyYURhdGE6ICEwCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci5wYXRyZW9uLAoJCQkJCXVybDogInN0dWIiLAoJCQkJCW1hdGNoOiAvXih3d3cuKT9wYXRyZW9uLmNvbSQvLAoJCQkJCXNlbGVjdG9yOiAiZGl2W2RhdGEtdGFnPVwicG9zdC1jYXJkXCJdIGRpdltlbGV2YXRpb249XCJzdWJ0bGVcIl0gPiBkaXYgPiBkaXYgPiBkaXYgPiBkaXYiLAoJCQkJCW5lZWRFeHRyYURhdGE6ICEwCgkJCQl9LAoJCQkJewoJCQkJCWFkZGl0aW9uYWxEYXRhOiAib2xkIiwKCQkJCQlob3N0OiBtLnIucmVkZGl0LAoJCQkJCXVybDogInN0dWIiLAoJCQkJCW1hdGNoOiAvXm9sZC5yZWRkaXQuY29tJC8sCgkJCQkJc2VsZWN0b3I6ICIucmVkZGl0LXZpZGVvLXBsYXllci1yb290IiwKCQkJCQluZWVkRXh0cmFEYXRhOiAhMCwKCQkJCQluZWVkQnlwYXNzQ1NQOiAhMAoJCQkJfSwKCQkJCXsKCQkJCQlob3N0OiBtLnIucmVkZGl0LAoJCQkJCXVybDogInN0dWIiLAoJCQkJCW1hdGNoOiAvXih3d3cufG5ldy4pP3JlZGRpdC5jb20kLywKCQkJCQlzZWxlY3RvcjogImRpdltzbG90PXBvc3QtbWVkaWEtY29udGFpbmVyXSIsCgkJCQkJc2hhZG93Um9vdDogITAsCgkJCQkJbmVlZEV4dHJhRGF0YTogITAsCgkJCQkJbmVlZEJ5cGFzc0NTUDogITAKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLmtpY2ssCgkJCQkJdXJsOiAiaHR0cHM6Ly9raWNrLmNvbS8iLAoJCQkJCW1hdGNoOiAvXmtpY2suY29tJC8sCgkJCQkJc2VsZWN0b3I6ICIjaW5qZWN0ZWQtZW1iZWRkZWQtY2hhbm5lbC1wbGF5ZXItdmlkZW8gPiBkaXYiLAoJCQkJCW5lZWRFeHRyYURhdGE6ICEwCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci5hcHBsZWRldmVsb3BlciwKCQkJCQl1cmw6ICJodHRwczovL2RldmVsb3Blci5hcHBsZS5jb20vIiwKCQkJCQltYXRjaDogL15kZXZlbG9wZXIuYXBwbGUuY29tJC8sCgkJCQkJc2VsZWN0b3I6ICIuZGV2ZWxvcGVyLXZpZGVvLXBsYXllciIsCgkJCQkJbmVlZEV4dHJhRGF0YTogITAsCgkJCQkJbmVlZEJ5cGFzc0NTUDogITAKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLmVwaWNnYW1lcywKCQkJCQl1cmw6ICJodHRwczovL2Rldi5lcGljZ2FtZXMuY29tL2NvbW11bml0eS9sZWFybmluZy8iLAoJCQkJCW1hdGNoOiAvXmRldi5lcGljZ2FtZXMuY29tJC8sCgkJCQkJc2VsZWN0b3I6ICIudmpzLXY3IiwKCQkJCQluZWVkRXh0cmFEYXRhOiAhMAoJCQkJfSwKCQkJCXsKCQkJCQlob3N0OiBtLnIub2R5c2VlLAoJCQkJCXVybDogInN0dWIiLAoJCQkJCW1hdGNoOiAvXm9keXNlZS5jb20kLywKCQkJCQlzZWxlY3RvcjogIi52anMtdjciLAoJCQkJCW5lZWRFeHRyYURhdGE6ICEwCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci5jb3Vyc2VodW50ZXJMaWtlLAoJCQkJCXVybDogInN0dWIiLAoJCQkJCW1hdGNoOiBoLnIsCgkJCQkJc2VsZWN0b3I6ICIjb2ZyYW1lcGxheWVyID4gcGpzZGl2Omhhcyh2aWRlbykiLAoJCQkJCW5lZWRFeHRyYURhdGE6ICEwCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci5zYXAsCgkJCQkJdXJsOiAiaHR0cHM6Ly9sZWFybmluZy5zYXAuY29tL2NvdXJzZXMvIiwKCQkJCQltYXRjaDogL15sZWFybmluZy5zYXAuY29tJC8sCgkJCQkJc2VsZWN0b3I6ICIucGxheWtpdC1jb250YWluZXIiLAoJCQkJCWV2ZW50U2VsZWN0b3I6ICIucGxheWtpdC1wbGF5ZXIiLAoJCQkJCW5lZWRFeHRyYURhdGE6ICEwLAoJCQkJCW5lZWRCeXBhc3NDU1A6ICEwCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IGcuUS51ZGVteSwKCQkJCQl1cmw6ICJodHRwczovL3d3dy51ZGVteS5jb20vIiwKCQkJCQltYXRjaDogL3VkZW15LmNvbSQvLAoJCQkJCXNlbGVjdG9yOiAiZGl2W2RhdGEtcHVycG9zZT1cImN1cnJpY3VsdW0taXRlbS12aWV3ZXItY29udGVudFwiXSA+IHNlY3Rpb24gPiBkaXYgPiBkaXYgPiBkaXYgPiBkaXY6bnRoLW9mLXR5cGUoMikiLAoJCQkJCW5lZWRFeHRyYURhdGE6ICEwCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IGcuUS5jb3Vyc2VyYSwKCQkJCQl1cmw6ICJodHRwczovL3d3dy5jb3Vyc2VyYS5vcmcvIiwKCQkJCQltYXRjaDogL2NvdXJzZXJhLm9yZyQvLAoJCQkJCXNlbGVjdG9yOiAiLnZqcy12OCIsCgkJCQkJbmVlZEV4dHJhRGF0YTogITAKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLndhdGNocG9ybnRvLAoJCQkJCXVybDogImh0dHBzOi8vd2F0Y2hwb3JuLnRvLyIsCgkJCQkJbWF0Y2g6IC9ed2F0Y2hwb3JuLnRvJC8sCgkJCQkJc2VsZWN0b3I6ICIuZnAtcGxheWVyIgoJCQkJfSwKCQkJCXsKCQkJCQlob3N0OiBtLnIubGlua2VkaW4sCgkJCQkJdXJsOiAiaHR0cHM6Ly93d3cubGlua2VkaW4uY29tL2xlYXJuaW5nLyIsCgkJCQkJbWF0Y2g6IC9eKHd3dy4pP2xpbmtlZGluLmNvbSQvLAoJCQkJCXNlbGVjdG9yOiAiLnZqcy12NyIsCgkJCQkJbmVlZEV4dHJhRGF0YTogITAsCgkJCQkJbmVlZEJ5cGFzc0NTUDogITAKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLmluY2VzdGZsaXgsCgkJCQkJdXJsOiAiaHR0cHM6Ly93d3cuaW5jZXN0ZmxpeC5uZXQvd2F0Y2gvIiwKCQkJCQltYXRjaDogL14od3d3Lik/aW5jZXN0ZmxpeC4obmV0fHRvfGNvbSkkLywKCQkJCQlzZWxlY3RvcjogIiNpbmNmbGl4LXN0cmVhbSIsCgkJCQkJbmVlZEV4dHJhRGF0YTogITAKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLnBvcm50biwKCQkJCQl1cmw6ICJodHRwczovL3Bvcm50bi5jb20vdmlkZW9zLyIsCgkJCQkJbWF0Y2g6IC9ecG9ybnRuLmNvbSQvLAoJCQkJCXNlbGVjdG9yOiAiLmZwLXBsYXllciIsCgkJCQkJbmVlZEV4dHJhRGF0YTogITAKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLmR6ZW4sCgkJCQkJdXJsOiAiaHR0cHM6Ly9kemVuLnJ1L3ZpZGVvL3dhdGNoLyIsCgkJCQkJbWF0Y2g6IC9eZHplbi5ydSQvLAoJCQkJCXNlbGVjdG9yOiAiLnplbi11aS12aWRlby12aWRlby1wbGF5ZXIiCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci5jbG91ZGZsYXJlc3RyZWFtLAoJCQkJCXVybDogInN0dWIiLAoJCQkJCW1hdGNoOiAvXih3YXRjaHxlbWJlZHxpZnJhbWV8Y3VzdG9tZXItW14uXSspLmNsb3VkZmxhcmVzdHJlYW0uY29tJC8sCgkJCQkJc2VsZWN0b3I6IG51bGwKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLmxvb20sCgkJCQkJdXJsOiAiaHR0cHM6Ly93d3cubG9vbS5jb20vc2hhcmUvIiwKCQkJCQltYXRjaDogL14od3d3Lik/bG9vbS5jb20kLywKCQkJCQlzZWxlY3RvcjogIi5WaWRlb0xheWVyc0NvbnRhaW5lciIsCgkJCQkJbmVlZEV4dHJhRGF0YTogITAsCgkJCQkJbmVlZEJ5cGFzc0NTUDogITAKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogZy5RLmFydHN0YXRpb24sCgkJCQkJdXJsOiAiaHR0cHM6Ly93d3cuYXJ0c3RhdGlvbi5jb20vbGVhcm5pbmcvIiwKCQkJCQltYXRjaDogL14od3d3Lik/YXJ0c3RhdGlvbi5jb20kLywKCQkJCQlzZWxlY3RvcjogIi52anMtdjciLAoJCQkJCW5lZWRFeHRyYURhdGE6ICEwCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci5ydG5ld3MsCgkJCQkJdXJsOiAiaHR0cHM6Ly93d3cucnQuY29tLyIsCgkJCQkJbWF0Y2g6IC9eKHd3dy4pP3J0LmNvbSQvLAoJCQkJCXNlbGVjdG9yOiAiLmp3LW1lZGlhIiwKCQkJCQluZWVkRXh0cmFEYXRhOiAhMAoJCQkJfSwKCQkJCXsKCQkJCQlob3N0OiBtLnIuYml0dmlldywKCQkJCQl1cmw6ICJodHRwczovL3d3dy5iaXR2aWV3Lm5ldC93YXRjaD92PSIsCgkJCQkJbWF0Y2g6IC9eKHd3dy4pP2JpdHZpZXcubmV0JC8sCgkJCQkJc2VsZWN0b3I6ICIudmxTY3JlZW4iLAoJCQkJCW5lZWRFeHRyYURhdGE6ICEwCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IGcuUS5raWNrc3RhcnRlciwKCQkJCQl1cmw6ICJodHRwczovL3d3dy5raWNrc3RhcnRlci5jb20vIiwKCQkJCQltYXRjaDogL14od3d3Lik/a2lja3N0YXJ0ZXIuY29tLywKCQkJCQlzZWxlY3RvcjogIi5rc3ItdmlkZW8tcGxheWVyIiwKCQkJCQluZWVkRXh0cmFEYXRhOiAhMAoJCQkJfSwKCQkJCXsKCQkJCQlob3N0OiBtLnIudGhpc3ZpZCwKCQkJCQl1cmw6ICJodHRwczovL3RoaXN2aWQuY29tLyIsCgkJCQkJbWF0Y2g6IC9eKHd3dy4pP3RoaXN2aWQuY29tJC8sCgkJCQkJc2VsZWN0b3I6ICIuZnAtcGxheWVyIgoJCQkJfSwKCQkJCXsKCQkJCQlhZGRpdGlvbmFsRGF0YTogInJlZ2lvbmFsIiwKCQkJCQlob3N0OiBtLnIuaWduLAoJCQkJCXVybDogImh0dHBzOi8vZGUuaWduLmNvbS8iLAoJCQkJCW1hdGNoOiAvXihcd3syfS4pP2lnbi5jb20kLywKCQkJCQluZWVkRXh0cmFEYXRhOiAhMCwKCQkJCQlzZWxlY3RvcjogIi52aWRlby1jb250YWluZXIiCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci5pZ24sCgkJCQkJdXJsOiAiaHR0cHM6Ly93d3cuaWduLmNvbS8iLAoJCQkJCW1hdGNoOiAvXih3d3cuKT9pZ24uY29tJC8sCgkJCQkJc2VsZWN0b3I6ICIucGxheWVyIiwKCQkJCQluZWVkRXh0cmFEYXRhOiAhMAoJCQkJfSwKCQkJCXsKCQkJCQlob3N0OiBtLnIuYnVua3IsCgkJCQkJdXJsOiAiaHR0cHM6Ly9idW5rci5zaXRlLyIsCgkJCQkJbWF0Y2g6IC9eYnVua3JcLihzaXRlfGJsYWNrfGNhdHxtZWRpYXxyZWR8c2l0ZXx3c3xvcmd8c1traXVdfGNbaXJdfGZpfHBbaGtzXXxydXxsYXxpc3x0b3xhW2N4XSkkLywKCQkJCQluZWVkRXh0cmFEYXRhOiAhMCwKCQkJCQlzZWxlY3RvcjogIi5wbHlyX192aWRlby13cmFwcGVyIgoJCQkJfSwKCQkJCXsKCQkJCQlob3N0OiBtLnIuaW1kYiwKCQkJCQl1cmw6ICJodHRwczovL3d3dy5pbWRiLmNvbS92aWRlby8iLAoJCQkJCW1hdGNoOiAvXih3d3dcLik/aW1kYlwuY29tJC8sCgkJCQkJc2VsZWN0b3I6ICIuanctbWVkaWEiCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IG0uci50ZWxlZ3JhbSwKCQkJCQl1cmw6ICJodHRwczovL3QubWUvIiwKCQkJCQltYXRjaDogKGQpID0+IC9ed2ViXC50ZWxlZ3JhbVwub3JnJC8udGVzdChkLmhvc3RuYW1lKSAmJiBkLnBhdGhuYW1lLnN0YXJ0c1dpdGgoIi9rIiksCgkJCQkJc2VsZWN0b3I6ICIuY2tpbl9fcGxheWVyIgoJCQkJfSwKCQkJCXsKCQkJCQlob3N0OiBnLlEub3JhY2xlbGVhcm4sCgkJCQkJdXJsOiAiaHR0cHM6Ly9teWxlYXJuLm9yYWNsZS5jb20vb3UvY291cnNlLyIsCgkJCQkJbWF0Y2g6IC9ebXlsZWFyblwub3JhY2xlXC5jb20vLAoJCQkJCXNlbGVjdG9yOiAiLnZqcy12NyIsCgkJCQkJbmVlZEV4dHJhRGF0YTogITAsCgkJCQkJbmVlZEJ5cGFzc0NTUDogITAKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogZy5RLmRlZXBsZWFybmluZ2FpLAoJCQkJCXVybDogImh0dHBzOi8vbGVhcm4uZGVlcGxlYXJuaW5nLmFpL2NvdXJzZXMvIiwKCQkJCQltYXRjaDogL15sZWFybigtZGV2fC1zdGFnaW5nKT9cLmRlZXBsZWFybmluZ1wuYWkvLAoJCQkJCXNlbGVjdG9yOiAiLmxlc3Nvbi12aWRlby1wbGF5ZXIiLAoJCQkJCW5lZWRFeHRyYURhdGE6ICEwCgkJCQl9LAoJCQkJewoJCQkJCWhvc3Q6IGcuUS5uZXRhY2FkLAoJCQkJCXVybDogImh0dHBzOi8vd3d3Lm5ldGFjYWQuY29tLyIsCgkJCQkJbWF0Y2g6IC9eKHd3d1wuKT9uZXRhY2FkXC5jb20vLAoJCQkJCXNlbGVjdG9yOiAiLnZqcy12OCIsCgkJCQkJbmVlZEV4dHJhRGF0YTogITAKCQkJCX0sCgkJCQl7CgkJCQkJaG9zdDogbS5yLmN1c3RvbSwKCQkJCQl1cmw6ICJzdHViIiwKCQkJCQltYXRjaDogKGQpID0+IC8oW14uXSspXC4obXA0fHdlYm0pLy50ZXN0KGQucGF0aG5hbWUpLAoJCQkJCXJhd1Jlc3VsdDogITAKCQkJCX0KCQkJXTsKCQl9LAoJCSIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2V4dC9kaXN0L2hlbHBlcnMvYmFzZS5qcyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5kKGYsIHsKCQkJCWE6ICgpID0+IFZpZGVvSGVscGVyRXJyb3IsCgkJCQlxOiAoKSA9PiBCYXNlSGVscGVyCgkJCX0pOwoJCQl2YXIgbSA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvc2hhcmVkL2Rpc3QvdXRpbHMvdXRpbHMuanMiKTsKCQkJY2xhc3MgVmlkZW9IZWxwZXJFcnJvciBleHRlbmRzIEVycm9yIHsKCQkJCWNvbnN0cnVjdG9yKGQpIHsKCQkJCQlzdXBlcihkKSwgdGhpcy5uYW1lID0gIlZpZGVvSGVscGVyIiwgdGhpcy5tZXNzYWdlID0gZDsKCQkJCX0KCQkJfQoJCQljbGFzcyBCYXNlSGVscGVyIHsKCQkJCUFQSV9PUklHSU4gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luOwoJCQkJZmV0Y2g7CgkJCQlleHRyYUluZm87CgkJCQlyZWZlcmVyOwoJCQkJb3JpZ2luOwoJCQkJc2VydmljZTsKCQkJCXZpZGVvOwoJCQkJbGFuZ3VhZ2U7CgkJCQljb25zdHJ1Y3Rvcih7IGZldGNoRm46IGQgPSBtLnU5LCBleHRyYUluZm86IGYgPSAhMCwgcmVmZXJlcjogcCA9IGRvY3VtZW50LnJlZmVycmVyID8/IGAke3dpbmRvdy5sb2NhdGlvbi5vcmlnaW59L2AsIG9yaWdpbjogaCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sIHNlcnZpY2U6IGcsIHZpZGVvOiBfLCBsYW5ndWFnZTogdiA9ICJlbiIgfSA9IHt9KSB7CgkJCQkJdGhpcy5mZXRjaCA9IGQsIHRoaXMuZXh0cmFJbmZvID0gZiwgdGhpcy5yZWZlcmVyID0gcCwgdGhpcy5vcmlnaW4gPSAvXihodHRwKHMpPyk6XC9cLy8udGVzdChTdHJpbmcoaCkpID8gaCA6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sIHRoaXMuc2VydmljZSA9IGcsIHRoaXMudmlkZW8gPSBfLCB0aGlzLmxhbmd1YWdlID0gdjsKCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvRGF0YShkKSB7fQoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7fQoJCQkJcmV0dXJuQmFzZURhdGEoZCkgewoJCQkJCWlmICh0aGlzLnNlcnZpY2UpIHJldHVybiB7CgkJCQkJCXVybDogdGhpcy5zZXJ2aWNlLnVybCArIGQsCgkJCQkJCXZpZGVvSWQ6IGQsCgkJCQkJCWhvc3Q6IHRoaXMuc2VydmljZS5ob3N0LAoJCQkJCQlkdXJhdGlvbjogdm9pZCAwCgkJCQkJfTsKCQkJCX0KCQkJfQoJCX0sCgkJIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvZXh0L2Rpc3QvaGVscGVycy9pbmRleC5qcyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5kKGYsIHsKCQkJCUpXOiAoKSA9PiBELAoJCQkJQXk6ICgpID0+IFZpZGVvSGVscGVyCgkJCX0pOwoJCQl2YXIgbSA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvY29yZS9kaXN0L3R5cGVzL3NlcnZpY2UuanMiKSwgaCA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvZXh0L2Rpc3QvdHlwZXMvc2VydmljZS5qcyIpLCBnID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9leHQvZGlzdC9oZWxwZXJzL2Jhc2UuanMiKSwgXyA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvc2hhcmVkL2Rpc3QvdXRpbHMvbG9nZ2VyLmpzIik7CgkJCWNsYXNzIEFwcGxlRGV2ZWxvcGVySGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCUFQSV9PUklHSU4gPSAiaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tIjsKCQkJCWFzeW5jIGdldFZpZGVvRGF0YShkKSB7CgkJCQkJdHJ5IHsKCQkJCQkJbGV0IGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJtZXRhW3Byb3BlcnR5PSdvZzp2aWRlbyddIik/LmNvbnRlbnQ7CgkJCQkJCWlmICghZCkgdGhyb3cgbmV3IGcuYSgiRmFpbGVkIHRvIGZpbmQgY29udGVudCB1cmwiKTsKCQkJCQkJcmV0dXJuIHsgdXJsOiBkIH07CgkJCQkJfSBjYXRjaCAoZikgewoJCQkJCQlfLkEuZXJyb3IoYEZhaWxlZCB0byBnZXQgYXBwbGUgZGV2ZWxvcGVyIHZpZGVvIGRhdGEgYnkgdmlkZW8gSUQ6ICR7ZH1gLCBmLm1lc3NhZ2UpOwoJCQkJCQlyZXR1cm47CgkJCQkJfQoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7CgkJCQkJcmV0dXJuIC92aWRlb3NcL3BsYXlcLyhbXi9dKylcLyhbXGRdKykvLmV4ZWMoZC5wYXRobmFtZSk/LlswXTsKCQkJCX0KCQkJfQoJCQljbGFzcyBBcmNoaXZlSGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCXJldHVybiAvKGRldGFpbHN8ZW1iZWQpXC8oW14vXSspLy5leGVjKGQucGF0aG5hbWUpPy5bMl07CgkJCQl9CgkJCX0KCQkJdmFyIHYgPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL3NoYXJlZC9kaXN0L3V0aWxzL3V0aWxzLmpzIik7CgkJCWNsYXNzIEFydHN0YXRpb25IZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJQVBJX09SSUdJTiA9ICJodHRwczovL3d3dy5hcnRzdGF0aW9uLmNvbS9hcGkvdjIvbGVhcm5pbmciOwoJCQkJZ2V0Q1NSRlRva2VuKCkgewoJCQkJCXJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJtZXRhW25hbWU9XCJwdWJsaWMtY3NyZi10b2tlblwiXSIpPy5jb250ZW50OwoJCQkJfQoJCQkJYXN5bmMgZ2V0Q291cnNlSW5mbyhkKSB7CgkJCQkJdHJ5IHsKCQkJCQkJbGV0IGYgPSBhd2FpdCB0aGlzLmZldGNoKGAke3RoaXMuQVBJX09SSUdJTn0vY291cnNlcy8ke2R9L2F1dG9wbGF5Lmpzb25gLCB7CgkJCQkJCQltZXRob2Q6ICJQT1NUIiwKCQkJCQkJCWhlYWRlcnM6IHsgIlBVQkxJQy1DU1JGLVRPS0VOIjogdGhpcy5nZXRDU1JGVG9rZW4oKSB9CgkJCQkJCX0pOwoJCQkJCQlyZXR1cm4gYXdhaXQgZi5qc29uKCk7CgkJCQkJfSBjYXRjaCAoZikgewoJCQkJCQlyZXR1cm4gXy5BLmVycm9yKGBGYWlsZWQgdG8gZ2V0IGFydHN0YXRpb24gY291cnNlIGluZm8gYnkgY291cnNlSWQ6ICR7ZH0uYCwgZi5tZXNzYWdlKSwgITE7CgkJCQkJfQoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9VcmwoZCkgewoJCQkJCXRyeSB7CgkJCQkJCWxldCBmID0gYXdhaXQgdGhpcy5mZXRjaChgJHt0aGlzLkFQSV9PUklHSU59L3F1aWNrc2lsdmVyL3ZpZGVvX3VybC5qc29uP2NoYXB0ZXJfaWQ9JHtkfWApLCBwID0gYXdhaXQgZi5qc29uKCk7CgkJCQkJCXJldHVybiBwLnVybC5yZXBsYWNlKCJxc2VwOi8vIiwgImh0dHBzOi8vIik7CgkJCQkJfSBjYXRjaCAoZikgewoJCQkJCQlyZXR1cm4gXy5BLmVycm9yKGBGYWlsZWQgdG8gZ2V0IGFydHN0YXRpb24gdmlkZW8gdXJsIGJ5IGNoYXB0ZXJJZDogJHtkfS5gLCBmLm1lc3NhZ2UpLCAhMTsKCQkJCQl9CgkJCQl9CgkJCQlhc3luYyBnZXRWaWRlb0RhdGEoZCkgewoJCQkJCWxldCBbLCBmLCAsICwgcF0gPSBkLnNwbGl0KCIvIiksIG0gPSBhd2FpdCB0aGlzLmdldENvdXJzZUluZm8oZik7CgkJCQkJaWYgKCFtKSByZXR1cm47CgkJCQkJbGV0IGggPSBtLmNoYXB0ZXJzLmZpbmQoKGQpID0+IGQuaGFzaF9pZCA9PT0gcCk7CgkJCQkJaWYgKCFoKSByZXR1cm47CgkJCQkJbGV0IGcgPSBhd2FpdCB0aGlzLmdldFZpZGVvVXJsKGguaWQpOwoJCQkJCWlmICghZykgcmV0dXJuOwoJCQkJCWxldCB7IHRpdGxlOiBfLCBkdXJhdGlvbjogYiwgc3VidGl0bGVzOiB4IH0gPSBoLCBDID0geC5maWx0ZXIoKGQpID0+IGQuZm9ybWF0ID09PSAidnR0IikubWFwKChkKSA9PiAoewoJCQkJCQlsYW5ndWFnZTogKDAsIHYuZWMpKGQubG9jYWxlKSwKCQkJCQkJc291cmNlOiAiYXJ0c3RhdGlvbiIsCgkJCQkJCWZvcm1hdDogInZ0dCIsCgkJCQkJCXVybDogZC5maWxlX3VybAoJCQkJCX0pKTsKCQkJCQlyZXR1cm4gewoJCQkJCQl1cmw6IGcsCgkJCQkJCXRpdGxlOiBfLAoJCQkJCQlkdXJhdGlvbjogYiwKCQkJCQkJc3VidGl0bGVzOiBDCgkJCQkJfTsKCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCXJldHVybiAvY291cnNlc1wvKFx3ezMsNX0pXC8oW14vXSspXC9jaGFwdGVyc1wvKFx3ezMsNX0pLy5leGVjKGQucGF0aG5hbWUpPy5bMF07CgkJCQl9CgkJCX0KCQkJY2xhc3MgQmFubmVkVmlkZW9IZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJQVBJX09SSUdJTiA9ICJodHRwczovL2FwaS5iYW5uZWQudmlkZW8iOwoJCQkJYXN5bmMgZ2V0VmlkZW9JbmZvKGQpIHsKCQkJCQl0cnkgewoJCQkJCQlsZXQgZiA9IGF3YWl0IHRoaXMuZmV0Y2goYCR7dGhpcy5BUElfT1JJR0lOfS9ncmFwaHFsYCwgewoJCQkJCQkJbWV0aG9kOiAiUE9TVCIsCgkJCQkJCQlib2R5OiBKU09OLnN0cmluZ2lmeSh7CgkJCQkJCQkJb3BlcmF0aW9uTmFtZTogIkdldFZpZGVvIiwKCQkJCQkJCQlxdWVyeTogInF1ZXJ5IEdldFZpZGVvKCRpZDogU3RyaW5nISkge1xuICAgICAgICAgICAgZ2V0VmlkZW8oaWQ6ICRpZCkge1xuICAgICAgICAgICAgICB0aXRsZVxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogc3VtbWFyeVxuICAgICAgICAgICAgICBkdXJhdGlvbjogdmlkZW9EdXJhdGlvblxuICAgICAgICAgICAgICB2aWRlb1VybDogZGlyZWN0VXJsXG4gICAgICAgICAgICAgIGlzU3RyZWFtOiBsaXZlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSIsCgkJCQkJCQkJdmFyaWFibGVzOiB7IGlkOiBkIH0KCQkJCQkJCX0pLAoJCQkJCQkJaGVhZGVyczogewoJCQkJCQkJCSJVc2VyLUFnZW50IjogImJhbm5lZFZpZGVvRnJvbnRFbmQiLAoJCQkJCQkJCSJhcG9sbG9ncmFwaHFsLWNsaWVudC1uYW1lIjogImJhbm5lZC13ZWIiLAoJCQkJCQkJCSJhcG9sbG9ncmFwaHFsLWNsaWVudC12ZXJzaW9uIjogIjEuMyIsCgkJCQkJCQkJImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIgoJCQkJCQkJfQoJCQkJCQl9KTsKCQkJCQkJcmV0dXJuIGF3YWl0IGYuanNvbigpOwoJCQkJCX0gY2F0Y2ggKGYpIHsKCQkJCQkJcmV0dXJuIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBnZXQgYmFubmVkdmlkZW8gdmlkZW8gaW5mbyBieSB2aWRlb0lkOiAke2R9LmAsIGYubWVzc2FnZSksICExOwoJCQkJCX0KCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvRGF0YShkKSB7CgkJCQkJbGV0IGYgPSBhd2FpdCB0aGlzLmdldFZpZGVvSW5mbyhkKTsKCQkJCQlpZiAoIWYpIHJldHVybjsKCQkJCQlsZXQgeyB2aWRlb1VybDogcCwgZHVyYXRpb246IG0sIGlzU3RyZWFtOiBoLCBkZXNjcmlwdGlvbjogZywgdGl0bGU6IF8gfSA9IGYuZGF0YS5nZXRWaWRlbzsKCQkJCQlyZXR1cm4gewoJCQkJCQl1cmw6IHAsCgkJCQkJCWR1cmF0aW9uOiBtLAoJCQkJCQlpc1N0cmVhbTogaCwKCQkJCQkJdGl0bGU6IF8sCgkJCQkJCWRlc2NyaXB0aW9uOiBnCgkJCQkJfTsKCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCXJldHVybiBkLnNlYXJjaFBhcmFtcy5nZXQoImlkIikgPz8gdm9pZCAwOwoJCQkJfQoJCQl9CgkJCWNsYXNzIEJpbGliaWxpSGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCWxldCBmID0gL2Jhbmd1bWlcL3BsYXlcLyhbXi9dKykvLmV4ZWMoZC5wYXRobmFtZSk/LlswXTsKCQkJCQlpZiAoZikgcmV0dXJuIGY7CgkJCQkJbGV0IHAgPSBkLnNlYXJjaFBhcmFtcy5nZXQoImJ2aWQiKTsKCQkJCQlpZiAocCkgcmV0dXJuIGB2aWRlby8ke3B9YDsKCQkJCQlsZXQgbSA9IC92aWRlb1wvKFteL10rKS8uZXhlYyhkLnBhdGhuYW1lKT8uWzBdOwoJCQkJCXJldHVybiBtICYmIGQuc2VhcmNoUGFyYW1zLmdldCgicCIpICE9PSBudWxsICYmIChtICs9IGAvP3A9JHtkLnNlYXJjaFBhcmFtcy5nZXQoInAiKX1gKSwgbTsKCQkJCX0KCQkJfQoJCQljbGFzcyBCaXRjaHV0ZUhlbHBlciBleHRlbmRzIGcucSB7CgkJCQlhc3luYyBnZXRWaWRlb0lkKGQpIHsKCQkJCQlyZXR1cm4gLyh2aWRlb3xlbWJlZClcLyhbXi9dKykvLmV4ZWMoZC5wYXRobmFtZSk/LlsyXTsKCQkJCX0KCQkJfQoJCQljbGFzcyBCaXR2aWV3SGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCWFzeW5jIGdldFZpZGVvRGF0YShkKSB7CgkJCQkJdHJ5IHsKCQkJCQkJbGV0IGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIudmxTY3JlZW4gPiB2aWRlbyIpPy5zcmM7CgkJCQkJCWlmICghZCkgdGhyb3cgbmV3IGcuYSgiRmFpbGVkIHRvIGZpbmQgdmlkZW8gVVJMIik7CgkJCQkJCXJldHVybiB7IHVybDogZCB9OwoJCQkJCX0gY2F0Y2ggKGYpIHsKCQkJCQkJXy5BLmVycm9yKGBGYWlsZWQgdG8gZ2V0IEJpdHZpZXcgZGF0YSBieSB2aWRlb0lkOiAke2R9YCwgZi5tZXNzYWdlKTsKCQkJCQkJcmV0dXJuOwoJCQkJCX0KCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCXJldHVybiBkLnNlYXJjaFBhcmFtcy5nZXQoInYiKTsKCQkJCX0KCQkJfQoJCQljbGFzcyBCdW5rckhlbHBlciBleHRlbmRzIGcucSB7CgkJCQlhc3luYyBnZXRWaWRlb0RhdGEoZCkgewoJCQkJCWxldCBmID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3BsYXllciA+IHNvdXJjZVt0eXBlPVwidmlkZW8vbXA0XCJdIik/LnNyYzsKCQkJCQlpZiAoZikgcmV0dXJuIHsgdXJsOiBmIH07CgkJCQl9CgkJCQlhc3luYyBnZXRWaWRlb0lkKGQpIHsKCQkJCQlyZXR1cm4gL1wvZlwvKFteL10rKS8uZXhlYyhkLnBhdGhuYW1lKT8uWzFdOwoJCQkJfQoJCQl9CgkJCWNsYXNzIENsb3VkZmxhcmVTdHJlYW1IZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7CgkJCQkJcmV0dXJuIGQucGF0aG5hbWUgKyBkLnNlYXJjaDsKCQkJCX0KCQkJfQoJCQljbGFzcyBDb3Vyc2VodW50ZXJMaWtlSGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCUFQSV9PUklHSU4gPSB0aGlzLm9yaWdpbiA/PyAiaHR0cHM6Ly9jb3Vyc2VodW50ZXIubmV0IjsKCQkJCWFzeW5jIGdldENvdXJzZUlkKCkgewoJCQkJCWxldCBkID0gd2luZG93LmNvdXJzZV9pZDsKCQkJCQlyZXR1cm4gZCA9PT0gdm9pZCAwID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaW5wdXRbbmFtZT1cImNvdXJzZV9pZFwiXSIpPy52YWx1ZSA6IFN0cmluZyhkKTsKCQkJCX0KCQkJCWFzeW5jIGdldExlc3NvbnNEYXRhKGQpIHsKCQkJCQlsZXQgZiA9IHdpbmRvdy5sZXNzb25zOwoJCQkJCWlmIChmPy5sZW5ndGgpIHJldHVybiBmOwoJCQkJCXRyeSB7CgkJCQkJCWxldCBmID0gYXdhaXQgdGhpcy5mZXRjaChgJHt0aGlzLkFQSV9PUklHSU59L2FwaS92MS9jb3Vyc2UvJHtkfS9sZXNzb25zYCk7CgkJCQkJCXJldHVybiBhd2FpdCBmLmpzb24oKTsKCQkJCQl9IGNhdGNoIChmKSB7CgkJCQkJCV8uQS5lcnJvcihgRmFpbGVkIHRvIGdldCBDb3Vyc2VodW50ZXJMaWtlIGxlc3NvbnMgZGF0YSBieSBjb3Vyc2VJZDogJHtkfSwgYmVjYXVzZSAke2YubWVzc2FnZX1gKTsKCQkJCQkJcmV0dXJuOwoJCQkJCX0KCQkJCX0KCQkJCWdldExlc3NvbmRJZChkKSB7CgkJCQkJbGV0IGYgPSBkLnNwbGl0KCI/bGVzc29uPSIpPy5bMV07CgkJCQkJaWYgKGYpIHJldHVybiArZjsKCQkJCQlsZXQgcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5sZXNzb25zLWl0ZW1fYWN0aXZlIik7CgkJCQkJcmV0dXJuIGYgPSBwPy5kYXRhc2V0Py5pbmRleCwgZiA/ICtmIDogMTsKCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvRGF0YShkKSB7CgkJCQkJbGV0IGYgPSBhd2FpdCB0aGlzLmdldENvdXJzZUlkKCk7CgkJCQkJaWYgKCFmKSByZXR1cm47CgkJCQkJbGV0IHAgPSBhd2FpdCB0aGlzLmdldExlc3NvbnNEYXRhKGYpOwoJCQkJCWlmICghcCkgcmV0dXJuOwoJCQkJCWxldCBtID0gdGhpcy5nZXRMZXNzb25kSWQoZCksIGggPSBwPy5bbSAtIDFdLCB7IGZpbGU6IGcsIGR1cmF0aW9uOiBfLCB0aXRsZTogYiB9ID0gaDsKCQkJCQlpZiAoZykgcmV0dXJuIHsKCQkJCQkJdXJsOiAoMCwgdi5mbCkoZyksCgkJCQkJCWR1cmF0aW9uOiBfLAoJCQkJCQl0aXRsZTogYgoJCQkJCX07CgkJCQl9CgkJCQlhc3luYyBnZXRWaWRlb0lkKGQpIHsKCQkJCQlsZXQgZiA9IC9jb3Vyc2VcLyhbXi9dKykvLmV4ZWMoZC5wYXRobmFtZSk/LlswXTsKCQkJCQlyZXR1cm4gZiA/IGYgKyBkLnNlYXJjaCA6IHZvaWQgMDsKCQkJCX0KCQkJfQoJCQljbGFzcyBWaWRlb0pTSGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCVNVQlRJVExFX1NPVVJDRSA9ICJ2aWRlb2pzIjsKCQkJCVNVQlRJVExFX0ZPUk1BVCA9ICJ2dHQiOwoJCQkJc3RhdGljIGdldFBsYXllcigpIHsKCQkJCQlyZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnZpZGVvLWpzIik/LnBsYXllcjsKCQkJCX0KCQkJCWdldFZpZGVvRGF0YUJ5UGxheWVyKGQpIHsKCQkJCQl0cnkgewoJCQkJCQlsZXQgZiA9IFZpZGVvSlNIZWxwZXIuZ2V0UGxheWVyKCk7CgkJCQkJCWlmICghZikgdGhyb3cgRXJyb3IoYFZpZGVvIHBsYXllciBkb2Vzbid0IGhhdmUgcGxheWVyIG9wdGlvbiwgdmlkZW9JZCAke2R9YCk7CgkJCQkJCWxldCBwID0gZi5kdXJhdGlvbigpLCBtID0gQXJyYXkuaXNBcnJheShmLmN1cnJlbnRTb3VyY2VzKSA/IGYuY3VycmVudFNvdXJjZXMgOiBmLmdldENhY2hlKCk/LnNvdXJjZXMsIHsgdHJhY2tzXzogaCB9ID0gZi50ZXh0VHJhY2tzKCksIGcgPSBtLmZpbmQoKGQpID0+IGQudHlwZSA9PT0gInZpZGVvL21wNCIgfHwgZC50eXBlID09PSAidmlkZW8vd2VibSIpOwoJCQkJCQlpZiAoIWcpIHRocm93IEVycm9yKGBGYWlsZWQgdG8gZmluZCB2aWRlbyB1cmwgZm9yIHZpZGVvSUQgJHtkfWApOwoJCQkJCQlsZXQgXyA9IGguZmlsdGVyKChkKSA9PiBkLnNyYyAmJiBkLmtpbmQgIT09ICJtZXRhZGF0YSIpLm1hcCgoZCkgPT4gKHsKCQkJCQkJCWxhbmd1YWdlOiAoMCwgdi5lYykoZC5sYW5ndWFnZSksCgkJCQkJCQlzb3VyY2U6IHRoaXMuU1VCVElUTEVfU09VUkNFLAoJCQkJCQkJZm9ybWF0OiB0aGlzLlNVQlRJVExFX0ZPUk1BVCwKCQkJCQkJCXVybDogZC5zcmMKCQkJCQkJfSkpOwoJCQkJCQlyZXR1cm4gewoJCQkJCQkJdXJsOiBnLnNyYywKCQkJCQkJCWR1cmF0aW9uOiBwLAoJCQkJCQkJc3VidGl0bGVzOiBfCgkJCQkJCX07CgkJCQkJfSBjYXRjaCAoZCkgewoJCQkJCQlfLkEuZXJyb3IoIkZhaWxlZCB0byBnZXQgdmlkZW9qcyB2aWRlbyBkYXRhIiwgZC5tZXNzYWdlKTsKCQkJCQkJcmV0dXJuOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQl2YXIgYiA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvc2hhcmVkL2Rpc3QvZGF0YS9jb25zdHMuanMiKTsKCQkJY2xhc3MgQ291cnNlcmFIZWxwZXIgZXh0ZW5kcyBWaWRlb0pTSGVscGVyIHsKCQkJCUFQSV9PUklHSU4gPSAiaHR0cHM6Ly93d3cuY291cnNlcmEub3JnL2FwaSI7CgkJCQlTVUJUSVRMRV9TT1VSQ0UgPSAiY291cnNlcmEiOwoJCQkJYXN5bmMgZ2V0Q291cnNlRGF0YShkKSB7CgkJCQkJdHJ5IHsKCQkJCQkJbGV0IGYgPSBhd2FpdCB0aGlzLmZldGNoKGAke3RoaXMuQVBJX09SSUdJTn0vb25EZW1hbmRDb3Vyc2VzLnYxLyR7ZH1gKSwgcCA9IGF3YWl0IGYuanNvbigpOwoJCQkJCQlyZXR1cm4gcD8uZWxlbWVudHM/LlswXTsKCQkJCQl9IGNhdGNoIChmKSB7CgkJCQkJCV8uQS5lcnJvcihgRmFpbGVkIHRvIGdldCBjb3Vyc2UgZGF0YSBieSBjb3Vyc2VJZDogJHtkfWAsIGYubWVzc2FnZSk7CgkJCQkJCXJldHVybjsKCQkJCQl9CgkJCQl9CgkJCQlzdGF0aWMgZ2V0UGxheWVyKCkgewoJCQkJCXJldHVybiBWaWRlb0pTSGVscGVyLmdldFBsYXllcigpOwoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9EYXRhKGQpIHsKCQkJCQlsZXQgZiA9IHRoaXMuZ2V0VmlkZW9EYXRhQnlQbGF5ZXIoZCk7CgkJCQkJaWYgKCFmKSByZXR1cm47CgkJCQkJbGV0IHsgb3B0aW9uc186IHAgfSA9IENvdXJzZXJhSGVscGVyLmdldFBsYXllcigpID8/IHt9OwoJCQkJCSFmLnN1YnRpdGxlcz8ubGVuZ3RoICYmIHAgJiYgKGYuc3VidGl0bGVzID0gcC50cmFja3MubWFwKChkKSA9PiAoewoJCQkJCQl1cmw6IGQuc3JjLAoJCQkJCQlsYW5ndWFnZTogKDAsIHYuZWMpKGQuc3JjbGFuZyksCgkJCQkJCXNvdXJjZTogdGhpcy5TVUJUSVRMRV9TT1VSQ0UsCgkJCQkJCWZvcm1hdDogdGhpcy5TVUJUSVRMRV9GT1JNQVQKCQkJCQl9KSkpOwoJCQkJCWxldCBtID0gcD8uY291cnNlSWQ7CgkJCQkJaWYgKCFtKSByZXR1cm4gZjsKCQkJCQlsZXQgaCA9ICJlbiIsIGcgPSBhd2FpdCB0aGlzLmdldENvdXJzZURhdGEobSk7CgkJCQkJaWYgKGcpIHsKCQkJCQkJbGV0IHsgcHJpbWFyeUxhbmd1YWdlQ29kZXM6IFtkXSB9ID0gZzsKCQkJCQkJaCA9IGQgPyAoMCwgdi5lYykoZCkgOiAiZW4iOwoJCQkJCX0KCQkJCQliLnhtLmluY2x1ZGVzKGgpIHx8IChoID0gImVuIik7CgkJCQkJbGV0IHggPSBmLnN1YnRpdGxlcy5maW5kKChkKSA9PiBkLmxhbmd1YWdlID09PSBoKSA/PyBmLnN1YnRpdGxlcz8uWzBdLCBDID0geD8udXJsOwoJCQkJCUMgfHwgXy5BLndhcm4oIkZhaWxlZCB0byBmaW5kIGFueSBzdWJ0aXRsZSBmaWxlIik7CgkJCQkJbGV0IHsgdXJsOiB3LCBkdXJhdGlvbjogVCB9ID0gZiwgRSA9IEMgPyBbewoJCQkJCQl0YXJnZXQ6ICJzdWJ0aXRsZXNfZmlsZV91cmwiLAoJCQkJCQl0YXJnZXRVcmw6IEMKCQkJCQl9LCB7CgkJCQkJCXRhcmdldDogInZpZGVvX2ZpbGVfdXJsIiwKCQkJCQkJdGFyZ2V0VXJsOiB3CgkJCQkJfV0gOiBudWxsOwoJCQkJCXJldHVybiB7CgkJCQkJCS4uLkMgPyB7CgkJCQkJCQl1cmw6IHRoaXMuc2VydmljZT8udXJsICsgZCwKCQkJCQkJCXRyYW5zbGF0aW9uSGVscDogRQoJCQkJCQl9IDogewoJCQkJCQkJdXJsOiB3LAoJCQkJCQkJdHJhbnNsYXRpb25IZWxwOiBFCgkJCQkJCX0sCgkJCQkJCWRldGVjdGVkTGFuZ3VhZ2U6IGgsCgkJCQkJCWR1cmF0aW9uOiBUCgkJCQkJfTsKCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCWxldCBmID0gL2xlYXJuXC8oW14vXSspXC9sZWN0dXJlXC8oW14vXSspLy5leGVjKGQucGF0aG5hbWUpID8/IC9sZWN0dXJlXC8oW14vXSspXC8oW14vXSspLy5leGVjKGQucGF0aG5hbWUpOwoJCQkJCXJldHVybiBmPy5bMF07CgkJCQl9CgkJCX0KCQkJY2xhc3MgRGFpbHltb3Rpb25IZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7CgkJCQkJbGV0IGYgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIioiKSkuZmlsdGVyKChkKSA9PiBkLmlubmVySFRNTC50cmltKCkuaW5jbHVkZXMoIi5tM3U4IikpLCBwID0gZj8uWzFdPy5sYXN0Q2hpbGQ/LnNyYzsKCQkJCQlyZXR1cm4gcCA/IC9cL3ZpZGVvXC8oXHcrKVwubTN1OC8uZXhlYyhwKT8uWzFdIDogdm9pZCAwOwoJCQkJfQoJCQl9CgkJCWNsYXNzIERlZXBsZWFybmluZ0FJSGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCWFzeW5jIGdldFZpZGVvRGF0YShkKSB7CgkJCQkJaWYgKCF0aGlzLnZpZGVvKSByZXR1cm47CgkJCQkJbGV0IGYgPSB0aGlzLnZpZGVvLnF1ZXJ5U2VsZWN0b3IoInNvdXJjZVt0eXBlPVwiYXBwbGljYXRpb24veC1tcGVndXJsXCJdIik/LnNyYzsKCQkJCQlpZiAoZikgcmV0dXJuIHsgdXJsOiBmIH07CgkJCQl9CgkJCQlhc3luYyBnZXRWaWRlb0lkKGQpIHsKCQkJCQlyZXR1cm4gL2NvdXJzZXNcLygoW14vXSspXC9sZXNzb25cLyhbXi9dKylcLyhbXi9dKykpLy5leGVjKGQucGF0aG5hbWUpPy5bMV07CgkJCQl9CgkJCX0KCQkJY2xhc3MgRG91eWluSGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCXN0YXRpYyBnZXRQbGF5ZXIoKSB7CgkJCQkJaWYgKCEodHlwZW9mIHBsYXllciA+ICJ1IikpIHJldHVybiBwbGF5ZXI7CgkJCQl9CgkJCQlhc3luYyBnZXRWaWRlb0RhdGEoZCkgewoJCQkJCWxldCBmID0gRG91eWluSGVscGVyLmdldFBsYXllcigpOwoJCQkJCWlmICghZikgcmV0dXJuOwoJCQkJCWxldCB7IGNvbmZpZzogeyB1cmw6IHAsIGR1cmF0aW9uOiBtLCBsYW5nOiBoLCBpc0xpdmU6IGcgfSB9ID0gZjsKCQkJCQlpZiAoIXApIHJldHVybjsKCQkJCQlsZXQgXyA9IHAuZmluZCgoZCkgPT4gZC5zcmMuaW5jbHVkZXMoInd3dy5kb3V5aW4uY29tL2F3ZW1lL3YxL3BsYXkvIikpOwoJCQkJCWlmIChfKSByZXR1cm4gewoJCQkJCQl1cmw6ICgwLCB2LmZsKShfLnNyYyksCgkJCQkJCWR1cmF0aW9uOiBtLAoJCQkJCQlpc1N0cmVhbTogZywKCQkJCQkJLi4uYi54bS5pbmNsdWRlcyhoKSA/IHsgZGV0ZWN0ZWRMYW5ndWFnZTogaCB9IDoge30KCQkJCQl9OwoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7CgkJCQkJbGV0IGYgPSAvdmlkZW9cLyhbXGRdKykvLmV4ZWMoZC5wYXRobmFtZSk/LlswXTsKCQkJCQlyZXR1cm4gZiB8fCBEb3V5aW5IZWxwZXIuZ2V0UGxheWVyKCk/LmNvbmZpZy52aWQ7CgkJCQl9CgkJCX0KCQkJY2xhc3MgRHplbkhlbHBlciBleHRlbmRzIGcucSB7CgkJCQlhc3luYyBnZXRWaWRlb0lkKGQpIHsKCQkJCQlyZXR1cm4gL3ZpZGVvXC93YXRjaFwvKFteL10rKS8uZXhlYyhkLnBhdGhuYW1lKT8uWzFdOwoJCQkJfQoJCQl9CgkJCWNsYXNzIEVnZ2hlYWRIZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7CgkJCQkJcmV0dXJuIGQucGF0aG5hbWUuc2xpY2UoMSk7CgkJCQl9CgkJCX0KCQkJY2xhc3MgRXBpY0dhbWVzSGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCUFQSV9PUklHSU4gPSAiaHR0cHM6Ly9kZXYuZXBpY2dhbWVzLmNvbS9jb21tdW5pdHkvYXBpL2xlYXJuaW5nIjsKCQkJCWFzeW5jIGdldFBvc3RJbmZvKGQpIHsKCQkJCQl0cnkgewoJCQkJCQlsZXQgZiA9IGF3YWl0IHRoaXMuZmV0Y2goYCR7dGhpcy5BUElfT1JJR0lOfS9wb3N0Lmpzb24/aGFzaF9pZD0ke2R9YCk7CgkJCQkJCXJldHVybiBhd2FpdCBmLmpzb24oKTsKCQkJCQl9IGNhdGNoIChmKSB7CgkJCQkJCXJldHVybiBfLkEuZXJyb3IoYEZhaWxlZCB0byBnZXQgZXBpY2dhbWVzIHBvc3QgaW5mbyBieSB2aWRlb0lkOiAke2R9LmAsIGYubWVzc2FnZSksICExOwoJCQkJCX0KCQkJCX0KCQkJCWdldFZpZGVvQmxvY2soKSB7CgkJCQkJbGV0IGQgPSAvdmlkZW9Vcmxccz89XHMiKFteIl0rKSI/LywgZiA9IEFycmF5LmZyb20oZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yQWxsKCJzY3JpcHQiKSkuZmluZCgoZikgPT4gZC5leGVjKGYuaW5uZXJIVE1MKSk7CgkJCQkJaWYgKCFmKSByZXR1cm47CgkJCQkJbGV0IHAgPSBmLmlubmVySFRNTC50cmltKCksIG0gPSBkLmV4ZWMocCk/LlsxXT8ucmVwbGFjZSgicXNlcDovLyIsICJodHRwczovLyIpOwoJCQkJCWlmICghbSkgcmV0dXJuOwoJCQkJCWxldCBoID0gL3NvdXJjZXNccz89XHMoXFsoW15cXV0rKVxdKT8vLmV4ZWMocCk/LlsxXTsKCQkJCQlpZiAoIWgpIHJldHVybiB7CgkJCQkJCXBsYXlsaXN0VXJsOiBtLAoJCQkJCQlzdWJ0aXRsZXM6IFtdCgkJCQkJfTsKCQkJCQl0cnkgewoJCQkJCQloID0gKGgucmVwbGFjZSgvc3JjOihccykrPyh2aWRlb1VybCkvZywgInNyYzpcInJlbW92ZWRcIiIpLnN1YnN0cmluZygwLCBoLmxhc3RJbmRleE9mKCJ9LCIpKSArICJdIikuc3BsaXQoIlxuIikubWFwKChkKSA9PiBkLnJlcGxhY2UoLyhbXlxzXSspOlxzPyg/IS4qXDEpLywgIlwiJDFcIjoiKSkuam9pbigiXG4iKTsKCQkJCQkJbGV0IGQgPSBKU09OLnBhcnNlKGgpLCBmID0gZC5maWx0ZXIoKGQpID0+IGQudHlwZSA9PT0gImNhcHRpb25zIik7CgkJCQkJCXJldHVybiB7CgkJCQkJCQlwbGF5bGlzdFVybDogbSwKCQkJCQkJCXN1YnRpdGxlczogZgoJCQkJCQl9OwoJCQkJCX0gY2F0Y2ggewoJCQkJCQlyZXR1cm4gewoJCQkJCQkJcGxheWxpc3RVcmw6IG0sCgkJCQkJCQlzdWJ0aXRsZXM6IFtdCgkJCQkJCX07CgkJCQkJfQoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9EYXRhKGQpIHsKCQkJCQlsZXQgZiA9IGQuc3BsaXQoIjoiKT8uWzFdLCBwID0gYXdhaXQgdGhpcy5nZXRQb3N0SW5mbyhmKTsKCQkJCQlpZiAoIXApIHJldHVybjsKCQkJCQlsZXQgbSA9IHRoaXMuZ2V0VmlkZW9CbG9jaygpOwoJCQkJCWlmICghbSkgcmV0dXJuOwoJCQkJCWxldCB7IHBsYXlsaXN0VXJsOiBoLCBzdWJ0aXRsZXM6IGcgfSA9IG0sIHsgdGl0bGU6IF8sIGRlc2NyaXB0aW9uOiBiIH0gPSBwLCB4ID0gZy5tYXAoKGQpID0+ICh7CgkJCQkJCWxhbmd1YWdlOiAoMCwgdi5lYykoZC5zcmNsYW5nKSwKCQkJCQkJc291cmNlOiAiZXBpY2dhbWVzIiwKCQkJCQkJZm9ybWF0OiAidnR0IiwKCQkJCQkJdXJsOiBkLnNyYwoJCQkJCX0pKTsKCQkJCQlyZXR1cm4gewoJCQkJCQl1cmw6IGgsCgkJCQkJCXRpdGxlOiBfLAoJCQkJCQlkZXNjcmlwdGlvbjogYiwKCQkJCQkJc3VidGl0bGVzOiB4CgkJCQkJfTsKCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCXJldHVybiBuZXcgUHJvbWlzZSgoZCkgPT4gewoJCQkJCQlsZXQgZiA9ICJodHRwczovL2Rldi5lcGljZ2FtZXMuY29tIiwgcCA9IGJ0b2Eod2luZG93LmxvY2F0aW9uLmhyZWYpOwoJCQkJCQl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIChwKSA9PiB7CgkJCQkJCQlpZiAocC5vcmlnaW4gIT09IGYgfHwgISh0eXBlb2YgcC5kYXRhID09ICJzdHJpbmciICYmIHAuZGF0YS5zdGFydHNXaXRoKCJnZXRWaWRlb0lkOiIpKSkgcmV0dXJuOwoJCQkJCQkJbGV0IG0gPSBwLmRhdGEucmVwbGFjZSgiZ2V0VmlkZW9JZDoiLCAiIik7CgkJCQkJCQlyZXR1cm4gZChtKTsKCQkJCQkJfSksIHdpbmRvdy50b3AucG9zdE1lc3NhZ2UoYGdldFZpZGVvSWQ6JHtwfWAsIGYpOwoJCQkJCX0pOwoJCQkJfQoJCQl9CgkJCWNsYXNzIEVwb3JuZXJIZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7CgkJCQkJcmV0dXJuIC92aWRlby0oW14vXSspXC8oW14vXSspLy5leGVjKGQucGF0aG5hbWUpPy5bMF07CgkJCQl9CgkJCX0KCQkJY2xhc3MgRmFjZWJvb2tIZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7CgkJCQkJcmV0dXJuIGQucGF0aG5hbWUuc2xpY2UoMSk7CgkJCQl9CgkJCX0KCQkJY2xhc3MgR29vZ2xlRHJpdmVIZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJZ2V0UGxheWVyRGF0YSgpIHsKCQkJCQlsZXQgZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNtb3ZpZV9wbGF5ZXIiKTsKCQkJCQlyZXR1cm4gZD8uZ2V0VmlkZW9EYXRhPy5jYWxsKCkgPz8gdm9pZCAwOwoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7CgkJCQkJcmV0dXJuIHRoaXMuZ2V0UGxheWVyRGF0YSgpPy52aWRlb19pZDsKCQkJCX0KCQkJfQoJCQl2YXIgeCA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvY29yZS9kaXN0L3V0aWxzL3ZpZGVvRGF0YS5qcyIpOwoJCQljbGFzcyBJZ25IZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJZ2V0VmlkZW9EYXRhQnlTb3VyY2UoZCkgewoJCQkJCWxldCBmID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmljbXMudmlkZW8gPiBzb3VyY2VbdHlwZT1cInZpZGVvL21wNFwiXVtkYXRhLXF1YWxpdHk9XCIzNjBcIl0iKT8uc3JjOwoJCQkJCXJldHVybiBmID8geyB1cmw6ICgwLCB2LmZsKShmKSB9IDogdGhpcy5yZXR1cm5CYXNlRGF0YShkKTsKCQkJCX0KCQkJCWdldFZpZGVvRGF0YUJ5TmV4dChkKSB7CgkJCQkJdHJ5IHsKCQkJCQkJbGV0IGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiX19ORVhUX0RBVEFfXyIpPy50ZXh0Q29udGVudDsKCQkJCQkJaWYgKCFkKSB0aHJvdyBuZXcgeC5BKCJOb3QgZm91bmQgX19ORVhUX0RBVEFfXyBjb250ZW50Iik7CgkJCQkJCWxldCBmID0gSlNPTi5wYXJzZShkKSwgeyBwcm9wczogeyBwYWdlUHJvcHM6IHsgcGFnZTogeyBkZXNjcmlwdGlvbjogcCwgdGl0bGU6IG0sIHZpZGVvOiB7IHZpZGVvTWV0YWRhdGE6IHsgZHVyYXRpb246IGggfSwgYXNzZXRzOiBnIH0gfSB9IH0gfSA9IGYsIF8gPSBnLmZpbmQoKGQpID0+IGQuaGVpZ2h0ID09PSAzNjAgJiYgZC51cmwuaW5jbHVkZXMoIi5tcDQiKSk/LnVybDsKCQkJCQkJaWYgKCFfKSB0aHJvdyBuZXcgeC5BKCJOb3QgZm91bmQgdmlkZW8gVVJMIGluIGFzc2V0cyIpOwoJCQkJCQlyZXR1cm4gewoJCQkJCQkJdXJsOiAoMCwgdi5mbCkoXyksCgkJCQkJCQlkdXJhdGlvbjogaCwKCQkJCQkJCXRpdGxlOiBtLAoJCQkJCQkJZGVzY3JpcHRpb246IHAKCQkJCQkJfTsKCQkJCQl9IGNhdGNoIChmKSB7CgkJCQkJCXJldHVybiBfLkEud2FybihgRmFpbGVkIHRvIGdldCBpZ24gdmlkZW8gZGF0YSBieSB2aWRlbyBJRDogJHtkfSwgYmVjYXVzZSAke2YubWVzc2FnZX0uIFVzaW5nIGNsZWFyIGxpbmsgaW5zdGVhZC4uLmApLCB0aGlzLnJldHVybkJhc2VEYXRhKGQpOwoJCQkJCX0KCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvRGF0YShkKSB7CgkJCQkJcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJfX05FWFRfREFUQV9fIikgPyB0aGlzLmdldFZpZGVvRGF0YUJ5TmV4dChkKSA6IHRoaXMuZ2V0VmlkZW9EYXRhQnlTb3VyY2UoZCk7CgkJCQl9CgkJCQlhc3luYyBnZXRWaWRlb0lkKGQpIHsKCQkJCQlyZXR1cm4gLyhbXi9dKylcLyhbXGRdKylcL3ZpZGVvXC8oW14vXSspLy5leGVjKGQucGF0aG5hbWUpPy5bMF0gPz8gL1wvdmlkZW9zXC8oW14vXSspLy5leGVjKGQucGF0aG5hbWUpPy5bMF07CgkJCQl9CgkJCX0KCQkJY2xhc3MgSU1EYkhlbHBlciBleHRlbmRzIGcucSB7CgkJCQlhc3luYyBnZXRWaWRlb0lkKGQpIHsKCQkJCQlyZXR1cm4gL3ZpZGVvXC8oW14vXSspLy5leGVjKGQucGF0aG5hbWUpPy5bMV07CgkJCQl9CgkJCX0KCQkJY2xhc3MgSW5jZXN0ZmxpeEhlbHBlciBleHRlbmRzIGcucSB7CgkJCQlhc3luYyBnZXRWaWRlb0RhdGEoZCkgewoJCQkJCXRyeSB7CgkJCQkJCWxldCBkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2luY2ZsaXgtc3RyZWFtIHNvdXJjZTpmaXJzdC1vZi10eXBlIik7CgkJCQkJCWlmICghZCkgdGhyb3cgbmV3IGcuYSgiRmFpbGVkIHRvIGZpbmQgc291cmNlIGVsZW1lbnQiKTsKCQkJCQkJbGV0IGYgPSBkLmdldEF0dHJpYnV0ZSgic3JjIik7CgkJCQkJCWlmICghZikgdGhyb3cgbmV3IGcuYSgiRmFpbGVkIHRvIGZpbmQgc291cmNlIGxpbmsiKTsKCQkJCQkJbGV0IHAgPSBuZXcgVVJMKGYuc3RhcnRzV2l0aCgiLy8iKSA/IGBodHRwczoke2Z9YCA6IGYpOwoJCQkJCQlyZXR1cm4gcC5zZWFyY2hQYXJhbXMuYXBwZW5kKCJtZWRpYS1wcm94eSIsICJ2aWRlby5tcDQiKSwgeyB1cmw6ICgwLCB2LmZsKShwKSB9OwoJCQkJCX0gY2F0Y2ggKGYpIHsKCQkJCQkJXy5BLmVycm9yKGBGYWlsZWQgdG8gZ2V0IEluY2VzdGZsaXggZGF0YSBieSB2aWRlb0lkOiAke2R9YCwgZi5tZXNzYWdlKTsKCQkJCQkJcmV0dXJuOwoJCQkJCX0KCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCXJldHVybiAvXC93YXRjaFwvKFteL10rKS8uZXhlYyhkLnBhdGhuYW1lKT8uWzFdOwoJCQkJfQoJCQl9CgkJCWNsYXNzIEtpY2tIZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJQVBJX09SSUdJTiA9ICJodHRwczovL2tpY2suY29tL2FwaSI7CgkJCQlhc3luYyBnZXRDbGlwSW5mbyhkKSB7CgkJCQkJdHJ5IHsKCQkJCQkJbGV0IGYgPSBhd2FpdCB0aGlzLmZldGNoKGAke3RoaXMuQVBJX09SSUdJTn0vdjIvY2xpcHMvJHtkfWApLCBwID0gYXdhaXQgZi5qc29uKCksIHsgY2xpcF91cmw6IG0sIGR1cmF0aW9uOiBoLCB0aXRsZTogZyB9ID0gcC5jbGlwOwoJCQkJCQlyZXR1cm4gewoJCQkJCQkJdXJsOiBtLAoJCQkJCQkJZHVyYXRpb246IGgsCgkJCQkJCQl0aXRsZTogZwoJCQkJCQl9OwoJCQkJCX0gY2F0Y2ggKGYpIHsKCQkJCQkJXy5BLmVycm9yKGBGYWlsZWQgdG8gZ2V0IGtpY2sgY2xpcCBpbmZvIGJ5IGNsaXBJZDogJHtkfS5gLCBmLm1lc3NhZ2UpOwoJCQkJCQlyZXR1cm47CgkJCQkJfQoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9JbmZvKGQpIHsKCQkJCQl0cnkgewoJCQkJCQlsZXQgZiA9IGF3YWl0IHRoaXMuZmV0Y2goYCR7dGhpcy5BUElfT1JJR0lOfS92MS92aWRlby8ke2R9YCksIHAgPSBhd2FpdCBmLmpzb24oKSwgeyBzb3VyY2U6IG0sIGxpdmVzdHJlYW06IGggfSA9IHAsIHsgc2Vzc2lvbl90aXRsZTogZywgZHVyYXRpb246IF8gfSA9IGg7CgkJCQkJCXJldHVybiB7CgkJCQkJCQl1cmw6IG0sCgkJCQkJCQlkdXJhdGlvbjogTWF0aC5yb3VuZChfIC8gMWUzKSwKCQkJCQkJCXRpdGxlOiBnCgkJCQkJCX07CgkJCQkJfSBjYXRjaCAoZikgewoJCQkJCQlfLkEuZXJyb3IoYEZhaWxlZCB0byBnZXQga2ljayB2aWRlbyBpbmZvIGJ5IHZpZGVvSWQ6ICR7ZH0uYCwgZi5tZXNzYWdlKTsKCQkJCQkJcmV0dXJuOwoJCQkJCX0KCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvRGF0YShkKSB7CgkJCQkJcmV0dXJuIGQuc3RhcnRzV2l0aCgidmlkZW9zIikgPyBhd2FpdCB0aGlzLmdldFZpZGVvSW5mbyhkLnJlcGxhY2UoInZpZGVvcy8iLCAiIikpIDogYXdhaXQgdGhpcy5nZXRDbGlwSW5mbyhkLnJlcGxhY2UoImNsaXBzLyIsICIiKSk7CgkJCQl9CgkJCQlhc3luYyBnZXRWaWRlb0lkKGQpIHsKCQkJCQlyZXR1cm4gLyhbXi9dKylcLygodmlkZW9zfGNsaXBzKVwvKFteL10rKSkvLmV4ZWMoZC5wYXRobmFtZSk/LlsyXTsKCQkJCX0KCQkJfQoJCQljbGFzcyBLaWNrc3RhcnRlckhlbHBlciBleHRlbmRzIGcucSB7CgkJCQlhc3luYyBnZXRWaWRlb0RhdGEoZCkgewoJCQkJCXRyeSB7CgkJCQkJCWxldCBkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmtzci12aWRlby1wbGF5ZXIgPiB2aWRlbyIpLCBmID0gZD8ucXVlcnlTZWxlY3Rvcigic291cmNlW3R5cGVePSd2aWRlby9tcDQnXSIpPy5zcmM7CgkJCQkJCWlmICghZikgdGhyb3cgbmV3IGcuYSgiRmFpbGVkIHRvIGZpbmQgdmlkZW8gVVJMIik7CgkJCQkJCWxldCBwID0gZD8ucXVlcnlTZWxlY3RvckFsbCgidHJhY2siKSA/PyBbXTsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCXVybDogZiwKCQkJCQkJCXN1YnRpdGxlczogQXJyYXkuZnJvbShwKS5yZWR1Y2UoKGQsIGYpID0+IHsKCQkJCQkJCQlsZXQgcCA9IGYuZ2V0QXR0cmlidXRlKCJzcmNsYW5nIiksIG0gPSBmLmdldEF0dHJpYnV0ZSgic3JjIik7CgkJCQkJCQkJcmV0dXJuICFwIHx8ICFtIHx8IGQucHVzaCh7CgkJCQkJCQkJCWxhbmd1YWdlOiAoMCwgdi5lYykocCksCgkJCQkJCQkJCXVybDogbSwKCQkJCQkJCQkJZm9ybWF0OiAidnR0IiwKCQkJCQkJCQkJc291cmNlOiAia2lja3N0YXJ0ZXIiCgkJCQkJCQkJfSksIGQ7CgkJCQkJCQl9LCBbXSkKCQkJCQkJfTsKCQkJCQl9IGNhdGNoIChmKSB7CgkJCQkJCV8uQS5lcnJvcihgRmFpbGVkIHRvIGdldCBLaWNrc3RhcnRlciBkYXRhIGJ5IHZpZGVvSWQ6ICR7ZH1gLCBmLm1lc3NhZ2UpOwoJCQkJCQlyZXR1cm47CgkJCQkJfQoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7CgkJCQkJcmV0dXJuIGQucGF0aG5hbWUuc2xpY2UoMSk7CgkJCQl9CgkJCX0KCQkJdmFyIEMgPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL3NoYXJlZC9kaXN0L2RhdGEvY29uZmlnLmpzIik7CgkJCWNsYXNzIEtvZGlrSGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCUFQSV9PUklHSU4gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luOwoJCQkJZ2V0U2VjdXJlRGF0YShkKSB7CgkJCQkJdHJ5IHsKCQkJCQkJbGV0IFtmLCBwLCBtXSA9IGQuc3BsaXQoIi8iKS5maWx0ZXIoKGQpID0+IGQpLCBoID0gQXJyYXkuZnJvbShkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0IikpLCBfID0gaC5maWx0ZXIoKGQpID0+IGQuaW5uZXJIVE1MLmluY2x1ZGVzKGB2aWRlb0lkID0gIiR7cH0iYCkgfHwgZC5pbm5lckhUTUwuaW5jbHVkZXMoYHNlcmlhbElkID0gTnVtYmVyKCR7cH0pYCkpOwoJCQkJCQlpZiAoIV8ubGVuZ3RoKSB0aHJvdyBuZXcgZy5hKCJGYWlsZWQgdG8gZmluZCBzZWN1cmUgc2NyaXB0Iik7CgkJCQkJCWxldCB2ID0gLyd7W14nXSt9Jy8uZXhlYyhfWzBdLnRleHRDb250ZW50LnRyaW0oKSk/LlswXTsKCQkJCQkJaWYgKCF2KSB0aHJvdyBuZXcgZy5hKCJTZWN1cmUganNvbiB3YXNuJ3QgZm91bmQgaW4gc2VjdXJlIHNjcmlwdCIpOwoJCQkJCQlsZXQgYiA9IEpTT04ucGFyc2Uodi5yZXBsYWNlQWxsKCInIiwgIiIpKTsKCQkJCQkJaWYgKGYgIT09ICJzZXJpYWwiKSByZXR1cm4gewoJCQkJCQkJdmlkZW9UeXBlOiBmLAoJCQkJCQkJdmlkZW9JZDogcCwKCQkJCQkJCWhhc2g6IG0sCgkJCQkJCQkuLi5iCgkJCQkJCX07CgkJCQkJCWxldCB4ID0gaC5maW5kKChkKSA9PiBkLmlubmVySFRNTC5pbmNsdWRlcygidmFyIHZpZGVvSW5mbyA9IHt9IikpPy50ZXh0Q29udGVudD8udHJpbSgpOwoJCQkJCQlpZiAoIXgpIHRocm93IG5ldyBnLmEoIkZhaWxlZCB0byBmaW5kIHZpZGVvSW5mbyBjb250ZW50Iik7CgkJCQkJCWxldCBDID0gL3ZpZGVvSW5mb1wudHlwZVxzKz89XHMrPycoW14nXSspJy8uZXhlYyh4KT8uWzFdLCB3ID0gL3ZpZGVvSW5mb1wuaWRccys/PVxzKz8nKFteJ10rKScvLmV4ZWMoeCk/LlsxXSwgVCA9IC92aWRlb0luZm9cLmhhc2hccys/PVxzKz8nKFteJ10rKScvLmV4ZWMoeCk/LlsxXTsKCQkJCQkJaWYgKCFDIHx8ICF3IHx8ICFUKSB0aHJvdyBuZXcgZy5hKCJGYWlsZWQgdG8gcGFyc2UgdmlkZW9JbmZvIGNvbnRlbnQiKTsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCXZpZGVvVHlwZTogQywKCQkJCQkJCXZpZGVvSWQ6IHcsCgkJCQkJCQloYXNoOiBULAoJCQkJCQkJLi4uYgoJCQkJCQl9OwoJCQkJCX0gY2F0Y2ggKGYpIHsKCQkJCQkJcmV0dXJuIF8uQS5lcnJvcihgRmFpbGVkIHRvIGdldCBrb2RpayBzZWN1cmUgZGF0YSBieSB2aWRlb1BhdGg6ICR7ZH0uYCwgZi5tZXNzYWdlKSwgITE7CgkJCQkJfQoJCQkJfQoJCQkJYXN5bmMgZ2V0RnRvcihkKSB7CgkJCQkJbGV0IHsgdmlkZW9UeXBlOiBmLCB2aWRlb0lkOiBwLCBoYXNoOiBtLCBkOiBoLCBkX3NpZ246IGcsIHBkOiB2LCBwZF9zaWduOiBiLCByZWY6IHgsIHJlZl9zaWduOiB3IH0gPSBkOwoJCQkJCXRyeSB7CgkJCQkJCWxldCBkID0gYXdhaXQgdGhpcy5mZXRjaCh0aGlzLkFQSV9PUklHSU4gKyAiL2Z0b3IiLCB7CgkJCQkJCQltZXRob2Q6ICJQT1NUIiwKCQkJCQkJCWhlYWRlcnM6IHsKCQkJCQkJCQkiVXNlci1BZ2VudCI6IEMuQS51c2VyQWdlbnQsCgkJCQkJCQkJT3JpZ2luOiB0aGlzLkFQSV9PUklHSU4sCgkJCQkJCQkJUmVmZXJlcjogYCR7dGhpcy5BUElfT1JJR0lOfS8ke2Z9LyR7cH0vJHttfS8zNjBwYAoJCQkJCQkJfSwKCQkJCQkJCWJvZHk6IG5ldyBVUkxTZWFyY2hQYXJhbXMoewoJCQkJCQkJCWQ6IGgsCgkJCQkJCQkJZF9zaWduOiBnLAoJCQkJCQkJCXBkOiB2LAoJCQkJCQkJCXBkX3NpZ246IGIsCgkJCQkJCQkJcmVmOiBkZWNvZGVVUklDb21wb25lbnQoeCksCgkJCQkJCQkJcmVmX3NpZ246IHcsCgkJCQkJCQkJYmFkX3VzZXI6ICJmYWxzZSIsCgkJCQkJCQkJY2RuX2lzX3dvcmtpbmc6ICJ0cnVlIiwKCQkJCQkJCQlpbmZvOiAie30iLAoJCQkJCQkJCXR5cGU6IGYsCgkJCQkJCQkJaGFzaDogbSwKCQkJCQkJCQlpZDogcAoJCQkJCQkJfSkKCQkJCQkJfSk7CgkJCQkJCXJldHVybiBhd2FpdCBkLmpzb24oKTsKCQkJCQl9IGNhdGNoIChkKSB7CgkJCQkJCXJldHVybiBfLkEuZXJyb3IoYEZhaWxlZCB0byBnZXQga29kaWsgdmlkZW8gZGF0YSAodHlwZTogJHtmfSwgaWQ6ICR7cH0sIGhhc2g6ICR7bX0pYCwgZC5tZXNzYWdlKSwgITE7CgkJCQkJfQoJCQkJfQoJCQkJZGVjcnlwdFVybChkKSB7CgkJCQkJbGV0IGYgPSBhdG9iKGQucmVwbGFjZSgvW2EtekEtWl0vZywgZnVuY3Rpb24oZCkgewoJCQkJCQlsZXQgZiA9IGQuY2hhckNvZGVBdCgwKSArIDE4LCBwID0gZCA8PSAiWiIgPyA5MCA6IDEyMjsKCQkJCQkJcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUocCA+PSBmID8gZiA6IGYgLSAyNik7CgkJCQkJfSkpOwoJCQkJCXJldHVybiAiaHR0cHM6IiArIGY7CgkJCQl9CgkJCQlhc3luYyBnZXRWaWRlb0RhdGEoZCkgewoJCQkJCWxldCBmID0gdGhpcy5nZXRTZWN1cmVEYXRhKGQpOwoJCQkJCWlmICghZikgcmV0dXJuOwoJCQkJCWxldCBwID0gYXdhaXQgdGhpcy5nZXRGdG9yKGYpOwoJCQkJCWlmICghcCkgcmV0dXJuOwoJCQkJCWxldCBtID0gT2JqZWN0LmVudHJpZXMocC5saW5rc1twLmRlZmF1bHQudG9TdHJpbmcoKV0pLCBoID0gbS5maW5kKChbLCBkXSkgPT4gZC50eXBlID09PSAiYXBwbGljYXRpb24veC1tcGVnVVJMIik/LlsxXTsKCQkJCQlpZiAoaCkgcmV0dXJuIHsgdXJsOiBoLnNyYy5zdGFydHNXaXRoKCIvLyIpID8gYGh0dHBzOiR7aC5zcmN9YCA6IHRoaXMuZGVjcnlwdFVybChoLnNyYykgfTsKCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCXJldHVybiAvXC8odXZ8dmlkZW98c2VyaWF8ZXBpc29kZXxzZWFzb258c2VyaWFsKVwvKFteL10rKVwvKFteL10rKVwvKFtcZF0rKXAvLmV4ZWMoZC5wYXRobmFtZSk/LlswXTsKCQkJCX0KCQkJfQoJCQljbGFzcyBMaW5rZWRpbkhlbHBlciBleHRlbmRzIFZpZGVvSlNIZWxwZXIgewoJCQkJU1VCVElUTEVfU09VUkNFID0gImxpbmtlZGluIjsKCQkJCWFzeW5jIGdldFZpZGVvRGF0YShkKSB7CgkJCQkJbGV0IGYgPSB0aGlzLmdldFZpZGVvRGF0YUJ5UGxheWVyKGQpOwoJCQkJCWlmICghZikgcmV0dXJuOwoJCQkJCWxldCB7IHVybDogcCwgZHVyYXRpb246IG0sIHN1YnRpdGxlczogaCB9ID0gZjsKCQkJCQlyZXR1cm4gewoJCQkJCQl1cmw6ICgwLCB2LmZsKShuZXcgVVJMKHApKSwKCQkJCQkJZHVyYXRpb246IG0sCgkJCQkJCXN1YnRpdGxlczogaAoJCQkJCX07CgkJCQl9CgkJCQlhc3luYyBnZXRWaWRlb0lkKGQpIHsKCQkJCQlyZXR1cm4gL1wvbGVhcm5pbmdcLygoW14vXSspXC8oW14vXSspKS8uZXhlYyhkLnBhdGhuYW1lKT8uWzFdOwoJCQkJfQoJCQl9CgkJCXZhciB3ID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9zaGFyZWQvZGlzdC9pbmRleC5qcyIpOwoJCQljbGFzcyBMb29tSGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCWdldENsaWVudFZlcnNpb24oKSB7CgkJCQkJaWYgKCEodHlwZW9mIFNFTlRSWV9SRUxFQVNFID4gInUiKSkgcmV0dXJuIFNFTlRSWV9SRUxFQVNFLmlkOwoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9EYXRhKGQpIHsKCQkJCQl0cnkgewoJCQkJCQlsZXQgZiA9IHRoaXMuZ2V0Q2xpZW50VmVyc2lvbigpOwoJCQkJCQlpZiAoIWYpIHRocm93IG5ldyBnLmEoIkZhaWxlZCB0byBnZXQgY2xpZW50IHZlcnNpb24iKTsKCQkJCQkJbGV0IHAgPSBhd2FpdCB0aGlzLmZldGNoKCJodHRwczovL3d3dy5sb29tLmNvbS9ncmFwaHFsIiwgewoJCQkJCQkJaGVhZGVyczogewoJCQkJCQkJCSJVc2VyLUFnZW50Ijogdy4kVy51c2VyQWdlbnQsCgkJCQkJCQkJImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKCQkJCQkJCQkieC1sb29tLXJlcXVlc3Qtc291cmNlIjogYGxvb21fd2ViXyR7Zn1gLAoJCQkJCQkJCSJhcG9sbG9ncmFwaHFsLWNsaWVudC1uYW1lIjogIndlYiIsCgkJCQkJCQkJImFwb2xsb2dyYXBocWwtY2xpZW50LXZlcnNpb24iOiBmLAoJCQkJCQkJCSJBbHQtVXNlZCI6ICJ3d3cubG9vbS5jb20iCgkJCQkJCQl9LAoJCQkJCQkJYm9keTogYHsib3BlcmF0aW9uTmFtZSI6IkZldGNoQ2FwdGlvbnMiLCJ2YXJpYWJsZXMiOnsidmlkZW9JZCI6IiR7ZH0ifSwicXVlcnkiOiJxdWVyeSBGZXRjaENhcHRpb25zKCR2aWRlb0lkOiBJRCEsICRwYXNzd29yZDogU3RyaW5nKSB7XFxuICBmZXRjaFZpZGVvVHJhbnNjcmlwdCh2aWRlb0lkOiAkdmlkZW9JZCwgcGFzc3dvcmQ6ICRwYXNzd29yZCkge1xcbiAgICAuLi4gb24gVmlkZW9UcmFuc2NyaXB0RGV0YWlscyB7XFxuICAgICAgaWRcXG4gICAgICBjYXB0aW9uc19zb3VyY2VfdXJsXFxuICAgICAgbGFuZ3VhZ2VcXG4gICAgICBfX3R5cGVuYW1lXFxuICAgIH1cXG4gICAgLi4uIG9uIEdlbmVyaWNFcnJvciB7XFxuICAgICAgbWVzc2FnZVxcbiAgICAgIF9fdHlwZW5hbWVcXG4gICAgfVxcbiAgICBfX3R5cGVuYW1lXFxuICB9XFxufSJ9YCwKCQkJCQkJCW1ldGhvZDogIlBPU1QiCgkJCQkJCX0pOwoJCQkJCQlpZiAocC5zdGF0dXMgIT09IDIwMCkgdGhyb3cgbmV3IGcuYSgiRmFpbGVkIHRvIGdldCBkYXRhIGZyb20gZ3JhcGhxbCIpOwoJCQkJCQlsZXQgbSA9IGF3YWl0IHAuanNvbigpLCBoID0gbS5kYXRhLmZldGNoVmlkZW9UcmFuc2NyaXB0OwoJCQkJCQlpZiAoaC5fX3R5cGVuYW1lID09PSAiR2VuZXJpY0Vycm9yIikgdGhyb3cgbmV3IGcuYShoLm1lc3NhZ2UpOwoJCQkJCQlyZXR1cm4gewoJCQkJCQkJdXJsOiB0aGlzLnNlcnZpY2UudXJsICsgZCwKCQkJCQkJCXN1YnRpdGxlczogW3sKCQkJCQkJCQlmb3JtYXQ6ICJ2dHQiLAoJCQkJCQkJCWxhbmd1YWdlOiAoMCwgdi5lYykoaC5sYW5ndWFnZSksCgkJCQkJCQkJc291cmNlOiAibG9vbSIsCgkJCQkJCQkJdXJsOiBoLmNhcHRpb25zX3NvdXJjZV91cmwKCQkJCQkJCX1dCgkJCQkJCX07CgkJCQkJfSBjYXRjaCAoZikgewoJCQkJCQlyZXR1cm4gXy5BLmVycm9yKGBGYWlsZWQgdG8gZ2V0IExvb20gdmlkZW8gZGF0YSwgYmVjYXVzZTogJHtmLm1lc3NhZ2V9YCksIHRoaXMucmV0dXJuQmFzZURhdGEoZCk7CgkJCQkJfQoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7CgkJCQkJcmV0dXJuIC8oZW1iZWR8c2hhcmUpXC8oW14vXSspPy8uZXhlYyhkLnBhdGhuYW1lKT8uWzJdOwoJCQkJfQoJCQl9CgkJCWNsYXNzIE1haWxSdUhlbHBlciBleHRlbmRzIGcucSB7CgkJCQlBUElfT1JJR0lOID0gImh0dHBzOi8vbXkubWFpbC5ydSI7CgkJCQlhc3luYyBnZXRWaWRlb01ldGEoZCkgewoJCQkJCXRyeSB7CgkJCQkJCWxldCBmID0gYXdhaXQgdGhpcy5mZXRjaChgJHt0aGlzLkFQSV9PUklHSU59LysvdmlkZW8vbWV0YS8ke2R9P3hlbWFpbD0mYWpheF9jYWxsPTEmZnVuY19uYW1lPSZtbmE9Jm1uYj0mZXh0PTEmXz0ke25ldyBEYXRlKCkuZ2V0VGltZSgpfWApOwoJCQkJCQlyZXR1cm4gYXdhaXQgZi5qc29uKCk7CgkJCQkJfSBjYXRjaCAoZCkgewoJCQkJCQlfLkEuZXJyb3IoIkZhaWxlZCB0byBnZXQgbWFpbC5ydSB2aWRlbyBkYXRhIiwgZC5tZXNzYWdlKTsKCQkJCQkJcmV0dXJuOwoJCQkJCX0KCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCWxldCBmID0gZC5wYXRobmFtZTsKCQkJCQlpZiAoL1wvKHZ8bWFpbHxia3xpbmJveClcLy8uZXhlYyhmKSkgcmV0dXJuIGYuc2xpY2UoMSk7CgkJCQkJbGV0IHAgPSAvdmlkZW9cL2VtYmVkXC8oW14vXSspLy5leGVjKGYpPy5bMV07CgkJCQkJaWYgKCFwKSByZXR1cm47CgkJCQkJbGV0IG0gPSBhd2FpdCB0aGlzLmdldFZpZGVvTWV0YShwKTsKCQkJCQlpZiAobSkgcmV0dXJuIG0ubWV0YS51cmwucmVwbGFjZSgiLy9teS5tYWlsLnJ1LyIsICIiKTsKCQkJCX0KCQkJfQoJCQljbGFzcyBOZXRhY2FkSGVscGVyIGV4dGVuZHMgVmlkZW9KU0hlbHBlciB7CgkJCQlTVUJUSVRMRV9TT1VSQ0UgPSAibmV0YWNhZCI7CgkJCQlhc3luYyBnZXRWaWRlb0RhdGEoZCkgewoJCQkJCWxldCBmID0gdGhpcy5nZXRWaWRlb0RhdGFCeVBsYXllcihkKTsKCQkJCQlpZiAoIWYpIHJldHVybjsKCQkJCQlsZXQgeyB1cmw6IHAsIGR1cmF0aW9uOiBtLCBzdWJ0aXRsZXM6IGggfSA9IGY7CgkJCQkJcmV0dXJuIHsKCQkJCQkJdXJsOiAoMCwgdi5mbCkobmV3IFVSTChwKSksCgkJCQkJCWR1cmF0aW9uOiBtLAoJCQkJCQlzdWJ0aXRsZXM6IGgKCQkJCQl9OwoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7CgkJCQkJcmV0dXJuIGQucGF0aG5hbWUgKyBkLnNlYXJjaDsKCQkJCX0KCQkJfQoJCQljbGFzcyBOZXdncm91bmRzSGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCXJldHVybiAvKFteL10rKVwvKHZpZXcpXC8oW14vXSspLy5leGVjKGQucGF0aG5hbWUpPy5bMF07CgkJCQl9CgkJCX0KCQkJY2xhc3MgTmluZUdBR0hlbHBlciBleHRlbmRzIGcucSB7CgkJCQlhc3luYyBnZXRWaWRlb0RhdGEoZCkgewoJCQkJCWxldCBmID0gdGhpcy5yZXR1cm5CYXNlRGF0YShkKTsKCQkJCQlpZiAoIWYpIHJldHVybiBmOwoJCQkJCXRyeSB7CgkJCQkJCWlmICghdGhpcy52aWRlbykgdGhyb3cgRXJyb3IoIlZpZGVvIGVsZW1lbnQgbm90IGZvdW5kIik7CgkJCQkJCWxldCBkID0gdGhpcy52aWRlby5xdWVyeVNlbGVjdG9yKCJzb3VyY2VbdHlwZV49XCJ2aWRlby9tcDRcIl0sIHNvdXJjZVt0eXBlXj1cInZpZGVvL3dlYm1cIl0iKT8uc3JjOwoJCQkJCQlpZiAoIWQgfHwgIS9eaHR0cHM/OlwvXC8vLnRlc3QoZCkpIHRocm93IEVycm9yKCJWaWRlbyBzb3VyY2Ugbm90IGZvdW5kIik7CgkJCQkJCXJldHVybiB7CgkJCQkJCQkuLi5mLAoJCQkJCQkJdHJhbnNsYXRpb25IZWxwOiBbewoJCQkJCQkJCXRhcmdldDogInZpZGVvX2ZpbGVfdXJsIiwKCQkJCQkJCQl0YXJnZXRVcmw6IGQKCQkJCQkJCX1dCgkJCQkJCX07CgkJCQkJfSBjYXRjaCB7CgkJCQkJCXJldHVybiBmOwoJCQkJCX0KCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCXJldHVybiAvZ2FnXC8oW14vXSspLy5leGVjKGQucGF0aG5hbWUpPy5bMV07CgkJCQl9CgkJCX0KCQkJY2xhc3MgT2R5c2VlSGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCUFQSV9PUklHSU4gPSAiaHR0cHM6Ly9vZHlzZWUuY29tIjsKCQkJCWFzeW5jIGdldFZpZGVvRGF0YShkKSB7CgkJCQkJdHJ5IHsKCQkJCQkJbGV0IGYgPSBhd2FpdCB0aGlzLmZldGNoKGAke3RoaXMuQVBJX09SSUdJTn0vJHtkfWApLCBwID0gYXdhaXQgZi50ZXh0KCksIG0gPSAvImNvbnRlbnRVcmwiOihccyk/IihbXiJdKykiLy5leGVjKHApPy5bMl07CgkJCQkJCWlmICghbSkgdGhyb3cgbmV3IGcuYSgiT2R5c2VlIHVybCBkb2Vzbid0IHBhcnNlZCIpOwoJCQkJCQlyZXR1cm4geyB1cmw6IG0gfTsKCQkJCQl9IGNhdGNoIChmKSB7CgkJCQkJCV8uQS5lcnJvcihgRmFpbGVkIHRvIGdldCBvZHlzZWUgdmlkZW8gZGF0YSBieSB2aWRlbyBJRDogJHtkfWAsIGYubWVzc2FnZSk7CgkJCQkJCXJldHVybjsKCQkJCQl9CgkJCQl9CgkJCQlhc3luYyBnZXRWaWRlb0lkKGQpIHsKCQkJCQlyZXR1cm4gZC5wYXRobmFtZS5zbGljZSgxKTsKCQkJCX0KCQkJfQoJCQljbGFzcyBPS1J1SGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCXJldHVybiAvXC92aWRlb1wvKFxkKykvLmV4ZWMoZC5wYXRobmFtZSk/LlsxXTsKCQkJCX0KCQkJfQoJCQljbGFzcyBPcmFjbGVMZWFybkhlbHBlciBleHRlbmRzIFZpZGVvSlNIZWxwZXIgewoJCQkJU1VCVElUTEVfU09VUkNFID0gIm9yYWNsZWxlYXJuIjsKCQkJCWFzeW5jIGdldFZpZGVvRGF0YShkKSB7CgkJCQkJbGV0IGYgPSB0aGlzLmdldFZpZGVvRGF0YUJ5UGxheWVyKGQpOwoJCQkJCWlmICghZikgcmV0dXJuOwoJCQkJCWxldCB7IHVybDogcCwgZHVyYXRpb246IG0sIHN1YnRpdGxlczogaCB9ID0gZiwgZyA9IHRoaXMucmV0dXJuQmFzZURhdGEoZCksIF8gPSAoMCwgdi5mbCkobmV3IFVSTChwKSk7CgkJCQkJcmV0dXJuIGcgPyB7CgkJCQkJCXVybDogZy51cmwsCgkJCQkJCWR1cmF0aW9uOiBtLAoJCQkJCQlzdWJ0aXRsZXM6IGgsCgkJCQkJCXRyYW5zbGF0aW9uSGVscDogW3sKCQkJCQkJCXRhcmdldDogInZpZGVvX2ZpbGVfdXJsIiwKCQkJCQkJCXRhcmdldFVybDogXwoJCQkJCQl9XQoJCQkJCX0gOiB7CgkJCQkJCXVybDogXywKCQkJCQkJZHVyYXRpb246IG0sCgkJCQkJCXN1YnRpdGxlczogaAoJCQkJCX07CgkJCQl9CgkJCQlhc3luYyBnZXRWaWRlb0lkKGQpIHsKCQkJCQlyZXR1cm4gL1wvb3VcL2NvdXJzZVwvKChbXi9dKylcLyhcZCspXC8oXGQrKSkvLmV4ZWMoZC5wYXRobmFtZSk/LlsxXTsKCQkJCX0KCQkJfQoJCQljbGFzcyBQYXRyZW9uSGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCUFQSV9PUklHSU4gPSAiaHR0cHM6Ly93d3cucGF0cmVvbi5jb20vYXBpIjsKCQkJCWFzeW5jIGdldFBvc3RzKGQpIHsKCQkJCQl0cnkgewoJCQkJCQlsZXQgZiA9IGF3YWl0IHRoaXMuZmV0Y2goYCR7dGhpcy5BUElfT1JJR0lOfS9wb3N0cy8ke2R9P2pzb24tYXBpLXVzZS1kZWZhdWx0LWluY2x1ZGVzPWZhbHNlYCk7CgkJCQkJCXJldHVybiBhd2FpdCBmLmpzb24oKTsKCQkJCQl9IGNhdGNoIChmKSB7CgkJCQkJCXJldHVybiBfLkEuZXJyb3IoYEZhaWxlZCB0byBnZXQgcGF0cmVvbiBwb3N0cyBieSBwb3N0SWQ6ICR7ZH0uYCwgZi5tZXNzYWdlKSwgITE7CgkJCQkJfQoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9EYXRhKGQpIHsKCQkJCQlsZXQgZiA9IGF3YWl0IHRoaXMuZ2V0UG9zdHMoZCk7CgkJCQkJaWYgKCFmKSByZXR1cm47CgkJCQkJbGV0IHAgPSBmLmRhdGEuYXR0cmlidXRlcy5wb3N0X2ZpbGUudXJsOwoJCQkJCWlmIChwKSByZXR1cm4geyB1cmw6IHAgfTsKCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCWxldCBmID0gL3Bvc3RzXC8oW14vXSspLy5leGVjKGQucGF0aG5hbWUpPy5bMV07CgkJCQkJaWYgKGYpIHJldHVybiBmLnJlcGxhY2UoL1teXGQuXS9nLCAiIik7CgkJCQl9CgkJCX0KCQkJY2xhc3MgUGVlcnR1YmVIZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7CgkJCQkJcmV0dXJuIC9cL3dcLyhbXi9dKykvLmV4ZWMoZC5wYXRobmFtZSk/LlswXTsKCQkJCX0KCQkJfQoJCQljbGFzcyBQb3JuaHViSGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCXJldHVybiBkLnNlYXJjaFBhcmFtcy5nZXQoInZpZXdrZXkiKSA/PyAvZW1iZWRcLyhbXi9dKykvLmV4ZWMoZC5wYXRobmFtZSk/LlsxXTsKCQkJCX0KCQkJfQoJCQljbGFzcyBQb3JuVE5IZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJYXN5bmMgZ2V0VmlkZW9EYXRhKGQpIHsKCQkJCQl0cnkgewoJCQkJCQlpZiAodHlwZW9mIGZsYXNodmFycyA+ICJ1IikgcmV0dXJuOwoJCQkJCQlsZXQgeyBybmQ6IGQsIHZpZGVvX3VybDogZiwgdmlkZW9fdGl0bGU6IHAgfSA9IGZsYXNodmFyczsKCQkJCQkJaWYgKCFmIHx8ICFkKSB0aHJvdyBuZXcgZy5hKCJGYWlsZWQgdG8gZmluZCB2aWRlbyBzb3VyY2Ugb3Igcm5kIik7CgkJCQkJCWxldCBtID0gbmV3IFVSTChmKTsKCQkJCQkJbS5zZWFyY2hQYXJhbXMuYXBwZW5kKCJybmQiLCBkKSwgXy5BLmxvZygiUG9yblROIGdldF9maWxlIGxpbmsiLCBtLmhyZWYpOwoJCQkJCQlsZXQgaCA9IGF3YWl0IHRoaXMuZmV0Y2gobS5ocmVmLCB7IG1ldGhvZDogImhlYWQiIH0pLCBiID0gbmV3IFVSTChoLnVybCk7CgkJCQkJCV8uQS5sb2coIlBvcm5UTiBjZG4gbGluayIsIGIuaHJlZik7CgkJCQkJCWxldCB4ID0gKDAsIHYuZmwpKGIpOwoJCQkJCQlyZXR1cm4gewoJCQkJCQkJdXJsOiB4LAoJCQkJCQkJdGl0bGU6IHAKCQkJCQkJfTsKCQkJCQl9IGNhdGNoIChmKSB7CgkJCQkJCV8uQS5lcnJvcihgRmFpbGVkIHRvIGdldCBQb3JuVE4gZGF0YSBieSB2aWRlb0lkOiAke2R9YCwgZi5tZXNzYWdlKTsKCQkJCQkJcmV0dXJuOwoJCQkJCX0KCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCXJldHVybiAvXC92aWRlb3NcLygoW14vXSspXC8oW14vXSspKS8uZXhlYyhkLnBhdGhuYW1lKT8uWzFdOwoJCQkJfQoJCQl9CgkJCWNsYXNzIFJlZGRpdEhlbHBlciBleHRlbmRzIGcucSB7CgkJCQlBUElfT1JJR0lOID0gImh0dHBzOi8vd3d3LnJlZGRpdC5jb20iOwoJCQkJYXN5bmMgZ2V0Q29udGVudFVybChkKSB7CgkJCQkJaWYgKHRoaXMuc2VydmljZT8uYWRkaXRpb25hbERhdGEgIT09ICJvbGQiKSByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcigic2hyZWRkaXQtcGxheWVyLTIiKT8uc3JjOwoJCQkJCWxldCBmID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiW2RhdGEtaGxzLXVybF0iKTsKCQkJCQlyZXR1cm4gZj8uZGF0YXNldC5obHNVcmw/LnJlcGxhY2VBbGwoIiZhbXA7IiwgIiYiKTsKCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvRGF0YShkKSB7CgkJCQkJdHJ5IHsKCQkJCQkJbGV0IGYgPSBhd2FpdCB0aGlzLmdldENvbnRlbnRVcmwoZCk7CgkJCQkJCWlmICghZikgdGhyb3cgbmV3IGcuYSgiRmFpbGVkIHRvIGZpbmQgY29udGVudCB1cmwiKTsKCQkJCQkJcmV0dXJuIHsgdXJsOiBkZWNvZGVVUklDb21wb25lbnQoZikgfTsKCQkJCQl9IGNhdGNoIChmKSB7CgkJCQkJCV8uQS5lcnJvcihgRmFpbGVkIHRvIGdldCByZWRkaXQgdmlkZW8gZGF0YSBieSB2aWRlbyBJRDogJHtkfWAsIGYubWVzc2FnZSk7CgkJCQkJCXJldHVybjsKCQkJCQl9CgkJCQl9CgkJCQlhc3luYyBnZXRWaWRlb0lkKGQpIHsKCQkJCQlyZXR1cm4gL1wvclwvKChbXi9dKylcLyhbXi9dKylcLyhbXi9dKylcLyhbXi9dKykpLy5leGVjKGQucGF0aG5hbWUpPy5bMV07CgkJCQl9CgkJCX0KCQkJY2xhc3MgUnROZXdzSGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCWFzeW5jIGdldFZpZGVvRGF0YShkKSB7CgkJCQkJbGV0IGYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuanctdmlkZW8sIC5tZWRpYV9fdmlkZW9fbm9zY3JpcHQiKTsKCQkJCQlpZiAoIWYpIHJldHVybjsKCQkJCQlsZXQgcCA9IGYuZ2V0QXR0cmlidXRlKCJzcmMiKTsKCQkJCQlpZiAocCkgcmV0dXJuIHAuZW5kc1dpdGgoIi5NUDQiKSAmJiAocCA9ICgwLCB2LmZsKShwKSksIHsKCQkJCQkJdmlkZW9JZDogZCwKCQkJCQkJdXJsOiBwCgkJCQkJfTsKCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCXJldHVybiBkLnBhdGhuYW1lLnNsaWNlKDEpOwoJCQkJfQoJCQl9CgkJCWNsYXNzIFJ1bWJsZUhlbHBlciBleHRlbmRzIGcucSB7CgkJCQlhc3luYyBnZXRWaWRlb0lkKGQpIHsKCQkJCQlyZXR1cm4gZC5wYXRobmFtZS5zbGljZSgxKTsKCQkJCX0KCQkJfQoJCQljbGFzcyBSdXR1YmVIZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7CgkJCQkJcmV0dXJuIC8oPzp2aWRlb3xlbWJlZClcLyhbXi9dKykvLmV4ZWMoZC5wYXRobmFtZSk/LlsxXTsKCQkJCX0KCQkJfQoJCQljbGFzcyBTYXBIZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJQVBJX09SSUdJTiA9ICJodHRwczovL2xlYXJuaW5nLnNhcC5jb20vIjsKCQkJCWFzeW5jIHJlcXVlc3RLYWx0dXJhKGQsIGYsIHApIHsKCQkJCQlsZXQgbSA9ICJodG1sNTp2My4xNy4yMiIsIGggPSAiMy4zLjAiOwoJCQkJCXRyeSB7CgkJCQkJCWxldCBnID0gYXdhaXQgdGhpcy5mZXRjaChgaHR0cHM6Ly8ke2R9L2FwaV92My9zZXJ2aWNlL211bHRpcmVxdWVzdGAsIHsKCQkJCQkJCW1ldGhvZDogIlBPU1QiLAoJCQkJCQkJYm9keTogSlNPTi5zdHJpbmdpZnkoewoJCQkJCQkJCTE6IHsKCQkJCQkJCQkJc2VydmljZTogInNlc3Npb24iLAoJCQkJCQkJCQlhY3Rpb246ICJzdGFydFdpZGdldFNlc3Npb24iLAoJCQkJCQkJCQl3aWRnZXRJZDogYF8ke2Z9YAoJCQkJCQkJCX0sCgkJCQkJCQkJMjogewoJCQkJCQkJCQlzZXJ2aWNlOiAiYmFzZUVudHJ5IiwKCQkJCQkJCQkJYWN0aW9uOiAibGlzdCIsCgkJCQkJCQkJCWtzOiAiezE6cmVzdWx0OmtzfSIsCgkJCQkJCQkJCWZpbHRlcjogeyByZWRpcmVjdEZyb21FbnRyeUlkOiBwIH0sCgkJCQkJCQkJCXJlc3BvbnNlUHJvZmlsZTogewoJCQkJCQkJCQkJdHlwZTogMSwKCQkJCQkJCQkJCWZpZWxkczogImlkLHJlZmVyZW5jZUlkLG5hbWUsZGVzY3JpcHRpb24sZGF0YVVybCxkdXJhdGlvbixmbGF2b3JQYXJhbXNJZHMsdHlwZSxkdnJTdGF0dXMsZXh0ZXJuYWxTb3VyY2VUeXBlLGNyZWF0ZWRBdCx1cGRhdGVkQXQsZW5kRGF0ZSxwbGF5cyx2aWV3cyxkb3dubG9hZFVybCxjcmVhdG9ySWQiCgkJCQkJCQkJCX0KCQkJCQkJCQl9LAoJCQkJCQkJCTM6IHsKCQkJCQkJCQkJc2VydmljZTogImJhc2VFbnRyeSIsCgkJCQkJCQkJCWFjdGlvbjogImdldFBsYXliYWNrQ29udGV4dCIsCgkJCQkJCQkJCWVudHJ5SWQ6ICJ7MjpyZXN1bHQ6b2JqZWN0czowOmlkfSIsCgkJCQkJCQkJCWtzOiAiezE6cmVzdWx0OmtzfSIsCgkJCQkJCQkJCWNvbnRleHREYXRhUGFyYW1zOiB7CgkJCQkJCQkJCQlvYmplY3RUeXBlOiAiS2FsdHVyYUNvbnRleHREYXRhUGFyYW1zIiwKCQkJCQkJCQkJCWZsYXZvclRhZ3M6ICJhbGwiCgkJCQkJCQkJCX0KCQkJCQkJCQl9LAoJCQkJCQkJCWFwaVZlcnNpb246IGgsCgkJCQkJCQkJZm9ybWF0OiAxLAoJCQkJCQkJCWtzOiAiIiwKCQkJCQkJCQljbGllbnRUYWc6IG0sCgkJCQkJCQkJcGFydG5lcklkOiBmCgkJCQkJCQl9KSwKCQkJCQkJCWhlYWRlcnM6IHsgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiB9CgkJCQkJCX0pOwoJCQkJCQlyZXR1cm4gYXdhaXQgZy5qc29uKCk7CgkJCQkJfSBjYXRjaCAoZCkgewoJCQkJCQlfLkEuZXJyb3IoIkZhaWxlZCB0byByZXF1ZXN0IGthbHR1cmEgZGF0YSIsIGQubWVzc2FnZSk7CgkJCQkJCXJldHVybjsKCQkJCQl9CgkJCQl9CgkJCQlhc3luYyBnZXRLYWx0dXJhRGF0YShkKSB7CgkJCQkJdHJ5IHsKCQkJCQkJbGV0IGYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJzY3JpcHRbZGF0YS1uc2NyaXB0PVwiYmVmb3JlSW50ZXJhY3RpdmVcIl0iKTsKCQkJCQkJaWYgKCFmKSB0aHJvdyBuZXcgZy5hKCJGYWlsZWQgdG8gZmluZCBzY3JpcHQgZWxlbWVudCIpOwoJCQkJCQlsZXQgcCA9IC9odHRwczpcL1wvKFteIl0rKVwvcFwvKFteIl0rKVwvZW1iZWRQbGF5a2l0SnNcL3VpY29uZl9pZFwvKFteIl0rKS8uZXhlYyhmPy5zcmMpOwoJCQkJCQlpZiAoIXApIHRocm93IG5ldyBnLmEoYEZhaWxlZCB0byBnZXQgc2FwIGRhdGEgZm9yIHZpZGVvSWQ6ICR7ZH1gKTsKCQkJCQkJbGV0IFssIG0sIGhdID0gcCwgXyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNzaGFkb3ciKT8uZmlyc3RDaGlsZD8uZ2V0QXR0cmlidXRlKCJpZCIpOwoJCQkJCQlpZiAoIV8pIHsKCQkJCQkJCWxldCBkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI19fTkVYVF9EQVRBX18iKTsKCQkJCQkJCWlmICghZCkgdGhyb3cgbmV3IGcuYSgiRmFpbGVkIHRvIGZpbmQgbmV4dCBkYXRhIGVsZW1lbnQiKTsKCQkJCQkJCV8gPSAvInNvdXJjZUlkIjpccz8iKFteIl0rKSIvLmV4ZWMoZC5pbm5lclRleHQpPy5bMV07CgkJCQkJCX0KCQkJCQkJaWYgKCFtIHx8IE51bWJlci5pc05hTigraCkgfHwgIV8pIHRocm93IG5ldyBnLmEoYE9uZSBvZiB0aGUgbmVjZXNzYXJ5IHBhcmFtZXRlcnMgZm9yIGdldHRpbmcgYSBsaW5rIHRvIGEgc2FwIHZpZGVvIGluIHdhc24ndCBmb3VuZCBmb3IgJHtkfS4gUGFyYW1zOiBrYWx0dXJhRG9tYWluID0gJHttfSwgcGFydG5lcklkID0gJHtofSwgZW50cnlJZCA9ICR7X31gKTsKCQkJCQkJcmV0dXJuIGF3YWl0IHRoaXMucmVxdWVzdEthbHR1cmEobSwgaCwgXyk7CgkJCQkJfSBjYXRjaCAoZCkgewoJCQkJCQlfLkEuZXJyb3IoIkZhaWxlZCB0byBnZXQga2FsdHVyYSBkYXRhIiwgZC5tZXNzYWdlKTsKCQkJCQkJcmV0dXJuOwoJCQkJCX0KCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvRGF0YShkKSB7CgkJCQkJbGV0IGYgPSBhd2FpdCB0aGlzLmdldEthbHR1cmFEYXRhKGQpOwoJCQkJCWlmICghZikgcmV0dXJuOwoJCQkJCWxldCBbLCBwLCBtXSA9IGYsIHsgZHVyYXRpb246IGggfSA9IHAub2JqZWN0c1swXSwgZyA9IG0uc291cmNlcy5maW5kKChkKSA9PiBkLmZvcm1hdCA9PT0gInVybCIgJiYgZC5wcm90b2NvbHMgPT09ICJodHRwLGh0dHBzIiAmJiBkLnVybC5pbmNsdWRlcygiLm1wNCIpKT8udXJsOwoJCQkJCWlmICghZykgcmV0dXJuOwoJCQkJCWxldCBfID0gbS5wbGF5YmFja0NhcHRpb25zLm1hcCgoZCkgPT4gKHsKCQkJCQkJbGFuZ3VhZ2U6ICgwLCB2LmVjKShkLmxhbmd1YWdlQ29kZSksCgkJCQkJCXNvdXJjZTogInNhcCIsCgkJCQkJCWZvcm1hdDogInZ0dCIsCgkJCQkJCXVybDogZC53ZWJWdHRVcmwsCgkJCQkJCWlzQXV0b0dlbmVyYXRlZDogZC5sYWJlbC5pbmNsdWRlcygiYXV0by1nZW5lcmF0ZWQiKQoJCQkJCX0pKTsKCQkJCQlyZXR1cm4gewoJCQkJCQl1cmw6IGcsCgkJCQkJCXN1YnRpdGxlczogXywKCQkJCQkJZHVyYXRpb246IGgKCQkJCQl9OwoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7CgkJCQkJcmV0dXJuIC8oKGNvdXJzZXN8bGVhcm5pbmctam91cm5leXMpXC8oW14vXSspKFwvW14vXSspPykvLmV4ZWMoZC5wYXRobmFtZSk/LlsxXTsKCQkJCX0KCQkJfQoJCQljbGFzcyBUZWxlZ3JhbUhlbHBlciBleHRlbmRzIGcucSB7CgkJCQlzdGF0aWMgZ2V0TWVkaWFWaWV3ZXIoKSB7CgkJCQkJaWYgKCEodHlwZW9mIGFwcE1lZGlhVmlld2VyID4gInUiKSkgcmV0dXJuIGFwcE1lZGlhVmlld2VyOwoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7CgkJCQkJbGV0IGYgPSBUZWxlZ3JhbUhlbHBlci5nZXRNZWRpYVZpZXdlcigpOwoJCQkJCWlmICghZiB8fCBmLmxpdmUpIHJldHVybjsKCQkJCQlsZXQgcCA9IGYudGFyZ2V0Lm1lc3NhZ2U7CgkJCQkJaWYgKHAucGVlcl9pZC5fICE9PSAicGVlckNoYW5uZWwiKSByZXR1cm47CgkJCQkJbGV0IG0gPSBwLm1lZGlhOwoJCQkJCWlmIChtLl8gIT09ICJtZXNzYWdlTWVkaWFEb2N1bWVudCIgfHwgbS5kb2N1bWVudC50eXBlICE9PSAidmlkZW8iKSByZXR1cm47CgkJCQkJbGV0IGggPSBwLm1pZCAmIDQyOTQ5NjcyOTUsIGcgPSBhd2FpdCBmLm1hbmFnZXJzLmFwcFBlZXJzTWFuYWdlci5nZXRQZWVyVXNlcm5hbWUocC5wZWVySWQpOwoJCQkJCXJldHVybiBgJHtnfS8ke2h9YDsKCQkJCX0KCQkJfQoJCQljbGFzcyBUaGlzVmlkSGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCXJldHVybiAvKHZpZGVvc3xlbWJlZClcL1teL10rLy5leGVjKGQucGF0aG5hbWUpPy5bMF07CgkJCQl9CgkJCX0KCQkJY2xhc3MgVGlrVG9rSGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCXJldHVybiAvKFteL10rKVwvdmlkZW9cLyhbXi9dKykvLmV4ZWMoZC5wYXRobmFtZSk/LlswXTsKCQkJCX0KCQkJfQoJCQljbGFzcyBUcm92b0hlbHBlciBleHRlbmRzIGcucSB7CgkJCQlhc3luYyBnZXRWaWRlb0lkKGQpIHsKCQkJCQlsZXQgZiA9IGQuc2VhcmNoUGFyYW1zLmdldCgidmlkIiksIHAgPSAvKFteL10rKVwvKFtcZF0rKS8uZXhlYyhkLnBhdGhuYW1lKT8uWzBdOwoJCQkJCWlmICghKCFmIHx8ICFwKSkgcmV0dXJuIGAke3B9P3ZpZD0ke2Z9YDsKCQkJCX0KCQkJfQoJCQljbGFzcyBUd2l0Y2hIZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJQVBJX09SSUdJTiA9ICJodHRwczovL2NsaXBzLnR3aXRjaC50diI7CgkJCQlhc3luYyBnZXRDbGlwTGluayhkLCBmKSB7CgkJCQkJbGV0IHAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJzY3JpcHRbdHlwZT0nYXBwbGljYXRpb24vbGQranNvbiddIiksIG0gPSBkLnNsaWNlKDEpOwoJCQkJCWlmIChwKSB7CgkJCQkJCWxldCBkID0gSlNPTi5wYXJzZShwLmlubmVyVGV4dCksIGYgPSBkWyJAZ3JhcGgiXS5maW5kKChkKSA9PiBkWyJAdHlwZSJdID09PSAiVmlkZW9PYmplY3QiKT8uY3JlYXRvci51cmw7CgkJCQkJCWlmICghZikgdGhyb3cgbmV3IGcuYSgiRmFpbGVkIHRvIGZpbmQgY2hhbm5lbCBsaW5rIik7CgkJCQkJCWxldCBoID0gZi5yZXBsYWNlKCJodHRwczovL3d3dy50d2l0Y2gudHYvIiwgIiIpOwoJCQkJCQlyZXR1cm4gYCR7aH0vY2xpcC8ke219YDsKCQkJCQl9CgkJCQkJbGV0IGggPSBtID09PSAiZW1iZWQiLCBfID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihoID8gIi50dy1saW5rW2RhdGEtdGVzdC1zZWxlY3Rvcj0nc3RyZWFtLWluZm8tY2FyZC1jb21wb25lbnRfX3N0cmVhbS1hdmF0YXItbGluayddIiA6ICIuY2xpcHMtcGxheWVyIGE6bm90KFtjbGFzc10pIik7CgkJCQkJaWYgKCFfKSByZXR1cm47CgkJCQkJbGV0IHYgPSBfLmhyZWYucmVwbGFjZSgiaHR0cHM6Ly93d3cudHdpdGNoLnR2LyIsICIiKTsKCQkJCQlyZXR1cm4gYCR7dn0vY2xpcC8ke2ggPyBmIDogbX1gOwoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9EYXRhKGQpIHsKCQkJCQlsZXQgZiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIltkYXRhLWEtdGFyZ2V0PVwic3RyZWFtLXRpdGxlXCJdLCBbZGF0YS10ZXN0LXNlbGVjdG9yPVwic3RyZWFtLWluZm8tY2FyZC1jb21wb25lbnRfX3N1YnRpdGxlXCJdIik/LmlubmVyVGV4dCwgcCA9ICEhZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiW2RhdGEtYS10YXJnZXQ9XCJhbmltYXRlZC1jaGFubmVsLXZpZXdlcnMtY291bnRcIl0sIC5jaGFubmVsLXN0YXR1cy1pbmZvLS1saXZlLCAudG9wLWJhci0tcG9pbnRlci1lbmFibGVkIC50dy1jaGFubmVsLXN0YXR1cy10ZXh0LWluZGljYXRvciIpOwoJCQkJCXJldHVybiB7CgkJCQkJCXVybDogdGhpcy5zZXJ2aWNlLnVybCArIGQsCgkJCQkJCWlzU3RyZWFtOiBwLAoJCQkJCQl0aXRsZTogZgoJCQkJCX07CgkJCQl9CgkJCQlhc3luYyBnZXRWaWRlb0lkKGQpIHsKCQkJCQlsZXQgZiA9IGQucGF0aG5hbWU7CgkJCQkJaWYgKC9ebVwudHdpdGNoXC50diQvLnRlc3QoZikpIHJldHVybiAvdmlkZW9zXC8oW14vXSspLy5leGVjKGQuaHJlZik/LlswXSA/PyBmLnNsaWNlKDEpOwoJCQkJCWlmICgvXnBsYXllclwudHdpdGNoXC50diQvLnRlc3QoZC5ob3N0bmFtZSkpIHJldHVybiBgdmlkZW9zLyR7ZC5zZWFyY2hQYXJhbXMuZ2V0KCJ2aWRlbyIpfWA7CgkJCQkJbGV0IHAgPSAvKFteL10rKVwvKD86Y2xpcClcLyhbXi9dKykvLmV4ZWMoZik7CgkJCQkJaWYgKHApIHJldHVybiBwWzBdOwoJCQkJCWxldCBtID0gL15jbGlwc1wudHdpdGNoXC50diQvLnRlc3QoZC5ob3N0bmFtZSk7CgkJCQkJaWYgKG0pIHJldHVybiBhd2FpdCB0aGlzLmdldENsaXBMaW5rKGYsIGQuc2VhcmNoUGFyYW1zLmdldCgiY2xpcCIpKTsKCQkJCQlsZXQgaCA9IC8oPzp2aWRlb3MpXC8oW14vXSspLy5leGVjKGYpOwoJCQkJCWlmIChoKSByZXR1cm4gaFswXTsKCQkJCQlsZXQgZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5ob21lLW9mZmxpbmUtaGVybyAudHctbGluayIpOwoJCQkJCWlmIChnPy5ocmVmKSB7CgkJCQkJCWxldCBkID0gbmV3IFVSTChnLmhyZWYpOwoJCQkJCQlyZXR1cm4gLyg/OnZpZGVvcylcLyhbXi9dKykvLmV4ZWMoZC5wYXRobmFtZSk/LlswXTsKCQkJCQl9CgkJCQkJcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5wZXJzaXN0ZW50LXBsYXllciIpID8gZiA6IHZvaWQgMDsKCQkJCX0KCQkJfQoJCQljbGFzcyBUd2l0dGVySGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCWxldCBmID0gL3N0YXR1c1wvKFteL10rKS8uZXhlYyhkLnBhdGhuYW1lKT8uWzFdOwoJCQkJCWlmIChmKSByZXR1cm4gZjsKCQkJCQlsZXQgcCA9IHRoaXMudmlkZW8/LmNsb3Nlc3QoIltkYXRhLXRlc3RpZD1cInR3ZWV0XCJdIiksIG0gPSBwPy5xdWVyeVNlbGVjdG9yKCJhW3JvbGU9XCJsaW5rXCJdW2FyaWEtbGFiZWxdIik/LmhyZWY7CgkJCQkJcmV0dXJuIG0gPyAvc3RhdHVzXC8oW14vXSspLy5leGVjKG0pPy5bMV0gOiB2b2lkIDA7CgkJCQl9CgkJCX0KCQkJY2xhc3MgVWRlbXlIZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJQVBJX09SSUdJTiA9ICJodHRwczovL3d3dy51ZGVteS5jb20vYXBpLTIuMCI7CgkJCQlnZXRNb2R1bGVEYXRhKCkgewoJCQkJCWxldCBkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnVkLWFwcC1sb2FkZXJbZGF0YS1tb2R1bGUtaWQ9J2NvdXJzZS10YWtpbmcnXSIpLCBmID0gZD8uZGF0YXNldD8ubW9kdWxlQXJnczsKCQkJCQlpZiAoZikgcmV0dXJuIEpTT04ucGFyc2UoZik7CgkJCQl9CgkJCQlnZXRMZWN0dXJlSWQoKSB7CgkJCQkJcmV0dXJuIC9sZWFyblwvbGVjdHVyZVwvKFteL10rKS8uZXhlYyh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUpPy5bMV07CgkJCQl9CgkJCQlpc0Vycm9yRGF0YShkKSB7CgkJCQkJcmV0dXJuIE9iamVjdC5oYXNPd24oZCwgImVycm9yIik7CgkJCQl9CgkJCQlhc3luYyBnZXRMZWN0dXJlRGF0YShkLCBmKSB7CgkJCQkJdHJ5IHsKCQkJCQkJbGV0IHAgPSBhd2FpdCB0aGlzLmZldGNoKGAke3RoaXMuQVBJX09SSUdJTn0vdXNlcnMvbWUvc3Vic2NyaWJlZC1jb3Vyc2VzLyR7ZH0vbGVjdHVyZXMvJHtmfS8/YCArIG5ldyBVUkxTZWFyY2hQYXJhbXMoewoJCQkJCQkJImZpZWxkc1tsZWN0dXJlXSI6ICJ0aXRsZSxkZXNjcmlwdGlvbixhc3NldCIsCgkJCQkJCQkiZmllbGRzW2Fzc2V0XSI6ICJsZW5ndGgsbWVkaWFfc291cmNlcyxjYXB0aW9ucyIKCQkJCQkJfSkudG9TdHJpbmcoKSksIG0gPSBhd2FpdCBwLmpzb24oKTsKCQkJCQkJaWYgKHRoaXMuaXNFcnJvckRhdGEobSkpIHRocm93IG5ldyBnLmEobS5kZXRhaWwgPz8gInVua25vd24gZXJyb3IiKTsKCQkJCQkJcmV0dXJuIG07CgkJCQkJfSBjYXRjaCAocCkgewoJCQkJCQlfLkEuZXJyb3IoYEZhaWxlZCB0byBnZXQgbGVjdHVyZSBkYXRhIGJ5IGNvdXJzZUlkOiAke2R9IGFuZCBsZWN0dXJlSWQ6ICR7Zn1gLCBwLm1lc3NhZ2UpOwoJCQkJCQlyZXR1cm47CgkJCQkJfQoJCQkJfQoJCQkJYXN5bmMgZ2V0Q291cnNlTGFuZyhkKSB7CgkJCQkJdHJ5IHsKCQkJCQkJbGV0IGYgPSBhd2FpdCB0aGlzLmZldGNoKGAke3RoaXMuQVBJX09SSUdJTn0vdXNlcnMvbWUvc3Vic2NyaWJlZC1jb3Vyc2VzLyR7ZH0/YCArIG5ldyBVUkxTZWFyY2hQYXJhbXMoeyAiZmllbGRzW2NvdXJzZV0iOiAibG9jYWxlIiB9KS50b1N0cmluZygpKSwgcCA9IGF3YWl0IGYuanNvbigpOwoJCQkJCQlpZiAodGhpcy5pc0Vycm9yRGF0YShwKSkgdGhyb3cgbmV3IGcuYShwLmRldGFpbCA/PyAidW5rbm93biBlcnJvciIpOwoJCQkJCQlyZXR1cm4gcDsKCQkJCQl9IGNhdGNoIChmKSB7CgkJCQkJCV8uQS5lcnJvcihgRmFpbGVkIHRvIGdldCBjb3Vyc2UgbGFuZyBieSBjb3Vyc2VJZDogJHtkfWAsIGYubWVzc2FnZSk7CgkJCQkJCXJldHVybjsKCQkJCQl9CgkJCQl9CgkJCQlmaW5kVmlkZW9VcmwoZCkgewoJCQkJCXJldHVybiBkPy5maW5kKChkKSA9PiBkLnR5cGUgPT09ICJ2aWRlby9tcDQiKT8uc3JjOwoJCQkJfQoJCQkJZmluZFN1YnRpdGxlVXJsKGQsIGYpIHsKCQkJCQlsZXQgcCA9IGQ/LmZpbmQoKGQpID0+ICgwLCB2LmVjKShkLmxvY2FsZV9pZCkgPT09IGYpID8/IGQ/LmZpbmQoKGQpID0+ICgwLCB2LmVjKShkLmxvY2FsZV9pZCkgPT09ICJlbiIpID8/IGQ/LlswXTsKCQkJCQlyZXR1cm4gcD8udXJsOwoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9EYXRhKGQpIHsKCQkJCQlsZXQgZiA9IHRoaXMuZ2V0TW9kdWxlRGF0YSgpOwoJCQkJCWlmICghZikgcmV0dXJuOwoJCQkJCWxldCB7IGNvdXJzZUlkOiBwIH0gPSBmLCBtID0gdGhpcy5nZXRMZWN0dXJlSWQoKTsKCQkJCQlpZiAoXy5BLmxvZyhgW1VkZW15XSBjb3Vyc2VJZDogJHtwfSwgbGVjdHVyZUlkOiAke219YCksICFtKSByZXR1cm47CgkJCQkJbGV0IGggPSBhd2FpdCB0aGlzLmdldExlY3R1cmVEYXRhKHAsIG0pOwoJCQkJCWlmICghaCkgcmV0dXJuOwoJCQkJCWxldCB7IHRpdGxlOiBnLCBkZXNjcmlwdGlvbjogeCwgYXNzZXQ6IEMgfSA9IGgsIHsgbGVuZ3RoOiB3LCBtZWRpYV9zb3VyY2VzOiBULCBjYXB0aW9uczogRSB9ID0gQywgRCA9IHRoaXMuZmluZFZpZGVvVXJsKFQpOwoJCQkJCWlmICghRCkgewoJCQkJCQlfLkEubG9nKCJGYWlsZWQgdG8gZmluZCAubXA0IHZpZGVvIGZpbGUgaW4gbWVkaWFfc291cmNlcyIsIFQpOwoJCQkJCQlyZXR1cm47CgkJCQkJfQoJCQkJCWxldCBPID0gImVuIiwgQSA9IGF3YWl0IHRoaXMuZ2V0Q291cnNlTGFuZyhwKTsKCQkJCQlpZiAoQSkgewoJCQkJCQlsZXQgeyBsb2NhbGU6IHsgbG9jYWxlOiBkIH0gfSA9IEE7CgkJCQkJCU8gPSBkID8gKDAsIHYuZWMpKGQpIDogTzsKCQkJCQl9CgkJCQkJYi54bS5pbmNsdWRlcyhPKSB8fCAoTyA9ICJlbiIpOwoJCQkJCWxldCBqID0gdGhpcy5maW5kU3VidGl0bGVVcmwoRSwgTyk7CgkJCQkJcmV0dXJuIGogfHwgXy5BLmxvZygiRmFpbGVkIHRvIGZpbmQgc3VidGl0bGUgZmlsZSBpbiBjYXB0aW9ucyIsIEUpLCB7CgkJCQkJCS4uLmogPyB7CgkJCQkJCQl1cmw6IHRoaXMuc2VydmljZT8udXJsICsgZCwKCQkJCQkJCXRyYW5zbGF0aW9uSGVscDogW3sKCQkJCQkJCQl0YXJnZXQ6ICJzdWJ0aXRsZXNfZmlsZV91cmwiLAoJCQkJCQkJCXRhcmdldFVybDogagoJCQkJCQkJfSwgewoJCQkJCQkJCXRhcmdldDogInZpZGVvX2ZpbGVfdXJsIiwKCQkJCQkJCQl0YXJnZXRVcmw6IEQKCQkJCQkJCX1dLAoJCQkJCQkJZGV0ZWN0ZWRMYW5ndWFnZTogTwoJCQkJCQl9IDogewoJCQkJCQkJdXJsOiBELAoJCQkJCQkJdHJhbnNsYXRpb25IZWxwOiBudWxsCgkJCQkJCX0sCgkJCQkJCWR1cmF0aW9uOiB3LAoJCQkJCQl0aXRsZTogZywKCQkJCQkJZGVzY3JpcHRpb246IHgKCQkJCQl9OwoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7CgkJCQkJcmV0dXJuIGQucGF0aG5hbWUuc2xpY2UoMSk7CgkJCQl9CgkJCX0KCQkJY2xhc3MgVmltZW9IZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJQVBJX0tFWSA9ICIiOwoJCQkJREVGQVVMVF9TSVRFX09SSUdJTiA9ICJodHRwczovL3ZpbWVvLmNvbSI7CgkJCQlTSVRFX09SSUdJTiA9IHRoaXMuc2VydmljZT8udXJsPy5zbGljZSgwLCAtMSkgPz8gdGhpcy5ERUZBVUxUX1NJVEVfT1JJR0lOOwoJCQkJaXNFcnJvckRhdGEoZCkgewoJCQkJCXJldHVybiBPYmplY3QuaGFzT3duKGQsICJlcnJvciIpOwoJCQkJfQoJCQkJaXNQcml2YXRlUGxheWVyKCkgewoJCQkJCXJldHVybiB0aGlzLnJlZmVyZXIgJiYgIXRoaXMucmVmZXJlci5pbmNsdWRlcygidmltZW8uY29tIikgJiYgdGhpcy5vcmlnaW4uZW5kc1dpdGgoInBsYXllci52aW1lby5jb20iKTsKCQkJCX0KCQkJCWFzeW5jIGdldFZpZXdlckRhdGEoKSB7CgkJCQkJdHJ5IHsKCQkJCQkJbGV0IGQgPSBhd2FpdCB0aGlzLmZldGNoKCJodHRwczovL3ZpbWVvLmNvbS9fbmV4dC92aWV3ZXIiKSwgZiA9IGF3YWl0IGQuanNvbigpLCB7IGFwaVVybDogcCwgand0OiBtIH0gPSBmOwoJCQkJCQlyZXR1cm4gdGhpcy5BUElfT1JJR0lOID0gYGh0dHBzOi8vJHtwfWAsIHRoaXMuQVBJX0tFWSA9IGBqd3QgJHttfWAsIGY7CgkJCQkJfSBjYXRjaCAoZCkgewoJCQkJCQlyZXR1cm4gXy5BLmVycm9yKCJGYWlsZWQgdG8gZ2V0IGRlZmF1bHQgdmlld2VyIGRhdGEuIiwgZC5tZXNzYWdlKSwgITE7CgkJCQkJfQoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9JbmZvKGQpIHsKCQkJCQl0cnkgewoJCQkJCQlsZXQgZiA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoeyBmaWVsZHM6ICJuYW1lLGxpbmssZGVzY3JpcHRpb24sZHVyYXRpb24iIH0pLnRvU3RyaW5nKCksIHAgPSBhd2FpdCB0aGlzLmZldGNoKGAke3RoaXMuQVBJX09SSUdJTn0vdmlkZW9zLyR7ZH0/JHtmfWAsIHsgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiB0aGlzLkFQSV9LRVkgfSB9KSwgbSA9IGF3YWl0IHAuanNvbigpOwoJCQkJCQlpZiAodGhpcy5pc0Vycm9yRGF0YShtKSkgdGhyb3cgRXJyb3IobS5kZXZlbG9wZXJfbWVzc2FnZSA/PyBtLmVycm9yKTsKCQkJCQkJcmV0dXJuIG07CgkJCQkJfSBjYXRjaCAoZikgewoJCQkJCQlyZXR1cm4gXy5BLmVycm9yKGBGYWlsZWQgdG8gZ2V0IHZpZGVvIGluZm8gYnkgdmlkZW8gSUQ6ICR7ZH1gLCBmLm1lc3NhZ2UpLCAhMTsKCQkJCQl9CgkJCQl9CgkJCQlhc3luYyBnZXRQcml2YXRlVmlkZW9Tb3VyY2UoZCkgewoJCQkJCXRyeSB7CgkJCQkJCWxldCB7IGRlZmF1bHRfY2RuOiBmLCBjZG5zOiBwIH0gPSBkLmRhc2gsIG0gPSBwW2ZdLnVybCwgaCA9IGF3YWl0IHRoaXMuZmV0Y2gobSk7CgkJCQkJCWlmIChoLnN0YXR1cyAhPT0gMjAwKSB0aHJvdyBuZXcgZy5hKGF3YWl0IGgudGV4dCgpKTsKCQkJCQkJbGV0IF8gPSBhd2FpdCBoLmpzb24oKSwgdiA9IG5ldyBVUkwoXy5iYXNlX3VybCwgbSksIGIgPSBfLmF1ZGlvLmZpbmQoKGQpID0+IGQubWltZV90eXBlID09PSAiYXVkaW8vbXA0IiAmJiBkLmZvcm1hdCA9PT0gImRhc2giKTsKCQkJCQkJaWYgKCFiKSB0aHJvdyBuZXcgZy5hKCJGYWlsZWQgdG8gZmluZCB2aWRlbyBkYXRhIik7CgkJCQkJCWxldCB4ID0gYi5zZWdtZW50cz8uWzBdPy51cmw7CgkJCQkJCWlmICgheCkgdGhyb3cgbmV3IGcuYSgiRmFpbGVkIHRvIGZpbmQgZmlyc3Qgc2VnbWVudCB1cmwiKTsKCQkJCQkJbGV0IFtDLCB3XSA9IHguc3BsaXQoIj8iLCAyKSwgVCA9IG5ldyBVUkxTZWFyY2hQYXJhbXModyk7CgkJCQkJCXJldHVybiBULmRlbGV0ZSgicmFuZ2UiKSwgbmV3IFVSTChgJHtiLmJhc2VfdXJsfSR7Q30/JHtULnRvU3RyaW5nKCl9YCwgdikuaHJlZjsKCQkJCQl9IGNhdGNoIChkKSB7CgkJCQkJCXJldHVybiBfLkEuZXJyb3IoIkZhaWxlZCB0byBnZXQgcHJpdmF0ZSB2aWRlbyBzb3VyY2UiLCBkLm1lc3NhZ2UpLCAhMTsKCQkJCQl9CgkJCQl9CgkJCQlhc3luYyBnZXRQcml2YXRlVmlkZW9JbmZvKGQpIHsKCQkJCQl0cnkgewoJCQkJCQlpZiAodHlwZW9mIHBsYXllckNvbmZpZyA+ICJ1IikgcmV0dXJuOwoJCQkJCQlsZXQgZiA9IGF3YWl0IHRoaXMuZ2V0UHJpdmF0ZVZpZGVvU291cmNlKHBsYXllckNvbmZpZy5yZXF1ZXN0LmZpbGVzKTsKCQkJCQkJaWYgKCFmKSB0aHJvdyBuZXcgZy5hKCJGYWlsZWQgdG8gZ2V0IHByaXZhdGUgdmlkZW8gc291cmNlIik7CgkJCQkJCWxldCB7IHZpZGVvOiB7IHRpdGxlOiBwLCBkdXJhdGlvbjogbSB9LCByZXF1ZXN0OiB7IHRleHRfdHJhY2tzOiBoIH0gfSA9IHBsYXllckNvbmZpZzsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCXVybDogYCR7dGhpcy5TSVRFX09SSUdJTn0vJHtkfWAsCgkJCQkJCQl2aWRlb191cmw6IGYsCgkJCQkJCQl0aXRsZTogcCwKCQkJCQkJCWR1cmF0aW9uOiBtLAoJCQkJCQkJc3ViczogaAoJCQkJCQl9OwoJCQkJCX0gY2F0Y2ggKGYpIHsKCQkJCQkJcmV0dXJuIF8uQS5lcnJvcihgRmFpbGVkIHRvIGdldCBwcml2YXRlIHZpZGVvIGluZm8gYnkgdmlkZW8gSUQ6ICR7ZH1gLCBmLm1lc3NhZ2UpLCAhMTsKCQkJCQl9CgkJCQl9CgkJCQlhc3luYyBnZXRTdWJzSW5mbyhkKSB7CgkJCQkJdHJ5IHsKCQkJCQkJbGV0IGYgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHsKCQkJCQkJCXBlcl9wYWdlOiAiMTAwIiwKCQkJCQkJCWZpZWxkczogImxhbmd1YWdlLHR5cGUsbGluayIKCQkJCQkJfSkudG9TdHJpbmcoKSwgcCA9IGF3YWl0IHRoaXMuZmV0Y2goYCR7dGhpcy5BUElfT1JJR0lOfS92aWRlb3MvJHtkfS90ZXh0dHJhY2tzPyR7Zn1gLCB7IGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogdGhpcy5BUElfS0VZIH0gfSksIG0gPSBhd2FpdCBwLmpzb24oKTsKCQkJCQkJaWYgKHRoaXMuaXNFcnJvckRhdGEobSkpIHRocm93IEVycm9yKG0uZGV2ZWxvcGVyX21lc3NhZ2UgPz8gbS5lcnJvcik7CgkJCQkJCXJldHVybiBtLmRhdGE7CgkJCQkJfSBjYXRjaCAoZikgewoJCQkJCQlyZXR1cm4gXy5BLmVycm9yKGBGYWlsZWQgdG8gZ2V0IHN1YnRpdGxlcyBpbmZvIGJ5IHZpZGVvIElEOiAke2R9YCwgZi5tZXNzYWdlKSwgW107CgkJCQkJfQoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9EYXRhKGQpIHsKCQkJCQlsZXQgZiA9IHRoaXMuaXNQcml2YXRlUGxheWVyKCk7CgkJCQkJaWYgKGYpIHsKCQkJCQkJbGV0IGYgPSBhd2FpdCB0aGlzLmdldFByaXZhdGVWaWRlb0luZm8oZCk7CgkJCQkJCWlmICghZikgcmV0dXJuOwoJCQkJCQlsZXQgeyB1cmw6IHAsIHN1YnM6IG0sIHZpZGVvX3VybDogaCwgdGl0bGU6IGcsIGR1cmF0aW9uOiBfIH0gPSBmLCBiID0gbS5tYXAoKGQpID0+ICh7CgkJCQkJCQlsYW5ndWFnZTogKDAsIHYuZWMpKGQubGFuZyksCgkJCQkJCQlzb3VyY2U6ICJ2aW1lbyIsCgkJCQkJCQlmb3JtYXQ6ICJ2dHQiLAoJCQkJCQkJdXJsOiB0aGlzLlNJVEVfT1JJR0lOICsgZC51cmwsCgkJCQkJCQlpc0F1dG9HZW5lcmF0ZWQ6IGQubGFuZy5pbmNsdWRlcygiYXV0b2dlbmVyYXRlZCIpCgkJCQkJCX0pKSwgeCA9IGIubGVuZ3RoID8gW3sKCQkJCQkJCXRhcmdldDogInZpZGVvX2ZpbGVfdXJsIiwKCQkJCQkJCXRhcmdldFVybDogaAoJCQkJCQl9LCB7CgkJCQkJCQl0YXJnZXQ6ICJzdWJ0aXRsZXNfZmlsZV91cmwiLAoJCQkJCQkJdGFyZ2V0VXJsOiBiWzBdLnVybAoJCQkJCQl9XSA6IG51bGw7CgkJCQkJCXJldHVybiB7CgkJCQkJCQkuLi54ID8gewoJCQkJCQkJCXVybDogcCwKCQkJCQkJCQl0cmFuc2xhdGlvbkhlbHA6IHgKCQkJCQkJCX0gOiB7IHVybDogaCB9LAoJCQkJCQkJc3VidGl0bGVzOiBiLAoJCQkJCQkJdGl0bGU6IGcsCgkJCQkJCQlkdXJhdGlvbjogXwoJCQkJCQl9OwoJCQkJCX0KCQkJCQlpZiAoIXRoaXMuZXh0cmFJbmZvKSByZXR1cm4gdGhpcy5yZXR1cm5CYXNlRGF0YShkKTsKCQkJCQlkLmluY2x1ZGVzKCIvIikgJiYgKGQgPSBkLnJlcGxhY2UoIi8iLCAiOiIpKTsKCQkJCQlsZXQgcCA9IGF3YWl0IHRoaXMuZ2V0Vmlld2VyRGF0YSgpOwoJCQkJCWlmICghcCkgcmV0dXJuIHRoaXMucmV0dXJuQmFzZURhdGEoZCk7CgkJCQkJbGV0IG0gPSBhd2FpdCB0aGlzLmdldFZpZGVvSW5mbyhkKTsKCQkJCQlpZiAoIW0pIHJldHVybiB0aGlzLnJldHVybkJhc2VEYXRhKGQpOwoJCQkJCWxldCBoID0gYXdhaXQgdGhpcy5nZXRTdWJzSW5mbyhkKSwgZyA9IGgubWFwKChkKSA9PiAoewoJCQkJCQlsYW5ndWFnZTogKDAsIHYuZWMpKGQubGFuZ3VhZ2UpLAoJCQkJCQlzb3VyY2U6ICJ2aW1lbyIsCgkJCQkJCWZvcm1hdDogInZ0dCIsCgkJCQkJCXVybDogZC5saW5rLAoJCQkJCQlpc0F1dG9HZW5lcmF0ZWQ6IGQubGFuZ3VhZ2UuaW5jbHVkZXMoImF1dG9nZW4iKQoJCQkJCX0pKSwgeyBsaW5rOiBfLCBkdXJhdGlvbjogYiwgbmFtZTogeCwgZGVzY3JpcHRpb246IEMgfSA9IG07CgkJCQkJcmV0dXJuIHsKCQkJCQkJdXJsOiBfLAoJCQkJCQl0aXRsZTogeCwKCQkJCQkJZGVzY3JpcHRpb246IEMsCgkJCQkJCXN1YnRpdGxlczogZywKCQkJCQkJZHVyYXRpb246IGIKCQkJCQl9OwoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7CgkJCQkJbGV0IGYgPSAvdmlkZW9cL1teL10rJC8uZXhlYyhkLnBhdGhuYW1lKT8uWzBdOwoJCQkJCWlmICh0aGlzLmlzUHJpdmF0ZVBsYXllcigpKSByZXR1cm4gZjsKCQkJCQlpZiAoZikgewoJCQkJCQlsZXQgcCA9IGQuc2VhcmNoUGFyYW1zLmdldCgiaCIpLCBtID0gZi5yZXBsYWNlKCJ2aWRlby8iLCAiIik7CgkJCQkJCXJldHVybiBwID8gYCR7bX0vJHtwfWAgOiBtOwoJCQkJCX0KCQkJCQlsZXQgcCA9IC9jaGFubmVsc1wvW14vXStcLyhbXi9dKykvLmV4ZWMoZC5wYXRobmFtZSk/LlsxXSA/PyAvZ3JvdXBzXC9bXi9dK1wvdmlkZW9zXC8oW14vXSspLy5leGVjKGQucGF0aG5hbWUpPy5bMV0gPz8gLyhzaG93Y2FzZXxhbGJ1bSlcL1teL10rXC92aWRlb1wvKFteL10rKS8uZXhlYyhkLnBhdGhuYW1lKT8uWzJdOwoJCQkJCXJldHVybiBwIHx8IC8oW14vXStcLyk/W14vXSskLy5leGVjKGQucGF0aG5hbWUpPy5bMF07CgkJCQl9CgkJCX0KCQkJY2xhc3MgVktIZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJc3RhdGljIGdldFBsYXllcigpIHsKCQkJCQlpZiAoISh0eXBlb2YgVmlkZW92aWV3ID4gInUiKSkgcmV0dXJuIFZpZGVvdmlldz8uZ2V0UGxheWVyT2JqZWN0Py5jYWxsKHZvaWQgMCk7CgkJCQl9CgkJCQlhc3luYyBnZXRWaWRlb0RhdGEoZCkgewoJCQkJCWxldCBmID0gVktIZWxwZXIuZ2V0UGxheWVyKCk7CgkJCQkJaWYgKCFmKSByZXR1cm4gdGhpcy5yZXR1cm5CYXNlRGF0YShkKTsKCQkJCQl0cnkgewoJCQkJCQlsZXQgeyBkZXNjcmlwdGlvbjogcCwgZHVyYXRpb246IG0sIG1kX3RpdGxlOiBoIH0gPSBmLnZhcnMsIGcgPSBuZXcgRE9NUGFyc2VyKCksIF8gPSBnLnBhcnNlRnJvbVN0cmluZyhwLCAidGV4dC9odG1sIiksIGIgPSBBcnJheS5mcm9tKF8uYm9keS5jaGlsZE5vZGVzKS5maWx0ZXIoKGQpID0+IGQubm9kZU5hbWUgIT09ICJCUiIpLm1hcCgoZCkgPT4gZC50ZXh0Q29udGVudCkuam9pbigiXG4iKSwgeDsKCQkJCQkJcmV0dXJuIE9iamVjdC5oYXNPd24oZi52YXJzLCAic3VicyIpICYmICh4ID0gZi52YXJzLnN1YnMubWFwKChkKSA9PiAoewoJCQkJCQkJbGFuZ3VhZ2U6ICgwLCB2LmVjKShkLmxhbmcpLAoJCQkJCQkJc291cmNlOiAidmsiLAoJCQkJCQkJZm9ybWF0OiAidnR0IiwKCQkJCQkJCXVybDogZC51cmwsCgkJCQkJCQlpc0F1dG9HZW5lcmF0ZWQ6ICEhZC5pc19hdXRvCgkJCQkJCX0pKSksIHsKCQkJCQkJCXVybDogdGhpcy5zZXJ2aWNlLnVybCArIGQsCgkJCQkJCQl0aXRsZTogaCwKCQkJCQkJCWRlc2NyaXB0aW9uOiBiLAoJCQkJCQkJZHVyYXRpb246IG0sCgkJCQkJCQlzdWJ0aXRsZXM6IHgKCQkJCQkJfTsKCQkJCQl9IGNhdGNoIChmKSB7CgkJCQkJCXJldHVybiBfLkEuZXJyb3IoYEZhaWxlZCB0byBnZXQgVksgdmlkZW8gZGF0YSwgYmVjYXVzZTogJHtmLm1lc3NhZ2V9YCksIHRoaXMucmV0dXJuQmFzZURhdGEoZCk7CgkJCQkJfQoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9JZChkKSB7CgkJCQkJbGV0IGYgPSAvXlwvKHZpZGVvfGNsaXApLT9cZHs4LDl9X1xkezl9JC8uZXhlYyhkLnBhdGhuYW1lKTsKCQkJCQlpZiAoZikgcmV0dXJuIGZbMF0uc2xpY2UoMSk7CgkJCQkJbGV0IHAgPSAvXC9wbGF5bGlzdFwvW14vXStcLyh2aWRlby0/XGR7OCw5fV9cZHs5fSkvLmV4ZWMoZC5wYXRobmFtZSk7CgkJCQkJaWYgKHApIHJldHVybiBwWzFdOwoJCQkJCWxldCBtID0gZC5zZWFyY2hQYXJhbXMuZ2V0KCJ6Iik7CgkJCQkJaWYgKG0pIHJldHVybiBtLnNwbGl0KCIvIilbMF07CgkJCQkJbGV0IGggPSBkLnNlYXJjaFBhcmFtcy5nZXQoIm9pZCIpLCBnID0gZC5zZWFyY2hQYXJhbXMuZ2V0KCJpZCIpOwoJCQkJCWlmIChoICYmIGcpIHJldHVybiBgdmlkZW8tJHtNYXRoLmFicyhwYXJzZUludChoKSl9XyR7Z31gOwoJCQkJfQoJCQl9CgkJCWNsYXNzIFdhdGNoUG9yblRvSGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCXJldHVybiAvKHZpZGVvfGVtYmVkKVwvKFxkKykoXC9bXi9dK1wvKT8vLmV4ZWMoZC5wYXRobmFtZSk/LlswXTsKCQkJCX0KCQkJfQoJCQl2YXIgVCA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvc2hhcmVkL2Rpc3Qvc2VjdXJlLmpzIik7CgkJCWNsYXNzIFdldmVyc2VIZWxwZXIgZXh0ZW5kcyBnLnEgewoJCQkJQVBJX09SSUdJTiA9ICJodHRwczovL2dsb2JhbC5hcGlzLm5hdmVyLmNvbS93ZXZlcnNlL3dldndlYiI7CgkJCQlBUElfQVBQX0lEID0gImJlNGQ3OWViOGZjN2JkMDA4ZWU4MmM4ZWM0ZmY2ZmQ0IjsKCQkJCUFQSV9ITUFDX0tFWSA9ICIxYjljYjYzNzhkOTU5YjQ1NzE0YmVjNDk5NzFhZGUyMmU2ZTI0ZTQyIjsKCQkJCUhFQURFUlMgPSB7CgkJCQkJQWNjZXB0OiAiYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qIiwKCQkJCQlPcmlnaW46ICJodHRwczovL3dldmVyc2UuaW8iLAoJCQkJCVJlZmVyZXI6ICJodHRwczovL3dldmVyc2UuaW8vIgoJCQkJfTsKCQkJCWdldFVSTERhdGEoKSB7CgkJCQkJcmV0dXJuIHsKCQkJCQkJYXBwSWQ6IHRoaXMuQVBJX0FQUF9JRCwKCQkJCQkJbGFuZ3VhZ2U6ICJlbiIsCgkJCQkJCW9zOiAiV0VCIiwKCQkJCQkJcGxhdGZvcm06ICJXRUIiLAoJCQkJCQl3cGY6ICJwYyIKCQkJCQl9OwoJCQkJfQoJCQkJYXN5bmMgY3JlYXRlSGFzaChkKSB7CgkJCQkJbGV0IGYgPSBEYXRlLm5vdygpLCBwID0gZC5zdWJzdHJpbmcoMCwgTWF0aC5taW4oMjU1LCBkLmxlbmd0aCkpICsgZiwgbSA9IGF3YWl0ICgwLCBULmJUKSh0aGlzLkFQSV9ITUFDX0tFWSwgcCk7CgkJCQkJaWYgKCFtKSB0aHJvdyBuZXcgZy5hKCJGYWlsZWQgdG8gZ2V0IHdldmVyc2UgSE1BQyBzaWduYXR1cmUiKTsKCQkJCQlyZXR1cm4gewoJCQkJCQl3bXNncGFkOiBmLnRvU3RyaW5nKCksCgkJCQkJCXdtZDogbQoJCQkJCX07CgkJCQl9CgkJCQlhc3luYyBnZXRIYXNoVVJMUGFyYW1zKGQpIHsKCQkJCQlsZXQgZiA9IGF3YWl0IHRoaXMuY3JlYXRlSGFzaChkKTsKCQkJCQlyZXR1cm4gbmV3IFVSTFNlYXJjaFBhcmFtcyhmKS50b1N0cmluZygpOwoJCQkJfQoJCQkJYXN5bmMgZ2V0UG9zdFByZXZpZXcoZCkgewoJCQkJCWxldCBmID0gYC9wb3N0L3YxLjAvcG9zdC0ke2R9L3ByZXZpZXc/YCArIG5ldyBVUkxTZWFyY2hQYXJhbXMoewoJCQkJCQlmaWVsZFNldDogInBvc3RGb3JQcmV2aWV3IiwKCQkJCQkJLi4udGhpcy5nZXRVUkxEYXRhKCkKCQkJCQl9KS50b1N0cmluZygpOwoJCQkJCXRyeSB7CgkJCQkJCWxldCBkID0gYXdhaXQgdGhpcy5nZXRIYXNoVVJMUGFyYW1zKGYpLCBwID0gYXdhaXQgdGhpcy5mZXRjaCh0aGlzLkFQSV9PUklHSU4gKyBmICsgIiYiICsgZCwgeyBoZWFkZXJzOiB0aGlzLkhFQURFUlMgfSk7CgkJCQkJCXJldHVybiBhd2FpdCBwLmpzb24oKTsKCQkJCQl9IGNhdGNoIChmKSB7CgkJCQkJCXJldHVybiBfLkEuZXJyb3IoYEZhaWxlZCB0byBnZXQgd2V2ZXJzZSBwb3N0IHByZXZpZXcgYnkgcG9zdElkOiAke2R9YCwgZi5tZXNzYWdlKSwgITE7CgkJCQkJfQoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9JbktleShkKSB7CgkJCQkJbGV0IGYgPSBgL3ZpZGVvL3YxLjEvdm9kLyR7ZH0vaW5LZXk/YCArIG5ldyBVUkxTZWFyY2hQYXJhbXMoewoJCQkJCQlnY2M6ICJSVSIsCgkJCQkJCS4uLnRoaXMuZ2V0VVJMRGF0YSgpCgkJCQkJfSkudG9TdHJpbmcoKTsKCQkJCQl0cnkgewoJCQkJCQlsZXQgZCA9IGF3YWl0IHRoaXMuZ2V0SGFzaFVSTFBhcmFtcyhmKSwgcCA9IGF3YWl0IHRoaXMuZmV0Y2godGhpcy5BUElfT1JJR0lOICsgZiArICImIiArIGQsIHsKCQkJCQkJCW1ldGhvZDogIlBPU1QiLAoJCQkJCQkJaGVhZGVyczogdGhpcy5IRUFERVJTCgkJCQkJCX0pOwoJCQkJCQlyZXR1cm4gYXdhaXQgcC5qc29uKCk7CgkJCQkJfSBjYXRjaCAoZikgewoJCQkJCQlyZXR1cm4gXy5BLmVycm9yKGBGYWlsZWQgdG8gZ2V0IHdldmVyc2UgSW5LZXkgYnkgdmlkZW9JZDogJHtkfWAsIGYubWVzc2FnZSksICExOwoJCQkJCX0KCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvSW5mbyhkLCBmLCBwKSB7CgkJCQkJbGV0IG0gPSBEYXRlLm5vdygpOwoJCQkJCXRyeSB7CgkJCQkJCWxldCBoID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7CgkJCQkJCQlrZXk6IGYsCgkJCQkJCQlzaWQ6IHAsCgkJCQkJCQlub25jZTogbS50b1N0cmluZygpLAoJCQkJCQkJZGV2dDogImh0bWw1X3BjIiwKCQkJCQkJCXBydjogIk4iLAoJCQkJCQkJYXVwOiAiTiIsCgkJCQkJCQlzdHBiOiAiTiIsCgkJCQkJCQljcGw6ICJlbiIsCgkJCQkJCQllbnY6ICJwcm9kIiwKCQkJCQkJCWxjOiAiZW4iLAoJCQkJCQkJYWRpOiBKU09OLnN0cmluZ2lmeShbeyBhZFN5c3RlbTogbnVsbCB9XSksCgkJCQkJCQlhZHU6ICIvIgoJCQkJCQl9KS50b1N0cmluZygpLCBnID0gYXdhaXQgdGhpcy5mZXRjaChgaHR0cHM6Ly9nbG9iYWwuYXBpcy5uYXZlci5jb20vcm1jbm12L3JtY25tdi92b2QvcGxheS92Mi4wLyR7ZH0/YCArIGgsIHsgaGVhZGVyczogdGhpcy5IRUFERVJTIH0pOwoJCQkJCQlyZXR1cm4gYXdhaXQgZy5qc29uKCk7CgkJCQkJfSBjYXRjaCAobSkgewoJCQkJCQlyZXR1cm4gXy5BLmVycm9yKGBGYWlsZWQgdG8gZ2V0IHdldmVyc2UgdmlkZW8gaW5mbyAoaW5mcmFWaWRlb0lkOiAke2R9LCBpbmtleTogJHtmfSwgc2VydmljZUlkOiAke3B9YCwgbS5tZXNzYWdlKSwgITE7CgkJCQkJfQoJCQkJfQoJCQkJZXh0cmFjdFZpZGVvSW5mbyhkKSB7CgkJCQkJcmV0dXJuIGQuZmluZCgoZCkgPT4gZC51c2VQMlAgPT09ICExICYmIGQuc291cmNlLmluY2x1ZGVzKCIubXA0IikpOwoJCQkJfQoJCQkJYXN5bmMgZ2V0VmlkZW9EYXRhKGQpIHsKCQkJCQlsZXQgZiA9IGF3YWl0IHRoaXMuZ2V0UG9zdFByZXZpZXcoZCk7CgkJCQkJaWYgKCFmKSByZXR1cm47CgkJCQkJbGV0IHsgdmlkZW9JZDogcCwgc2VydmljZUlkOiBtLCBpbmZyYVZpZGVvSWQ6IGggfSA9IGYuZXh0ZW5zaW9uLnZpZGVvOwoJCQkJCWlmICghKHAgJiYgbSAmJiBoKSkgcmV0dXJuOwoJCQkJCWxldCBnID0gYXdhaXQgdGhpcy5nZXRWaWRlb0luS2V5KHApOwoJCQkJCWlmICghZykgcmV0dXJuOwoJCQkJCWxldCBfID0gYXdhaXQgdGhpcy5nZXRWaWRlb0luZm8oaCwgZy5pbktleSwgbSk7CgkJCQkJaWYgKCFfKSByZXR1cm47CgkJCQkJbGV0IHYgPSB0aGlzLmV4dHJhY3RWaWRlb0luZm8oXy52aWRlb3MubGlzdCk7CgkJCQkJaWYgKHYpIHJldHVybiB7CgkJCQkJCXVybDogdi5zb3VyY2UsCgkJCQkJCWR1cmF0aW9uOiB2LmR1cmF0aW9uCgkJCQkJfTsKCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCXJldHVybiAvKFteL10rKVwvKGxpdmV8bWVkaWEpXC8oW14vXSspLy5leGVjKGQucGF0aG5hbWUpPy5bM107CgkJCQl9CgkJCX0KCQkJY2xhc3MgWFZpZGVvc0hlbHBlciBleHRlbmRzIGcucSB7CgkJCQlhc3luYyBnZXRWaWRlb0lkKGQpIHsKCQkJCQlyZXR1cm4gL1teL10rXC9bXi9dKyQvLmV4ZWMoZC5wYXRobmFtZSk/LlswXTsKCQkJCX0KCQkJfQoJCQljbGFzcyBZYW5kZXhEaXNrSGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCUFQSV9PUklHSU4gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luOwoJCQkJQ0xJRU5UX1BSRUZJWCA9ICIvY2xpZW50L2Rpc2siOwoJCQkJSU5MSU5FX1BSRUZJWCA9ICIvaS8iOwoJCQkJRElTS19QUkVGSVggPSAiL2QvIjsKCQkJCWlzRXJyb3JEYXRhKGQpIHsKCQkJCQlyZXR1cm4gT2JqZWN0Lmhhc093bihkLCAiZXJyb3IiKTsKCQkJCX0KCQkJCWFzeW5jIGdldENsaWVudFZpZGVvRGF0YShkKSB7CgkJCQkJbGV0IGYgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKSwgcCA9IGYuc2VhcmNoUGFyYW1zLmdldCgiaWREaWFsb2ciKTsKCQkJCQlpZiAoIXApIHJldHVybjsKCQkJCQlsZXQgbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNwcmVsb2FkZWQtZGF0YSIpOwoJCQkJCWlmIChtKSB0cnkgewoJCQkJCQlsZXQgZCA9IEpTT04ucGFyc2UobS5pbm5lclRleHQpLCB7IGlkQ2xpZW50OiBmLCBzazogaCB9ID0gZC5jb25maWcsIF8gPSBhd2FpdCB0aGlzLmZldGNoKHRoaXMuQVBJX09SSUdJTiArICIvbW9kZWxzLXYyP209bXBmcy9pbmZvIiwgewoJCQkJCQkJbWV0aG9kOiAiUE9TVCIsCgkJCQkJCQlib2R5OiBKU09OLnN0cmluZ2lmeSh7CgkJCQkJCQkJYXBpTWV0aG9kOiAibXBmcy9pbmZvIiwKCQkJCQkJCQljb25uZWN0aW9uX2lkOiBmLAoJCQkJCQkJCXJlcXVlc3RQYXJhbXM6IHsgcGF0aDogcCB9LAoJCQkJCQkJCXNrOiBoCgkJCQkJCQl9KSwKCQkJCQkJCWhlYWRlcnM6IHsgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiB9CgkJCQkJCX0pLCB2ID0gYXdhaXQgXy5qc29uKCk7CgkJCQkJCWlmICh0aGlzLmlzRXJyb3JEYXRhKHYpKSB0aHJvdyBuZXcgZy5hKHYuZXJyb3I/Lm1lc3NhZ2UgPz8gdi5lcnJvcj8uY29kZSk7CgkJCQkJCWlmICh2Py50eXBlICE9PSAiZmlsZSIpIHRocm93IG5ldyBnLmEoIkZhaWxlZCB0byBnZXQgcmVzb3VyY2UgaW5mbyIpOwoJCQkJCQlsZXQgeyBtZXRhOiB7IHNob3J0X3VybDogYiwgdmlkZW9faW5mbzogeCB9LCBuYW1lOiBDIH0gPSB2OwoJCQkJCQlpZiAoIXgpIHRocm93IG5ldyBnLmEoIlRoZXJlJ3Mgbm8gdmlkZW8gb3BlbiByaWdodCBub3ciKTsKCQkJCQkJaWYgKCFiKSB0aHJvdyBuZXcgZy5hKCJBY2Nlc3MgdG8gdGhlIHZpZGVvIGlzIGxpbWl0ZWQiKTsKCQkJCQkJbGV0IHcgPSB0aGlzLmNsZWFyVGl0bGUoQyksIFQgPSBNYXRoLnJvdW5kKHguZHVyYXRpb24gLyAxZTMpOwoJCQkJCQlyZXR1cm4gewoJCQkJCQkJdXJsOiBiLAoJCQkJCQkJdGl0bGU6IHcsCgkJCQkJCQlkdXJhdGlvbjogVAoJCQkJCQl9OwoJCQkJCX0gY2F0Y2ggKGYpIHsKCQkJCQkJXy5BLmVycm9yKGBGYWlsZWQgdG8gZ2V0IHlhbmRleCBkaXNrIHZpZGVvIGRhdGEgYnkgdmlkZW8gSUQ6ICR7ZH0sIGJlY2F1c2UgJHtmLm1lc3NhZ2V9YCk7CgkJCQkJCXJldHVybjsKCQkJCQl9CgkJCQl9CgkJCQljbGVhclRpdGxlKGQpIHsKCQkJCQlyZXR1cm4gZC5yZXBsYWNlKC8oXC5bXi5dKykkLywgIiIpOwoJCQkJfQoJCQkJZ2V0Qm9keUhhc2goZCwgZikgewoJCQkJCWxldCBwID0gSlNPTi5zdHJpbmdpZnkoewoJCQkJCQloYXNoOiBkLAoJCQkJCQlzazogZgoJCQkJCX0pOwoJCQkJCXJldHVybiBlbmNvZGVVUklDb21wb25lbnQocCk7CgkJCQl9CgkJCQlhc3luYyBmZXRjaExpc3QoZCwgZikgewoJCQkJCWxldCBwID0gdGhpcy5nZXRCb2R5SGFzaChkLCBmKSwgbSA9IGF3YWl0IHRoaXMuZmV0Y2godGhpcy5BUElfT1JJR0lOICsgIi9wdWJsaWMvYXBpL2ZldGNoLWxpc3QiLCB7CgkJCQkJCW1ldGhvZDogIlBPU1QiLAoJCQkJCQlib2R5OiBwCgkJCQkJfSksIGggPSBhd2FpdCBtLmpzb24oKTsKCQkJCQlpZiAoT2JqZWN0Lmhhc093bihoLCAiZXJyb3IiKSkgdGhyb3cgbmV3IGcuYSgiRmFpbGVkIHRvIGZldGNoIGZvbGRlciBsaXN0Iik7CgkJCQkJcmV0dXJuIGgucmVzb3VyY2VzOwoJCQkJfQoJCQkJYXN5bmMgZ2V0RG93bmxvYWRVcmwoZCwgZikgewoJCQkJCWxldCBwID0gdGhpcy5nZXRCb2R5SGFzaChkLCBmKSwgbSA9IGF3YWl0IHRoaXMuZmV0Y2godGhpcy5BUElfT1JJR0lOICsgIi9wdWJsaWMvYXBpL2Rvd25sb2FkLXVybCIsIHsKCQkJCQkJbWV0aG9kOiAiUE9TVCIsCgkJCQkJCWJvZHk6IHAKCQkJCQl9KSwgaCA9IGF3YWl0IG0uanNvbigpOwoJCQkJCWlmIChoLmVycm9yKSB0aHJvdyBuZXcgZy5hKCJGYWlsZWQgdG8gZ2V0IGRvd25sb2FkIHVybCIpOwoJCQkJCXJldHVybiBoLmRhdGEudXJsOwoJCQkJfQoJCQkJYXN5bmMgZ2V0RGlza1ZpZGVvRGF0YShkKSB7CgkJCQkJdHJ5IHsKCQkJCQkJbGV0IGYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3RvcmUtcHJlZmV0Y2giKTsKCQkJCQkJaWYgKCFmKSB0aHJvdyBuZXcgZy5hKCJGYWlsZWQgdG8gZ2V0IHByZWZldGNoIGRhdGEiKTsKCQkJCQkJbGV0IHAgPSBkLnNwbGl0KCIvIikuc2xpY2UoMyk7CgkJCQkJCWlmICghcC5sZW5ndGgpIHRocm93IG5ldyBnLmEoIkZhaWxlZCB0byBmaW5kIHZpZGVvIGZpbGUgcGF0aCIpOwoJCQkJCQlsZXQgbSA9IEpTT04ucGFyc2UoZi5pbm5lclRleHQpLCB7IHJlc291cmNlczogaCwgcm9vdFJlc291cmNlSWQ6IF8sIGVudmlyb25tZW50OiB7IHNrOiBiIH0gfSA9IG0sIHggPSBoW19dLCBDID0gcC5sZW5ndGggLSAxLCB3ID0gcC5maWx0ZXIoKGQsIGYpID0+IGYgIT09IEMpLmpvaW4oIi8iKSwgVCA9IE9iamVjdC52YWx1ZXMoaCk7CgkJCQkJCXcuaW5jbHVkZXMoIi8iKSAmJiAoVCA9IGF3YWl0IHRoaXMuZmV0Y2hMaXN0KGAke3guaGFzaH06LyR7d31gLCBiKSk7CgkJCQkJCWxldCBFID0gVC5maW5kKChkKSA9PiBkLm5hbWUgPT09IHBbQ10pOwoJCQkJCQlpZiAoIUUpIHRocm93IG5ldyBnLmEoIkZhaWxlZCB0byBmaW5kIHJlc291cmNlIik7CgkJCQkJCWlmIChFICYmIEUudHlwZSA9PT0gImRpciIpIHRocm93IG5ldyBnLmEoIlBhdGggaXMgZGlyLCBidXQgZXhwZWN0ZWQgZmlsZSIpOwoJCQkJCQlsZXQgeyBtZXRhOiB7IHNob3J0X3VybDogRCwgbWVkaWF0eXBlOiBPLCB2aWRlb0R1cmF0aW9uOiBBIH0sIHBhdGg6IGosIG5hbWU6IEYgfSA9IEU7CgkJCQkJCWlmIChPICE9PSAidmlkZW8iKSB0aHJvdyBuZXcgZy5hKCJSZXNvdXJjZSBpc24ndCBhIHZpZGVvIik7CgkJCQkJCWxldCBVID0gdGhpcy5jbGVhclRpdGxlKEYpLCBXID0gTWF0aC5yb3VuZChBIC8gMWUzKTsKCQkJCQkJaWYgKEQpIHJldHVybiB7CgkJCQkJCQl1cmw6IEQsCgkJCQkJCQlkdXJhdGlvbjogVywKCQkJCQkJCXRpdGxlOiBVCgkJCQkJCX07CgkJCQkJCWxldCBHID0gYXdhaXQgdGhpcy5nZXREb3dubG9hZFVybChqLCBiKTsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCXVybDogKDAsIHYuZmwpKG5ldyBVUkwoRykpLAoJCQkJCQkJZHVyYXRpb246IFcsCgkJCQkJCQl0aXRsZTogVQoJCQkJCQl9OwoJCQkJCX0gY2F0Y2ggKGYpIHsKCQkJCQkJXy5BLmVycm9yKGBGYWlsZWQgdG8gZ2V0IHlhbmRleCBkaXNrIHZpZGVvIGRhdGEgYnkgZGlzayB2aWRlbyBJRDogJHtkfWAsIGYubWVzc2FnZSk7CgkJCQkJCXJldHVybjsKCQkJCQl9CgkJCQl9CgkJCQlhc3luYyBnZXRWaWRlb0RhdGEoZCkgewoJCQkJCXJldHVybiBkLnN0YXJ0c1dpdGgodGhpcy5JTkxJTkVfUFJFRklYKSB8fCAvXlwvZFwvKFteL10rKSQvLmV4ZWMoZCkgPyB7IHVybDogdGhpcy5zZXJ2aWNlLnVybCArIGQuc2xpY2UoMSkgfSA6IChkID0gZGVjb2RlVVJJQ29tcG9uZW50KGQpLCBkLnN0YXJ0c1dpdGgodGhpcy5DTElFTlRfUFJFRklYKSA/IGF3YWl0IHRoaXMuZ2V0Q2xpZW50VmlkZW9EYXRhKGQpIDogYXdhaXQgdGhpcy5nZXREaXNrVmlkZW9EYXRhKGQpKTsKCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCWlmIChkLnBhdGhuYW1lLnN0YXJ0c1dpdGgodGhpcy5DTElFTlRfUFJFRklYKSkgcmV0dXJuIGQucGF0aG5hbWUgKyBkLnNlYXJjaDsKCQkJCQlsZXQgZiA9IC9cL2lcLyhbXi9dKykvLmV4ZWMoZC5wYXRobmFtZSk/LlswXTsKCQkJCQlyZXR1cm4gZiB8fCAoL1wvZFwvKFteL10rKS8uZXhlYyhkLnBhdGhuYW1lKSA/IGQucGF0aG5hbWUgOiB2b2lkIDApOwoJCQkJfQoJCQl9CgkJCWNsYXNzIFlvdWt1SGVscGVyIGV4dGVuZHMgZy5xIHsKCQkJCWFzeW5jIGdldFZpZGVvSWQoZCkgewoJCQkJCXJldHVybiAvdl9zaG93XC9pZF9bXHc9XSsvLmV4ZWMoZC5wYXRobmFtZSk/LlswXTsKCQkJCX0KCQkJfQoJCQl2YXIgRSA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvZXh0L2Rpc3QvaGVscGVycy95b3V0dWJlLmpzIik7CgkJCWxldCBEID0gewoJCQkJW20uci5tYWlscnVdOiBNYWlsUnVIZWxwZXIsCgkJCQlbbS5yLndldmVyc2VdOiBXZXZlcnNlSGVscGVyLAoJCQkJW20uci5rb2Rpa106IEtvZGlrSGVscGVyLAoJCQkJW20uci5wYXRyZW9uXTogUGF0cmVvbkhlbHBlciwKCQkJCVttLnIucmVkZGl0XTogUmVkZGl0SGVscGVyLAoJCQkJW20uci5iYW5uZWR2aWRlb106IEJhbm5lZFZpZGVvSGVscGVyLAoJCQkJW20uci5raWNrXTogS2lja0hlbHBlciwKCQkJCVttLnIuYXBwbGVkZXZlbG9wZXJdOiBBcHBsZURldmVsb3BlckhlbHBlciwKCQkJCVttLnIuZXBpY2dhbWVzXTogRXBpY0dhbWVzSGVscGVyLAoJCQkJW20uci5vZHlzZWVdOiBPZHlzZWVIZWxwZXIsCgkJCQlbbS5yLmNvdXJzZWh1bnRlckxpa2VdOiBDb3Vyc2VodW50ZXJMaWtlSGVscGVyLAoJCQkJW20uci50d2l0Y2hdOiBUd2l0Y2hIZWxwZXIsCgkJCQlbbS5yLnNhcF06IFNhcEhlbHBlciwKCQkJCVttLnIubGlua2VkaW5dOiBMaW5rZWRpbkhlbHBlciwKCQkJCVttLnIudmltZW9dOiBWaW1lb0hlbHBlciwKCQkJCVttLnIueWFuZGV4ZGlza106IFlhbmRleERpc2tIZWxwZXIsCgkJCQlbbS5yLnZrXTogVktIZWxwZXIsCgkJCQlbbS5yLnRyb3ZvXTogVHJvdm9IZWxwZXIsCgkJCQlbbS5yLmluY2VzdGZsaXhdOiBJbmNlc3RmbGl4SGVscGVyLAoJCQkJW20uci5wb3JudG5dOiBQb3JuVE5IZWxwZXIsCgkJCQlbbS5yLmdvb2dsZWRyaXZlXTogR29vZ2xlRHJpdmVIZWxwZXIsCgkJCQlbbS5yLmJpbGliaWxpXTogQmlsaWJpbGlIZWxwZXIsCgkJCQlbbS5yLnh2aWRlb3NdOiBYVmlkZW9zSGVscGVyLAoJCQkJW20uci53YXRjaHBvcm50b106IFdhdGNoUG9yblRvSGVscGVyLAoJCQkJW20uci5hcmNoaXZlXTogQXJjaGl2ZUhlbHBlciwKCQkJCVttLnIuZGFpbHltb3Rpb25dOiBEYWlseW1vdGlvbkhlbHBlciwKCQkJCVttLnIueW91a3VdOiBZb3VrdUhlbHBlciwKCQkJCVttLnIuZWdnaGVhZF06IEVnZ2hlYWRIZWxwZXIsCgkJCQlbbS5yLm5ld2dyb3VuZHNdOiBOZXdncm91bmRzSGVscGVyLAoJCQkJW20uci5va3J1XTogT0tSdUhlbHBlciwKCQkJCVttLnIucGVlcnR1YmVdOiBQZWVydHViZUhlbHBlciwKCQkJCVttLnIuZXBvcm5lcl06IEVwb3JuZXJIZWxwZXIsCgkJCQlbbS5yLmJpdGNodXRlXTogQml0Y2h1dGVIZWxwZXIsCgkJCQlbbS5yLnJ1dHViZV06IFJ1dHViZUhlbHBlciwKCQkJCVttLnIuZmFjZWJvb2tdOiBGYWNlYm9va0hlbHBlciwKCQkJCVttLnIucnVtYmxlXTogUnVtYmxlSGVscGVyLAoJCQkJW20uci50d2l0dGVyXTogVHdpdHRlckhlbHBlciwKCQkJCVttLnIucG9ybmh1Yl06IFBvcm5odWJIZWxwZXIsCgkJCQlbbS5yLnRpa3Rva106IFRpa1Rva0hlbHBlciwKCQkJCVttLnIucHJveGl0b2tdOiBUaWtUb2tIZWxwZXIsCgkJCQlbbS5yLm5pbmVfZ2FnXTogTmluZUdBR0hlbHBlciwKCQkJCVttLnIueW91dHViZV06IEUuQSwKCQkJCVttLnIucmlja3R1YmVdOiBFLkEsCgkJCQlbbS5yLmludmlkaW91c106IEUuQSwKCQkJCVttLnIucG9rZXR1YmVdOiBFLkEsCgkJCQlbbS5yLnBpcGVkXTogRS5BLAoJCQkJW20uci5kemVuXTogRHplbkhlbHBlciwKCQkJCVttLnIuY2xvdWRmbGFyZXN0cmVhbV06IENsb3VkZmxhcmVTdHJlYW1IZWxwZXIsCgkJCQlbbS5yLmxvb21dOiBMb29tSGVscGVyLAoJCQkJW20uci5ydG5ld3NdOiBSdE5ld3NIZWxwZXIsCgkJCQlbbS5yLmJpdHZpZXddOiBCaXR2aWV3SGVscGVyLAoJCQkJW20uci50aGlzdmlkXTogVGhpc1ZpZEhlbHBlciwKCQkJCVttLnIuaWduXTogSWduSGVscGVyLAoJCQkJW20uci5idW5rcl06IEJ1bmtySGVscGVyLAoJCQkJW20uci5pbWRiXTogSU1EYkhlbHBlciwKCQkJCVttLnIudGVsZWdyYW1dOiBUZWxlZ3JhbUhlbHBlciwKCQkJCVtoLlEudWRlbXldOiBVZGVteUhlbHBlciwKCQkJCVtoLlEuY291cnNlcmFdOiBDb3Vyc2VyYUhlbHBlciwKCQkJCVtoLlEuZG91eWluXTogRG91eWluSGVscGVyLAoJCQkJW2guUS5hcnRzdGF0aW9uXTogQXJ0c3RhdGlvbkhlbHBlciwKCQkJCVtoLlEua2lja3N0YXJ0ZXJdOiBLaWNrc3RhcnRlckhlbHBlciwKCQkJCVtoLlEub3JhY2xlbGVhcm5dOiBPcmFjbGVMZWFybkhlbHBlciwKCQkJCVtoLlEuZGVlcGxlYXJuaW5nYWldOiBEZWVwbGVhcm5pbmdBSUhlbHBlciwKCQkJCVtoLlEubmV0YWNhZF06IE5ldGFjYWRIZWxwZXIKCQkJfTsKCQkJY2xhc3MgVmlkZW9IZWxwZXIgewoJCQkJaGVscGVyc0RhdGE7CgkJCQljb25zdHJ1Y3RvcihkID0ge30pIHsKCQkJCQl0aGlzLmhlbHBlcnNEYXRhID0gZDsKCQkJCX0KCQkJCWdldEhlbHBlcihkKSB7CgkJCQkJcmV0dXJuIG5ldyBEW2RdKHRoaXMuaGVscGVyc0RhdGEpOwoJCQkJfQoJCQl9CgkJfSwKCQkiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9leHQvZGlzdC9oZWxwZXJzL3lvdXR1YmUuanMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuZChmLCB7IEE6ICgpID0+IFlvdXR1YmVIZWxwZXIgfSk7CgkJCXZhciBtID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9leHQvZGlzdC9oZWxwZXJzL2Jhc2UuanMiKSwgaCA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvc2hhcmVkL2Rpc3QvZGF0YS9jb25zdHMuanMiKSwgZyA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvc2hhcmVkL2Rpc3QvdXRpbHMvbG9nZ2VyLmpzIiksIF8gPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL3NoYXJlZC9kaXN0L3V0aWxzL3V0aWxzLmpzIik7CgkJCWNsYXNzIFlvdXR1YmVIZWxwZXIgZXh0ZW5kcyBtLnEgewoJCQkJc3RhdGljIGlzTW9iaWxlKCkgewoJCQkJCXJldHVybiAvXm1cLnlvdXR1YmVcLmNvbSQvLnRlc3Qod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lKTsKCQkJCX0KCQkJCXN0YXRpYyBnZXRQbGF5ZXIoKSB7CgkJCQkJcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zdGFydHNXaXRoKCIvc2hvcnRzLyIpICYmICFZb3V0dWJlSGVscGVyLmlzTW9iaWxlKCkgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjc2hvcnRzLXBsYXllciIpIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI21vdmllX3BsYXllciIpOwoJCQkJfQoJCQkJc3RhdGljIGdldFBsYXllclJlc3BvbnNlKCkgewoJCQkJCXJldHVybiBZb3V0dWJlSGVscGVyLmdldFBsYXllcigpPy5nZXRQbGF5ZXJSZXNwb25zZT8uY2FsbCh2b2lkIDApOwoJCQkJfQoJCQkJc3RhdGljIGdldFBsYXllckRhdGEoKSB7CgkJCQkJcmV0dXJuIFlvdXR1YmVIZWxwZXIuZ2V0UGxheWVyKCk/LmdldFZpZGVvRGF0YT8uY2FsbCh2b2lkIDApOwoJCQkJfQoJCQkJc3RhdGljIGdldFZvbHVtZSgpIHsKCQkJCQlsZXQgZCA9IFlvdXR1YmVIZWxwZXIuZ2V0UGxheWVyKCk7CgkJCQkJcmV0dXJuIGQ/LmdldFZvbHVtZSA/IGQuZ2V0Vm9sdW1lKCkgLyAxMDAgOiAxOwoJCQkJfQoJCQkJc3RhdGljIHNldFZvbHVtZShkKSB7CgkJCQkJbGV0IGYgPSBZb3V0dWJlSGVscGVyLmdldFBsYXllcigpOwoJCQkJCXJldHVybiBmPy5zZXRWb2x1bWUgPyAoZi5zZXRWb2x1bWUoTWF0aC5yb3VuZChkICogMTAwKSksICEwKSA6ICExOwoJCQkJfQoJCQkJc3RhdGljIGlzTXV0ZWQoKSB7CgkJCQkJbGV0IGQgPSBZb3V0dWJlSGVscGVyLmdldFBsYXllcigpOwoJCQkJCXJldHVybiBkPy5pc011dGVkID8gZC5pc011dGVkKCkgOiAhMTsKCQkJCX0KCQkJCXN0YXRpYyB2aWRlb1NlZWsoZCwgZikgewoJCQkJCWcuQS5sb2coInZpZGVvU2VlayIsIGYpOwoJCQkJCWxldCBwID0gWW91dHViZUhlbHBlci5nZXRQbGF5ZXIoKT8uZ2V0UHJvZ3Jlc3NTdGF0ZSgpPy5zZWVrYWJsZUVuZCA/PyBkLmN1cnJlbnRUaW1lLCBtID0gcCAtIGY7CgkJCQkJZC5jdXJyZW50VGltZSA9IG07CgkJCQl9CgkJCQlzdGF0aWMgZ2V0UG9Ub2tlbigpIHsKCQkJCQlsZXQgZCA9IFlvdXR1YmVIZWxwZXIuZ2V0UGxheWVyKCk7CgkJCQkJaWYgKCFkKSByZXR1cm47CgkJCQkJbGV0IGYgPSBkLmdldEF1ZGlvVHJhY2s/LmNhbGwodm9pZCAwKTsKCQkJCQlpZiAoIWY/LmNhcHRpb25UcmFja3M/Lmxlbmd0aCkgcmV0dXJuOwoJCQkJCWxldCBwID0gZi5jYXB0aW9uVHJhY2tzLmZpbmQoKGQpID0+IGQudXJsLmluY2x1ZGVzKCImcG90PSIpKTsKCQkJCQlpZiAocCkgcmV0dXJuIC8mcG90PShbXiZdKykvLmV4ZWMocC51cmwpPy5bMV07CgkJCQl9CgkJCQlzdGF0aWMgZ2V0R2xvYmFsQ29uZmlnKCkgewoJCQkJCXJldHVybiB0eXBlb2YgeXQgPCAidSIgPyB5dD8uY29uZmlnXyA6IHR5cGVvZiB5dGNmZyA8ICJ1IiA/IHl0Y2ZnPy5kYXRhXyA6IHZvaWQgMDsKCQkJCX0KCQkJCXN0YXRpYyBnZXREZXZpY2VQYXJhbXMoKSB7CgkJCQkJbGV0IGQgPSBZb3V0dWJlSGVscGVyLmdldEdsb2JhbENvbmZpZygpOwoJCQkJCWlmICghZCkgcmV0dXJuICJjPVdFQiI7CgkJCQkJbGV0IGYgPSBkLklOTkVSVFVCRV9DT05URVhUPy5jbGllbnQsIHAgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGQuREVWSUNFKTsKCQkJCQlyZXR1cm4gcC5kZWxldGUoImNlbmciKSwgcC5kZWxldGUoImNlbmd2ZXIiKSwgcC5zZXQoImMiLCBmPy5jbGllbnROYW1lID8/IGQuSU5ORVJUVUJFX0NMSUVOVF9OQU1FKSwgcC5zZXQoImN2ZXIiLCBmPy5jbGllbnRWZXJzaW9uID8/IGQuSU5ORVJUVUJFX0NMSUVOVF9WRVJTSU9OKSwgcC5zZXQoImNwbGF5ZXIiLCAiVU5JUExBWUVSIiksIHAudG9TdHJpbmcoKTsKCQkJCX0KCQkJCXN0YXRpYyBnZXRTdWJ0aXRsZXMoZCkgewoJCQkJCWxldCBmID0gWW91dHViZUhlbHBlci5nZXRQbGF5ZXJSZXNwb25zZSgpLCBwID0gZj8uY2FwdGlvbnM/LnBsYXllckNhcHRpb25zVHJhY2tsaXN0UmVuZGVyZXI7CgkJCQkJaWYgKCFwKSByZXR1cm4gW107CgkJCQkJbGV0IG0gPSBwLmNhcHRpb25UcmFja3MgPz8gW10sIGggPSBwLnRyYW5zbGF0aW9uTGFuZ3VhZ2VzID8/IFtdLCB2ID0gaC5maW5kKChmKSA9PiBmLmxhbmd1YWdlQ29kZSA9PT0gZCksIGIgPSBtLmZpbmQoKGQpID0+IGQ/LmtpbmQgPT09ICJhc3IiKSwgeCA9IGI/Lmxhbmd1YWdlQ29kZSA/PyAiZW4iLCBDID0gbS5yZWR1Y2UoKGYsIHApID0+IHsKCQkJCQkJaWYgKCEoImxhbmd1YWdlQ29kZSIgaW4gcCkpIHJldHVybiBmOwoJCQkJCQlsZXQgbSA9IHAubGFuZ3VhZ2VDb2RlID8gKDAsIF8uZWMpKHAubGFuZ3VhZ2VDb2RlKSA6IHZvaWQgMCwgaCA9IHAuYmFzZVVybDsKCQkJCQkJaWYgKCFtIHx8ICFoKSByZXR1cm4gZjsKCQkJCQkJbGV0IGcgPSBgJHtoLnN0YXJ0c1dpdGgoImh0dHAiKSA/IGggOiBgJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufS8ke2h9YH0mZm10PWpzb24zYDsKCQkJCQkJcmV0dXJuIGYucHVzaCh7CgkJCQkJCQlzb3VyY2U6ICJ5b3V0dWJlIiwKCQkJCQkJCWZvcm1hdDogImpzb24iLAoJCQkJCQkJbGFuZ3VhZ2U6IG0sCgkJCQkJCQlpc0F1dG9HZW5lcmF0ZWQ6IHA/LmtpbmQgPT09ICJhc3IiLAoJCQkJCQkJdXJsOiBnCgkJCQkJCX0pLCB2ICYmIHAuaXNUcmFuc2xhdGFibGUgJiYgcC5sYW5ndWFnZUNvZGUgPT09IHggJiYgZCAhPT0gbSAmJiBmLnB1c2goewoJCQkJCQkJc291cmNlOiAieW91dHViZSIsCgkJCQkJCQlmb3JtYXQ6ICJqc29uIiwKCQkJCQkJCWxhbmd1YWdlOiBkLAoJCQkJCQkJaXNBdXRvR2VuZXJhdGVkOiBwPy5raW5kID09PSAiYXNyIiwKCQkJCQkJCXRyYW5zbGF0ZWRGcm9tTGFuZ3VhZ2U6IG0sCgkJCQkJCQl1cmw6IGAke2d9JnRsYW5nPSR7ZH1gCgkJCQkJCX0pLCBmOwoJCQkJCX0sIFtdKTsKCQkJCQlyZXR1cm4gZy5BLmxvZygieW91dHViZSBzdWJ0aXRsZXM6IiwgQyksIEM7CgkJCQl9CgkJCQlzdGF0aWMgZ2V0TGFuZ3VhZ2UoKSB7CgkJCQkJaWYgKCFZb3V0dWJlSGVscGVyLmlzTW9iaWxlKCkpIHsKCQkJCQkJbGV0IGQgPSBZb3V0dWJlSGVscGVyLmdldFBsYXllcigpLCBmID0gZD8uZ2V0QXVkaW9UcmFjaz8uY2FsbCh2b2lkIDApPy5nZXRMYW5ndWFnZUluZm8oKTsKCQkJCQkJaWYgKGYgJiYgZi5pZCAhPT0gInVuZCIpIHJldHVybiAoMCwgXy5lYykoZi5pZC5zcGxpdCgiLiIpWzBdKTsKCQkJCQl9CgkJCQkJbGV0IGQgPSBZb3V0dWJlSGVscGVyLmdldFBsYXllclJlc3BvbnNlKCksIGYgPSBkPy5jYXB0aW9ucz8ucGxheWVyQ2FwdGlvbnNUcmFja2xpc3RSZW5kZXJlci5jYXB0aW9uVHJhY2tzLmZpbmQoKGQpID0+IGQua2luZCA9PT0gImFzciIgJiYgZC5sYW5ndWFnZUNvZGUpOwoJCQkJCXJldHVybiBmID8gKDAsIF8uZWMpKGYubGFuZ3VhZ2VDb2RlKSA6IHZvaWQgMDsKCQkJCX0KCQkJCWFzeW5jIGdldFZpZGVvRGF0YShkKSB7CgkJCQkJbGV0IHsgdGl0bGU6IGYgfSA9IFlvdXR1YmVIZWxwZXIuZ2V0UGxheWVyRGF0YSgpID8/IHt9LCB7IHNob3J0RGVzY3JpcHRpb246IHAsIGlzTGl2ZTogbSwgdGl0bGU6IGcgfSA9IFlvdXR1YmVIZWxwZXIuZ2V0UGxheWVyUmVzcG9uc2UoKT8udmlkZW9EZXRhaWxzID8/IHt9LCBfID0gWW91dHViZUhlbHBlci5nZXRTdWJ0aXRsZXModGhpcy5sYW5ndWFnZSksIHYgPSBZb3V0dWJlSGVscGVyLmdldExhbmd1YWdlKCk7CgkJCQkJdiAmJiAhaC54bS5pbmNsdWRlcyh2KSAmJiAodiA9IHZvaWQgMCk7CgkJCQkJbGV0IGIgPSBZb3V0dWJlSGVscGVyLmdldFBsYXllcigpPy5nZXREdXJhdGlvbj8uY2FsbCh2b2lkIDApID8/IHZvaWQgMDsKCQkJCQlyZXR1cm4gewoJCQkJCQl1cmw6IHRoaXMuc2VydmljZS51cmwgKyBkLAoJCQkJCQlpc1N0cmVhbTogbSwKCQkJCQkJdGl0bGU6IGcsCgkJCQkJCWxvY2FsaXplZFRpdGxlOiBmLAoJCQkJCQlkZXRlY3RlZExhbmd1YWdlOiB2LAoJCQkJCQlkZXNjcmlwdGlvbjogcCwKCQkJCQkJc3VidGl0bGVzOiBfLAoJCQkJCQlkdXJhdGlvbjogYgoJCQkJCX07CgkJCQl9CgkJCQlhc3luYyBnZXRWaWRlb0lkKGQpIHsKCQkJCQlpZiAoZC5ob3N0bmFtZSA9PT0gInlvdXR1LmJlIiAmJiAoZC5zZWFyY2ggPSBgP3Y9JHtkLnBhdGhuYW1lLnJlcGxhY2UoIi8iLCAiIil9YCwgZC5wYXRobmFtZSA9ICIvd2F0Y2giKSwgZC5zZWFyY2hQYXJhbXMuaGFzKCJlbmFibGVqc2FwaSIpKSB7CgkJCQkJCWxldCBmID0gWW91dHViZUhlbHBlci5nZXRQbGF5ZXIoKT8uZ2V0VmlkZW9VcmwoKTsKCQkJCQkJZCA9IGYgPyBuZXcgVVJMKGYpIDogZDsKCQkJCQl9CgkJCQkJcmV0dXJuIC8oPzp3YXRjaHxlbWJlZHxzaG9ydHN8bGl2ZSlcLyhbXi9dKykvLmV4ZWMoZC5wYXRobmFtZSk/LlsxXSA/PyBkLnNlYXJjaFBhcmFtcy5nZXQoInYiKTsKCQkJCX0KCQkJfQoJCX0sCgkJIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvZXh0L2Rpc3QvaW5kZXguanMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgewoJCQkJCQlBeTogKCkgPT4gaC5BLAoJCQkJCQlQdTogKCkgPT4gaC5QCgkJCQkJfSk7CgkJCQkJdmFyIGggPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2V4dC9kaXN0L2NsaWVudC5qcyIpLCBnID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9leHQvZGlzdC91dGlscy92aWRlb0RhdGEuanMiKSwgXyA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvZXh0L2Rpc3QvZGF0YS9zaXRlcy5qcyIpLCB2ID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9leHQvZGlzdC90eXBlcy9pbmRleC5qcyIpLCBiID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9leHQvZGlzdC9oZWxwZXJzL2luZGV4LmpzIiksIHggPSBkKFtoXSk7CgkJCQkJaCA9ICh4LnRoZW4gPyAoYXdhaXQgeCkoKSA6IHgpWzBdLCBtKCk7CgkJCQl9IGNhdGNoIChkKSB7CgkJCQkJbShkKTsKCQkJCX0KCQkJfSk7CgkJfSwKCQkiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9leHQvZGlzdC90eXBlcy9pbmRleC5qcyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJdmFyIG0gPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2V4dC9kaXN0L3R5cGVzL3NlcnZpY2UuanMiKTsKCQl9LAoJCSIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2V4dC9kaXN0L3R5cGVzL3NlcnZpY2UuanMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuZChmLCB7IFE6ICgpID0+IGggfSk7CgkJCXZhciBtID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9jb3JlL2Rpc3QvdHlwZXMvc2VydmljZS5qcyIpLCBoOwoJCQkoZnVuY3Rpb24oZCkgewoJCQkJZC51ZGVteSA9ICJ1ZGVteSIsIGQuY291cnNlcmEgPSAiY291cnNlcmEiLCBkLmRvdXlpbiA9ICJkb3V5aW4iLCBkLmFydHN0YXRpb24gPSAiYXJ0c3RhdGlvbiIsIGQua2lja3N0YXJ0ZXIgPSAia2lja3N0YXJ0ZXIiLCBkLm9yYWNsZWxlYXJuID0gIm9yYWNsZWxlYXJuIiwgZC5kZWVwbGVhcm5pbmdhaSA9ICJkZWVwbGVhcm5pbmdhaSIsIGQubmV0YWNhZCA9ICJuZXRhY2FkIjsKCQkJfSkoaCB8fD0ge30pOwoJCQlsZXQgZyA9IHsKCQkJCS4uLm0uciwKCQkJCS4uLmgKCQkJfTsKCQl9LAoJCSIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2V4dC9kaXN0L3V0aWxzL3ZpZGVvRGF0YS5qcyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5kKGYsIHsKCQkJCWNROiAoKSA9PiBnZXRTZXJ2aWNlLAoJCQkJalk6ICgpID0+IGdldFZpZGVvSUQsCgkJCQlvNDogKCkgPT4gZ2V0VmlkZW9EYXRhCgkJCX0pOwoJCQl2YXIgbSA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvY29yZS9kaXN0L3R5cGVzL3NlcnZpY2UuanMiKSwgaCA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvY29yZS9kaXN0L3V0aWxzL3ZpZGVvRGF0YS5qcyIpLCBnID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9leHQvZGlzdC9kYXRhL3NpdGVzLmpzIiksIF8gPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2V4dC9kaXN0L2hlbHBlcnMvaW5kZXguanMiKTsKCQkJZnVuY3Rpb24gZ2V0U2VydmljZSgpIHsKCQkJCWlmIChoLiQuZXhlYyh3aW5kb3cubG9jYXRpb24uaHJlZikpIHJldHVybiBbXTsKCQkJCWxldCBkID0gd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLCBmID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZiksIGlzTWF0Y2hlcyA9IChwKSA9PiBwIGluc3RhbmNlb2YgUmVnRXhwID8gcC50ZXN0KGQpIDogdHlwZW9mIHAgPT0gInN0cmluZyIgPyBkLmluY2x1ZGVzKHApIDogdHlwZW9mIHAgPT0gImZ1bmN0aW9uIiA/IHAoZikgOiAhMTsKCQkJCXJldHVybiBnLkEuZmlsdGVyKChkKSA9PiAoQXJyYXkuaXNBcnJheShkLm1hdGNoKSA/IGQubWF0Y2guc29tZShpc01hdGNoZXMpIDogaXNNYXRjaGVzKGQubWF0Y2gpKSAmJiBkLmhvc3QgJiYgZC51cmwpOwoJCQl9CgkJCWFzeW5jIGZ1bmN0aW9uIGdldFZpZGVvSUQoZCwgZiA9IHt9KSB7CgkJCQlsZXQgcCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpLCBoID0gZC5ob3N0OwoJCQkJaWYgKE9iamVjdC5rZXlzKF8uSlcpLmluY2x1ZGVzKGgpKSB7CgkJCQkJbGV0IGQgPSBuZXcgXy5BeShmKS5nZXRIZWxwZXIoaCk7CgkJCQkJcmV0dXJuIGF3YWl0IGQuZ2V0VmlkZW9JZChwKTsKCQkJCX0KCQkJCXJldHVybiBoID09PSBtLnIuY3VzdG9tID8gcC5ocmVmIDogdm9pZCAwOwoJCQl9CgkJCWFzeW5jIGZ1bmN0aW9uIGdldFZpZGVvRGF0YShkLCBmID0ge30pIHsKCQkJCWxldCBwID0gYXdhaXQgZ2V0VmlkZW9JRChkLCBmKTsKCQkJCWlmICghcCkgdGhyb3cgbmV3IGguQShgRW50ZXJlZCB1bnN1cHBvcnRlZCBsaW5rOiAiJHtkLmhvc3R9ImApOwoJCQkJbGV0IGcgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luOwoJCQkJaWYgKFsKCQkJCQltLnIucGVlcnR1YmUsCgkJCQkJbS5yLmNvdXJzZWh1bnRlckxpa2UsCgkJCQkJbS5yLmNsb3VkZmxhcmVzdHJlYW0KCQkJCV0uaW5jbHVkZXMoZC5ob3N0KSAmJiAoZC51cmwgPSBnKSwgZC5yYXdSZXN1bHQpIHJldHVybiB7CgkJCQkJdXJsOiBwLAoJCQkJCXZpZGVvSWQ6IHAsCgkJCQkJaG9zdDogZC5ob3N0LAoJCQkJCWR1cmF0aW9uOiB2b2lkIDAKCQkJCX07CgkJCQlpZiAoIWQubmVlZEV4dHJhRGF0YSkgcmV0dXJuIHsKCQkJCQl1cmw6IGQudXJsICsgcCwKCQkJCQl2aWRlb0lkOiBwLAoJCQkJCWhvc3Q6IGQuaG9zdCwKCQkJCQlkdXJhdGlvbjogdm9pZCAwCgkJCQl9OwoJCQkJbGV0IHYgPSBuZXcgXy5BeSh7CgkJCQkJLi4uZiwKCQkJCQlzZXJ2aWNlOiBkLAoJCQkJCW9yaWdpbjogZwoJCQkJfSkuZ2V0SGVscGVyKGQuaG9zdCksIGIgPSBhd2FpdCB2LmdldFZpZGVvRGF0YShwKTsKCQkJCWlmICghYikgdGhyb3cgbmV3IGguQShgRmFpbGVkIHRvIGdldCB2aWRlbyByYXcgdXJsIGZvciAke2QuaG9zdH1gKTsKCQkJCXJldHVybiB7CgkJCQkJLi4uYiwKCQkJCQl2aWRlb0lkOiBwLAoJCQkJCWhvc3Q6IGQuaG9zdAoJCQkJfTsKCQkJfQoJCX0sCgkJIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvc2hhcmVkL2Rpc3QvZGF0YS9hbHRlcm5hdGl2ZVVybHMuanMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuZChmLCB7CgkJCQlKbzogKCkgPT4gaCwKCQkJCU15OiAoKSA9PiBiLAoJCQkJVFA6ICgpID0+IGcsCgkJCQlYbTogKCkgPT4gbSwKCQkJCWZWOiAoKSA9PiBfLAoJCQkJcjogKCkgPT4gQywKCQkJCXN4OiAoKSA9PiB2CgkJCX0pOwoJCQlsZXQgbSA9IFsKCQkJCSJ5ZXd0dS5iZSIsCgkJCQkieXQuYXJ0ZW1pc2xlbmEuZXUiLAoJCQkJImludmlkaW91cy5mbG9raW5ldC50byIsCgkJCQkiaXYubWVsbWFjLnNwYWNlIiwKCQkJCSJpbnYubmFkZWtvLm5ldCIsCgkJCQkiaW52LnR1eC5waXp6YSIsCgkJCQkiaW52aWRpb3VzLnByaXZhdGUuY29mZmVlIiwKCQkJCSJ5dC5kcmduei5jbHViIiwKCQkJCSJ2aWQucHVmZnlhbi51cyIsCgkJCQkiaW52aWRpb3VzLmRodXNjaC5kZSIKCQkJXSwgaCA9ICJwaXBlZC52aWRlbyxwaXBlZC50b2tobWkueHl6LHBpcGVkLm1vb21vby5tZSxwaXBlZC5zeW5jcHVuZGl0LmlvLHBpcGVkLm1oYS5maSx3YXRjaC53aGF0ZXZlci5zb2NpYWwscGlwZWQuZ2FydWRhbGludXgub3JnLGVmeS5waXBlZC5wYWdlcy5kZXYsd2F0Y2gubGVwdG9ucy54eXoscGlwZWQubHVuYXIuaWN1LHl0LmRjMDkucnUscGlwZWQubWludC5sZ2J0LGlsLmF4LHBpcGVkLnByaXZhY3kuY29tLmRlLHBpcGVkLmVzbWFpbGVsYm9iLnh5eixwaXBlZC5wcm9qZWN0c2VnZmF1Lmx0LHBpcGVkLmluLnByb2plY3RzZWdmYXUubHQscGlwZWQudXMucHJvamVjdHNlZ2ZhdS5sdCxwaXBlZC5wcml2YWN5ZGV2Lm5ldCxwaXBlZC5wYWx2ZWx1bnRhcmpvYWphLmV1LHBpcGVkLnNtbnouZGUscGlwZWQuYWRtaW5mb3JnZS5kZSxwaXBlZC5xZGkuZmkscGlwZWQuaG9zdHV4Lm5ldCxwaXBlZC5jaGF1dmV0LnBybyxwaXBlZC5qb3RvbWEuZGUscGlwZWQucGZjZC5tZSxwaXBlZC5mcm9udGVuZGZyaWVuZGx5Lnh5eiIuc3BsaXQoIiwiKSwgZyA9IFsKCQkJCSJwcm94aXRvay5wYWJsb2ZlcnJlaXJvLmVzIiwKCQkJCSJwcm94aXRvay5wdXNzdGhlY2F0Lm9yZyIsCgkJCQkidG9rLmhhYmVkaWVlaC5yZSIsCgkJCQkicHJveGl0b2suZXNtYWlsZWxib2IueHl6IiwKCQkJCSJwcm94aXRvay5wcml2YWN5ZGV2Lm5ldCIsCgkJCQkidG9rLmFydGVtaXNsZW5hLmV1IiwKCQkJCSJ0b2suYWRtaW5mb3JnZS5kZSIsCgkJCQkidHQudmVybi5jYyIsCgkJCQkiY3JpbmdlLndoYXRldmVyLnNvY2lhbCIsCgkJCQkicHJveGl0b2subHVuYXIuaWN1IiwKCQkJCSJwcm94aXRvay5wcml2YWN5LmNvbS5kZSIKCQkJXSwgXyA9IFsKCQkJCSJwZWVydHViZS4xMzEyLm1lZGlhIiwKCQkJCSJ0dWJlLnNoYW50aS5jYWZlIiwKCQkJCSJiZWUtdHViZS5mciIsCgkJCQkidmlkZW8uc2FkbWluLmlvIiwKCQkJCSJkYWxlay56b25lIiwKCQkJCSJyZXZpZXcucGVlcnR1YmUuYml6IiwKCQkJCSJwZWVydmlkZW8uY2x1YiIsCgkJCQkidHViZS5sYS1kaW5hLm5ldCIsCgkJCQkicGVlcnR1YmUudG1wLnJjcC50ZiIsCgkJCQkicGVlcnR1YmUuc3UiLAoJCQkJInZpZGVvLmJsZW5kZXIub3JnIiwKCQkJCSJ2aWRlb3MudmlvcnNhbi5jb20iLAoJCQkJInR1YmUtc2NpZW5jZXMtdGVjaG5vbG9naWVzLmFwcHMuZWR1Y2F0aW9uLmZyIiwKCQkJCSJ0dWJlLW51bWVyaXF1ZS1lZHVjYXRpZi5hcHBzLmVkdWNhdGlvbi5mciIsCgkJCQkidHViZS1hcnRzLWxldHRyZXMtc2NpZW5jZXMtaHVtYWluZXMuYXBwcy5lZHVjYXRpb24uZnIiLAoJCQkJImJlZXRvb25zLnR2IiwKCQkJCSJjb21pY3MucGVlcnR1YmUuYml6IiwKCQkJCSJtYWtlcnR1YmUubmV0IgoJCQldLCB2ID0gWwoJCQkJInBva2V0dWJlLmZ1biIsCgkJCQkicHQuc3Vkb3ZhbmlsbGEub3JnIiwKCQkJCSJwb2tlLmdndHlsZXIuZGV2IiwKCQkJCSJwb2tlLnVrMi5saXR0bGVrYWkuY28udWsiLAoJCQkJInBva2UuYmxhaGFpLmdheSIKCQkJXSwgYiA9IFsicmlja3R1YmUucnUiXSwgeCA9IG51bGwsIEMgPSBbImNvdXJzZWh1bnRlci5uZXQiLCAiY291cnNldHJhaW4ubmV0Il07CgkJfSwKCQkiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9zaGFyZWQvZGlzdC9kYXRhL2NvbmZpZy5qcyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5kKGYsIHsgQTogKCkgPT4gbSB9KTsKCQkJbGV0IG0gPSB7CgkJCQlob3N0OiAiYXBpLmJyb3dzZXIueWFuZGV4LnJ1IiwKCQkJCWhvc3RWT1Q6ICJ2b3QudG9pbC5jYy92MSIsCgkJCQlob3N0V29ya2VyOiAidm90LXdvcmtlci50b2lsLmNjIiwKCQkJCW1lZGlhUHJveHk6ICJtZWRpYS1wcm94eS50b2lsLmNjIiwKCQkJCXVzZXJBZ2VudDogIk1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMzQuMC4wLjAgWWFCcm93c2VyLzI1LjQuMC4wIFNhZmFyaS81MzcuMzYiLAoJCQkJY29tcG9uZW50VmVyc2lvbjogIjI1LjYuMC4yMjU5IiwKCQkJCWhtYWM6ICJidDh4SDNWT2xiNG1xZjBucUFpYm5ET29pUGxYc2lzZiIsCgkJCQlkZWZhdWx0RHVyYXRpb246IDM0MywKCQkJCW1pbkNodW5rU2l6ZTogNTI5NTMwOCwKCQkJCWxvZ2dlckxldmVsOiAxLAoJCQkJdmVyc2lvbjogIjIuNC4xMiIKCQkJfTsKCQl9LAoJCSIuL25vZGVfbW9kdWxlcy9Adm90LmpzL3NoYXJlZC9kaXN0L2RhdGEvY29uc3RzLmpzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmQoZiwgewoJCQkJRUc6ICgpID0+IGcsCgkJCQlYaDogKCkgPT4gaCwKCQkJCXhtOiAoKSA9PiBtCgkJCX0pOwoJCQlsZXQgbSA9IFsKCQkJCSJhdXRvIiwKCQkJCSJydSIsCgkJCQkiZW4iLAoJCQkJInpoIiwKCQkJCSJrbyIsCgkJCQkibHQiLAoJCQkJImx2IiwKCQkJCSJhciIsCgkJCQkiZnIiLAoJCQkJIml0IiwKCQkJCSJlcyIsCgkJCQkiZGUiLAoJCQkJImphIgoJCQldLCBoID0gWwoJCQkJInJ1IiwKCQkJCSJlbiIsCgkJCQkia2siCgkJCV0sIGcgPSBbCgkJCQkic3J0IiwKCQkJCSJ2dHQiLAoJCQkJImpzb24iCgkJCV07CgkJfSwKCQkiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9zaGFyZWQvZGlzdC9pbmRleC5qcyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5kKGYsIHsgJFc6ICgpID0+IG0uQSB9KTsKCQkJdmFyIG0gPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL3NoYXJlZC9kaXN0L2RhdGEvY29uZmlnLmpzIiksIGggPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL3NoYXJlZC9kaXN0L3Byb3Rvcy95YW5kZXguanMiKSwgZyA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvc2hhcmVkL2Rpc3QvdXRpbHMvbG9nZ2VyLmpzIiksIF8gPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL3NoYXJlZC9kaXN0L3V0aWxzL3V0aWxzLmpzIiksIHYgPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL3NoYXJlZC9kaXN0L3R5cGVzL2xvZ2dlci5qcyIpLCBiOwoJCQkoZnVuY3Rpb24oZCkgewoJCQkJZC5DaGFubmVsID0gIkNoYW5uZWwiLCBkLlZpZGVvID0gIlZpZGVvIjsKCQkJfSkoYiB8fD0ge30pOwoJCX0sCgkJIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvc2hhcmVkL2Rpc3QvcHJvdG9zL3lhbmRleC5qcyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5kKGYsIHsKCQkJCXE4OiAoKSA9PiBFLAoJCQkJa086ICgpID0+ICQsCgkJCQlYdjogKCkgPT4gZWUsCgkJCQluXzogKCkgPT4gdGUsCgkJCQlQNDogKCkgPT4gWCwKCQkJCUxEOiAoKSA9PiBaLAoJCQkJWTc6ICgpID0+IHEsCgkJCQlXaTogKCkgPT4gSiwKCQkJCVl4OiAoKSA9PiBGLAoJCQkJWks6ICgpID0+IFUsCgkJCQl5eTogKCkgPT4gTywKCQkJCUFKOiAoKSA9PiBBLAoJCQkJbHM6ICgpID0+IG5lLAoJCQkJQnY6ICgpID0+IHJlCgkJCX0pOwoJCQlmdW5jdGlvbiB2YXJpbnQ2NHJlYWQoKSB7CgkJCQlsZXQgZCA9IDAsIGYgPSAwOwoJCQkJZm9yIChsZXQgcCA9IDA7IHAgPCAyODsgcCArPSA3KSB7CgkJCQkJbGV0IG0gPSB0aGlzLmJ1Zlt0aGlzLnBvcysrXTsKCQkJCQlpZiAoZCB8PSAobSAmIDEyNykgPDwgcCwgIShtICYgMTI4KSkgcmV0dXJuIHRoaXMuYXNzZXJ0Qm91bmRzKCksIFtkLCBmXTsKCQkJCX0KCQkJCWxldCBwID0gdGhpcy5idWZbdGhpcy5wb3MrK107CgkJCQlpZiAoZCB8PSAocCAmIDE1KSA8PCAyOCwgZiA9IChwICYgMTEyKSA+PiA0LCAhKHAgJiAxMjgpKSByZXR1cm4gdGhpcy5hc3NlcnRCb3VuZHMoKSwgW2QsIGZdOwoJCQkJZm9yIChsZXQgcCA9IDM7IHAgPD0gMzE7IHAgKz0gNykgewoJCQkJCWxldCBtID0gdGhpcy5idWZbdGhpcy5wb3MrK107CgkJCQkJaWYgKGYgfD0gKG0gJiAxMjcpIDw8IHAsICEobSAmIDEyOCkpIHJldHVybiB0aGlzLmFzc2VydEJvdW5kcygpLCBbZCwgZl07CgkJCQl9CgkJCQl0aHJvdyBFcnJvcigiaW52YWxpZCB2YXJpbnQiKTsKCQkJfQoJCQlmdW5jdGlvbiB2YXJpbnQ2NHdyaXRlKGQsIGYsIHApIHsKCQkJCWZvciAobGV0IG0gPSAwOyBtIDwgMjg7IG0gKz0gNykgewoJCQkJCWxldCBoID0gZCA+Pj4gbSwgZyA9ICEoIShoID4+PiA3KSAmJiBmID09IDApLCBfID0gKGcgPyBoIHwgMTI4IDogaCkgJiAyNTU7CgkJCQkJaWYgKHAucHVzaChfKSwgIWcpIHJldHVybjsKCQkJCX0KCQkJCWxldCBtID0gZCA+Pj4gMjggJiAxNSB8IChmICYgNykgPDwgNCwgaCA9ICEhKGYgPj4gMyk7CgkJCQlpZiAocC5wdXNoKChoID8gbSB8IDEyOCA6IG0pICYgMjU1KSwgaCkgewoJCQkJCWZvciAobGV0IGQgPSAzOyBkIDwgMzE7IGQgKz0gNykgewoJCQkJCQlsZXQgbSA9IGYgPj4+IGQsIGggPSAhIShtID4+PiA3KSwgZyA9IChoID8gbSB8IDEyOCA6IG0pICYgMjU1OwoJCQkJCQlpZiAocC5wdXNoKGcpLCAhaCkgcmV0dXJuOwoJCQkJCX0KCQkJCQlwLnB1c2goZiA+Pj4gMzEgJiAxKTsKCQkJCX0KCQkJfQoJCQlsZXQgbSA9IDQyOTQ5NjcyOTY7CgkJCWZ1bmN0aW9uIGludDY0RnJvbVN0cmluZyhkKSB7CgkJCQlsZXQgZiA9IGRbMF0gPT09ICItIjsKCQkJCWYgJiYgKGQgPSBkLnNsaWNlKDEpKTsKCQkJCWxldCBwID0gMWU2LCBoID0gMCwgZyA9IDA7CgkJCQlmdW5jdGlvbiBhZGQxZTZkaWdpdChmLCBfKSB7CgkJCQkJbGV0IHYgPSBOdW1iZXIoZC5zbGljZShmLCBfKSk7CgkJCQkJZyAqPSBwLCBoID0gaCAqIHAgKyB2LCBoID49IG0gJiYgKGcgKz0gaCAvIG0gfCAwLCBoICU9IG0pOwoJCQkJfQoJCQkJcmV0dXJuIGFkZDFlNmRpZ2l0KC0yNCwgLTE4KSwgYWRkMWU2ZGlnaXQoLTE4LCAtMTIpLCBhZGQxZTZkaWdpdCgtMTIsIC02KSwgYWRkMWU2ZGlnaXQoLTYpLCBmID8gbmVnYXRlKGgsIGcpIDogbmV3Qml0cyhoLCBnKTsKCQkJfQoJCQlmdW5jdGlvbiBpbnQ2NFRvU3RyaW5nKGQsIGYpIHsKCQkJCWxldCBwID0gbmV3Qml0cyhkLCBmKSwgbSA9IHAuaGkgJiAyMTQ3NDgzNjQ4OwoJCQkJbSAmJiAocCA9IG5lZ2F0ZShwLmxvLCBwLmhpKSk7CgkJCQlsZXQgaCA9IHVJbnQ2NFRvU3RyaW5nKHAubG8sIHAuaGkpOwoJCQkJcmV0dXJuIG0gPyAiLSIgKyBoIDogaDsKCQkJfQoJCQlmdW5jdGlvbiB1SW50NjRUb1N0cmluZyhkLCBmKSB7CgkJCQlpZiAoe2xvOiBkLCBoaTogZn0gPSB0b1Vuc2lnbmVkKGQsIGYpLCBmIDw9IDIwOTcxNTEpIHJldHVybiBTdHJpbmcobSAqIGYgKyBkKTsKCQkJCWxldCBwID0gZCAmIDE2Nzc3MjE1LCBoID0gKGQgPj4+IDI0IHwgZiA8PCA4KSAmIDE2Nzc3MjE1LCBnID0gZiA+PiAxNiAmIDY1NTM1LCBfID0gcCArIGggKiA2Nzc3MjE2ICsgZyAqIDY3MTA2NTYsIHYgPSBoICsgZyAqIDgxNDc0OTcsIGIgPSBnICogMiwgeCA9IDFlNzsKCQkJCXJldHVybiBfID49IHggJiYgKHYgKz0gTWF0aC5mbG9vcihfIC8geCksIF8gJT0geCksIHYgPj0geCAmJiAoYiArPSBNYXRoLmZsb29yKHYgLyB4KSwgdiAlPSB4KSwgYi50b1N0cmluZygpICsgZGVjaW1hbEZyb20xZTdXaXRoTGVhZGluZ1plcm9zKHYpICsgZGVjaW1hbEZyb20xZTdXaXRoTGVhZGluZ1plcm9zKF8pOwoJCQl9CgkJCWZ1bmN0aW9uIHRvVW5zaWduZWQoZCwgZikgewoJCQkJcmV0dXJuIHsKCQkJCQlsbzogZCA+Pj4gMCwKCQkJCQloaTogZiA+Pj4gMAoJCQkJfTsKCQkJfQoJCQlmdW5jdGlvbiBuZXdCaXRzKGQsIGYpIHsKCQkJCXJldHVybiB7CgkJCQkJbG86IGQgfCAwLAoJCQkJCWhpOiBmIHwgMAoJCQkJfTsKCQkJfQoJCQlmdW5jdGlvbiBuZWdhdGUoZCwgZikgewoJCQkJcmV0dXJuIGYgPSB+ZiwgZCA/IGQgPSB+ZCArIDEgOiBmICs9IDEsIG5ld0JpdHMoZCwgZik7CgkJCX0KCQkJbGV0IGRlY2ltYWxGcm9tMWU3V2l0aExlYWRpbmdaZXJvcyA9IChkKSA9PiB7CgkJCQlsZXQgZiA9IFN0cmluZyhkKTsKCQkJCXJldHVybiAiMDAwMDAwMCIuc2xpY2UoZi5sZW5ndGgpICsgZjsKCQkJfTsKCQkJZnVuY3Rpb24gdmFyaW50MzJ3cml0ZShkLCBmKSB7CgkJCQlpZiAoZCA+PSAwKSB7CgkJCQkJZm9yICg7IGQgPiAxMjc7KSBmLnB1c2goZCAmIDEyNyB8IDEyOCksIGQgPj4+PSA3OwoJCQkJCWYucHVzaChkKTsKCQkJCX0gZWxzZSB7CgkJCQkJZm9yIChsZXQgcCA9IDA7IHAgPCA5OyBwKyspIGYucHVzaChkICYgMTI3IHwgMTI4KSwgZCA+Pj0gNzsKCQkJCQlmLnB1c2goMSk7CgkJCQl9CgkJCX0KCQkJZnVuY3Rpb24gdmFyaW50MzJyZWFkKCkgewoJCQkJbGV0IGQgPSB0aGlzLmJ1Zlt0aGlzLnBvcysrXSwgZiA9IGQgJiAxMjc7CgkJCQlpZiAoIShkICYgMTI4KSB8fCAoZCA9IHRoaXMuYnVmW3RoaXMucG9zKytdLCBmIHw9IChkICYgMTI3KSA8PCA3LCAhKGQgJiAxMjgpKSB8fCAoZCA9IHRoaXMuYnVmW3RoaXMucG9zKytdLCBmIHw9IChkICYgMTI3KSA8PCAxNCwgIShkICYgMTI4KSkgfHwgKGQgPSB0aGlzLmJ1Zlt0aGlzLnBvcysrXSwgZiB8PSAoZCAmIDEyNykgPDwgMjEsICEoZCAmIDEyOCkpKSByZXR1cm4gdGhpcy5hc3NlcnRCb3VuZHMoKSwgZjsKCQkJCWQgPSB0aGlzLmJ1Zlt0aGlzLnBvcysrXSwgZiB8PSAoZCAmIDE1KSA8PCAyODsKCQkJCWZvciAobGV0IGYgPSA1OyBkICYgMTI4ICYmIGYgPCAxMDsgZisrKSBkID0gdGhpcy5idWZbdGhpcy5wb3MrK107CgkJCQlpZiAoZCAmIDEyOCkgdGhyb3cgRXJyb3IoImludmFsaWQgdmFyaW50Iik7CgkJCQlyZXR1cm4gdGhpcy5hc3NlcnRCb3VuZHMoKSwgZiA+Pj4gMDsKCQkJfQoJCQlsZXQgaCA9IG1ha2VJbnQ2NFN1cHBvcnQoKTsKCQkJZnVuY3Rpb24gbWFrZUludDY0U3VwcG9ydCgpIHsKCQkJCWxldCBkID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig4KSksIGYgPSB0eXBlb2YgQmlnSW50ID09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIGQuZ2V0QmlnSW50NjQgPT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgZC5nZXRCaWdVaW50NjQgPT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgZC5zZXRCaWdJbnQ2NCA9PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBkLnNldEJpZ1VpbnQ2NCA9PSAiZnVuY3Rpb24iICYmICh0eXBlb2YgcHJvY2VzcyAhPSAib2JqZWN0IiB8fCB0eXBlb2YgcHJvY2Vzcy5lbnYgIT0gIm9iamVjdCIgfHwgcHJvY2Vzcy5lbnYuQlVGX0JJR0lOVF9ESVNBQkxFICE9PSAiMSIpOwoJCQkJaWYgKGYpIHsKCQkJCQlsZXQgZiA9IEJpZ0ludCgiLTkyMjMzNzIwMzY4NTQ3NzU4MDgiKSwgcCA9IEJpZ0ludCgiOTIyMzM3MjAzNjg1NDc3NTgwNyIpLCBtID0gQmlnSW50KCIwIiksIGggPSBCaWdJbnQoIjE4NDQ2NzQ0MDczNzA5NTUxNjE1Iik7CgkJCQkJcmV0dXJuIHsKCQkJCQkJemVybzogQmlnSW50KDApLAoJCQkJCQlzdXBwb3J0ZWQ6ICEwLAoJCQkJCQlwYXJzZShkKSB7CgkJCQkJCQlsZXQgbSA9IHR5cGVvZiBkID09ICJiaWdpbnQiID8gZCA6IEJpZ0ludChkKTsKCQkJCQkJCWlmIChtID4gcCB8fCBtIDwgZikgdGhyb3cgRXJyb3IoYGludmFsaWQgaW50NjQ6ICR7ZH1gKTsKCQkJCQkJCXJldHVybiBtOwoJCQkJCQl9LAoJCQkJCQl1UGFyc2UoZCkgewoJCQkJCQkJbGV0IGYgPSB0eXBlb2YgZCA9PSAiYmlnaW50IiA/IGQgOiBCaWdJbnQoZCk7CgkJCQkJCQlpZiAoZiA+IGggfHwgZiA8IG0pIHRocm93IEVycm9yKGBpbnZhbGlkIHVpbnQ2NDogJHtkfWApOwoJCQkJCQkJcmV0dXJuIGY7CgkJCQkJCX0sCgkJCQkJCWVuYyhmKSB7CgkJCQkJCQlyZXR1cm4gZC5zZXRCaWdJbnQ2NCgwLCB0aGlzLnBhcnNlKGYpLCAhMCksIHsKCQkJCQkJCQlsbzogZC5nZXRJbnQzMigwLCAhMCksCgkJCQkJCQkJaGk6IGQuZ2V0SW50MzIoNCwgITApCgkJCQkJCQl9OwoJCQkJCQl9LAoJCQkJCQl1RW5jKGYpIHsKCQkJCQkJCXJldHVybiBkLnNldEJpZ0ludDY0KDAsIHRoaXMudVBhcnNlKGYpLCAhMCksIHsKCQkJCQkJCQlsbzogZC5nZXRJbnQzMigwLCAhMCksCgkJCQkJCQkJaGk6IGQuZ2V0SW50MzIoNCwgITApCgkJCQkJCQl9OwoJCQkJCQl9LAoJCQkJCQlkZWMoZiwgcCkgewoJCQkJCQkJcmV0dXJuIGQuc2V0SW50MzIoMCwgZiwgITApLCBkLnNldEludDMyKDQsIHAsICEwKSwgZC5nZXRCaWdJbnQ2NCgwLCAhMCk7CgkJCQkJCX0sCgkJCQkJCXVEZWMoZiwgcCkgewoJCQkJCQkJcmV0dXJuIGQuc2V0SW50MzIoMCwgZiwgITApLCBkLnNldEludDMyKDQsIHAsICEwKSwgZC5nZXRCaWdVaW50NjQoMCwgITApOwoJCQkJCQl9CgkJCQkJfTsKCQkJCX0KCQkJCXJldHVybiB7CgkJCQkJemVybzogIjAiLAoJCQkJCXN1cHBvcnRlZDogITEsCgkJCQkJcGFyc2UoZCkgewoJCQkJCQlyZXR1cm4gdHlwZW9mIGQgIT0gInN0cmluZyIgJiYgKGQgPSBkLnRvU3RyaW5nKCkpLCBhc3NlcnRJbnQ2NFN0cmluZyhkKSwgZDsKCQkJCQl9LAoJCQkJCXVQYXJzZShkKSB7CgkJCQkJCXJldHVybiB0eXBlb2YgZCAhPSAic3RyaW5nIiAmJiAoZCA9IGQudG9TdHJpbmcoKSksIGFzc2VydFVJbnQ2NFN0cmluZyhkKSwgZDsKCQkJCQl9LAoJCQkJCWVuYyhkKSB7CgkJCQkJCXJldHVybiB0eXBlb2YgZCAhPSAic3RyaW5nIiAmJiAoZCA9IGQudG9TdHJpbmcoKSksIGFzc2VydEludDY0U3RyaW5nKGQpLCBpbnQ2NEZyb21TdHJpbmcoZCk7CgkJCQkJfSwKCQkJCQl1RW5jKGQpIHsKCQkJCQkJcmV0dXJuIHR5cGVvZiBkICE9ICJzdHJpbmciICYmIChkID0gZC50b1N0cmluZygpKSwgYXNzZXJ0VUludDY0U3RyaW5nKGQpLCBpbnQ2NEZyb21TdHJpbmcoZCk7CgkJCQkJfSwKCQkJCQlkZWMoZCwgZikgewoJCQkJCQlyZXR1cm4gaW50NjRUb1N0cmluZyhkLCBmKTsKCQkJCQl9LAoJCQkJCXVEZWMoZCwgZikgewoJCQkJCQlyZXR1cm4gdUludDY0VG9TdHJpbmcoZCwgZik7CgkJCQkJfQoJCQkJfTsKCQkJfQoJCQlmdW5jdGlvbiBhc3NlcnRJbnQ2NFN0cmluZyhkKSB7CgkJCQlpZiAoIS9eLT9bMC05XSskLy50ZXN0KGQpKSB0aHJvdyBFcnJvcigiaW52YWxpZCBpbnQ2NDogIiArIGQpOwoJCQl9CgkJCWZ1bmN0aW9uIGFzc2VydFVJbnQ2NFN0cmluZyhkKSB7CgkJCQlpZiAoIS9eWzAtOV0rJC8udGVzdChkKSkgdGhyb3cgRXJyb3IoImludmFsaWQgdWludDY0OiAiICsgZCk7CgkJCX0KCQkJbGV0IGcgPSBTeW1ib2wuZm9yKCJAYnVmYnVpbGQvcHJvdG9idWYvdGV4dC1lbmNvZGluZyIpOwoJCQlmdW5jdGlvbiBjb25maWd1cmVUZXh0RW5jb2RpbmcoZCkgewoJCQkJZ2xvYmFsVGhpc1tnXSA9IGQ7CgkJCX0KCQkJZnVuY3Rpb24gZ2V0VGV4dEVuY29kaW5nKCkgewoJCQkJaWYgKGdsb2JhbFRoaXNbZ10gPT0gbnVsbCkgewoJCQkJCWxldCBkID0gbmV3IGdsb2JhbFRoaXMuVGV4dEVuY29kZXIoKSwgZiA9IG5ldyBnbG9iYWxUaGlzLlRleHREZWNvZGVyKCk7CgkJCQkJZ2xvYmFsVGhpc1tnXSA9IHsKCQkJCQkJZW5jb2RlVXRmOChmKSB7CgkJCQkJCQlyZXR1cm4gZC5lbmNvZGUoZik7CgkJCQkJCX0sCgkJCQkJCWRlY29kZVV0ZjgoZCkgewoJCQkJCQkJcmV0dXJuIGYuZGVjb2RlKGQpOwoJCQkJCQl9LAoJCQkJCQljaGVja1V0ZjgoZCkgewoJCQkJCQkJdHJ5IHsKCQkJCQkJCQlyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGQpLCAhMDsKCQkJCQkJCX0gY2F0Y2ggewoJCQkJCQkJCXJldHVybiAhMTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX07CgkJCQl9CgkJCQlyZXR1cm4gZ2xvYmFsVGhpc1tnXTsKCQkJfQoJCQl2YXIgXzsKCQkJKGZ1bmN0aW9uKGQpIHsKCQkJCWRbZC5WYXJpbnQgPSAwXSA9ICJWYXJpbnQiLCBkW2QuQml0NjQgPSAxXSA9ICJCaXQ2NCIsIGRbZC5MZW5ndGhEZWxpbWl0ZWQgPSAyXSA9ICJMZW5ndGhEZWxpbWl0ZWQiLCBkW2QuU3RhcnRHcm91cCA9IDNdID0gIlN0YXJ0R3JvdXAiLCBkW2QuRW5kR3JvdXAgPSA0XSA9ICJFbmRHcm91cCIsIGRbZC5CaXQzMiA9IDVdID0gIkJpdDMyIjsKCQkJfSkoXyB8fD0ge30pOwoJCQlsZXQgdiA9IDM0MDI4MjM0NjYzODUyODg2ZTIyLCBiID0gLTM0MDI4MjM0NjYzODUyODg2ZTIyLCB4ID0gNDI5NDk2NzI5NSwgQyA9IDIxNDc0ODM2NDcsIHcgPSAtMjE0NzQ4MzY0ODsKCQkJY2xhc3MgQmluYXJ5V3JpdGVyIHsKCQkJCWNvbnN0cnVjdG9yKGQgPSBnZXRUZXh0RW5jb2RpbmcoKS5lbmNvZGVVdGY4KSB7CgkJCQkJdGhpcy5lbmNvZGVVdGY4ID0gZCwgdGhpcy5zdGFjayA9IFtdLCB0aGlzLmNodW5rcyA9IFtdLCB0aGlzLmJ1ZiA9IFtdOwoJCQkJfQoJCQkJZmluaXNoKCkgewoJCQkJCXRoaXMuYnVmLmxlbmd0aCAmJiAodGhpcy5jaHVua3MucHVzaChuZXcgVWludDhBcnJheSh0aGlzLmJ1ZikpLCB0aGlzLmJ1ZiA9IFtdKTsKCQkJCQlsZXQgZCA9IDA7CgkJCQkJZm9yIChsZXQgZiA9IDA7IGYgPCB0aGlzLmNodW5rcy5sZW5ndGg7IGYrKykgZCArPSB0aGlzLmNodW5rc1tmXS5sZW5ndGg7CgkJCQkJbGV0IGYgPSBuZXcgVWludDhBcnJheShkKSwgcCA9IDA7CgkJCQkJZm9yIChsZXQgZCA9IDA7IGQgPCB0aGlzLmNodW5rcy5sZW5ndGg7IGQrKykgZi5zZXQodGhpcy5jaHVua3NbZF0sIHApLCBwICs9IHRoaXMuY2h1bmtzW2RdLmxlbmd0aDsKCQkJCQlyZXR1cm4gdGhpcy5jaHVua3MgPSBbXSwgZjsKCQkJCX0KCQkJCWZvcmsoKSB7CgkJCQkJcmV0dXJuIHRoaXMuc3RhY2sucHVzaCh7CgkJCQkJCWNodW5rczogdGhpcy5jaHVua3MsCgkJCQkJCWJ1ZjogdGhpcy5idWYKCQkJCQl9KSwgdGhpcy5jaHVua3MgPSBbXSwgdGhpcy5idWYgPSBbXSwgdGhpczsKCQkJCX0KCQkJCWpvaW4oKSB7CgkJCQkJbGV0IGQgPSB0aGlzLmZpbmlzaCgpLCBmID0gdGhpcy5zdGFjay5wb3AoKTsKCQkJCQlpZiAoIWYpIHRocm93IEVycm9yKCJpbnZhbGlkIHN0YXRlLCBmb3JrIHN0YWNrIGVtcHR5Iik7CgkJCQkJcmV0dXJuIHRoaXMuY2h1bmtzID0gZi5jaHVua3MsIHRoaXMuYnVmID0gZi5idWYsIHRoaXMudWludDMyKGQuYnl0ZUxlbmd0aCksIHRoaXMucmF3KGQpOwoJCQkJfQoJCQkJdGFnKGQsIGYpIHsKCQkJCQlyZXR1cm4gdGhpcy51aW50MzIoKGQgPDwgMyB8IGYpID4+PiAwKTsKCQkJCX0KCQkJCXJhdyhkKSB7CgkJCQkJcmV0dXJuIHRoaXMuYnVmLmxlbmd0aCAmJiAodGhpcy5jaHVua3MucHVzaChuZXcgVWludDhBcnJheSh0aGlzLmJ1ZikpLCB0aGlzLmJ1ZiA9IFtdKSwgdGhpcy5jaHVua3MucHVzaChkKSwgdGhpczsKCQkJCX0KCQkJCXVpbnQzMihkKSB7CgkJCQkJZm9yIChhc3NlcnRVSW50MzIoZCk7IGQgPiAxMjc7KSB0aGlzLmJ1Zi5wdXNoKGQgJiAxMjcgfCAxMjgpLCBkID4+Pj0gNzsKCQkJCQlyZXR1cm4gdGhpcy5idWYucHVzaChkKSwgdGhpczsKCQkJCX0KCQkJCWludDMyKGQpIHsKCQkJCQlyZXR1cm4gYXNzZXJ0SW50MzIoZCksIHZhcmludDMyd3JpdGUoZCwgdGhpcy5idWYpLCB0aGlzOwoJCQkJfQoJCQkJYm9vbChkKSB7CgkJCQkJcmV0dXJuIHRoaXMuYnVmLnB1c2goZCA/IDEgOiAwKSwgdGhpczsKCQkJCX0KCQkJCWJ5dGVzKGQpIHsKCQkJCQlyZXR1cm4gdGhpcy51aW50MzIoZC5ieXRlTGVuZ3RoKSwgdGhpcy5yYXcoZCk7CgkJCQl9CgkJCQlzdHJpbmcoZCkgewoJCQkJCWxldCBmID0gdGhpcy5lbmNvZGVVdGY4KGQpOwoJCQkJCXJldHVybiB0aGlzLnVpbnQzMihmLmJ5dGVMZW5ndGgpLCB0aGlzLnJhdyhmKTsKCQkJCX0KCQkJCWZsb2F0KGQpIHsKCQkJCQlhc3NlcnRGbG9hdDMyKGQpOwoJCQkJCWxldCBmID0gbmV3IFVpbnQ4QXJyYXkoNCk7CgkJCQkJcmV0dXJuIG5ldyBEYXRhVmlldyhmLmJ1ZmZlcikuc2V0RmxvYXQzMigwLCBkLCAhMCksIHRoaXMucmF3KGYpOwoJCQkJfQoJCQkJZG91YmxlKGQpIHsKCQkJCQlsZXQgZiA9IG5ldyBVaW50OEFycmF5KDgpOwoJCQkJCXJldHVybiBuZXcgRGF0YVZpZXcoZi5idWZmZXIpLnNldEZsb2F0NjQoMCwgZCwgITApLCB0aGlzLnJhdyhmKTsKCQkJCX0KCQkJCWZpeGVkMzIoZCkgewoJCQkJCWFzc2VydFVJbnQzMihkKTsKCQkJCQlsZXQgZiA9IG5ldyBVaW50OEFycmF5KDQpOwoJCQkJCXJldHVybiBuZXcgRGF0YVZpZXcoZi5idWZmZXIpLnNldFVpbnQzMigwLCBkLCAhMCksIHRoaXMucmF3KGYpOwoJCQkJfQoJCQkJc2ZpeGVkMzIoZCkgewoJCQkJCWFzc2VydEludDMyKGQpOwoJCQkJCWxldCBmID0gbmV3IFVpbnQ4QXJyYXkoNCk7CgkJCQkJcmV0dXJuIG5ldyBEYXRhVmlldyhmLmJ1ZmZlcikuc2V0SW50MzIoMCwgZCwgITApLCB0aGlzLnJhdyhmKTsKCQkJCX0KCQkJCXNpbnQzMihkKSB7CgkJCQkJcmV0dXJuIGFzc2VydEludDMyKGQpLCBkID0gKGQgPDwgMSBeIGQgPj4gMzEpID4+PiAwLCB2YXJpbnQzMndyaXRlKGQsIHRoaXMuYnVmKSwgdGhpczsKCQkJCX0KCQkJCXNmaXhlZDY0KGQpIHsKCQkJCQlsZXQgZiA9IG5ldyBVaW50OEFycmF5KDgpLCBwID0gbmV3IERhdGFWaWV3KGYuYnVmZmVyKSwgbSA9IGguZW5jKGQpOwoJCQkJCXJldHVybiBwLnNldEludDMyKDAsIG0ubG8sICEwKSwgcC5zZXRJbnQzMig0LCBtLmhpLCAhMCksIHRoaXMucmF3KGYpOwoJCQkJfQoJCQkJZml4ZWQ2NChkKSB7CgkJCQkJbGV0IGYgPSBuZXcgVWludDhBcnJheSg4KSwgcCA9IG5ldyBEYXRhVmlldyhmLmJ1ZmZlciksIG0gPSBoLnVFbmMoZCk7CgkJCQkJcmV0dXJuIHAuc2V0SW50MzIoMCwgbS5sbywgITApLCBwLnNldEludDMyKDQsIG0uaGksICEwKSwgdGhpcy5yYXcoZik7CgkJCQl9CgkJCQlpbnQ2NChkKSB7CgkJCQkJbGV0IGYgPSBoLmVuYyhkKTsKCQkJCQlyZXR1cm4gdmFyaW50NjR3cml0ZShmLmxvLCBmLmhpLCB0aGlzLmJ1ZiksIHRoaXM7CgkJCQl9CgkJCQlzaW50NjQoZCkgewoJCQkJCWxldCBmID0gaC5lbmMoZCksIHAgPSBmLmhpID4+IDMxLCBtID0gZi5sbyA8PCAxIF4gcCwgZyA9IChmLmhpIDw8IDEgfCBmLmxvID4+PiAzMSkgXiBwOwoJCQkJCXJldHVybiB2YXJpbnQ2NHdyaXRlKG0sIGcsIHRoaXMuYnVmKSwgdGhpczsKCQkJCX0KCQkJCXVpbnQ2NChkKSB7CgkJCQkJbGV0IGYgPSBoLnVFbmMoZCk7CgkJCQkJcmV0dXJuIHZhcmludDY0d3JpdGUoZi5sbywgZi5oaSwgdGhpcy5idWYpLCB0aGlzOwoJCQkJfQoJCQl9CgkJCWNsYXNzIEJpbmFyeVJlYWRlciB7CgkJCQljb25zdHJ1Y3RvcihkLCBmID0gZ2V0VGV4dEVuY29kaW5nKCkuZGVjb2RlVXRmOCkgewoJCQkJCXRoaXMuZGVjb2RlVXRmOCA9IGYsIHRoaXMudmFyaW50NjQgPSB2YXJpbnQ2NHJlYWQsIHRoaXMudWludDMyID0gdmFyaW50MzJyZWFkLCB0aGlzLmJ1ZiA9IGQsIHRoaXMubGVuID0gZC5sZW5ndGgsIHRoaXMucG9zID0gMCwgdGhpcy52aWV3ID0gbmV3IERhdGFWaWV3KGQuYnVmZmVyLCBkLmJ5dGVPZmZzZXQsIGQuYnl0ZUxlbmd0aCk7CgkJCQl9CgkJCQl0YWcoKSB7CgkJCQkJbGV0IGQgPSB0aGlzLnVpbnQzMigpLCBmID0gZCA+Pj4gMywgcCA9IGQgJiA3OwoJCQkJCWlmIChmIDw9IDAgfHwgcCA8IDAgfHwgcCA+IDUpIHRocm93IEVycm9yKCJpbGxlZ2FsIHRhZzogZmllbGQgbm8gIiArIGYgKyAiIHdpcmUgdHlwZSAiICsgcCk7CgkJCQkJcmV0dXJuIFtmLCBwXTsKCQkJCX0KCQkJCXNraXAoZCwgZikgewoJCQkJCWxldCBwID0gdGhpcy5wb3M7CgkJCQkJc3dpdGNoIChkKSB7CgkJCQkJCWNhc2UgXy5WYXJpbnQ6CgkJCQkJCQlmb3IgKDsgdGhpcy5idWZbdGhpcy5wb3MrK10gJiAxMjg7KTsKCQkJCQkJCWJyZWFrOwoJCQkJCQljYXNlIF8uQml0NjQ6IHRoaXMucG9zICs9IDQ7CgkJCQkJCWNhc2UgXy5CaXQzMjoKCQkJCQkJCXRoaXMucG9zICs9IDQ7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSBfLkxlbmd0aERlbGltaXRlZDoKCQkJCQkJCWxldCBwID0gdGhpcy51aW50MzIoKTsKCQkJCQkJCXRoaXMucG9zICs9IHA7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSBfLlN0YXJ0R3JvdXA6CgkJCQkJCQlmb3IgKDs7KSB7CgkJCQkJCQkJbGV0IFtkLCBwXSA9IHRoaXMudGFnKCk7CgkJCQkJCQkJaWYgKHAgPT09IF8uRW5kR3JvdXApIHsKCQkJCQkJCQkJaWYgKGYgIT09IHZvaWQgMCAmJiBkICE9PSBmKSB0aHJvdyBFcnJvcigiaW52YWxpZCBlbmQgZ3JvdXAgdGFnIik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCX0KCQkJCQkJCQl0aGlzLnNraXAocCwgZCk7CgkJCQkJCQl9CgkJCQkJCQlicmVhazsKCQkJCQkJZGVmYXVsdDogdGhyb3cgRXJyb3IoImNhbnQgc2tpcCB3aXJlIHR5cGUgIiArIGQpOwoJCQkJCX0KCQkJCQlyZXR1cm4gdGhpcy5hc3NlcnRCb3VuZHMoKSwgdGhpcy5idWYuc3ViYXJyYXkocCwgdGhpcy5wb3MpOwoJCQkJfQoJCQkJYXNzZXJ0Qm91bmRzKCkgewoJCQkJCWlmICh0aGlzLnBvcyA+IHRoaXMubGVuKSB0aHJvdyBSYW5nZUVycm9yKCJwcmVtYXR1cmUgRU9GIik7CgkJCQl9CgkJCQlpbnQzMigpIHsKCQkJCQlyZXR1cm4gdGhpcy51aW50MzIoKSB8IDA7CgkJCQl9CgkJCQlzaW50MzIoKSB7CgkJCQkJbGV0IGQgPSB0aGlzLnVpbnQzMigpOwoJCQkJCXJldHVybiBkID4+PiAxIF4gLShkICYgMSk7CgkJCQl9CgkJCQlpbnQ2NCgpIHsKCQkJCQlyZXR1cm4gaC5kZWMoLi4udGhpcy52YXJpbnQ2NCgpKTsKCQkJCX0KCQkJCXVpbnQ2NCgpIHsKCQkJCQlyZXR1cm4gaC51RGVjKC4uLnRoaXMudmFyaW50NjQoKSk7CgkJCQl9CgkJCQlzaW50NjQoKSB7CgkJCQkJbGV0IFtkLCBmXSA9IHRoaXMudmFyaW50NjQoKSwgcCA9IC0oZCAmIDEpOwoJCQkJCXJldHVybiBkID0gKGQgPj4+IDEgfCAoZiAmIDEpIDw8IDMxKSBeIHAsIGYgPSBmID4+PiAxIF4gcCwgaC5kZWMoZCwgZik7CgkJCQl9CgkJCQlib29sKCkgewoJCQkJCWxldCBbZCwgZl0gPSB0aGlzLnZhcmludDY0KCk7CgkJCQkJcmV0dXJuIGQgIT09IDAgfHwgZiAhPT0gMDsKCQkJCX0KCQkJCWZpeGVkMzIoKSB7CgkJCQkJcmV0dXJuIHRoaXMudmlldy5nZXRVaW50MzIoKHRoaXMucG9zICs9IDQpIC0gNCwgITApOwoJCQkJfQoJCQkJc2ZpeGVkMzIoKSB7CgkJCQkJcmV0dXJuIHRoaXMudmlldy5nZXRJbnQzMigodGhpcy5wb3MgKz0gNCkgLSA0LCAhMCk7CgkJCQl9CgkJCQlmaXhlZDY0KCkgewoJCQkJCXJldHVybiBoLnVEZWModGhpcy5zZml4ZWQzMigpLCB0aGlzLnNmaXhlZDMyKCkpOwoJCQkJfQoJCQkJc2ZpeGVkNjQoKSB7CgkJCQkJcmV0dXJuIGguZGVjKHRoaXMuc2ZpeGVkMzIoKSwgdGhpcy5zZml4ZWQzMigpKTsKCQkJCX0KCQkJCWZsb2F0KCkgewoJCQkJCXJldHVybiB0aGlzLnZpZXcuZ2V0RmxvYXQzMigodGhpcy5wb3MgKz0gNCkgLSA0LCAhMCk7CgkJCQl9CgkJCQlkb3VibGUoKSB7CgkJCQkJcmV0dXJuIHRoaXMudmlldy5nZXRGbG9hdDY0KCh0aGlzLnBvcyArPSA4KSAtIDgsICEwKTsKCQkJCX0KCQkJCWJ5dGVzKCkgewoJCQkJCWxldCBkID0gdGhpcy51aW50MzIoKSwgZiA9IHRoaXMucG9zOwoJCQkJCXJldHVybiB0aGlzLnBvcyArPSBkLCB0aGlzLmFzc2VydEJvdW5kcygpLCB0aGlzLmJ1Zi5zdWJhcnJheShmLCBmICsgZCk7CgkJCQl9CgkJCQlzdHJpbmcoKSB7CgkJCQkJcmV0dXJuIHRoaXMuZGVjb2RlVXRmOCh0aGlzLmJ5dGVzKCkpOwoJCQkJfQoJCQl9CgkJCWZ1bmN0aW9uIGFzc2VydEludDMyKGQpIHsKCQkJCWlmICh0eXBlb2YgZCA9PSAic3RyaW5nIikgZCA9IE51bWJlcihkKTsKCQkJCWVsc2UgaWYgKHR5cGVvZiBkICE9ICJudW1iZXIiKSB0aHJvdyBFcnJvcigiaW52YWxpZCBpbnQzMjogIiArIHR5cGVvZiBkKTsKCQkJCWlmICghTnVtYmVyLmlzSW50ZWdlcihkKSB8fCBkID4gQyB8fCBkIDwgdykgdGhyb3cgRXJyb3IoImludmFsaWQgaW50MzI6ICIgKyBkKTsKCQkJfQoJCQlmdW5jdGlvbiBhc3NlcnRVSW50MzIoZCkgewoJCQkJaWYgKHR5cGVvZiBkID09ICJzdHJpbmciKSBkID0gTnVtYmVyKGQpOwoJCQkJZWxzZSBpZiAodHlwZW9mIGQgIT0gIm51bWJlciIpIHRocm93IEVycm9yKCJpbnZhbGlkIHVpbnQzMjogIiArIHR5cGVvZiBkKTsKCQkJCWlmICghTnVtYmVyLmlzSW50ZWdlcihkKSB8fCBkID4geCB8fCBkIDwgMCkgdGhyb3cgRXJyb3IoImludmFsaWQgdWludDMyOiAiICsgZCk7CgkJCX0KCQkJZnVuY3Rpb24gYXNzZXJ0RmxvYXQzMihkKSB7CgkJCQlpZiAodHlwZW9mIGQgPT0gInN0cmluZyIpIHsKCQkJCQlsZXQgZiA9IGQ7CgkJCQkJaWYgKGQgPSBOdW1iZXIoZCksIGlzTmFOKGQpICYmIGYgIT09ICJOYU4iKSB0aHJvdyBFcnJvcigiaW52YWxpZCBmbG9hdDMyOiAiICsgZik7CgkJCQl9IGVsc2UgaWYgKHR5cGVvZiBkICE9ICJudW1iZXIiKSB0aHJvdyBFcnJvcigiaW52YWxpZCBmbG9hdDMyOiAiICsgdHlwZW9mIGQpOwoJCQkJaWYgKE51bWJlci5pc0Zpbml0ZShkKSAmJiAoZCA+IHYgfHwgZCA8IGIpKSB0aHJvdyBFcnJvcigiaW52YWxpZCBmbG9hdDMyOiAiICsgZCk7CgkJCX0KCQkJbGV0IFQgPSAiIjsKCQkJdmFyIEU7CgkJCShmdW5jdGlvbihkKSB7CgkJCQlkW2QuTk9fQ09OTkVDVElPTiA9IDBdID0gIk5PX0NPTk5FQ1RJT04iLCBkW2QuVFJBTlNMQVRJTkcgPSAxMF0gPSAiVFJBTlNMQVRJTkciLCBkW2QuU1RSRUFNSU5HID0gMjBdID0gIlNUUkVBTUlORyIsIGRbZC5VTlJFQ09HTklaRUQgPSAtMV0gPSAiVU5SRUNPR05JWkVEIjsKCQkJfSkoRSB8fD0ge30pOwoJCQlmdW5jdGlvbiBzdHJlYW1JbnRlcnZhbEZyb21KU09OKGQpIHsKCQkJCXN3aXRjaCAoZCkgewoJCQkJCWNhc2UgMDoKCQkJCQljYXNlICJOT19DT05ORUNUSU9OIjogcmV0dXJuIEUuTk9fQ09OTkVDVElPTjsKCQkJCQljYXNlIDEwOgoJCQkJCWNhc2UgIlRSQU5TTEFUSU5HIjogcmV0dXJuIEUuVFJBTlNMQVRJTkc7CgkJCQkJY2FzZSAyMDoKCQkJCQljYXNlICJTVFJFQU1JTkciOiByZXR1cm4gRS5TVFJFQU1JTkc7CgkJCQkJY2FzZSAtMToKCQkJCQljYXNlICJVTlJFQ09HTklaRUQiOgoJCQkJCWRlZmF1bHQ6IHJldHVybiBFLlVOUkVDT0dOSVpFRDsKCQkJCX0KCQkJfQoJCQlmdW5jdGlvbiBzdHJlYW1JbnRlcnZhbFRvSlNPTihkKSB7CgkJCQlzd2l0Y2ggKGQpIHsKCQkJCQljYXNlIEUuTk9fQ09OTkVDVElPTjogcmV0dXJuICJOT19DT05ORUNUSU9OIjsKCQkJCQljYXNlIEUuVFJBTlNMQVRJTkc6IHJldHVybiAiVFJBTlNMQVRJTkciOwoJCQkJCWNhc2UgRS5TVFJFQU1JTkc6IHJldHVybiAiU1RSRUFNSU5HIjsKCQkJCQljYXNlIEUuVU5SRUNPR05JWkVEOgoJCQkJCWRlZmF1bHQ6IHJldHVybiAiVU5SRUNPR05JWkVEIjsKCQkJCX0KCQkJfQoJCQlmdW5jdGlvbiBjcmVhdGVCYXNlVmlkZW9UcmFuc2xhdGlvbkhlbHBPYmplY3QoKSB7CgkJCQlyZXR1cm4gewoJCQkJCXRhcmdldDogIiIsCgkJCQkJdGFyZ2V0VXJsOiAiIgoJCQkJfTsKCQkJfQoJCQlsZXQgRCA9IHsKCQkJCWVuY29kZShkLCBmID0gbmV3IEJpbmFyeVdyaXRlcigpKSB7CgkJCQkJcmV0dXJuIGQudGFyZ2V0ICE9PSAiIiAmJiBmLnVpbnQzMigxMCkuc3RyaW5nKGQudGFyZ2V0KSwgZC50YXJnZXRVcmwgIT09ICIiICYmIGYudWludDMyKDE4KS5zdHJpbmcoZC50YXJnZXRVcmwpLCBmOwoJCQkJfSwKCQkJCWRlY29kZShkLCBmKSB7CgkJCQkJbGV0IHAgPSBkIGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyID8gZCA6IG5ldyBCaW5hcnlSZWFkZXIoZCksIG0gPSBmID09PSB2b2lkIDAgPyBwLmxlbiA6IHAucG9zICsgZiwgaCA9IGNyZWF0ZUJhc2VWaWRlb1RyYW5zbGF0aW9uSGVscE9iamVjdCgpOwoJCQkJCWZvciAoOyBwLnBvcyA8IG07KSB7CgkJCQkJCWxldCBkID0gcC51aW50MzIoKTsKCQkJCQkJc3dpdGNoIChkID4+PiAzKSB7CgkJCQkJCQljYXNlIDE6CgkJCQkJCQkJaWYgKGQgIT09IDEwKSBicmVhazsKCQkJCQkJCQloLnRhcmdldCA9IHAuc3RyaW5nKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDI6CgkJCQkJCQkJaWYgKGQgIT09IDE4KSBicmVhazsKCQkJCQkJCQloLnRhcmdldFVybCA9IHAuc3RyaW5nKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCX0KCQkJCQkJaWYgKChkICYgNykgPT0gNCB8fCBkID09PSAwKSBicmVhazsKCQkJCQkJcC5za2lwKGQgJiA3KTsKCQkJCQl9CgkJCQkJcmV0dXJuIGg7CgkJCQl9LAoJCQkJZnJvbUpTT04oZCkgewoJCQkJCXJldHVybiB7CgkJCQkJCXRhcmdldDogaXNTZXQoZC50YXJnZXQpID8gZ2xvYmFsVGhpcy5TdHJpbmcoZC50YXJnZXQpIDogIiIsCgkJCQkJCXRhcmdldFVybDogaXNTZXQoZC50YXJnZXRVcmwpID8gZ2xvYmFsVGhpcy5TdHJpbmcoZC50YXJnZXRVcmwpIDogIiIKCQkJCQl9OwoJCQkJfSwKCQkJCXRvSlNPTihkKSB7CgkJCQkJbGV0IGYgPSB7fTsKCQkJCQlyZXR1cm4gZC50YXJnZXQgIT09ICIiICYmIChmLnRhcmdldCA9IGQudGFyZ2V0KSwgZC50YXJnZXRVcmwgIT09ICIiICYmIChmLnRhcmdldFVybCA9IGQudGFyZ2V0VXJsKSwgZjsKCQkJCX0sCgkJCQljcmVhdGUoZCkgewoJCQkJCXJldHVybiBELmZyb21QYXJ0aWFsKGQgPz8ge30pOwoJCQkJfSwKCQkJCWZyb21QYXJ0aWFsKGQpIHsKCQkJCQlsZXQgZiA9IGNyZWF0ZUJhc2VWaWRlb1RyYW5zbGF0aW9uSGVscE9iamVjdCgpOwoJCQkJCXJldHVybiBmLnRhcmdldCA9IGQudGFyZ2V0ID8/ICIiLCBmLnRhcmdldFVybCA9IGQudGFyZ2V0VXJsID8/ICIiLCBmOwoJCQkJfQoJCQl9OwoJCQlmdW5jdGlvbiBjcmVhdGVCYXNlVmlkZW9UcmFuc2xhdGlvblJlcXVlc3QoKSB7CgkJCQlyZXR1cm4gewoJCQkJCXVybDogIiIsCgkJCQkJZGV2aWNlSWQ6IHZvaWQgMCwKCQkJCQlmaXJzdFJlcXVlc3Q6ICExLAoJCQkJCWR1cmF0aW9uOiAwLAoJCQkJCXVua25vd24wOiAwLAoJCQkJCWxhbmd1YWdlOiAiIiwKCQkJCQlmb3JjZVNvdXJjZUxhbmc6ICExLAoJCQkJCXVua25vd24xOiAwLAoJCQkJCXRyYW5zbGF0aW9uSGVscDogW10sCgkJCQkJd2FzU3RyZWFtOiAhMSwKCQkJCQlyZXNwb25zZUxhbmd1YWdlOiAiIiwKCQkJCQl1bmtub3duMjogMCwKCQkJCQl1bmtub3duMzogMCwKCQkJCQlieXBhc3NDYWNoZTogITEsCgkJCQkJdXNlTGl2ZWx5Vm9pY2U6ICExLAoJCQkJCXZpZGVvVGl0bGU6ICIiCgkJCQl9OwoJCQl9CgkJCWxldCBPID0gewoJCQkJZW5jb2RlKGQsIGYgPSBuZXcgQmluYXJ5V3JpdGVyKCkpIHsKCQkJCQlkLnVybCAhPT0gIiIgJiYgZi51aW50MzIoMjYpLnN0cmluZyhkLnVybCksIGQuZGV2aWNlSWQgIT09IHZvaWQgMCAmJiBmLnVpbnQzMigzNCkuc3RyaW5nKGQuZGV2aWNlSWQpLCBkLmZpcnN0UmVxdWVzdCAhPT0gITEgJiYgZi51aW50MzIoNDApLmJvb2woZC5maXJzdFJlcXVlc3QpLCBkLmR1cmF0aW9uICE9PSAwICYmIGYudWludDMyKDQ5KS5kb3VibGUoZC5kdXJhdGlvbiksIGQudW5rbm93bjAgIT09IDAgJiYgZi51aW50MzIoNTYpLmludDMyKGQudW5rbm93bjApLCBkLmxhbmd1YWdlICE9PSAiIiAmJiBmLnVpbnQzMig2Nikuc3RyaW5nKGQubGFuZ3VhZ2UpLCBkLmZvcmNlU291cmNlTGFuZyAhPT0gITEgJiYgZi51aW50MzIoNzIpLmJvb2woZC5mb3JjZVNvdXJjZUxhbmcpLCBkLnVua25vd24xICE9PSAwICYmIGYudWludDMyKDgwKS5pbnQzMihkLnVua25vd24xKTsKCQkJCQlmb3IgKGxldCBwIG9mIGQudHJhbnNsYXRpb25IZWxwKSBELmVuY29kZShwLCBmLnVpbnQzMig5MCkuZm9yaygpKS5qb2luKCk7CgkJCQkJcmV0dXJuIGQud2FzU3RyZWFtICE9PSAhMSAmJiBmLnVpbnQzMigxMDQpLmJvb2woZC53YXNTdHJlYW0pLCBkLnJlc3BvbnNlTGFuZ3VhZ2UgIT09ICIiICYmIGYudWludDMyKDExNCkuc3RyaW5nKGQucmVzcG9uc2VMYW5ndWFnZSksIGQudW5rbm93bjIgIT09IDAgJiYgZi51aW50MzIoMTIwKS5pbnQzMihkLnVua25vd24yKSwgZC51bmtub3duMyAhPT0gMCAmJiBmLnVpbnQzMigxMjgpLmludDMyKGQudW5rbm93bjMpLCBkLmJ5cGFzc0NhY2hlICE9PSAhMSAmJiBmLnVpbnQzMigxMzYpLmJvb2woZC5ieXBhc3NDYWNoZSksIGQudXNlTGl2ZWx5Vm9pY2UgIT09ICExICYmIGYudWludDMyKDE0NCkuYm9vbChkLnVzZUxpdmVseVZvaWNlKSwgZC52aWRlb1RpdGxlICE9PSAiIiAmJiBmLnVpbnQzMigxNTQpLnN0cmluZyhkLnZpZGVvVGl0bGUpLCBmOwoJCQkJfSwKCQkJCWRlY29kZShkLCBmKSB7CgkJCQkJbGV0IHAgPSBkIGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyID8gZCA6IG5ldyBCaW5hcnlSZWFkZXIoZCksIG0gPSBmID09PSB2b2lkIDAgPyBwLmxlbiA6IHAucG9zICsgZiwgaCA9IGNyZWF0ZUJhc2VWaWRlb1RyYW5zbGF0aW9uUmVxdWVzdCgpOwoJCQkJCWZvciAoOyBwLnBvcyA8IG07KSB7CgkJCQkJCWxldCBkID0gcC51aW50MzIoKTsKCQkJCQkJc3dpdGNoIChkID4+PiAzKSB7CgkJCQkJCQljYXNlIDM6CgkJCQkJCQkJaWYgKGQgIT09IDI2KSBicmVhazsKCQkJCQkJCQloLnVybCA9IHAuc3RyaW5nKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDQ6CgkJCQkJCQkJaWYgKGQgIT09IDM0KSBicmVhazsKCQkJCQkJCQloLmRldmljZUlkID0gcC5zdHJpbmcoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgNToKCQkJCQkJCQlpZiAoZCAhPT0gNDApIGJyZWFrOwoJCQkJCQkJCWguZmlyc3RSZXF1ZXN0ID0gcC5ib29sKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDY6CgkJCQkJCQkJaWYgKGQgIT09IDQ5KSBicmVhazsKCQkJCQkJCQloLmR1cmF0aW9uID0gcC5kb3VibGUoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgNzoKCQkJCQkJCQlpZiAoZCAhPT0gNTYpIGJyZWFrOwoJCQkJCQkJCWgudW5rbm93bjAgPSBwLmludDMyKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDg6CgkJCQkJCQkJaWYgKGQgIT09IDY2KSBicmVhazsKCQkJCQkJCQloLmxhbmd1YWdlID0gcC5zdHJpbmcoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgOToKCQkJCQkJCQlpZiAoZCAhPT0gNzIpIGJyZWFrOwoJCQkJCQkJCWguZm9yY2VTb3VyY2VMYW5nID0gcC5ib29sKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDEwOgoJCQkJCQkJCWlmIChkICE9PSA4MCkgYnJlYWs7CgkJCQkJCQkJaC51bmtub3duMSA9IHAuaW50MzIoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgMTE6CgkJCQkJCQkJaWYgKGQgIT09IDkwKSBicmVhazsKCQkJCQkJCQloLnRyYW5zbGF0aW9uSGVscC5wdXNoKEQuZGVjb2RlKHAsIHAudWludDMyKCkpKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgMTM6CgkJCQkJCQkJaWYgKGQgIT09IDEwNCkgYnJlYWs7CgkJCQkJCQkJaC53YXNTdHJlYW0gPSBwLmJvb2woKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgMTQ6CgkJCQkJCQkJaWYgKGQgIT09IDExNCkgYnJlYWs7CgkJCQkJCQkJaC5yZXNwb25zZUxhbmd1YWdlID0gcC5zdHJpbmcoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgMTU6CgkJCQkJCQkJaWYgKGQgIT09IDEyMCkgYnJlYWs7CgkJCQkJCQkJaC51bmtub3duMiA9IHAuaW50MzIoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgMTY6CgkJCQkJCQkJaWYgKGQgIT09IDEyOCkgYnJlYWs7CgkJCQkJCQkJaC51bmtub3duMyA9IHAuaW50MzIoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgMTc6CgkJCQkJCQkJaWYgKGQgIT09IDEzNikgYnJlYWs7CgkJCQkJCQkJaC5ieXBhc3NDYWNoZSA9IHAuYm9vbCgpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQkJY2FzZSAxODoKCQkJCQkJCQlpZiAoZCAhPT0gMTQ0KSBicmVhazsKCQkJCQkJCQloLnVzZUxpdmVseVZvaWNlID0gcC5ib29sKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDE5OgoJCQkJCQkJCWlmIChkICE9PSAxNTQpIGJyZWFrOwoJCQkJCQkJCWgudmlkZW9UaXRsZSA9IHAuc3RyaW5nKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCX0KCQkJCQkJaWYgKChkICYgNykgPT0gNCB8fCBkID09PSAwKSBicmVhazsKCQkJCQkJcC5za2lwKGQgJiA3KTsKCQkJCQl9CgkJCQkJcmV0dXJuIGg7CgkJCQl9LAoJCQkJZnJvbUpTT04oZCkgewoJCQkJCXJldHVybiB7CgkJCQkJCXVybDogaXNTZXQoZC51cmwpID8gZ2xvYmFsVGhpcy5TdHJpbmcoZC51cmwpIDogIiIsCgkJCQkJCWRldmljZUlkOiBpc1NldChkLmRldmljZUlkKSA/IGdsb2JhbFRoaXMuU3RyaW5nKGQuZGV2aWNlSWQpIDogdm9pZCAwLAoJCQkJCQlmaXJzdFJlcXVlc3Q6IGlzU2V0KGQuZmlyc3RSZXF1ZXN0KSA/IGdsb2JhbFRoaXMuQm9vbGVhbihkLmZpcnN0UmVxdWVzdCkgOiAhMSwKCQkJCQkJZHVyYXRpb246IGlzU2V0KGQuZHVyYXRpb24pID8gZ2xvYmFsVGhpcy5OdW1iZXIoZC5kdXJhdGlvbikgOiAwLAoJCQkJCQl1bmtub3duMDogaXNTZXQoZC51bmtub3duMCkgPyBnbG9iYWxUaGlzLk51bWJlcihkLnVua25vd24wKSA6IDAsCgkJCQkJCWxhbmd1YWdlOiBpc1NldChkLmxhbmd1YWdlKSA/IGdsb2JhbFRoaXMuU3RyaW5nKGQubGFuZ3VhZ2UpIDogIiIsCgkJCQkJCWZvcmNlU291cmNlTGFuZzogaXNTZXQoZC5mb3JjZVNvdXJjZUxhbmcpID8gZ2xvYmFsVGhpcy5Cb29sZWFuKGQuZm9yY2VTb3VyY2VMYW5nKSA6ICExLAoJCQkJCQl1bmtub3duMTogaXNTZXQoZC51bmtub3duMSkgPyBnbG9iYWxUaGlzLk51bWJlcihkLnVua25vd24xKSA6IDAsCgkJCQkJCXRyYW5zbGF0aW9uSGVscDogZ2xvYmFsVGhpcy5BcnJheS5pc0FycmF5KGQ/LnRyYW5zbGF0aW9uSGVscCkgPyBkLnRyYW5zbGF0aW9uSGVscC5tYXAoKGQpID0+IEQuZnJvbUpTT04oZCkpIDogW10sCgkJCQkJCXdhc1N0cmVhbTogaXNTZXQoZC53YXNTdHJlYW0pID8gZ2xvYmFsVGhpcy5Cb29sZWFuKGQud2FzU3RyZWFtKSA6ICExLAoJCQkJCQlyZXNwb25zZUxhbmd1YWdlOiBpc1NldChkLnJlc3BvbnNlTGFuZ3VhZ2UpID8gZ2xvYmFsVGhpcy5TdHJpbmcoZC5yZXNwb25zZUxhbmd1YWdlKSA6ICIiLAoJCQkJCQl1bmtub3duMjogaXNTZXQoZC51bmtub3duMikgPyBnbG9iYWxUaGlzLk51bWJlcihkLnVua25vd24yKSA6IDAsCgkJCQkJCXVua25vd24zOiBpc1NldChkLnVua25vd24zKSA/IGdsb2JhbFRoaXMuTnVtYmVyKGQudW5rbm93bjMpIDogMCwKCQkJCQkJYnlwYXNzQ2FjaGU6IGlzU2V0KGQuYnlwYXNzQ2FjaGUpID8gZ2xvYmFsVGhpcy5Cb29sZWFuKGQuYnlwYXNzQ2FjaGUpIDogITEsCgkJCQkJCXVzZUxpdmVseVZvaWNlOiBpc1NldChkLnVzZUxpdmVseVZvaWNlKSA/IGdsb2JhbFRoaXMuQm9vbGVhbihkLnVzZUxpdmVseVZvaWNlKSA6ICExLAoJCQkJCQl2aWRlb1RpdGxlOiBpc1NldChkLnZpZGVvVGl0bGUpID8gZ2xvYmFsVGhpcy5TdHJpbmcoZC52aWRlb1RpdGxlKSA6ICIiCgkJCQkJfTsKCQkJCX0sCgkJCQl0b0pTT04oZCkgewoJCQkJCWxldCBmID0ge307CgkJCQkJcmV0dXJuIGQudXJsICE9PSAiIiAmJiAoZi51cmwgPSBkLnVybCksIGQuZGV2aWNlSWQgIT09IHZvaWQgMCAmJiAoZi5kZXZpY2VJZCA9IGQuZGV2aWNlSWQpLCBkLmZpcnN0UmVxdWVzdCAhPT0gITEgJiYgKGYuZmlyc3RSZXF1ZXN0ID0gZC5maXJzdFJlcXVlc3QpLCBkLmR1cmF0aW9uICE9PSAwICYmIChmLmR1cmF0aW9uID0gZC5kdXJhdGlvbiksIGQudW5rbm93bjAgIT09IDAgJiYgKGYudW5rbm93bjAgPSBNYXRoLnJvdW5kKGQudW5rbm93bjApKSwgZC5sYW5ndWFnZSAhPT0gIiIgJiYgKGYubGFuZ3VhZ2UgPSBkLmxhbmd1YWdlKSwgZC5mb3JjZVNvdXJjZUxhbmcgIT09ICExICYmIChmLmZvcmNlU291cmNlTGFuZyA9IGQuZm9yY2VTb3VyY2VMYW5nKSwgZC51bmtub3duMSAhPT0gMCAmJiAoZi51bmtub3duMSA9IE1hdGgucm91bmQoZC51bmtub3duMSkpLCBkLnRyYW5zbGF0aW9uSGVscD8ubGVuZ3RoICYmIChmLnRyYW5zbGF0aW9uSGVscCA9IGQudHJhbnNsYXRpb25IZWxwLm1hcCgoZCkgPT4gRC50b0pTT04oZCkpKSwgZC53YXNTdHJlYW0gIT09ICExICYmIChmLndhc1N0cmVhbSA9IGQud2FzU3RyZWFtKSwgZC5yZXNwb25zZUxhbmd1YWdlICE9PSAiIiAmJiAoZi5yZXNwb25zZUxhbmd1YWdlID0gZC5yZXNwb25zZUxhbmd1YWdlKSwgZC51bmtub3duMiAhPT0gMCAmJiAoZi51bmtub3duMiA9IE1hdGgucm91bmQoZC51bmtub3duMikpLCBkLnVua25vd24zICE9PSAwICYmIChmLnVua25vd24zID0gTWF0aC5yb3VuZChkLnVua25vd24zKSksIGQuYnlwYXNzQ2FjaGUgIT09ICExICYmIChmLmJ5cGFzc0NhY2hlID0gZC5ieXBhc3NDYWNoZSksIGQudXNlTGl2ZWx5Vm9pY2UgIT09ICExICYmIChmLnVzZUxpdmVseVZvaWNlID0gZC51c2VMaXZlbHlWb2ljZSksIGQudmlkZW9UaXRsZSAhPT0gIiIgJiYgKGYudmlkZW9UaXRsZSA9IGQudmlkZW9UaXRsZSksIGY7CgkJCQl9LAoJCQkJY3JlYXRlKGQpIHsKCQkJCQlyZXR1cm4gTy5mcm9tUGFydGlhbChkID8/IHt9KTsKCQkJCX0sCgkJCQlmcm9tUGFydGlhbChkKSB7CgkJCQkJbGV0IGYgPSBjcmVhdGVCYXNlVmlkZW9UcmFuc2xhdGlvblJlcXVlc3QoKTsKCQkJCQlyZXR1cm4gZi51cmwgPSBkLnVybCA/PyAiIiwgZi5kZXZpY2VJZCA9IGQuZGV2aWNlSWQgPz8gdm9pZCAwLCBmLmZpcnN0UmVxdWVzdCA9IGQuZmlyc3RSZXF1ZXN0ID8/ICExLCBmLmR1cmF0aW9uID0gZC5kdXJhdGlvbiA/PyAwLCBmLnVua25vd24wID0gZC51bmtub3duMCA/PyAwLCBmLmxhbmd1YWdlID0gZC5sYW5ndWFnZSA/PyAiIiwgZi5mb3JjZVNvdXJjZUxhbmcgPSBkLmZvcmNlU291cmNlTGFuZyA/PyAhMSwgZi51bmtub3duMSA9IGQudW5rbm93bjEgPz8gMCwgZi50cmFuc2xhdGlvbkhlbHAgPSBkLnRyYW5zbGF0aW9uSGVscD8ubWFwKChkKSA9PiBELmZyb21QYXJ0aWFsKGQpKSB8fCBbXSwgZi53YXNTdHJlYW0gPSBkLndhc1N0cmVhbSA/PyAhMSwgZi5yZXNwb25zZUxhbmd1YWdlID0gZC5yZXNwb25zZUxhbmd1YWdlID8/ICIiLCBmLnVua25vd24yID0gZC51bmtub3duMiA/PyAwLCBmLnVua25vd24zID0gZC51bmtub3duMyA/PyAwLCBmLmJ5cGFzc0NhY2hlID0gZC5ieXBhc3NDYWNoZSA/PyAhMSwgZi51c2VMaXZlbHlWb2ljZSA9IGQudXNlTGl2ZWx5Vm9pY2UgPz8gITEsIGYudmlkZW9UaXRsZSA9IGQudmlkZW9UaXRsZSA/PyAiIiwgZjsKCQkJCX0KCQkJfTsKCQkJZnVuY3Rpb24gY3JlYXRlQmFzZVZpZGVvVHJhbnNsYXRpb25SZXNwb25zZSgpIHsKCQkJCXJldHVybiB7CgkJCQkJdXJsOiB2b2lkIDAsCgkJCQkJZHVyYXRpb246IHZvaWQgMCwKCQkJCQlzdGF0dXM6IDAsCgkJCQkJcmVtYWluaW5nVGltZTogdm9pZCAwLAoJCQkJCXVua25vd24wOiB2b2lkIDAsCgkJCQkJdHJhbnNsYXRpb25JZDogIiIsCgkJCQkJbGFuZ3VhZ2U6IHZvaWQgMCwKCQkJCQltZXNzYWdlOiB2b2lkIDAsCgkJCQkJaXNMaXZlbHlWb2ljZTogITEsCgkJCQkJdW5rbm93bjI6IHZvaWQgMCwKCQkJCQlzaG91bGRSZXRyeTogdm9pZCAwLAoJCQkJCXVua25vd24zOiB2b2lkIDAKCQkJCX07CgkJCX0KCQkJbGV0IEEgPSB7CgkJCQllbmNvZGUoZCwgZiA9IG5ldyBCaW5hcnlXcml0ZXIoKSkgewoJCQkJCXJldHVybiBkLnVybCAhPT0gdm9pZCAwICYmIGYudWludDMyKDEwKS5zdHJpbmcoZC51cmwpLCBkLmR1cmF0aW9uICE9PSB2b2lkIDAgJiYgZi51aW50MzIoMTcpLmRvdWJsZShkLmR1cmF0aW9uKSwgZC5zdGF0dXMgIT09IDAgJiYgZi51aW50MzIoMzIpLmludDMyKGQuc3RhdHVzKSwgZC5yZW1haW5pbmdUaW1lICE9PSB2b2lkIDAgJiYgZi51aW50MzIoNDApLmludDMyKGQucmVtYWluaW5nVGltZSksIGQudW5rbm93bjAgIT09IHZvaWQgMCAmJiBmLnVpbnQzMig0OCkuaW50MzIoZC51bmtub3duMCksIGQudHJhbnNsYXRpb25JZCAhPT0gIiIgJiYgZi51aW50MzIoNTgpLnN0cmluZyhkLnRyYW5zbGF0aW9uSWQpLCBkLmxhbmd1YWdlICE9PSB2b2lkIDAgJiYgZi51aW50MzIoNjYpLnN0cmluZyhkLmxhbmd1YWdlKSwgZC5tZXNzYWdlICE9PSB2b2lkIDAgJiYgZi51aW50MzIoNzQpLnN0cmluZyhkLm1lc3NhZ2UpLCBkLmlzTGl2ZWx5Vm9pY2UgIT09ICExICYmIGYudWludDMyKDgwKS5ib29sKGQuaXNMaXZlbHlWb2ljZSksIGQudW5rbm93bjIgIT09IHZvaWQgMCAmJiBmLnVpbnQzMig4OCkuaW50MzIoZC51bmtub3duMiksIGQuc2hvdWxkUmV0cnkgIT09IHZvaWQgMCAmJiBmLnVpbnQzMig5NikuaW50MzIoZC5zaG91bGRSZXRyeSksIGQudW5rbm93bjMgIT09IHZvaWQgMCAmJiBmLnVpbnQzMigxMDQpLmludDMyKGQudW5rbm93bjMpLCBmOwoJCQkJfSwKCQkJCWRlY29kZShkLCBmKSB7CgkJCQkJbGV0IHAgPSBkIGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyID8gZCA6IG5ldyBCaW5hcnlSZWFkZXIoZCksIG0gPSBmID09PSB2b2lkIDAgPyBwLmxlbiA6IHAucG9zICsgZiwgaCA9IGNyZWF0ZUJhc2VWaWRlb1RyYW5zbGF0aW9uUmVzcG9uc2UoKTsKCQkJCQlmb3IgKDsgcC5wb3MgPCBtOykgewoJCQkJCQlsZXQgZCA9IHAudWludDMyKCk7CgkJCQkJCXN3aXRjaCAoZCA+Pj4gMykgewoJCQkJCQkJY2FzZSAxOgoJCQkJCQkJCWlmIChkICE9PSAxMCkgYnJlYWs7CgkJCQkJCQkJaC51cmwgPSBwLnN0cmluZygpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQkJY2FzZSAyOgoJCQkJCQkJCWlmIChkICE9PSAxNykgYnJlYWs7CgkJCQkJCQkJaC5kdXJhdGlvbiA9IHAuZG91YmxlKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDQ6CgkJCQkJCQkJaWYgKGQgIT09IDMyKSBicmVhazsKCQkJCQkJCQloLnN0YXR1cyA9IHAuaW50MzIoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgNToKCQkJCQkJCQlpZiAoZCAhPT0gNDApIGJyZWFrOwoJCQkJCQkJCWgucmVtYWluaW5nVGltZSA9IHAuaW50MzIoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgNjoKCQkJCQkJCQlpZiAoZCAhPT0gNDgpIGJyZWFrOwoJCQkJCQkJCWgudW5rbm93bjAgPSBwLmludDMyKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDc6CgkJCQkJCQkJaWYgKGQgIT09IDU4KSBicmVhazsKCQkJCQkJCQloLnRyYW5zbGF0aW9uSWQgPSBwLnN0cmluZygpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQkJY2FzZSA4OgoJCQkJCQkJCWlmIChkICE9PSA2NikgYnJlYWs7CgkJCQkJCQkJaC5sYW5ndWFnZSA9IHAuc3RyaW5nKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDk6CgkJCQkJCQkJaWYgKGQgIT09IDc0KSBicmVhazsKCQkJCQkJCQloLm1lc3NhZ2UgPSBwLnN0cmluZygpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQkJY2FzZSAxMDoKCQkJCQkJCQlpZiAoZCAhPT0gODApIGJyZWFrOwoJCQkJCQkJCWguaXNMaXZlbHlWb2ljZSA9IHAuYm9vbCgpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQkJY2FzZSAxMToKCQkJCQkJCQlpZiAoZCAhPT0gODgpIGJyZWFrOwoJCQkJCQkJCWgudW5rbm93bjIgPSBwLmludDMyKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDEyOgoJCQkJCQkJCWlmIChkICE9PSA5NikgYnJlYWs7CgkJCQkJCQkJaC5zaG91bGRSZXRyeSA9IHAuaW50MzIoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgMTM6CgkJCQkJCQkJaWYgKGQgIT09IDEwNCkgYnJlYWs7CgkJCQkJCQkJaC51bmtub3duMyA9IHAuaW50MzIoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJfQoJCQkJCQlpZiAoKGQgJiA3KSA9PSA0IHx8IGQgPT09IDApIGJyZWFrOwoJCQkJCQlwLnNraXAoZCAmIDcpOwoJCQkJCX0KCQkJCQlyZXR1cm4gaDsKCQkJCX0sCgkJCQlmcm9tSlNPTihkKSB7CgkJCQkJcmV0dXJuIHsKCQkJCQkJdXJsOiBpc1NldChkLnVybCkgPyBnbG9iYWxUaGlzLlN0cmluZyhkLnVybCkgOiB2b2lkIDAsCgkJCQkJCWR1cmF0aW9uOiBpc1NldChkLmR1cmF0aW9uKSA/IGdsb2JhbFRoaXMuTnVtYmVyKGQuZHVyYXRpb24pIDogdm9pZCAwLAoJCQkJCQlzdGF0dXM6IGlzU2V0KGQuc3RhdHVzKSA/IGdsb2JhbFRoaXMuTnVtYmVyKGQuc3RhdHVzKSA6IDAsCgkJCQkJCXJlbWFpbmluZ1RpbWU6IGlzU2V0KGQucmVtYWluaW5nVGltZSkgPyBnbG9iYWxUaGlzLk51bWJlcihkLnJlbWFpbmluZ1RpbWUpIDogdm9pZCAwLAoJCQkJCQl1bmtub3duMDogaXNTZXQoZC51bmtub3duMCkgPyBnbG9iYWxUaGlzLk51bWJlcihkLnVua25vd24wKSA6IHZvaWQgMCwKCQkJCQkJdHJhbnNsYXRpb25JZDogaXNTZXQoZC50cmFuc2xhdGlvbklkKSA/IGdsb2JhbFRoaXMuU3RyaW5nKGQudHJhbnNsYXRpb25JZCkgOiAiIiwKCQkJCQkJbGFuZ3VhZ2U6IGlzU2V0KGQubGFuZ3VhZ2UpID8gZ2xvYmFsVGhpcy5TdHJpbmcoZC5sYW5ndWFnZSkgOiB2b2lkIDAsCgkJCQkJCW1lc3NhZ2U6IGlzU2V0KGQubWVzc2FnZSkgPyBnbG9iYWxUaGlzLlN0cmluZyhkLm1lc3NhZ2UpIDogdm9pZCAwLAoJCQkJCQlpc0xpdmVseVZvaWNlOiBpc1NldChkLmlzTGl2ZWx5Vm9pY2UpID8gZ2xvYmFsVGhpcy5Cb29sZWFuKGQuaXNMaXZlbHlWb2ljZSkgOiAhMSwKCQkJCQkJdW5rbm93bjI6IGlzU2V0KGQudW5rbm93bjIpID8gZ2xvYmFsVGhpcy5OdW1iZXIoZC51bmtub3duMikgOiB2b2lkIDAsCgkJCQkJCXNob3VsZFJldHJ5OiBpc1NldChkLnNob3VsZFJldHJ5KSA/IGdsb2JhbFRoaXMuTnVtYmVyKGQuc2hvdWxkUmV0cnkpIDogdm9pZCAwLAoJCQkJCQl1bmtub3duMzogaXNTZXQoZC51bmtub3duMykgPyBnbG9iYWxUaGlzLk51bWJlcihkLnVua25vd24zKSA6IHZvaWQgMAoJCQkJCX07CgkJCQl9LAoJCQkJdG9KU09OKGQpIHsKCQkJCQlsZXQgZiA9IHt9OwoJCQkJCXJldHVybiBkLnVybCAhPT0gdm9pZCAwICYmIChmLnVybCA9IGQudXJsKSwgZC5kdXJhdGlvbiAhPT0gdm9pZCAwICYmIChmLmR1cmF0aW9uID0gZC5kdXJhdGlvbiksIGQuc3RhdHVzICE9PSAwICYmIChmLnN0YXR1cyA9IE1hdGgucm91bmQoZC5zdGF0dXMpKSwgZC5yZW1haW5pbmdUaW1lICE9PSB2b2lkIDAgJiYgKGYucmVtYWluaW5nVGltZSA9IE1hdGgucm91bmQoZC5yZW1haW5pbmdUaW1lKSksIGQudW5rbm93bjAgIT09IHZvaWQgMCAmJiAoZi51bmtub3duMCA9IE1hdGgucm91bmQoZC51bmtub3duMCkpLCBkLnRyYW5zbGF0aW9uSWQgIT09ICIiICYmIChmLnRyYW5zbGF0aW9uSWQgPSBkLnRyYW5zbGF0aW9uSWQpLCBkLmxhbmd1YWdlICE9PSB2b2lkIDAgJiYgKGYubGFuZ3VhZ2UgPSBkLmxhbmd1YWdlKSwgZC5tZXNzYWdlICE9PSB2b2lkIDAgJiYgKGYubWVzc2FnZSA9IGQubWVzc2FnZSksIGQuaXNMaXZlbHlWb2ljZSAhPT0gITEgJiYgKGYuaXNMaXZlbHlWb2ljZSA9IGQuaXNMaXZlbHlWb2ljZSksIGQudW5rbm93bjIgIT09IHZvaWQgMCAmJiAoZi51bmtub3duMiA9IE1hdGgucm91bmQoZC51bmtub3duMikpLCBkLnNob3VsZFJldHJ5ICE9PSB2b2lkIDAgJiYgKGYuc2hvdWxkUmV0cnkgPSBNYXRoLnJvdW5kKGQuc2hvdWxkUmV0cnkpKSwgZC51bmtub3duMyAhPT0gdm9pZCAwICYmIChmLnVua25vd24zID0gTWF0aC5yb3VuZChkLnVua25vd24zKSksIGY7CgkJCQl9LAoJCQkJY3JlYXRlKGQpIHsKCQkJCQlyZXR1cm4gQS5mcm9tUGFydGlhbChkID8/IHt9KTsKCQkJCX0sCgkJCQlmcm9tUGFydGlhbChkKSB7CgkJCQkJbGV0IGYgPSBjcmVhdGVCYXNlVmlkZW9UcmFuc2xhdGlvblJlc3BvbnNlKCk7CgkJCQkJcmV0dXJuIGYudXJsID0gZC51cmwgPz8gdm9pZCAwLCBmLmR1cmF0aW9uID0gZC5kdXJhdGlvbiA/PyB2b2lkIDAsIGYuc3RhdHVzID0gZC5zdGF0dXMgPz8gMCwgZi5yZW1haW5pbmdUaW1lID0gZC5yZW1haW5pbmdUaW1lID8/IHZvaWQgMCwgZi51bmtub3duMCA9IGQudW5rbm93bjAgPz8gdm9pZCAwLCBmLnRyYW5zbGF0aW9uSWQgPSBkLnRyYW5zbGF0aW9uSWQgPz8gIiIsIGYubGFuZ3VhZ2UgPSBkLmxhbmd1YWdlID8/IHZvaWQgMCwgZi5tZXNzYWdlID0gZC5tZXNzYWdlID8/IHZvaWQgMCwgZi5pc0xpdmVseVZvaWNlID0gZC5pc0xpdmVseVZvaWNlID8/ICExLCBmLnVua25vd24yID0gZC51bmtub3duMiA/PyB2b2lkIDAsIGYuc2hvdWxkUmV0cnkgPSBkLnNob3VsZFJldHJ5ID8/IHZvaWQgMCwgZi51bmtub3duMyA9IGQudW5rbm93bjMgPz8gdm9pZCAwLCBmOwoJCQkJfQoJCQl9OwoJCQlmdW5jdGlvbiBjcmVhdGVCYXNlVmlkZW9UcmFuc2xhdGlvbkNhY2hlSXRlbSgpIHsKCQkJCXJldHVybiB7CgkJCQkJc3RhdHVzOiAwLAoJCQkJCXJlbWFpbmluZ1RpbWU6IHZvaWQgMCwKCQkJCQltZXNzYWdlOiB2b2lkIDAsCgkJCQkJdW5rbm93bjA6IHZvaWQgMAoJCQkJfTsKCQkJfQoJCQlsZXQgaiA9IHsKCQkJCWVuY29kZShkLCBmID0gbmV3IEJpbmFyeVdyaXRlcigpKSB7CgkJCQkJcmV0dXJuIGQuc3RhdHVzICE9PSAwICYmIGYudWludDMyKDgpLmludDMyKGQuc3RhdHVzKSwgZC5yZW1haW5pbmdUaW1lICE9PSB2b2lkIDAgJiYgZi51aW50MzIoMTYpLmludDMyKGQucmVtYWluaW5nVGltZSksIGQubWVzc2FnZSAhPT0gdm9pZCAwICYmIGYudWludDMyKDI2KS5zdHJpbmcoZC5tZXNzYWdlKSwgZC51bmtub3duMCAhPT0gdm9pZCAwICYmIGYudWludDMyKDMyKS5pbnQzMihkLnVua25vd24wKSwgZjsKCQkJCX0sCgkJCQlkZWNvZGUoZCwgZikgewoJCQkJCWxldCBwID0gZCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlciA/IGQgOiBuZXcgQmluYXJ5UmVhZGVyKGQpLCBtID0gZiA9PT0gdm9pZCAwID8gcC5sZW4gOiBwLnBvcyArIGYsIGggPSBjcmVhdGVCYXNlVmlkZW9UcmFuc2xhdGlvbkNhY2hlSXRlbSgpOwoJCQkJCWZvciAoOyBwLnBvcyA8IG07KSB7CgkJCQkJCWxldCBkID0gcC51aW50MzIoKTsKCQkJCQkJc3dpdGNoIChkID4+PiAzKSB7CgkJCQkJCQljYXNlIDE6CgkJCQkJCQkJaWYgKGQgIT09IDgpIGJyZWFrOwoJCQkJCQkJCWguc3RhdHVzID0gcC5pbnQzMigpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQkJY2FzZSAyOgoJCQkJCQkJCWlmIChkICE9PSAxNikgYnJlYWs7CgkJCQkJCQkJaC5yZW1haW5pbmdUaW1lID0gcC5pbnQzMigpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQkJY2FzZSAzOgoJCQkJCQkJCWlmIChkICE9PSAyNikgYnJlYWs7CgkJCQkJCQkJaC5tZXNzYWdlID0gcC5zdHJpbmcoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgNDoKCQkJCQkJCQlpZiAoZCAhPT0gMzIpIGJyZWFrOwoJCQkJCQkJCWgudW5rbm93bjAgPSBwLmludDMyKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCX0KCQkJCQkJaWYgKChkICYgNykgPT0gNCB8fCBkID09PSAwKSBicmVhazsKCQkJCQkJcC5za2lwKGQgJiA3KTsKCQkJCQl9CgkJCQkJcmV0dXJuIGg7CgkJCQl9LAoJCQkJZnJvbUpTT04oZCkgewoJCQkJCXJldHVybiB7CgkJCQkJCXN0YXR1czogaXNTZXQoZC5zdGF0dXMpID8gZ2xvYmFsVGhpcy5OdW1iZXIoZC5zdGF0dXMpIDogMCwKCQkJCQkJcmVtYWluaW5nVGltZTogaXNTZXQoZC5yZW1haW5pbmdUaW1lKSA/IGdsb2JhbFRoaXMuTnVtYmVyKGQucmVtYWluaW5nVGltZSkgOiB2b2lkIDAsCgkJCQkJCW1lc3NhZ2U6IGlzU2V0KGQubWVzc2FnZSkgPyBnbG9iYWxUaGlzLlN0cmluZyhkLm1lc3NhZ2UpIDogdm9pZCAwLAoJCQkJCQl1bmtub3duMDogaXNTZXQoZC51bmtub3duMCkgPyBnbG9iYWxUaGlzLk51bWJlcihkLnVua25vd24wKSA6IHZvaWQgMAoJCQkJCX07CgkJCQl9LAoJCQkJdG9KU09OKGQpIHsKCQkJCQlsZXQgZiA9IHt9OwoJCQkJCXJldHVybiBkLnN0YXR1cyAhPT0gMCAmJiAoZi5zdGF0dXMgPSBNYXRoLnJvdW5kKGQuc3RhdHVzKSksIGQucmVtYWluaW5nVGltZSAhPT0gdm9pZCAwICYmIChmLnJlbWFpbmluZ1RpbWUgPSBNYXRoLnJvdW5kKGQucmVtYWluaW5nVGltZSkpLCBkLm1lc3NhZ2UgIT09IHZvaWQgMCAmJiAoZi5tZXNzYWdlID0gZC5tZXNzYWdlKSwgZC51bmtub3duMCAhPT0gdm9pZCAwICYmIChmLnVua25vd24wID0gTWF0aC5yb3VuZChkLnVua25vd24wKSksIGY7CgkJCQl9LAoJCQkJY3JlYXRlKGQpIHsKCQkJCQlyZXR1cm4gai5mcm9tUGFydGlhbChkID8/IHt9KTsKCQkJCX0sCgkJCQlmcm9tUGFydGlhbChkKSB7CgkJCQkJbGV0IGYgPSBjcmVhdGVCYXNlVmlkZW9UcmFuc2xhdGlvbkNhY2hlSXRlbSgpOwoJCQkJCXJldHVybiBmLnN0YXR1cyA9IGQuc3RhdHVzID8/IDAsIGYucmVtYWluaW5nVGltZSA9IGQucmVtYWluaW5nVGltZSA/PyB2b2lkIDAsIGYubWVzc2FnZSA9IGQubWVzc2FnZSA/PyB2b2lkIDAsIGYudW5rbm93bjAgPSBkLnVua25vd24wID8/IHZvaWQgMCwgZjsKCQkJCX0KCQkJfTsKCQkJZnVuY3Rpb24gY3JlYXRlQmFzZVZpZGVvVHJhbnNsYXRpb25DYWNoZVJlcXVlc3QoKSB7CgkJCQlyZXR1cm4gewoJCQkJCXVybDogIiIsCgkJCQkJZHVyYXRpb246IDAsCgkJCQkJbGFuZ3VhZ2U6ICIiLAoJCQkJCXJlc3BvbnNlTGFuZ3VhZ2U6ICIiCgkJCQl9OwoJCQl9CgkJCWxldCBGID0gewoJCQkJZW5jb2RlKGQsIGYgPSBuZXcgQmluYXJ5V3JpdGVyKCkpIHsKCQkJCQlyZXR1cm4gZC51cmwgIT09ICIiICYmIGYudWludDMyKDEwKS5zdHJpbmcoZC51cmwpLCBkLmR1cmF0aW9uICE9PSAwICYmIGYudWludDMyKDE3KS5kb3VibGUoZC5kdXJhdGlvbiksIGQubGFuZ3VhZ2UgIT09ICIiICYmIGYudWludDMyKDI2KS5zdHJpbmcoZC5sYW5ndWFnZSksIGQucmVzcG9uc2VMYW5ndWFnZSAhPT0gIiIgJiYgZi51aW50MzIoMzQpLnN0cmluZyhkLnJlc3BvbnNlTGFuZ3VhZ2UpLCBmOwoJCQkJfSwKCQkJCWRlY29kZShkLCBmKSB7CgkJCQkJbGV0IHAgPSBkIGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyID8gZCA6IG5ldyBCaW5hcnlSZWFkZXIoZCksIG0gPSBmID09PSB2b2lkIDAgPyBwLmxlbiA6IHAucG9zICsgZiwgaCA9IGNyZWF0ZUJhc2VWaWRlb1RyYW5zbGF0aW9uQ2FjaGVSZXF1ZXN0KCk7CgkJCQkJZm9yICg7IHAucG9zIDwgbTspIHsKCQkJCQkJbGV0IGQgPSBwLnVpbnQzMigpOwoJCQkJCQlzd2l0Y2ggKGQgPj4+IDMpIHsKCQkJCQkJCWNhc2UgMToKCQkJCQkJCQlpZiAoZCAhPT0gMTApIGJyZWFrOwoJCQkJCQkJCWgudXJsID0gcC5zdHJpbmcoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgMjoKCQkJCQkJCQlpZiAoZCAhPT0gMTcpIGJyZWFrOwoJCQkJCQkJCWguZHVyYXRpb24gPSBwLmRvdWJsZSgpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQkJY2FzZSAzOgoJCQkJCQkJCWlmIChkICE9PSAyNikgYnJlYWs7CgkJCQkJCQkJaC5sYW5ndWFnZSA9IHAuc3RyaW5nKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDQ6CgkJCQkJCQkJaWYgKGQgIT09IDM0KSBicmVhazsKCQkJCQkJCQloLnJlc3BvbnNlTGFuZ3VhZ2UgPSBwLnN0cmluZygpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQl9CgkJCQkJCWlmICgoZCAmIDcpID09IDQgfHwgZCA9PT0gMCkgYnJlYWs7CgkJCQkJCXAuc2tpcChkICYgNyk7CgkJCQkJfQoJCQkJCXJldHVybiBoOwoJCQkJfSwKCQkJCWZyb21KU09OKGQpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQl1cmw6IGlzU2V0KGQudXJsKSA/IGdsb2JhbFRoaXMuU3RyaW5nKGQudXJsKSA6ICIiLAoJCQkJCQlkdXJhdGlvbjogaXNTZXQoZC5kdXJhdGlvbikgPyBnbG9iYWxUaGlzLk51bWJlcihkLmR1cmF0aW9uKSA6IDAsCgkJCQkJCWxhbmd1YWdlOiBpc1NldChkLmxhbmd1YWdlKSA/IGdsb2JhbFRoaXMuU3RyaW5nKGQubGFuZ3VhZ2UpIDogIiIsCgkJCQkJCXJlc3BvbnNlTGFuZ3VhZ2U6IGlzU2V0KGQucmVzcG9uc2VMYW5ndWFnZSkgPyBnbG9iYWxUaGlzLlN0cmluZyhkLnJlc3BvbnNlTGFuZ3VhZ2UpIDogIiIKCQkJCQl9OwoJCQkJfSwKCQkJCXRvSlNPTihkKSB7CgkJCQkJbGV0IGYgPSB7fTsKCQkJCQlyZXR1cm4gZC51cmwgIT09ICIiICYmIChmLnVybCA9IGQudXJsKSwgZC5kdXJhdGlvbiAhPT0gMCAmJiAoZi5kdXJhdGlvbiA9IGQuZHVyYXRpb24pLCBkLmxhbmd1YWdlICE9PSAiIiAmJiAoZi5sYW5ndWFnZSA9IGQubGFuZ3VhZ2UpLCBkLnJlc3BvbnNlTGFuZ3VhZ2UgIT09ICIiICYmIChmLnJlc3BvbnNlTGFuZ3VhZ2UgPSBkLnJlc3BvbnNlTGFuZ3VhZ2UpLCBmOwoJCQkJfSwKCQkJCWNyZWF0ZShkKSB7CgkJCQkJcmV0dXJuIEYuZnJvbVBhcnRpYWwoZCA/PyB7fSk7CgkJCQl9LAoJCQkJZnJvbVBhcnRpYWwoZCkgewoJCQkJCWxldCBmID0gY3JlYXRlQmFzZVZpZGVvVHJhbnNsYXRpb25DYWNoZVJlcXVlc3QoKTsKCQkJCQlyZXR1cm4gZi51cmwgPSBkLnVybCA/PyAiIiwgZi5kdXJhdGlvbiA9IGQuZHVyYXRpb24gPz8gMCwgZi5sYW5ndWFnZSA9IGQubGFuZ3VhZ2UgPz8gIiIsIGYucmVzcG9uc2VMYW5ndWFnZSA9IGQucmVzcG9uc2VMYW5ndWFnZSA/PyAiIiwgZjsKCQkJCX0KCQkJfTsKCQkJZnVuY3Rpb24gY3JlYXRlQmFzZVZpZGVvVHJhbnNsYXRpb25DYWNoZVJlc3BvbnNlKCkgewoJCQkJcmV0dXJuIHsKCQkJCQlkZWZhdWx0OiB2b2lkIDAsCgkJCQkJY2xvbmluZzogdm9pZCAwCgkJCQl9OwoJCQl9CgkJCWxldCBVID0gewoJCQkJZW5jb2RlKGQsIGYgPSBuZXcgQmluYXJ5V3JpdGVyKCkpIHsKCQkJCQlyZXR1cm4gZC5kZWZhdWx0ICE9PSB2b2lkIDAgJiYgai5lbmNvZGUoZC5kZWZhdWx0LCBmLnVpbnQzMigxMCkuZm9yaygpKS5qb2luKCksIGQuY2xvbmluZyAhPT0gdm9pZCAwICYmIGouZW5jb2RlKGQuY2xvbmluZywgZi51aW50MzIoMTgpLmZvcmsoKSkuam9pbigpLCBmOwoJCQkJfSwKCQkJCWRlY29kZShkLCBmKSB7CgkJCQkJbGV0IHAgPSBkIGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyID8gZCA6IG5ldyBCaW5hcnlSZWFkZXIoZCksIG0gPSBmID09PSB2b2lkIDAgPyBwLmxlbiA6IHAucG9zICsgZiwgaCA9IGNyZWF0ZUJhc2VWaWRlb1RyYW5zbGF0aW9uQ2FjaGVSZXNwb25zZSgpOwoJCQkJCWZvciAoOyBwLnBvcyA8IG07KSB7CgkJCQkJCWxldCBkID0gcC51aW50MzIoKTsKCQkJCQkJc3dpdGNoIChkID4+PiAzKSB7CgkJCQkJCQljYXNlIDE6CgkJCQkJCQkJaWYgKGQgIT09IDEwKSBicmVhazsKCQkJCQkJCQloLmRlZmF1bHQgPSBqLmRlY29kZShwLCBwLnVpbnQzMigpKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgMjoKCQkJCQkJCQlpZiAoZCAhPT0gMTgpIGJyZWFrOwoJCQkJCQkJCWguY2xvbmluZyA9IGouZGVjb2RlKHAsIHAudWludDMyKCkpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQl9CgkJCQkJCWlmICgoZCAmIDcpID09IDQgfHwgZCA9PT0gMCkgYnJlYWs7CgkJCQkJCXAuc2tpcChkICYgNyk7CgkJCQkJfQoJCQkJCXJldHVybiBoOwoJCQkJfSwKCQkJCWZyb21KU09OKGQpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQlkZWZhdWx0OiBpc1NldChkLmRlZmF1bHQpID8gai5mcm9tSlNPTihkLmRlZmF1bHQpIDogdm9pZCAwLAoJCQkJCQljbG9uaW5nOiBpc1NldChkLmNsb25pbmcpID8gai5mcm9tSlNPTihkLmNsb25pbmcpIDogdm9pZCAwCgkJCQkJfTsKCQkJCX0sCgkJCQl0b0pTT04oZCkgewoJCQkJCWxldCBmID0ge307CgkJCQkJcmV0dXJuIGQuZGVmYXVsdCAhPT0gdm9pZCAwICYmIChmLmRlZmF1bHQgPSBqLnRvSlNPTihkLmRlZmF1bHQpKSwgZC5jbG9uaW5nICE9PSB2b2lkIDAgJiYgKGYuY2xvbmluZyA9IGoudG9KU09OKGQuY2xvbmluZykpLCBmOwoJCQkJfSwKCQkJCWNyZWF0ZShkKSB7CgkJCQkJcmV0dXJuIFUuZnJvbVBhcnRpYWwoZCA/PyB7fSk7CgkJCQl9LAoJCQkJZnJvbVBhcnRpYWwoZCkgewoJCQkJCWxldCBmID0gY3JlYXRlQmFzZVZpZGVvVHJhbnNsYXRpb25DYWNoZVJlc3BvbnNlKCk7CgkJCQkJcmV0dXJuIGYuZGVmYXVsdCA9IGQuZGVmYXVsdCAhPT0gdm9pZCAwICYmIGQuZGVmYXVsdCAhPT0gbnVsbCA/IGouZnJvbVBhcnRpYWwoZC5kZWZhdWx0KSA6IHZvaWQgMCwgZi5jbG9uaW5nID0gZC5jbG9uaW5nICE9PSB2b2lkIDAgJiYgZC5jbG9uaW5nICE9PSBudWxsID8gai5mcm9tUGFydGlhbChkLmNsb25pbmcpIDogdm9pZCAwLCBmOwoJCQkJfQoJCQl9OwoJCQlmdW5jdGlvbiBjcmVhdGVCYXNlQXVkaW9CdWZmZXJPYmplY3QoKSB7CgkJCQlyZXR1cm4gewoJCQkJCWF1ZGlvRmlsZTogbmV3IFVpbnQ4QXJyYXkoKSwKCQkJCQlmaWxlSWQ6ICIiCgkJCQl9OwoJCQl9CgkJCWxldCBXID0gewoJCQkJZW5jb2RlKGQsIGYgPSBuZXcgQmluYXJ5V3JpdGVyKCkpIHsKCQkJCQlyZXR1cm4gZC5hdWRpb0ZpbGUubGVuZ3RoICE9PSAwICYmIGYudWludDMyKDE4KS5ieXRlcyhkLmF1ZGlvRmlsZSksIGQuZmlsZUlkICE9PSAiIiAmJiBmLnVpbnQzMigxMCkuc3RyaW5nKGQuZmlsZUlkKSwgZjsKCQkJCX0sCgkJCQlkZWNvZGUoZCwgZikgewoJCQkJCWxldCBwID0gZCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlciA/IGQgOiBuZXcgQmluYXJ5UmVhZGVyKGQpLCBtID0gZiA9PT0gdm9pZCAwID8gcC5sZW4gOiBwLnBvcyArIGYsIGggPSBjcmVhdGVCYXNlQXVkaW9CdWZmZXJPYmplY3QoKTsKCQkJCQlmb3IgKDsgcC5wb3MgPCBtOykgewoJCQkJCQlsZXQgZCA9IHAudWludDMyKCk7CgkJCQkJCXN3aXRjaCAoZCA+Pj4gMykgewoJCQkJCQkJY2FzZSAyOgoJCQkJCQkJCWlmIChkICE9PSAxOCkgYnJlYWs7CgkJCQkJCQkJaC5hdWRpb0ZpbGUgPSBwLmJ5dGVzKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDE6CgkJCQkJCQkJaWYgKGQgIT09IDEwKSBicmVhazsKCQkJCQkJCQloLmZpbGVJZCA9IHAuc3RyaW5nKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCX0KCQkJCQkJaWYgKChkICYgNykgPT0gNCB8fCBkID09PSAwKSBicmVhazsKCQkJCQkJcC5za2lwKGQgJiA3KTsKCQkJCQl9CgkJCQkJcmV0dXJuIGg7CgkJCQl9LAoJCQkJZnJvbUpTT04oZCkgewoJCQkJCXJldHVybiB7CgkJCQkJCWF1ZGlvRmlsZTogaXNTZXQoZC5hdWRpb0ZpbGUpID8gYnl0ZXNGcm9tQmFzZTY0KGQuYXVkaW9GaWxlKSA6IG5ldyBVaW50OEFycmF5KCksCgkJCQkJCWZpbGVJZDogaXNTZXQoZC5maWxlSWQpID8gZ2xvYmFsVGhpcy5TdHJpbmcoZC5maWxlSWQpIDogIiIKCQkJCQl9OwoJCQkJfSwKCQkJCXRvSlNPTihkKSB7CgkJCQkJbGV0IGYgPSB7fTsKCQkJCQlyZXR1cm4gZC5hdWRpb0ZpbGUubGVuZ3RoICE9PSAwICYmIChmLmF1ZGlvRmlsZSA9IGJhc2U2NEZyb21CeXRlcyhkLmF1ZGlvRmlsZSkpLCBkLmZpbGVJZCAhPT0gIiIgJiYgKGYuZmlsZUlkID0gZC5maWxlSWQpLCBmOwoJCQkJfSwKCQkJCWNyZWF0ZShkKSB7CgkJCQkJcmV0dXJuIFcuZnJvbVBhcnRpYWwoZCA/PyB7fSk7CgkJCQl9LAoJCQkJZnJvbVBhcnRpYWwoZCkgewoJCQkJCWxldCBmID0gY3JlYXRlQmFzZUF1ZGlvQnVmZmVyT2JqZWN0KCk7CgkJCQkJcmV0dXJuIGYuYXVkaW9GaWxlID0gZC5hdWRpb0ZpbGUgPz8gbmV3IFVpbnQ4QXJyYXkoKSwgZi5maWxlSWQgPSBkLmZpbGVJZCA/PyAiIiwgZjsKCQkJCX0KCQkJfTsKCQkJZnVuY3Rpb24gY3JlYXRlQmFzZVBhcnRpYWxBdWRpb0J1ZmZlck9iamVjdCgpIHsKCQkJCXJldHVybiB7CgkJCQkJYXVkaW9GaWxlOiBuZXcgVWludDhBcnJheSgpLAoJCQkJCWNodW5rSWQ6IDAKCQkJCX07CgkJCX0KCQkJbGV0IEcgPSB7CgkJCQllbmNvZGUoZCwgZiA9IG5ldyBCaW5hcnlXcml0ZXIoKSkgewoJCQkJCXJldHVybiBkLmF1ZGlvRmlsZS5sZW5ndGggIT09IDAgJiYgZi51aW50MzIoMTgpLmJ5dGVzKGQuYXVkaW9GaWxlKSwgZC5jaHVua0lkICE9PSAwICYmIGYudWludDMyKDgpLmludDMyKGQuY2h1bmtJZCksIGY7CgkJCQl9LAoJCQkJZGVjb2RlKGQsIGYpIHsKCQkJCQlsZXQgcCA9IGQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXIgPyBkIDogbmV3IEJpbmFyeVJlYWRlcihkKSwgbSA9IGYgPT09IHZvaWQgMCA/IHAubGVuIDogcC5wb3MgKyBmLCBoID0gY3JlYXRlQmFzZVBhcnRpYWxBdWRpb0J1ZmZlck9iamVjdCgpOwoJCQkJCWZvciAoOyBwLnBvcyA8IG07KSB7CgkJCQkJCWxldCBkID0gcC51aW50MzIoKTsKCQkJCQkJc3dpdGNoIChkID4+PiAzKSB7CgkJCQkJCQljYXNlIDI6CgkJCQkJCQkJaWYgKGQgIT09IDE4KSBicmVhazsKCQkJCQkJCQloLmF1ZGlvRmlsZSA9IHAuYnl0ZXMoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgMToKCQkJCQkJCQlpZiAoZCAhPT0gOCkgYnJlYWs7CgkJCQkJCQkJaC5jaHVua0lkID0gcC5pbnQzMigpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQl9CgkJCQkJCWlmICgoZCAmIDcpID09IDQgfHwgZCA9PT0gMCkgYnJlYWs7CgkJCQkJCXAuc2tpcChkICYgNyk7CgkJCQkJfQoJCQkJCXJldHVybiBoOwoJCQkJfSwKCQkJCWZyb21KU09OKGQpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQlhdWRpb0ZpbGU6IGlzU2V0KGQuYXVkaW9GaWxlKSA/IGJ5dGVzRnJvbUJhc2U2NChkLmF1ZGlvRmlsZSkgOiBuZXcgVWludDhBcnJheSgpLAoJCQkJCQljaHVua0lkOiBpc1NldChkLmNodW5rSWQpID8gZ2xvYmFsVGhpcy5OdW1iZXIoZC5jaHVua0lkKSA6IDAKCQkJCQl9OwoJCQkJfSwKCQkJCXRvSlNPTihkKSB7CgkJCQkJbGV0IGYgPSB7fTsKCQkJCQlyZXR1cm4gZC5hdWRpb0ZpbGUubGVuZ3RoICE9PSAwICYmIChmLmF1ZGlvRmlsZSA9IGJhc2U2NEZyb21CeXRlcyhkLmF1ZGlvRmlsZSkpLCBkLmNodW5rSWQgIT09IDAgJiYgKGYuY2h1bmtJZCA9IE1hdGgucm91bmQoZC5jaHVua0lkKSksIGY7CgkJCQl9LAoJCQkJY3JlYXRlKGQpIHsKCQkJCQlyZXR1cm4gRy5mcm9tUGFydGlhbChkID8/IHt9KTsKCQkJCX0sCgkJCQlmcm9tUGFydGlhbChkKSB7CgkJCQkJbGV0IGYgPSBjcmVhdGVCYXNlUGFydGlhbEF1ZGlvQnVmZmVyT2JqZWN0KCk7CgkJCQkJcmV0dXJuIGYuYXVkaW9GaWxlID0gZC5hdWRpb0ZpbGUgPz8gbmV3IFVpbnQ4QXJyYXkoKSwgZi5jaHVua0lkID0gZC5jaHVua0lkID8/IDAsIGY7CgkJCQl9CgkJCX07CgkJCWZ1bmN0aW9uIGNyZWF0ZUJhc2VDaHVua0F1ZGlvT2JqZWN0KCkgewoJCQkJcmV0dXJuIHsKCQkJCQlhdWRpb0J1ZmZlcjogdm9pZCAwLAoJCQkJCWF1ZGlvUGFydHNMZW5ndGg6IDAsCgkJCQkJZmlsZUlkOiAiIiwKCQkJCQl2ZXJzaW9uOiAwCgkJCQl9OwoJCQl9CgkJCWxldCBLID0gewoJCQkJZW5jb2RlKGQsIGYgPSBuZXcgQmluYXJ5V3JpdGVyKCkpIHsKCQkJCQlyZXR1cm4gZC5hdWRpb0J1ZmZlciAhPT0gdm9pZCAwICYmIEcuZW5jb2RlKGQuYXVkaW9CdWZmZXIsIGYudWludDMyKDEwKS5mb3JrKCkpLmpvaW4oKSwgZC5hdWRpb1BhcnRzTGVuZ3RoICE9PSAwICYmIGYudWludDMyKDE2KS5pbnQzMihkLmF1ZGlvUGFydHNMZW5ndGgpLCBkLmZpbGVJZCAhPT0gIiIgJiYgZi51aW50MzIoMjYpLnN0cmluZyhkLmZpbGVJZCksIGQudmVyc2lvbiAhPT0gMCAmJiBmLnVpbnQzMigzMikuaW50MzIoZC52ZXJzaW9uKSwgZjsKCQkJCX0sCgkJCQlkZWNvZGUoZCwgZikgewoJCQkJCWxldCBwID0gZCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlciA/IGQgOiBuZXcgQmluYXJ5UmVhZGVyKGQpLCBtID0gZiA9PT0gdm9pZCAwID8gcC5sZW4gOiBwLnBvcyArIGYsIGggPSBjcmVhdGVCYXNlQ2h1bmtBdWRpb09iamVjdCgpOwoJCQkJCWZvciAoOyBwLnBvcyA8IG07KSB7CgkJCQkJCWxldCBkID0gcC51aW50MzIoKTsKCQkJCQkJc3dpdGNoIChkID4+PiAzKSB7CgkJCQkJCQljYXNlIDE6CgkJCQkJCQkJaWYgKGQgIT09IDEwKSBicmVhazsKCQkJCQkJCQloLmF1ZGlvQnVmZmVyID0gRy5kZWNvZGUocCwgcC51aW50MzIoKSk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDI6CgkJCQkJCQkJaWYgKGQgIT09IDE2KSBicmVhazsKCQkJCQkJCQloLmF1ZGlvUGFydHNMZW5ndGggPSBwLmludDMyKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDM6CgkJCQkJCQkJaWYgKGQgIT09IDI2KSBicmVhazsKCQkJCQkJCQloLmZpbGVJZCA9IHAuc3RyaW5nKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDQ6CgkJCQkJCQkJaWYgKGQgIT09IDMyKSBicmVhazsKCQkJCQkJCQloLnZlcnNpb24gPSBwLmludDMyKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCX0KCQkJCQkJaWYgKChkICYgNykgPT0gNCB8fCBkID09PSAwKSBicmVhazsKCQkJCQkJcC5za2lwKGQgJiA3KTsKCQkJCQl9CgkJCQkJcmV0dXJuIGg7CgkJCQl9LAoJCQkJZnJvbUpTT04oZCkgewoJCQkJCXJldHVybiB7CgkJCQkJCWF1ZGlvQnVmZmVyOiBpc1NldChkLmF1ZGlvQnVmZmVyKSA/IEcuZnJvbUpTT04oZC5hdWRpb0J1ZmZlcikgOiB2b2lkIDAsCgkJCQkJCWF1ZGlvUGFydHNMZW5ndGg6IGlzU2V0KGQuYXVkaW9QYXJ0c0xlbmd0aCkgPyBnbG9iYWxUaGlzLk51bWJlcihkLmF1ZGlvUGFydHNMZW5ndGgpIDogMCwKCQkJCQkJZmlsZUlkOiBpc1NldChkLmZpbGVJZCkgPyBnbG9iYWxUaGlzLlN0cmluZyhkLmZpbGVJZCkgOiAiIiwKCQkJCQkJdmVyc2lvbjogaXNTZXQoZC52ZXJzaW9uKSA/IGdsb2JhbFRoaXMuTnVtYmVyKGQudmVyc2lvbikgOiAwCgkJCQkJfTsKCQkJCX0sCgkJCQl0b0pTT04oZCkgewoJCQkJCWxldCBmID0ge307CgkJCQkJcmV0dXJuIGQuYXVkaW9CdWZmZXIgIT09IHZvaWQgMCAmJiAoZi5hdWRpb0J1ZmZlciA9IEcudG9KU09OKGQuYXVkaW9CdWZmZXIpKSwgZC5hdWRpb1BhcnRzTGVuZ3RoICE9PSAwICYmIChmLmF1ZGlvUGFydHNMZW5ndGggPSBNYXRoLnJvdW5kKGQuYXVkaW9QYXJ0c0xlbmd0aCkpLCBkLmZpbGVJZCAhPT0gIiIgJiYgKGYuZmlsZUlkID0gZC5maWxlSWQpLCBkLnZlcnNpb24gIT09IDAgJiYgKGYudmVyc2lvbiA9IE1hdGgucm91bmQoZC52ZXJzaW9uKSksIGY7CgkJCQl9LAoJCQkJY3JlYXRlKGQpIHsKCQkJCQlyZXR1cm4gSy5mcm9tUGFydGlhbChkID8/IHt9KTsKCQkJCX0sCgkJCQlmcm9tUGFydGlhbChkKSB7CgkJCQkJbGV0IGYgPSBjcmVhdGVCYXNlQ2h1bmtBdWRpb09iamVjdCgpOwoJCQkJCXJldHVybiBmLmF1ZGlvQnVmZmVyID0gZC5hdWRpb0J1ZmZlciAhPT0gdm9pZCAwICYmIGQuYXVkaW9CdWZmZXIgIT09IG51bGwgPyBHLmZyb21QYXJ0aWFsKGQuYXVkaW9CdWZmZXIpIDogdm9pZCAwLCBmLmF1ZGlvUGFydHNMZW5ndGggPSBkLmF1ZGlvUGFydHNMZW5ndGggPz8gMCwgZi5maWxlSWQgPSBkLmZpbGVJZCA/PyAiIiwgZi52ZXJzaW9uID0gZC52ZXJzaW9uID8/IDAsIGY7CgkJCQl9CgkJCX07CgkJCWZ1bmN0aW9uIGNyZWF0ZUJhc2VWaWRlb1RyYW5zbGF0aW9uQXVkaW9SZXF1ZXN0KCkgewoJCQkJcmV0dXJuIHsKCQkJCQl0cmFuc2xhdGlvbklkOiAiIiwKCQkJCQl1cmw6ICIiLAoJCQkJCXBhcnRpYWxBdWRpb0luZm86IHZvaWQgMCwKCQkJCQlhdWRpb0luZm86IHZvaWQgMAoJCQkJfTsKCQkJfQoJCQlsZXQgcSA9IHsKCQkJCWVuY29kZShkLCBmID0gbmV3IEJpbmFyeVdyaXRlcigpKSB7CgkJCQkJcmV0dXJuIGQudHJhbnNsYXRpb25JZCAhPT0gIiIgJiYgZi51aW50MzIoMTApLnN0cmluZyhkLnRyYW5zbGF0aW9uSWQpLCBkLnVybCAhPT0gIiIgJiYgZi51aW50MzIoMTgpLnN0cmluZyhkLnVybCksIGQucGFydGlhbEF1ZGlvSW5mbyAhPT0gdm9pZCAwICYmIEsuZW5jb2RlKGQucGFydGlhbEF1ZGlvSW5mbywgZi51aW50MzIoMzQpLmZvcmsoKSkuam9pbigpLCBkLmF1ZGlvSW5mbyAhPT0gdm9pZCAwICYmIFcuZW5jb2RlKGQuYXVkaW9JbmZvLCBmLnVpbnQzMig1MCkuZm9yaygpKS5qb2luKCksIGY7CgkJCQl9LAoJCQkJZGVjb2RlKGQsIGYpIHsKCQkJCQlsZXQgcCA9IGQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXIgPyBkIDogbmV3IEJpbmFyeVJlYWRlcihkKSwgbSA9IGYgPT09IHZvaWQgMCA/IHAubGVuIDogcC5wb3MgKyBmLCBoID0gY3JlYXRlQmFzZVZpZGVvVHJhbnNsYXRpb25BdWRpb1JlcXVlc3QoKTsKCQkJCQlmb3IgKDsgcC5wb3MgPCBtOykgewoJCQkJCQlsZXQgZCA9IHAudWludDMyKCk7CgkJCQkJCXN3aXRjaCAoZCA+Pj4gMykgewoJCQkJCQkJY2FzZSAxOgoJCQkJCQkJCWlmIChkICE9PSAxMCkgYnJlYWs7CgkJCQkJCQkJaC50cmFuc2xhdGlvbklkID0gcC5zdHJpbmcoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgMjoKCQkJCQkJCQlpZiAoZCAhPT0gMTgpIGJyZWFrOwoJCQkJCQkJCWgudXJsID0gcC5zdHJpbmcoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgNDoKCQkJCQkJCQlpZiAoZCAhPT0gMzQpIGJyZWFrOwoJCQkJCQkJCWgucGFydGlhbEF1ZGlvSW5mbyA9IEsuZGVjb2RlKHAsIHAudWludDMyKCkpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQkJY2FzZSA2OgoJCQkJCQkJCWlmIChkICE9PSA1MCkgYnJlYWs7CgkJCQkJCQkJaC5hdWRpb0luZm8gPSBXLmRlY29kZShwLCBwLnVpbnQzMigpKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJfQoJCQkJCQlpZiAoKGQgJiA3KSA9PSA0IHx8IGQgPT09IDApIGJyZWFrOwoJCQkJCQlwLnNraXAoZCAmIDcpOwoJCQkJCX0KCQkJCQlyZXR1cm4gaDsKCQkJCX0sCgkJCQlmcm9tSlNPTihkKSB7CgkJCQkJcmV0dXJuIHsKCQkJCQkJdHJhbnNsYXRpb25JZDogaXNTZXQoZC50cmFuc2xhdGlvbklkKSA/IGdsb2JhbFRoaXMuU3RyaW5nKGQudHJhbnNsYXRpb25JZCkgOiAiIiwKCQkJCQkJdXJsOiBpc1NldChkLnVybCkgPyBnbG9iYWxUaGlzLlN0cmluZyhkLnVybCkgOiAiIiwKCQkJCQkJcGFydGlhbEF1ZGlvSW5mbzogaXNTZXQoZC5wYXJ0aWFsQXVkaW9JbmZvKSA/IEsuZnJvbUpTT04oZC5wYXJ0aWFsQXVkaW9JbmZvKSA6IHZvaWQgMCwKCQkJCQkJYXVkaW9JbmZvOiBpc1NldChkLmF1ZGlvSW5mbykgPyBXLmZyb21KU09OKGQuYXVkaW9JbmZvKSA6IHZvaWQgMAoJCQkJCX07CgkJCQl9LAoJCQkJdG9KU09OKGQpIHsKCQkJCQlsZXQgZiA9IHt9OwoJCQkJCXJldHVybiBkLnRyYW5zbGF0aW9uSWQgIT09ICIiICYmIChmLnRyYW5zbGF0aW9uSWQgPSBkLnRyYW5zbGF0aW9uSWQpLCBkLnVybCAhPT0gIiIgJiYgKGYudXJsID0gZC51cmwpLCBkLnBhcnRpYWxBdWRpb0luZm8gIT09IHZvaWQgMCAmJiAoZi5wYXJ0aWFsQXVkaW9JbmZvID0gSy50b0pTT04oZC5wYXJ0aWFsQXVkaW9JbmZvKSksIGQuYXVkaW9JbmZvICE9PSB2b2lkIDAgJiYgKGYuYXVkaW9JbmZvID0gVy50b0pTT04oZC5hdWRpb0luZm8pKSwgZjsKCQkJCX0sCgkJCQljcmVhdGUoZCkgewoJCQkJCXJldHVybiBxLmZyb21QYXJ0aWFsKGQgPz8ge30pOwoJCQkJfSwKCQkJCWZyb21QYXJ0aWFsKGQpIHsKCQkJCQlsZXQgZiA9IGNyZWF0ZUJhc2VWaWRlb1RyYW5zbGF0aW9uQXVkaW9SZXF1ZXN0KCk7CgkJCQkJcmV0dXJuIGYudHJhbnNsYXRpb25JZCA9IGQudHJhbnNsYXRpb25JZCA/PyAiIiwgZi51cmwgPSBkLnVybCA/PyAiIiwgZi5wYXJ0aWFsQXVkaW9JbmZvID0gZC5wYXJ0aWFsQXVkaW9JbmZvICE9PSB2b2lkIDAgJiYgZC5wYXJ0aWFsQXVkaW9JbmZvICE9PSBudWxsID8gSy5mcm9tUGFydGlhbChkLnBhcnRpYWxBdWRpb0luZm8pIDogdm9pZCAwLCBmLmF1ZGlvSW5mbyA9IGQuYXVkaW9JbmZvICE9PSB2b2lkIDAgJiYgZC5hdWRpb0luZm8gIT09IG51bGwgPyBXLmZyb21QYXJ0aWFsKGQuYXVkaW9JbmZvKSA6IHZvaWQgMCwgZjsKCQkJCX0KCQkJfTsKCQkJZnVuY3Rpb24gY3JlYXRlQmFzZVZpZGVvVHJhbnNsYXRpb25BdWRpb1Jlc3BvbnNlKCkgewoJCQkJcmV0dXJuIHsKCQkJCQlzdGF0dXM6IDAsCgkJCQkJcmVtYWluaW5nQ2h1bmtzOiBbXQoJCQkJfTsKCQkJfQoJCQlsZXQgSiA9IHsKCQkJCWVuY29kZShkLCBmID0gbmV3IEJpbmFyeVdyaXRlcigpKSB7CgkJCQkJZC5zdGF0dXMgIT09IDAgJiYgZi51aW50MzIoOCkuaW50MzIoZC5zdGF0dXMpOwoJCQkJCWZvciAobGV0IHAgb2YgZC5yZW1haW5pbmdDaHVua3MpIGYudWludDMyKDE4KS5zdHJpbmcocCk7CgkJCQkJcmV0dXJuIGY7CgkJCQl9LAoJCQkJZGVjb2RlKGQsIGYpIHsKCQkJCQlsZXQgcCA9IGQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXIgPyBkIDogbmV3IEJpbmFyeVJlYWRlcihkKSwgbSA9IGYgPT09IHZvaWQgMCA/IHAubGVuIDogcC5wb3MgKyBmLCBoID0gY3JlYXRlQmFzZVZpZGVvVHJhbnNsYXRpb25BdWRpb1Jlc3BvbnNlKCk7CgkJCQkJZm9yICg7IHAucG9zIDwgbTspIHsKCQkJCQkJbGV0IGQgPSBwLnVpbnQzMigpOwoJCQkJCQlzd2l0Y2ggKGQgPj4+IDMpIHsKCQkJCQkJCWNhc2UgMToKCQkJCQkJCQlpZiAoZCAhPT0gOCkgYnJlYWs7CgkJCQkJCQkJaC5zdGF0dXMgPSBwLmludDMyKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDI6CgkJCQkJCQkJaWYgKGQgIT09IDE4KSBicmVhazsKCQkJCQkJCQloLnJlbWFpbmluZ0NodW5rcy5wdXNoKHAuc3RyaW5nKCkpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQl9CgkJCQkJCWlmICgoZCAmIDcpID09IDQgfHwgZCA9PT0gMCkgYnJlYWs7CgkJCQkJCXAuc2tpcChkICYgNyk7CgkJCQkJfQoJCQkJCXJldHVybiBoOwoJCQkJfSwKCQkJCWZyb21KU09OKGQpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQlzdGF0dXM6IGlzU2V0KGQuc3RhdHVzKSA/IGdsb2JhbFRoaXMuTnVtYmVyKGQuc3RhdHVzKSA6IDAsCgkJCQkJCXJlbWFpbmluZ0NodW5rczogZ2xvYmFsVGhpcy5BcnJheS5pc0FycmF5KGQ/LnJlbWFpbmluZ0NodW5rcykgPyBkLnJlbWFpbmluZ0NodW5rcy5tYXAoKGQpID0+IGdsb2JhbFRoaXMuU3RyaW5nKGQpKSA6IFtdCgkJCQkJfTsKCQkJCX0sCgkJCQl0b0pTT04oZCkgewoJCQkJCWxldCBmID0ge307CgkJCQkJcmV0dXJuIGQuc3RhdHVzICE9PSAwICYmIChmLnN0YXR1cyA9IE1hdGgucm91bmQoZC5zdGF0dXMpKSwgZC5yZW1haW5pbmdDaHVua3M/Lmxlbmd0aCAmJiAoZi5yZW1haW5pbmdDaHVua3MgPSBkLnJlbWFpbmluZ0NodW5rcyksIGY7CgkJCQl9LAoJCQkJY3JlYXRlKGQpIHsKCQkJCQlyZXR1cm4gSi5mcm9tUGFydGlhbChkID8/IHt9KTsKCQkJCX0sCgkJCQlmcm9tUGFydGlhbChkKSB7CgkJCQkJbGV0IGYgPSBjcmVhdGVCYXNlVmlkZW9UcmFuc2xhdGlvbkF1ZGlvUmVzcG9uc2UoKTsKCQkJCQlyZXR1cm4gZi5zdGF0dXMgPSBkLnN0YXR1cyA/PyAwLCBmLnJlbWFpbmluZ0NodW5rcyA9IGQucmVtYWluaW5nQ2h1bmtzPy5tYXAoKGQpID0+IGQpIHx8IFtdLCBmOwoJCQkJfQoJCQl9OwoJCQlmdW5jdGlvbiBjcmVhdGVCYXNlU3VidGl0bGVzT2JqZWN0KCkgewoJCQkJcmV0dXJuIHsKCQkJCQlsYW5ndWFnZTogIiIsCgkJCQkJdXJsOiAiIiwKCQkJCQl1bmtub3duMDogMCwKCQkJCQl0cmFuc2xhdGVkTGFuZ3VhZ2U6ICIiLAoJCQkJCXRyYW5zbGF0ZWRVcmw6ICIiLAoJCQkJCXVua25vd24xOiAwLAoJCQkJCXVua25vd24yOiAwCgkJCQl9OwoJCQl9CgkJCWxldCBZID0gewoJCQkJZW5jb2RlKGQsIGYgPSBuZXcgQmluYXJ5V3JpdGVyKCkpIHsKCQkJCQlyZXR1cm4gZC5sYW5ndWFnZSAhPT0gIiIgJiYgZi51aW50MzIoMTApLnN0cmluZyhkLmxhbmd1YWdlKSwgZC51cmwgIT09ICIiICYmIGYudWludDMyKDE4KS5zdHJpbmcoZC51cmwpLCBkLnVua25vd24wICE9PSAwICYmIGYudWludDMyKDI0KS5pbnQzMihkLnVua25vd24wKSwgZC50cmFuc2xhdGVkTGFuZ3VhZ2UgIT09ICIiICYmIGYudWludDMyKDM0KS5zdHJpbmcoZC50cmFuc2xhdGVkTGFuZ3VhZ2UpLCBkLnRyYW5zbGF0ZWRVcmwgIT09ICIiICYmIGYudWludDMyKDQyKS5zdHJpbmcoZC50cmFuc2xhdGVkVXJsKSwgZC51bmtub3duMSAhPT0gMCAmJiBmLnVpbnQzMig0OCkuaW50MzIoZC51bmtub3duMSksIGQudW5rbm93bjIgIT09IDAgJiYgZi51aW50MzIoNTYpLmludDMyKGQudW5rbm93bjIpLCBmOwoJCQkJfSwKCQkJCWRlY29kZShkLCBmKSB7CgkJCQkJbGV0IHAgPSBkIGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyID8gZCA6IG5ldyBCaW5hcnlSZWFkZXIoZCksIG0gPSBmID09PSB2b2lkIDAgPyBwLmxlbiA6IHAucG9zICsgZiwgaCA9IGNyZWF0ZUJhc2VTdWJ0aXRsZXNPYmplY3QoKTsKCQkJCQlmb3IgKDsgcC5wb3MgPCBtOykgewoJCQkJCQlsZXQgZCA9IHAudWludDMyKCk7CgkJCQkJCXN3aXRjaCAoZCA+Pj4gMykgewoJCQkJCQkJY2FzZSAxOgoJCQkJCQkJCWlmIChkICE9PSAxMCkgYnJlYWs7CgkJCQkJCQkJaC5sYW5ndWFnZSA9IHAuc3RyaW5nKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDI6CgkJCQkJCQkJaWYgKGQgIT09IDE4KSBicmVhazsKCQkJCQkJCQloLnVybCA9IHAuc3RyaW5nKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDM6CgkJCQkJCQkJaWYgKGQgIT09IDI0KSBicmVhazsKCQkJCQkJCQloLnVua25vd24wID0gcC5pbnQzMigpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQkJY2FzZSA0OgoJCQkJCQkJCWlmIChkICE9PSAzNCkgYnJlYWs7CgkJCQkJCQkJaC50cmFuc2xhdGVkTGFuZ3VhZ2UgPSBwLnN0cmluZygpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQkJY2FzZSA1OgoJCQkJCQkJCWlmIChkICE9PSA0MikgYnJlYWs7CgkJCQkJCQkJaC50cmFuc2xhdGVkVXJsID0gcC5zdHJpbmcoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgNjoKCQkJCQkJCQlpZiAoZCAhPT0gNDgpIGJyZWFrOwoJCQkJCQkJCWgudW5rbm93bjEgPSBwLmludDMyKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDc6CgkJCQkJCQkJaWYgKGQgIT09IDU2KSBicmVhazsKCQkJCQkJCQloLnVua25vd24yID0gcC5pbnQzMigpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQl9CgkJCQkJCWlmICgoZCAmIDcpID09IDQgfHwgZCA9PT0gMCkgYnJlYWs7CgkJCQkJCXAuc2tpcChkICYgNyk7CgkJCQkJfQoJCQkJCXJldHVybiBoOwoJCQkJfSwKCQkJCWZyb21KU09OKGQpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQlsYW5ndWFnZTogaXNTZXQoZC5sYW5ndWFnZSkgPyBnbG9iYWxUaGlzLlN0cmluZyhkLmxhbmd1YWdlKSA6ICIiLAoJCQkJCQl1cmw6IGlzU2V0KGQudXJsKSA/IGdsb2JhbFRoaXMuU3RyaW5nKGQudXJsKSA6ICIiLAoJCQkJCQl1bmtub3duMDogaXNTZXQoZC51bmtub3duMCkgPyBnbG9iYWxUaGlzLk51bWJlcihkLnVua25vd24wKSA6IDAsCgkJCQkJCXRyYW5zbGF0ZWRMYW5ndWFnZTogaXNTZXQoZC50cmFuc2xhdGVkTGFuZ3VhZ2UpID8gZ2xvYmFsVGhpcy5TdHJpbmcoZC50cmFuc2xhdGVkTGFuZ3VhZ2UpIDogIiIsCgkJCQkJCXRyYW5zbGF0ZWRVcmw6IGlzU2V0KGQudHJhbnNsYXRlZFVybCkgPyBnbG9iYWxUaGlzLlN0cmluZyhkLnRyYW5zbGF0ZWRVcmwpIDogIiIsCgkJCQkJCXVua25vd24xOiBpc1NldChkLnVua25vd24xKSA/IGdsb2JhbFRoaXMuTnVtYmVyKGQudW5rbm93bjEpIDogMCwKCQkJCQkJdW5rbm93bjI6IGlzU2V0KGQudW5rbm93bjIpID8gZ2xvYmFsVGhpcy5OdW1iZXIoZC51bmtub3duMikgOiAwCgkJCQkJfTsKCQkJCX0sCgkJCQl0b0pTT04oZCkgewoJCQkJCWxldCBmID0ge307CgkJCQkJcmV0dXJuIGQubGFuZ3VhZ2UgIT09ICIiICYmIChmLmxhbmd1YWdlID0gZC5sYW5ndWFnZSksIGQudXJsICE9PSAiIiAmJiAoZi51cmwgPSBkLnVybCksIGQudW5rbm93bjAgIT09IDAgJiYgKGYudW5rbm93bjAgPSBNYXRoLnJvdW5kKGQudW5rbm93bjApKSwgZC50cmFuc2xhdGVkTGFuZ3VhZ2UgIT09ICIiICYmIChmLnRyYW5zbGF0ZWRMYW5ndWFnZSA9IGQudHJhbnNsYXRlZExhbmd1YWdlKSwgZC50cmFuc2xhdGVkVXJsICE9PSAiIiAmJiAoZi50cmFuc2xhdGVkVXJsID0gZC50cmFuc2xhdGVkVXJsKSwgZC51bmtub3duMSAhPT0gMCAmJiAoZi51bmtub3duMSA9IE1hdGgucm91bmQoZC51bmtub3duMSkpLCBkLnVua25vd24yICE9PSAwICYmIChmLnVua25vd24yID0gTWF0aC5yb3VuZChkLnVua25vd24yKSksIGY7CgkJCQl9LAoJCQkJY3JlYXRlKGQpIHsKCQkJCQlyZXR1cm4gWS5mcm9tUGFydGlhbChkID8/IHt9KTsKCQkJCX0sCgkJCQlmcm9tUGFydGlhbChkKSB7CgkJCQkJbGV0IGYgPSBjcmVhdGVCYXNlU3VidGl0bGVzT2JqZWN0KCk7CgkJCQkJcmV0dXJuIGYubGFuZ3VhZ2UgPSBkLmxhbmd1YWdlID8/ICIiLCBmLnVybCA9IGQudXJsID8/ICIiLCBmLnVua25vd24wID0gZC51bmtub3duMCA/PyAwLCBmLnRyYW5zbGF0ZWRMYW5ndWFnZSA9IGQudHJhbnNsYXRlZExhbmd1YWdlID8/ICIiLCBmLnRyYW5zbGF0ZWRVcmwgPSBkLnRyYW5zbGF0ZWRVcmwgPz8gIiIsIGYudW5rbm93bjEgPSBkLnVua25vd24xID8/IDAsIGYudW5rbm93bjIgPSBkLnVua25vd24yID8/IDAsIGY7CgkJCQl9CgkJCX07CgkJCWZ1bmN0aW9uIGNyZWF0ZUJhc2VTdWJ0aXRsZXNSZXF1ZXN0KCkgewoJCQkJcmV0dXJuIHsKCQkJCQl1cmw6ICIiLAoJCQkJCWxhbmd1YWdlOiAiIgoJCQkJfTsKCQkJfQoJCQlsZXQgWCA9IHsKCQkJCWVuY29kZShkLCBmID0gbmV3IEJpbmFyeVdyaXRlcigpKSB7CgkJCQkJcmV0dXJuIGQudXJsICE9PSAiIiAmJiBmLnVpbnQzMigxMCkuc3RyaW5nKGQudXJsKSwgZC5sYW5ndWFnZSAhPT0gIiIgJiYgZi51aW50MzIoMTgpLnN0cmluZyhkLmxhbmd1YWdlKSwgZjsKCQkJCX0sCgkJCQlkZWNvZGUoZCwgZikgewoJCQkJCWxldCBwID0gZCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlciA/IGQgOiBuZXcgQmluYXJ5UmVhZGVyKGQpLCBtID0gZiA9PT0gdm9pZCAwID8gcC5sZW4gOiBwLnBvcyArIGYsIGggPSBjcmVhdGVCYXNlU3VidGl0bGVzUmVxdWVzdCgpOwoJCQkJCWZvciAoOyBwLnBvcyA8IG07KSB7CgkJCQkJCWxldCBkID0gcC51aW50MzIoKTsKCQkJCQkJc3dpdGNoIChkID4+PiAzKSB7CgkJCQkJCQljYXNlIDE6CgkJCQkJCQkJaWYgKGQgIT09IDEwKSBicmVhazsKCQkJCQkJCQloLnVybCA9IHAuc3RyaW5nKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDI6CgkJCQkJCQkJaWYgKGQgIT09IDE4KSBicmVhazsKCQkJCQkJCQloLmxhbmd1YWdlID0gcC5zdHJpbmcoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJfQoJCQkJCQlpZiAoKGQgJiA3KSA9PSA0IHx8IGQgPT09IDApIGJyZWFrOwoJCQkJCQlwLnNraXAoZCAmIDcpOwoJCQkJCX0KCQkJCQlyZXR1cm4gaDsKCQkJCX0sCgkJCQlmcm9tSlNPTihkKSB7CgkJCQkJcmV0dXJuIHsKCQkJCQkJdXJsOiBpc1NldChkLnVybCkgPyBnbG9iYWxUaGlzLlN0cmluZyhkLnVybCkgOiAiIiwKCQkJCQkJbGFuZ3VhZ2U6IGlzU2V0KGQubGFuZ3VhZ2UpID8gZ2xvYmFsVGhpcy5TdHJpbmcoZC5sYW5ndWFnZSkgOiAiIgoJCQkJCX07CgkJCQl9LAoJCQkJdG9KU09OKGQpIHsKCQkJCQlsZXQgZiA9IHt9OwoJCQkJCXJldHVybiBkLnVybCAhPT0gIiIgJiYgKGYudXJsID0gZC51cmwpLCBkLmxhbmd1YWdlICE9PSAiIiAmJiAoZi5sYW5ndWFnZSA9IGQubGFuZ3VhZ2UpLCBmOwoJCQkJfSwKCQkJCWNyZWF0ZShkKSB7CgkJCQkJcmV0dXJuIFguZnJvbVBhcnRpYWwoZCA/PyB7fSk7CgkJCQl9LAoJCQkJZnJvbVBhcnRpYWwoZCkgewoJCQkJCWxldCBmID0gY3JlYXRlQmFzZVN1YnRpdGxlc1JlcXVlc3QoKTsKCQkJCQlyZXR1cm4gZi51cmwgPSBkLnVybCA/PyAiIiwgZi5sYW5ndWFnZSA9IGQubGFuZ3VhZ2UgPz8gIiIsIGY7CgkJCQl9CgkJCX07CgkJCWZ1bmN0aW9uIGNyZWF0ZUJhc2VTdWJ0aXRsZXNSZXNwb25zZSgpIHsKCQkJCXJldHVybiB7CgkJCQkJd2FpdGluZzogITEsCgkJCQkJc3VidGl0bGVzOiBbXQoJCQkJfTsKCQkJfQoJCQlsZXQgWiA9IHsKCQkJCWVuY29kZShkLCBmID0gbmV3IEJpbmFyeVdyaXRlcigpKSB7CgkJCQkJZC53YWl0aW5nICE9PSAhMSAmJiBmLnVpbnQzMig4KS5ib29sKGQud2FpdGluZyk7CgkJCQkJZm9yIChsZXQgcCBvZiBkLnN1YnRpdGxlcykgWS5lbmNvZGUocCwgZi51aW50MzIoMTgpLmZvcmsoKSkuam9pbigpOwoJCQkJCXJldHVybiBmOwoJCQkJfSwKCQkJCWRlY29kZShkLCBmKSB7CgkJCQkJbGV0IHAgPSBkIGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyID8gZCA6IG5ldyBCaW5hcnlSZWFkZXIoZCksIG0gPSBmID09PSB2b2lkIDAgPyBwLmxlbiA6IHAucG9zICsgZiwgaCA9IGNyZWF0ZUJhc2VTdWJ0aXRsZXNSZXNwb25zZSgpOwoJCQkJCWZvciAoOyBwLnBvcyA8IG07KSB7CgkJCQkJCWxldCBkID0gcC51aW50MzIoKTsKCQkJCQkJc3dpdGNoIChkID4+PiAzKSB7CgkJCQkJCQljYXNlIDE6CgkJCQkJCQkJaWYgKGQgIT09IDgpIGJyZWFrOwoJCQkJCQkJCWgud2FpdGluZyA9IHAuYm9vbCgpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQkJY2FzZSAyOgoJCQkJCQkJCWlmIChkICE9PSAxOCkgYnJlYWs7CgkJCQkJCQkJaC5zdWJ0aXRsZXMucHVzaChZLmRlY29kZShwLCBwLnVpbnQzMigpKSk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCX0KCQkJCQkJaWYgKChkICYgNykgPT0gNCB8fCBkID09PSAwKSBicmVhazsKCQkJCQkJcC5za2lwKGQgJiA3KTsKCQkJCQl9CgkJCQkJcmV0dXJuIGg7CgkJCQl9LAoJCQkJZnJvbUpTT04oZCkgewoJCQkJCXJldHVybiB7CgkJCQkJCXdhaXRpbmc6IGlzU2V0KGQud2FpdGluZykgPyBnbG9iYWxUaGlzLkJvb2xlYW4oZC53YWl0aW5nKSA6ICExLAoJCQkJCQlzdWJ0aXRsZXM6IGdsb2JhbFRoaXMuQXJyYXkuaXNBcnJheShkPy5zdWJ0aXRsZXMpID8gZC5zdWJ0aXRsZXMubWFwKChkKSA9PiBZLmZyb21KU09OKGQpKSA6IFtdCgkJCQkJfTsKCQkJCX0sCgkJCQl0b0pTT04oZCkgewoJCQkJCWxldCBmID0ge307CgkJCQkJcmV0dXJuIGQud2FpdGluZyAhPT0gITEgJiYgKGYud2FpdGluZyA9IGQud2FpdGluZyksIGQuc3VidGl0bGVzPy5sZW5ndGggJiYgKGYuc3VidGl0bGVzID0gZC5zdWJ0aXRsZXMubWFwKChkKSA9PiBZLnRvSlNPTihkKSkpLCBmOwoJCQkJfSwKCQkJCWNyZWF0ZShkKSB7CgkJCQkJcmV0dXJuIFouZnJvbVBhcnRpYWwoZCA/PyB7fSk7CgkJCQl9LAoJCQkJZnJvbVBhcnRpYWwoZCkgewoJCQkJCWxldCBmID0gY3JlYXRlQmFzZVN1YnRpdGxlc1Jlc3BvbnNlKCk7CgkJCQkJcmV0dXJuIGYud2FpdGluZyA9IGQud2FpdGluZyA/PyAhMSwgZi5zdWJ0aXRsZXMgPSBkLnN1YnRpdGxlcz8ubWFwKChkKSA9PiBZLmZyb21QYXJ0aWFsKGQpKSB8fCBbXSwgZjsKCQkJCX0KCQkJfTsKCQkJZnVuY3Rpb24gY3JlYXRlQmFzZVN0cmVhbVRyYW5zbGF0aW9uT2JqZWN0KCkgewoJCQkJcmV0dXJuIHsKCQkJCQl1cmw6ICIiLAoJCQkJCXRpbWVzdGFtcDogIiIKCQkJCX07CgkJCX0KCQkJbGV0IFEgPSB7CgkJCQllbmNvZGUoZCwgZiA9IG5ldyBCaW5hcnlXcml0ZXIoKSkgewoJCQkJCXJldHVybiBkLnVybCAhPT0gIiIgJiYgZi51aW50MzIoMTApLnN0cmluZyhkLnVybCksIGQudGltZXN0YW1wICE9PSAiIiAmJiBmLnVpbnQzMigxOCkuc3RyaW5nKGQudGltZXN0YW1wKSwgZjsKCQkJCX0sCgkJCQlkZWNvZGUoZCwgZikgewoJCQkJCWxldCBwID0gZCBpbnN0YW5jZW9mIEJpbmFyeVJlYWRlciA/IGQgOiBuZXcgQmluYXJ5UmVhZGVyKGQpLCBtID0gZiA9PT0gdm9pZCAwID8gcC5sZW4gOiBwLnBvcyArIGYsIGggPSBjcmVhdGVCYXNlU3RyZWFtVHJhbnNsYXRpb25PYmplY3QoKTsKCQkJCQlmb3IgKDsgcC5wb3MgPCBtOykgewoJCQkJCQlsZXQgZCA9IHAudWludDMyKCk7CgkJCQkJCXN3aXRjaCAoZCA+Pj4gMykgewoJCQkJCQkJY2FzZSAxOgoJCQkJCQkJCWlmIChkICE9PSAxMCkgYnJlYWs7CgkJCQkJCQkJaC51cmwgPSBwLnN0cmluZygpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQkJY2FzZSAyOgoJCQkJCQkJCWlmIChkICE9PSAxOCkgYnJlYWs7CgkJCQkJCQkJaC50aW1lc3RhbXAgPSBwLnN0cmluZygpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQl9CgkJCQkJCWlmICgoZCAmIDcpID09IDQgfHwgZCA9PT0gMCkgYnJlYWs7CgkJCQkJCXAuc2tpcChkICYgNyk7CgkJCQkJfQoJCQkJCXJldHVybiBoOwoJCQkJfSwKCQkJCWZyb21KU09OKGQpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQl1cmw6IGlzU2V0KGQudXJsKSA/IGdsb2JhbFRoaXMuU3RyaW5nKGQudXJsKSA6ICIiLAoJCQkJCQl0aW1lc3RhbXA6IGlzU2V0KGQudGltZXN0YW1wKSA/IGdsb2JhbFRoaXMuU3RyaW5nKGQudGltZXN0YW1wKSA6ICIiCgkJCQkJfTsKCQkJCX0sCgkJCQl0b0pTT04oZCkgewoJCQkJCWxldCBmID0ge307CgkJCQkJcmV0dXJuIGQudXJsICE9PSAiIiAmJiAoZi51cmwgPSBkLnVybCksIGQudGltZXN0YW1wICE9PSAiIiAmJiAoZi50aW1lc3RhbXAgPSBkLnRpbWVzdGFtcCksIGY7CgkJCQl9LAoJCQkJY3JlYXRlKGQpIHsKCQkJCQlyZXR1cm4gUS5mcm9tUGFydGlhbChkID8/IHt9KTsKCQkJCX0sCgkJCQlmcm9tUGFydGlhbChkKSB7CgkJCQkJbGV0IGYgPSBjcmVhdGVCYXNlU3RyZWFtVHJhbnNsYXRpb25PYmplY3QoKTsKCQkJCQlyZXR1cm4gZi51cmwgPSBkLnVybCA/PyAiIiwgZi50aW1lc3RhbXAgPSBkLnRpbWVzdGFtcCA/PyAiIiwgZjsKCQkJCX0KCQkJfTsKCQkJZnVuY3Rpb24gY3JlYXRlQmFzZVN0cmVhbVRyYW5zbGF0aW9uUmVxdWVzdCgpIHsKCQkJCXJldHVybiB7CgkJCQkJdXJsOiAiIiwKCQkJCQlsYW5ndWFnZTogIiIsCgkJCQkJcmVzcG9uc2VMYW5ndWFnZTogIiIsCgkJCQkJdW5rbm93bjA6IDAsCgkJCQkJdW5rbm93bjE6IDAKCQkJCX07CgkJCX0KCQkJbGV0IGVlID0gewoJCQkJZW5jb2RlKGQsIGYgPSBuZXcgQmluYXJ5V3JpdGVyKCkpIHsKCQkJCQlyZXR1cm4gZC51cmwgIT09ICIiICYmIGYudWludDMyKDEwKS5zdHJpbmcoZC51cmwpLCBkLmxhbmd1YWdlICE9PSAiIiAmJiBmLnVpbnQzMigxOCkuc3RyaW5nKGQubGFuZ3VhZ2UpLCBkLnJlc3BvbnNlTGFuZ3VhZ2UgIT09ICIiICYmIGYudWludDMyKDI2KS5zdHJpbmcoZC5yZXNwb25zZUxhbmd1YWdlKSwgZC51bmtub3duMCAhPT0gMCAmJiBmLnVpbnQzMig0MCkuaW50MzIoZC51bmtub3duMCksIGQudW5rbm93bjEgIT09IDAgJiYgZi51aW50MzIoNDgpLmludDMyKGQudW5rbm93bjEpLCBmOwoJCQkJfSwKCQkJCWRlY29kZShkLCBmKSB7CgkJCQkJbGV0IHAgPSBkIGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyID8gZCA6IG5ldyBCaW5hcnlSZWFkZXIoZCksIG0gPSBmID09PSB2b2lkIDAgPyBwLmxlbiA6IHAucG9zICsgZiwgaCA9IGNyZWF0ZUJhc2VTdHJlYW1UcmFuc2xhdGlvblJlcXVlc3QoKTsKCQkJCQlmb3IgKDsgcC5wb3MgPCBtOykgewoJCQkJCQlsZXQgZCA9IHAudWludDMyKCk7CgkJCQkJCXN3aXRjaCAoZCA+Pj4gMykgewoJCQkJCQkJY2FzZSAxOgoJCQkJCQkJCWlmIChkICE9PSAxMCkgYnJlYWs7CgkJCQkJCQkJaC51cmwgPSBwLnN0cmluZygpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQkJY2FzZSAyOgoJCQkJCQkJCWlmIChkICE9PSAxOCkgYnJlYWs7CgkJCQkJCQkJaC5sYW5ndWFnZSA9IHAuc3RyaW5nKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDM6CgkJCQkJCQkJaWYgKGQgIT09IDI2KSBicmVhazsKCQkJCQkJCQloLnJlc3BvbnNlTGFuZ3VhZ2UgPSBwLnN0cmluZygpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQkJY2FzZSA1OgoJCQkJCQkJCWlmIChkICE9PSA0MCkgYnJlYWs7CgkJCQkJCQkJaC51bmtub3duMCA9IHAuaW50MzIoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgNjoKCQkJCQkJCQlpZiAoZCAhPT0gNDgpIGJyZWFrOwoJCQkJCQkJCWgudW5rbm93bjEgPSBwLmludDMyKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCX0KCQkJCQkJaWYgKChkICYgNykgPT0gNCB8fCBkID09PSAwKSBicmVhazsKCQkJCQkJcC5za2lwKGQgJiA3KTsKCQkJCQl9CgkJCQkJcmV0dXJuIGg7CgkJCQl9LAoJCQkJZnJvbUpTT04oZCkgewoJCQkJCXJldHVybiB7CgkJCQkJCXVybDogaXNTZXQoZC51cmwpID8gZ2xvYmFsVGhpcy5TdHJpbmcoZC51cmwpIDogIiIsCgkJCQkJCWxhbmd1YWdlOiBpc1NldChkLmxhbmd1YWdlKSA/IGdsb2JhbFRoaXMuU3RyaW5nKGQubGFuZ3VhZ2UpIDogIiIsCgkJCQkJCXJlc3BvbnNlTGFuZ3VhZ2U6IGlzU2V0KGQucmVzcG9uc2VMYW5ndWFnZSkgPyBnbG9iYWxUaGlzLlN0cmluZyhkLnJlc3BvbnNlTGFuZ3VhZ2UpIDogIiIsCgkJCQkJCXVua25vd24wOiBpc1NldChkLnVua25vd24wKSA/IGdsb2JhbFRoaXMuTnVtYmVyKGQudW5rbm93bjApIDogMCwKCQkJCQkJdW5rbm93bjE6IGlzU2V0KGQudW5rbm93bjEpID8gZ2xvYmFsVGhpcy5OdW1iZXIoZC51bmtub3duMSkgOiAwCgkJCQkJfTsKCQkJCX0sCgkJCQl0b0pTT04oZCkgewoJCQkJCWxldCBmID0ge307CgkJCQkJcmV0dXJuIGQudXJsICE9PSAiIiAmJiAoZi51cmwgPSBkLnVybCksIGQubGFuZ3VhZ2UgIT09ICIiICYmIChmLmxhbmd1YWdlID0gZC5sYW5ndWFnZSksIGQucmVzcG9uc2VMYW5ndWFnZSAhPT0gIiIgJiYgKGYucmVzcG9uc2VMYW5ndWFnZSA9IGQucmVzcG9uc2VMYW5ndWFnZSksIGQudW5rbm93bjAgIT09IDAgJiYgKGYudW5rbm93bjAgPSBNYXRoLnJvdW5kKGQudW5rbm93bjApKSwgZC51bmtub3duMSAhPT0gMCAmJiAoZi51bmtub3duMSA9IE1hdGgucm91bmQoZC51bmtub3duMSkpLCBmOwoJCQkJfSwKCQkJCWNyZWF0ZShkKSB7CgkJCQkJcmV0dXJuIGVlLmZyb21QYXJ0aWFsKGQgPz8ge30pOwoJCQkJfSwKCQkJCWZyb21QYXJ0aWFsKGQpIHsKCQkJCQlsZXQgZiA9IGNyZWF0ZUJhc2VTdHJlYW1UcmFuc2xhdGlvblJlcXVlc3QoKTsKCQkJCQlyZXR1cm4gZi51cmwgPSBkLnVybCA/PyAiIiwgZi5sYW5ndWFnZSA9IGQubGFuZ3VhZ2UgPz8gIiIsIGYucmVzcG9uc2VMYW5ndWFnZSA9IGQucmVzcG9uc2VMYW5ndWFnZSA/PyAiIiwgZi51bmtub3duMCA9IGQudW5rbm93bjAgPz8gMCwgZi51bmtub3duMSA9IGQudW5rbm93bjEgPz8gMCwgZjsKCQkJCX0KCQkJfTsKCQkJZnVuY3Rpb24gY3JlYXRlQmFzZVN0cmVhbVRyYW5zbGF0aW9uUmVzcG9uc2UoKSB7CgkJCQlyZXR1cm4gewoJCQkJCWludGVydmFsOiAwLAoJCQkJCXRyYW5zbGF0ZWRJbmZvOiB2b2lkIDAsCgkJCQkJcGluZ0lkOiB2b2lkIDAKCQkJCX07CgkJCX0KCQkJbGV0IHRlID0gewoJCQkJZW5jb2RlKGQsIGYgPSBuZXcgQmluYXJ5V3JpdGVyKCkpIHsKCQkJCQlyZXR1cm4gZC5pbnRlcnZhbCAhPT0gMCAmJiBmLnVpbnQzMig4KS5pbnQzMihkLmludGVydmFsKSwgZC50cmFuc2xhdGVkSW5mbyAhPT0gdm9pZCAwICYmIFEuZW5jb2RlKGQudHJhbnNsYXRlZEluZm8sIGYudWludDMyKDE4KS5mb3JrKCkpLmpvaW4oKSwgZC5waW5nSWQgIT09IHZvaWQgMCAmJiBmLnVpbnQzMigyNCkuaW50MzIoZC5waW5nSWQpLCBmOwoJCQkJfSwKCQkJCWRlY29kZShkLCBmKSB7CgkJCQkJbGV0IHAgPSBkIGluc3RhbmNlb2YgQmluYXJ5UmVhZGVyID8gZCA6IG5ldyBCaW5hcnlSZWFkZXIoZCksIG0gPSBmID09PSB2b2lkIDAgPyBwLmxlbiA6IHAucG9zICsgZiwgaCA9IGNyZWF0ZUJhc2VTdHJlYW1UcmFuc2xhdGlvblJlc3BvbnNlKCk7CgkJCQkJZm9yICg7IHAucG9zIDwgbTspIHsKCQkJCQkJbGV0IGQgPSBwLnVpbnQzMigpOwoJCQkJCQlzd2l0Y2ggKGQgPj4+IDMpIHsKCQkJCQkJCWNhc2UgMToKCQkJCQkJCQlpZiAoZCAhPT0gOCkgYnJlYWs7CgkJCQkJCQkJaC5pbnRlcnZhbCA9IHAuaW50MzIoKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgMjoKCQkJCQkJCQlpZiAoZCAhPT0gMTgpIGJyZWFrOwoJCQkJCQkJCWgudHJhbnNsYXRlZEluZm8gPSBRLmRlY29kZShwLCBwLnVpbnQzMigpKTsKCQkJCQkJCQljb250aW51ZTsKCQkJCQkJCWNhc2UgMzoKCQkJCQkJCQlpZiAoZCAhPT0gMjQpIGJyZWFrOwoJCQkJCQkJCWgucGluZ0lkID0gcC5pbnQzMigpOwoJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQl9CgkJCQkJCWlmICgoZCAmIDcpID09IDQgfHwgZCA9PT0gMCkgYnJlYWs7CgkJCQkJCXAuc2tpcChkICYgNyk7CgkJCQkJfQoJCQkJCXJldHVybiBoOwoJCQkJfSwKCQkJCWZyb21KU09OKGQpIHsKCQkJCQlyZXR1cm4gewoJCQkJCQlpbnRlcnZhbDogaXNTZXQoZC5pbnRlcnZhbCkgPyBzdHJlYW1JbnRlcnZhbEZyb21KU09OKGQuaW50ZXJ2YWwpIDogMCwKCQkJCQkJdHJhbnNsYXRlZEluZm86IGlzU2V0KGQudHJhbnNsYXRlZEluZm8pID8gUS5mcm9tSlNPTihkLnRyYW5zbGF0ZWRJbmZvKSA6IHZvaWQgMCwKCQkJCQkJcGluZ0lkOiBpc1NldChkLnBpbmdJZCkgPyBnbG9iYWxUaGlzLk51bWJlcihkLnBpbmdJZCkgOiB2b2lkIDAKCQkJCQl9OwoJCQkJfSwKCQkJCXRvSlNPTihkKSB7CgkJCQkJbGV0IGYgPSB7fTsKCQkJCQlyZXR1cm4gZC5pbnRlcnZhbCAhPT0gMCAmJiAoZi5pbnRlcnZhbCA9IHN0cmVhbUludGVydmFsVG9KU09OKGQuaW50ZXJ2YWwpKSwgZC50cmFuc2xhdGVkSW5mbyAhPT0gdm9pZCAwICYmIChmLnRyYW5zbGF0ZWRJbmZvID0gUS50b0pTT04oZC50cmFuc2xhdGVkSW5mbykpLCBkLnBpbmdJZCAhPT0gdm9pZCAwICYmIChmLnBpbmdJZCA9IE1hdGgucm91bmQoZC5waW5nSWQpKSwgZjsKCQkJCX0sCgkJCQljcmVhdGUoZCkgewoJCQkJCXJldHVybiB0ZS5mcm9tUGFydGlhbChkID8/IHt9KTsKCQkJCX0sCgkJCQlmcm9tUGFydGlhbChkKSB7CgkJCQkJbGV0IGYgPSBjcmVhdGVCYXNlU3RyZWFtVHJhbnNsYXRpb25SZXNwb25zZSgpOwoJCQkJCXJldHVybiBmLmludGVydmFsID0gZC5pbnRlcnZhbCA/PyAwLCBmLnRyYW5zbGF0ZWRJbmZvID0gZC50cmFuc2xhdGVkSW5mbyAhPT0gdm9pZCAwICYmIGQudHJhbnNsYXRlZEluZm8gIT09IG51bGwgPyBRLmZyb21QYXJ0aWFsKGQudHJhbnNsYXRlZEluZm8pIDogdm9pZCAwLCBmLnBpbmdJZCA9IGQucGluZ0lkID8/IHZvaWQgMCwgZjsKCQkJCX0KCQkJfTsKCQkJZnVuY3Rpb24gY3JlYXRlQmFzZVN0cmVhbVBpbmdSZXF1ZXN0KCkgewoJCQkJcmV0dXJuIHsgcGluZ0lkOiAwIH07CgkJCX0KCQkJbGV0ICQgPSB7CgkJCQllbmNvZGUoZCwgZiA9IG5ldyBCaW5hcnlXcml0ZXIoKSkgewoJCQkJCXJldHVybiBkLnBpbmdJZCAhPT0gMCAmJiBmLnVpbnQzMig4KS5pbnQzMihkLnBpbmdJZCksIGY7CgkJCQl9LAoJCQkJZGVjb2RlKGQsIGYpIHsKCQkJCQlsZXQgcCA9IGQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXIgPyBkIDogbmV3IEJpbmFyeVJlYWRlcihkKSwgbSA9IGYgPT09IHZvaWQgMCA/IHAubGVuIDogcC5wb3MgKyBmLCBoID0gY3JlYXRlQmFzZVN0cmVhbVBpbmdSZXF1ZXN0KCk7CgkJCQkJZm9yICg7IHAucG9zIDwgbTspIHsKCQkJCQkJbGV0IGQgPSBwLnVpbnQzMigpOwoJCQkJCQlzd2l0Y2ggKGQgPj4+IDMpIHsKCQkJCQkJCWNhc2UgMToKCQkJCQkJCQlpZiAoZCAhPT0gOCkgYnJlYWs7CgkJCQkJCQkJaC5waW5nSWQgPSBwLmludDMyKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCX0KCQkJCQkJaWYgKChkICYgNykgPT0gNCB8fCBkID09PSAwKSBicmVhazsKCQkJCQkJcC5za2lwKGQgJiA3KTsKCQkJCQl9CgkJCQkJcmV0dXJuIGg7CgkJCQl9LAoJCQkJZnJvbUpTT04oZCkgewoJCQkJCXJldHVybiB7IHBpbmdJZDogaXNTZXQoZC5waW5nSWQpID8gZ2xvYmFsVGhpcy5OdW1iZXIoZC5waW5nSWQpIDogMCB9OwoJCQkJfSwKCQkJCXRvSlNPTihkKSB7CgkJCQkJbGV0IGYgPSB7fTsKCQkJCQlyZXR1cm4gZC5waW5nSWQgIT09IDAgJiYgKGYucGluZ0lkID0gTWF0aC5yb3VuZChkLnBpbmdJZCkpLCBmOwoJCQkJfSwKCQkJCWNyZWF0ZShkKSB7CgkJCQkJcmV0dXJuICQuZnJvbVBhcnRpYWwoZCA/PyB7fSk7CgkJCQl9LAoJCQkJZnJvbVBhcnRpYWwoZCkgewoJCQkJCWxldCBmID0gY3JlYXRlQmFzZVN0cmVhbVBpbmdSZXF1ZXN0KCk7CgkJCQkJcmV0dXJuIGYucGluZ0lkID0gZC5waW5nSWQgPz8gMCwgZjsKCQkJCX0KCQkJfTsKCQkJZnVuY3Rpb24gY3JlYXRlQmFzZVlhbmRleFNlc3Npb25SZXF1ZXN0KCkgewoJCQkJcmV0dXJuIHsKCQkJCQl1dWlkOiAiIiwKCQkJCQltb2R1bGU6ICIiCgkJCQl9OwoJCQl9CgkJCWxldCBuZSA9IHsKCQkJCWVuY29kZShkLCBmID0gbmV3IEJpbmFyeVdyaXRlcigpKSB7CgkJCQkJcmV0dXJuIGQudXVpZCAhPT0gIiIgJiYgZi51aW50MzIoMTApLnN0cmluZyhkLnV1aWQpLCBkLm1vZHVsZSAhPT0gIiIgJiYgZi51aW50MzIoMTgpLnN0cmluZyhkLm1vZHVsZSksIGY7CgkJCQl9LAoJCQkJZGVjb2RlKGQsIGYpIHsKCQkJCQlsZXQgcCA9IGQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXIgPyBkIDogbmV3IEJpbmFyeVJlYWRlcihkKSwgbSA9IGYgPT09IHZvaWQgMCA/IHAubGVuIDogcC5wb3MgKyBmLCBoID0gY3JlYXRlQmFzZVlhbmRleFNlc3Npb25SZXF1ZXN0KCk7CgkJCQkJZm9yICg7IHAucG9zIDwgbTspIHsKCQkJCQkJbGV0IGQgPSBwLnVpbnQzMigpOwoJCQkJCQlzd2l0Y2ggKGQgPj4+IDMpIHsKCQkJCQkJCWNhc2UgMToKCQkJCQkJCQlpZiAoZCAhPT0gMTApIGJyZWFrOwoJCQkJCQkJCWgudXVpZCA9IHAuc3RyaW5nKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDI6CgkJCQkJCQkJaWYgKGQgIT09IDE4KSBicmVhazsKCQkJCQkJCQloLm1vZHVsZSA9IHAuc3RyaW5nKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCX0KCQkJCQkJaWYgKChkICYgNykgPT0gNCB8fCBkID09PSAwKSBicmVhazsKCQkJCQkJcC5za2lwKGQgJiA3KTsKCQkJCQl9CgkJCQkJcmV0dXJuIGg7CgkJCQl9LAoJCQkJZnJvbUpTT04oZCkgewoJCQkJCXJldHVybiB7CgkJCQkJCXV1aWQ6IGlzU2V0KGQudXVpZCkgPyBnbG9iYWxUaGlzLlN0cmluZyhkLnV1aWQpIDogIiIsCgkJCQkJCW1vZHVsZTogaXNTZXQoZC5tb2R1bGUpID8gZ2xvYmFsVGhpcy5TdHJpbmcoZC5tb2R1bGUpIDogIiIKCQkJCQl9OwoJCQkJfSwKCQkJCXRvSlNPTihkKSB7CgkJCQkJbGV0IGYgPSB7fTsKCQkJCQlyZXR1cm4gZC51dWlkICE9PSAiIiAmJiAoZi51dWlkID0gZC51dWlkKSwgZC5tb2R1bGUgIT09ICIiICYmIChmLm1vZHVsZSA9IGQubW9kdWxlKSwgZjsKCQkJCX0sCgkJCQljcmVhdGUoZCkgewoJCQkJCXJldHVybiBuZS5mcm9tUGFydGlhbChkID8/IHt9KTsKCQkJCX0sCgkJCQlmcm9tUGFydGlhbChkKSB7CgkJCQkJbGV0IGYgPSBjcmVhdGVCYXNlWWFuZGV4U2Vzc2lvblJlcXVlc3QoKTsKCQkJCQlyZXR1cm4gZi51dWlkID0gZC51dWlkID8/ICIiLCBmLm1vZHVsZSA9IGQubW9kdWxlID8/ICIiLCBmOwoJCQkJfQoJCQl9OwoJCQlmdW5jdGlvbiBjcmVhdGVCYXNlWWFuZGV4U2Vzc2lvblJlc3BvbnNlKCkgewoJCQkJcmV0dXJuIHsKCQkJCQlzZWNyZXRLZXk6ICIiLAoJCQkJCWV4cGlyZXM6IDAKCQkJCX07CgkJCX0KCQkJbGV0IHJlID0gewoJCQkJZW5jb2RlKGQsIGYgPSBuZXcgQmluYXJ5V3JpdGVyKCkpIHsKCQkJCQlyZXR1cm4gZC5zZWNyZXRLZXkgIT09ICIiICYmIGYudWludDMyKDEwKS5zdHJpbmcoZC5zZWNyZXRLZXkpLCBkLmV4cGlyZXMgIT09IDAgJiYgZi51aW50MzIoMTYpLmludDMyKGQuZXhwaXJlcyksIGY7CgkJCQl9LAoJCQkJZGVjb2RlKGQsIGYpIHsKCQkJCQlsZXQgcCA9IGQgaW5zdGFuY2VvZiBCaW5hcnlSZWFkZXIgPyBkIDogbmV3IEJpbmFyeVJlYWRlcihkKSwgbSA9IGYgPT09IHZvaWQgMCA/IHAubGVuIDogcC5wb3MgKyBmLCBoID0gY3JlYXRlQmFzZVlhbmRleFNlc3Npb25SZXNwb25zZSgpOwoJCQkJCWZvciAoOyBwLnBvcyA8IG07KSB7CgkJCQkJCWxldCBkID0gcC51aW50MzIoKTsKCQkJCQkJc3dpdGNoIChkID4+PiAzKSB7CgkJCQkJCQljYXNlIDE6CgkJCQkJCQkJaWYgKGQgIT09IDEwKSBicmVhazsKCQkJCQkJCQloLnNlY3JldEtleSA9IHAuc3RyaW5nKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCQljYXNlIDI6CgkJCQkJCQkJaWYgKGQgIT09IDE2KSBicmVhazsKCQkJCQkJCQloLmV4cGlyZXMgPSBwLmludDMyKCk7CgkJCQkJCQkJY29udGludWU7CgkJCQkJCX0KCQkJCQkJaWYgKChkICYgNykgPT0gNCB8fCBkID09PSAwKSBicmVhazsKCQkJCQkJcC5za2lwKGQgJiA3KTsKCQkJCQl9CgkJCQkJcmV0dXJuIGg7CgkJCQl9LAoJCQkJZnJvbUpTT04oZCkgewoJCQkJCXJldHVybiB7CgkJCQkJCXNlY3JldEtleTogaXNTZXQoZC5zZWNyZXRLZXkpID8gZ2xvYmFsVGhpcy5TdHJpbmcoZC5zZWNyZXRLZXkpIDogIiIsCgkJCQkJCWV4cGlyZXM6IGlzU2V0KGQuZXhwaXJlcykgPyBnbG9iYWxUaGlzLk51bWJlcihkLmV4cGlyZXMpIDogMAoJCQkJCX07CgkJCQl9LAoJCQkJdG9KU09OKGQpIHsKCQkJCQlsZXQgZiA9IHt9OwoJCQkJCXJldHVybiBkLnNlY3JldEtleSAhPT0gIiIgJiYgKGYuc2VjcmV0S2V5ID0gZC5zZWNyZXRLZXkpLCBkLmV4cGlyZXMgIT09IDAgJiYgKGYuZXhwaXJlcyA9IE1hdGgucm91bmQoZC5leHBpcmVzKSksIGY7CgkJCQl9LAoJCQkJY3JlYXRlKGQpIHsKCQkJCQlyZXR1cm4gcmUuZnJvbVBhcnRpYWwoZCA/PyB7fSk7CgkJCQl9LAoJCQkJZnJvbVBhcnRpYWwoZCkgewoJCQkJCWxldCBmID0gY3JlYXRlQmFzZVlhbmRleFNlc3Npb25SZXNwb25zZSgpOwoJCQkJCXJldHVybiBmLnNlY3JldEtleSA9IGQuc2VjcmV0S2V5ID8/ICIiLCBmLmV4cGlyZXMgPSBkLmV4cGlyZXMgPz8gMCwgZjsKCQkJCX0KCQkJfTsKCQkJZnVuY3Rpb24gYnl0ZXNGcm9tQmFzZTY0KGQpIHsKCQkJCWlmIChnbG9iYWxUaGlzLkJ1ZmZlcikgcmV0dXJuIFVpbnQ4QXJyYXkuZnJvbShnbG9iYWxUaGlzLkJ1ZmZlci5mcm9tKGQsICJiYXNlNjQiKSk7CgkJCQl7CgkJCQkJbGV0IGYgPSBnbG9iYWxUaGlzLmF0b2IoZCksIHAgPSBuZXcgVWludDhBcnJheShmLmxlbmd0aCk7CgkJCQkJZm9yIChsZXQgZCA9IDA7IGQgPCBmLmxlbmd0aDsgKytkKSBwW2RdID0gZi5jaGFyQ29kZUF0KGQpOwoJCQkJCXJldHVybiBwOwoJCQkJfQoJCQl9CgkJCWZ1bmN0aW9uIGJhc2U2NEZyb21CeXRlcyhkKSB7CgkJCQlpZiAoZ2xvYmFsVGhpcy5CdWZmZXIpIHJldHVybiBnbG9iYWxUaGlzLkJ1ZmZlci5mcm9tKGQpLnRvU3RyaW5nKCJiYXNlNjQiKTsKCQkJCXsKCQkJCQlsZXQgZiA9IFtdOwoJCQkJCXJldHVybiBkLmZvckVhY2goKGQpID0+IHsKCQkJCQkJZi5wdXNoKGdsb2JhbFRoaXMuU3RyaW5nLmZyb21DaGFyQ29kZShkKSk7CgkJCQkJfSksIGdsb2JhbFRoaXMuYnRvYShmLmpvaW4oIiIpKTsKCQkJCX0KCQkJfQoJCQlmdW5jdGlvbiBpc1NldChkKSB7CgkJCQlyZXR1cm4gZCAhPSBudWxsOwoJCQl9CgkJfSwKCQkiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9zaGFyZWQvZGlzdC9zZWN1cmUuanMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuZChmLCB7CgkJCQlDMDogKCkgPT4gZ2V0U2VjWWFIZWFkZXJzLAoJCQkJTUc6ICgpID0+IHYsCgkJCQliVDogKCkgPT4gZ2V0SG1hY1NoYTEsCgkJCQlkRDogKCkgPT4gZ2V0U2lnbmF0dXJlLAoJCQkJeWs6ICgpID0+IGdldFVVSUQKCQkJfSk7CgkJCXZhciBtID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9zaGFyZWQvZGlzdC9kYXRhL2NvbmZpZy5qcyIpLCBoID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9zaGFyZWQvZGlzdC91dGlscy9sb2dnZXIuanMiKTsKCQkJbGV0IHsgY29tcG9uZW50VmVyc2lvbjogZyB9ID0gbS5BOwoJCQlhc3luYyBmdW5jdGlvbiBnZXRDcnlwdG8oKSB7CgkJCQlyZXR1cm4gdHlwZW9mIHdpbmRvdyA8ICJ1IiAmJiB3aW5kb3cuY3J5cHRvID8gd2luZG93LmNyeXB0byA6IGF3YWl0IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gd2VicGFja01pc3NpbmdNb2R1bGUoKSB7CgkJCQkJdmFyIGQgPSBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICdub2RlOmNyeXB0byciKTsKCQkJCQl0aHJvdyBkLmNvZGUgPSAiTU9EVUxFX05PVF9GT1VORCIsIGQ7CgkJCQl9KTsKCQkJfQoJCQlsZXQgXyA9IG5ldyBUZXh0RW5jb2RlcigpOwoJCQlhc3luYyBmdW5jdGlvbiBzaWduSE1BQyhkLCBmLCBwKSB7CgkJCQlsZXQgbSA9IGF3YWl0IGdldENyeXB0bygpLCBoID0gYXdhaXQgbS5zdWJ0bGUuaW1wb3J0S2V5KCJyYXciLCBfLmVuY29kZShmKSwgewoJCQkJCW5hbWU6ICJITUFDIiwKCQkJCQloYXNoOiB7IG5hbWU6IGQgfQoJCQkJfSwgITEsIFsic2lnbiIsICJ2ZXJpZnkiXSk7CgkJCQlyZXR1cm4gYXdhaXQgbS5zdWJ0bGUuc2lnbigiSE1BQyIsIGgsIHApOwoJCQl9CgkJCWFzeW5jIGZ1bmN0aW9uIGdldFNpZ25hdHVyZShkKSB7CgkJCQlsZXQgZiA9IGF3YWl0IHNpZ25ITUFDKCJTSEEtMjU2IiwgbS5BLmhtYWMsIGQpOwoJCQkJcmV0dXJuIG5ldyBVaW50OEFycmF5KGYpLnJlZHVjZSgoZCwgZikgPT4gZCArIGYudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICIwIiksICIiKTsKCQkJfQoJCQlhc3luYyBmdW5jdGlvbiBnZXRTZWNZYUhlYWRlcnMoZCwgZiwgcCwgbSkgewoJCQkJbGV0IHsgc2VjcmV0S2V5OiBoLCB1dWlkOiB2IH0gPSBmLCBiID0gYCR7dn06JHttfToke2d9YCwgeCA9IF8uZW5jb2RlKGIpLCBDID0gYXdhaXQgZ2V0U2lnbmF0dXJlKHgpOwoJCQkJaWYgKGQgPT09ICJZYS1TdW1tYXJ5IikgcmV0dXJuIHsKCQkJCQlbYFgtJHtkfS1Ta2BdOiBoLAoJCQkJCVtgWC0ke2R9LVRva2VuYF06IGAke0N9OiR7Yn1gCgkJCQl9OwoJCQkJbGV0IHcgPSBhd2FpdCBnZXRTaWduYXR1cmUocCk7CgkJCQlyZXR1cm4gewoJCQkJCVtgJHtkfS1TaWduYXR1cmVgXTogdywKCQkJCQlbYFNlYy0ke2R9LVNrYF06IGgsCgkJCQkJW2BTZWMtJHtkfS1Ub2tlbmBdOiBgJHtDfToke2J9YAoJCQkJfTsKCQkJfQoJCQlmdW5jdGlvbiBnZXRVVUlEKCkgewoJCQkJbGV0IGQgPSAiMDEyMzQ1Njc4OUFCQ0RFRiIsIGYgPSAiIjsKCQkJCWZvciAobGV0IHAgPSAwOyBwIDwgMzI7IHArKykgewoJCQkJCWxldCBwID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTYpOwoJCQkJCWYgKz0gZFtwXTsKCQkJCX0KCQkJCXJldHVybiBmOwoJCQl9CgkJCWFzeW5jIGZ1bmN0aW9uIGdldEhtYWNTaGExKGQsIGYpIHsKCQkJCXRyeSB7CgkJCQkJbGV0IHAgPSBfLmVuY29kZShmKSwgbSA9IGF3YWl0IHNpZ25ITUFDKCJTSEEtMSIsIGQsIHApOwoJCQkJCXJldHVybiBidG9hKFN0cmluZy5mcm9tQ2hhckNvZGUoLi4ubmV3IFVpbnQ4QXJyYXkobSkpKTsKCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQlyZXR1cm4gaC5BLmVycm9yKGQpLCAhMTsKCQkJCX0KCQkJfQoJCQlsZXQgdiA9IHsKCQkJCSJzZWMtY2gtdWEiOiBgIkNocm9taXVtIjt2PSIxMzQiLCAiWWFCcm93c2VyIjt2PSIke2cuc2xpY2UoMCwgNSl9IiwgIk5vdD9BX0JyYW5kIjt2PSIyNCIsICJZb3dzZXIiO3Y9IjIuNSJgLAoJCQkJInNlYy1jaC11YS1mdWxsLXZlcnNpb24tbGlzdCI6IGAiQ2hyb21pdW0iO3Y9IjEzNC4wLjY5OTguNTQzIiwgIllhQnJvd3NlciI7dj0iJHtnfSIsICJOb3Q/QV9CcmFuZCI7dj0iMjQuMC4wLjAiLCAiWW93c2VyIjt2PSIyLjUiYCwKCQkJCSJTZWMtRmV0Y2gtTW9kZSI6ICJuby1jb3JzIgoJCQl9OwoJCX0sCgkJIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvc2hhcmVkL2Rpc3QvdHlwZXMvbG9nZ2VyLmpzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmQoZiwgeyBUOiAoKSA9PiBtIH0pOwoJCQl2YXIgbTsKCQkJKGZ1bmN0aW9uKGQpIHsKCQkJCWRbZC5ERUJVRyA9IDBdID0gIkRFQlVHIiwgZFtkLklORk8gPSAxXSA9ICJJTkZPIiwgZFtkLldBUk4gPSAyXSA9ICJXQVJOIiwgZFtkLkVSUk9SID0gM10gPSAiRVJST1IiLCBkW2QuU0lMRU5DRSA9IDRdID0gIlNJTEVOQ0UiOwoJCQl9KShtIHx8PSB7fSk7CgkJfSwKCQkiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9zaGFyZWQvZGlzdC91dGlscy9sb2dnZXIuanMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuZChmLCB7IEE6ICgpID0+IExvZ2dlciB9KTsKCQkJdmFyIG0gPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL3NoYXJlZC9kaXN0L2RhdGEvY29uZmlnLmpzIiksIGggPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL3NoYXJlZC9kaXN0L3R5cGVzL2xvZ2dlci5qcyIpOwoJCQljbGFzcyBMb2dnZXIgewoJCQkJc3RhdGljIHByZWZpeCA9IGBbdm90LmpzIHYke20uQS52ZXJzaW9ufV1gOwoJCQkJc3RhdGljIGNhbkxvZyhkKSB7CgkJCQkJcmV0dXJuIG0uQS5sb2dnZXJMZXZlbCA8PSBkOwoJCQkJfQoJCQkJc3RhdGljIGxvZyguLi5kKSB7CgkJCQkJTG9nZ2VyLmNhbkxvZyhoLlQuREVCVUcpICYmIGNvbnNvbGUubG9nKExvZ2dlci5wcmVmaXgsIC4uLmQpOwoJCQkJfQoJCQkJc3RhdGljIGluZm8oLi4uZCkgewoJCQkJCUxvZ2dlci5jYW5Mb2coaC5ULklORk8pICYmIGNvbnNvbGUuaW5mbyhMb2dnZXIucHJlZml4LCAuLi5kKTsKCQkJCX0KCQkJCXN0YXRpYyB3YXJuKC4uLmQpIHsKCQkJCQlMb2dnZXIuY2FuTG9nKGguVC5XQVJOKSAmJiBjb25zb2xlLndhcm4oTG9nZ2VyLnByZWZpeCwgLi4uZCk7CgkJCQl9CgkJCQlzdGF0aWMgZXJyb3IoLi4uZCkgewoJCQkJCUxvZ2dlci5jYW5Mb2coaC5ULkVSUk9SKSAmJiBjb25zb2xlLmVycm9yKExvZ2dlci5wcmVmaXgsIC4uLmQpOwoJCQkJfQoJCQl9CgkJfSwKCQkiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9zaGFyZWQvZGlzdC91dGlscy9zdWJzLmpzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmQoZiwgeyB2azogKCkgPT4gY29udmVydFN1YnMgfSk7CgkJCWZ1bmN0aW9uIGNvbnZlcnRUb1N0clRpbWUoZCwgZiA9ICIsIikgewoJCQkJbGV0IHAgPSBkIC8gMWUzLCBtID0gTWF0aC5mbG9vcihwIC8gMzYwMCksIGggPSBNYXRoLmZsb29yKHAgJSAzNjAwIC8gNjApLCBnID0gTWF0aC5mbG9vcihwICUgNjApLCBfID0gTWF0aC5mbG9vcihkICUgMWUzKTsKCQkJCXJldHVybiBgJHttLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgIjAiKX06JHtoLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgIjAiKX06JHtnLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgIjAiKX0ke2Z9JHtfLnRvU3RyaW5nKCkucGFkU3RhcnQoMywgIjAiKX1gOwoJCQl9CgkJCWZ1bmN0aW9uIGNvbnZlcnRUb01TVGltZShkKSB7CgkJCQlsZXQgZiA9IGQuc3BsaXQoIiAiKT8uWzBdPy5zcGxpdCgiOiIpOwoJCQkJZi5sZW5ndGggPCAzICYmIGYudW5zaGlmdCgiMDAiKTsKCQkJCWxldCBbcCwgbSwgaF0gPSBmLCBnID0gK2gucmVwbGFjZSgvWywuXS8sICIiKSwgXyA9IG0gKiA2ZTQsIHYgPSBwICogMzZlNTsKCQkJCXJldHVybiB2ICsgXyArIGc7CgkJCX0KCQkJZnVuY3Rpb24gY29udmVydFN1YnNGcm9tSlNPTihkLCBmID0gInNydCIpIHsKCQkJCWxldCBwID0gZiA9PT0gInZ0dCIsIG0gPSBwID8gIi4iIDogIiwiLCBoID0gZC5zdWJ0aXRsZXMubWFwKChkLCBmKSA9PiB7CgkJCQkJbGV0IGggPSBwID8gIiIgOiBgJHtmICsgMX1cbmA7CgkJCQkJcmV0dXJuIGggKyBgJHtjb252ZXJ0VG9TdHJUaW1lKGQuc3RhcnRNcywgbSl9IC0tPiAke2NvbnZlcnRUb1N0clRpbWUoZC5zdGFydE1zICsgZC5kdXJhdGlvbk1zLCBtKX1cbiR7ZC50ZXh0fVxuXG5gOwoJCQkJfSkuam9pbigiIikudHJpbSgpOwoJCQkJcmV0dXJuIHAgPyBgV0VCVlRUXG5cbiR7aH1gIDogaDsKCQkJfQoJCQlmdW5jdGlvbiBjb252ZXJ0U3Vic1RvSlNPTihkLCBmID0gInNydCIpIHsKCQkJCWxldCBwID0gZC5zcGxpdCgvXHI/XG5ccj9cbi9nKTsKCQkJCWYgPT09ICJ2dHQiICYmIHAuc2hpZnQoKSwgL15cZCtccj9cbi8uZXhlYyhwPy5bMF0gPz8gIiIpICYmIChmID0gInNydCIpOwoJCQkJbGV0IG0gPSArKGYgPT09ICJzcnQiKSwgaCA9IHAucmVkdWNlKChkLCBmKSA9PiB7CgkJCQkJbGV0IHAgPSBmLnRyaW0oKS5zcGxpdCgiXG4iKSwgaCA9IHBbbV0sIGcgPSBwLnNsaWNlKG0gKyAxKS5qb2luKCJcbiIpOwoJCQkJCWlmICgocC5sZW5ndGggIT09IDIgfHwgIWYuaW5jbHVkZXMoIiAtLT4gIikpICYmICFoPy5pbmNsdWRlcygiIC0tPiAiKSkgcmV0dXJuIGQubGVuZ3RoID09PSAwIHx8IChkW2QubGVuZ3RoIC0gMV0udGV4dCArPSBgXG5cbiR7cC5qb2luKCJcbiIpfWApLCBkOwoJCQkJCWxldCBbXywgdl0gPSBoLnNwbGl0KCIgLS0+ICIpLCBiID0gY29udmVydFRvTVNUaW1lKF8pLCB4ID0gY29udmVydFRvTVNUaW1lKHYpLCBDID0geCAtIGI7CgkJCQkJcmV0dXJuIGQucHVzaCh7CgkJCQkJCXRleHQ6IGcsCgkJCQkJCXN0YXJ0TXM6IGIsCgkJCQkJCWR1cmF0aW9uTXM6IEMsCgkJCQkJCXNwZWFrZXJJZDogIjAiCgkJCQkJfSksIGQ7CgkJCQl9LCBbXSk7CgkJCQlyZXR1cm4gewoJCQkJCWNvbnRhaW5zVG9rZW5zOiAhMSwKCQkJCQlzdWJ0aXRsZXM6IGgKCQkJCX07CgkJCX0KCQkJZnVuY3Rpb24gZ2V0U3Vic0Zvcm1hdChkKSB7CgkJCQlyZXR1cm4gdHlwZW9mIGQgPT0gInN0cmluZyIgPyAvXihXRUJWVFQoW15cbl0rKT8pKFxyP1xuKS8uZXhlYyhkKSA/ICJ2dHQiIDogInNydCIgOiAianNvbiI7CgkJCX0KCQkJZnVuY3Rpb24gY29udmVydFN1YnMoZCwgZiA9ICJzcnQiKSB7CgkJCQlsZXQgcCA9IGdldFN1YnNGb3JtYXQoZCk7CgkJCQlyZXR1cm4gcCA9PT0gZiA/IGQgOiBwID09PSAianNvbiIgPyBjb252ZXJ0U3Vic0Zyb21KU09OKGQsIGYpIDogKGQgPSBjb252ZXJ0U3Vic1RvSlNPTihkLCBwKSwgZiA9PT0gImpzb24iID8gZCA6IGNvbnZlcnRTdWJzRnJvbUpTT04oZCwgZikpOwoJCQl9CgkJfSwKCQkiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9zaGFyZWQvZGlzdC91dGlscy91dGlscy5qcyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5kKGYsIHsKCQkJCWVjOiAoKSA9PiBub3JtYWxpemVMYW5nLAoJCQkJZmw6ICgpID0+IHByb3h5TWVkaWEsCgkJCQlsZzogKCkgPT4gZ2V0VGltZXN0YW1wLAoJCQkJdTk6ICgpID0+IGZldGNoV2l0aFRpbWVvdXQKCQkJfSk7CgkJCXZhciBtID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9zaGFyZWQvZGlzdC9kYXRhL2NvbmZpZy5qcyIpOwoJCQlsZXQgaCA9IHsKCQkJCWFmcjogImFmIiwKCQkJCWFrYTogImFrIiwKCQkJCWFsYjogInNxIiwKCQkJCWFtaDogImFtIiwKCQkJCWFyYTogImFyIiwKCQkJCWFybTogImh5IiwKCQkJCWFzbTogImFzIiwKCQkJCWF5bTogImF5IiwKCQkJCWF6ZTogImF6IiwKCQkJCWJhcTogImV1IiwKCQkJCWJlbDogImJlIiwKCQkJCWJlbjogImJuIiwKCQkJCWJvczogImJzIiwKCQkJCWJ1bDogImJnIiwKCQkJCWJ1cjogIm15IiwKCQkJCWNhdDogImNhIiwKCQkJCWNoaTogInpoIiwKCQkJCWNvczogImNvIiwKCQkJCWN6ZTogImNzIiwKCQkJCWRhbjogImRhIiwKCQkJCWRpdjogImR2IiwKCQkJCWR1dDogIm5sIiwKCQkJCWVuZzogImVuIiwKCQkJCWVwbzogImVvIiwKCQkJCWVzdDogImV0IiwKCQkJCWV3ZTogImVlIiwKCQkJCWZpbjogImZpIiwKCQkJCWZyZTogImZyIiwKCQkJCWZyeTogImZ5IiwKCQkJCWdlbzogImthIiwKCQkJCWdlcjogImRlIiwKCQkJCWdsYTogImdkIiwKCQkJCWdsZTogImdhIiwKCQkJCWdsZzogImdsIiwKCQkJCWdyZTogImVsIiwKCQkJCWdybjogImduIiwKCQkJCWd1ajogImd1IiwKCQkJCWhhdDogImh0IiwKCQkJCWhhdTogImhhIiwKCQkJCWhpbjogImhpIiwKCQkJCWhydjogImhyIiwKCQkJCWh1bjogImh1IiwKCQkJCWlibzogImlnIiwKCQkJCWljZTogImlzIiwKCQkJCWluZDogImlkIiwKCQkJCWl0YTogIml0IiwKCQkJCWphdjogImp2IiwKCQkJCWpwbjogImphIiwKCQkJCWthbjogImtuIiwKCQkJCWthejogImtrIiwKCQkJCWtobTogImttIiwKCQkJCWtpbjogInJ3IiwKCQkJCWtpcjogImt5IiwKCQkJCWtvcjogImtvIiwKCQkJCWt1cjogImt1IiwKCQkJCWxhbzogImxvIiwKCQkJCWxhdDogImxhIiwKCQkJCWxhdjogImx2IiwKCQkJCWxpbjogImxuIiwKCQkJCWxpdDogImx0IiwKCQkJCWx0ejogImxiIiwKCQkJCWx1ZzogImxnIiwKCQkJCW1hYzogIm1rIiwKCQkJCW1hbDogIm1sIiwKCQkJCW1hbzogIm1pIiwKCQkJCW1hcjogIm1yIiwKCQkJCW1heTogIm1zIiwKCQkJCW1sZzogIm1nIiwKCQkJCW1sdDogIm10IiwKCQkJCW1vbjogIm1uIiwKCQkJCW5lcDogIm5lIiwKCQkJCW5vcjogIm5vIiwKCQkJCW55YTogIm55IiwKCQkJCW9yaTogIm9yIiwKCQkJCW9ybTogIm9tIiwKCQkJCXBhbjogInBhIiwKCQkJCXBlcjogImZhIiwKCQkJCXBvbDogInBsIiwKCQkJCXBvcjogInB0IiwKCQkJCXB1czogInBzIiwKCQkJCXF1ZTogInF1IiwKCQkJCXJ1bTogInJvIiwKCQkJCXJ1czogInJ1IiwKCQkJCXNhbjogInNhIiwKCQkJCXNpbjogInNpIiwKCQkJCXNsbzogInNrIiwKCQkJCXNsdjogInNsIiwKCQkJCXNtbzogInNtIiwKCQkJCXNuYTogInNuIiwKCQkJCXNuZDogInNkIiwKCQkJCXNvbTogInNvIiwKCQkJCXNvdDogInN0IiwKCQkJCXNwYTogImVzIiwKCQkJCXNycDogInNyIiwKCQkJCXN1bjogInN1IiwKCQkJCXN3YTogInN3IiwKCQkJCXN3ZTogInN2IiwKCQkJCXRhbTogInRhIiwKCQkJCXRhdDogInR0IiwKCQkJCXRlbDogInRlIiwKCQkJCXRnazogInRnIiwKCQkJCXRoYTogInRoIiwKCQkJCXRpcjogInRpIiwKCQkJCXRzbzogInRzIiwKCQkJCXR1azogInRrIiwKCQkJCXR1cjogInRyIiwKCQkJCXVpZzogInVnIiwKCQkJCXVrcjogInVrIiwKCQkJCXVyZDogInVyIiwKCQkJCXV6YjogInV6IiwKCQkJCXZpZTogInZpIiwKCQkJCXdlbDogImN5IiwKCQkJCXhobzogInhoIiwKCQkJCXlpZDogInlpIiwKCQkJCXlvcjogInlvIiwKCQkJCXp1bDogInp1IgoJCQl9OwoJCQlhc3luYyBmdW5jdGlvbiBmZXRjaFdpdGhUaW1lb3V0KGQsIGYgPSB7IGhlYWRlcnM6IHsgIlVzZXItQWdlbnQiOiBtLkEudXNlckFnZW50IH0gfSkgewoJCQkJbGV0IHsgdGltZW91dDogcCA9IDNlMywuLi5oIH0gPSBmLCBnID0gbmV3IEFib3J0Q29udHJvbGxlcigpLCBfID0gc2V0VGltZW91dCgoKSA9PiBnLmFib3J0KCksIHApLCB2ID0gYXdhaXQgZmV0Y2goZCwgewoJCQkJCXNpZ25hbDogZy5zaWduYWwsCgkJCQkJLi4uaAoJCQkJfSk7CgkJCQlyZXR1cm4gY2xlYXJUaW1lb3V0KF8pLCB2OwoJCQl9CgkJCWZ1bmN0aW9uIGdldFRpbWVzdGFtcCgpIHsKCQkJCXJldHVybiBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxZTMpOwoJCQl9CgkJCWZ1bmN0aW9uIG5vcm1hbGl6ZUxhbmcoZCkgewoJCQkJcmV0dXJuIGQubGVuZ3RoID09PSAzID8gaFtkXSA6IGQudG9Mb3dlckNhc2UoKS5zcGxpdCgvW187LV0vKVswXS50cmltKCk7CgkJCX0KCQkJZnVuY3Rpb24gcHJveHlNZWRpYShkLCBmID0gIm1wNCIpIHsKCQkJCWxldCBwID0gYGh0dHBzOi8vJHttLkEubWVkaWFQcm94eX0vdjEvcHJveHkvdmlkZW8uJHtmfT9mb3JtYXQ9YmFzZTY0JmZvcmNlPXRydWVgOwoJCQkJcmV0dXJuIGQgaW5zdGFuY2VvZiBVUkwgPyBgJHtwfSZ1cmw9JHtidG9hKGQuaHJlZil9Jm9yaWdpbj0ke2Qub3JpZ2lufSZyZWZlcmVyPSR7ZC5vcmlnaW59YCA6IGAke3B9JnVybD0ke2J0b2EoZCl9YDsKCQkJfQoJCX0sCgkJIi4vbm9kZV9tb2R1bGVzL2Jvd3Nlci9lczUuanMiOiBmdW5jdGlvbihkKSB7CgkJCShmdW5jdGlvbihmLCBwKSB7CgkJCQlkLmV4cG9ydHMgPSBwKCk7CgkJCX0pKHRoaXMsIGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuIGZ1bmN0aW9uKGQpIHsKCQkJCQl2YXIgZiA9IHt9OwoJCQkJCWZ1bmN0aW9uIHIocCkgewoJCQkJCQlpZiAoZltwXSkgcmV0dXJuIGZbcF0uZXhwb3J0czsKCQkJCQkJdmFyIG0gPSBmW3BdID0gewoJCQkJCQkJaTogcCwKCQkJCQkJCWw6ICExLAoJCQkJCQkJZXhwb3J0czoge30KCQkJCQkJfTsKCQkJCQkJcmV0dXJuIGRbcF0uY2FsbChtLmV4cG9ydHMsIG0sIG0uZXhwb3J0cywgciksIG0ubCA9ICEwLCBtLmV4cG9ydHM7CgkJCQkJfQoJCQkJCXJldHVybiByLm0gPSBkLCByLmMgPSBmLCByLmQgPSBmdW5jdGlvbihkLCBmLCBwKSB7CgkJCQkJCXIubyhkLCBmKSB8fCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZCwgZiwgewoJCQkJCQkJZW51bWVyYWJsZTogITAsCgkJCQkJCQlnZXQ6IHAKCQkJCQkJfSk7CgkJCQkJfSwgci5yID0gZnVuY3Rpb24oZCkgewoJCQkJCQl0eXBlb2YgU3ltYm9sIDwgInUiICYmIFN5bWJvbC50b1N0cmluZ1RhZyAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZCwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAiTW9kdWxlIiB9KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGQsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogITAgfSk7CgkJCQkJfSwgci50ID0gZnVuY3Rpb24oZCwgZikgewoJCQkJCQlpZiAoMSAmIGYgJiYgKGQgPSByKGQpKSwgOCAmIGYgfHwgNCAmIGYgJiYgdHlwZW9mIGQgPT0gIm9iamVjdCIgJiYgZCAmJiBkLl9fZXNNb2R1bGUpIHJldHVybiBkOwoJCQkJCQl2YXIgcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7CgkJCQkJCWlmIChyLnIocCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwLCAiZGVmYXVsdCIsIHsKCQkJCQkJCWVudW1lcmFibGU6ICEwLAoJCQkJCQkJdmFsdWU6IGQKCQkJCQkJfSksIDIgJiBmICYmIHR5cGVvZiBkICE9ICJzdHJpbmciKSBmb3IgKHZhciBtIGluIGQpIHIuZChwLCBtLCBmdW5jdGlvbihmKSB7CgkJCQkJCQlyZXR1cm4gZFtmXTsKCQkJCQkJfS5iaW5kKG51bGwsIG0pKTsKCQkJCQkJcmV0dXJuIHA7CgkJCQkJfSwgci5uID0gZnVuY3Rpb24oZCkgewoJCQkJCQl2YXIgZiA9IGQgJiYgZC5fX2VzTW9kdWxlID8gZnVuY3Rpb24oKSB7CgkJCQkJCQlyZXR1cm4gZC5kZWZhdWx0OwoJCQkJCQl9IDogZnVuY3Rpb24oKSB7CgkJCQkJCQlyZXR1cm4gZDsKCQkJCQkJfTsKCQkJCQkJcmV0dXJuIHIuZChmLCAiYSIsIGYpLCBmOwoJCQkJCX0sIHIubyA9IGZ1bmN0aW9uKGQsIGYpIHsKCQkJCQkJcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkLCBmKTsKCQkJCQl9LCByLnAgPSAiIiwgcihyLnMgPSA5MCk7CgkJCQl9KHsKCQkJCQkxNzogZnVuY3Rpb24oZCwgZiwgcCkgewoJCQkJCQkidXNlIHN0cmljdCI7CgkJCQkJCWYuX19lc01vZHVsZSA9ICEwLCBmLmRlZmF1bHQgPSB2b2lkIDA7CgkJCQkJCXZhciBtID0gcCgxOCksIGggPSBmdW5jdGlvbigpIHsKCQkJCQkJCWZ1bmN0aW9uIGUoKSB7fQoJCQkJCQkJcmV0dXJuIGUuZ2V0Rmlyc3RNYXRjaCA9IGZ1bmN0aW9uKGQsIGYpIHsKCQkJCQkJCQl2YXIgcCA9IGYubWF0Y2goZCk7CgkJCQkJCQkJcmV0dXJuIHAgJiYgcC5sZW5ndGggPiAwICYmIHBbMV0gfHwgIiI7CgkJCQkJCQl9LCBlLmdldFNlY29uZE1hdGNoID0gZnVuY3Rpb24oZCwgZikgewoJCQkJCQkJCXZhciBwID0gZi5tYXRjaChkKTsKCQkJCQkJCQlyZXR1cm4gcCAmJiBwLmxlbmd0aCA+IDEgJiYgcFsyXSB8fCAiIjsKCQkJCQkJCX0sIGUubWF0Y2hBbmRSZXR1cm5Db25zdCA9IGZ1bmN0aW9uKGQsIGYsIHApIHsKCQkJCQkJCQlpZiAoZC50ZXN0KGYpKSByZXR1cm4gcDsKCQkJCQkJCX0sIGUuZ2V0V2luZG93c1ZlcnNpb25OYW1lID0gZnVuY3Rpb24oZCkgewoJCQkJCQkJCXN3aXRjaCAoZCkgewoJCQkJCQkJCQljYXNlICJOVCI6IHJldHVybiAiTlQiOwoJCQkJCQkJCQljYXNlICJYUCI6IHJldHVybiAiWFAiOwoJCQkJCQkJCQljYXNlICJOVCA1LjAiOiByZXR1cm4gIjIwMDAiOwoJCQkJCQkJCQljYXNlICJOVCA1LjEiOiByZXR1cm4gIlhQIjsKCQkJCQkJCQkJY2FzZSAiTlQgNS4yIjogcmV0dXJuICIyMDAzIjsKCQkJCQkJCQkJY2FzZSAiTlQgNi4wIjogcmV0dXJuICJWaXN0YSI7CgkJCQkJCQkJCWNhc2UgIk5UIDYuMSI6IHJldHVybiAiNyI7CgkJCQkJCQkJCWNhc2UgIk5UIDYuMiI6IHJldHVybiAiOCI7CgkJCQkJCQkJCWNhc2UgIk5UIDYuMyI6IHJldHVybiAiOC4xIjsKCQkJCQkJCQkJY2FzZSAiTlQgMTAuMCI6IHJldHVybiAiMTAiOwoJCQkJCQkJCQlkZWZhdWx0OiByZXR1cm47CgkJCQkJCQkJfQoJCQkJCQkJfSwgZS5nZXRNYWNPU1ZlcnNpb25OYW1lID0gZnVuY3Rpb24oZCkgewoJCQkJCQkJCXZhciBmID0gZC5zcGxpdCgiLiIpLnNwbGljZSgwLCAyKS5tYXAoZnVuY3Rpb24oZCkgewoJCQkJCQkJCQlyZXR1cm4gcGFyc2VJbnQoZCwgMTApIHx8IDA7CgkJCQkJCQkJfSk7CgkJCQkJCQkJaWYgKGYucHVzaCgwKSwgZlswXSA9PT0gMTApIHN3aXRjaCAoZlsxXSkgewoJCQkJCQkJCQljYXNlIDU6IHJldHVybiAiTGVvcGFyZCI7CgkJCQkJCQkJCWNhc2UgNjogcmV0dXJuICJTbm93IExlb3BhcmQiOwoJCQkJCQkJCQljYXNlIDc6IHJldHVybiAiTGlvbiI7CgkJCQkJCQkJCWNhc2UgODogcmV0dXJuICJNb3VudGFpbiBMaW9uIjsKCQkJCQkJCQkJY2FzZSA5OiByZXR1cm4gIk1hdmVyaWNrcyI7CgkJCQkJCQkJCWNhc2UgMTA6IHJldHVybiAiWW9zZW1pdGUiOwoJCQkJCQkJCQljYXNlIDExOiByZXR1cm4gIkVsIENhcGl0YW4iOwoJCQkJCQkJCQljYXNlIDEyOiByZXR1cm4gIlNpZXJyYSI7CgkJCQkJCQkJCWNhc2UgMTM6IHJldHVybiAiSGlnaCBTaWVycmEiOwoJCQkJCQkJCQljYXNlIDE0OiByZXR1cm4gIk1vamF2ZSI7CgkJCQkJCQkJCWNhc2UgMTU6IHJldHVybiAiQ2F0YWxpbmEiOwoJCQkJCQkJCQlkZWZhdWx0OiByZXR1cm47CgkJCQkJCQkJfQoJCQkJCQkJfSwgZS5nZXRBbmRyb2lkVmVyc2lvbk5hbWUgPSBmdW5jdGlvbihkKSB7CgkJCQkJCQkJdmFyIGYgPSBkLnNwbGl0KCIuIikuc3BsaWNlKDAsIDIpLm1hcChmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXJldHVybiBwYXJzZUludChkLCAxMCkgfHwgMDsKCQkJCQkJCQl9KTsKCQkJCQkJCQlpZiAoZi5wdXNoKDApLCAhKGZbMF0gPT09IDEgJiYgZlsxXSA8IDUpKSByZXR1cm4gZlswXSA9PT0gMSAmJiBmWzFdIDwgNiA/ICJDdXBjYWtlIiA6IGZbMF0gPT09IDEgJiYgZlsxXSA+PSA2ID8gIkRvbnV0IiA6IGZbMF0gPT09IDIgJiYgZlsxXSA8IDIgPyAiRWNsYWlyIiA6IGZbMF0gPT09IDIgJiYgZlsxXSA9PT0gMiA/ICJGcm95byIgOiBmWzBdID09PSAyICYmIGZbMV0gPiAyID8gIkdpbmdlcmJyZWFkIiA6IGZbMF0gPT09IDMgPyAiSG9uZXljb21iIiA6IGZbMF0gPT09IDQgJiYgZlsxXSA8IDEgPyAiSWNlIENyZWFtIFNhbmR3aWNoIiA6IGZbMF0gPT09IDQgJiYgZlsxXSA8IDQgPyAiSmVsbHkgQmVhbiIgOiBmWzBdID09PSA0ICYmIGZbMV0gPj0gNCA/ICJLaXRLYXQiIDogZlswXSA9PT0gNSA/ICJMb2xsaXBvcCIgOiBmWzBdID09PSA2ID8gIk1hcnNobWFsbG93IiA6IGZbMF0gPT09IDcgPyAiTm91Z2F0IiA6IGZbMF0gPT09IDggPyAiT3JlbyIgOiBmWzBdID09PSA5ID8gIlBpZSIgOiB2b2lkIDA7CgkJCQkJCQl9LCBlLmdldFZlcnNpb25QcmVjaXNpb24gPSBmdW5jdGlvbihkKSB7CgkJCQkJCQkJcmV0dXJuIGQuc3BsaXQoIi4iKS5sZW5ndGg7CgkJCQkJCQl9LCBlLmNvbXBhcmVWZXJzaW9ucyA9IGZ1bmN0aW9uKGQsIGYsIHApIHsKCQkJCQkJCQlwID09PSB2b2lkIDAgJiYgKHAgPSAhMSk7CgkJCQkJCQkJdmFyIG0gPSBlLmdldFZlcnNpb25QcmVjaXNpb24oZCksIGggPSBlLmdldFZlcnNpb25QcmVjaXNpb24oZiksIGcgPSBNYXRoLm1heChtLCBoKSwgXyA9IDAsIHYgPSBlLm1hcChbZCwgZl0sIGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSBnIC0gZS5nZXRWZXJzaW9uUHJlY2lzaW9uKGQpLCBwID0gZCArIEFycmF5KGYgKyAxKS5qb2luKCIuMCIpOwoJCQkJCQkJCQlyZXR1cm4gZS5tYXAocC5zcGxpdCgiLiIpLCBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCQlyZXR1cm4gQXJyYXkoMjAgLSBkLmxlbmd0aCkuam9pbigiMCIpICsgZDsKCQkJCQkJCQkJfSkucmV2ZXJzZSgpOwoJCQkJCQkJCX0pOwoJCQkJCQkJCWZvciAocCAmJiAoXyA9IGcgLSBNYXRoLm1pbihtLCBoKSksIC0tZzsgZyA+PSBfOykgewoJCQkJCQkJCQlpZiAodlswXVtnXSA+IHZbMV1bZ10pIHJldHVybiAxOwoJCQkJCQkJCQlpZiAodlswXVtnXSA9PT0gdlsxXVtnXSkgewoJCQkJCQkJCQkJaWYgKGcgPT09IF8pIHJldHVybiAwOwoJCQkJCQkJCQkJLS1nOwoJCQkJCQkJCQl9IGVsc2UgaWYgKHZbMF1bZ10gPCB2WzFdW2ddKSByZXR1cm4gLTE7CgkJCQkJCQkJfQoJCQkJCQkJfSwgZS5tYXAgPSBmdW5jdGlvbihkLCBmKSB7CgkJCQkJCQkJdmFyIHAsIG0gPSBbXTsKCQkJCQkJCQlpZiAoQXJyYXkucHJvdG90eXBlLm1hcCkgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChkLCBmKTsKCQkJCQkJCQlmb3IgKHAgPSAwOyBwIDwgZC5sZW5ndGg7IHAgKz0gMSkgbS5wdXNoKGYoZFtwXSkpOwoJCQkJCQkJCXJldHVybiBtOwoJCQkJCQkJfSwgZS5maW5kID0gZnVuY3Rpb24oZCwgZikgewoJCQkJCQkJCXZhciBwLCBtOwoJCQkJCQkJCWlmIChBcnJheS5wcm90b3R5cGUuZmluZCkgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5maW5kLmNhbGwoZCwgZik7CgkJCQkJCQkJZm9yIChwID0gMCwgbSA9IGQubGVuZ3RoOyBwIDwgbTsgcCArPSAxKSB7CgkJCQkJCQkJCXZhciBoID0gZFtwXTsKCQkJCQkJCQkJaWYgKGYoaCwgcCkpIHJldHVybiBoOwoJCQkJCQkJCX0KCQkJCQkJCX0sIGUuYXNzaWduID0gZnVuY3Rpb24oZCkgewoJCQkJCQkJCWZvciAodmFyIGYsIHAsIG0gPSBkLCBoID0gYXJndW1lbnRzLmxlbmd0aCwgZyA9IEFycmF5KGggPiAxID8gaCAtIDEgOiAwKSwgXyA9IDE7IF8gPCBoOyBfKyspIGdbXyAtIDFdID0gYXJndW1lbnRzW19dOwoJCQkJCQkJCWlmIChPYmplY3QuYXNzaWduKSByZXR1cm4gT2JqZWN0LmFzc2lnbi5hcHBseShPYmplY3QsIFtkXS5jb25jYXQoZykpOwoJCQkJCQkJCXZhciBvID0gZnVuY3Rpb24oKSB7CgkJCQkJCQkJCXZhciBkID0gZ1tmXTsKCQkJCQkJCQkJdHlwZW9mIGQgPT0gIm9iamVjdCIgJiYgZCAmJiBPYmplY3Qua2V5cyhkKS5mb3JFYWNoKGZ1bmN0aW9uKGYpIHsKCQkJCQkJCQkJCW1bZl0gPSBkW2ZdOwoJCQkJCQkJCQl9KTsKCQkJCQkJCQl9OwoJCQkJCQkJCWZvciAoZiA9IDAsIHAgPSBnLmxlbmd0aDsgZiA8IHA7IGYgKz0gMSkgbygpOwoJCQkJCQkJCXJldHVybiBkOwoJCQkJCQkJfSwgZS5nZXRCcm93c2VyQWxpYXMgPSBmdW5jdGlvbihkKSB7CgkJCQkJCQkJcmV0dXJuIG0uQlJPV1NFUl9BTElBU0VTX01BUFtkXTsKCQkJCQkJCX0sIGUuZ2V0QnJvd3NlclR5cGVCeUFsaWFzID0gZnVuY3Rpb24oZCkgewoJCQkJCQkJCXJldHVybiBtLkJST1dTRVJfTUFQW2RdIHx8ICIiOwoJCQkJCQkJfSwgZTsKCQkJCQkJfSgpOwoJCQkJCQlmLmRlZmF1bHQgPSBoLCBkLmV4cG9ydHMgPSBmLmRlZmF1bHQ7CgkJCQkJfSwKCQkJCQkxODogZnVuY3Rpb24oZCwgZiwgcCkgewoJCQkJCQkidXNlIHN0cmljdCI7CgkJCQkJCWYuX19lc01vZHVsZSA9ICEwLCBmLkVOR0lORV9NQVAgPSBmLk9TX01BUCA9IGYuUExBVEZPUk1TX01BUCA9IGYuQlJPV1NFUl9NQVAgPSBmLkJST1dTRVJfQUxJQVNFU19NQVAgPSB2b2lkIDAsIGYuQlJPV1NFUl9BTElBU0VTX01BUCA9IHsKCQkJCQkJCSJBbWF6b24gU2lsayI6ICJhbWF6b25fc2lsayIsCgkJCQkJCQkiQW5kcm9pZCBCcm93c2VyIjogImFuZHJvaWQiLAoJCQkJCQkJQmFkYTogImJhZGEiLAoJCQkJCQkJQmxhY2tCZXJyeTogImJsYWNrYmVycnkiLAoJCQkJCQkJQ2hyb21lOiAiY2hyb21lIiwKCQkJCQkJCUNocm9taXVtOiAiY2hyb21pdW0iLAoJCQkJCQkJRWxlY3Ryb246ICJlbGVjdHJvbiIsCgkJCQkJCQlFcGlwaGFueTogImVwaXBoYW55IiwKCQkJCQkJCUZpcmVmb3g6ICJmaXJlZm94IiwKCQkJCQkJCUZvY3VzOiAiZm9jdXMiLAoJCQkJCQkJR2VuZXJpYzogImdlbmVyaWMiLAoJCQkJCQkJIkdvb2dsZSBTZWFyY2giOiAiZ29vZ2xlX3NlYXJjaCIsCgkJCQkJCQlHb29nbGVib3Q6ICJnb29nbGVib3QiLAoJCQkJCQkJIkludGVybmV0IEV4cGxvcmVyIjogImllIiwKCQkJCQkJCSJLLU1lbGVvbiI6ICJrX21lbGVvbiIsCgkJCQkJCQlNYXh0aG9uOiAibWF4dGhvbiIsCgkJCQkJCQkiTWljcm9zb2Z0IEVkZ2UiOiAiZWRnZSIsCgkJCQkJCQkiTVogQnJvd3NlciI6ICJteiIsCgkJCQkJCQkiTkFWRVIgV2hhbGUgQnJvd3NlciI6ICJuYXZlciIsCgkJCQkJCQlPcGVyYTogIm9wZXJhIiwKCQkJCQkJCSJPcGVyYSBDb2FzdCI6ICJvcGVyYV9jb2FzdCIsCgkJCQkJCQlQaGFudG9tSlM6ICJwaGFudG9tanMiLAoJCQkJCQkJUHVmZmluOiAicHVmZmluIiwKCQkJCQkJCVF1cFppbGxhOiAicXVwemlsbGEiLAoJCQkJCQkJUVE6ICJxcSIsCgkJCQkJCQlRUUxpdGU6ICJxcWxpdGUiLAoJCQkJCQkJU2FmYXJpOiAic2FmYXJpIiwKCQkJCQkJCVNhaWxmaXNoOiAic2FpbGZpc2giLAoJCQkJCQkJIlNhbXN1bmcgSW50ZXJuZXQgZm9yIEFuZHJvaWQiOiAic2Ftc3VuZ19pbnRlcm5ldCIsCgkJCQkJCQlTZWFNb25rZXk6ICJzZWFtb25rZXkiLAoJCQkJCQkJU2xlaXBuaXI6ICJzbGVpcG5pciIsCgkJCQkJCQlTd2luZzogInN3aW5nIiwKCQkJCQkJCVRpemVuOiAidGl6ZW4iLAoJCQkJCQkJIlVDIEJyb3dzZXIiOiAidWMiLAoJCQkJCQkJVml2YWxkaTogInZpdmFsZGkiLAoJCQkJCQkJIldlYk9TIEJyb3dzZXIiOiAid2Vib3MiLAoJCQkJCQkJV2VDaGF0OiAid2VjaGF0IiwKCQkJCQkJCSJZYW5kZXggQnJvd3NlciI6ICJ5YW5kZXgiLAoJCQkJCQkJUm9rdTogInJva3UiCgkJCQkJCX0sIGYuQlJPV1NFUl9NQVAgPSB7CgkJCQkJCQlhbWF6b25fc2lsazogIkFtYXpvbiBTaWxrIiwKCQkJCQkJCWFuZHJvaWQ6ICJBbmRyb2lkIEJyb3dzZXIiLAoJCQkJCQkJYmFkYTogIkJhZGEiLAoJCQkJCQkJYmxhY2tiZXJyeTogIkJsYWNrQmVycnkiLAoJCQkJCQkJY2hyb21lOiAiQ2hyb21lIiwKCQkJCQkJCWNocm9taXVtOiAiQ2hyb21pdW0iLAoJCQkJCQkJZWxlY3Ryb246ICJFbGVjdHJvbiIsCgkJCQkJCQllcGlwaGFueTogIkVwaXBoYW55IiwKCQkJCQkJCWZpcmVmb3g6ICJGaXJlZm94IiwKCQkJCQkJCWZvY3VzOiAiRm9jdXMiLAoJCQkJCQkJZ2VuZXJpYzogIkdlbmVyaWMiLAoJCQkJCQkJZ29vZ2xlYm90OiAiR29vZ2xlYm90IiwKCQkJCQkJCWdvb2dsZV9zZWFyY2g6ICJHb29nbGUgU2VhcmNoIiwKCQkJCQkJCWllOiAiSW50ZXJuZXQgRXhwbG9yZXIiLAoJCQkJCQkJa19tZWxlb246ICJLLU1lbGVvbiIsCgkJCQkJCQltYXh0aG9uOiAiTWF4dGhvbiIsCgkJCQkJCQllZGdlOiAiTWljcm9zb2Z0IEVkZ2UiLAoJCQkJCQkJbXo6ICJNWiBCcm93c2VyIiwKCQkJCQkJCW5hdmVyOiAiTkFWRVIgV2hhbGUgQnJvd3NlciIsCgkJCQkJCQlvcGVyYTogIk9wZXJhIiwKCQkJCQkJCW9wZXJhX2NvYXN0OiAiT3BlcmEgQ29hc3QiLAoJCQkJCQkJcGhhbnRvbWpzOiAiUGhhbnRvbUpTIiwKCQkJCQkJCXB1ZmZpbjogIlB1ZmZpbiIsCgkJCQkJCQlxdXB6aWxsYTogIlF1cFppbGxhIiwKCQkJCQkJCXFxOiAiUVEgQnJvd3NlciIsCgkJCQkJCQlxcWxpdGU6ICJRUSBCcm93c2VyIExpdGUiLAoJCQkJCQkJc2FmYXJpOiAiU2FmYXJpIiwKCQkJCQkJCXNhaWxmaXNoOiAiU2FpbGZpc2giLAoJCQkJCQkJc2Ftc3VuZ19pbnRlcm5ldDogIlNhbXN1bmcgSW50ZXJuZXQgZm9yIEFuZHJvaWQiLAoJCQkJCQkJc2VhbW9ua2V5OiAiU2VhTW9ua2V5IiwKCQkJCQkJCXNsZWlwbmlyOiAiU2xlaXBuaXIiLAoJCQkJCQkJc3dpbmc6ICJTd2luZyIsCgkJCQkJCQl0aXplbjogIlRpemVuIiwKCQkJCQkJCXVjOiAiVUMgQnJvd3NlciIsCgkJCQkJCQl2aXZhbGRpOiAiVml2YWxkaSIsCgkJCQkJCQl3ZWJvczogIldlYk9TIEJyb3dzZXIiLAoJCQkJCQkJd2VjaGF0OiAiV2VDaGF0IiwKCQkJCQkJCXlhbmRleDogIllhbmRleCBCcm93c2VyIgoJCQkJCQl9LCBmLlBMQVRGT1JNU19NQVAgPSB7CgkJCQkJCQl0YWJsZXQ6ICJ0YWJsZXQiLAoJCQkJCQkJbW9iaWxlOiAibW9iaWxlIiwKCQkJCQkJCWRlc2t0b3A6ICJkZXNrdG9wIiwKCQkJCQkJCXR2OiAidHYiCgkJCQkJCX0sIGYuT1NfTUFQID0gewoJCQkJCQkJV2luZG93c1Bob25lOiAiV2luZG93cyBQaG9uZSIsCgkJCQkJCQlXaW5kb3dzOiAiV2luZG93cyIsCgkJCQkJCQlNYWNPUzogIm1hY09TIiwKCQkJCQkJCWlPUzogImlPUyIsCgkJCQkJCQlBbmRyb2lkOiAiQW5kcm9pZCIsCgkJCQkJCQlXZWJPUzogIldlYk9TIiwKCQkJCQkJCUJsYWNrQmVycnk6ICJCbGFja0JlcnJ5IiwKCQkJCQkJCUJhZGE6ICJCYWRhIiwKCQkJCQkJCVRpemVuOiAiVGl6ZW4iLAoJCQkJCQkJTGludXg6ICJMaW51eCIsCgkJCQkJCQlDaHJvbWVPUzogIkNocm9tZSBPUyIsCgkJCQkJCQlQbGF5U3RhdGlvbjQ6ICJQbGF5U3RhdGlvbiA0IiwKCQkJCQkJCVJva3U6ICJSb2t1IgoJCQkJCQl9LCBmLkVOR0lORV9NQVAgPSB7CgkJCQkJCQlFZGdlSFRNTDogIkVkZ2VIVE1MIiwKCQkJCQkJCUJsaW5rOiAiQmxpbmsiLAoJCQkJCQkJVHJpZGVudDogIlRyaWRlbnQiLAoJCQkJCQkJUHJlc3RvOiAiUHJlc3RvIiwKCQkJCQkJCUdlY2tvOiAiR2Vja28iLAoJCQkJCQkJV2ViS2l0OiAiV2ViS2l0IgoJCQkJCQl9OwoJCQkJCX0sCgkJCQkJOTA6IGZ1bmN0aW9uKGQsIGYsIHApIHsKCQkJCQkJInVzZSBzdHJpY3QiOwoJCQkJCQlmLl9fZXNNb2R1bGUgPSAhMCwgZi5kZWZhdWx0ID0gdm9pZCAwOwoJCQkJCQl2YXIgbSwgaCA9IChtID0gcCg5MSkpICYmIG0uX19lc01vZHVsZSA/IG0gOiB7IGRlZmF1bHQ6IG0gfSwgZyA9IHAoMTgpOwoJCQkJCQlmdW5jdGlvbiBhKGQsIGYpIHsKCQkJCQkJCWZvciAodmFyIHAgPSAwOyBwIDwgZi5sZW5ndGg7IHArKykgewoJCQkJCQkJCXZhciBtID0gZltwXTsKCQkJCQkJCQltLmVudW1lcmFibGUgPSBtLmVudW1lcmFibGUgfHwgITEsIG0uY29uZmlndXJhYmxlID0gITAsICJ2YWx1ZSIgaW4gbSAmJiAobS53cml0YWJsZSA9ICEwKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGQsIG0ua2V5LCBtKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQl2YXIgXyA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJZnVuY3Rpb24gZSgpIHt9CgkJCQkJCQl2YXIgZCwgZiwgcDsKCQkJCQkJCXJldHVybiBlLmdldFBhcnNlciA9IGZ1bmN0aW9uKGQsIGYpIHsKCQkJCQkJCQlpZiAoZiA9PT0gdm9pZCAwICYmIChmID0gITEpLCB0eXBlb2YgZCAhPSAic3RyaW5nIikgdGhyb3cgRXJyb3IoIlVzZXJBZ2VudCBzaG91bGQgYmUgYSBzdHJpbmciKTsKCQkJCQkJCQlyZXR1cm4gbmV3IGguZGVmYXVsdChkLCBmKTsKCQkJCQkJCX0sIGUucGFyc2UgPSBmdW5jdGlvbihkKSB7CgkJCQkJCQkJcmV0dXJuIG5ldyBoLmRlZmF1bHQoZCkuZ2V0UmVzdWx0KCk7CgkJCQkJCQl9LCBkID0gZSwgcCA9IFsKCQkJCQkJCQl7CgkJCQkJCQkJCWtleTogIkJST1dTRVJfTUFQIiwKCQkJCQkJCQkJZ2V0OiBmdW5jdGlvbigpIHsKCQkJCQkJCQkJCXJldHVybiBnLkJST1dTRVJfTUFQOwoJCQkJCQkJCQl9CgkJCQkJCQkJfSwKCQkJCQkJCQl7CgkJCQkJCQkJCWtleTogIkVOR0lORV9NQVAiLAoJCQkJCQkJCQlnZXQ6IGZ1bmN0aW9uKCkgewoJCQkJCQkJCQkJcmV0dXJuIGcuRU5HSU5FX01BUDsKCQkJCQkJCQkJfQoJCQkJCQkJCX0sCgkJCQkJCQkJewoJCQkJCQkJCQlrZXk6ICJPU19NQVAiLAoJCQkJCQkJCQlnZXQ6IGZ1bmN0aW9uKCkgewoJCQkJCQkJCQkJcmV0dXJuIGcuT1NfTUFQOwoJCQkJCQkJCQl9CgkJCQkJCQkJfSwKCQkJCQkJCQl7CgkJCQkJCQkJCWtleTogIlBMQVRGT1JNU19NQVAiLAoJCQkJCQkJCQlnZXQ6IGZ1bmN0aW9uKCkgewoJCQkJCQkJCQkJcmV0dXJuIGcuUExBVEZPUk1TX01BUDsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCV0sIChmID0gbnVsbCkgJiYgYShkLnByb3RvdHlwZSwgZiksIHAgJiYgYShkLCBwKSwgZTsKCQkJCQkJfSgpOwoJCQkJCQlmLmRlZmF1bHQgPSBfLCBkLmV4cG9ydHMgPSBmLmRlZmF1bHQ7CgkJCQkJfSwKCQkJCQk5MTogZnVuY3Rpb24oZCwgZiwgcCkgewoJCQkJCQkidXNlIHN0cmljdCI7CgkJCQkJCWYuX19lc01vZHVsZSA9ICEwLCBmLmRlZmF1bHQgPSB2b2lkIDA7CgkJCQkJCXZhciBtID0gdShwKDkyKSksIGggPSB1KHAoOTMpKSwgZyA9IHUocCg5NCkpLCBfID0gdShwKDk1KSksIHYgPSB1KHAoMTcpKTsKCQkJCQkJZnVuY3Rpb24gdShkKSB7CgkJCQkJCQlyZXR1cm4gZCAmJiBkLl9fZXNNb2R1bGUgPyBkIDogeyBkZWZhdWx0OiBkIH07CgkJCQkJCX0KCQkJCQkJdmFyIGIgPSBmdW5jdGlvbigpIHsKCQkJCQkJCWZ1bmN0aW9uIGUoZCwgZikgewoJCQkJCQkJCWlmIChmID09PSB2b2lkIDAgJiYgKGYgPSAhMSksIGQgPT0gbnVsbCB8fCBkID09PSAiIikgdGhyb3cgRXJyb3IoIlVzZXJBZ2VudCBwYXJhbWV0ZXIgY2FuJ3QgYmUgZW1wdHkiKTsKCQkJCQkJCQl0aGlzLl91YSA9IGQsIHRoaXMucGFyc2VkUmVzdWx0ID0ge30sICEwICE9PSBmICYmIHRoaXMucGFyc2UoKTsKCQkJCQkJCX0KCQkJCQkJCXZhciBkID0gZS5wcm90b3R5cGU7CgkJCQkJCQlyZXR1cm4gZC5nZXRVQSA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJCXJldHVybiB0aGlzLl91YTsKCQkJCQkJCX0sIGQudGVzdCA9IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQlyZXR1cm4gZC50ZXN0KHRoaXMuX3VhKTsKCQkJCQkJCX0sIGQucGFyc2VCcm93c2VyID0gZnVuY3Rpb24oKSB7CgkJCQkJCQkJdmFyIGQgPSB0aGlzOwoJCQkJCQkJCXRoaXMucGFyc2VkUmVzdWx0LmJyb3dzZXIgPSB7fTsKCQkJCQkJCQl2YXIgZiA9IHYuZGVmYXVsdC5maW5kKG0uZGVmYXVsdCwgZnVuY3Rpb24oZikgewoJCQkJCQkJCQlpZiAodHlwZW9mIGYudGVzdCA9PSAiZnVuY3Rpb24iKSByZXR1cm4gZi50ZXN0KGQpOwoJCQkJCQkJCQlpZiAoZi50ZXN0IGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBmLnRlc3Quc29tZShmdW5jdGlvbihmKSB7CgkJCQkJCQkJCQlyZXR1cm4gZC50ZXN0KGYpOwoJCQkJCQkJCQl9KTsKCQkJCQkJCQkJdGhyb3cgRXJyb3IoIkJyb3dzZXIncyB0ZXN0IGZ1bmN0aW9uIGlzIG5vdCB2YWxpZCIpOwoJCQkJCQkJCX0pOwoJCQkJCQkJCXJldHVybiBmICYmICh0aGlzLnBhcnNlZFJlc3VsdC5icm93c2VyID0gZi5kZXNjcmliZSh0aGlzLmdldFVBKCkpKSwgdGhpcy5wYXJzZWRSZXN1bHQuYnJvd3NlcjsKCQkJCQkJCX0sIGQuZ2V0QnJvd3NlciA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJCXJldHVybiB0aGlzLnBhcnNlZFJlc3VsdC5icm93c2VyID8gdGhpcy5wYXJzZWRSZXN1bHQuYnJvd3NlciA6IHRoaXMucGFyc2VCcm93c2VyKCk7CgkJCQkJCQl9LCBkLmdldEJyb3dzZXJOYW1lID0gZnVuY3Rpb24oZCkgewoJCQkJCQkJCXJldHVybiBkID8gU3RyaW5nKHRoaXMuZ2V0QnJvd3NlcigpLm5hbWUpLnRvTG93ZXJDYXNlKCkgfHwgIiIgOiB0aGlzLmdldEJyb3dzZXIoKS5uYW1lIHx8ICIiOwoJCQkJCQkJfSwgZC5nZXRCcm93c2VyVmVyc2lvbiA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJCXJldHVybiB0aGlzLmdldEJyb3dzZXIoKS52ZXJzaW9uOwoJCQkJCQkJfSwgZC5nZXRPUyA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJCXJldHVybiB0aGlzLnBhcnNlZFJlc3VsdC5vcyA/IHRoaXMucGFyc2VkUmVzdWx0Lm9zIDogdGhpcy5wYXJzZU9TKCk7CgkJCQkJCQl9LCBkLnBhcnNlT1MgPSBmdW5jdGlvbigpIHsKCQkJCQkJCQl2YXIgZCA9IHRoaXM7CgkJCQkJCQkJdGhpcy5wYXJzZWRSZXN1bHQub3MgPSB7fTsKCQkJCQkJCQl2YXIgZiA9IHYuZGVmYXVsdC5maW5kKGguZGVmYXVsdCwgZnVuY3Rpb24oZikgewoJCQkJCQkJCQlpZiAodHlwZW9mIGYudGVzdCA9PSAiZnVuY3Rpb24iKSByZXR1cm4gZi50ZXN0KGQpOwoJCQkJCQkJCQlpZiAoZi50ZXN0IGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBmLnRlc3Quc29tZShmdW5jdGlvbihmKSB7CgkJCQkJCQkJCQlyZXR1cm4gZC50ZXN0KGYpOwoJCQkJCQkJCQl9KTsKCQkJCQkJCQkJdGhyb3cgRXJyb3IoIkJyb3dzZXIncyB0ZXN0IGZ1bmN0aW9uIGlzIG5vdCB2YWxpZCIpOwoJCQkJCQkJCX0pOwoJCQkJCQkJCXJldHVybiBmICYmICh0aGlzLnBhcnNlZFJlc3VsdC5vcyA9IGYuZGVzY3JpYmUodGhpcy5nZXRVQSgpKSksIHRoaXMucGFyc2VkUmVzdWx0Lm9zOwoJCQkJCQkJfSwgZC5nZXRPU05hbWUgPSBmdW5jdGlvbihkKSB7CgkJCQkJCQkJdmFyIGYgPSB0aGlzLmdldE9TKCkubmFtZTsKCQkJCQkJCQlyZXR1cm4gZCA/IFN0cmluZyhmKS50b0xvd2VyQ2FzZSgpIHx8ICIiIDogZiB8fCAiIjsKCQkJCQkJCX0sIGQuZ2V0T1NWZXJzaW9uID0gZnVuY3Rpb24oKSB7CgkJCQkJCQkJcmV0dXJuIHRoaXMuZ2V0T1MoKS52ZXJzaW9uOwoJCQkJCQkJfSwgZC5nZXRQbGF0Zm9ybSA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJCXJldHVybiB0aGlzLnBhcnNlZFJlc3VsdC5wbGF0Zm9ybSA/IHRoaXMucGFyc2VkUmVzdWx0LnBsYXRmb3JtIDogdGhpcy5wYXJzZVBsYXRmb3JtKCk7CgkJCQkJCQl9LCBkLmdldFBsYXRmb3JtVHlwZSA9IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQlkID09PSB2b2lkIDAgJiYgKGQgPSAhMSk7CgkJCQkJCQkJdmFyIGYgPSB0aGlzLmdldFBsYXRmb3JtKCkudHlwZTsKCQkJCQkJCQlyZXR1cm4gZCA/IFN0cmluZyhmKS50b0xvd2VyQ2FzZSgpIHx8ICIiIDogZiB8fCAiIjsKCQkJCQkJCX0sIGQucGFyc2VQbGF0Zm9ybSA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJCXZhciBkID0gdGhpczsKCQkJCQkJCQl0aGlzLnBhcnNlZFJlc3VsdC5wbGF0Zm9ybSA9IHt9OwoJCQkJCQkJCXZhciBmID0gdi5kZWZhdWx0LmZpbmQoZy5kZWZhdWx0LCBmdW5jdGlvbihmKSB7CgkJCQkJCQkJCWlmICh0eXBlb2YgZi50ZXN0ID09ICJmdW5jdGlvbiIpIHJldHVybiBmLnRlc3QoZCk7CgkJCQkJCQkJCWlmIChmLnRlc3QgaW5zdGFuY2VvZiBBcnJheSkgcmV0dXJuIGYudGVzdC5zb21lKGZ1bmN0aW9uKGYpIHsKCQkJCQkJCQkJCXJldHVybiBkLnRlc3QoZik7CgkJCQkJCQkJCX0pOwoJCQkJCQkJCQl0aHJvdyBFcnJvcigiQnJvd3NlcidzIHRlc3QgZnVuY3Rpb24gaXMgbm90IHZhbGlkIik7CgkJCQkJCQkJfSk7CgkJCQkJCQkJcmV0dXJuIGYgJiYgKHRoaXMucGFyc2VkUmVzdWx0LnBsYXRmb3JtID0gZi5kZXNjcmliZSh0aGlzLmdldFVBKCkpKSwgdGhpcy5wYXJzZWRSZXN1bHQucGxhdGZvcm07CgkJCQkJCQl9LCBkLmdldEVuZ2luZSA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJCXJldHVybiB0aGlzLnBhcnNlZFJlc3VsdC5lbmdpbmUgPyB0aGlzLnBhcnNlZFJlc3VsdC5lbmdpbmUgOiB0aGlzLnBhcnNlRW5naW5lKCk7CgkJCQkJCQl9LCBkLmdldEVuZ2luZU5hbWUgPSBmdW5jdGlvbihkKSB7CgkJCQkJCQkJcmV0dXJuIGQgPyBTdHJpbmcodGhpcy5nZXRFbmdpbmUoKS5uYW1lKS50b0xvd2VyQ2FzZSgpIHx8ICIiIDogdGhpcy5nZXRFbmdpbmUoKS5uYW1lIHx8ICIiOwoJCQkJCQkJfSwgZC5wYXJzZUVuZ2luZSA9IGZ1bmN0aW9uKCkgewoJCQkJCQkJCXZhciBkID0gdGhpczsKCQkJCQkJCQl0aGlzLnBhcnNlZFJlc3VsdC5lbmdpbmUgPSB7fTsKCQkJCQkJCQl2YXIgZiA9IHYuZGVmYXVsdC5maW5kKF8uZGVmYXVsdCwgZnVuY3Rpb24oZikgewoJCQkJCQkJCQlpZiAodHlwZW9mIGYudGVzdCA9PSAiZnVuY3Rpb24iKSByZXR1cm4gZi50ZXN0KGQpOwoJCQkJCQkJCQlpZiAoZi50ZXN0IGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBmLnRlc3Quc29tZShmdW5jdGlvbihmKSB7CgkJCQkJCQkJCQlyZXR1cm4gZC50ZXN0KGYpOwoJCQkJCQkJCQl9KTsKCQkJCQkJCQkJdGhyb3cgRXJyb3IoIkJyb3dzZXIncyB0ZXN0IGZ1bmN0aW9uIGlzIG5vdCB2YWxpZCIpOwoJCQkJCQkJCX0pOwoJCQkJCQkJCXJldHVybiBmICYmICh0aGlzLnBhcnNlZFJlc3VsdC5lbmdpbmUgPSBmLmRlc2NyaWJlKHRoaXMuZ2V0VUEoKSkpLCB0aGlzLnBhcnNlZFJlc3VsdC5lbmdpbmU7CgkJCQkJCQl9LCBkLnBhcnNlID0gZnVuY3Rpb24oKSB7CgkJCQkJCQkJcmV0dXJuIHRoaXMucGFyc2VCcm93c2VyKCksIHRoaXMucGFyc2VPUygpLCB0aGlzLnBhcnNlUGxhdGZvcm0oKSwgdGhpcy5wYXJzZUVuZ2luZSgpLCB0aGlzOwoJCQkJCQkJfSwgZC5nZXRSZXN1bHQgPSBmdW5jdGlvbigpIHsKCQkJCQkJCQlyZXR1cm4gdi5kZWZhdWx0LmFzc2lnbih7fSwgdGhpcy5wYXJzZWRSZXN1bHQpOwoJCQkJCQkJfSwgZC5zYXRpc2ZpZXMgPSBmdW5jdGlvbihkKSB7CgkJCQkJCQkJdmFyIGYgPSB0aGlzLCBwID0ge30sIG0gPSAwLCBoID0ge30sIGcgPSAwOwoJCQkJCQkJCWlmIChPYmplY3Qua2V5cyhkKS5mb3JFYWNoKGZ1bmN0aW9uKGYpIHsKCQkJCQkJCQkJdmFyIF8gPSBkW2ZdOwoJCQkJCQkJCQl0eXBlb2YgXyA9PSAic3RyaW5nIiA/IChoW2ZdID0gXywgZyArPSAxKSA6IHR5cGVvZiBfID09ICJvYmplY3QiICYmIChwW2ZdID0gXywgbSArPSAxKTsKCQkJCQkJCQl9KSwgbSA+IDApIHsKCQkJCQkJCQkJdmFyIF8gPSBPYmplY3Qua2V5cyhwKSwgYiA9IHYuZGVmYXVsdC5maW5kKF8sIGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJCXJldHVybiBmLmlzT1MoZCk7CgkJCQkJCQkJCX0pOwoJCQkJCQkJCQlpZiAoYikgewoJCQkJCQkJCQkJdmFyIHggPSB0aGlzLnNhdGlzZmllcyhwW2JdKTsKCQkJCQkJCQkJCWlmICh4ICE9PSB2b2lkIDApIHJldHVybiB4OwoJCQkJCQkJCQl9CgkJCQkJCQkJCXZhciBDID0gdi5kZWZhdWx0LmZpbmQoXywgZnVuY3Rpb24oZCkgewoJCQkJCQkJCQkJcmV0dXJuIGYuaXNQbGF0Zm9ybShkKTsKCQkJCQkJCQkJfSk7CgkJCQkJCQkJCWlmIChDKSB7CgkJCQkJCQkJCQl2YXIgdyA9IHRoaXMuc2F0aXNmaWVzKHBbQ10pOwoJCQkJCQkJCQkJaWYgKHcgIT09IHZvaWQgMCkgcmV0dXJuIHc7CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQkJaWYgKGcgPiAwKSB7CgkJCQkJCQkJCXZhciBUID0gT2JqZWN0LmtleXMoaCksIEUgPSB2LmRlZmF1bHQuZmluZChULCBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCQlyZXR1cm4gZi5pc0Jyb3dzZXIoZCwgITApOwoJCQkJCQkJCQl9KTsKCQkJCQkJCQkJaWYgKEUgIT09IHZvaWQgMCkgcmV0dXJuIHRoaXMuY29tcGFyZVZlcnNpb24oaFtFXSk7CgkJCQkJCQkJfQoJCQkJCQkJfSwgZC5pc0Jyb3dzZXIgPSBmdW5jdGlvbihkLCBmKSB7CgkJCQkJCQkJZiA9PT0gdm9pZCAwICYmIChmID0gITEpOwoJCQkJCQkJCXZhciBwID0gdGhpcy5nZXRCcm93c2VyTmFtZSgpLnRvTG93ZXJDYXNlKCksIG0gPSBkLnRvTG93ZXJDYXNlKCksIGggPSB2LmRlZmF1bHQuZ2V0QnJvd3NlclR5cGVCeUFsaWFzKG0pOwoJCQkJCQkJCXJldHVybiBmICYmIGggJiYgKG0gPSBoLnRvTG93ZXJDYXNlKCkpLCBtID09PSBwOwoJCQkJCQkJfSwgZC5jb21wYXJlVmVyc2lvbiA9IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQl2YXIgZiA9IFswXSwgcCA9IGQsIG0gPSAhMSwgaCA9IHRoaXMuZ2V0QnJvd3NlclZlcnNpb24oKTsKCQkJCQkJCQlpZiAodHlwZW9mIGggPT0gInN0cmluZyIpIHJldHVybiBkWzBdID09PSAiPiIgfHwgZFswXSA9PT0gIjwiID8gKHAgPSBkLnN1YnN0cigxKSwgZFsxXSA9PT0gIj0iID8gKG0gPSAhMCwgcCA9IGQuc3Vic3RyKDIpKSA6IGYgPSBbXSwgZFswXSA9PT0gIj4iID8gZi5wdXNoKDEpIDogZi5wdXNoKC0xKSkgOiBkWzBdID09PSAiPSIgPyBwID0gZC5zdWJzdHIoMSkgOiBkWzBdID09PSAifiIgJiYgKG0gPSAhMCwgcCA9IGQuc3Vic3RyKDEpKSwgZi5pbmRleE9mKHYuZGVmYXVsdC5jb21wYXJlVmVyc2lvbnMoaCwgcCwgbSkpID4gLTE7CgkJCQkJCQl9LCBkLmlzT1MgPSBmdW5jdGlvbihkKSB7CgkJCQkJCQkJcmV0dXJuIHRoaXMuZ2V0T1NOYW1lKCEwKSA9PT0gU3RyaW5nKGQpLnRvTG93ZXJDYXNlKCk7CgkJCQkJCQl9LCBkLmlzUGxhdGZvcm0gPSBmdW5jdGlvbihkKSB7CgkJCQkJCQkJcmV0dXJuIHRoaXMuZ2V0UGxhdGZvcm1UeXBlKCEwKSA9PT0gU3RyaW5nKGQpLnRvTG93ZXJDYXNlKCk7CgkJCQkJCQl9LCBkLmlzRW5naW5lID0gZnVuY3Rpb24oZCkgewoJCQkJCQkJCXJldHVybiB0aGlzLmdldEVuZ2luZU5hbWUoITApID09PSBTdHJpbmcoZCkudG9Mb3dlckNhc2UoKTsKCQkJCQkJCX0sIGQuaXMgPSBmdW5jdGlvbihkLCBmKSB7CgkJCQkJCQkJcmV0dXJuIGYgPT09IHZvaWQgMCAmJiAoZiA9ICExKSwgdGhpcy5pc0Jyb3dzZXIoZCwgZikgfHwgdGhpcy5pc09TKGQpIHx8IHRoaXMuaXNQbGF0Zm9ybShkKTsKCQkJCQkJCX0sIGQuc29tZSA9IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQl2YXIgZiA9IHRoaXM7CgkJCQkJCQkJcmV0dXJuIGQgPT09IHZvaWQgMCAmJiAoZCA9IFtdKSwgZC5zb21lKGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJcmV0dXJuIGYuaXMoZCk7CgkJCQkJCQkJfSk7CgkJCQkJCQl9LCBlOwoJCQkJCQl9KCk7CgkJCQkJCWYuZGVmYXVsdCA9IGIsIGQuZXhwb3J0cyA9IGYuZGVmYXVsdDsKCQkJCQl9LAoJCQkJCTkyOiBmdW5jdGlvbihkLCBmLCBwKSB7CgkJCQkJCSJ1c2Ugc3RyaWN0IjsKCQkJCQkJZi5fX2VzTW9kdWxlID0gITAsIGYuZGVmYXVsdCA9IHZvaWQgMDsKCQkJCQkJdmFyIG0sIGggPSAobSA9IHAoMTcpKSAmJiBtLl9fZXNNb2R1bGUgPyBtIDogeyBkZWZhdWx0OiBtIH0sIGcgPSAvdmVyc2lvblwvKFxkKyhcLj9fP1xkKykrKS9pLCBfID0gWwoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvZ29vZ2xlYm90L2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0geyBuYW1lOiAiR29vZ2xlYm90IiB9LCBwID0gaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goL2dvb2dsZWJvdFwvKFxkKyhcLlxkKykpL2ksIGQpIHx8IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKGcsIGQpOwoJCQkJCQkJCQlyZXR1cm4gcCAmJiAoZi52ZXJzaW9uID0gcCksIGY7CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL29wZXJhL2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0geyBuYW1lOiAiT3BlcmEiIH0sIHAgPSBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaChnLCBkKSB8fCBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaCgvKD86b3BlcmEpW1xzL10oXGQrKFwuP18/XGQrKSspL2ksIGQpOwoJCQkJCQkJCQlyZXR1cm4gcCAmJiAoZi52ZXJzaW9uID0gcCksIGY7CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL29wclwvfG9waW9zL2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0geyBuYW1lOiAiT3BlcmEiIH0sIHAgPSBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaCgvKD86b3ByfG9waW9zKVtccy9dKFxTKykvaSwgZCkgfHwgaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goZywgZCk7CgkJCQkJCQkJCXJldHVybiBwICYmIChmLnZlcnNpb24gPSBwKSwgZjsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvU2Ftc3VuZ0Jyb3dzZXIvaV0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSB7IG5hbWU6ICJTYW1zdW5nIEludGVybmV0IGZvciBBbmRyb2lkIiB9LCBwID0gaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goZywgZCkgfHwgaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goLyg/OlNhbXN1bmdCcm93c2VyKVtccy9dKFxkKyhcLj9fP1xkKykrKS9pLCBkKTsKCQkJCQkJCQkJcmV0dXJuIHAgJiYgKGYudmVyc2lvbiA9IHApLCBmOwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy9XaGFsZS9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IHsgbmFtZTogIk5BVkVSIFdoYWxlIEJyb3dzZXIiIH0sIHAgPSBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaChnLCBkKSB8fCBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaCgvKD86d2hhbGUpW1xzL10oXGQrKD86XC5cZCspKykvaSwgZCk7CgkJCQkJCQkJCXJldHVybiBwICYmIChmLnZlcnNpb24gPSBwKSwgZjsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvTVpCcm93c2VyL2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0geyBuYW1lOiAiTVogQnJvd3NlciIgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC8oPzpNWkJyb3dzZXIpW1xzL10oXGQrKD86XC5cZCspKykvaSwgZCkgfHwgaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goZywgZCk7CgkJCQkJCQkJCXJldHVybiBwICYmIChmLnZlcnNpb24gPSBwKSwgZjsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvZm9jdXMvaV0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSB7IG5hbWU6ICJGb2N1cyIgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC8oPzpmb2N1cylbXHMvXShcZCsoPzpcLlxkKykrKS9pLCBkKSB8fCBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaChnLCBkKTsKCQkJCQkJCQkJcmV0dXJuIHAgJiYgKGYudmVyc2lvbiA9IHApLCBmOwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy9zd2luZy9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IHsgbmFtZTogIlN3aW5nIiB9LCBwID0gaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goLyg/OnN3aW5nKVtccy9dKFxkKyg/OlwuXGQrKSspL2ksIGQpIHx8IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKGcsIGQpOwoJCQkJCQkJCQlyZXR1cm4gcCAmJiAoZi52ZXJzaW9uID0gcCksIGY7CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL2NvYXN0L2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0geyBuYW1lOiAiT3BlcmEgQ29hc3QiIH0sIHAgPSBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaChnLCBkKSB8fCBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaCgvKD86Y29hc3QpW1xzL10oXGQrKFwuP18/XGQrKSspL2ksIGQpOwoJCQkJCQkJCQlyZXR1cm4gcCAmJiAoZi52ZXJzaW9uID0gcCksIGY7CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL29wdFwvXGQrKD86Lj9fP1xkKykrL2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0geyBuYW1lOiAiT3BlcmEgVG91Y2giIH0sIHAgPSBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaCgvKD86b3B0KVtccy9dKFxkKyhcLj9fP1xkKykrKS9pLCBkKSB8fCBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaChnLCBkKTsKCQkJCQkJCQkJcmV0dXJuIHAgJiYgKGYudmVyc2lvbiA9IHApLCBmOwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy95YWJyb3dzZXIvaV0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSB7IG5hbWU6ICJZYW5kZXggQnJvd3NlciIgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC8oPzp5YWJyb3dzZXIpW1xzL10oXGQrKFwuP18/XGQrKSspL2ksIGQpIHx8IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKGcsIGQpOwoJCQkJCQkJCQlyZXR1cm4gcCAmJiAoZi52ZXJzaW9uID0gcCksIGY7CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL3VjYnJvd3Nlci9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IHsgbmFtZTogIlVDIEJyb3dzZXIiIH0sIHAgPSBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaChnLCBkKSB8fCBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaCgvKD86dWNicm93c2VyKVtccy9dKFxkKyhcLj9fP1xkKykrKS9pLCBkKTsKCQkJCQkJCQkJcmV0dXJuIHAgJiYgKGYudmVyc2lvbiA9IHApLCBmOwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy9NYXh0aG9ufG14aW9zL2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0geyBuYW1lOiAiTWF4dGhvbiIgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKGcsIGQpIHx8IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC8oPzpNYXh0aG9ufG14aW9zKVtccy9dKFxkKyhcLj9fP1xkKykrKS9pLCBkKTsKCQkJCQkJCQkJcmV0dXJuIHAgJiYgKGYudmVyc2lvbiA9IHApLCBmOwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy9lcGlwaGFueS9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IHsgbmFtZTogIkVwaXBoYW55IiB9LCBwID0gaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goZywgZCkgfHwgaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goLyg/OmVwaXBoYW55KVtccy9dKFxkKyhcLj9fP1xkKykrKS9pLCBkKTsKCQkJCQkJCQkJcmV0dXJuIHAgJiYgKGYudmVyc2lvbiA9IHApLCBmOwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy9wdWZmaW4vaV0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSB7IG5hbWU6ICJQdWZmaW4iIH0sIHAgPSBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaChnLCBkKSB8fCBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaCgvKD86cHVmZmluKVtccy9dKFxkKyhcLj9fP1xkKykrKS9pLCBkKTsKCQkJCQkJCQkJcmV0dXJuIHAgJiYgKGYudmVyc2lvbiA9IHApLCBmOwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy9zbGVpcG5pci9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IHsgbmFtZTogIlNsZWlwbmlyIiB9LCBwID0gaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goZywgZCkgfHwgaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goLyg/OnNsZWlwbmlyKVtccy9dKFxkKyhcLj9fP1xkKykrKS9pLCBkKTsKCQkJCQkJCQkJcmV0dXJuIHAgJiYgKGYudmVyc2lvbiA9IHApLCBmOwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy9rLW1lbGVvbi9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IHsgbmFtZTogIkstTWVsZW9uIiB9LCBwID0gaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goZywgZCkgfHwgaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goLyg/OmstbWVsZW9uKVtccy9dKFxkKyhcLj9fP1xkKykrKS9pLCBkKTsKCQkJCQkJCQkJcmV0dXJuIHAgJiYgKGYudmVyc2lvbiA9IHApLCBmOwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy9taWNyb21lc3Nlbmdlci9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IHsgbmFtZTogIldlQ2hhdCIgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC8oPzptaWNyb21lc3NlbmdlcilbXHMvXShcZCsoXC4/Xz9cZCspKykvaSwgZCkgfHwgaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goZywgZCk7CgkJCQkJCQkJCXJldHVybiBwICYmIChmLnZlcnNpb24gPSBwKSwgZjsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvcXFicm93c2VyL2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0geyBuYW1lOiAvcXFicm93c2VybGl0ZS9pLnRlc3QoZCkgPyAiUVEgQnJvd3NlciBMaXRlIiA6ICJRUSBCcm93c2VyIiB9LCBwID0gaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goLyg/OnFxYnJvd3NlcmxpdGV8cXFicm93c2VyKVsvXShcZCsoXC4/Xz9cZCspKykvaSwgZCkgfHwgaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goZywgZCk7CgkJCQkJCQkJCXJldHVybiBwICYmIChmLnZlcnNpb24gPSBwKSwgZjsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvbXNpZXx0cmlkZW50L2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0geyBuYW1lOiAiSW50ZXJuZXQgRXhwbG9yZXIiIH0sIHAgPSBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaCgvKD86bXNpZSB8cnY6KShcZCsoXC4/Xz9cZCspKykvaSwgZCk7CgkJCQkJCQkJCXJldHVybiBwICYmIChmLnZlcnNpb24gPSBwKSwgZjsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvXHNlZGdcLy9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IHsgbmFtZTogIk1pY3Jvc29mdCBFZGdlIiB9LCBwID0gaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goL1xzZWRnXC8oXGQrKFwuP18/XGQrKSspL2ksIGQpOwoJCQkJCQkJCQlyZXR1cm4gcCAmJiAoZi52ZXJzaW9uID0gcCksIGY7CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL2VkZyhbZWFdfGlvcykvaV0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSB7IG5hbWU6ICJNaWNyb3NvZnQgRWRnZSIgfSwgcCA9IGguZGVmYXVsdC5nZXRTZWNvbmRNYXRjaCgvZWRnKFtlYV18aW9zKVwvKFxkKyhcLj9fP1xkKykrKS9pLCBkKTsKCQkJCQkJCQkJcmV0dXJuIHAgJiYgKGYudmVyc2lvbiA9IHApLCBmOwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy92aXZhbGRpL2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0geyBuYW1lOiAiVml2YWxkaSIgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC92aXZhbGRpXC8oXGQrKFwuP18/XGQrKSspL2ksIGQpOwoJCQkJCQkJCQlyZXR1cm4gcCAmJiAoZi52ZXJzaW9uID0gcCksIGY7CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL3NlYW1vbmtleS9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IHsgbmFtZTogIlNlYU1vbmtleSIgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC9zZWFtb25rZXlcLyhcZCsoXC4/Xz9cZCspKykvaSwgZCk7CgkJCQkJCQkJCXJldHVybiBwICYmIChmLnZlcnNpb24gPSBwKSwgZjsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvc2FpbGZpc2gvaV0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSB7IG5hbWU6ICJTYWlsZmlzaCIgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC9zYWlsZmlzaFxzP2Jyb3dzZXJcLyhcZCsoXC5cZCspPykvaSwgZCk7CgkJCQkJCQkJCXJldHVybiBwICYmIChmLnZlcnNpb24gPSBwKSwgZjsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvc2lsay9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IHsgbmFtZTogIkFtYXpvbiBTaWxrIiB9LCBwID0gaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goL3NpbGtcLyhcZCsoXC4/Xz9cZCspKykvaSwgZCk7CgkJCQkJCQkJCXJldHVybiBwICYmIChmLnZlcnNpb24gPSBwKSwgZjsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvcGhhbnRvbS9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IHsgbmFtZTogIlBoYW50b21KUyIgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC9waGFudG9tanNcLyhcZCsoXC4/Xz9cZCspKykvaSwgZCk7CgkJCQkJCQkJCXJldHVybiBwICYmIChmLnZlcnNpb24gPSBwKSwgZjsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvc2xpbWVyanMvaV0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSB7IG5hbWU6ICJTbGltZXJKUyIgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC9zbGltZXJqc1wvKFxkKyhcLj9fP1xkKykrKS9pLCBkKTsKCQkJCQkJCQkJcmV0dXJuIHAgJiYgKGYudmVyc2lvbiA9IHApLCBmOwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy9ibGFja2JlcnJ5fFxiYmJcZCsvaSwgL3JpbVxzdGFibGV0L2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0geyBuYW1lOiAiQmxhY2tCZXJyeSIgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKGcsIGQpIHx8IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC9ibGFja2JlcnJ5W1xkXStcLyhcZCsoXC4/Xz9cZCspKykvaSwgZCk7CgkJCQkJCQkJCXJldHVybiBwICYmIChmLnZlcnNpb24gPSBwKSwgZjsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvKHdlYnxocHcpW28wXXMvaV0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSB7IG5hbWU6ICJXZWJPUyBCcm93c2VyIiB9LCBwID0gaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goZywgZCkgfHwgaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goL3coPzplYik/W28wXXNicm93c2VyXC8oXGQrKFwuP18/XGQrKSspL2ksIGQpOwoJCQkJCQkJCQlyZXR1cm4gcCAmJiAoZi52ZXJzaW9uID0gcCksIGY7CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL2JhZGEvaV0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSB7IG5hbWU6ICJCYWRhIiB9LCBwID0gaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goL2RvbGZpblwvKFxkKyhcLj9fP1xkKykrKS9pLCBkKTsKCQkJCQkJCQkJcmV0dXJuIHAgJiYgKGYudmVyc2lvbiA9IHApLCBmOwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy90aXplbi9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IHsgbmFtZTogIlRpemVuIiB9LCBwID0gaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goLyg/OnRpemVuXHM/KT9icm93c2VyXC8oXGQrKFwuP18/XGQrKSspL2ksIGQpIHx8IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKGcsIGQpOwoJCQkJCQkJCQlyZXR1cm4gcCAmJiAoZi52ZXJzaW9uID0gcCksIGY7CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL3F1cHppbGxhL2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0geyBuYW1lOiAiUXVwWmlsbGEiIH0sIHAgPSBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaCgvKD86cXVwemlsbGEpW1xzL10oXGQrKFwuP18/XGQrKSspL2ksIGQpIHx8IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKGcsIGQpOwoJCQkJCQkJCQlyZXR1cm4gcCAmJiAoZi52ZXJzaW9uID0gcCksIGY7CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL2ZpcmVmb3h8aWNld2Vhc2VsfGZ4aW9zL2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0geyBuYW1lOiAiRmlyZWZveCIgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC8oPzpmaXJlZm94fGljZXdlYXNlbHxmeGlvcylbXHMvXShcZCsoXC4/Xz9cZCspKykvaSwgZCk7CgkJCQkJCQkJCXJldHVybiBwICYmIChmLnZlcnNpb24gPSBwKSwgZjsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvZWxlY3Ryb24vaV0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSB7IG5hbWU6ICJFbGVjdHJvbiIgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC8oPzplbGVjdHJvbilcLyhcZCsoXC4/Xz9cZCspKykvaSwgZCk7CgkJCQkJCQkJCXJldHVybiBwICYmIChmLnZlcnNpb24gPSBwKSwgZjsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvTWl1aUJyb3dzZXIvaV0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSB7IG5hbWU6ICJNaXVpIiB9LCBwID0gaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goLyg/Ok1pdWlCcm93c2VyKVtccy9dKFxkKyhcLj9fP1xkKykrKS9pLCBkKTsKCQkJCQkJCQkJcmV0dXJuIHAgJiYgKGYudmVyc2lvbiA9IHApLCBmOwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy9jaHJvbWl1bS9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IHsgbmFtZTogIkNocm9taXVtIiB9LCBwID0gaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goLyg/OmNocm9taXVtKVtccy9dKFxkKyhcLj9fP1xkKykrKS9pLCBkKSB8fCBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaChnLCBkKTsKCQkJCQkJCQkJcmV0dXJuIHAgJiYgKGYudmVyc2lvbiA9IHApLCBmOwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy9jaHJvbWV8Y3Jpb3N8Y3Jtby9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IHsgbmFtZTogIkNocm9tZSIgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC8oPzpjaHJvbWV8Y3Jpb3N8Y3JtbylcLyhcZCsoXC4/Xz9cZCspKykvaSwgZCk7CgkJCQkJCQkJCXJldHVybiBwICYmIChmLnZlcnNpb24gPSBwKSwgZjsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvR1NBL2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0geyBuYW1lOiAiR29vZ2xlIFNlYXJjaCIgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC8oPzpHU0EpXC8oXGQrKFwuP18/XGQrKSspL2ksIGQpOwoJCQkJCQkJCQlyZXR1cm4gcCAmJiAoZi52ZXJzaW9uID0gcCksIGY7CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0gIWQudGVzdCgvbGlrZSBhbmRyb2lkL2kpLCBwID0gZC50ZXN0KC9hbmRyb2lkL2kpOwoJCQkJCQkJCQlyZXR1cm4gZiAmJiBwOwoJCQkJCQkJCX0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSB7IG5hbWU6ICJBbmRyb2lkIEJyb3dzZXIiIH0sIHAgPSBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaChnLCBkKTsKCQkJCQkJCQkJcmV0dXJuIHAgJiYgKGYudmVyc2lvbiA9IHApLCBmOwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy9wbGF5c3RhdGlvbiA0L2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0geyBuYW1lOiAiUGxheVN0YXRpb24gNCIgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKGcsIGQpOwoJCQkJCQkJCQlyZXR1cm4gcCAmJiAoZi52ZXJzaW9uID0gcCksIGY7CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL3NhZmFyaXxhcHBsZXdlYmtpdC9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IHsgbmFtZTogIlNhZmFyaSIgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKGcsIGQpOwoJCQkJCQkJCQlyZXR1cm4gcCAmJiAoZi52ZXJzaW9uID0gcCksIGY7CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbLy4qL2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0gZC5zZWFyY2goIlxcKCIpID09PSAtMSA/IC9eKC4qKVwvKC4qKSAvIDogL14oLiopXC8oLiopWyBcdF1cKCguKikvOwoJCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQkJbmFtZTogaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goZiwgZCksCgkJCQkJCQkJCQl2ZXJzaW9uOiBoLmRlZmF1bHQuZ2V0U2Vjb25kTWF0Y2goZiwgZCkKCQkJCQkJCQkJfTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCV07CgkJCQkJCWYuZGVmYXVsdCA9IF8sIGQuZXhwb3J0cyA9IGYuZGVmYXVsdDsKCQkJCQl9LAoJCQkJCTkzOiBmdW5jdGlvbihkLCBmLCBwKSB7CgkJCQkJCSJ1c2Ugc3RyaWN0IjsKCQkJCQkJZi5fX2VzTW9kdWxlID0gITAsIGYuZGVmYXVsdCA9IHZvaWQgMDsKCQkJCQkJdmFyIG0sIGggPSAobSA9IHAoMTcpKSAmJiBtLl9fZXNNb2R1bGUgPyBtIDogeyBkZWZhdWx0OiBtIH0sIGcgPSBwKDE4KSwgXyA9IFsKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL1Jva3VcL0RWUC9dLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0gaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goL1Jva3VcL0RWUC0oXGQrXC5cZCspL2ksIGQpOwoJCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQkJbmFtZTogZy5PU19NQVAuUm9rdSwKCQkJCQkJCQkJCXZlcnNpb246IGYKCQkJCQkJCQkJfTsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvd2luZG93cyBwaG9uZS9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC93aW5kb3dzIHBob25lICg/Om9zKT9ccz8oXGQrKFwuXGQrKSopL2ksIGQpOwoJCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQkJbmFtZTogZy5PU19NQVAuV2luZG93c1Bob25lLAoJCQkJCQkJCQkJdmVyc2lvbjogZgoJCQkJCQkJCQl9OwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy93aW5kb3dzIC9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC9XaW5kb3dzICgoTlR8WFApKCBcZFxkPy5cZCk/KS9pLCBkKSwgcCA9IGguZGVmYXVsdC5nZXRXaW5kb3dzVmVyc2lvbk5hbWUoZik7CgkJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCQluYW1lOiBnLk9TX01BUC5XaW5kb3dzLAoJCQkJCQkJCQkJdmVyc2lvbjogZiwKCQkJCQkJCQkJCXZlcnNpb25OYW1lOiBwCgkJCQkJCQkJCX07CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL01hY2ludG9zaCguKj8pIEZ4aU9TKC4qPylcLy9dLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0geyBuYW1lOiBnLk9TX01BUC5pT1MgfSwgcCA9IGguZGVmYXVsdC5nZXRTZWNvbmRNYXRjaCgvKFZlcnNpb25cLykoXGRbXGQuXSspLywgZCk7CgkJCQkJCQkJCXJldHVybiBwICYmIChmLnZlcnNpb24gPSBwKSwgZjsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvbWFjaW50b3NoL2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0gaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goL21hYyBvcyB4IChcZCsoXC4/Xz9cZCspKykvaSwgZCkucmVwbGFjZSgvW19cc10vZywgIi4iKSwgcCA9IGguZGVmYXVsdC5nZXRNYWNPU1ZlcnNpb25OYW1lKGYpLCBtID0gewoJCQkJCQkJCQkJbmFtZTogZy5PU19NQVAuTWFjT1MsCgkJCQkJCQkJCQl2ZXJzaW9uOiBmCgkJCQkJCQkJCX07CgkJCQkJCQkJCXJldHVybiBwICYmIChtLnZlcnNpb25OYW1lID0gcCksIG07CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbLyhpcG9kfGlwaG9uZXxpcGFkKS9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC9vcyAoXGQrKFtfXHNdXGQrKSopIGxpa2UgbWFjIG9zIHgvaSwgZCkucmVwbGFjZSgvW19cc10vZywgIi4iKTsKCQkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJCW5hbWU6IGcuT1NfTUFQLmlPUywKCQkJCQkJCQkJCXZlcnNpb246IGYKCQkJCQkJCQkJfTsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSAhZC50ZXN0KC9saWtlIGFuZHJvaWQvaSksIHAgPSBkLnRlc3QoL2FuZHJvaWQvaSk7CgkJCQkJCQkJCXJldHVybiBmICYmIHA7CgkJCQkJCQkJfSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC9hbmRyb2lkW1xzLy1dKFxkKyhcLlxkKykqKS9pLCBkKSwgcCA9IGguZGVmYXVsdC5nZXRBbmRyb2lkVmVyc2lvbk5hbWUoZiksIG0gPSB7CgkJCQkJCQkJCQluYW1lOiBnLk9TX01BUC5BbmRyb2lkLAoJCQkJCQkJCQkJdmVyc2lvbjogZgoJCQkJCQkJCQl9OwoJCQkJCQkJCQlyZXR1cm4gcCAmJiAobS52ZXJzaW9uTmFtZSA9IHApLCBtOwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy8od2VifGhwdylbbzBdcy9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC8oPzp3ZWJ8aHB3KVtvMF1zXC8oXGQrKFwuXGQrKSopL2ksIGQpLCBwID0geyBuYW1lOiBnLk9TX01BUC5XZWJPUyB9OwoJCQkJCQkJCQlyZXR1cm4gZiAmJiBmLmxlbmd0aCAmJiAocC52ZXJzaW9uID0gZiksIHA7CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL2JsYWNrYmVycnl8XGJiYlxkKy9pLCAvcmltXHN0YWJsZXQvaV0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaCgvcmltXHN0YWJsZXRcc29zXHMoXGQrKFwuXGQrKSopL2ksIGQpIHx8IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC9ibGFja2JlcnJ5XGQrXC8oXGQrKFtfXHNdXGQrKSopL2ksIGQpIHx8IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC9cYmJiKFxkKykvaSwgZCk7CgkJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCQluYW1lOiBnLk9TX01BUC5CbGFja0JlcnJ5LAoJCQkJCQkJCQkJdmVyc2lvbjogZgoJCQkJCQkJCQl9OwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy9iYWRhL2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0gaC5kZWZhdWx0LmdldEZpcnN0TWF0Y2goL2JhZGFcLyhcZCsoXC5cZCspKikvaSwgZCk7CgkJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCQluYW1lOiBnLk9TX01BUC5CYWRhLAoJCQkJCQkJCQkJdmVyc2lvbjogZgoJCQkJCQkJCQl9OwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy90aXplbi9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC90aXplblsvXHNdKFxkKyhcLlxkKykqKS9pLCBkKTsKCQkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJCW5hbWU6IGcuT1NfTUFQLlRpemVuLAoJCQkJCQkJCQkJdmVyc2lvbjogZgoJCQkJCQkJCQl9OwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy9saW51eC9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oKSB7CgkJCQkJCQkJCXJldHVybiB7IG5hbWU6IGcuT1NfTUFQLkxpbnV4IH07CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL0NyT1MvXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oKSB7CgkJCQkJCQkJCXJldHVybiB7IG5hbWU6IGcuT1NfTUFQLkNocm9tZU9TIH07CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL1BsYXlTdGF0aW9uIDQvXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC9QbGF5U3RhdGlvbiA0Wy9cc10oXGQrKFwuXGQrKSopL2ksIGQpOwoJCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQkJbmFtZTogZy5PU19NQVAuUGxheVN0YXRpb240LAoJCQkJCQkJCQkJdmVyc2lvbjogZgoJCQkJCQkJCQl9OwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJXTsKCQkJCQkJZi5kZWZhdWx0ID0gXywgZC5leHBvcnRzID0gZi5kZWZhdWx0OwoJCQkJCX0sCgkJCQkJOTQ6IGZ1bmN0aW9uKGQsIGYsIHApIHsKCQkJCQkJInVzZSBzdHJpY3QiOwoJCQkJCQlmLl9fZXNNb2R1bGUgPSAhMCwgZi5kZWZhdWx0ID0gdm9pZCAwOwoJCQkJCQl2YXIgbSwgaCA9IChtID0gcCgxNykpICYmIG0uX19lc01vZHVsZSA/IG0gOiB7IGRlZmF1bHQ6IG0gfSwgZyA9IHAoMTgpLCBfID0gWwoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvZ29vZ2xlYm90L2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbigpIHsKCQkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJCXR5cGU6ICJib3QiLAoJCQkJCQkJCQkJdmVuZG9yOiAiR29vZ2xlIgoJCQkJCQkJCQl9OwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy9odWF3ZWkvaV0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaCgvKGNhbi1sMDEpL2ksIGQpICYmICJOb3ZhIiwgcCA9IHsKCQkJCQkJCQkJCXR5cGU6IGcuUExBVEZPUk1TX01BUC5tb2JpbGUsCgkJCQkJCQkJCQl2ZW5kb3I6ICJIdWF3ZWkiCgkJCQkJCQkJCX07CgkJCQkJCQkJCXJldHVybiBmICYmIChwLm1vZGVsID0gZiksIHA7CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL25leHVzXHMqKD86N3w4fDl8MTApLiovaV0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKCkgewoJCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQkJdHlwZTogZy5QTEFURk9STVNfTUFQLnRhYmxldCwKCQkJCQkJCQkJCXZlbmRvcjogIk5leHVzIgoJCQkJCQkJCQl9OwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy9pcGFkL2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbigpIHsKCQkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJCXR5cGU6IGcuUExBVEZPUk1TX01BUC50YWJsZXQsCgkJCQkJCQkJCQl2ZW5kb3I6ICJBcHBsZSIsCgkJCQkJCQkJCQltb2RlbDogImlQYWQiCgkJCQkJCQkJCX07CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL01hY2ludG9zaCguKj8pIEZ4aU9TKC4qPylcLy9dLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbigpIHsKCQkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJCXR5cGU6IGcuUExBVEZPUk1TX01BUC50YWJsZXQsCgkJCQkJCQkJCQl2ZW5kb3I6ICJBcHBsZSIsCgkJCQkJCQkJCQltb2RlbDogImlQYWQiCgkJCQkJCQkJCX07CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL2tmdHQgYnVpbGQvaV0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKCkgewoJCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQkJdHlwZTogZy5QTEFURk9STVNfTUFQLnRhYmxldCwKCQkJCQkJCQkJCXZlbmRvcjogIkFtYXpvbiIsCgkJCQkJCQkJCQltb2RlbDogIktpbmRsZSBGaXJlIEhEIDciCgkJCQkJCQkJCX07CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL3NpbGsvaV0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKCkgewoJCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQkJdHlwZTogZy5QTEFURk9STVNfTUFQLnRhYmxldCwKCQkJCQkJCQkJCXZlbmRvcjogIkFtYXpvbiIKCQkJCQkJCQkJfTsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvdGFibGV0KD8hIHBjKS9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oKSB7CgkJCQkJCQkJCXJldHVybiB7IHR5cGU6IGcuUExBVEZPUk1TX01BUC50YWJsZXQgfTsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSBkLnRlc3QoL2lwb2R8aXBob25lL2kpLCBwID0gZC50ZXN0KC9saWtlIChpcG9kfGlwaG9uZSkvaSk7CgkJCQkJCQkJCXJldHVybiBmICYmICFwOwoJCQkJCQkJCX0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaCgvKGlwb2R8aXBob25lKS9pLCBkKTsKCQkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJCXR5cGU6IGcuUExBVEZPUk1TX01BUC5tb2JpbGUsCgkJCQkJCQkJCQl2ZW5kb3I6ICJBcHBsZSIsCgkJCQkJCQkJCQltb2RlbDogZgoJCQkJCQkJCQl9OwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogWy9uZXh1c1xzKlswLTZdLiovaSwgL2dhbGF4eSBuZXh1cy9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oKSB7CgkJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCQl0eXBlOiBnLlBMQVRGT1JNU19NQVAubW9iaWxlLAoJCQkJCQkJCQkJdmVuZG9yOiAiTmV4dXMiCgkJCQkJCQkJCX07CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBbL1teLV1tb2JpL2ldLAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbigpIHsKCQkJCQkJCQkJcmV0dXJuIHsgdHlwZTogZy5QTEFURk9STVNfTUFQLm1vYmlsZSB9OwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQlyZXR1cm4gZC5nZXRCcm93c2VyTmFtZSghMCkgPT09ICJibGFja2JlcnJ5IjsKCQkJCQkJCQl9LAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbigpIHsKCQkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJCXR5cGU6IGcuUExBVEZPUk1TX01BUC5tb2JpbGUsCgkJCQkJCQkJCQl2ZW5kb3I6ICJCbGFja0JlcnJ5IgoJCQkJCQkJCQl9OwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQlyZXR1cm4gZC5nZXRCcm93c2VyTmFtZSghMCkgPT09ICJiYWRhIjsKCQkJCQkJCQl9LAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbigpIHsKCQkJCQkJCQkJcmV0dXJuIHsgdHlwZTogZy5QTEFURk9STVNfTUFQLm1vYmlsZSB9OwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQlyZXR1cm4gZC5nZXRCcm93c2VyTmFtZSgpID09PSAid2luZG93cyBwaG9uZSI7CgkJCQkJCQkJfSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oKSB7CgkJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCQl0eXBlOiBnLlBMQVRGT1JNU19NQVAubW9iaWxlLAoJCQkJCQkJCQkJdmVuZG9yOiAiTWljcm9zb2Z0IgoJCQkJCQkJCQl9OwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IE51bWJlcihTdHJpbmcoZC5nZXRPU1ZlcnNpb24oKSkuc3BsaXQoIi4iKVswXSk7CgkJCQkJCQkJCXJldHVybiBkLmdldE9TTmFtZSghMCkgPT09ICJhbmRyb2lkIiAmJiBmID49IDM7CgkJCQkJCQkJfSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oKSB7CgkJCQkJCQkJCXJldHVybiB7IHR5cGU6IGcuUExBVEZPUk1TX01BUC50YWJsZXQgfTsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJcmV0dXJuIGQuZ2V0T1NOYW1lKCEwKSA9PT0gImFuZHJvaWQiOwoJCQkJCQkJCX0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKCkgewoJCQkJCQkJCQlyZXR1cm4geyB0eXBlOiBnLlBMQVRGT1JNU19NQVAubW9iaWxlIH07CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXJldHVybiBkLmdldE9TTmFtZSghMCkgPT09ICJtYWNvcyI7CgkJCQkJCQkJfSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oKSB7CgkJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCQl0eXBlOiBnLlBMQVRGT1JNU19NQVAuZGVza3RvcCwKCQkJCQkJCQkJCXZlbmRvcjogIkFwcGxlIgoJCQkJCQkJCQl9OwoJCQkJCQkJCX0KCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQlyZXR1cm4gZC5nZXRPU05hbWUoITApID09PSAid2luZG93cyI7CgkJCQkJCQkJfSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oKSB7CgkJCQkJCQkJCXJldHVybiB7IHR5cGU6IGcuUExBVEZPUk1TX01BUC5kZXNrdG9wIH07CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXJldHVybiBkLmdldE9TTmFtZSghMCkgPT09ICJsaW51eCI7CgkJCQkJCQkJfSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oKSB7CgkJCQkJCQkJCXJldHVybiB7IHR5cGU6IGcuUExBVEZPUk1TX01BUC5kZXNrdG9wIH07CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXJldHVybiBkLmdldE9TTmFtZSghMCkgPT09ICJwbGF5c3RhdGlvbiA0IjsKCQkJCQkJCQl9LAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbigpIHsKCQkJCQkJCQkJcmV0dXJuIHsgdHlwZTogZy5QTEFURk9STVNfTUFQLnR2IH07CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXJldHVybiBkLmdldE9TTmFtZSghMCkgPT09ICJyb2t1IjsKCQkJCQkJCQl9LAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbigpIHsKCQkJCQkJCQkJcmV0dXJuIHsgdHlwZTogZy5QTEFURk9STVNfTUFQLnR2IH07CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQldOwoJCQkJCQlmLmRlZmF1bHQgPSBfLCBkLmV4cG9ydHMgPSBmLmRlZmF1bHQ7CgkJCQkJfSwKCQkJCQk5NTogZnVuY3Rpb24oZCwgZiwgcCkgewoJCQkJCQkidXNlIHN0cmljdCI7CgkJCQkJCWYuX19lc01vZHVsZSA9ICEwLCBmLmRlZmF1bHQgPSB2b2lkIDA7CgkJCQkJCXZhciBtLCBoID0gKG0gPSBwKDE3KSkgJiYgbS5fX2VzTW9kdWxlID8gbSA6IHsgZGVmYXVsdDogbSB9LCBnID0gcCgxOCksIF8gPSBbCgkJCQkJCQl7CgkJCQkJCQkJdGVzdDogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQlyZXR1cm4gZC5nZXRCcm93c2VyTmFtZSghMCkgPT09ICJtaWNyb3NvZnQgZWRnZSI7CgkJCQkJCQkJfSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQlpZiAoL1xzZWRnXC8vaS50ZXN0KGQpKSByZXR1cm4geyBuYW1lOiBnLkVOR0lORV9NQVAuQmxpbmsgfTsKCQkJCQkJCQkJdmFyIGYgPSBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaCgvZWRnZVwvKFxkKyhcLj9fP1xkKykrKS9pLCBkKTsKCQkJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkJCW5hbWU6IGcuRU5HSU5FX01BUC5FZGdlSFRNTCwKCQkJCQkJCQkJCXZlcnNpb246IGYKCQkJCQkJCQkJfTsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvdHJpZGVudC9pXSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IHsgbmFtZTogZy5FTkdJTkVfTUFQLlRyaWRlbnQgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC90cmlkZW50XC8oXGQrKFwuP18/XGQrKSspL2ksIGQpOwoJCQkJCQkJCQlyZXR1cm4gcCAmJiAoZi52ZXJzaW9uID0gcCksIGY7CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXJldHVybiBkLnRlc3QoL3ByZXN0by9pKTsKCQkJCQkJCQl9LAoJCQkJCQkJCWRlc2NyaWJlOiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0geyBuYW1lOiBnLkVOR0lORV9NQVAuUHJlc3RvIH0sIHAgPSBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaCgvcHJlc3RvXC8oXGQrKFwuP18/XGQrKSspL2ksIGQpOwoJCQkJCQkJCQlyZXR1cm4gcCAmJiAoZi52ZXJzaW9uID0gcCksIGY7CgkJCQkJCQkJfQoJCQkJCQkJfSwKCQkJCQkJCXsKCQkJCQkJCQl0ZXN0OiBmdW5jdGlvbihkKSB7CgkJCQkJCQkJCXZhciBmID0gZC50ZXN0KC9nZWNrby9pKSwgcCA9IGQudGVzdCgvbGlrZSBnZWNrby9pKTsKCQkJCQkJCQkJcmV0dXJuIGYgJiYgIXA7CgkJCQkJCQkJfSwKCQkJCQkJCQlkZXNjcmliZTogZnVuY3Rpb24oZCkgewoJCQkJCQkJCQl2YXIgZiA9IHsgbmFtZTogZy5FTkdJTkVfTUFQLkdlY2tvIH0sIHAgPSBoLmRlZmF1bHQuZ2V0Rmlyc3RNYXRjaCgvZ2Vja29cLyhcZCsoXC4/Xz9cZCspKykvaSwgZCk7CgkJCQkJCQkJCXJldHVybiBwICYmIChmLnZlcnNpb24gPSBwKSwgZjsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvKGFwcGxlKT93ZWJraXRcLzUzN1wuMzYvaV0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKCkgewoJCQkJCQkJCQlyZXR1cm4geyBuYW1lOiBnLkVOR0lORV9NQVAuQmxpbmsgfTsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJewoJCQkJCQkJCXRlc3Q6IFsvKGFwcGxlKT93ZWJraXQvaV0sCgkJCQkJCQkJZGVzY3JpYmU6IGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQkJdmFyIGYgPSB7IG5hbWU6IGcuRU5HSU5FX01BUC5XZWJLaXQgfSwgcCA9IGguZGVmYXVsdC5nZXRGaXJzdE1hdGNoKC93ZWJraXRcLyhcZCsoXC4/Xz9cZCspKykvaSwgZCk7CgkJCQkJCQkJCXJldHVybiBwICYmIChmLnZlcnNpb24gPSBwKSwgZjsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCV07CgkJCQkJCWYuZGVmYXVsdCA9IF8sIGQuZXhwb3J0cyA9IGYuZGVmYXVsdDsKCQkJCQl9CgkJCQl9KTsKCQkJfSk7CgkJfSwKCQkiLi9ub2RlX21vZHVsZXMvYnJvd3Nlci1pZDMtd3JpdGVyL2Rpc3QvYnJvd3Nlci1pZDMtd3JpdGVyLm1qcyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5kKGYsIHsgUTogKCkgPT4gbyB9KTsKCQkJZnVuY3Rpb24gZShkKSB7CgkJCQlyZXR1cm4gU3RyaW5nKGQpLnNwbGl0KCIiKS5tYXAoKGQpID0+IGQuY2hhckNvZGVBdCgwKSk7CgkJCX0KCQkJZnVuY3Rpb24gdChkKSB7CgkJCQlyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoZShkKSk7CgkJCX0KCQkJZnVuY3Rpb24gYShkKSB7CgkJCQlsZXQgZiA9IG5ldyBBcnJheUJ1ZmZlcigyICogZC5sZW5ndGgpLCBwID0gbmV3IFVpbnQ4QXJyYXkoZik7CgkJCQlyZXR1cm4gbmV3IFVpbnQxNkFycmF5KGYpLnNldChlKGQpKSwgcDsKCQkJfQoJCQlmdW5jdGlvbiByKGQpIHsKCQkJCWxldCBmID0gMjU1OwoJCQkJcmV0dXJuIFsKCQkJCQlkID4+PiAyNCAmIGYsCgkJCQkJZCA+Pj4gMTYgJiBmLAoJCQkJCWQgPj4+IDggJiBmLAoJCQkJCWQgJiBmCgkJCQldOwoJCQl9CgkJCWZ1bmN0aW9uIG4oZCkgewoJCQkJcmV0dXJuIDExICsgZDsKCQkJfQoJCQlmdW5jdGlvbiBzKGQsIGYsIHAsIG0pIHsKCQkJCXJldHVybiAxMSArIGYgKyAxICsgMSArIChtID8gMiArIDIgKiAocCArIDEpIDogcCArIDEpICsgZDsKCQkJfQoJCQlmdW5jdGlvbiBpKGQpIHsKCQkJCWxldCBmID0gMDsKCQkJCXJldHVybiBkLmZvckVhY2goKGQpID0+IHsKCQkJCQlmICs9IDIgKyAyICogZFswXS5sZW5ndGggKyAyICsgMiArIDIgKiBkWzFdLmxlbmd0aCArIDI7CgkJCQl9KSwgMTEgKyBmOwoJCQl9CgkJCWZ1bmN0aW9uIGMoZCwgZikgewoJCQkJbGV0IHAgPSAyICogZiwgbSA9IDA7CgkJCQlyZXR1cm4gZC5mb3JFYWNoKChkKSA9PiB7CgkJCQkJbSArPSAyICsgMiAqIGRbMF0ubGVuZ3RoICsgMiArIDQ7CgkJCQl9KSwgMTggKyBwICsgMiArIG07CgkJCX0KCQkJY2xhc3MgbyB7CgkJCQlfc2V0SW50ZWdlckZyYW1lKGQsIGYpIHsKCQkJCQlsZXQgcCA9IHBhcnNlSW50KGYsIDEwKTsKCQkJCQl0aGlzLmZyYW1lcy5wdXNoKHsKCQkJCQkJbmFtZTogZCwKCQkJCQkJdmFsdWU6IHAsCgkJCQkJCXNpemU6IG4ocC50b1N0cmluZygpLmxlbmd0aCkKCQkJCQl9KTsKCQkJCX0KCQkJCV9zZXRTdHJpbmdGcmFtZShkLCBmKSB7CgkJCQkJbGV0IHAgPSBmLnRvU3RyaW5nKCksIG0gPSAxMyArIDIgKiBwLmxlbmd0aDsKCQkJCQlkID09PSAiVERBVCIgJiYgKG0gPSBuKHAubGVuZ3RoKSksIHRoaXMuZnJhbWVzLnB1c2goewoJCQkJCQluYW1lOiBkLAoJCQkJCQl2YWx1ZTogcCwKCQkJCQkJc2l6ZTogbQoJCQkJCX0pOwoJCQkJfQoJCQkJX3NldFBpY3R1cmVGcmFtZShkLCBmLCBwLCBtKSB7CgkJCQkJbGV0IGggPSBmdW5jdGlvbihkKSB7CgkJCQkJCWlmICghZCB8fCAhZC5sZW5ndGgpIHJldHVybiBudWxsOwoJCQkJCQlpZiAoZFswXSA9PT0gMjU1ICYmIGRbMV0gPT09IDIxNiAmJiBkWzJdID09PSAyNTUpIHJldHVybiAiaW1hZ2UvanBlZyI7CgkJCQkJCWlmIChkWzBdID09PSAxMzcgJiYgZFsxXSA9PT0gODAgJiYgZFsyXSA9PT0gNzggJiYgZFszXSA9PT0gNzEpIHJldHVybiAiaW1hZ2UvcG5nIjsKCQkJCQkJaWYgKGRbMF0gPT09IDcxICYmIGRbMV0gPT09IDczICYmIGRbMl0gPT09IDcwKSByZXR1cm4gImltYWdlL2dpZiI7CgkJCQkJCWlmIChkWzhdID09PSA4NyAmJiBkWzldID09PSA2OSAmJiBkWzEwXSA9PT0gNjYgJiYgZFsxMV0gPT09IDgwKSByZXR1cm4gImltYWdlL3dlYnAiOwoJCQkJCQlsZXQgZiA9IGRbMF0gPT09IDczICYmIGRbMV0gPT09IDczICYmIGRbMl0gPT09IDQyICYmIGRbM10gPT09IDAsIHAgPSBkWzBdID09PSA3NyAmJiBkWzFdID09PSA3NyAmJiBkWzJdID09PSAwICYmIGRbM10gPT09IDQyOwoJCQkJCQlyZXR1cm4gZiB8fCBwID8gImltYWdlL3RpZmYiIDogZFswXSA9PT0gNjYgJiYgZFsxXSA9PT0gNzcgPyAiaW1hZ2UvYm1wIiA6IGRbMF0gPT09IDAgJiYgZFsxXSA9PT0gMCAmJiBkWzJdID09PSAxICYmIGRbM10gPT09IDAgPyAiaW1hZ2UveC1pY29uIiA6IG51bGw7CgkJCQkJfShuZXcgVWludDhBcnJheShmKSksIGcgPSBwLnRvU3RyaW5nKCk7CgkJCQkJaWYgKCFoKSB0aHJvdyBFcnJvcigiVW5rbm93biBwaWN0dXJlIE1JTUUgdHlwZSIpOwoJCQkJCXAgfHwgKG0gPSAhMSksIHRoaXMuZnJhbWVzLnB1c2goewoJCQkJCQluYW1lOiAiQVBJQyIsCgkJCQkJCXZhbHVlOiBmLAoJCQkJCQlwaWN0dXJlVHlwZTogZCwKCQkJCQkJbWltZVR5cGU6IGgsCgkJCQkJCXVzZVVuaWNvZGVFbmNvZGluZzogbSwKCQkJCQkJZGVzY3JpcHRpb246IGcsCgkJCQkJCXNpemU6IHMoZi5ieXRlTGVuZ3RoLCBoLmxlbmd0aCwgZy5sZW5ndGgsIG0pCgkJCQkJfSk7CgkJCQl9CgkJCQlfc2V0THlyaWNzRnJhbWUoZCwgZiwgcCkgewoJCQkJCWxldCBtID0gZC5zcGxpdCgiIikubWFwKChkKSA9PiBkLmNoYXJDb2RlQXQoMCkpLCBoID0gZi50b1N0cmluZygpLCBnID0gcC50b1N0cmluZygpOwoJCQkJCXZhciBfLCB2OwoJCQkJCXRoaXMuZnJhbWVzLnB1c2goewoJCQkJCQluYW1lOiAiVVNMVCIsCgkJCQkJCXZhbHVlOiBnLAoJCQkJCQlsYW5ndWFnZTogbSwKCQkJCQkJZGVzY3JpcHRpb246IGgsCgkJCQkJCXNpemU6IChfID0gaC5sZW5ndGgsIHYgPSBnLmxlbmd0aCwgMTYgKyAyICogXyArIDIgKyAyICsgMiAqIHYpCgkJCQkJfSk7CgkJCQl9CgkJCQlfc2V0Q29tbWVudEZyYW1lKGQsIGYsIHApIHsKCQkJCQlsZXQgbSA9IGQuc3BsaXQoIiIpLm1hcCgoZCkgPT4gZC5jaGFyQ29kZUF0KDApKSwgaCA9IGYudG9TdHJpbmcoKSwgZyA9IHAudG9TdHJpbmcoKTsKCQkJCQl2YXIgXywgdjsKCQkJCQl0aGlzLmZyYW1lcy5wdXNoKHsKCQkJCQkJbmFtZTogIkNPTU0iLAoJCQkJCQl2YWx1ZTogZywKCQkJCQkJbGFuZ3VhZ2U6IG0sCgkJCQkJCWRlc2NyaXB0aW9uOiBoLAoJCQkJCQlzaXplOiAoXyA9IGgubGVuZ3RoLCB2ID0gZy5sZW5ndGgsIDE2ICsgMiAqIF8gKyAyICsgMiArIDIgKiB2KQoJCQkJCX0pOwoJCQkJfQoJCQkJX3NldFByaXZhdGVGcmFtZShkLCBmKSB7CgkJCQkJbGV0IHAgPSBkLnRvU3RyaW5nKCk7CgkJCQkJdmFyIG0sIGg7CgkJCQkJdGhpcy5mcmFtZXMucHVzaCh7CgkJCQkJCW5hbWU6ICJQUklWIiwKCQkJCQkJdmFsdWU6IGYsCgkJCQkJCWlkOiBwLAoJCQkJCQlzaXplOiAobSA9IHAubGVuZ3RoLCBoID0gZi5ieXRlTGVuZ3RoLCAxMCArIG0gKyAxICsgaCkKCQkJCQl9KTsKCQkJCX0KCQkJCV9zZXRVc2VyU3RyaW5nRnJhbWUoZCwgZikgewoJCQkJCWxldCBwID0gZC50b1N0cmluZygpLCBtID0gZi50b1N0cmluZygpOwoJCQkJCXZhciBoLCBnOwoJCQkJCXRoaXMuZnJhbWVzLnB1c2goewoJCQkJCQluYW1lOiAiVFhYWCIsCgkJCQkJCWRlc2NyaXB0aW9uOiBwLAoJCQkJCQl2YWx1ZTogbSwKCQkJCQkJc2l6ZTogKGggPSBwLmxlbmd0aCwgZyA9IG0ubGVuZ3RoLCAxMyArIDIgKiBoICsgMiArIDIgKyAyICogZykKCQkJCQl9KTsKCQkJCX0KCQkJCV9zZXRVcmxMaW5rRnJhbWUoZCwgZikgewoJCQkJCWxldCBwID0gZi50b1N0cmluZygpOwoJCQkJCXZhciBtOwoJCQkJCXRoaXMuZnJhbWVzLnB1c2goewoJCQkJCQluYW1lOiBkLAoJCQkJCQl2YWx1ZTogcCwKCQkJCQkJc2l6ZTogKG0gPSBwLmxlbmd0aCwgMTAgKyBtKQoJCQkJCX0pOwoJCQkJfQoJCQkJX3NldFBhaXJlZFRleHRGcmFtZShkLCBmKSB7CgkJCQkJdGhpcy5mcmFtZXMucHVzaCh7CgkJCQkJCW5hbWU6IGQsCgkJCQkJCXZhbHVlOiBmLAoJCQkJCQlzaXplOiBpKGYpCgkJCQkJfSk7CgkJCQl9CgkJCQlfc2V0U3luY2hyb25pc2VkTHlyaWNzRnJhbWUoZCwgZiwgcCwgbSwgaCkgewoJCQkJCWxldCBnID0gaC50b1N0cmluZygpLCBfID0gbS5zcGxpdCgiIikubWFwKChkKSA9PiBkLmNoYXJDb2RlQXQoMCkpOwoJCQkJCXRoaXMuZnJhbWVzLnB1c2goewoJCQkJCQluYW1lOiAiU1lMVCIsCgkJCQkJCXZhbHVlOiBmLAoJCQkJCQlsYW5ndWFnZTogXywKCQkJCQkJZGVzY3JpcHRpb246IGcsCgkJCQkJCXR5cGU6IGQsCgkJCQkJCXRpbWVzdGFtcEZvcm1hdDogcCwKCQkJCQkJc2l6ZTogYyhmLCBnLmxlbmd0aCkKCQkJCQl9KTsKCQkJCX0KCQkJCWNvbnN0cnVjdG9yKGQpIHsKCQkJCQlpZiAoIWQgfHwgdHlwZW9mIGQgIT0gIm9iamVjdCIgfHwgISgiYnl0ZUxlbmd0aCIgaW4gZCkpIHRocm93IEVycm9yKCJGaXJzdCBhcmd1bWVudCBzaG91bGQgYmUgYW4gaW5zdGFuY2Ugb2YgQXJyYXlCdWZmZXIgb3IgQnVmZmVyIik7CgkJCQkJdGhpcy5hcnJheUJ1ZmZlciA9IGQsIHRoaXMucGFkZGluZyA9IDQwOTYsIHRoaXMuZnJhbWVzID0gW10sIHRoaXMudXJsID0gIiI7CgkJCQl9CgkJCQlzZXRGcmFtZShkLCBmKSB7CgkJCQkJc3dpdGNoIChkKSB7CgkJCQkJCWNhc2UgIlRQRTEiOgoJCQkJCQljYXNlICJUQ09NIjoKCQkJCQkJY2FzZSAiVENPTiI6IHsKCQkJCQkJCWlmICghQXJyYXkuaXNBcnJheShmKSkgdGhyb3cgRXJyb3IoYCR7ZH0gZnJhbWUgdmFsdWUgc2hvdWxkIGJlIGFuIGFycmF5IG9mIHN0cmluZ3NgKTsKCQkJCQkJCWxldCBwID0gZCA9PT0gIlRDT04iID8gIjsiIDogIi8iLCBtID0gZi5qb2luKHApOwoJCQkJCQkJdGhpcy5fc2V0U3RyaW5nRnJhbWUoZCwgbSk7CgkJCQkJCQlicmVhazsKCQkJCQkJfQoJCQkJCQljYXNlICJUTEFOIjoKCQkJCQkJY2FzZSAiVElUMSI6CgkJCQkJCWNhc2UgIlRJVDIiOgoJCQkJCQljYXNlICJUSVQzIjoKCQkJCQkJY2FzZSAiVEFMQiI6CgkJCQkJCWNhc2UgIlRQRTIiOgoJCQkJCQljYXNlICJUUEUzIjoKCQkJCQkJY2FzZSAiVFBFNCI6CgkJCQkJCWNhc2UgIlRSQ0siOgoJCQkJCQljYXNlICJUUE9TIjoKCQkJCQkJY2FzZSAiVE1FRCI6CgkJCQkJCWNhc2UgIlRQVUIiOgoJCQkJCQljYXNlICJUQ09QIjoKCQkJCQkJY2FzZSAiVEtFWSI6CgkJCQkJCWNhc2UgIlRFWFQiOgoJCQkJCQljYXNlICJUREFUIjoKCQkJCQkJY2FzZSAiVENNUCI6CgkJCQkJCWNhc2UgIlRTUkMiOgoJCQkJCQkJdGhpcy5fc2V0U3RyaW5nRnJhbWUoZCwgZik7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAiVEJQTSI6CgkJCQkJCWNhc2UgIlRMRU4iOgoJCQkJCQljYXNlICJUWUVSIjoKCQkJCQkJCXRoaXMuX3NldEludGVnZXJGcmFtZShkLCBmKTsKCQkJCQkJCWJyZWFrOwoJCQkJCQljYXNlICJVU0xUIjoKCQkJCQkJCWlmIChmLmxhbmd1YWdlID0gZi5sYW5ndWFnZSB8fCAiZW5nIiwgdHlwZW9mIGYgIT0gIm9iamVjdCIgfHwgISgiZGVzY3JpcHRpb24iIGluIGYpIHx8ICEoImx5cmljcyIgaW4gZikpIHRocm93IEVycm9yKCJVU0xUIGZyYW1lIHZhbHVlIHNob3VsZCBiZSBhbiBvYmplY3Qgd2l0aCBrZXlzIGRlc2NyaXB0aW9uIGFuZCBseXJpY3MiKTsKCQkJCQkJCWlmIChmLmxhbmd1YWdlICYmICFmLmxhbmd1YWdlLm1hdGNoKC9bYS16XXszfS9pKSkgdGhyb3cgRXJyb3IoIkxhbmd1YWdlIG11c3QgYmUgY29kZWQgZm9sbG93aW5nIHRoZSBJU08gNjM5LTIgc3RhbmRhcmRzIik7CgkJCQkJCQl0aGlzLl9zZXRMeXJpY3NGcmFtZShmLmxhbmd1YWdlLCBmLmRlc2NyaXB0aW9uLCBmLmx5cmljcyk7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAiQVBJQyI6CgkJCQkJCQlpZiAodHlwZW9mIGYgIT0gIm9iamVjdCIgfHwgISgidHlwZSIgaW4gZikgfHwgISgiZGF0YSIgaW4gZikgfHwgISgiZGVzY3JpcHRpb24iIGluIGYpKSB0aHJvdyBFcnJvcigiQVBJQyBmcmFtZSB2YWx1ZSBzaG91bGQgYmUgYW4gb2JqZWN0IHdpdGgga2V5cyB0eXBlLCBkYXRhIGFuZCBkZXNjcmlwdGlvbiIpOwoJCQkJCQkJaWYgKGYudHlwZSA8IDAgfHwgZi50eXBlID4gMjApIHRocm93IEVycm9yKCJJbmNvcnJlY3QgQVBJQyBmcmFtZSBwaWN0dXJlIHR5cGUiKTsKCQkJCQkJCXRoaXMuX3NldFBpY3R1cmVGcmFtZShmLnR5cGUsIGYuZGF0YSwgZi5kZXNjcmlwdGlvbiwgISFmLnVzZVVuaWNvZGVFbmNvZGluZyk7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAiVFhYWCI6CgkJCQkJCQlpZiAodHlwZW9mIGYgIT0gIm9iamVjdCIgfHwgISgiZGVzY3JpcHRpb24iIGluIGYpIHx8ICEoInZhbHVlIiBpbiBmKSkgdGhyb3cgRXJyb3IoIlRYWFggZnJhbWUgdmFsdWUgc2hvdWxkIGJlIGFuIG9iamVjdCB3aXRoIGtleXMgZGVzY3JpcHRpb24gYW5kIHZhbHVlIik7CgkJCQkJCQl0aGlzLl9zZXRVc2VyU3RyaW5nRnJhbWUoZi5kZXNjcmlwdGlvbiwgZi52YWx1ZSk7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAiV0NPTSI6CgkJCQkJCWNhc2UgIldDT1AiOgoJCQkJCQljYXNlICJXT0FGIjoKCQkJCQkJY2FzZSAiV09BUiI6CgkJCQkJCWNhc2UgIldPQVMiOgoJCQkJCQljYXNlICJXT1JTIjoKCQkJCQkJY2FzZSAiV1BBWSI6CgkJCQkJCWNhc2UgIldQVUIiOgoJCQkJCQkJdGhpcy5fc2V0VXJsTGlua0ZyYW1lKGQsIGYpOwoJCQkJCQkJYnJlYWs7CgkJCQkJCWNhc2UgIkNPTU0iOgoJCQkJCQkJaWYgKGYubGFuZ3VhZ2UgPSBmLmxhbmd1YWdlIHx8ICJlbmciLCB0eXBlb2YgZiAhPSAib2JqZWN0IiB8fCAhKCJkZXNjcmlwdGlvbiIgaW4gZikgfHwgISgidGV4dCIgaW4gZikpIHRocm93IEVycm9yKCJDT01NIGZyYW1lIHZhbHVlIHNob3VsZCBiZSBhbiBvYmplY3Qgd2l0aCBrZXlzIGRlc2NyaXB0aW9uIGFuZCB0ZXh0Iik7CgkJCQkJCQlpZiAoZi5sYW5ndWFnZSAmJiAhZi5sYW5ndWFnZS5tYXRjaCgvW2Etel17M30vaSkpIHRocm93IEVycm9yKCJMYW5ndWFnZSBtdXN0IGJlIGNvZGVkIGZvbGxvd2luZyB0aGUgSVNPIDYzOS0yIHN0YW5kYXJkcyIpOwoJCQkJCQkJdGhpcy5fc2V0Q29tbWVudEZyYW1lKGYubGFuZ3VhZ2UsIGYuZGVzY3JpcHRpb24sIGYudGV4dCk7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAiUFJJViI6CgkJCQkJCQlpZiAodHlwZW9mIGYgIT0gIm9iamVjdCIgfHwgISgiaWQiIGluIGYpIHx8ICEoImRhdGEiIGluIGYpKSB0aHJvdyBFcnJvcigiUFJJViBmcmFtZSB2YWx1ZSBzaG91bGQgYmUgYW4gb2JqZWN0IHdpdGgga2V5cyBpZCBhbmQgZGF0YSIpOwoJCQkJCQkJdGhpcy5fc2V0UHJpdmF0ZUZyYW1lKGYuaWQsIGYuZGF0YSk7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAiSVBMUyI6CgkJCQkJCQlpZiAoIUFycmF5LmlzQXJyYXkoZikgfHwgIUFycmF5LmlzQXJyYXkoZlswXSkpIHRocm93IEVycm9yKCJJUExTIGZyYW1lIHZhbHVlIHNob3VsZCBiZSBhbiBhcnJheSBvZiBwYWlycyIpOwoJCQkJCQkJdGhpcy5fc2V0UGFpcmVkVGV4dEZyYW1lKGQsIGYpOwoJCQkJCQkJYnJlYWs7CgkJCQkJCWNhc2UgIlNZTFQiOgoJCQkJCQkJaWYgKHR5cGVvZiBmICE9ICJvYmplY3QiIHx8ICEoInR5cGUiIGluIGYpIHx8ICEoInRleHQiIGluIGYpIHx8ICEoInRpbWVzdGFtcEZvcm1hdCIgaW4gZikpIHRocm93IEVycm9yKCJTWUxUIGZyYW1lIHZhbHVlIHNob3VsZCBiZSBhbiBvYmplY3Qgd2l0aCBrZXlzIHR5cGUsIHRleHQgYW5kIHRpbWVzdGFtcEZvcm1hdCIpOwoJCQkJCQkJaWYgKCFBcnJheS5pc0FycmF5KGYudGV4dCkgfHwgIUFycmF5LmlzQXJyYXkoZi50ZXh0WzBdKSkgdGhyb3cgRXJyb3IoIlNZTFQgZnJhbWUgdGV4dCB2YWx1ZSBzaG91bGQgYmUgYW4gYXJyYXkgb2YgcGFpcnMiKTsKCQkJCQkJCWlmIChmLnR5cGUgPCAwIHx8IGYudHlwZSA+IDYpIHRocm93IEVycm9yKCJJbmNvcnJlY3QgU1lMVCBmcmFtZSBjb250ZW50IHR5cGUiKTsKCQkJCQkJCWlmIChmLnRpbWVzdGFtcEZvcm1hdCA8IDEgfHwgZi50aW1lc3RhbXBGb3JtYXQgPiAyKSB0aHJvdyBFcnJvcigiSW5jb3JyZWN0IFNZTFQgZnJhbWUgdGltZSBzdGFtcCBmb3JtYXQiKTsKCQkJCQkJCWYubGFuZ3VhZ2UgPSBmLmxhbmd1YWdlIHx8ICJlbmciLCBmLmRlc2NyaXB0aW9uID0gZi5kZXNjcmlwdGlvbiB8fCAiIiwgdGhpcy5fc2V0U3luY2hyb25pc2VkTHlyaWNzRnJhbWUoZi50eXBlLCBmLnRleHQsIGYudGltZXN0YW1wRm9ybWF0LCBmLmxhbmd1YWdlLCBmLmRlc2NyaXB0aW9uKTsKCQkJCQkJCWJyZWFrOwoJCQkJCQlkZWZhdWx0OiB0aHJvdyBFcnJvcihgVW5zdXBwb3J0ZWQgZnJhbWUgJHtkfWApOwoJCQkJCX0KCQkJCQlyZXR1cm4gdGhpczsKCQkJCX0KCQkJCXJlbW92ZVRhZygpIHsKCQkJCQlpZiAodGhpcy5hcnJheUJ1ZmZlci5ieXRlTGVuZ3RoIDwgMTApIHJldHVybjsKCQkJCQlsZXQgZCA9IG5ldyBVaW50OEFycmF5KHRoaXMuYXJyYXlCdWZmZXIpLCBmID0gZFszXSwgcCA9ICgobSA9IFsKCQkJCQkJZFs2XSwKCQkJCQkJZFs3XSwKCQkJCQkJZFs4XSwKCQkJCQkJZFs5XQoJCQkJCV0pWzBdIDw8IDIxKSArIChtWzFdIDw8IDE0KSArIChtWzJdIDw8IDcpICsgbVszXSArIDEwOwoJCQkJCXZhciBtLCBoOwoJCQkJCShoID0gZClbMF0gIT09IDczIHx8IGhbMV0gIT09IDY4IHx8IGhbMl0gIT09IDUxIHx8IGYgPCAyIHx8IGYgPiA0IHx8ICh0aGlzLmFycmF5QnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoZC5zdWJhcnJheShwKSkuYnVmZmVyKTsKCQkJCX0KCQkJCWFkZFRhZygpIHsKCQkJCQl0aGlzLnJlbW92ZVRhZygpOwoJCQkJCWxldCBkID0gWzI1NSwgMjU0XSwgZiA9IDEwICsgdGhpcy5mcmFtZXMucmVkdWNlKChkLCBmKSA9PiBkICsgZi5zaXplLCAwKSArIHRoaXMucGFkZGluZywgcCA9IG5ldyBBcnJheUJ1ZmZlcih0aGlzLmFycmF5QnVmZmVyLmJ5dGVMZW5ndGggKyBmKSwgbSA9IG5ldyBVaW50OEFycmF5KHApLCBoID0gMCwgZyA9IFtdOwoJCQkJCXJldHVybiBnID0gWwoJCQkJCQk3MywKCQkJCQkJNjgsCgkJCQkJCTUxLAoJCQkJCQkzCgkJCQkJXSwgbS5zZXQoZywgaCksIGggKz0gZy5sZW5ndGgsIGgrKywgaCsrLCBnID0gZnVuY3Rpb24oZCkgewoJCQkJCQlsZXQgZiA9IDEyNzsKCQkJCQkJcmV0dXJuIFsKCQkJCQkJCWQgPj4+IDIxICYgZiwKCQkJCQkJCWQgPj4+IDE0ICYgZiwKCQkJCQkJCWQgPj4+IDcgJiBmLAoJCQkJCQkJZCAmIGYKCQkJCQkJXTsKCQkJCQl9KGYgLSAxMCksIG0uc2V0KGcsIGgpLCBoICs9IGcubGVuZ3RoLCB0aGlzLmZyYW1lcy5mb3JFYWNoKChmKSA9PiB7CgkJCQkJCXN3aXRjaCAoZyA9IHQoZi5uYW1lKSwgbS5zZXQoZywgaCksIGggKz0gZy5sZW5ndGgsIGcgPSByKGYuc2l6ZSAtIDEwKSwgbS5zZXQoZywgaCksIGggKz0gZy5sZW5ndGgsIGggKz0gMiwgZi5uYW1lKSB7CgkJCQkJCQljYXNlICJXQ09NIjoKCQkJCQkJCWNhc2UgIldDT1AiOgoJCQkJCQkJY2FzZSAiV09BRiI6CgkJCQkJCQljYXNlICJXT0FSIjoKCQkJCQkJCWNhc2UgIldPQVMiOgoJCQkJCQkJY2FzZSAiV09SUyI6CgkJCQkJCQljYXNlICJXUEFZIjoKCQkJCQkJCWNhc2UgIldQVUIiOgoJCQkJCQkJCWcgPSB0KGYudmFsdWUpLCBtLnNldChnLCBoKSwgaCArPSBnLmxlbmd0aDsKCQkJCQkJCQlicmVhazsKCQkJCQkJCWNhc2UgIlRQRTEiOgoJCQkJCQkJY2FzZSAiVENPTSI6CgkJCQkJCQljYXNlICJUQ09OIjoKCQkJCQkJCWNhc2UgIlRMQU4iOgoJCQkJCQkJY2FzZSAiVElUMSI6CgkJCQkJCQljYXNlICJUSVQyIjoKCQkJCQkJCWNhc2UgIlRJVDMiOgoJCQkJCQkJY2FzZSAiVEFMQiI6CgkJCQkJCQljYXNlICJUUEUyIjoKCQkJCQkJCWNhc2UgIlRQRTMiOgoJCQkJCQkJY2FzZSAiVFBFNCI6CgkJCQkJCQljYXNlICJUUkNLIjoKCQkJCQkJCWNhc2UgIlRQT1MiOgoJCQkJCQkJY2FzZSAiVEtFWSI6CgkJCQkJCQljYXNlICJUTUVEIjoKCQkJCQkJCWNhc2UgIlRQVUIiOgoJCQkJCQkJY2FzZSAiVENPUCI6CgkJCQkJCQljYXNlICJURVhUIjoKCQkJCQkJCWNhc2UgIlRTUkMiOgoJCQkJCQkJCWcgPSBbMV0uY29uY2F0KGQpLCBtLnNldChnLCBoKSwgaCArPSBnLmxlbmd0aCwgZyA9IGEoZi52YWx1ZSksIG0uc2V0KGcsIGgpLCBoICs9IGcubGVuZ3RoOwoJCQkJCQkJCWJyZWFrOwoJCQkJCQkJY2FzZSAiVFhYWCI6CgkJCQkJCQljYXNlICJVU0xUIjoKCQkJCQkJCWNhc2UgIkNPTU0iOgoJCQkJCQkJCWcgPSBbMV0sIGYubmFtZSAhPT0gIlVTTFQiICYmIGYubmFtZSAhPT0gIkNPTU0iIHx8IChnID0gZy5jb25jYXQoZi5sYW5ndWFnZSkpLCBnID0gZy5jb25jYXQoZCksIG0uc2V0KGcsIGgpLCBoICs9IGcubGVuZ3RoLCBnID0gYShmLmRlc2NyaXB0aW9uKSwgbS5zZXQoZywgaCksIGggKz0gZy5sZW5ndGgsIGcgPSBbMCwgMF0uY29uY2F0KGQpLCBtLnNldChnLCBoKSwgaCArPSBnLmxlbmd0aCwgZyA9IGEoZi52YWx1ZSksIG0uc2V0KGcsIGgpLCBoICs9IGcubGVuZ3RoOwoJCQkJCQkJCWJyZWFrOwoJCQkJCQkJY2FzZSAiVEJQTSI6CgkJCQkJCQljYXNlICJUTEVOIjoKCQkJCQkJCWNhc2UgIlREQVQiOgoJCQkJCQkJY2FzZSAiVFlFUiI6CgkJCQkJCQkJaCsrLCBnID0gdChmLnZhbHVlKSwgbS5zZXQoZywgaCksIGggKz0gZy5sZW5ndGg7CgkJCQkJCQkJYnJlYWs7CgkJCQkJCQljYXNlICJQUklWIjoKCQkJCQkJCQlnID0gdChmLmlkKSwgbS5zZXQoZywgaCksIGggKz0gZy5sZW5ndGgsIGgrKywgbS5zZXQobmV3IFVpbnQ4QXJyYXkoZi52YWx1ZSksIGgpLCBoICs9IGYudmFsdWUuYnl0ZUxlbmd0aDsKCQkJCQkJCQlicmVhazsKCQkJCQkJCWNhc2UgIkFQSUMiOgoJCQkJCQkJCWcgPSBbZi51c2VVbmljb2RlRW5jb2RpbmcgPyAxIDogMF0sIG0uc2V0KGcsIGgpLCBoICs9IGcubGVuZ3RoLCBnID0gdChmLm1pbWVUeXBlKSwgbS5zZXQoZywgaCksIGggKz0gZy5sZW5ndGgsIGcgPSBbMCwgZi5waWN0dXJlVHlwZV0sIG0uc2V0KGcsIGgpLCBoICs9IGcubGVuZ3RoLCBmLnVzZVVuaWNvZGVFbmNvZGluZyA/IChnID0gW10uY29uY2F0KGQpLCBtLnNldChnLCBoKSwgaCArPSBnLmxlbmd0aCwgZyA9IGEoZi5kZXNjcmlwdGlvbiksIG0uc2V0KGcsIGgpLCBoICs9IGcubGVuZ3RoLCBoICs9IDIpIDogKGcgPSB0KGYuZGVzY3JpcHRpb24pLCBtLnNldChnLCBoKSwgaCArPSBnLmxlbmd0aCwgaCsrKSwgbS5zZXQobmV3IFVpbnQ4QXJyYXkoZi52YWx1ZSksIGgpLCBoICs9IGYudmFsdWUuYnl0ZUxlbmd0aDsKCQkJCQkJCQlicmVhazsKCQkJCQkJCWNhc2UgIklQTFMiOgoJCQkJCQkJCWcgPSBbMV0sIG0uc2V0KGcsIGgpLCBoICs9IGcubGVuZ3RoLCBmLnZhbHVlLmZvckVhY2goKGYpID0+IHsKCQkJCQkJCQkJZyA9IFtdLmNvbmNhdChkKSwgbS5zZXQoZywgaCksIGggKz0gZy5sZW5ndGgsIGcgPSBhKGZbMF0udG9TdHJpbmcoKSksIG0uc2V0KGcsIGgpLCBoICs9IGcubGVuZ3RoLCBnID0gWzAsIDBdLmNvbmNhdChkKSwgbS5zZXQoZywgaCksIGggKz0gZy5sZW5ndGgsIGcgPSBhKGZbMV0udG9TdHJpbmcoKSksIG0uc2V0KGcsIGgpLCBoICs9IGcubGVuZ3RoLCBnID0gWzAsIDBdLCBtLnNldChnLCBoKSwgaCArPSBnLmxlbmd0aDsKCQkJCQkJCQl9KTsKCQkJCQkJCQlicmVhazsKCQkJCQkJCWNhc2UgIlNZTFQiOiBnID0gWzFdLmNvbmNhdChmLmxhbmd1YWdlLCBmLnRpbWVzdGFtcEZvcm1hdCwgZi50eXBlKSwgbS5zZXQoZywgaCksIGggKz0gZy5sZW5ndGgsIGcgPSBbXS5jb25jYXQoZCksIG0uc2V0KGcsIGgpLCBoICs9IGcubGVuZ3RoLCBnID0gYShmLmRlc2NyaXB0aW9uKSwgbS5zZXQoZywgaCksIGggKz0gZy5sZW5ndGgsIGggKz0gMiwgZi52YWx1ZS5mb3JFYWNoKChmKSA9PiB7CgkJCQkJCQkJZyA9IFtdLmNvbmNhdChkKSwgbS5zZXQoZywgaCksIGggKz0gZy5sZW5ndGgsIGcgPSBhKGZbMF0udG9TdHJpbmcoKSksIG0uc2V0KGcsIGgpLCBoICs9IGcubGVuZ3RoLCBnID0gWzAsIDBdLCBtLnNldChnLCBoKSwgaCArPSBnLmxlbmd0aCwgZyA9IHIoZlsxXSksIG0uc2V0KGcsIGgpLCBoICs9IGcubGVuZ3RoOwoJCQkJCQkJfSk7CgkJCQkJCX0KCQkJCQl9KSwgaCArPSB0aGlzLnBhZGRpbmcsIG0uc2V0KG5ldyBVaW50OEFycmF5KHRoaXMuYXJyYXlCdWZmZXIpLCBoKSwgdGhpcy5hcnJheUJ1ZmZlciA9IHAsIHA7CgkJCQl9CgkJCQlnZXRCbG9iKCkgewoJCQkJCXJldHVybiBuZXcgQmxvYihbdGhpcy5hcnJheUJ1ZmZlcl0sIHsgdHlwZTogImF1ZGlvL21wZWciIH0pOwoJCQkJfQoJCQkJZ2V0VVJMKCkgewoJCQkJCXJldHVybiB0aGlzLnVybCB8fD0gVVJMLmNyZWF0ZU9iamVjdFVSTCh0aGlzLmdldEJsb2IoKSksIHRoaXMudXJsOwoJCQkJfQoJCQkJcmV2b2tlVVJMKCkgewoJCQkJCVVSTC5yZXZva2VPYmplY3RVUkwodGhpcy51cmwpOwoJCQkJfQoJCQl9CgkJfSwKCQkiLi9ub2RlX21vZHVsZXMvY2hhaW11L2Rpc3QvaW5kZXguanMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuZChmLCB7CgkJCQlBeTogKCkgPT4gQ2hhaW11LAoJCQkJR1o6ICgpID0+IGluaXRBdWRpb0NvbnRleHQKCQkJfSk7CgkJCWxldCBtID0gewoJCQkJdmVyc2lvbjogIjEuMC42IiwKCQkJCWRlYnVnOiAhMSwKCQkJCWZldGNoRm46IGZldGNoLmJpbmQod2luZG93KQoJCQl9LCBoID0geyBsb2c6ICguLi5kKSA9PiB7CgkJCQlpZiAobS5kZWJ1ZykgcmV0dXJuIGNvbnNvbGUubG9nKGAlY+KcpiBjaGFpbXUuanMgdiR7bS52ZXJzaW9ufSDinKZgLCAiYmFja2dyb3VuZDogIzAwMDsgY29sb3I6ICNmZmY7IHBhZGRpbmc6IDAgOHB4IiwgLi4uZCk7CgkJCX0gfSwgZyA9IFsKCQkJCSJwbGF5aW5nIiwKCQkJCSJyYXRlY2hhbmdlIiwKCQkJCSJwbGF5IiwKCQkJCSJ3YWl0aW5nIiwKCQkJCSJwYXVzZSIsCgkJCQkic2Vla2VkIgoJCQldOwoJCQlmdW5jdGlvbiBpbml0QXVkaW9Db250ZXh0KCkgewoJCQkJbGV0IGQgPSB3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQ7CgkJCQlyZXR1cm4gZCA/IG5ldyBkKCkgOiB2b2lkIDA7CgkJCX0KCQkJY2xhc3MgQmFzZVBsYXllciB7CgkJCQlzdGF0aWMgbmFtZSA9ICJCYXNlUGxheWVyIjsKCQkJCWNoYWltdTsKCQkJCWZldGNoOwoJCQkJX3NyYzsKCQkJCWZldGNoT3B0czsKCQkJCWNvbnN0cnVjdG9yKGQsIGYpIHsKCQkJCQl0aGlzLmNoYWltdSA9IGQsIHRoaXMuX3NyYyA9IGYsIHRoaXMuZmV0Y2ggPSB0aGlzLmNoYWltdS5mZXRjaEZuLCB0aGlzLmZldGNoT3B0cyA9IHRoaXMuY2hhaW11LmZldGNoT3B0czsKCQkJCX0KCQkJCWFzeW5jIGluaXQoKSB7CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9CgkJCQlhc3luYyBjbGVhcigpIHsKCQkJCQlyZXR1cm4gdGhpczsKCQkJCX0KCQkJCWxpcFN5bmMoZCA9ICExKSB7CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9CgkJCQloYW5kbGVWaWRlb0V2ZW50ID0gKGQpID0+IChoLmxvZyhgaGFuZGxlIHZpZGVvICR7ZC50eXBlfWApLCB0aGlzLmxpcFN5bmMoZC50eXBlKSwgdGhpcyk7CgkJCQlyZW1vdmVWaWRlb0V2ZW50cygpIHsKCQkJCQlmb3IgKGxldCBkIG9mIGcpIHRoaXMuY2hhaW11LnZpZGVvPy5yZW1vdmVFdmVudExpc3RlbmVyKGQsIHRoaXMuaGFuZGxlVmlkZW9FdmVudCk7CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9CgkJCQlhZGRWaWRlb0V2ZW50cygpIHsKCQkJCQlmb3IgKGxldCBkIG9mIGcpIHRoaXMuY2hhaW11LnZpZGVvPy5hZGRFdmVudExpc3RlbmVyKGQsIHRoaXMuaGFuZGxlVmlkZW9FdmVudCk7CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9CgkJCQlhc3luYyBwbGF5KCkgewoJCQkJCXJldHVybiB0aGlzOwoJCQkJfQoJCQkJYXN5bmMgcGF1c2UoKSB7CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9CgkJCQlnZXQgbmFtZSgpIHsKCQkJCQlyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lOwoJCQkJfQoJCQkJc2V0IHNyYyhkKSB7CgkJCQkJdGhpcy5fc3JjID0gZDsKCQkJCX0KCQkJCWdldCBzcmMoKSB7CgkJCQkJcmV0dXJuIHRoaXMuX3NyYzsKCQkJCX0KCQkJCWdldCBjdXJyZW50U3JjKCkgewoJCQkJCXJldHVybiB0aGlzLl9zcmM7CgkJCQl9CgkJCQlzZXQgdm9sdW1lKGQpIHt9CgkJCQlnZXQgdm9sdW1lKCkgewoJCQkJCXJldHVybiAwOwoJCQkJfQoJCQkJZ2V0IHBsYXliYWNrUmF0ZSgpIHsKCQkJCQlyZXR1cm4gMDsKCQkJCX0KCQkJCXNldCBwbGF5YmFja1JhdGUoZCkge30KCQkJCWdldCBjdXJyZW50VGltZSgpIHsKCQkJCQlyZXR1cm4gMDsKCQkJCX0KCQkJfQoJCQljbGFzcyBBdWRpb1BsYXllciBleHRlbmRzIEJhc2VQbGF5ZXIgewoJCQkJc3RhdGljIG5hbWUgPSAiQXVkaW9QbGF5ZXIiOwoJCQkJYXVkaW87CgkJCQlnYWluTm9kZTsKCQkJCWF1ZGlvU291cmNlOwoJCQkJY29uc3RydWN0b3IoZCwgZikgewoJCQkJCXN1cGVyKGQsIGYpLCB0aGlzLnVwZGF0ZUF1ZGlvKCk7CgkJCQl9CgkJCQlpbml0QXVkaW9Cb29zdGVyKCkgewoJCQkJCXJldHVybiB0aGlzLmNoYWltdS5hdWRpb0NvbnRleHQgPyAodGhpcy5kaXNjb25uZWN0QXVkaW9Ob2RlcygpLCB0aGlzLmdhaW5Ob2RlID0gdGhpcy5jaGFpbXUuYXVkaW9Db250ZXh0LmNyZWF0ZUdhaW4oKSwgdGhpcy5nYWluTm9kZS5jb25uZWN0KHRoaXMuY2hhaW11LmF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbiksIHRoaXMuYXVkaW9Tb3VyY2UgPSB0aGlzLmNoYWltdS5hdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFFbGVtZW50U291cmNlKHRoaXMuYXVkaW8pLCB0aGlzLmF1ZGlvU291cmNlLmNvbm5lY3QodGhpcy5nYWluTm9kZSksIHRoaXMpIDogdGhpczsKCQkJCX0KCQkJCWRpc2Nvbm5lY3RBdWRpb05vZGVzKCkgewoJCQkJCXRoaXMuYXVkaW9Tb3VyY2UgJiYgKHRoaXMuYXVkaW9Tb3VyY2UuZGlzY29ubmVjdCgpLCB0aGlzLmF1ZGlvU291cmNlID0gdm9pZCAwKSwgdGhpcy5nYWluTm9kZSAmJiAodGhpcy5nYWluTm9kZS5kaXNjb25uZWN0KCksIHRoaXMuZ2Fpbk5vZGUgPSB2b2lkIDApOwoJCQkJfQoJCQkJdXBkYXRlQXVkaW8oKSB7CgkJCQkJcmV0dXJuIHRoaXMuYXVkaW8gPSBuZXcgQXVkaW8odGhpcy5zcmMpLCB0aGlzLmF1ZGlvLmNyb3NzT3JpZ2luID0gImFub255bW91cyIsIHRoaXM7CgkJCQl9CgkJCQlhc3luYyBpbml0KCkgewoJCQkJCXJldHVybiB0aGlzLnVwZGF0ZUF1ZGlvKCksIHRoaXMuaW5pdEF1ZGlvQm9vc3RlcigpLCB0aGlzOwoJCQkJfQoJCQkJYXVkaW9FcnJvckhhbmRsZSA9IChkKSA9PiB7CgkJCQkJY29uc29sZS5lcnJvcigiW0F1ZGlvUGxheWVyXSIsIGQpOwoJCQkJfTsKCQkJCWxpcFN5bmMoZCA9ICExKSB7CgkJCQkJaWYgKGgubG9nKCJbQXVkaW9QbGF5ZXJdIGxpcHN5bmMgdmlkZW8iLCB0aGlzLmNoYWltdS52aWRlbyksICF0aGlzLmNoYWltdS52aWRlbykgcmV0dXJuIHRoaXM7CgkJCQkJaWYgKHRoaXMuYXVkaW8uY3VycmVudFRpbWUgPSB0aGlzLmNoYWltdS52aWRlby5jdXJyZW50VGltZSwgdGhpcy5hdWRpby5wbGF5YmFja1JhdGUgPSB0aGlzLmNoYWltdS52aWRlby5wbGF5YmFja1JhdGUsICFkKSByZXR1cm4gaC5sb2coIltBdWRpb1BsYXllcl0gbGlwc3luYyBtb2RlIGlzbid0IHNldCIpLCB0aGlzOwoJCQkJCXN3aXRjaCAoaC5sb2coYFtBdWRpb1BsYXllcl0gbGlwc3luYyBtb2RlIGlzICR7ZH1gKSwgZCkgewoJCQkJCQljYXNlICJwbGF5IjoKCQkJCQkJY2FzZSAicGxheWluZyI6CgkJCQkJCWNhc2UgInNlZWtlZCI6IHJldHVybiB0aGlzLmNoYWltdS52aWRlby5wYXVzZWQgfHwgdGhpcy5zeW5jUGxheSgpLCB0aGlzOwoJCQkJCQljYXNlICJwYXVzZSI6CgkJCQkJCWNhc2UgIndhaXRpbmciOiByZXR1cm4gdGhpcy5wYXVzZSgpLCB0aGlzOwoJCQkJCQlkZWZhdWx0OiByZXR1cm4gdGhpczsKCQkJCQl9CgkJCQl9CgkJCQlhc3luYyBjbGVhcigpIHsKCQkJCQlyZXR1cm4gdGhpcy5hdWRpby5wYXVzZSgpLCB0aGlzLmF1ZGlvLnNyYyA9ICIiLCB0aGlzLmF1ZGlvLnJlbW92ZUF0dHJpYnV0ZSgic3JjIiksIHRoaXMuZGlzY29ubmVjdEF1ZGlvTm9kZXMoKSwgdGhpczsKCQkJCX0KCQkJCXN5bmNQbGF5KCkgewoJCQkJCXJldHVybiBoLmxvZygiW0F1ZGlvUGxheWVyXSBzeW5jIHBsYXkgY2FsbGVkIiksIHRoaXMuYXVkaW8gJiYgdGhpcy5hdWRpby5wbGF5KCkuY2F0Y2godGhpcy5hdWRpb0Vycm9ySGFuZGxlKSwgdGhpczsKCQkJCX0KCQkJCWFzeW5jIHBsYXkoKSB7CgkJCQkJcmV0dXJuIGgubG9nKCJbQXVkaW9QbGF5ZXJdIHBsYXkgY2FsbGVkIiksIHRoaXMuYXVkaW8gJiYgYXdhaXQgdGhpcy5hdWRpby5wbGF5KCkuY2F0Y2godGhpcy5hdWRpb0Vycm9ySGFuZGxlKSwgdGhpczsKCQkJCX0KCQkJCWFzeW5jIHBhdXNlKCkgewoJCQkJCXJldHVybiBoLmxvZygiW0F1ZGlvUGxheWVyXSBwYXVzZSBjYWxsZWQiKSwgdGhpcy5hdWRpbyAmJiB0aGlzLmF1ZGlvLnBhdXNlKCksIHRoaXM7CgkJCQl9CgkJCQlzZXQgc3JjKGQpIHsKCQkJCQlpZiAodGhpcy5fc3JjID0gZCwgIWQpIHsKCQkJCQkJdGhpcy5jbGVhcigpOwoJCQkJCQlyZXR1cm47CgkJCQkJfQoJCQkJCXRoaXMuYXVkaW8uc3JjID0gZDsKCQkJCX0KCQkJCWdldCBzcmMoKSB7CgkJCQkJcmV0dXJuIHRoaXMuX3NyYzsKCQkJCX0KCQkJCWdldCBjdXJyZW50U3JjKCkgewoJCQkJCXJldHVybiB0aGlzLmF1ZGlvLmN1cnJlbnRTcmM7CgkJCQl9CgkJCQlzZXQgdm9sdW1lKGQpIHsKCQkJCQlpZiAodGhpcy5nYWluTm9kZSkgewoJCQkJCQl0aGlzLmdhaW5Ob2RlLmdhaW4udmFsdWUgPSBkOwoJCQkJCQlyZXR1cm47CgkJCQkJfQoJCQkJCXRoaXMuYXVkaW8udm9sdW1lID0gZDsKCQkJCX0KCQkJCWdldCB2b2x1bWUoKSB7CgkJCQkJcmV0dXJuIHRoaXMuZ2Fpbk5vZGUgPyB0aGlzLmdhaW5Ob2RlLmdhaW4udmFsdWUgOiB0aGlzLmF1ZGlvLnZvbHVtZTsKCQkJCX0KCQkJCWdldCBwbGF5YmFja1JhdGUoKSB7CgkJCQkJcmV0dXJuIHRoaXMuYXVkaW8ucGxheWJhY2tSYXRlOwoJCQkJfQoJCQkJc2V0IHBsYXliYWNrUmF0ZShkKSB7CgkJCQkJdGhpcy5hdWRpby5wbGF5YmFja1JhdGUgPSBkOwoJCQkJfQoJCQkJZ2V0IGN1cnJlbnRUaW1lKCkgewoJCQkJCXJldHVybiB0aGlzLmF1ZGlvLmN1cnJlbnRUaW1lOwoJCQkJfQoJCQl9CgkJCWNsYXNzIENoYWltdVBsYXllciBleHRlbmRzIEJhc2VQbGF5ZXIgewoJCQkJc3RhdGljIG5hbWUgPSAiQ2hhaW11UGxheWVyIjsKCQkJCWF1ZGlvQnVmZmVyOwoJCQkJYXVkaW9FbGVtZW50OwoJCQkJbWVkaWFFbGVtZW50U291cmNlOwoJCQkJZ2Fpbk5vZGU7CgkJCQlibG9iVXJsOwoJCQkJaXNDbGVhcmluZyA9ICExOwoJCQkJaXNJbml0aWFsaXppbmcgPSAhMTsKCQkJCWNsZWFyaW5nUHJvbWlzZTsKCQkJCWFzeW5jIGZldGNoQXVkaW8oKSB7CgkJCQkJaWYgKCF0aGlzLl9zcmMpIHRocm93IEVycm9yKCJObyBhdWRpbyBzb3VyY2UgcHJvdmlkZWQiKTsKCQkJCQlpZiAoIXRoaXMuY2hhaW11LmF1ZGlvQ29udGV4dCkgdGhyb3cgRXJyb3IoIk5vIGF1ZGlvIGNvbnRleHQgYXZhaWxhYmxlIik7CgkJCQkJaC5sb2coYFtDaGFpbXVQbGF5ZXJdIEZldGNoaW5nIGF1ZGlvIGZyb20gJHt0aGlzLl9zcmN9Li4uYCk7CgkJCQkJbGV0IGQ7CgkJCQkJdHJ5IHsKCQkJCQkJbGV0IGYgPSBhd2FpdCB0aGlzLmZldGNoKHRoaXMuX3NyYywgdGhpcy5mZXRjaE9wdHMpOwoJCQkJCQloLmxvZygiW0NoYWltdVBsYXllcl0gRGVjb2RpbmcgZmV0Y2hlZCBhdWRpby4uLiIpOwoJCQkJCQlsZXQgcCA9IGF3YWl0IGYuYXJyYXlCdWZmZXIoKSwgbSA9IG5ldyBCbG9iKFtwXSk7CgkJCQkJCWQgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG0pLCB0aGlzLmF1ZGlvQnVmZmVyID0gYXdhaXQgdGhpcy5jaGFpbXUuYXVkaW9Db250ZXh0LmRlY29kZUF1ZGlvRGF0YShwKSwgdGhpcy5ibG9iVXJsICYmIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5ibG9iVXJsKSwgdGhpcy5ibG9iVXJsID0gZCwgZCA9IHZvaWQgMDsKCQkJCQl9IGNhdGNoIChmKSB7CgkJCQkJCXRocm93IGQgJiYgVVJMLnJldm9rZU9iamVjdFVSTChkKSwgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBhdWRpbyBmaWxlLCBiZWNhdXNlICR7Zi5tZXNzYWdlfWApOwoJCQkJCX0KCQkJCQlyZXR1cm4gdGhpczsKCQkJCX0KCQkJCWluaXRBdWRpb0Jvb3N0ZXIoKSB7CgkJCQkJcmV0dXJuIHRoaXMuY2hhaW11LmF1ZGlvQ29udGV4dCA/ICh0aGlzLmRpc2Nvbm5lY3RBdWRpb05vZGVzKCksIHRoaXMuZ2Fpbk5vZGUgPSB0aGlzLmNoYWltdS5hdWRpb0NvbnRleHQuY3JlYXRlR2FpbigpLCB0aGlzKSA6IHRoaXM7CgkJCQl9CgkJCQlkaXNjb25uZWN0QXVkaW9Ob2RlcygpIHsKCQkJCQl0aGlzLm1lZGlhRWxlbWVudFNvdXJjZSAmJiAodGhpcy5tZWRpYUVsZW1lbnRTb3VyY2UuZGlzY29ubmVjdCgpLCB0aGlzLm1lZGlhRWxlbWVudFNvdXJjZSA9IHZvaWQgMCksIHRoaXMuZ2Fpbk5vZGUgJiYgKHRoaXMuZ2Fpbk5vZGUuZGlzY29ubmVjdCgpLCB0aGlzLmdhaW5Ob2RlID0gdm9pZCAwKTsKCQkJCX0KCQkJCWFzeW5jIGluaXQoKSB7CgkJCQkJaWYgKHRoaXMuaXNJbml0aWFsaXppbmcpIHRocm93IEVycm9yKCJJbml0aWFsaXphdGlvbiBhbHJlYWR5IGluIHByb2dyZXNzIik7CgkJCQkJdGhpcy5pc0luaXRpYWxpemluZyA9ICEwOwoJCQkJCXRyeSB7CgkJCQkJCXJldHVybiBhd2FpdCB0aGlzLmZldGNoQXVkaW8oKSwgdGhpcy5pbml0QXVkaW9Cb29zdGVyKCksIHRoaXMuY3JlYXRlQXVkaW9FbGVtZW50KCksIHRoaXM7CgkJCQkJfSBmaW5hbGx5IHsKCQkJCQkJdGhpcy5pc0luaXRpYWxpemluZyA9ICExOwoJCQkJCX0KCQkJCX0KCQkJCWNyZWF0ZUF1ZGlvRWxlbWVudCgpIHsKCQkJCQlpZiAoIXRoaXMuY2hhaW11LmF1ZGlvQ29udGV4dCkgdGhyb3cgRXJyb3IoIk5vIGF1ZGlvIGNvbnRleHQgYXZhaWxhYmxlIik7CgkJCQkJaWYgKCF0aGlzLmJsb2JVcmwpIHRocm93IEVycm9yKCJObyBibG9iIFVSTCBhdmFpbGFibGUuIik7CgkJCQkJbGV0IGQgPSBuZXcgQXVkaW8odGhpcy5ibG9iVXJsKTsKCQkJCQlkLmNyb3NzT3JpZ2luID0gImFub255bW91cyIsICJwcmVzZXJ2ZXNQaXRjaCIgaW4gZCAmJiAoZC5wcmVzZXJ2ZXNQaXRjaCA9ICEwLCAibW96UHJlc2VydmVzUGl0Y2giIGluIGQgJiYgKGQubW96UHJlc2VydmVzUGl0Y2ggPSAhMCksICJ3ZWJraXRQcmVzZXJ2ZXNQaXRjaCIgaW4gZCAmJiAoZC53ZWJraXRQcmVzZXJ2ZXNQaXRjaCA9ICEwKSksIHRoaXMuYXVkaW9FbGVtZW50ID0gZCwgdGhpcy5tZWRpYUVsZW1lbnRTb3VyY2UgPSB0aGlzLmNoYWltdS5hdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFFbGVtZW50U291cmNlKGQpLCB0aGlzLm1lZGlhRWxlbWVudFNvdXJjZS5jb25uZWN0KHRoaXMuZ2Fpbk5vZGUpLCB0aGlzLmdhaW5Ob2RlLmNvbm5lY3QodGhpcy5jaGFpbXUuYXVkaW9Db250ZXh0LmRlc3RpbmF0aW9uKTsKCQkJCX0KCQkJCWxpcFN5bmMoZCA9ICExKSB7CgkJCQkJaWYgKGgubG9nKCJbQ2hhaW11UGxheWVyXSBsaXBzeW5jIHZpZGVvIiwgdGhpcy5jaGFpbXUudmlkZW8sIHRoaXMpLCAhdGhpcy5jaGFpbXUudmlkZW8pIHJldHVybiB0aGlzOwoJCQkJCWlmICghZCkgcmV0dXJuIGgubG9nKCJbQ2hhaW11UGxheWVyXSBsaXBzeW5jIG1vZGUgaXNuJ3Qgc2V0IiksIHRoaXM7CgkJCQkJc3dpdGNoIChoLmxvZyhgW0NoYWltdVBsYXllcl0gbGlwc3luYyBtb2RlIGlzICR7ZH1gKSwgZCkgewoJCQkJCQljYXNlICJwbGF5IjoKCQkJCQkJY2FzZSAicGxheWluZyI6CgkJCQkJCWNhc2UgInJhdGVjaGFuZ2UiOgoJCQkJCQljYXNlICJzZWVrZWQiOiByZXR1cm4gdGhpcy5jaGFpbXUudmlkZW8ucGF1c2VkIHx8IHRoaXMuc3RhcnQoKSwgdGhpczsKCQkJCQkJY2FzZSAicGF1c2UiOgoJCQkJCQljYXNlICJ3YWl0aW5nIjogcmV0dXJuIHRoaXMucGF1c2UoKSwgdGhpczsKCQkJCQkJZGVmYXVsdDogcmV0dXJuIHRoaXM7CgkJCQkJfQoJCQkJfQoJCQkJYXN5bmMgcmVvcGVuQ3R4KCkgewoJCQkJCWlmICghdGhpcy5jaGFpbXUuYXVkaW9Db250ZXh0KSB0aHJvdyBFcnJvcigiTm8gYXVkaW8gY29udGV4dCBhdmFpbGFibGUiKTsKCQkJCQl0cnkgewoJCQkJCQl0aGlzLmNoYWltdS5hdWRpb0NvbnRleHQuc3RhdGUgIT09ICJjbG9zZWQiICYmIGF3YWl0IHRoaXMuY2hhaW11LmF1ZGlvQ29udGV4dC5jbG9zZSgpOwoJCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQkJaC5sb2coIltDaGFpbXVQbGF5ZXJdIEZhaWxlZCB0byBjbG9zZSBhdWRpbyBjb250ZXh0OiIsIGQpOwoJCQkJCX0KCQkJCQlyZXR1cm4gdGhpcy5jaGFpbXUuYXVkaW9Db250ZXh0ID0gaW5pdEF1ZGlvQ29udGV4dCgpLCB0aGlzOwoJCQkJfQoJCQkJYXN5bmMgY2xlYXIoKSB7CgkJCQkJaWYgKHRoaXMuaXNDbGVhcmluZyAmJiB0aGlzLmNsZWFyaW5nUHJvbWlzZSkgcmV0dXJuIHRoaXMuY2xlYXJpbmdQcm9taXNlOwoJCQkJCWlmICghdGhpcy5jaGFpbXUuYXVkaW9Db250ZXh0KSB0aHJvdyBFcnJvcigiTm8gYXVkaW8gY29udGV4dCBhdmFpbGFibGUiKTsKCQkJCQlyZXR1cm4gaC5sb2coImNsZWFyIGF1ZGlvIGNvbnRleHQiKSwgdGhpcy5pc0NsZWFyaW5nID0gITAsIHRoaXMuY2xlYXJpbmdQcm9taXNlID0gKGFzeW5jICgpID0+IHsKCQkJCQkJdHJ5IHsKCQkJCQkJCWF3YWl0IHRoaXMucGF1c2UoKSwgdGhpcy5hdWRpb0VsZW1lbnQgJiYgKHRoaXMuYXVkaW9FbGVtZW50LnBhdXNlKCksIHRoaXMuYXVkaW9FbGVtZW50ID0gdm9pZCAwKSwgdGhpcy5ibG9iVXJsICYmIChVUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMuYmxvYlVybCksIHRoaXMuYmxvYlVybCA9IHZvaWQgMCksIHRoaXMuZGlzY29ubmVjdEF1ZGlvTm9kZXMoKTsKCQkJCQkJCWxldCBkID0gdGhpcy5nYWluTm9kZSA/IHRoaXMuZ2Fpbk5vZGUuZ2Fpbi52YWx1ZSA6IDE7CgkJCQkJCQlyZXR1cm4gYXdhaXQgdGhpcy5yZW9wZW5DdHgoKSwgdGhpcy5jaGFpbXUuYXVkaW9Db250ZXh0ICYmICh0aGlzLmluaXRBdWRpb0Jvb3N0ZXIoKSwgdGhpcy52b2x1bWUgPSBkKSwgdGhpczsKCQkJCQkJfSBmaW5hbGx5IHsKCQkJCQkJCXRoaXMuaXNDbGVhcmluZyA9ICExLCB0aGlzLmNsZWFyaW5nUHJvbWlzZSA9IHZvaWQgMDsKCQkJCQkJfQoJCQkJCX0pKCksIHRoaXMuY2xlYXJpbmdQcm9taXNlOwoJCQkJfQoJCQkJYXN5bmMgc3RhcnQoKSB7CgkJCQkJaWYgKCF0aGlzLmNoYWltdS5hdWRpb0NvbnRleHQpIHRocm93IEVycm9yKCJObyBhdWRpbyBjb250ZXh0IGF2YWlsYWJsZSIpOwoJCQkJCWlmICghdGhpcy5hdWRpb0VsZW1lbnQpIHRocm93IEVycm9yKCJBdWRpbyBlbGVtZW50IGlzIG1pc3NpbmciKTsKCQkJCQlyZXR1cm4gdGhpcy5pc0NsZWFyaW5nICYmIHRoaXMuY2xlYXJpbmdQcm9taXNlICYmIChoLmxvZygiVGhlIG90aGVyIGNsZWFuZXIgaXMgc3RpbGwgcnVubmluZywgd2FpdGluZy4uLiIpLCBhd2FpdCB0aGlzLmNsZWFyaW5nUHJvbWlzZSksIGgubG9nKCJzdGFydGluZyBhdWRpbyB2aWEgSFRNTEF1ZGlvRWxlbWVudCIpLCBhd2FpdCB0aGlzLnBsYXkoKSwgdGhpcy5jaGFpbXUudmlkZW8gJiYgKHRoaXMuYXVkaW9FbGVtZW50LmN1cnJlbnRUaW1lID0gdGhpcy5jaGFpbXUudmlkZW8uY3VycmVudFRpbWUsIHRoaXMuYXVkaW9FbGVtZW50LnBsYXliYWNrUmF0ZSA9IHRoaXMuY2hhaW11LnZpZGVvLnBsYXliYWNrUmF0ZSksIHRoaXMuYXVkaW9FbGVtZW50LnBsYXkoKS5jYXRjaCgoZCkgPT4gaC5sb2coIltDaGFpbXVQbGF5ZXJdIFBsYXkgYXVkaW9FbGVtZW50IGZhaWxlZDoiLCBkKSksIHRoaXM7CgkJCQl9CgkJCQlhc3luYyBwYXVzZSgpIHsKCQkJCQlpZiAoIXRoaXMuY2hhaW11LmF1ZGlvQ29udGV4dCkgdGhyb3cgRXJyb3IoIk5vIGF1ZGlvIGNvbnRleHQgYXZhaWxhYmxlIik7CgkJCQkJcmV0dXJuIHRoaXMuYXVkaW9FbGVtZW50ICYmIHRoaXMuYXVkaW9FbGVtZW50LnBhdXNlKCksIHRoaXMuY2hhaW11LmF1ZGlvQ29udGV4dC5zdGF0ZSA9PT0gInJ1bm5pbmciICYmIGF3YWl0IHRoaXMuY2hhaW11LmF1ZGlvQ29udGV4dC5zdXNwZW5kKCksIHRoaXM7CgkJCQl9CgkJCQlhc3luYyBwbGF5KCkgewoJCQkJCWlmICghdGhpcy5jaGFpbXUuYXVkaW9Db250ZXh0KSB0aHJvdyBFcnJvcigiTm8gYXVkaW8gY29udGV4dCBhdmFpbGFibGUiKTsKCQkJCQlyZXR1cm4gYXdhaXQgdGhpcy5jaGFpbXUuYXVkaW9Db250ZXh0LnJlc3VtZSgpLCB0aGlzOwoJCQkJfQoJCQkJc2V0IHNyYyhkKSB7CgkJCQkJdGhpcy5fc3JjID0gZDsKCQkJCX0KCQkJCWdldCBzcmMoKSB7CgkJCQkJcmV0dXJuIHRoaXMuX3NyYzsKCQkJCX0KCQkJCWdldCBjdXJyZW50U3JjKCkgewoJCQkJCXJldHVybiB0aGlzLl9zcmM7CgkJCQl9CgkJCQlzZXQgdm9sdW1lKGQpIHsKCQkJCQl0aGlzLmdhaW5Ob2RlICYmICh0aGlzLmdhaW5Ob2RlLmdhaW4udmFsdWUgPSBkKTsKCQkJCX0KCQkJCWdldCB2b2x1bWUoKSB7CgkJCQkJcmV0dXJuIHRoaXMuZ2Fpbk5vZGUgPyB0aGlzLmdhaW5Ob2RlLmdhaW4udmFsdWUgOiAwOwoJCQkJfQoJCQkJc2V0IHBsYXliYWNrUmF0ZShkKSB7CgkJCQkJdGhpcy5hdWRpb0VsZW1lbnQgJiYgKHRoaXMuYXVkaW9FbGVtZW50LnBsYXliYWNrUmF0ZSA9IGQpOwoJCQkJfQoJCQkJZ2V0IHBsYXliYWNrUmF0ZSgpIHsKCQkJCQlyZXR1cm4gdGhpcy5hdWRpb0VsZW1lbnQgPyB0aGlzLmF1ZGlvRWxlbWVudC5wbGF5YmFja1JhdGUgOiB0aGlzLmNoYWltdS52aWRlbz8ucGxheWJhY2tSYXRlID8/IDE7CgkJCQl9CgkJCQlnZXQgY3VycmVudFRpbWUoKSB7CgkJCQkJcmV0dXJuIHRoaXMuY2hhaW11LnZpZGVvPy5jdXJyZW50VGltZSA/PyAwOwoJCQkJfQoJCQl9CgkJCWNsYXNzIENoYWltdSB7CgkJCQlfZGVidWcgPSAhMTsKCQkJCWF1ZGlvQ29udGV4dDsKCQkJCXBsYXllcjsKCQkJCXZpZGVvOwoJCQkJZmV0Y2hGbjsKCQkJCWZldGNoT3B0czsKCQkJCWNvbnN0cnVjdG9yKHsgdXJsOiBkLCB2aWRlbzogZiwgZGVidWc6IHAgPSAhMSwgZmV0Y2hGbjogaCA9IG0uZmV0Y2hGbiwgZmV0Y2hPcHRzOiBnID0ge30sIHByZWZlckF1ZGlvOiBfID0gITEgfSkgewoJCQkJCXRoaXMuX2RlYnVnID0gbS5kZWJ1ZyA9IHAsIHRoaXMuZmV0Y2hGbiA9IGgsIHRoaXMuZmV0Y2hPcHRzID0gZywgdGhpcy5hdWRpb0NvbnRleHQgPSBpbml0QXVkaW9Db250ZXh0KCksIHRoaXMucGxheWVyID0gdGhpcy5hdWRpb0NvbnRleHQgJiYgIV8gPyBuZXcgQ2hhaW11UGxheWVyKHRoaXMsIGQpIDogbmV3IEF1ZGlvUGxheWVyKHRoaXMsIGQpLCB0aGlzLnZpZGVvID0gZjsKCQkJCX0KCQkJCWFzeW5jIGluaXQoKSB7CgkJCQkJYXdhaXQgdGhpcy5wbGF5ZXIuaW5pdCgpLCB0aGlzLnZpZGVvICYmICF0aGlzLnZpZGVvLnBhdXNlZCAmJiB0aGlzLnBsYXllci5saXBTeW5jKCJwbGF5IiksIHRoaXMucGxheWVyLmFkZFZpZGVvRXZlbnRzKCk7CgkJCQl9CgkJCQlzZXQgZGVidWcoZCkgewoJCQkJCXRoaXMuX2RlYnVnID0gbS5kZWJ1ZyA9IGQ7CgkJCQl9CgkJCQlnZXQgZGVidWcoKSB7CgkJCQkJcmV0dXJuIHRoaXMuX2RlYnVnOwoJCQkJfQoJCQl9CgkJfSwKCQkiLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGl0LWh0bWwuanMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuZChmLCB7CgkJCQlKVzogKCkgPT4gRywKCQkJCVhYOiAoKSA9PiBCLAoJCQkJcXk6ICgpID0+IFcKCQkJfSk7CgkJCWxldCBtID0gZ2xvYmFsVGhpcywgaCA9IG0udHJ1c3RlZFR5cGVzLCBnID0gaCA/IGguY3JlYXRlUG9saWN5KCJsaXQtaHRtbCIsIHsgY3JlYXRlSFRNTDogKGQpID0+IGQgfSkgOiB2b2lkIDAsIF8gPSAiJGxpdCQiLCB2ID0gYGxpdCQke01hdGgucmFuZG9tKCkudG9GaXhlZCg5KS5zbGljZSgyKX0kYCwgYiA9ICI/IiArIHYsIHggPSBgPCR7Yn0+YCwgQyA9IGRvY3VtZW50LCBsID0gKCkgPT4gQy5jcmVhdGVDb21tZW50KCIiKSwgYyA9IChkKSA9PiBkID09PSBudWxsIHx8IHR5cGVvZiBkICE9ICJvYmplY3QiICYmIHR5cGVvZiBkICE9ICJmdW5jdGlvbiIsIHcgPSBBcnJheS5pc0FycmF5LCB1ID0gKGQpID0+IHcoZCkgfHwgdHlwZW9mIGQ/LltTeW1ib2wuaXRlcmF0b3JdID09ICJmdW5jdGlvbiIsIFQgPSAiWyAJXG5cZlxyXSIsIEUgPSAvPCg/OighLS18XC9bXmEtekEtWl0pfChcLz9bYS16QS1aXVtePlxzXSopfChcLz8kKSkvZywgRCA9IC8tLT4vZywgTyA9IC8+L2csIEEgPSBSZWdFeHAoYD58JHtUfSg/OihbXlxccyInPj0vXSspKCR7VH0qPSR7VH0qKD86W14gXHRcblxmXHIiJ1xgPD49XXwoInwnKXwpKXwkKWAsICJnIiksIGogPSAvJy9nLCBGID0gLyIvZywgVSA9IC9eKD86c2NyaXB0fHN0eWxlfHRleHRhcmVhfHRpdGxlKSQvaSwgeSA9IChkKSA9PiAoZiwgLi4ucCkgPT4gKHsKCQkJCV8kbGl0VHlwZSQ6IGQsCgkJCQlzdHJpbmdzOiBmLAoJCQkJdmFsdWVzOiBwCgkJCX0pLCBXID0geSgxKSwgRyA9IHkoMiksIEsgPSB5KDMpLCBxID0gU3ltYm9sLmZvcigibGl0LW5vQ2hhbmdlIiksIEogPSBTeW1ib2wuZm9yKCJsaXQtbm90aGluZyIpLCBZID0gbmV3IFdlYWtNYXAoKSwgWCA9IEMuY3JlYXRlVHJlZVdhbGtlcihDLCAxMjkpOwoJCQlmdW5jdGlvbiBQKGQsIGYpIHsKCQkJCWlmICghdyhkKSB8fCAhZC5oYXNPd25Qcm9wZXJ0eSgicmF3IikpIHRocm93IEVycm9yKCJpbnZhbGlkIHRlbXBsYXRlIHN0cmluZ3MgYXJyYXkiKTsKCQkJCXJldHVybiBnID09PSB2b2lkIDAgPyBmIDogZy5jcmVhdGVIVE1MKGYpOwoJCQl9CgkJCWxldCBWID0gKGQsIGYpID0+IHsKCQkJCWxldCBwID0gZC5sZW5ndGggLSAxLCBtID0gW10sIGgsIGcgPSBmID09PSAyID8gIjxzdmc+IiA6IGYgPT09IDMgPyAiPG1hdGg+IiA6ICIiLCBiID0gRTsKCQkJCWZvciAobGV0IGYgPSAwOyBmIDwgcDsgZisrKSB7CgkJCQkJbGV0IHAgPSBkW2ZdLCBDLCB3LCBUID0gLTEsIFcgPSAwOwoJCQkJCWZvciAoOyBXIDwgcC5sZW5ndGggJiYgKGIubGFzdEluZGV4ID0gVywgdyA9IGIuZXhlYyhwKSwgdyAhPT0gbnVsbCk7KSBXID0gYi5sYXN0SW5kZXgsIGIgPT09IEUgPyB3WzFdID09PSAiIS0tIiA/IGIgPSBEIDogd1sxXSA9PT0gdm9pZCAwID8gd1syXSA9PT0gdm9pZCAwID8gd1szXSAhPT0gdm9pZCAwICYmIChiID0gQSkgOiAoVS50ZXN0KHdbMl0pICYmIChoID0gUmVnRXhwKCI8LyIgKyB3WzJdLCAiZyIpKSwgYiA9IEEpIDogYiA9IE8gOiBiID09PSBBID8gd1swXSA9PT0gIj4iID8gKGIgPSBoID8/IEUsIFQgPSAtMSkgOiB3WzFdID09PSB2b2lkIDAgPyBUID0gLTIgOiAoVCA9IGIubGFzdEluZGV4IC0gd1syXS5sZW5ndGgsIEMgPSB3WzFdLCBiID0gd1szXSA9PT0gdm9pZCAwID8gQSA6IHdbM10gPT09ICJcIiIgPyBGIDogaikgOiBiID09PSBGIHx8IGIgPT09IGogPyBiID0gQSA6IGIgPT09IEQgfHwgYiA9PT0gTyA/IGIgPSBFIDogKGIgPSBBLCBoID0gdm9pZCAwKTsKCQkJCQlsZXQgRyA9IGIgPT09IEEgJiYgZFtmICsgMV0uc3RhcnRzV2l0aCgiLz4iKSA/ICIgIiA6ICIiOwoJCQkJCWcgKz0gYiA9PT0gRSA/IHAgKyB4IDogVCA+PSAwID8gKG0ucHVzaChDKSwgcC5zbGljZSgwLCBUKSArIF8gKyBwLnNsaWNlKFQpICsgdiArIEcpIDogcCArIHYgKyAoVCA9PT0gLTIgPyBmIDogRyk7CgkJCQl9CgkJCQlyZXR1cm4gW1AoZCwgZyArIChkW3BdIHx8ICI8Pz4iKSArIChmID09PSAyID8gIjwvc3ZnPiIgOiBmID09PSAzID8gIjwvbWF0aD4iIDogIiIpKSwgbV07CgkJCX07CgkJCWNsYXNzIE4gewoJCQkJY29uc3RydWN0b3IoeyBzdHJpbmdzOiBkLCBfJGxpdFR5cGUkOiBmIH0sIHApIHsKCQkJCQlsZXQgbTsKCQkJCQl0aGlzLnBhcnRzID0gW107CgkJCQkJbGV0IGcgPSAwLCB4ID0gMCwgQyA9IGQubGVuZ3RoIC0gMSwgdyA9IHRoaXMucGFydHMsIFtULCBFXSA9IFYoZCwgZik7CgkJCQkJaWYgKHRoaXMuZWwgPSBOLmNyZWF0ZUVsZW1lbnQoVCwgcCksIFguY3VycmVudE5vZGUgPSB0aGlzLmVsLmNvbnRlbnQsIGYgPT09IDIgfHwgZiA9PT0gMykgewoJCQkJCQlsZXQgZCA9IHRoaXMuZWwuY29udGVudC5maXJzdENoaWxkOwoJCQkJCQlkLnJlcGxhY2VXaXRoKC4uLmQuY2hpbGROb2Rlcyk7CgkJCQkJfQoJCQkJCWZvciAoOyAobSA9IFgubmV4dE5vZGUoKSkgIT09IG51bGwgJiYgdy5sZW5ndGggPCBDOykgewoJCQkJCQlpZiAobS5ub2RlVHlwZSA9PT0gMSkgewoJCQkJCQkJaWYgKG0uaGFzQXR0cmlidXRlcygpKSBmb3IgKGxldCBkIG9mIG0uZ2V0QXR0cmlidXRlTmFtZXMoKSkgaWYgKGQuZW5kc1dpdGgoXykpIHsKCQkJCQkJCQlsZXQgZiA9IEVbeCsrXSwgcCA9IG0uZ2V0QXR0cmlidXRlKGQpLnNwbGl0KHYpLCBoID0gLyhbLj9AXSk/KC4qKS8uZXhlYyhmKTsKCQkJCQkJCQl3LnB1c2goewoJCQkJCQkJCQl0eXBlOiAxLAoJCQkJCQkJCQlpbmRleDogZywKCQkJCQkJCQkJbmFtZTogaFsyXSwKCQkJCQkJCQkJc3RyaW5nczogcCwKCQkJCQkJCQkJY3RvcjogaFsxXSA9PT0gIi4iID8gSCA6IGhbMV0gPT09ICI/IiA/IEkgOiBoWzFdID09PSAiQCIgPyBMIDogawoJCQkJCQkJCX0pLCBtLnJlbW92ZUF0dHJpYnV0ZShkKTsKCQkJCQkJCX0gZWxzZSBkLnN0YXJ0c1dpdGgodikgJiYgKHcucHVzaCh7CgkJCQkJCQkJdHlwZTogNiwKCQkJCQkJCQlpbmRleDogZwoJCQkJCQkJfSksIG0ucmVtb3ZlQXR0cmlidXRlKGQpKTsKCQkJCQkJCWlmIChVLnRlc3QobS50YWdOYW1lKSkgewoJCQkJCQkJCWxldCBkID0gbS50ZXh0Q29udGVudC5zcGxpdCh2KSwgZiA9IGQubGVuZ3RoIC0gMTsKCQkJCQkJCQlpZiAoZiA+IDApIHsKCQkJCQkJCQkJbS50ZXh0Q29udGVudCA9IGggPyBoLmVtcHR5U2NyaXB0IDogIiI7CgkJCQkJCQkJCWZvciAobGV0IHAgPSAwOyBwIDwgZjsgcCsrKSBtLmFwcGVuZChkW3BdLCBsKCkpLCBYLm5leHROb2RlKCksIHcucHVzaCh7CgkJCQkJCQkJCQl0eXBlOiAyLAoJCQkJCQkJCQkJaW5kZXg6ICsrZwoJCQkJCQkJCQl9KTsKCQkJCQkJCQkJbS5hcHBlbmQoZFtmXSwgbCgpKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0gZWxzZSBpZiAobS5ub2RlVHlwZSA9PT0gOCkgaWYgKG0uZGF0YSA9PT0gYikgdy5wdXNoKHsKCQkJCQkJCXR5cGU6IDIsCgkJCQkJCQlpbmRleDogZwoJCQkJCQl9KTsKCQkJCQkJZWxzZSB7CgkJCQkJCQlsZXQgZCA9IC0xOwoJCQkJCQkJZm9yICg7IChkID0gbS5kYXRhLmluZGV4T2YodiwgZCArIDEpKSAhPT0gLTE7KSB3LnB1c2goewoJCQkJCQkJCXR5cGU6IDcsCgkJCQkJCQkJaW5kZXg6IGcKCQkJCQkJCX0pLCBkICs9IHYubGVuZ3RoIC0gMTsKCQkJCQkJfQoJCQkJCQlnKys7CgkJCQkJfQoJCQkJfQoJCQkJc3RhdGljIGNyZWF0ZUVsZW1lbnQoZCwgZikgewoJCQkJCWxldCBwID0gQy5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpOwoJCQkJCXJldHVybiBwLmlubmVySFRNTCA9IGQsIHA7CgkJCQl9CgkJCX0KCQkJZnVuY3Rpb24gUyhkLCBmLCBwID0gZCwgbSkgewoJCQkJaWYgKGYgPT09IHEpIHJldHVybiBmOwoJCQkJbGV0IGggPSBtID09PSB2b2lkIDAgPyBwLl8kQ2wgOiBwLl8kQ28/LlttXSwgZyA9IGMoZikgPyB2b2lkIDAgOiBmLl8kbGl0RGlyZWN0aXZlJDsKCQkJCXJldHVybiBoPy5jb25zdHJ1Y3RvciAhPT0gZyAmJiAoaD8uXyRBTz8uKCExKSwgZyA9PT0gdm9pZCAwID8gaCA9IHZvaWQgMCA6IChoID0gbmV3IGcoZCksIGguXyRBVChkLCBwLCBtKSksIG0gPT09IHZvaWQgMCA/IHAuXyRDbCA9IGggOiAocC5fJENvID8/PSBbXSlbbV0gPSBoKSwgaCAhPT0gdm9pZCAwICYmIChmID0gUyhkLCBoLl8kQVMoZCwgZi52YWx1ZXMpLCBoLCBtKSksIGY7CgkJCX0KCQkJY2xhc3MgTSB7CgkJCQljb25zdHJ1Y3RvcihkLCBmKSB7CgkJCQkJdGhpcy5fJEFWID0gW10sIHRoaXMuXyRBTiA9IHZvaWQgMCwgdGhpcy5fJEFEID0gZCwgdGhpcy5fJEFNID0gZjsKCQkJCX0KCQkJCWdldCBwYXJlbnROb2RlKCkgewoJCQkJCXJldHVybiB0aGlzLl8kQU0ucGFyZW50Tm9kZTsKCQkJCX0KCQkJCWdldCBfJEFVKCkgewoJCQkJCXJldHVybiB0aGlzLl8kQU0uXyRBVTsKCQkJCX0KCQkJCXUoZCkgewoJCQkJCWxldCB7IGVsOiB7IGNvbnRlbnQ6IGYgfSwgcGFydHM6IHAgfSA9IHRoaXMuXyRBRCwgbSA9IChkPy5jcmVhdGlvblNjb3BlID8/IEMpLmltcG9ydE5vZGUoZiwgITApOwoJCQkJCVguY3VycmVudE5vZGUgPSBtOwoJCQkJCWxldCBoID0gWC5uZXh0Tm9kZSgpLCBnID0gMCwgXyA9IDAsIHYgPSBwWzBdOwoJCQkJCWZvciAoOyB2ICE9PSB2b2lkIDA7KSB7CgkJCQkJCWlmIChnID09PSB2LmluZGV4KSB7CgkJCQkJCQlsZXQgZjsKCQkJCQkJCXYudHlwZSA9PT0gMiA/IGYgPSBuZXcgUihoLCBoLm5leHRTaWJsaW5nLCB0aGlzLCBkKSA6IHYudHlwZSA9PT0gMSA/IGYgPSBuZXcgdi5jdG9yKGgsIHYubmFtZSwgdi5zdHJpbmdzLCB0aGlzLCBkKSA6IHYudHlwZSA9PT0gNiAmJiAoZiA9IG5ldyB6KGgsIHRoaXMsIGQpKSwgdGhpcy5fJEFWLnB1c2goZiksIHYgPSBwWysrX107CgkJCQkJCX0KCQkJCQkJZyAhPT0gdj8uaW5kZXggJiYgKGggPSBYLm5leHROb2RlKCksIGcrKyk7CgkJCQkJfQoJCQkJCXJldHVybiBYLmN1cnJlbnROb2RlID0gQywgbTsKCQkJCX0KCQkJCXAoZCkgewoJCQkJCWxldCBmID0gMDsKCQkJCQlmb3IgKGxldCBwIG9mIHRoaXMuXyRBVikgcCAhPT0gdm9pZCAwICYmIChwLnN0cmluZ3MgPT09IHZvaWQgMCA/IHAuXyRBSShkW2ZdKSA6IChwLl8kQUkoZCwgcCwgZiksIGYgKz0gcC5zdHJpbmdzLmxlbmd0aCAtIDIpKSwgZisrOwoJCQkJfQoJCQl9CgkJCWNsYXNzIFIgewoJCQkJZ2V0IF8kQVUoKSB7CgkJCQkJcmV0dXJuIHRoaXMuXyRBTT8uXyRBVSA/PyB0aGlzLl8kQ3Y7CgkJCQl9CgkJCQljb25zdHJ1Y3RvcihkLCBmLCBwLCBtKSB7CgkJCQkJdGhpcy50eXBlID0gMiwgdGhpcy5fJEFIID0gSiwgdGhpcy5fJEFOID0gdm9pZCAwLCB0aGlzLl8kQUEgPSBkLCB0aGlzLl8kQUIgPSBmLCB0aGlzLl8kQU0gPSBwLCB0aGlzLm9wdGlvbnMgPSBtLCB0aGlzLl8kQ3YgPSBtPy5pc0Nvbm5lY3RlZCA/PyAhMDsKCQkJCX0KCQkJCWdldCBwYXJlbnROb2RlKCkgewoJCQkJCWxldCBkID0gdGhpcy5fJEFBLnBhcmVudE5vZGUsIGYgPSB0aGlzLl8kQU07CgkJCQkJcmV0dXJuIGYgIT09IHZvaWQgMCAmJiBkPy5ub2RlVHlwZSA9PT0gMTEgJiYgKGQgPSBmLnBhcmVudE5vZGUpLCBkOwoJCQkJfQoJCQkJZ2V0IHN0YXJ0Tm9kZSgpIHsKCQkJCQlyZXR1cm4gdGhpcy5fJEFBOwoJCQkJfQoJCQkJZ2V0IGVuZE5vZGUoKSB7CgkJCQkJcmV0dXJuIHRoaXMuXyRBQjsKCQkJCX0KCQkJCV8kQUkoZCwgZiA9IHRoaXMpIHsKCQkJCQlkID0gUyh0aGlzLCBkLCBmKSwgYyhkKSA/IGQgPT09IEogfHwgZCA9PSBudWxsIHx8IGQgPT09ICIiID8gKHRoaXMuXyRBSCAhPT0gSiAmJiB0aGlzLl8kQVIoKSwgdGhpcy5fJEFIID0gSikgOiBkICE9PSB0aGlzLl8kQUggJiYgZCAhPT0gcSAmJiB0aGlzLl8oZCkgOiBkLl8kbGl0VHlwZSQgPT09IHZvaWQgMCA/IGQubm9kZVR5cGUgPT09IHZvaWQgMCA/IHUoZCkgPyB0aGlzLmsoZCkgOiB0aGlzLl8oZCkgOiB0aGlzLlQoZCkgOiB0aGlzLiQoZCk7CgkJCQl9CgkJCQlPKGQpIHsKCQkJCQlyZXR1cm4gdGhpcy5fJEFBLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGQsIHRoaXMuXyRBQik7CgkJCQl9CgkJCQlUKGQpIHsKCQkJCQl0aGlzLl8kQUggIT09IGQgJiYgKHRoaXMuXyRBUigpLCB0aGlzLl8kQUggPSB0aGlzLk8oZCkpOwoJCQkJfQoJCQkJXyhkKSB7CgkJCQkJdGhpcy5fJEFIICE9PSBKICYmIGModGhpcy5fJEFIKSA/IHRoaXMuXyRBQS5uZXh0U2libGluZy5kYXRhID0gZCA6IHRoaXMuVChDLmNyZWF0ZVRleHROb2RlKGQpKSwgdGhpcy5fJEFIID0gZDsKCQkJCX0KCQkJCSQoZCkgewoJCQkJCWxldCB7IHZhbHVlczogZiwgXyRsaXRUeXBlJDogcCB9ID0gZCwgbSA9IHR5cGVvZiBwID09ICJudW1iZXIiID8gdGhpcy5fJEFDKGQpIDogKHAuZWwgPT09IHZvaWQgMCAmJiAocC5lbCA9IE4uY3JlYXRlRWxlbWVudChQKHAuaCwgcC5oWzBdKSwgdGhpcy5vcHRpb25zKSksIHApOwoJCQkJCWlmICh0aGlzLl8kQUg/Ll8kQUQgPT09IG0pIHRoaXMuXyRBSC5wKGYpOwoJCQkJCWVsc2UgewoJCQkJCQlsZXQgZCA9IG5ldyBNKG0sIHRoaXMpLCBwID0gZC51KHRoaXMub3B0aW9ucyk7CgkJCQkJCWQucChmKSwgdGhpcy5UKHApLCB0aGlzLl8kQUggPSBkOwoJCQkJCX0KCQkJCX0KCQkJCV8kQUMoZCkgewoJCQkJCWxldCBmID0gWS5nZXQoZC5zdHJpbmdzKTsKCQkJCQlyZXR1cm4gZiA9PT0gdm9pZCAwICYmIFkuc2V0KGQuc3RyaW5ncywgZiA9IG5ldyBOKGQpKSwgZjsKCQkJCX0KCQkJCWsoZCkgewoJCQkJCXcodGhpcy5fJEFIKSB8fCAodGhpcy5fJEFIID0gW10sIHRoaXMuXyRBUigpKTsKCQkJCQlsZXQgZiA9IHRoaXMuXyRBSCwgcCwgbSA9IDA7CgkJCQkJZm9yIChsZXQgaCBvZiBkKSBtID09PSBmLmxlbmd0aCA/IGYucHVzaChwID0gbmV3IFIodGhpcy5PKGwoKSksIHRoaXMuTyhsKCkpLCB0aGlzLCB0aGlzLm9wdGlvbnMpKSA6IHAgPSBmW21dLCBwLl8kQUkoaCksIG0rKzsKCQkJCQltIDwgZi5sZW5ndGggJiYgKHRoaXMuXyRBUihwICYmIHAuXyRBQi5uZXh0U2libGluZywgbSksIGYubGVuZ3RoID0gbSk7CgkJCQl9CgkJCQlfJEFSKGQgPSB0aGlzLl8kQUEubmV4dFNpYmxpbmcsIGYpIHsKCQkJCQlmb3IgKHRoaXMuXyRBUD8uKCExLCAhMCwgZik7IGQgJiYgZCAhPT0gdGhpcy5fJEFCOykgewoJCQkJCQlsZXQgZiA9IGQubmV4dFNpYmxpbmc7CgkJCQkJCWQucmVtb3ZlKCksIGQgPSBmOwoJCQkJCX0KCQkJCX0KCQkJCXNldENvbm5lY3RlZChkKSB7CgkJCQkJdGhpcy5fJEFNID09PSB2b2lkIDAgJiYgKHRoaXMuXyRDdiA9IGQsIHRoaXMuXyRBUD8uKGQpKTsKCQkJCX0KCQkJfQoJCQljbGFzcyBrIHsKCQkJCWdldCB0YWdOYW1lKCkgewoJCQkJCXJldHVybiB0aGlzLmVsZW1lbnQudGFnTmFtZTsKCQkJCX0KCQkJCWdldCBfJEFVKCkgewoJCQkJCXJldHVybiB0aGlzLl8kQU0uXyRBVTsKCQkJCX0KCQkJCWNvbnN0cnVjdG9yKGQsIGYsIHAsIG0sIGgpIHsKCQkJCQl0aGlzLnR5cGUgPSAxLCB0aGlzLl8kQUggPSBKLCB0aGlzLl8kQU4gPSB2b2lkIDAsIHRoaXMuZWxlbWVudCA9IGQsIHRoaXMubmFtZSA9IGYsIHRoaXMuXyRBTSA9IG0sIHRoaXMub3B0aW9ucyA9IGgsIHAubGVuZ3RoID4gMiB8fCBwWzBdICE9PSAiIiB8fCBwWzFdICE9PSAiIiA/ICh0aGlzLl8kQUggPSBBcnJheShwLmxlbmd0aCAtIDEpLmZpbGwobmV3IFN0cmluZygpKSwgdGhpcy5zdHJpbmdzID0gcCkgOiB0aGlzLl8kQUggPSBKOwoJCQkJfQoJCQkJXyRBSShkLCBmID0gdGhpcywgcCwgbSkgewoJCQkJCWxldCBoID0gdGhpcy5zdHJpbmdzLCBnID0gITE7CgkJCQkJaWYgKGggPT09IHZvaWQgMCkgZCA9IFModGhpcywgZCwgZiwgMCksIGcgPSAhYyhkKSB8fCBkICE9PSB0aGlzLl8kQUggJiYgZCAhPT0gcSwgZyAmJiAodGhpcy5fJEFIID0gZCk7CgkJCQkJZWxzZSB7CgkJCQkJCWxldCBtID0gZCwgXywgdjsKCQkJCQkJZm9yIChkID0gaFswXSwgXyA9IDA7IF8gPCBoLmxlbmd0aCAtIDE7IF8rKykgdiA9IFModGhpcywgbVtwICsgX10sIGYsIF8pLCB2ID09PSBxICYmICh2ID0gdGhpcy5fJEFIW19dKSwgZyB8fD0gIWModikgfHwgdiAhPT0gdGhpcy5fJEFIW19dLCB2ID09PSBKID8gZCA9IEogOiBkICE9PSBKICYmIChkICs9ICh2ID8/ICIiKSArIGhbXyArIDFdKSwgdGhpcy5fJEFIW19dID0gdjsKCQkJCQl9CgkJCQkJZyAmJiAhbSAmJiB0aGlzLmooZCk7CgkJCQl9CgkJCQlqKGQpIHsKCQkJCQlkID09PSBKID8gdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSh0aGlzLm5hbWUpIDogdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSh0aGlzLm5hbWUsIGQgPz8gIiIpOwoJCQkJfQoJCQl9CgkJCWNsYXNzIEggZXh0ZW5kcyBrIHsKCQkJCWNvbnN0cnVjdG9yKCkgewoJCQkJCXN1cGVyKC4uLmFyZ3VtZW50cyksIHRoaXMudHlwZSA9IDM7CgkJCQl9CgkJCQlqKGQpIHsKCQkJCQl0aGlzLmVsZW1lbnRbdGhpcy5uYW1lXSA9IGQgPT09IEogPyB2b2lkIDAgOiBkOwoJCQkJfQoJCQl9CgkJCWNsYXNzIEkgZXh0ZW5kcyBrIHsKCQkJCWNvbnN0cnVjdG9yKCkgewoJCQkJCXN1cGVyKC4uLmFyZ3VtZW50cyksIHRoaXMudHlwZSA9IDQ7CgkJCQl9CgkJCQlqKGQpIHsKCQkJCQl0aGlzLmVsZW1lbnQudG9nZ2xlQXR0cmlidXRlKHRoaXMubmFtZSwgISFkICYmIGQgIT09IEopOwoJCQkJfQoJCQl9CgkJCWNsYXNzIEwgZXh0ZW5kcyBrIHsKCQkJCWNvbnN0cnVjdG9yKGQsIGYsIHAsIG0sIGgpIHsKCQkJCQlzdXBlcihkLCBmLCBwLCBtLCBoKSwgdGhpcy50eXBlID0gNTsKCQkJCX0KCQkJCV8kQUkoZCwgZiA9IHRoaXMpIHsKCQkJCQlpZiAoKGQgPSBTKHRoaXMsIGQsIGYsIDApID8/IEopID09PSBxKSByZXR1cm47CgkJCQkJbGV0IHAgPSB0aGlzLl8kQUgsIG0gPSBkID09PSBKICYmIHAgIT09IEogfHwgZC5jYXB0dXJlICE9PSBwLmNhcHR1cmUgfHwgZC5vbmNlICE9PSBwLm9uY2UgfHwgZC5wYXNzaXZlICE9PSBwLnBhc3NpdmUsIGggPSBkICE9PSBKICYmIChwID09PSBKIHx8IG0pOwoJCQkJCW0gJiYgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5uYW1lLCB0aGlzLCBwKSwgaCAmJiB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLm5hbWUsIHRoaXMsIGQpLCB0aGlzLl8kQUggPSBkOwoJCQkJfQoJCQkJaGFuZGxlRXZlbnQoZCkgewoJCQkJCXR5cGVvZiB0aGlzLl8kQUggPT0gImZ1bmN0aW9uIiA/IHRoaXMuXyRBSC5jYWxsKHRoaXMub3B0aW9ucz8uaG9zdCA/PyB0aGlzLmVsZW1lbnQsIGQpIDogdGhpcy5fJEFILmhhbmRsZUV2ZW50KGQpOwoJCQkJfQoJCQl9CgkJCWNsYXNzIHogewoJCQkJY29uc3RydWN0b3IoZCwgZiwgcCkgewoJCQkJCXRoaXMuZWxlbWVudCA9IGQsIHRoaXMudHlwZSA9IDYsIHRoaXMuXyRBTiA9IHZvaWQgMCwgdGhpcy5fJEFNID0gZiwgdGhpcy5vcHRpb25zID0gcDsKCQkJCX0KCQkJCWdldCBfJEFVKCkgewoJCQkJCXJldHVybiB0aGlzLl8kQU0uXyRBVTsKCQkJCX0KCQkJCV8kQUkoZCkgewoJCQkJCVModGhpcywgZCk7CgkJCQl9CgkJCX0KCQkJbGV0IFogPSB7CgkJCQlNOiBfLAoJCQkJUDogdiwKCQkJCUE6IGIsCgkJCQlDOiAxLAoJCQkJTDogViwKCQkJCVI6IE0sCgkJCQlEOiB1LAoJCQkJVjogUywKCQkJCUk6IFIsCgkJCQlIOiBrLAoJCQkJTjogSSwKCQkJCVU6IEwsCgkJCQlCOiBILAoJCQkJRjogegoJCQl9LCBRID0gbS5saXRIdG1sUG9seWZpbGxTdXBwb3J0OwoJCQlRPy4oTiwgUiksIChtLmxpdEh0bWxWZXJzaW9ucyA/Pz0gW10pLnB1c2goIjMuMy4wIik7CgkJCWxldCBCID0gKGQsIGYsIHApID0+IHsKCQkJCWxldCBtID0gcD8ucmVuZGVyQmVmb3JlID8/IGYsIGggPSBtLl8kbGl0UGFydCQ7CgkJCQlpZiAoaCA9PT0gdm9pZCAwKSB7CgkJCQkJbGV0IGQgPSBwPy5yZW5kZXJCZWZvcmUgPz8gbnVsbDsKCQkJCQltLl8kbGl0UGFydCQgPSBoID0gbmV3IFIoZi5pbnNlcnRCZWZvcmUobCgpLCBkKSwgZCwgdm9pZCAwLCBwID8/IHt9KTsKCQkJCX0KCQkJCXJldHVybiBoLl8kQUkoZCksIGg7CgkJCX07CgkJfSwKCQkiLi9ub2RlX21vZHVsZXMvcmVxdWVzdGlkbGVjYWxsYmFjay1wb2x5ZmlsbC9pbmRleC5qcyI6ICgpID0+IHsKCQkJd2luZG93LnJlcXVlc3RJZGxlQ2FsbGJhY2sgPSB3aW5kb3cucmVxdWVzdElkbGVDYWxsYmFjayB8fCBmdW5jdGlvbihkKSB7CgkJCQl2YXIgZiA9IERhdGUubm93KCk7CgkJCQlyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQlkKHsKCQkJCQkJZGlkVGltZW91dDogITEsCgkJCQkJCXRpbWVSZW1haW5pbmc6IGZ1bmN0aW9uKCkgewoJCQkJCQkJcmV0dXJuIE1hdGgubWF4KDAsIDUwIC0gKERhdGUubm93KCkgLSBmKSk7CgkJCQkJCX0KCQkJCQl9KTsKCQkJCX0sIDEpOwoJCQl9LCB3aW5kb3cuY2FuY2VsSWRsZUNhbGxiYWNrID0gd2luZG93LmNhbmNlbElkbGVDYWxsYmFjayB8fCBmdW5jdGlvbihkKSB7CgkJCQljbGVhclRpbWVvdXQoZCk7CgkJCX07CgkJfSwKCQkiLi9zcmMvYXVkaW9Eb3dubG9hZGVyL2lmcmFtZS50cyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5hKGQsIGFzeW5jIChkLCBtKSA9PiB7CgkJCQl0cnkgewoJCQkJCXAuZChmLCB7IHE6ICgpID0+IGluaXRBdWRpb0Rvd25sb2FkZXJJZnJhbWUgfSk7CgkJCQkJdmFyIGggPSBwKCIuL3NyYy91dGlscy9kZWJ1Zy50cyIpLCBnID0gcCgiLi9zcmMvdXRpbHMvaWZyYW1lQ29ubmVjdG9yLnRzIiksIF8gPSBwKCIuL3NyYy9hdWRpb0Rvd25sb2FkZXIvc2hhcmVkLnRzIiksIHYgPSBwKCIuL3NyYy9hdWRpb0Rvd25sb2FkZXIvc3RyYXRlZ2llcy93ZWJBcGlHZXRBbGxHZW5lcmF0aW5nVXJsc0RhdGEvaWZyYW1lLnRzIiksIGIgPSBkKFtnLCB2XSk7CgkJCQkJW2csIHZdID0gYi50aGVuID8gKGF3YWl0IGIpKCkgOiBiOwoJCQkJCWxldCBoYW5kbGVJZnJhbWVNZXNzYWdlID0gYXN5bmMgKHsgZGF0YTogZCB9KSA9PiB7CgkJCQkJCWlmIChkPy5tZXNzYWdlRGlyZWN0aW9uID09PSAicmVxdWVzdCIpIHRyeSB7CgkJCQkJCQlzd2l0Y2ggKGQubWVzc2FnZVR5cGUpIHsKCQkJCQkJCQljYXNlICJnZXQtZG93bmxvYWQtYXVkaW8tZGF0YS1pbi1pZnJhbWUiOgoJCQkJCQkJCQlhd2FpdCAoMCwgdi5IKShkLnBheWxvYWQpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQlkZWZhdWx0OiBoLkEubG9nKGBOT1QgSU1QTEVNRU5URUQ6ICR7ZC5tZXNzYWdlVHlwZX1gLCBkLnBheWxvYWQpOwoJCQkJCQkJfQoJCQkJCQl9IGNhdGNoIChkKSB7CgkJCQkJCQljb25zb2xlLmVycm9yKCJbVk9UXSBNYWluIHdvcmxkIGJyaWRnZSIsIHsgZXJyb3I6IGQgfSk7CgkJCQkJCX0KCQkJCQl9OwoJCQkJCWZ1bmN0aW9uIGluaXRBdWRpb0Rvd25sb2FkZXJJZnJhbWUoKSB7CgkJCQkJCXJldHVybiAoMCwgZy5JbykoXy5ENSwgaGFuZGxlSWZyYW1lTWVzc2FnZSk7CgkJCQkJfQoJCQkJCW0oKTsKCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQltKGQpOwoJCQkJfQoJCQl9KTsKCQl9LAoJCSIuL3NyYy9hdWRpb0Rvd25sb2FkZXIvaW5kZXgudHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgeyBJOiAoKSA9PiBBdWRpb0Rvd25sb2FkZXIgfSk7CgkJCQkJdmFyIGggPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2NvcmUvZGlzdC90eXBlcy95YW5kZXguanMiKSwgZyA9IHAoIi4vc3JjL2NvcmUvZXZlbnRJbXBsLnRzIiksIF8gPSBwKCIuL3NyYy91dGlscy9kZWJ1Zy50cyIpLCB2ID0gcCgiLi9zcmMvYXVkaW9Eb3dubG9hZGVyL3N0cmF0ZWdpZXMvaW5kZXgudHMiKSwgYiA9IHAoIi4vc3JjL2F1ZGlvRG93bmxvYWRlci9zdHJhdGVnaWVzL3V0aWxzLnRzIiksIHggPSBkKFt2LCBiXSk7CgkJCQkJW3YsIGJdID0geC50aGVuID8gKGF3YWl0IHgpKCkgOiB4OwoJCQkJCWFzeW5jIGZ1bmN0aW9uIGhhbmRsZUNvbW1vbkF1ZGlvRG93bmxvYWRSZXF1ZXN0KHsgYXVkaW9Eb3dubG9hZGVyOiBkLCB0cmFuc2xhdGlvbklkOiBmLCB2aWRlb0lkOiBwLCBzaWduYWw6IG0gfSkgewoJCQkJCQlsZXQgaCA9IGF3YWl0IHYuV1tkLnN0cmF0ZWd5XSh7CgkJCQkJCQl2aWRlb0lkOiBwLAoJCQkJCQkJcmV0dXJuQnlQYXJ0czogITAsCgkJCQkJCQlzaWduYWw6IG0KCQkJCQkJfSk7CgkJCQkJCWlmICghaCkgdGhyb3cgRXJyb3IoIkF1ZGlvIGRvd25sb2FkZXIuIENhbiBub3QgZ2V0IGF1ZGlvIGRhdGEiKTsKCQkJCQkJXy5BLmxvZygiQXVkaW8gZG93bmxvYWRlci4gVXJsIGZvdW5kIiwgeyBhdWRpb0Rvd25sb2FkVHlwZTogZC5zdHJhdGVneSB9KTsKCQkJCQkJbGV0IHsgZ2V0TWVkaWFCdWZmZXJzOiBnLCBtZWRpYVBhcnRzTGVuZ3RoOiBiLCBmaWxlSWQ6IHggfSA9IGg7CgkJCQkJCWlmIChiIDwgMikgewoJCQkJCQkJbGV0IHsgdmFsdWU6IG0gfSA9IGF3YWl0IGcoKS5uZXh0KCk7CgkJCQkJCQlpZiAoIW0pIHRocm93IEVycm9yKCJBdWRpbyBkb3dubG9hZGVyLiBFbXB0eSBhdWRpbyIpOwoJCQkJCQkJZC5vbkRvd25sb2FkZWRBdWRpby5kaXNwYXRjaChmLCB7CgkJCQkJCQkJdmlkZW9JZDogcCwKCQkJCQkJCQlmaWxlSWQ6IHgsCgkJCQkJCQkJYXVkaW9EYXRhOiBtCgkJCQkJCQl9KTsKCQkJCQkJCXJldHVybjsKCQkJCQkJfQoJCQkJCQlsZXQgQyA9IDA7CgkJCQkJCWZvciBhd2FpdCAobGV0IG0gb2YgZygpKSB7CgkJCQkJCQlpZiAoIW0pIHRocm93IEVycm9yKCJBdWRpbyBkb3dubG9hZGVyLiBFbXB0eSBhdWRpbyIpOwoJCQkJCQkJZC5vbkRvd25sb2FkZWRQYXJ0aWFsQXVkaW8uZGlzcGF0Y2goZiwgewoJCQkJCQkJCXZpZGVvSWQ6IHAsCgkJCQkJCQkJZmlsZUlkOiB4LAoJCQkJCQkJCWF1ZGlvRGF0YTogbSwKCQkJCQkJCQl2ZXJzaW9uOiAxLAoJCQkJCQkJCWluZGV4OiBDLAoJCQkJCQkJCWFtb3VudDogYgoJCQkJCQkJfSksIEMrKzsKCQkJCQkJfQoJCQkJCX0KCQkJCQlhc3luYyBmdW5jdGlvbiBtYWluV29ybGRNZXNzYWdlSGFuZGxlcih7IGRhdGE6IGQgfSkgewoJCQkJCQl0cnkgewoJCQkJCQkJaWYgKGQ/Lm1lc3NhZ2VEaXJlY3Rpb24gIT09ICJyZXF1ZXN0IikgcmV0dXJuOwoJCQkJCQkJc3dpdGNoIChkLm1lc3NhZ2VUeXBlKSB7CgkJCQkJCQkJY2FzZSAiZ2V0LWRvd25sb2FkLWF1ZGlvLWRhdGEtaW4tbWFpbi13b3JsZCI6CgkJCQkJCQkJCWF3YWl0ICgwLCBiLmh5KSgiZ2V0LWRvd25sb2FkLWF1ZGlvLWRhdGEtaW4taWZyYW1lIiwgZCk7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJfQoJCQkJCQl9IGNhdGNoIChkKSB7CgkJCQkJCQljb25zb2xlLmVycm9yKCJbVk9UXSBNYWluIHdvcmxkIGJyaWRnZSIsIHsgZXJyb3I6IGQgfSk7CgkJCQkJCX0KCQkJCQl9CgkJCQkJY2xhc3MgQXVkaW9Eb3dubG9hZGVyIHsKCQkJCQkJb25Eb3dubG9hZGVkQXVkaW8gPSBuZXcgZy5aKCk7CgkJCQkJCW9uRG93bmxvYWRlZFBhcnRpYWxBdWRpbyA9IG5ldyBnLlooKTsKCQkJCQkJb25Eb3dubG9hZEF1ZGlvRXJyb3IgPSBuZXcgZy5aKCk7CgkJCQkJCXN0cmF0ZWd5OwoJCQkJCQljb25zdHJ1Y3RvcihkID0gaC5KLldFQl9BUElfR0VUX0FMTF9HRU5FUkFUSU5HX1VSTFNfREFUQV9GUk9NX0lGUkFNRSkgewoJCQkJCQkJdGhpcy5zdHJhdGVneSA9IGQsIF8uQS5sb2coIkF1ZGlvIGRvd25sb2FkZXIgY3JlYXRlZCIsIHsgc3RyYXRlZ3k6IGQgfSk7CgkJCQkJCX0KCQkJCQkJYXN5bmMgcnVuQXVkaW9Eb3dubG9hZChkLCBmLCBwKSB7CgkJCQkJCQl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIG1haW5Xb3JsZE1lc3NhZ2VIYW5kbGVyKTsKCQkJCQkJCXRyeSB7CgkJCQkJCQkJYXdhaXQgaGFuZGxlQ29tbW9uQXVkaW9Eb3dubG9hZFJlcXVlc3QoewoJCQkJCQkJCQlhdWRpb0Rvd25sb2FkZXI6IHRoaXMsCgkJCQkJCQkJCXRyYW5zbGF0aW9uSWQ6IGYsCgkJCQkJCQkJCXZpZGVvSWQ6IGQsCgkJCQkJCQkJCXNpZ25hbDogcAoJCQkJCQkJCX0pLCBfLkEubG9nKCJBdWRpbyBkb3dubG9hZGVyLiBBdWRpbyBkb3dubG9hZCBmaW5pc2hlZCIsIHsgdmlkZW9JZDogZCB9KTsKCQkJCQkJCX0gY2F0Y2ggKGYpIHsKCQkJCQkJCQljb25zb2xlLmVycm9yKCJBdWRpbyBkb3dubG9hZGVyLiBGYWlsZWQgdG8gZG93bmxvYWQgYXVkaW8iLCBmKSwgdGhpcy5vbkRvd25sb2FkQXVkaW9FcnJvci5kaXNwYXRjaChkKTsKCQkJCQkJCX0KCQkJCQkJCXdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgbWFpbldvcmxkTWVzc2FnZUhhbmRsZXIpOwoJCQkJCQl9CgkJCQkJCWFkZEV2ZW50TGlzdGVuZXIoZCwgZikgewoJCQkJCQkJc3dpdGNoIChkKSB7CgkJCQkJCQkJY2FzZSAiZG93bmxvYWRlZEF1ZGlvIjoKCQkJCQkJCQkJdGhpcy5vbkRvd25sb2FkZWRBdWRpby5hZGRMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAiZG93bmxvYWRlZFBhcnRpYWxBdWRpbyI6CgkJCQkJCQkJCXRoaXMub25Eb3dubG9hZGVkUGFydGlhbEF1ZGlvLmFkZExpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJkb3dubG9hZEF1ZGlvRXJyb3IiOgoJCQkJCQkJCQl0aGlzLm9uRG93bmxvYWRBdWRpb0Vycm9yLmFkZExpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCX0KCQkJCQkJCXJldHVybiB0aGlzOwoJCQkJCQl9CgkJCQkJCXJlbW92ZUV2ZW50TGlzdGVuZXIoZCwgZikgewoJCQkJCQkJc3dpdGNoIChkKSB7CgkJCQkJCQkJY2FzZSAiZG93bmxvYWRlZEF1ZGlvIjoKCQkJCQkJCQkJdGhpcy5vbkRvd25sb2FkZWRBdWRpby5yZW1vdmVMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAiZG93bmxvYWRlZFBhcnRpYWxBdWRpbyI6CgkJCQkJCQkJCXRoaXMub25Eb3dubG9hZGVkUGFydGlhbEF1ZGlvLnJlbW92ZUxpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJkb3dubG9hZEF1ZGlvRXJyb3IiOgoJCQkJCQkJCQl0aGlzLm9uRG93bmxvYWRBdWRpb0Vycm9yLnJlbW92ZUxpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCX0KCQkJCQkJCXJldHVybiB0aGlzOwoJCQkJCQl9CgkJCQkJfQoJCQkJCW0oKTsKCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQltKGQpOwoJCQkJfQoJCQl9KTsKCQl9LAoJCSIuL3NyYy9hdWRpb0Rvd25sb2FkZXIvc2hhcmVkLnRzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmQoZiwgewoJCQkJQWo6ICgpID0+IHYsCgkJCQlENTogKCkgPT4gZywKCQkJCVJaOiAoKSA9PiBkZXNlcmlhbGl6ZVJlcXVlc3RJbml0LAoJCQkJU1o6ICgpID0+IHNlcmlhbGl6ZVJlc3BvbnNlLAoJCQkJY1A6ICgpID0+IHcsCgkJCQlkczogKCkgPT4gQywKCQkJCWtWOiAoKSA9PiBiLAoJCQkJb3Y6ICgpID0+IF8sCgkJCQlwcjogKCkgPT4gaCwKCQkJCXJoOiAoKSA9PiBnZXRSZXF1ZXN0VXJsLAoJCQkJc1U6ICgpID0+IHgsCgkJCQl5QTogKCkgPT4gc2VyaWFsaXplUmVxdWVzdEluaXQKCQkJfSk7CgkJCXZhciBtID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9zaGFyZWQvZGlzdC9pbmRleC5qcyIpOwoJCQlsZXQgaCA9ICJ2b3RfaWZyYW1lX3BsYXllciIsIGcgPSAic2VydmljZSIsIF8gPSAid3d3LnlvdXR1YmUuY29tIiwgdiA9IG0uJFcubWluQ2h1bmtTaXplLCBiID0gLjksIHggPSBbCgkJCQk2ZTQsCgkJCQk4ZTQsCgkJCQkxNWU0LAoJCQkJMzNlNCwKCQkJCTQ2ZTQKCQkJXSwgQyA9IDE1ZTMsIHcgPSAuOSwgZ2V0UmVxdWVzdFVybCA9IChkKSA9PiB0eXBlb2YgZCA9PSAic3RyaW5nIiA/IGQgOiBkLnVybDsKCQkJZnVuY3Rpb24gc2VyaWFsaXplUmVxdWVzdEluaXQoZCkgewoJCQkJbGV0IGYgPSBuZXcgVWludDhBcnJheShbMTIwLCAwXSk7CgkJCQlpZiAodHlwZW9mIGQgPT0gInN0cmluZyIpIHJldHVybiB7CgkJCQkJYm9keTogZiwKCQkJCQljYWNoZTogIm5vLXN0b3JlIiwKCQkJCQljcmVkZW50aWFsczogImluY2x1ZGUiLAoJCQkJCW1ldGhvZDogIlBPU1QiCgkJCQl9OwoJCQkJbGV0IHsgaGVhZGVyczogcCwgY2FjaGU6IG0sIGNyZWRlbnRpYWxzOiBoLCBpbnRlZ3JpdHk6IGcsIGtlZXBhbGl2ZTogXywgbWV0aG9kOiB2LCBtb2RlOiBiLCByZWRpcmVjdDogeCwgcmVmZXJyZXI6IEMsIHJlZmVycmVyUG9saWN5OiB3IH0gPSBkLCBUID0gWy4uLnAuZW50cmllcygpXTsKCQkJCXJldHVybiB7CgkJCQkJYm9keTogZiwKCQkJCQljYWNoZTogbSwKCQkJCQljcmVkZW50aWFsczogaCwKCQkJCQloZWFkZXJzRW50cmllczogVCwKCQkJCQlpbnRlZ3JpdHk6IGcsCgkJCQkJa2VlcGFsaXZlOiBfLAoJCQkJCW1ldGhvZDogdiwKCQkJCQltb2RlOiBiLAoJCQkJCXJlZGlyZWN0OiB4LAoJCQkJCXJlZmVycmVyOiBDLAoJCQkJCXJlZmVycmVyUG9saWN5OiB3CgkJCQl9OwoJCQl9CgkJCWZ1bmN0aW9uIGRlc2VyaWFsaXplUmVxdWVzdEluaXQoZCkgewoJCQkJbGV0IHsgaGVhZGVyc0VudHJpZXM6IGYsLi4ucCB9ID0gZCwgbSA9IG5ldyBIZWFkZXJzKGYpOwoJCQkJcmV0dXJuIHsKCQkJCQkuLi5wLAoJCQkJCWhlYWRlcnM6IG0KCQkJCX07CgkJCX0KCQkJZnVuY3Rpb24gc2VyaWFsaXplUmVzcG9uc2UoZCkgewoJCQkJbGV0IHsgb2s6IGYsIHJlZGlyZWN0ZWQ6IHAsIHN0YXR1czogbSwgc3RhdHVzVGV4dDogaCwgdHlwZTogZywgdXJsOiBfIH0gPSBkOwoJCQkJcmV0dXJuIHsKCQkJCQlvazogZiwKCQkJCQlyZWRpcmVjdGVkOiBwLAoJCQkJCXN0YXR1czogbSwKCQkJCQlzdGF0dXNUZXh0OiBoLAoJCQkJCXR5cGU6IGcsCgkJCQkJdXJsOiBfCgkJCQl9OwoJCQl9CgkJfSwKCQkiLi9zcmMvYXVkaW9Eb3dubG9hZGVyL3N0cmF0ZWdpZXMvaW5kZXgudHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgeyBXOiAoKSA9PiB2IH0pOwoJCQkJCXZhciBoID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9jb3JlL2Rpc3QvdHlwZXMveWFuZGV4LmpzIiksIGcgPSBwKCIuL3NyYy9hdWRpb0Rvd25sb2FkZXIvc3RyYXRlZ2llcy93ZWJBcGlHZXRBbGxHZW5lcmF0aW5nVXJsc0RhdGEvaW5kZXgudHMiKSwgXyA9IGQoW2ddKTsKCQkJCQlnID0gKF8udGhlbiA/IChhd2FpdCBfKSgpIDogXylbMF07CgkJCQkJbGV0IHYgPSB7IFtoLkouV0VCX0FQSV9HRVRfQUxMX0dFTkVSQVRJTkdfVVJMU19EQVRBX0ZST01fSUZSQU1FXTogZy4kIH07CgkJCQkJbSgpOwoJCQkJfSBjYXRjaCAoZCkgewoJCQkJCW0oZCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJIi4vc3JjL2F1ZGlvRG93bmxvYWRlci9zdHJhdGVnaWVzL3V0aWxzLnRzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmEoZCwgYXN5bmMgKGQsIG0pID0+IHsKCQkJCXRyeSB7CgkJCQkJcC5kKGYsIHsKCQkJCQkJTG06ICgpID0+IGdldENodW5rUmFuZ2VzRnJvbUFkYXB0aXZlRm9ybWF0LAoJCQkJCQliQjogKCkgPT4gZ2V0Q2h1bmtSYW5nZXNQYXJ0c0Zyb21BZGFwdGl2ZUZvcm1hdCwKCQkJCQkJaHk6ICgpID0+IHNlbmRSZXF1ZXN0VG9JZnJhbWUsCgkJCQkJCWl6OiAoKSA9PiBtZXJnZUJ1ZmZlcnMsCgkJCQkJCXFrOiAoKSA9PiBtYWtlRmlsZUlkCgkJCQkJfSk7CgkJCQkJdmFyIGggPSBwKCIuL3NyYy91dGlscy9pZnJhbWVDb25uZWN0b3IudHMiKSwgZyA9IHAoIi4vc3JjL2F1ZGlvRG93bmxvYWRlci9zaGFyZWQudHMiKSwgXyA9IGQoW2hdKTsKCQkJCQloID0gKF8udGhlbiA/IChhd2FpdCBfKSgpIDogXylbMF07CgkJCQkJbGV0IHYgPSBudWxsOwoJCQkJCWZ1bmN0aW9uIGdldENodW5rUmFuZ2VzUGFydHNGcm9tQ29udGVudExlbmd0aChkKSB7CgkJCQkJCWlmIChkIDwgMSkgdGhyb3cgRXJyb3IoIkF1ZGlvIGRvd25sb2FkZXIuIFdFQiBBUEkuIGNvbnRlbnRMZW5ndGggbXVzdCBiZSBhdCBsZWFzdCAxIik7CgkJCQkJCWxldCBmID0gTWF0aC5yb3VuZChkICogZy5rViksIHAgPSBbXSwgbSA9IFtdLCBoID0gMCwgXyA9IDAsIHYgPSAwLCBiID0gTWF0aC5taW4oZy5zVVtfXSwgZCk7CgkJCQkJCWZvciAoOyBiIDwgZDspIHsKCQkJCQkJCWxldCBkID0gYiA8IGY7CgkJCQkJCQltLnB1c2goewoJCQkJCQkJCXN0YXJ0OiB2LAoJCQkJCQkJCWVuZDogYiwKCQkJCQkJCQltdXN0RXhpc3Q6IGQKCQkJCQkJCX0pLCBoICs9IGIgLSB2LCBoID49IGcuQWogJiYgKHAucHVzaChtKSwgbSA9IFtdLCBoID0gMCksIF8gPCBnLnNVLmxlbmd0aCAtIDEgJiYgXysrLCB2ID0gYiArIDEsIGIgKz0gZy5zVVtfXTsKCQkJCQkJfQoJCQkJCQlyZXR1cm4gYiA9IGQsIG0ucHVzaCh7CgkJCQkJCQlzdGFydDogdiwKCQkJCQkJCWVuZDogYiwKCQkJCQkJCW11c3RFeGlzdDogITEKCQkJCQkJfSksIHAucHVzaChtKSwgcDsKCQkJCQl9CgkJCQkJZnVuY3Rpb24gcGFyc2VDb250ZW50TGVuZ3RoKHsgY29udGVudExlbmd0aDogZCB9KSB7CgkJCQkJCWlmICh0eXBlb2YgZCAhPSAic3RyaW5nIikgdGhyb3cgRXJyb3IoYEF1ZGlvIGRvd25sb2FkZXIuIFdFQiBBUEkuIENvbnRlbnQgbGVuZ3RoICgke2R9KSBpcyBub3QgYSBzdHJpbmdgKTsKCQkJCQkJbGV0IGYgPSBOdW1iZXIucGFyc2VJbnQoZCk7CgkJCQkJCWlmICghTnVtYmVyLmlzRmluaXRlKGYpKSB0aHJvdyBFcnJvcihgQXVkaW8gZG93bmxvYWRlci4gV0VCIEFQSS4gUGFyc2VkIGNvbnRlbnQgbGVuZ3RoIGlzIG5vdCBmaW5pdGUgKCR7Zn0pYCk7CgkJCQkJCXJldHVybiBmOwoJCQkJCX0KCQkJCQlmdW5jdGlvbiBnZXRDaHVua1Jhbmdlc1BhcnRzRnJvbUFkYXB0aXZlRm9ybWF0KGQpIHsKCQkJCQkJbGV0IGYgPSBwYXJzZUNvbnRlbnRMZW5ndGgoZCksIHAgPSBnZXRDaHVua1Jhbmdlc1BhcnRzRnJvbUNvbnRlbnRMZW5ndGgoZik7CgkJCQkJCWlmICghcC5sZW5ndGgpIHRocm93IEVycm9yKCJBdWRpbyBkb3dubG9hZGVyLiBXRUIgQVBJLiBObyBjaHVuayBwYXJ0cyBnZW5lcmF0ZWQiKTsKCQkJCQkJcmV0dXJuIHA7CgkJCQkJfQoJCQkJCWZ1bmN0aW9uIGdldENodW5rUmFuZ2VzRnJvbUNvbnRlbnRMZW5ndGgoZCkgewoJCQkJCQlpZiAoZCA8IDEpIHRocm93IEVycm9yKCJBdWRpbyBkb3dubG9hZGVyLiBXRUIgQVBJLiBjb250ZW50TGVuZ3RoIGNhbm5vdCBiZSBsZXNzIHRoYW4gMSIpOwoJCQkJCQlsZXQgZiA9IE1hdGgucm91bmQoZCAqIGcua1YpLCBwID0gW10sIG0gPSAwLCBoID0gMCwgXyA9IE1hdGgubWluKGcuc1VbbV0sIGQpOwoJCQkJCQlmb3IgKDsgXyA8IGQ7KSB7CgkJCQkJCQlsZXQgZCA9IF8gPCBmOwoJCQkJCQkJcC5wdXNoKHsKCQkJCQkJCQlzdGFydDogaCwKCQkJCQkJCQllbmQ6IF8sCgkJCQkJCQkJbXVzdEV4aXN0OiBkCgkJCQkJCQl9KSwgbSAhPT0gZy5zVS5sZW5ndGggLSAxICYmIG0rKywgaCA9IF8gKyAxLCBfICs9IGcuc1VbbV07CgkJCQkJCX0KCQkJCQkJcmV0dXJuIHAucHVzaCh7CgkJCQkJCQlzdGFydDogaCwKCQkJCQkJCWVuZDogZCwKCQkJCQkJCW11c3RFeGlzdDogITEKCQkJCQkJfSksIHA7CgkJCQkJfQoJCQkJCWZ1bmN0aW9uIGdldENodW5rUmFuZ2VzRnJvbUFkYXB0aXZlRm9ybWF0KGQpIHsKCQkJCQkJbGV0IGYgPSBwYXJzZUNvbnRlbnRMZW5ndGgoZCksIHAgPSBnZXRDaHVua1Jhbmdlc0Zyb21Db250ZW50TGVuZ3RoKGYpOwoJCQkJCQlpZiAoIXAubGVuZ3RoKSB0aHJvdyBFcnJvcigiQXVkaW8gZG93bmxvYWRlci4gV0VCIEFQSS4gRW1wdHkgY2h1bmsgcmFuZ2VzIik7CgkJCQkJCXJldHVybiBwOwoJCQkJCX0KCQkJCQlmdW5jdGlvbiBtZXJnZUJ1ZmZlcnMoZCkgewoJCQkJCQlsZXQgZiA9IGQucmVkdWNlKChkLCBmKSA9PiBkICsgZi5ieXRlTGVuZ3RoLCAwKSwgcCA9IG5ldyBVaW50OEFycmF5KGYpLCBtID0gMDsKCQkJCQkJZm9yIChsZXQgZiBvZiBkKSBwLnNldChuZXcgVWludDhBcnJheShmKSwgbSksIG0gKz0gZi5ieXRlTGVuZ3RoOwoJCQkJCQlyZXR1cm4gcDsKCQkJCQl9CgkJCQkJYXN5bmMgZnVuY3Rpb24gc2VuZFJlcXVlc3RUb0lmcmFtZShkLCBmKSB7CgkJCQkJCWxldCB7IHZpZGVvSWQ6IHAgfSA9IGYucGF5bG9hZCwgbSA9IGBodHRwczovLyR7Zy5vdn0vZW1iZWQvJHtwfT9hdXRvcGxheT0wJm11dGU9MWA7CgkJCQkJCXRyeSB7CgkJCQkJCQlsZXQgcCA9IGF3YWl0ICgwLCBoLklBKSh2LCBtLCBnLnByLCBnLkQ1KTsKCQkJCQkJCWlmICghKDAsIGgueUIpKGcucHIpKSB0aHJvdyBFcnJvcigiQXVkaW8gZG93bmxvYWRlci4gV0VCIEFQSS4gU2VydmljZSBpZnJhbWUgZGVsZXRlZCIpOwoJCQkJCQkJcC5jb250ZW50V2luZG93Py5wb3N0TWVzc2FnZSh7CgkJCQkJCQkJbWVzc2FnZUlkOiAoMCwgaC5PaykoKSwKCQkJCQkJCQltZXNzYWdlVHlwZTogZCwKCQkJCQkJCQltZXNzYWdlRGlyZWN0aW9uOiAicmVxdWVzdCIsCgkJCQkJCQkJcGF5bG9hZDogZiwKCQkJCQkJCQllcnJvcjogZi5lcnJvcgoJCQkJCQkJfSwgIioiKTsKCQkJCQkJfSBjYXRjaCAoZCkgewoJCQkJCQkJZi5lcnJvciA9IGQsIGYubWVzc2FnZURpcmVjdGlvbiA9ICJyZXNwb25zZSIsIHdpbmRvdy5wb3N0TWVzc2FnZShmLCAiKiIpOwoJCQkJCQl9CgkJCQkJfQoJCQkJCWZ1bmN0aW9uIG1ha2VGaWxlSWQoZCwgZiwgcCkgewoJCQkJCQlyZXR1cm4gSlNPTi5zdHJpbmdpZnkoewoJCQkJCQkJZG93bmxvYWRUeXBlOiBkLAoJCQkJCQkJaXRhZzogZiwKCQkJCQkJCW1pbkNodW5rU2l6ZTogZy5BaiwKCQkJCQkJCWZpbGVTaXplOiBwCgkJCQkJCX0pOwoJCQkJCX0KCQkJCQltKCk7CgkJCQl9IGNhdGNoIChkKSB7CgkJCQkJbShkKTsKCQkJCX0KCQkJfSk7CgkJfSwKCQkiLi9zcmMvYXVkaW9Eb3dubG9hZGVyL3N0cmF0ZWdpZXMvd2ViQXBpR2V0QWxsR2VuZXJhdGluZ1VybHNEYXRhL2NvbnN0cy50cyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5kKGYsIHsKCQkJCUNwOiAoKSA9PiBtLAoJCQkJVmY6ICgpID0+IGcsCgkJCQlrWDogKCkgPT4gaCwKCQkJCWw0OiAoKSA9PiBfLAoJCQkJc3U6ICgpID0+IHYKCQkJfSk7CgkJCWxldCBtID0gIkF1ZGlvIGRvd25sb2FkZXIuIFdFQiBBUEkuIENhbiBub3QgZ2V0IGdldEdlbmVyYXRpbmdBdWRpb1VybHNEYXRhRnJvbUlmcmFtZSBkdWUgdG8gdGltZW91dCIsIGggPSAiQXVkaW8gZG93bmxvYWRlci4gV0VCIEFQSS4gSW5jb3JyZWN0IHJlc3BvbnNlIG9uIGZldGNoIG1lZGlhIHVybCIsIGcgPSAiQXVkaW8gZG93bmxvYWRlci4gV0VCIEFQSS4gQ2FuIG5vdCBmZXRjaCBtZWRpYSB1cmwiLCBfID0gIkF1ZGlvIGRvd25sb2FkZXIuIFdFQiBBUEkuIENhbiBub3QgZ2V0IGFycmF5IGJ1ZmZlciBmcm9tIG1lZGlhIHVybCIsIHYgPSBuZXcgVGV4dERlY29kZXIoImFzY2lpIik7CgkJfSwKCQkiLi9zcmMvYXVkaW9Eb3dubG9hZGVyL3N0cmF0ZWdpZXMvd2ViQXBpR2V0QWxsR2VuZXJhdGluZ1VybHNEYXRhL2hlbHBlcnMudHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuZChmLCB7CgkJCQlEQTogKCkgPT4gZ2V0VXJsRnJvbUFycmF5QnVmZmVyLAoJCQkJYXk6ICgpID0+IHBhdGNoTWVkaWFVcmwsCgkJCQllTjogKCkgPT4gaXNDaHVua0xlbmd0aEFjY2VwdGFibGUKCQkJfSk7CgkJCXZhciBtID0gcCgiLi9zcmMvYXVkaW9Eb3dubG9hZGVyL3NoYXJlZC50cyIpLCBoID0gcCgiLi9zcmMvYXVkaW9Eb3dubG9hZGVyL3N0cmF0ZWdpZXMvd2ViQXBpR2V0QWxsR2VuZXJhdGluZ1VybHNEYXRhL2NvbnN0cy50cyIpOwoJCQlsZXQgZyA9IDE7CgkJCWZ1bmN0aW9uIHBhdGNoTWVkaWFVcmwoZCwgeyBzdGFydDogZiwgZW5kOiBwIH0pIHsKCQkJCWxldCBtID0gbmV3IFVSTChkKTsKCQkJCXJldHVybiBtLnNlYXJjaFBhcmFtcy5zZXQoInJhbmdlIiwgYCR7Zn0tJHtwfWApLCBtLnNlYXJjaFBhcmFtcy5zZXQoInJuIiwgU3RyaW5nKGcrKykpLCBtLnNlYXJjaFBhcmFtcy5kZWxldGUoInVtcCIpLCBtLnRvU3RyaW5nKCk7CgkJCX0KCQkJZnVuY3Rpb24gaXNDaHVua0xlbmd0aEFjY2VwdGFibGUoZCwgeyBzdGFydDogZiwgZW5kOiBwIH0pIHsKCQkJCWxldCBoID0gcCAtIGY7CgkJCQlyZXR1cm4gaCA+IG0uZHMgJiYgZC5ieXRlTGVuZ3RoIDwgbS5kcyA/ICExIDogTWF0aC5taW4oaCwgZC5ieXRlTGVuZ3RoKSAvIE1hdGgubWF4KGgsIGQuYnl0ZUxlbmd0aCkgPiBtLmNQOwoJCQl9CgkJCWxldCBnZXRVcmxGcm9tQXJyYXlCdWZmZXIgPSAoZCkgPT4gaC5zdS5kZWNvZGUoZCkubWF0Y2goL2h0dHBzOlwvXC8uKiQvKT8uWzBdOwoJCX0sCgkJIi4vc3JjL2F1ZGlvRG93bmxvYWRlci9zdHJhdGVnaWVzL3dlYkFwaUdldEFsbEdlbmVyYXRpbmdVcmxzRGF0YS9pZnJhbWUudHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgeyBIOiAoKSA9PiBnZXREb3dubG9hZEF1ZGlvRGF0YSB9KTsKCQkJCQl2YXIgaCA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvZXh0L2Rpc3QvaGVscGVycy95b3V0dWJlLmpzIiksIGcgPSBwKCIuL3NyYy91dGlscy9kZWJ1Zy50cyIpLCBfID0gcCgiLi9zcmMvdXRpbHMvdXRpbHMudHMiKSwgdiA9IHAoIi4vc3JjL2F1ZGlvRG93bmxvYWRlci9zaGFyZWQudHMiKSwgYiA9IGQoW19dKTsKCQkJCQlfID0gKGIudGhlbiA/IChhd2FpdCBiKSgpIDogYilbMF07CgkJCQkJbGV0IHggPSAiIiwgZ2V0QWRhcHRpdmVGb3JtYXRzID0gKCkgPT4gaC5BLmdldFBsYXllclJlc3BvbnNlKCk/LnN0cmVhbWluZ0RhdGE/LmFkYXB0aXZlRm9ybWF0czsKCQkJCQlhc3luYyBmdW5jdGlvbiBpc0VuY29kZWRSZXF1ZXN0KGQsIGYpIHsKCQkJCQkJaWYgKCFkLmluY2x1ZGVzKCJnb29nbGV2aWRlby5jb20vdmlkZW9wbGF5YmFjayIpIHx8IHR5cGVvZiBmID09ICJzdHJpbmciKSByZXR1cm4gITE7CgkJCQkJCXRyeSB7CgkJCQkJCQlsZXQgZCA9IGYuY2xvbmUoKS5ib2R5Py5nZXRSZWFkZXIoKTsKCQkJCQkJCWlmICghZCkgcmV0dXJuICExOwoJCQkJCQkJbGV0IHAgPSAwOwoJCQkJCQkJZm9yICg7OykgewoJCQkJCQkJCWxldCB7IGRvbmU6IGYsIHZhbHVlOiBtIH0gPSBhd2FpdCBkLnJlYWQoKTsKCQkJCQkJCQlpZiAoZikgYnJlYWs7CgkJCQkJCQkJaWYgKHAgKz0gbS5sZW5ndGgsIHAgPiAyKSByZXR1cm4gITA7CgkJCQkJCQl9CgkJCQkJCX0gY2F0Y2gge30KCQkJCQkJcmV0dXJuICExOwoJCQkJCX0KCQkJCQlmdW5jdGlvbiBzZWxlY3RCZXN0QXVkaW9Gb3JtYXQoKSB7CgkJCQkJCWxldCBkID0gZ2V0QWRhcHRpdmVGb3JtYXRzKCk7CgkJCQkJCWlmICghZD8ubGVuZ3RoKSB7CgkJCQkJCQlsZXQgZiA9IGQgPyAiRW1wdHkgYWRhcHRpdmUgZm9ybWF0cyIgOiAiQ2Fubm90IGdldCBhZGFwdGl2ZSBmb3JtYXRzIjsKCQkJCQkJCXRocm93IEVycm9yKGBBdWRpbyBkb3dubG9hZGVyLiBXRUIgQVBJLiAke2Z9YCk7CgkJCQkJCX0KCQkJCQkJbGV0IGYgPSBkLmZpbHRlcigoeyBhdWRpb1F1YWxpdHk6IGQsIG1pbWVUeXBlOiBmIH0pID0+IGQgfHwgZj8uaW5jbHVkZXMoImF1ZGlvIikpOwoJCQkJCQlpZiAoIWYubGVuZ3RoKSB0aHJvdyBFcnJvcigiQXVkaW8gZG93bmxvYWRlci4gV0VCIEFQSS4gTm8gYXVkaW8gYWRhcHRpdmUgZm9ybWF0cyIpOwoJCQkJCQlsZXQgcCA9IGYuZmlsdGVyKCh7IGl0YWc6IGQgfSkgPT4gZCA9PT0gMjUxKS5zb3J0KCh7IGNvbnRlbnRMZW5ndGg6IGQgfSwgeyBjb250ZW50TGVuZ3RoOiBmIH0pID0+IGQgJiYgZiA/IE51bWJlci5wYXJzZUludChkKSAtIE51bWJlci5wYXJzZUludChmKSA6IC0xKTsKCQkJCQkJcmV0dXJuIHAuYXQoLTEpID8/IGZbMF07CgkJCQkJfQoJCQkJCWxldCB3YWl0Rm9yUGxheWVyID0gYXN5bmMgKCkgPT4gKGF3YWl0ICgwLCBfLlVWKSgoKSA9PiAhIWguQS5nZXRQbGF5ZXIoKSwgMWU0KSwgaC5BLmdldFBsYXllcigpKSwgbG9hZFZpZGVvID0gYXN5bmMgKGQpID0+IHsKCQkJCQkJbGV0IGYgPSBhd2FpdCB3YWl0Rm9yUGxheWVyKCk7CgkJCQkJCWlmIChkLm1lc3NhZ2VJZCAhPT0geCkgdGhyb3cgRXJyb3IoIkF1ZGlvIGRvd25sb2FkZXIuIERvd25sb2FkIHN0YXJ0ZWQgZm9yIGFub3RoZXIgdmlkZW8gd2hpbGUgZ2V0dGluZyBwbGF5ZXIiKTsKCQkJCQkJaWYgKCFmPy5sb2FkVmlkZW9CeUlkKSB0aHJvdyBFcnJvcigiQXVkaW8gZG93bmxvYWRlci4gVGhlcmUgaXMgbm8gcGxheWVyLmxvYWRWaWRlb0J5SWQgaW4gaWZyYW1lIik7CgkJCQkJCWYubG9hZFZpZGVvQnlJZChkLnBheWxvYWQudmlkZW9JZCksIGYucGF1c2VWaWRlbz8uKCksIGYubXV0ZT8uKCksIHNldFRpbWVvdXQoKCkgPT4gewoJCQkJCQkJaWYgKGQubWVzc2FnZUlkICE9PSB4KSB7CgkJCQkJCQkJY29uc29sZS5lcnJvcigiQXVkaW8gRG93bmxvYWRlci4gRG93bmxvYWQgc3RhcnRlZCBmb3IgYW5vdGhlciB2aWRlbyB3aGlsZSB3YWl0aW5nIHRvIHJlcGF1c2UgdmlkZW8iKTsKCQkJCQkJCQlyZXR1cm47CgkJCQkJCQl9CgkJCQkJCQlpZiAoIWYpIHsKCQkJCQkJCQljb25zb2xlLmVycm9yKCJbQ3JpdGljYWxdIEF1ZGlvIERvd25sb2FkZXIuIFBsYXllciBub3QgZm91bmQgaW4gaWZyYW1lIGFmdGVyIHRpbWVvdXQiKTsKCQkJCQkJCQlyZXR1cm47CgkJCQkJCQl9CgkJCQkJCQlmLnBhdXNlVmlkZW8/LigpOwoJCQkJCQl9LCAxZTMpOwoJCQkJCX07CgkJCQkJYXN5bmMgZnVuY3Rpb24gZ2V0RG93bmxvYWRBdWRpb0RhdGEoZCkgewoJCQkJCQl0cnkgewoJCQkJCQkJeCA9IGQubWVzc2FnZUlkLCBnLkEubG9nKCJnZXREb3dubG9hZEF1ZGlvRGF0YSIsIGQpOwoJCQkJCQkJbGV0IGYgPSB1bnNhZmVXaW5kb3cuZmV0Y2g7CgkJCQkJCQl1bnNhZmVXaW5kb3cuZmV0Y2ggPSBhc3luYyAocCwgbSkgPT4gewoJCQkJCQkJCXAgaW5zdGFuY2VvZiBVUkwgJiYgKHAgPSBwLnRvU3RyaW5nKCkpOwoJCQkJCQkJCWxldCBoID0gKDAsIHYucmgpKHApOwoJCQkJCQkJCWlmIChhd2FpdCBpc0VuY29kZWRSZXF1ZXN0KGgsIHApKSByZXR1cm4gd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7CgkJCQkJCQkJCS4uLmQsCgkJCQkJCQkJCW1lc3NhZ2VEaXJlY3Rpb246ICJyZXNwb25zZSIsCgkJCQkJCQkJCWVycm9yOiAiQXVkaW8gZG93bmxvYWRlci4gRGV0ZWN0ZWQgZW5jb2RlZCByZXF1ZXN0LiIKCQkJCQkJCQl9LCAiKiIpLCB1bnNhZmVXaW5kb3cuZmV0Y2ggPSBmLCBmKHAsIG0pOwoJCQkJCQkJCWxldCBnID0gYXdhaXQgZihwLCBtKTsKCQkJCQkJCQlyZXR1cm4gZC5tZXNzYWdlSWQgPT09IHggPyAoaC5pbmNsdWRlcygiJml0YWc9MjUxJiIpICYmICh1bnNhZmVXaW5kb3cuZmV0Y2ggPSBmLCB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHsKCQkJCQkJCQkJLi4uZCwKCQkJCQkJCQkJbWVzc2FnZURpcmVjdGlvbjogInJlc3BvbnNlIiwKCQkJCQkJCQkJcGF5bG9hZDogewoJCQkJCQkJCQkJcmVxdWVzdEluZm86IGgsCgkJCQkJCQkJCQlyZXF1ZXN0SW5pdDogbSB8fCAoMCwgdi55QSkocCksCgkJCQkJCQkJCQlhZGFwdGl2ZUZvcm1hdDogc2VsZWN0QmVzdEF1ZGlvRm9ybWF0KCksCgkJCQkJCQkJCQlpdGFnOiAyNTEKCQkJCQkJCQkJfQoJCQkJCQkJCX0sICIqIikpLCBnKSA6ICh1bnNhZmVXaW5kb3cuZmV0Y2ggPSBmLCBnKTsKCQkJCQkJCX0sIGF3YWl0IGxvYWRWaWRlbyhkKTsKCQkJCQkJfSBjYXRjaCAoZikgewoJCQkJCQkJd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7CgkJCQkJCQkJLi4uZCwKCQkJCQkJCQltZXNzYWdlRGlyZWN0aW9uOiAicmVzcG9uc2UiLAoJCQkJCQkJCWVycm9yOiBmCgkJCQkJCQl9LCAiKiIpOwoJCQkJCQl9CgkJCQkJfQoJCQkJCW0oKTsKCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQltKGQpOwoJCQkJfQoJCQl9KTsKCQl9LAoJCSIuL3NyYy9hdWRpb0Rvd25sb2FkZXIvc3RyYXRlZ2llcy93ZWJBcGlHZXRBbGxHZW5lcmF0aW5nVXJsc0RhdGEvaW5kZXgudHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgeyAkOiAoKSA9PiBnZXRBdWRpb0Zyb21XZWJBcGlXaXRoUmVwbGFjZWRGZXRjaCB9KTsKCQkJCQl2YXIgaCA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvY29yZS9kaXN0L3R5cGVzL3lhbmRleC5qcyIpLCBnID0gcCgiLi9zcmMvdXRpbHMvZGVidWcudHMiKSwgXyA9IHAoIi4vc3JjL3V0aWxzL2dtLnRzIiksIHYgPSBwKCIuL3NyYy91dGlscy9pZnJhbWVDb25uZWN0b3IudHMiKSwgYiA9IHAoIi4vc3JjL3V0aWxzL3V0aWxzLnRzIiksIHggPSBwKCIuL3NyYy9hdWRpb0Rvd25sb2FkZXIvc2hhcmVkLnRzIiksIEMgPSBwKCIuL3NyYy9hdWRpb0Rvd25sb2FkZXIvc3RyYXRlZ2llcy91dGlscy50cyIpLCB3ID0gcCgiLi9zcmMvYXVkaW9Eb3dubG9hZGVyL3N0cmF0ZWdpZXMvd2ViQXBpR2V0QWxsR2VuZXJhdGluZ1VybHNEYXRhL2NvbnN0cy50cyIpLCBUID0gcCgiLi9zcmMvYXVkaW9Eb3dubG9hZGVyL3N0cmF0ZWdpZXMvd2ViQXBpR2V0QWxsR2VuZXJhdGluZ1VybHNEYXRhL2hlbHBlcnMudHMiKSwgRSA9IGQoWwoJCQkJCQlfLAoJCQkJCQl2LAoJCQkJCQliLAoJCQkJCQlDCgkJCQkJXSk7CgkJCQkJW18sIHYsIGIsIENdID0gRS50aGVuID8gKGF3YWl0IEUpKCkgOiBFOwoJCQkJCWxldCBEID0gaC5KLldFQl9BUElfR0VUX0FMTF9HRU5FUkFUSU5HX1VSTFNfREFUQV9GUk9NX0lGUkFNRSwgZ2V0RG93bmxvYWRBdWRpb0RhdGFJbk1haW5Xb3JsZCA9IChkKSA9PiAoMCwgdi5oRykoImdldC1kb3dubG9hZC1hdWRpby1kYXRhLWluLW1haW4td29ybGQiLCBkKTsKCQkJCQlhc3luYyBmdW5jdGlvbiBnZXRHZW5lcmF0aW5nQXVkaW9VcmxzRGF0YUZyb21JZnJhbWUoZCkgewoJCQkJCQl0cnkgewoJCQkJCQkJcmV0dXJuIGF3YWl0IFByb21pc2UucmFjZShbZ2V0RG93bmxvYWRBdWRpb0RhdGFJbk1haW5Xb3JsZCh7IHZpZGVvSWQ6IGQgfSksICgwLCBiLndSKSgyZTQsIHcuQ3ApXSk7CgkJCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQkJCWxldCBmID0gZCBpbnN0YW5jZW9mIEVycm9yICYmIGQubWVzc2FnZSA9PT0gdy5DcDsKCQkJCQkJCXRocm93IGcuQS5sb2coImdldEdlbmVyYXRpbmdBdWRpb1VybHNEYXRhRnJvbUlmcmFtZSBlcnJvciIsIGQpLCBFcnJvcihmID8gdy5DcCA6ICJBdWRpbyBkb3dubG9hZGVyLiBXRUIgQVBJLiBGYWlsZWQgdG8gZ2V0IGF1ZGlvIGRhdGEiKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQlhc3luYyBmdW5jdGlvbiBmZXRjaE1lZGlhV2l0aE1ldGEoeyBtZWRpYVVybDogZCwgY2h1bmtSYW5nZTogZiwgcmVxdWVzdEluaXQ6IHAsIHNpZ25hbDogbSwgaXNVcmxDaGFuZ2VkOiBoID0gITEgfSkgewoJCQkJCQlsZXQgdiA9ICgwLCBULmF5KShkLCBmKSwgYjsKCQkJCQkJdHJ5IHsKCQkJCQkJCWlmIChiID0gYXdhaXQgKDAsIF8uRzMpKHYsIHsKCQkJCQkJCQkuLi5wLAoJCQkJCQkJCXNpZ25hbDogbQoJCQkJCQkJfSksICFiLm9rKSB7CgkJCQkJCQkJbGV0IGQgPSAoMCwgeC5TWikoYik7CgkJCQkJCQkJdGhyb3cgY29uc29sZS5lcnJvcih3LmtYLCBkKSwgRXJyb3Iody5rWCk7CgkJCQkJCQl9CgkJCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQkJCXRocm93IGQgaW5zdGFuY2VvZiBFcnJvciAmJiBkLm1lc3NhZ2UgPT09IHcua1ggPyBkIDogKGNvbnNvbGUuZXJyb3Iody5WZiwgewoJCQkJCQkJCW1lZGlhVXJsOiB2LAoJCQkJCQkJCWVycm9yOiBkCgkJCQkJCQl9KSwgRXJyb3Iody5WZikpOwoJCQkJCQl9CgkJCQkJCWxldCBDOwoJCQkJCQl0cnkgewoJCQkJCQkJQyA9IGF3YWl0IGIuYXJyYXlCdWZmZXIoKTsKCQkJCQkJfSBjYXRjaCAoZCkgewoJCQkJCQkJdGhyb3cgY29uc29sZS5lcnJvcih3Lmw0LCB7CgkJCQkJCQkJbWVkaWFVcmw6IHYsCgkJCQkJCQkJZXJyb3I6IGQKCQkJCQkJCX0pLCBFcnJvcih3Lmw0KTsKCQkJCQkJfQoJCQkJCQlpZiAoZy5BLmxvZygiaXNDaHVua0xlbmd0aEFjY2VwdGFibGUiLCAoMCwgVC5lTikoQywgZiksIEMuYnl0ZUxlbmd0aCwgZiksICgwLCBULmVOKShDLCBmKSkgcmV0dXJuIHsKCQkJCQkJCW1lZGlhOiBDLAoJCQkJCQkJdXJsOiBoID8gZCA6IG51bGwsCgkJCQkJCQlpc0FjY2VwdGFibGVMYXN0OiAhMQoJCQkJCQl9OwoJCQkJCQlsZXQgRSA9ICgwLCBULkRBKShDKTsKCQkJCQkJaWYgKGcuQS5sb2coInJlZGlyZWN0ZWRVcmwiLCBFKSwgRSkgcmV0dXJuIGZldGNoTWVkaWFXaXRoTWV0YSh7CgkJCQkJCQltZWRpYVVybDogRSwKCQkJCQkJCWNodW5rUmFuZ2U6IGYsCgkJCQkJCQlyZXF1ZXN0SW5pdDogcCwKCQkJCQkJCXNpZ25hbDogbSwKCQkJCQkJCWlzVXJsQ2hhbmdlZDogITAKCQkJCQkJfSk7CgkJCQkJCWlmICghZi5tdXN0RXhpc3QpIHJldHVybiB7CgkJCQkJCQltZWRpYTogQywKCQkJCQkJCXVybDogbnVsbCwKCQkJCQkJCWlzQWNjZXB0YWJsZUxhc3Q6ICEwCgkJCQkJCX07CgkJCQkJCXRocm93IEVycm9yKGBBdWRpbyBkb3dubG9hZGVyLiBXRUIgQVBJLiBDYW4gbm90IGdldCByZWRpcmVjdGVkIG1lZGlhIHVybCAke3Z9YCk7CgkJCQkJfQoJCQkJCWFzeW5jIGZ1bmN0aW9uIGZldGNoTWVkaWFXaXRoTWV0YUJ5Q2h1bmtSYW5nZXMoZCwgZiwgcCwgbSkgewoJCQkJCQlsZXQgaCA9IGQsIGcgPSBbXSwgXyA9ICExOwoJCQkJCQlmb3IgKGxldCBkIG9mIHApIHsKCQkJCQkJCWxldCBwID0gYXdhaXQgZmV0Y2hNZWRpYVdpdGhNZXRhKHsKCQkJCQkJCQltZWRpYVVybDogaCwKCQkJCQkJCQljaHVua1JhbmdlOiBkLAoJCQkJCQkJCXJlcXVlc3RJbml0OiBmLAoJCQkJCQkJCXNpZ25hbDogbQoJCQkJCQkJfSk7CgkJCQkJCQlpZiAocC51cmwgJiYgKGggPSBwLnVybCksIGcucHVzaChwLm1lZGlhKSwgXyA9IHAuaXNBY2NlcHRhYmxlTGFzdCwgXykgYnJlYWs7CgkJCQkJCX0KCQkJCQkJcmV0dXJuIHsKCQkJCQkJCW1lZGlhOiAoMCwgQy5peikoZyksCgkJCQkJCQl1cmw6IGgsCgkJCQkJCQlpc0FjY2VwdGFibGVMYXN0OiBfCgkJCQkJCX07CgkJCQkJfQoJCQkJCWFzeW5jIGZ1bmN0aW9uIGdldEF1ZGlvRnJvbVdlYkFwaVdpdGhSZXBsYWNlZEZldGNoKHsgdmlkZW9JZDogZCwgcmV0dXJuQnlQYXJ0czogZiA9ICExLCBzaWduYWw6IHAgfSkgewoJCQkJCQlsZXQgeyByZXF1ZXN0SW5pdDogbSwgcmVxdWVzdEluZm86IGgsIGFkYXB0aXZlRm9ybWF0OiBnLCBpdGFnOiBfIH0gPSBhd2FpdCBnZXRHZW5lcmF0aW5nQXVkaW9VcmxzRGF0YUZyb21JZnJhbWUoZCk7CgkJCQkJCWlmICghaCkgdGhyb3cgRXJyb3IoIkF1ZGlvIGRvd25sb2FkZXIuIFdFQiBBUEkuIENhbiBub3QgZ2V0IHJlcXVlc3RJbmZvIik7CgkJCQkJCWxldCB2ID0gKDAsIHgucmgpKGgpLCBiID0gKDAsIHgueUEpKGgpLCB3ID0gKDAsIHguUlopKGIpLCBUID0gbSB8fCB3OwoJCQkJCQlyZXR1cm4gewoJCQkJCQkJZmlsZUlkOiAoMCwgQy5xaykoRCwgXywgZy5jb250ZW50TGVuZ3RoKSwKCQkJCQkJCW1lZGlhUGFydHNMZW5ndGg6IGYgPyAoMCwgQy5iQikoZykubGVuZ3RoIDogMSwKCQkJCQkJCWFzeW5jICpnZXRNZWRpYUJ1ZmZlcnMoKSB7CgkJCQkJCQkJaWYgKGYpIHsKCQkJCQkJCQkJbGV0IGQgPSAoMCwgQy5iQikoZyk7CgkJCQkJCQkJCWZvciAobGV0IGYgb2YgZCkgewoJCQkJCQkJCQkJbGV0IHsgbWVkaWE6IGQsIHVybDogbSwgaXNBY2NlcHRhYmxlTGFzdDogaCB9ID0gYXdhaXQgZmV0Y2hNZWRpYVdpdGhNZXRhQnlDaHVua1Jhbmdlcyh2LCBULCBmLCBwKTsKCQkJCQkJCQkJCWlmIChtICYmICh2ID0gbSksIHlpZWxkIGQsIGgpIGJyZWFrOwoJCQkJCQkJCQl9CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJbGV0IGQgPSAoMCwgQy5MbSkoZyksIHsgbWVkaWE6IGYgfSA9IGF3YWl0IGZldGNoTWVkaWFXaXRoTWV0YUJ5Q2h1bmtSYW5nZXModiwgVCwgZCwgcCk7CgkJCQkJCQkJCXlpZWxkIGY7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9OwoJCQkJCX0KCQkJCQltKCk7CgkJCQl9IGNhdGNoIChkKSB7CgkJCQkJbShkKTsKCQkJCX0KCQkJfSk7CgkJfSwKCQkiLi9zcmMvY29uZmlnL2NvbmZpZy5qcyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5kKGYsIHsKCQkJCUVrOiAoKSA9PiBFLAoJCQkJSkQ6ICgpID0+IEQsCgkJCQlLMjogKCkgPT4gRiwKCQkJCVBtOiAoKSA9PiBnLAoJCQkJVDg6ICgpID0+IE8sCgkJCQlXbDogKCkgPT4gVSwKCQkJCWNMOiAoKSA9PiBDLAoJCQkJaHg6ICgpID0+IFQsCgkJCQlrJDogKCkgPT4gdiwKCQkJCW1FOiAoKSA9PiBqLAoJCQkJcHg6ICgpID0+IEEsCgkJCQlxVTogKCkgPT4gRywKCQkJCXI0OiAoKSA9PiBLLAoJCQkJcmw6ICgpID0+IG0sCgkJCQlzZTogKCkgPT4gaCwKCQkJCXNsOiAoKSA9PiBiLAoJCQkJdFo6ICgpID0+IF8sCgkJCQl2WjogKCkgPT4gVywKCQkJCXhXOiAoKSA9PiB4CgkJCX0pOwoJCQlsZXQgbSA9ICJhcGkuYnJvd3Nlci55YW5kZXgucnUiLCBoID0gIm1lZGlhLXByb3h5LnRvaWwuY2MvdjEvcHJveHkvbTN1OCIsIGcgPSAidm90LXdvcmtlci50b2lsLmNjIiwgXyA9ICJodHRwczovL3ZvdC50b2lsLmNjL3YxIiwgdiA9ICJodHRwczovL3RyYW5zbGF0ZS50b2lsLmNjL3YyIiwgYiA9ICJodHRwczovL3J1c3Qtc2VydmVyLTUzMWoub25yZW5kZXIuY29tL2RldGVjdCIsIHggPSAiaHR0cHM6Ly90Mm1jLnRvaWwuY2MiLCBDID0gImh0dHBzOi8vYXZhdGFycy5tZHMueWFuZGV4Lm5ldC9nZXQteWFwaWMiLCB3ID0gImlseWhhbGlnaHQvdm9pY2Utb3Zlci10cmFuc2xhdGlvbiIsIFQgPSBgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLyR7d31gLCBFID0gYGh0dHBzOi8vZ2l0aHViLmNvbS8ke3d9YCwgRCA9IDE1LCBPID0gOTAwLCBBID0gNSwgaiA9ICJ5YW5kZXhicm93c2VyIiwgRiA9ICJ5YW5kZXhicm93c2VyIiwgVSA9IFsiVGFtcGVybW9ua2V5IiwgIlZpb2xlbnRtb25rZXkiXSwgVyA9IFsKCQkJCSJVQSIsCgkJCQkiTFYiLAoJCQkJIkxUIgoJCQldLCBHID0gMWUzLCBLID0gIjIwMjUtMDUtMDkiOwoJCX0sCgkJIi4vc3JjL2NvcmUvYXV0aC50cyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5hKGQsIGFzeW5jIChkLCBtKSA9PiB7CgkJCQl0cnkgewoJCQkJCXAuZChmLCB7IEw6ICgpID0+IGluaXRBdXRoIH0pOwoJCQkJCXZhciBoID0gcCgiLi9zcmMvdXRpbHMvc3RvcmFnZS50cyIpLCBnID0gZChbaF0pOwoJCQkJCWggPSAoZy50aGVuID8gKGF3YWl0IGcpKCkgOiBnKVswXTsKCQkJCQlhc3luYyBmdW5jdGlvbiBoYW5kbGVBdXRoQ2FsbGJhY2tQYWdlKCkgewoJCQkJCQlsZXQgeyBhY2Nlc3NfdG9rZW46IGQsIGV4cGlyZXNfaW46IGYgfSA9IE9iamVjdC5mcm9tRW50cmllcyhuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5oYXNoLnNsaWNlKDEpKSk7CgkJCQkJCWlmICghZCB8fCAhZikgdGhyb3cgRXJyb3IoIltWT1RdIEludmFsaWQgdG9rZW4gcmVzcG9uc2UiKTsKCQkJCQkJbGV0IHAgPSBwYXJzZUludChmKTsKCQkJCQkJaWYgKE51bWJlci5pc05hTihwKSkgdGhyb3cgRXJyb3IoIltWT1RdIEludmFsaWQgZXhwaXJlc19pbiB2YWx1ZSIpOwoJCQkJCQlhd2FpdCBoLmQuc2V0KCJhY2NvdW50IiwgewoJCQkJCQkJdG9rZW46IGQsCgkJCQkJCQlleHBpcmVzOiBEYXRlLm5vdygpICsgcCAqIDFlMywKCQkJCQkJCXVzZXJuYW1lOiB2b2lkIDAsCgkJCQkJCQlhdmF0YXJJZDogdm9pZCAwCgkJCQkJCX0pOwoJCQkJCX0KCQkJCQlhc3luYyBmdW5jdGlvbiBoYW5kbGVQcm9maWxlUGFnZSgpIHsKCQkJCQkJbGV0IHsgYXZhdGFyX2lkOiBkLCB1c2VybmFtZTogZiB9ID0gX3VzZXJEYXRhOwoJCQkJCQlpZiAoIWQgfHwgIWYpIHRocm93IEVycm9yKCJbVk9UXSBJbnZhbGlkIHVzZXIgZGF0YSIpOwoJCQkJCQlsZXQgcCA9IGF3YWl0IGguZC5nZXQoImFjY291bnQiKTsKCQkJCQkJaWYgKCFwKSB0aHJvdyBFcnJvcigiW1ZPVF0gTm8gYWNjb3VudCBkYXRhIGZvdW5kIik7CgkJCQkJCWF3YWl0IGguZC5zZXQoImFjY291bnQiLCB7CgkJCQkJCQkuLi5wLAoJCQkJCQkJdXNlcm5hbWU6IGYsCgkJCQkJCQlhdmF0YXJJZDogZAoJCQkJCQl9KTsKCQkJCQl9CgkJCQkJYXN5bmMgZnVuY3Rpb24gaW5pdEF1dGgoKSB7CgkJCQkJCWlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT09ICIvYXV0aC9jYWxsYmFjayIpIHJldHVybiBhd2FpdCBoYW5kbGVBdXRoQ2FsbGJhY2tQYWdlKCk7CgkJCQkJCWlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT09ICIvbXkvcHJvZmlsZSIpIHJldHVybiBhd2FpdCBoYW5kbGVQcm9maWxlUGFnZSgpOwoJCQkJCX0KCQkJCQltKCk7CgkJCQl9IGNhdGNoIChkKSB7CgkJCQkJbShkKTsKCQkJCX0KCQkJfSk7CgkJfSwKCQkiLi9zcmMvY29yZS9jYWNoZU1hbmFnZXIudHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuZChmLCB7IEc6ICgpID0+IENhY2hlTWFuYWdlciB9KTsKCQkJY2xhc3MgQ2FjaGVNYW5hZ2VyIHsKCQkJCWNhY2hlOwoJCQkJY29uc3RydWN0b3IoKSB7CgkJCQkJdGhpcy5jYWNoZSA9IG5ldyBNYXAoKTsKCQkJCX0KCQkJCWdldChkKSB7CgkJCQkJcmV0dXJuIHRoaXMuY2FjaGUuZ2V0KGQpOwoJCQkJfQoJCQkJc2V0KGQsIGYpIHsKCQkJCQlyZXR1cm4gdGhpcy5jYWNoZS5zZXQoZCwgZiksIHRoaXM7CgkJCQl9CgkJCQlkZWxldGUoZCkgewoJCQkJCXJldHVybiB0aGlzLmNhY2hlLmRlbGV0ZShkKSwgdGhpczsKCQkJCX0KCQkJCWdldFRyYW5zbGF0aW9uKGQpIHsKCQkJCQlsZXQgZiA9IHRoaXMuZ2V0KGQpOwoJCQkJCXJldHVybiBmID8gZi50cmFuc2xhdGlvbiA6IHZvaWQgMDsKCQkJCX0KCQkJCXNldFRyYW5zbGF0aW9uKGQsIGYpIHsKCQkJCQlsZXQgcCA9IHRoaXMuZ2V0KGQpIHx8IHt9OwoJCQkJCXAudHJhbnNsYXRpb24gPSBmLCB0aGlzLnNldChkLCBwKTsKCQkJCX0KCQkJCWdldFN1YnRpdGxlcyhkKSB7CgkJCQkJbGV0IGYgPSB0aGlzLmdldChkKTsKCQkJCQlyZXR1cm4gZiA/IGYuc3VidGl0bGVzIDogdm9pZCAwOwoJCQkJfQoJCQkJc2V0U3VidGl0bGVzKGQsIGYpIHsKCQkJCQlsZXQgcCA9IHRoaXMuZ2V0KGQpIHx8IHt9OwoJCQkJCXAuc3VidGl0bGVzID0gZiwgdGhpcy5zZXQoZCwgcCk7CgkJCQl9CgkJCQlkZWxldGVTdWJ0aXRsZXMoZCkgewoJCQkJCWxldCBmID0gdGhpcy5nZXQoZCk7CgkJCQkJZiAmJiAoZi5zdWJ0aXRsZXMgPSB2b2lkIDAsIHRoaXMuc2V0KGQsIGYpKTsKCQkJCX0KCQkJfQoJCX0sCgkJIi4vc3JjL2NvcmUvZXZlbnRJbXBsLnRzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmQoZiwgeyBaOiAoKSA9PiBFdmVudEltcGwgfSk7CgkJCWNsYXNzIEV2ZW50SW1wbCB7CgkJCQlsaXN0ZW5lcnM7CgkJCQljb25zdHJ1Y3RvcigpIHsKCQkJCQl0aGlzLmxpc3RlbmVycyA9IG5ldyBTZXQoKTsKCQkJCX0KCQkJCWFkZExpc3RlbmVyKGQpIHsKCQkJCQlpZiAodGhpcy5saXN0ZW5lcnMuaGFzKGQpKSB0aHJvdyBFcnJvcigiW1ZPVF0gVGhlIGxpc3RlbmVyIGhhcyBhbHJlYWR5IGJlZW4gYWRkZWQuIik7CgkJCQkJdGhpcy5saXN0ZW5lcnMuYWRkKGQpOwoJCQkJfQoJCQkJcmVtb3ZlTGlzdGVuZXIoZCkgewoJCQkJCXRoaXMubGlzdGVuZXJzLmRlbGV0ZShkKTsKCQkJCX0KCQkJCWRpc3BhdGNoKC4uLmQpIHsKCQkJCQlmb3IgKGxldCBmIG9mIHRoaXMubGlzdGVuZXJzKSB0cnkgewoJCQkJCQlmKC4uLmQpOwoJCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQkJY29uc29sZS5lcnJvcigiW1ZPVF0iLCBkKTsKCQkJCQl9CgkJCQl9CgkJCQljbGVhcigpIHsKCQkJCQl0aGlzLmxpc3RlbmVycy5jbGVhcigpOwoJCQkJfQoJCQl9CgkJfSwKCQkiLi9zcmMvY29yZS90cmFuc2xhdGlvbkhhbmRsZXIudHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgeyBGOiAoKSA9PiBWT1RUcmFuc2xhdGlvbkhhbmRsZXIgfSk7CgkJCQkJdmFyIGggPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2NvcmUvZGlzdC90eXBlcy95YW5kZXguanMiKSwgZyA9IHAoIi4vc3JjL2F1ZGlvRG93bmxvYWRlci9pbmRleC50cyIpLCBfID0gcCgiLi9zcmMvbG9jYWxpemF0aW9uL2xvY2FsaXphdGlvblByb3ZpZGVyLnRzIiksIHYgPSBwKCIuL3NyYy91dGlscy9kZWJ1Zy50cyIpLCBiID0gcCgiLi9zcmMvdXRpbHMvbG9jYWxpemF0aW9uLnRzIiksIHggPSBwKCIuL3NyYy91dGlscy91dGlscy50cyIpLCBDID0gcCgiLi9zcmMvdXRpbHMvVk9UTG9jYWxpemVkRXJyb3IuanMiKSwgdyA9IGQoWwoJCQkJCQlnLAoJCQkJCQlfLAoJCQkJCQliLAoJCQkJCQl4LAoJCQkJCQlDCgkJCQkJXSk7CgkJCQkJW2csIF8sIGIsIHgsIENdID0gdy50aGVuID8gKGF3YWl0IHcpKCkgOiB3OwoJCQkJCWNsYXNzIFZPVFRyYW5zbGF0aW9uSGFuZGxlciB7CgkJCQkJCXZpZGVvSGFuZGxlcjsKCQkJCQkJYXVkaW9Eb3dubG9hZGVyOwoJCQkJCQlkb3dubG9hZGluZzsKCQkJCQkJY29uc3RydWN0b3IoZCkgewoJCQkJCQkJdGhpcy52aWRlb0hhbmRsZXIgPSBkLCB0aGlzLmF1ZGlvRG93bmxvYWRlciA9IG5ldyBnLkkoKSwgdGhpcy5kb3dubG9hZGluZyA9ICExLCB0aGlzLmF1ZGlvRG93bmxvYWRlci5hZGRFdmVudExpc3RlbmVyKCJkb3dubG9hZGVkQXVkaW8iLCBhc3luYyAoZCwgZikgPT4gewoJCQkJCQkJCWlmICh2LkEubG9nKCJkb3dubG9hZGVkQXVkaW8iLCBmKSwgIXRoaXMuZG93bmxvYWRpbmcpIHsKCQkJCQkJCQkJdi5BLmxvZygic2tpcCBkb3dubG9hZGVkQXVkaW8iKTsKCQkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJCX0KCQkJCQkJCQlsZXQgeyB2aWRlb0lkOiBwLCBmaWxlSWQ6IG0sIGF1ZGlvRGF0YTogaCB9ID0gZiwgZyA9IHRoaXMuZ2V0Q2Fub25pY2FsVXJsKHApOwoJCQkJCQkJCXRyeSB7CgkJCQkJCQkJCWF3YWl0IHRoaXMudmlkZW9IYW5kbGVyLnZvdENsaWVudC5yZXF1ZXN0VnRyYW5zQXVkaW8oZywgZCwgewoJCQkJCQkJCQkJYXVkaW9GaWxlOiBoLAoJCQkJCQkJCQkJZmlsZUlkOiBtCgkJCQkJCQkJCX0pOwoJCQkJCQkJCX0gY2F0Y2gge30KCQkJCQkJCQl0aGlzLmRvd25sb2FkaW5nID0gITE7CgkJCQkJCQl9KS5hZGRFdmVudExpc3RlbmVyKCJkb3dubG9hZGVkUGFydGlhbEF1ZGlvIiwgYXN5bmMgKGQsIGYpID0+IHsKCQkJCQkJCQlpZiAodi5BLmxvZygiZG93bmxvYWRlZFBhcnRpYWxBdWRpbyIsIGYpLCAhdGhpcy5kb3dubG9hZGluZykgewoJCQkJCQkJCQl2LkEubG9nKCJza2lwIGRvd25sb2FkZWRQYXJ0aWFsQXVkaW8iKTsKCQkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJCX0KCQkJCQkJCQlsZXQgeyBhdWRpb0RhdGE6IHAsIGZpbGVJZDogbSwgdmlkZW9JZDogaCwgYW1vdW50OiBnLCB2ZXJzaW9uOiBfLCBpbmRleDogYiB9ID0gZiwgeCA9IHRoaXMuZ2V0Q2Fub25pY2FsVXJsKGgpOwoJCQkJCQkJCXRyeSB7CgkJCQkJCQkJCWF3YWl0IHRoaXMudmlkZW9IYW5kbGVyLnZvdENsaWVudC5yZXF1ZXN0VnRyYW5zQXVkaW8oeCwgZCwgewoJCQkJCQkJCQkJYXVkaW9GaWxlOiBwLAoJCQkJCQkJCQkJY2h1bmtJZDogYgoJCQkJCQkJCQl9LCB7CgkJCQkJCQkJCQlhdWRpb1BhcnRzTGVuZ3RoOiBnLAoJCQkJCQkJCQkJZmlsZUlkOiBtLAoJCQkJCQkJCQkJdmVyc2lvbjogXwoJCQkJCQkJCQl9KTsKCQkJCQkJCQl9IGNhdGNoIHsKCQkJCQkJCQkJdGhpcy5kb3dubG9hZGluZyA9ICExOwoJCQkJCQkJCX0KCQkJCQkJCQliID09PSBnIC0gMSAmJiAodGhpcy5kb3dubG9hZGluZyA9ICExKTsKCQkJCQkJCX0pLmFkZEV2ZW50TGlzdGVuZXIoImRvd25sb2FkQXVkaW9FcnJvciIsIGFzeW5jIChkKSA9PiB7CgkJCQkJCQkJaWYgKCF0aGlzLmRvd25sb2FkaW5nKSB7CgkJCQkJCQkJCXYuQS5sb2coInNraXAgZG93bmxvYWRBdWRpb0Vycm9yIik7CgkJCQkJCQkJCXJldHVybjsKCQkJCQkJCQl9CgkJCQkJCQkJdi5BLmxvZyhgRmFpbGVkIHRvIGRvd25sb2FkIGF1ZGlvICR7ZH1gKTsKCQkJCQkJCQlsZXQgZiA9IHRoaXMuZ2V0Q2Fub25pY2FsVXJsKGQpOwoJCQkJCQkJCWF3YWl0IHRoaXMudmlkZW9IYW5kbGVyLnZvdENsaWVudC5yZXF1ZXN0VnRyYW5zRmFpbEF1ZGlvKGYpLCB0aGlzLmRvd25sb2FkaW5nID0gITE7CgkJCQkJCQl9KTsKCQkJCQkJfQoJCQkJCQlnZXRDYW5vbmljYWxVcmwoZCkgewoJCQkJCQkJcmV0dXJuIGBodHRwczovL3lvdXR1LmJlLyR7ZH1gOwoJCQkJCQl9CgkJCQkJCWlzV2FpdGluZ1N0cmVhbVJlcyhkKSB7CgkJCQkJCQlyZXR1cm4gISFkLm1lc3NhZ2U7CgkJCQkJCX0KCQkJCQkJYXN5bmMgdHJhbnNsYXRlVmlkZW9JbXBsKGQsIGYsIHAsIG0gPSBudWxsLCBnID0gITEsIEMgPSBuZXcgQWJvcnRDb250cm9sbGVyKCkuc2lnbmFsKSB7CgkJCQkJCQljbGVhclRpbWVvdXQodGhpcy52aWRlb0hhbmRsZXIuYXV0b1JldHJ5KSwgdGhpcy5kb3dubG9hZGluZyA9ICExLCB2LkEubG9nKGQsIGBUcmFuc2xhdGUgdmlkZW8gKHJlcXVlc3RMYW5nOiAke2Z9LCByZXNwb25zZUxhbmc6ICR7cH0pYCk7CgkJCQkJCQl0cnkgewoJCQkJCQkJCWlmIChDLmFib3J0ZWQpIHRocm93IEVycm9yKCJBYm9ydEVycm9yIik7CgkJCQkJCQkJbGV0IHcgPSB0aGlzLnZpZGVvSGFuZGxlci5pc0xpdmVseVZvaWNlQWxsb3dlZCgpICYmIHRoaXMudmlkZW9IYW5kbGVyLmRhdGE/LnVzZUxpdmVseVZvaWNlLCBUID0gYXdhaXQgdGhpcy52aWRlb0hhbmRsZXIudm90Q2xpZW50LnRyYW5zbGF0ZVZpZGVvKHsKCQkJCQkJCQkJdmlkZW9EYXRhOiBkLAoJCQkJCQkJCQlyZXF1ZXN0TGFuZzogZiwKCQkJCQkJCQkJcmVzcG9uc2VMYW5nOiBwLAoJCQkJCQkJCQl0cmFuc2xhdGlvbkhlbHA6IG0sCgkJCQkJCQkJCWV4dHJhT3B0czogewoJCQkJCQkJCQkJdXNlTGl2ZWx5Vm9pY2U6IHcsCgkJCQkJCQkJCQl2aWRlb1RpdGxlOiB0aGlzLnZpZGVvSGFuZGxlci52aWRlb0RhdGE/LnRpdGxlCgkJCQkJCQkJCX0sCgkJCQkJCQkJCXNob3VsZFNlbmRGYWlsZWRBdWRpbzogZwoJCQkJCQkJCX0pOwoJCQkJCQkJCWlmICh2LkEubG9nKCJUcmFuc2xhdGUgdmlkZW8gcmVzdWx0IiwgVCksIEMuYWJvcnRlZCkgdGhyb3cgRXJyb3IoIkFib3J0RXJyb3IiKTsKCQkJCQkJCQlpZiAoVC50cmFuc2xhdGVkICYmIFQucmVtYWluaW5nVGltZSA8IDEpIHJldHVybiB2LkEubG9nKCJWaWRlbyB0cmFuc2xhdGlvbiBmaW5pc2hlZCB3aXRoIHRoaXMgZGF0YTogIiwgVCksIFQ7CgkJCQkJCQkJbGV0IEUgPSBULm1lc3NhZ2UgPz8gXy5qLmdldCgidHJhbnNsYXRpb25UYWtlRmV3TWludXRlcyIpOwoJCQkJCQkJCWlmIChhd2FpdCB0aGlzLnZpZGVvSGFuZGxlci51cGRhdGVUcmFuc2xhdGlvbkVycm9yTXNnKFQucmVtYWluaW5nVGltZSA+IDAgPyAoMCwgYi5vKShULnJlbWFpbmluZ1RpbWUpIDogRSksIFQuc3RhdHVzID09PSBoLnYuQVVESU9fUkVRVUVTVEVEICYmIHRoaXMudmlkZW9IYW5kbGVyLmlzWW91VHViZUhvc3RzKCkpIHsKCQkJCQkJCQkJaWYgKHYuQS5sb2coIlN0YXJ0IGF1ZGlvIGRvd25sb2FkIiksIHRoaXMuZG93bmxvYWRpbmcgPSAhMCwgYXdhaXQgdGhpcy5hdWRpb0Rvd25sb2FkZXIucnVuQXVkaW9Eb3dubG9hZChkLnZpZGVvSWQsIFQudHJhbnNsYXRpb25JZCwgQyksIHYuQS5sb2coIndhaXRpbmcgZG93bmxvYWRpbmcgZmluaXNoIiksIGF3YWl0ICgwLCB4LlVWKSgoKSA9PiAhdGhpcy5kb3dubG9hZGluZyB8fCBDLmFib3J0ZWQsIDE1ZTMpLCBDLmFib3J0ZWQpIHRocm93IHYuQS5sb2coImFib3J0ZWQgYWZ0ZXIgYXVkaW8gZG93bmxvYWRlciB2dHJhbnMiKSwgRXJyb3IoIkFib3J0RXJyb3IiKTsKCQkJCQkJCQkJcmV0dXJuIGF3YWl0IHRoaXMudHJhbnNsYXRlVmlkZW9JbXBsKGQsIGYsIHAsIG0sICEwLCBDKTsKCQkJCQkJCQl9CgkJCQkJCQl9IGNhdGNoIChtKSB7CgkJCQkJCQkJaWYgKG0ubWVzc2FnZSA9PT0gIkFib3J0RXJyb3IiKSByZXR1cm4gdi5BLmxvZygiYWJvcnRlZCB2aWRlbyB0cmFuc2xhdGlvbiIpLCBudWxsOwoJCQkJCQkJCWF3YWl0IHRoaXMudmlkZW9IYW5kbGVyLnVwZGF0ZVRyYW5zbGF0aW9uRXJyb3JNc2cobS5kYXRhPy5tZXNzYWdlID8/IG0pLCBjb25zb2xlLmVycm9yKCJbVk9UXSIsIG0pOwoJCQkJCQkJCWxldCBoID0gYCR7ZC52aWRlb0lkfV8ke2Z9XyR7cH1fJHt0aGlzLnZpZGVvSGFuZGxlci5kYXRhPy51c2VMaXZlbHlWb2ljZX1gOwoJCQkJCQkJCXJldHVybiB0aGlzLnZpZGVvSGFuZGxlci5jYWNoZU1hbmFnZXIuc2V0VHJhbnNsYXRpb24oaCwgeyBlcnJvcjogbSB9KSwgbnVsbDsKCQkJCQkJCX0KCQkJCQkJCXJldHVybiBuZXcgUHJvbWlzZSgoaCkgPT4gewoJCQkJCQkJCXRoaXMudmlkZW9IYW5kbGVyLmF1dG9SZXRyeSA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gewoJCQkJCQkJCQloKGF3YWl0IHRoaXMudHJhbnNsYXRlVmlkZW9JbXBsKGQsIGYsIHAsIG0sICEwLCBDKSk7CgkJCQkJCQkJfSwgMmU0KTsKCQkJCQkJCX0pOwoJCQkJCQl9CgkJCQkJCWFzeW5jIHRyYW5zbGF0ZVN0cmVhbUltcGwoZCwgZiwgcCwgbSA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKS5zaWduYWwpIHsKCQkJCQkJCWNsZWFyVGltZW91dCh0aGlzLnZpZGVvSGFuZGxlci5hdXRvUmV0cnkpLCB2LkEubG9nKGQsIGBUcmFuc2xhdGUgc3RyZWFtIChyZXF1ZXN0TGFuZzogJHtmfSwgcmVzcG9uc2VMYW5nOiAke3B9KWApOwoJCQkJCQkJdHJ5IHsKCQkJCQkJCQlpZiAobS5hYm9ydGVkKSB0aHJvdyBFcnJvcigiQWJvcnRFcnJvciIpOwoJCQkJCQkJCWxldCBoID0gYXdhaXQgdGhpcy52aWRlb0hhbmRsZXIudm90Q2xpZW50LnRyYW5zbGF0ZVN0cmVhbSh7CgkJCQkJCQkJCXZpZGVvRGF0YTogZCwKCQkJCQkJCQkJcmVxdWVzdExhbmc6IGYsCgkJCQkJCQkJCXJlc3BvbnNlTGFuZzogcAoJCQkJCQkJCX0pOwoJCQkJCQkJCWlmIChtLmFib3J0ZWQpIHRocm93IEVycm9yKCJBYm9ydEVycm9yIik7CgkJCQkJCQkJaWYgKHYuQS5sb2coIlRyYW5zbGF0ZSBzdHJlYW0gcmVzdWx0IiwgaCksICFoLnRyYW5zbGF0ZWQgJiYgaC5pbnRlcnZhbCA9PT0gMTApIHJldHVybiBhd2FpdCB0aGlzLnZpZGVvSGFuZGxlci51cGRhdGVUcmFuc2xhdGlvbkVycm9yTXNnKF8uai5nZXQoInRyYW5zbGF0aW9uVGFrZUZld01pbnV0ZXMiKSksIG5ldyBQcm9taXNlKChnKSA9PiB7CgkJCQkJCQkJCXRoaXMudmlkZW9IYW5kbGVyLmF1dG9SZXRyeSA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gewoJCQkJCQkJCQkJZyhhd2FpdCB0aGlzLnRyYW5zbGF0ZVN0cmVhbUltcGwoZCwgZiwgcCwgbSkpOwoJCQkJCQkJCQl9LCBoLmludGVydmFsICogMWUzKTsKCQkJCQkJCQl9KTsKCQkJCQkJCQlpZiAodGhpcy5pc1dhaXRpbmdTdHJlYW1SZXMoaCkpIHRocm93IHYuQS5sb2coYFN0cmVhbSB0cmFuc2xhdGlvbiBhYm9ydGVkISBNZXNzYWdlOiAke2gubWVzc2FnZX1gKSwgbmV3IEMubigic3RyZWFtTm9Db25uZWN0aW9uVG9TZXJ2ZXIiKTsKCQkJCQkJCQlpZiAoIWgucmVzdWx0KSB0aHJvdyB2LkEubG9nKCJGYWlsZWQgdG8gZmluZCB0cmFuc2xhdGlvbiByZXN1bHQhIERhdGE6IiwgaCksIG5ldyBDLm4oImF1ZGlvTm90UmVjZWl2ZWQiKTsKCQkJCQkJCQlyZXR1cm4gdi5BLmxvZygiU3RyZWFtIHRyYW5zbGF0ZWQgc3VjY2Vzc2Z1bGx5LiBSdW5uaW5nLi4uIiwgaCksIHRoaXMudmlkZW9IYW5kbGVyLnN0cmVhbVBpbmcgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7CgkJCQkJCQkJCXYuQS5sb2coIlBpbmcgc3RyZWFtIHRyYW5zbGF0aW9uIiwgaC5waW5nSWQpLCB0aGlzLnZpZGVvSGFuZGxlci52b3RDbGllbnQucGluZ1N0cmVhbSh7IHBpbmdJZDogaC5waW5nSWQgfSk7CgkJCQkJCQkJfSwgaC5pbnRlcnZhbCAqIDFlMyksIGg7CgkJCQkJCQl9IGNhdGNoIChkKSB7CgkJCQkJCQkJcmV0dXJuIGQubWVzc2FnZSA9PT0gIkFib3J0RXJyb3IiID8gKHYuQS5sb2coImFib3J0ZWQgc3RyZWFtIHRyYW5zbGF0aW9uIiksIG51bGwpIDogKGNvbnNvbGUuZXJyb3IoIltWT1RdIEZhaWxlZCB0byB0cmFuc2xhdGUgc3RyZWFtIiwgZCksIGF3YWl0IHRoaXMudmlkZW9IYW5kbGVyLnVwZGF0ZVRyYW5zbGF0aW9uRXJyb3JNc2coZC5kYXRhPy5tZXNzYWdlID8/IGQpLCBudWxsKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCQltKCk7CgkJCQl9IGNhdGNoIChkKSB7CgkJCQkJbShkKTsKCQkJCX0KCQkJfSk7CgkJfSwKCQkiLi9zcmMvY29yZS92aWRlb01hbmFnZXIudHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgeyBrOiAoKSA9PiBWT1RWaWRlb01hbmFnZXIgfSk7CgkJCQkJdmFyIGggPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2V4dC9kaXN0L3V0aWxzL3ZpZGVvRGF0YS5qcyIpLCBnID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9zaGFyZWQvZGlzdC9kYXRhL2NvbmZpZy5qcyIpLCBfID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9zaGFyZWQvZGlzdC9kYXRhL2NvbnN0cy5qcyIpLCB2ID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9leHQvZGlzdC9oZWxwZXJzL3lvdXR1YmUuanMiKSwgYiA9IHAoIi4vc3JjL2xvY2FsaXphdGlvbi9sb2NhbGl6YXRpb25Qcm92aWRlci50cyIpLCB4ID0gcCgiLi9zcmMvdXRpbHMvVk9UTG9jYWxpemVkRXJyb3IuanMiKSwgQyA9IHAoIi4vc3JjL3V0aWxzL2RlYnVnLnRzIiksIHcgPSBwKCIuL3NyYy91dGlscy9nbS50cyIpLCBUID0gcCgiLi9zcmMvdXRpbHMvdHJhbnNsYXRlQXBpcy50cyIpLCBFID0gcCgiLi9zcmMvdXRpbHMvdXRpbHMudHMiKSwgRCA9IGQoWwoJCQkJCQliLAoJCQkJCQl4LAoJCQkJCQl3LAoJCQkJCQlULAoJCQkJCQlFCgkJCQkJXSk7CgkJCQkJW2IsIHgsIHcsIFQsIEVdID0gRC50aGVuID8gKGF3YWl0IEQpKCkgOiBEOwoJCQkJCWNsYXNzIFZPVFZpZGVvTWFuYWdlciB7CgkJCQkJCXZpZGVvSGFuZGxlcjsKCQkJCQkJY29uc3RydWN0b3IoZCkgewoJCQkJCQkJdGhpcy52aWRlb0hhbmRsZXIgPSBkOwoJCQkJCQl9CgkJCQkJCWFzeW5jIGdldFZpZGVvRGF0YSgpIHsKCQkJCQkJCWxldCB7IGR1cmF0aW9uOiBkLCB1cmw6IGYsIHZpZGVvSWQ6IHAsIGhvc3Q6IG0sIHRpdGxlOiB2LCB0cmFuc2xhdGlvbkhlbHA6IHggPSBudWxsLCBsb2NhbGl6ZWRUaXRsZTogRCwgZGVzY3JpcHRpb246IE8sIGRldGVjdGVkTGFuZ3VhZ2U6IEEsIHN1YnRpdGxlczogaiwgaXNTdHJlYW06IEYgPSAhMSB9ID0gYXdhaXQgKDAsIGgubzQpKHRoaXMudmlkZW9IYW5kbGVyLnNpdGUsIHsKCQkJCQkJCQlmZXRjaEZuOiB3LkczLAoJCQkJCQkJCXZpZGVvOiB0aGlzLnZpZGVvSGFuZGxlci52aWRlbywKCQkJCQkJCQlsYW5ndWFnZTogYi5qLmxhbmcKCQkJCQkJCX0pLCBVID0gQSA/PyB0aGlzLnZpZGVvSGFuZGxlci50cmFuc2xhdGVGcm9tTGFuZzsKCQkJCQkJCWlmICghQSAmJiB2KSB7CgkJCQkJCQkJbGV0IGQgPSAoMCwgRS5YNSkodiwgTyk7CgkJCQkJCQkJQy5BLmxvZyhgRGV0ZWN0aW5nIGxhbmd1YWdlIHRleHQ6ICR7ZH1gKTsKCQkJCQkJCQlsZXQgZiA9IGF3YWl0ICgwLCBULm8wKShkKTsKCQkJCQkJCQlfLnhtLmluY2x1ZGVzKGYpICYmIChVID0gZik7CgkJCQkJCQl9CgkJCQkJCQlsZXQgVyA9IHsKCQkJCQkJCQl0cmFuc2xhdGlvbkhlbHA6IHgsCgkJCQkJCQkJaXNTdHJlYW06IEYsCgkJCQkJCQkJZHVyYXRpb246IGQgfHwgdGhpcy52aWRlb0hhbmRsZXIudmlkZW8/LmR1cmF0aW9uIHx8IGcuQS5kZWZhdWx0RHVyYXRpb24sCgkJCQkJCQkJdmlkZW9JZDogcCwKCQkJCQkJCQl1cmw6IGYsCgkJCQkJCQkJaG9zdDogbSwKCQkJCQkJCQlkZXRlY3RlZExhbmd1YWdlOiBVLAoJCQkJCQkJCXJlc3BvbnNlTGFuZ3VhZ2U6IHRoaXMudmlkZW9IYW5kbGVyLnRyYW5zbGF0ZVRvTGFuZywKCQkJCQkJCQlzdWJ0aXRsZXM6IGosCgkJCQkJCQkJdGl0bGU6IHYsCgkJCQkJCQkJbG9jYWxpemVkVGl0bGU6IEQsCgkJCQkJCQkJZG93bmxvYWRUaXRsZTogRCA/PyB2ID8/IHAKCQkJCQkJCX07CgkJCQkJCQlpZiAoY29uc29sZS5sb2coIltWT1RdIERldGVjdGVkIGxhbmd1YWdlOiIsIFUpLCBbCgkJCQkJCQkJInJ1dHViZSIsCgkJCQkJCQkJIm9rLnJ1IiwKCQkJCQkJCQkibWFpbF9ydSIKCQkJCQkJCV0uaW5jbHVkZXModGhpcy52aWRlb0hhbmRsZXIuc2l0ZS5ob3N0KSkgVy5kZXRlY3RlZExhbmd1YWdlID0gInJ1IjsKCQkJCQkJCWVsc2UgaWYgKHRoaXMudmlkZW9IYW5kbGVyLnNpdGUuaG9zdCA9PT0gInlvdWt1IikgVy5kZXRlY3RlZExhbmd1YWdlID0gInpoIjsKCQkJCQkJCWVsc2UgaWYgKHRoaXMudmlkZW9IYW5kbGVyLnNpdGUuaG9zdCA9PT0gInZrIikgewoJCQkJCQkJCWxldCBkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRyYWNrIik/LlswXT8uc3JjbGFuZzsKCQkJCQkJCQlXLmRldGVjdGVkTGFuZ3VhZ2UgPSBkIHx8ICJhdXRvIjsKCQkJCQkJCX0gZWxzZSB0aGlzLnZpZGVvSGFuZGxlci5zaXRlLmhvc3QgPT09ICJ3ZXZlcnNlIiAmJiAoVy5kZXRlY3RlZExhbmd1YWdlID0gImtvIik7CgkJCQkJCQlyZXR1cm4gVzsKCQkJCQkJfQoJCQkJCQl2aWRlb1ZhbGlkYXRvcigpIHsKCQkJCQkJCWlmICghdGhpcy52aWRlb0hhbmRsZXIudmlkZW9EYXRhIHx8ICF0aGlzLnZpZGVvSGFuZGxlci5kYXRhKSB0aHJvdyBuZXcgeC5uKCJWT1ROb1ZpZGVvSURGb3VuZCIpOwoJCQkJCQkJaWYgKEMuQS5sb2coIlZpZGVvVmFsaWRhdG9yIHZpZGVvRGF0YTogIiwgdGhpcy52aWRlb0hhbmRsZXIudmlkZW9EYXRhKSwgdGhpcy52aWRlb0hhbmRsZXIuZGF0YS5lbmFibGVkRG9udFRyYW5zbGF0ZUxhbmd1YWdlcyAmJiB0aGlzLnZpZGVvSGFuZGxlci5kYXRhLmRvbnRUcmFuc2xhdGVMYW5ndWFnZXM/LmluY2x1ZGVzKHRoaXMudmlkZW9IYW5kbGVyLnZpZGVvRGF0YS5kZXRlY3RlZExhbmd1YWdlKSkgdGhyb3cgbmV3IHgubigiVk9URGlzYWJsZUZyb21Zb3VyTGFuZyIpOwoJCQkJCQkJaWYgKHRoaXMudmlkZW9IYW5kbGVyLnNpdGUuaG9zdCA9PT0gInR3aXRjaCIgJiYgdGhpcy52aWRlb0hhbmRsZXIudmlkZW9EYXRhLmlzU3RyZWFtKSB0aHJvdyBuZXcgeC5uKCJWT1RTdHJlYW1Ob3RBdmFpbGFibGUiKTsKCQkJCQkJCWlmICghdGhpcy52aWRlb0hhbmRsZXIudmlkZW9EYXRhLmlzU3RyZWFtICYmIHRoaXMudmlkZW9IYW5kbGVyLnZpZGVvRGF0YS5kdXJhdGlvbiA+IDE0NDAwKSB0aHJvdyBuZXcgeC5uKCJWT1RWaWRlb0lzVG9vTG9uZyIpOwoJCQkJCQkJcmV0dXJuICEwOwoJCQkJCQl9CgkJCQkJCWdldFZpZGVvVm9sdW1lKCkgewoJCQkJCQkJbGV0IGQgPSB0aGlzLnZpZGVvSGFuZGxlci52aWRlbz8udm9sdW1lOwoJCQkJCQkJcmV0dXJuIFsieW91dHViZSIsICJnb29nbGVkcml2ZSJdLmluY2x1ZGVzKHRoaXMudmlkZW9IYW5kbGVyLnNpdGUuaG9zdCkgJiYgKGQgPSB2LkEuZ2V0Vm9sdW1lKCkgPz8gZCksIGQ7CgkJCQkJCX0KCQkJCQkJc2V0VmlkZW9Wb2x1bWUoZCkgewoJCQkJCQkJaWYgKCFbInlvdXR1YmUiLCAiZ29vZ2xlZHJpdmUiXS5pbmNsdWRlcyh0aGlzLnZpZGVvSGFuZGxlci5zaXRlLmhvc3QpKSByZXR1cm4gdGhpcy52aWRlb0hhbmRsZXIudmlkZW8udm9sdW1lID0gZCwgdGhpczsKCQkJCQkJCWxldCBmID0gdi5BLnNldFZvbHVtZShkKTsKCQkJCQkJCXJldHVybiBmIHx8ICh0aGlzLnZpZGVvSGFuZGxlci52aWRlby52b2x1bWUgPSBkKSwgdGhpczsKCQkJCQkJfQoJCQkJCQlpc011dGVkKCkgewoJCQkJCQkJcmV0dXJuIFsieW91dHViZSIsICJnb29nbGVkcml2ZSJdLmluY2x1ZGVzKHRoaXMudmlkZW9IYW5kbGVyLnNpdGUuaG9zdCkgPyB2LkEuaXNNdXRlZCgpIDogdGhpcy52aWRlb0hhbmRsZXIudmlkZW8/Lm11dGVkOwoJCQkJCQl9CgkJCQkJCXN5bmNWaWRlb1ZvbHVtZVNsaWRlcigpIHsKCQkJCQkJCWxldCBkID0gdGhpcy5pc011dGVkKCkgPyAwIDogdGhpcy5nZXRWaWRlb1ZvbHVtZSgpICogMTAwLCBmID0gTWF0aC5yb3VuZChkKTsKCQkJCQkJCXJldHVybiB0aGlzLnZpZGVvSGFuZGxlci5kYXRhPy5zeW5jVm9sdW1lICYmICh0aGlzLnZpZGVvSGFuZGxlci50ZW1wT3JpZ2luYWxWb2x1bWUgPSBOdW1iZXIoZikpLCB0aGlzLnZpZGVvSGFuZGxlci51aU1hbmFnZXIudm90T3ZlcmxheVZpZXc/LmlzSW5pdGlhbGl6ZWQoKSAmJiAodGhpcy52aWRlb0hhbmRsZXIudWlNYW5hZ2VyLnZvdE92ZXJsYXlWaWV3LnZpZGVvVm9sdW1lU2xpZGVyLnZhbHVlID0gZiksIHRoaXM7CgkJCQkJCX0KCQkJCQkJc2V0U2VsZWN0TWVudVZhbHVlcyhkLCBmKSB7CgkJCQkJCQlpZiAoIXRoaXMudmlkZW9IYW5kbGVyLnVpTWFuYWdlci52b3RPdmVybGF5Vmlldz8uaXNJbml0aWFsaXplZCgpIHx8ICF0aGlzLnZpZGVvSGFuZGxlci52aWRlb0RhdGEpIHJldHVybiB0aGlzOwoJCQkJCQkJY29uc29sZS5sb2coYFtWT1RdIFNldCB0cmFuc2xhdGlvbiBmcm9tICR7ZH0gdG8gJHtmfWApLCB0aGlzLnZpZGVvSGFuZGxlci51aU1hbmFnZXIudm90T3ZlcmxheVZpZXcubGFuZ3VhZ2VQYWlyU2VsZWN0LmZyb21TZWxlY3Quc2VsZWN0VGl0bGUgPSBiLmouZ2V0KGBsYW5ncy4ke2R9YCksIHRoaXMudmlkZW9IYW5kbGVyLnVpTWFuYWdlci52b3RPdmVybGF5Vmlldy5sYW5ndWFnZVBhaXJTZWxlY3QudG9TZWxlY3Quc2VsZWN0VGl0bGUgPSBiLmouZ2V0KGBsYW5ncy4ke2Z9YCksIHRoaXMudmlkZW9IYW5kbGVyLnVpTWFuYWdlci52b3RPdmVybGF5Vmlldy5sYW5ndWFnZVBhaXJTZWxlY3QuZnJvbVNlbGVjdC5zZXRTZWxlY3RlZFZhbHVlKGQpLCB0aGlzLnZpZGVvSGFuZGxlci51aU1hbmFnZXIudm90T3ZlcmxheVZpZXcubGFuZ3VhZ2VQYWlyU2VsZWN0LnRvU2VsZWN0LnNldFNlbGVjdGVkVmFsdWUoZiksIHRoaXMudmlkZW9IYW5kbGVyLnZpZGVvRGF0YS5kZXRlY3RlZExhbmd1YWdlID0gZCwgdGhpcy52aWRlb0hhbmRsZXIudmlkZW9EYXRhLnJlc3BvbnNlTGFuZ3VhZ2UgPSBmOwoJCQkJCQl9CgkJCQkJfQoJCQkJCW0oKTsKCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQltKGQpOwoJCQkJfQoJCQl9KTsKCQl9LAoJCSIuL3NyYy9pbmRleC5qcyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5hKGQsIGFzeW5jIChkLCBtKSA9PiB7CgkJCQl0cnkgewoJCQkJCXAuZChmLCB7IGs6ICgpID0+IFEgfSk7CgkJCQkJdmFyIGggPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2V4dC9kaXN0L2luZGV4LmpzIiksIGcgPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2V4dC9kaXN0L2hlbHBlcnMveW91dHViZS5qcyIpLCBfID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9leHQvZGlzdC91dGlscy92aWRlb0RhdGEuanMiKSwgdiA9IHAoIi4vbm9kZV9tb2R1bGVzL2NoYWltdS9kaXN0L2luZGV4LmpzIiksIGIgPSBwKCIuL3NyYy9hdWRpb0Rvd25sb2FkZXIvaWZyYW1lLnRzIiksIHggPSBwKCIuL3NyYy9jb25maWcvY29uZmlnLmpzIiksIEMgPSBwKCIuL3NyYy9jb3JlL2F1dGgudHMiKSwgdyA9IHAoIi4vc3JjL2NvcmUvY2FjaGVNYW5hZ2VyLnRzIiksIFQgPSBwKCIuL3NyYy9jb3JlL3RyYW5zbGF0aW9uSGFuZGxlci50cyIpLCBFID0gcCgiLi9zcmMvY29yZS92aWRlb01hbmFnZXIudHMiKSwgRCA9IHAoIi4vc3JjL2xvY2FsaXphdGlvbi9sb2NhbGl6YXRpb25Qcm92aWRlci50cyIpLCBPID0gcCgiLi9zcmMvc3VidGl0bGVzLmpzIiksIEEgPSBwKCIuL3NyYy91aS9jb21wb25lbnRzL2hvdGtleUJ1dHRvbi50cyIpLCBqID0gcCgiLi9zcmMvdWkvbWFuYWdlci50cyIpLCBGID0gcCgiLi9zcmMvdXRpbHMvZGVidWcudHMiKSwgVSA9IHAoIi4vc3JjL3V0aWxzL2dtLnRzIiksIFcgPSBwKCIuL3NyYy91dGlscy9pZnJhbWVDb25uZWN0b3IudHMiKSwgRyA9IHAoIi4vc3JjL3V0aWxzL3N0b3JhZ2UudHMiKSwgSyA9IHAoIi4vc3JjL3V0aWxzL3RyYW5zbGF0ZUFwaXMudHMiKSwgcSA9IHAoIi4vc3JjL3V0aWxzL3V0aWxzLnRzIiksIEogPSBwKCIuL3NyYy91dGlscy9WaWRlb09ic2VydmVyLmpzIiksIFkgPSBwKCIuL3NyYy91dGlscy9WT1RMb2NhbGl6ZWRFcnJvci5qcyIpLCBYID0gcCgiLi9zcmMvdXRpbHMvdm9sdW1lLnRzIiksIFogPSBkKFsKCQkJCQkJaCwKCQkJCQkJYiwKCQkJCQkJQywKCQkJCQkJVCwKCQkJCQkJRSwKCQkJCQkJRCwKCQkJCQkJTywKCQkJCQkJQSwKCQkJCQkJaiwKCQkJCQkJVSwKCQkJCQkJVywKCQkJCQkJRywKCQkJCQkJSywKCQkJCQkJcSwKCQkJCQkJWQoJCQkJCV0pOwoJCQkJCVtoLCBiLCBDLCBULCBFLCBELCBPLCBBLCBqLCBVLCBXLCBHLCBLLCBxLCBZXSA9IFoudGhlbiA/IChhd2FpdCBaKSgpIDogWjsKCQkJCQlsZXQgUTsKCQkJCQljbGFzcyBWaWRlb0hhbmRsZXIgewoJCQkJCQl0cmFuc2xhdGVGcm9tTGFuZyA9ICJhdXRvIjsKCQkJCQkJdHJhbnNsYXRlVG9MYW5nID0gcS5IRDsKCQkJCQkJdGltZXI7CgkJCQkJCWRhdGE7CgkJCQkJCXZpZGVvRGF0YTsKCQkJCQkJZmlyc3RQbGF5ID0gITA7CgkJCQkJCWF1ZGlvQ29udGV4dCA9ICgwLCB2LkdaKSgpOwoJCQkJCQlobHM7CgkJCQkJCXZvdENsaWVudDsKCQkJCQkJYXVkaW9QbGF5ZXI7CgkJCQkJCWFib3J0Q29udHJvbGxlcjsKCQkJCQkJYWN0aW9uc0Fib3J0Q29udHJvbGxlcjsKCQkJCQkJY2FjaGVNYW5hZ2VyOwoJCQkJCQlkb3dubG9hZFRyYW5zbGF0aW9uVXJsID0gbnVsbDsKCQkJCQkJYXV0b1JldHJ5OwoJCQkJCQlzdHJlYW1QaW5nOwoJCQkJCQl2b3RPcHRzOwoJCQkJCQl2b2x1bWVPblN0YXJ0OwoJCQkJCQl0ZW1wT3JpZ2luYWxWb2x1bWU7CgkJCQkJCXRlbXBWb2x1bWU7CgkJCQkJCWZpcnN0U3luY1ZvbHVtZSA9ICEwOwoJCQkJCQlsb25nV2FpdGluZ1Jlc0NvdW50ID0gMDsKCQkJCQkJc3VidGl0bGVzID0gW107CgkJCQkJCWNvbnN0cnVjdG9yKGQsIGYsIHApIHsKCQkJCQkJCUYuQS5sb2coIltWaWRlb0hhbmRsZXJdIGFkZCB2aWRlbzoiLCBkLCAiY29udGFpbmVyOiIsIGYsIHRoaXMpLCB0aGlzLnZpZGVvID0gZCwgdGhpcy5jb250YWluZXIgPSBmLCB0aGlzLnNpdGUgPSBwLCB0aGlzLmFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKSwgdGhpcy5hY3Rpb25zQWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpLCB0aGlzLnVpTWFuYWdlciA9IG5ldyBqLm8oewoJCQkJCQkJCXJvb3Q6IHRoaXMuY29udGFpbmVyLAoJCQkJCQkJCXBvcnRhbENvbnRhaW5lcjogdGhpcy5nZXRQb3J0YWxDb250YWluZXIoKSwKCQkJCQkJCQl0b29sdGlwTGF5b3V0Um9vdDogdGhpcy5nZXRUb29sdGlwTGF5b3V0Um9vdCgpLAoJCQkJCQkJCWRhdGE6IHRoaXMuZGF0YSwKCQkJCQkJCQl2aWRlb0hhbmRsZXI6IHRoaXMKCQkJCQkJCX0pLCB0aGlzLnRyYW5zbGF0aW9uSGFuZGxlciA9IG5ldyBULkYodGhpcyksIHRoaXMudmlkZW9NYW5hZ2VyID0gbmV3IEUuayh0aGlzKSwgdGhpcy5jYWNoZU1hbmFnZXIgPSBuZXcgdy5HKCk7CgkJCQkJCX0KCQkJCQkJZ2V0UG9ydGFsQ29udGFpbmVyKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuc2l0ZS5ob3N0ID09PSAieW91dHViZSIgJiYgdGhpcy5zaXRlLmFkZGl0aW9uYWxEYXRhICE9PSAibW9iaWxlIiA/IHRoaXMuY29udGFpbmVyLnBhcmVudEVsZW1lbnQgOiB0aGlzLmNvbnRhaW5lcjsKCQkJCQkJfQoJCQkJCQlnZXRUb29sdGlwTGF5b3V0Um9vdCgpIHsKCQkJCQkJCXN3aXRjaCAodGhpcy5zaXRlLmhvc3QpIHsKCQkJCQkJCQljYXNlICJraWNrc3RhcnRlciI6IHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVhY3QtcHJvamVjdC1oZWFkZXIiKTsKCQkJCQkJCQljYXNlICJjdXN0b20iOiByZXR1cm47CgkJCQkJCQkJZGVmYXVsdDogcmV0dXJuIHRoaXMuY29udGFpbmVyOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWdldEV2ZW50Q29udGFpbmVyKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuc2l0ZS5ldmVudFNlbGVjdG9yID8gdGhpcy5zaXRlLmhvc3QgPT09ICJ0d2l0dGVyIiA/IHRoaXMuY29udGFpbmVyLmNsb3Nlc3QodGhpcy5zaXRlLmV2ZW50U2VsZWN0b3IpIDogZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLnNpdGUuZXZlbnRTZWxlY3RvcikgOiB0aGlzLmNvbnRhaW5lcjsKCQkJCQkJfQoJCQkJCQlhc3luYyBhdXRvVHJhbnNsYXRlKCkgewoJCQkJCQkJaWYgKHRoaXMuZmlyc3RQbGF5ICYmIHRoaXMuZGF0YS5hdXRvVHJhbnNsYXRlICYmIHRoaXMudmlkZW9EYXRhLnZpZGVvSWQpIHsKCQkJCQkJCQl0aGlzLmZpcnN0UGxheSA9ICExOwoJCQkJCQkJCXRyeSB7CgkJCQkJCQkJCXRoaXMudmlkZW9NYW5hZ2VyLnZpZGVvVmFsaWRhdG9yKCksIGF3YWl0IHRoaXMudWlNYW5hZ2VyLmhhbmRsZVRyYW5zbGF0aW9uQnRuQ2xpY2soKTsKCQkJCQkJCQl9IGNhdGNoIChkKSB7CgkJCQkJCQkJCWNvbnNvbGUuZXJyb3IoIltWT1RdIiwgZCk7CgkJCQkJCQkJCXJldHVybjsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJZ2V0UHJlZmVyQXVkaW8oKSB7CgkJCQkJCQlyZXR1cm4gIXRoaXMuYXVkaW9Db250ZXh0IHx8ICF0aGlzLmRhdGEubmV3QXVkaW9QbGF5ZXIgfHwgdGhpcy52aWRlb0RhdGEuaXNTdHJlYW0gPyAhMCA6IHRoaXMuZGF0YS5uZXdBdWRpb1BsYXllciAmJiAhdGhpcy5kYXRhLm9ubHlCeXBhc3NNZWRpYUNTUCA/ICExIDogIXRoaXMuc2l0ZS5uZWVkQnlwYXNzQ1NQOwoJCQkJCQl9CgkJCQkJCWNyZWF0ZVBsYXllcigpIHsKCQkJCQkJCWxldCBkID0gdGhpcy5nZXRQcmVmZXJBdWRpbygpOwoJCQkJCQkJcmV0dXJuIEYuQS5sb2coInByZWZlckF1ZGlvOiIsIGQpLCB0aGlzLmF1ZGlvUGxheWVyID0gbmV3IHYuQXkoewoJCQkJCQkJCXZpZGVvOiB0aGlzLnZpZGVvLAoJCQkJCQkJCWRlYnVnOiAhMSwKCQkJCQkJCQlmZXRjaEZuOiBVLkczLAoJCQkJCQkJCWZldGNoT3B0czogeyB0aW1lb3V0OiAwIH0sCgkJCQkJCQkJcHJlZmVyQXVkaW86IGQKCQkJCQkJCX0pLCB0aGlzOwoJCQkJCQl9CgkJCQkJCWFzeW5jIGluaXQoKSB7CgkJCQkJCQlpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIHsKCQkJCQkJCQlpZiAodGhpcy5kYXRhID0gYXdhaXQgRy5kLmdldFZhbHVlcyh7CgkJCQkJCQkJCWF1dG9UcmFuc2xhdGU6ICExLAoJCQkJCQkJCQlkb250VHJhbnNsYXRlTGFuZ3VhZ2VzOiBbcS5IRF0sCgkJCQkJCQkJCWVuYWJsZWREb250VHJhbnNsYXRlTGFuZ3VhZ2VzOiAhMCwKCQkJCQkJCQkJZW5hYmxlZEF1dG9Wb2x1bWU6ICEwLAoJCQkJCQkJCQlhdXRvVm9sdW1lOiB4LkpELAoJCQkJCQkJCQlidXR0b25Qb3M6ICJkZWZhdWx0IiwKCQkJCQkJCQkJc2hvd1ZpZGVvU2xpZGVyOiAhMCwKCQkJCQkJCQkJc3luY1ZvbHVtZTogITEsCgkJCQkJCQkJCWRvd25sb2FkV2l0aE5hbWU6IFUueXgsCgkJCQkJCQkJCXNlbmROb3RpZnlPbkNvbXBsZXRlOiAhMSwKCQkJCQkJCQkJc3VidGl0bGVzTWF4TGVuZ3RoOiAzMDAsCgkJCQkJCQkJCWhpZ2hsaWdodFdvcmRzOiAhMSwKCQkJCQkJCQkJc3VidGl0bGVzRm9udFNpemU6IDIwLAoJCQkJCQkJCQlzdWJ0aXRsZXNPcGFjaXR5OiAyMCwKCQkJCQkJCQkJc3VidGl0bGVzRG93bmxvYWRGb3JtYXQ6ICJzcnQiLAoJCQkJCQkJCQlyZXNwb25zZUxhbmd1YWdlOiBxLkhELAoJCQkJCQkJCQlkZWZhdWx0Vm9sdW1lOiAxMDAsCgkJCQkJCQkJCW9ubHlCeXBhc3NNZWRpYUNTUDogTnVtYmVyKCEhdGhpcy5hdWRpb0NvbnRleHQpLAoJCQkJCQkJCQluZXdBdWRpb1BsYXllcjogTnVtYmVyKCEhdGhpcy5hdWRpb0NvbnRleHQpLAoJCQkJCQkJCQlzaG93UGlQQnV0dG9uOiAhMSwKCQkJCQkJCQkJdHJhbnNsYXRlQVBJRXJyb3JzOiAhMCwKCQkJCQkJCQkJdHJhbnNsYXRpb25TZXJ2aWNlOiB4Lm1FLAoJCQkJCQkJCQlkZXRlY3RTZXJ2aWNlOiB4LksyLAoJCQkJCQkJCQl0cmFuc2xhdGlvbkhvdGtleTogbnVsbCwKCQkJCQkJCQkJbTN1OFByb3h5SG9zdDogeC5zZSwKCQkJCQkJCQkJcHJveHlXb3JrZXJIb3N0OiB4LlBtLAoJCQkJCQkJCQl0cmFuc2xhdGVQcm94eUVuYWJsZWQ6IDAsCgkJCQkJCQkJCXRyYW5zbGF0ZVByb3h5RW5hYmxlZERlZmF1bHQ6ICEwLAoJCQkJCQkJCQlhdWRpb0Jvb3N0ZXI6ICExLAoJCQkJCQkJCQl1c2VMaXZlbHlWb2ljZTogITEsCgkJCQkJCQkJCWF1dG9IaWRlQnV0dG9uRGVsYXk6IHgucVUsCgkJCQkJCQkJCXVzZUF1ZGlvRG93bmxvYWQ6IFUuQjAsCgkJCQkJCQkJCWNvbXBhdFZlcnNpb246ICIiLAoJCQkJCQkJCQlhY2NvdW50OiB7fSwKCQkJCQkJCQkJbG9jYWxlSGFzaDogIiIsCgkJCQkJCQkJCWxvY2FsZVVwZGF0ZWRBdDogMAoJCQkJCQkJCX0pLCB0aGlzLmRhdGEuY29tcGF0VmVyc2lvbiAhPT0geC5yNCAmJiAodGhpcy5kYXRhID0gYXdhaXQgKDAsIEcuXykodGhpcy5kYXRhKSwgYXdhaXQgRy5kLnNldCgiY29tcGF0VmVyc2lvbiIsIHgucjQpKSwgdGhpcy51aU1hbmFnZXIuZGF0YSA9IHRoaXMuZGF0YSwgdGhpcy50ZW1wVm9sdW1lID0gdGhpcy5kYXRhLmRlZmF1bHRWb2x1bWUsIGNvbnNvbGUubG9nKCJbVk9UXSBkYXRhIGZyb20gZGI6ICIsIHRoaXMuZGF0YSksICF0aGlzLmRhdGEudHJhbnNsYXRlUHJveHlFbmFibGVkICYmIFUudXAgJiYgKHRoaXMuZGF0YS50cmFuc2xhdGVQcm94eUVuYWJsZWQgPSAxKSwgIVEpIHRyeSB7CgkJCQkJCQkJCWxldCBkID0gYXdhaXQgKDAsIFUuRzMpKCJodHRwczovL3NwZWVkLmNsb3VkZmxhcmUuY29tL21ldGEiLCB7IHRpbWVvdXQ6IDdlMyB9KTsKCQkJCQkJCQkJKHtjb3VudHJ5OiBRfSA9IGF3YWl0IGQuanNvbigpKTsKCQkJCQkJCQl9IGNhdGNoIChkKSB7CgkJCQkJCQkJCWNvbnNvbGUuZXJyb3IoIltWT1RdIEVycm9yIGdldHRpbmcgY291bnRyeToiLCBkKTsKCQkJCQkJCQl9CgkJCQkJCQkJeC52Wi5pbmNsdWRlcyhRKSAmJiB0aGlzLmRhdGEudHJhbnNsYXRlUHJveHlFbmFibGVkRGVmYXVsdCAmJiAodGhpcy5kYXRhLnRyYW5zbGF0ZVByb3h5RW5hYmxlZCA9IDIpLCBGLkEubG9nKCJ0cmFuc2xhdGVQcm94eUVuYWJsZWQiLCB0aGlzLmRhdGEudHJhbnNsYXRlUHJveHlFbmFibGVkLCB0aGlzLmRhdGEudHJhbnNsYXRlUHJveHlFbmFibGVkRGVmYXVsdCksIEYuQS5sb2coIkV4dGVuc2lvbiBjb21wYXRpYmlsaXR5IHBhc3NlZC4uLiIpLCB0aGlzLmluaXRWT1RDbGllbnQoKSwgdGhpcy51aU1hbmFnZXIuaW5pdFVJKCksIHRoaXMudWlNYW5hZ2VyLmluaXRVSUV2ZW50cygpLCB0aGlzLnN1YnRpdGxlc1dpZGdldCA9IG5ldyBPLm8odGhpcy52aWRlbywgdGhpcy5nZXRQb3J0YWxDb250YWluZXIoKSwgdGhpcy5zaXRlLCB0aGlzLnVpTWFuYWdlci52b3RPdmVybGF5Vmlldy52b3RPdmVybGF5UG9ydGFsLCB0aGlzLmdldFRvb2x0aXBMYXlvdXRSb290KCkpLCB0aGlzLnN1YnRpdGxlc1dpZGdldC5zZXRNYXhMZW5ndGgodGhpcy5kYXRhLnN1YnRpdGxlc01heExlbmd0aCksIHRoaXMuc3VidGl0bGVzV2lkZ2V0LnNldEhpZ2hsaWdodFdvcmRzKHRoaXMuZGF0YS5oaWdobGlnaHRXb3JkcyksIHRoaXMuc3VidGl0bGVzV2lkZ2V0LnNldEZvbnRTaXplKHRoaXMuZGF0YS5zdWJ0aXRsZXNGb250U2l6ZSksIHRoaXMuc3VidGl0bGVzV2lkZ2V0LnNldE9wYWNpdHkodGhpcy5kYXRhLnN1YnRpdGxlc09wYWNpdHkpLCB0aGlzLmNyZWF0ZVBsYXllcigpLCB0aGlzLnNldFNlbGVjdE1lbnVWYWx1ZXModGhpcy52aWRlb0RhdGEuZGV0ZWN0ZWRMYW5ndWFnZSwgdGhpcy5kYXRhLnJlc3BvbnNlTGFuZ3VhZ2UgPz8gInJ1IiksIHRoaXMudHJhbnNsYXRlVG9MYW5nID0gdGhpcy5kYXRhLnJlc3BvbnNlTGFuZ3VhZ2UgPz8gInJ1IiwgdGhpcy5pbml0RXh0cmFFdmVudHMoKSwgYXdhaXQgdGhpcy5hdXRvVHJhbnNsYXRlKCksIHRoaXMuaW5pdGlhbGl6ZWQgPSAhMDsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQlpbml0Vk9UQ2xpZW50KCkgewoJCQkJCQkJcmV0dXJuIHRoaXMudm90T3B0cyA9IHsKCQkJCQkJCQlmZXRjaEZuOiBVLkczLAoJCQkJCQkJCWZldGNoT3B0czogeyBzaWduYWw6IHRoaXMuYWN0aW9uc0Fib3J0Q29udHJvbGxlci5zaWduYWwgfSwKCQkJCQkJCQlhcGlUb2tlbjogdGhpcy5kYXRhLmFjY291bnQ/LnRva2VuLAoJCQkJCQkJCWhvc3RWT1Q6IHgudFosCgkJCQkJCQkJaG9zdDogdGhpcy5kYXRhLnRyYW5zbGF0ZVByb3h5RW5hYmxlZCA/IHRoaXMuZGF0YS5wcm94eVdvcmtlckhvc3QgOiB4LnJsCgkJCQkJCQl9LCB0aGlzLnZvdENsaWVudCA9IG5ldyAodGhpcy5kYXRhLnRyYW5zbGF0ZVByb3h5RW5hYmxlZCA/IGguUHUgOiBoLkF5KSh0aGlzLnZvdE9wdHMpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCXRyYW5zZm9ybUJ0bihkLCBmKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy51aU1hbmFnZXIudHJhbnNmb3JtQnRuKGQsIGYpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCWhhc0FjdGl2ZVNvdXJjZSgpIHsKCQkJCQkJCXJldHVybiAhISh0aGlzLmF1ZGlvUGxheWVyLnBsYXllci5zcmMgfHwgdGhpcy5obHM/LnVybCk7CgkJCQkJCX0KCQkJCQkJaW5pdEV4dHJhRXZlbnRzKCkgewoJCQkJCQkJbGV0IHsgc2lnbmFsOiBkIH0gPSB0aGlzLmFib3J0Q29udHJvbGxlciwgYWRkRXh0cmFFdmVudExpc3RlbmVyID0gKGYsIHAsIG0pID0+IHsKCQkJCQkJCQlmLmFkZEV2ZW50TGlzdGVuZXIocCwgbSwgeyBzaWduYWw6IGQgfSk7CgkJCQkJCQl9LCBhZGRFeHRyYUV2ZW50TGlzdGVuZXJzID0gKGQsIGYsIHApID0+IHsKCQkJCQkJCQlmb3IgKGxldCBtIG9mIGYpIGFkZEV4dHJhRXZlbnRMaXN0ZW5lcihkLCBtLCBwKTsKCQkJCQkJCX07CgkJCQkJCQlpZiAodGhpcy5yZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoZCkgPT4gewoJCQkJCQkJCWZvciAobGV0IGYgb2YgZCkgdGhpcy51aU1hbmFnZXIudm90T3ZlcmxheVZpZXcudm90TWVudS5jb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoIi0tdm90LWNvbnRhaW5lci1oZWlnaHQiLCBgJHtmLmNvbnRlbnRSZWN0LmhlaWdodH1weGApOwoJCQkJCQkJCWxldCB7IHBvc2l0aW9uOiBmLCBkaXJlY3Rpb246IHAgfSA9IHRoaXMudWlNYW5hZ2VyLnZvdE92ZXJsYXlWaWV3LmNhbGNCdXR0b25MYXlvdXQodGhpcy5kYXRhPy5idXR0b25Qb3MpOwoJCQkJCQkJCXRoaXMudWlNYW5hZ2VyLnZvdE92ZXJsYXlWaWV3LnVwZGF0ZUJ1dHRvbkxheW91dChmLCBwKTsKCQkJCQkJCX0pLCB0aGlzLnJlc2l6ZU9ic2VydmVyLm9ic2VydmUodGhpcy52aWRlbyksIHRoaXMudWlNYW5hZ2VyLnZvdE92ZXJsYXlWaWV3LnZvdE1lbnUuY29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KCItLXZvdC1jb250YWluZXItaGVpZ2h0IiwgYCR7dGhpcy52aWRlby5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHR9cHhgKSwgWyJ5b3V0dWJlIiwgImdvb2dsZWRyaXZlIl0uaW5jbHVkZXModGhpcy5zaXRlLmhvc3QpICYmIHRoaXMuc2l0ZS5hZGRpdGlvbmFsRGF0YSAhPT0gIm1vYmlsZSIpIHsKCQkJCQkJCQl0aGlzLnN5bmNWb2x1bWVPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChkKSA9PiB7CgkJCQkJCQkJCWlmICghKCF0aGlzLmF1ZGlvUGxheWVyLnBsYXllci5zcmMgfHwgIXRoaXMuZGF0YS5zeW5jVm9sdW1lKSkgewoJCQkJCQkJCQkJZm9yIChsZXQgZiBvZiBkKSBpZiAoZi50eXBlID09PSAiYXR0cmlidXRlcyIgJiYgZi5hdHRyaWJ1dGVOYW1lID09PSAiYXJpYS12YWx1ZW5vdyIpIHsKCQkJCQkJCQkJCQlpZiAodGhpcy5maXJzdFN5bmNWb2x1bWUpIHsKCQkJCQkJCQkJCQkJdGhpcy5maXJzdFN5bmNWb2x1bWUgPSAhMTsKCQkJCQkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQlsZXQgZCA9IHRoaXMuaXNNdXRlZCgpID8gMCA6IHRoaXMuZ2V0VmlkZW9Wb2x1bWUoKSAqIDEwMCwgZiA9IE1hdGgucm91bmQoZCk7CgkJCQkJCQkJCQkJdGhpcy5kYXRhLmRlZmF1bHRWb2x1bWUgPSBmLCB0aGlzLmF1ZGlvUGxheWVyLnBsYXllci52b2x1bWUgPSB0aGlzLmRhdGEuZGVmYXVsdFZvbHVtZSAvIDEwMCwgdGhpcy5zeW5jVm9sdW1lV3JhcHBlcigidmlkZW8iLCBmKTsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJfQoJCQkJCQkJCX0pOwoJCQkJCQkJCWxldCBkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnl0cC12b2x1bWUtcGFuZWwiKTsKCQkJCQkJCQlkICYmIHRoaXMuc3luY1ZvbHVtZU9ic2VydmVyLm9ic2VydmUoZCwgewoJCQkJCQkJCQlhdHRyaWJ1dGVzOiAhMCwKCQkJCQkJCQkJc3VidHJlZTogITAKCQkJCQkJCQl9KTsKCQkJCQkJCX0KCQkJCQkJCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKGQpID0+IHsKCQkJCQkJCQlsZXQgZiA9IGQudGFyZ2V0LCBwID0gdGhpcy51aU1hbmFnZXIudm90T3ZlcmxheVZpZXcudm90QnV0dG9uLmNvbnRhaW5lciwgbSA9IHRoaXMudWlNYW5hZ2VyLnZvdE92ZXJsYXlWaWV3LnZvdE1lbnUuY29udGFpbmVyLCBoID0gdGhpcy5jb250YWluZXIsIGcgPSB0aGlzLnVpTWFuYWdlci52b3RTZXR0aW5nc1ZpZXcuZGlhbG9nLmNvbnRhaW5lciwgXyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi52b3QtZGlhbG9nLXRlbXAiKSwgdiA9IHAuY29udGFpbnMoZiksIGIgPSBtLmNvbnRhaW5zKGYpLCB4ID0gaC5jb250YWlucyhmKSwgQyA9IGcuY29udGFpbnMoZiksIHcgPSBfPy5jb250YWlucyhmKSA/PyAhMTsKCQkJCQkJCQlGLkEubG9nKGBbZG9jdW1lbnQgY2xpY2tdICR7dn0gJHtifSAke3h9ICR7Q30gJHt3fWApLCAhdiAmJiAhYiAmJiAhQyAmJiAhdyAmJiAoeCB8fCB0aGlzLnVpTWFuYWdlci52b3RPdmVybGF5Vmlldy51cGRhdGVCdXR0b25PcGFjaXR5KDApLCB0aGlzLnVpTWFuYWdlci52b3RPdmVybGF5Vmlldy52b3RNZW51LmhpZGRlbiA9ICEwKTsKCQkJCQkJCX0sIHsgc2lnbmFsOiBkIH0pOwoJCQkJCQkJbGV0IGYgPSBuZXcgU2V0KCk7CgkJCQkJCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgYXN5bmMgKGQpID0+IHsKCQkJCQkJCQlpZiAoZC5yZXBlYXQpIHJldHVybjsKCQkJCQkJCQlmLmFkZChkLmNvZGUpOwoJCQkJCQkJCWxldCBwID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgbSA9IFsiaW5wdXQiLCAidGV4dGFyZWEiXS5pbmNsdWRlcyhwLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkgfHwgcC5pc0NvbnRlbnRFZGl0YWJsZTsKCQkJCQkJCQlpZiAobSkgcmV0dXJuOwoJCQkJCQkJCWxldCBoID0gKDAsIEEuXykoZik7CgkJCQkJCQkJRi5BLmxvZyhgY29tYm86ICR7aH1gKSwgRi5BLmxvZyhgdGhpcy5kYXRhLnRyYW5zbGF0aW9uSG90a2V5OiAke3RoaXMuZGF0YS50cmFuc2xhdGlvbkhvdGtleX1gKSwgaCA9PT0gdGhpcy5kYXRhLnRyYW5zbGF0aW9uSG90a2V5ICYmIGF3YWl0IHRoaXMudWlNYW5hZ2VyLmhhbmRsZVRyYW5zbGF0aW9uQnRuQ2xpY2soKTsKCQkJCQkJCX0sIHsgc2lnbmFsOiBkIH0pLCBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJibHVyIiwgKCkgPT4gewoJCQkJCQkJCWYuY2xlYXIoKTsKCQkJCQkJCX0pLCBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXl1cCIsIChkKSA9PiB7CgkJCQkJCQkJZi5kZWxldGUoZC5jb2RlKTsKCQkJCQkJCX0sIHsgc2lnbmFsOiBkIH0pOwoJCQkJCQkJbGV0IHAgPSB0aGlzLmdldEV2ZW50Q29udGFpbmVyKCk7CgkJCQkJCQlwICYmIGFkZEV4dHJhRXZlbnRMaXN0ZW5lcnMocCwgWyJwb2ludGVybW92ZSIsICJwb2ludGVyb3V0Il0sIHRoaXMucmVzZXRUaW1lciksIGFkZEV4dHJhRXZlbnRMaXN0ZW5lcih0aGlzLnVpTWFuYWdlci52b3RPdmVybGF5Vmlldy52b3RCdXR0b24uY29udGFpbmVyLCAicG9pbnRlcm1vdmUiLCB0aGlzLmNoYW5nZU9wYWNpdHlPbkV2ZW50KSwgYWRkRXh0cmFFdmVudExpc3RlbmVyKHRoaXMudWlNYW5hZ2VyLnZvdE92ZXJsYXlWaWV3LnZvdE1lbnUuY29udGFpbmVyLCAicG9pbnRlcm1vdmUiLCB0aGlzLmNoYW5nZU9wYWNpdHlPbkV2ZW50KSwgdGhpcy5zaXRlLmhvc3QgIT09ICJ4dmlkZW9zIiAmJiBhZGRFeHRyYUV2ZW50TGlzdGVuZXIoZG9jdW1lbnQsICJ0b3VjaG1vdmUiLCB0aGlzLnJlc2V0VGltZXIpLCB0aGlzLnNpdGUuaG9zdCA9PT0gInlvdXR1YmUiICYmICh0aGlzLmNvbnRhaW5lci5kcmFnZ2FibGUgPSAhMSksIGFkZEV4dHJhRXZlbnRMaXN0ZW5lcih0aGlzLnZpZGVvLCAiY2FucGxheSIsIGFzeW5jICgpID0+IHsKCQkJCQkJCQl0aGlzLnNpdGUuaG9zdCA9PT0gInJ1dHViZSIgJiYgdGhpcy52aWRlby5zcmMgfHwgYXdhaXQgdGhpcy5zZXRDYW5QbGF5KCk7CgkJCQkJCQl9KSwgYWRkRXh0cmFFdmVudExpc3RlbmVyKHRoaXMudmlkZW8sICJlbXB0aWVkIiwgYXN5bmMgKCkgPT4gewoJCQkJCQkJCWxldCBkID0gYXdhaXQgKDAsIF8ualkpKHRoaXMuc2l0ZSwgewoJCQkJCQkJCQlmZXRjaEZuOiBVLkczLAoJCQkJCQkJCQl2aWRlbzogdGhpcy52aWRlbwoJCQkJCQkJCX0pOwoJCQkJCQkJCXRoaXMudmlkZW8uc3JjICYmIHRoaXMudmlkZW9EYXRhICYmIGQgPT09IHRoaXMudmlkZW9EYXRhLnZpZGVvSWQgfHwgKEYuQS5sb2coImxpcHN5bmMgbW9kZSBpcyBlbXB0aWVkIiksIHRoaXMudmlkZW9EYXRhID0gdm9pZCAwLCB0aGlzLnN0b3BUcmFuc2xhdGlvbigpKTsKCQkJCQkJCX0pLCBbInJ1dHViZSIsICJvayJdLmluY2x1ZGVzKHRoaXMuc2l0ZS5ob3N0KSB8fCBhZGRFeHRyYUV2ZW50TGlzdGVuZXIodGhpcy52aWRlbywgInZvbHVtZWNoYW5nZSIsICgpID0+IHsKCQkJCQkJCQl0aGlzLnN5bmNWaWRlb1ZvbHVtZVNsaWRlcigpOwoJCQkJCQkJfSksIHRoaXMuc2l0ZS5ob3N0ID09PSAieW91dHViZSIgJiYgIXRoaXMuc2l0ZS5hZGRpdGlvbmFsRGF0YSAmJiBhZGRFeHRyYUV2ZW50TGlzdGVuZXIoZG9jdW1lbnQsICJ5dC1wYWdlLWRhdGEtdXBkYXRlZCIsIGFzeW5jICgpID0+IHsKCQkJCQkJCQlGLkEubG9nKCJ5dC1wYWdlLWRhdGEtdXBkYXRlZCIpLCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuaW5jbHVkZXMoIi9zaG9ydHMvIikgJiYgYXdhaXQgdGhpcy5zZXRDYW5QbGF5KCk7CgkJCQkJCQl9KTsKCQkJCQkJfQoJCQkJCQlhc3luYyBzZXRDYW5QbGF5KCkgewoJCQkJCQkJbGV0IGQgPSBhd2FpdCAoMCwgXy5qWSkodGhpcy5zaXRlLCB7CgkJCQkJCQkJZmV0Y2hGbjogVS5HMywKCQkJCQkJCQl2aWRlbzogdGhpcy52aWRlbwoJCQkJCQkJfSk7CgkJCQkJCQl0aGlzLnZpZGVvRGF0YSAmJiBkID09PSB0aGlzLnZpZGVvRGF0YS52aWRlb0lkIHx8IChhd2FpdCB0aGlzLmhhbmRsZVNyY0NoYW5nZWQoKSwgYXdhaXQgdGhpcy5hdXRvVHJhbnNsYXRlKCksIEYuQS5sb2coImxpcHN5bmMgbW9kZSBpcyBjYW5wbGF5IikpOwoJCQkJCQl9CgkJCQkJCXJlc2V0VGltZXIgPSAoKSA9PiB7CgkJCQkJCQljbGVhclRpbWVvdXQodGhpcy50aW1lciksIHRoaXMudWlNYW5hZ2VyLnZvdE92ZXJsYXlWaWV3LnVwZGF0ZUJ1dHRvbk9wYWNpdHkoMSksIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHsKCQkJCQkJCQl0aGlzLnVpTWFuYWdlci52b3RPdmVybGF5Vmlldy51cGRhdGVCdXR0b25PcGFjaXR5KDApOwoJCQkJCQkJfSwgdGhpcy5kYXRhLmF1dG9IaWRlQnV0dG9uRGVsYXkpOwoJCQkJCQl9OwoJCQkJCQljaGFuZ2VPcGFjaXR5T25FdmVudCA9IChkKSA9PiB7CgkJCQkJCQljbGVhclRpbWVvdXQodGhpcy50aW1lciksIHRoaXMudWlNYW5hZ2VyLnZvdE92ZXJsYXlWaWV3LnVwZGF0ZUJ1dHRvbk9wYWNpdHkoMSksIGQuc3RvcFByb3BhZ2F0aW9uKCk7CgkJCQkJCX07CgkJCQkJCWFzeW5jIGNoYW5nZVN1YnRpdGxlc0xhbmcoZCkgewoJCQkJCQkJaWYgKEYuQS5sb2coIltvbmNoYW5nZV0gc3VidGl0bGVzIiwgZCksIHRoaXMudWlNYW5hZ2VyLnZvdE92ZXJsYXlWaWV3LnN1YnRpdGxlc1NlbGVjdC5zZXRTZWxlY3RlZFZhbHVlKGQpLCBkID09PSAiZGlzYWJsZWQiKSB0aGlzLnN1YnRpdGxlc1dpZGdldC5zZXRDb250ZW50KG51bGwpLCB0aGlzLnVpTWFuYWdlci52b3RPdmVybGF5Vmlldy5kb3dubG9hZFN1YnRpdGxlc0J1dHRvbi5oaWRkZW4gPSAhMCwgdGhpcy55YW5kZXhTdWJ0aXRsZXMgPSBudWxsOwoJCQkJCQkJZWxzZSB7CgkJCQkJCQkJbGV0IGYgPSB0aGlzLnN1YnRpdGxlcy5hdChOdW1iZXIucGFyc2VJbnQoZCkpOwoJCQkJCQkJCWlmICh0aGlzLmRhdGEudHJhbnNsYXRlUHJveHlFbmFibGVkID09PSAyICYmIGYudXJsLnN0YXJ0c1dpdGgoImh0dHBzOi8vYnJvc3Vicy5zMy1wcml2YXRlLm1kcy55YW5kZXgubmV0L3Z0cmFucy8iKSkgewoJCQkJCQkJCQlsZXQgZCA9IGYudXJsLnJlcGxhY2UoImh0dHBzOi8vYnJvc3Vicy5zMy1wcml2YXRlLm1kcy55YW5kZXgubmV0L3Z0cmFucy8iLCAiIik7CgkJCQkJCQkJCWYudXJsID0gYGh0dHBzOi8vJHt0aGlzLmRhdGEucHJveHlXb3JrZXJIb3N0fS92aWRlby1zdWJ0aXRsZXMvc3VidGl0bGVzLXByb3h5LyR7ZH1gLCBjb25zb2xlLmxvZyhgW1ZPVF0gU3VicyBwcm94aWVkIHZpYSAke2YudXJsfWApOwoJCQkJCQkJCX0KCQkJCQkJCQl0aGlzLnlhbmRleFN1YnRpdGxlcyA9IGF3YWl0IE8uSS5mZXRjaFN1YnRpdGxlcyhmKSwgdGhpcy5zdWJ0aXRsZXNXaWRnZXQuc2V0Q29udGVudCh0aGlzLnlhbmRleFN1YnRpdGxlcywgZi5sYW5ndWFnZSksIHRoaXMudWlNYW5hZ2VyLnZvdE92ZXJsYXlWaWV3LmRvd25sb2FkU3VidGl0bGVzQnV0dG9uLmhpZGRlbiA9ICExOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWFzeW5jIHVwZGF0ZVN1YnRpdGxlc0xhbmdTZWxlY3QoKSB7CgkJCQkJCQlpZiAoIXRoaXMuc3VidGl0bGVzIHx8IHRoaXMuc3VidGl0bGVzLmxlbmd0aCA9PT0gMCkgewoJCQkJCQkJCWxldCBkID0gW3sKCQkJCQkJCQkJbGFiZWw6IEQuai5nZXQoIlZPVFN1YnRpdGxlc0Rpc2FibGVkIiksCgkJCQkJCQkJCXZhbHVlOiAiZGlzYWJsZWQiLAoJCQkJCQkJCQlzZWxlY3RlZDogITAsCgkJCQkJCQkJCWRpc2FibGVkOiAhMQoJCQkJCQkJCX1dOwoJCQkJCQkJCXRoaXMudWlNYW5hZ2VyLnZvdE92ZXJsYXlWaWV3LnN1YnRpdGxlc1NlbGVjdC51cGRhdGVJdGVtcyhkKSwgYXdhaXQgdGhpcy5jaGFuZ2VTdWJ0aXRsZXNMYW5nKGRbMF0udmFsdWUpOwoJCQkJCQkJCXJldHVybjsKCQkJCQkJCX0KCQkJCQkJCWxldCBkID0gW3sKCQkJCQkJCQlsYWJlbDogRC5qLmdldCgiVk9UU3VidGl0bGVzRGlzYWJsZWQiKSwKCQkJCQkJCQl2YWx1ZTogImRpc2FibGVkIiwKCQkJCQkJCQlzZWxlY3RlZDogITAsCgkJCQkJCQkJZGlzYWJsZWQ6ICExCgkJCQkJCQl9LCAuLi50aGlzLnN1YnRpdGxlcy5tYXAoKGQsIGYpID0+ICh7CgkJCQkJCQkJbGFiZWw6IChELmouZ2V0KGBsYW5ncy4ke2QubGFuZ3VhZ2V9YCkgPz8gZC5sYW5ndWFnZS50b1VwcGVyQ2FzZSgpKSArIChkLnRyYW5zbGF0ZWRGcm9tTGFuZ3VhZ2UgPyBgICR7RC5qLmdldCgiVk9UVHJhbnNsYXRlZEZyb20iKX0gJHtELmouZ2V0KGBsYW5ncy4ke2QudHJhbnNsYXRlZEZyb21MYW5ndWFnZX1gKSA/PyBkLnRyYW5zbGF0ZWRGcm9tTGFuZ3VhZ2UudG9VcHBlckNhc2UoKX1gIDogIiIpICsgKGQuc291cmNlID09PSAieWFuZGV4IiA/ICIiIDogYCwgJHt3aW5kb3cubG9jYXRpb24uaG9zdG5hbWV9YCkgKyAoZC5pc0F1dG9HZW5lcmF0ZWQgPyBgICgke0Quai5nZXQoIlZPVEF1dG9nZW5lcmF0ZWQiKX0pYCA6ICIiKSwKCQkJCQkJCQl2YWx1ZTogZiwKCQkJCQkJCQlzZWxlY3RlZDogITEsCgkJCQkJCQkJZGlzYWJsZWQ6ICExCgkJCQkJCQl9KSldOwoJCQkJCQkJdGhpcy51aU1hbmFnZXIudm90T3ZlcmxheVZpZXcuc3VidGl0bGVzU2VsZWN0LnVwZGF0ZUl0ZW1zKGQpLCBhd2FpdCB0aGlzLmNoYW5nZVN1YnRpdGxlc0xhbmcoZFswXS52YWx1ZSk7CgkJCQkJCX0KCQkJCQkJYXN5bmMgbG9hZFN1YnRpdGxlcygpIHsKCQkJCQkJCWlmICghdGhpcy52aWRlb0RhdGE/LnZpZGVvSWQpIHsKCQkJCQkJCQljb25zb2xlLmVycm9yKGBbVk9UXSAke0Quai5nZXREZWZhdWx0KCJWT1ROb1ZpZGVvSURGb3VuZCIpfWApLCB0aGlzLnN1YnRpdGxlcyA9IFtdOwoJCQkJCQkJCXJldHVybjsKCQkJCQkJCX0KCQkJCQkJCWxldCBkID0gYCR7dGhpcy52aWRlb0RhdGEudmlkZW9JZH1fJHt0aGlzLnZpZGVvRGF0YS5kZXRlY3RlZExhbmd1YWdlfV8ke3RoaXMudmlkZW9EYXRhLnJlc3BvbnNlTGFuZ3VhZ2V9XyR7dGhpcy5kYXRhLnVzZUxpdmVseVZvaWNlfWA7CgkJCQkJCQl0cnkgewoJCQkJCQkJCWxldCBmID0gdGhpcy5jYWNoZU1hbmFnZXIuZ2V0U3VidGl0bGVzKGQpOwoJCQkJCQkJCWYgfHwgKGYgPSBhd2FpdCBPLkkuZ2V0U3VidGl0bGVzKHRoaXMudm90Q2xpZW50LCB0aGlzLnZpZGVvRGF0YSksIHRoaXMuY2FjaGVNYW5hZ2VyLnNldFN1YnRpdGxlcyhkLCBmKSksIHRoaXMuc3VidGl0bGVzID0gZjsKCQkJCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQkJCQljb25zb2xlLmVycm9yKCJbVk9UXSBGYWlsZWQgdG8gbG9hZCBzdWJ0aXRsZXM6IiwgZCksIHRoaXMuc3VidGl0bGVzID0gW107CgkJCQkJCQl9CgkJCQkJCQlhd2FpdCB0aGlzLnVwZGF0ZVN1YnRpdGxlc0xhbmdTZWxlY3QoKTsKCQkJCQkJfQoJCQkJCQlpc0xpdmVseVZvaWNlQWxsb3dlZCgpIHsKCQkJCQkJCXJldHVybiAhKHRoaXMudmlkZW9EYXRhLmRldGVjdGVkTGFuZ3VhZ2UgIT09ICJlbiIgfHwgdGhpcy52aWRlb0RhdGEucmVzcG9uc2VMYW5ndWFnZSAhPT0gInJ1IiB8fCAhdGhpcy5kYXRhLmFjY291bnQ/LnRva2VuKTsKCQkJCQkJfQoJCQkJCQlnZXRWaWRlb1ZvbHVtZSgpIHsKCQkJCQkJCXJldHVybiB0aGlzLnZpZGVvTWFuYWdlci5nZXRWaWRlb1ZvbHVtZSgpOwoJCQkJCQl9CgkJCQkJCXNldFZpZGVvVm9sdW1lKGQpIHsKCQkJCQkJCXJldHVybiB0aGlzLnZpZGVvTWFuYWdlci5zZXRWaWRlb1ZvbHVtZShkKSwgdGhpczsKCQkJCQkJfQoJCQkJCQlpc011dGVkKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMudmlkZW9NYW5hZ2VyLmlzTXV0ZWQoKTsKCQkJCQkJfQoJCQkJCQlzeW5jVmlkZW9Wb2x1bWVTbGlkZXIoKSB7CgkJCQkJCQl0aGlzLnZpZGVvTWFuYWdlci5zeW5jVmlkZW9Wb2x1bWVTbGlkZXIoKTsKCQkJCQkJfQoJCQkJCQlzZXRTZWxlY3RNZW51VmFsdWVzKGQsIGYpIHsKCQkJCQkJCXRoaXMudmlkZW9NYW5hZ2VyLnNldFNlbGVjdE1lbnVWYWx1ZXMoZCwgZik7CgkJCQkJCX0KCQkJCQkJc3luY1ZvbHVtZVdyYXBwZXIoZCwgZikgewoJCQkJCQkJbGV0IHAgPSBkID09PSAidHJhbnNsYXRpb24iID8gdGhpcy51aU1hbmFnZXIudm90T3ZlcmxheVZpZXcudmlkZW9Wb2x1bWVTbGlkZXIgOiB0aGlzLnVpTWFuYWdlci52b3RPdmVybGF5Vmlldy50cmFuc2xhdGlvblZvbHVtZVNsaWRlciwgbSA9ICgwLCBYLnEpKGQgPT09ICJ0cmFuc2xhdGlvbiIgPyB0aGlzLnZpZGVvIDogdGhpcy5hdWRpb1BsYXllci5wbGF5ZXIsIGYsIHAudmFsdWUsIGQgPT09ICJ0cmFuc2xhdGlvbiIgPyB0aGlzLnRlbXBWb2x1bWUgOiB0aGlzLnRlbXBPcmlnaW5hbFZvbHVtZSk7CgkJCQkJCQlwLnZhbHVlID0gbSwgdGhpcy50ZW1wT3JpZ2luYWxWb2x1bWUgPSBkID09PSAidHJhbnNsYXRpb24iID8gbSA6IGYsIHRoaXMudGVtcFZvbHVtZSA9IGQgPT09ICJ0cmFuc2xhdGlvbiIgPyBmIDogbTsKCQkJCQkJfQoJCQkJCQlhc3luYyBnZXRWaWRlb0RhdGEoKSB7CgkJCQkJCQlyZXR1cm4gYXdhaXQgdGhpcy52aWRlb01hbmFnZXIuZ2V0VmlkZW9EYXRhKCk7CgkJCQkJCX0KCQkJCQkJdmlkZW9WYWxpZGF0b3IoKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy52aWRlb01hbmFnZXIudmlkZW9WYWxpZGF0b3IoKTsKCQkJCQkJfQoJCQkJCQlzdG9wVHJhbnNsYXRlKCkgewoJCQkJCQkJdGhpcy5hdWRpb1BsYXllci5wbGF5ZXIucmVtb3ZlVmlkZW9FdmVudHMoKSwgdGhpcy5hdWRpb1BsYXllci5wbGF5ZXIuY2xlYXIoKSwgdGhpcy5hdWRpb1BsYXllci5wbGF5ZXIuc3JjID0gdm9pZCAwLCBGLkEubG9nKCJhdWRpb1BsYXllciBhZnRlciBzdG9wVHJhbnNsYXRlIiwgdGhpcy5hdWRpb1BsYXllciksIHRoaXMudWlNYW5hZ2VyLnZvdE92ZXJsYXlWaWV3LnZpZGVvVm9sdW1lU2xpZGVyLmhpZGRlbiA9ICEwLCB0aGlzLnVpTWFuYWdlci52b3RPdmVybGF5Vmlldy50cmFuc2xhdGlvblZvbHVtZVNsaWRlci5oaWRkZW4gPSAhMCwgdGhpcy51aU1hbmFnZXIudm90T3ZlcmxheVZpZXcuZG93bmxvYWRUcmFuc2xhdGlvbkJ1dHRvbi5oaWRkZW4gPSAhMCwgdGhpcy5kb3dubG9hZFRyYW5zbGF0aW9uVXJsID0gbnVsbCwgdGhpcy5sb25nV2FpdGluZ1Jlc0NvdW50ID0gMCwgdGhpcy50cmFuc2Zvcm1CdG4oIm5vbmUiLCBELmouZ2V0KCJ0cmFuc2xhdGVWaWRlbyIpKSwgRi5BLmxvZyhgVm9sdW1lIG9uIHN0YXJ0OiAke3RoaXMudm9sdW1lT25TdGFydH1gKSwgdGhpcy52b2x1bWVPblN0YXJ0ICYmIHRoaXMuc2V0VmlkZW9Wb2x1bWUodGhpcy52b2x1bWVPblN0YXJ0KSwgY2xlYXJJbnRlcnZhbCh0aGlzLnN0cmVhbVBpbmcpLCBjbGVhclRpbWVvdXQodGhpcy5hdXRvUmV0cnkpLCB0aGlzLmhscz8uZGVzdHJveSgpLCB0aGlzLmZpcnN0U3luY1ZvbHVtZSA9ICEwLCB0aGlzLmFjdGlvbnNBYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7CgkJCQkJCX0KCQkJCQkJYXN5bmMgdXBkYXRlVHJhbnNsYXRpb25FcnJvck1zZyhkKSB7CgkJCQkJCQlsZXQgZiA9IEQuai5nZXQoInRyYW5zbGF0aW9uVGFrZSIpLCBwID0gRC5qLmxhbmc7CgkJCQkJCQlpZiAodGhpcy5sb25nV2FpdGluZ1Jlc0NvdW50ID0gZCA9PT0gRC5qLmdldCgidHJhbnNsYXRpb25UYWtlQWJvdXRNaW51dGUiKSA/IHRoaXMubG9uZ1dhaXRpbmdSZXNDb3VudCArIDEgOiAwLCBGLkEubG9nKCJsb25nV2FpdGluZ1Jlc0NvdW50IiwgdGhpcy5sb25nV2FpdGluZ1Jlc0NvdW50KSwgdGhpcy5sb25nV2FpdGluZ1Jlc0NvdW50ID4geC5weCAmJiAoZCA9IG5ldyBZLm4oIlRyYW5zbGF0aW9uRGVsYXllZCIpKSwgRi5BLmxvZygidXBkYXRlVHJhbnNsYXRpb25FcnJvck1zZyBtZXNzYWdlIiwgZCksIGQ/Lm5hbWUgPT09ICJWT1RMb2NhbGl6ZWRFcnJvciIpIHRoaXMudHJhbnNmb3JtQnRuKCJlcnJvciIsIGQubG9jYWxpemVkTWVzc2FnZSk7CgkJCQkJCQllbHNlIGlmIChkIGluc3RhbmNlb2YgRXJyb3IpIHRoaXMudHJhbnNmb3JtQnRuKCJlcnJvciIsIGQ/Lm1lc3NhZ2UpOwoJCQkJCQkJZWxzZSBpZiAodGhpcy5kYXRhLnRyYW5zbGF0ZUFQSUVycm9ycyAmJiBwICE9PSAicnUiICYmICFkPy5pbmNsdWRlcyhmKSkgewoJCQkJCQkJCXRoaXMudWlNYW5hZ2VyLnZvdE92ZXJsYXlWaWV3LnZvdEJ1dHRvbi5sb2FkaW5nID0gITA7CgkJCQkJCQkJbGV0IGYgPSBhd2FpdCAoMCwgSy5UbCkoZCwgInJ1IiwgcCk7CgkJCQkJCQkJdGhpcy50cmFuc2Zvcm1CdG4oImVycm9yIiwgZik7CgkJCQkJCQl9IGVsc2UgdGhpcy50cmFuc2Zvcm1CdG4oImVycm9yIiwgZCk7CgkJCQkJCQlbCgkJCQkJCQkJItCf0L7QtNCz0L7RgtCw0LLQu9C40LLQsNC10Lwg0L/QtdGA0LXQstC+0LQiLAoJCQkJCQkJCSLQktC40LTQtdC+INC/0LXRgNC10LTQsNC90L4g0LIg0L7QsdGA0LDQsdC+0YLQutGDIiwKCQkJCQkJCQki0J7QttC40LTQsNC10Lwg0L/QtdGA0LXQstC+0LQg0LLQuNC00LXQviIsCgkJCQkJCQkJItCX0LDQs9GA0YPQttCw0LXQvCDQv9C10YDQtdCy0LXQtNC10L3QvdC+0LUg0LDRg9C00LjQviIKCQkJCQkJCV0uaW5jbHVkZXMoZCkgJiYgKHRoaXMudWlNYW5hZ2VyLnZvdE92ZXJsYXlWaWV3LnZvdEJ1dHRvbi5sb2FkaW5nID0gITApOwoJCQkJCQl9CgkJCQkJCWFmdGVyVXBkYXRlVHJhbnNsYXRpb24oZCkgewoJCQkJCQkJbGV0IGYgPSB0aGlzLnVpTWFuYWdlci52b3RPdmVybGF5Vmlldy52b3RCdXR0b24uY29udGFpbmVyLmRhdGFzZXQuc3RhdHVzID09PSAic3VjY2VzcyI7CgkJCQkJCQl0aGlzLnVpTWFuYWdlci52b3RPdmVybGF5Vmlldy52aWRlb1ZvbHVtZVNsaWRlci5oaWRkZW4gPSAhdGhpcy5kYXRhLnNob3dWaWRlb1NsaWRlciB8fCAhZiwgdGhpcy51aU1hbmFnZXIudm90T3ZlcmxheVZpZXcudHJhbnNsYXRpb25Wb2x1bWVTbGlkZXIuaGlkZGVuID0gIWYsIHRoaXMuZGF0YS5lbmFibGVkQXV0b1ZvbHVtZSAmJiAodGhpcy51aU1hbmFnZXIudm90T3ZlcmxheVZpZXcudmlkZW9Wb2x1bWVTbGlkZXIudmFsdWUgPSB0aGlzLmRhdGEuYXV0b1ZvbHVtZSksIHRoaXMudmlkZW9EYXRhLmlzU3RyZWFtIHx8ICh0aGlzLnVpTWFuYWdlci52b3RPdmVybGF5Vmlldy5kb3dubG9hZFRyYW5zbGF0aW9uQnV0dG9uLmhpZGRlbiA9ICExLCB0aGlzLmRvd25sb2FkVHJhbnNsYXRpb25VcmwgPSBkKSwgRi5BLmxvZygiYWZ0ZXJVcGRhdGVUcmFuc2xhdGlvbiBkb3dubG9hZFRyYW5zbGF0aW9uVXJsIiwgdGhpcy5kb3dubG9hZFRyYW5zbGF0aW9uVXJsKSwgdGhpcy5kYXRhLnNlbmROb3RpZnlPbkNvbXBsZXRlICYmIHRoaXMubG9uZ1dhaXRpbmdSZXNDb3VudCAmJiBmICYmIEdNX25vdGlmaWNhdGlvbih7CgkJCQkJCQkJdGV4dDogRC5qLmdldCgiVk9UVHJhbnNsYXRpb25Db21wbGV0ZWROb3RpZnkiKS5yZXBsYWNlKCJ7MH0iLCB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUpLAoJCQkJCQkJCXRpdGxlOiBHTV9pbmZvLnNjcmlwdC5uYW1lLAoJCQkJCQkJCXRpbWVvdXQ6IDVlMywKCQkJCQkJCQlzaWxlbnQ6ICEwLAoJCQkJCQkJCXRhZzogIlZPVFRyYW5zbGF0aW9uQ29tcGxldGVkIiwKCQkJCQkJCQlvbmNsaWNrOiAoKSA9PiB7CgkJCQkJCQkJCXdpbmRvdy5mb2N1cygpOwoJCQkJCQkJCX0KCQkJCQkJCX0pOwoJCQkJCQl9CgkJCQkJCWFzeW5jIHZhbGlkYXRlQXVkaW9VcmwoZCkgewoJCQkJCQkJdHJ5IHsKCQkJCQkJCQlsZXQgZiA9IHRoaXMuaXNNdWx0aU1ldGhvZFMzKGQpID8geyBtZXRob2Q6ICJIRUFEIiB9IDogeyBoZWFkZXJzOiB7IHJhbmdlOiAiYnl0ZXM9MC0wIiB9IH0sIHAgPSBhd2FpdCAoMCwgVS5HMykoZCwgZik7CgkJCQkJCQkJaWYgKEYuQS5sb2coIlRlc3QgYXVkaW8gcmVzcG9uc2UiLCBwKSwgcC5vaykgcmV0dXJuIEYuQS5sb2coIlZhbGlkIGF1ZGlvVXJsIiwgZCksIGQ7CgkJCQkJCQkJRi5BLmxvZygiWWFuZGV4IHJldHVybmVkIG5vdCB2YWxpZCBhdWRpbywgdHJ5aW5nIHRvIGZpeC4uLiIpLCB0aGlzLnZpZGVvRGF0YS5kZXRlY3RlZExhbmd1YWdlID0gImF1dG8iOwoJCQkJCQkJCWxldCBtID0gYXdhaXQgdGhpcy50cmFuc2xhdGlvbkhhbmRsZXIudHJhbnNsYXRlVmlkZW9JbXBsKHRoaXMudmlkZW9EYXRhLCB0aGlzLnZpZGVvRGF0YS5kZXRlY3RlZExhbmd1YWdlLCB0aGlzLnZpZGVvRGF0YS5yZXNwb25zZUxhbmd1YWdlLCB0aGlzLnZpZGVvRGF0YS50cmFuc2xhdGlvbkhlbHAsICF0aGlzLmRhdGEudXNlQXVkaW9Eb3dubG9hZCwgdGhpcy5hY3Rpb25zQWJvcnRDb250cm9sbGVyLnNpZ25hbCk7CgkJCQkJCQkJdGhpcy5zZXRTZWxlY3RNZW51VmFsdWVzKHRoaXMudmlkZW9EYXRhLmRldGVjdGVkTGFuZ3VhZ2UsIHRoaXMudmlkZW9EYXRhLnJlc3BvbnNlTGFuZ3VhZ2UpLCBkID0gbS51cmwsIEYuQS5sb2coIkZpeGVkIGF1ZGlvIGF1ZGlvVXJsIiwgZCk7CgkJCQkJCQl9IGNhdGNoIChkKSB7CgkJCQkJCQkJRi5BLmxvZygiVGVzdCBhdWRpbyBlcnJvcjoiLCBkKTsKCQkJCQkJCX0KCQkJCQkJCXJldHVybiBkOwoJCQkJCQl9CgkJCQkJCXByb3hpZnlBdWRpbyhkKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5kYXRhLnRyYW5zbGF0ZVByb3h5RW5hYmxlZCA9PT0gMiAmJiBkLnN0YXJ0c1dpdGgoImh0dHBzOi8vdnRyYW5zLnMzLXByaXZhdGUubWRzLnlhbmRleC5uZXQvdHRzL3Byb2QvIikgJiYgKGQgPSBkLnJlcGxhY2UoImh0dHBzOi8vdnRyYW5zLnMzLXByaXZhdGUubWRzLnlhbmRleC5uZXQvdHRzL3Byb2QvIiwgYGh0dHBzOi8vJHt0aGlzLmRhdGEucHJveHlXb3JrZXJIb3N0fS92aWRlby10cmFuc2xhdGlvbi9hdWRpby1wcm94eS9gKSwgY29uc29sZS5sb2coYFtWT1RdIEF1ZGlvIHByb3hpZWQgdmlhICR7ZH1gKSksIGQ7CgkJCQkJCX0KCQkJCQkJaXNNdWx0aU1ldGhvZFMzKGQpIHsKCQkJCQkJCXJldHVybiBkLnN0YXJ0c1dpdGgoImh0dHBzOi8vdnRyYW5zLnMzLXByaXZhdGUubWRzLnlhbmRleC5uZXQvdHRzL3Byb2QvIikgfHwgZC5zdGFydHNXaXRoKGBodHRwczovLyR7dGhpcy5kYXRhLnByb3h5V29ya2VySG9zdH0vdmlkZW8tdHJhbnNsYXRpb24vYXVkaW8tcHJveHkvYCk7CgkJCQkJCX0KCQkJCQkJYXN5bmMgdXBkYXRlVHJhbnNsYXRpb24oZCkgewoJCQkJCQkJZCAhPT0gdGhpcy5hdWRpb1BsYXllci5wbGF5ZXIuY3VycmVudFNyYyAmJiAoZCA9IGF3YWl0IHRoaXMudmFsaWRhdGVBdWRpb1VybCh0aGlzLnByb3hpZnlBdWRpbyhkKSkpLCB0aGlzLmF1ZGlvUGxheWVyLnBsYXllci5zcmMgIT09IGQgJiYgKHRoaXMuYXVkaW9QbGF5ZXIucGxheWVyLnNyYyA9IGQpOwoJCQkJCQkJdHJ5IHsKCQkJCQkJCQl0aGlzLmF1ZGlvUGxheWVyLmluaXQoKTsKCQkJCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQkJCQlGLkEubG9nKCJ0aGlzLmF1ZGlvUGxheWVyLmluaXQoKSBlcnJvciIsIGQpLCB0aGlzLnRyYW5zZm9ybUJ0bigiZXJyb3IiLCBkLm1lc3NhZ2UpOwoJCQkJCQkJfQoJCQkJCQkJdGhpcy5zZXR1cEF1ZGlvU2V0dGluZ3MoKSwgdGhpcy5zaXRlLmhvc3QgPT09ICJ0d2l0dGVyIiAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJidXR0b25bZGF0YS10ZXN0aWQ9XCJhcHAtYmFyLWJhY2tcIl1bcm9sZT1cImJ1dHRvblwiXSIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgdGhpcy5zdG9wVHJhbnNsYXRpb24pLCB0aGlzLnRyYW5zZm9ybUJ0bigic3VjY2VzcyIsIEQuai5nZXQoImRpc2FibGVUcmFuc2xhdGUiKSksIHRoaXMuYWZ0ZXJVcGRhdGVUcmFuc2xhdGlvbihkKTsKCQkJCQkJfQoJCQkJCQlhc3luYyB0cmFuc2xhdGVGdW5jKGQsIGYsIHAsIG0sIGgpIHsKCQkJCQkJCWNvbnNvbGUubG9nKCJbVk9UXSBWaWRlbyBEYXRhOiAiLCB0aGlzLnZpZGVvRGF0YSksIEYuQS5sb2coIlJ1biB2aWRlb1ZhbGlkYXRvciIpLCB0aGlzLnZpZGVvVmFsaWRhdG9yKCksIHRoaXMudWlNYW5hZ2VyLnZvdE92ZXJsYXlWaWV3LnZvdEJ1dHRvbi5sb2FkaW5nID0gITAsIHRoaXMudm9sdW1lT25TdGFydCA9IHRoaXMuZ2V0VmlkZW9Wb2x1bWUoKTsKCQkJCQkJCWxldCBfID0gYCR7ZH1fJHtwfV8ke219XyR7dGhpcy5kYXRhLnVzZUxpdmVseVZvaWNlfWAsIHYgPSB0aGlzLmNhY2hlTWFuYWdlci5nZXRUcmFuc2xhdGlvbihfKTsKCQkJCQkJCWlmICh2Py51cmwpIHsKCQkJCQkJCQlhd2FpdCB0aGlzLnVwZGF0ZVRyYW5zbGF0aW9uKHYudXJsKSwgRi5BLmxvZygiW3RyYW5zbGF0ZUZ1bmNdIENhY2hlZCB0cmFuc2xhdGlvbiB3YXMgcmVjZWl2ZWQiKTsKCQkJCQkJCQlyZXR1cm47CgkJCQkJCQl9CgkJCQkJCQlpZiAodj8uZXJyb3IpIHsKCQkJCQkJCQlGLkEubG9nKCJTa2lwIHRyYW5zbGF0aW9uIC0gcHJldmlvdXMgYXR0ZW1wdCBmYWlsZWQiKSwgYXdhaXQgdGhpcy51cGRhdGVUcmFuc2xhdGlvbkVycm9yTXNnKHYuZXJyb3IuZGF0YT8ubWVzc2FnZSk7CgkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJfQoJCQkJCQkJaWYgKGYpIHsKCQkJCQkJCQlsZXQgZCA9IGF3YWl0IHRoaXMudHJhbnNsYXRpb25IYW5kbGVyLnRyYW5zbGF0ZVN0cmVhbUltcGwodGhpcy52aWRlb0RhdGEsIHAsIG0sIHRoaXMuYWN0aW9uc0Fib3J0Q29udHJvbGxlci5zaWduYWwpOwoJCQkJCQkJCWlmICghZCkgewoJCQkJCQkJCQlGLkEubG9nKCJTa2lwIHRyYW5zbGF0aW9uIik7CgkJCQkJCQkJCXJldHVybjsKCQkJCQkJCQl9CgkJCQkJCQkJdGhpcy50cmFuc2Zvcm1CdG4oInN1Y2Nlc3MiLCBELmouZ2V0KCJkaXNhYmxlVHJhbnNsYXRlIikpOwoJCQkJCQkJCXRyeSB7CgkJCQkJCQkJCXRoaXMuaGxzID0gKDAsIHEuQ0spKCksIHRoaXMuYXVkaW9QbGF5ZXIuaW5pdCgpOwoJCQkJCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQkJCQkJRi5BLmxvZygidGhpcy5hdWRpb1BsYXllci5pbml0KCkgZXJyb3IiLCBkKSwgdGhpcy50cmFuc2Zvcm1CdG4oImVycm9yIiwgZC5tZXNzYWdlKTsKCQkJCQkJCQl9CgkJCQkJCQkJbGV0IGYgPSB0aGlzLnNldEhMU1NvdXJjZShkLnJlc3VsdC51cmwpOwoJCQkJCQkJCXJldHVybiB0aGlzLnNpdGUuaG9zdCA9PT0gInlvdXR1YmUiICYmIGcuQS52aWRlb1NlZWsodGhpcy52aWRlbywgMTApLCB0aGlzLnNldHVwQXVkaW9TZXR0aW5ncygpLCAhdGhpcy52aWRlby5zcmMgJiYgIXRoaXMudmlkZW8uY3VycmVudFNyYyAmJiAhdGhpcy52aWRlby5zcmNPYmplY3QgPyB0aGlzLnN0b3BUcmFuc2xhdGlvbigpIDogdGhpcy5hZnRlclVwZGF0ZVRyYW5zbGF0aW9uKGYpOwoJCQkJCQkJfQoJCQkJCQkJbGV0IGIgPSBhd2FpdCB0aGlzLnRyYW5zbGF0aW9uSGFuZGxlci50cmFuc2xhdGVWaWRlb0ltcGwodGhpcy52aWRlb0RhdGEsIHAsIG0sIGgsICF0aGlzLmRhdGEudXNlQXVkaW9Eb3dubG9hZCwgdGhpcy5hY3Rpb25zQWJvcnRDb250cm9sbGVyLnNpZ25hbCk7CgkJCQkJCQlpZiAoRi5BLmxvZygiW3RyYW5zbGF0ZVJlc10iLCBiKSwgIWIpIHsKCQkJCQkJCQlGLkEubG9nKCJTa2lwIHRyYW5zbGF0aW9uIik7CgkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJfQoJCQkJCQkJYXdhaXQgdGhpcy51cGRhdGVUcmFuc2xhdGlvbihiLnVybCk7CgkJCQkJCQlsZXQgeCA9IHRoaXMuY2FjaGVNYW5hZ2VyLmdldFN1YnRpdGxlcyhfKTsKCQkJCQkJCXg/LnNvbWUoKGQpID0+IGQuc291cmNlID09PSAieWFuZGV4IiAmJiBkLnRyYW5zbGF0ZWRGcm9tTGFuZ3VhZ2UgPT09IHRoaXMudmlkZW9EYXRhLmRldGVjdGVkTGFuZ3VhZ2UgJiYgZC5sYW5ndWFnZSA9PT0gdGhpcy52aWRlb0RhdGEucmVzcG9uc2VMYW5ndWFnZSkgfHwgKHRoaXMuY2FjaGVNYW5hZ2VyLmRlbGV0ZVN1YnRpdGxlcyhfKSwgdGhpcy5zdWJ0aXRsZXMgPSBbXSksIHRoaXMuY2FjaGVNYW5hZ2VyLnNldFRyYW5zbGF0aW9uKF8sIHsKCQkJCQkJCQl2aWRlb0lkOiBkLAoJCQkJCQkJCWZyb206IHAsCgkJCQkJCQkJdG86IG0sCgkJCQkJCQkJdXJsOiB0aGlzLmRvd25sb2FkVHJhbnNsYXRpb25VcmwsCgkJCQkJCQkJdXNlTGl2ZWx5Vm9pY2U6IHRoaXMuZGF0YT8udXNlTGl2ZWx5Vm9pY2UKCQkJCQkJCX0pOwoJCQkJCQl9CgkJCQkJCWlzWW91VHViZUhvc3RzKCkgewoJCQkJCQkJcmV0dXJuIFsKCQkJCQkJCQkieW91dHViZSIsCgkJCQkJCQkJImludmlkaW91cyIsCgkJCQkJCQkJInBpcGVkIiwKCQkJCQkJCQkicG9rZXR1YmUiLAoJCQkJCQkJCSJyaWNrdHViZSIKCQkJCQkJCV0uaW5jbHVkZXModGhpcy5zaXRlLmhvc3QpOwoJCQkJCQl9CgkJCQkJCXNldHVwSExTKGQpIHsKCQkJCQkJCXRoaXMuaGxzLm9uKEhscy5FdmVudHMuTUVESUFfQVRUQUNIRUQsIGZ1bmN0aW9uKCkgewoJCQkJCQkJCUYuQS5sb2coImF1ZGlvIGFuZCBobHMuanMgYXJlIG5vdyBib3VuZCB0b2dldGhlciAhIik7CgkJCQkJCQl9KSwgdGhpcy5obHMub24oSGxzLkV2ZW50cy5NQU5JRkVTVF9QQVJTRUQsIGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQlGLkEubG9nKGBtYW5pZmVzdCBsb2FkZWQsIGZvdW5kICR7ZD8ubGV2ZWxzPy5sZW5ndGh9IHF1YWxpdHkgbGV2ZWxgKTsKCQkJCQkJCX0pLCB0aGlzLmhscy5sb2FkU291cmNlKGQpLCB0aGlzLmhscy5hdHRhY2hNZWRpYSh0aGlzLmF1ZGlvUGxheWVyLnBsYXllci5hdWRpbyksIHRoaXMuaGxzLm9uKEhscy5FdmVudHMuRVJST1IsIGZ1bmN0aW9uKGQpIHsKCQkJCQkJCQlpZiAoZC5mYXRhbCkgc3dpdGNoIChkLnR5cGUpIHsKCQkJCQkJCQkJY2FzZSBIbHMuRXJyb3JUeXBlcy5NRURJQV9FUlJPUjoKCQkJCQkJCQkJCWNvbnNvbGUubG9nKCJmYXRhbCBtZWRpYSBlcnJvciBlbmNvdW50ZXJlZCwgdHJ5IHRvIHJlY292ZXIiKSwgdGhpcy5obHMucmVjb3Zlck1lZGlhRXJyb3IoKTsKCQkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCQljYXNlIEhscy5FcnJvclR5cGVzLk5FVFdPUktfRVJST1I6CgkJCQkJCQkJCQljb25zb2xlLmVycm9yKCJmYXRhbCBuZXR3b3JrIGVycm9yIGVuY291bnRlcmVkIiwgZCk7CgkJCQkJCQkJCQlicmVhazsKCQkJCQkJCQkJZGVmYXVsdDoKCQkJCQkJCQkJCXRoaXMuaGxzLmRlc3Ryb3koKTsKCQkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCX0KCQkJCQkJCX0pLCBGLkEubG9nKHRoaXMuaGxzKTsKCQkJCQkJfQoJCQkJCQlzZXRITFNTb3VyY2UoZCkgewoJCQkJCQkJbGV0IGYgPSBgaHR0cHM6Ly8ke3RoaXMuZGF0YS5tM3U4UHJveHlIb3N0fS8/YWxsPXllcyZvcmlnaW49JHtlbmNvZGVVUklDb21wb25lbnQoImh0dHBzOi8vc3RybS55YW5kZXgucnUiKX0mcmVmZXJlcj0ke2VuY29kZVVSSUNvbXBvbmVudCgiaHR0cHM6Ly9zdHJtLnlhbmRleC5ydSIpfSZ1cmw9JHtlbmNvZGVVUklDb21wb25lbnQoZCl9YDsKCQkJCQkJCWlmICh0aGlzLmhscykgdGhpcy5zZXR1cEhMUyhmKTsKCQkJCQkJCWVsc2UgaWYgKHRoaXMuYXVkaW9QbGF5ZXIucGxheWVyLmF1ZGlvLmNhblBsYXlUeXBlKCJhcHBsaWNhdGlvbi92bmQuYXBwbGUubXBlZ3VybCIpKSB0aGlzLmF1ZGlvUGxheWVyLnBsYXllci5zcmMgPSBmOwoJCQkJCQkJZWxzZSB0aHJvdyBuZXcgWS5uKCJhdWRpb0Zvcm1hdE5vdFN1cHBvcnRlZCIpOwoJCQkJCQkJcmV0dXJuIGY7CgkJCQkJCX0KCQkJCQkJc2V0dXBBdWRpb1NldHRpbmdzKCkgewoJCQkJCQkJdHlwZW9mIHRoaXMuZGF0YS5kZWZhdWx0Vm9sdW1lID09ICJudW1iZXIiICYmICh0aGlzLmF1ZGlvUGxheWVyLnBsYXllci52b2x1bWUgPSB0aGlzLmRhdGEuZGVmYXVsdFZvbHVtZSAvIDEwMCksIHRoaXMuZGF0YS5lbmFibGVkQXV0b1ZvbHVtZSAmJiB0aGlzLnNldFZpZGVvVm9sdW1lKCh0aGlzLmRhdGEuYXV0b1ZvbHVtZSAvIDEwMCkudG9GaXhlZCgyKSk7CgkJCQkJCX0KCQkJCQkJc3RvcFRyYW5zbGF0aW9uID0gKCkgPT4gewoJCQkJCQkJdGhpcy5zdG9wVHJhbnNsYXRlKCksIHRoaXMuc3luY1ZpZGVvVm9sdW1lU2xpZGVyKCk7CgkJCQkJCX07CgkJCQkJCWFzeW5jIGhhbmRsZVNyY0NoYW5nZWQoKSB7CgkJCQkJCQlGLkEubG9nKCJbVmlkZW9IYW5kbGVyXSBzcmMgY2hhbmdlZCIsIHRoaXMpLCB0aGlzLmZpcnN0UGxheSA9ICEwLCB0aGlzLnN0b3BUcmFuc2xhdGlvbigpOwoJCQkJCQkJbGV0IGQgPSAhdGhpcy52aWRlby5zcmMgJiYgIXRoaXMudmlkZW8uY3VycmVudFNyYyAmJiAhdGhpcy52aWRlby5zcmNPYmplY3Q7CgkJCQkJCQl0aGlzLnVpTWFuYWdlci52b3RPdmVybGF5Vmlldy52b3RCdXR0b24uY29udGFpbmVyLmhpZGRlbiA9IGQsIGQgJiYgKHRoaXMudWlNYW5hZ2VyLnZvdE92ZXJsYXlWaWV3LnZvdE1lbnUuaGlkZGVuID0gZCksIHRoaXMuc2l0ZS5zZWxlY3RvciB8fCAodGhpcy5jb250YWluZXIgPSB0aGlzLnZpZGVvLnBhcmVudEVsZW1lbnQpLCB0aGlzLmNvbnRhaW5lci5jb250YWlucyh0aGlzLnVpTWFuYWdlci52b3RPdmVybGF5Vmlldy52b3RCdXR0b24uY29udGFpbmVyKSB8fCB0aGlzLmNvbnRhaW5lci5hcHBlbmQodGhpcy51aU1hbmFnZXIudm90T3ZlcmxheVZpZXcudm90QnV0dG9uLmNvbnRhaW5lciwgdGhpcy51aU1hbmFnZXIudm90T3ZlcmxheVZpZXcudm90TWVudS5jb250YWluZXIpLCB0aGlzLnZpZGVvRGF0YSA9IGF3YWl0IHRoaXMuZ2V0VmlkZW9EYXRhKCk7CgkJCQkJCQlsZXQgZiA9IGAke3RoaXMudmlkZW9EYXRhLnZpZGVvSWR9XyR7dGhpcy52aWRlb0RhdGEuZGV0ZWN0ZWRMYW5ndWFnZX1fJHt0aGlzLnZpZGVvRGF0YS5yZXNwb25zZUxhbmd1YWdlfV8ke3RoaXMuZGF0YS51c2VMaXZlbHlWb2ljZX1gOwoJCQkJCQkJdGhpcy5zdWJ0aXRsZXMgPSB0aGlzLmNhY2hlTWFuYWdlci5nZXRTdWJ0aXRsZXMoZiksIGF3YWl0IHRoaXMudXBkYXRlU3VidGl0bGVzTGFuZ1NlbGVjdCgpLCB0aGlzLnRyYW5zbGF0ZVRvTGFuZyA9IHRoaXMuZGF0YS5yZXNwb25zZUxhbmd1YWdlID8/ICJydSIsIHRoaXMuc2V0U2VsZWN0TWVudVZhbHVlcyh0aGlzLnZpZGVvRGF0YS5kZXRlY3RlZExhbmd1YWdlLCB0aGlzLnZpZGVvRGF0YS5yZXNwb25zZUxhbmd1YWdlKSwgdGhpcy5hY3Rpb25zQWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpOwoJCQkJCQl9CgkJCQkJCWFzeW5jIHJlbGVhc2UoKSB7CgkJCQkJCQlGLkEubG9nKCJbVmlkZW9IYW5kbGVyXSByZWxlYXNlIiksIHRoaXMuaW5pdGlhbGl6ZWQgPSAhMSwgdGhpcy5yZWxlYXNlRXh0cmFFdmVudHMoKSwgdGhpcy5zdWJ0aXRsZXNXaWRnZXQucmVsZWFzZSgpLCB0aGlzLnVpTWFuYWdlci5yZWxlYXNlKCk7CgkJCQkJCX0KCQkJCQkJY29sbGVjdFJlcG9ydEluZm8oKSB7CgkJCQkJCQlsZXQgZCA9IGAke3EuUjUub3MubmFtZX0gJHtxLlI1Lm9zLnZlcnNpb259YCwgZiA9IGA8ZGV0YWlscz4KPHN1bW1hcnk+QXV0b2dlbmVyYXRlZCBieSBWT1Q6PC9zdW1tYXJ5Pgo8dWw+CiAgPGxpPk9TOiAke2R9PC9saT4KICA8bGk+QnJvd3NlcjogJHtxLlI1LmJyb3dzZXIubmFtZX0gJHtxLlI1LmJyb3dzZXIudmVyc2lvbn08L2xpPgogIDxsaT5Mb2FkZXI6ICR7R01faW5mby5zY3JpcHRIYW5kbGVyfSB2JHtHTV9pbmZvLnZlcnNpb259PC9saT4KICA8bGk+U2NyaXB0IHZlcnNpb246ICR7R01faW5mby5zY3JpcHQudmVyc2lvbn08L2xpPgogIDxsaT5VUkw6IDxjb2RlPiR7d2luZG93LmxvY2F0aW9uLmhyZWZ9PC9jb2RlPjwvbGk+CiAgPGxpPkxhbmc6IDxjb2RlPiR7dGhpcy52aWRlb0RhdGEuZGV0ZWN0ZWRMYW5ndWFnZX08L2NvZGU+IC0+IDxjb2RlPiR7dGhpcy52aWRlb0RhdGEucmVzcG9uc2VMYW5ndWFnZX08L2NvZGU+IChMaXZlbHkgdm9pY2U6ICR7dGhpcy5kYXRhLnVzZUxpdmVseVZvaWNlfSB8IEF1ZGlvIGRvd25sb2FkOiAke3RoaXMuZGF0YS51c2VBdWRpb0Rvd25sb2FkfSk8L2xpPgogIDxsaT5QbGF5ZXI6ICR7dGhpcy5kYXRhLm5ld0F1ZGlvUGxheWVyID8gIk5ldyIgOiAiT2xkIn0gKENTUCBvbmx5OiAke3RoaXMuZGF0YS5vbmx5QnlwYXNzTWVkaWFDU1B9KTwvbGk+CiAgPGxpPlByb3h5aW5nIG1vZGU6ICR7dGhpcy5kYXRhLnRyYW5zbGF0ZVByb3h5RW5hYmxlZH08L2xpPgo8L3VsPgo8L2RldGFpbHM+YCwgcCA9IGAxLWJ1Zy1yZXBvcnQtJHtELmoubGFuZyA9PT0gInJ1IiA/ICJydSIgOiAiZW4ifS55bWxgOwoJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQlhc3NpZ25lZXM6ICJpbHloYWxpZ2h0IiwKCQkJCQkJCQl0ZW1wbGF0ZTogcCwKCQkJCQkJCQlvczogZCwKCQkJCQkJCQkic2NyaXB0LXZlcnNpb24iOiBHTV9pbmZvLnNjcmlwdC52ZXJzaW9uLAoJCQkJCQkJCSJhZGRpdGlvbmFsLWluZm8iOiBmCgkJCQkJCQl9OwoJCQkJCQl9CgkJCQkJCXJlbGVhc2VFeHRyYUV2ZW50cygpIHsKCQkJCQkJCXRoaXMuYWJvcnRDb250cm9sbGVyLmFib3J0KCksIHRoaXMucmVzaXplT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKSwgWyJ5b3V0dWJlIiwgImdvb2dsZWRyaXZlIl0uaW5jbHVkZXModGhpcy5zaXRlLmhvc3QpICYmIHRoaXMuc2l0ZS5hZGRpdGlvbmFsRGF0YSAhPT0gIm1vYmlsZSIgJiYgdGhpcy5zeW5jVm9sdW1lT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQlsZXQgZWUgPSBuZXcgSi5jKCksIHRlID0gbmV3IFdlYWtNYXAoKTsKCQkJCQlmdW5jdGlvbiBjbGltYihkLCBmKSB7CgkJCQkJCWlmICghZCB8fCAhZikgcmV0dXJuIG51bGw7CgkJCQkJCWlmIChkIGluc3RhbmNlb2YgRG9jdW1lbnQpIHJldHVybiBkLnF1ZXJ5U2VsZWN0b3IoZik7CgkJCQkJCWxldCBwID0gZC5jbG9zZXN0KGYpOwoJCQkJCQlpZiAocCkgcmV0dXJuIHA7CgkJCQkJCWxldCBtID0gZC5nZXRSb290Tm9kZSgpOwoJCQkJCQlyZXR1cm4gY2xpbWIobSBpbnN0YW5jZW9mIFNoYWRvd1Jvb3QgPyBtLmhvc3QgOiBtLCBmKTsKCQkJCQl9CgkJCQkJZnVuY3Rpb24gZmluZENvbnRhaW5lcihkLCBmKSB7CgkJCQkJCWlmIChGLkEubG9nKCJmaW5kQ29udGFpbmVyIiwgZCwgZiksIGQuc2hhZG93Um9vdCkgewoJCQkJCQkJbGV0IHAgPSBjbGltYihmLCBkLnNlbGVjdG9yKTsKCQkJCQkJCXJldHVybiBGLkEubG9nKCJmaW5kQ29udGFpbmVyIHdpdGggc2l0ZS5zaGFkb3dSb290IiwgcCksIHAgPz8gZi5wYXJlbnRFbGVtZW50OwoJCQkJCQl9CgkJCQkJCWlmIChGLkEubG9nKCJmaW5kQ29udGFpbmVyIHdpdGhvdXQgc2hhZG93Um9vdCIpLCAhZC5zZWxlY3RvcikgcmV0dXJuIGYucGFyZW50RWxlbWVudDsKCQkJCQkJbGV0IHAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGQuc2VsZWN0b3IpOwoJCQkJCQlyZXR1cm4gQXJyYXkuZnJvbShwKS5maW5kKChkKSA9PiBkLmNvbnRhaW5zKGYpKSA/PyBmLnBhcmVudEVsZW1lbnQ7CgkJCQkJfQoJCQkJCWZ1bmN0aW9uIGluaXRJZnJhbWVJbnRlcmFjdG9yKCkgewoJCQkJCQlsZXQgZCA9IHsgImh0dHBzOi8vZGV2LmVwaWNnYW1lcy5jb20iOiB7CgkJCQkJCQl0YXJnZXRPcmlnaW46ICJodHRwczovL2Rldi5lcGljZ2FtZXMuY29tIiwKCQkJCQkJCWRhdGFGaWx0ZXI6IChkKSA9PiB0eXBlb2YgZCA9PSAic3RyaW5nIiAmJiBkLnN0YXJ0c1dpdGgoImdldFZpZGVvSWQ6IiksCgkJCQkJCQlleHRyYWN0VmlkZW9JZDogKGQpID0+IGQucGF0aG5hbWUuc3BsaXQoIi8iKS5zbGljZSgtMiwgLTEpWzBdLAoJCQkJCQkJaWZyYW1lU2VsZWN0b3I6IChkKSA9PiBgZWxlY3RyYS1wbGF5ZXIgPiBpZnJhbWVbc3JjPSIke2R9Il1gLAoJCQkJCQkJcmVzcG9uc2VGb3JtYXR0ZXI6IChkLCBmKSA9PiBgJHtmfToke2R9YCwKCQkJCQkJCXByb2Nlc3NSZXF1ZXN0OiAoZCkgPT4gewoJCQkJCQkJCWxldCBmID0gZC5yZXBsYWNlKCJnZXRWaWRlb0lkOiIsICIiKTsKCQkJCQkJCQlyZXR1cm4gYXRvYihmKTsKCQkJCQkJCX0KCQkJCQkJfSB9LCBmID0gT2JqZWN0LmVudHJpZXMoZCkuZmluZCgoW2RdKSA9PiB3aW5kb3cubG9jYXRpb24ub3JpZ2luID09PSBkICYmIChkICE9PSAiaHR0cHM6Ly9kZXYuZXBpY2dhbWVzLmNvbSIgfHwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKCIvY29tbXVuaXR5L2xlYXJuaW5nLyIpKSk/LlsxXTsKCQkJCQkJZiAmJiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIChkKSA9PiB7CgkJCQkJCQl0cnkgewoJCQkJCQkJCWlmIChkLm9yaWdpbiAhPT0gZi50YXJnZXRPcmlnaW4gfHwgIWYuZGF0YUZpbHRlcihkLmRhdGEpKSByZXR1cm47CgkJCQkJCQkJbGV0IHAgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKSwgbSA9IGYuZXh0cmFjdFZpZGVvSWQocCk7CgkJCQkJCQkJaWYgKCFtKSByZXR1cm47CgkJCQkJCQkJbGV0IGggPSBmLnByb2Nlc3NSZXF1ZXN0Py4oZC5kYXRhKSB8fCBwLmhyZWYsIGcgPSB0eXBlb2YgZi5pZnJhbWVTZWxlY3RvciA9PSAiZnVuY3Rpb24iID8gZi5pZnJhbWVTZWxlY3RvcihoKSA6IGYuaWZyYW1lU2VsZWN0b3IsIF8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGcpOwoJCQkJCQkJCWlmICghXz8uY29udGVudFdpbmRvdykgcmV0dXJuOwoJCQkJCQkJCWxldCB2ID0gZi5yZXNwb25zZUZvcm1hdHRlcihtLCBkLmRhdGEpOwoJCQkJCQkJCV8uY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSh2LCBmLnRhcmdldE9yaWdpbik7CgkJCQkJCQl9IGNhdGNoIChkKSB7CgkJCQkJCQkJY29uc29sZS5lcnJvcigiSWZyYW1lIGNvbW11bmljYXRpb24gZXJyb3I6IiwgZCk7CgkJCQkJCQl9CgkJCQkJCX0pOwoJCQkJCX0KCQkJCQlhc3luYyBmdW5jdGlvbiBtYWluKCkgewoJCQkJCQlpZiAoY29uc29sZS5sb2coIltWT1RdIExvYWRpbmcgZXh0ZW5zaW9uLi4uIiksICgwLCBXLmQ0KSgpICYmIHdpbmRvdy5sb2NhdGlvbi5oYXNoLmluY2x1ZGVzKFcuV0YpKSByZXR1cm4gKDAsIGIucSkoKTsKCQkJCQkJaWYgKHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gPT09IHgueFcpIHJldHVybiBhd2FpdCAoMCwgQy5MKSgpOwoJCQkJCQlhd2FpdCBELmoudXBkYXRlKCksIEYuQS5sb2coYFNlbGVjdGVkIG1lbnUgbGFuZ3VhZ2U6ICR7RC5qLmxhbmd9YCksIGluaXRJZnJhbWVJbnRlcmFjdG9yKCksIGVlLm9uVmlkZW9BZGRlZC5hZGRMaXN0ZW5lcihhc3luYyAoZCkgPT4gewoJCQkJCQkJaWYgKHRlLmhhcyhkKSkgcmV0dXJuOwoJCQkJCQkJbGV0IGYsIHAgPSAoMCwgXy5jUSkoKS5maW5kKChwKSA9PiAoZiA9IGZpbmRDb250YWluZXIocCwgZCksICEhZikpOwoJCQkJCQkJaWYgKHApIHsKCQkJCQkJCQlbInBlZXJ0dWJlIiwgImRpcmVjdGxpbmsiXS5pbmNsdWRlcyhwLmhvc3QpICYmIChwLnVybCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pOwoJCQkJCQkJCXRyeSB7CgkJCQkJCQkJCWxldCBtID0gbmV3IFZpZGVvSGFuZGxlcihkLCBmLCBwKTsKCQkJCQkJCQkJbS52aWRlb0RhdGEgPSBhd2FpdCBtLmdldFZpZGVvRGF0YSgpLCBhd2FpdCBtLmluaXQoKSwgdGUuc2V0KGQsIG0pOwoJCQkJCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQkJCQkJY29uc29sZS5lcnJvcigiW1ZPVF0gRmFpbGVkIHRvIGluaXRpYWxpemUgdmlkZW9IYW5kbGVyIiwgZCk7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9KSwgZWUub25WaWRlb1JlbW92ZWQuYWRkTGlzdGVuZXIoYXN5bmMgKGQpID0+IHsKCQkJCQkJCXRlLmhhcyhkKSAmJiAoYXdhaXQgdGUuZ2V0KGQpLnJlbGVhc2UoKSwgdGUuZGVsZXRlKGQpKTsKCQkJCQkJfSksIGVlLmVuYWJsZSgpOwoJCQkJCX0KCQkJCQltYWluKCkuY2F0Y2goKGQpID0+IHsKCQkJCQkJY29uc29sZS5lcnJvcigiW1ZPVF0iLCBkKTsKCQkJCQl9KSwgbSgpOwoJCQkJfSBjYXRjaCAoZCkgewoJCQkJCW0oZCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJIi4vc3JjL2xvY2FsaXphdGlvbi9sb2NhbGVzL2VuLmpzb24iOiAoZCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCWQuZXhwb3J0cyA9IEpTT04ucGFyc2UoIntcInJlY29tbWVuZGVkXCI6XCJyZWNvbW1lbmRlZFwiLFwidHJhbnNsYXRlVmlkZW9cIjpcIlRyYW5zbGF0ZSB2aWRlb1wiLFwiZGlzYWJsZVRyYW5zbGF0ZVwiOlwiVHVybiBvZmZcIixcInRyYW5zbGF0aW9uU2V0dGluZ3NcIjpcIlRyYW5zbGF0aW9uIHNldHRpbmdzXCIsXCJzdWJ0aXRsZXNTZXR0aW5nc1wiOlwiU3VidGl0bGVzIHNldHRpbmdzXCIsXCJyZXNldFNldHRpbmdzXCI6XCJSZXNldCBzZXR0aW5nc1wiLFwidmlkZW9CZWluZ1RyYW5zbGF0ZWRcIjpcIlRoZSB2aWRlbyBpcyBiZWluZyB0cmFuc2xhdGVkXCIsXCJ2aWRlb0xhbmd1YWdlXCI6XCJWaWRlbyBsYW5ndWFnZVwiLFwidHJhbnNsYXRpb25MYW5ndWFnZVwiOlwiVHJhbnNsYXRpb24gbGFuZ3VhZ2VcIixcInRyYW5zbGF0aW9uVGFrZVwiOlwiVGhlIHRyYW5zbGF0aW9uIHdpbGwgdGFrZVwiLFwidHJhbnNsYXRpb25UYWtlTW9yZVRoYW5Ib3VyXCI6XCJUaGUgdHJhbnNsYXRpb24gd2lsbCB0YWtlIG1vcmUgdGhhbiBhbiBob3VyXCIsXCJ0cmFuc2xhdGlvblRha2VBYm91dE1pbnV0ZVwiOlwiVGhlIHRyYW5zbGF0aW9uIHdpbGwgdGFrZSBhYm91dCBhIG1pbnV0ZVwiLFwidHJhbnNsYXRpb25UYWtlRmV3TWludXRlc1wiOlwiVGhlIHRyYW5zbGF0aW9uIHdpbGwgdGFrZSBhIGZldyBtaW51dGVzXCIsXCJ0cmFuc2xhdGlvblRha2VBcHByb3hpbWF0ZWx5TWludXRlc1wiOlwiVGhlIHRyYW5zbGF0aW9uIHdpbGwgdGFrZSBhcHByb3hpbWF0ZWx5IHswfSBtaW51dGVzXCIsXCJ0cmFuc2xhdGlvblRha2VBcHByb3hpbWF0ZWx5TWludXRlXCI6XCJUaGUgdHJhbnNsYXRpb24gd2lsbCB0YWtlIGFwcHJveGltYXRlbHkgezB9IG1pbnV0ZXNcIixcInJlcXVlc3RUcmFuc2xhdGlvbkZhaWxlZFwiOlwiRmFpbGVkIHRvIHJlcXVlc3QgdmlkZW8gdHJhbnNsYXRpb25cIixcImF1ZGlvTm90UmVjZWl2ZWRcIjpcIkF1ZGlvIGxpbmsgbm90IHJlY2VpdmVkXCIsXCJhdWRpb0Zvcm1hdE5vdFN1cHBvcnRlZFwiOlwiVGhlIGF1ZGlvIGZvcm1hdCBpcyBub3Qgc3VwcG9ydGVkXCIsXCJWT1RBdXRvVHJhbnNsYXRlXCI6XCJUcmFuc2xhdGUgb24gb3BlblwiLFwiVk9URG9udFRyYW5zbGF0ZVlvdXJMYW5nXCI6XCJEb24ndCB0cmFuc2xhdGUgZnJvbSBteSBsYW5ndWFnZVwiLFwiVk9UVm9sdW1lXCI6XCJWaWRlbyB2b2x1bWU6XCIsXCJWT1RWb2x1bWVUcmFuc2xhdGlvblwiOlwiVHJhbnNsYXRpb24gdm9sdW1lOlwiLFwiVk9UQXV0b1NldFZvbHVtZVwiOlwiUmVkdWNlIHZpZGVvIHZvbHVtZSB0b1wiLFwiVk9UU2hvd1ZpZGVvU2xpZGVyXCI6XCJWaWRlbyB2b2x1bWUgc2xpZGVyXCIsXCJWT1RTeW5jVm9sdW1lXCI6XCJMaW5rIHRyYW5zbGF0aW9uIGFuZCB2aWRlbyB2b2x1bWVcIixcIlZPVERpc2FibGVGcm9tWW91ckxhbmdcIjpcIllvdSBoYXZlIGRpc2FibGVkIHRoZSB0cmFuc2xhdGlvbiBvZiB0aGUgdmlkZW8gaW4geW91ciBsYW5ndWFnZVwiLFwiVk9UVmlkZW9Jc1Rvb0xvbmdcIjpcIlZpZGVvIGlzIHRvbyBsb25nXCIsXCJWT1ROb1ZpZGVvSURGb3VuZFwiOlwiTm8gdmlkZW8gSUQgZm91bmRcIixcIlZPVFN1YnRpdGxlc1wiOlwiU3VidGl0bGVzXCIsXCJWT1RTdWJ0aXRsZXNEaXNhYmxlZFwiOlwiRGlzYWJsZWRcIixcIlZPVFN1YnRpdGxlc01heExlbmd0aFwiOlwiU3VidGl0bGVzIG1heCBsZW5ndGhcIixcIlZPVEhpZ2hsaWdodFdvcmRzXCI6XCJIaWdobGlnaHQgd29yZHNcIixcIlZPVFRyYW5zbGF0ZWRGcm9tXCI6XCJ0cmFuc2xhdGVkIGZyb21cIixcIlZPVEF1dG9nZW5lcmF0ZWRcIjpcImF1dG9nZW5lcmF0ZWRcIixcIlZPVFNldHRpbmdzXCI6XCJWT1QgU2V0dGluZ3NcIixcIlZPVE1lbnVMYW5ndWFnZVwiOlwiTWVudSBsYW5ndWFnZVwiLFwiVk9UQXV0aG9yc1wiOlwiQXV0aG9yc1wiLFwiVk9UVmVyc2lvblwiOlwiVmVyc2lvblwiLFwiVk9UTG9hZGVyXCI6XCJMb2FkZXJcIixcIlZPVEJyb3dzZXJcIjpcIkJyb3dzZXJcIixcIlZPVFNob3dQaVBCdXR0b25cIjpcIlNob3cgUGlQIGJ1dHRvblwiLFwibGFuZ3NcIjp7XCJhdXRvXCI6XCJBdXRvXCIsXCJhZlwiOlwiQWZyaWthYW5zXCIsXCJha1wiOlwiQWthblwiLFwic3FcIjpcIkFsYmFuaWFuXCIsXCJhbVwiOlwiQW1oYXJpY1wiLFwiYXJcIjpcIkFyYWJpY1wiLFwiaHlcIjpcIkFybWVuaWFuXCIsXCJhc1wiOlwiQXNzYW1lc2VcIixcImF5XCI6XCJBeW1hcmFcIixcImF6XCI6XCJBemVyYmFpamFuaVwiLFwiYm5cIjpcIkJhbmdsYVwiLFwiZXVcIjpcIkJhc3F1ZVwiLFwiYmVcIjpcIkJlbGFydXNpYW5cIixcImJob1wiOlwiQmhvanB1cmlcIixcImJzXCI6XCJCb3NuaWFuXCIsXCJiZ1wiOlwiQnVsZ2FyaWFuXCIsXCJteVwiOlwiQnVybWVzZVwiLFwiY2FcIjpcIkNhdGFsYW5cIixcImNlYlwiOlwiQ2VidWFub1wiLFwiemhcIjpcIkNoaW5lc2VcIixcInpoLUhhbnNcIjpcIkNoaW5lc2UgKFNpbXBsaWZpZWQpXCIsXCJ6aC1IYW50XCI6XCJDaGluZXNlIChUcmFkaXRpb25hbClcIixcImNvXCI6XCJDb3JzaWNhblwiLFwiaHJcIjpcIkNyb2F0aWFuXCIsXCJjc1wiOlwiQ3plY2hcIixcImRhXCI6XCJEYW5pc2hcIixcImR2XCI6XCJEaXZlaGlcIixcIm5sXCI6XCJEdXRjaFwiLFwiZW5cIjpcIkVuZ2xpc2hcIixcImVvXCI6XCJFc3BlcmFudG9cIixcImV0XCI6XCJFc3RvbmlhblwiLFwiZWVcIjpcIkV3ZVwiLFwiZmlsXCI6XCJGaWxpcGlub1wiLFwiZmlcIjpcIkZpbm5pc2hcIixcImZyXCI6XCJGcmVuY2hcIixcImdsXCI6XCJHYWxpY2lhblwiLFwibGdcIjpcIkdhbmRhXCIsXCJrYVwiOlwiR2VvcmdpYW5cIixcImRlXCI6XCJHZXJtYW5cIixcImVsXCI6XCJHcmVla1wiLFwiZ25cIjpcIkd1YXJhbmlcIixcImd1XCI6XCJHdWphcmF0aVwiLFwiaHRcIjpcIkhhaXRpYW4gQ3Jlb2xlXCIsXCJoYVwiOlwiSGF1c2FcIixcImhhd1wiOlwiSGF3YWlpYW5cIixcIml3XCI6XCJIZWJyZXdcIixcImhpXCI6XCJIaW5kaVwiLFwiaG1uXCI6XCJIbW9uZ1wiLFwiaHVcIjpcIkh1bmdhcmlhblwiLFwiaXNcIjpcIkljZWxhbmRpY1wiLFwiaWdcIjpcIklnYm9cIixcImlkXCI6XCJJbmRvbmVzaWFuXCIsXCJnYVwiOlwiSXJpc2hcIixcIml0XCI6XCJJdGFsaWFuXCIsXCJqYVwiOlwiSmFwYW5lc2VcIixcImp2XCI6XCJKYXZhbmVzZVwiLFwia25cIjpcIkthbm5hZGFcIixcImtrXCI6XCJLYXpha2hcIixcImttXCI6XCJLaG1lclwiLFwicndcIjpcIktpbnlhcndhbmRhXCIsXCJrb1wiOlwiS29yZWFuXCIsXCJrcmlcIjpcIktyaW9cIixcImt1XCI6XCJLdXJkaXNoXCIsXCJreVwiOlwiS3lyZ3l6XCIsXCJsb1wiOlwiTGFvXCIsXCJsYVwiOlwiTGF0aW5cIixcImx2XCI6XCJMYXR2aWFuXCIsXCJsblwiOlwiTGluZ2FsYVwiLFwibHRcIjpcIkxpdGh1YW5pYW5cIixcImxiXCI6XCJMdXhlbWJvdXJnaXNoXCIsXCJta1wiOlwiTWFjZWRvbmlhblwiLFwibWdcIjpcIk1hbGFnYXN5XCIsXCJtc1wiOlwiTWFsYXlcIixcIm1sXCI6XCJNYWxheWFsYW1cIixcIm10XCI6XCJNYWx0ZXNlXCIsXCJtaVwiOlwiTcSBb3JpXCIsXCJtclwiOlwiTWFyYXRoaVwiLFwibW5cIjpcIk1vbmdvbGlhblwiLFwibmVcIjpcIk5lcGFsaVwiLFwibnNvXCI6XCJOb3J0aGVybiBTb3Rob1wiLFwibm9cIjpcIk5vcndlZ2lhblwiLFwibnlcIjpcIk55YW5qYVwiLFwib3JcIjpcIk9kaWFcIixcIm9tXCI6XCJPcm9tb1wiLFwicHNcIjpcIlBhc2h0b1wiLFwiZmFcIjpcIlBlcnNpYW5cIixcInBsXCI6XCJQb2xpc2hcIixcInB0XCI6XCJQb3J0dWd1ZXNlXCIsXCJwYVwiOlwiUHVuamFiaVwiLFwicXVcIjpcIlF1ZWNodWFcIixcInJvXCI6XCJSb21hbmlhblwiLFwicnVcIjpcIlJ1c3NpYW5cIixcInNtXCI6XCJTYW1vYW5cIixcInNhXCI6XCJTYW5za3JpdFwiLFwiZ2RcIjpcIlNjb3R0aXNoIEdhZWxpY1wiLFwic3JcIjpcIlNlcmJpYW5cIixcInNuXCI6XCJTaG9uYVwiLFwic2RcIjpcIlNpbmRoaVwiLFwic2lcIjpcIlNpbmhhbGFcIixcInNrXCI6XCJTbG92YWtcIixcInNsXCI6XCJTbG92ZW5pYW5cIixcInNvXCI6XCJTb21hbGlcIixcInN0XCI6XCJTb3V0aGVybiBTb3Rob1wiLFwiZXNcIjpcIlNwYW5pc2hcIixcInN1XCI6XCJTdW5kYW5lc2VcIixcInN3XCI6XCJTd2FoaWxpXCIsXCJzdlwiOlwiU3dlZGlzaFwiLFwidGdcIjpcIlRhamlrXCIsXCJ0YVwiOlwiVGFtaWxcIixcInR0XCI6XCJUYXRhclwiLFwidGVcIjpcIlRlbHVndVwiLFwidGhcIjpcIlRoYWlcIixcInRpXCI6XCJUaWdyaW55YVwiLFwidHNcIjpcIlRzb25nYVwiLFwidHJcIjpcIlR1cmtpc2hcIixcInRrXCI6XCJUdXJrbWVuXCIsXCJ1a1wiOlwiVWtyYWluaWFuXCIsXCJ1clwiOlwiVXJkdVwiLFwidWdcIjpcIlV5Z2h1clwiLFwidXpcIjpcIlV6YmVrXCIsXCJ2aVwiOlwiVmlldG5hbWVzZVwiLFwiY3lcIjpcIldlbHNoXCIsXCJmeVwiOlwiV2VzdGVybiBGcmlzaWFuXCIsXCJ4aFwiOlwiWGhvc2FcIixcInlpXCI6XCJZaWRkaXNoXCIsXCJ5b1wiOlwiWW9ydWJhXCIsXCJ6dVwiOlwiWnVsdVwifSxcInN0cmVhbU5vQ29ubmVjdGlvblRvU2VydmVyXCI6XCJUaGVyZSBpcyBubyBjb25uZWN0aW9uIHRvIHRoZSBzZXJ2ZXJcIixcInNlYXJjaEZpZWxkXCI6XCJTZWFyY2guLi5cIixcIlZPVFRyYW5zbGF0ZUFQSUVycm9yc1wiOlwiVHJhbnNsYXRlIGVycm9ycyBmcm9tIHRoZSBBUElcIixcIlZPVERldGVjdFNlcnZpY2VcIjpcIkxhbmd1YWdlIGRldGVjdGlvbiBzZXJ2aWNlXCIsXCJWT1RQcm94eVdvcmtlckhvc3RcIjpcIkVudGVyIHRoZSBwcm94eSB3b3JrZXIgYWRkcmVzc1wiLFwiVk9UTTN1OFByb3h5SG9zdFwiOlwiRW50ZXIgdGhlIGFkZHJlc3Mgb2YgdGhlIG0zdTggcHJveHkgd29ya2VyXCIsXCJwcm94eVNldHRpbmdzXCI6XCJQcm94eSBTZXR0aW5nc1wiLFwidHJhbnNsYXRpb25UYWtlQXBwcm94aW1hdGVseU1pbnV0ZTJcIjpcIlRoZSB0cmFuc2xhdGlvbiB3aWxsIHRha2UgYXBwcm94aW1hdGVseSB7MH0gbWludXRlc1wiLFwiVk9UQXVkaW9Cb29zdGVyXCI6XCJFeHRlbmRlZCB0cmFuc2xhdGlvbiB2b2x1bWUgaW5jcmVhc2VcIixcIlZPVFN1YnRpdGxlc0Rlc2lnblwiOlwiU3VidGl0bGVzIGRlc2lnblwiLFwiVk9UU3VidGl0bGVzRm9udFNpemVcIjpcIkZvbnQgc2l6ZSBvZiBzdWJ0aXRsZXNcIixcIlZPVFN1YnRpdGxlc09wYWNpdHlcIjpcIlRyYW5zcGFyZW5jeSBvZiB0aGUgc3VidGl0bGUgYmFja2dyb3VuZFwiLFwiVk9UU3VidGl0bGVzRG93bmxvYWRGb3JtYXRcIjpcIlRoZSBmb3JtYXQgZm9yIGRvd25sb2FkaW5nIHN1YnRpdGxlc1wiLFwiVk9URG93bmxvYWRXaXRoTmFtZVwiOlwiRG93bmxvYWQgZmlsZXMgd2l0aCB0aGUgdmlkZW8gbmFtZVwiLFwiVk9UVXBkYXRlTG9jYWxlRmlsZXNcIjpcIlVwZGF0ZSBsb2NhbGl6YXRpb24gZmlsZXNcIixcIlZPVExvY2FsZUhhc2hcIjpcIkxvY2FsZSBoYXNoXCIsXCJWT1RVcGRhdGVkQXRcIjpcIlVwZGF0ZWQgYXRcIixcIlZPVE5lZWRXZWJBdWRpb0FQSVwiOlwiVG8gZW5hYmxlIHRoaXMsIHlvdSBtdXN0IGhhdmUgYSBXZWIgQXVkaW8gQVBJXCIsXCJWT1RNZWRpYUNTUEVuYWJsZWRPblNpdGVcIjpcIk1lZGlhIENTUCBpcyBlbmFibGVkIG9uIHRoaXMgc2l0ZVwiLFwiVk9UT25seUJ5cGFzc01lZGlhQ1NQXCI6XCJVc2UgaXQgb25seSBmb3IgYnlwYXNzaW5nIE1lZGlhIENTUFwiLFwiVk9UTmV3QXVkaW9QbGF5ZXJcIjpcIlVzZSB0aGUgbmV3IGF1ZGlvIHBsYXllclwiLFwiVk9UVXNlTmV3TW9kZWxcIjpcIlVzZSBhbiBleHBlcmltZW50YWwgdmFyaWF0aW9uIG9mIFlhbmRleCB2b2ljZXMgZm9yIHNvbWUgdmlkZW9zXCIsXCJUcmFuc2xhdGlvbkRlbGF5ZWRcIjpcIlRoZSB0cmFuc2xhdGlvbiBpcyBzbGlnaHRseSBkZWxheWVkXCIsXCJWT1RUcmFuc2xhdGlvbkNvbXBsZXRlZE5vdGlmeVwiOlwiVGhlIHRyYW5zbGF0aW9uIG9uIHRoZSB7MH0gaGFzIGJlZW4gY29tcGxldGVkIVwiLFwiVk9UU2VuZE5vdGlmeU9uQ29tcGxldGVcIjpcIlNlbmQgYSBub3RpZmljYXRpb24gdGhhdCB0aGUgdmlkZW8gaGFzIGJlZW4gdHJhbnNsYXRlZFwiLFwiVk9UQnVnUmVwb3J0XCI6XCJSZXBvcnQgYSBidWdcIixcIlZPVFRyYW5zbGF0ZVByb3h5RGlzYWJsZWRcIjpcIkRpc2FibGVkXCIsXCJWT1RUcmFuc2xhdGVQcm94eUVuYWJsZWRcIjpcIkVuYWJsZWRcIixcIlZPVFRyYW5zbGF0ZVByb3h5RXZlcnl0aGluZ1wiOlwiUHJveHkgZXZlcnl0aGluZ1wiLFwiVk9UVHJhbnNsYXRlUHJveHlTdGF0dXNcIjpcIlByb3h5aW5nIG1vZGVcIixcIlZPVFRyYW5zbGF0ZWRCeVwiOlwiVHJhbnNsYXRlZCBieSB7MH1cIixcIlZPVFN0cmVhbU5vdEF2YWlsYWJsZVwiOlwiVHJhbnNsYXRlIHN0cmVhbSBpc24ndCBhdmFpbGFibGVcIixcIlZPVFRyYW5zbGF0aW9uVGV4dFNlcnZpY2VcIjpcIlRleHQgdHJhbnNsYXRpb24gc2VydmljZVwiLFwiVk9UTm90QWZmZWN0VG9Wb2ljZVwiOlwiRG9lc24ndCBhZmZlY3QgdGhlIHRyYW5zbGF0aW9uIG9mIHRleHQgaW4gdm9pY2Ugb3ZlclwiLFwiRG9udFRyYW5zbGF0ZVNlbGVjdGVkTGFuZ3VhZ2VzXCI6XCJEb24ndCB0cmFuc2xhdGUgZnJvbSBzZWxlY3RlZCBsYW5ndWFnZXNcIixcInNob3dWaWRlb1ZvbHVtZVNsaWRlclwiOlwiRGlzcGxheSB0aGUgdmlkZW8gdm9sdW1lIHNsaWRlclwiLFwiaG90a2V5c1NldHRpbmdzXCI6XCJIb3RrZXlzIHNldHRpbmdzXCIsXCJOb25lXCI6XCJOb25lXCIsXCJWT1RVc2VMaXZlbHlWb2ljZVwiOlwiVXNlIGxpdmVseSB2b2ljZXMuIFNwZWFrZXJzIHNvdW5kIGxpa2UgbmF0aXZlIFJ1c3NpYW5zLlwiLFwibWlzY1NldHRpbmdzXCI6XCJNaXNjIHNldHRpbmdzXCIsXCJzZXJ2aWNlc1wiOntcInlhbmRleGJyb3dzZXJcIjpcIllhbmRleCBCcm93c2VyXCIsXCJtc2VkZ2VcIjpcIk1pY3Jvc29mdCBFZGdlXCIsXCJydXN0LXNlcnZlclwiOlwiUnVzdCBTZXJ2ZXJcIn0sXCJhYm91dEV4dGVuc2lvblwiOlwiQWJvdXQgZXh0ZW5zaW9uXCIsXCJhcHBlYXJhbmNlXCI6XCJBcHBlYXJhbmNlXCIsXCJidXR0b25Qb3NpdGlvbkluV2lkZVBsYXllclwiOlwiQnV0dG9uIHBvc2l0aW9uIGluIHdpZGUgcGxheWVyXCIsXCJwb3NpdGlvblwiOntcImxlZnRcIjpcIkxlZnRcIixcInJpZ2h0XCI6XCJSaWdodFwiLFwidG9wXCI6XCJUb3BcIixcImRlZmF1bHRcIjpcIkRlZmF1bHRcIn0sXCJzZWNzXCI6XCJzZWNzXCIsXCJhdXRvSGlkZUJ1dHRvbkRlbGF5XCI6XCJEZWxheSBiZWZvcmUgaGlkaW5nIHRoZSB0cmFuc2xhdGUgYnV0dG9uXCIsXCJub3RGb3VuZFwiOlwibm90IGZvdW5kXCIsXCJtaW5CdXR0b25Qb3NpdGlvbkNvbnRhaW5lclwiOlwiVGhlIGJ1dHRvbiBwb3NpdGlvbiBvbmx5IGNoYW5nZXMgaW4gcGxheWVycyBsYXJnZXIgdGhhbiA2MDAgcGl4ZWxzLlwiLFwiVk9UVHJhbnNsYXRlUHJveHlTdGF0dXNEZWZhdWx0XCI6XCJDb21wbGV0ZWx5IGRpc2FibGluZyBwcm94eWluZyBpbiB5b3VyIGNvdW50cnkgbWF5IGJyZWFrIHRoZSBleHRlbnNpb25cIixcIlByZXNzVGhlS2V5Q29tYmluYXRpb25cIjpcIlByZXNzIHRoZSBrZXkgY29tYmluYXRpb24uLi5cIixcIlZPVFVzZUF1ZGlvRG93bmxvYWRcIjpcIlVzZSBhdWRpbyBkb3dubG9hZFwiLFwiVk9UVXNlQXVkaW9Eb3dubG9hZFdhcm5pbmdcIjpcIkRpc2FibGluZyBhdWRpbyBkb3dubG9hZHMgbWF5IGFmZmVjdCB0aGUgZnVuY3Rpb25hbGl0eSBvZiB0aGUgZXh0ZW5zaW9uXCIsXCJWT1RBY2NvdW50UmVxdWlyZWRcIjpcIllvdSBuZWVkIHRvIGxvZyBpbiB0byB1c2UgdGhpcyBmZWF0dXJlXCIsXCJWT1RNeUFjY291bnRcIjpcIk15IGFjY291bnRcIixcIlZPVExvZ2luXCI6XCJMb2dpblwiLFwiVk9UTG9nb3V0XCI6XCJMb2dvdXRcIixcIlZPVFJlZnJlc2hcIjpcIlJlZnJlc2hcIixcIlZPVFlhbmRleFRva2VuXCI6XCJFbnRlciB0aGUgWWFuZGV4IE9BdXRoIFRva2VuXCIsXCJWT1RZYW5kZXhUb2tlbkluZm9cIjpcIllvdSBjYW4gbWFudWFsbHkgc2V0IHRoZSBhY2NvdW50IHRva2VuIGluIHRoaXMgZmllbGQuIFBsZWFzZSBub3RlIHRoYXQgd2UgZG9uJ3QgY2hlY2sgaXRzIHZhbGlkaXR5IGJlZm9yZSBzZW5kaW5nIGEgdHJhbnNsYXRlIHJlcXVlc3RcIixcIlZPVExvZ2luVmlhVG9rZW5cIjpcIkxvZ2luIHZpYSB0b2tlblwifSIpOwoJCX0sCgkJIi4vc3JjL2xvY2FsaXphdGlvbi9sb2NhbGl6YXRpb25Qcm92aWRlci50cyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5hKGQsIGFzeW5jIChkLCBtKSA9PiB7CgkJCQl0cnkgewoJCQkJCXAuZChmLCB7IGo6ICgpID0+IFQgfSk7CgkJCQkJdmFyIGggPSBwKCIuL3NyYy9sb2NhbGl6YXRpb24vbG9jYWxlcy9lbi5qc29uIiksIGcgPSBwKCIuL3NyYy9jb25maWcvY29uZmlnLmpzIiksIF8gPSBwKCIuL3NyYy91dGlscy9kZWJ1Zy50cyIpLCB2ID0gcCgiLi9zcmMvdXRpbHMvZ20udHMiKSwgYiA9IHAoIi4vc3JjL3V0aWxzL2xvY2FsaXphdGlvbi50cyIpLCB4ID0gcCgiLi9zcmMvdXRpbHMvc3RvcmFnZS50cyIpLCBDID0gcCgiLi9zcmMvdXRpbHMvdXRpbHMudHMiKSwgdyA9IGQoWwoJCQkJCQl2LAoJCQkJCQliLAoJCQkJCQl4LAoJCQkJCQlDCgkJCQkJXSk7CgkJCQkJW3YsIGIsIHgsIENdID0gdy50aGVuID8gKGF3YWl0IHcpKCkgOiB3OwoJCQkJCWNsYXNzIExvY2FsaXphdGlvblByb3ZpZGVyIHsKCQkJCQkJc3RvcmFnZUtleXMgPSBbCgkJCQkJCQkibG9jYWxlUGhyYXNlcyIsCgkJCQkJCQkibG9jYWxlTGFuZyIsCgkJCQkJCQkibG9jYWxlSGFzaCIsCgkJCQkJCQkibG9jYWxlVXBkYXRlZEF0IiwKCQkJCQkJCSJsb2NhbGVMYW5nT3ZlcnJpZGUiCgkJCQkJCV07CgkJCQkJCWxhbmc7CgkJCQkJCWxvY2FsZTsKCQkJCQkJZGVmYXVsdExvY2FsZSA9ICgwLCBDLkdXKShoKTsKCQkJCQkJY2FjaGVUVEwgPSA3MjAwOwoJCQkJCQlsb2NhbGl6YXRpb25VcmwgPSBgJHtnLmh4fS9tYXN0ZXIvc3JjL2xvY2FsaXphdGlvbmA7CgkJCQkJCV9sYW5nT3ZlcnJpZGUgPSAiYXV0byI7CgkJCQkJCWNvbnN0cnVjdG9yKCkgewoJCQkJCQkJdGhpcy5sYW5nID0gdGhpcy5nZXRMYW5nKCksIHRoaXMubG9jYWxlID0ge307CgkJCQkJCX0KCQkJCQkJYXN5bmMgaW5pdCgpIHsKCQkJCQkJCXRoaXMuX2xhbmdPdmVycmlkZSA9IGF3YWl0IHguZC5nZXQoImxvY2FsZUxhbmdPdmVycmlkZSIsICJhdXRvIiksIHRoaXMubGFuZyA9IHRoaXMuZ2V0TGFuZygpOwoJCQkJCQkJbGV0IGQgPSBhd2FpdCB4LmQuZ2V0KCJsb2NhbGVQaHJhc2VzIiwgIiIpOwoJCQkJCQkJcmV0dXJuIHRoaXMuc2V0TG9jYWxlRnJvbUpzb25TdHJpbmcoZCksIHRoaXM7CgkJCQkJCX0KCQkJCQkJZ2V0IGxhbmdPdmVycmlkZSgpIHsKCQkJCQkJCXJldHVybiB0aGlzLl9sYW5nT3ZlcnJpZGU7CgkJCQkJCX0KCQkJCQkJZ2V0TGFuZygpIHsKCQkJCQkJCXJldHVybiB0aGlzLmxhbmdPdmVycmlkZSA9PT0gImF1dG8iID8gYi52IDogdGhpcy5sYW5nT3ZlcnJpZGU7CgkJCQkJCX0KCQkJCQkJZ2V0QXZhaWxhYmxlTGFuZ3MoKSB7CgkJCQkJCQlyZXR1cm4gImF1dG8uZW4ucnUuYWYuYW0uYXIuYXouYmcuYm4uYnMuY2EuY3MuY3kuZGEuZGUuZWwuZXMuZXQuZXUuZmEuZmkuZnIuZ2wuaGkuaHIuaHUuaHkuaWQuaXQuamEuanYua2sua20ua24ua28ubG8ubWsubWwubW4ubXMubXQubXkubmUubmwucGEucGwucHQucm8uc2kuc2suc2wuc3Euc3Iuc3Uuc3Yuc3cudHIudWsudXIudXoudmkuemguenUiLnNwbGl0KCIuIik7CgkJCQkJCX0KCQkJCQkJYXN5bmMgcmVzZXQoKSB7CgkJCQkJCQlmb3IgKGxldCBkIG9mIHRoaXMuc3RvcmFnZUtleXMpIGF3YWl0IHguZC5kZWxldGUoZCk7CgkJCQkJCQlyZXR1cm4gdGhpczsKCQkJCQkJfQoJCQkJCQlidWlsZFVybChkLCBmID0gITEpIHsKCQkJCQkJCWxldCBwID0gZiA/IGA/dGltZXN0YW1wPSR7KDAsIEMubGcpKCl9YCA6ICIiOwoJCQkJCQkJcmV0dXJuIGAke3RoaXMubG9jYWxpemF0aW9uVXJsfSR7ZH0ke3B9YDsKCQkJCQkJfQoJCQkJCQlhc3luYyBjaGFuZ2VMYW5nKGQpIHsKCQkJCQkJCWxldCBmID0gdGhpcy5sYW5nT3ZlcnJpZGU7CgkJCQkJCQlyZXR1cm4gZiA9PT0gZCA/ICExIDogKGF3YWl0IHguZC5zZXQoImxvY2FsZUxhbmdPdmVycmlkZSIsIGQpLCB0aGlzLl9sYW5nT3ZlcnJpZGUgPSBkLCB0aGlzLmxhbmcgPSB0aGlzLmdldExhbmcoKSwgYXdhaXQgdGhpcy51cGRhdGUoITApLCAhMCk7CgkJCQkJCX0KCQkJCQkJYXN5bmMgY2hlY2tVcGRhdGVzKGQgPSAhMSkgewoJCQkJCQkJXy5BLmxvZygiQ2hlY2sgbG9jYWxlIHVwZGF0ZXMuLi4iKTsKCQkJCQkJCXRyeSB7CgkJCQkJCQkJbGV0IGYgPSBhd2FpdCAoMCwgdi5HMykodGhpcy5idWlsZFVybCgiL2hhc2hlcy5qc29uIiwgZCkpOwoJCQkJCQkJCWlmICghZi5vaykgdGhyb3cgZi5zdGF0dXM7CgkJCQkJCQkJbGV0IHAgPSBhd2FpdCBmLmpzb24oKTsKCQkJCQkJCQlyZXR1cm4gYXdhaXQgeC5kLmdldCgibG9jYWxlSGFzaCIpID09PSBwW3RoaXMubGFuZ10gPyAhMSA6IHBbdGhpcy5sYW5nXTsKCQkJCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQkJCQlyZXR1cm4gY29uc29sZS5lcnJvcigiW1ZPVF0gW2xvY2FsaXphdGlvblByb3ZpZGVyXSBGYWlsZWQgdG8gZ2V0IGxvY2FsZXMgaGFzaDoiLCBkKSwgITE7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJYXN5bmMgdXBkYXRlKGQgPSAhMSkgewoJCQkJCQkJbGV0IGYgPSBhd2FpdCB4LmQuZ2V0KCJsb2NhbGVVcGRhdGVkQXQiLCAwKTsKCQkJCQkJCWlmICghZCAmJiBmICsgdGhpcy5jYWNoZVRUTCA+ICgwLCBDLmxnKSgpICYmIGF3YWl0IHguZC5nZXQoImxvY2FsZUxhbmciKSA9PT0gdGhpcy5sYW5nKSByZXR1cm4gdGhpczsKCQkJCQkJCWxldCBwID0gYXdhaXQgdGhpcy5jaGVja1VwZGF0ZXMoZCk7CgkJCQkJCQlpZiAoYXdhaXQgeC5kLnNldCgibG9jYWxlVXBkYXRlZEF0IiwgKDAsIEMubGcpKCkpLCAhcCkgcmV0dXJuIHRoaXM7CgkJCQkJCQlfLkEubG9nKCJVcGRhdGluZyBsb2NhbGUuLi4iKTsKCQkJCQkJCXRyeSB7CgkJCQkJCQkJbGV0IGYgPSBhd2FpdCAoMCwgdi5HMykodGhpcy5idWlsZFVybChgL2xvY2FsZXMvJHt0aGlzLmxhbmd9Lmpzb25gLCBkKSk7CgkJCQkJCQkJaWYgKCFmLm9rKSB0aHJvdyBmLnN0YXR1czsKCQkJCQkJCQlsZXQgbSA9IGF3YWl0IGYudGV4dCgpOwoJCQkJCQkJCWF3YWl0IHguZC5zZXQoImxvY2FsZVBocmFzZXMiLCBtKSwgYXdhaXQgeC5kLnNldCgibG9jYWxlSGFzaCIsIHApLCBhd2FpdCB4LmQuc2V0KCJsb2NhbGVMYW5nIiwgdGhpcy5sYW5nKSwgdGhpcy5zZXRMb2NhbGVGcm9tSnNvblN0cmluZyhtKTsKCQkJCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQkJCQljb25zb2xlLmVycm9yKCJbVk9UXSBbbG9jYWxpemF0aW9uUHJvdmlkZXJdIEZhaWxlZCB0byBnZXQgbG9jYWxlOiIsIGQpLCB0aGlzLnNldExvY2FsZUZyb21Kc29uU3RyaW5nKGF3YWl0IHguZC5nZXQoImxvY2FsZVBocmFzZXMiLCAiIikpOwoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIHRoaXM7CgkJCQkJCX0KCQkJCQkJc2V0TG9jYWxlRnJvbUpzb25TdHJpbmcoZCkgewoJCQkJCQkJdHJ5IHsKCQkJCQkJCQlsZXQgZiA9IEpTT04ucGFyc2UoZCkgfHwge307CgkJCQkJCQkJdGhpcy5sb2NhbGUgPSAoMCwgQy5HVykoZik7CgkJCQkJCQl9IGNhdGNoIChkKSB7CgkJCQkJCQkJY29uc29sZS5lcnJvcigiW1ZPVF0gW2xvY2FsaXphdGlvblByb3ZpZGVyXSIsIGQpLCB0aGlzLmxvY2FsZSA9IHt9OwoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIHRoaXM7CgkJCQkJCX0KCQkJCQkJZ2V0RnJvbUxvY2FsZShkLCBmKSB7CgkJCQkJCQlyZXR1cm4gZD8uW2ZdID8/IHRoaXMud2Fybk1pc3NpbmdLZXkoZCwgZik7CgkJCQkJCX0KCQkJCQkJd2Fybk1pc3NpbmdLZXkoZCwgZikgewoJCQkJCQkJY29uc29sZS53YXJuKCJbVk9UXSBbbG9jYWxpemF0aW9uUHJvdmlkZXJdIGxvY2FsZSIsIGQsICJkb2Vzbid0IGNvbnRhaW4ga2V5IiwgZik7CgkJCQkJCX0KCQkJCQkJZ2V0RGVmYXVsdChkKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5nZXRGcm9tTG9jYWxlKHRoaXMuZGVmYXVsdExvY2FsZSwgZCkgPz8gZDsKCQkJCQkJfQoJCQkJCQlnZXQoZCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuZ2V0RnJvbUxvY2FsZSh0aGlzLmxvY2FsZSwgZCkgPz8gdGhpcy5nZXREZWZhdWx0KGQpOwoJCQkJCQl9CgkJCQkJfQoJCQkJCWxldCBUID0gbmV3IExvY2FsaXphdGlvblByb3ZpZGVyKCk7CgkJCQkJYXdhaXQgVC5pbml0KCksIG0oKTsKCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQltKGQpOwoJCQkJfQoJCQl9LCAxKTsKCQl9LAoJCSIuL3NyYy9zdHlsZXMvbWFpbi5zY3NzIjogKCkgPT4gewoJCQlHTV9hZGRTdHlsZSgiLnZvdC1idXR0b257LS12b3QtaGVscGVyLXRoZW1lOnZhcigtLXZvdC10aGVtZS1yZ2IsdmFyKC0tdm90LXByaW1hcnktcmdiLDMzLDE1MCwyNDMpKTstLXZvdC1oZWxwZXItb250aGVtZTp2YXIoLS12b3Qtb250aGVtZS1yZ2IsdmFyKC0tdm90LW9ucHJpbWFyeS1yZ2IsMjU1LDI1NSwyNTUpKTtib3gtc2l6aW5nOmJvcmRlci1ib3g7dmVydGljYWwtYWxpZ246bWlkZGxlO3RleHQtYWxpZ246Y2VudGVyO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7bWluLXdpZHRoOjY0cHg7aGVpZ2h0OjM2cHg7Y29sb3I6cmdiKHZhcigtLXZvdC1oZWxwZXItb250aGVtZSkpO2JhY2tncm91bmQtY29sb3I6cmdiKHZhcigtLXZvdC1oZWxwZXItdGhlbWUpKTtmb250LWZhbWlseTp2YXIoLS12b3QtZm9udC1mYW1pbHksXCJSb2JvdG9cIixcIlNlZ29lIFVJXCIsc3lzdGVtLXVpLHNhbnMtc2VyaWYpO2N1cnNvcjpwb2ludGVyO291dGxpbmU6bm9uZTtmb250LXNpemU6MTRweDtmb250LXdlaWdodDo1MDA7bGluZS1oZWlnaHQ6MzZweDt0cmFuc2l0aW9uOmJveC1zaGFkb3cgLjJzO2Rpc3BsYXk6aW5saW5lLWJsb2NrO3Bvc2l0aW9uOnJlbGF0aXZlO2JveC1zaGFkb3c6MCAzcHggMXB4IC0ycHggIzAwMDMsMCAycHggMnB4ICMwMDAwMDAyNCwwIDFweCA1cHggIzAwMDAwMDFmO2JvcmRlcjpub25lIWltcG9ydGFudDtib3JkZXItcmFkaXVzOjRweCFpbXBvcnRhbnQ7cGFkZGluZzowIDE2cHghaW1wb3J0YW50fS52b3QtYnV0dG9uW2hpZGRlbl17ZGlzcGxheTpub25lIWltcG9ydGFudH0udm90LWJ1dHRvbjo6LW1vei1mb2N1cy1pbm5lcntib3JkZXI6bm9uZSFpbXBvcnRhbnR9LnZvdC1idXR0b246YmVmb3JlLC52b3QtYnV0dG9uOmFmdGVye2NvbnRlbnQ6XCJcIjtvcGFjaXR5OjA7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7Ym90dG9tOjA7bGVmdDowO3JpZ2h0OjA7Ym9yZGVyLXJhZGl1czppbmhlcml0IWltcG9ydGFudH0udm90LWJ1dHRvbjpiZWZvcmV7YmFja2dyb3VuZC1jb2xvcjpyZ2IodmFyKC0tdm90LWhlbHBlci1vbnRoZW1lKSk7dHJhbnNpdGlvbjpvcGFjaXR5IC4yc30udm90LWJ1dHRvbjphZnRlcntiYWNrZ3JvdW5kOnJhZGlhbC1ncmFkaWVudChjaXJjbGUsY3VycmVudENvbG9yIDElLCMwMDAwIDElKSA1MCUvMTAwMDAlIDEwMDAwJSBuby1yZXBlYXQ7dHJhbnNpdGlvbjpvcGFjaXR5IDFzLGJhY2tncm91bmQtc2l6ZSAuNXN9LnZvdC1idXR0b246aG92ZXJ7Ym94LXNoYWRvdzowIDJweCA0cHggLTFweCAjMDAwMywwIDRweCA1cHggIzAwMDAwMDI0LDAgMXB4IDEwcHggIzAwMDAwMDFmfS52b3QtYnV0dG9uOmhvdmVyOmJlZm9yZXtvcGFjaXR5Oi4wOH0udm90LWJ1dHRvbjphY3RpdmV7Ym94LXNoYWRvdzowIDVweCA1cHggLTNweCAjMDAwMywwIDhweCAxMHB4IDFweCAjMDAwMDAwMjQsMCAzcHggMTRweCAycHggIzAwMDAwMDFmfS52b3QtYnV0dG9uOmFjdGl2ZTphZnRlcntvcGFjaXR5Oi4zMjtiYWNrZ3JvdW5kLXNpemU6MTAwJSAxMDAlO3RyYW5zaXRpb246YmFja2dyb3VuZC1zaXplfS52b3QtYnV0dG9uW2Rpc2FibGVkPXRydWVde2JhY2tncm91bmQtY29sb3I6cmdiYSh2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiwwLDAsMCksLjEyKTtjb2xvcjpyZ2JhKHZhcigtLXZvdC1vbnN1cmZhY2UtcmdiLDAsMCwwKSwuMzgpO2JveC1zaGFkb3c6bm9uZTtjdXJzb3I6aW5pdGlhbH0udm90LWJ1dHRvbltkaXNhYmxlZD10cnVlXTpiZWZvcmUsLnZvdC1idXR0b25bZGlzYWJsZWQ9dHJ1ZV06YWZ0ZXJ7b3BhY2l0eTowfS52b3Qtb3V0bGluZWQtYnV0dG9uey0tdm90LWhlbHBlci10aGVtZTp2YXIoLS12b3QtdGhlbWUtcmdiLHZhcigtLXZvdC1wcmltYXJ5LXJnYiwzMywxNTAsMjQzKSk7Ym94LXNpemluZzpib3JkZXItYm94O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTt0ZXh0LWFsaWduOmNlbnRlcjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO21pbi13aWR0aDo2NHB4O2hlaWdodDozNnB4O2NvbG9yOnJnYih2YXIoLS12b3QtaGVscGVyLXRoZW1lKSk7Zm9udC1mYW1pbHk6dmFyKC0tdm90LWZvbnQtZmFtaWx5LFwiUm9ib3RvXCIsXCJTZWdvZSBVSVwiLHN5c3RlbS11aSxzYW5zLXNlcmlmKTtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiMwMDAwO291dGxpbmU6bm9uZTtmb250LXNpemU6MTRweDtmb250LXdlaWdodDo1MDA7bGluZS1oZWlnaHQ6MzRweDtkaXNwbGF5OmlubGluZS1ibG9jaztwb3NpdGlvbjpyZWxhdGl2ZTtib3JkZXI6c29saWQgMXB4IHJnYmEodmFyKC0tdm90LW9uc3VyZmFjZS1yZ2IsMCwwLDApLC4yNCkhaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6NHB4IWltcG9ydGFudDttYXJnaW46MCFpbXBvcnRhbnQ7cGFkZGluZzowIDE2cHghaW1wb3J0YW50fS52b3Qtb3V0bGluZWQtYnV0dG9uW2hpZGRlbl17ZGlzcGxheTpub25lIWltcG9ydGFudH0udm90LW91dGxpbmVkLWJ1dHRvbjo6LW1vei1mb2N1cy1pbm5lcntib3JkZXI6bm9uZSFpbXBvcnRhbnR9LnZvdC1vdXRsaW5lZC1idXR0b246YmVmb3JlLC52b3Qtb3V0bGluZWQtYnV0dG9uOmFmdGVye2NvbnRlbnQ6XCJcIjtvcGFjaXR5OjA7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7Ym90dG9tOjA7bGVmdDowO3JpZ2h0OjA7Ym9yZGVyLXJhZGl1czozcHghaW1wb3J0YW50fS52b3Qtb3V0bGluZWQtYnV0dG9uOmJlZm9yZXtiYWNrZ3JvdW5kLWNvbG9yOnJnYih2YXIoLS12b3QtaGVscGVyLXRoZW1lKSk7dHJhbnNpdGlvbjpvcGFjaXR5IC4yc30udm90LW91dGxpbmVkLWJ1dHRvbjphZnRlcntiYWNrZ3JvdW5kOnJhZGlhbC1ncmFkaWVudChjaXJjbGUsY3VycmVudENvbG9yIDElLCMwMDAwIDElKSA1MCUvMTAwMDAlIDEwMDAwJSBuby1yZXBlYXQ7dHJhbnNpdGlvbjpvcGFjaXR5IDFzLGJhY2tncm91bmQtc2l6ZSAuNXN9LnZvdC1vdXRsaW5lZC1idXR0b246aG92ZXI6YmVmb3Jle29wYWNpdHk6LjA0fS52b3Qtb3V0bGluZWQtYnV0dG9uOmFjdGl2ZTphZnRlcntvcGFjaXR5Oi4xNjtiYWNrZ3JvdW5kLXNpemU6MTAwJSAxMDAlO3RyYW5zaXRpb246YmFja2dyb3VuZC1zaXplfS52b3Qtb3V0bGluZWQtYnV0dG9uW2Rpc2FibGVkPXRydWVde2NvbG9yOnJnYmEodmFyKC0tdm90LW9uc3VyZmFjZS1yZ2IsMCwwLDApLC4zOCk7Y3Vyc29yOmluaXRpYWw7YmFja2dyb3VuZC1jb2xvcjojMDAwMH0udm90LW91dGxpbmVkLWJ1dHRvbltkaXNhYmxlZD10cnVlXTpiZWZvcmUsLnZvdC1vdXRsaW5lZC1idXR0b25bZGlzYWJsZWQ9dHJ1ZV06YWZ0ZXJ7b3BhY2l0eTowfS52b3QtdGV4dC1idXR0b257LS12b3QtaGVscGVyLXRoZW1lOnZhcigtLXZvdC10aGVtZS1yZ2IsdmFyKC0tdm90LXByaW1hcnktcmdiLDMzLDE1MCwyNDMpKTtib3gtc2l6aW5nOmJvcmRlci1ib3g7dmVydGljYWwtYWxpZ246bWlkZGxlO3RleHQtYWxpZ246Y2VudGVyO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7bWluLXdpZHRoOjY0cHg7aGVpZ2h0OjM2cHg7Y29sb3I6cmdiKHZhcigtLXZvdC1oZWxwZXItdGhlbWUpKTtmb250LWZhbWlseTp2YXIoLS12b3QtZm9udC1mYW1pbHksXCJSb2JvdG9cIixcIlNlZ29lIFVJXCIsc3lzdGVtLXVpLHNhbnMtc2VyaWYpO2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQtY29sb3I6IzAwMDA7b3V0bGluZTpub25lO2ZvbnQtc2l6ZToxNHB4O2ZvbnQtd2VpZ2h0OjUwMDtsaW5lLWhlaWdodDozNnB4O2Rpc3BsYXk6aW5saW5lLWJsb2NrO3Bvc2l0aW9uOnJlbGF0aXZlO2JvcmRlcjpub25lIWltcG9ydGFudDtib3JkZXItcmFkaXVzOjRweCFpbXBvcnRhbnQ7bWFyZ2luOjAhaW1wb3J0YW50O3BhZGRpbmc6MCA4cHghaW1wb3J0YW50fS52b3QtdGV4dC1idXR0b25baGlkZGVuXXtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fS52b3QtdGV4dC1idXR0b246Oi1tb3otZm9jdXMtaW5uZXJ7Ym9yZGVyOm5vbmUhaW1wb3J0YW50fS52b3QtdGV4dC1idXR0b246YmVmb3JlLC52b3QtdGV4dC1idXR0b246YWZ0ZXJ7Y29udGVudDpcIlwiO29wYWNpdHk6MDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDtsZWZ0OjA7cmlnaHQ6MDtib3JkZXItcmFkaXVzOmluaGVyaXQhaW1wb3J0YW50fS52b3QtdGV4dC1idXR0b246YmVmb3Jle2JhY2tncm91bmQtY29sb3I6cmdiKHZhcigtLXZvdC1oZWxwZXItdGhlbWUpKTt0cmFuc2l0aW9uOm9wYWNpdHkgLjJzfS52b3QtdGV4dC1idXR0b246YWZ0ZXJ7YmFja2dyb3VuZDpyYWRpYWwtZ3JhZGllbnQoY2lyY2xlLGN1cnJlbnRDb2xvciAxJSwjMDAwMCAxJSkgNTAlLzEwMDAwJSAxMDAwMCUgbm8tcmVwZWF0O3RyYW5zaXRpb246b3BhY2l0eSAxcyxiYWNrZ3JvdW5kLXNpemUgLjVzfS52b3QtdGV4dC1idXR0b246aG92ZXI6YmVmb3Jle29wYWNpdHk6LjA0fS52b3QtdGV4dC1idXR0b246YWN0aXZlOmFmdGVye29wYWNpdHk6LjE2O2JhY2tncm91bmQtc2l6ZToxMDAlIDEwMCU7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLXNpemV9LnZvdC10ZXh0LWJ1dHRvbltkaXNhYmxlZD10cnVlXXtjb2xvcjpyZ2JhKHZhcigtLXZvdC1vbnN1cmZhY2UtcmdiLDAsMCwwKSwuMzgpO2N1cnNvcjppbml0aWFsO2JhY2tncm91bmQtY29sb3I6IzAwMDB9LnZvdC10ZXh0LWJ1dHRvbltkaXNhYmxlZD10cnVlXTpiZWZvcmUsLnZvdC10ZXh0LWJ1dHRvbltkaXNhYmxlZD10cnVlXTphZnRlcntvcGFjaXR5OjB9LnZvdC1pY29uLWJ1dHRvbnstLXZvdC1oZWxwZXItb25zdXJmYWNlOnJnYmEodmFyKC0tdm90LW9uc3VyZmFjZS1yZ2IsMCwwLDApLC44Nyk7Ym94LXNpemluZzpib3JkZXItYm94O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTt0ZXh0LWFsaWduOmNlbnRlcjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO3dpZHRoOjM2cHg7aGVpZ2h0OjM2cHg7ZmlsbDp2YXIoLS12b3QtaGVscGVyLW9uc3VyZmFjZSk7Y29sb3I6dmFyKC0tdm90LWhlbHBlci1vbnN1cmZhY2UpO2ZvbnQtZmFtaWx5OnZhcigtLXZvdC1mb250LWZhbWlseSxcIlJvYm90b1wiLFwiU2Vnb2UgVUlcIixzeXN0ZW0tdWksc2Fucy1zZXJpZik7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZC1jb2xvcjojMDAwMDtvdXRsaW5lOm5vbmU7Zm9udC1zaXplOjE0cHg7Zm9udC13ZWlnaHQ6NTAwO2xpbmUtaGVpZ2h0OjM2cHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7cG9zaXRpb246cmVsYXRpdmU7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6NTAlIWltcG9ydGFudDttYXJnaW46MCFpbXBvcnRhbnQ7cGFkZGluZzowIWltcG9ydGFudH0udm90LWljb24tYnV0dG9uW2hpZGRlbl17ZGlzcGxheTpub25lIWltcG9ydGFudH0udm90LWljb24tYnV0dG9uOjotbW96LWZvY3VzLWlubmVye2JvcmRlcjpub25lIWltcG9ydGFudH0udm90LWljb24tYnV0dG9uOmJlZm9yZSwudm90LWljb24tYnV0dG9uOmFmdGVye2NvbnRlbnQ6XCJcIjtvcGFjaXR5OjA7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7Ym90dG9tOjA7bGVmdDowO3JpZ2h0OjA7Ym9yZGVyLXJhZGl1czppbmhlcml0IWltcG9ydGFudH0udm90LWljb24tYnV0dG9uOmJlZm9yZXtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLXZvdC1oZWxwZXItb25zdXJmYWNlKTt0cmFuc2l0aW9uOm9wYWNpdHkgLjJzfS52b3QtaWNvbi1idXR0b246YWZ0ZXJ7YmFja2dyb3VuZDpyYWRpYWwtZ3JhZGllbnQoY2lyY2xlLGN1cnJlbnRDb2xvciAxJSwjMDAwMCAxJSkgNTAlLzEwMDAwJSAxMDAwMCUgbm8tcmVwZWF0O3RyYW5zaXRpb246b3BhY2l0eSAuM3MsYmFja2dyb3VuZC1zaXplIC40c30udm90LWljb24tYnV0dG9uOmhvdmVyOmJlZm9yZXtvcGFjaXR5Oi4wNH0udm90LWljb24tYnV0dG9uOmFjdGl2ZTphZnRlcntvcGFjaXR5Oi4zMjtiYWNrZ3JvdW5kLXNpemU6MTAwJSAxMDAlO3RyYW5zaXRpb246YmFja2dyb3VuZC1zaXplLG9wYWNpdHl9LnZvdC1pY29uLWJ1dHRvbltkaXNhYmxlZD10cnVlXXtjb2xvcjpyZ2JhKHZhcigtLXZvdC1vbnN1cmZhY2UtcmdiLDAsMCwwKSwuMzgpO2ZpbGw6cmdiYSh2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiwwLDAsMCksLjM4KTtjdXJzb3I6aW5pdGlhbDtiYWNrZ3JvdW5kLWNvbG9yOiMwMDAwfS52b3QtaWNvbi1idXR0b25bZGlzYWJsZWQ9dHJ1ZV06YmVmb3JlLC52b3QtaWNvbi1idXR0b25bZGlzYWJsZWQ9dHJ1ZV06YWZ0ZXJ7b3BhY2l0eTowfS52b3QtaWNvbi1idXR0b24gc3Zne2ZpbGw6aW5oZXJpdDtzdHJva2U6aW5oZXJpdDt3aWR0aDoyNHB4O2hlaWdodDozNnB4fS52b3QtaG90a2V5e2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOnN0YXJ0O2Rpc3BsYXk6ZmxleH0udm90LWhvdGtleS1sYWJlbHt3b3JkLWJyZWFrOmJyZWFrLXdvcmQ7bWF4LXdpZHRoOjgwJX0udm90LWhvdGtleS1idXR0b257LS12b3QtaGVscGVyLXN1cmZhY2U6cmdiYSh2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiksLjIpOy0tdm90LWhlbHBlci10aGVtZTp2YXIoLS12b3QtdGhlbWUtcmdiLHZhcigtLXZvdC1wcmltYXJ5LXJnYiwzMywxNTAsMjQzKSk7Ym94LXNpemluZzpib3JkZXItYm94O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTt0ZXh0LWFsaWduOmNlbnRlcjt3aWR0aDpmaXQtY29udGVudDttaW4td2lkdGg6MzJweDtoZWlnaHQ6Zml0LWNvbnRlbnQ7Zm9udC1mYW1pbHk6dmFyKC0tdm90LWZvbnQtZmFtaWx5LFwiUm9ib3RvXCIsXCJTZWdvZSBVSVwiLHN5c3RlbS11aSxzYW5zLXNlcmlmKTtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiMwMDAwO291dGxpbmU6bm9uZTtmb250LXNpemU6MTVweDtsaW5lLWhlaWdodDoxLjU7ZGlzcGxheTppbmxpbmUtYmxvY2s7cG9zaXRpb246cmVsYXRpdmU7Ym9yZGVyOnNvbGlkIDFweCByZ2JhKHZhcigtLXZvdC1vbnN1cmZhY2UtcmdiLDAsMCwwKSwuMjQpIWltcG9ydGFudDtib3JkZXItcmFkaXVzOjRweCFpbXBvcnRhbnQ7bWFyZ2luOjAhaW1wb3J0YW50O3BhZGRpbmc6MCA4cHghaW1wb3J0YW50fS52b3QtaG90a2V5LWJ1dHRvbltoaWRkZW5de2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LnZvdC1ob3RrZXktYnV0dG9uOjotbW96LWZvY3VzLWlubmVye2JvcmRlcjpub25lIWltcG9ydGFudH0udm90LWhvdGtleS1idXR0b246YmVmb3JlLC52b3QtaG90a2V5LWJ1dHRvbjphZnRlcntjb250ZW50OlwiXCI7b3BhY2l0eTowO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2JvdHRvbTowO2xlZnQ6MDtyaWdodDowO2JvcmRlci1yYWRpdXM6M3B4IWltcG9ydGFudH0udm90LWhvdGtleS1idXR0b246YmVmb3Jle2JhY2tncm91bmQtY29sb3I6cmdiKHZhcigtLXZvdC1oZWxwZXItdGhlbWUpKTt0cmFuc2l0aW9uOm9wYWNpdHkgLjJzfS52b3QtaG90a2V5LWJ1dHRvbjphZnRlcntiYWNrZ3JvdW5kOnJhZGlhbC1ncmFkaWVudChjaXJjbGUsY3VycmVudENvbG9yIDElLCMwMDAwIDElKSA1MCUvMTAwMDAlIDEwMDAwJSBuby1yZXBlYXQ7dHJhbnNpdGlvbjpvcGFjaXR5IDFzLGJhY2tncm91bmQtc2l6ZSAuNXN9LnZvdC1ob3RrZXktYnV0dG9uOmhvdmVyOmJlZm9yZXtvcGFjaXR5Oi4wNH0udm90LWhvdGtleS1idXR0b246YWN0aXZlOmFmdGVye29wYWNpdHk6LjE2O2JhY2tncm91bmQtc2l6ZToxMDAlIDEwMCU7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLXNpemV9LnZvdC1ob3RrZXktYnV0dG9uW2RhdGEtc3RhdHVzPWFjdGl2ZV17Y29sb3I6cmdiKHZhcigtLXZvdC1oZWxwZXItdGhlbWUpKX0udm90LWhvdGtleS1idXR0b25bZGF0YS1zdGF0dXM9YWN0aXZlXTpiZWZvcmV7b3BhY2l0eTouMDR9LnZvdC1ob3RrZXktYnV0dG9uW2Rpc2FibGVkPXRydWVde2NvbG9yOnJnYmEodmFyKC0tdm90LW9uc3VyZmFjZS1yZ2IsMCwwLDApLC4zOCk7Y3Vyc29yOmluaXRpYWw7YmFja2dyb3VuZC1jb2xvcjojMDAwMH0udm90LWhvdGtleS1idXR0b25bZGlzYWJsZWQ9dHJ1ZV06YmVmb3JlLC52b3QtaG90a2V5LWJ1dHRvbltkaXNhYmxlZD10cnVlXTphZnRlcntvcGFjaXR5OjB9LnZvdC10ZXh0ZmllbGR7ZGlzcGxheTppbmxpbmUtYmxvY2s7LS12b3QtaGVscGVyLXRoZW1lOnJnYih2YXIoLS12b3QtdGhlbWUtcmdiLHZhcigtLXZvdC1wcmltYXJ5LXJnYiwzMywxNTAsMjQzKSkpIWltcG9ydGFudDstLXZvdC1oZWxwZXItc2FmYXJpMTpyZ2JhKHZhcigtLXZvdC1vbnN1cmZhY2UtcmdiLDAsMCwwKSwuMzgpIWltcG9ydGFudDstLXZvdC1oZWxwZXItc2FmYXJpMjpyZ2JhKHZhcigtLXZvdC1vbnN1cmZhY2UtcmdiLDAsMCwwKSwuNikhaW1wb3J0YW50Oy0tdm90LWhlbHBlci1zYWZhcmkzOnJnYmEodmFyKC0tdm90LW9uc3VyZmFjZS1yZ2IsMCwwLDApLC44NykhaW1wb3J0YW50O2ZvbnQtZmFtaWx5OnZhcigtLXZvdC1mb250LWZhbWlseSxcIlJvYm90b1wiLFwiU2Vnb2UgVUlcIixzeXN0ZW0tdWksc2Fucy1zZXJpZikhaW1wb3J0YW50O3RleHQtYWxpZ246c3RhcnQhaW1wb3J0YW50O3BhZGRpbmctdG9wOjZweCFpbXBvcnRhbnQ7Zm9udC1zaXplOjE2cHghaW1wb3J0YW50O2xpbmUtaGVpZ2h0OjEuNSFpbXBvcnRhbnQ7cG9zaXRpb246cmVsYXRpdmUhaW1wb3J0YW50fS52b3QtdGV4dGZpZWxkW2hpZGRlbl17ZGlzcGxheTpub25lIWltcG9ydGFudH0udm90LXRleHRmaWVsZD5pbnB1dCwudm90LXRleHRmaWVsZD50ZXh0YXJlYXtib3gtc2l6aW5nOmJvcmRlci1ib3ghaW1wb3J0YW50O2JvcmRlci1zdHlsZTpzb2xpZCFpbXBvcnRhbnQ7Ym9yZGVyLXdpZHRoOjFweCFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOnRyYW5zcGFyZW50IHZhcigtLXZvdC1oZWxwZXItc2FmYXJpMil2YXIoLS12b3QtaGVscGVyLXNhZmFyaTIpIWltcG9ydGFudDt3aWR0aDoxMDAlIWltcG9ydGFudDtoZWlnaHQ6aW5oZXJpdCFpbXBvcnRhbnQ7Y29sb3I6cmdiYSh2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiwwLDAsMCksLjg3KSFpbXBvcnRhbnQ7LXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6Y3VycmVudENvbG9yIWltcG9ydGFudDtmb250LWZhbWlseTppbmhlcml0IWltcG9ydGFudDtmb250LXNpemU6aW5oZXJpdCFpbXBvcnRhbnQ7bGluZS1oZWlnaHQ6aW5oZXJpdCFpbXBvcnRhbnQ7Y2FyZXQtY29sb3I6dmFyKC0tdm90LWhlbHBlci10aGVtZSkhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6IzAwMDAhaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6NHB4IWltcG9ydGFudDttYXJnaW46MCFpbXBvcnRhbnQ7cGFkZGluZzoxNXB4IDEzcHghaW1wb3J0YW50O3RyYW5zaXRpb246Ym9yZGVyIC4ycyxib3gtc2hhZG93IC4ycyFpbXBvcnRhbnQ7Ym94LXNoYWRvdzppbnNldCAxcHggMCAjMDAwMCxpbnNldCAtMXB4IDAgIzAwMDAsaW5zZXQgMCAtMXB4ICMwMDAwIWltcG9ydGFudH0udm90LXRleHRmaWVsZD5pbnB1dDpub3QoOmZvY3VzKTpub3QoLnZvdC1zaG93LXBsYWNlaG9sZXIpOjotbW96LXBsYWNlaG9sZGVye2NvbG9yOiMwMDAwIWltcG9ydGFudH0udm90LXRleHRmaWVsZD50ZXh0YXJlYTpub3QoOmZvY3VzKTpub3QoLnZvdC1zaG93LXBsYWNlaG9sZXIpOjotbW96LXBsYWNlaG9sZGVye2NvbG9yOiMwMDAwIWltcG9ydGFudH0udm90LXRleHRmaWVsZD5pbnB1dDpub3QoOmZvY3VzKTpub3QoLnZvdC1zaG93LXBsYWNlaG9sZXIpOjotbW96LXBsYWNlaG9sZGVye2NvbG9yOiMwMDAwIWltcG9ydGFudH0udm90LXRleHRmaWVsZD50ZXh0YXJlYTpub3QoOmZvY3VzKTpub3QoLnZvdC1zaG93LXBsYWNlaG9sZXIpOjotbW96LXBsYWNlaG9sZGVye2NvbG9yOiMwMDAwIWltcG9ydGFudH0udm90LXRleHRmaWVsZD5pbnB1dDpub3QoOmZvY3VzKTpub3QoLnZvdC1zaG93LXBsYWNlaG9sZXIpOjotd2Via2l0LWlucHV0LXBsYWNlaG9sZGVye2NvbG9yOiMwMDAwIWltcG9ydGFudH0udm90LXRleHRmaWVsZD50ZXh0YXJlYTpub3QoOmZvY3VzKTpub3QoLnZvdC1zaG93LXBsYWNlaG9sZXIpOjotd2Via2l0LWlucHV0LXBsYWNlaG9sZGVye2NvbG9yOiMwMDAwIWltcG9ydGFudH0udm90LXRleHRmaWVsZD5pbnB1dDpub3QoOmZvY3VzKTpwbGFjZWhvbGRlci1zaG93biwudm90LXRleHRmaWVsZD50ZXh0YXJlYTpub3QoOmZvY3VzKTpwbGFjZWhvbGRlci1zaG93bntib3JkZXItdG9wLWNvbG9yOnZhcigtLXZvdC1oZWxwZXItc2FmYXJpMikhaW1wb3J0YW50fS52b3QtdGV4dGZpZWxkPmlucHV0K3NwYW4sLnZvdC10ZXh0ZmllbGQ+dGV4dGFyZWErc3Bhbntmb250LWZhbWlseTppbmhlcml0O3dpZHRoOjEwMCUhaW1wb3J0YW50O21heC1oZWlnaHQ6MTAwJSFpbXBvcnRhbnQ7Y29sb3I6cmdiYSh2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiwwLDAsMCksLjYpIWltcG9ydGFudDtjdXJzb3I6dGV4dCFpbXBvcnRhbnQ7cG9pbnRlci1ldmVudHM6bm9uZSFpbXBvcnRhbnQ7Zm9udC1zaXplOjc1JSFpbXBvcnRhbnQ7bGluZS1oZWlnaHQ6MTVweCFpbXBvcnRhbnQ7dHJhbnNpdGlvbjpjb2xvciAuMnMsZm9udC1zaXplIC4ycyxsaW5lLWhlaWdodCAuMnMhaW1wb3J0YW50O2Rpc3BsYXk6ZmxleCFpbXBvcnRhbnQ7cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50O3RvcDowIWltcG9ydGFudDtsZWZ0OjAhaW1wb3J0YW50fS52b3QtdGV4dGZpZWxkPmlucHV0Om5vdCg6Zm9jdXMpOnBsYWNlaG9sZGVyLXNob3duK3NwYW4sLnZvdC10ZXh0ZmllbGQ+dGV4dGFyZWE6bm90KDpmb2N1cyk6cGxhY2Vob2xkZXItc2hvd24rc3Bhbntmb250LXNpemU6aW5oZXJpdCFpbXBvcnRhbnQ7bGluZS1oZWlnaHQ6NjhweCFpbXBvcnRhbnR9LnZvdC10ZXh0ZmllbGQ+aW5wdXQrc3BhbjpiZWZvcmUsLnZvdC10ZXh0ZmllbGQ+aW5wdXQrc3BhbjphZnRlciwudm90LXRleHRmaWVsZD50ZXh0YXJlYStzcGFuOmJlZm9yZSwudm90LXRleHRmaWVsZD50ZXh0YXJlYStzcGFuOmFmdGVye2NvbnRlbnQ6XCJcIiFpbXBvcnRhbnQ7Ym94LXNpemluZzpib3JkZXItYm94IWltcG9ydGFudDtib3JkZXItdG9wOnNvbGlkIDFweCB2YXIoLS12b3QtaGVscGVyLXNhZmFyaTIpIWltcG9ydGFudDtwb2ludGVyLWV2ZW50czpub25lIWltcG9ydGFudDttaW4td2lkdGg6MTBweCFpbXBvcnRhbnQ7aGVpZ2h0OjhweCFpbXBvcnRhbnQ7bWFyZ2luLXRvcDo2cHghaW1wb3J0YW50O3RyYW5zaXRpb246Ym9yZGVyIC4ycyxib3gtc2hhZG93IC4ycyFpbXBvcnRhbnQ7ZGlzcGxheTpibG9jayFpbXBvcnRhbnQ7Ym94LXNoYWRvdzppbnNldCAwIDFweCAjMDAwMCFpbXBvcnRhbnR9LnZvdC10ZXh0ZmllbGQ+aW5wdXQrc3BhbjpiZWZvcmUsLnZvdC10ZXh0ZmllbGQ+dGV4dGFyZWErc3BhbjpiZWZvcmV7Ym9yZGVyLWxlZnQ6MXB4IHNvbGlkICMwMDAwIWltcG9ydGFudDtib3JkZXItcmFkaXVzOjRweCAwIWltcG9ydGFudDttYXJnaW4tcmlnaHQ6NHB4IWltcG9ydGFudH0udm90LXRleHRmaWVsZD5pbnB1dCtzcGFuOmFmdGVyLC52b3QtdGV4dGZpZWxkPnRleHRhcmVhK3NwYW46YWZ0ZXJ7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjMDAwMCFpbXBvcnRhbnQ7Ym9yZGVyLXJhZGl1czowIDRweCFpbXBvcnRhbnQ7ZmxleC1ncm93OjEhaW1wb3J0YW50O21hcmdpbi1sZWZ0OjRweCFpbXBvcnRhbnR9LnZvdC10ZXh0ZmllbGQ+aW5wdXQudm90LXNob3ctcGxhY2Vob2xlcitzcGFuOmJlZm9yZSwudm90LXRleHRmaWVsZD50ZXh0YXJlYS52b3Qtc2hvdy1wbGFjZWhvbGVyK3NwYW46YmVmb3Jle21hcmdpbi1yaWdodDowIWltcG9ydGFudH0udm90LXRleHRmaWVsZD5pbnB1dC52b3Qtc2hvdy1wbGFjZWhvbGVyK3NwYW46YWZ0ZXIsLnZvdC10ZXh0ZmllbGQ+dGV4dGFyZWEudm90LXNob3ctcGxhY2Vob2xlcitzcGFuOmFmdGVye21hcmdpbi1sZWZ0OjAhaW1wb3J0YW50fS52b3QtdGV4dGZpZWxkPmlucHV0Om5vdCg6Zm9jdXMpOnBsYWNlaG9sZGVyLXNob3duK3NwYW46YmVmb3JlLC52b3QtdGV4dGZpZWxkPmlucHV0Om5vdCg6Zm9jdXMpOnBsYWNlaG9sZGVyLXNob3duK3NwYW46YWZ0ZXIsLnZvdC10ZXh0ZmllbGQ+dGV4dGFyZWE6bm90KDpmb2N1cyk6cGxhY2Vob2xkZXItc2hvd24rc3BhbjpiZWZvcmUsLnZvdC10ZXh0ZmllbGQ+dGV4dGFyZWE6bm90KDpmb2N1cyk6cGxhY2Vob2xkZXItc2hvd24rc3BhbjphZnRlcntib3JkZXItdG9wLWNvbG9yOiMwMDAwIWltcG9ydGFudH0udm90LXRleHRmaWVsZDpob3Zlcj5pbnB1dDpub3QoOmRpc2FibGVkKSwudm90LXRleHRmaWVsZDpob3Zlcj50ZXh0YXJlYTpub3QoOmRpc2FibGVkKXtib3JkZXItY29sb3I6dHJhbnNwYXJlbnQgdmFyKC0tdm90LWhlbHBlci1zYWZhcmkzKXZhcigtLXZvdC1oZWxwZXItc2FmYXJpMykhaW1wb3J0YW50fS52b3QtdGV4dGZpZWxkOmhvdmVyPmlucHV0Om5vdCg6ZGlzYWJsZWQpK3NwYW46YmVmb3JlLC52b3QtdGV4dGZpZWxkOmhvdmVyPmlucHV0Om5vdCg6ZGlzYWJsZWQpK3NwYW46YWZ0ZXIsLnZvdC10ZXh0ZmllbGQ6aG92ZXI+dGV4dGFyZWE6bm90KDpkaXNhYmxlZCkrc3BhbjpiZWZvcmUsLnZvdC10ZXh0ZmllbGQ6aG92ZXI+dGV4dGFyZWE6bm90KDpkaXNhYmxlZCkrc3BhbjphZnRlcntib3JkZXItdG9wLWNvbG9yOnZhcigtLXZvdC1oZWxwZXItc2FmYXJpMykhaW1wb3J0YW50fS52b3QtdGV4dGZpZWxkOmhvdmVyPmlucHV0Om5vdCg6ZGlzYWJsZWQpOm5vdCg6Zm9jdXMpOnBsYWNlaG9sZGVyLXNob3duLC52b3QtdGV4dGZpZWxkOmhvdmVyPnRleHRhcmVhOm5vdCg6ZGlzYWJsZWQpOm5vdCg6Zm9jdXMpOnBsYWNlaG9sZGVyLXNob3due2JvcmRlci1jb2xvcjp2YXIoLS12b3QtaGVscGVyLXNhZmFyaTMpIWltcG9ydGFudH0udm90LXRleHRmaWVsZD5pbnB1dDpmb2N1cywudm90LXRleHRmaWVsZD50ZXh0YXJlYTpmb2N1c3tib3JkZXItY29sb3I6dHJhbnNwYXJlbnQgdmFyKC0tdm90LWhlbHBlci10aGVtZSl2YXIoLS12b3QtaGVscGVyLXRoZW1lKSFpbXBvcnRhbnQ7Ym94LXNoYWRvdzppbnNldCAxcHggMCB2YXIoLS12b3QtaGVscGVyLXRoZW1lKSxpbnNldCAtMXB4IDAgdmFyKC0tdm90LWhlbHBlci10aGVtZSksaW5zZXQgMCAtMXB4IHZhcigtLXZvdC1oZWxwZXItdGhlbWUpIWltcG9ydGFudDtvdXRsaW5lOm5vbmUhaW1wb3J0YW50fS52b3QtdGV4dGZpZWxkPmlucHV0OmZvY3VzK3NwYW4sLnZvdC10ZXh0ZmllbGQ+dGV4dGFyZWE6Zm9jdXMrc3Bhbntjb2xvcjp2YXIoLS12b3QtaGVscGVyLXRoZW1lKSFpbXBvcnRhbnR9LnZvdC10ZXh0ZmllbGQ+aW5wdXQ6Zm9jdXMrc3BhbjpiZWZvcmUsLnZvdC10ZXh0ZmllbGQ+aW5wdXQ6Zm9jdXMrc3BhbjphZnRlciwudm90LXRleHRmaWVsZD50ZXh0YXJlYTpmb2N1cytzcGFuOmJlZm9yZSwudm90LXRleHRmaWVsZD50ZXh0YXJlYTpmb2N1cytzcGFuOmFmdGVye2JvcmRlci10b3AtY29sb3I6dmFyKC0tdm90LWhlbHBlci10aGVtZSkhaW1wb3J0YW50O2JveC1zaGFkb3c6aW5zZXQgMCAxcHggdmFyKC0tdm90LWhlbHBlci10aGVtZSkhaW1wb3J0YW50fS52b3QtdGV4dGZpZWxkPmlucHV0OmRpc2FibGVkLC52b3QtdGV4dGZpZWxkPmlucHV0OmRpc2FibGVkK3NwYW4sLnZvdC10ZXh0ZmllbGQ+dGV4dGFyZWE6ZGlzYWJsZWQsLnZvdC10ZXh0ZmllbGQ+dGV4dGFyZWE6ZGlzYWJsZWQrc3Bhbntib3JkZXItY29sb3I6dHJhbnNwYXJlbnQgdmFyKC0tdm90LWhlbHBlci1zYWZhcmkxKXZhcigtLXZvdC1oZWxwZXItc2FmYXJpMSkhaW1wb3J0YW50O2NvbG9yOnJnYmEodmFyKC0tdm90LW9uc3VyZmFjZS1yZ2IsMCwwLDApLC4zOCkhaW1wb3J0YW50O3BvaW50ZXItZXZlbnRzOm5vbmUhaW1wb3J0YW50fS52b3QtdGV4dGZpZWxkPmlucHV0OmRpc2FibGVkK3NwYW46YmVmb3JlLC52b3QtdGV4dGZpZWxkPmlucHV0OmRpc2FibGVkK3NwYW46YWZ0ZXIsLnZvdC10ZXh0ZmllbGQ+dGV4dGFyZWE6ZGlzYWJsZWQrc3BhbjpiZWZvcmUsLnZvdC10ZXh0ZmllbGQ+dGV4dGFyZWE6ZGlzYWJsZWQrc3BhbjphZnRlciwudm90LXRleHRmaWVsZD5pbnB1dDpkaXNhYmxlZDpwbGFjZWhvbGRlci1zaG93biwudm90LXRleHRmaWVsZD5pbnB1dDpkaXNhYmxlZDpwbGFjZWhvbGRlci1zaG93bitzcGFuLC52b3QtdGV4dGZpZWxkPnRleHRhcmVhOmRpc2FibGVkOnBsYWNlaG9sZGVyLXNob3duLC52b3QtdGV4dGZpZWxkPnRleHRhcmVhOmRpc2FibGVkOnBsYWNlaG9sZGVyLXNob3duK3NwYW57Ym9yZGVyLXRvcC1jb2xvcjp2YXIoLS12b3QtaGVscGVyLXNhZmFyaTEpIWltcG9ydGFudH0udm90LXRleHRmaWVsZD5pbnB1dDpkaXNhYmxlZDpwbGFjZWhvbGRlci1zaG93bitzcGFuOmJlZm9yZSwudm90LXRleHRmaWVsZD5pbnB1dDpkaXNhYmxlZDpwbGFjZWhvbGRlci1zaG93bitzcGFuOmFmdGVyLC52b3QtdGV4dGZpZWxkPnRleHRhcmVhOmRpc2FibGVkOnBsYWNlaG9sZGVyLXNob3duK3NwYW46YmVmb3JlLC52b3QtdGV4dGZpZWxkPnRleHRhcmVhOmRpc2FibGVkOnBsYWNlaG9sZGVyLXNob3duK3NwYW46YWZ0ZXJ7Ym9yZGVyLXRvcC1jb2xvcjojMDAwMCFpbXBvcnRhbnR9QG1lZGlhIG5vdCBhbGwgYW5kICgtd2Via2l0LW1pbi1kZXZpY2UtcGl4ZWwtcmF0aW86LjAwMDAyNjQ1ODMpLG5vdCBhbGwgYW5kIChtaW4tcmVzb2x1dGlvbjouMDAxZHBjbSl7QHN1cHBvcnRzICgoLXdlYmtpdC1hcHBlYXJhbmNlOm5vbmUpKXsudm90LXRleHRmaWVsZD5pbnB1dCwudm90LXRleHRmaWVsZD5pbnB1dCtzcGFuLC52b3QtdGV4dGZpZWxkPnRleHRhcmVhLC52b3QtdGV4dGZpZWxkPnRleHRhcmVhK3NwYW4sLnZvdC10ZXh0ZmllbGQ+aW5wdXQrc3BhbjpiZWZvcmUsLnZvdC10ZXh0ZmllbGQ+aW5wdXQrc3BhbjphZnRlciwudm90LXRleHRmaWVsZD50ZXh0YXJlYStzcGFuOmJlZm9yZSwudm90LXRleHRmaWVsZD50ZXh0YXJlYStzcGFuOmFmdGVye3RyYW5zaXRpb24tZHVyYXRpb246LjFzIWltcG9ydGFudH19fS52b3QtY2hlY2tib3h7LS12b3QtaGVscGVyLXRoZW1lOnZhcigtLXZvdC10aGVtZS1yZ2IsdmFyKC0tdm90LXByaW1hcnktcmdiLDMzLDE1MCwyNDMpKTstLXZvdC1oZWxwZXItb250aGVtZTp2YXIoLS12b3Qtb250aGVtZS1yZ2IsdmFyKC0tdm90LW9ucHJpbWFyeS1yZ2IsMjU1LDI1NSwyNTUpKTt6LWluZGV4OjA7Y29sb3I6cmdiYSh2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiwwLDAsMCksLjg3KTtmb250LWZhbWlseTp2YXIoLS12b3QtZm9udC1mYW1pbHksXCJSb2JvdG9cIixcIlNlZ29lIFVJXCIsc3lzdGVtLXVpLHNhbnMtc2VyaWYpO3RleHQtYWxpZ246c3RhcnQ7Zm9udC1zaXplOjE2cHg7bGluZS1oZWlnaHQ6MS41O2Rpc3BsYXk6aW5saW5lLWJsb2NrO3Bvc2l0aW9uOnJlbGF0aXZlfS52b3QtY2hlY2tib3gtc3Vie3BhZGRpbmctbGVmdDoyOHB4IWltcG9ydGFudH0udm90LWNoZWNrYm94W2hpZGRlbl17ZGlzcGxheTpub25lIWltcG9ydGFudH0udm90LWNoZWNrYm94PmlucHV0ey13ZWJraXQtYXBwZWFyYW5jZTpub25lO2FwcGVhcmFuY2U6bm9uZTt6LWluZGV4OjEwMDAwO2JveC1zaXppbmc6Ym9yZGVyLWJveDtvcGFjaXR5OjE7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZDowIDA7b3V0bGluZTpub25lO3dpZHRoOjE4cHg7aGVpZ2h0OjE4cHg7dHJhbnNpdGlvbjpib3JkZXItY29sb3IgLjJzLGJhY2tncm91bmQtY29sb3IgLjJzO2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjJweCBzb2xpZCFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOnJnYmEodmFyKC0tdm90LW9uc3VyZmFjZS1yZ2IsMCwwLDApLC42KSFpbXBvcnRhbnQ7Ym9yZGVyLXJhZGl1czoycHghaW1wb3J0YW50O21hcmdpbjozcHggMXB4IWltcG9ydGFudDtwYWRkaW5nOjAhaW1wb3J0YW50fS52b3QtY2hlY2tib3g+aW5wdXQrc3Bhbntib3gtc2l6aW5nOmJvcmRlci1ib3g7d2lkdGg6aW5oZXJpdDtjdXJzb3I6cG9pbnRlcjtmb250LWZhbWlseTppbmhlcml0O2ZvbnQtd2VpZ2h0OjQwMDtkaXNwbGF5OmlubGluZS1ibG9jaztwb3NpdGlvbjpyZWxhdGl2ZTtwYWRkaW5nLWxlZnQ6MzBweCFpbXBvcnRhbnR9LnZvdC1jaGVja2JveD5pbnB1dCtzcGFuOmJlZm9yZXtjb250ZW50OlwiXCI7YmFja2dyb3VuZC1jb2xvcjpyZ2IodmFyKC0tdm90LW9uc3VyZmFjZS1yZ2IsMCwwLDApKTtvcGFjaXR5OjA7cG9pbnRlci1ldmVudHM6bm9uZTt3aWR0aDo0MHB4O2hlaWdodDo0MHB4O3RyYW5zaXRpb246b3BhY2l0eSAuM3MsdHJhbnNmb3JtIC4ycztkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO3RvcDotOHB4O2xlZnQ6LTEwcHg7dHJhbnNmb3JtOnNjYWxlKDEpO2JvcmRlci1yYWRpdXM6NTAlIWltcG9ydGFudH0udm90LWNoZWNrYm94PmlucHV0K3NwYW46YWZ0ZXJ7Y29udGVudDpcIlwiO3otaW5kZXg6MTAwMDA7cG9pbnRlci1ldmVudHM6bm9uZTt3aWR0aDoxMHB4O2hlaWdodDo1cHg7dHJhbnNpdGlvbjpib3JkZXItY29sb3IgLjJzO2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7dG9wOjNweDtsZWZ0OjFweDt0cmFuc2Zvcm06dHJhbnNsYXRlKDNweCw0cHgpcm90YXRlKC00NWRlZyk7Ym94LXNpemluZzpjb250ZW50LWJveCFpbXBvcnRhbnQ7Ym9yZGVyOjAgc29saWQgIzAwMDAhaW1wb3J0YW50O2JvcmRlci13aWR0aDowIDAgMnB4IDJweCFpbXBvcnRhbnR9LnZvdC1jaGVja2JveD5pbnB1dDpjaGVja2VkLC52b3QtY2hlY2tib3g+aW5wdXQ6aW5kZXRlcm1pbmF0ZXtiYWNrZ3JvdW5kLWNvbG9yOnJnYih2YXIoLS12b3QtaGVscGVyLXRoZW1lKSk7Ym9yZGVyLWNvbG9yOnJnYih2YXIoLS12b3QtaGVscGVyLXRoZW1lKSkhaW1wb3J0YW50fS52b3QtY2hlY2tib3g+aW5wdXQ6Y2hlY2tlZCtzcGFuOmJlZm9yZSwudm90LWNoZWNrYm94PmlucHV0OmluZGV0ZXJtaW5hdGUrc3BhbjpiZWZvcmV7YmFja2dyb3VuZC1jb2xvcjpyZ2IodmFyKC0tdm90LWhlbHBlci10aGVtZSkpfS52b3QtY2hlY2tib3g+aW5wdXQ6Y2hlY2tlZCtzcGFuOmFmdGVyLC52b3QtY2hlY2tib3g+aW5wdXQ6aW5kZXRlcm1pbmF0ZStzcGFuOmFmdGVye2JvcmRlci1jb2xvcjpyZ2IodmFyKC0tdm90LWhlbHBlci1vbnRoZW1lLDI1NSwyNTUsMjU1KSkhaW1wb3J0YW50fS52b3QtY2hlY2tib3g+aW5wdXQ6aG92ZXJ7Ym94LXNoYWRvdzpub25lIWltcG9ydGFudH0udm90LWNoZWNrYm94PmlucHV0OmluZGV0ZXJtaW5hdGUrc3BhbjphZnRlcnt0cmFuc2Zvcm06dHJhbnNsYXRlKDRweCwzcHgpO2JvcmRlci1sZWZ0LXdpZHRoOjAhaW1wb3J0YW50fS52b3QtY2hlY2tib3g6aG92ZXI+aW5wdXQrc3BhbjpiZWZvcmV7b3BhY2l0eTouMDR9LnZvdC1jaGVja2JveDphY3RpdmU+aW5wdXQsLnZvdC1jaGVja2JveDphY3RpdmU6aG92ZXI+aW5wdXQ6bm90KDpkaXNhYmxlZCl7Ym9yZGVyLWNvbG9yOnJnYih2YXIoLS12b3QtaGVscGVyLXRoZW1lKSkhaW1wb3J0YW50fS52b3QtY2hlY2tib3g6YWN0aXZlPmlucHV0OmNoZWNrZWR7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKHZhcigtLXZvdC1vbnN1cmZhY2UtcmdiLDAsMCwwKSwuNik7Ym9yZGVyLWNvbG9yOiMwMDAwIWltcG9ydGFudH0udm90LWNoZWNrYm94OmFjdGl2ZT5pbnB1dCtzcGFuOmJlZm9yZXtvcGFjaXR5OjE7dHJhbnNpdGlvbjp0cmFuc2Zvcm0sb3BhY2l0eTt0cmFuc2Zvcm06c2NhbGUoMCl9LnZvdC1jaGVja2JveD5pbnB1dDpkaXNhYmxlZHtjdXJzb3I6aW5pdGlhbDtib3JkZXItY29sb3I6cmdiYSh2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiwwLDAsMCksLjM4KSFpbXBvcnRhbnR9LnZvdC1jaGVja2JveD5pbnB1dDpkaXNhYmxlZDpjaGVja2VkLC52b3QtY2hlY2tib3g+aW5wdXQ6ZGlzYWJsZWQ6aW5kZXRlcm1pbmF0ZXtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEodmFyKC0tdm90LW9uc3VyZmFjZS1yZ2IsMCwwLDApLC4zOCk7Ym9yZGVyLWNvbG9yOiMwMDAwIWltcG9ydGFudH0udm90LWNoZWNrYm94PmlucHV0OmRpc2FibGVkK3NwYW57Y29sb3I6cmdiYSh2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiwwLDAsMCksLjM4KTtjdXJzb3I6aW5pdGlhbH0udm90LWNoZWNrYm94PmlucHV0OmRpc2FibGVkK3NwYW46YmVmb3Jle29wYWNpdHk6MDt0cmFuc2Zvcm06c2NhbGUoMCl9LnZvdC1zbGlkZXJ7ZGlzcGxheTppbmxpbmUtYmxvY2s7LS12b3Qtc2FmYXJpLWhlbHBlcjE6cmdiYSh2YXIoLS12b3QtcHJpbWFyeS1yZ2IsMzMsMTUwLDI0MyksLjA0KSFpbXBvcnRhbnQ7LS12b3Qtc2FmYXJpLWhlbHBlcjI6cmdiYSh2YXIoLS12b3QtcHJpbWFyeS1yZ2IsMzMsMTUwLDI0MyksLjEyKSFpbXBvcnRhbnQ7LS12b3Qtc2FmYXJpLWhlbHBlcjM6cmdiYSh2YXIoLS12b3QtcHJpbWFyeS1yZ2IsMzMsMTUwLDI0MyksLjE2KSFpbXBvcnRhbnQ7LS12b3Qtc2FmYXJpLWhlbHBlcjQ6cmdiYSh2YXIoLS12b3QtcHJpbWFyeS1yZ2IsMzMsMTUwLDI0MyksLjI0KSFpbXBvcnRhbnQ7d2lkdGg6MTAwJSFpbXBvcnRhbnQ7Y29sb3I6cmdiYSh2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiwwLDAsMCksLjg3KSFpbXBvcnRhbnQ7Zm9udC1mYW1pbHk6dmFyKC0tdm90LWZvbnQsXCJSb2JvdG9cIixcIlNlZ29lIFVJXCIsQmxpbmtNYWNTeXN0ZW1Gb250LHN5c3RlbS11aSwtYXBwbGUtc3lzdGVtKSFpbXBvcnRhbnQ7dGV4dC1hbGlnbjpzdGFydCFpbXBvcnRhbnQ7Zm9udC1zaXplOjE2cHghaW1wb3J0YW50O2xpbmUtaGVpZ2h0OjEuNSFpbXBvcnRhbnR9LnZvdC1zbGlkZXJbaGlkZGVuXXtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fS52b3Qtc2xpZGVyPmlucHV0ey13ZWJraXQtYXBwZWFyYW5jZTpub25lIWltcG9ydGFudDthcHBlYXJhbmNlOm5vbmUhaW1wb3J0YW50O2N1cnNvcjpwb2ludGVyIWltcG9ydGFudDtiYWNrZ3JvdW5kLWNvbG9yOiMwMDAwIWltcG9ydGFudDtib3JkZXI6bm9uZSFpbXBvcnRhbnQ7d2lkdGg6MTAwJSFpbXBvcnRhbnQ7aGVpZ2h0OjM2cHghaW1wb3J0YW50O21hcmdpbjowIDAgLTM2cHghaW1wb3J0YW50O3BhZGRpbmc6MCFpbXBvcnRhbnQ7ZGlzcGxheTpibG9jayFpbXBvcnRhbnQ7cG9zaXRpb246cmVsYXRpdmUhaW1wb3J0YW50O3RvcDoyNHB4IWltcG9ydGFudH0udm90LXNsaWRlcj5pbnB1dDpob3Zlcntib3gtc2hhZG93Om5vbmUhaW1wb3J0YW50fS52b3Qtc2xpZGVyPmlucHV0Omxhc3QtY2hpbGR7bWFyZ2luOjAhaW1wb3J0YW50O3Bvc2l0aW9uOnN0YXRpYyFpbXBvcnRhbnR9LnZvdC1zbGlkZXI+aW5wdXQ6YmVmb3Jle2NvbnRlbnQ6XCJcIiFpbXBvcnRhbnQ7d2lkdGg6Y2FsYygxMDAlKnZhcigtLXZvdC1wcm9ncmVzcywwKSkhaW1wb3J0YW50O2JhY2tncm91bmQ6cmdiKHZhcigtLXZvdC1wcmltYXJ5LXJnYiwzMywxNTAsMjQzKSkhaW1wb3J0YW50O2hlaWdodDoycHghaW1wb3J0YW50O2Rpc3BsYXk6YmxvY2shaW1wb3J0YW50O3Bvc2l0aW9uOmFic29sdXRlIWltcG9ydGFudDt0b3A6Y2FsYyg1MCUgLSAxcHgpIWltcG9ydGFudH0udm90LXNsaWRlcj5pbnB1dDpkaXNhYmxlZHtjdXJzb3I6ZGVmYXVsdCFpbXBvcnRhbnQ7b3BhY2l0eTouMzghaW1wb3J0YW50fS52b3Qtc2xpZGVyPmlucHV0OmRpc2FibGVkK3NwYW57Y29sb3I6cmdiYSh2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiwwLDAsMCksLjM4KSFpbXBvcnRhbnR9LnZvdC1zbGlkZXI+aW5wdXQ6ZGlzYWJsZWQ6Oi13ZWJraXQtc2xpZGVyLXJ1bm5hYmxlLXRyYWNre2JhY2tncm91bmQtY29sb3I6cmdiYSh2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiwwLDAsMCksLjM4KSFpbXBvcnRhbnR9LnZvdC1zbGlkZXI+aW5wdXQ6ZGlzYWJsZWQ6Oi1tb3otcmFuZ2UtdHJhY2t7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKHZhcigtLXZvdC1vbnN1cmZhY2UtcmdiLDAsMCwwKSwuMzgpIWltcG9ydGFudH0udm90LXNsaWRlcj5pbnB1dDpkaXNhYmxlZDo6LW1zLWZpbGwtbG93ZXJ7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKHZhcigtLXZvdC1vbnN1cmZhY2UtcmdiLDAsMCwwKSwuMzgpIWltcG9ydGFudH0udm90LXNsaWRlcj5pbnB1dDpkaXNhYmxlZDo6LW1zLWZpbGwtdXBwZXJ7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKHZhcigtLXZvdC1vbnN1cmZhY2UtcmdiLDAsMCwwKSwuMzgpIWltcG9ydGFudH0udm90LXNsaWRlcj5pbnB1dDpkaXNhYmxlZDo6LW1vei1yYW5nZS10aHVtYntiYWNrZ3JvdW5kLWNvbG9yOnJnYih2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiwwLDAsMCkpIWltcG9ydGFudDtib3gtc2hhZG93OjAgMCAwIDFweCByZ2IodmFyKC0tdm90LXN1cmZhY2UtcmdiLDI1NSwyNTUsMjU1KSkhaW1wb3J0YW50O3RyYW5zZm9ybTpzY2FsZSg0KSFpbXBvcnRhbnR9LnZvdC1zbGlkZXI+aW5wdXQ6ZGlzYWJsZWQ6Oi1tcy10aHVtYntiYWNrZ3JvdW5kLWNvbG9yOnJnYih2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiwwLDAsMCkpIWltcG9ydGFudDtib3gtc2hhZG93OjAgMCAwIDFweCByZ2IodmFyKC0tdm90LXN1cmZhY2UtcmdiLDI1NSwyNTUsMjU1KSkhaW1wb3J0YW50O3RyYW5zZm9ybTpzY2FsZSg0KSFpbXBvcnRhbnR9LnZvdC1zbGlkZXI+aW5wdXQ6ZGlzYWJsZWQ6Oi13ZWJraXQtc2xpZGVyLXRodW1ie2JhY2tncm91bmQtY29sb3I6cmdiKHZhcigtLXZvdC1vbnN1cmZhY2UtcmdiLDAsMCwwKSkhaW1wb3J0YW50O2JveC1zaGFkb3c6MCAwIDAgMXB4IHJnYih2YXIoLS12b3Qtc3VyZmFjZS1yZ2IsMjU1LDI1NSwyNTUpKSFpbXBvcnRhbnQ7dHJhbnNmb3JtOnNjYWxlKDQpIWltcG9ydGFudH0udm90LXNsaWRlcj5pbnB1dDpkaXNhYmxlZDo6LW1zLWZpbGwtdXBwZXJ7b3BhY2l0eTouMzghaW1wb3J0YW50fS52b3Qtc2xpZGVyPmlucHV0OmRpc2FibGVkOjotbW96LXJhbmdlLXByb2dyZXNze2JhY2tncm91bmQtY29sb3I6cmdiYSh2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiwwLDAsMCksLjg3KSFpbXBvcnRhbnR9LnZvdC1zbGlkZXI+aW5wdXQ6ZGlzYWJsZWQ6LXdlYmtpdC1zbGlkZXItdGh1bWJ7Y29sb3I6cmdiKHZhcigtLXZvdC1zdXJmYWNlLXJnYiwyNTUsMjU1LDI1NSkpIWltcG9ydGFudH0udm90LXNsaWRlcj5pbnB1dDphY3RpdmU6Oi13ZWJraXQtc2xpZGVyLXRodW1ie2JveC1zaGFkb3c6MCAwIDAgMnB4IHZhcigtLXZvdC1zYWZhcmktaGVscGVyNCkhaW1wb3J0YW50fS52b3Qtc2xpZGVyPmlucHV0OmFjdGl2ZTo6LW1vei1yYW5nZS10aHVtYntib3gtc2hhZG93OjAgMCAwIDJweCByZ2JhKHZhcigtLXZvdC1wcmltYXJ5LXJnYiwzMywxNTAsMjQzKSwuMjQpIWltcG9ydGFudH0udm90LXNsaWRlcj5pbnB1dDphY3RpdmU6Oi1tcy10aHVtYntib3gtc2hhZG93OjAgMCAwIDJweCByZ2JhKHZhcigtLXZvdC1wcmltYXJ5LXJnYiwzMywxNTAsMjQzKSwuMjQpIWltcG9ydGFudH0udm90LXNsaWRlcj5pbnB1dDpmb2N1c3tvdXRsaW5lOm5vbmUhaW1wb3J0YW50fS52b3Qtc2xpZGVyPmlucHV0Ojotd2Via2l0LXNsaWRlci1ydW5uYWJsZS10cmFja3tiYWNrZ3JvdW5kLWNvbG9yOnJnYmEodmFyKC0tdm90LXByaW1hcnktcmdiLDMzLDE1MCwyNDMpLC4yNCkhaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6MXB4IWltcG9ydGFudDt3aWR0aDoxMDAlIWltcG9ydGFudDtoZWlnaHQ6MnB4IWltcG9ydGFudDttYXJnaW46MTdweCAwIWltcG9ydGFudH0udm90LXNsaWRlcj5pbnB1dDo6LW1vei1yYW5nZS10cmFja3tiYWNrZ3JvdW5kLWNvbG9yOnJnYmEodmFyKC0tdm90LXByaW1hcnktcmdiLDMzLDE1MCwyNDMpLC4yNCkhaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6MXB4IWltcG9ydGFudDt3aWR0aDoxMDAlIWltcG9ydGFudDtoZWlnaHQ6MnB4IWltcG9ydGFudDttYXJnaW46MTdweCAwIWltcG9ydGFudH0udm90LXNsaWRlcj5pbnB1dDo6LW1zLXRyYWNre2JveC1zaXppbmc6Ym9yZGVyLWJveCFpbXBvcnRhbnQ7YmFja2dyb3VuZC1jb2xvcjojMDAwMCFpbXBvcnRhbnQ7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6MXB4IWltcG9ydGFudDt3aWR0aDoxMDAlIWltcG9ydGFudDtoZWlnaHQ6MnB4IWltcG9ydGFudDttYXJnaW46MTdweCAwIWltcG9ydGFudDtwYWRkaW5nOjAgMTdweCFpbXBvcnRhbnR9LnZvdC1zbGlkZXI+aW5wdXQ6Oi13ZWJraXQtc2xpZGVyLXRodW1iey13ZWJraXQtYXBwZWFyYW5jZTpub25lIWltcG9ydGFudDthcHBlYXJhbmNlOm5vbmUhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6cmdiKHZhcigtLXZvdC1wcmltYXJ5LXJnYiwzMywxNTAsMjQzKSkhaW1wb3J0YW50O2JvcmRlcjpub25lIWltcG9ydGFudDtib3JkZXItcmFkaXVzOjUwJSFpbXBvcnRhbnQ7d2lkdGg6MnB4IWltcG9ydGFudDtoZWlnaHQ6MnB4IWltcG9ydGFudDt0cmFuc2l0aW9uOmJveC1zaGFkb3cgLjJzIWltcG9ydGFudDt0cmFuc2Zvcm06c2NhbGUoNikhaW1wb3J0YW50fS52b3Qtc2xpZGVyPmlucHV0OjotbW96LXJhbmdlLXRodW1iey13ZWJraXQtYXBwZWFyYW5jZTpub25lIWltcG9ydGFudDthcHBlYXJhbmNlOm5vbmUhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6cmdiKHZhcigtLXZvdC1wcmltYXJ5LXJnYiwzMywxNTAsMjQzKSkhaW1wb3J0YW50O2JvcmRlcjpub25lIWltcG9ydGFudDtib3JkZXItcmFkaXVzOjUwJSFpbXBvcnRhbnQ7d2lkdGg6MnB4IWltcG9ydGFudDtoZWlnaHQ6MnB4IWltcG9ydGFudDt0cmFuc2l0aW9uOmJveC1zaGFkb3cgLjJzIWltcG9ydGFudDt0cmFuc2Zvcm06c2NhbGUoNikhaW1wb3J0YW50fS52b3Qtc2xpZGVyPmlucHV0OjotbXMtdGh1bWJ7LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmUhaW1wb3J0YW50O2FwcGVhcmFuY2U6bm9uZSFpbXBvcnRhbnQ7YmFja2dyb3VuZC1jb2xvcjpyZ2IodmFyKC0tdm90LXByaW1hcnktcmdiLDMzLDE1MCwyNDMpKSFpbXBvcnRhbnQ7Ym9yZGVyOm5vbmUhaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6NTAlIWltcG9ydGFudDt3aWR0aDoycHghaW1wb3J0YW50O2hlaWdodDoycHghaW1wb3J0YW50O3RyYW5zaXRpb246Ym94LXNoYWRvdyAuMnMhaW1wb3J0YW50O3RyYW5zZm9ybTpzY2FsZSg2KSFpbXBvcnRhbnR9LnZvdC1zbGlkZXI+aW5wdXQ6Oi13ZWJraXQtc2xpZGVyLXRodW1iey13ZWJraXQtYXBwZWFyYW5jZTpub25lIWltcG9ydGFudDttYXJnaW46MCFpbXBvcnRhbnR9LnZvdC1zbGlkZXI+aW5wdXQ6Oi1tb3otcmFuZ2UtdGh1bWJ7LW1vei1hcHBlYXJhbmNlOm5vbmUhaW1wb3J0YW50fS52b3Qtc2xpZGVyPmlucHV0OjotbXMtdGh1bWJ7bWFyZ2luOjAgMTdweCFpbXBvcnRhbnR9LnZvdC1zbGlkZXI+aW5wdXQ6Oi1tb3otcmFuZ2UtcHJvZ3Jlc3N7YmFja2dyb3VuZC1jb2xvcjpyZ2IodmFyKC0tdm90LXByaW1hcnktcmdiLDMzLDE1MCwyNDMpKSFpbXBvcnRhbnQ7Ym9yZGVyLXJhZGl1czoxcHghaW1wb3J0YW50O2hlaWdodDoycHghaW1wb3J0YW50fS52b3Qtc2xpZGVyPmlucHV0OjotbXMtZmlsbC1sb3dlcntiYWNrZ3JvdW5kLWNvbG9yOnJnYih2YXIoLS12b3QtcHJpbWFyeS1yZ2IsMzMsMTUwLDI0MykpIWltcG9ydGFudDtib3JkZXItcmFkaXVzOjFweCFpbXBvcnRhbnQ7aGVpZ2h0OjJweCFpbXBvcnRhbnR9LnZvdC1zbGlkZXI+aW5wdXQ6Oi1tcy1maWxsLXVwcGVye2JhY2tncm91bmQtY29sb3I6cmdiKHZhcigtLXZvdC1wcmltYXJ5LXJnYiwzMywxNTAsMjQzKSkhaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6MXB4IWltcG9ydGFudDtoZWlnaHQ6MnB4IWltcG9ydGFudH0udm90LXNsaWRlcj5pbnB1dDo6LW1vei1mb2N1cy1vdXRlcntib3JkZXI6bm9uZSFpbXBvcnRhbnR9LnZvdC1zbGlkZXI+c3BhbnttYXJnaW4tYm90dG9tOjM2cHghaW1wb3J0YW50O2Rpc3BsYXk6aW5saW5lLWJsb2NrIWltcG9ydGFudH0udm90LXNsaWRlcjpob3Zlcj5pbnB1dDo6LXdlYmtpdC1zbGlkZXItdGh1bWJ7Ym94LXNoYWRvdzowIDAgMCAycHggdmFyKC0tdm90LXNhZmFyaS1oZWxwZXIxKSFpbXBvcnRhbnR9LnZvdC1zbGlkZXI6aG92ZXI+aW5wdXQ6Oi1tcy10aHVtYntib3gtc2hhZG93OjAgMCAwIDJweCByZ2JhKHZhcigtLXZvdC1wcmltYXJ5LXJnYiwzMywxNTAsMjQzKSwuMDQpIWltcG9ydGFudH0udm90LXNsaWRlcjpob3Zlcj5pbnB1dDpob3Zlcjo6LW1vei1yYW5nZS10aHVtYntib3gtc2hhZG93OjAgMCAwIDJweCByZ2JhKHZhcigtLXZvdC1wcmltYXJ5LXJnYiwzMywxNTAsMjQzKSwuMDQpIWltcG9ydGFudH0udm90LXNsaWRlci1sYWJlbC12YWx1ZXttYXJnaW4tbGVmdDo0cHghaW1wb3J0YW50fS52b3Qtc2VsZWN0e2ZvbnQtZmFtaWx5OnZhcigtLXZvdC1mb250LWZhbWlseSxcIlJvYm90b1wiLFwiU2Vnb2UgVUlcIixzeXN0ZW0tdWksc2Fucy1zZXJpZik7dGV4dC1hbGlnbjpzdGFydDtjb2xvcjp2YXIoLS12b3QtaGVscGVyLXRoZW1lKTtmaWxsOnZhcigtLXZvdC1oZWxwZXItdGhlbWUpO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcjtmb250LXNpemU6MTRweDtmb250LXdlaWdodDo0MDA7bGluZS1oZWlnaHQ6MS41O2Rpc3BsYXk6ZmxleDstLXZvdC1oZWxwZXItdGhlbWUtcmdiOnZhcigtLXZvdC1vbnN1cmZhY2UtcmdiLDAsMCwwKSFpbXBvcnRhbnQ7LS12b3QtaGVscGVyLXRoZW1lOnJnYmEodmFyKC0tdm90LWhlbHBlci10aGVtZS1yZ2IpLC44NykhaW1wb3J0YW50Oy0tdm90LWhlbHBlci1zYWZhcmkxOnJnYmEodmFyKC0tdm90LW9uc3VyZmFjZS1yZ2IsMCwwLDApLC42KSFpbXBvcnRhbnQ7LS12b3QtaGVscGVyLXNhZmFyaTI6cmdiYSh2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiwwLDAsMCksLjg3KSFpbXBvcnRhbnR9LnZvdC1zZWxlY3RbaGlkZGVuXXtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fS52b3Qtc2VsZWN0LW91dGVye2N1cnNvcjpwb2ludGVyO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcjt3aWR0aDoxMjBweDttYXgtd2lkdGg6MTIwcHg7ZGlzcGxheTpmbGV4O2JvcmRlcjoxcHggc29saWQgdmFyKC0tdm90LWhlbHBlci1zYWZhcmkxKSFpbXBvcnRhbnQ7Ym9yZGVyLXJhZGl1czo0cHghaW1wb3J0YW50O3BhZGRpbmc6MCA1cHghaW1wb3J0YW50O3RyYW5zaXRpb246Ym9yZGVyIC4ycyFpbXBvcnRhbnR9LnZvdC1zZWxlY3Qtb3V0ZXI6aG92ZXJ7Ym9yZGVyLWNvbG9yOnZhcigtLXZvdC1oZWxwZXItc2FmYXJpMikhaW1wb3J0YW50fS52b3Qtc2VsZWN0LXRpdGxle3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7d2hpdGUtc3BhY2U6bm93cmFwO2ZvbnQtZmFtaWx5OmluaGVyaXQ7b3ZlcmZsb3c6aGlkZGVufS52b3Qtc2VsZWN0LWFycm93LWljb257anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7d2lkdGg6MjBweDtoZWlnaHQ6MzJweDtkaXNwbGF5OmZsZXh9LnZvdC1zZWxlY3QtYXJyb3ctaWNvbiBzdmd7ZmlsbDppbmhlcml0O3N0cm9rZTppbmhlcml0fS52b3Qtc2VsZWN0LWNvbnRlbnQtbGlzdHtmbGV4LWRpcmVjdGlvbjpjb2x1bW47ZGlzcGxheTpmbGV4fS52b3Qtc2VsZWN0LWNvbnRlbnQtbGlzdCAudm90LXNlbGVjdC1jb250ZW50LWl0ZW17Y3Vyc29yOnBvaW50ZXI7Ym9yZGVyLXJhZGl1czo4cHghaW1wb3J0YW50O3BhZGRpbmc6NXB4IDEwcHghaW1wb3J0YW50fS52b3Qtc2VsZWN0LWNvbnRlbnQtbGlzdCAudm90LXNlbGVjdC1jb250ZW50LWl0ZW06bm90KFtpbmVydF0pOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzJhMmMzMX0udm90LXNlbGVjdC1jb250ZW50LWxpc3QgLnZvdC1zZWxlY3QtY29udGVudC1pdGVtW2RhdGEtdm90LXNlbGVjdGVkPXRydWVde2NvbG9yOnJnYih2YXIoLS12b3QtcHJpbWFyeS1yZ2IsMzMsMTUwLDI0MykpO2JhY2tncm91bmQtY29sb3I6cmdiYSh2YXIoLS12b3QtcHJpbWFyeS1yZ2IsMzMsMTUwLDI0MyksLjIpfS52b3Qtc2VsZWN0LWNvbnRlbnQtbGlzdCAudm90LXNlbGVjdC1jb250ZW50LWl0ZW1bZGF0YS12b3Qtc2VsZWN0ZWQ9dHJ1ZV06aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKHZhcigtLXZvdC1wcmltYXJ5LXJnYiwzMywxNTAsMjQzKSwuMSkhaW1wb3J0YW50fS52b3Qtc2VsZWN0LWNvbnRlbnQtbGlzdCAudm90LXNlbGVjdC1jb250ZW50LWl0ZW1baW5lcnRde2N1cnNvcjpkZWZhdWx0O2NvbG9yOnJnYmEodmFyKC0tdm90LW9uc3VyZmFjZS1yZ2IsMCwwLDApLC4zOCl9LnZvdC1zZWxlY3QtY29udGVudC1saXN0IC52b3Qtc2VsZWN0LWNvbnRlbnQtaXRlbVtoaWRkZW5de2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LnZvdC1oZWFkZXJ7Y29sb3I6cmdiYSh2YXIoLS12b3QtaGVscGVyLW9uc3VyZmFjZS1yZ2IpLC44Nyk7Zm9udC1mYW1pbHk6dmFyKC0tdm90LWZvbnQtZmFtaWx5LFwiUm9ib3RvXCIsXCJTZWdvZSBVSVwiLHN5c3RlbS11aSxzYW5zLXNlcmlmKTt0ZXh0LWFsaWduOnN0YXJ0O2ZvbnQtd2VpZ2h0OjcwMDtsaW5lLWhlaWdodDoxLjV9LnZvdC1oZWFkZXJbaGlkZGVuXXtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fS52b3QtaGVhZGVyOm5vdCg6Zmlyc3QtY2hpbGQpe3BhZGRpbmctdG9wOjhweH0udm90LWhlYWRlci1sZXZlbC0xe2ZvbnQtc2l6ZToyZW19LnZvdC1oZWFkZXItbGV2ZWwtMntmb250LXNpemU6MS41ZW19LnZvdC1oZWFkZXItbGV2ZWwtM3tmb250LXNpemU6MS4xN2VtfS52b3QtaGVhZGVyLWxldmVsLTR7Zm9udC1zaXplOjFlbX0udm90LWhlYWRlci1sZXZlbC01e2ZvbnQtc2l6ZTouODNlbX0udm90LWhlYWRlci1sZXZlbC02e2ZvbnQtc2l6ZTouNjdlbX0udm90LWluZm97Y29sb3I6cmdiYSh2YXIoLS12b3QtaGVscGVyLW9uc3VyZmFjZS1yZ2IpLC44Nyk7Zm9udC1mYW1pbHk6dmFyKC0tdm90LWZvbnQtZmFtaWx5LFwiUm9ib3RvXCIsXCJTZWdvZSBVSVwiLHN5c3RlbS11aSxzYW5zLXNlcmlmKTt0ZXh0LWFsaWduOnN0YXJ0Oy13ZWJraXQtdXNlci1zZWxlY3Q6dGV4dDt1c2VyLXNlbGVjdDp0ZXh0O2ZvbnQtc2l6ZToxNnB4O2xpbmUtaGVpZ2h0OjEuNTtkaXNwbGF5OmZsZXh9LnZvdC1pbmZvW2hpZGRlbl17ZGlzcGxheTpub25lIWltcG9ydGFudH0udm90LWluZm8+Om5vdCg6Zmlyc3QtY2hpbGQpe2NvbG9yOnJnYmEodmFyKC0tdm90LWhlbHBlci1vbnN1cmZhY2UtcmdiKSwuNSk7ZmxleDoxO21hcmdpbi1sZWZ0OjhweCFpbXBvcnRhbnR9LnZvdC1kZXRhaWxze2NvbG9yOnJnYmEodmFyKC0tdm90LWhlbHBlci1vbnN1cmZhY2UtcmdiKSwuODcpO2ZvbnQtZmFtaWx5OnZhcigtLXZvdC1mb250LWZhbWlseSxcIlJvYm90b1wiLFwiU2Vnb2UgVUlcIixzeXN0ZW0tdWksc2Fucy1zZXJpZik7dGV4dC1hbGlnbjpzdGFydDtjdXJzb3I6cG9pbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXI7Zm9udC1zaXplOjE2cHg7bGluZS1oZWlnaHQ6MS41O3RyYW5zaXRpb246YmFja2dyb3VuZCAuNXM7ZGlzcGxheTpmbGV4O2JvcmRlci1yYWRpdXM6LjVlbSFpbXBvcnRhbnQ7bWFyZ2luOi0uNWVtIWltcG9ydGFudDtwYWRkaW5nOi41ZW0haW1wb3J0YW50fS52b3QtZGV0YWlsc1toaWRkZW5de2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LnZvdC1kZXRhaWxzLWFycm93LWljb257d2lkdGg6MjBweDtoZWlnaHQ6MzJweDtmaWxsOnJnYmEodmFyKC0tdm90LWhlbHBlci1vbnN1cmZhY2UtcmdiKSwuODcpO2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2Rpc3BsYXk6ZmxleDt0cmFuc2Zvcm06c2NhbGUoMS4yNSlyb3RhdGUoLTkwZGVnKX0udm90LWRldGFpbHM6aG92ZXJ7YmFja2dyb3VuZDpyZ2JhKHZhcigtLXZvdC1vbnN1cmZhY2UtcmdiLDAsMCwwKSwuMDQpfS52b3QtbGFuZy1zZWxlY3R7LS12b3QtaGVscGVyLXRoZW1lLXJnYjp2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiwwLDAsMCk7LS12b3QtaGVscGVyLXRoZW1lOnJnYmEodmFyKC0tdm90LWhlbHBlci10aGVtZS1yZ2IpLC44Nyk7Y29sb3I6dmFyKC0tdm90LWhlbHBlci10aGVtZSk7ZmlsbDp2YXIoLS12b3QtaGVscGVyLXRoZW1lKTtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXI7ZGlzcGxheTpmbGV4fS52b3QtbGFuZy1zZWxlY3RbaGlkZGVuXXtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fS52b3QtbGFuZy1zZWxlY3QtaWNvbntqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjt3aWR0aDozMnB4O2hlaWdodDozMnB4O2Rpc3BsYXk6ZmxleH0udm90LWxhbmctc2VsZWN0LWljb24gc3Zne2ZpbGw6aW5oZXJpdDtzdHJva2U6aW5oZXJpdH0udm90LXNlZ21lbnRlZC1idXR0b257LS12b3QtaGVscGVyLXRoZW1lLXJnYjp2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiwwLDAsMCk7LS12b3QtaGVscGVyLXRoZW1lOnJnYmEodmFyKC0tdm90LWhlbHBlci10aGVtZS1yZ2IpLC44Nyk7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7YmFja2dyb3VuZDpyZ2IodmFyKC0tdm90LXN1cmZhY2UtcmdiLDI1NSwyNTUsMjU1KSk7bWF4LXdpZHRoOjEwMHZ3O2hlaWdodDozMnB4O2NvbG9yOnZhcigtLXZvdC1oZWxwZXItdGhlbWUpO2ZpbGw6dmFyKC0tdm90LWhlbHBlci10aGVtZSk7Zm9udC1mYW1pbHk6dmFyKC0tdm90LWZvbnQtZmFtaWx5LFwiUm9ib3RvXCIsXCJTZWdvZSBVSVwiLHN5c3RlbS11aSxzYW5zLXNlcmlmKTtjdXJzb3I6ZGVmYXVsdDt6LWluZGV4OjIxNDc0ODM2NDc7YWxpZ24taXRlbXM6Y2VudGVyO2ZvbnQtc2l6ZToxNnB4O2xpbmUtaGVpZ2h0OjEuNTt0cmFuc2l0aW9uOm9wYWNpdHkgLjVzO2Rpc3BsYXk6ZmxleDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6NXJlbTtsZWZ0OjUwJTtvdmVyZmxvdzpoaWRkZW47dHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlKTtib3JkZXItcmFkaXVzOjRweCFpbXBvcnRhbnR9LnZvdC1zZWdtZW50ZWQtYnV0dG9uW2hpZGRlbl17ZGlzcGxheTpub25lIWltcG9ydGFudH0udm90LXNlZ21lbnRlZC1idXR0b24gKntib3gtc2l6aW5nOmJvcmRlci1ib3ghaW1wb3J0YW50fS52b3Qtc2VnbWVudGVkLWJ1dHRvbiAudm90LXNlcGFyYXRvcntiYWNrZ3JvdW5kOnJnYmEodmFyKC0tdm90LWhlbHBlci10aGVtZS1yZ2IpLC4xKTt3aWR0aDoxcHg7aGVpZ2h0OjUwJX0udm90LXNlZ21lbnRlZC1idXR0b24gLnZvdC1zZXBhcmF0b3JbaGlkZGVuXXtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fS52b3Qtc2VnbWVudGVkLWJ1dHRvbiAudm90LXNlZ21lbnQsLnZvdC1zZWdtZW50ZWQtYnV0dG9uIC52b3Qtc2VnbWVudC1vbmx5LWljb257aGVpZ2h0OjEwMCU7Y29sb3I6aW5oZXJpdDtiYWNrZ3JvdW5kLWNvbG9yOiMwMDAwO2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO3RyYW5zaXRpb246YmFja2dyb3VuZC1jb2xvciAuMXMgZWFzZS1pbi1vdXQ7ZGlzcGxheTpmbGV4O3Bvc2l0aW9uOnJlbGF0aXZlO292ZXJmbG93OmhpZGRlbjtib3JkZXI6bm9uZSFpbXBvcnRhbnQ7cGFkZGluZzowIDhweCFpbXBvcnRhbnR9LnZvdC1zZWdtZW50ZWQtYnV0dG9uIC52b3Qtc2VnbWVudFtoaWRkZW5dLC52b3Qtc2VnbWVudGVkLWJ1dHRvbiBbaGlkZGVuXS52b3Qtc2VnbWVudC1vbmx5LWljb257ZGlzcGxheTpub25lIWltcG9ydGFudH0udm90LXNlZ21lbnRlZC1idXR0b24gLnZvdC1zZWdtZW50OmJlZm9yZSwudm90LXNlZ21lbnRlZC1idXR0b24gLnZvdC1zZWdtZW50LW9ubHktaWNvbjpiZWZvcmUsLnZvdC1zZWdtZW50ZWQtYnV0dG9uIC52b3Qtc2VnbWVudDphZnRlciwudm90LXNlZ21lbnRlZC1idXR0b24gLnZvdC1zZWdtZW50LW9ubHktaWNvbjphZnRlcntjb250ZW50OlwiXCI7b3BhY2l0eTowO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2JvdHRvbTowO2xlZnQ6MDtyaWdodDowO2JvcmRlci1yYWRpdXM6aW5oZXJpdCFpbXBvcnRhbnR9LnZvdC1zZWdtZW50ZWQtYnV0dG9uIC52b3Qtc2VnbWVudDpiZWZvcmUsLnZvdC1zZWdtZW50ZWQtYnV0dG9uIC52b3Qtc2VnbWVudC1vbmx5LWljb246YmVmb3Jle2JhY2tncm91bmQtY29sb3I6cmdiKHZhcigtLXZvdC1oZWxwZXItdGhlbWUtcmdiKSk7dHJhbnNpdGlvbjpvcGFjaXR5IC4yc30udm90LXNlZ21lbnRlZC1idXR0b24gLnZvdC1zZWdtZW50OmFmdGVyLC52b3Qtc2VnbWVudGVkLWJ1dHRvbiAudm90LXNlZ21lbnQtb25seS1pY29uOmFmdGVye2JhY2tncm91bmQ6cmFkaWFsLWdyYWRpZW50KGNpcmNsZSxjdXJyZW50Q29sb3IgMSUsIzAwMDAgMSUpIDUwJS8xMDAwMCUgMTAwMDAlIG5vLXJlcGVhdDt0cmFuc2l0aW9uOm9wYWNpdHkgMXMsYmFja2dyb3VuZC1zaXplIC41c30udm90LXNlZ21lbnRlZC1idXR0b24gLnZvdC1zZWdtZW50OmhvdmVyOmJlZm9yZSwudm90LXNlZ21lbnRlZC1idXR0b24gLnZvdC1zZWdtZW50LW9ubHktaWNvbjpob3ZlcjpiZWZvcmV7b3BhY2l0eTouMDR9LnZvdC1zZWdtZW50ZWQtYnV0dG9uIC52b3Qtc2VnbWVudDphY3RpdmU6YWZ0ZXIsLnZvdC1zZWdtZW50ZWQtYnV0dG9uIC52b3Qtc2VnbWVudC1vbmx5LWljb246YWN0aXZlOmFmdGVye29wYWNpdHk6LjE2O2JhY2tncm91bmQtc2l6ZToxMDAlIDEwMCU7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLXNpemV9LnZvdC1zZWdtZW50ZWQtYnV0dG9uIC52b3Qtc2VnbWVudC1vbmx5LWljb257bWluLXdpZHRoOjMycHg7cGFkZGluZzowIWltcG9ydGFudH0udm90LXNlZ21lbnRlZC1idXR0b24gLnZvdC1zZWdtZW50LWxhYmVse3doaXRlLXNwYWNlOm5vd3JhcDtjb2xvcjppbmhlcml0O2ZvbnQtd2VpZ2h0OjQwMDttYXJnaW4tbGVmdDo4cHghaW1wb3J0YW50fS52b3Qtc2VnbWVudGVkLWJ1dHRvbltkYXRhLXN0YXR1cz1zdWNjZXNzXSAudm90LXRyYW5zbGF0ZS1idXR0b257Y29sb3I6cmdiKHZhcigtLXZvdC1wcmltYXJ5LXJnYiwzMywxNTAsMjQzKSk7ZmlsbDpyZ2IodmFyKC0tdm90LXByaW1hcnktcmdiLDMzLDE1MCwyNDMpKX0udm90LXNlZ21lbnRlZC1idXR0b25bZGF0YS1zdGF0dXM9ZXJyb3JdIC52b3QtdHJhbnNsYXRlLWJ1dHRvbntjb2xvcjojZjI4YjgyO2ZpbGw6I2YyOGI4Mn0udm90LXNlZ21lbnRlZC1idXR0b25bZGF0YS1sb2FkaW5nPXRydWVdICN2b3QtbG9hZGluZy1pY29ue2Rpc3BsYXk6YmxvY2shaW1wb3J0YW50fS52b3Qtc2VnbWVudGVkLWJ1dHRvbltkYXRhLWxvYWRpbmc9dHJ1ZV0gI3ZvdC10cmFuc2xhdGUtaWNvbntkaXNwbGF5Om5vbmUhaW1wb3J0YW50fS52b3Qtc2VnbWVudGVkLWJ1dHRvbltkYXRhLWRpcmVjdGlvbj1jb2x1bW5de2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtoZWlnaHQ6Zml0LWNvbnRlbnR9LnZvdC1zZWdtZW50ZWQtYnV0dG9uW2RhdGEtZGlyZWN0aW9uPWNvbHVtbl0gLnZvdC1zZWdtZW50LWxhYmVse2Rpc3BsYXk6bm9uZX0udm90LXNlZ21lbnRlZC1idXR0b25bZGF0YS1kaXJlY3Rpb249Y29sdW1uXT4udm90LXNlZ21lbnQtb25seS1pY29uLC52b3Qtc2VnbWVudGVkLWJ1dHRvbltkYXRhLWRpcmVjdGlvbj1jb2x1bW5dPi52b3Qtc2VnbWVudHtwYWRkaW5nOjhweCFpbXBvcnRhbnR9LnZvdC1zZWdtZW50ZWQtYnV0dG9uW2RhdGEtZGlyZWN0aW9uPWNvbHVtbl0gLnZvdC1zZXBhcmF0b3J7d2lkdGg6NTAlO2hlaWdodDoxcHh9LnZvdC1zZWdtZW50ZWQtYnV0dG9uW2RhdGEtcG9zaXRpb249bGVmdF17dG9wOjEyLjV2aDtsZWZ0OjUwcHh9LnZvdC1zZWdtZW50ZWQtYnV0dG9uW2RhdGEtcG9zaXRpb249cmlnaHRde3RvcDoxMi41dmg7bGVmdDphdXRvO3JpZ2h0OjB9LnZvdC1zZWdtZW50ZWQtYnV0dG9uIHN2Z3t3aWR0aDoyNHB4O2ZpbGw6aW5oZXJpdDtzdHJva2U6aW5oZXJpdH0udm90LXRvb2x0aXB7LS12b3QtaGVscGVyLXRoZW1lLXJnYjp2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiwwLDAsMCk7LS12b3QtaGVscGVyLXRoZW1lOnJnYmEodmFyKC0tdm90LWhlbHBlci10aGVtZS1yZ2IpLC44Nyk7LS12b3QtaGVscGVyLW9uZGlhbG9nOnJnYih2YXIoLS12b3Qtb25kaWFsb2ctcmdiLDM3LDM4LDQwKSk7LS12b3QtaGVscGVyLWJvcmRlcjpyZ2IodmFyKC0tdm90LXRvb2x0aXAtYm9yZGVyLDY5LDY5LDY5KSk7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7YmFja2dyb3VuZDpyZ2IodmFyKC0tdm90LXN1cmZhY2UtcmdiLDI1NSwyNTUsMjU1KSk7Y29sb3I6dmFyKC0tdm90LWhlbHBlci10aGVtZSk7ZmlsbDp2YXIoLS12b3QtaGVscGVyLXRoZW1lKTtmb250LWZhbWlseTp2YXIoLS12b3QtZm9udC1mYW1pbHksXCJSb2JvdG9cIixcIlNlZ29lIFVJXCIsc3lzdGVtLXVpLHNhbnMtc2VyaWYpO2N1cnNvcjpkZWZhdWx0O3otaW5kZXg6MjE0NzQ4MzY0NztvcGFjaXR5OjA7YWxpZ24taXRlbXM6Y2VudGVyO3dpZHRoOm1heC1jb250ZW50O21heC13aWR0aDpjYWxjKDEwMHZ3IC0gMTBweCk7aGVpZ2h0Om1heC1jb250ZW50O2ZvbnQtc2l6ZToxNHB4O2xpbmUtaGVpZ2h0OjEuNTt0cmFuc2l0aW9uOm9wYWNpdHkgLjVzO2Rpc3BsYXk6ZmxleDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDtsZWZ0OjA7cmlnaHQ6MDtvdmVyZmxvdzpoaWRkZW47Ym94LXNoYWRvdzowIDFweCAzcHggIzAwMDAwMDFmO2JvcmRlci1yYWRpdXM6NHB4IWltcG9ydGFudDtwYWRkaW5nOjRweCA4cHghaW1wb3J0YW50fS52b3QtdG9vbHRpcFtoaWRkZW5de2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LnZvdC10b29sdGlwW2RhdGEtdHJpZ2dlcj1jbGlja117LXdlYmtpdC11c2VyLXNlbGVjdDp0ZXh0O3VzZXItc2VsZWN0OnRleHR9LnZvdC10b29sdGlwLnZvdC10b29sdGlwLWJvcmRlcmVke2JvcmRlcjoxcHggc29saWQgdmFyKC0tdm90LWhlbHBlci1ib3JkZXIpfS52b3QtdG9vbHRpcCAqe2JveC1zaXppbmc6Ym9yZGVyLWJveCFpbXBvcnRhbnR9LnZvdC1tZW51ey0tdm90LWhlbHBlci1zdXJmYWNlLXJnYjp2YXIoLS12b3Qtc3VyZmFjZS1yZ2IsMjU1LDI1NSwyNTUpOy0tdm90LWhlbHBlci1zdXJmYWNlOnJnYih2YXIoLS12b3QtaGVscGVyLXN1cmZhY2UtcmdiKSk7LS12b3QtaGVscGVyLW9uc3VyZmFjZS1yZ2I6dmFyKC0tdm90LW9uc3VyZmFjZS1yZ2IsMCwwLDApOy0tdm90LWhlbHBlci1vbnN1cmZhY2U6cmdiYSh2YXIoLS12b3QtaGVscGVyLW9uc3VyZmFjZS1yZ2IpLC44Nyk7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS12b3QtaGVscGVyLXN1cmZhY2UpO2NvbG9yOnZhcigtLXZvdC1oZWxwZXItb25zdXJmYWNlKTtmb250LWZhbWlseTp2YXIoLS12b3QtZm9udC1mYW1pbHksXCJSb2JvdG9cIixcIlNlZ29lIFVJXCIsc3lzdGVtLXVpLHNhbnMtc2VyaWYpO2N1cnNvcjpkZWZhdWx0O3otaW5kZXg6MjE0NzQ4MzY0Nzt2aXNpYmlsaXR5OnZpc2libGU7b3BhY2l0eToxO3RyYW5zZm9ybS1vcmlnaW46dG9wO21pbi13aWR0aDozMDBweDtmb250LXNpemU6MTZweDtsaW5lLWhlaWdodDoxLjU7dHJhbnNpdGlvbjpvcGFjaXR5IC4zcyx0cmFuc2Zvcm0gLjFzO3Bvc2l0aW9uOmFic29sdXRlO3RvcDpjYWxjKDVyZW0gKyA0OHB4KTtsZWZ0OjUwJTtvdmVyZmxvdzpoaWRkZW47dHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlKXNjYWxlKDEpO2JvcmRlci1yYWRpdXM6OHB4IWltcG9ydGFudH0udm90LW1lbnUgKntib3gtc2l6aW5nOmJvcmRlci1ib3ghaW1wb3J0YW50fS52b3QtbWVudVtoaWRkZW5de3BvaW50ZXItZXZlbnRzOm5vbmU7dmlzaWJpbGl0eTpoaWRkZW47b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSlzY2FsZSgwKTtkaXNwbGF5OmJsb2NrIWltcG9ydGFudH0udm90LW1lbnUtY29udGVudC13cmFwcGVye21pbi1oZWlnaHQ6MTAwcHg7bWF4LWhlaWdodDpjYWxjKHZhcigtLXZvdC1jb250YWluZXItaGVpZ2h0LDc1dmgpIC0gKDVyZW0gKyAzMnB4ICsgMTZweCkqMik7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2Rpc3BsYXk6ZmxleDtvdmVyZmxvdzphdXRvfS52b3QtbWVudS1oZWFkZXItY29udGFpbmVye2ZsZXgtc2hyaW5rOjA7YWxpZ24taXRlbXM6ZmxleC1zdGFydDttaW4taGVpZ2h0OjMxcHg7ZGlzcGxheTpmbGV4fS52b3QtbWVudS1oZWFkZXItY29udGFpbmVyOmVtcHR5e3BhZGRpbmc6MCAwIDE2cHghaW1wb3J0YW50fS52b3QtbWVudS1oZWFkZXItY29udGFpbmVyPi52b3QtaWNvbi1idXR0b257bWFyZ2luLWlubGluZS1lbmQ6NHB4IWltcG9ydGFudDttYXJnaW4tdG9wOjRweCFpbXBvcnRhbnR9LnZvdC1tZW51LXRpdGxlLWNvbnRhaW5lcntmb250LXNpemU6aW5oZXJpdDtmb250LXdlaWdodDppbmhlcml0O3RleHQtYWxpZ246c3RhcnQ7b3V0bGluZTowO2ZsZXg6MTtkaXNwbGF5OmZsZXg7bWFyZ2luOjAhaW1wb3J0YW50fS52b3QtbWVudS10aXRsZXtmbGV4OjE7Zm9udC1zaXplOjE2cHg7Zm9udC13ZWlnaHQ6NDAwO2xpbmUtaGVpZ2h0OjE7cGFkZGluZzoxNnB4IWltcG9ydGFudH0udm90LW1lbnUtYm9keS1jb250YWluZXJ7Ym94LXNpemluZzpib3JkZXItYm94O292ZXJzY3JvbGwtYmVoYXZpb3I6Y29udGFpbjtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjhweDttaW4taGVpZ2h0OjEuMzc1cmVtO2Rpc3BsYXk6ZmxleDtvdmVyZmxvdzphdXRvO3Njcm9sbGJhci1jb2xvcjpyZ2JhKHZhcigtLXZvdC1oZWxwZXItb25zdXJmYWNlLXJnYiksLjEpdmFyKC0tdm90LWhlbHBlci1zdXJmYWNlKSFpbXBvcnRhbnQ7cGFkZGluZzowIDE2cHghaW1wb3J0YW50fS52b3QtbWVudS1ib2R5LWNvbnRhaW5lcjo6LXdlYmtpdC1zY3JvbGxiYXJ7YmFja2dyb3VuZDp2YXIoLS12b3QtaGVscGVyLXN1cmZhY2UpIWltcG9ydGFudDt3aWR0aDoxMnB4IWltcG9ydGFudDtoZWlnaHQ6MTJweCFpbXBvcnRhbnR9LnZvdC1tZW51LWJvZHktY29udGFpbmVyOjotd2Via2l0LXNjcm9sbGJhci10cmFja3tiYWNrZ3JvdW5kOnZhcigtLXZvdC1oZWxwZXItc3VyZmFjZSkhaW1wb3J0YW50O3dpZHRoOjEycHghaW1wb3J0YW50O2hlaWdodDoxMnB4IWltcG9ydGFudH0udm90LW1lbnUtYm9keS1jb250YWluZXI6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1ie2JhY2tncm91bmQ6cmdiYSh2YXIoLS12b3QtaGVscGVyLW9uc3VyZmFjZS1yZ2IpLC4xKSFpbXBvcnRhbnQ7Ym9yZGVyOjVweCBzb2xpZCB2YXIoLS12b3QtaGVscGVyLXN1cmZhY2UpIWltcG9ydGFudDstd2Via2l0LWJvcmRlci1yYWRpdXM6MWV4IWltcG9ydGFudH0udm90LW1lbnUtYm9keS1jb250YWluZXI6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVye2JvcmRlcjozcHggc29saWQgdmFyKC0tdm90LWhlbHBlci1zdXJmYWNlKSFpbXBvcnRhbnR9LnZvdC1tZW51LWJvZHktY29udGFpbmVyOjotd2Via2l0LXNjcm9sbGJhci1jb3JuZXJ7YmFja2dyb3VuZDp2YXIoLS12b3QtaGVscGVyLXN1cmZhY2UpIWltcG9ydGFudH0udm90LW1lbnUtZm9vdGVyLWNvbnRhaW5lcntmbGV4LXNocmluazowO2p1c3RpZnktY29udGVudDpmbGV4LWVuZDtkaXNwbGF5OmZsZXg7cGFkZGluZzoxNnB4IWltcG9ydGFudH0udm90LW1lbnUtZm9vdGVyLWNvbnRhaW5lcjplbXB0eXtwYWRkaW5nOjE2cHggMCAwIWltcG9ydGFudH0udm90LW1lbnVbZGF0YS1wb3NpdGlvbj1sZWZ0XXt0cmFuc2Zvcm0tb3JpZ2luOjA7dG9wOjEyLjV2aDtsZWZ0OjI0MHB4fS52b3QtbWVudVtkYXRhLXBvc2l0aW9uPXJpZ2h0XXt0cmFuc2Zvcm0tb3JpZ2luOjEwMCU7dG9wOjEyLjV2aDtsZWZ0OmF1dG87cmlnaHQ6LTgwcHh9LnZvdC1kaWFsb2d7LS12b3QtaGVscGVyLXN1cmZhY2UtcmdiOnZhcigtLXZvdC1zdXJmYWNlLXJnYiwyNTUsMjU1LDI1NSk7LS12b3QtaGVscGVyLXN1cmZhY2U6cmdiKHZhcigtLXZvdC1oZWxwZXItc3VyZmFjZS1yZ2IpKTstLXZvdC1oZWxwZXItb25zdXJmYWNlLXJnYjp2YXIoLS12b3Qtb25zdXJmYWNlLXJnYiwwLDAsMCk7LS12b3QtaGVscGVyLW9uc3VyZmFjZTpyZ2JhKHZhcigtLXZvdC1oZWxwZXItb25zdXJmYWNlLXJnYiksLjg3KTttYXgtd2lkdGg6aW5pdGlhbDttYXgtaGVpZ2h0OmluaXRpYWw7d2lkdGg6bWluKHZhcigtLXZvdC1kaWFsb2ctd2lkdGgsNTEycHgpLDEwMCUpO3RvcDo1MCU7Ym90dG9tOjUwJTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLXZvdC1oZWxwZXItc3VyZmFjZSk7aGVpZ2h0OmZpdC1jb250ZW50O2NvbG9yOnZhcigtLXZvdC1oZWxwZXItb25zdXJmYWNlKTtmb250LWZhbWlseTp2YXIoLS12b3QtZm9udC1mYW1pbHksXCJSb2JvdG9cIixcIlNlZ29lIFVJXCIsc3lzdGVtLXVpLHNhbnMtc2VyaWYpOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtvcGFjaXR5OjE7dHJhbnNmb3JtLW9yaWdpbjo1MCU7Ym9yZGVyLXJhZGl1czo4cHg7Zm9udC1zaXplOjE2cHg7bGluZS1oZWlnaHQ6MS41O3RyYW5zaXRpb246b3BhY2l0eSAuM3MsdHJhbnNmb3JtIC4xcztkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmZpeGVkO3RvcDowO2JvdHRvbTowO2xlZnQ6MDtyaWdodDowO292ZXJmbG93LXg6YXV0bztvdmVyZmxvdy15OmhpZGRlbjt0cmFuc2Zvcm06c2NhbGUoMSk7Ym94LXNoYWRvdzowIDAgMTZweCAjMDAwMDAwMWYsMCAxNnB4IDE2cHggIzAwMDAwMDNkO21hcmdpbjphdXRvIWltcG9ydGFudDtwYWRkaW5nOjAhaW1wb3J0YW50fVtoaWRkZW5dPi52b3QtZGlhbG9ne3BvaW50ZXItZXZlbnRzOm5vbmU7b3BhY2l0eTowO3RyYW5zaXRpb246b3BhY2l0eSAuMXMsdHJhbnNmb3JtIC4yczt0cmFuc2Zvcm06c2NhbGUoLjUpfS52b3QtZGlhbG9nLWNvbnRhaW5lcnt2aXNpYmlsaXR5OnZpc2libGU7ei1pbmRleDoyMTQ3NDgzNjQ3O3Bvc2l0aW9uOmFic29sdXRlfS52b3QtZGlhbG9nLWNvbnRhaW5lcltoaWRkZW5de3BvaW50ZXItZXZlbnRzOm5vbmU7dmlzaWJpbGl0eTpoaWRkZW47ZGlzcGxheTpibG9jayFpbXBvcnRhbnR9LnZvdC1kaWFsb2ctY29udGFpbmVyICp7Ym94LXNpemluZzpib3JkZXItYm94IWltcG9ydGFudH0udm90LWRpYWxvZy1iYWNrZHJvcHtvcGFjaXR5OjE7YmFja2dyb3VuZC1jb2xvcjojMDAwOTt0cmFuc2l0aW9uOm9wYWNpdHkgLjNzO3Bvc2l0aW9uOmZpeGVkO3RvcDowO2JvdHRvbTowO2xlZnQ6MDtyaWdodDowfVtoaWRkZW5dPi52b3QtZGlhbG9nLWJhY2tkcm9we3BvaW50ZXItZXZlbnRzOm5vbmU7b3BhY2l0eTowfS52b3QtZGlhbG9nLWNvbnRlbnQtd3JhcHBlcntmbGV4LWRpcmVjdGlvbjpjb2x1bW47bWF4LWhlaWdodDo3NXZoO2Rpc3BsYXk6ZmxleDtvdmVyZmxvdzphdXRvfS52b3QtZGlhbG9nLWhlYWRlci1jb250YWluZXJ7ZmxleC1zaHJpbms6MDthbGlnbi1pdGVtczpmbGV4LXN0YXJ0O21pbi1oZWlnaHQ6MzFweDtkaXNwbGF5OmZsZXh9LnZvdC1kaWFsb2ctaGVhZGVyLWNvbnRhaW5lcjplbXB0eXtwYWRkaW5nOjAgMCAyMHB4fS52b3QtZGlhbG9nLWhlYWRlci1jb250YWluZXI+LnZvdC1pY29uLWJ1dHRvbnttYXJnaW4taW5saW5lLWVuZDo0cHghaW1wb3J0YW50O21hcmdpbi10b3A6NHB4IWltcG9ydGFudH0udm90LWRpYWxvZy10aXRsZS1jb250YWluZXJ7Zm9udC1zaXplOmluaGVyaXQ7Zm9udC13ZWlnaHQ6aW5oZXJpdDtvdXRsaW5lOjA7ZmxleDoxO2Rpc3BsYXk6ZmxleDttYXJnaW46MCFpbXBvcnRhbnR9LnZvdC1kaWFsb2ctdGl0bGV7ZmxleDoxO2ZvbnQtc2l6ZToxMTUuMzg1JTtmb250LXdlaWdodDo3MDA7bGluZS1oZWlnaHQ6MTtwYWRkaW5nOjIwcHggMjBweCAxNnB4IWltcG9ydGFudH0udm90LWRpYWxvZy1ib2R5LWNvbnRhaW5lcntib3gtc2l6aW5nOmJvcmRlci1ib3g7b3ZlcnNjcm9sbC1iZWhhdmlvcjpjb250YWluO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtnYXA6MTZweDttaW4taGVpZ2h0OjEuMzc1cmVtO2Rpc3BsYXk6ZmxleDtvdmVyZmxvdzphdXRvO3Njcm9sbGJhci1jb2xvcjpyZ2JhKHZhcigtLXZvdC1oZWxwZXItb25zdXJmYWNlLXJnYiksLjEpdmFyKC0tdm90LWhlbHBlci1zdXJmYWNlKSFpbXBvcnRhbnQ7cGFkZGluZzowIDIwcHghaW1wb3J0YW50fS52b3QtZGlhbG9nLWJvZHktY29udGFpbmVyOjotd2Via2l0LXNjcm9sbGJhcntiYWNrZ3JvdW5kOnZhcigtLXZvdC1oZWxwZXItc3VyZmFjZSkhaW1wb3J0YW50O3dpZHRoOjEycHghaW1wb3J0YW50O2hlaWdodDoxMnB4IWltcG9ydGFudH0udm90LWRpYWxvZy1ib2R5LWNvbnRhaW5lcjo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2t7YmFja2dyb3VuZDp2YXIoLS12b3QtaGVscGVyLXN1cmZhY2UpIWltcG9ydGFudDt3aWR0aDoxMnB4IWltcG9ydGFudDtoZWlnaHQ6MTJweCFpbXBvcnRhbnR9LnZvdC1kaWFsb2ctYm9keS1jb250YWluZXI6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1ie2JhY2tncm91bmQ6cmdiYSh2YXIoLS12b3QtaGVscGVyLW9uc3VyZmFjZS1yZ2IpLC4xKSFpbXBvcnRhbnQ7Ym9yZGVyOjVweCBzb2xpZCB2YXIoLS12b3QtaGVscGVyLXN1cmZhY2UpIWltcG9ydGFudDstd2Via2l0LWJvcmRlci1yYWRpdXM6MWV4IWltcG9ydGFudH0udm90LWRpYWxvZy1ib2R5LWNvbnRhaW5lcjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXJ7Ym9yZGVyOjNweCBzb2xpZCB2YXIoLS12b3QtaGVscGVyLXN1cmZhY2UpIWltcG9ydGFudH0udm90LWRpYWxvZy1ib2R5LWNvbnRhaW5lcjo6LXdlYmtpdC1zY3JvbGxiYXItY29ybmVye2JhY2tncm91bmQ6dmFyKC0tdm90LWhlbHBlci1zdXJmYWNlKSFpbXBvcnRhbnR9LnZvdC1kaWFsb2ctZm9vdGVyLWNvbnRhaW5lcntmbGV4LXNocmluazowO2p1c3RpZnktY29udGVudDpmbGV4LWVuZDtkaXNwbGF5OmZsZXg7cGFkZGluZzoxNnB4IWltcG9ydGFudH0udm90LWRpYWxvZy1mb290ZXItY29udGFpbmVyOmVtcHR5e3BhZGRpbmc6MjBweCAwIDAhaW1wb3J0YW50fS52b3QtaW5saW5lLWxvYWRlcnthc3BlY3QtcmF0aW86NTstLXZvdC1sb2FkZXItYmc6bm8tcmVwZWF0IHJhZGlhbC1ncmFkaWVudChmYXJ0aGVzdC1zaWRlLHJnYmEodmFyKC0tdm90LW9uc3VyZmFjZS1yZ2IsMCwwLDApLC4zOCk5NCUsdHJhbnNwYXJlbnQpO2JhY2tncm91bmQ6dmFyKC0tdm90LWxvYWRlci1iZyksdmFyKC0tdm90LWxvYWRlci1iZyksdmFyKC0tdm90LWxvYWRlci1iZyksdmFyKC0tdm90LWxvYWRlci1iZyk7YmFja2dyb3VuZC1zaXplOjIwJSAxMDAlO2hlaWdodDo4cHg7YW5pbWF0aW9uOi43NXMgaW5maW5pdGUgYWx0ZXJuYXRlIGRvdHNTbGlkZSwxLjVzIGluZmluaXRlIGFsdGVybmF0ZSBkb3RzRmxpcH0udm90LWxvYWRlci10ZXh0ey0tdm90LWhlbHBlci10aGVtZTp2YXIoLS12b3QtdGhlbWUtcmdiLHZhcigtLXZvdC1wcmltYXJ5LXJnYiwzMywxNTAsMjQzKSk7ZmlsbDpyZ2IodmFyKC0tdm90LWhlbHBlci10aGVtZSkpO2ZvbnQtZmFtaWx5OnZhcigtLXZvdC1mb250LWZhbWlseSxcIlJvYm90b1wiLFwiU2Vnb2UgVUlcIixzeXN0ZW0tdWksc2Fucy1zZXJpZik7Zm9udC1zaXplOjEycHg7Zm9udC13ZWlnaHQ6NTAwfUBrZXlmcmFtZXMgZG90c1NsaWRlezAlLDEwJXtiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgMCwwIDAsMCAwLDAgMH0zMyV7YmFja2dyb3VuZC1wb3NpdGlvbjowIDAsMzMuMzMzMyUgMCwzMy4zMzMzJSAwLDMzLjMzMzMlIDB9NjYle2JhY2tncm91bmQtcG9zaXRpb246MCAwLDMzLjMzMzMlIDAsNjYuNjY2NyUgMCw2Ni42NjY3JSAwfTkwJSx0b3tiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgMCwzMy4zMzMzJSAwLDY2LjY2NjclIDAsMTAwJSAwfX1Aa2V5ZnJhbWVzIGRvdHNGbGlwezAlLDQ5Ljk5JXt0cmFuc2Zvcm06c2NhbGUoMSl9NTAlLHRve3RyYW5zZm9ybTpzY2FsZSgtMSl9fS52b3QtbGFiZWx7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo0cHg7Zm9udC1mYW1pbHk6aW5oZXJpdDtmb250LXNpemU6MTZweDtkaXNwbGF5OmZsZXh9LnZvdC1sYWJlbC1pY29ue3dpZHRoOjIwcHg7aGVpZ2h0OjIwcHg7bWFyZ2luLXRvcDoycHh9LnZvdC1sYWJlbC1pY29uPnN2Z3t3aWR0aDoyMHB4O2hlaWdodDoyMHB4fS52b3QtYWNjb3VudHtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjFyZW07ZGlzcGxheTpmbGV4fS52b3QtYWNjb3VudC1jb250YWluZXIsLnZvdC1hY2NvdW50LXdyYXBwZXIsLnZvdC1hY2NvdW50LWJ1dHRvbnN7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxcmVtO2Rpc3BsYXk6ZmxleH0udm90LWFjY291bnQtYXZhdGFye21pbi13aWR0aDozNnB4O21heC13aWR0aDozNnB4O21pbi1oZWlnaHQ6MzZweDttYXgtaGVpZ2h0OjM2cHg7b3ZlcmZsb3c6aGlkZGVufS52b3QtYWNjb3VudC1hdmF0YXItaW1ne29iamVjdC1maXQ6Y292ZXI7Ym9yZGVyLXJhZGl1czo1MCU7d2lkdGg6MzZweDtoZWlnaHQ6MzZweH0udm90LWFjY291bnQgW2hpZGRlbl17ZGlzcGxheTpub25lIWltcG9ydGFudH0udm90LXN1YnRpdGxlc3stLXZvdC1zdWJ0aXRsZXMtYmFja2dyb3VuZDpyZ2JhKHZhcigtLXZvdC1zdXJmYWNlLXJnYiw0Niw0Nyw1MiksdmFyKC0tdm90LXN1YnRpdGxlcy1vcGFjaXR5LC44KSk7YmFja2dyb3VuZDp2YXIoLS12b3Qtc3VidGl0bGVzLWJhY2tncm91bmQsIzJlMmYzNGNjKTt3aWR0aDptYXgtY29udGVudDttYXgtd2lkdGg6MTAwJTttYXgtaGVpZ2h0OjEwMCU7Y29sb3I6dmFyKC0tdm90LXN1YnRpdGxlcy1jb2xvciwjZTNlM2UzKTtwb2ludGVyLWV2ZW50czphbGw7Zm9udC1zaXplOjIwcHg7Zm9udC1mYW1pbHk6dmFyKC0tdm90LWZvbnQtZmFtaWx5LFwiUm9ib3RvXCIsXCJTZWdvZSBVSVwiLHN5c3RlbS11aSxzYW5zLXNlcmlmKTtib3gtc2l6aW5nOmJvcmRlci1ib3g7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7ZmxleC13cmFwOndyYXA7Z2FwOjAgM3B4O2xpbmUtaGVpZ2h0Om5vcm1hbDtkaXNwbGF5OmZsZXg7cG9zaXRpb246cmVsYXRpdmU7Ym9yZGVyLXJhZGl1czouNWVtIWltcG9ydGFudDtwYWRkaW5nOi41ZW0haW1wb3J0YW50fS52b3Qtc3VidGl0bGVzLXdpZGdldHt6LWluZGV4OjIxNDc0ODM2NDc7cG9pbnRlci1ldmVudHM6bm9uZTtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjt3aWR0aDo1MCU7bWluLWhlaWdodDoyMCU7bWF4LWhlaWdodDoxMDAlO2Rpc3BsYXk6ZmxleDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6NzUlO2xlZnQ6MjUlfS52b3Qtc3VidGl0bGVzLWluZm97ZmxleC1kaXJlY3Rpb246Y29sdW1uO2dhcDoycHg7ZGlzcGxheTpmbGV4O3BhZGRpbmc6NnB4IWltcG9ydGFudH0udm90LXN1YnRpdGxlcy1pbmZvLXNlcnZpY2V7Y29sb3I6dmFyKC0tdm90LXN1YnRpdGxlcy1jb250ZXh0LWNvbG9yLCM4NjkxOWIpO21hcmdpbi1ib3R0b206OHB4IWltcG9ydGFudDtmb250LXNpemU6MTBweCFpbXBvcnRhbnQ7bGluZS1oZWlnaHQ6MSFpbXBvcnRhbnR9LnZvdC1zdWJ0aXRsZXMtaW5mby1oZWFkZXJ7Y29sb3I6dmFyKC0tdm90LXN1YnRpdGxlcy1oZWFkZXItY29sb3IsI2ZmZik7bWFyZ2luLWJvdHRvbTo2cHghaW1wb3J0YW50O2ZvbnQtc2l6ZToyMHB4IWltcG9ydGFudDtmb250LXdlaWdodDo1MDAhaW1wb3J0YW50O2xpbmUtaGVpZ2h0OjEhaW1wb3J0YW50fS52b3Qtc3VidGl0bGVzLWluZm8tY29udGV4dHtjb2xvcjp2YXIoLS12b3Qtc3VidGl0bGVzLWNvbnRleHQtY29sb3IsIzg2OTE5Yik7Zm9udC1zaXplOjEycHghaW1wb3J0YW50O2xpbmUtaGVpZ2h0OjEuMiFpbXBvcnRhbnR9LnZvdC1zdWJ0aXRsZXMgc3BhbntjdXJzb3I6cG9pbnRlcjtwb3NpdGlvbjpyZWxhdGl2ZTtmb250LXNpemU6aW5oZXJpdCFpbXBvcnRhbnQ7Zm9udC1mYW1pbHk6aW5oZXJpdCFpbXBvcnRhbnQ7bGluZS1oZWlnaHQ6bm9ybWFsIWltcG9ydGFudH0udm90LXN1YnRpdGxlcyBzcGFuLnBhc3NlZHtjb2xvcjp2YXIoLS12b3Qtc3VidGl0bGVzLXBhc3NlZC1jb2xvciwjMjE5NmYzKX0udm90LXN1YnRpdGxlcyBzcGFuOmJlZm9yZXtjb250ZW50OlwiXCI7ei1pbmRleDotMTt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO3Bvc2l0aW9uOmFic29sdXRlO3RvcDoycHg7Ym90dG9tOjJweDtsZWZ0Oi0ycHg7cmlnaHQ6LTJweDtib3JkZXItcmFkaXVzOjRweCFpbXBvcnRhbnQ7cGFkZGluZzowIDJweCFpbXBvcnRhbnR9LnZvdC1zdWJ0aXRsZXMgc3Bhbjpob3ZlcjpiZWZvcmV7YmFja2dyb3VuZDp2YXIoLS12b3Qtc3VidGl0bGVzLWhvdmVyLWNvbG9yLCNmZmZmZmY4Yyl9LnZvdC1zdWJ0aXRsZXMgc3Bhbi5zZWxlY3RlZDpiZWZvcmV7YmFja2dyb3VuZDp2YXIoLS12b3Qtc3VidGl0bGVzLXBhc3NlZC1jb2xvciwjMjE5NmYzKX0jdm90LXN1YnRpdGxlcy1pbmZvLnZvdC1zdWJ0aXRsZXMtaW5mbyAqey13ZWJraXQtdXNlci1zZWxlY3Q6dGV4dCFpbXBvcnRhbnQ7dXNlci1zZWxlY3Q6dGV4dCFpbXBvcnRhbnR9OnJvb3R7LS12b3QtZm9udC1mYW1pbHk6XCJSb2JvdG9cIixcIlNlZ29lIFVJXCIsc3lzdGVtLXVpLHNhbnMtc2VyaWY7LS12b3QtcHJpbWFyeS1yZ2I6MTM5LDE4MCwyNDU7LS12b3Qtb25wcmltYXJ5LXJnYjozMiwzMywzNjstLXZvdC1zdXJmYWNlLXJnYjozMiwzMywzNjstLXZvdC1vbnN1cmZhY2UtcmdiOjIyNywyMjcsMjI3Oy0tdm90LXN1YnRpdGxlcy1jb2xvcjpyZ2IodmFyKC0tdm90LW9uc3VyZmFjZS1yZ2IsMjI3LDIyNywyMjcpKTstLXZvdC1zdWJ0aXRsZXMtcGFzc2VkLWNvbG9yOnJnYih2YXIoLS12b3QtcHJpbWFyeS1yZ2IsMzMsMTUwLDI0MykpfXZvdC1ibG9ja3tmb250LWZhbWlseTppbmhlcml0O2Rpc3BsYXk6YmxvY2s7dmlzaWJpbGl0eTp2aXNpYmxlIWltcG9ydGFudH0udm90LXBvcnRhbHtkaXNwbGF5OmlubGluZX0udm90LXBvcnRhbC1sb2NhbHt6LWluZGV4OjIxNDc0ODM2NDc7cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowfSIpOwoJCX0sCgkJIi4vc3JjL3N1YnRpdGxlcy5qcyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5hKGQsIGFzeW5jIChkLCBtKSA9PiB7CgkJCQl0cnkgewoJCQkJCXAuZChmLCB7CgkJCQkJCUk6ICgpID0+IFN1YnRpdGxlc1Byb2Nlc3NvciwKCQkJCQkJbzogKCkgPT4gU3VidGl0bGVzV2lkZ2V0CgkJCQkJfSk7CgkJCQkJdmFyIGggPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2V4dC9kaXN0L2hlbHBlcnMveW91dHViZS5qcyIpLCBnID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9zaGFyZWQvZGlzdC91dGlscy9zdWJzLmpzIiksIF8gPSBwKCIuL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saXQtaHRtbC5qcyIpLCB2ID0gcCgiLi9zcmMvY29uZmlnL2NvbmZpZy5qcyIpLCBiID0gcCgiLi9zcmMvbG9jYWxpemF0aW9uL2xvY2FsaXphdGlvblByb3ZpZGVyLnRzIiksIHggPSBwKCIuL3NyYy91aS5qcyIpLCBDID0gcCgiLi9zcmMvdWkvY29tcG9uZW50cy90b29sdGlwLnRzIiksIHcgPSBwKCIuL3NyYy91dGlscy9nbS50cyIpLCBUID0gcCgiLi9zcmMvdXRpbHMvbG9jYWxpemF0aW9uLnRzIiksIEUgPSBwKCIuL3NyYy91dGlscy9zdG9yYWdlLnRzIiksIEQgPSBwKCIuL3NyYy91dGlscy90cmFuc2xhdGVBcGlzLnRzIiksIE8gPSBwKCIuL3NyYy91dGlscy91dGlscy50cyIpLCBBID0gZChbCgkJCQkJCWIsCgkJCQkJCXgsCgkJCQkJCUMsCgkJCQkJCXcsCgkJCQkJCVQsCgkJCQkJCUUsCgkJCQkJCUQsCgkJCQkJCU8KCQkJCQldKTsKCQkJCQlbYiwgeCwgQywgdywgVCwgRSwgRCwgT10gPSBBLnRoZW4gPyAoYXdhaXQgQSkoKSA6IEE7CgkJCQkJY2xhc3MgU3VidGl0bGVzUHJvY2Vzc29yIHsKCQkJCQkJc3RhdGljIGZvcm1hdFlhbmRleFRva2VucyhkKSB7CgkJCQkJCQlsZXQgZiA9IGQuc3RhcnRNcyArIGQuZHVyYXRpb25NczsKCQkJCQkJCXJldHVybiBkLnRva2Vucy5yZWR1Y2UoKHAsIG0sIGgpID0+IHsKCQkJCQkJCQlsZXQgZyA9IGQudG9rZW5zW2ggKyAxXSwgXyA9IHBbcC5sZW5ndGggLSAxXSwgdiA9IF8/LmFsaWduUmFuZ2U/LmVuZCA/PyAwLCBiID0gdiArIG0udGV4dC5sZW5ndGg7CgkJCQkJCQkJaWYgKG0uYWxpZ25SYW5nZSA9IHsKCQkJCQkJCQkJc3RhcnQ6IHYsCgkJCQkJCQkJCWVuZDogYgoJCQkJCQkJCX0sIHAucHVzaChtKSwgZykgewoJCQkJCQkJCQlsZXQgZCA9IG0uc3RhcnRNcyArIG0uZHVyYXRpb25NcywgaCA9IGcuc3RhcnRNcyA/IGcuc3RhcnRNcyAtIGQgOiBmIC0gZDsKCQkJCQkJCQkJcC5wdXNoKHsKCQkJCQkJCQkJCXRleHQ6ICIgIiwKCQkJCQkJCQkJCXN0YXJ0TXM6IGQsCgkJCQkJCQkJCQlkdXJhdGlvbk1zOiBoLAoJCQkJCQkJCQkJYWxpZ25SYW5nZTogewoJCQkJCQkJCQkJCXN0YXJ0OiBiLAoJCQkJCQkJCQkJCWVuZDogYiArIDEKCQkJCQkJCQkJCX0KCQkJCQkJCQkJfSk7CgkJCQkJCQkJfQoJCQkJCQkJCXJldHVybiBwOwoJCQkJCQkJfSwgW10pOwoJCQkJCQl9CgkJCQkJCXN0YXRpYyBjcmVhdGVUb2tlbnMoZCwgZikgewoJCQkJCQkJbGV0IHAgPSBkLnRleHQuc3BsaXQoLyhbXG4gXHRdKS8pLnJlZHVjZSgoZCwgcCkgPT4gewoJCQkJCQkJCWlmICghcC5sZW5ndGgpIHJldHVybiBkOwoJCQkJCQkJCWxldCBtID0gZFtkLmxlbmd0aCAtIDFdID8/IGYsIGggPSBtPy5hbGlnblJhbmdlPy5lbmQgPz8gMCwgZyA9IGggKyBwLmxlbmd0aDsKCQkJCQkJCQlyZXR1cm4gZC5wdXNoKHsKCQkJCQkJCQkJdGV4dDogcCwKCQkJCQkJCQkJYWxpZ25SYW5nZTogewoJCQkJCQkJCQkJc3RhcnQ6IGgsCgkJCQkJCQkJCQllbmQ6IGcKCQkJCQkJCQkJfQoJCQkJCQkJCX0pLCBkOwoJCQkJCQkJfSwgW10pLCBtID0gTWF0aC5mbG9vcihkLmR1cmF0aW9uTXMgLyBwLmxlbmd0aCksIGggPSBkLnN0YXJ0TXMgKyBkLmR1cmF0aW9uTXM7CgkJCQkJCQlyZXR1cm4gcC5tYXAoKGYsIGcpID0+IHsKCQkJCQkJCQlsZXQgXyA9IGcgPT09IHAubGVuZ3RoIC0gMSwgdiA9IGQuc3RhcnRNcyArIG0gKiBnLCBiID0gXyA/IGggLSB2IDogbTsKCQkJCQkJCQlyZXR1cm4gewoJCQkJCQkJCQkuLi5mLAoJCQkJCQkJCQlzdGFydE1zOiB2LAoJCQkJCQkJCQlkdXJhdGlvbk1zOiBiCgkJCQkJCQkJfTsKCQkJCQkJCX0pOwoJCQkJCQl9CgkJCQkJCXN0YXRpYyBwcm9jZXNzVG9rZW5zKGQsIGYpIHsKCQkJCQkJCWxldCBwID0gW10sIG0sIHsgc291cmNlOiBoLCBpc0F1dG9HZW5lcmF0ZWQ6IGcgfSA9IGY7CgkJCQkJCQlmb3IgKGxldCBmIG9mIGQuc3VidGl0bGVzKSB7CgkJCQkJCQkJbGV0IGQgPSBmPy50b2tlbnM/Lmxlbmd0aCwgXyA9IGQgJiYgKGggPT09ICJ5YW5kZXgiIHx8IGggPT09ICJ5b3V0dWJlIiAmJiBnKSA/IFN1YnRpdGxlc1Byb2Nlc3Nvci5mb3JtYXRZYW5kZXhUb2tlbnMoZikgOiBTdWJ0aXRsZXNQcm9jZXNzb3IuY3JlYXRlVG9rZW5zKGYsIG0pOwoJCQkJCQkJCW0gPSBfW18ubGVuZ3RoIC0gMV0sIHAucHVzaCh7CgkJCQkJCQkJCS4uLmYsCgkJCQkJCQkJCXRva2VuczogXwoJCQkJCQkJCX0pOwoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIGQuY29udGFpbnNUb2tlbnMgPSAhMCwgcDsKCQkJCQkJfQoJCQkJCQlzdGF0aWMgZm9ybWF0WW91dHViZVN1YnRpdGxlcyhkLCBmID0gITEpIHsKCQkJCQkJCWlmICghZD8uZXZlbnRzPy5sZW5ndGgpIHJldHVybiBjb25zb2xlLmVycm9yKCJbVk9UXSBJbnZhbGlkIFlvdVR1YmUgc3VidGl0bGVzIGZvcm1hdDoiLCBkKSwgewoJCQkJCQkJCWNvbnRhaW5zVG9rZW5zOiBmLAoJCQkJCQkJCXN1YnRpdGxlczogW10KCQkJCQkJCX07CgkJCQkJCQlsZXQgcCA9IHsKCQkJCQkJCQljb250YWluc1Rva2VuczogZiwKCQkJCQkJCQlzdWJ0aXRsZXM6IFtdCgkJCQkJCQl9OwoJCQkJCQkJZm9yIChsZXQgbSA9IDA7IG0gPCBkLmV2ZW50cy5sZW5ndGg7IG0rKykgewoJCQkJCQkJCWxldCBoID0gZC5ldmVudHNbbV07CgkJCQkJCQkJaWYgKCFoLnNlZ3MpIGNvbnRpbnVlOwoJCQkJCQkJCWxldCBnID0gaC5kRHVyYXRpb25NczsKCQkJCQkJCQlkLmV2ZW50c1ttICsgMV0gJiYgaC50U3RhcnRNcyArIGguZER1cmF0aW9uTXMgPiBkLmV2ZW50c1ttICsgMV0udFN0YXJ0TXMgJiYgKGcgPSBkLmV2ZW50c1ttICsgMV0udFN0YXJ0TXMgLSBoLnRTdGFydE1zKTsKCQkJCQkJCQlsZXQgXyA9IFtdLCB2ID0gZzsKCQkJCQkJCQlmb3IgKGxldCBkID0gMDsgZCA8IGguc2Vncy5sZW5ndGg7IGQrKykgewoJCQkJCQkJCQlsZXQgZiA9IGguc2Vnc1tkXSwgcCA9IGYudXRmOC50cmltKCk7CgkJCQkJCQkJCWlmIChwID09PSAiXG4iKSBjb250aW51ZTsKCQkJCQkJCQkJbGV0IG0gPSBmLnRPZmZzZXRNcyA/PyAwLCBiID0gZywgeCA9IGguc2Vnc1tkICsgMV07CgkJCQkJCQkJCXg/LnRPZmZzZXRNcyAmJiAoYiA9IHgudE9mZnNldE1zIC0gbSwgdiAtPSBiKSwgXy5wdXNoKHsKCQkJCQkJCQkJCXRleHQ6IHAsCgkJCQkJCQkJCQlzdGFydE1zOiBoLnRTdGFydE1zICsgbSwKCQkJCQkJCQkJCWR1cmF0aW9uTXM6IHggPyBiIDogdgoJCQkJCQkJCQl9KTsKCQkJCQkJCQl9CgkJCQkJCQkJbGV0IGIgPSBfLm1hcCgoZCkgPT4gZC50ZXh0KS5qb2luKCIgIik7CgkJCQkJCQkJYiAmJiBwLnN1YnRpdGxlcy5wdXNoKHsKCQkJCQkJCQkJdGV4dDogYiwKCQkJCQkJCQkJc3RhcnRNczogaC50U3RhcnRNcywKCQkJCQkJCQkJZHVyYXRpb25NczogZywKCQkJCQkJCQkJLi4uZiA/IHsgdG9rZW5zOiBfIH0gOiB7fQoJCQkJCQkJCX0pOwoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIHA7CgkJCQkJCX0KCQkJCQkJc3RhdGljIGNsZWFuSnNvblN1YnRpdGxlcyhkKSB7CgkJCQkJCQlsZXQgeyBjb250YWluc1Rva2VuczogZiwgc3VidGl0bGVzOiBwIH0gPSBkOwoJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQljb250YWluc1Rva2VuczogZiwKCQkJCQkJCQlzdWJ0aXRsZXM6IHAubWFwKChkKSA9PiAoewoJCQkJCQkJCQkuLi5kLAoJCQkJCQkJCQl0ZXh0OiBkLnRleHQucmVwbGFjZSgvKDwoW14+XSspPikvZ2ksICIiKQoJCQkJCQkJCX0pKQoJCQkJCQkJfTsKCQkJCQkJfQoJCQkJCQlzdGF0aWMgYXN5bmMgZmV0Y2hTdWJ0aXRsZXMoZCkgewoJCQkJCQkJbGV0IHsgc291cmNlOiBmLCBpc0F1dG9HZW5lcmF0ZWQ6IHAsIGZvcm1hdDogbSB9ID0gZCwgeyB1cmw6IF8gfSA9IGQ7CgkJCQkJCQlpZiAoZiA9PT0gInlvdXR1YmUiKSB7CgkJCQkJCQkJbGV0IGQgPSBoLkEuZ2V0UG9Ub2tlbigpOwoJCQkJCQkJCWlmIChkKSB7CgkJCQkJCQkJCWxldCBmID0gaC5BLmdldERldmljZVBhcmFtcygpOwoJCQkJCQkJCQlfICs9IGAmcG90Yz0xJnBvdD0ke2R9JiR7Zn1gOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJCXRyeSB7CgkJCQkJCQkJbGV0IGggPSBhd2FpdCAoMCwgdy5HMykoXywgeyB0aW1lb3V0OiA3ZTMgfSksIHY7CgkJCQkJCQkJaWYgKFsidnR0IiwgInNydCJdLmluY2x1ZGVzKG0pKSB7CgkJCQkJCQkJCWxldCBkID0gYXdhaXQgaC50ZXh0KCk7CgkJCQkJCQkJCXYgPSAoMCwgZy52aykoZCwgImpzb24iKTsKCQkJCQkJCQl9IGVsc2UgdiA9IGF3YWl0IGguanNvbigpOwoJCQkJCQkJCXJldHVybiBmID09PSAieW91dHViZSIgPyB2ID0gU3VidGl0bGVzUHJvY2Vzc29yLmZvcm1hdFlvdXR1YmVTdWJ0aXRsZXModiwgcCkgOiBmID09PSAidmsiICYmICh2ID0gU3VidGl0bGVzUHJvY2Vzc29yLmNsZWFuSnNvblN1YnRpdGxlcyh2KSksIHYuc3VidGl0bGVzID0gU3VidGl0bGVzUHJvY2Vzc29yLnByb2Nlc3NUb2tlbnModiwgZCksIGNvbnNvbGUubG9nKCJbVk9UXSBQcm9jZXNzZWQgc3VidGl0bGVzOiIsIHYpLCB2OwoJCQkJCQkJfSBjYXRjaCAoZCkgewoJCQkJCQkJCXJldHVybiBjb25zb2xlLmVycm9yKCJbVk9UXSBGYWlsZWQgdG8gcHJvY2VzcyBzdWJ0aXRsZXM6IiwgZCksIHsKCQkJCQkJCQkJY29udGFpbnNUb2tlbnM6ICExLAoJCQkJCQkJCQlzdWJ0aXRsZXM6IFtdCgkJCQkJCQkJfTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQlzdGF0aWMgYXN5bmMgZ2V0U3VidGl0bGVzKGQsIGYpIHsKCQkJCQkJCWxldCB7IGhvc3Q6IHAsIHVybDogbSwgZGV0ZWN0ZWRMYW5ndWFnZTogaCwgdmlkZW9JZDogZywgZHVyYXRpb246IF8sIHN1YnRpdGxlczogdiA9IFtdIH0gPSBmOwoJCQkJCQkJdHJ5IHsKCQkJCQkJCQlsZXQgZiA9IGF3YWl0IFByb21pc2UucmFjZShbZC5nZXRTdWJ0aXRsZXMoewoJCQkJCQkJCQl2aWRlb0RhdGE6IHsKCQkJCQkJCQkJCWhvc3Q6IHAsCgkJCQkJCQkJCQl1cmw6IG0sCgkJCQkJCQkJCQl2aWRlb0lkOiBnLAoJCQkJCQkJCQkJZHVyYXRpb246IF8KCQkJCQkJCQkJfSwKCQkJCQkJCQkJcmVxdWVzdExhbmc6IGgKCQkJCQkJCQl9KSwgKDAsIE8ud1IpKDVlMywgIlRpbWVvdXQiKV0pOwoJCQkJCQkJCWNvbnNvbGUubG9nKCJbVk9UXSBTdWJ0aXRsZXMgcmVzcG9uc2U6IiwgZiksIGYud2FpdGluZyAmJiBjb25zb2xlLmVycm9yKCJbVk9UXSBGYWlsZWQgdG8gZ2V0IFlhbmRleCBzdWJ0aXRsZXMiKTsKCQkJCQkJCQlsZXQgYiA9IChmLnN1YnRpdGxlcyA/PyBbXSkucmVkdWNlKChkLCBmKSA9PiAoZi5sYW5ndWFnZSAmJiAhZC5maW5kKChkKSA9PiBkLnNvdXJjZSA9PT0gInlhbmRleCIgJiYgZC5sYW5ndWFnZSA9PT0gZi5sYW5ndWFnZSAmJiAhZC50cmFuc2xhdGVkRnJvbUxhbmd1YWdlKSAmJiBkLnB1c2goewoJCQkJCQkJCQlzb3VyY2U6ICJ5YW5kZXgiLAoJCQkJCQkJCQlmb3JtYXQ6ICJqc29uIiwKCQkJCQkJCQkJbGFuZ3VhZ2U6IGYubGFuZ3VhZ2UsCgkJCQkJCQkJCXVybDogZi51cmwKCQkJCQkJCQl9KSwgZi50cmFuc2xhdGVkTGFuZ3VhZ2UgJiYgZC5wdXNoKHsKCQkJCQkJCQkJc291cmNlOiAieWFuZGV4IiwKCQkJCQkJCQkJZm9ybWF0OiAianNvbiIsCgkJCQkJCQkJCWxhbmd1YWdlOiBmLnRyYW5zbGF0ZWRMYW5ndWFnZSwKCQkJCQkJCQkJdHJhbnNsYXRlZEZyb21MYW5ndWFnZTogZi5sYW5ndWFnZSwKCQkJCQkJCQkJdXJsOiBmLnRyYW5zbGF0ZWRVcmwKCQkJCQkJCQl9KSwgZCksIFtdKTsKCQkJCQkJCQlyZXR1cm4gWy4uLmIsIC4uLnZdLnNvcnQoKGQsIGYpID0+IHsKCQkJCQkJCQkJaWYgKGQuc291cmNlICE9PSBmLnNvdXJjZSkgcmV0dXJuIGQuc291cmNlID09PSAieWFuZGV4IiA/IC0xIDogMTsKCQkJCQkJCQkJaWYgKGQubGFuZ3VhZ2UgIT09IGYubGFuZ3VhZ2UgJiYgKGQubGFuZ3VhZ2UgPT09IFQudiB8fCBmLmxhbmd1YWdlID09PSBULnYpKSByZXR1cm4gZC5sYW5ndWFnZSA9PT0gVC52ID8gLTEgOiAxOwoJCQkJCQkJCQlpZiAoZC5zb3VyY2UgPT09ICJ5YW5kZXgiKSB7CgkJCQkJCQkJCQlpZiAoZC50cmFuc2xhdGVkRnJvbUxhbmd1YWdlICE9PSBmLnRyYW5zbGF0ZWRGcm9tTGFuZ3VhZ2UpIHJldHVybiAhZC50cmFuc2xhdGVkRnJvbUxhbmd1YWdlIHx8ICFmLnRyYW5zbGF0ZWRGcm9tTGFuZ3VhZ2UgPyBkLmxhbmd1YWdlID09PSBmLmxhbmd1YWdlID8gZC50cmFuc2xhdGVkRnJvbUxhbmd1YWdlID8gMSA6IC0xIDogZC50cmFuc2xhdGVkRnJvbUxhbmd1YWdlID8gLTEgOiAxIDogZC50cmFuc2xhdGVkRnJvbUxhbmd1YWdlID09PSBoID8gLTEgOiAxOwoJCQkJCQkJCQkJaWYgKCFkLnRyYW5zbGF0ZWRGcm9tTGFuZ3VhZ2UpIHJldHVybiBkLmxhbmd1YWdlID09PSBoID8gLTEgOiAxOwoJCQkJCQkJCQl9CgkJCQkJCQkJCXJldHVybiBkLnNvdXJjZSAhPT0gInlhbmRleCIgJiYgZC5pc0F1dG9HZW5lcmF0ZWQgIT09IGYuaXNBdXRvR2VuZXJhdGVkID8gZC5pc0F1dG9HZW5lcmF0ZWQgPyAxIDogLTEgOiAwOwoJCQkJCQkJCX0pOwoJCQkJCQkJfSBjYXRjaCAoZCkgewoJCQkJCQkJCWxldCBmID0gZC5tZXNzYWdlID09PSAiVGltZW91dCIgPyAiRmFpbGVkIHRvIGdldCBZYW5kZXggc3VidGl0bGVzOiB0aW1lb3V0IiA6ICJFcnJvciBpbiBnZXRTdWJ0aXRsZXMgZnVuY3Rpb24iOwoJCQkJCQkJCXRocm93IGNvbnNvbGUuZXJyb3IoYFtWT1RdICR7Zn1gLCBkKSwgZDsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCQljbGFzcyBTdWJ0aXRsZXNXaWRnZXQgewoJCQkJCQljb25zdHJ1Y3RvcihkLCBmLCBwLCBtLCBoID0gdm9pZCAwKSB7CgkJCQkJCQl0aGlzLnZpZGVvID0gZCwgdGhpcy5jb250YWluZXIgPSBmLCB0aGlzLnNpdGUgPSBwLCB0aGlzLnRvb2x0aXBMYXlvdXRSb290ID0gaCwgdGhpcy5wb3J0YWwgPSBtLCB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciA9IHRoaXMuY3JlYXRlU3VidGl0bGVzQ29udGFpbmVyKCksIHRoaXMucG9zaXRpb24gPSB7CgkJCQkJCQkJbGVmdDogMjUsCgkJCQkJCQkJdG9wOiA3NQoJCQkJCQkJfSwgdGhpcy5kcmFnZ2luZyA9IHsKCQkJCQkJCQlhY3RpdmU6ICExLAoJCQkJCQkJCW9mZnNldDogewoJCQkJCQkJCQl4OiAwLAoJCQkJCQkJCQl5OiAwCgkJCQkJCQkJfQoJCQkJCQkJfSwgdGhpcy5zdWJ0aXRsZXMgPSBudWxsLCB0aGlzLnN1YnRpdGxlTGFuZyA9IHZvaWQgMCwgdGhpcy5sYXN0Q29udGVudCA9IG51bGwsIHRoaXMuaGlnaGxpZ2h0V29yZHMgPSAhMSwgdGhpcy5mb250U2l6ZSA9IDIwLCB0aGlzLm9wYWNpdHkgPSAuMiwgdGhpcy5tYXhMZW5ndGggPSAzMDAsIHRoaXMuYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpLCB0aGlzLmJpbmRFdmVudHMoKSwgdGhpcy51cGRhdGVDb250YWluZXJSZWN0KCk7CgkJCQkJCX0KCQkJCQkJY3JlYXRlU3VidGl0bGVzQ29udGFpbmVyKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidm90LWJsb2NrIiksIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoInZvdC1zdWJ0aXRsZXMtd2lkZ2V0IiksIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuc3VidGl0bGVzQ29udGFpbmVyKSwgdGhpcy5zdWJ0aXRsZXNDb250YWluZXI7CgkJCQkJCX0KCQkJCQkJYmluZEV2ZW50cygpIHsKCQkJCQkJCWxldCB7IHNpZ25hbDogZCB9ID0gdGhpcy5hYm9ydENvbnRyb2xsZXI7CgkJCQkJCQl0aGlzLm9uUG9pbnRlckRvd25Cb3VuZCA9IChkKSA9PiB0aGlzLm9uUG9pbnRlckRvd24oZCksIHRoaXMub25Qb2ludGVyVXBCb3VuZCA9ICgpID0+IHRoaXMub25Qb2ludGVyVXAoKSwgdGhpcy5vblBvaW50ZXJNb3ZlQm91bmQgPSAoZCkgPT4gdGhpcy5vblBvaW50ZXJNb3ZlKGQpLCB0aGlzLm9uVGltZVVwZGF0ZUJvdW5kID0gKCkgPT4gdGhpcy51cGRhdGUoKSwgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcmRvd24iLCB0aGlzLm9uUG9pbnRlckRvd25Cb3VuZCwgeyBzaWduYWw6IGQgfSksIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJ1cCIsIHRoaXMub25Qb2ludGVyVXBCb3VuZCwgeyBzaWduYWw6IGQgfSksIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJtb3ZlIiwgdGhpcy5vblBvaW50ZXJNb3ZlQm91bmQsIHsgc2lnbmFsOiBkIH0pLCB0aGlzLnZpZGVvPy5hZGRFdmVudExpc3RlbmVyKCJ0aW1ldXBkYXRlIiwgdGhpcy5vblRpbWVVcGRhdGVCb3VuZCwgeyBzaWduYWw6IGQgfSksIHRoaXMucmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKCkgPT4gdGhpcy5vblJlc2l6ZSgpKSwgdGhpcy5yZXNpemVPYnNlcnZlci5vYnNlcnZlKHRoaXMuY29udGFpbmVyKTsKCQkJCQkJfQoJCQkJCQlvblBvaW50ZXJEb3duKGQpIHsKCQkJCQkJCWlmICghdGhpcy5zdWJ0aXRsZXNDb250YWluZXIuY29udGFpbnMoZC50YXJnZXQpKSByZXR1cm47CgkJCQkJCQlsZXQgZiA9IHRoaXMuc3VidGl0bGVzQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBwID0gdGhpcy5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CgkJCQkJCQl0aGlzLmRyYWdnaW5nID0gewoJCQkJCQkJCWFjdGl2ZTogITAsCgkJCQkJCQkJb2Zmc2V0OiB7CgkJCQkJCQkJCXg6IGQuY2xpZW50WCAtIGYubGVmdCwKCQkJCQkJCQkJeTogZC5jbGllbnRZIC0gZi50b3AKCQkJCQkJCQl9LAoJCQkJCQkJCWNvbnRhaW5lck9mZnNldDogewoJCQkJCQkJCQl4OiBwLmxlZnQsCgkJCQkJCQkJCXk6IHAudG9wCgkJCQkJCQkJfQoJCQkJCQkJfTsKCQkJCQkJfQoJCQkJCQlvblBvaW50ZXJVcCgpIHsKCQkJCQkJCXRoaXMuZHJhZ2dpbmcuYWN0aXZlID0gITE7CgkJCQkJCX0KCQkJCQkJb25Qb2ludGVyTW92ZShkKSB7CgkJCQkJCQlpZiAoIXRoaXMuZHJhZ2dpbmcuYWN0aXZlKSByZXR1cm47CgkJCQkJCQlkLnByZXZlbnREZWZhdWx0KCk7CgkJCQkJCQlsZXQgeyB3aWR0aDogZiwgaGVpZ2h0OiBwIH0gPSB0aGlzLmNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgeyBjb250YWluZXJPZmZzZXQ6IG0sIG9mZnNldDogaCB9ID0gdGhpcy5kcmFnZ2luZzsKCQkJCQkJCXRoaXMucG9zaXRpb24gPSB7CgkJCQkJCQkJbGVmdDogKGQuY2xpZW50WCAtIGgueCAtIG0ueCkgLyBmICogMTAwLAoJCQkJCQkJCXRvcDogKGQuY2xpZW50WSAtIGgueSAtIG0ueSkgLyBwICogMTAwCgkJCQkJCQl9LCB0aGlzLmFwcGx5U3VidGl0bGVQb3NpdGlvbigpOwoJCQkJCQl9CgkJCQkJCW9uUmVzaXplKCkgewoJCQkJCQkJdGhpcy51cGRhdGVDb250YWluZXJSZWN0KCk7CgkJCQkJCX0KCQkJCQkJdXBkYXRlQ29udGFpbmVyUmVjdCgpIHsKCQkJCQkJCXRoaXMuY29udGFpbmVyUmVjdCA9IHRoaXMuY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCB0aGlzLmFwcGx5U3VidGl0bGVQb3NpdGlvbigpOwoJCQkJCQl9CgkJCQkJCWFwcGx5U3VidGl0bGVQb3NpdGlvbigpIHsKCQkJCQkJCWxldCB7IHdpZHRoOiBkLCBoZWlnaHQ6IGYgfSA9IHRoaXMuY29udGFpbmVyUmVjdCwgeyBvZmZzZXRXaWR0aDogcCwgb2Zmc2V0SGVpZ2h0OiBtIH0gPSB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciwgaCA9IChkIC0gcCkgLyBkICogMTAwLCBnID0gKGYgLSBtKSAvIGYgKiAxMDA7CgkJCQkJCQl0aGlzLnBvc2l0aW9uLmxlZnQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih0aGlzLnBvc2l0aW9uLmxlZnQsIGgpKSwgdGhpcy5wb3NpdGlvbi50b3AgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih0aGlzLnBvc2l0aW9uLnRvcCwgZykpLCB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS5sZWZ0ID0gYCR7dGhpcy5wb3NpdGlvbi5sZWZ0fSVgLCB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5zdHlsZS50b3AgPSBgJHt0aGlzLnBvc2l0aW9uLnRvcH0lYCwgdGhpcy50b2tlblRvb2x0aXA/LnVwZGF0ZVBvcygpOwoJCQkJCQl9CgkJCQkJCXByb2Nlc3NUb2tlbnMoZCkgewoJCQkJCQkJaWYgKGQuYXQoLTEpLmFsaWduUmFuZ2UuZW5kIDw9IHRoaXMubWF4TGVuZ3RoKSByZXR1cm4gZDsKCQkJCQkJCWxldCBmID0gW10sIHAgPSBbXSwgbSA9IDA7CgkJCQkJCQlmb3IgKGxldCBoIG9mIGQpIG0gKz0gaC50ZXh0Lmxlbmd0aCwgcC5wdXNoKGgpLCBtID4gdGhpcy5tYXhMZW5ndGggJiYgKGYucHVzaCh0aGlzLnRyaW1DaHVuayhwKSksIHAgPSBbXSwgbSA9IDApOwoJCQkJCQkJcC5sZW5ndGggJiYgZi5wdXNoKHRoaXMudHJpbUNodW5rKHApKTsKCQkJCQkJCWxldCBoID0gdGhpcy52aWRlby5jdXJyZW50VGltZSAqIDFlMzsKCQkJCQkJCXJldHVybiBmLmZpbmQoKGQpID0+IGRbMF0uc3RhcnRNcyA8IGggJiYgaCA8IGQuYXQoLTEpLnN0YXJ0TXMgKyBkLmF0KC0xKS5kdXJhdGlvbk1zKSB8fCBmWzBdOwoJCQkJCQl9CgkJCQkJCXRyaW1DaHVuayhkKSB7CgkJCQkJCQlyZXR1cm4gZFswXT8udGV4dCA9PT0gIiAiICYmIGQuc2hpZnQoKSwgZC5hdCgtMSk/LnRleHQgPT09ICIgIiAmJiBkLnBvcCgpLCBkOwoJCQkJCQl9CgkJCQkJCWFzeW5jIHRyYW5zbGF0ZVN0clRva2VucyhkKSB7CgkJCQkJCQlsZXQgZiA9IHRoaXMuc3VidGl0bGVMYW5nLCBwID0gYi5qLmxhbmc7CgkJCQkJCQlpZiAodGhpcy5zdHJUcmFuc2xhdGVkVG9rZW5zKSB7CgkJCQkJCQkJbGV0IG0gPSBhd2FpdCAoMCwgRC5UbCkoZCwgZiwgcCk7CgkJCQkJCQkJcmV0dXJuIFt0aGlzLnN0clRyYW5zbGF0ZWRUb2tlbnMsIG1dOwoJCQkJCQkJfQoJCQkJCQkJbGV0IG0gPSBhd2FpdCAoMCwgRC5UbCkoW3RoaXMuc3RyVG9rZW5zLCBkXSwgZiwgcCk7CgkJCQkJCQlyZXR1cm4gdGhpcy5zdHJUcmFuc2xhdGVkVG9rZW5zID0gbVswXSwgbTsKCQkJCQkJfQoJCQkJCQlyZWxlYXNlVG9vbHRpcCgpIHsKCQkJCQkJCXJldHVybiB0aGlzLnRva2VuVG9vbHRpcCAmJiAodGhpcy50b2tlblRvb2x0aXAudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoInNlbGVjdGVkIiksIHRoaXMudG9rZW5Ub29sdGlwLnJlbGVhc2UoKSwgdGhpcy50b2tlblRvb2x0aXAgPSB2b2lkIDApLCB0aGlzOwoJCQkJCQl9CgkJCQkJCW9uQ2xpY2sgPSBhc3luYyAoZCkgPT4gewoJCQkJCQkJaWYgKHRoaXMudG9rZW5Ub29sdGlwPy50YXJnZXQgPT09IGQudGFyZ2V0ICYmIHRoaXMudG9rZW5Ub29sdGlwPy5jb250YWluZXIpIHsKCQkJCQkJCQl0aGlzLnRva2VuVG9vbHRpcC5zaG93ZWQgPyBkLnRhcmdldC5jbGFzc0xpc3QuYWRkKCJzZWxlY3RlZCIpIDogZC50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgic2VsZWN0ZWQiKTsKCQkJCQkJCQlyZXR1cm47CgkJCQkJCQl9CgkJCQkJCQl0aGlzLnJlbGVhc2VUb29sdGlwKCksIGQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoInNlbGVjdGVkIik7CgkJCQkJCQlsZXQgZiA9IGQudGFyZ2V0LnRleHRDb250ZW50LnRyaW0oKS5yZXBsYWNlKC9bLnwsXS8sICIiKSwgcCA9IGF3YWl0IEUuZC5nZXQoInRyYW5zbGF0aW9uU2VydmljZSIsIHYubUUpLCBtID0geC5BLmNyZWF0ZVN1YnRpdGxlSW5mbyhmLCB0aGlzLnN0clRyYW5zbGF0ZWRUb2tlbnMgfHwgdGhpcy5zdHJUb2tlbnMsIHApOwoJCQkJCQkJdGhpcy50b2tlblRvb2x0aXAgPSBuZXcgQy5BKHsKCQkJCQkJCQl0YXJnZXQ6IGQudGFyZ2V0LAoJCQkJCQkJCWFuY2hvcjogdGhpcy5zdWJ0aXRsZXNCbG9jaywKCQkJCQkJCQlsYXlvdXRSb290OiB0aGlzLnRvb2x0aXBMYXlvdXRSb290LAoJCQkJCQkJCWNvbnRlbnQ6IG0uY29udGFpbmVyLAoJCQkJCQkJCXBhcmVudEVsZW1lbnQ6IHRoaXMucG9ydGFsLAoJCQkJCQkJCW1heFdpZHRoOiB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5vZmZzZXRXaWR0aCwKCQkJCQkJCQlib3JkZXJSYWRpdXM6IDEyLAoJCQkJCQkJCWJvcmRlcmVkOiAhMSwKCQkJCQkJCQlwb3NpdGlvbjogInRvcCIsCgkJCQkJCQkJdHJpZ2dlcjogImNsaWNrIgoJCQkJCQkJfSksIHRoaXMudG9rZW5Ub29sdGlwLmNyZWF0ZSgpOwoJCQkJCQkJbGV0IGggPSB0aGlzLnN0clRva2VucywgZyA9IGF3YWl0IHRoaXMudHJhbnNsYXRlU3RyVG9rZW5zKGYpOwoJCQkJCQkJaCAhPT0gdGhpcy5zdHJUb2tlbnMgfHwgIXRoaXMudG9rZW5Ub29sdGlwPy5zaG93ZWQgfHwgKG0uaGVhZGVyLnRleHRDb250ZW50ID0gZ1sxXSwgbS5jb250ZXh0LnRleHRDb250ZW50ID0gZ1swXSwgdGhpcy50b2tlblRvb2x0aXAuc2V0Q29udGVudChtLmNvbnRhaW5lciksIHRoaXMudG9rZW5Ub29sdGlwLmNyZWF0ZSgpKTsKCQkJCQkJfTsKCQkJCQkJcmVuZGVyVG9rZW5zKGQsIGYpIHsKCQkJCQkJCXJldHVybiBkLm1hcCgoZCkgPT4gewoJCQkJCQkJCWxldCBwID0gdGhpcy5oaWdobGlnaHRXb3JkcyAmJiAoZiA+IGQuc3RhcnRNcyArIGQuZHVyYXRpb25NcyAvIDIgfHwgZiA+IGQuc3RhcnRNcyAtIDEwMCAmJiBkLnN0YXJ0TXMgKyBkLmR1cmF0aW9uTXMgLyAyIC0gZiA8IDI3NSk7CgkJCQkJCQkJcmV0dXJuICgwLCBfLnF5KWA8c3BhbgogICAgICAgIEBjbGljaz0iJHt0aGlzLm9uQ2xpY2t9IgogICAgICAgIGNsYXNzPSIke3AgPyAicGFzc2VkIiA6ICIifSIKICAgICAgPgogICAgICAgICR7ZC50ZXh0LnJlcGxhY2UoIlxcbiIsICI8YnI+Iil9CiAgICAgIDwvc3Bhbj5gOwoJCQkJCQkJfSk7CgkJCQkJCX0KCQkJCQkJc2V0Q29udGVudChkLCBmID0gdm9pZCAwKSB7CgkJCQkJCQlpZiAodGhpcy5yZWxlYXNlVG9vbHRpcCgpLCB0aGlzLnN1YnRpdGxlTGFuZyA9IGYsICFkIHx8ICF0aGlzLnZpZGVvKSB7CgkJCQkJCQkJdGhpcy5zdWJ0aXRsZXMgPSBudWxsLCAoMCwgXy5YWCkobnVsbCwgdGhpcy5zdWJ0aXRsZXNDb250YWluZXIpOwoJCQkJCQkJCXJldHVybjsKCQkJCQkJCX0KCQkJCQkJCXRoaXMuc3VidGl0bGVzID0gZCwgdGhpcy51cGRhdGUoKTsKCQkJCQkJfQoJCQkJCQlzZXRNYXhMZW5ndGgoZCkgewoJCQkJCQkJdHlwZW9mIGQgPT0gIm51bWJlciIgJiYgZCA+IDAgJiYgKHRoaXMubWF4TGVuZ3RoID0gZCwgdGhpcy51cGRhdGUoKSk7CgkJCQkJCX0KCQkJCQkJc2V0SGlnaGxpZ2h0V29yZHMoZCkgewoJCQkJCQkJdGhpcy5oaWdobGlnaHRXb3JkcyA9ICEhZCwgdGhpcy51cGRhdGUoKTsKCQkJCQkJfQoJCQkJCQlzZXRGb250U2l6ZShkKSB7CgkJCQkJCQl0aGlzLmZvbnRTaXplID0gZCwgdGhpcy5zdWJ0aXRsZXNCbG9jayAmJiAodGhpcy5zdWJ0aXRsZXNCbG9jay5zdHlsZS5mb250U2l6ZSA9IGAke2R9cHhgKTsKCQkJCQkJfQoJCQkJCQlzZXRPcGFjaXR5KGQpIHsKCQkJCQkJCXRoaXMub3BhY2l0eSA9ICgoMTAwIC0gZCkgLyAxMDApLnRvRml4ZWQoMiksIHRoaXMuc3VidGl0bGVzQmxvY2sgJiYgdGhpcy5zdWJ0aXRsZXNCbG9jay5zdHlsZS5zZXRQcm9wZXJ0eSgiLS12b3Qtc3VidGl0bGVzLW9wYWNpdHkiLCB0aGlzLm9wYWNpdHkpOwoJCQkJCQl9CgkJCQkJCXN0cmluZ2lmeVRva2VucyhkKSB7CgkJCQkJCQlyZXR1cm4gZC5tYXAoKGQpID0+IGQudGV4dCkuam9pbigiIik7CgkJCQkJCX0KCQkJCQkJdXBkYXRlKCkgewoJCQkJCQkJaWYgKCF0aGlzLnZpZGVvIHx8ICF0aGlzLnN1YnRpdGxlcykgcmV0dXJuOwoJCQkJCQkJbGV0IGQgPSB0aGlzLnZpZGVvLmN1cnJlbnRUaW1lICogMWUzLCBmID0gdGhpcy5zdWJ0aXRsZXMuc3VidGl0bGVzLmZpbmRMYXN0KChmKSA9PiBmLnN0YXJ0TXMgPCBkICYmIGQgPCBmLnN0YXJ0TXMgKyBmLmR1cmF0aW9uTXMpOwoJCQkJCQkJaWYgKCFmKSB7CgkJCQkJCQkJKDAsIF8uWFgpKG51bGwsIHRoaXMuc3VidGl0bGVzQ29udGFpbmVyKSwgdGhpcy5zdWJ0aXRsZXNCbG9jayA9IG51bGwsIHRoaXMucmVsZWFzZVRvb2x0aXAoKTsKCQkJCQkJCQlyZXR1cm47CgkJCQkJCQl9CgkJCQkJCQlsZXQgcCA9IHRoaXMucHJvY2Vzc1Rva2VucyhmLnRva2VucyksIG0gPSB0aGlzLnJlbmRlclRva2VucyhwLCBkKSwgaCA9IEpTT04uc3RyaW5naWZ5KG0pOwoJCQkJCQkJaWYgKGggIT09IHRoaXMubGFzdENvbnRlbnQpIHsKCQkJCQkJCQl0aGlzLmxhc3RDb250ZW50ID0gaDsKCQkJCQkJCQlsZXQgZCA9IHRoaXMuc3RyaW5naWZ5VG9rZW5zKHApOwoJCQkJCQkJCWQgIT09IHRoaXMuc3RyVG9rZW5zICYmICh0aGlzLnJlbGVhc2VUb29sdGlwKCksIHRoaXMuc3RyVG9rZW5zID0gZCwgdGhpcy5zdHJUcmFuc2xhdGVkVG9rZW5zID0gIiIpLCAoMCwgXy5YWCkoKDAsIF8ucXkpYDx2b3QtYmxvY2sKICAgICAgICAgIGNsYXNzPSJ2b3Qtc3VidGl0bGVzIgogICAgICAgICAgc3R5bGU9ImZvbnQtc2l6ZTogJHt0aGlzLmZvbnRTaXplfXB4OyAtLXZvdC1zdWJ0aXRsZXMtb3BhY2l0eTogJHt0aGlzLm9wYWNpdHl9IgogICAgICAgICAgPiR7bX08L3ZvdC1ibG9jawogICAgICAgID5gLCB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lciksIHRoaXMuc3VidGl0bGVzQmxvY2sgPSB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCIudm90LXN1YnRpdGxlcyIpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCXJlbGVhc2UoKSB7CgkJCQkJCQl0aGlzLmFib3J0Q29udHJvbGxlci5hYm9ydCgpLCB0aGlzLnJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKSwgdGhpcy5yZWxlYXNlVG9vbHRpcCgpLCB0aGlzLnN1YnRpdGxlc0NvbnRhaW5lci5yZW1vdmUoKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQltKCk7CgkJCQl9IGNhdGNoIChkKSB7CgkJCQkJbShkKTsKCQkJCX0KCQkJfSk7CgkJfSwKCQkiLi9zcmMvdHlwZXMvY29tcG9uZW50cy90b29sdGlwLnRzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmQoZiwgewoJCQkJRzogKCkgPT4gaCwKCQkJCVg6ICgpID0+IG0KCQkJfSk7CgkJCWxldCBtID0gWwoJCQkJImxlZnQiLAoJCQkJInRvcCIsCgkJCQkicmlnaHQiLAoJCQkJImJvdHRvbSIKCQkJXSwgaCA9IFsiaG92ZXIiLCAiY2xpY2siXTsKCQl9LAoJCSIuL3NyYy90eXBlcy9jb21wb25lbnRzL3ZvdEJ1dHRvbi50cyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5kKGYsIHsgWDogKCkgPT4gbSB9KTsKCQkJbGV0IG0gPSBbCgkJCQkiZGVmYXVsdCIsCgkJCQkidG9wIiwKCQkJCSJsZWZ0IiwKCQkJCSJyaWdodCIKCQkJXSwgaCA9IG51bGw7CgkJfSwKCQkiLi9zcmMvdHlwZXMvc3RvcmFnZS50cyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5kKGYsIHsgdzogKCkgPT4gbSB9KTsKCQkJbGV0IG0gPSAiYXV0b1RyYW5zbGF0ZS5kb250VHJhbnNsYXRlTGFuZ3VhZ2VzLmVuYWJsZWREb250VHJhbnNsYXRlTGFuZ3VhZ2VzLmVuYWJsZWRBdXRvVm9sdW1lLmF1dG9Wb2x1bWUuYnV0dG9uUG9zLnNob3dWaWRlb1NsaWRlci5zeW5jVm9sdW1lLmRvd25sb2FkV2l0aE5hbWUuc2VuZE5vdGlmeU9uQ29tcGxldGUuc3VidGl0bGVzTWF4TGVuZ3RoLmhpZ2hsaWdodFdvcmRzLnN1YnRpdGxlc0ZvbnRTaXplLnN1YnRpdGxlc09wYWNpdHkuc3VidGl0bGVzRG93bmxvYWRGb3JtYXQucmVzcG9uc2VMYW5ndWFnZS5kZWZhdWx0Vm9sdW1lLm9ubHlCeXBhc3NNZWRpYUNTUC5uZXdBdWRpb1BsYXllci5zaG93UGlQQnV0dG9uLnRyYW5zbGF0ZUFQSUVycm9ycy50cmFuc2xhdGlvblNlcnZpY2UuZGV0ZWN0U2VydmljZS50cmFuc2xhdGlvbkhvdGtleS5tM3U4UHJveHlIb3N0LnByb3h5V29ya2VySG9zdC50cmFuc2xhdGVQcm94eUVuYWJsZWQudHJhbnNsYXRlUHJveHlFbmFibGVkRGVmYXVsdC5hdWRpb0Jvb3N0ZXIudXNlTGl2ZWx5Vm9pY2UuYXV0b0hpZGVCdXR0b25EZWxheS51c2VBdWRpb0Rvd25sb2FkLmNvbXBhdFZlcnNpb24ubG9jYWxlUGhyYXNlcy5sb2NhbGVMYW5nLmxvY2FsZUhhc2gubG9jYWxlVXBkYXRlZEF0LmxvY2FsZUxhbmdPdmVycmlkZS5hY2NvdW50Ii5zcGxpdCgiLiIpOwoJCX0sCgkJIi4vc3JjL3VpLmpzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmEoZCwgYXN5bmMgKGQsIG0pID0+IHsKCQkJCXRyeSB7CgkJCQkJcC5kKGYsIHsgQTogKCkgPT4gVUkgfSk7CgkJCQkJdmFyIGggPSBwKCIuL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saXQtaHRtbC5qcyIpLCBnID0gcCgiLi9zcmMvc3R5bGVzL21haW4uc2NzcyIpLCBfID0gcCgiLi9zcmMvbG9jYWxpemF0aW9uL2xvY2FsaXphdGlvblByb3ZpZGVyLnRzIiksIHYgPSBkKFtfXSk7CgkJCQkJXyA9ICh2LnRoZW4gPyAoYXdhaXQgdikoKSA6IHYpWzBdOwoJCQkJCWNsYXNzIFVJIHsKCQkJCQkJc3RhdGljIGNyZWF0ZUVsKGQsIGYgPSBbXSwgcCA9IG51bGwpIHsKCQkJCQkJCWxldCBtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChkKTsKCQkJCQkJCXJldHVybiBmLmxlbmd0aCAmJiBtLmNsYXNzTGlzdC5hZGQoLi4uZiksIHAgIT09IG51bGwgJiYgbS5hcHBlbmQocCksIG07CgkJCQkJCX0KCQkJCQkJc3RhdGljIGNyZWF0ZUhlYWRlcihkLCBmID0gNCkgewoJCQkJCQkJbGV0IHAgPSBVSS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3QtaGVhZGVyIiwgYHZvdC1oZWFkZXItbGV2ZWwtJHtmfWBdKTsKCQkJCQkJCXJldHVybiBwLmFwcGVuZChkKSwgcDsKCQkJCQkJfQoJCQkJCQlzdGF0aWMgY3JlYXRlSW5mb3JtYXRpb24oZCwgZikgewoJCQkJCQkJbGV0IHAgPSBVSS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3QtaW5mbyJdKSwgbSA9IFVJLmNyZWF0ZUVsKCJ2b3QtYmxvY2siKTsKCQkJCQkJCSgwLCBoLlhYKShkLCBtKTsKCQkJCQkJCWxldCBnID0gVUkuY3JlYXRlRWwoInZvdC1ibG9jayIpOwoJCQkJCQkJcmV0dXJuICgwLCBoLlhYKShmLCBnKSwgcC5hcHBlbmQobSwgZyksIHsKCQkJCQkJCQljb250YWluZXI6IHAsCgkJCQkJCQkJaGVhZGVyOiBtLAoJCQkJCQkJCXZhbHVlOiBnCgkJCQkJCQl9OwoJCQkJCQl9CgkJCQkJCXN0YXRpYyBjcmVhdGVCdXR0b24oZCkgewoJCQkJCQkJbGV0IGYgPSBVSS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3QtYnV0dG9uIl0pOwoJCQkJCQkJcmV0dXJuIGYuYXBwZW5kKGQpLCBmOwoJCQkJCQl9CgkJCQkJCXN0YXRpYyBjcmVhdGVUZXh0QnV0dG9uKGQpIHsKCQkJCQkJCWxldCBmID0gVUkuY3JlYXRlRWwoInZvdC1ibG9jayIsIFsidm90LXRleHQtYnV0dG9uIl0pOwoJCQkJCQkJcmV0dXJuIGYuYXBwZW5kKGQpLCBmOwoJCQkJCQl9CgkJCQkJCXN0YXRpYyBjcmVhdGVPdXRsaW5lZEJ1dHRvbihkKSB7CgkJCQkJCQlsZXQgZiA9IFVJLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC1vdXRsaW5lZC1idXR0b24iXSk7CgkJCQkJCQlyZXR1cm4gZi5hcHBlbmQoZCksIGY7CgkJCQkJCX0KCQkJCQkJc3RhdGljIGNyZWF0ZUljb25CdXR0b24oZCkgewoJCQkJCQkJbGV0IGYgPSBVSS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3QtaWNvbi1idXR0b24iXSk7CgkJCQkJCQlyZXR1cm4gKDAsIGguWFgpKGQsIGYpLCBmOwoJCQkJCQl9CgkJCQkJCXN0YXRpYyBjcmVhdGVJbmxpbmVMb2FkZXIoKSB7CgkJCQkJCQlyZXR1cm4gVUkuY3JlYXRlRWwoInZvdC1ibG9jayIsIFsidm90LWlubGluZS1sb2FkZXIiXSk7CgkJCQkJCX0KCQkJCQkJc3RhdGljIGNyZWF0ZVBvcnRhbChkID0gITEpIHsKCQkJCQkJCXJldHVybiBVSS5jcmVhdGVFbCgidm90LWJsb2NrIiwgW2B2b3QtcG9ydGFsJHtkID8gIi1sb2NhbCIgOiAiIn1gXSk7CgkJCQkJCX0KCQkJCQkJc3RhdGljIGNyZWF0ZVN1YnRpdGxlSW5mbyhkLCBmLCBwKSB7CgkJCQkJCQlsZXQgbSA9IFVJLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC1zdWJ0aXRsZXMtaW5mbyJdKTsKCQkJCQkJCW0uaWQgPSAidm90LXN1YnRpdGxlcy1pbmZvIjsKCQkJCQkJCWxldCBoID0gVUkuY3JlYXRlRWwoInZvdC1ibG9jayIsIFsidm90LXN1YnRpdGxlcy1pbmZvLXNlcnZpY2UiXSwgXy5qLmdldCgiVk9UVHJhbnNsYXRlZEJ5IikucmVwbGFjZSgiezB9IiwgcCkpLCBnID0gVUkuY3JlYXRlRWwoInZvdC1ibG9jayIsIFsidm90LXN1YnRpdGxlcy1pbmZvLWhlYWRlciJdLCBkKSwgdiA9IFVJLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC1zdWJ0aXRsZXMtaW5mby1jb250ZXh0Il0sIGYpOwoJCQkJCQkJcmV0dXJuIG0uYXBwZW5kKGgsIGcsIHYpLCB7CgkJCQkJCQkJY29udGFpbmVyOiBtLAoJCQkJCQkJCXRyYW5zbGF0ZWRXaXRoOiBoLAoJCQkJCQkJCWhlYWRlcjogZywKCQkJCQkJCQljb250ZXh0OiB2CgkJCQkJCQl9OwoJCQkJCQl9CgkJCQkJfQoJCQkJCW0oKTsKCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQltKGQpOwoJCQkJfQoJCQl9KTsKCQl9LAoJCSIuL3NyYy91aS9jb21wb25lbnRzL2FjY291bnRCdXR0b24udHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgeyBBOiAoKSA9PiBBY2NvdW50QnV0dG9uIH0pOwoJCQkJCXZhciBoID0gcCgiLi9zcmMvY29uZmlnL2NvbmZpZy5qcyIpLCBnID0gcCgiLi9zcmMvY29yZS9ldmVudEltcGwudHMiKSwgXyA9IHAoIi4vc3JjL2xvY2FsaXphdGlvbi9sb2NhbGl6YXRpb25Qcm92aWRlci50cyIpLCB2ID0gcCgiLi9zcmMvdWkuanMiKSwgYiA9IHAoIi4vc3JjL3VpL2ljb25zLnRzIiksIHggPSBkKFtfLCB2XSk7CgkJCQkJW18sIHZdID0geC50aGVuID8gKGF3YWl0IHgpKCkgOiB4OwoJCQkJCWNsYXNzIEFjY291bnRCdXR0b24gewoJCQkJCQljb250YWluZXI7CgkJCQkJCWFjY291bnRXcmFwcGVyOwoJCQkJCQlidXR0b25zOwoJCQkJCQl1c2VybmFtZUVsOwoJCQkJCQlhdmF0YXJFbDsKCQkJCQkJYXZhdGFySW1nOwoJCQkJCQlhY3Rpb25CdXR0b247CgkJCQkJCXJlZnJlc2hCdXR0b247CgkJCQkJCXRva2VuQnV0dG9uOwoJCQkJCQlvbkNsaWNrID0gbmV3IGcuWigpOwoJCQkJCQlvblJlZnJlc2ggPSBuZXcgZy5aKCk7CgkJCQkJCW9uQ2xpY2tTZWNyZXQgPSBuZXcgZy5aKCk7CgkJCQkJCV9sb2dnZWRJbjsKCQkJCQkJX3VzZXJuYW1lOwoJCQkJCQlfYXZhdGFySWQ7CgkJCQkJCWNvbnN0cnVjdG9yKHsgbG9nZ2VkSW46IGQgPSAhMSwgdXNlcm5hbWU6IGYgPSAidW5uYW1lZCIsIGF2YXRhcklkOiBwID0gIjAvMC0wIiB9ID0ge30pIHsKCQkJCQkJCXRoaXMuX2xvZ2dlZEluID0gZCwgdGhpcy5fdXNlcm5hbWUgPSBmLCB0aGlzLl9hdmF0YXJJZCA9IHA7CgkJCQkJCQlsZXQgbSA9IHRoaXMuY3JlYXRlRWxlbWVudHMoKTsKCQkJCQkJCXRoaXMuY29udGFpbmVyID0gbS5jb250YWluZXIsIHRoaXMuYWNjb3VudFdyYXBwZXIgPSBtLmFjY291bnRXcmFwcGVyLCB0aGlzLmJ1dHRvbnMgPSBtLmJ1dHRvbnMsIHRoaXMudXNlcm5hbWVFbCA9IG0udXNlcm5hbWVFbCwgdGhpcy5hdmF0YXJFbCA9IG0uYXZhdGFyRWwsIHRoaXMuYXZhdGFySW1nID0gbS5hdmF0YXJJbWcsIHRoaXMuYWN0aW9uQnV0dG9uID0gbS5hY3Rpb25CdXR0b24sIHRoaXMucmVmcmVzaEJ1dHRvbiA9IG0ucmVmcmVzaEJ1dHRvbiwgdGhpcy50b2tlbkJ1dHRvbiA9IG0udG9rZW5CdXR0b247CgkJCQkJCX0KCQkJCQkJY3JlYXRlRWxlbWVudHMoKSB7CgkJCQkJCQlsZXQgZCA9IHYuQS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3QtYWNjb3VudCJdKSwgZiA9IHYuQS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3QtYWNjb3VudC13cmFwcGVyIl0pOwoJCQkJCQkJZi5oaWRkZW4gPSAhdGhpcy5fbG9nZ2VkSW47CgkJCQkJCQlsZXQgcCA9IHYuQS5jcmVhdGVFbCgiaW1nIiwgWyJ2b3QtYWNjb3VudC1hdmF0YXItaW1nIl0pOwoJCQkJCQkJcC5zcmMgPSBgJHtoLmNMfS8ke3RoaXMuX2F2YXRhcklkfS9pc2xhbmRzLXJldGluYS1taWRkbGVgLCBwLmxvYWRpbmcgPSAibGF6eSIsIHAuYWx0ID0gInVzZXIgYXZhdGFyIjsKCQkJCQkJCWxldCBtID0gdi5BLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC1hY2NvdW50LWF2YXRhciJdLCBwKSwgZyA9IHYuQS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3QtYWNjb3VudC11c2VybmFtZSJdKTsKCQkJCQkJCWcudGV4dENvbnRlbnQgPSB0aGlzLl91c2VybmFtZSwgZi5hcHBlbmQobSwgZyk7CgkJCQkJCQlsZXQgXyA9IHYuQS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3QtYWNjb3VudC1idXR0b25zIl0pLCB4ID0gdi5BLmNyZWF0ZU91dGxpbmVkQnV0dG9uKHRoaXMuYnV0dG9uVGV4dCk7CgkJCQkJCQl4LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewoJCQkJCQkJCXRoaXMub25DbGljay5kaXNwYXRjaCgpOwoJCQkJCQkJfSk7CgkJCQkJCQlsZXQgQyA9IHYuQS5jcmVhdGVJY29uQnV0dG9uKGIuR0EpOwoJCQkJCQkJQy5oaWRkZW4gPSB0aGlzLl9sb2dnZWRJbiwgQy5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsICgpID0+IHsKCQkJCQkJCQl0aGlzLm9uQ2xpY2tTZWNyZXQuZGlzcGF0Y2goKTsKCQkJCQkJCX0pOwoJCQkJCQkJbGV0IHcgPSB2LkEuY3JlYXRlSWNvbkJ1dHRvbihiLk05KTsKCQkJCQkJCXJldHVybiB3LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewoJCQkJCQkJCXRoaXMub25SZWZyZXNoLmRpc3BhdGNoKCk7CgkJCQkJCQl9KSwgXy5hcHBlbmQoeCwgQywgdyksIGQuYXBwZW5kKGYsIF8pLCB7CgkJCQkJCQkJY29udGFpbmVyOiBkLAoJCQkJCQkJCWFjY291bnRXcmFwcGVyOiBmLAoJCQkJCQkJCWJ1dHRvbnM6IF8sCgkJCQkJCQkJdXNlcm5hbWVFbDogZywKCQkJCQkJCQlhdmF0YXJJbWc6IHAsCgkJCQkJCQkJYXZhdGFyRWw6IG0sCgkJCQkJCQkJYWN0aW9uQnV0dG9uOiB4LAoJCQkJCQkJCXJlZnJlc2hCdXR0b246IHcsCgkJCQkJCQkJdG9rZW5CdXR0b246IEMKCQkJCQkJCX07CgkJCQkJCX0KCQkJCQkJYWRkRXZlbnRMaXN0ZW5lcihkLCBmKSB7CgkJCQkJCQlzd2l0Y2ggKGQpIHsKCQkJCQkJCQljYXNlICJjbGljayI6CgkJCQkJCQkJCXRoaXMub25DbGljay5hZGRMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAiY2xpY2s6c2VjcmV0IjoKCQkJCQkJCQkJdGhpcy5vbkNsaWNrU2VjcmV0LmFkZExpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJyZWZyZXNoIjoKCQkJCQkJCQkJdGhpcy5vblJlZnJlc2guYWRkTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIHRoaXM7CgkJCQkJCX0KCQkJCQkJcmVtb3ZlRXZlbnRMaXN0ZW5lcihkLCBmKSB7CgkJCQkJCQlzd2l0Y2ggKGQpIHsKCQkJCQkJCQljYXNlICJjbGljayI6CgkJCQkJCQkJCXRoaXMub25DbGljay5yZW1vdmVMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAiY2xpY2s6c2VjcmV0IjoKCQkJCQkJCQkJdGhpcy5vbkNsaWNrU2VjcmV0LnJlbW92ZUxpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJyZWZyZXNoIjoKCQkJCQkJCQkJdGhpcy5vblJlZnJlc2gucmVtb3ZlTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIHRoaXM7CgkJCQkJCX0KCQkJCQkJZ2V0IGJ1dHRvblRleHQoKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5fbG9nZ2VkSW4gPyBfLmouZ2V0KCJWT1RMb2dvdXQiKSA6IF8uai5nZXQoIlZPVExvZ2luIik7CgkJCQkJCX0KCQkJCQkJZ2V0IGxvZ2dlZEluKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuX2xvZ2dlZEluOwoJCQkJCQl9CgkJCQkJCXNldCBsb2dnZWRJbihkKSB7CgkJCQkJCQl0aGlzLl9sb2dnZWRJbiA9IGQsIHRoaXMuYWNjb3VudFdyYXBwZXIuaGlkZGVuID0gIXRoaXMuX2xvZ2dlZEluLCB0aGlzLmFjdGlvbkJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuYnV0dG9uVGV4dCwgdGhpcy50b2tlbkJ1dHRvbi5oaWRkZW4gPSB0aGlzLl9sb2dnZWRJbjsKCQkJCQkJfQoJCQkJCQlnZXQgYXZhdGFySWQoKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5fYXZhdGFySWQ7CgkJCQkJCX0KCQkJCQkJc2V0IGF2YXRhcklkKGQpIHsKCQkJCQkJCXRoaXMuX2F2YXRhcklkID0gZCA/PyAiMC8wLTAiLCB0aGlzLmF2YXRhckltZy5zcmMgPSBgJHtoLmNMfS8ke3RoaXMuX2F2YXRhcklkfS9pc2xhbmRzLXJldGluYS1taWRkbGVgOwoJCQkJCQl9CgkJCQkJCWdldCB1c2VybmFtZSgpIHsKCQkJCQkJCXJldHVybiB0aGlzLl91c2VybmFtZTsKCQkJCQkJfQoJCQkJCQlzZXQgdXNlcm5hbWUoZCkgewoJCQkJCQkJdGhpcy5fdXNlcm5hbWUgPSBkID8/ICJ1bm5hbWVkIiwgdGhpcy51c2VybmFtZUVsLnRleHRDb250ZW50ID0gdGhpcy5fdXNlcm5hbWU7CgkJCQkJCX0KCQkJCQkJc2V0IGhpZGRlbihkKSB7CgkJCQkJCQl0aGlzLmNvbnRhaW5lci5oaWRkZW4gPSBkOwoJCQkJCQl9CgkJCQkJCWdldCBoaWRkZW4oKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5jb250YWluZXIuaGlkZGVuOwoJCQkJCQl9CgkJCQkJfQoJCQkJCW0oKTsKCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQltKGQpOwoJCQkJfQoJCQl9KTsKCQl9LAoJCSIuL3NyYy91aS9jb21wb25lbnRzL2NoZWNrYm94LnRzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmEoZCwgYXN5bmMgKGQsIG0pID0+IHsKCQkJCXRyeSB7CgkJCQkJcC5kKGYsIHsgQTogKCkgPT4gQ2hlY2tib3ggfSk7CgkJCQkJdmFyIGggPSBwKCIuL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saXQtaHRtbC5qcyIpLCBnID0gcCgiLi9zcmMvY29yZS9ldmVudEltcGwudHMiKSwgXyA9IHAoIi4vc3JjL3VpLmpzIiksIHYgPSBkKFtfXSk7CgkJCQkJXyA9ICh2LnRoZW4gPyAoYXdhaXQgdikoKSA6IHYpWzBdOwoJCQkJCWNsYXNzIENoZWNrYm94IHsKCQkJCQkJY29udGFpbmVyOwoJCQkJCQlpbnB1dDsKCQkJCQkJbGFiZWw7CgkJCQkJCW9uQ2hhbmdlID0gbmV3IGcuWigpOwoJCQkJCQlfbGFiZWxIdG1sOwoJCQkJCQlfY2hlY2tlZDsKCQkJCQkJX2lzU3ViQ2hlY2tib3g7CgkJCQkJCWNvbnN0cnVjdG9yKHsgbGFiZWxIdG1sOiBkLCBjaGVja2VkOiBmID0gITEsIGlzU3ViQ2hlY2tib3g6IHAgPSAhMSB9KSB7CgkJCQkJCQl0aGlzLl9sYWJlbEh0bWwgPSBkLCB0aGlzLl9jaGVja2VkID0gZiwgdGhpcy5faXNTdWJDaGVja2JveCA9IHA7CgkJCQkJCQlsZXQgbSA9IHRoaXMuY3JlYXRlRWxlbWVudHMoKTsKCQkJCQkJCXRoaXMuY29udGFpbmVyID0gbS5jb250YWluZXIsIHRoaXMuaW5wdXQgPSBtLmlucHV0LCB0aGlzLmxhYmVsID0gbS5sYWJlbDsKCQkJCQkJfQoJCQkJCQljcmVhdGVFbGVtZW50cygpIHsKCQkJCQkJCWxldCBkID0gXy5BLmNyZWF0ZUVsKCJsYWJlbCIsIFsidm90LWNoZWNrYm94Il0pOwoJCQkJCQkJdGhpcy5faXNTdWJDaGVja2JveCAmJiBkLmNsYXNzTGlzdC5hZGQoInZvdC1jaGVja2JveC1zdWIiKTsKCQkJCQkJCWxldCBmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKCQkJCQkJCWYudHlwZSA9ICJjaGVja2JveCIsIGYuY2hlY2tlZCA9IHRoaXMuX2NoZWNrZWQsIGYuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgKCkgPT4gewoJCQkJCQkJCXRoaXMuX2NoZWNrZWQgPSBmLmNoZWNrZWQsIHRoaXMub25DaGFuZ2UuZGlzcGF0Y2godGhpcy5fY2hlY2tlZCk7CgkJCQkJCQl9KTsKCQkJCQkJCWxldCBwID0gXy5BLmNyZWF0ZUVsKCJzcGFuIik7CgkJCQkJCQlyZXR1cm4gKDAsIGguWFgpKHRoaXMuX2xhYmVsSHRtbCwgcCksIGQuYXBwZW5kKGYsIHApLCB7CgkJCQkJCQkJY29udGFpbmVyOiBkLAoJCQkJCQkJCWlucHV0OiBmLAoJCQkJCQkJCWxhYmVsOiBwCgkJCQkJCQl9OwoJCQkJCQl9CgkJCQkJCWFkZEV2ZW50TGlzdGVuZXIoZCwgZikgewoJCQkJCQkJcmV0dXJuIHRoaXMub25DaGFuZ2UuYWRkTGlzdGVuZXIoZiksIHRoaXM7CgkJCQkJCX0KCQkJCQkJcmVtb3ZlRXZlbnRMaXN0ZW5lcihkLCBmKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5vbkNoYW5nZS5yZW1vdmVMaXN0ZW5lcihmKSwgdGhpczsKCQkJCQkJfQoJCQkJCQlzZXQgaGlkZGVuKGQpIHsKCQkJCQkJCXRoaXMuY29udGFpbmVyLmhpZGRlbiA9IGQ7CgkJCQkJCX0KCQkJCQkJZ2V0IGhpZGRlbigpIHsKCQkJCQkJCXJldHVybiB0aGlzLmNvbnRhaW5lci5oaWRkZW47CgkJCQkJCX0KCQkJCQkJZ2V0IGRpc2FibGVkKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuaW5wdXQuZGlzYWJsZWQ7CgkJCQkJCX0KCQkJCQkJc2V0IGRpc2FibGVkKGQpIHsKCQkJCQkJCXRoaXMuaW5wdXQuZGlzYWJsZWQgPSBkOwoJCQkJCQl9CgkJCQkJCWdldCBjaGVja2VkKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuX2NoZWNrZWQ7CgkJCQkJCX0KCQkJCQkJc2V0IGNoZWNrZWQoZCkgewoJCQkJCQkJdGhpcy5fY2hlY2tlZCAhPT0gZCAmJiAodGhpcy5fY2hlY2tlZCA9IHRoaXMuaW5wdXQuY2hlY2tlZCA9IGQsIHRoaXMub25DaGFuZ2UuZGlzcGF0Y2godGhpcy5fY2hlY2tlZCkpOwoJCQkJCQl9CgkJCQkJfQoJCQkJCW0oKTsKCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQltKGQpOwoJCQkJfQoJCQl9KTsKCQl9LAoJCSIuL3NyYy91aS9jb21wb25lbnRzL2RldGFpbHMudHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgeyBBOiAoKSA9PiBEZXRhaWxzIH0pOwoJCQkJCXZhciBoID0gcCgiLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGl0LWh0bWwuanMiKSwgZyA9IHAoIi4vc3JjL2NvcmUvZXZlbnRJbXBsLnRzIiksIF8gPSBwKCIuL3NyYy91aS5qcyIpLCB2ID0gcCgiLi9zcmMvdWkvaWNvbnMudHMiKSwgYiA9IGQoW19dKTsKCQkJCQlfID0gKGIudGhlbiA/IChhd2FpdCBiKSgpIDogYilbMF07CgkJCQkJY2xhc3MgRGV0YWlscyB7CgkJCQkJCWNvbnRhaW5lcjsKCQkJCQkJaGVhZGVyOwoJCQkJCQlhcnJvd0ljb247CgkJCQkJCW9uQ2xpY2sgPSBuZXcgZy5aKCk7CgkJCQkJCV90aXRsZUh0bWw7CgkJCQkJCWNvbnN0cnVjdG9yKHsgdGl0bGVIdG1sOiBkIH0pIHsKCQkJCQkJCXRoaXMuX3RpdGxlSHRtbCA9IGQ7CgkJCQkJCQlsZXQgZiA9IHRoaXMuY3JlYXRlRWxlbWVudHMoKTsKCQkJCQkJCXRoaXMuY29udGFpbmVyID0gZi5jb250YWluZXIsIHRoaXMuaGVhZGVyID0gZi5oZWFkZXIsIHRoaXMuYXJyb3dJY29uID0gZi5hcnJvd0ljb247CgkJCQkJCX0KCQkJCQkJY3JlYXRlRWxlbWVudHMoKSB7CgkJCQkJCQlsZXQgZCA9IF8uQS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3QtZGV0YWlscyJdKSwgZiA9IF8uQS5jcmVhdGVFbCgidm90LWJsb2NrIik7CgkJCQkJCQlmLmFwcGVuZCh0aGlzLl90aXRsZUh0bWwpOwoJCQkJCQkJbGV0IHAgPSBfLkEuY3JlYXRlRWwoInZvdC1ibG9jayIsIFsidm90LWRldGFpbHMtYXJyb3ctaWNvbiJdKTsKCQkJCQkJCXJldHVybiAoMCwgaC5YWCkodi5tUSwgcCksIGQuYXBwZW5kKGYsIHApLCBkLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewoJCQkJCQkJCXRoaXMub25DbGljay5kaXNwYXRjaCgpOwoJCQkJCQkJfSksIHsKCQkJCQkJCQljb250YWluZXI6IGQsCgkJCQkJCQkJaGVhZGVyOiBmLAoJCQkJCQkJCWFycm93SWNvbjogcAoJCQkJCQkJfTsKCQkJCQkJfQoJCQkJCQlhZGRFdmVudExpc3RlbmVyKGQsIGYpIHsKCQkJCQkJCXJldHVybiB0aGlzLm9uQ2xpY2suYWRkTGlzdGVuZXIoZiksIHRoaXM7CgkJCQkJCX0KCQkJCQkJcmVtb3ZlRXZlbnRMaXN0ZW5lcihkLCBmKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5vbkNsaWNrLnJlbW92ZUxpc3RlbmVyKGYpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCXNldCBoaWRkZW4oZCkgewoJCQkJCQkJdGhpcy5jb250YWluZXIuaGlkZGVuID0gZDsKCQkJCQkJfQoJCQkJCQlnZXQgaGlkZGVuKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuY29udGFpbmVyLmhpZGRlbjsKCQkJCQkJfQoJCQkJCX0KCQkJCQltKCk7CgkJCQl9IGNhdGNoIChkKSB7CgkJCQkJbShkKTsKCQkJCX0KCQkJfSk7CgkJfSwKCQkiLi9zcmMvdWkvY29tcG9uZW50cy9kaWFsb2cudHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgeyBBOiAoKSA9PiBEaWFsb2cgfSk7CgkJCQkJdmFyIGggPSBwKCIuL3NyYy9jb3JlL2V2ZW50SW1wbC50cyIpLCBnID0gcCgiLi9zcmMvdWkuanMiKSwgXyA9IHAoIi4vc3JjL3VpL2ljb25zLnRzIiksIHYgPSBkKFtnXSk7CgkJCQkJZyA9ICh2LnRoZW4gPyAoYXdhaXQgdikoKSA6IHYpWzBdOwoJCQkJCWNsYXNzIERpYWxvZyB7CgkJCQkJCWNvbnRhaW5lcjsKCQkJCQkJYmFja2Ryb3A7CgkJCQkJCWJveDsKCQkJCQkJY29udGVudFdyYXBwZXI7CgkJCQkJCWhlYWRlckNvbnRhaW5lcjsKCQkJCQkJdGl0bGVDb250YWluZXI7CgkJCQkJCXRpdGxlOwoJCQkJCQljbG9zZUJ1dHRvbjsKCQkJCQkJYm9keUNvbnRhaW5lcjsKCQkJCQkJZm9vdGVyQ29udGFpbmVyOwoJCQkJCQlvbkNsb3NlID0gbmV3IGguWigpOwoJCQkJCQlfdGl0bGVIdG1sOwoJCQkJCQlfaXNUZW1wOwoJCQkJCQljb25zdHJ1Y3Rvcih7IHRpdGxlSHRtbDogZCwgaXNUZW1wOiBmID0gITEgfSkgewoJCQkJCQkJdGhpcy5fdGl0bGVIdG1sID0gZCwgdGhpcy5faXNUZW1wID0gZjsKCQkJCQkJCWxldCBwID0gdGhpcy5jcmVhdGVFbGVtZW50cygpOwoJCQkJCQkJdGhpcy5jb250YWluZXIgPSBwLmNvbnRhaW5lciwgdGhpcy5iYWNrZHJvcCA9IHAuYmFja2Ryb3AsIHRoaXMuYm94ID0gcC5ib3gsIHRoaXMuY29udGVudFdyYXBwZXIgPSBwLmNvbnRlbnRXcmFwcGVyLCB0aGlzLmhlYWRlckNvbnRhaW5lciA9IHAuaGVhZGVyQ29udGFpbmVyLCB0aGlzLnRpdGxlQ29udGFpbmVyID0gcC50aXRsZUNvbnRhaW5lciwgdGhpcy50aXRsZSA9IHAudGl0bGUsIHRoaXMuY2xvc2VCdXR0b24gPSBwLmNsb3NlQnV0dG9uLCB0aGlzLmJvZHlDb250YWluZXIgPSBwLmJvZHlDb250YWluZXIsIHRoaXMuZm9vdGVyQ29udGFpbmVyID0gcC5mb290ZXJDb250YWluZXI7CgkJCQkJCX0KCQkJCQkJY3JlYXRlRWxlbWVudHMoKSB7CgkJCQkJCQlsZXQgZCA9IGcuQS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3QtZGlhbG9nLWNvbnRhaW5lciJdKTsKCQkJCQkJCXRoaXMuX2lzVGVtcCAmJiBkLmNsYXNzTGlzdC5hZGQoInZvdC1kaWFsb2ctdGVtcCIpLCBkLmhpZGRlbiA9ICF0aGlzLl9pc1RlbXA7CgkJCQkJCQlsZXQgZiA9IGcuQS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3QtZGlhbG9nLWJhY2tkcm9wIl0pLCBwID0gZy5BLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC1kaWFsb2ciXSksIG0gPSBnLkEuY3JlYXRlRWwoInZvdC1ibG9jayIsIFsidm90LWRpYWxvZy1jb250ZW50LXdyYXBwZXIiXSksIGggPSBnLkEuY3JlYXRlRWwoInZvdC1ibG9jayIsIFsidm90LWRpYWxvZy1oZWFkZXItY29udGFpbmVyIl0pLCB2ID0gZy5BLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC1kaWFsb2ctdGl0bGUtY29udGFpbmVyIl0pLCBiID0gZy5BLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC1kaWFsb2ctdGl0bGUiXSk7CgkJCQkJCQliLmFwcGVuZCh0aGlzLl90aXRsZUh0bWwpLCB2LmFwcGVuZENoaWxkKGIpOwoJCQkJCQkJbGV0IHggPSBnLkEuY3JlYXRlSWNvbkJ1dHRvbihfLmpyKTsKCQkJCQkJCXguY2xhc3NMaXN0LmFkZCgidm90LWRpYWxvZy1jbG9zZS1idXR0b24iKSwgZi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsICgpID0+IHsKCQkJCQkJCQl0aGlzLmNsb3NlKCk7CgkJCQkJCQl9KSwgeC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsICgpID0+IHsKCQkJCQkJCQl0aGlzLmNsb3NlKCk7CgkJCQkJCQl9KSwgaC5hcHBlbmQodiwgeCk7CgkJCQkJCQlsZXQgQyA9IGcuQS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3QtZGlhbG9nLWJvZHktY29udGFpbmVyIl0pLCB3ID0gZy5BLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC1kaWFsb2ctZm9vdGVyLWNvbnRhaW5lciJdKTsKCQkJCQkJCXJldHVybiBtLmFwcGVuZChoLCBDLCB3KSwgcC5hcHBlbmRDaGlsZChtKSwgZC5hcHBlbmQoZiwgcCksIHsKCQkJCQkJCQljb250YWluZXI6IGQsCgkJCQkJCQkJYmFja2Ryb3A6IGYsCgkJCQkJCQkJYm94OiBwLAoJCQkJCQkJCWNvbnRlbnRXcmFwcGVyOiBtLAoJCQkJCQkJCWhlYWRlckNvbnRhaW5lcjogaCwKCQkJCQkJCQl0aXRsZUNvbnRhaW5lcjogdiwKCQkJCQkJCQl0aXRsZTogYiwKCQkJCQkJCQljbG9zZUJ1dHRvbjogeCwKCQkJCQkJCQlib2R5Q29udGFpbmVyOiBDLAoJCQkJCQkJCWZvb3RlckNvbnRhaW5lcjogdwoJCQkJCQkJfTsKCQkJCQkJfQoJCQkJCQlhZGRFdmVudExpc3RlbmVyKGQsIGYpIHsKCQkJCQkJCXJldHVybiB0aGlzLm9uQ2xvc2UuYWRkTGlzdGVuZXIoZiksIHRoaXM7CgkJCQkJCX0KCQkJCQkJcmVtb3ZlRXZlbnRMaXN0ZW5lcihkLCBmKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5vbkNsb3NlLnJlbW92ZUxpc3RlbmVyKGYpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCW9wZW4oKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5oaWRkZW4gPSAhMSwgdGhpczsKCQkJCQkJfQoJCQkJCQlyZW1vdmUoKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5jb250YWluZXIucmVtb3ZlKCksIHRoaXMub25DbG9zZS5kaXNwYXRjaCgpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCWNsb3NlKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuX2lzVGVtcCA/IHRoaXMucmVtb3ZlKCkgOiAodGhpcy5oaWRkZW4gPSAhMCwgdGhpcy5vbkNsb3NlLmRpc3BhdGNoKCksIHRoaXMpOwoJCQkJCQl9CgkJCQkJCXNldCBoaWRkZW4oZCkgewoJCQkJCQkJdGhpcy5jb250YWluZXIuaGlkZGVuID0gZDsKCQkJCQkJfQoJCQkJCQlnZXQgaGlkZGVuKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuY29udGFpbmVyLmhpZGRlbjsKCQkJCQkJfQoJCQkJCQlnZXQgaXNEaWFsb2dPcGVuKCkgewoJCQkJCQkJcmV0dXJuICF0aGlzLmNvbnRhaW5lci5oaWRkZW47CgkJCQkJCX0KCQkJCQl9CgkJCQkJbSgpOwoJCQkJfSBjYXRjaCAoZCkgewoJCQkJCW0oZCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJIi4vc3JjL3VpL2NvbXBvbmVudHMvZG93bmxvYWRCdXR0b24udHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgeyBBOiAoKSA9PiBEb3dubG9hZEJ1dHRvbiB9KTsKCQkJCQl2YXIgaCA9IHAoIi4vc3JjL2NvcmUvZXZlbnRJbXBsLnRzIiksIGcgPSBwKCIuL3NyYy91aS5qcyIpLCBfID0gcCgiLi9zcmMvdWkvaWNvbnMudHMiKSwgdiA9IGQoW2ddKTsKCQkJCQlnID0gKHYudGhlbiA/IChhd2FpdCB2KSgpIDogdilbMF07CgkJCQkJY2xhc3MgRG93bmxvYWRCdXR0b24gewoJCQkJCQlidXR0b247CgkJCQkJCWxvYWRlck1haW47CgkJCQkJCWxvYWRlclRleHQ7CgkJCQkJCW9uQ2xpY2sgPSBuZXcgaC5aKCk7CgkJCQkJCV9wcm9ncmVzcyA9IDA7CgkJCQkJCWNvbnN0cnVjdG9yKCkgewoJCQkJCQkJbGV0IGQgPSB0aGlzLmNyZWF0ZUVsZW1lbnRzKCk7CgkJCQkJCQl0aGlzLmJ1dHRvbiA9IGQuYnV0dG9uLCB0aGlzLmxvYWRlck1haW4gPSBkLmxvYWRlck1haW4sIHRoaXMubG9hZGVyVGV4dCA9IGQubG9hZGVyVGV4dDsKCQkJCQkJfQoJCQkJCQljcmVhdGVFbGVtZW50cygpIHsKCQkJCQkJCWxldCBkID0gZy5BLmNyZWF0ZUljb25CdXR0b24oXy5uTyksIGYgPSBkLnF1ZXJ5U2VsZWN0b3IoIi52b3QtbG9hZGVyLW1haW4iKSwgcCA9IGQucXVlcnlTZWxlY3RvcigiLnZvdC1sb2FkZXItdGV4dCIpOwoJCQkJCQkJcmV0dXJuIGQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7CgkJCQkJCQkJdGhpcy5vbkNsaWNrLmRpc3BhdGNoKCk7CgkJCQkJCQl9KSwgewoJCQkJCQkJCWJ1dHRvbjogZCwKCQkJCQkJCQlsb2FkZXJNYWluOiBmLAoJCQkJCQkJCWxvYWRlclRleHQ6IHAKCQkJCQkJCX07CgkJCQkJCX0KCQkJCQkJYWRkRXZlbnRMaXN0ZW5lcihkLCBmKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5vbkNsaWNrLmFkZExpc3RlbmVyKGYpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCXJlbW92ZUV2ZW50TGlzdGVuZXIoZCwgZikgewoJCQkJCQkJcmV0dXJuIHRoaXMub25DbGljay5yZW1vdmVMaXN0ZW5lcihmKSwgdGhpczsKCQkJCQkJfQoJCQkJCQlnZXQgcHJvZ3Jlc3MoKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5fcHJvZ3Jlc3M7CgkJCQkJCX0KCQkJCQkJc2V0IHByb2dyZXNzKGQpIHsKCQkJCQkJCXRoaXMuX3Byb2dyZXNzID0gZCwgdGhpcy5sb2FkZXJUZXh0LnRleHRDb250ZW50ID0gZCA9PT0gMCA/ICIiIDogZC50b1N0cmluZygpLCAhKGQgPiAxKSAmJiAodGhpcy5sb2FkZXJNYWluLnN0eWxlLm9wYWNpdHkgPSBkID09PSAwID8gIjEiIDogIjAiKTsKCQkJCQkJfQoJCQkJCQlzZXQgaGlkZGVuKGQpIHsKCQkJCQkJCXRoaXMuYnV0dG9uLmhpZGRlbiA9IGQ7CgkJCQkJCX0KCQkJCQkJZ2V0IGhpZGRlbigpIHsKCQkJCQkJCXJldHVybiB0aGlzLmJ1dHRvbi5oaWRkZW47CgkJCQkJCX0KCQkJCQl9CgkJCQkJbSgpOwoJCQkJfSBjYXRjaCAoZCkgewoJCQkJCW0oZCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJIi4vc3JjL3VpL2NvbXBvbmVudHMvaG90a2V5QnV0dG9uLnRzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmEoZCwgYXN5bmMgKGQsIG0pID0+IHsKCQkJCXRyeSB7CgkJCQkJcC5kKGYsIHsKCQkJCQkJQTogKCkgPT4gSG90a2V5QnV0dG9uLAoJCQkJCQlfOiAoKSA9PiBmb3JtYXRLZXlzQ29tYm8KCQkJCQl9KTsKCQkJCQl2YXIgaCA9IHAoIi4vc3JjL2NvcmUvZXZlbnRJbXBsLnRzIiksIGcgPSBwKCIuL3NyYy9sb2NhbGl6YXRpb24vbG9jYWxpemF0aW9uUHJvdmlkZXIudHMiKSwgXyA9IHAoIi4vc3JjL3VpLmpzIiksIHYgPSBkKFtnLCBfXSk7CgkJCQkJW2csIF9dID0gdi50aGVuID8gKGF3YWl0IHYpKCkgOiB2OwoJCQkJCWNsYXNzIEhvdGtleUJ1dHRvbiB7CgkJCQkJCWNvbnRhaW5lcjsKCQkJCQkJYnV0dG9uOwoJCQkJCQlvbkNoYW5nZSA9IG5ldyBoLlooKTsKCQkJCQkJX2xhYmVsSHRtbDsKCQkJCQkJX2tleTsKCQkJCQkJcHJlc3NlZEtleXM7CgkJCQkJCXJlY29yZGluZyA9ICExOwoJCQkJCQljb25zdHJ1Y3Rvcih7IGxhYmVsSHRtbDogZCwga2V5OiBmID0gbnVsbCB9KSB7CgkJCQkJCQl0aGlzLl9sYWJlbEh0bWwgPSBkLCB0aGlzLl9rZXkgPSBmLCB0aGlzLnByZXNzZWRLZXlzID0gbmV3IFNldCgpOwoJCQkJCQkJbGV0IHAgPSB0aGlzLmNyZWF0ZUVsZW1lbnRzKCk7CgkJCQkJCQl0aGlzLmNvbnRhaW5lciA9IHAuY29udGFpbmVyLCB0aGlzLmJ1dHRvbiA9IHAuYnV0dG9uOwoJCQkJCQl9CgkJCQkJCXN0b3BSZWNvcmRpbmdLZXlzKCkgewoJCQkJCQkJdGhpcy5yZWNvcmRpbmcgPSAhMSwgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIHRoaXMua2V5ZG93bkhhbmRsZSksIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoImtleXVwIiwgdGhpcy5rZXl1cE9yQmx1ckhhbmRsZSksIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoImJsdXIiLCB0aGlzLmtleXVwT3JCbHVySGFuZGxlKSwgdGhpcy5idXR0b24ucmVtb3ZlQXR0cmlidXRlKCJkYXRhLXN0YXR1cyIpLCB0aGlzLnByZXNzZWRLZXlzLmNsZWFyKCk7CgkJCQkJCX0KCQkJCQkJa2V5ZG93bkhhbmRsZSA9IChkKSA9PiB7CgkJCQkJCQlpZiAoISghdGhpcy5yZWNvcmRpbmcgfHwgZC5yZXBlYXQpKSB7CgkJCQkJCQkJaWYgKGQucHJldmVudERlZmF1bHQoKSwgZC5jb2RlID09PSAiRXNjYXBlIikgewoJCQkJCQkJCQl0aGlzLmtleSA9IG51bGwsIHRoaXMuYnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5rZXlUZXh0LCB0aGlzLnN0b3BSZWNvcmRpbmdLZXlzKCk7CgkJCQkJCQkJCXJldHVybjsKCQkJCQkJCQl9CgkJCQkJCQkJdGhpcy5wcmVzc2VkS2V5cy5hZGQoZC5jb2RlKSwgdGhpcy5idXR0b24udGV4dENvbnRlbnQgPSBmb3JtYXRLZXlzQ29tYm8odGhpcy5wcmVzc2VkS2V5cyk7CgkJCQkJCQl9CgkJCQkJCX07CgkJCQkJCWtleXVwT3JCbHVySGFuZGxlID0gKCkgPT4gewoJCQkJCQkJdGhpcy5yZWNvcmRpbmcgJiYgKHRoaXMua2V5ID0gZm9ybWF0S2V5c0NvbWJvKHRoaXMucHJlc3NlZEtleXMpLCB0aGlzLnN0b3BSZWNvcmRpbmdLZXlzKCkpOwoJCQkJCQl9OwoJCQkJCQljcmVhdGVFbGVtZW50cygpIHsKCQkJCQkJCWxldCBkID0gXy5BLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC1ob3RrZXkiXSksIGYgPSBfLkEuY3JlYXRlRWwoInZvdC1ibG9jayIsIFsidm90LWhvdGtleS1sYWJlbCJdKTsKCQkJCQkJCWYudGV4dENvbnRlbnQgPSB0aGlzLl9sYWJlbEh0bWw7CgkJCQkJCQlsZXQgcCA9IF8uQS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3QtaG90a2V5LWJ1dHRvbiJdKTsKCQkJCQkJCXJldHVybiBwLnRleHRDb250ZW50ID0gdGhpcy5rZXlUZXh0LCBwLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewoJCQkJCQkJCXAuZGF0YXNldC5zdGF0dXMgPSAiYWN0aXZlIiwgdGhpcy5yZWNvcmRpbmcgPSAhMCwgdGhpcy5wcmVzc2VkS2V5cy5jbGVhcigpLCB0aGlzLmJ1dHRvbi50ZXh0Q29udGVudCA9IGcuai5nZXQoIlByZXNzVGhlS2V5Q29tYmluYXRpb24iKSwgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIHRoaXMua2V5ZG93bkhhbmRsZSksIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIiwgdGhpcy5rZXl1cE9yQmx1ckhhbmRsZSksIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImJsdXIiLCB0aGlzLmtleXVwT3JCbHVySGFuZGxlKTsKCQkJCQkJCX0pLCBkLmFwcGVuZChmLCBwKSwgewoJCQkJCQkJCWNvbnRhaW5lcjogZCwKCQkJCQkJCQlidXR0b246IHAsCgkJCQkJCQkJbGFiZWw6IGYKCQkJCQkJCX07CgkJCQkJCX0KCQkJCQkJYWRkRXZlbnRMaXN0ZW5lcihkLCBmKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5vbkNoYW5nZS5hZGRMaXN0ZW5lcihmKSwgdGhpczsKCQkJCQkJfQoJCQkJCQlyZW1vdmVFdmVudExpc3RlbmVyKGQsIGYpIHsKCQkJCQkJCXJldHVybiB0aGlzLm9uQ2hhbmdlLnJlbW92ZUxpc3RlbmVyKGYpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCXNldCBoaWRkZW4oZCkgewoJCQkJCQkJdGhpcy5jb250YWluZXIuaGlkZGVuID0gZDsKCQkJCQkJfQoJCQkJCQlnZXQgaGlkZGVuKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuY29udGFpbmVyLmhpZGRlbjsKCQkJCQkJfQoJCQkJCQlnZXQga2V5KCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuX2tleTsKCQkJCQkJfQoJCQkJCQlnZXQga2V5VGV4dCgpIHsKCQkJCQkJCXJldHVybiB0aGlzLl9rZXkgPyB0aGlzLl9rZXk/LnJlcGxhY2UoIktleSIsICIiKS5yZXBsYWNlKCJEaWdpdCIsICIiKSA6IGcuai5nZXQoIk5vbmUiKTsKCQkJCQkJfQoJCQkJCQlzZXQga2V5KGQpIHsKCQkJCQkJCXRoaXMuX2tleSAhPT0gZCAmJiAodGhpcy5fa2V5ID0gZCwgdGhpcy5idXR0b24udGV4dENvbnRlbnQgPSB0aGlzLmtleVRleHQsIHRoaXMub25DaGFuZ2UuZGlzcGF0Y2godGhpcy5fa2V5KSk7CgkJCQkJCX0KCQkJCQl9CgkJCQkJZnVuY3Rpb24gZm9ybWF0S2V5c0NvbWJvKGQpIHsKCQkJCQkJbGV0IGYgPSBBcnJheS5pc0FycmF5KGQpID8gZCA6IEFycmF5LmZyb20oZCk7CgkJCQkJCXJldHVybiBmLm1hcCgoZCkgPT4gZC5yZXBsYWNlKCJLZXkiLCAiIikucmVwbGFjZSgiRGlnaXQiLCAiIikpLmpvaW4oIisiKTsKCQkJCQl9CgkJCQkJbSgpOwoJCQkJfSBjYXRjaCAoZCkgewoJCQkJCW0oZCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJIi4vc3JjL3VpL2NvbXBvbmVudHMvbGFiZWwudHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgeyBBOiAoKSA9PiBMYWJlbCB9KTsKCQkJCQl2YXIgaCA9IHAoIi4vbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpdC1odG1sLmpzIiksIGcgPSBwKCIuL3NyYy91aS5qcyIpLCBfID0gZChbZ10pOwoJCQkJCWcgPSAoXy50aGVuID8gKGF3YWl0IF8pKCkgOiBfKVswXTsKCQkJCQljbGFzcyBMYWJlbCB7CgkJCQkJCWNvbnRhaW5lcjsKCQkJCQkJaWNvbjsKCQkJCQkJX2xhYmVsVGV4dDsKCQkJCQkJX2ljb247CgkJCQkJCWNvbnN0cnVjdG9yKHsgbGFiZWxUZXh0OiBkLCBpY29uOiBmIH0pIHsKCQkJCQkJCXRoaXMuX2xhYmVsVGV4dCA9IGQsIHRoaXMuX2ljb24gPSBmOwoJCQkJCQkJbGV0IHAgPSB0aGlzLmNyZWF0ZUVsZW1lbnRzKCk7CgkJCQkJCQl0aGlzLmNvbnRhaW5lciA9IHAuY29udGFpbmVyLCB0aGlzLmljb24gPSBwLmljb247CgkJCQkJCX0KCQkJCQkJY3JlYXRlRWxlbWVudHMoKSB7CgkJCQkJCQlsZXQgZCA9IGcuQS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3QtbGFiZWwiXSk7CgkJCQkJCQlkLnRleHRDb250ZW50ID0gdGhpcy5fbGFiZWxUZXh0OwoJCQkJCQkJbGV0IGYgPSBnLkEuY3JlYXRlRWwoInZvdC1ibG9jayIsIFsidm90LWxhYmVsLWljb24iXSk7CgkJCQkJCQlyZXR1cm4gdGhpcy5faWNvbiAmJiAoMCwgaC5YWCkodGhpcy5faWNvbiwgZiksIGQuYXBwZW5kQ2hpbGQoZiksIHsKCQkJCQkJCQljb250YWluZXI6IGQsCgkJCQkJCQkJaWNvbjogZgoJCQkJCQkJfTsKCQkJCQkJfQoJCQkJCQlzZXQgaGlkZGVuKGQpIHsKCQkJCQkJCXRoaXMuY29udGFpbmVyLmhpZGRlbiA9IGQ7CgkJCQkJCX0KCQkJCQkJZ2V0IGhpZGRlbigpIHsKCQkJCQkJCXJldHVybiB0aGlzLmNvbnRhaW5lci5oaWRkZW47CgkJCQkJCX0KCQkJCQl9CgkJCQkJbSgpOwoJCQkJfSBjYXRjaCAoZCkgewoJCQkJCW0oZCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJIi4vc3JjL3VpL2NvbXBvbmVudHMvbGFuZ3VhZ2VQYWlyU2VsZWN0LnRzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmEoZCwgYXN5bmMgKGQsIG0pID0+IHsKCQkJCXRyeSB7CgkJCQkJcC5kKGYsIHsgQTogKCkgPT4gTGFuZ3VhZ2VQYWlyU2VsZWN0IH0pOwoJCQkJCXZhciBoID0gcCgiLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGl0LWh0bWwuanMiKSwgZyA9IHAoIi4vc3JjL2xvY2FsaXphdGlvbi9sb2NhbGl6YXRpb25Qcm92aWRlci50cyIpLCBfID0gcCgiLi9zcmMvdWkuanMiKSwgdiA9IHAoIi4vc3JjL3VpL2ljb25zLnRzIiksIGIgPSBwKCIuL3NyYy91aS9jb21wb25lbnRzL3NlbGVjdC50cyIpLCB4ID0gZChbCgkJCQkJCWcsCgkJCQkJCV8sCgkJCQkJCWIKCQkJCQldKTsKCQkJCQlbZywgXywgYl0gPSB4LnRoZW4gPyAoYXdhaXQgeCkoKSA6IHg7CgkJCQkJY2xhc3MgTGFuZ3VhZ2VQYWlyU2VsZWN0IHsKCQkJCQkJY29udGFpbmVyOwoJCQkJCQlmcm9tU2VsZWN0OwoJCQkJCQlkaXJlY3Rpb25JY29uOwoJCQkJCQl0b1NlbGVjdDsKCQkJCQkJZGlhbG9nUGFyZW50OwoJCQkJCQlfZnJvbVNlbGVjdFRpdGxlOwoJCQkJCQlfZnJvbURpYWxvZ1RpdGxlOwoJCQkJCQlfZnJvbUl0ZW1zOwoJCQkJCQlfdG9TZWxlY3RUaXRsZTsKCQkJCQkJX3RvRGlhbG9nVGl0bGU7CgkJCQkJCV90b0l0ZW1zOwoJCQkJCQljb25zdHJ1Y3Rvcih7IGZyb206IHsgc2VsZWN0VGl0bGU6IGQgPSBnLmouZ2V0KCJ2aWRlb0xhbmd1YWdlIiksIGRpYWxvZ1RpdGxlOiBmID0gZy5qLmdldCgidmlkZW9MYW5ndWFnZSIpLCBpdGVtczogcCB9LCB0bzogeyBzZWxlY3RUaXRsZTogbSA9IGcuai5nZXQoInRyYW5zbGF0aW9uTGFuZ3VhZ2UiKSwgZGlhbG9nVGl0bGU6IGggPSBnLmouZ2V0KCJ0cmFuc2xhdGlvbkxhbmd1YWdlIiksIGl0ZW1zOiBfIH0sIGRpYWxvZ1BhcmVudDogdiA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB9KSB7CgkJCQkJCQl0aGlzLl9mcm9tU2VsZWN0VGl0bGUgPSBkLCB0aGlzLl9mcm9tRGlhbG9nVGl0bGUgPSBmLCB0aGlzLl9mcm9tSXRlbXMgPSBwLCB0aGlzLl90b1NlbGVjdFRpdGxlID0gbSwgdGhpcy5fdG9EaWFsb2dUaXRsZSA9IGgsIHRoaXMuX3RvSXRlbXMgPSBfLCB0aGlzLmRpYWxvZ1BhcmVudCA9IHY7CgkJCQkJCQlsZXQgYiA9IHRoaXMuY3JlYXRlRWxlbWVudHMoKTsKCQkJCQkJCXRoaXMuY29udGFpbmVyID0gYi5jb250YWluZXIsIHRoaXMuZnJvbVNlbGVjdCA9IGIuZnJvbVNlbGVjdCwgdGhpcy5kaXJlY3Rpb25JY29uID0gYi5kaXJlY3Rpb25JY29uLCB0aGlzLnRvU2VsZWN0ID0gYi50b1NlbGVjdDsKCQkJCQkJfQoJCQkJCQljcmVhdGVFbGVtZW50cygpIHsKCQkJCQkJCWxldCBkID0gXy5BLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC1sYW5nLXNlbGVjdCJdKSwgZiA9IG5ldyBiLkEoewoJCQkJCQkJCXNlbGVjdFRpdGxlOiB0aGlzLl9mcm9tU2VsZWN0VGl0bGUsCgkJCQkJCQkJZGlhbG9nVGl0bGU6IHRoaXMuX2Zyb21EaWFsb2dUaXRsZSwKCQkJCQkJCQlpdGVtczogdGhpcy5fZnJvbUl0ZW1zLAoJCQkJCQkJCWRpYWxvZ1BhcmVudDogdGhpcy5kaWFsb2dQYXJlbnQKCQkJCQkJCX0pLCBwID0gXy5BLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC1sYW5nLXNlbGVjdC1pY29uIl0pOwoJCQkJCQkJKDAsIGguWFgpKHYuejMsIHApOwoJCQkJCQkJbGV0IG0gPSBuZXcgYi5BKHsKCQkJCQkJCQlzZWxlY3RUaXRsZTogdGhpcy5fdG9TZWxlY3RUaXRsZSwKCQkJCQkJCQlkaWFsb2dUaXRsZTogdGhpcy5fdG9EaWFsb2dUaXRsZSwKCQkJCQkJCQlpdGVtczogdGhpcy5fdG9JdGVtcywKCQkJCQkJCQlkaWFsb2dQYXJlbnQ6IHRoaXMuZGlhbG9nUGFyZW50CgkJCQkJCQl9KTsKCQkJCQkJCXJldHVybiBkLmFwcGVuZChmLmNvbnRhaW5lciwgcCwgbS5jb250YWluZXIpLCB7CgkJCQkJCQkJY29udGFpbmVyOiBkLAoJCQkJCQkJCWZyb21TZWxlY3Q6IGYsCgkJCQkJCQkJZGlyZWN0aW9uSWNvbjogcCwKCQkJCQkJCQl0b1NlbGVjdDogbQoJCQkJCQkJfTsKCQkJCQkJfQoJCQkJCQlzZXRTZWxlY3RlZFZhbHVlcyhkLCBmKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5mcm9tU2VsZWN0LnNldFNlbGVjdGVkVmFsdWUoZCksIHRoaXMudG9TZWxlY3Quc2V0U2VsZWN0ZWRWYWx1ZShmKSwgdGhpczsKCQkJCQkJfQoJCQkJCQl1cGRhdGVJdGVtcyhkLCBmKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5fZnJvbUl0ZW1zID0gZCwgdGhpcy5fdG9JdGVtcyA9IGYsIHRoaXMuZnJvbVNlbGVjdCA9IHRoaXMuZnJvbVNlbGVjdC51cGRhdGVJdGVtcyhkKSwgdGhpcy50b1NlbGVjdCA9IHRoaXMudG9TZWxlY3QudXBkYXRlSXRlbXMoZiksIHRoaXM7CgkJCQkJCX0KCQkJCQl9CgkJCQkJbSgpOwoJCQkJfSBjYXRjaCAoZCkgewoJCQkJCW0oZCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJIi4vc3JjL3VpL2NvbXBvbmVudHMvc2VsZWN0LnRzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmEoZCwgYXN5bmMgKGQsIG0pID0+IHsKCQkJCXRyeSB7CgkJCQkJcC5kKGYsIHsgQTogKCkgPT4gU2VsZWN0IH0pOwoJCQkJCXZhciBoID0gcCgiLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGl0LWh0bWwuanMiKSwgZyA9IHAoIi4vc3JjL2NvcmUvZXZlbnRJbXBsLnRzIiksIF8gPSBwKCIuL3NyYy9sb2NhbGl6YXRpb24vbG9jYWxpemF0aW9uUHJvdmlkZXIudHMiKSwgdiA9IHAoIi4vc3JjL3VpLmpzIiksIGIgPSBwKCIuL3NyYy91aS9pY29ucy50cyIpLCB4ID0gcCgiLi9zcmMvdWkvY29tcG9uZW50cy9kaWFsb2cudHMiKSwgQyA9IHAoIi4vc3JjL3VpL2NvbXBvbmVudHMvdGV4dGZpZWxkLnRzIiksIHcgPSBkKFsKCQkJCQkJXywKCQkJCQkJdiwKCQkJCQkJeCwKCQkJCQkJQwoJCQkJCV0pOwoJCQkJCVtfLCB2LCB4LCBDXSA9IHcudGhlbiA/IChhd2FpdCB3KSgpIDogdzsKCQkJCQljbGFzcyBTZWxlY3QgewoJCQkJCQljb250YWluZXI7CgkJCQkJCW91dGVyOwoJCQkJCQlhcnJvd0ljb247CgkJCQkJCXRpdGxlOwoJCQkJCQlkaWFsb2dQYXJlbnQ7CgkJCQkJCWxhYmVsRWxlbWVudDsKCQkJCQkJX3NlbGVjdFRpdGxlOwoJCQkJCQlfZGlhbG9nVGl0bGU7CgkJCQkJCW11bHRpU2VsZWN0OwoJCQkJCQlfaXRlbXM7CgkJCQkJCWlzTG9hZGluZyA9ICExOwoJCQkJCQlpc0RpYWxvZ09wZW4gPSAhMTsKCQkJCQkJb25TZWxlY3RJdGVtID0gbmV3IGcuWigpOwoJCQkJCQlvbkJlZm9yZU9wZW4gPSBuZXcgZy5aKCk7CgkJCQkJCWNvbnRlbnRMaXN0OwoJCQkJCQlzZWxlY3RlZEl0ZW1zID0gW107CgkJCQkJCXNlbGVjdGVkVmFsdWVzOwoJCQkJCQljb25zdHJ1Y3Rvcih7IHNlbGVjdFRpdGxlOiBkLCBkaWFsb2dUaXRsZTogZiwgaXRlbXM6IHAsIGxhYmVsRWxlbWVudDogbSwgZGlhbG9nUGFyZW50OiBoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBtdWx0aVNlbGVjdDogZyB9KSB7CgkJCQkJCQl0aGlzLl9zZWxlY3RUaXRsZSA9IGQsIHRoaXMuX2RpYWxvZ1RpdGxlID0gZiwgdGhpcy5faXRlbXMgPSBwLCB0aGlzLm11bHRpU2VsZWN0ID0gZyA/PyAhMSwgdGhpcy5sYWJlbEVsZW1lbnQgPSBtLCB0aGlzLmRpYWxvZ1BhcmVudCA9IGgsIHRoaXMuc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLmNhbGNTZWxlY3RlZFZhbHVlcygpOwoJCQkJCQkJbGV0IF8gPSB0aGlzLmNyZWF0ZUVsZW1lbnRzKCk7CgkJCQkJCQl0aGlzLmNvbnRhaW5lciA9IF8uY29udGFpbmVyLCB0aGlzLm91dGVyID0gXy5vdXRlciwgdGhpcy5hcnJvd0ljb24gPSBfLmFycm93SWNvbiwgdGhpcy50aXRsZSA9IF8udGl0bGU7CgkJCQkJCX0KCQkJCQkJc3RhdGljIGdlbkxhbmd1YWdlSXRlbXMoZCwgZikgewoJCQkJCQkJcmV0dXJuIGQubWFwKChkKSA9PiB7CgkJCQkJCQkJbGV0IHAgPSBgbGFuZ3MuJHtkfWAsIG0gPSBfLmouZ2V0KHApOwoJCQkJCQkJCXJldHVybiB7CgkJCQkJCQkJCWxhYmVsOiBtID09PSBwID8gZC50b1VwcGVyQ2FzZSgpIDogbSwKCQkJCQkJCQkJdmFsdWU6IGQsCgkJCQkJCQkJCXNlbGVjdGVkOiBmID09PSBkCgkJCQkJCQkJfTsKCQkJCQkJCX0pOwoJCQkJCQl9CgkJCQkJCW11bHRpU2VsZWN0SXRlbUhhbmRsZSA9IChkLCBmKSA9PiB7CgkJCQkJCQlsZXQgcCA9IGYudmFsdWU7CgkJCQkJCQl0aGlzLnNlbGVjdGVkVmFsdWVzLmhhcyhwKSAmJiB0aGlzLnNlbGVjdGVkVmFsdWVzLnNpemUgPiAxID8gKHRoaXMuc2VsZWN0ZWRWYWx1ZXMuZGVsZXRlKHApLCBmLnNlbGVjdGVkID0gITEpIDogKHRoaXMuc2VsZWN0ZWRWYWx1ZXMuYWRkKHApLCBmLnNlbGVjdGVkID0gITApLCBkLmRhdGFzZXQudm90U2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkVmFsdWVzLmhhcyhwKS50b1N0cmluZygpLCB0aGlzLnVwZGF0ZVNlbGVjdGVkU3RhdGUoKSwgdGhpcy5vblNlbGVjdEl0ZW0uZGlzcGF0Y2goQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkVmFsdWVzKSk7CgkJCQkJCX07CgkJCQkJCXNpbmdsZVNlbGVjdEl0ZW1IYW5kbGUgPSAoZCkgPT4gewoJCQkJCQkJbGV0IGYgPSBkLnZhbHVlOwoJCQkJCQkJdGhpcy5zZWxlY3RlZFZhbHVlcyA9IG5ldyBTZXQoW2ZdKTsKCQkJCQkJCWZvciAobGV0IGQgb2YgdGhpcy5zZWxlY3RlZEl0ZW1zKSBkLmRhdGFzZXQudm90U2VsZWN0ZWQgPSAoZC5kYXRhc2V0LnZvdFZhbHVlID09PSBmKS50b1N0cmluZygpOwoJCQkJCQkJZm9yIChsZXQgZCBvZiB0aGlzLl9pdGVtcykgZC5zZWxlY3RlZCA9IGQudmFsdWUgPT09IGY7CgkJCQkJCQl0aGlzLnVwZGF0ZVRpdGxlKCksIHRoaXMub25TZWxlY3RJdGVtLmRpc3BhdGNoKGYpOwoJCQkJCQl9OwoJCQkJCQljcmVhdGVEaWFsb2dDb250ZW50TGlzdCgpIHsKCQkJCQkJCWxldCBkID0gdi5BLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC1zZWxlY3QtY29udGVudC1saXN0Il0pOwoJCQkJCQkJZm9yIChsZXQgZiBvZiB0aGlzLl9pdGVtcykgewoJCQkJCQkJCWxldCBwID0gdi5BLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC1zZWxlY3QtY29udGVudC1pdGVtIl0pOwoJCQkJCQkJCXAudGV4dENvbnRlbnQgPSBmLmxhYmVsLCBwLmRhdGFzZXQudm90U2VsZWN0ZWQgPSBmLnNlbGVjdGVkID09PSAhMCA/ICJ0cnVlIiA6ICJmYWxzZSIsIHAuZGF0YXNldC52b3RWYWx1ZSA9IGYudmFsdWUsIGYuZGlzYWJsZWQgJiYgKHAuaW5lcnQgPSAhMCksIHAuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoZCkgPT4gewoJCQkJCQkJCQlpZiAoIWQudGFyZ2V0LmluZXJ0KSByZXR1cm4gdGhpcy5tdWx0aVNlbGVjdCA/IHRoaXMubXVsdGlTZWxlY3RJdGVtSGFuZGxlKHAsIGYpIDogdGhpcy5zaW5nbGVTZWxlY3RJdGVtSGFuZGxlKGYpOwoJCQkJCQkJCX0pLCBkLmFwcGVuZENoaWxkKHApOwoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIHRoaXMuc2VsZWN0ZWRJdGVtcyA9IE9iamVjdC52YWx1ZXMoZC5jaGlsZE5vZGVzKSwgZDsKCQkJCQkJfQoJCQkJCQljcmVhdGVFbGVtZW50cygpIHsKCQkJCQkJCWxldCBkID0gdi5BLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC1zZWxlY3QiXSk7CgkJCQkJCQl0aGlzLmxhYmVsRWxlbWVudCAmJiBkLmFwcGVuZCh0aGlzLmxhYmVsRWxlbWVudCk7CgkJCQkJCQlsZXQgZiA9IHYuQS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3Qtc2VsZWN0LW91dGVyIl0pLCBwID0gdi5BLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC1zZWxlY3QtdGl0bGUiXSk7CgkJCQkJCQlwLnRleHRDb250ZW50ID0gdGhpcy52aXNpYmxlVGV4dDsKCQkJCQkJCWxldCBtID0gdi5BLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC1zZWxlY3QtYXJyb3ctaWNvbiJdKTsKCQkJCQkJCXJldHVybiAoMCwgaC5YWCkoYi5tUSwgbSksIGYuYXBwZW5kKHAsIG0pLCBmLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewoJCQkJCQkJCWlmICghKHRoaXMuaXNMb2FkaW5nIHx8IHRoaXMuaXNEaWFsb2dPcGVuKSkgdHJ5IHsKCQkJCQkJCQkJdGhpcy5pc0xvYWRpbmcgPSAhMDsKCQkJCQkJCQkJbGV0IGQgPSBuZXcgeC5BKHsKCQkJCQkJCQkJCXRpdGxlSHRtbDogdGhpcy5fZGlhbG9nVGl0bGUsCgkJCQkJCQkJCQlpc1RlbXA6ICEwCgkJCQkJCQkJCX0pOwoJCQkJCQkJCQl0aGlzLm9uQmVmb3JlT3Blbi5kaXNwYXRjaChkKSwgdGhpcy5kaWFsb2dQYXJlbnQuYXBwZW5kQ2hpbGQoZC5jb250YWluZXIpOwoJCQkJCQkJCQlsZXQgZiA9IG5ldyBDLkEoeyBsYWJlbEh0bWw6IF8uai5nZXQoInNlYXJjaEZpZWxkIikgfSk7CgkJCQkJCQkJCWYuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLCAoZCkgPT4gewoJCQkJCQkJCQkJZm9yIChsZXQgZiBvZiB0aGlzLnNlbGVjdGVkSXRlbXMpIGYuaGlkZGVuID0gIWYudGV4dENvbnRlbnQ/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZCk7CgkJCQkJCQkJCX0pLCB0aGlzLmNvbnRlbnRMaXN0ID0gdGhpcy5jcmVhdGVEaWFsb2dDb250ZW50TGlzdCgpLCBkLmJvZHlDb250YWluZXIuYXBwZW5kKGYuY29udGFpbmVyLCB0aGlzLmNvbnRlbnRMaXN0KSwgZC5hZGRFdmVudExpc3RlbmVyKCJjbG9zZSIsICgpID0+IHsKCQkJCQkJCQkJCXRoaXMuaXNEaWFsb2dPcGVuID0gITEsIHRoaXMuc2VsZWN0ZWRJdGVtcyA9IFtdOwoJCQkJCQkJCQl9KTsKCQkJCQkJCQl9IGZpbmFsbHkgewoJCQkJCQkJCQl0aGlzLmlzTG9hZGluZyA9ICExOwoJCQkJCQkJCX0KCQkJCQkJCX0pLCBkLmFwcGVuZENoaWxkKGYpLCB7CgkJCQkJCQkJY29udGFpbmVyOiBkLAoJCQkJCQkJCW91dGVyOiBmLAoJCQkJCQkJCWFycm93SWNvbjogbSwKCQkJCQkJCQl0aXRsZTogcAoJCQkJCQkJfTsKCQkJCQkJfQoJCQkJCQljYWxjU2VsZWN0ZWRWYWx1ZXMoKSB7CgkJCQkJCQlyZXR1cm4gbmV3IFNldCh0aGlzLl9pdGVtcy5maWx0ZXIoKGQpID0+IGQuc2VsZWN0ZWQpLm1hcCgoZCkgPT4gZC52YWx1ZSkpOwoJCQkJCQl9CgkJCQkJCWFkZEV2ZW50TGlzdGVuZXIoZCwgZikgewoJCQkJCQkJcmV0dXJuIGQgPT09ICJzZWxlY3RJdGVtIiA/IHRoaXMub25TZWxlY3RJdGVtLmFkZExpc3RlbmVyKGYpIDogZCA9PT0gImJlZm9yZU9wZW4iICYmIHRoaXMub25CZWZvcmVPcGVuLmFkZExpc3RlbmVyKGYpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCXJlbW92ZUV2ZW50TGlzdGVuZXIoZCwgZikgewoJCQkJCQkJcmV0dXJuIGQgPT09ICJzZWxlY3RJdGVtIiA/IHRoaXMub25TZWxlY3RJdGVtLnJlbW92ZUxpc3RlbmVyKGYpIDogZCA9PT0gImJlZm9yZU9wZW4iICYmIHRoaXMub25CZWZvcmVPcGVuLnJlbW92ZUxpc3RlbmVyKGYpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCXVwZGF0ZVRpdGxlKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMudGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLnZpc2libGVUZXh0LCB0aGlzOwoJCQkJCQl9CgkJCQkJCXVwZGF0ZVNlbGVjdGVkU3RhdGUoKSB7CgkJCQkJCQlpZiAodGhpcy5zZWxlY3RlZEl0ZW1zLmxlbmd0aCA+IDApIGZvciAobGV0IGQgb2YgdGhpcy5zZWxlY3RlZEl0ZW1zKSB7CgkJCQkJCQkJbGV0IGYgPSBkLmRhdGFzZXQudm90VmFsdWU7CgkJCQkJCQkJaWYgKCFmKSBjb250aW51ZTsKCQkJCQkJCQlkLmRhdGFzZXQudm90U2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkVmFsdWVzLmhhcyhmKS50b1N0cmluZygpOwoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIHRoaXMudXBkYXRlVGl0bGUoKSwgdGhpczsKCQkJCQkJfQoJCQkJCQlzZXRTZWxlY3RlZFZhbHVlKGQpIHsKCQkJCQkJCXRoaXMubXVsdGlTZWxlY3QgPyB0aGlzLnNlbGVjdGVkVmFsdWVzID0gbmV3IFNldChBcnJheS5pc0FycmF5KGQpID8gZC5tYXAoU3RyaW5nKSA6IFtTdHJpbmcoZCldKSA6IHRoaXMuc2VsZWN0ZWRWYWx1ZXMgPSBuZXcgU2V0KFtTdHJpbmcoZCldKTsKCQkJCQkJCWZvciAobGV0IGQgb2YgdGhpcy5faXRlbXMpIGQuc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkVmFsdWVzLmhhcyhTdHJpbmcoZC52YWx1ZSkpOwoJCQkJCQkJcmV0dXJuIHRoaXMudXBkYXRlU2VsZWN0ZWRTdGF0ZSgpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCXVwZGF0ZUl0ZW1zKGQpIHsKCQkJCQkJCXRoaXMuX2l0ZW1zID0gZCwgdGhpcy5zZWxlY3RlZFZhbHVlcyA9IHRoaXMuY2FsY1NlbGVjdGVkVmFsdWVzKCksIHRoaXMudXBkYXRlU2VsZWN0ZWRTdGF0ZSgpOwoJCQkJCQkJbGV0IGYgPSB0aGlzLmNvbnRlbnRMaXN0Py5wYXJlbnRFbGVtZW50OwoJCQkJCQkJaWYgKCF0aGlzLmNvbnRlbnRMaXN0IHx8ICFmKSByZXR1cm4gdGhpczsKCQkJCQkJCWxldCBwID0gdGhpcy5jb250ZW50TGlzdDsKCQkJCQkJCXJldHVybiB0aGlzLmNvbnRlbnRMaXN0ID0gdGhpcy5jcmVhdGVEaWFsb2dDb250ZW50TGlzdCgpLCBmLnJlcGxhY2VDaGlsZCh0aGlzLmNvbnRlbnRMaXN0LCBwKSwgdGhpczsKCQkJCQkJfQoJCQkJCQlnZXQgdmlzaWJsZVRleHQoKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5tdWx0aVNlbGVjdCA/IHRoaXMuX2l0ZW1zLmZpbHRlcigoZCkgPT4gdGhpcy5zZWxlY3RlZFZhbHVlcy5oYXMoZC52YWx1ZSkpLm1hcCgoZCkgPT4gZC5sYWJlbCkuam9pbigiLCAiKSA/PyB0aGlzLl9zZWxlY3RUaXRsZSA6IHRoaXMuX2l0ZW1zLmZpbmQoKGQpID0+IGQuc2VsZWN0ZWQpPy5sYWJlbCA/PyB0aGlzLl9zZWxlY3RUaXRsZTsKCQkJCQkJfQoJCQkJCQlzZXQgc2VsZWN0VGl0bGUoZCkgewoJCQkJCQkJdGhpcy5fc2VsZWN0VGl0bGUgPSBkLCB0aGlzLnVwZGF0ZVRpdGxlKCk7CgkJCQkJCX0KCQkJCQkJc2V0IGhpZGRlbihkKSB7CgkJCQkJCQl0aGlzLmNvbnRhaW5lci5oaWRkZW4gPSBkOwoJCQkJCQl9CgkJCQkJCWdldCBoaWRkZW4oKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5jb250YWluZXIuaGlkZGVuOwoJCQkJCQl9CgkJCQkJfQoJCQkJCW0oKTsKCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQltKGQpOwoJCQkJfQoJCQl9KTsKCQl9LAoJCSIuL3NyYy91aS9jb21wb25lbnRzL3NsaWRlci50cyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5hKGQsIGFzeW5jIChkLCBtKSA9PiB7CgkJCQl0cnkgewoJCQkJCXAuZChmLCB7IEE6ICgpID0+IFNsaWRlciB9KTsKCQkJCQl2YXIgaCA9IHAoIi4vbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpdC1odG1sLmpzIiksIGcgPSBwKCIuL3NyYy9jb3JlL2V2ZW50SW1wbC50cyIpLCBfID0gcCgiLi9zcmMvdWkuanMiKSwgdiA9IGQoW19dKTsKCQkJCQlfID0gKHYudGhlbiA/IChhd2FpdCB2KSgpIDogdilbMF07CgkJCQkJY2xhc3MgU2xpZGVyIHsKCQkJCQkJY29udGFpbmVyOwoJCQkJCQlpbnB1dDsKCQkJCQkJbGFiZWw7CgkJCQkJCW9uSW5wdXQgPSBuZXcgZy5aKCk7CgkJCQkJCV9sYWJlbEh0bWw7CgkJCQkJCV92YWx1ZTsKCQkJCQkJX21pbjsKCQkJCQkJX21heDsKCQkJCQkJX3N0ZXA7CgkJCQkJCWNvbnN0cnVjdG9yKHsgbGFiZWxIdG1sOiBkLCB2YWx1ZTogZiA9IDUwLCBtaW46IHAgPSAwLCBtYXg6IG0gPSAxMDAsIHN0ZXA6IGggPSAxIH0pIHsKCQkJCQkJCXRoaXMuX2xhYmVsSHRtbCA9IGQsIHRoaXMuX3ZhbHVlID0gZiwgdGhpcy5fbWluID0gcCwgdGhpcy5fbWF4ID0gbSwgdGhpcy5fc3RlcCA9IGg7CgkJCQkJCQlsZXQgZyA9IHRoaXMuY3JlYXRlRWxlbWVudHMoKTsKCQkJCQkJCXRoaXMuY29udGFpbmVyID0gZy5jb250YWluZXIsIHRoaXMuaW5wdXQgPSBnLmlucHV0LCB0aGlzLmxhYmVsID0gZy5sYWJlbCwgdGhpcy51cGRhdGUoKTsKCQkJCQkJfQoJCQkJCQl1cGRhdGVQcm9ncmVzcygpIHsKCQkJCQkJCWxldCBkID0gKHRoaXMuX3ZhbHVlIC0gdGhpcy5fbWluKSAvICh0aGlzLl9tYXggLSB0aGlzLl9taW4pOwoJCQkJCQkJcmV0dXJuIHRoaXMuY29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KCItLXZvdC1wcm9ncmVzcyIsIGQudG9TdHJpbmcoKSksIHRoaXM7CgkJCQkJCX0KCQkJCQkJdXBkYXRlKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuX3ZhbHVlID0gdGhpcy5pbnB1dC52YWx1ZUFzTnVtYmVyLCB0aGlzLl9taW4gPSArdGhpcy5pbnB1dC5taW4sIHRoaXMuX21heCA9ICt0aGlzLmlucHV0Lm1heCwgdGhpcy51cGRhdGVQcm9ncmVzcygpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCWNyZWF0ZUVsZW1lbnRzKCkgewoJCQkJCQkJbGV0IGQgPSBfLkEuY3JlYXRlRWwoInZvdC1ibG9jayIsIFsidm90LXNsaWRlciJdKSwgZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCQkJCQlmLnR5cGUgPSAicmFuZ2UiLCBmLm1pbiA9IHRoaXMuX21pbi50b1N0cmluZygpLCBmLm1heCA9IHRoaXMuX21heC50b1N0cmluZygpLCBmLnN0ZXAgPSB0aGlzLl9zdGVwLnRvU3RyaW5nKCksIGYudmFsdWUgPSB0aGlzLl92YWx1ZS50b1N0cmluZygpOwoJCQkJCQkJbGV0IHAgPSBfLkEuY3JlYXRlRWwoInNwYW4iKTsKCQkJCQkJCXJldHVybiAoMCwgaC5YWCkodGhpcy5fbGFiZWxIdG1sLCBwKSwgZC5hcHBlbmQoZiwgcCksIGYuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLCAoKSA9PiB7CgkJCQkJCQkJdGhpcy51cGRhdGUoKSwgdGhpcy5vbklucHV0LmRpc3BhdGNoKHRoaXMuX3ZhbHVlLCAhMSk7CgkJCQkJCQl9KSwgewoJCQkJCQkJCWNvbnRhaW5lcjogZCwKCQkJCQkJCQlsYWJlbDogcCwKCQkJCQkJCQlpbnB1dDogZgoJCQkJCQkJfTsKCQkJCQkJfQoJCQkJCQlhZGRFdmVudExpc3RlbmVyKGQsIGYpIHsKCQkJCQkJCXJldHVybiB0aGlzLm9uSW5wdXQuYWRkTGlzdGVuZXIoZiksIHRoaXM7CgkJCQkJCX0KCQkJCQkJcmVtb3ZlRXZlbnRMaXN0ZW5lcihkLCBmKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5vbklucHV0LnJlbW92ZUxpc3RlbmVyKGYpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCWdldCB2YWx1ZSgpIHsKCQkJCQkJCXJldHVybiB0aGlzLl92YWx1ZTsKCQkJCQkJfQoJCQkJCQlzZXQgdmFsdWUoZCkgewoJCQkJCQkJdGhpcy5fdmFsdWUgPSBkLCB0aGlzLmlucHV0LnZhbHVlID0gZC50b1N0cmluZygpLCB0aGlzLnVwZGF0ZVByb2dyZXNzKCksIHRoaXMub25JbnB1dC5kaXNwYXRjaCh0aGlzLl92YWx1ZSwgITApOwoJCQkJCQl9CgkJCQkJCWdldCBtaW4oKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5fbWluOwoJCQkJCQl9CgkJCQkJCXNldCBtaW4oZCkgewoJCQkJCQkJdGhpcy5fbWluID0gZCwgdGhpcy5pbnB1dC5taW4gPSB0aGlzLl9taW4udG9TdHJpbmcoKSwgdGhpcy51cGRhdGVQcm9ncmVzcygpOwoJCQkJCQl9CgkJCQkJCWdldCBtYXgoKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5fbWF4OwoJCQkJCQl9CgkJCQkJCXNldCBtYXgoZCkgewoJCQkJCQkJdGhpcy5fbWF4ID0gZCwgdGhpcy5pbnB1dC5tYXggPSB0aGlzLl9tYXgudG9TdHJpbmcoKSwgdGhpcy51cGRhdGVQcm9ncmVzcygpOwoJCQkJCQl9CgkJCQkJCWdldCBzdGVwKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuX3N0ZXA7CgkJCQkJCX0KCQkJCQkJc2V0IHN0ZXAoZCkgewoJCQkJCQkJdGhpcy5fc3RlcCA9IGQsIHRoaXMuaW5wdXQuc3RlcCA9IHRoaXMuX3N0ZXAudG9TdHJpbmcoKTsKCQkJCQkJfQoJCQkJCQlzZXQgaGlkZGVuKGQpIHsKCQkJCQkJCXRoaXMuY29udGFpbmVyLmhpZGRlbiA9IGQ7CgkJCQkJCX0KCQkJCQkJZ2V0IGhpZGRlbigpIHsKCQkJCQkJCXJldHVybiB0aGlzLmNvbnRhaW5lci5oaWRkZW47CgkJCQkJCX0KCQkJCQl9CgkJCQkJbSgpOwoJCQkJfSBjYXRjaCAoZCkgewoJCQkJCW0oZCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJIi4vc3JjL3VpL2NvbXBvbmVudHMvc2xpZGVyTGFiZWwudHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgeyBBOiAoKSA9PiBTbGlkZXJMYWJlbCB9KTsKCQkJCQl2YXIgaCA9IHAoIi4vc3JjL3VpLmpzIiksIGcgPSBkKFtoXSk7CgkJCQkJaCA9IChnLnRoZW4gPyAoYXdhaXQgZykoKSA6IGcpWzBdOwoJCQkJCWNsYXNzIFNsaWRlckxhYmVsIHsKCQkJCQkJY29udGFpbmVyOwoJCQkJCQlzdHJvbmc7CgkJCQkJCV9sYWJlbFRleHQ7CgkJCQkJCV9sYWJlbEVPTDsKCQkJCQkJX3ZhbHVlOwoJCQkJCQlfc3ltYm9sOwoJCQkJCQljb25zdHJ1Y3Rvcih7IGxhYmVsVGV4dDogZCwgbGFiZWxFT0w6IGYgPSAiIiwgdmFsdWU6IHAgPSA1MCwgc3ltYm9sOiBtID0gIiUiIH0pIHsKCQkJCQkJCXRoaXMuX2xhYmVsVGV4dCA9IGQsIHRoaXMuX2xhYmVsRU9MID0gZiwgdGhpcy5fdmFsdWUgPSBwLCB0aGlzLl9zeW1ib2wgPSBtOwoJCQkJCQkJbGV0IGggPSB0aGlzLmNyZWF0ZUVsZW1lbnRzKCk7CgkJCQkJCQl0aGlzLmNvbnRhaW5lciA9IGguY29udGFpbmVyLCB0aGlzLnN0cm9uZyA9IGguc3Ryb25nOwoJCQkJCQl9CgkJCQkJCWNyZWF0ZUVsZW1lbnRzKCkgewoJCQkJCQkJbGV0IGQgPSBoLkEuY3JlYXRlRWwoInZvdC1ibG9jayIsIFsidm90LXNsaWRlci1sYWJlbCJdKTsKCQkJCQkJCWQudGV4dENvbnRlbnQgPSB0aGlzLmxhYmVsVGV4dDsKCQkJCQkJCWxldCBmID0gaC5BLmNyZWF0ZUVsKCJzdHJvbmciLCBbInZvdC1zbGlkZXItbGFiZWwtdmFsdWUiXSk7CgkJCQkJCQlyZXR1cm4gZi50ZXh0Q29udGVudCA9IHRoaXMudmFsdWVUZXh0LCBkLmFwcGVuZChmKSwgewoJCQkJCQkJCWNvbnRhaW5lcjogZCwKCQkJCQkJCQlzdHJvbmc6IGYKCQkJCQkJCX07CgkJCQkJCX0KCQkJCQkJZ2V0IGxhYmVsVGV4dCgpIHsKCQkJCQkJCXJldHVybiBgJHt0aGlzLl9sYWJlbFRleHR9JHt0aGlzLl9sYWJlbEVPTH1gOwoJCQkJCQl9CgkJCQkJCWdldCB2YWx1ZVRleHQoKSB7CgkJCQkJCQlyZXR1cm4gYCR7dGhpcy5fdmFsdWV9JHt0aGlzLl9zeW1ib2x9YDsKCQkJCQkJfQoJCQkJCQlnZXQgdmFsdWUoKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5fdmFsdWU7CgkJCQkJCX0KCQkJCQkJc2V0IHZhbHVlKGQpIHsKCQkJCQkJCXRoaXMuX3ZhbHVlID0gZCwgdGhpcy5zdHJvbmcudGV4dENvbnRlbnQgPSB0aGlzLnZhbHVlVGV4dDsKCQkJCQkJfQoJCQkJCQlzZXQgaGlkZGVuKGQpIHsKCQkJCQkJCXRoaXMuY29udGFpbmVyLmhpZGRlbiA9IGQ7CgkJCQkJCX0KCQkJCQkJZ2V0IGhpZGRlbigpIHsKCQkJCQkJCXJldHVybiB0aGlzLmNvbnRhaW5lci5oaWRkZW47CgkJCQkJCX0KCQkJCQl9CgkJCQkJbSgpOwoJCQkJfSBjYXRjaCAoZCkgewoJCQkJCW0oZCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJIi4vc3JjL3VpL2NvbXBvbmVudHMvdGV4dGZpZWxkLnRzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmEoZCwgYXN5bmMgKGQsIG0pID0+IHsKCQkJCXRyeSB7CgkJCQkJcC5kKGYsIHsgQTogKCkgPT4gVGV4dGZpZWxkIH0pOwoJCQkJCXZhciBoID0gcCgiLi9zcmMvY29yZS9ldmVudEltcGwudHMiKSwgZyA9IHAoIi4vc3JjL3VpLmpzIiksIF8gPSBkKFtnXSk7CgkJCQkJZyA9IChfLnRoZW4gPyAoYXdhaXQgXykoKSA6IF8pWzBdOwoJCQkJCWNsYXNzIFRleHRmaWVsZCB7CgkJCQkJCWNvbnRhaW5lcjsKCQkJCQkJaW5wdXQ7CgkJCQkJCWxhYmVsOwoJCQkJCQlvbklucHV0ID0gbmV3IGguWigpOwoJCQkJCQlvbkNoYW5nZSA9IG5ldyBoLlooKTsKCQkJCQkJX2xhYmVsSHRtbDsKCQkJCQkJX211bHRpbGluZTsKCQkJCQkJX3BsYWNlaG9sZGVyOwoJCQkJCQlfdmFsdWU7CgkJCQkJCWNvbnN0cnVjdG9yKHsgbGFiZWxIdG1sOiBkID0gIiIsIHBsYWNlaG9sZGVyOiBmID0gIiIsIHZhbHVlOiBwID0gIiIsIG11bHRpbGluZTogbSA9ICExIH0pIHsKCQkJCQkJCXRoaXMuX2xhYmVsSHRtbCA9IGQsIHRoaXMuX211bHRpbGluZSA9IG0sIHRoaXMuX3BsYWNlaG9sZGVyID0gZiwgdGhpcy5fdmFsdWUgPSBwOwoJCQkJCQkJbGV0IGggPSB0aGlzLmNyZWF0ZUVsZW1lbnRzKCk7CgkJCQkJCQl0aGlzLmNvbnRhaW5lciA9IGguY29udGFpbmVyLCB0aGlzLmlucHV0ID0gaC5pbnB1dCwgdGhpcy5sYWJlbCA9IGgubGFiZWw7CgkJCQkJCX0KCQkJCQkJY3JlYXRlRWxlbWVudHMoKSB7CgkJCQkJCQlsZXQgZCA9IGcuQS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3QtdGV4dGZpZWxkIl0pLCBmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0aGlzLl9tdWx0aWxpbmUgPyAidGV4dGFyZWEiIDogImlucHV0Iik7CgkJCQkJCQl0aGlzLl9sYWJlbEh0bWwgfHwgZi5jbGFzc0xpc3QuYWRkKCJ2b3Qtc2hvdy1wbGFjZWhvbGVyIiksIGYucGxhY2Vob2xkZXIgPSB0aGlzLl9wbGFjZWhvbGRlciwgZi52YWx1ZSA9IHRoaXMuX3ZhbHVlOwoJCQkJCQkJbGV0IHAgPSBnLkEuY3JlYXRlRWwoInNwYW4iKTsKCQkJCQkJCXJldHVybiBwLmFwcGVuZCh0aGlzLl9sYWJlbEh0bWwpLCBkLmFwcGVuZChmLCBwKSwgZi5hZGRFdmVudExpc3RlbmVyKCJpbnB1dCIsICgpID0+IHsKCQkJCQkJCQl0aGlzLl92YWx1ZSA9IHRoaXMuaW5wdXQudmFsdWUsIHRoaXMub25JbnB1dC5kaXNwYXRjaCh0aGlzLl92YWx1ZSk7CgkJCQkJCQl9KSwgZi5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCAoKSA9PiB7CgkJCQkJCQkJdGhpcy5fdmFsdWUgPSB0aGlzLmlucHV0LnZhbHVlLCB0aGlzLm9uQ2hhbmdlLmRpc3BhdGNoKHRoaXMuX3ZhbHVlKTsKCQkJCQkJCX0pLCB7CgkJCQkJCQkJY29udGFpbmVyOiBkLAoJCQkJCQkJCWxhYmVsOiBwLAoJCQkJCQkJCWlucHV0OiBmCgkJCQkJCQl9OwoJCQkJCQl9CgkJCQkJCWFkZEV2ZW50TGlzdGVuZXIoZCwgZikgewoJCQkJCQkJcmV0dXJuIGQgPT09ICJjaGFuZ2UiID8gdGhpcy5vbkNoYW5nZS5hZGRMaXN0ZW5lcihmKSA6IGQgPT09ICJpbnB1dCIgJiYgdGhpcy5vbklucHV0LmFkZExpc3RlbmVyKGYpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCXJlbW92ZUV2ZW50TGlzdGVuZXIoZCwgZikgewoJCQkJCQkJcmV0dXJuIGQgPT09ICJjaGFuZ2UiID8gdGhpcy5vbkNoYW5nZS5yZW1vdmVMaXN0ZW5lcihmKSA6IGQgPT09ICJpbnB1dCIgJiYgdGhpcy5vbklucHV0LnJlbW92ZUxpc3RlbmVyKGYpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCWdldCB2YWx1ZSgpIHsKCQkJCQkJCXJldHVybiB0aGlzLl92YWx1ZTsKCQkJCQkJfQoJCQkJCQlzZXQgdmFsdWUoZCkgewoJCQkJCQkJdGhpcy5fdmFsdWUgIT09IGQgJiYgKHRoaXMuaW5wdXQudmFsdWUgPSB0aGlzLl92YWx1ZSA9IGQsIHRoaXMub25DaGFuZ2UuZGlzcGF0Y2godGhpcy5fdmFsdWUpKTsKCQkJCQkJfQoJCQkJCQlnZXQgcGxhY2Vob2xkZXIoKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5fcGxhY2Vob2xkZXI7CgkJCQkJCX0KCQkJCQkJc2V0IHBsYWNlaG9sZGVyKGQpIHsKCQkJCQkJCXRoaXMuaW5wdXQucGxhY2Vob2xkZXIgPSB0aGlzLl9wbGFjZWhvbGRlciA9IGQ7CgkJCQkJCX0KCQkJCQkJc2V0IGhpZGRlbihkKSB7CgkJCQkJCQl0aGlzLmNvbnRhaW5lci5oaWRkZW4gPSBkOwoJCQkJCQl9CgkJCQkJCWdldCBoaWRkZW4oKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5jb250YWluZXIuaGlkZGVuOwoJCQkJCQl9CgkJCQkJfQoJCQkJCW0oKTsKCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQltKGQpOwoJCQkJfQoJCQl9KTsKCQl9LAoJCSIuL3NyYy91aS9jb21wb25lbnRzL3Rvb2x0aXAudHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgeyBBOiAoKSA9PiBUb29sdGlwIH0pOwoJCQkJCXZhciBoID0gcCgiLi9zcmMvdHlwZXMvY29tcG9uZW50cy90b29sdGlwLnRzIiksIGcgPSBwKCIuL3NyYy91aS5qcyIpLCBfID0gcCgiLi9zcmMvdXRpbHMvdXRpbHMudHMiKSwgdiA9IGQoW2csIF9dKTsKCQkJCQlbZywgX10gPSB2LnRoZW4gPyAoYXdhaXQgdikoKSA6IHY7CgkJCQkJY2xhc3MgVG9vbHRpcCB7CgkJCQkJCXNob3dlZCA9ICExOwoJCQkJCQl0YXJnZXQ7CgkJCQkJCWFuY2hvcjsKCQkJCQkJY29udGVudDsKCQkJCQkJcG9zaXRpb247CgkJCQkJCXRyaWdnZXI7CgkJCQkJCXBhcmVudEVsZW1lbnQ7CgkJCQkJCWxheW91dFJvb3Q7CgkJCQkJCW9mZnNldFg7CgkJCQkJCW9mZnNldFk7CgkJCQkJCWhpZGRlbjsKCQkJCQkJYXV0b0xheW91dDsKCQkJCQkJcGFnZVdpZHRoOwoJCQkJCQlwYWdlSGVpZ2h0OwoJCQkJCQlnbG9iYWxPZmZzZXRYOwoJCQkJCQlnbG9iYWxPZmZzZXRZOwoJCQkJCQltYXhXaWR0aDsKCQkJCQkJYmFja2dyb3VuZENvbG9yOwoJCQkJCQlib3JkZXJSYWRpdXM7CgkJCQkJCV9ib3JkZXJlZDsKCQkJCQkJY29udGFpbmVyOwoJCQkJCQlvblJlc2l6ZU9ic2VydmVyOwoJCQkJCQlpbnRlcnNlY3Rpb25PYnNlcnZlcjsKCQkJCQkJY29uc3RydWN0b3IoeyB0YXJnZXQ6IGQsIGFuY2hvcjogZiA9IHZvaWQgMCwgY29udGVudDogcCA9ICIiLCBwb3NpdGlvbjogbSA9ICJ0b3AiLCB0cmlnZ2VyOiBoID0gImhvdmVyIiwgb2Zmc2V0OiBnID0gNCwgbWF4V2lkdGg6IF8gPSB2b2lkIDAsIGhpZGRlbjogdiA9ICExLCBhdXRvTGF5b3V0OiBiID0gITAsIGJhY2tncm91bmRDb2xvcjogeCA9IHZvaWQgMCwgYm9yZGVyUmFkaXVzOiBDID0gdm9pZCAwLCBib3JkZXJlZDogdyA9ICEwLCBwYXJlbnRFbGVtZW50OiBUID0gZG9jdW1lbnQuYm9keSwgbGF5b3V0Um9vdDogRSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB9KSB7CgkJCQkJCQlpZiAoIShkIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB0aHJvdyBFcnJvcigidGFyZ2V0IG11c3QgYmUgYSB2YWxpZCBIVE1MRWxlbWVudCIpOwoJCQkJCQkJdGhpcy50YXJnZXQgPSBkLCB0aGlzLmFuY2hvciA9IGYgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCA/IGYgOiBkLCB0aGlzLmNvbnRlbnQgPSBwLCB0eXBlb2YgZyA9PSAibnVtYmVyIiA/IHRoaXMub2Zmc2V0WSA9IHRoaXMub2Zmc2V0WCA9IGcgOiAodGhpcy5vZmZzZXRYID0gZy54LCB0aGlzLm9mZnNldFkgPSBnLnkpLCB0aGlzLmhpZGRlbiA9IHYsIHRoaXMuYXV0b0xheW91dCA9IGIsIHRoaXMudHJpZ2dlciA9IFRvb2x0aXAudmFsaWRhdGVUcmlnZ2VyKGgpID8gaCA6ICJob3ZlciIsIHRoaXMucG9zaXRpb24gPSBUb29sdGlwLnZhbGlkYXRlUG9zKG0pID8gbSA6ICJ0b3AiLCB0aGlzLnBhcmVudEVsZW1lbnQgPSBULCB0aGlzLmxheW91dFJvb3QgPSBFLCB0aGlzLmJvcmRlclJhZGl1cyA9IEMsIHRoaXMuX2JvcmRlcmVkID0gdywgdGhpcy5tYXhXaWR0aCA9IF8sIHRoaXMuYmFja2dyb3VuZENvbG9yID0geCwgdGhpcy51cGRhdGVQYWdlU2l6ZSgpLCB0aGlzLmluaXQoKTsKCQkJCQkJfQoJCQkJCQlzdGF0aWMgdmFsaWRhdGVQb3MoZCkgewoJCQkJCQkJcmV0dXJuIGguWC5pbmNsdWRlcyhkKTsKCQkJCQkJfQoJCQkJCQlzdGF0aWMgdmFsaWRhdGVUcmlnZ2VyKGQpIHsKCQkJCQkJCXJldHVybiBoLkcuaW5jbHVkZXMoZCk7CgkJCQkJCX0KCQkJCQkJc2V0UG9zaXRpb24oZCkgewoJCQkJCQkJcmV0dXJuIHRoaXMucG9zaXRpb24gPSBUb29sdGlwLnZhbGlkYXRlUG9zKGQpID8gZCA6ICJ0b3AiLCB0aGlzLnVwZGF0ZVBvcygpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCXNldENvbnRlbnQoZCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuY29udGVudCA9IGQsIHRoaXMuZGVzdHJveSgpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCW9uUmVzaXplID0gKCkgPT4gewoJCQkJCQkJdGhpcy51cGRhdGVQYWdlU2l6ZSgpLCB0aGlzLnVwZGF0ZVBvcygpOwoJCQkJCQl9OwoJCQkJCQlvbkNsaWNrID0gKCkgPT4gewoJCQkJCQkJdGhpcy5zaG93ZWQgPyB0aGlzLmRlc3Ryb3koKSA6IHRoaXMuY3JlYXRlKCk7CgkJCQkJCX07CgkJCQkJCW9uU2Nyb2xsID0gKCkgPT4gewoJCQkJCQkJcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHsKCQkJCQkJCQl0aGlzLnVwZGF0ZVBhZ2VTaXplKCksIHRoaXMudXBkYXRlUG9zKCk7CgkJCQkJCQl9KTsKCQkJCQkJfTsKCQkJCQkJb25Ib3ZlclBvaW50ZXJEb3duID0gKGQpID0+IHsKCQkJCQkJCWQucG9pbnRlclR5cGUgIT09ICJtb3VzZSIgJiYgdGhpcy5jcmVhdGUoKTsKCQkJCQkJfTsKCQkJCQkJb25Ib3ZlclBvaW50ZXJVcCA9IChkKSA9PiB7CgkJCQkJCQlkLnBvaW50ZXJUeXBlICE9PSAibW91c2UiICYmIHRoaXMuZGVzdHJveSgpOwoJCQkJCQl9OwoJCQkJCQlvbk1vdXNlRW50ZXIgPSAoKSA9PiB7CgkJCQkJCQl0aGlzLmNyZWF0ZSgpOwoJCQkJCQl9OwoJCQkJCQlvbk1vdXNlTGVhdmUgPSAoKSA9PiB7CgkJCQkJCQl0aGlzLmRlc3Ryb3koKTsKCQkJCQkJfTsKCQkJCQkJdXBkYXRlUGFnZVNpemUoKSB7CgkJCQkJCQlpZiAodGhpcy5sYXlvdXRSb290ICE9PSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHsKCQkJCQkJCQlsZXQgeyBsZWZ0OiBkLCB0b3A6IGYgfSA9IHRoaXMucGFyZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKCQkJCQkJCQl0aGlzLmdsb2JhbE9mZnNldFggPSBkLCB0aGlzLmdsb2JhbE9mZnNldFkgPSBmOwoJCQkJCQkJfSBlbHNlIHRoaXMuZ2xvYmFsT2Zmc2V0WCA9IDAsIHRoaXMuZ2xvYmFsT2Zmc2V0WSA9IDA7CgkJCQkJCQlyZXR1cm4gdGhpcy5wYWdlV2lkdGggPSAodGhpcy5sYXlvdXRSb290LmNsaWVudFdpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCkgKyB3aW5kb3cucGFnZVhPZmZzZXQsIHRoaXMucGFnZUhlaWdodCA9ICh0aGlzLmxheW91dFJvb3QuY2xpZW50SGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpICsgd2luZG93LnBhZ2VZT2Zmc2V0LCB0aGlzOwoJCQkJCQl9CgkJCQkJCW9uSW50ZXJzZWN0ID0gKFtkXSkgPT4gewoJCQkJCQkJaWYgKCFkLmlzSW50ZXJzZWN0aW5nKSByZXR1cm4gdGhpcy5kZXN0cm95KCEwKTsKCQkJCQkJfTsKCQkJCQkJaW5pdCgpIHsKCQkJCQkJCXJldHVybiB0aGlzLm9uUmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIodGhpcy5vblJlc2l6ZSksIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIodGhpcy5vbkludGVyc2VjdCksIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNjcm9sbCIsIHRoaXMub25TY3JvbGwsIHsKCQkJCQkJCQlwYXNzaXZlOiAhMCwKCQkJCQkJCQljYXB0dXJlOiAhMAoJCQkJCQkJfSksIHRoaXMudHJpZ2dlciA9PT0gImNsaWNrIiA/ICh0aGlzLnRhcmdldC5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVyZG93biIsIHRoaXMub25DbGljayksIHRoaXMpIDogKHRoaXMudGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZW50ZXIiLCB0aGlzLm9uTW91c2VFbnRlciksIHRoaXMudGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbGVhdmUiLCB0aGlzLm9uTW91c2VMZWF2ZSksIHRoaXMudGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJkb3duIiwgdGhpcy5vbkhvdmVyUG9pbnRlckRvd24pLCB0aGlzLnRhcmdldC5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVydXAiLCB0aGlzLm9uSG92ZXJQb2ludGVyVXApLCB0aGlzKTsKCQkJCQkJfQoJCQkJCQlyZWxlYXNlKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuZGVzdHJveSgpLCBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJzY3JvbGwiLCB0aGlzLm9uU2Nyb2xsLCB7IGNhcHR1cmU6ICEwIH0pLCB0aGlzLnRyaWdnZXIgPT09ICJjbGljayIgPyAodGhpcy50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcmRvd24iLCB0aGlzLm9uQ2xpY2spLCB0aGlzKSA6ICh0aGlzLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZWVudGVyIiwgdGhpcy5vbk1vdXNlRW50ZXIpLCB0aGlzLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZWxlYXZlIiwgdGhpcy5vbk1vdXNlTGVhdmUpLCB0aGlzLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVyZG93biIsIHRoaXMub25Ib3ZlclBvaW50ZXJEb3duKSwgdGhpcy50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcnVwIiwgdGhpcy5vbkhvdmVyUG9pbnRlclVwKSwgdGhpcyk7CgkJCQkJCX0KCQkJCQkJY3JlYXRlKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuZGVzdHJveSghMCksIHRoaXMuc2hvd2VkID0gITAsIHRoaXMuY29udGFpbmVyID0gZy5BLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC10b29sdGlwIl0sIHRoaXMuY29udGVudCksIHRoaXMuYm9yZGVyZWQgJiYgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgidm90LXRvb2x0aXAtYm9yZGVyZWQiKSwgdGhpcy5jb250YWluZXIuc2V0QXR0cmlidXRlKCJyb2xlIiwgInRvb2x0aXAiKSwgdGhpcy5jb250YWluZXIuZGF0YXNldC50cmlnZ2VyID0gdGhpcy50cmlnZ2VyLCB0aGlzLmNvbnRhaW5lci5kYXRhc2V0LnBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbiwgdGhpcy5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyKSwgdGhpcy51cGRhdGVQb3MoKSwgdGhpcy5iYWNrZ3JvdW5kQ29sb3IgIT09IHZvaWQgMCAmJiAodGhpcy5jb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5iYWNrZ3JvdW5kQ29sb3IpLCB0aGlzLmJvcmRlclJhZGl1cyAhPT0gdm9pZCAwICYmICh0aGlzLmNvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSBgJHt0aGlzLmJvcmRlclJhZGl1c31weGApLCB0aGlzLmhpZGRlbiAmJiAodGhpcy5jb250YWluZXIuaGlkZGVuID0gITApLCB0aGlzLmNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gIjEiLCB0aGlzLm9uUmVzaXplT2JzZXJ2ZXI/Lm9ic2VydmUodGhpcy5sYXlvdXRSb290KSwgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcj8ub2JzZXJ2ZSh0aGlzLnRhcmdldCksIHRoaXM7CgkJCQkJCX0KCQkJCQkJdXBkYXRlUG9zKCkgewoJCQkJCQkJaWYgKCF0aGlzLmNvbnRhaW5lcikgcmV0dXJuIHRoaXM7CgkJCQkJCQlsZXQgeyB0b3A6IGQsIGxlZnQ6IGYgfSA9IHRoaXMuY2FsY1Bvcyh0aGlzLmF1dG9MYXlvdXQpLCBwID0gdGhpcy5wYWdlV2lkdGggLSB0aGlzLm9mZnNldFggKiAyLCBtID0gdGhpcy5tYXhXaWR0aCA/PyBNYXRoLm1pbihwLCB0aGlzLnBhZ2VXaWR0aCAtIE1hdGgubWluKGYsIHRoaXMucGFnZVdpZHRoIC0gcCkpOwoJCQkJCQkJcmV0dXJuIHRoaXMuY29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtmfXB4LCAke2R9cHgpYCwgdGhpcy5jb250YWluZXIuc3R5bGUubWF4V2lkdGggPSBgJHttfXB4YCwgdGhpczsKCQkJCQkJfQoJCQkJCQljYWxjUG9zKGQgPSAhMCkgewoJCQkJCQkJaWYgKCF0aGlzLmNvbnRhaW5lcikgcmV0dXJuIHsKCQkJCQkJCQl0b3A6IDAsCgkJCQkJCQkJbGVmdDogMAoJCQkJCQkJfTsKCQkJCQkJCWxldCB7IGxlZnQ6IGYsIHJpZ2h0OiBwLCB0b3A6IG0sIGJvdHRvbTogaCwgd2lkdGg6IGcsIGhlaWdodDogdiB9ID0gdGhpcy5hbmNob3IuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHsgd2lkdGg6IGIsIGhlaWdodDogeCB9ID0gdGhpcy5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIEMgPSAoMCwgXy5xRSkoYiwgMCwgdGhpcy5wYWdlV2lkdGgpLCB3ID0gKDAsIF8ucUUpKHgsIDAsIHRoaXMucGFnZUhlaWdodCksIFQgPSBmIC0gdGhpcy5nbG9iYWxPZmZzZXRYLCBFID0gcCAtIHRoaXMuZ2xvYmFsT2Zmc2V0WCwgRCA9IG0gLSB0aGlzLmdsb2JhbE9mZnNldFksIE8gPSBoIC0gdGhpcy5nbG9iYWxPZmZzZXRZOwoJCQkJCQkJc3dpdGNoICh0aGlzLnBvc2l0aW9uKSB7CgkJCQkJCQkJY2FzZSAidG9wIjogewoJCQkJCQkJCQlsZXQgZiA9ICgwLCBfLnFFKShEIC0gdyAtIHRoaXMub2Zmc2V0WSwgMCwgdGhpcy5wYWdlSGVpZ2h0KTsKCQkJCQkJCQkJcmV0dXJuIGQgJiYgZiArIHRoaXMub2Zmc2V0WSA8IHcgPyAodGhpcy5wb3NpdGlvbiA9ICJib3R0b20iLCB0aGlzLmNhbGNQb3MoITEpKSA6IHsKCQkJCQkJCQkJCXRvcDogZiwKCQkJCQkJCQkJCWxlZnQ6ICgwLCBfLnFFKShUIC0gQyAvIDIgKyBnIC8gMiwgdGhpcy5vZmZzZXRYLCB0aGlzLnBhZ2VXaWR0aCAtIEMgLSB0aGlzLm9mZnNldFgpCgkJCQkJCQkJCX07CgkJCQkJCQkJfQoJCQkJCQkJCWNhc2UgInJpZ2h0IjogewoJCQkJCQkJCQlsZXQgZiA9ICgwLCBfLnFFKShFICsgdGhpcy5vZmZzZXRYLCAwLCB0aGlzLnBhZ2VXaWR0aCAtIEMpOwoJCQkJCQkJCQlyZXR1cm4gZCAmJiBmICsgQyA+IHRoaXMucGFnZVdpZHRoIC0gdGhpcy5vZmZzZXRYID8gKHRoaXMucG9zaXRpb24gPSAibGVmdCIsIHRoaXMuY2FsY1BvcyghMSkpIDogewoJCQkJCQkJCQkJdG9wOiAoMCwgXy5xRSkoRCArICh2IC0gdykgLyAyLCB0aGlzLm9mZnNldFksIHRoaXMucGFnZUhlaWdodCAtIHcgLSB0aGlzLm9mZnNldFkpLAoJCQkJCQkJCQkJbGVmdDogZgoJCQkJCQkJCQl9OwoJCQkJCQkJCX0KCQkJCQkJCQljYXNlICJib3R0b20iOiB7CgkJCQkJCQkJCWxldCBmID0gKDAsIF8ucUUpKE8gKyB0aGlzLm9mZnNldFksIDAsIHRoaXMucGFnZUhlaWdodCAtIHcpOwoJCQkJCQkJCQlyZXR1cm4gZCAmJiBmICsgdyA+IHRoaXMucGFnZUhlaWdodCAtIHRoaXMub2Zmc2V0WSA/ICh0aGlzLnBvc2l0aW9uID0gInRvcCIsIHRoaXMuY2FsY1BvcyghMSkpIDogewoJCQkJCQkJCQkJdG9wOiBmLAoJCQkJCQkJCQkJbGVmdDogKDAsIF8ucUUpKFQgLSBDIC8gMiArIGcgLyAyLCB0aGlzLm9mZnNldFgsIHRoaXMucGFnZVdpZHRoIC0gQyAtIHRoaXMub2Zmc2V0WCkKCQkJCQkJCQkJfTsKCQkJCQkJCQl9CgkJCQkJCQkJY2FzZSAibGVmdCI6IHsKCQkJCQkJCQkJbGV0IGYgPSBNYXRoLm1heCgwLCBUIC0gQyAtIHRoaXMub2Zmc2V0WCk7CgkJCQkJCQkJCXJldHVybiBkICYmIGYgKyBDID4gVCAtIHRoaXMub2Zmc2V0WCA/ICh0aGlzLnBvc2l0aW9uID0gInJpZ2h0IiwgdGhpcy5jYWxjUG9zKCExKSkgOiB7CgkJCQkJCQkJCQl0b3A6ICgwLCBfLnFFKShEICsgKHYgLSB3KSAvIDIsIHRoaXMub2Zmc2V0WSwgdGhpcy5wYWdlSGVpZ2h0IC0gdyAtIHRoaXMub2Zmc2V0WSksCgkJCQkJCQkJCQlsZWZ0OiBmCgkJCQkJCQkJCX07CgkJCQkJCQkJfQoJCQkJCQkJCWRlZmF1bHQ6IHJldHVybiB7CgkJCQkJCQkJCXRvcDogMCwKCQkJCQkJCQkJbGVmdDogMAoJCQkJCQkJCX07CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJZGVzdHJveShkID0gITEpIHsKCQkJCQkJCWlmICghdGhpcy5jb250YWluZXIpIHJldHVybiB0aGlzOwoJCQkJCQkJaWYgKHRoaXMuc2hvd2VkID0gITEsIHRoaXMub25SZXNpemVPYnNlcnZlcj8uZGlzY29ubmVjdCgpLCB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyPy5kaXNjb25uZWN0KCksIGQpIHJldHVybiB0aGlzLmNvbnRhaW5lci5yZW1vdmUoKSwgdGhpczsKCQkJCQkJCWxldCBmID0gdGhpcy5jb250YWluZXI7CgkJCQkJCQlyZXR1cm4gZi5zdHlsZS5vcGFjaXR5ID0gIjAiLCBmLmFkZEV2ZW50TGlzdGVuZXIoInRyYW5zaXRpb25lbmQiLCAoKSA9PiB7CgkJCQkJCQkJZj8ucmVtb3ZlKCk7CgkJCQkJCQl9LCB7IG9uY2U6ICEwIH0pLCB0aGlzOwoJCQkJCQl9CgkJCQkJCXNldCBib3JkZXJlZChkKSB7CgkJCQkJCQl0aGlzLl9ib3JkZXJlZCA9IGQsIHRoaXMuY29udGFpbmVyPy5jbGFzc0xpc3QudG9nZ2xlKCJ2b3QtdG9vbHRpcC1ib3JkZXJlZCIpOwoJCQkJCQl9CgkJCQkJCWdldCBib3JkZXJlZCgpIHsKCQkJCQkJCXJldHVybiB0aGlzLl9ib3JkZXJlZDsKCQkJCQkJfQoJCQkJCX0KCQkJCQltKCk7CgkJCQl9IGNhdGNoIChkKSB7CgkJCQkJbShkKTsKCQkJCX0KCQkJfSk7CgkJfSwKCQkiLi9zcmMvdWkvY29tcG9uZW50cy92b3RCdXR0b24udHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgeyBBOiAoKSA9PiBWT1RCdXR0b24gfSk7CgkJCQkJdmFyIGggPSBwKCIuL25vZGVfbW9kdWxlcy9saXQtaHRtbC9saXQtaHRtbC5qcyIpLCBnID0gcCgiLi9zcmMvdWkuanMiKSwgXyA9IHAoIi4vc3JjL3VpL2ljb25zLnRzIiksIHYgPSBkKFtnXSk7CgkJCQkJZyA9ICh2LnRoZW4gPyAoYXdhaXQgdikoKSA6IHYpWzBdOwoJCQkJCWNsYXNzIFZPVEJ1dHRvbiB7CgkJCQkJCWNvbnRhaW5lcjsKCQkJCQkJdHJhbnNsYXRlQnV0dG9uOwoJCQkJCQlzZXBhcmF0b3I7CgkJCQkJCXBpcEJ1dHRvbjsKCQkJCQkJc2VwYXJhdG9yMjsKCQkJCQkJbWVudUJ1dHRvbjsKCQkJCQkJbGFiZWw7CgkJCQkJCV9wb3NpdGlvbjsKCQkJCQkJX2RpcmVjdGlvbjsKCQkJCQkJX3N0YXR1czsKCQkJCQkJX2xhYmVsSHRtbDsKCQkJCQkJY29uc3RydWN0b3IoeyBwb3NpdGlvbjogZCA9ICJkZWZhdWx0IiwgZGlyZWN0aW9uOiBmID0gImRlZmF1bHQiLCBzdGF0dXM6IHAgPSAibm9uZSIsIGxhYmVsSHRtbDogbSA9ICIiIH0pIHsKCQkJCQkJCXRoaXMuX3Bvc2l0aW9uID0gZCwgdGhpcy5fZGlyZWN0aW9uID0gZiwgdGhpcy5fc3RhdHVzID0gcCwgdGhpcy5fbGFiZWxIdG1sID0gbTsKCQkJCQkJCWxldCBoID0gdGhpcy5jcmVhdGVFbGVtZW50cygpOwoJCQkJCQkJdGhpcy5jb250YWluZXIgPSBoLmNvbnRhaW5lciwgdGhpcy50cmFuc2xhdGVCdXR0b24gPSBoLnRyYW5zbGF0ZUJ1dHRvbiwgdGhpcy5zZXBhcmF0b3IgPSBoLnNlcGFyYXRvciwgdGhpcy5waXBCdXR0b24gPSBoLnBpcEJ1dHRvbiwgdGhpcy5zZXBhcmF0b3IyID0gaC5zZXBhcmF0b3IyLCB0aGlzLm1lbnVCdXR0b24gPSBoLm1lbnVCdXR0b24sIHRoaXMubGFiZWwgPSBoLmxhYmVsOwoJCQkJCQl9CgkJCQkJCXN0YXRpYyBjYWxjUG9zaXRpb24oZCwgZikgewoJCQkJCQkJcmV0dXJuIGYgPyBkIDw9IDQ0ID8gImxlZnQiIDogZCA+PSA2NiA/ICJyaWdodCIgOiAiZGVmYXVsdCIgOiAiZGVmYXVsdCI7CgkJCQkJCX0KCQkJCQkJc3RhdGljIGNhbGNEaXJlY3Rpb24oZCkgewoJCQkJCQkJcmV0dXJuIFsiZGVmYXVsdCIsICJ0b3AiXS5pbmNsdWRlcyhkKSA/ICJyb3ciIDogImNvbHVtbiI7CgkJCQkJCX0KCQkJCQkJY3JlYXRlRWxlbWVudHMoKSB7CgkJCQkJCQlsZXQgZCA9IGcuQS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3Qtc2VnbWVudGVkLWJ1dHRvbiJdKTsKCQkJCQkJCWQuZGF0YXNldC5wb3NpdGlvbiA9IHRoaXMuX3Bvc2l0aW9uLCBkLmRhdGFzZXQuZGlyZWN0aW9uID0gdGhpcy5fZGlyZWN0aW9uLCBkLmRhdGFzZXQuc3RhdHVzID0gdGhpcy5fc3RhdHVzOwoJCQkJCQkJbGV0IGYgPSBnLkEuY3JlYXRlRWwoInZvdC1ibG9jayIsIFsidm90LXNlZ21lbnQiLCAidm90LXRyYW5zbGF0ZS1idXR0b24iXSk7CgkJCQkJCQkoMCwgaC5YWCkoXy5jZywgZik7CgkJCQkJCQlsZXQgcCA9IGcuQS5jcmVhdGVFbCgic3BhbiIsIFsidm90LXNlZ21lbnQtbGFiZWwiXSk7CgkJCQkJCQlwLmFwcGVuZCh0aGlzLl9sYWJlbEh0bWwpLCBmLmFwcGVuZENoaWxkKHApOwoJCQkJCQkJbGV0IG0gPSBnLkEuY3JlYXRlRWwoInZvdC1ibG9jayIsIFsidm90LXNlcGFyYXRvciJdKSwgdiA9IGcuQS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3Qtc2VnbWVudC1vbmx5LWljb24iXSk7CgkJCQkJCQkoMCwgaC5YWCkoXy5COSwgdik7CgkJCQkJCQlsZXQgYiA9IGcuQS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3Qtc2VwYXJhdG9yIl0pLCB4ID0gZy5BLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC1zZWdtZW50LW9ubHktaWNvbiJdKTsKCQkJCQkJCXJldHVybiAoMCwgaC5YWCkoXy5rTywgeCksIGQuYXBwZW5kKGYsIG0sIHYsIGIsIHgpLCB7CgkJCQkJCQkJY29udGFpbmVyOiBkLAoJCQkJCQkJCXRyYW5zbGF0ZUJ1dHRvbjogZiwKCQkJCQkJCQlzZXBhcmF0b3I6IG0sCgkJCQkJCQkJcGlwQnV0dG9uOiB2LAoJCQkJCQkJCXNlcGFyYXRvcjI6IGIsCgkJCQkJCQkJbWVudUJ1dHRvbjogeCwKCQkJCQkJCQlsYWJlbDogcAoJCQkJCQkJfTsKCQkJCQkJfQoJCQkJCQlzaG93UGlQQnV0dG9uKGQpIHsKCQkJCQkJCXJldHVybiB0aGlzLnNlcGFyYXRvcjIuaGlkZGVuID0gdGhpcy5waXBCdXR0b24uaGlkZGVuID0gIWQsIHRoaXM7CgkJCQkJCX0KCQkJCQkJc2V0VGV4dChkKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5fbGFiZWxIdG1sID0gdGhpcy5sYWJlbC50ZXh0Q29udGVudCA9IGQsIHRoaXM7CgkJCQkJCX0KCQkJCQkJcmVtb3ZlKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuY29udGFpbmVyLnJlbW92ZSgpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCWdldCB0b29sdGlwUG9zKCkgewoJCQkJCQkJc3dpdGNoICh0aGlzLnBvc2l0aW9uKSB7CgkJCQkJCQkJY2FzZSAibGVmdCI6IHJldHVybiAicmlnaHQiOwoJCQkJCQkJCWNhc2UgInJpZ2h0IjogcmV0dXJuICJsZWZ0IjsKCQkJCQkJCQlkZWZhdWx0OiByZXR1cm4gImJvdHRvbSI7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJc2V0IHN0YXR1cyhkKSB7CgkJCQkJCQl0aGlzLl9zdGF0dXMgPSB0aGlzLmNvbnRhaW5lci5kYXRhc2V0LnN0YXR1cyA9IGQ7CgkJCQkJCX0KCQkJCQkJZ2V0IHN0YXR1cygpIHsKCQkJCQkJCXJldHVybiB0aGlzLl9zdGF0dXM7CgkJCQkJCX0KCQkJCQkJc2V0IGxvYWRpbmcoZCkgewoJCQkJCQkJdGhpcy5jb250YWluZXIuZGF0YXNldC5sb2FkaW5nID0gZC50b1N0cmluZygpOwoJCQkJCQl9CgkJCQkJCWdldCBsb2FkaW5nKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuY29udGFpbmVyLmRhdGFzZXQubG9hZGluZyA9PT0gInRydWUiOwoJCQkJCQl9CgkJCQkJCXNldCBoaWRkZW4oZCkgewoJCQkJCQkJdGhpcy5jb250YWluZXIuaGlkZGVuID0gZDsKCQkJCQkJfQoJCQkJCQlnZXQgaGlkZGVuKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuY29udGFpbmVyLmhpZGRlbjsKCQkJCQkJfQoJCQkJCQlnZXQgcG9zaXRpb24oKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5fcG9zaXRpb247CgkJCQkJCX0KCQkJCQkJc2V0IHBvc2l0aW9uKGQpIHsKCQkJCQkJCXRoaXMuX3Bvc2l0aW9uID0gdGhpcy5jb250YWluZXIuZGF0YXNldC5wb3NpdGlvbiA9IGQ7CgkJCQkJCX0KCQkJCQkJZ2V0IGRpcmVjdGlvbigpIHsKCQkJCQkJCXJldHVybiB0aGlzLl9kaXJlY3Rpb247CgkJCQkJCX0KCQkJCQkJc2V0IGRpcmVjdGlvbihkKSB7CgkJCQkJCQl0aGlzLl9kaXJlY3Rpb24gPSB0aGlzLmNvbnRhaW5lci5kYXRhc2V0LmRpcmVjdGlvbiA9IGQ7CgkJCQkJCX0KCQkJCQkJc2V0IG9wYWNpdHkoZCkgewoJCQkJCQkJdGhpcy5jb250YWluZXIuc3R5bGUub3BhY2l0eSA9IGQudG9TdHJpbmcoKTsKCQkJCQkJfQoJCQkJCQlnZXQgb3BhY2l0eSgpIHsKCQkJCQkJCXJldHVybiBOdW1iZXIodGhpcy5jb250YWluZXIuc3R5bGUub3BhY2l0eSk7CgkJCQkJCX0KCQkJCQl9CgkJCQkJbSgpOwoJCQkJfSBjYXRjaCAoZCkgewoJCQkJCW0oZCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJIi4vc3JjL3VpL2NvbXBvbmVudHMvdm90TWVudS50cyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5hKGQsIGFzeW5jIChkLCBtKSA9PiB7CgkJCQl0cnkgewoJCQkJCXAuZChmLCB7IEE6ICgpID0+IFZPVE1lbnUgfSk7CgkJCQkJdmFyIGggPSBwKCIuL3NyYy91aS5qcyIpLCBnID0gZChbaF0pOwoJCQkJCWggPSAoZy50aGVuID8gKGF3YWl0IGcpKCkgOiBnKVswXTsKCQkJCQljbGFzcyBWT1RNZW51IHsKCQkJCQkJY29udGFpbmVyOwoJCQkJCQljb250ZW50V3JhcHBlcjsKCQkJCQkJaGVhZGVyQ29udGFpbmVyOwoJCQkJCQlib2R5Q29udGFpbmVyOwoJCQkJCQlmb290ZXJDb250YWluZXI7CgkJCQkJCXRpdGxlQ29udGFpbmVyOwoJCQkJCQl0aXRsZTsKCQkJCQkJX3Bvc2l0aW9uOwoJCQkJCQlfdGl0bGVIdG1sOwoJCQkJCQljb25zdHJ1Y3Rvcih7IHBvc2l0aW9uOiBkID0gImRlZmF1bHQiLCB0aXRsZUh0bWw6IGYgPSAiIiB9KSB7CgkJCQkJCQl0aGlzLl9wb3NpdGlvbiA9IGQsIHRoaXMuX3RpdGxlSHRtbCA9IGY7CgkJCQkJCQlsZXQgcCA9IHRoaXMuY3JlYXRlRWxlbWVudHMoKTsKCQkJCQkJCXRoaXMuY29udGFpbmVyID0gcC5jb250YWluZXIsIHRoaXMuY29udGVudFdyYXBwZXIgPSBwLmNvbnRlbnRXcmFwcGVyLCB0aGlzLmhlYWRlckNvbnRhaW5lciA9IHAuaGVhZGVyQ29udGFpbmVyLCB0aGlzLmJvZHlDb250YWluZXIgPSBwLmJvZHlDb250YWluZXIsIHRoaXMuZm9vdGVyQ29udGFpbmVyID0gcC5mb290ZXJDb250YWluZXIsIHRoaXMudGl0bGVDb250YWluZXIgPSBwLnRpdGxlQ29udGFpbmVyLCB0aGlzLnRpdGxlID0gcC50aXRsZTsKCQkJCQkJfQoJCQkJCQljcmVhdGVFbGVtZW50cygpIHsKCQkJCQkJCWxldCBkID0gaC5BLmNyZWF0ZUVsKCJ2b3QtYmxvY2siLCBbInZvdC1tZW51Il0pOwoJCQkJCQkJZC5oaWRkZW4gPSAhMCwgZC5kYXRhc2V0LnBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb247CgkJCQkJCQlsZXQgZiA9IGguQS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3QtbWVudS1jb250ZW50LXdyYXBwZXIiXSk7CgkJCQkJCQlkLmFwcGVuZENoaWxkKGYpOwoJCQkJCQkJbGV0IHAgPSBoLkEuY3JlYXRlRWwoInZvdC1ibG9jayIsIFsidm90LW1lbnUtaGVhZGVyLWNvbnRhaW5lciJdKSwgbSA9IGguQS5jcmVhdGVFbCgidm90LWJsb2NrIiwgWyJ2b3QtbWVudS10aXRsZS1jb250YWluZXIiXSk7CgkJCQkJCQlwLmFwcGVuZENoaWxkKG0pOwoJCQkJCQkJbGV0IGcgPSBoLkEuY3JlYXRlRWwoInZvdC1ibG9jayIsIFsidm90LW1lbnUtdGl0bGUiXSk7CgkJCQkJCQlnLmFwcGVuZCh0aGlzLl90aXRsZUh0bWwpLCBtLmFwcGVuZENoaWxkKGcpOwoJCQkJCQkJbGV0IF8gPSBoLkEuY3JlYXRlRWwoInZvdC1ibG9jayIsIFsidm90LW1lbnUtYm9keS1jb250YWluZXIiXSksIHYgPSBoLkEuY3JlYXRlRWwoInZvdC1ibG9jayIsIFsidm90LW1lbnUtZm9vdGVyLWNvbnRhaW5lciJdKTsKCQkJCQkJCXJldHVybiBmLmFwcGVuZChwLCBfLCB2KSwgewoJCQkJCQkJCWNvbnRhaW5lcjogZCwKCQkJCQkJCQljb250ZW50V3JhcHBlcjogZiwKCQkJCQkJCQloZWFkZXJDb250YWluZXI6IHAsCgkJCQkJCQkJYm9keUNvbnRhaW5lcjogXywKCQkJCQkJCQlmb290ZXJDb250YWluZXI6IHYsCgkJCQkJCQkJdGl0bGVDb250YWluZXI6IG0sCgkJCQkJCQkJdGl0bGU6IGcKCQkJCQkJCX07CgkJCQkJCX0KCQkJCQkJc2V0VGV4dChkKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5fdGl0bGVIdG1sID0gdGhpcy50aXRsZS50ZXh0Q29udGVudCA9IGQsIHRoaXM7CgkJCQkJCX0KCQkJCQkJcmVtb3ZlKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuY29udGFpbmVyLnJlbW92ZSgpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCXNldCBoaWRkZW4oZCkgewoJCQkJCQkJdGhpcy5jb250YWluZXIuaGlkZGVuID0gZDsKCQkJCQkJfQoJCQkJCQlnZXQgaGlkZGVuKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuY29udGFpbmVyLmhpZGRlbjsKCQkJCQkJfQoJCQkJCQlnZXQgcG9zaXRpb24oKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5fcG9zaXRpb247CgkJCQkJCX0KCQkJCQkJc2V0IHBvc2l0aW9uKGQpIHsKCQkJCQkJCXRoaXMuX3Bvc2l0aW9uID0gdGhpcy5jb250YWluZXIuZGF0YXNldC5wb3NpdGlvbiA9IGQ7CgkJCQkJCX0KCQkJCQl9CgkJCQkJbSgpOwoJCQkJfSBjYXRjaCAoZCkgewoJCQkJCW0oZCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJIi4vc3JjL3VpL2ljb25zLnRzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmQoZiwgewoJCQkJQjk6ICgpID0+IGcsCgkJCQlHQTogKCkgPT4gQSwKCQkJCU05OiAoKSA9PiBPLAoJCQkJVTA6ICgpID0+IGIsCgkJCQlYZDogKCkgPT4gRSwKCQkJCWMxOiAoKSA9PiB4LAoJCQkJY2c6ICgpID0+IGgsCgkJCQlqcjogKCkgPT4gVCwKCQkJCWtPOiAoKSA9PiBfLAoJCQkJbVE6ICgpID0+IEMsCgkJCQluTzogKCkgPT4gdiwKCQkJCXcyOiAoKSA9PiBELAoJCQkJejM6ICgpID0+IHcKCQkJfSk7CgkJCXZhciBtID0gcCgiLi9ub2RlX21vZHVsZXMvbGl0LWh0bWwvbGl0LWh0bWwuanMiKTsKCQkJbGV0IGggPSAoMCwgbS5KVylgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aAogICAgaWQ9InZvdC10cmFuc2xhdGUtaWNvbiIKICAgIGZpbGwtcnVsZT0iZXZlbm9kZCIKICAgIGQ9Ik0xNS43NzggMTguOTVMMTQuOTAzIDIxLjM3NUMxNC44MzY0IDIxLjU1ODMgMTQuNzE5NyAyMS43MDgzIDE0LjU1MyAyMS44MjVDMTQuMzg2NCAyMS45NDE3IDE0LjIwMyAyMiAxNC4wMDMgMjJDMTMuNjY5NyAyMiAxMy4zOTg5IDIxLjg2MjUgMTMuMTkwNSAyMS41ODc1QzEyLjk4MjIgMjEuMzEyNSAxMi45NDQ3IDIxLjAwODMgMTMuMDc4IDIwLjY3NUwxNi44NzggMTAuNjI1QzE2Ljk2MTQgMTAuNDQxNyAxNy4wODY0IDEwLjI5MTcgMTcuMjUzIDEwLjE3NUMxNy40MTk3IDEwLjA1ODMgMTcuNjAzIDEwIDE3LjgwMyAxMEgxOC41NTNDMTguNzUzIDEwIDE4LjkzNjQgMTAuMDU4MyAxOS4xMDMgMTAuMTc1QzE5LjI2OTcgMTAuMjkxNyAxOS4zOTQ3IDEwLjQ0MTcgMTkuNDc4IDEwLjYyNUwyMy4yNzggMjAuN0MyMy40MTE0IDIxLjAxNjcgMjMuMzc4IDIxLjMxMjUgMjMuMTc4IDIxLjU4NzVDMjIuOTc4IDIxLjg2MjUgMjIuNzExNCAyMiAyMi4zNzggMjJDMjIuMTYxNCAyMiAyMS45NzM5IDIxLjkzNzUgMjEuODE1NSAyMS44MTI1QzIxLjY1NzIgMjEuNjg3NSAyMS41MzY0IDIxLjUyNSAyMS40NTMgMjEuMzI1TDIwLjYyOCAxOC45NUgxNS43NzhaTTE5Ljk3OCAxNy4ySDE2LjM3OEwxOC4yMjggMTIuMjVMMTkuOTc4IDE3LjJaIgogID48L3BhdGg+CiAgPHBhdGgKICAgIGQ9Ik05IDE0TDQuNyAxOC4zQzQuNTE2NjcgMTguNDgzMyA0LjI4MzMzIDE4LjU3NSA0IDE4LjU3NUMzLjcxNjY3IDE4LjU3NSAzLjQ4MzMzIDE4LjQ4MzMgMy4zIDE4LjNDMy4xMTY2NyAxOC4xMTY3IDMuMDI1IDE3Ljg4MzMgMy4wMjUgMTcuNkMzLjAyNSAxNy4zMTY3IDMuMTE2NjcgMTcuMDgzMyAzLjMgMTYuOUw3LjY1IDEyLjU1QzcuMDE2NjcgMTEuODUgNi40NjI1IDExLjEyNSA1Ljk4NzUgMTAuMzc1QzUuNTEyNSA5LjYyNSA1LjEgOC44MzMzMyA0Ljc1IDhINi44NUM3LjE1IDguNiA3LjQ3MDgzIDkuMTQxNjcgNy44MTI1IDkuNjI1QzguMTU0MTcgMTAuMTA4MyA4LjU2NjY3IDEwLjYxNjcgOS4wNSAxMS4xNUM5Ljc4MzMzIDEwLjM1IDEwLjM5MTcgOS41MjkxNyAxMC44NzUgOC42ODc1QzExLjM1ODMgNy44NDU4MyAxMS43NjY3IDYuOTUgMTIuMSA2SDJDMS43MTY2NyA2IDEuNDc5MTcgNS45MDQxNyAxLjI4NzUgNS43MTI1QzEuMDk1ODMgNS41MjA4MyAxIDUuMjgzMzMgMSA1QzEgNC43MTY2NyAxLjA5NTgzIDQuNDc5MTcgMS4yODc1IDQuMjg3NUMxLjQ3OTE3IDQuMDk1ODMgMS43MTY2NyA0IDIgNEg4VjNDOCAyLjcxNjY3IDguMDk1ODMgMi40NzkxNyA4LjI4NzUgMi4yODc1QzguNDc5MTcgMi4wOTU4MyA4LjcxNjY3IDIgOSAyQzkuMjgzMzMgMiA5LjUyMDgzIDIuMDk1ODMgOS43MTI1IDIuMjg3NUM5LjkwNDE3IDIuNDc5MTcgMTAgMi43MTY2NyAxMCAzVjRIMTZDMTYuMjgzMyA0IDE2LjUyMDggNC4wOTU4MyAxNi43MTI1IDQuMjg3NUMxNi45MDQyIDQuNDc5MTcgMTcgNC43MTY2NyAxNyA1QzE3IDUuMjgzMzMgMTYuOTA0MiA1LjUyMDgzIDE2LjcxMjUgNS43MTI1QzE2LjUyMDggNS45MDQxNyAxNi4yODMzIDYgMTYgNkgxNC4xQzEzLjc1IDcuMTgzMzMgMTMuMjc1IDguMzMzMzMgMTIuNjc1IDkuNDVDMTIuMDc1IDEwLjU2NjcgMTEuMzMzMyAxMS42MTY3IDEwLjQ1IDEyLjZMMTIuODUgMTUuMDVMMTIuMSAxNy4xTDkgMTRaIgogID48L3BhdGg+CiAgPHBhdGgKICAgIGlkPSJ2b3QtbG9hZGluZy1pY29uIgogICAgc3R5bGU9ImRpc3BsYXk6bm9uZSIKICAgIGQ9Ik0xOS44MDgxIDE2LjM2OTdMMTguNTg0MiAxNS42NjMzVjEzLjA4MzJDMTguNTg0MiAxMi45Mjg1IDE4LjUyMjggMTIuNzgwMSAxOC40MTM0IDEyLjY3MDdDMTguMzA0IDEyLjU2MTMgMTguMTU1NiAxMi40OTk4IDE4LjAwMDkgMTIuNDk5OEMxNy44NDYyIDEyLjQ5OTggMTcuNjk3OCAxMi41NjEzIDE3LjU4ODQgMTIuNjcwN0MxNy40NzkgMTIuNzgwMSAxNy40MTc2IDEyLjkyODUgMTcuNDE3NiAxMy4wODMyVjE1Ljk5OThDMTcuNDE3NiAxNi4xMDIyIDE3LjQ0NDUgMTYuMjAyOCAxNy40OTU3IDE2LjI5MTVDMTcuNTQ2OSAxNi4zODAyIDE3LjYyMDUgMTYuNDUzOCAxNy43MDkyIDE2LjUwNUwxOS4yMjQ3IDE3LjM4QzE5LjI5MTEgMTcuNDE4OSAxOS4zNjQ1IDE3LjQ0NDMgMTkuNDQwNyAxNy40NTQ3QzE5LjUxNjkgMTcuNDY1MiAxOS41OTQ1IDE3LjQ2MDQgMTkuNjY4OCAxNy40NDA3QzE5Ljc0MzIgMTcuNDIxMSAxOS44MTMgMTcuMzg2OSAxOS44NzQxIDE3LjM0MDJDMTkuOTM1MiAxNy4yOTM0IDE5Ljk4NjQgMTcuMjM1MSAyMC4wMjQ5IDE3LjE2ODRDMjAuMDYzNCAxNy4xMDE4IDIwLjA4ODMgMTcuMDI4MiAyMC4wOTgyIDE2Ljk1MkMyMC4xMDgxIDE2Ljg3NTcgMjAuMTAyOCAxNi43OTgyIDIwLjA4MjcgMTYuNzIzOUMyMC4wNjI1IDE2LjY0OTcgMjAuMDI3OSAxNi41ODAyIDE5Ljk4MDggMTYuNTE5NEMxOS45MzM2IDE2LjQ1ODYgMTkuODc0OSAxNi40MDc3IDE5LjgwODEgMTYuMzY5N1pNMTguMDAxNSAxMEMxNi44NDc4IDEwIDE1LjY2MDMgMTAuMzU5IDE0LjcwMTEgMTFDMTMuNzQxOCAxMS42NDEgMTIuOTQxNSAxMi40MzQxIDEyLjUgMTMuNUMxMi4wNTg1IDE0LjU2NTkgMTEuODg1MiAxNi4wMzY5IDEyLjExMDMgMTcuMTY4NEMxMi4zMzUzIDE4LjMgMTIuODczNiAxOS40OTQyIDEzLjY4OTQgMjAuMzFDMTQuNTA1MyAyMS4xMjU4IDE1Ljg2ODQgMjEuNzc0OSAxNyAyMkMxOC4xMzE2IDIyLjIyNTEgMTkuNDM0MSAyMS45NDE1IDIwLjUgMjEuNUMyMS41NjU5IDIxLjA1ODUgMjIuMzU5IDIwLjI1NzMgMjMgMTkuMjk4QzIzLjY0MSAxOC4zMzg3IDI0LjAwMTUgMTcuMTUzNyAyNC4wMDE1IDE2QzIzLjk5OTggMTQuNDUzNCAyMy41OTUxIDEzLjA5MzYgMjIuNTAxNSAxMkMyMS40MDc5IDEwLjkwNjQgMTkuNTQ4MSAxMC4wMDE3IDE4LjAwMTUgMTBaTTE4LjAwMDkgMjAuNjY2NUMxNy4wNzc5IDIwLjY2NjUgMTYuMTc1NyAyMC4zOTI4IDE1LjQwODIgMTkuODhDMTQuNjQwOCAxOS4zNjcyIDE0LjA0MjcgMTguNjM4NCAxMy42ODk0IDE3Ljc4NTdDMTMuMzM2MiAxNi45MzMgMTMuMjQzOCAxNS45OTQ3IDEzLjQyMzkgMTUuMDg5NEMxMy42MDQgMTQuMTg0MiAxNC4wNDg0IDEzLjM1MjcgMTQuNzAxMSAxMi43QzE1LjM1MzcgMTIuMDQ3NCAxNi4xODUyIDExLjYwMjkgMTcuMDkwNSAxMS40MjI4QzE3Ljk5NTcgMTEuMjQyOCAxOC45MzQgMTEuMzM1MiAxOS43ODY3IDExLjY4ODRDMjAuNjM5NSAxMi4wNDE2IDIxLjM2ODMgMTIuNjM5NyAyMS44ODExIDEzLjQwNzJDMjIuMzkzOSAxNC4xNzQ2IDIyLjY2NzYgMTUuMDc2OSAyMi42Njc2IDE1Ljk5OThDMjIuNjY2IDE3LjIzNyAyMi4xNzM4IDE4LjQyMzEgMjEuMjk5IDE5LjI5OEMyMC40MjQyIDIwLjE3MjggMTkuMjM4MSAyMC42NjUgMTguMDAwOSAyMC42NjY1WiIKICA+PC9wYXRoPgo8L3N2Zz5gLCBnID0gKDAsIG0uSlcpYDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIC05NjAgOTYwIDk2MCIgd2lkdGg9IjI0Ij4KICA8cGF0aAogICAgZD0iTTEyMC01MjBxLTE3IDAtMjguNS0xMS41VDgwLTU2MHEwLTE3IDExLjUtMjguNVQxMjAtNjAwaDEwNEw4MC03NDNxLTEyLTEyLTEyLTI4LjVUODAtODAwcTEyLTEyIDI4LjUtMTJ0MjguNSAxMmwxNDMgMTQ0di0xMDRxMC0xNyAxMS41LTI4LjVUMzIwLTgwMHExNyAwIDI4LjUgMTEuNVQzNjAtNzYwdjIwMHEwIDE3LTExLjUgMjguNVQzMjAtNTIwSDEyMFptNDAgMzYwcS0zMyAwLTU2LjUtMjMuNVQ4MC0yNDB2LTE2MHEwLTE3IDExLjUtMjguNVQxMjAtNDQwcTE3IDAgMjguNSAxMS41VDE2MC00MDB2MTYwaDI4MHExNyAwIDI4LjUgMTEuNVQ0ODAtMjAwcTAgMTctMTEuNSAyOC41VDQ0MC0xNjBIMTYwWm02ODAtMjgwcS0xNyAwLTI4LjUtMTEuNVQ4MDAtNDgwdi0yNDBINDgwcS0xNyAwLTI4LjUtMTEuNVQ0NDAtNzYwcTAtMTcgMTEuNS0yOC41VDQ4MC04MDBoMzIwcTMzIDAgNTYuNSAyMy41VDg4MC03MjB2MjQwcTAgMTctMTEuNSAyOC41VDg0MC00NDBaTTYwMC0xNjBxLTE3IDAtMjguNS0xMS41VDU2MC0yMDB2LTEyMHEwLTE3IDExLjUtMjguNVQ2MDAtMzYwaDI0MHExNyAwIDI4LjUgMTEuNVQ4ODAtMzIwdjEyMHEwIDE3LTExLjUgMjguNVQ4NDAtMTYwSDYwMFoiCiAgLz4KPC9zdmc+YCwgXyA9ICgwLCBtLkpXKWA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAtOTYwIDk2MCA5NjAiIHdpZHRoPSIyNCI+CiAgPHBhdGgKICAgIGQ9Ik00ODAtMTYwcS0zMyAwLTU2LjUtMjMuNVQ0MDAtMjQwcTAtMzMgMjMuNS01Ni41VDQ4MC0zMjBxMzMgMCA1Ni41IDIzLjVUNTYwLTI0MHEwIDMzLTIzLjUgNTYuNVQ0ODAtMTYwWm0wLTI0MHEtMzMgMC01Ni41LTIzLjVUNDAwLTQ4MHEwLTMzIDIzLjUtNTYuNVQ0ODAtNTYwcTMzIDAgNTYuNSAyMy41VDU2MC00ODBxMCAzMy0yMy41IDU2LjVUNDgwLTQwMFptMC0yNDBxLTMzIDAtNTYuNS0yMy41VDQwMC03MjBxMC0zMyAyMy41LTU2LjVUNDgwLTgwMHEzMyAwIDU2LjUgMjMuNVQ1NjAtNzIwcTAgMzMtMjMuNSA1Ni41VDQ4MC02NDBaIgogIC8+Cjwvc3ZnPmAsIHYgPSAoMCwgbS5KVylgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGNsYXNzPSJ2b3QtbG9hZGVyIiBpZD0idm90LWxvYWRlci1kb3dubG9hZCI+CiAgPHBhdGggY2xhc3M9InZvdC1sb2FkZXItbWFpbiIgZD0iTTEyIDE1LjU3NUMxMS44NjY3IDE1LjU3NSAxMS43NDE3IDE1LjU1NDIgMTEuNjI1IDE1LjUxMjVDMTEuNTA4MyAxNS40NzA4IDExLjQgMTUuNCAxMS4zIDE1LjNMNy43IDExLjdDNy41IDExLjUgNy40MDQxNyAxMS4yNjY3IDcuNDEyNSAxMUM3LjQyMDgzIDEwLjczMzMgNy41MTY2NyAxMC41IDcuNyAxMC4zQzcuOSAxMC4xIDguMTM3NSA5Ljk5NTgzIDguNDEyNSA5Ljk4NzVDOC42ODc1IDkuOTc5MTcgOC45MjUgMTAuMDc1IDkuMTI1IDEwLjI3NUwxMSAxMi4xNVY1QzExIDQuNzE2NjcgMTEuMDk1OCA0LjQ3OTE3IDExLjI4NzUgNC4yODc1QzExLjQ3OTIgNC4wOTU4MyAxMS43MTY3IDQgMTIgNEMxMi4yODMzIDQgMTIuNTIwOCA0LjA5NTgzIDEyLjcxMjUgNC4yODc1QzEyLjkwNDIgNC40NzkxNyAxMyA0LjcxNjY3IDEzIDVWMTIuMTVMMTQuODc1IDEwLjI3NUMxNS4wNzUgMTAuMDc1IDE1LjMxMjUgOS45NzkxNyAxNS41ODc1IDkuOTg3NUMxNS44NjI1IDkuOTk1ODMgMTYuMSAxMC4xIDE2LjMgMTAuM0MxNi40ODMzIDEwLjUgMTYuNTc5MiAxMC43MzMzIDE2LjU4NzUgMTFDMTYuNTk1OCAxMS4yNjY3IDE2LjUgMTEuNSAxNi4zIDExLjdMMTIuNyAxNS4zQzEyLjYgMTUuNCAxMi40OTE3IDE1LjQ3MDggMTIuMzc1IDE1LjUxMjVDMTIuMjU4MyAxNS41NTQyIDEyLjEzMzMgMTUuNTc1IDEyIDE1LjU3NVpNNiAyMEM1LjQ1IDIwIDQuOTc5MTcgMTkuODA0MiA0LjU4NzUgMTkuNDEyNUM0LjE5NTgzIDE5LjAyMDggNCAxOC41NSA0IDE4VjE2QzQgMTUuNzE2NyA0LjA5NTgzIDE1LjQ3OTIgNC4yODc1IDE1LjI4NzVDNC40NzkxNyAxNS4wOTU4IDQuNzE2NjcgMTUgNSAxNUM1LjI4MzMzIDE1IDUuNTIwODMgMTUuMDk1OCA1LjcxMjUgMTUuMjg3NUM1LjkwNDE3IDE1LjQ3OTIgNiAxNS43MTY3IDYgMTZWMThIMThWMTZDMTggMTUuNzE2NyAxOC4wOTU4IDE1LjQ3OTIgMTguMjg3NSAxNS4yODc1QzE4LjQ3OTIgMTUuMDk1OCAxOC43MTY3IDE1IDE5IDE1QzE5LjI4MzMgMTUgMTkuNTIwOCAxNS4wOTU4IDE5LjcxMjUgMTUuMjg3NUMxOS45MDQyIDE1LjQ3OTIgMjAgMTUuNzE2NyAyMCAxNlYxOEMyMCAxOC41NSAxOS44MDQyIDE5LjAyMDggMTkuNDEyNSAxOS40MTI1QzE5LjAyMDggMTkuODA0MiAxOC41NSAyMCAxOCAyMEg2WiIvPgogIDx0ZXh0IGNsYXNzPSJ2b3QtbG9hZGVyLXRleHQiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjUwJSIgeT0iNTAlIj48L3RleHQ+Cjwvc3ZnPmAsIGIgPSAoMCwgbS5KVylgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogIDxwYXRoIGQ9Ik00IDIwcS0uODI1IDAtMS40MTMtLjU4OFQyIDE4VjZxMC0uODI1LjU4OC0xLjQxM1Q0IDRoMTZxLjgyNSAwIDEuNDEzLjU4OFQyMiA2djEycTAgLjgyNS0uNTg4IDEuNDEzVDIwIDIwSDRabTItNGg4di0ySDZ2MlptMTAgMGgydi0yaC0ydjJaTTYgMTJoMnYtMkg2djJabTQgMGg4di0yaC04djJaIi8+Cjwvc3ZnPmAsIHggPSAoMCwgbS5KVylgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIC05NjAgOTYwIDk2MCI+CiAgPHBhdGggZD0iTTU1NS04MEg0MDVxLTE1IDAtMjYtMTB0LTEzLTI1bC0xMi05M3EtMTMtNS0yNC41LTEyVDMwNy0yMzVsLTg3IDM2cS0xNCA1LTI4IDF0LTIyLTE3TDk2LTM0NHEtOC0xMy01LTI4dDE1LTI0bDc1LTU3cS0xLTctMS0xMy41di0yN3EwLTYuNSAxLTEzLjVsLTc1LTU3cS0xMi05LTE1LTI0dDUtMjhsNzQtMTI5cTctMTQgMjEuNS0xNy41VDIyMC03NjFsODcgMzZxMTEtOCAyMy0xNXQyNC0xMmwxMi05M3EyLTE1IDEzLTI1dDI2LTEwaDE1MHExNSAwIDI2IDEwdDEzIDI1bDEyIDkzcTEzIDUgMjQuNSAxMnQyMi41IDE1bDg3LTM2cTE0LTUgMjgtMXQyMiAxN2w3NCAxMjlxOCAxMyA1IDI4dC0xNSAyNGwtNzUgNTdxMSA3IDEgMTMuNXYyN3EwIDYuNS0yIDEzLjVsNzUgNTdxMTIgOSAxNSAyNHQtNSAyOGwtNzQgMTI4cS04IDEzLTIyLjUgMTcuNVQ3MzgtMTk5bC04NS0zNnEtMTEgOC0yMyAxNXQtMjQgMTJsLTEyIDkzcS0yIDE1LTEzIDI1dC0yNiAxMFptLTczLTI2MHE1OCAwIDk5LTQxdDQxLTk5cTAtNTgtNDEtOTl0LTk5LTQxcS01OSAwLTk5LjUgNDFUMzQyLTQ4MHEwIDU4IDQwLjUgOTl0OTkuNSA0MVptMC04MHEtMjUgMC00Mi41LTE3LjVUNDIyLTQ4MHEwLTI1IDE3LjUtNDIuNVQ0ODItNTQwcTI1IDAgNDIuNSAxNy41VDU0Mi00ODBxMCAyNS0xNy41IDQyLjVUNDgyLTQyMFptLTItNjBabS00MCAzMjBoNzlsMTQtMTA2cTMxLTggNTcuNS0yMy41VDYzOS0zMjdsOTkgNDEgMzktNjgtODYtNjVxNS0xNCA3LTI5LjV0Mi0zMS41cTAtMTYtMi0zMS41dC03LTI5LjVsODYtNjUtMzktNjgtOTkgNDJxLTIyLTIzLTQ4LjUtMzguNVQ1MzMtNjk0bC0xMy0xMDZoLTc5bC0xNCAxMDZxLTMxIDgtNTcuNSAyMy41VDMyMS02MzNsLTk5LTQxLTM5IDY4IDg2IDY0cS01IDE1LTcgMzB0LTIgMzJxMCAxNiAyIDMxdDcgMzBsLTg2IDY1IDM5IDY4IDk5LTQycTIyIDIzIDQ4LjUgMzguNVQ0MjctMjY2bDEzIDEwNloiLz4KPC9zdmc+YCwgQyA9ICgwLCBtLkpXKWA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiID4KICA8cGF0aAogICAgZD0iTTEyIDE0Ljk3NXEtLjIgMC0uMzc1LS4wNjJUMTEuMyAxNC43bC00LjYtNC42cS0uMjc1LS4yNzUtLjI3NS0uN3QuMjc1LS43cS4yNzUtLjI3NS43LS4yNzV0LjcuMjc1bDMuOSAzLjlsMy45LTMuOXEuMjc1LS4yNzUuNy0uMjc1dC43LjI3NXEuMjc1LjI3NS4yNzUuN3QtLjI3NS43bC00LjYgNC42cS0uMTUuMTUtLjMyNS4yMTN0LS4zNzUuMDYyWiIKICAvPgo8L3N2Zz5gLCB3ID0gKDAsIG0uSlcpYDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIC05NjAgOTYwIDk2MCIgd2lkdGg9IjI0Ij4KICA8cGF0aAogICAgZD0iTTY0Ny00NDBIMjAwcS0xNyAwLTI4LjUtMTEuNVQxNjAtNDgwcTAtMTcgMTEuNS0yOC41VDIwMC01MjBoNDQ3TDQ1MS03MTZxLTEyLTEyLTExLjUtMjh0MTIuNS0yOHExMi0xMSAyOC0xMS41dDI4IDExLjVsMjY0IDI2NHE2IDYgOC41IDEzdDIuNSAxNXEwIDgtMi41IDE1dC04LjUgMTNMNTA4LTE4OHEtMTEgMTEtMjcuNSAxMVQ0NTItMTg4cS0xMi0xMi0xMi0yOC41dDEyLTI4LjVsMTk1LTE5NVoiCiAgLz4KPC9zdmc+YCwgVCA9ICgwLCBtLkpXKWA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgLTk2MCA5NjAgOTYwIj4KICA8cGF0aCBkPSJNNDgwLTQyNCAyODQtMjI4cS0xMSAxMS0yOCAxMXQtMjgtMTFxLTExLTExLTExLTI4dDExLTI4bDE5Ni0xOTYtMTk2LTE5NnEtMTEtMTEtMTEtMjh0MTEtMjhxMTEtMTEgMjgtMTF0MjggMTFsMTk2IDE5NiAxOTYtMTk2cTExLTExIDI4LTExdDI4IDExcTExIDExIDExIDI4dC0xMSAyOEw1MzYtNDgwbDE5NiAxOTZxMTEgMTEgMTEgMjh0LTExIDI4cS0xMSAxMS0yOCAxMXQtMjgtMTFMNDgwLTQyNFoiLz4KPC9zdmc+YCwgRSA9ICgwLCBtLkpXKWA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogIDxnIGZpbGw9Im5vbmUiPgogICAgPHBhdGggZD0ibTEyLjU5MyAyMy4yNThsLS4wMTEuMDAybC0uMDcxLjAzNWwtLjAyLjAwNGwtLjAxNC0uMDA0bC0uMDcxLS4wMzVxLS4wMTYtLjAwNS0uMDI0LjAwNWwtLjAwNC4wMWwtLjAxNy40MjhsLjAwNS4wMmwuMDEuMDEzbC4xMDQuMDc0bC4wMTUuMDA0bC4wMTItLjAwNGwuMTA0LS4wNzRsLjAxMi0uMDE2bC4wMDQtLjAxN2wtLjAxNy0uNDI3cS0uMDA0LS4wMTYtLjAxNy0uMDE4bS4yNjUtLjExM2wtLjAxMy4wMDJsLS4xODUuMDkzbC0uMDEuMDFsLS4wMDMuMDExbC4wMTguNDNsLjAwNS4wMTJsLjAwOC4wMDdsLjIwMS4wOTNxLjAxOS4wMDUuMDI5LS4wMDhsLjAwNC0uMDE0bC0uMDM0LS42MTRxLS4wMDUtLjAxOC0uMDItLjAyMm0tLjcxNS4wMDJhLjAyLjAyIDAgMCAwLS4wMjcuMDA2bC0uMDA2LjAxNGwtLjAzNC42MTRxLjAwMS4wMTguMDE3LjAyNGwuMDE1LS4wMDJsLjIwMS0uMDkzbC4wMS0uMDA4bC4wMDQtLjAxMWwuMDE3LS40M2wtLjAwMy0uMDEybC0uMDEtLjAxeiIvPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTEyIDJjNS41MjMgMCAxMCA0LjQ3NyAxMCAxMHMtNC40NzcgMTAtMTAgMTBTMiAxNy41MjMgMiAxMlM2LjQ3NyAyIDEyIDJtMCAyYTggOCAwIDEgMCAwIDE2YTggOCAwIDAgMCAwLTE2bTAgMTFhMSAxIDAgMSAxIDAgMmExIDEgMCAwIDEgMC0ybTAtOWExIDEgMCAwIDEgMSAxdjZhMSAxIDAgMSAxLTIgMFY3YTEgMSAwIDAgMSAxLTEiLz4KICA8L2c+Cjwvc3ZnPmAsIEQgPSAoMCwgbS5KVylgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBmaWxsPSJub25lIj4KICAgIDxwYXRoIGQ9Im0xMi41OTMgMjMuMjU4bC0uMDExLjAwMmwtLjA3MS4wMzVsLS4wMi4wMDRsLS4wMTQtLjAwNGwtLjA3MS0uMDM1cS0uMDE2LS4wMDUtLjAyNC4wMDVsLS4wMDQuMDFsLS4wMTcuNDI4bC4wMDUuMDJsLjAxLjAxM2wuMTA0LjA3NGwuMDE1LjAwNGwuMDEyLS4wMDRsLjEwNC0uMDc0bC4wMTItLjAxNmwuMDA0LS4wMTdsLS4wMTctLjQyN3EtLjAwNC0uMDE2LS4wMTctLjAxOG0uMjY1LS4xMTNsLS4wMTMuMDAybC0uMTg1LjA5M2wtLjAxLjAxbC0uMDAzLjAxMWwuMDE4LjQzbC4wMDUuMDEybC4wMDguMDA3bC4yMDEuMDkzcS4wMTkuMDA1LjAyOS0uMDA4bC4wMDQtLjAxNGwtLjAzNC0uNjE0cS0uMDA1LS4wMTgtLjAyLS4wMjJtLS43MTUuMDAyYS4wMi4wMiAwIDAgMC0uMDI3LjAwNmwtLjAwNi4wMTRsLS4wMzQuNjE0cS4wMDEuMDE4LjAxNy4wMjRsLjAxNS0uMDAybC4yMDEtLjA5M2wuMDEtLjAwOGwuMDA0LS4wMTFsLjAxNy0uNDNsLS4wMDMtLjAxMmwtLjAxLS4wMXoiLz48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xMiAyYzUuNTIzIDAgMTAgNC40NzcgMTAgMTBzLTQuNDc3IDEwLTEwIDEwUzIgMTcuNTIzIDIgMTJTNi40NzcgMiAxMiAybTAgMmE4IDggMCAxIDAgMCAxNmE4IDggMCAwIDAgMC0xNm0wIDEyYTEgMSAwIDEgMSAwIDJhMSAxIDAgMCAxIDAtMm0wLTkuNWEzLjYyNSAzLjYyNSAwIDAgMSAxLjM0OCA2Ljk5YS44LjggMCAwIDAtLjMwNS4yMDFjLS4wNDQuMDUtLjA1MS4xMTQtLjA1LjE4TDEzIDE0YTEgMSAwIDAgMS0xLjk5My4xMTdMMTEgMTR2LS4yNWMwLTEuMTUzLjkzLTEuODQ1IDEuNjA0LTIuMTE2YTEuNjI2IDEuNjI2IDAgMSAwLTIuMjI5LTEuNTA5YTEgMSAwIDEgMS0yIDBBMy42MjUgMy42MjUgMCAwIDEgMTIgNi41Ii8+CiAgPC9nPgo8L3N2Zz5gLCBPID0gKDAsIG0uSlcpYDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPGcgZmlsbD0ibm9uZSI+CiAgICA8cGF0aCBkPSJtMTIuNTk0IDIzLjI1OGwtLjAxMi4wMDJsLS4wNzEuMDM1bC0uMDIuMDA0bC0uMDE0LS4wMDRsLS4wNzEtLjAzNnEtLjAxNi0uMDA0LS4wMjQuMDA2bC0uMDA0LjAxbC0uMDE3LjQyOGwuMDA1LjAybC4wMS4wMTNsLjEwNC4wNzRsLjAxNS4wMDRsLjAxMi0uMDA0bC4xMDQtLjA3NGwuMDEyLS4wMTZsLjAwNC0uMDE3bC0uMDE3LS40MjdxLS4wMDQtLjAxNi0uMDE2LS4wMThtLjI2NC0uMTEzbC0uMDE0LjAwMmwtLjE4NC4wOTNsLS4wMS4wMWwtLjAwMy4wMTFsLjAxOC40M2wuMDA1LjAxMmwuMDA4LjAwOGwuMjAxLjA5MnEuMDE5LjAwNS4wMjktLjAwOGwuMDA0LS4wMTRsLS4wMzQtLjYxNHEtLjAwNS0uMDE5LS4wMi0uMDIybS0uNzE1LjAwMmEuMDIuMDIgMCAwIDAtLjAyNy4wMDZsLS4wMDYuMDE0bC0uMDM0LjYxNHEuMDAxLjAxOC4wMTcuMDI0bC4wMTUtLjAwMmwuMjAxLS4wOTNsLjAxLS4wMDhsLjAwMy0uMDExbC4wMTgtLjQzbC0uMDAzLS4wMTJsLS4wMS0uMDF6Ii8+CiAgICA8cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0yMCA5YTEgMSAwIDAgMSAxIDF2MWE4IDggMCAwIDEtOCA4SDkuNDE0bC43OTMuNzkzYTEgMSAwIDAgMS0xLjQxNCAxLjQxNGwtMi40OTYtMi40OTZhMSAxIDAgMCAxLS4yODctLjU2N0w2IDE3Ljk5MWExIDEgMCAwIDEgLjIzNy0uNjM4bC4wNTYtLjA2bDIuNS0yLjVhMSAxIDAgMCAxIDEuNDE0IDEuNDE0TDkuNDE0IDE3SDEzYTYgNiAwIDAgMCA2LTZ2LTFhMSAxIDAgMCAxIDEtMW0tNC43OTMtNi4yMDdsMi41IDIuNWExIDEgMCAwIDEgMCAxLjQxNGwtMi41IDIuNWExIDEgMCAxIDEtMS40MTQtMS40MTRMMTQuNTg2IDdIMTFhNiA2IDAgMCAwLTYgNnYxYTEgMSAwIDEgMS0yIDB2LTFhOCA4IDAgMCAxIDgtOGgzLjU4NmwtLjc5My0uNzkzYTEgMSAwIDAgMSAxLjQxNC0xLjQxNCIvPgogIDwvZz4KPC9zdmc+YCwgQSA9ICgwLCBtLkpXKWA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogIDxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTcgMTVxMS4yNSAwIDIuMTI1LS44NzVUMTAgMTJ0LS44NzUtMi4xMjVUNyA5dC0yLjEyNS44NzVUNCAxMnQuODc1IDIuMTI1VDcgMTVtMCAzcS0yLjUgMC00LjI1LTEuNzVUMSAxMnQxLjc1LTQuMjVUNyA2cTIuMDI1IDAgMy41MzggMS4xNVQxMi42NSAxMGg4LjM3NUwyMyAxMS45NzVsLTMuNSA0TDE3IDE0bC0yIDJsLTItMmgtLjM1cS0uNjI1IDEuOC0yLjE3NSAyLjlUNyAxOCIvPgogIDwvc3ZnPmA7CgkJfSwKCQkiLi9zcmMvdWkvbWFuYWdlci50cyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5hKGQsIGFzeW5jIChkLCBtKSA9PiB7CgkJCQl0cnkgewoJCQkJCXAuZChmLCB7IG86ICgpID0+IFVJTWFuYWdlciB9KTsKCQkJCQl2YXIgaCA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvc2hhcmVkL2Rpc3QvdXRpbHMvc3Vicy5qcyIpLCBnID0gcCgiLi9zcmMvdWkuanMiKSwgXyA9IHAoIi4vc3JjL2NvbmZpZy9jb25maWcuanMiKSwgdiA9IHAoIi4vc3JjL2xvY2FsaXphdGlvbi9sb2NhbGl6YXRpb25Qcm92aWRlci50cyIpLCBiID0gcCgiLi9zcmMvdXRpbHMvVk9UTG9jYWxpemVkRXJyb3IuanMiKSwgeCA9IHAoIi4vc3JjL3V0aWxzL2RlYnVnLnRzIiksIEMgPSBwKCIuL3NyYy91dGlscy9nbS50cyIpLCB3ID0gcCgiLi9zcmMvdXRpbHMvc3RvcmFnZS50cyIpLCBUID0gcCgiLi9zcmMvdXRpbHMvdXRpbHMudHMiKSwgRSA9IHAoIi4vc3JjL3VpL2NvbXBvbmVudHMvdm90QnV0dG9uLnRzIiksIEQgPSBwKCIuL3NyYy91aS92aWV3cy9vdmVybGF5LnRzIiksIE8gPSBwKCIuL3NyYy91aS92aWV3cy9zZXR0aW5ncy50cyIpLCBBID0gZChbCgkJCQkJCWcsCgkJCQkJCXYsCgkJCQkJCWIsCgkJCQkJCUMsCgkJCQkJCXcsCgkJCQkJCVQsCgkJCQkJCUUsCgkJCQkJCUQsCgkJCQkJCU8KCQkJCQldKTsKCQkJCQlbZywgdiwgYiwgQywgdywgVCwgRSwgRCwgT10gPSBBLnRoZW4gPyAoYXdhaXQgQSkoKSA6IEE7CgkJCQkJY2xhc3MgVUlNYW5hZ2VyIHsKCQkJCQkJcm9vdDsKCQkJCQkJcG9ydGFsQ29udGFpbmVyOwoJCQkJCQl0b29sdGlwTGF5b3V0Um9vdDsKCQkJCQkJaW5pdGlhbGl6ZWQgPSAhMTsKCQkJCQkJdmlkZW9IYW5kbGVyOwoJCQkJCQlkYXRhOwoJCQkJCQl2b3RHbG9iYWxQb3J0YWw7CgkJCQkJCXZvdE92ZXJsYXlWaWV3OwoJCQkJCQl2b3RTZXR0aW5nc1ZpZXc7CgkJCQkJCWNvbnN0cnVjdG9yKHsgcm9vdDogZCwgcG9ydGFsQ29udGFpbmVyOiBmLCB0b29sdGlwTGF5b3V0Um9vdDogcCwgZGF0YTogbSA9IHt9LCB2aWRlb0hhbmRsZXI6IGggfSkgewoJCQkJCQkJdGhpcy5yb290ID0gZCwgdGhpcy5wb3J0YWxDb250YWluZXIgPSBmLCB0aGlzLnRvb2x0aXBMYXlvdXRSb290ID0gcCwgdGhpcy52aWRlb0hhbmRsZXIgPSBoLCB0aGlzLmRhdGEgPSBtOwoJCQkJCQl9CgkJCQkJCWlzSW5pdGlhbGl6ZWQoKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5pbml0aWFsaXplZDsKCQkJCQkJfQoJCQkJCQlpbml0VUkoKSB7CgkJCQkJCQlpZiAodGhpcy5pc0luaXRpYWxpemVkKCkpIHRocm93IEVycm9yKCJbVk9UXSBVSU1hbmFnZXIgaXMgYWxyZWFkeSBpbml0aWFsaXplZCIpOwoJCQkJCQkJcmV0dXJuIHRoaXMuaW5pdGlhbGl6ZWQgPSAhMCwgdGhpcy52b3RHbG9iYWxQb3J0YWwgPSBnLkEuY3JlYXRlUG9ydGFsKCksIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnZvdEdsb2JhbFBvcnRhbCksIHRoaXMudm90T3ZlcmxheVZpZXcgPSBuZXcgRC5pKHsKCQkJCQkJCQlyb290OiB0aGlzLnJvb3QsCgkJCQkJCQkJcG9ydGFsQ29udGFpbmVyOiB0aGlzLnBvcnRhbENvbnRhaW5lciwKCQkJCQkJCQl0b29sdGlwTGF5b3V0Um9vdDogdGhpcy50b29sdGlwTGF5b3V0Um9vdCwKCQkJCQkJCQlnbG9iYWxQb3J0YWw6IHRoaXMudm90R2xvYmFsUG9ydGFsLAoJCQkJCQkJCWRhdGE6IHRoaXMuZGF0YSwKCQkJCQkJCQl2aWRlb0hhbmRsZXI6IHRoaXMudmlkZW9IYW5kbGVyCgkJCQkJCQl9KSwgdGhpcy52b3RPdmVybGF5Vmlldy5pbml0VUkoKSwgdGhpcy52b3RTZXR0aW5nc1ZpZXcgPSBuZXcgTy5yKHsKCQkJCQkJCQlnbG9iYWxQb3J0YWw6IHRoaXMudm90R2xvYmFsUG9ydGFsLAoJCQkJCQkJCWRhdGE6IHRoaXMuZGF0YSwKCQkJCQkJCQl2aWRlb0hhbmRsZXI6IHRoaXMudmlkZW9IYW5kbGVyCgkJCQkJCQl9KSwgdGhpcy52b3RTZXR0aW5nc1ZpZXcuaW5pdFVJKCksIHRoaXM7CgkJCQkJCX0KCQkJCQkJaW5pdFVJRXZlbnRzKCkgewoJCQkJCQkJaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQoKSkgdGhyb3cgRXJyb3IoIltWT1RdIFVJTWFuYWdlciBpc24ndCBpbml0aWFsaXplZCIpOwoJCQkJCQkJdGhpcy52b3RPdmVybGF5Vmlldy5pbml0VUlFdmVudHMoKSwgdGhpcy52b3RPdmVybGF5Vmlldy5hZGRFdmVudExpc3RlbmVyKCJjbGljazp0cmFuc2xhdGUiLCBhc3luYyAoKSA9PiB7CgkJCQkJCQkJYXdhaXQgdGhpcy5oYW5kbGVUcmFuc2xhdGlvbkJ0bkNsaWNrKCk7CgkJCQkJCQl9KS5hZGRFdmVudExpc3RlbmVyKCJjbGljazpwaXAiLCBhc3luYyAoKSA9PiB7CgkJCQkJCQkJaWYgKCF0aGlzLnZpZGVvSGFuZGxlcikgcmV0dXJuOwoJCQkJCQkJCWxldCBkID0gdGhpcy52aWRlb0hhbmRsZXIudmlkZW8gPT09IGRvY3VtZW50LnBpY3R1cmVJblBpY3R1cmVFbGVtZW50OwoJCQkJCQkJCWF3YWl0IChkID8gZG9jdW1lbnQuZXhpdFBpY3R1cmVJblBpY3R1cmUoKSA6IHRoaXMudmlkZW9IYW5kbGVyLnZpZGVvLnJlcXVlc3RQaWN0dXJlSW5QaWN0dXJlKCkpOwoJCQkJCQkJfSkuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2s6c2V0dGluZ3MiLCBhc3luYyAoKSA9PiB7CgkJCQkJCQkJdGhpcy52aWRlb0hhbmRsZXI/LnN1YnRpdGxlc1dpZGdldC5yZWxlYXNlVG9vbHRpcCgpLCB0aGlzLnZvdFNldHRpbmdzVmlldy5vcGVuKCksIGF3YWl0ICgwLCBULkVoKSgpOwoJCQkJCQkJfSkuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2s6ZG93bmxvYWRUcmFuc2xhdGlvbiIsIGFzeW5jICgpID0+IHsKCQkJCQkJCQlpZiAoISghdGhpcy52b3RPdmVybGF5Vmlldy5pc0luaXRpYWxpemVkKCkgfHwgIXRoaXMudmlkZW9IYW5kbGVyPy5kb3dubG9hZFRyYW5zbGF0aW9uVXJsIHx8ICF0aGlzLnZpZGVvSGFuZGxlci52aWRlb0RhdGEpKSB7CgkJCQkJCQkJCXRyeSB7CgkJCQkJCQkJCQlpZiAoIXRoaXMuZGF0YS5kb3dubG9hZFdpdGhOYW1lIHx8ICFDLnl4KSByZXR1cm4gKDAsIFQuV28pKHRoaXMudmlkZW9IYW5kbGVyLmRvd25sb2FkVHJhbnNsYXRpb25VcmwpOwoJCQkJCQkJCQkJdGhpcy52b3RPdmVybGF5Vmlldy5kb3dubG9hZFRyYW5zbGF0aW9uQnV0dG9uLnByb2dyZXNzID0gMDsKCQkJCQkJCQkJCWxldCBkID0gYXdhaXQgKDAsIEMuRzMpKHRoaXMudmlkZW9IYW5kbGVyLmRvd25sb2FkVHJhbnNsYXRpb25VcmwsIHsgdGltZW91dDogMCB9KTsKCQkJCQkJCQkJCWlmICghZC5vaykgdGhyb3cgRXJyb3IoYEhUVFAgJHtkLnN0YXR1c31gKTsKCQkJCQkJCQkJCWxldCBmID0gKDAsIFQuTGUpKHRoaXMudmlkZW9IYW5kbGVyLnZpZGVvRGF0YS5kb3dubG9hZFRpdGxlKTsKCQkJCQkJCQkJCWF3YWl0ICgwLCBULk1SKShkLCBmLCAoZCkgPT4gewoJCQkJCQkJCQkJCXRoaXMudm90T3ZlcmxheVZpZXcuZG93bmxvYWRUcmFuc2xhdGlvbkJ1dHRvbi5wcm9ncmVzcyA9IGQ7CgkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJfSBjYXRjaCAoZCkgewoJCQkJCQkJCQkJY29uc29sZS5lcnJvcigiW1ZPVF0gRG93bmxvYWQgdHJhbnNsYXRpb24gZmFpbGVkOiIsIGQpLCAoMCwgVC5XbykodGhpcy52aWRlb0hhbmRsZXIuZG93bmxvYWRUcmFuc2xhdGlvblVybCk7CgkJCQkJCQkJCX0KCQkJCQkJCQkJdGhpcy52b3RPdmVybGF5Vmlldy5kb3dubG9hZFRyYW5zbGF0aW9uQnV0dG9uLnByb2dyZXNzID0gMDsKCQkJCQkJCQl9CgkJCQkJCQl9KS5hZGRFdmVudExpc3RlbmVyKCJjbGljazpkb3dubG9hZFN1YnRpdGxlcyIsIGFzeW5jICgpID0+IHsKCQkJCQkJCQlpZiAoIXRoaXMudmlkZW9IYW5kbGVyIHx8ICF0aGlzLnZpZGVvSGFuZGxlci55YW5kZXhTdWJ0aXRsZXMgfHwgIXRoaXMudmlkZW9IYW5kbGVyLnZpZGVvRGF0YSkgcmV0dXJuOwoJCQkJCQkJCWxldCBkID0gdGhpcy5kYXRhLnN1YnRpdGxlc0Rvd25sb2FkRm9ybWF0ID8/ICJqc29uIiwgZiA9ICgwLCBoLnZrKSh0aGlzLnZpZGVvSGFuZGxlci55YW5kZXhTdWJ0aXRsZXMsIGQpLCBwID0gbmV3IEJsb2IoW2QgPT09ICJqc29uIiA/IEpTT04uc3RyaW5naWZ5KGYpIDogZl0sIHsgdHlwZTogInRleHQvcGxhaW4iIH0pLCBtID0gdGhpcy5kYXRhLmRvd25sb2FkV2l0aE5hbWUgPyAoMCwgVC5MZSkodGhpcy52aWRlb0hhbmRsZXIudmlkZW9EYXRhLmRvd25sb2FkVGl0bGUpIDogYHN1YnRpdGxlc18ke3RoaXMudmlkZW9IYW5kbGVyLnZpZGVvRGF0YS52aWRlb0lkfWA7CgkJCQkJCQkJKDAsIFQuV04pKHAsIGAke219LiR7ZH1gKTsKCQkJCQkJCX0pLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0OnZpZGVvVm9sdW1lIiwgKGQpID0+IHsKCQkJCQkJCQl0aGlzLnZpZGVvSGFuZGxlciAmJiAodGhpcy52aWRlb0hhbmRsZXIuc2V0VmlkZW9Wb2x1bWUoZCAvIDEwMCksIHRoaXMuZGF0YS5zeW5jVm9sdW1lICYmIHRoaXMudmlkZW9IYW5kbGVyLnN5bmNWb2x1bWVXcmFwcGVyKCJ2aWRlbyIsIGQpKTsKCQkJCQkJCX0pLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0OnRyYW5zbGF0aW9uVm9sdW1lIiwgKCkgPT4gewoJCQkJCQkJCWlmICghdGhpcy52aWRlb0hhbmRsZXIpIHJldHVybjsKCQkJCQkJCQlsZXQgZCA9IHRoaXMuZGF0YS5kZWZhdWx0Vm9sdW1lID8/IDEwMDsKCQkJCQkJCQl0aGlzLnZpZGVvSGFuZGxlci5hdWRpb1BsYXllci5wbGF5ZXIudm9sdW1lID0gZCAvIDEwMCwgdGhpcy5kYXRhLnN5bmNWb2x1bWUgJiYgKHRoaXMudmlkZW9IYW5kbGVyLnN5bmNWb2x1bWVXcmFwcGVyKCJ0cmFuc2xhdGlvbiIsIGQpLCBbInlvdXR1YmUiLCAiZ29vZ2xlZHJpdmUiXS5pbmNsdWRlcyh0aGlzLnZpZGVvSGFuZGxlci5zaXRlLmhvc3QpICYmIHRoaXMudmlkZW9IYW5kbGVyLnNpdGUuYWRkaXRpb25hbERhdGEgIT09ICJtb2JpbGUiICYmIHRoaXMudmlkZW9IYW5kbGVyLnNldFZpZGVvVm9sdW1lKHRoaXMudmlkZW9IYW5kbGVyLnRlbXBPcmlnaW5hbFZvbHVtZSAvIDEwMCkpOwoJCQkJCQkJfSkuYWRkRXZlbnRMaXN0ZW5lcigic2VsZWN0OnN1YnRpdGxlcyIsIGFzeW5jIChkKSA9PiB7CgkJCQkJCQkJYXdhaXQgdGhpcy52aWRlb0hhbmRsZXI/LmNoYW5nZVN1YnRpdGxlc0xhbmcoZCk7CgkJCQkJCQl9KSwgdGhpcy52b3RTZXR0aW5nc1ZpZXcuaW5pdFVJRXZlbnRzKCksIHRoaXMudm90U2V0dGluZ3NWaWV3LmFkZEV2ZW50TGlzdGVuZXIoInVwZGF0ZTphY2NvdW50IiwgYXN5bmMgKGQpID0+IHsKCQkJCQkJCQl0aGlzLnZpZGVvSGFuZGxlciAmJiAodGhpcy52aWRlb0hhbmRsZXIudm90Q2xpZW50LmFwaVRva2VuID0gZD8udG9rZW4pOwoJCQkJCQkJfSkuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlOmF1dG9UcmFuc2xhdGUiLCBhc3luYyAoZCkgPT4gewoJCQkJCQkJCWQgJiYgdGhpcy52aWRlb0hhbmRsZXIgJiYgIXRoaXMudmlkZW9IYW5kbGVyPy5oYXNBY3RpdmVTb3VyY2UoKSAmJiBhd2FpdCB0aGlzLmhhbmRsZVRyYW5zbGF0aW9uQnRuQ2xpY2soKTsKCQkJCQkJCX0pLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZTpzaG93VmlkZW9Wb2x1bWUiLCAoKSA9PiB7CgkJCQkJCQkJdGhpcy52b3RPdmVybGF5Vmlldy5pc0luaXRpYWxpemVkKCkgJiYgKHRoaXMudm90T3ZlcmxheVZpZXcudmlkZW9Wb2x1bWVTbGlkZXIuY29udGFpbmVyLmhpZGRlbiA9ICF0aGlzLmRhdGEuc2hvd1ZpZGVvU2xpZGVyIHx8IHRoaXMudm90T3ZlcmxheVZpZXcudm90QnV0dG9uLnN0YXR1cyAhPT0gInN1Y2Nlc3MiKTsKCQkJCQkJCX0pLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZTphdWRpb0J1c3RlciIsIGFzeW5jICgpID0+IHsKCQkJCQkJCQlpZiAoIXRoaXMudm90T3ZlcmxheVZpZXcuaXNJbml0aWFsaXplZCgpKSByZXR1cm47CgkJCQkJCQkJbGV0IGQgPSB0aGlzLnZvdE92ZXJsYXlWaWV3LnRyYW5zbGF0aW9uVm9sdW1lU2xpZGVyLnZhbHVlOwoJCQkJCQkJCXRoaXMudm90T3ZlcmxheVZpZXcudHJhbnNsYXRpb25Wb2x1bWVTbGlkZXIubWF4ID0gdGhpcy5kYXRhLmF1ZGlvQm9vc3RlciA/IF8uVDggOiAxMDAsIHRoaXMudm90T3ZlcmxheVZpZXcudHJhbnNsYXRpb25Wb2x1bWVTbGlkZXIudmFsdWUgPSAoMCwgVC5xRSkoZCwgMCwgMTAwKTsKCQkJCQkJCX0pLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZTp1c2VMaXZlbHlWb2ljZSIsICgpID0+IHsKCQkJCQkJCQl0aGlzLnZpZGVvSGFuZGxlcj8uc3RvcFRyYW5zbGF0ZSgpOwoJCQkJCQkJfSkuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlOnN1YnRpdGxlc0hpZ2hsaWdodFdvcmRzIiwgKGQpID0+IHsKCQkJCQkJCQl0aGlzLnZpZGVvSGFuZGxlcj8uc3VidGl0bGVzV2lkZ2V0LnNldEhpZ2hsaWdodFdvcmRzKHRoaXMuZGF0YS5oaWdobGlnaHRXb3JkcyA/PyBkKTsKCQkJCQkJCX0pLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0OnN1YnRpdGxlc01heExlbmd0aCIsIChkKSA9PiB7CgkJCQkJCQkJdGhpcy52aWRlb0hhbmRsZXI/LnN1YnRpdGxlc1dpZGdldC5zZXRNYXhMZW5ndGgodGhpcy5kYXRhLnN1YnRpdGxlc01heExlbmd0aCA/PyBkKTsKCQkJCQkJCX0pLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0OnN1YnRpdGxlc0ZvbnRTaXplIiwgKGQpID0+IHsKCQkJCQkJCQl0aGlzLnZpZGVvSGFuZGxlcj8uc3VidGl0bGVzV2lkZ2V0LnNldEZvbnRTaXplKHRoaXMuZGF0YS5zdWJ0aXRsZXNGb250U2l6ZSA/PyBkKTsKCQkJCQkJCX0pLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0OnN1YnRpdGxlc0JhY2tncm91bmRPcGFjaXR5IiwgKGQpID0+IHsKCQkJCQkJCQl0aGlzLnZpZGVvSGFuZGxlcj8uc3VidGl0bGVzV2lkZ2V0LnNldE9wYWNpdHkodGhpcy5kYXRhLnN1YnRpdGxlc09wYWNpdHkgPz8gZCk7CgkJCQkJCQl9KS5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2U6cHJveHlXb3JrZXJIb3N0IiwgKGQpID0+IHsKCQkJCQkJCQkhdGhpcy5kYXRhLnRyYW5zbGF0ZVByb3h5RW5hYmxlZCB8fCAhdGhpcy52aWRlb0hhbmRsZXIgfHwgKHRoaXMudmlkZW9IYW5kbGVyLnZvdENsaWVudC5ob3N0ID0gdGhpcy5kYXRhLnByb3h5V29ya2VySG9zdCA/PyBkKTsKCQkJCQkJCX0pLmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdDpwcm94eVRyYW5zbGF0aW9uU3RhdHVzIiwgKCkgPT4gewoJCQkJCQkJCXRoaXMudmlkZW9IYW5kbGVyPy5pbml0Vk9UQ2xpZW50KCk7CgkJCQkJCQl9KS5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2U6dXNlTmV3QXVkaW9QbGF5ZXIiLCAoKSA9PiB7CgkJCQkJCQkJdGhpcy52aWRlb0hhbmRsZXIgJiYgKHRoaXMudmlkZW9IYW5kbGVyLnN0b3BUcmFuc2xhdGUoKSwgdGhpcy52aWRlb0hhbmRsZXIuY3JlYXRlUGxheWVyKCkpOwoJCQkJCQkJfSkuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlOm9ubHlCeXBhc3NNZWRpYUNTUCIsICgpID0+IHsKCQkJCQkJCQl0aGlzLnZpZGVvSGFuZGxlciAmJiAodGhpcy52aWRlb0hhbmRsZXIuc3RvcFRyYW5zbGF0ZSgpLCB0aGlzLnZpZGVvSGFuZGxlci5jcmVhdGVQbGF5ZXIoKSk7CgkJCQkJCQl9KS5hZGRFdmVudExpc3RlbmVyKCJzZWxlY3Q6dHJhbnNsYXRpb25UZXh0U2VydmljZSIsICgpID0+IHsKCQkJCQkJCQl0aGlzLnZpZGVvSGFuZGxlciAmJiAodGhpcy52aWRlb0hhbmRsZXIuc3VidGl0bGVzV2lkZ2V0LnN0clRyYW5zbGF0ZWRUb2tlbnMgPSAiIiwgdGhpcy52aWRlb0hhbmRsZXIuc3VidGl0bGVzV2lkZ2V0LnJlbGVhc2VUb29sdGlwKCkpOwoJCQkJCQkJfSkuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlOnNob3dQaVBCdXR0b24iLCAoKSA9PiB7CgkJCQkJCQkJdGhpcy52b3RPdmVybGF5Vmlldy5pc0luaXRpYWxpemVkKCkgJiYgKHRoaXMudm90T3ZlcmxheVZpZXcudm90QnV0dG9uLnBpcEJ1dHRvbi5oaWRkZW4gPSB0aGlzLnZvdE92ZXJsYXlWaWV3LnZvdEJ1dHRvbi5zZXBhcmF0b3IyLmhpZGRlbiA9ICF0aGlzLnZvdE92ZXJsYXlWaWV3LnBpcEJ1dHRvblZpc2libGUpOwoJCQkJCQkJfSkuYWRkRXZlbnRMaXN0ZW5lcigic2VsZWN0OmJ1dHRvblBvc2l0aW9uIiwgKGQpID0+IHsKCQkJCQkJCQlpZiAoIXRoaXMudm90T3ZlcmxheVZpZXcuaXNJbml0aWFsaXplZCgpKSByZXR1cm47CgkJCQkJCQkJbGV0IGYgPSB0aGlzLmRhdGEuYnV0dG9uUG9zID8/IGQ7CgkJCQkJCQkJdGhpcy52b3RPdmVybGF5Vmlldy51cGRhdGVCdXR0b25MYXlvdXQoZiwgRS5BLmNhbGNEaXJlY3Rpb24oZikpOwoJCQkJCQkJfSkuYWRkRXZlbnRMaXN0ZW5lcigic2VsZWN0Om1lbnVMYW5ndWFnZSIsIGFzeW5jICgpID0+IHsKCQkJCQkJCQlhd2FpdCB0aGlzLnJlbG9hZE1lbnUoKTsKCQkJCQkJCX0pLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrOmJ1Z1JlcG9ydCIsICgpID0+IHsKCQkJCQkJCQlpZiAoIXRoaXMudmlkZW9IYW5kbGVyKSByZXR1cm47CgkJCQkJCQkJbGV0IGQgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHRoaXMudmlkZW9IYW5kbGVyLmNvbGxlY3RSZXBvcnRJbmZvKCkpLnRvU3RyaW5nKCk7CgkJCQkJCQkJd2luZG93Lm9wZW4oYCR7Xy5Fa30vaXNzdWVzL25ldz8ke2R9YCwgIl9ibGFuayIpPy5mb2N1cygpOwoJCQkJCQkJfSkuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2s6cmVzZXRTZXR0aW5ncyIsIGFzeW5jICgpID0+IHsKCQkJCQkJCQlsZXQgZCA9IGF3YWl0IHcuZC5saXN0KCk7CgkJCQkJCQkJYXdhaXQgUHJvbWlzZS5hbGwoZC5tYXAoYXN5bmMgKGQpID0+IGF3YWl0IHcuZC5kZWxldGUoZCkpKSwgYXdhaXQgdy5kLnNldCgiY29tcGF0VmVyc2lvbiIsIF8ucjQpLCB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CgkJCQkJCQl9KTsKCQkJCQkJfQoJCQkJCQlhc3luYyByZWxvYWRNZW51KCkgewoJCQkJCQkJaWYgKCF0aGlzLnZvdE92ZXJsYXlWaWV3Py5pc0luaXRpYWxpemVkKCkpIHRocm93IEVycm9yKCJbVk9UXSBPdmVybGF5VmlldyBpc24ndCBpbml0aWFsaXplZCIpOwoJCQkJCQkJaWYgKHRoaXMudmlkZW9IYW5kbGVyPy5zdG9wVHJhbnNsYXRpb24oKSwgdGhpcy5yZWxlYXNlKCksIHRoaXMuaW5pdFVJKCksIHRoaXMuaW5pdFVJRXZlbnRzKCksICF0aGlzLnZpZGVvSGFuZGxlcikgcmV0dXJuIHRoaXM7CgkJCQkJCQlhd2FpdCB0aGlzLnZpZGVvSGFuZGxlci51cGRhdGVTdWJ0aXRsZXNMYW5nU2VsZWN0KCksIHRoaXMudmlkZW9IYW5kbGVyLnN1YnRpdGxlc1dpZGdldC5wb3J0YWwgPSB0aGlzLnZvdE92ZXJsYXlWaWV3LnZvdE92ZXJsYXlQb3J0YWwsIHRoaXMudmlkZW9IYW5kbGVyLnN1YnRpdGxlc1dpZGdldC5zdHJUcmFuc2xhdGVkVG9rZW5zID0gIiI7CgkJCQkJCX0KCQkJCQkJYXN5bmMgaGFuZGxlVHJhbnNsYXRpb25CdG5DbGljaygpIHsKCQkJCQkJCWlmICghdGhpcy52b3RPdmVybGF5Vmlldz8uaXNJbml0aWFsaXplZCgpKSB0aHJvdyBFcnJvcigiW1ZPVF0gT3ZlcmxheVZpZXcgaXNuJ3QgaW5pdGlhbGl6ZWQiKTsKCQkJCQkJCWlmICghdGhpcy52aWRlb0hhbmRsZXIpIHJldHVybiB0aGlzOwoJCQkJCQkJaWYgKHguQS5sb2coIltoYW5kbGVUcmFuc2xhdGlvbkJ0bkNsaWNrXSBjbGljayB0cmFuc2xhdGlvbkJ0biIpLCB0aGlzLnZpZGVvSGFuZGxlci5oYXNBY3RpdmVTb3VyY2UoKSkgcmV0dXJuIHguQS5sb2coIltoYW5kbGVUcmFuc2xhdGlvbkJ0bkNsaWNrXSB2aWRlbyBoYXMgYWN0aXZlIHNvdXJjZSIpLCB0aGlzLnZpZGVvSGFuZGxlci5zdG9wVHJhbnNsYXRpb24oKSwgdGhpczsKCQkJCQkJCWlmICh0aGlzLnZvdE92ZXJsYXlWaWV3LnZvdEJ1dHRvbi5zdGF0dXMgIT09ICJub25lIiB8fCB0aGlzLnZvdE92ZXJsYXlWaWV3LnZvdEJ1dHRvbi5sb2FkaW5nKSByZXR1cm4geC5BLmxvZygiW2hhbmRsZVRyYW5zbGF0aW9uQnRuQ2xpY2tdIHRyYW5zbGF0aW9uQnRuIGlzbid0IGluIG5vbmUgc3RhdGUiKSwgdGhpcy52aWRlb0hhbmRsZXIuYWN0aW9uc0Fib3J0Q29udHJvbGxlci5hYm9ydCgpLCB0aGlzLnZpZGVvSGFuZGxlci5zdG9wVHJhbnNsYXRpb24oKSwgdGhpczsKCQkJCQkJCXRyeSB7CgkJCQkJCQkJaWYgKHguQS5sb2coIltoYW5kbGVUcmFuc2xhdGlvbkJ0bkNsaWNrXSB0cnlpbmcgZXhlY3V0ZSB0cmFuc2xhdGlvbiIpLCAhdGhpcy52aWRlb0hhbmRsZXIudmlkZW9EYXRhPy52aWRlb0lkKSB0aHJvdyBuZXcgYi5uKCJWT1ROb1ZpZGVvSURGb3VuZCIpOwoJCQkJCQkJCSh0aGlzLnZpZGVvSGFuZGxlci5zaXRlLmhvc3QgPT09ICJ2ayIgJiYgdGhpcy52aWRlb0hhbmRsZXIuc2l0ZS5hZGRpdGlvbmFsRGF0YSA9PT0gImNsaXBzIiB8fCB0aGlzLnZpZGVvSGFuZGxlci5zaXRlLmhvc3QgPT09ICJkb3V5aW4iKSAmJiAodGhpcy52aWRlb0hhbmRsZXIudmlkZW9EYXRhID0gYXdhaXQgdGhpcy52aWRlb0hhbmRsZXIuZ2V0VmlkZW9EYXRhKCkpLCB4LkEubG9nKCJbaGFuZGxlVHJhbnNsYXRpb25CdG5DbGlja10gUnVuIHRyYW5zbGF0ZUZ1bmMiLCB0aGlzLnZpZGVvSGFuZGxlci52aWRlb0RhdGEudmlkZW9JZCksIGF3YWl0IHRoaXMudmlkZW9IYW5kbGVyLnRyYW5zbGF0ZUZ1bmModGhpcy52aWRlb0hhbmRsZXIudmlkZW9EYXRhLnZpZGVvSWQsIHRoaXMudmlkZW9IYW5kbGVyLnZpZGVvRGF0YS5pc1N0cmVhbSwgdGhpcy52aWRlb0hhbmRsZXIudmlkZW9EYXRhLmRldGVjdGVkTGFuZ3VhZ2UsIHRoaXMudmlkZW9IYW5kbGVyLnZpZGVvRGF0YS5yZXNwb25zZUxhbmd1YWdlLCB0aGlzLnZpZGVvSGFuZGxlci52aWRlb0RhdGEudHJhbnNsYXRpb25IZWxwKTsKCQkJCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQkJCQlpZiAoY29uc29sZS5lcnJvcigiW1ZPVF0iLCBkKSwgIShkIGluc3RhbmNlb2YgRXJyb3IpKSByZXR1cm4gdGhpcy50cmFuc2Zvcm1CdG4oImVycm9yIiwgU3RyaW5nKGQpKSwgdGhpczsKCQkJCQkJCQlsZXQgZiA9IGQubmFtZSA9PT0gIlZPVExvY2FsaXplZEVycm9yIiA/IGQubG9jYWxpemVkTWVzc2FnZSA6IGQubWVzc2FnZTsKCQkJCQkJCQl0aGlzLnRyYW5zZm9ybUJ0bigiZXJyb3IiLCBmKTsKCQkJCQkJCX0KCQkJCQkJCXJldHVybiB0aGlzOwoJCQkJCQl9CgkJCQkJCWlzTG9hZGluZ1RleHQoZCkgewoJCQkJCQkJcmV0dXJuIHR5cGVvZiBkID09ICJzdHJpbmciICYmIChkLmluY2x1ZGVzKHYuai5nZXQoInRyYW5zbGF0aW9uVGFrZSIpKSB8fCBkLmluY2x1ZGVzKHYuai5nZXQoIlRyYW5zbGF0aW9uRGVsYXllZCIpKSk7CgkJCQkJCX0KCQkJCQkJdHJhbnNmb3JtQnRuKGQsIGYpIHsKCQkJCQkJCWlmICghdGhpcy52b3RPdmVybGF5Vmlldz8uaXNJbml0aWFsaXplZCgpKSB0aHJvdyBFcnJvcigiW1ZPVF0gT3ZlcmxheVZpZXcgaXNuJ3QgaW5pdGlhbGl6ZWQiKTsKCQkJCQkJCXJldHVybiB0aGlzLnZvdE92ZXJsYXlWaWV3LnZvdEJ1dHRvbi5zdGF0dXMgPSBkLCB0aGlzLnZvdE92ZXJsYXlWaWV3LnZvdEJ1dHRvbi5sb2FkaW5nID0gZCA9PT0gImVycm9yIiAmJiB0aGlzLmlzTG9hZGluZ1RleHQoZiksIHRoaXMudm90T3ZlcmxheVZpZXcudm90QnV0dG9uLnNldFRleHQoZiksIHRoaXMudm90T3ZlcmxheVZpZXcudm90QnV0dG9uVG9vbHRpcC5zZXRDb250ZW50KGYpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCXJlbGVhc2VVSShkID0gITEpIHsKCQkJCQkJCWlmICghdGhpcy5pc0luaXRpYWxpemVkKCkpIHRocm93IEVycm9yKCJbVk9UXSBVSU1hbmFnZXIgaXNuJ3QgaW5pdGlhbGl6ZWQiKTsKCQkJCQkJCXJldHVybiB0aGlzLnZvdE92ZXJsYXlWaWV3LnJlbGVhc2VVSSghMCksIHRoaXMudm90U2V0dGluZ3NWaWV3LnJlbGVhc2VVSSghMCksIHRoaXMudm90R2xvYmFsUG9ydGFsLnJlbW92ZSgpLCB0aGlzLmluaXRpYWxpemVkID0gZCwgdGhpczsKCQkJCQkJfQoJCQkJCQlyZWxlYXNlVUlFdmVudHMoZCA9ICExKSB7CgkJCQkJCQlpZiAoIXRoaXMuaXNJbml0aWFsaXplZCgpKSB0aHJvdyBFcnJvcigiW1ZPVF0gVUlNYW5hZ2VyIGlzbid0IGluaXRpYWxpemVkIik7CgkJCQkJCQlyZXR1cm4gdGhpcy52b3RPdmVybGF5Vmlldy5yZWxlYXNlVUlFdmVudHMoITEpLCB0aGlzLnZvdFNldHRpbmdzVmlldy5yZWxlYXNlVUlFdmVudHMoITEpLCB0aGlzLmluaXRpYWxpemVkID0gZCwgdGhpczsKCQkJCQkJfQoJCQkJCQlyZWxlYXNlKCkgewoJCQkJCQkJcmV0dXJuIHRoaXMucmVsZWFzZVVJKCEwKSwgdGhpcy5yZWxlYXNlVUlFdmVudHMoITEpLCB0aGlzOwoJCQkJCQl9CgkJCQkJfQoJCQkJCW0oKTsKCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQltKGQpOwoJCQkJfQoJCQl9KTsKCQl9LAoJCSIuL3NyYy91aS92aWV3cy9vdmVybGF5LnRzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmEoZCwgYXN5bmMgKGQsIG0pID0+IHsKCQkJCXRyeSB7CgkJCQkJcC5kKGYsIHsgaTogKCkgPT4gT3ZlcmxheVZpZXcgfSk7CgkJCQkJdmFyIGggPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL3NoYXJlZC9kaXN0L2RhdGEvY29uc3RzLmpzIiksIGcgPSBwKCIuL3NyYy91aS5qcyIpLCBfID0gcCgiLi9zcmMvdWkvY29tcG9uZW50cy9sYW5ndWFnZVBhaXJTZWxlY3QudHMiKSwgdiA9IHAoIi4vc3JjL3VpL2NvbXBvbmVudHMvc2VsZWN0LnRzIiksIGIgPSBwKCIuL3NyYy91aS9jb21wb25lbnRzL3NsaWRlci50cyIpLCB4ID0gcCgiLi9zcmMvdWkvY29tcG9uZW50cy9zbGlkZXJMYWJlbC50cyIpLCBDID0gcCgiLi9zcmMvdWkvY29tcG9uZW50cy90b29sdGlwLnRzIiksIHcgPSBwKCIuL3NyYy91aS9jb21wb25lbnRzL3ZvdEJ1dHRvbi50cyIpLCBUID0gcCgiLi9zcmMvdWkvY29tcG9uZW50cy92b3RNZW51LnRzIiksIEUgPSBwKCIuL3NyYy91aS9pY29ucy50cyIpLCBEID0gcCgiLi9zcmMvY29uZmlnL2NvbmZpZy5qcyIpLCBPID0gcCgiLi9zcmMvY29yZS9ldmVudEltcGwudHMiKSwgQSA9IHAoIi4vc3JjL2xvY2FsaXphdGlvbi9sb2NhbGl6YXRpb25Qcm92aWRlci50cyIpLCBqID0gcCgiLi9zcmMvdXRpbHMvc3RvcmFnZS50cyIpLCBGID0gcCgiLi9zcmMvdXRpbHMvdXRpbHMudHMiKSwgVSA9IHAoIi4vc3JjL3VpL2NvbXBvbmVudHMvZG93bmxvYWRCdXR0b24udHMiKSwgVyA9IHAoIi4vc3JjL3VpL2NvbXBvbmVudHMvbGFiZWwudHMiKSwgRyA9IGQoWwoJCQkJCQlnLAoJCQkJCQlfLAoJCQkJCQl2LAoJCQkJCQliLAoJCQkJCQl4LAoJCQkJCQlDLAoJCQkJCQl3LAoJCQkJCQlULAoJCQkJCQlBLAoJCQkJCQlqLAoJCQkJCQlGLAoJCQkJCQlVLAoJCQkJCQlXCgkJCQkJXSk7CgkJCQkJW2csIF8sIHYsIGIsIHgsIEMsIHcsIFQsIEEsIGosIEYsIFUsIFddID0gRy50aGVuID8gKGF3YWl0IEcpKCkgOiBHOwoJCQkJCWNsYXNzIE92ZXJsYXlWaWV3IHsKCQkJCQkJcm9vdDsKCQkJCQkJdG9vbHRpcExheW91dFJvb3Q7CgkJCQkJCXBvcnRhbENvbnRhaW5lcjsKCQkJCQkJZ2xvYmFsUG9ydGFsOwoJCQkJCQlkcmFnZ2luZyA9ICExOwoJCQkJCQlpbml0aWFsaXplZCA9ICExOwoJCQkJCQlkYXRhOwoJCQkJCQl2aWRlb0hhbmRsZXI7CgkJCQkJCWNhbmNlbERyYWdnaW5nRXZlbnRzID0gWyJwb2ludGVyY2FuY2VsIiwgInRvdWNoY2FuY2VsIl07CgkJCQkJCW9uQ2xpY2tTZXR0aW5ncyA9IG5ldyBPLlooKTsKCQkJCQkJb25DbGlja1BpUCA9IG5ldyBPLlooKTsKCQkJCQkJb25DbGlja1RyYW5zbGF0ZSA9IG5ldyBPLlooKTsKCQkJCQkJb25DbGlja0Rvd25sb2FkVHJhbnNsYXRpb24gPSBuZXcgTy5aKCk7CgkJCQkJCW9uQ2xpY2tEb3dubG9hZFN1YnRpdGxlcyA9IG5ldyBPLlooKTsKCQkJCQkJb25TZWxlY3RGcm9tTGFuZ3VhZ2UgPSBuZXcgTy5aKCk7CgkJCQkJCW9uU2VsZWN0VG9MYW5ndWFnZSA9IG5ldyBPLlooKTsKCQkJCQkJb25TZWxlY3RTdWJ0aXRsZXMgPSBuZXcgTy5aKCk7CgkJCQkJCW9uSW5wdXRWaWRlb1ZvbHVtZSA9IG5ldyBPLlooKTsKCQkJCQkJb25JbnB1dFRyYW5zbGF0aW9uVm9sdW1lID0gbmV3IE8uWigpOwoJCQkJCQl2b3RPdmVybGF5UG9ydGFsOwoJCQkJCQl2b3RCdXR0b247CgkJCQkJCXZvdEJ1dHRvblRvb2x0aXA7CgkJCQkJCXZvdE1lbnU7CgkJCQkJCWRvd25sb2FkVHJhbnNsYXRpb25CdXR0b247CgkJCQkJCWRvd25sb2FkU3VidGl0bGVzQnV0dG9uOwoJCQkJCQlvcGVuU2V0dGluZ3NCdXR0b247CgkJCQkJCWxhbmd1YWdlUGFpclNlbGVjdDsKCQkJCQkJc3VidGl0bGVzU2VsZWN0TGFiZWw7CgkJCQkJCXN1YnRpdGxlc1NlbGVjdDsKCQkJCQkJdmlkZW9Wb2x1bWVTbGlkZXJMYWJlbDsKCQkJCQkJdmlkZW9Wb2x1bWVTbGlkZXI7CgkJCQkJCXRyYW5sc2F0aW9uVm9sdW1lU2xpZGVyTGFiZWw7CgkJCQkJCXRyYW5zbGF0aW9uVm9sdW1lU2xpZGVyOwoJCQkJCQljb25zdHJ1Y3Rvcih7IHJvb3Q6IGQsIHBvcnRhbENvbnRhaW5lcjogZiwgdG9vbHRpcExheW91dFJvb3Q6IHAsIGdsb2JhbFBvcnRhbDogbSwgZGF0YTogaCA9IHt9LCB2aWRlb0hhbmRsZXI6IGcgfSkgewoJCQkJCQkJdGhpcy5yb290ID0gZCwgdGhpcy5wb3J0YWxDb250YWluZXIgPSBmLCB0aGlzLnRvb2x0aXBMYXlvdXRSb290ID0gcCwgdGhpcy5nbG9iYWxQb3J0YWwgPSBtLCB0aGlzLmRhdGEgPSBoLCB0aGlzLnZpZGVvSGFuZGxlciA9IGc7CgkJCQkJCX0KCQkJCQkJaXNJbml0aWFsaXplZCgpIHsKCQkJCQkJCXJldHVybiB0aGlzLmluaXRpYWxpemVkOwoJCQkJCQl9CgkJCQkJCWNhbGNCdXR0b25MYXlvdXQoZCkgewoJCQkJCQkJcmV0dXJuIHRoaXMuaXNCaWdDb250YWluZXIgJiYgWyJsZWZ0IiwgInJpZ2h0Il0uaW5jbHVkZXMoZCkgPyB7CgkJCQkJCQkJZGlyZWN0aW9uOiAiY29sdW1uIiwKCQkJCQkJCQlwb3NpdGlvbjogZAoJCQkJCQkJfSA6IHsKCQkJCQkJCQlkaXJlY3Rpb246ICJyb3ciLAoJCQkJCQkJCXBvc2l0aW9uOiAiZGVmYXVsdCIKCQkJCQkJCX07CgkJCQkJCX0KCQkJCQkJYWRkRXZlbnRMaXN0ZW5lcihkLCBmKSB7CgkJCQkJCQlzd2l0Y2ggKGQpIHsKCQkJCQkJCQljYXNlICJjbGljazpzZXR0aW5ncyI6CgkJCQkJCQkJCXRoaXMub25DbGlja1NldHRpbmdzLmFkZExpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJjbGljazpwaXAiOgoJCQkJCQkJCQl0aGlzLm9uQ2xpY2tQaVAuYWRkTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImNsaWNrOmRvd25sb2FkVHJhbnNsYXRpb24iOgoJCQkJCQkJCQl0aGlzLm9uQ2xpY2tEb3dubG9hZFRyYW5zbGF0aW9uLmFkZExpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJjbGljazpkb3dubG9hZFN1YnRpdGxlcyI6CgkJCQkJCQkJCXRoaXMub25DbGlja0Rvd25sb2FkU3VidGl0bGVzLmFkZExpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJjbGljazp0cmFuc2xhdGUiOgoJCQkJCQkJCQl0aGlzLm9uQ2xpY2tUcmFuc2xhdGUuYWRkTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImlucHV0OnZpZGVvVm9sdW1lIjoKCQkJCQkJCQkJdGhpcy5vbklucHV0VmlkZW9Wb2x1bWUuYWRkTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImlucHV0OnRyYW5zbGF0aW9uVm9sdW1lIjoKCQkJCQkJCQkJdGhpcy5vbklucHV0VHJhbnNsYXRpb25Wb2x1bWUuYWRkTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgInNlbGVjdDpmcm9tTGFuZ3VhZ2UiOgoJCQkJCQkJCQl0aGlzLm9uU2VsZWN0RnJvbUxhbmd1YWdlLmFkZExpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJzZWxlY3Q6dG9MYW5ndWFnZSI6CgkJCQkJCQkJCXRoaXMub25TZWxlY3RUb0xhbmd1YWdlLmFkZExpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJzZWxlY3Q6c3VidGl0bGVzIjoKCQkJCQkJCQkJdGhpcy5vblNlbGVjdFN1YnRpdGxlcy5hZGRMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQl9CgkJCQkJCQlyZXR1cm4gdGhpczsKCQkJCQkJfQoJCQkJCQlyZW1vdmVFdmVudExpc3RlbmVyKGQsIGYpIHsKCQkJCQkJCXN3aXRjaCAoZCkgewoJCQkJCQkJCWNhc2UgImNsaWNrOnNldHRpbmdzIjoKCQkJCQkJCQkJdGhpcy5vbkNsaWNrU2V0dGluZ3MucmVtb3ZlTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImNsaWNrOnBpcCI6CgkJCQkJCQkJCXRoaXMub25DbGlja1BpUC5yZW1vdmVMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAiY2xpY2s6ZG93bmxvYWRUcmFuc2xhdGlvbiI6CgkJCQkJCQkJCXRoaXMub25DbGlja0Rvd25sb2FkVHJhbnNsYXRpb24ucmVtb3ZlTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImNsaWNrOmRvd25sb2FkU3VidGl0bGVzIjoKCQkJCQkJCQkJdGhpcy5vbkNsaWNrRG93bmxvYWRTdWJ0aXRsZXMucmVtb3ZlTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImNsaWNrOnRyYW5zbGF0ZSI6CgkJCQkJCQkJCXRoaXMub25DbGlja1RyYW5zbGF0ZS5yZW1vdmVMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAiaW5wdXQ6dmlkZW9Wb2x1bWUiOgoJCQkJCQkJCQl0aGlzLm9uSW5wdXRWaWRlb1ZvbHVtZS5yZW1vdmVMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAiaW5wdXQ6dHJhbnNsYXRpb25Wb2x1bWUiOgoJCQkJCQkJCQl0aGlzLm9uSW5wdXRUcmFuc2xhdGlvblZvbHVtZS5yZW1vdmVMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAic2VsZWN0OmZyb21MYW5ndWFnZSI6CgkJCQkJCQkJCXRoaXMub25TZWxlY3RGcm9tTGFuZ3VhZ2UucmVtb3ZlTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgInNlbGVjdDp0b0xhbmd1YWdlIjoKCQkJCQkJCQkJdGhpcy5vblNlbGVjdFRvTGFuZ3VhZ2UucmVtb3ZlTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgInNlbGVjdDpzdWJ0aXRsZXMiOgoJCQkJCQkJCQl0aGlzLm9uU2VsZWN0U3VidGl0bGVzLnJlbW92ZUxpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCX0KCQkJCQkJCXJldHVybiB0aGlzOwoJCQkJCQl9CgkJCQkJCWluaXRVSShkID0gImRlZmF1bHQiKSB7CgkJCQkJCQlpZiAodGhpcy5pc0luaXRpYWxpemVkKCkpIHRocm93IEVycm9yKCJbVk9UXSBPdmVybGF5VmlldyBpcyBhbHJlYWR5IGluaXRpYWxpemVkIik7CgkJCQkJCQl0aGlzLmluaXRpYWxpemVkID0gITA7CgkJCQkJCQlsZXQgeyBwb3NpdGlvbjogZiwgZGlyZWN0aW9uOiBwIH0gPSB0aGlzLmNhbGNCdXR0b25MYXlvdXQoZCk7CgkJCQkJCQl0aGlzLnZvdE92ZXJsYXlQb3J0YWwgPSBnLkEuY3JlYXRlUG9ydGFsKCEwKSwgdGhpcy5wb3J0YWxDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy52b3RPdmVybGF5UG9ydGFsKSwgdGhpcy52b3RCdXR0b24gPSBuZXcgdy5BKHsKCQkJCQkJCQlwb3NpdGlvbjogZiwKCQkJCQkJCQlkaXJlY3Rpb246IHAsCgkJCQkJCQkJc3RhdHVzOiAibm9uZSIsCgkJCQkJCQkJbGFiZWxIdG1sOiBBLmouZ2V0KCJ0cmFuc2xhdGVWaWRlbyIpCgkJCQkJCQl9KSwgdGhpcy52b3RCdXR0b24ub3BhY2l0eSA9IDAsIHRoaXMucGlwQnV0dG9uVmlzaWJsZSB8fCB0aGlzLnZvdEJ1dHRvbi5zaG93UGlQQnV0dG9uKCExKSwgdGhpcy5yb290LmFwcGVuZENoaWxkKHRoaXMudm90QnV0dG9uLmNvbnRhaW5lciksIHRoaXMudm90QnV0dG9uVG9vbHRpcCA9IG5ldyBDLkEoewoJCQkJCQkJCXRhcmdldDogdGhpcy52b3RCdXR0b24udHJhbnNsYXRlQnV0dG9uLAoJCQkJCQkJCWNvbnRlbnQ6IEEuai5nZXQoInRyYW5zbGF0ZVZpZGVvIiksCgkJCQkJCQkJcG9zaXRpb246IHRoaXMudm90QnV0dG9uLnRvb2x0aXBQb3MsCgkJCQkJCQkJaGlkZGVuOiBwID09PSAicm93IiwKCQkJCQkJCQlib3JkZXJlZDogITEsCgkJCQkJCQkJcGFyZW50RWxlbWVudDogdGhpcy52b3RPdmVybGF5UG9ydGFsLAoJCQkJCQkJCWxheW91dFJvb3Q6IHRoaXMudG9vbHRpcExheW91dFJvb3QKCQkJCQkJCX0pLCB0aGlzLnZvdE1lbnUgPSBuZXcgVC5BKHsKCQkJCQkJCQl0aXRsZUh0bWw6IEEuai5nZXQoIlZPVFNldHRpbmdzIiksCgkJCQkJCQkJcG9zaXRpb246IGYKCQkJCQkJCX0pLCB0aGlzLnJvb3QuYXBwZW5kQ2hpbGQodGhpcy52b3RNZW51LmNvbnRhaW5lciksIHRoaXMuZG93bmxvYWRUcmFuc2xhdGlvbkJ1dHRvbiA9IG5ldyBVLkEoKSwgdGhpcy5kb3dubG9hZFRyYW5zbGF0aW9uQnV0dG9uLmhpZGRlbiA9ICEwLCB0aGlzLmRvd25sb2FkU3VidGl0bGVzQnV0dG9uID0gZy5BLmNyZWF0ZUljb25CdXR0b24oRS5VMCksIHRoaXMuZG93bmxvYWRTdWJ0aXRsZXNCdXR0b24uaGlkZGVuID0gITAsIHRoaXMub3BlblNldHRpbmdzQnV0dG9uID0gZy5BLmNyZWF0ZUljb25CdXR0b24oRS5jMSksIHRoaXMudm90TWVudS5oZWFkZXJDb250YWluZXIuYXBwZW5kKHRoaXMuZG93bmxvYWRUcmFuc2xhdGlvbkJ1dHRvbi5idXR0b24sIHRoaXMuZG93bmxvYWRTdWJ0aXRsZXNCdXR0b24sIHRoaXMub3BlblNldHRpbmdzQnV0dG9uKTsKCQkJCQkJCWxldCBtID0gdGhpcy52aWRlb0hhbmRsZXI/LnZpZGVvRGF0YT8uZGV0ZWN0ZWRMYW5ndWFnZSA/PyAiZW4iLCBPID0gdGhpcy5kYXRhLnJlc3BvbnNlTGFuZ3VhZ2UgPz8gInJ1IjsKCQkJCQkJCXRoaXMubGFuZ3VhZ2VQYWlyU2VsZWN0ID0gbmV3IF8uQSh7CgkJCQkJCQkJZnJvbTogewoJCQkJCQkJCQlzZWxlY3RUaXRsZTogQS5qLmdldChgbGFuZ3MuJHttfWApLAoJCQkJCQkJCQlpdGVtczogdi5BLmdlbkxhbmd1YWdlSXRlbXMoaC54bSwgbSkKCQkJCQkJCQl9LAoJCQkJCQkJCXRvOiB7CgkJCQkJCQkJCXNlbGVjdFRpdGxlOiBBLmouZ2V0KGBsYW5ncy4ke099YCksCgkJCQkJCQkJCWl0ZW1zOiB2LkEuZ2VuTGFuZ3VhZ2VJdGVtcyhoLlhoLCBPKQoJCQkJCQkJCX0KCQkJCQkJCX0pLCB0aGlzLnN1YnRpdGxlc1NlbGVjdExhYmVsID0gbmV3IFcuQSh7IGxhYmVsVGV4dDogQS5qLmdldCgiVk9UU3VidGl0bGVzIikgfSksIHRoaXMuc3VidGl0bGVzU2VsZWN0ID0gbmV3IHYuQSh7CgkJCQkJCQkJc2VsZWN0VGl0bGU6IEEuai5nZXQoIlZPVFN1YnRpdGxlc0Rpc2FibGVkIiksCgkJCQkJCQkJZGlhbG9nVGl0bGU6IEEuai5nZXQoIlZPVFN1YnRpdGxlcyIpLAoJCQkJCQkJCWxhYmVsRWxlbWVudDogdGhpcy5zdWJ0aXRsZXNTZWxlY3RMYWJlbC5jb250YWluZXIsCgkJCQkJCQkJZGlhbG9nUGFyZW50OiB0aGlzLmdsb2JhbFBvcnRhbCwKCQkJCQkJCQlpdGVtczogW3sKCQkJCQkJCQkJbGFiZWw6IEEuai5nZXQoIlZPVFN1YnRpdGxlc0Rpc2FibGVkIiksCgkJCQkJCQkJCXZhbHVlOiAiZGlzYWJsZWQiLAoJCQkJCQkJCQlzZWxlY3RlZDogITAKCQkJCQkJCQl9XQoJCQkJCQkJfSk7CgkJCQkJCQlsZXQgaiA9IHRoaXMudmlkZW9IYW5kbGVyID8gdGhpcy52aWRlb0hhbmRsZXIuZ2V0VmlkZW9Wb2x1bWUoKSAqIDEwMCA6IDEwMDsKCQkJCQkJCXRoaXMudmlkZW9Wb2x1bWVTbGlkZXJMYWJlbCA9IG5ldyB4LkEoewoJCQkJCQkJCWxhYmVsVGV4dDogQS5qLmdldCgiVk9UVm9sdW1lIiksCgkJCQkJCQkJdmFsdWU6IGoKCQkJCQkJCX0pLCB0aGlzLnZpZGVvVm9sdW1lU2xpZGVyID0gbmV3IGIuQSh7CgkJCQkJCQkJbGFiZWxIdG1sOiB0aGlzLnZpZGVvVm9sdW1lU2xpZGVyTGFiZWwuY29udGFpbmVyLAoJCQkJCQkJCXZhbHVlOiBqCgkJCQkJCQl9KSwgdGhpcy52aWRlb1ZvbHVtZVNsaWRlci5oaWRkZW4gPSAhdGhpcy5kYXRhLnNob3dWaWRlb1NsaWRlciB8fCB0aGlzLnZvdEJ1dHRvbi5zdGF0dXMgIT09ICJzdWNjZXNzIjsKCQkJCQkJCWxldCBGID0gdGhpcy5kYXRhLmRlZmF1bHRWb2x1bWUgPz8gMTAwOwoJCQkJCQkJcmV0dXJuIHRoaXMudHJhbmxzYXRpb25Wb2x1bWVTbGlkZXJMYWJlbCA9IG5ldyB4LkEoewoJCQkJCQkJCWxhYmVsVGV4dDogQS5qLmdldCgiVk9UVm9sdW1lVHJhbnNsYXRpb24iKSwKCQkJCQkJCQl2YWx1ZTogRgoJCQkJCQkJfSksIHRoaXMudHJhbnNsYXRpb25Wb2x1bWVTbGlkZXIgPSBuZXcgYi5BKHsKCQkJCQkJCQlsYWJlbEh0bWw6IHRoaXMudHJhbmxzYXRpb25Wb2x1bWVTbGlkZXJMYWJlbC5jb250YWluZXIsCgkJCQkJCQkJdmFsdWU6IEYsCgkJCQkJCQkJbWF4OiB0aGlzLmRhdGEuYXVkaW9Cb29zdGVyID8gRC5UOCA6IDEwMAoJCQkJCQkJfSksIHRoaXMudHJhbnNsYXRpb25Wb2x1bWVTbGlkZXIuaGlkZGVuID0gdGhpcy52b3RCdXR0b24uc3RhdHVzICE9PSAic3VjY2VzcyIsIHRoaXMudm90TWVudS5ib2R5Q29udGFpbmVyLmFwcGVuZCh0aGlzLmxhbmd1YWdlUGFpclNlbGVjdC5jb250YWluZXIsIHRoaXMuc3VidGl0bGVzU2VsZWN0LmNvbnRhaW5lciwgdGhpcy52aWRlb1ZvbHVtZVNsaWRlci5jb250YWluZXIsIHRoaXMudHJhbnNsYXRpb25Wb2x1bWVTbGlkZXIuY29udGFpbmVyKSwgdGhpczsKCQkJCQkJfQoJCQkJCQlpbml0VUlFdmVudHMoKSB7CgkJCQkJCQlpZiAoIXRoaXMuaXNJbml0aWFsaXplZCgpKSB0aHJvdyBFcnJvcigiW1ZPVF0gT3ZlcmxheVZpZXcgaXNuJ3QgaW5pdGlhbGl6ZWQiKTsKCQkJCQkJCXRoaXMudm90QnV0dG9uLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIChkKSA9PiB7CgkJCQkJCQkJZC5wcmV2ZW50RGVmYXVsdCgpLCBkLnN0b3BQcm9wYWdhdGlvbigpLCBkLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpOwoJCQkJCQkJfSksIHRoaXMudm90QnV0dG9uLnRyYW5zbGF0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVyZG93biIsIGFzeW5jICgpID0+IHsKCQkJCQkJCQl0aGlzLm9uQ2xpY2tUcmFuc2xhdGUuZGlzcGF0Y2goKTsKCQkJCQkJCX0pLCB0aGlzLnZvdEJ1dHRvbi5waXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcmRvd24iLCBhc3luYyAoKSA9PiB7CgkJCQkJCQkJdGhpcy5vbkNsaWNrUGlQLmRpc3BhdGNoKCk7CgkJCQkJCQl9KSwgdGhpcy52b3RCdXR0b24ubWVudUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVyZG93biIsIGFzeW5jICgpID0+IHsKCQkJCQkJCQl0aGlzLnZvdE1lbnUuaGlkZGVuID0gIXRoaXMudm90TWVudS5oaWRkZW47CgkJCQkJCQl9KTsKCQkJCQkJCWxldCBlbmFibGVEcmFnZ2luZ0J5RXZlbnQgPSAoZCkgPT4gewoJCQkJCQkJCXRoaXMuZHJhZ2dpbmcgPSAhMCwgZC5wcmV2ZW50RGVmYXVsdCgpOwoJCQkJCQkJfTsKCQkJCQkJCXRoaXMudm90QnV0dG9uLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVyZG93biIsIGVuYWJsZURyYWdnaW5nQnlFdmVudCksIHRoaXMucm9vdC5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVydXAiLCB0aGlzLmRpc2FibGVEcmFnZ2luZyksIHRoaXMucm9vdC5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVybW92ZSIsIHRoaXMuaGFuZGxlQ29udGFpbmVyUG9pbnRlck1vdmUpLCB0aGlzLnZvdEJ1dHRvbi5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsIGVuYWJsZURyYWdnaW5nQnlFdmVudCwgeyBwYXNzaXZlOiAhMSB9KSwgdGhpcy5yb290LmFkZEV2ZW50TGlzdGVuZXIoInRvdWNoZW5kIiwgdGhpcy5kaXNhYmxlRHJhZ2dpbmcpLCB0aGlzLnJvb3QuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2htb3ZlIiwgdGhpcy5oYW5kbGVDb250YWluZXJUb3VjaE1vdmUsIHsgcGFzc2l2ZTogITEgfSk7CgkJCQkJCQlmb3IgKGxldCBkIG9mIHRoaXMuY2FuY2VsRHJhZ2dpbmdFdmVudHMpIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoZCwgdGhpcy5kaXNhYmxlRHJhZ2dpbmcpOwoJCQkJCQkJdGhpcy52b3RNZW51LmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIChkKSA9PiB7CgkJCQkJCQkJZC5wcmV2ZW50RGVmYXVsdCgpLCBkLnN0b3BQcm9wYWdhdGlvbigpLCBkLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpOwoJCQkJCQkJfSk7CgkJCQkJCQlmb3IgKGxldCBkIG9mIFsicG9pbnRlcmRvd24iLCAibW91c2Vkb3duIl0pIHRoaXMudm90TWVudS5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihkLCAoZCkgPT4gewoJCQkJCQkJCWQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7CgkJCQkJCQl9KTsKCQkJCQkJCXJldHVybiB0aGlzLmRvd25sb2FkVHJhbnNsYXRpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBhc3luYyAoKSA9PiB7CgkJCQkJCQkJdGhpcy5vbkNsaWNrRG93bmxvYWRUcmFuc2xhdGlvbi5kaXNwYXRjaCgpOwoJCQkJCQkJfSksIHRoaXMuZG93bmxvYWRTdWJ0aXRsZXNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBhc3luYyAoKSA9PiB7CgkJCQkJCQkJdGhpcy5vbkNsaWNrRG93bmxvYWRTdWJ0aXRsZXMuZGlzcGF0Y2goKTsKCQkJCQkJCX0pLCB0aGlzLm9wZW5TZXR0aW5nc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGFzeW5jICgpID0+IHsKCQkJCQkJCQl0aGlzLm9uQ2xpY2tTZXR0aW5ncy5kaXNwYXRjaCgpOwoJCQkJCQkJfSksIHRoaXMubGFuZ3VhZ2VQYWlyU2VsZWN0LmZyb21TZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcigic2VsZWN0SXRlbSIsIChkKSA9PiB7CgkJCQkJCQkJdGhpcy52aWRlb0hhbmRsZXI/LnZpZGVvRGF0YSAmJiAodGhpcy52aWRlb0hhbmRsZXIudmlkZW9EYXRhLmRldGVjdGVkTGFuZ3VhZ2UgPSBkKSwgdGhpcy5vblNlbGVjdEZyb21MYW5ndWFnZS5kaXNwYXRjaChkKTsKCQkJCQkJCX0pLCB0aGlzLmxhbmd1YWdlUGFpclNlbGVjdC50b1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKCJzZWxlY3RJdGVtIiwgYXN5bmMgKGQpID0+IHsKCQkJCQkJCQl0aGlzLnZpZGVvSGFuZGxlcj8udmlkZW9EYXRhICYmICh0aGlzLnZpZGVvSGFuZGxlci50cmFuc2xhdGVUb0xhbmcgPSB0aGlzLnZpZGVvSGFuZGxlci52aWRlb0RhdGEucmVzcG9uc2VMYW5ndWFnZSA9IGQpLCB0aGlzLmRhdGEucmVzcG9uc2VMYW5ndWFnZSA9IGQsIGF3YWl0IGouZC5zZXQoInJlc3BvbnNlTGFuZ3VhZ2UiLCB0aGlzLmRhdGEucmVzcG9uc2VMYW5ndWFnZSksIHRoaXMub25TZWxlY3RUb0xhbmd1YWdlLmRpc3BhdGNoKGQpOwoJCQkJCQkJfSksIHRoaXMuc3VidGl0bGVzU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoImJlZm9yZU9wZW4iLCBhc3luYyAoZCkgPT4gewoJCQkJCQkJCWlmICghdGhpcy52aWRlb0hhbmRsZXI/LnZpZGVvRGF0YSkgcmV0dXJuOwoJCQkJCQkJCWxldCBmID0gYCR7dGhpcy52aWRlb0hhbmRsZXIudmlkZW9EYXRhLnZpZGVvSWR9XyR7dGhpcy52aWRlb0hhbmRsZXIudmlkZW9EYXRhLmRldGVjdGVkTGFuZ3VhZ2V9XyR7dGhpcy52aWRlb0hhbmRsZXIudmlkZW9EYXRhLnJlc3BvbnNlTGFuZ3VhZ2V9XyR7dGhpcy5kYXRhLnVzZUxpdmVseVZvaWNlfWA7CgkJCQkJCQkJaWYgKHRoaXMudmlkZW9IYW5kbGVyLmNhY2hlTWFuYWdlci5nZXRTdWJ0aXRsZXMoZikpIHJldHVybjsKCQkJCQkJCQl0aGlzLnZvdEJ1dHRvbi5sb2FkaW5nID0gITA7CgkJCQkJCQkJbGV0IHAgPSBnLkEuY3JlYXRlSW5saW5lTG9hZGVyKCk7CgkJCQkJCQkJcC5zdHlsZS5tYXJnaW4gPSAiMCBhdXRvIiwgZC5mb290ZXJDb250YWluZXIuYXBwZW5kQ2hpbGQocCksIGF3YWl0IHRoaXMudmlkZW9IYW5kbGVyLmxvYWRTdWJ0aXRsZXMoKSwgZC5mb290ZXJDb250YWluZXIucmVtb3ZlQ2hpbGQocCksIHRoaXMudm90QnV0dG9uLmxvYWRpbmcgPSAhMTsKCQkJCQkJCX0pLCB0aGlzLnN1YnRpdGxlc1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKCJzZWxlY3RJdGVtIiwgKGQpID0+IHsKCQkJCQkJCQl0aGlzLm9uU2VsZWN0U3VidGl0bGVzLmRpc3BhdGNoKGQpOwoJCQkJCQkJfSksIHRoaXMudmlkZW9Wb2x1bWVTbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLCAoZCwgZikgPT4gewoJCQkJCQkJCXRoaXMudmlkZW9Wb2x1bWVTbGlkZXJMYWJlbC52YWx1ZSA9IGQsICFmICYmIHRoaXMub25JbnB1dFZpZGVvVm9sdW1lLmRpc3BhdGNoKGQpOwoJCQkJCQkJfSksIHRoaXMudHJhbnNsYXRpb25Wb2x1bWVTbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLCBhc3luYyAoZCwgZikgPT4gewoJCQkJCQkJCXRoaXMudHJhbmxzYXRpb25Wb2x1bWVTbGlkZXJMYWJlbC52YWx1ZSA9IGQsIHRoaXMuZGF0YS5kZWZhdWx0Vm9sdW1lID0gZCwgYXdhaXQgai5kLnNldCgiZGVmYXVsdFZvbHVtZSIsIHRoaXMuZGF0YS5kZWZhdWx0Vm9sdW1lKSwgIWYgJiYgdGhpcy5vbklucHV0VHJhbnNsYXRpb25Wb2x1bWUuZGlzcGF0Y2goZCk7CgkJCQkJCQl9KSwgdGhpczsKCQkJCQkJfQoJCQkJCQl1cGRhdGVCdXR0b25MYXlvdXQoZCwgZikgewoJCQkJCQkJcmV0dXJuIHRoaXMuaXNJbml0aWFsaXplZCgpID8gKHRoaXMudm90TWVudS5wb3NpdGlvbiA9IGQsIHRoaXMudm90QnV0dG9uLnBvc2l0aW9uID0gZCwgdGhpcy52b3RCdXR0b24uZGlyZWN0aW9uID0gZiwgdGhpcy52b3RCdXR0b25Ub29sdGlwLmhpZGRlbiA9IGYgPT09ICJyb3ciLCB0aGlzLnZvdEJ1dHRvblRvb2x0aXAuc2V0UG9zaXRpb24odGhpcy52b3RCdXR0b24udG9vbHRpcFBvcyksIHRoaXMpIDogdGhpczsKCQkJCQkJfQoJCQkJCQlhc3luYyBtb3ZlQnV0dG9uKGQpIHsKCQkJCQkJCWlmICghdGhpcy5pc0luaXRpYWxpemVkKCkpIHJldHVybiB0aGlzOwoJCQkJCQkJbGV0IGYgPSB3LkEuY2FsY1Bvc2l0aW9uKGQsIHRoaXMuaXNCaWdDb250YWluZXIpOwoJCQkJCQkJaWYgKGYgPT09IHRoaXMudm90QnV0dG9uLnBvc2l0aW9uKSByZXR1cm4gdGhpczsKCQkJCQkJCWxldCBwID0gdy5BLmNhbGNEaXJlY3Rpb24oZik7CgkJCQkJCQlyZXR1cm4gdGhpcy5kYXRhLmJ1dHRvblBvcyA9IGYsIHRoaXMudXBkYXRlQnV0dG9uTGF5b3V0KGYsIHApLCB0aGlzLmlzQmlnQ29udGFpbmVyICYmIGF3YWl0IGouZC5zZXQoImJ1dHRvblBvcyIsIGYpLCB0aGlzOwoJCQkJCQl9CgkJCQkJCWFzeW5jIGhhbmRsZURyYWdNb3ZlKGQsIGYsIHAgPSB0aGlzLnJvb3QuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpIHsKCQkJCQkJCWlmICghdGhpcy5kcmFnZ2luZykgcmV0dXJuIHRoaXM7CgkJCQkJCQlkLnByZXZlbnREZWZhdWx0KCk7CgkJCQkJCQlsZXQgbSA9IGYgLSBwLmxlZnQsIGggPSBtIC8gcC53aWR0aCAqIDEwMDsKCQkJCQkJCXJldHVybiBhd2FpdCB0aGlzLm1vdmVCdXR0b24oaCksIHRoaXM7CgkJCQkJCX0KCQkJCQkJZGlzYWJsZURyYWdnaW5nID0gKCkgPT4gewoJCQkJCQkJdGhpcy5kcmFnZ2luZyA9ICExOwoJCQkJCQl9OwoJCQkJCQloYW5kbGVDb250YWluZXJQb2ludGVyTW92ZSA9IGFzeW5jIChkKSA9PiB7CgkJCQkJCQlhd2FpdCB0aGlzLmhhbmRsZURyYWdNb3ZlKGQsIGQuY2xpZW50WCk7CgkJCQkJCX07CgkJCQkJCWhhbmRsZUNvbnRhaW5lclRvdWNoTW92ZSA9IGFzeW5jIChkKSA9PiB7CgkJCQkJCQlhd2FpdCB0aGlzLmhhbmRsZURyYWdNb3ZlKGQsIGQudG91Y2hlc1swXS5jbGllbnRYKTsKCQkJCQkJfTsKCQkJCQkJdXBkYXRlQnV0dG9uT3BhY2l0eShkKSB7CgkJCQkJCQlyZXR1cm4gIXRoaXMuaXNJbml0aWFsaXplZCgpIHx8ICF0aGlzLnZvdE1lbnUuaGlkZGVuIHx8ICh0aGlzLnZvdEJ1dHRvbi5vcGFjaXR5ID0gZCksIHRoaXM7CgkJCQkJCX0KCQkJCQkJcmVsZWFzZVVJKGQgPSAhMSkgewoJCQkJCQkJaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQoKSkgdGhyb3cgRXJyb3IoIltWT1RdIE92ZXJsYXlWaWV3IGlzbid0IGluaXRpYWxpemVkIik7CgkJCQkJCQlyZXR1cm4gdGhpcy52b3RCdXR0b24ucmVtb3ZlKCksIHRoaXMudm90TWVudS5yZW1vdmUoKSwgdGhpcy52b3RCdXR0b25Ub29sdGlwLnJlbGVhc2UoKSwgdGhpcy52b3RPdmVybGF5UG9ydGFsLnJlbW92ZSgpLCB0aGlzLmluaXRpYWxpemVkID0gZCwgdGhpczsKCQkJCQkJfQoJCQkJCQlyZWxlYXNlVUlFdmVudHMoZCA9ICExKSB7CgkJCQkJCQlpZiAoIXRoaXMuaXNJbml0aWFsaXplZCgpKSB0aHJvdyBFcnJvcigiW1ZPVF0gT3ZlcmxheVZpZXcgaXNuJ3QgaW5pdGlhbGl6ZWQiKTsKCQkJCQkJCXRoaXMucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVydXAiLCB0aGlzLmRpc2FibGVEcmFnZ2luZyksIHRoaXMucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVybW92ZSIsIHRoaXMuaGFuZGxlQ29udGFpbmVyUG9pbnRlck1vdmUpLCB0aGlzLnJvb3QucmVtb3ZlRXZlbnRMaXN0ZW5lcigidG91Y2hlbmQiLCB0aGlzLmRpc2FibGVEcmFnZ2luZyksIHRoaXMucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCJ0b3VjaG1vdmUiLCB0aGlzLmhhbmRsZUNvbnRhaW5lclRvdWNoTW92ZSk7CgkJCQkJCQlmb3IgKGxldCBkIG9mIHRoaXMuY2FuY2VsRHJhZ2dpbmdFdmVudHMpIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZCwgdGhpcy5kaXNhYmxlRHJhZ2dpbmcpOwoJCQkJCQkJcmV0dXJuIHRoaXMub25DbGlja1NldHRpbmdzLmNsZWFyKCksIHRoaXMub25DbGlja1BpUC5jbGVhcigpLCB0aGlzLm9uQ2xpY2tUcmFuc2xhdGUuY2xlYXIoKSwgdGhpcy5vbkNsaWNrRG93bmxvYWRUcmFuc2xhdGlvbi5jbGVhcigpLCB0aGlzLm9uQ2xpY2tEb3dubG9hZFN1YnRpdGxlcy5jbGVhcigpLCB0aGlzLm9uU2VsZWN0RnJvbUxhbmd1YWdlLmNsZWFyKCksIHRoaXMub25TZWxlY3RUb0xhbmd1YWdlLmNsZWFyKCksIHRoaXMub25TZWxlY3RTdWJ0aXRsZXMuY2xlYXIoKSwgdGhpcy5vbklucHV0VmlkZW9Wb2x1bWUuY2xlYXIoKSwgdGhpcy5vbklucHV0VHJhbnNsYXRpb25Wb2x1bWUuY2xlYXIoKSwgdGhpcy5pbml0aWFsaXplZCA9IGQsIHRoaXM7CgkJCQkJCX0KCQkJCQkJcmVsZWFzZSgpIHsKCQkJCQkJCXJldHVybiB0aGlzLnJlbGVhc2VVSSghMCksIHRoaXMucmVsZWFzZVVJRXZlbnRzKCExKSwgdGhpczsKCQkJCQkJfQoJCQkJCQlnZXQgaXNCaWdDb250YWluZXIoKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5yb290LmNsaWVudFdpZHRoID4gNTUwOwoJCQkJCQl9CgkJCQkJCWdldCBwaXBCdXR0b25WaXNpYmxlKCkgewoJCQkJCQkJcmV0dXJuICgwLCBGLkJzKSgpICYmICEhdGhpcy5kYXRhLnNob3dQaVBCdXR0b247CgkJCQkJCX0KCQkJCQl9CgkJCQkJbSgpOwoJCQkJfSBjYXRjaCAoZCkgewoJCQkJCW0oZCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJIi4vc3JjL3VpL3ZpZXdzL3NldHRpbmdzLnRzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmEoZCwgYXN5bmMgKGQsIG0pID0+IHsKCQkJCXRyeSB7CgkJCQkJcC5kKGYsIHsgcjogKCkgPT4gU2V0dGluZ3NWaWV3IH0pOwoJCQkJCXZhciBoID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9jb3JlL2Rpc3QvdHlwZXMveWFuZGV4LmpzIiksIGcgPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL2V4dC9kaXN0L3R5cGVzL3NlcnZpY2UuanMiKSwgXyA9IHAoIi4vbm9kZV9tb2R1bGVzL0B2b3QuanMvc2hhcmVkL2Rpc3QvZGF0YS9jb25zdHMuanMiKSwgdiA9IHAoIi4vbm9kZV9tb2R1bGVzL2xpdC1odG1sL2xpdC1odG1sLmpzIiksIGIgPSBwKCIuL3NyYy9pbmRleC5qcyIpLCB4ID0gcCgiLi9zcmMvYXVkaW9Eb3dubG9hZGVyL2luZGV4LnRzIiksIEMgPSBwKCIuL3NyYy9hdWRpb0Rvd25sb2FkZXIvc3RyYXRlZ2llcy9pbmRleC50cyIpLCB3ID0gcCgiLi9zcmMvY29uZmlnL2NvbmZpZy5qcyIpLCBUID0gcCgiLi9zcmMvY29yZS9ldmVudEltcGwudHMiKSwgRSA9IHAoIi4vc3JjL2xvY2FsaXphdGlvbi9sb2NhbGl6YXRpb25Qcm92aWRlci50cyIpLCBEID0gcCgiLi9zcmMvdHlwZXMvY29tcG9uZW50cy92b3RCdXR0b24udHMiKSwgTyA9IHAoIi4vc3JjL3VpLmpzIiksIEEgPSBwKCIuL3NyYy91dGlscy9kZWJ1Zy50cyIpLCBqID0gcCgiLi9zcmMvdXRpbHMvZ20udHMiKSwgRiA9IHAoIi4vc3JjL3V0aWxzL3N0b3JhZ2UudHMiKSwgVSA9IHAoIi4vc3JjL3V0aWxzL3RyYW5zbGF0ZUFwaXMudHMiKSwgVyA9IHAoIi4vc3JjL3V0aWxzL3V0aWxzLnRzIiksIEcgPSBwKCIuL3NyYy91aS9jb21wb25lbnRzL2FjY291bnRCdXR0b24udHMiKSwgSyA9IHAoIi4vc3JjL3VpL2NvbXBvbmVudHMvY2hlY2tib3gudHMiKSwgcSA9IHAoIi4vc3JjL3VpL2NvbXBvbmVudHMvZGV0YWlscy50cyIpLCBKID0gcCgiLi9zcmMvdWkvY29tcG9uZW50cy9kaWFsb2cudHMiKSwgWSA9IHAoIi4vc3JjL3VpL2NvbXBvbmVudHMvaG90a2V5QnV0dG9uLnRzIiksIFggPSBwKCIuL3NyYy91aS9jb21wb25lbnRzL2xhYmVsLnRzIiksIFogPSBwKCIuL3NyYy91aS9jb21wb25lbnRzL3NlbGVjdC50cyIpLCBRID0gcCgiLi9zcmMvdWkvY29tcG9uZW50cy9zbGlkZXIudHMiKSwgZWUgPSBwKCIuL3NyYy91aS9jb21wb25lbnRzL3NsaWRlckxhYmVsLnRzIiksIHRlID0gcCgiLi9zcmMvdWkvY29tcG9uZW50cy90ZXh0ZmllbGQudHMiKSwgJCA9IHAoIi4vc3JjL3VpL2NvbXBvbmVudHMvdG9vbHRpcC50cyIpLCBuZSA9IHAoIi4vc3JjL3VpL2ljb25zLnRzIiksIHJlID0gZChbCgkJCQkJCWIsCgkJCQkJCXgsCgkJCQkJCUMsCgkJCQkJCUUsCgkJCQkJCU8sCgkJCQkJCWosCgkJCQkJCUYsCgkJCQkJCVUsCgkJCQkJCVcsCgkJCQkJCUcsCgkJCQkJCUssCgkJCQkJCXEsCgkJCQkJCUosCgkJCQkJCVksCgkJCQkJCVgsCgkJCQkJCVosCgkJCQkJCVEsCgkJCQkJCWVlLAoJCQkJCQl0ZSwKCQkJCQkJJAoJCQkJCV0pOwoJCQkJCVtiLCB4LCBDLCBFLCBPLCBqLCBGLCBVLCBXLCBHLCBLLCBxLCBKLCBZLCBYLCBaLCBRLCBlZSwgdGUsICRdID0gcmUudGhlbiA/IChhd2FpdCByZSkoKSA6IHJlOwoJCQkJCWNsYXNzIFNldHRpbmdzVmlldyB7CgkJCQkJCWdsb2JhbFBvcnRhbDsKCQkJCQkJaW5pdGlhbGl6ZWQgPSAhMTsKCQkJCQkJZGF0YTsKCQkJCQkJdmlkZW9IYW5kbGVyOwoJCQkJCQlvbkNsaWNrQnVnUmVwb3J0ID0gbmV3IFQuWigpOwoJCQkJCQlvbkNsaWNrUmVzZXRTZXR0aW5ncyA9IG5ldyBULlooKTsKCQkJCQkJb25VcGRhdGVBY2NvdW50ID0gbmV3IFQuWigpOwoJCQkJCQlvbkNoYW5nZUF1dG9UcmFuc2xhdGUgPSBuZXcgVC5aKCk7CgkJCQkJCW9uQ2hhbmdlU2hvd1ZpZGVvVm9sdW1lID0gbmV3IFQuWigpOwoJCQkJCQlvbkNoYW5nZUF1ZGlvQm9vc3RlciA9IG5ldyBULlooKTsKCQkJCQkJb25DaGFuZ2VVc2VMaXZlbHlWb2ljZSA9IG5ldyBULlooKTsKCQkJCQkJb25DaGFuZ2VTdWJ0aXRsZXNIaWdobGlnaHRXb3JkcyA9IG5ldyBULlooKTsKCQkJCQkJb25DaGFuZ2VQcm94eVdvcmtlckhvc3QgPSBuZXcgVC5aKCk7CgkJCQkJCW9uQ2hhbmdlVXNlTmV3QXVkaW9QbGF5ZXIgPSBuZXcgVC5aKCk7CgkJCQkJCW9uQ2hhbmdlT25seUJ5cGFzc01lZGlhQ1NQID0gbmV3IFQuWigpOwoJCQkJCQlvbkNoYW5nZVNob3dQaVBCdXR0b24gPSBuZXcgVC5aKCk7CgkJCQkJCW9uSW5wdXRTdWJ0aXRsZXNNYXhMZW5ndGggPSBuZXcgVC5aKCk7CgkJCQkJCW9uSW5wdXRTdWJ0aXRsZXNGb250U2l6ZSA9IG5ldyBULlooKTsKCQkJCQkJb25JbnB1dFN1YnRpdGxlc0JhY2tncm91bmRPcGFjaXR5ID0gbmV3IFQuWigpOwoJCQkJCQlvbklucHV0QXV0b0hpZGVCdXR0b25EZWxheSA9IG5ldyBULlooKTsKCQkJCQkJb25TZWxlY3RJdGVtUHJveHlUcmFuc2xhdGlvblN0YXR1cyA9IG5ldyBULlooKTsKCQkJCQkJb25TZWxlY3RJdGVtVHJhbnNsYXRpb25UZXh0U2VydmljZSA9IG5ldyBULlooKTsKCQkJCQkJb25TZWxlY3RJdGVtQnV0dG9uUG9zaXRpb24gPSBuZXcgVC5aKCk7CgkJCQkJCW9uU2VsZWN0SXRlbU1lbnVMYW5ndWFnZSA9IG5ldyBULlooKTsKCQkJCQkJZGlhbG9nOwoJCQkJCQlhY2NvdW50SGVhZGVyOwoJCQkJCQlhY2NvdW50QnV0dG9uOwoJCQkJCQlhY2NvdW50QnV0dG9uUmVmcmVzaFRvb2x0aXA7CgkJCQkJCWFjY291bnRCdXR0b25Ub2tlblRvb2x0aXA7CgkJCQkJCXRyYW5zbGF0aW9uU2V0dGluZ3NIZWFkZXI7CgkJCQkJCWF1dG9UcmFuc2xhdGVDaGVja2JveDsKCQkJCQkJZG9udFRyYW5zbGF0ZUxhbmd1YWdlc0NoZWNrYm94OwoJCQkJCQlkb250VHJhbnNsYXRlTGFuZ3VhZ2VzU2VsZWN0OwoJCQkJCQlhdXRvU2V0Vm9sdW1lU2xpZGVyTGFiZWw7CgkJCQkJCWF1dG9TZXRWb2x1bWVDaGVja2JveDsKCQkJCQkJYXV0b1NldFZvbHVtZVNsaWRlcjsKCQkJCQkJc2hvd1ZpZGVvVm9sdW1lU2xpZGVyQ2hlY2tib3g7CgkJCQkJCWF1ZGlvQm9vc3RlckNoZWNrYm94OwoJCQkJCQlhdWRpb0Jvb3N0ZXJUb29sdGlwOwoJCQkJCQlzeW5jVm9sdW1lQ2hlY2tib3g7CgkJCQkJCWRvd25sb2FkV2l0aE5hbWVDaGVja2JveDsKCQkJCQkJc2VuZE5vdGlmeU9uQ29tcGxldGVDaGVja2JveDsKCQkJCQkJdXNlTGl2ZWx5Vm9pY2VDaGVja2JveDsKCQkJCQkJdXNlTGl2ZWx5Vm9pY2VUb29sdGlwOwoJCQkJCQl1c2VBdWRpb0Rvd25sb2FkQ2hlY2tib3g7CgkJCQkJCXVzZUF1ZGlvRG93bmxvYWRDaGVja2JveExhYmVsOwoJCQkJCQl1c2VBdWRpb0Rvd25sb2FkQ2hlY2tib3hUb29sdGlwOwoJCQkJCQlzdWJ0aXRsZXNTZXR0aW5nc0hlYWRlcjsKCQkJCQkJc3VidGl0bGVzRG93bmxvYWRGb3JtYXRTZWxlY3RMYWJlbDsKCQkJCQkJc3VidGl0bGVzRG93bmxvYWRGb3JtYXRTZWxlY3Q7CgkJCQkJCXN1YnRpdGxlc0Rlc2lnbkRldGFpbHM7CgkJCQkJCWhvdGtleXNTZXR0aW5nc0hlYWRlcjsKCQkJCQkJdHJhbnNsYXRlSG90a2V5QnV0dG9uOwoJCQkJCQlwcm94eVNldHRpbmdzSGVhZGVyOwoJCQkJCQlwcm94eU0zVThIb3N0VGV4dGZpZWxkOwoJCQkJCQlwcm94eVdvcmtlckhvc3RUZXh0ZmllbGQ7CgkJCQkJCXByb3h5VHJhbnNsYXRpb25TdGF0dXNTZWxlY3RMYWJlbDsKCQkJCQkJcHJveHlUcmFuc2xhdGlvblN0YXR1c1NlbGVjdFRvb2x0aXA7CgkJCQkJCXByb3h5VHJhbnNsYXRpb25TdGF0dXNTZWxlY3Q7CgkJCQkJCW1pc2NTZXR0aW5nc0hlYWRlcjsKCQkJCQkJdHJhbnNsYXRlQVBJRXJyb3JzQ2hlY2tib3g7CgkJCQkJCXVzZU5ld0F1ZGlvUGxheWVyQ2hlY2tib3g7CgkJCQkJCXVzZU5ld0F1ZGlvUGxheWVyVG9vbHRpcDsKCQkJCQkJb25seUJ5cGFzc01lZGlhQ1NQQ2hlY2tib3g7CgkJCQkJCW9ubHlCeXBhc3NNZWRpYUNTUFRvb2x0aXA7CgkJCQkJCXRyYW5zbGF0aW9uVGV4dFNlcnZpY2VMYWJlbDsKCQkJCQkJdHJhbnNsYXRpb25UZXh0U2VydmljZVNlbGVjdDsKCQkJCQkJdHJhbnNsYXRpb25UZXh0U2VydmljZVRvb2x0aXA7CgkJCQkJCWRldGVjdFNlcnZpY2VMYWJlbDsKCQkJCQkJZGV0ZWN0U2VydmljZVNlbGVjdDsKCQkJCQkJYXBwZWFyYW5jZURldGFpbHM7CgkJCQkJCWFib3V0RXh0ZW5zaW9uRGV0YWlsczsKCQkJCQkJYnVnUmVwb3J0QnV0dG9uOwoJCQkJCQlyZXNldFNldHRpbmdzQnV0dG9uOwoJCQkJCQljb25zdHJ1Y3Rvcih7IGdsb2JhbFBvcnRhbDogZCwgZGF0YTogZiA9IHt9LCB2aWRlb0hhbmRsZXI6IHAgfSkgewoJCQkJCQkJdGhpcy5nbG9iYWxQb3J0YWwgPSBkLCB0aGlzLmRhdGEgPSBmLCB0aGlzLnZpZGVvSGFuZGxlciA9IHA7CgkJCQkJCX0KCQkJCQkJaXNJbml0aWFsaXplZCgpIHsKCQkJCQkJCXJldHVybiB0aGlzLmluaXRpYWxpemVkOwoJCQkJCQl9CgkJCQkJCWluaXRVSSgpIHsKCQkJCQkJCWlmICh0aGlzLmlzSW5pdGlhbGl6ZWQoKSkgdGhyb3cgRXJyb3IoIltWT1RdIFNldHRpbmdzVmlldyBpcyBhbHJlYWR5IGluaXRpYWxpemVkIik7CgkJCQkJCQl0aGlzLmluaXRpYWxpemVkID0gITAsIHRoaXMuZGlhbG9nID0gbmV3IEouQSh7IHRpdGxlSHRtbDogRS5qLmdldCgiVk9UU2V0dGluZ3MiKSB9KSwgdGhpcy5nbG9iYWxQb3J0YWwuYXBwZW5kQ2hpbGQodGhpcy5kaWFsb2cuY29udGFpbmVyKSwgdGhpcy5hY2NvdW50SGVhZGVyID0gTy5BLmNyZWF0ZUhlYWRlcihFLmouZ2V0KCJWT1RNeUFjY291bnQiKSksIHRoaXMuYWNjb3VudEJ1dHRvbiA9IG5ldyBHLkEoewoJCQkJCQkJCWF2YXRhcklkOiB0aGlzLmRhdGEuYWNjb3VudD8uYXZhdGFySWQsCgkJCQkJCQkJdXNlcm5hbWU6IHRoaXMuZGF0YS5hY2NvdW50Py51c2VybmFtZSwKCQkJCQkJCQlsb2dnZWRJbjogISF0aGlzLmRhdGEuYWNjb3VudD8udG9rZW4KCQkJCQkJCX0pLCBGLmQuaXNTdXBwb3J0T25seUxTID8gKHRoaXMuYWNjb3VudEJ1dHRvbi5yZWZyZXNoQnV0dG9uLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCAidHJ1ZSIpLCB0aGlzLmFjY291bnRCdXR0b24uYWN0aW9uQnV0dG9uLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCAidHJ1ZSIpKSA6IHRoaXMuYWNjb3VudEJ1dHRvblJlZnJlc2hUb29sdGlwID0gbmV3ICQuQSh7CgkJCQkJCQkJdGFyZ2V0OiB0aGlzLmFjY291bnRCdXR0b24ucmVmcmVzaEJ1dHRvbiwKCQkJCQkJCQljb250ZW50OiBFLmouZ2V0KCJWT1RSZWZyZXNoIiksCgkJCQkJCQkJcG9zaXRpb246ICJib3R0b20iLAoJCQkJCQkJCWJhY2tncm91bmRDb2xvcjogInZhcigtLXZvdC1oZWxwZXItb25kaWFsb2cpIiwKCQkJCQkJCQlwYXJlbnRFbGVtZW50OiB0aGlzLmdsb2JhbFBvcnRhbAoJCQkJCQkJfSksIHRoaXMuYWNjb3VudEJ1dHRvblRva2VuVG9vbHRpcCA9IG5ldyAkLkEoewoJCQkJCQkJCXRhcmdldDogdGhpcy5hY2NvdW50QnV0dG9uLnRva2VuQnV0dG9uLAoJCQkJCQkJCWNvbnRlbnQ6IEUuai5nZXQoIlZPVExvZ2luVmlhVG9rZW4iKSwKCQkJCQkJCQlwb3NpdGlvbjogImJvdHRvbSIsCgkJCQkJCQkJYmFja2dyb3VuZENvbG9yOiAidmFyKC0tdm90LWhlbHBlci1vbmRpYWxvZykiLAoJCQkJCQkJCXBhcmVudEVsZW1lbnQ6IHRoaXMuZ2xvYmFsUG9ydGFsCgkJCQkJCQl9KSwgdGhpcy50cmFuc2xhdGlvblNldHRpbmdzSGVhZGVyID0gTy5BLmNyZWF0ZUhlYWRlcihFLmouZ2V0KCJ0cmFuc2xhdGlvblNldHRpbmdzIikpLCB0aGlzLmF1dG9UcmFuc2xhdGVDaGVja2JveCA9IG5ldyBLLkEoewoJCQkJCQkJCWxhYmVsSHRtbDogRS5qLmdldCgiVk9UQXV0b1RyYW5zbGF0ZSIpLAoJCQkJCQkJCWNoZWNrZWQ6IHRoaXMuZGF0YS5hdXRvVHJhbnNsYXRlCgkJCQkJCQl9KTsKCQkJCQkJCWxldCBkID0gdGhpcy5kYXRhLmRvbnRUcmFuc2xhdGVMYW5ndWFnZXMgPz8gW107CgkJCQkJCQl0aGlzLmRvbnRUcmFuc2xhdGVMYW5ndWFnZXNDaGVja2JveCA9IG5ldyBLLkEoewoJCQkJCQkJCWxhYmVsSHRtbDogRS5qLmdldCgiRG9udFRyYW5zbGF0ZVNlbGVjdGVkTGFuZ3VhZ2VzIiksCgkJCQkJCQkJY2hlY2tlZDogdGhpcy5kYXRhLmVuYWJsZWREb250VHJhbnNsYXRlTGFuZ3VhZ2VzCgkJCQkJCQl9KSwgdGhpcy5kb250VHJhbnNsYXRlTGFuZ3VhZ2VzU2VsZWN0ID0gbmV3IFouQSh7CgkJCQkJCQkJZGlhbG9nUGFyZW50OiB0aGlzLmdsb2JhbFBvcnRhbCwKCQkJCQkJCQlkaWFsb2dUaXRsZTogRS5qLmdldCgiRG9udFRyYW5zbGF0ZVNlbGVjdGVkTGFuZ3VhZ2VzIiksCgkJCQkJCQkJc2VsZWN0VGl0bGU6IGQubWFwKChkKSA9PiBFLmouZ2V0KGBsYW5ncy4ke2R9YCkpLmpvaW4oIiwgIikgPz8gRS5qLmdldCgiRG9udFRyYW5zbGF0ZVNlbGVjdGVkTGFuZ3VhZ2VzIiksCgkJCQkJCQkJaXRlbXM6IFouQS5nZW5MYW5ndWFnZUl0ZW1zKF8ueG0pLm1hcCgoZikgPT4gKHsKCQkJCQkJCQkJLi4uZiwKCQkJCQkJCQkJc2VsZWN0ZWQ6IGQuaW5jbHVkZXMoZi52YWx1ZSkKCQkJCQkJCQl9KSksCgkJCQkJCQkJbXVsdGlTZWxlY3Q6ICEwLAoJCQkJCQkJCWxhYmVsRWxlbWVudDogdGhpcy5kb250VHJhbnNsYXRlTGFuZ3VhZ2VzQ2hlY2tib3guY29udGFpbmVyCgkJCQkJCQl9KTsKCQkJCQkJCWxldCBmID0gdGhpcy5kYXRhLmF1dG9Wb2x1bWUgPz8gdy5KRDsKCQkJCQkJCXRoaXMuYXV0b1NldFZvbHVtZVNsaWRlckxhYmVsID0gbmV3IGVlLkEoewoJCQkJCQkJCWxhYmVsVGV4dDogRS5qLmdldCgiVk9UQXV0b1NldFZvbHVtZSIpLAoJCQkJCQkJCXZhbHVlOiBmCgkJCQkJCQl9KSwgdGhpcy5hdXRvU2V0Vm9sdW1lQ2hlY2tib3ggPSBuZXcgSy5BKHsKCQkJCQkJCQlsYWJlbEh0bWw6IHRoaXMuYXV0b1NldFZvbHVtZVNsaWRlckxhYmVsLmNvbnRhaW5lciwKCQkJCQkJCQljaGVja2VkOiB0aGlzLmRhdGEuZW5hYmxlZEF1dG9Wb2x1bWUgPz8gITAKCQkJCQkJCX0pLCB0aGlzLmF1dG9TZXRWb2x1bWVTbGlkZXIgPSBuZXcgUS5BKHsKCQkJCQkJCQlsYWJlbEh0bWw6IHRoaXMuYXV0b1NldFZvbHVtZUNoZWNrYm94LmNvbnRhaW5lciwKCQkJCQkJCQl2YWx1ZTogZgoJCQkJCQkJfSksIHRoaXMuc2hvd1ZpZGVvVm9sdW1lU2xpZGVyQ2hlY2tib3ggPSBuZXcgSy5BKHsKCQkJCQkJCQlsYWJlbEh0bWw6IEUuai5nZXQoInNob3dWaWRlb1ZvbHVtZVNsaWRlciIpLAoJCQkJCQkJCWNoZWNrZWQ6IHRoaXMuZGF0YS5zaG93VmlkZW9TbGlkZXIKCQkJCQkJCX0pLCB0aGlzLmF1ZGlvQm9vc3RlckNoZWNrYm94ID0gbmV3IEsuQSh7CgkJCQkJCQkJbGFiZWxIdG1sOiBFLmouZ2V0KCJWT1RBdWRpb0Jvb3N0ZXIiKSwKCQkJCQkJCQljaGVja2VkOiB0aGlzLmRhdGEuYXVkaW9Cb29zdGVyCgkJCQkJCQl9KSwgdGhpcy52aWRlb0hhbmRsZXI/LmF1ZGlvQ29udGV4dCB8fCAodGhpcy5hdWRpb0Jvb3N0ZXJDaGVja2JveC5kaXNhYmxlZCA9ICEwLCB0aGlzLmF1ZGlvQm9vc3RlclRvb2x0aXAgPSBuZXcgJC5BKHsKCQkJCQkJCQl0YXJnZXQ6IHRoaXMuYXVkaW9Cb29zdGVyQ2hlY2tib3guY29udGFpbmVyLAoJCQkJCQkJCWNvbnRlbnQ6IEUuai5nZXQoIlZPVE5lZWRXZWJBdWRpb0FQSSIpLAoJCQkJCQkJCXBvc2l0aW9uOiAiYm90dG9tIiwKCQkJCQkJCQliYWNrZ3JvdW5kQ29sb3I6ICJ2YXIoLS12b3QtaGVscGVyLW9uZGlhbG9nKSIsCgkJCQkJCQkJcGFyZW50RWxlbWVudDogdGhpcy5nbG9iYWxQb3J0YWwKCQkJCQkJCX0pKSwgdGhpcy5zeW5jVm9sdW1lQ2hlY2tib3ggPSBuZXcgSy5BKHsKCQkJCQkJCQlsYWJlbEh0bWw6IEUuai5nZXQoIlZPVFN5bmNWb2x1bWUiKSwKCQkJCQkJCQljaGVja2VkOiB0aGlzLmRhdGEuc3luY1ZvbHVtZQoJCQkJCQkJfSksIHRoaXMuZG93bmxvYWRXaXRoTmFtZUNoZWNrYm94ID0gbmV3IEsuQSh7CgkJCQkJCQkJbGFiZWxIdG1sOiBFLmouZ2V0KCJWT1REb3dubG9hZFdpdGhOYW1lIiksCgkJCQkJCQkJY2hlY2tlZDogdGhpcy5kYXRhLmRvd25sb2FkV2l0aE5hbWUKCQkJCQkJCX0pLCB0aGlzLmRvd25sb2FkV2l0aE5hbWVDaGVja2JveC5kaXNhYmxlZCA9ICFqLnl4LCB0aGlzLnNlbmROb3RpZnlPbkNvbXBsZXRlQ2hlY2tib3ggPSBuZXcgSy5BKHsKCQkJCQkJCQlsYWJlbEh0bWw6IEUuai5nZXQoIlZPVFNlbmROb3RpZnlPbkNvbXBsZXRlIiksCgkJCQkJCQkJY2hlY2tlZDogdGhpcy5kYXRhLnNlbmROb3RpZnlPbkNvbXBsZXRlCgkJCQkJCQl9KSwgdGhpcy51c2VMaXZlbHlWb2ljZUNoZWNrYm94ID0gbmV3IEsuQSh7CgkJCQkJCQkJbGFiZWxIdG1sOiBFLmouZ2V0KCJWT1RVc2VMaXZlbHlWb2ljZSIpLAoJCQkJCQkJCWNoZWNrZWQ6IHRoaXMuZGF0YS51c2VMaXZlbHlWb2ljZQoJCQkJCQkJfSksIHRoaXMudXNlTGl2ZWx5Vm9pY2VUb29sdGlwID0gbmV3ICQuQSh7CgkJCQkJCQkJdGFyZ2V0OiB0aGlzLnVzZUxpdmVseVZvaWNlQ2hlY2tib3guY29udGFpbmVyLAoJCQkJCQkJCWNvbnRlbnQ6IEUuai5nZXQoIlZPVEFjY291bnRSZXF1aXJlZCIpLAoJCQkJCQkJCXBvc2l0aW9uOiAiYm90dG9tIiwKCQkJCQkJCQliYWNrZ3JvdW5kQ29sb3I6ICJ2YXIoLS12b3QtaGVscGVyLW9uZGlhbG9nKSIsCgkJCQkJCQkJcGFyZW50RWxlbWVudDogdGhpcy5nbG9iYWxQb3J0YWwsCgkJCQkJCQkJaGlkZGVuOiAhIXRoaXMuZGF0YS5hY2NvdW50Py50b2tlbgoJCQkJCQkJfSksIHRoaXMuZGF0YS5hY2NvdW50Py50b2tlbiB8fCAodGhpcy51c2VMaXZlbHlWb2ljZUNoZWNrYm94LmRpc2FibGVkID0gITApLCB0aGlzLnVzZUF1ZGlvRG93bmxvYWRDaGVja2JveExhYmVsID0gbmV3IFguQSh7CgkJCQkJCQkJbGFiZWxUZXh0OiBFLmouZ2V0KCJWT1RVc2VBdWRpb0Rvd25sb2FkIiksCgkJCQkJCQkJaWNvbjogbmUuWGQKCQkJCQkJCX0pLCB0aGlzLnVzZUF1ZGlvRG93bmxvYWRDaGVja2JveCA9IG5ldyBLLkEoewoJCQkJCQkJCWxhYmVsSHRtbDogdGhpcy51c2VBdWRpb0Rvd25sb2FkQ2hlY2tib3hMYWJlbC5jb250YWluZXIsCgkJCQkJCQkJY2hlY2tlZDogdGhpcy5kYXRhLnVzZUF1ZGlvRG93bmxvYWQKCQkJCQkJCX0pLCBqLkIwIHx8ICh0aGlzLnVzZUF1ZGlvRG93bmxvYWRDaGVja2JveC5kaXNhYmxlZCA9ICEwKSwgdGhpcy51c2VBdWRpb0Rvd25sb2FkQ2hlY2tib3hUb29sdGlwID0gbmV3ICQuQSh7CgkJCQkJCQkJdGFyZ2V0OiB0aGlzLnVzZUF1ZGlvRG93bmxvYWRDaGVja2JveExhYmVsLmNvbnRhaW5lciwKCQkJCQkJCQljb250ZW50OiBFLmouZ2V0KCJWT1RVc2VBdWRpb0Rvd25sb2FkV2FybmluZyIpLAoJCQkJCQkJCXBvc2l0aW9uOiAiYm90dG9tIiwKCQkJCQkJCQliYWNrZ3JvdW5kQ29sb3I6ICJ2YXIoLS12b3QtaGVscGVyLW9uZGlhbG9nKSIsCgkJCQkJCQkJcGFyZW50RWxlbWVudDogdGhpcy5nbG9iYWxQb3J0YWwKCQkJCQkJCX0pLCB0aGlzLmRpYWxvZy5ib2R5Q29udGFpbmVyLmFwcGVuZCh0aGlzLmFjY291bnRIZWFkZXIsIHRoaXMuYWNjb3VudEJ1dHRvbi5jb250YWluZXIsIHRoaXMudHJhbnNsYXRpb25TZXR0aW5nc0hlYWRlciwgdGhpcy5hdXRvVHJhbnNsYXRlQ2hlY2tib3guY29udGFpbmVyLCB0aGlzLmRvbnRUcmFuc2xhdGVMYW5ndWFnZXNTZWxlY3QuY29udGFpbmVyLCB0aGlzLmF1dG9TZXRWb2x1bWVTbGlkZXIuY29udGFpbmVyLCB0aGlzLnNob3dWaWRlb1ZvbHVtZVNsaWRlckNoZWNrYm94LmNvbnRhaW5lciwgdGhpcy5hdWRpb0Jvb3N0ZXJDaGVja2JveC5jb250YWluZXIsIHRoaXMuc3luY1ZvbHVtZUNoZWNrYm94LmNvbnRhaW5lciwgdGhpcy5kb3dubG9hZFdpdGhOYW1lQ2hlY2tib3guY29udGFpbmVyLCB0aGlzLnNlbmROb3RpZnlPbkNvbXBsZXRlQ2hlY2tib3guY29udGFpbmVyLCB0aGlzLnVzZUxpdmVseVZvaWNlQ2hlY2tib3guY29udGFpbmVyLCB0aGlzLnVzZUF1ZGlvRG93bmxvYWRDaGVja2JveC5jb250YWluZXIpLCB0aGlzLnN1YnRpdGxlc1NldHRpbmdzSGVhZGVyID0gTy5BLmNyZWF0ZUhlYWRlcihFLmouZ2V0KCJzdWJ0aXRsZXNTZXR0aW5ncyIpKSwgdGhpcy5zdWJ0aXRsZXNEb3dubG9hZEZvcm1hdFNlbGVjdExhYmVsID0gbmV3IFguQSh7IGxhYmVsVGV4dDogRS5qLmdldCgiVk9UU3VidGl0bGVzRG93bmxvYWRGb3JtYXQiKSB9KSwgdGhpcy5zdWJ0aXRsZXNEb3dubG9hZEZvcm1hdFNlbGVjdCA9IG5ldyBaLkEoewoJCQkJCQkJCXNlbGVjdFRpdGxlOiB0aGlzLmRhdGEuc3VidGl0bGVzRG93bmxvYWRGb3JtYXQgPz8gRS5qLmdldCgiVk9UU3VidGl0bGVzRG93bmxvYWRGb3JtYXQiKSwKCQkJCQkJCQlkaWFsb2dUaXRsZTogRS5qLmdldCgiVk9UU3VidGl0bGVzRG93bmxvYWRGb3JtYXQiKSwKCQkJCQkJCQlkaWFsb2dQYXJlbnQ6IHRoaXMuZ2xvYmFsUG9ydGFsLAoJCQkJCQkJCWxhYmVsRWxlbWVudDogdGhpcy5zdWJ0aXRsZXNEb3dubG9hZEZvcm1hdFNlbGVjdExhYmVsLmNvbnRhaW5lciwKCQkJCQkJCQlpdGVtczogXy5FRy5tYXAoKGQpID0+ICh7CgkJCQkJCQkJCWxhYmVsOiBkLnRvVXBwZXJDYXNlKCksCgkJCQkJCQkJCXZhbHVlOiBkLAoJCQkJCQkJCQlzZWxlY3RlZDogZCA9PT0gdGhpcy5kYXRhLnN1YnRpdGxlc0Rvd25sb2FkRm9ybWF0CgkJCQkJCQkJfSkpCgkJCQkJCQl9KSwgdGhpcy5zdWJ0aXRsZXNEZXNpZ25EZXRhaWxzID0gbmV3IHEuQSh7IHRpdGxlSHRtbDogRS5qLmdldCgiVk9UU3VidGl0bGVzRGVzaWduIikgfSksIHRoaXMuZGlhbG9nLmJvZHlDb250YWluZXIuYXBwZW5kKHRoaXMuc3VidGl0bGVzU2V0dGluZ3NIZWFkZXIsIHRoaXMuc3VidGl0bGVzRG93bmxvYWRGb3JtYXRTZWxlY3QuY29udGFpbmVyLCB0aGlzLnN1YnRpdGxlc0Rlc2lnbkRldGFpbHMuY29udGFpbmVyKSwgdGhpcy5ob3RrZXlzU2V0dGluZ3NIZWFkZXIgPSBPLkEuY3JlYXRlSGVhZGVyKEUuai5nZXQoImhvdGtleXNTZXR0aW5ncyIpKSwgdGhpcy50cmFuc2xhdGVIb3RrZXlCdXR0b24gPSBuZXcgWS5BKHsKCQkJCQkJCQlsYWJlbEh0bWw6IEUuai5nZXQoInRyYW5zbGF0ZVZpZGVvIiksCgkJCQkJCQkJa2V5OiB0aGlzLmRhdGEudHJhbnNsYXRpb25Ib3RrZXkKCQkJCQkJCX0pLCB0aGlzLmRpYWxvZy5ib2R5Q29udGFpbmVyLmFwcGVuZCh0aGlzLmhvdGtleXNTZXR0aW5nc0hlYWRlciwgdGhpcy50cmFuc2xhdGVIb3RrZXlCdXR0b24uY29udGFpbmVyKSwgdGhpcy5wcm94eVNldHRpbmdzSGVhZGVyID0gTy5BLmNyZWF0ZUhlYWRlcihFLmouZ2V0KCJwcm94eVNldHRpbmdzIikpLCB0aGlzLnByb3h5TTNVOEhvc3RUZXh0ZmllbGQgPSBuZXcgdGUuQSh7CgkJCQkJCQkJbGFiZWxIdG1sOiBFLmouZ2V0KCJWT1RNM3U4UHJveHlIb3N0IiksCgkJCQkJCQkJdmFsdWU6IHRoaXMuZGF0YS5tM3U4UHJveHlIb3N0LAoJCQkJCQkJCXBsYWNlaG9sZGVyOiB3LnNlCgkJCQkJCQl9KSwgdGhpcy5wcm94eVdvcmtlckhvc3RUZXh0ZmllbGQgPSBuZXcgdGUuQSh7CgkJCQkJCQkJbGFiZWxIdG1sOiBFLmouZ2V0KCJWT1RQcm94eVdvcmtlckhvc3QiKSwKCQkJCQkJCQl2YWx1ZTogdGhpcy5kYXRhLnByb3h5V29ya2VySG9zdCwKCQkJCQkJCQlwbGFjZWhvbGRlcjogdy5QbQoJCQkJCQkJfSk7CgkJCQkJCQlsZXQgcCA9IFsKCQkJCQkJCQlFLmouZ2V0KCJWT1RUcmFuc2xhdGVQcm94eURpc2FibGVkIiksCgkJCQkJCQkJRS5qLmdldCgiVk9UVHJhbnNsYXRlUHJveHlFbmFibGVkIiksCgkJCQkJCQkJRS5qLmdldCgiVk9UVHJhbnNsYXRlUHJveHlFdmVyeXRoaW5nIikKCQkJCQkJCV0sIG0gPSB0aGlzLmRhdGEudHJhbnNsYXRlUHJveHlFbmFibGVkID8/IDAsIGggPSBiLmsgJiYgdy52Wi5pbmNsdWRlcyhiLmspOwoJCQkJCQkJdGhpcy5wcm94eVRyYW5zbGF0aW9uU3RhdHVzU2VsZWN0TGFiZWwgPSBuZXcgWC5BKHsKCQkJCQkJCQlpY29uOiBoID8gbmUuWGQgOiB2b2lkIDAsCgkJCQkJCQkJbGFiZWxUZXh0OiBFLmouZ2V0KCJWT1RUcmFuc2xhdGVQcm94eVN0YXR1cyIpCgkJCQkJCQl9KSwgaCAmJiAodGhpcy5wcm94eVRyYW5zbGF0aW9uU3RhdHVzU2VsZWN0VG9vbHRpcCA9IG5ldyAkLkEoewoJCQkJCQkJCXRhcmdldDogdGhpcy5wcm94eVRyYW5zbGF0aW9uU3RhdHVzU2VsZWN0TGFiZWwuaWNvbiwKCQkJCQkJCQljb250ZW50OiBFLmouZ2V0KCJWT1RUcmFuc2xhdGVQcm94eVN0YXR1c0RlZmF1bHQiKSwKCQkJCQkJCQlwb3NpdGlvbjogImJvdHRvbSIsCgkJCQkJCQkJYmFja2dyb3VuZENvbG9yOiAidmFyKC0tdm90LWhlbHBlci1vbmRpYWxvZykiLAoJCQkJCQkJCXBhcmVudEVsZW1lbnQ6IHRoaXMuZ2xvYmFsUG9ydGFsCgkJCQkJCQl9KSksIHRoaXMucHJveHlUcmFuc2xhdGlvblN0YXR1c1NlbGVjdCA9IG5ldyBaLkEoewoJCQkJCQkJCXNlbGVjdFRpdGxlOiBwW21dLAoJCQkJCQkJCWRpYWxvZ1RpdGxlOiBFLmouZ2V0KCJWT1RUcmFuc2xhdGVQcm94eVN0YXR1cyIpLAoJCQkJCQkJCWRpYWxvZ1BhcmVudDogdGhpcy5nbG9iYWxQb3J0YWwsCgkJCQkJCQkJbGFiZWxFbGVtZW50OiB0aGlzLnByb3h5VHJhbnNsYXRpb25TdGF0dXNTZWxlY3RMYWJlbC5jb250YWluZXIsCgkJCQkJCQkJaXRlbXM6IHAubWFwKChkLCBmKSA9PiAoewoJCQkJCQkJCQlsYWJlbDogZCwKCQkJCQkJCQkJdmFsdWU6IGYudG9TdHJpbmcoKSwKCQkJCQkJCQkJc2VsZWN0ZWQ6IGYgPT09IG0sCgkJCQkJCQkJCWRpc2FibGVkOiBmID09PSAwICYmIGoudXAKCQkJCQkJCQl9KSkKCQkJCQkJCX0pLCB0aGlzLmRpYWxvZy5ib2R5Q29udGFpbmVyLmFwcGVuZCh0aGlzLnByb3h5U2V0dGluZ3NIZWFkZXIsIHRoaXMucHJveHlNM1U4SG9zdFRleHRmaWVsZC5jb250YWluZXIsIHRoaXMucHJveHlXb3JrZXJIb3N0VGV4dGZpZWxkLmNvbnRhaW5lciwgdGhpcy5wcm94eVRyYW5zbGF0aW9uU3RhdHVzU2VsZWN0LmNvbnRhaW5lciksIHRoaXMubWlzY1NldHRpbmdzSGVhZGVyID0gTy5BLmNyZWF0ZUhlYWRlcihFLmouZ2V0KCJtaXNjU2V0dGluZ3MiKSksIHRoaXMudHJhbnNsYXRlQVBJRXJyb3JzQ2hlY2tib3ggPSBuZXcgSy5BKHsKCQkJCQkJCQlsYWJlbEh0bWw6IEUuai5nZXQoIlZPVFRyYW5zbGF0ZUFQSUVycm9ycyIpLAoJCQkJCQkJCWNoZWNrZWQ6IHRoaXMuZGF0YS50cmFuc2xhdGVBUElFcnJvcnMgPz8gITAKCQkJCQkJCX0pLCB0aGlzLnRyYW5zbGF0ZUFQSUVycm9yc0NoZWNrYm94LmhpZGRlbiA9IEUuai5sYW5nID09PSAicnUiLCB0aGlzLnVzZU5ld0F1ZGlvUGxheWVyQ2hlY2tib3ggPSBuZXcgSy5BKHsKCQkJCQkJCQlsYWJlbEh0bWw6IEUuai5nZXQoIlZPVE5ld0F1ZGlvUGxheWVyIiksCgkJCQkJCQkJY2hlY2tlZDogdGhpcy5kYXRhLm5ld0F1ZGlvUGxheWVyCgkJCQkJCQl9KSwgdGhpcy52aWRlb0hhbmRsZXI/LmF1ZGlvQ29udGV4dCB8fCAodGhpcy51c2VOZXdBdWRpb1BsYXllckNoZWNrYm94LmRpc2FibGVkID0gITAsIHRoaXMudXNlTmV3QXVkaW9QbGF5ZXJUb29sdGlwID0gbmV3ICQuQSh7CgkJCQkJCQkJdGFyZ2V0OiB0aGlzLnVzZU5ld0F1ZGlvUGxheWVyQ2hlY2tib3guY29udGFpbmVyLAoJCQkJCQkJCWNvbnRlbnQ6IEUuai5nZXQoIlZPVE5lZWRXZWJBdWRpb0FQSSIpLAoJCQkJCQkJCXBvc2l0aW9uOiAiYm90dG9tIiwKCQkJCQkJCQliYWNrZ3JvdW5kQ29sb3I6ICJ2YXIoLS12b3QtaGVscGVyLW9uZGlhbG9nKSIsCgkJCQkJCQkJcGFyZW50RWxlbWVudDogdGhpcy5nbG9iYWxQb3J0YWwKCQkJCQkJCX0pKTsKCQkJCQkJCWxldCBnID0gdGhpcy52aWRlb0hhbmRsZXI/LnNpdGUubmVlZEJ5cGFzc0NTUCA/IGAke0Uuai5nZXQoIlZPVE9ubHlCeXBhc3NNZWRpYUNTUCIpfSAoJHtFLmouZ2V0KCJWT1RNZWRpYUNTUEVuYWJsZWRPblNpdGUiKX0pYCA6IEUuai5nZXQoIlZPVE9ubHlCeXBhc3NNZWRpYUNTUCIpOwoJCQkJCQkJdGhpcy5vbmx5QnlwYXNzTWVkaWFDU1BDaGVja2JveCA9IG5ldyBLLkEoewoJCQkJCQkJCWxhYmVsSHRtbDogZywKCQkJCQkJCQljaGVja2VkOiB0aGlzLmRhdGEub25seUJ5cGFzc01lZGlhQ1NQLAoJCQkJCQkJCWlzU3ViQ2hlY2tib3g6ICEwCgkJCQkJCQl9KSwgdGhpcy52aWRlb0hhbmRsZXI/LmF1ZGlvQ29udGV4dCB8fCAodGhpcy5vbmx5QnlwYXNzTWVkaWFDU1BUb29sdGlwID0gbmV3ICQuQSh7CgkJCQkJCQkJdGFyZ2V0OiB0aGlzLm9ubHlCeXBhc3NNZWRpYUNTUENoZWNrYm94LmNvbnRhaW5lciwKCQkJCQkJCQljb250ZW50OiBFLmouZ2V0KCJWT1ROZWVkV2ViQXVkaW9BUEkiKSwKCQkJCQkJCQlwb3NpdGlvbjogImJvdHRvbSIsCgkJCQkJCQkJYmFja2dyb3VuZENvbG9yOiAidmFyKC0tdm90LWhlbHBlci1vbmRpYWxvZykiLAoJCQkJCQkJCXBhcmVudEVsZW1lbnQ6IHRoaXMuZ2xvYmFsUG9ydGFsCgkJCQkJCQl9KSksIHRoaXMub25seUJ5cGFzc01lZGlhQ1NQQ2hlY2tib3guZGlzYWJsZWQgPSAhdGhpcy5kYXRhLm5ld0F1ZGlvUGxheWVyICYmICEhdGhpcy52aWRlb0hhbmRsZXI/LmF1ZGlvQ29udGV4dCwgdGhpcy5kYXRhLm5ld0F1ZGlvUGxheWVyIHx8ICh0aGlzLm9ubHlCeXBhc3NNZWRpYUNTUENoZWNrYm94LmhpZGRlbiA9ICEwKSwgdGhpcy50cmFuc2xhdGlvblRleHRTZXJ2aWNlTGFiZWwgPSBuZXcgWC5BKHsKCQkJCQkJCQlsYWJlbFRleHQ6IEUuai5nZXQoIlZPVFRyYW5zbGF0aW9uVGV4dFNlcnZpY2UiKSwKCQkJCQkJCQlpY29uOiBuZS53MgoJCQkJCQkJfSk7CgkJCQkJCQlsZXQgdiA9IHRoaXMuZGF0YS50cmFuc2xhdGlvblNlcnZpY2UgPz8gdy5tRTsKCQkJCQkJCXRoaXMudHJhbnNsYXRpb25UZXh0U2VydmljZVNlbGVjdCA9IG5ldyBaLkEoewoJCQkJCQkJCXNlbGVjdFRpdGxlOiBFLmouZ2V0KGBzZXJ2aWNlcy4ke3Z9YCksCgkJCQkJCQkJZGlhbG9nVGl0bGU6IEUuai5nZXQoIlZPVFRyYW5zbGF0aW9uVGV4dFNlcnZpY2UiKSwKCQkJCQkJCQlkaWFsb2dQYXJlbnQ6IHRoaXMuZ2xvYmFsUG9ydGFsLAoJCQkJCQkJCWxhYmVsRWxlbWVudDogdGhpcy50cmFuc2xhdGlvblRleHRTZXJ2aWNlTGFiZWwuY29udGFpbmVyLAoJCQkJCQkJCWl0ZW1zOiBVLnZOLm1hcCgoZCkgPT4gKHsKCQkJCQkJCQkJbGFiZWw6IEUuai5nZXQoYHNlcnZpY2VzLiR7ZH1gKSwKCQkJCQkJCQkJdmFsdWU6IGQsCgkJCQkJCQkJCXNlbGVjdGVkOiBkID09PSB2CgkJCQkJCQkJfSkpCgkJCQkJCQl9KSwgdGhpcy50cmFuc2xhdGlvblRleHRTZXJ2aWNlVG9vbHRpcCA9IG5ldyAkLkEoewoJCQkJCQkJCXRhcmdldDogdGhpcy50cmFuc2xhdGlvblRleHRTZXJ2aWNlTGFiZWwuaWNvbiwKCQkJCQkJCQljb250ZW50OiBFLmouZ2V0KCJWT1ROb3RBZmZlY3RUb1ZvaWNlIiksCgkJCQkJCQkJcG9zaXRpb246ICJib3R0b20iLAoJCQkJCQkJCWJhY2tncm91bmRDb2xvcjogInZhcigtLXZvdC1oZWxwZXItb25kaWFsb2cpIiwKCQkJCQkJCQlwYXJlbnRFbGVtZW50OiB0aGlzLmdsb2JhbFBvcnRhbAoJCQkJCQkJfSksIHRoaXMuZGV0ZWN0U2VydmljZUxhYmVsID0gbmV3IFguQSh7IGxhYmVsVGV4dDogRS5qLmdldCgiVk9URGV0ZWN0U2VydmljZSIpIH0pOwoJCQkJCQkJbGV0IHggPSB0aGlzLmRhdGEuZGV0ZWN0U2VydmljZSA/PyB3LksyOwoJCQkJCQkJcmV0dXJuIHRoaXMuZGV0ZWN0U2VydmljZVNlbGVjdCA9IG5ldyBaLkEoewoJCQkJCQkJCXNlbGVjdFRpdGxlOiBFLmouZ2V0KGBzZXJ2aWNlcy4ke3h9YCksCgkJCQkJCQkJZGlhbG9nVGl0bGU6IEUuai5nZXQoIlZPVERldGVjdFNlcnZpY2UiKSwKCQkJCQkJCQlkaWFsb2dQYXJlbnQ6IHRoaXMuZ2xvYmFsUG9ydGFsLAoJCQkJCQkJCWxhYmVsRWxlbWVudDogdGhpcy5kZXRlY3RTZXJ2aWNlTGFiZWwuY29udGFpbmVyLAoJCQkJCQkJCWl0ZW1zOiBVLnFoLm1hcCgoZCkgPT4gKHsKCQkJCQkJCQkJbGFiZWw6IEUuai5nZXQoYHNlcnZpY2VzLiR7ZH1gKSwKCQkJCQkJCQkJdmFsdWU6IGQsCgkJCQkJCQkJCXNlbGVjdGVkOiBkID09PSB4CgkJCQkJCQkJfSkpCgkJCQkJCQl9KSwgdGhpcy5hcHBlYXJhbmNlRGV0YWlscyA9IG5ldyBxLkEoeyB0aXRsZUh0bWw6IEUuai5nZXQoImFwcGVhcmFuY2UiKSB9KSwgdGhpcy5hYm91dEV4dGVuc2lvbkRldGFpbHMgPSBuZXcgcS5BKHsgdGl0bGVIdG1sOiBFLmouZ2V0KCJhYm91dEV4dGVuc2lvbiIpIH0pLCB0aGlzLmJ1Z1JlcG9ydEJ1dHRvbiA9IE8uQS5jcmVhdGVPdXRsaW5lZEJ1dHRvbihFLmouZ2V0KCJWT1RCdWdSZXBvcnQiKSksIHRoaXMucmVzZXRTZXR0aW5nc0J1dHRvbiA9IE8uQS5jcmVhdGVCdXR0b24oRS5qLmdldCgicmVzZXRTZXR0aW5ncyIpKSwgdGhpcy5kaWFsb2cuYm9keUNvbnRhaW5lci5hcHBlbmQodGhpcy5taXNjU2V0dGluZ3NIZWFkZXIsIHRoaXMudHJhbnNsYXRlQVBJRXJyb3JzQ2hlY2tib3guY29udGFpbmVyLCB0aGlzLnVzZU5ld0F1ZGlvUGxheWVyQ2hlY2tib3guY29udGFpbmVyLCB0aGlzLm9ubHlCeXBhc3NNZWRpYUNTUENoZWNrYm94LmNvbnRhaW5lciwgdGhpcy50cmFuc2xhdGlvblRleHRTZXJ2aWNlU2VsZWN0LmNvbnRhaW5lciwgdGhpcy5kZXRlY3RTZXJ2aWNlU2VsZWN0LmNvbnRhaW5lciwgdGhpcy5hcHBlYXJhbmNlRGV0YWlscy5jb250YWluZXIsIHRoaXMuYWJvdXRFeHRlbnNpb25EZXRhaWxzLmNvbnRhaW5lciwgdGhpcy5idWdSZXBvcnRCdXR0b24sIHRoaXMucmVzZXRTZXR0aW5nc0J1dHRvbiksIHRoaXM7CgkJCQkJCX0KCQkJCQkJaW5pdFVJRXZlbnRzKCkgewoJCQkJCQkJaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQoKSkgdGhyb3cgRXJyb3IoIltWT1RdIFNldHRpbmdzVmlldyBpc24ndCBpbml0aWFsaXplZCIpOwoJCQkJCQkJcmV0dXJuIHRoaXMuYWNjb3VudEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGFzeW5jICgpID0+IHsKCQkJCQkJCQlpZiAoIUYuZC5pc1N1cHBvcnRPbmx5TFMpIHsKCQkJCQkJCQkJaWYgKHRoaXMuYWNjb3VudEJ1dHRvbi5sb2dnZWRJbikgcmV0dXJuIGF3YWl0IEYuZC5kZWxldGUoImFjY291bnQiKSwgdGhpcy5kYXRhLmFjY291bnQgPSB7fSwgdGhpcy51cGRhdGVBY2NvdW50SW5mbygpOwoJCQkJCQkJCQl3aW5kb3cub3Blbih3LnhXLCAiX2JsYW5rIik/LmZvY3VzKCk7CgkJCQkJCQkJfQoJCQkJCQkJfSksIHRoaXMuYWNjb3VudEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCJjbGljazpzZWNyZXQiLCBhc3luYyAoKSA9PiB7CgkJCQkJCQkJbGV0IGQgPSBuZXcgSi5BKHsKCQkJCQkJCQkJdGl0bGVIdG1sOiBFLmouZ2V0KCJWT1RMb2dpblZpYVRva2VuIiksCgkJCQkJCQkJCWlzVGVtcDogITAKCQkJCQkJCQl9KTsKCQkJCQkJCQl0aGlzLmdsb2JhbFBvcnRhbC5hcHBlbmRDaGlsZChkLmNvbnRhaW5lcik7CgkJCQkJCQkJbGV0IGYgPSBPLkEuY3JlYXRlRWwoInZvdC1ibG9jayIsIHZvaWQgMCwgRS5qLmdldCgiVk9UWWFuZGV4VG9rZW5JbmZvIikpLCBwID0gbmV3IHRlLkEoewoJCQkJCQkJCQlsYWJlbEh0bWw6IEUuai5nZXQoIlZPVFlhbmRleFRva2VuIiksCgkJCQkJCQkJCXZhbHVlOiB0aGlzLmRhdGEuYWNjb3VudD8udG9rZW4KCQkJCQkJCQl9KTsKCQkJCQkJCQlwLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGFzeW5jIChkKSA9PiB7CgkJCQkJCQkJCXRoaXMuZGF0YS5hY2NvdW50ID0gZCA/IHsKCQkJCQkJCQkJCWV4cGlyZXM6IERhdGUubm93KCkgKyAzMTUzNDE4ZTQsCgkJCQkJCQkJCQl0b2tlbjogZAoJCQkJCQkJCQl9IDoge30sIGF3YWl0IEYuZC5zZXQoImFjY291bnQiLCB0aGlzLmRhdGEuYWNjb3VudCksIHRoaXMudXBkYXRlQWNjb3VudEluZm8oKTsKCQkJCQkJCQl9KSwgZC5ib2R5Q29udGFpbmVyLmFwcGVuZChmLCBwLmNvbnRhaW5lcik7CgkJCQkJCQl9KSwgdGhpcy5hY2NvdW50QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoInJlZnJlc2giLCBhc3luYyAoKSA9PiB7CgkJCQkJCQkJRi5kLmlzU3VwcG9ydE9ubHlMUyB8fCAodGhpcy5kYXRhLmFjY291bnQgPSBhd2FpdCBGLmQuZ2V0KCJhY2NvdW50Iiwge30pLCB0aGlzLnVwZGF0ZUFjY291bnRJbmZvKCkpOwoJCQkJCQkJfSksIHRoaXMuYXV0b1RyYW5zbGF0ZUNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGFzeW5jIChkKSA9PiB7CgkJCQkJCQkJdGhpcy5kYXRhLmF1dG9UcmFuc2xhdGUgPSBkLCBhd2FpdCBGLmQuc2V0KCJhdXRvVHJhbnNsYXRlIiwgdGhpcy5kYXRhLmF1dG9UcmFuc2xhdGUpLCBBLkEubG9nKCJhdXRvVHJhbnNsYXRlIHZhbHVlIGNoYW5nZWQuIE5ldyB2YWx1ZToiLCBkKSwgdGhpcy5vbkNoYW5nZUF1dG9UcmFuc2xhdGUuZGlzcGF0Y2goZCk7CgkJCQkJCQl9KSwgdGhpcy5kb250VHJhbnNsYXRlTGFuZ3VhZ2VzQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgYXN5bmMgKGQpID0+IHsKCQkJCQkJCQl0aGlzLmRhdGEuZW5hYmxlZERvbnRUcmFuc2xhdGVMYW5ndWFnZXMgPSBkLCBhd2FpdCBGLmQuc2V0KCJlbmFibGVkRG9udFRyYW5zbGF0ZUxhbmd1YWdlcyIsIHRoaXMuZGF0YS5lbmFibGVkRG9udFRyYW5zbGF0ZUxhbmd1YWdlcyksIEEuQS5sb2coImVuYWJsZWREb250VHJhbnNsYXRlTGFuZ3VhZ2VzIHZhbHVlIGNoYW5nZWQuIE5ldyB2YWx1ZToiLCBkKTsKCQkJCQkJCX0pLCB0aGlzLmRvbnRUcmFuc2xhdGVMYW5ndWFnZXNTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcigic2VsZWN0SXRlbSIsIGFzeW5jIChkKSA9PiB7CgkJCQkJCQkJdGhpcy5kYXRhLmRvbnRUcmFuc2xhdGVMYW5ndWFnZXMgPSBkLCBhd2FpdCBGLmQuc2V0KCJkb250VHJhbnNsYXRlTGFuZ3VhZ2VzIiwgdGhpcy5kYXRhLmRvbnRUcmFuc2xhdGVMYW5ndWFnZXMpLCBBLkEubG9nKCJkb250VHJhbnNsYXRlTGFuZ3VhZ2VzIHZhbHVlIGNoYW5nZWQuIE5ldyB2YWx1ZToiLCBkKTsKCQkJCQkJCX0pLCB0aGlzLmF1dG9TZXRWb2x1bWVDaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBhc3luYyAoZCkgPT4gewoJCQkJCQkJCXRoaXMuZGF0YS5lbmFibGVkQXV0b1ZvbHVtZSA9IGQsIGF3YWl0IEYuZC5zZXQoImVuYWJsZWRBdXRvVm9sdW1lIiwgdGhpcy5kYXRhLmVuYWJsZWRBdXRvVm9sdW1lKSwgQS5BLmxvZygiZW5hYmxlZEF1dG9Wb2x1bWUgdmFsdWUgY2hhbmdlZC4gTmV3IHZhbHVlOiIsIGQpOwoJCQkJCQkJfSksIHRoaXMuYXV0b1NldFZvbHVtZVNsaWRlci5hZGRFdmVudExpc3RlbmVyKCJpbnB1dCIsIGFzeW5jIChkKSA9PiB7CgkJCQkJCQkJdGhpcy5kYXRhLmF1dG9Wb2x1bWUgPSB0aGlzLmF1dG9TZXRWb2x1bWVTbGlkZXJMYWJlbC52YWx1ZSA9IGQsIGF3YWl0IEYuZC5zZXQoImF1dG9Wb2x1bWUiLCB0aGlzLmRhdGEuYXV0b1ZvbHVtZSksIEEuQS5sb2coImF1dG9Wb2x1bWUgdmFsdWUgY2hhbmdlZC4gTmV3IHZhbHVlOiIsIGQpOwoJCQkJCQkJfSksIHRoaXMuc2hvd1ZpZGVvVm9sdW1lU2xpZGVyQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgYXN5bmMgKGQpID0+IHsKCQkJCQkJCQl0aGlzLmRhdGEuc2hvd1ZpZGVvU2xpZGVyID0gZCwgYXdhaXQgRi5kLnNldCgic2hvd1ZpZGVvU2xpZGVyIiwgdGhpcy5kYXRhLnNob3dWaWRlb1NsaWRlciksIEEuQS5sb2coInNob3dWaWRlb1ZvbHVtZVNsaWRlciB2YWx1ZSBjaGFuZ2VkLiBOZXcgdmFsdWU6IiwgZCksIHRoaXMub25DaGFuZ2VTaG93VmlkZW9Wb2x1bWUuZGlzcGF0Y2goZCk7CgkJCQkJCQl9KSwgdGhpcy5hdWRpb0Jvb3N0ZXJDaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBhc3luYyAoZCkgPT4gewoJCQkJCQkJCXRoaXMuZGF0YS5hdWRpb0Jvb3N0ZXIgPSBkLCBhd2FpdCBGLmQuc2V0KCJhdWRpb0Jvb3N0ZXIiLCB0aGlzLmRhdGEuYXVkaW9Cb29zdGVyKSwgQS5BLmxvZygiYXVkaW9Cb29zdGVyIHZhbHVlIGNoYW5nZWQuIE5ldyB2YWx1ZToiLCBkKSwgdGhpcy5vbkNoYW5nZUF1ZGlvQm9vc3Rlci5kaXNwYXRjaChkKTsKCQkJCQkJCX0pLCB0aGlzLnN5bmNWb2x1bWVDaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBhc3luYyAoZCkgPT4gewoJCQkJCQkJCXRoaXMuZGF0YS5zeW5jVm9sdW1lID0gZCwgYXdhaXQgRi5kLnNldCgic3luY1ZvbHVtZSIsIHRoaXMuZGF0YS5zeW5jVm9sdW1lKSwgQS5BLmxvZygic3luY1ZvbHVtZSB2YWx1ZSBjaGFuZ2VkLiBOZXcgdmFsdWU6IiwgZCk7CgkJCQkJCQl9KSwgdGhpcy5kb3dubG9hZFdpdGhOYW1lQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgYXN5bmMgKGQpID0+IHsKCQkJCQkJCQl0aGlzLmRhdGEuZG93bmxvYWRXaXRoTmFtZSA9IGQsIGF3YWl0IEYuZC5zZXQoImRvd25sb2FkV2l0aE5hbWUiLCB0aGlzLmRhdGEuZG93bmxvYWRXaXRoTmFtZSksIEEuQS5sb2coImRvd25sb2FkV2l0aE5hbWUgdmFsdWUgY2hhbmdlZC4gTmV3IHZhbHVlOiIsIGQpOwoJCQkJCQkJfSksIHRoaXMuc2VuZE5vdGlmeU9uQ29tcGxldGVDaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBhc3luYyAoZCkgPT4gewoJCQkJCQkJCXRoaXMuZGF0YS5zZW5kTm90aWZ5T25Db21wbGV0ZSA9IGQsIGF3YWl0IEYuZC5zZXQoInNlbmROb3RpZnlPbkNvbXBsZXRlIiwgdGhpcy5kYXRhLnNlbmROb3RpZnlPbkNvbXBsZXRlKSwgQS5BLmxvZygic2VuZE5vdGlmeU9uQ29tcGxldGUgdmFsdWUgY2hhbmdlZC4gTmV3IHZhbHVlOiIsIGQpOwoJCQkJCQkJfSksIHRoaXMudXNlTGl2ZWx5Vm9pY2VDaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBhc3luYyAoZCkgPT4gewoJCQkJCQkJCXRoaXMuZGF0YS51c2VMaXZlbHlWb2ljZSA9IGQsIGF3YWl0IEYuZC5zZXQoInVzZUxpdmVseVZvaWNlIiwgdGhpcy5kYXRhLnVzZUxpdmVseVZvaWNlKSwgQS5BLmxvZygidXNlTGl2ZWx5Vm9pY2UgdmFsdWUgY2hhbmdlZC4gTmV3IHZhbHVlOiIsIGQpLCB0aGlzLm9uQ2hhbmdlVXNlTGl2ZWx5Vm9pY2UuZGlzcGF0Y2goZCk7CgkJCQkJCQl9KSwgdGhpcy51c2VBdWRpb0Rvd25sb2FkQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgYXN5bmMgKGQpID0+IHsKCQkJCQkJCQl0aGlzLmRhdGEudXNlQXVkaW9Eb3dubG9hZCA9IGQsIGF3YWl0IEYuZC5zZXQoInVzZUF1ZGlvRG93bmxvYWQiLCB0aGlzLmRhdGEudXNlQXVkaW9Eb3dubG9hZCksIEEuQS5sb2coInVzZUF1ZGlvRG93bmxvYWQgdmFsdWUgY2hhbmdlZC4gTmV3IHZhbHVlOiIsIGQpOwoJCQkJCQkJfSksIHRoaXMuc3VidGl0bGVzRG93bmxvYWRGb3JtYXRTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcigic2VsZWN0SXRlbSIsIGFzeW5jIChkKSA9PiB7CgkJCQkJCQkJdGhpcy5kYXRhLnN1YnRpdGxlc0Rvd25sb2FkRm9ybWF0ID0gZCwgYXdhaXQgRi5kLnNldCgic3VidGl0bGVzRG93bmxvYWRGb3JtYXQiLCB0aGlzLmRhdGEuc3VidGl0bGVzRG93bmxvYWRGb3JtYXQpLCBBLkEubG9nKCJzdWJ0aXRsZXNEb3dubG9hZEZvcm1hdCB2YWx1ZSBjaGFuZ2VkLiBOZXcgdmFsdWU6IiwgZCk7CgkJCQkJCQl9KSwgdGhpcy5zdWJ0aXRsZXNEZXNpZ25EZXRhaWxzLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewoJCQkJCQkJCWxldCBkID0gbmV3IEouQSh7CgkJCQkJCQkJCXRpdGxlSHRtbDogRS5qLmdldCgiVk9UU3VidGl0bGVzRGVzaWduIiksCgkJCQkJCQkJCWlzVGVtcDogITAKCQkJCQkJCQl9KTsKCQkJCQkJCQl0aGlzLmdsb2JhbFBvcnRhbC5hcHBlbmRDaGlsZChkLmNvbnRhaW5lcik7CgkJCQkJCQkJbGV0IGYgPSBuZXcgSy5BKHsKCQkJCQkJCQkJbGFiZWxIdG1sOiBFLmouZ2V0KCJWT1RIaWdobGlnaHRXb3JkcyIpLAoJCQkJCQkJCQljaGVja2VkOiB0aGlzLmRhdGEuaGlnaGxpZ2h0V29yZHMKCQkJCQkJCQl9KSwgcCA9IHRoaXMuZGF0YS5zdWJ0aXRsZXNNYXhMZW5ndGggPz8gMzAwLCBtID0gbmV3IGVlLkEoewoJCQkJCQkJCQlsYWJlbFRleHQ6IEUuai5nZXQoIlZPVFN1YnRpdGxlc01heExlbmd0aCIpLAoJCQkJCQkJCQlsYWJlbEVPTDogIjoiLAoJCQkJCQkJCQlzeW1ib2w6ICIiLAoJCQkJCQkJCQl2YWx1ZTogcAoJCQkJCQkJCX0pLCBoID0gbmV3IFEuQSh7CgkJCQkJCQkJCWxhYmVsSHRtbDogbS5jb250YWluZXIsCgkJCQkJCQkJCXZhbHVlOiBwLAoJCQkJCQkJCQltaW46IDUwLAoJCQkJCQkJCQltYXg6IDMwMAoJCQkJCQkJCX0pLCBnID0gdGhpcy5kYXRhLnN1YnRpdGxlc0ZvbnRTaXplID8/IDIwLCBfID0gbmV3IGVlLkEoewoJCQkJCQkJCQlsYWJlbFRleHQ6IEUuai5nZXQoIlZPVFN1YnRpdGxlc0ZvbnRTaXplIiksCgkJCQkJCQkJCWxhYmVsRU9MOiAiOiIsCgkJCQkJCQkJCXN5bWJvbDogInB4IiwKCQkJCQkJCQkJdmFsdWU6IGcKCQkJCQkJCQl9KSwgdiA9IG5ldyBRLkEoewoJCQkJCQkJCQlsYWJlbEh0bWw6IF8uY29udGFpbmVyLAoJCQkJCQkJCQl2YWx1ZTogZywKCQkJCQkJCQkJbWluOiA4LAoJCQkJCQkJCQltYXg6IDUwCgkJCQkJCQkJfSksIGIgPSB0aGlzLmRhdGEuc3VidGl0bGVzT3BhY2l0eSA/PyAyMCwgeCA9IG5ldyBlZS5BKHsKCQkJCQkJCQkJbGFiZWxUZXh0OiBFLmouZ2V0KCJWT1RTdWJ0aXRsZXNPcGFjaXR5IiksCgkJCQkJCQkJCWxhYmVsRU9MOiAiOiIsCgkJCQkJCQkJCXZhbHVlOiBiCgkJCQkJCQkJfSksIEMgPSBuZXcgUS5BKHsKCQkJCQkJCQkJbGFiZWxIdG1sOiB4LmNvbnRhaW5lciwKCQkJCQkJCQkJdmFsdWU6IGIKCQkJCQkJCQl9KTsKCQkJCQkJCQlkLmJvZHlDb250YWluZXIuYXBwZW5kKGYuY29udGFpbmVyLCBoLmNvbnRhaW5lciwgdi5jb250YWluZXIsIEMuY29udGFpbmVyKSwgZi5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBhc3luYyAoZCkgPT4gewoJCQkJCQkJCQl0aGlzLmRhdGEuaGlnaGxpZ2h0V29yZHMgPSBkLCBhd2FpdCBGLmQuc2V0KCJoaWdobGlnaHRXb3JkcyIsIHRoaXMuZGF0YS5oaWdobGlnaHRXb3JkcyksIEEuQS5sb2coImhpZ2hsaWdodFdvcmRzIHZhbHVlIGNoYW5nZWQuIE5ldyB2YWx1ZToiLCBkKSwgdGhpcy5vbkNoYW5nZVN1YnRpdGxlc0hpZ2hsaWdodFdvcmRzLmRpc3BhdGNoKGQpOwoJCQkJCQkJCX0pLCBoLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IiwgKGQpID0+IHsKCQkJCQkJCQkJbS52YWx1ZSA9IGQsIHRoaXMuZGF0YS5zdWJ0aXRsZXNNYXhMZW5ndGggPSBkLCBGLmQuc2V0KCJzdWJ0aXRsZXNNYXhMZW5ndGgiLCB0aGlzLmRhdGEuc3VidGl0bGVzTWF4TGVuZ3RoKSwgQS5BLmxvZygiaGlnaGxpZ2h0V29yZHMgdmFsdWUgY2hhbmdlZC4gTmV3IHZhbHVlOiIsIGQpLCB0aGlzLm9uSW5wdXRTdWJ0aXRsZXNNYXhMZW5ndGguZGlzcGF0Y2goZCk7CgkJCQkJCQkJfSksIHYuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLCAoZCkgPT4gewoJCQkJCQkJCQlfLnZhbHVlID0gZCwgdGhpcy5kYXRhLnN1YnRpdGxlc0ZvbnRTaXplID0gZCwgRi5kLnNldCgic3VidGl0bGVzRm9udFNpemUiLCB0aGlzLmRhdGEuc3VidGl0bGVzRm9udFNpemUpLCBBLkEubG9nKCJzdWJ0aXRsZXNGb250U2l6ZSB2YWx1ZSBjaGFuZ2VkLiBOZXcgdmFsdWU6IiwgZCksIHRoaXMub25JbnB1dFN1YnRpdGxlc0ZvbnRTaXplLmRpc3BhdGNoKGQpOwoJCQkJCQkJCX0pLCBDLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IiwgKGQpID0+IHsKCQkJCQkJCQkJeC52YWx1ZSA9IGQsIHRoaXMuZGF0YS5zdWJ0aXRsZXNPcGFjaXR5ID0gZCwgRi5kLnNldCgic3VidGl0bGVzT3BhY2l0eSIsIHRoaXMuZGF0YS5zdWJ0aXRsZXNPcGFjaXR5KSwgQS5BLmxvZygic3VidGl0bGVzT3BhY2l0eSB2YWx1ZSBjaGFuZ2VkLiBOZXcgdmFsdWU6IiwgZCksIHRoaXMub25JbnB1dFN1YnRpdGxlc0JhY2tncm91bmRPcGFjaXR5LmRpc3BhdGNoKGQpOwoJCQkJCQkJCX0pOwoJCQkJCQkJfSksIHRoaXMudHJhbnNsYXRlSG90a2V5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGFzeW5jIChkKSA9PiB7CgkJCQkJCQkJdGhpcy5kYXRhLnRyYW5zbGF0aW9uSG90a2V5ID0gZCwgYXdhaXQgRi5kLnNldCgidHJhbnNsYXRpb25Ib3RrZXkiLCB0aGlzLmRhdGEudHJhbnNsYXRpb25Ib3RrZXkpLCBBLkEubG9nKCJ0cmFuc2xhdGlvbkhvdGtleSB2YWx1ZSBjaGFuZ2VkLiBOZXcgdmFsdWU6IiwgZCk7CgkJCQkJCQl9KSwgdGhpcy5wcm94eU0zVThIb3N0VGV4dGZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGFzeW5jIChkKSA9PiB7CgkJCQkJCQkJdGhpcy5kYXRhLm0zdThQcm94eUhvc3QgPSBkIHx8IHcuc2UsIGF3YWl0IEYuZC5zZXQoIm0zdThQcm94eUhvc3QiLCB0aGlzLmRhdGEubTN1OFByb3h5SG9zdCksIEEuQS5sb2coIm0zdThQcm94eUhvc3QgdmFsdWUgY2hhbmdlZC4gTmV3IHZhbHVlOiIsIHRoaXMuZGF0YS5tM3U4UHJveHlIb3N0KTsKCQkJCQkJCX0pLCB0aGlzLnByb3h5V29ya2VySG9zdFRleHRmaWVsZC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBhc3luYyAoZCkgPT4gewoJCQkJCQkJCXRoaXMuZGF0YS5wcm94eVdvcmtlckhvc3QgPSBkIHx8IHcuUG0sIGF3YWl0IEYuZC5zZXQoInByb3h5V29ya2VySG9zdCIsIHRoaXMuZGF0YS5wcm94eVdvcmtlckhvc3QpLCBBLkEubG9nKCJwcm94eVdvcmtlckhvc3QgdmFsdWUgY2hhbmdlZC4gTmV3IHZhbHVlOiIsIHRoaXMuZGF0YS5wcm94eVdvcmtlckhvc3QpLCB0aGlzLm9uQ2hhbmdlUHJveHlXb3JrZXJIb3N0LmRpc3BhdGNoKGQpOwoJCQkJCQkJfSksIHRoaXMucHJveHlUcmFuc2xhdGlvblN0YXR1c1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKCJzZWxlY3RJdGVtIiwgYXN5bmMgKGQpID0+IHsKCQkJCQkJCQl0aGlzLmRhdGEudHJhbnNsYXRlUHJveHlFbmFibGVkID0gTnVtYmVyLnBhcnNlSW50KGQpLCBhd2FpdCBGLmQuc2V0KCJ0cmFuc2xhdGVQcm94eUVuYWJsZWQiLCB0aGlzLmRhdGEudHJhbnNsYXRlUHJveHlFbmFibGVkKSwgYXdhaXQgRi5kLnNldCgidHJhbnNsYXRlUHJveHlFbmFibGVkRGVmYXVsdCIsICExKSwgQS5BLmxvZygidHJhbnNsYXRlUHJveHlFbmFibGVkIHZhbHVlIGNoYW5nZWQuIE5ldyB2YWx1ZToiLCB0aGlzLmRhdGEudHJhbnNsYXRlUHJveHlFbmFibGVkKSwgdGhpcy5vblNlbGVjdEl0ZW1Qcm94eVRyYW5zbGF0aW9uU3RhdHVzLmRpc3BhdGNoKGQpOwoJCQkJCQkJfSksIHRoaXMudHJhbnNsYXRlQVBJRXJyb3JzQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgYXN5bmMgKGQpID0+IHsKCQkJCQkJCQl0aGlzLmRhdGEudHJhbnNsYXRlQVBJRXJyb3JzID0gZCwgYXdhaXQgRi5kLnNldCgidHJhbnNsYXRlQVBJRXJyb3JzIiwgdGhpcy5kYXRhLnRyYW5zbGF0ZUFQSUVycm9ycyksIEEuQS5sb2coInRyYW5zbGF0ZUFQSUVycm9ycyB2YWx1ZSBjaGFuZ2VkLiBOZXcgdmFsdWU6IiwgZCk7CgkJCQkJCQl9KSwgdGhpcy51c2VOZXdBdWRpb1BsYXllckNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGFzeW5jIChkKSA9PiB7CgkJCQkJCQkJdGhpcy5kYXRhLm5ld0F1ZGlvUGxheWVyID0gZCwgYXdhaXQgRi5kLnNldCgibmV3QXVkaW9QbGF5ZXIiLCB0aGlzLmRhdGEubmV3QXVkaW9QbGF5ZXIpLCBBLkEubG9nKCJuZXdBdWRpb1BsYXllciB2YWx1ZSBjaGFuZ2VkLiBOZXcgdmFsdWU6IiwgZCksIHRoaXMub25seUJ5cGFzc01lZGlhQ1NQQ2hlY2tib3guZGlzYWJsZWQgPSB0aGlzLm9ubHlCeXBhc3NNZWRpYUNTUENoZWNrYm94LmhpZGRlbiA9ICFkLCB0aGlzLm9uQ2hhbmdlVXNlTmV3QXVkaW9QbGF5ZXIuZGlzcGF0Y2goZCk7CgkJCQkJCQl9KSwgdGhpcy5vbmx5QnlwYXNzTWVkaWFDU1BDaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBhc3luYyAoZCkgPT4gewoJCQkJCQkJCXRoaXMuZGF0YS5vbmx5QnlwYXNzTWVkaWFDU1AgPSBkLCBhd2FpdCBGLmQuc2V0KCJvbmx5QnlwYXNzTWVkaWFDU1AiLCB0aGlzLmRhdGEub25seUJ5cGFzc01lZGlhQ1NQKSwgQS5BLmxvZygib25seUJ5cGFzc01lZGlhQ1NQIHZhbHVlIGNoYW5nZWQuIE5ldyB2YWx1ZToiLCBkKSwgdGhpcy5vbkNoYW5nZU9ubHlCeXBhc3NNZWRpYUNTUC5kaXNwYXRjaChkKTsKCQkJCQkJCX0pLCB0aGlzLnRyYW5zbGF0aW9uVGV4dFNlcnZpY2VTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcigic2VsZWN0SXRlbSIsIGFzeW5jIChkKSA9PiB7CgkJCQkJCQkJdGhpcy5kYXRhLnRyYW5zbGF0aW9uU2VydmljZSA9IGQsIGF3YWl0IEYuZC5zZXQoInRyYW5zbGF0aW9uU2VydmljZSIsIHRoaXMuZGF0YS50cmFuc2xhdGlvblNlcnZpY2UpLCBBLkEubG9nKCJ0cmFuc2xhdGlvblNlcnZpY2UgdmFsdWUgY2hhbmdlZC4gTmV3IHZhbHVlOiIsIGQpLCB0aGlzLm9uU2VsZWN0SXRlbVRyYW5zbGF0aW9uVGV4dFNlcnZpY2UuZGlzcGF0Y2goZCk7CgkJCQkJCQl9KSwgdGhpcy5kZXRlY3RTZXJ2aWNlU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdEl0ZW0iLCBhc3luYyAoZCkgPT4gewoJCQkJCQkJCXRoaXMuZGF0YS5kZXRlY3RTZXJ2aWNlID0gZCwgYXdhaXQgRi5kLnNldCgiZGV0ZWN0U2VydmljZSIsIHRoaXMuZGF0YS5kZXRlY3RTZXJ2aWNlKSwgQS5BLmxvZygiZGV0ZWN0U2VydmljZSB2YWx1ZSBjaGFuZ2VkLiBOZXcgdmFsdWU6IiwgZCk7CgkJCQkJCQl9KSwgdGhpcy5hcHBlYXJhbmNlRGV0YWlscy5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsICgpID0+IHsKCQkJCQkJCQlsZXQgZCA9IG5ldyBKLkEoewoJCQkJCQkJCQl0aXRsZUh0bWw6IEUuai5nZXQoImFwcGVhcmFuY2UiKSwKCQkJCQkJCQkJaXNUZW1wOiAhMAoJCQkJCQkJCX0pOwoJCQkJCQkJCXRoaXMuZ2xvYmFsUG9ydGFsLmFwcGVuZENoaWxkKGQuY29udGFpbmVyKTsKCQkJCQkJCQlsZXQgZiA9IG5ldyBLLkEoewoJCQkJCQkJCQlsYWJlbEh0bWw6IEUuai5nZXQoIlZPVFNob3dQaVBCdXR0b24iKSwKCQkJCQkJCQkJY2hlY2tlZDogdGhpcy5kYXRhLnNob3dQaVBCdXR0b24KCQkJCQkJCQl9KTsKCQkJCQkJCQlmLmhpZGRlbiA9ICEoMCwgVy5CcykoKTsKCQkJCQkJCQlsZXQgcCA9ICh0aGlzLmRhdGEuYXV0b0hpZGVCdXR0b25EZWxheSA/PyB3LnFVKSAvIDFlMywgbSA9IG5ldyBlZS5BKHsKCQkJCQkJCQkJbGFiZWxUZXh0OiBFLmouZ2V0KCJhdXRvSGlkZUJ1dHRvbkRlbGF5IiksCgkJCQkJCQkJCWxhYmVsRU9MOiAiOiIsCgkJCQkJCQkJCXN5bWJvbDogYCAke0Uuai5nZXQoInNlY3MiKX1gLAoJCQkJCQkJCQl2YWx1ZTogcAoJCQkJCQkJCX0pLCBoID0gbmV3IFEuQSh7CgkJCQkJCQkJCWxhYmVsSHRtbDogbS5jb250YWluZXIsCgkJCQkJCQkJCXZhbHVlOiBwLAoJCQkJCQkJCQltaW46IC4xLAoJCQkJCQkJCQltYXg6IDMsCgkJCQkJCQkJCXN0ZXA6IC4xCgkJCQkJCQkJfSksIGcgPSBuZXcgWC5BKHsKCQkJCQkJCQkJbGFiZWxUZXh0OiBFLmouZ2V0KCJidXR0b25Qb3NpdGlvbkluV2lkZVBsYXllciIpLAoJCQkJCQkJCQlpY29uOiBuZS53MgoJCQkJCQkJCX0pLCBfID0gbmV3IFouQSh7CgkJCQkJCQkJCXNlbGVjdFRpdGxlOiBFLmouZ2V0KCJidXR0b25Qb3NpdGlvbkluV2lkZVBsYXllciIpLAoJCQkJCQkJCQlkaWFsb2dUaXRsZTogRS5qLmdldCgiYnV0dG9uUG9zaXRpb25JbldpZGVQbGF5ZXIiKSwKCQkJCQkJCQkJbGFiZWxFbGVtZW50OiBnLmNvbnRhaW5lciwKCQkJCQkJCQkJZGlhbG9nUGFyZW50OiB0aGlzLmdsb2JhbFBvcnRhbCwKCQkJCQkJCQkJaXRlbXM6IEQuWC5tYXAoKGQpID0+ICh7CgkJCQkJCQkJCQlsYWJlbDogRS5qLmdldChgcG9zaXRpb24uJHtkfWApLAoJCQkJCQkJCQkJdmFsdWU6IGQsCgkJCQkJCQkJCQlzZWxlY3RlZDogZCA9PT0gdGhpcy5kYXRhLmJ1dHRvblBvcwoJCQkJCQkJCQl9KSkKCQkJCQkJCQl9KSwgdiA9IG5ldyAkLkEoewoJCQkJCQkJCQl0YXJnZXQ6IGcuaWNvbiwKCQkJCQkJCQkJY29udGVudDogRS5qLmdldCgibWluQnV0dG9uUG9zaXRpb25Db250YWluZXIiKSwKCQkJCQkJCQkJcG9zaXRpb246ICJib3R0b20iLAoJCQkJCQkJCQliYWNrZ3JvdW5kQ29sb3I6ICJ2YXIoLS12b3QtaGVscGVyLW9uZGlhbG9nKSIsCgkJCQkJCQkJCXBhcmVudEVsZW1lbnQ6IHRoaXMuZ2xvYmFsUG9ydGFsCgkJCQkJCQkJfSksIGIgPSBuZXcgWC5BKHsgbGFiZWxUZXh0OiBFLmouZ2V0KCJWT1RNZW51TGFuZ3VhZ2UiKSB9KSwgeCA9IG5ldyBaLkEoewoJCQkJCQkJCQlzZWxlY3RUaXRsZTogRS5qLmdldChgbGFuZ3MuJHtFLmoubGFuZ092ZXJyaWRlfWApLAoJCQkJCQkJCQlkaWFsb2dUaXRsZTogRS5qLmdldCgiVk9UTWVudUxhbmd1YWdlIiksCgkJCQkJCQkJCWxhYmVsRWxlbWVudDogYi5jb250YWluZXIsCgkJCQkJCQkJCWRpYWxvZ1BhcmVudDogdGhpcy5nbG9iYWxQb3J0YWwsCgkJCQkJCQkJCWl0ZW1zOiBaLkEuZ2VuTGFuZ3VhZ2VJdGVtcyhFLmouZ2V0QXZhaWxhYmxlTGFuZ3MoKSwgRS5qLmxhbmdPdmVycmlkZSkKCQkJCQkJCQl9KTsKCQkJCQkJCQlkLmJvZHlDb250YWluZXIuYXBwZW5kKGYuY29udGFpbmVyLCBoLmNvbnRhaW5lciwgXy5jb250YWluZXIsIHguY29udGFpbmVyKSwgZC5hZGRFdmVudExpc3RlbmVyKCJjbG9zZSIsICgpID0+IHsKCQkJCQkJCQkJdi5yZWxlYXNlKCk7CgkJCQkJCQkJfSksIGYuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgYXN5bmMgKGQpID0+IHsKCQkJCQkJCQkJdGhpcy5kYXRhLnNob3dQaVBCdXR0b24gPSBkLCBhd2FpdCBGLmQuc2V0KCJzaG93UGlQQnV0dG9uIiwgdGhpcy5kYXRhLnNob3dQaVBCdXR0b24pLCBBLkEubG9nKCJzaG93UGlQQnV0dG9uIHZhbHVlIGNoYW5nZWQuIE5ldyB2YWx1ZToiLCBkKSwgdGhpcy5vbkNoYW5nZVNob3dQaVBCdXR0b24uZGlzcGF0Y2goZCk7CgkJCQkJCQkJfSksIGguYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLCBhc3luYyAoZCkgPT4gewoJCQkJCQkJCQltLnZhbHVlID0gZDsKCQkJCQkJCQkJbGV0IGYgPSBNYXRoLnJvdW5kKGQgKiAxZTMpOwoJCQkJCQkJCQlBLkEubG9nKCJhdXRvSGlkZUJ1dHRvbkRlbGF5IHZhbHVlIGNoYW5nZWQuIE5ldyB2YWx1ZToiLCBmKSwgdGhpcy5kYXRhLmF1dG9IaWRlQnV0dG9uRGVsYXkgPSBmLCBhd2FpdCBGLmQuc2V0KCJhdXRvSGlkZUJ1dHRvbkRlbGF5IiwgdGhpcy5kYXRhLmF1dG9IaWRlQnV0dG9uRGVsYXkpLCB0aGlzLm9uSW5wdXRBdXRvSGlkZUJ1dHRvbkRlbGF5LmRpc3BhdGNoKGQpOwoJCQkJCQkJCX0pLCBfLmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdEl0ZW0iLCBhc3luYyAoZCkgPT4gewoJCQkJCQkJCQlBLkEubG9nKCJidXR0b25Qb3MgdmFsdWUgY2hhbmdlZC4gTmV3IHZhbHVlOiIsIGQpLCB0aGlzLmRhdGEuYnV0dG9uUG9zID0gZCwgYXdhaXQgRi5kLnNldCgiYnV0dG9uUG9zIiwgdGhpcy5kYXRhLmJ1dHRvblBvcyksIHRoaXMub25TZWxlY3RJdGVtQnV0dG9uUG9zaXRpb24uZGlzcGF0Y2goZCk7CgkJCQkJCQkJfSksIHguYWRkRXZlbnRMaXN0ZW5lcigic2VsZWN0SXRlbSIsIGFzeW5jIChkKSA9PiB7CgkJCQkJCQkJCWxldCBmID0gYXdhaXQgRS5qLmNoYW5nZUxhbmcoZCk7CgkJCQkJCQkJCWYgJiYgKHRoaXMuZGF0YS5sb2NhbGVVcGRhdGVkQXQgPSBhd2FpdCBGLmQuZ2V0KCJsb2NhbGVVcGRhdGVkQXQiLCAwKSwgdGhpcy5vblNlbGVjdEl0ZW1NZW51TGFuZ3VhZ2UuZGlzcGF0Y2goZCkpOwoJCQkJCQkJCX0pOwoJCQkJCQkJfSksIHRoaXMuYWJvdXRFeHRlbnNpb25EZXRhaWxzLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewoJCQkJCQkJCWxldCBkID0gbmV3IEouQSh7CgkJCQkJCQkJCXRpdGxlSHRtbDogRS5qLmdldCgiYWJvdXRFeHRlbnNpb24iKSwKCQkJCQkJCQkJaXNUZW1wOiAhMAoJCQkJCQkJCX0pOwoJCQkJCQkJCXRoaXMuZ2xvYmFsUG9ydGFsLmFwcGVuZENoaWxkKGQuY29udGFpbmVyKTsKCQkJCQkJCQlsZXQgZiA9IE8uQS5jcmVhdGVJbmZvcm1hdGlvbihgJHtFLmouZ2V0KCJWT1RWZXJzaW9uIil9OmAsIEdNX2luZm8uc2NyaXB0LnZlcnNpb24gfHwgRS5qLmdldCgibm90Rm91bmQiKSksIHAgPSBPLkEuY3JlYXRlSW5mb3JtYXRpb24oYCR7RS5qLmdldCgiVk9UQXV0aG9ycyIpfTpgLCBHTV9pbmZvLnNjcmlwdC5hdXRob3IgPz8gRS5qLmdldCgibm90Rm91bmQiKSksIG0gPSBPLkEuY3JlYXRlSW5mb3JtYXRpb24oYCR7RS5qLmdldCgiVk9UTG9hZGVyIil9OmAsIGAke0dNX2luZm8uc2NyaXB0SGFuZGxlcn0gdiR7R01faW5mby52ZXJzaW9ufWApLCBoID0gTy5BLmNyZWF0ZUluZm9ybWF0aW9uKGAke0Uuai5nZXQoIlZPVEJyb3dzZXIiKX06YCwgYCR7Vy5SNS5icm93c2VyLm5hbWV9ICR7Vy5SNS5icm93c2VyLnZlcnNpb259ICgke1cuUjUub3MubmFtZX0gJHtXLlI1Lm9zLnZlcnNpb259KWApLCBnID0gbmV3IERhdGUoKHRoaXMuZGF0YS5sb2NhbGVVcGRhdGVkQXQgPz8gMCkgKiAxZTMpLnRvTG9jYWxlU3RyaW5nKCksIF8gPSAoMCwgdi5xeSlgJHt0aGlzLmRhdGEubG9jYWxlSGFzaH08YnIgLz4oJHtFLmouZ2V0KCJWT1RVcGRhdGVkQXQiKX0KICAgICAgICAke2d9KWAsIGIgPSBPLkEuY3JlYXRlSW5mb3JtYXRpb24oYCR7RS5qLmdldCgiVk9UTG9jYWxlSGFzaCIpfTpgLCBfKSwgeCA9IE8uQS5jcmVhdGVPdXRsaW5lZEJ1dHRvbihFLmouZ2V0KCJWT1RVcGRhdGVMb2NhbGVGaWxlcyIpKTsKCQkJCQkJCQlkLmJvZHlDb250YWluZXIuYXBwZW5kKGYuY29udGFpbmVyLCBwLmNvbnRhaW5lciwgbS5jb250YWluZXIsIGguY29udGFpbmVyLCBiLmNvbnRhaW5lciwgeCksIHguYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBhc3luYyAoKSA9PiB7CgkJCQkJCQkJCWF3YWl0IEYuZC5zZXQoImxvY2FsZUhhc2giLCAiIiksIGF3YWl0IEUuai51cGRhdGUoITApLCB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CgkJCQkJCQkJfSk7CgkJCQkJCQl9KSwgdGhpcy5idWdSZXBvcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7CgkJCQkJCQkJdGhpcy5vbkNsaWNrQnVnUmVwb3J0LmRpc3BhdGNoKCk7CgkJCQkJCQl9KSwgdGhpcy5yZXNldFNldHRpbmdzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewoJCQkJCQkJCXRoaXMub25DbGlja1Jlc2V0U2V0dGluZ3MuZGlzcGF0Y2goKTsKCQkJCQkJCX0pLCB0aGlzOwoJCQkJCQl9CgkJCQkJCWluaXREZWJ1Z1VJKCkgewoJCQkJCQkJcmV0dXJuIHRoaXM7CgkJCQkJCX0KCQkJCQkJYWRkRXZlbnRMaXN0ZW5lcihkLCBmKSB7CgkJCQkJCQlzd2l0Y2ggKGQpIHsKCQkJCQkJCQljYXNlICJjbGljazpidWdSZXBvcnQiOgoJCQkJCQkJCQl0aGlzLm9uQ2xpY2tCdWdSZXBvcnQuYWRkTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImNsaWNrOnJlc2V0U2V0dGluZ3MiOgoJCQkJCQkJCQl0aGlzLm9uQ2xpY2tSZXNldFNldHRpbmdzLmFkZExpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJ1cGRhdGU6YWNjb3VudCI6CgkJCQkJCQkJCXRoaXMub25VcGRhdGVBY2NvdW50LmFkZExpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJjaGFuZ2U6YXV0b1RyYW5zbGF0ZSI6CgkJCQkJCQkJCXRoaXMub25DaGFuZ2VBdXRvVHJhbnNsYXRlLmFkZExpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJjaGFuZ2U6c2hvd1ZpZGVvVm9sdW1lIjoKCQkJCQkJCQkJdGhpcy5vbkNoYW5nZVNob3dWaWRlb1ZvbHVtZS5hZGRMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAiY2hhbmdlOmF1ZGlvQnVzdGVyIjoKCQkJCQkJCQkJdGhpcy5vbkNoYW5nZUF1ZGlvQm9vc3Rlci5hZGRMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAiY2hhbmdlOnVzZUxpdmVseVZvaWNlIjoKCQkJCQkJCQkJdGhpcy5vbkNoYW5nZVVzZUxpdmVseVZvaWNlLmFkZExpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJjaGFuZ2U6c3VidGl0bGVzSGlnaGxpZ2h0V29yZHMiOgoJCQkJCQkJCQl0aGlzLm9uQ2hhbmdlU3VidGl0bGVzSGlnaGxpZ2h0V29yZHMuYWRkTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImNoYW5nZTpwcm94eVdvcmtlckhvc3QiOgoJCQkJCQkJCQl0aGlzLm9uQ2hhbmdlUHJveHlXb3JrZXJIb3N0LmFkZExpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJjaGFuZ2U6dXNlTmV3QXVkaW9QbGF5ZXIiOgoJCQkJCQkJCQl0aGlzLm9uQ2hhbmdlVXNlTmV3QXVkaW9QbGF5ZXIuYWRkTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImNoYW5nZTpvbmx5QnlwYXNzTWVkaWFDU1AiOgoJCQkJCQkJCQl0aGlzLm9uQ2hhbmdlT25seUJ5cGFzc01lZGlhQ1NQLmFkZExpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJjaGFuZ2U6c2hvd1BpUEJ1dHRvbiI6CgkJCQkJCQkJCXRoaXMub25DaGFuZ2VTaG93UGlQQnV0dG9uLmFkZExpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJpbnB1dDpzdWJ0aXRsZXNNYXhMZW5ndGgiOgoJCQkJCQkJCQl0aGlzLm9uSW5wdXRTdWJ0aXRsZXNNYXhMZW5ndGguYWRkTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImlucHV0OnN1YnRpdGxlc0ZvbnRTaXplIjoKCQkJCQkJCQkJdGhpcy5vbklucHV0U3VidGl0bGVzRm9udFNpemUuYWRkTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImlucHV0OnN1YnRpdGxlc0JhY2tncm91bmRPcGFjaXR5IjoKCQkJCQkJCQkJdGhpcy5vbklucHV0U3VidGl0bGVzQmFja2dyb3VuZE9wYWNpdHkuYWRkTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImlucHV0OmF1dG9IaWRlQnV0dG9uRGVsYXkiOgoJCQkJCQkJCQl0aGlzLm9uSW5wdXRBdXRvSGlkZUJ1dHRvbkRlbGF5LmFkZExpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJzZWxlY3Q6cHJveHlUcmFuc2xhdGlvblN0YXR1cyI6CgkJCQkJCQkJCXRoaXMub25TZWxlY3RJdGVtUHJveHlUcmFuc2xhdGlvblN0YXR1cy5hZGRMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAic2VsZWN0OnRyYW5zbGF0aW9uVGV4dFNlcnZpY2UiOgoJCQkJCQkJCQl0aGlzLm9uU2VsZWN0SXRlbVRyYW5zbGF0aW9uVGV4dFNlcnZpY2UuYWRkTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgInNlbGVjdDpidXR0b25Qb3NpdGlvbiI6CgkJCQkJCQkJCXRoaXMub25TZWxlY3RJdGVtQnV0dG9uUG9zaXRpb24uYWRkTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgInNlbGVjdDptZW51TGFuZ3VhZ2UiOgoJCQkJCQkJCQl0aGlzLm9uU2VsZWN0SXRlbU1lbnVMYW5ndWFnZS5hZGRMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQl9CgkJCQkJCQlyZXR1cm4gdGhpczsKCQkJCQkJfQoJCQkJCQlyZW1vdmVFdmVudExpc3RlbmVyKGQsIGYpIHsKCQkJCQkJCXN3aXRjaCAoZCkgewoJCQkJCQkJCWNhc2UgImNsaWNrOmJ1Z1JlcG9ydCI6CgkJCQkJCQkJCXRoaXMub25DbGlja0J1Z1JlcG9ydC5yZW1vdmVMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAiY2xpY2s6cmVzZXRTZXR0aW5ncyI6CgkJCQkJCQkJCXRoaXMub25DbGlja1Jlc2V0U2V0dGluZ3MucmVtb3ZlTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgInVwZGF0ZTphY2NvdW50IjoKCQkJCQkJCQkJdGhpcy5vblVwZGF0ZUFjY291bnQucmVtb3ZlTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImNoYW5nZTphdXRvVHJhbnNsYXRlIjoKCQkJCQkJCQkJdGhpcy5vbkNoYW5nZUF1dG9UcmFuc2xhdGUucmVtb3ZlTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImNoYW5nZTpzaG93VmlkZW9Wb2x1bWUiOgoJCQkJCQkJCQl0aGlzLm9uQ2hhbmdlU2hvd1ZpZGVvVm9sdW1lLnJlbW92ZUxpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJjaGFuZ2U6YXVkaW9CdXN0ZXIiOgoJCQkJCQkJCQl0aGlzLm9uQ2hhbmdlQXVkaW9Cb29zdGVyLnJlbW92ZUxpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJjaGFuZ2U6dXNlTGl2ZWx5Vm9pY2UiOgoJCQkJCQkJCQl0aGlzLm9uQ2hhbmdlVXNlTGl2ZWx5Vm9pY2UucmVtb3ZlTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImNoYW5nZTpzdWJ0aXRsZXNIaWdobGlnaHRXb3JkcyI6CgkJCQkJCQkJCXRoaXMub25DaGFuZ2VTdWJ0aXRsZXNIaWdobGlnaHRXb3Jkcy5yZW1vdmVMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAiY2hhbmdlOnByb3h5V29ya2VySG9zdCI6CgkJCQkJCQkJCXRoaXMub25DaGFuZ2VQcm94eVdvcmtlckhvc3QucmVtb3ZlTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImNoYW5nZTp1c2VOZXdBdWRpb1BsYXllciI6CgkJCQkJCQkJCXRoaXMub25DaGFuZ2VVc2VOZXdBdWRpb1BsYXllci5yZW1vdmVMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAiY2hhbmdlOm9ubHlCeXBhc3NNZWRpYUNTUCI6CgkJCQkJCQkJCXRoaXMub25DaGFuZ2VPbmx5QnlwYXNzTWVkaWFDU1AucmVtb3ZlTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImNoYW5nZTpzaG93UGlQQnV0dG9uIjoKCQkJCQkJCQkJdGhpcy5vbkNoYW5nZVNob3dQaVBCdXR0b24ucmVtb3ZlTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgImlucHV0OnN1YnRpdGxlc01heExlbmd0aCI6CgkJCQkJCQkJCXRoaXMub25JbnB1dFN1YnRpdGxlc01heExlbmd0aC5yZW1vdmVMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAiaW5wdXQ6c3VidGl0bGVzRm9udFNpemUiOgoJCQkJCQkJCQl0aGlzLm9uSW5wdXRTdWJ0aXRsZXNGb250U2l6ZS5yZW1vdmVMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAiaW5wdXQ6c3VidGl0bGVzQmFja2dyb3VuZE9wYWNpdHkiOgoJCQkJCQkJCQl0aGlzLm9uSW5wdXRTdWJ0aXRsZXNCYWNrZ3JvdW5kT3BhY2l0eS5yZW1vdmVMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAiaW5wdXQ6YXV0b0hpZGVCdXR0b25EZWxheSI6CgkJCQkJCQkJCXRoaXMub25JbnB1dEF1dG9IaWRlQnV0dG9uRGVsYXkucmVtb3ZlTGlzdGVuZXIoZik7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCWNhc2UgInNlbGVjdDpwcm94eVRyYW5zbGF0aW9uU3RhdHVzIjoKCQkJCQkJCQkJdGhpcy5vblNlbGVjdEl0ZW1Qcm94eVRyYW5zbGF0aW9uU3RhdHVzLnJlbW92ZUxpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQljYXNlICJzZWxlY3Q6dHJhbnNsYXRpb25UZXh0U2VydmljZSI6CgkJCQkJCQkJCXRoaXMub25TZWxlY3RJdGVtVHJhbnNsYXRpb25UZXh0U2VydmljZS5yZW1vdmVMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAic2VsZWN0OmJ1dHRvblBvc2l0aW9uIjoKCQkJCQkJCQkJdGhpcy5vblNlbGVjdEl0ZW1CdXR0b25Qb3NpdGlvbi5yZW1vdmVMaXN0ZW5lcihmKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJY2FzZSAic2VsZWN0Om1lbnVMYW5ndWFnZSI6CgkJCQkJCQkJCXRoaXMub25TZWxlY3RJdGVtTWVudUxhbmd1YWdlLnJlbW92ZUxpc3RlbmVyKGYpOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCX0KCQkJCQkJCXJldHVybiB0aGlzOwoJCQkJCQl9CgkJCQkJCXJlbGVhc2VVSShkID0gITEpIHsKCQkJCQkJCWlmICghdGhpcy5pc0luaXRpYWxpemVkKCkpIHRocm93IEVycm9yKCJbVk9UXSBTZXR0aW5nc1ZpZXcgaXNuJ3QgaW5pdGlhbGl6ZWQiKTsKCQkJCQkJCXJldHVybiB0aGlzLmRpYWxvZy5yZW1vdmUoKSwgdGhpcy5hY2NvdW50QnV0dG9uUmVmcmVzaFRvb2x0aXA/LnJlbGVhc2UoKSwgdGhpcy5hY2NvdW50QnV0dG9uVG9rZW5Ub29sdGlwPy5yZWxlYXNlKCksIHRoaXMuYXVkaW9Cb29zdGVyVG9vbHRpcD8ucmVsZWFzZSgpLCB0aGlzLnVzZUF1ZGlvRG93bmxvYWRDaGVja2JveFRvb2x0aXA/LnJlbGVhc2UoKSwgdGhpcy51c2VOZXdBdWRpb1BsYXllclRvb2x0aXA/LnJlbGVhc2UoKSwgdGhpcy5vbmx5QnlwYXNzTWVkaWFDU1BUb29sdGlwPy5yZWxlYXNlKCksIHRoaXMudHJhbnNsYXRpb25UZXh0U2VydmljZVRvb2x0aXA/LnJlbGVhc2UoKSwgdGhpcy5wcm94eVRyYW5zbGF0aW9uU3RhdHVzU2VsZWN0VG9vbHRpcD8ucmVsZWFzZSgpLCB0aGlzLmluaXRpYWxpemVkID0gZCwgdGhpczsKCQkJCQkJfQoJCQkJCQlyZWxlYXNlVUlFdmVudHMoZCA9ICExKSB7CgkJCQkJCQlpZiAoIXRoaXMuaXNJbml0aWFsaXplZCgpKSB0aHJvdyBFcnJvcigiW1ZPVF0gU2V0dGluZ3NWaWV3IGlzbid0IGluaXRpYWxpemVkIik7CgkJCQkJCQlyZXR1cm4gdGhpcy5vbkNsaWNrQnVnUmVwb3J0LmNsZWFyKCksIHRoaXMub25DbGlja1Jlc2V0U2V0dGluZ3MuY2xlYXIoKSwgdGhpcy5vblVwZGF0ZUFjY291bnQuY2xlYXIoKSwgdGhpcy5vbkNoYW5nZUF1dG9UcmFuc2xhdGUuY2xlYXIoKSwgdGhpcy5vbkNoYW5nZVNob3dWaWRlb1ZvbHVtZS5jbGVhcigpLCB0aGlzLm9uQ2hhbmdlQXVkaW9Cb29zdGVyLmNsZWFyKCksIHRoaXMub25DaGFuZ2VVc2VMaXZlbHlWb2ljZS5jbGVhcigpLCB0aGlzLm9uQ2hhbmdlU3VidGl0bGVzSGlnaGxpZ2h0V29yZHMuY2xlYXIoKSwgdGhpcy5vbkNoYW5nZVByb3h5V29ya2VySG9zdC5jbGVhcigpLCB0aGlzLm9uQ2hhbmdlVXNlTmV3QXVkaW9QbGF5ZXIuY2xlYXIoKSwgdGhpcy5vbkNoYW5nZU9ubHlCeXBhc3NNZWRpYUNTUC5jbGVhcigpLCB0aGlzLm9uQ2hhbmdlU2hvd1BpUEJ1dHRvbi5jbGVhcigpLCB0aGlzLm9uSW5wdXRTdWJ0aXRsZXNNYXhMZW5ndGguY2xlYXIoKSwgdGhpcy5vbklucHV0U3VidGl0bGVzRm9udFNpemUuY2xlYXIoKSwgdGhpcy5vbklucHV0U3VidGl0bGVzQmFja2dyb3VuZE9wYWNpdHkuY2xlYXIoKSwgdGhpcy5vbklucHV0QXV0b0hpZGVCdXR0b25EZWxheS5jbGVhcigpLCB0aGlzLm9uU2VsZWN0SXRlbVByb3h5VHJhbnNsYXRpb25TdGF0dXMuY2xlYXIoKSwgdGhpcy5vblNlbGVjdEl0ZW1UcmFuc2xhdGlvblRleHRTZXJ2aWNlLmNsZWFyKCksIHRoaXMub25TZWxlY3RJdGVtQnV0dG9uUG9zaXRpb24uY2xlYXIoKSwgdGhpcy5vblNlbGVjdEl0ZW1NZW51TGFuZ3VhZ2UuY2xlYXIoKSwgdGhpcy5pbml0aWFsaXplZCA9IGQsIHRoaXM7CgkJCQkJCX0KCQkJCQkJcmVsZWFzZSgpIHsKCQkJCQkJCXJldHVybiB0aGlzLnJlbGVhc2VVSSghMCksIHRoaXMucmVsZWFzZVVJRXZlbnRzKCExKSwgdGhpczsKCQkJCQkJfQoJCQkJCQl1cGRhdGVBY2NvdW50SW5mbygpIHsKCQkJCQkJCWlmICghdGhpcy5pc0luaXRpYWxpemVkKCkpIHRocm93IEVycm9yKCJbVk9UXSBTZXR0aW5nc1ZpZXcgaXNuJ3QgaW5pdGlhbGl6ZWQiKTsKCQkJCQkJCWxldCBkID0gISF0aGlzLmRhdGEuYWNjb3VudD8udG9rZW47CgkJCQkJCQlyZXR1cm4gdGhpcy5hY2NvdW50QnV0dG9uLmF2YXRhcklkID0gdGhpcy5kYXRhLmFjY291bnQ/LmF2YXRhcklkLCB0aGlzLnVzZUxpdmVseVZvaWNlVG9vbHRpcC5oaWRkZW4gPSB0aGlzLmFjY291bnRCdXR0b24ubG9nZ2VkSW4gPSBkLCB0aGlzLmFjY291bnRCdXR0b24udXNlcm5hbWUgPSB0aGlzLmRhdGEuYWNjb3VudD8udXNlcm5hbWUsIHRoaXMudXNlTGl2ZWx5Vm9pY2VDaGVja2JveC5kaXNhYmxlZCA9ICFkLCB0aGlzLm9uVXBkYXRlQWNjb3VudC5kaXNwYXRjaCh0aGlzLmRhdGEuYWNjb3VudCksIHRoaXM7CgkJCQkJCX0KCQkJCQkJb3BlbigpIHsKCQkJCQkJCWlmICghdGhpcy5pc0luaXRpYWxpemVkKCkpIHRocm93IEVycm9yKCJbVk9UXSBTZXR0aW5nc1ZpZXcgaXNuJ3QgaW5pdGlhbGl6ZWQiKTsKCQkJCQkJCXJldHVybiB0aGlzLmRpYWxvZy5vcGVuKCk7CgkJCQkJCX0KCQkJCQkJY2xvc2UoKSB7CgkJCQkJCQlpZiAoIXRoaXMuaXNJbml0aWFsaXplZCgpKSB0aHJvdyBFcnJvcigiW1ZPVF0gU2V0dGluZ3NWaWV3IGlzbid0IGluaXRpYWxpemVkIik7CgkJCQkJCQlyZXR1cm4gdGhpcy5kaWFsb2cuY2xvc2UoKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQltKCk7CgkJCQl9IGNhdGNoIChkKSB7CgkJCQkJbShkKTsKCQkJCX0KCQkJfSk7CgkJfSwKCQkiLi9zcmMvdXRpbHMvVk9UTG9jYWxpemVkRXJyb3IuanMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgeyBuOiAoKSA9PiBWT1RMb2NhbGl6ZWRFcnJvciB9KTsKCQkJCQl2YXIgaCA9IHAoIi4vc3JjL2xvY2FsaXphdGlvbi9sb2NhbGl6YXRpb25Qcm92aWRlci50cyIpLCBnID0gZChbaF0pOwoJCQkJCWggPSAoZy50aGVuID8gKGF3YWl0IGcpKCkgOiBnKVswXTsKCQkJCQljbGFzcyBWT1RMb2NhbGl6ZWRFcnJvciBleHRlbmRzIEVycm9yIHsKCQkJCQkJY29uc3RydWN0b3IoZCkgewoJCQkJCQkJc3VwZXIoaC5qLmdldERlZmF1bHQoZCkpLCB0aGlzLm5hbWUgPSAiVk9UTG9jYWxpemVkRXJyb3IiLCB0aGlzLnVubG9jYWxpemVkTWVzc2FnZSA9IGQsIHRoaXMubG9jYWxpemVkTWVzc2FnZSA9IGguai5nZXQoZCk7CgkJCQkJCX0KCQkJCQl9CgkJCQkJbSgpOwoJCQkJfSBjYXRjaCAoZCkgewoJCQkJCW0oZCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJIi4vc3JjL3V0aWxzL1ZpZGVvT2JzZXJ2ZXIuanMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuZChmLCB7IGM6ICgpID0+IFZpZGVvT2JzZXJ2ZXIgfSk7CgkJCXZhciBtID0gcCgiLi9ub2RlX21vZHVsZXMvcmVxdWVzdGlkbGVjYWxsYmFjay1wb2x5ZmlsbC9pbmRleC5qcyIpLCBoID0gcCgiLi9ub2RlX21vZHVsZXMvQHZvdC5qcy9zaGFyZWQvZGlzdC9kYXRhL2FsdGVybmF0aXZlVXJscy5qcyIpLCBnID0gcCgiLi9zcmMvY29yZS9ldmVudEltcGwudHMiKSwgXyA9IHAoIi4vc3JjL3V0aWxzL2RlYnVnLnRzIik7CgkJCWNsYXNzIFZpZGVvT2JzZXJ2ZXIgewoJCQkJc3RhdGljIGFkS2V5d29yZHMgPSBuZXcgU2V0KFsKCQkJCQkiYWR2ZXJ0aXNlIiwKCQkJCQkiYWR2ZXJ0aXNlbWVudCIsCgkJCQkJInByb21vIiwKCQkJCQkic3BvbnNvciIsCgkJCQkJImJhbm5lciIsCgkJCQkJImNvbW1lcmNpYWwiLAoJCQkJCSJwcmVyb2xsIiwKCQkJCQkibWlkcm9sbCIsCgkJCQkJInBvc3Ryb2xsIiwKCQkJCQkiYWQtY29udGFpbmVyIiwKCQkJCQkic3BvbnNvcmVkIgoJCQkJXSk7CgkJCQljb25zdHJ1Y3RvcigpIHsKCQkJCQl0aGlzLnZpZGVvQ2FjaGUgPSBuZXcgV2Vha1NldCgpLCB0aGlzLm9ic2VydmVkTm9kZXMgPSB7CgkJCQkJCWFkZGVkOiBuZXcgU2V0KCksCgkJCQkJCXJlbW92ZWQ6IG5ldyBTZXQoKQoJCQkJCX0sIHRoaXMub25WaWRlb0FkZGVkID0gbmV3IGcuWigpLCB0aGlzLm9uVmlkZW9SZW1vdmVkID0gbmV3IGcuWigpLCB0aGlzLm9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5oYW5kbGVNdXRhdGlvbnMpOwoJCQkJfQoJCQkJaXNBZFJlbGF0ZWQoZCkgewoJCQkJCWxldCBmID0gWwoJCQkJCQkiY2xhc3MiLAoJCQkJCQkiaWQiLAoJCQkJCQkidGl0bGUiCgkJCQkJXTsKCQkJCQlmb3IgKGxldCBwIG9mIGYpIHsKCQkJCQkJbGV0IGYgPSBkLmdldEF0dHJpYnV0ZShwKTsKCQkJCQkJaWYgKGYgJiYgVmlkZW9PYnNlcnZlci5hZEtleXdvcmRzLmhhcyhmLnRvTG93ZXJDYXNlKCkpKSByZXR1cm4gITA7CgkJCQkJfQoJCQkJCXJldHVybiAhMTsKCQkJCX0KCQkJCWhhc0F1ZGlvKGQpIHsKCQkJCQlyZXR1cm4gaC5zeC5pbmNsdWRlcyh3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUpID8gIWQubXV0ZWQgOiBkLm1vekhhc0F1ZGlvID09PSB2b2lkIDAgPyBkLndlYmtpdEF1ZGlvRGVjb2RlZEJ5dGVDb3VudCA9PT0gdm9pZCAwID8gImF1ZGlvVHJhY2tzIiBpbiBkICYmIGQuYXVkaW9UcmFja3MubGVuZ3RoID4gMCB8fCAhZC5tdXRlZCA6IGQud2Via2l0QXVkaW9EZWNvZGVkQnl0ZUNvdW50ID4gMCA6IGQubW96SGFzQXVkaW87CgkJCQl9CgkJCQlpc1ZhbGlkVmlkZW8oZCkgewoJCQkJCWlmICh0aGlzLmlzQWRSZWxhdGVkKGQpKSByZXR1cm4gITE7CgkJCQkJbGV0IGYgPSBkLnBhcmVudEVsZW1lbnQ7CgkJCQkJZm9yICg7IGYgJiYgIXRoaXMuaXNBZFJlbGF0ZWQoZik7KSBmID0gZi5wYXJlbnRFbGVtZW50OwoJCQkJCXJldHVybiBmID8gITEgOiB0aGlzLmhhc0F1ZGlvKGQpID8gITAgOiAoXy5BLmxvZygiSWdub3JpbmcgdmlkZW8gd2l0aG91dCBhdWRpbzoiLCBkKSwgITEpOwoJCQkJfQoJCQkJdHJhdmVyc2VET00oZCkgewoJCQkJCWlmIChkIGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudCkgewoJCQkJCQl0aGlzLmNoZWNrVmlkZW9TdGF0ZShkKTsKCQkJCQkJcmV0dXJuOwoJCQkJCX0KCQkJCQlsZXQgZiA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIoZCwgTm9kZUZpbHRlci5TSE9XX0VMRU1FTlQsIHsgYWNjZXB0Tm9kZTogKGQpID0+IGQudGFnTmFtZSA9PT0gIlZJREVPIiB8fCBkLnNoYWRvd1Jvb3QgPyBOb2RlRmlsdGVyLkZJTFRFUl9BQ0NFUFQgOiBOb2RlRmlsdGVyLkZJTFRFUl9TS0lQIH0pOwoJCQkJCWZvciAoOyBmLm5leHROb2RlKCk7KSB7CgkJCQkJCWxldCBkID0gZi5jdXJyZW50Tm9kZTsKCQkJCQkJZCBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQgJiYgdGhpcy5jaGVja1ZpZGVvU3RhdGUoZCksIGQuc2hhZG93Um9vdCAmJiB0aGlzLnRyYXZlcnNlRE9NKGQuc2hhZG93Um9vdCk7CgkJCQkJfQoJCQkJfQoJCQkJY2hlY2tWaWRlb1N0YXRlKGQpIHsKCQkJCQlpZiAodGhpcy52aWRlb0NhY2hlLmhhcyhkKSkgcmV0dXJuOwoJCQkJCXRoaXMudmlkZW9DYWNoZS5hZGQoZCk7CgkJCQkJbGV0IG9uTG9hZGVkRGF0YSA9ICgpID0+IHsKCQkJCQkJdGhpcy5pc1ZhbGlkVmlkZW8oZCkgJiYgdGhpcy5vblZpZGVvQWRkZWQuZGlzcGF0Y2goZCksIGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZGVkZGF0YSIsIG9uTG9hZGVkRGF0YSk7CgkJCQkJfSwgb25FbXB0aWVkID0gKCkgPT4gewoJCQkJCQlkLmlzQ29ubmVjdGVkIHx8ICh0aGlzLm9uVmlkZW9SZW1vdmVkLmRpc3BhdGNoKGQpLCB0aGlzLnZpZGVvQ2FjaGUuZGVsZXRlKGQpLCBkLnJlbW92ZUV2ZW50TGlzdGVuZXIoImVtcHRpZWQiLCBvbkVtcHRpZWQpKTsKCQkJCQl9OwoJCQkJCWQuYWRkRXZlbnRMaXN0ZW5lcigiZW1wdGllZCIsIG9uRW1wdGllZCksIGQucmVhZHlTdGF0ZSA+PSBIVE1MTWVkaWFFbGVtZW50LkhBVkVfQ1VSUkVOVF9EQVRBID8gb25Mb2FkZWREYXRhKCkgOiBkLmFkZEV2ZW50TGlzdGVuZXIoImxvYWRlZGRhdGEiLCBvbkxvYWRlZERhdGEpOwoJCQkJfQoJCQkJaGFuZGxlTXV0YXRpb25zID0gKGQpID0+IHsKCQkJCQlmb3IgKGxldCBmIG9mIGQpIHsKCQkJCQkJaWYgKGYudHlwZSAhPT0gImNoaWxkTGlzdCIpIGNvbnRpbnVlOwoJCQkJCQlmb3IgKGxldCBkIG9mIGYuYWRkZWROb2RlcykgdGhpcy5vYnNlcnZlZE5vZGVzLmFkZGVkLmFkZChkKTsKCQkJCQkJZm9yIChsZXQgZCBvZiBmLnJlbW92ZWROb2RlcykgdGhpcy5vYnNlcnZlZE5vZGVzLnJlbW92ZWQuYWRkKGQpOwoJCQkJCX0KCQkJCQl3aW5kb3cucmVxdWVzdElkbGVDYWxsYmFjaygoKSA9PiB7CgkJCQkJCWZvciAobGV0IGQgb2YgdGhpcy5vYnNlcnZlZE5vZGVzLmFkZGVkKSB0aGlzLnRyYXZlcnNlRE9NKGQpOwoJCQkJCQlmb3IgKGxldCBkIG9mIHRoaXMub2JzZXJ2ZWROb2Rlcy5yZW1vdmVkKSBpZiAoZC5xdWVyeVNlbGVjdG9yQWxsKSB7CgkJCQkJCQlsZXQgZiA9IGQucXVlcnlTZWxlY3RvckFsbCgidmlkZW8iKTsKCQkJCQkJCWZvciAobGV0IGQgb2YgZikgZC5pc0Nvbm5lY3RlZCB8fCAodGhpcy5vblZpZGVvUmVtb3ZlZC5kaXNwYXRjaChkKSwgdGhpcy52aWRlb0NhY2hlLmRlbGV0ZShkKSk7CgkJCQkJCX0KCQkJCQkJdGhpcy5vYnNlcnZlZE5vZGVzLmFkZGVkLmNsZWFyKCksIHRoaXMub2JzZXJ2ZWROb2Rlcy5yZW1vdmVkLmNsZWFyKCk7CgkJCQkJfSwgeyB0aW1lb3V0OiAxZTMgfSk7CgkJCQl9OwoJCQkJZW5hYmxlKCkgewoJCQkJCXRoaXMub2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHsKCQkJCQkJY2hpbGRMaXN0OiAhMCwKCQkJCQkJc3VidHJlZTogITAKCQkJCQl9KSwgdGhpcy50cmF2ZXJzZURPTShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpOwoJCQkJfQoJCQkJZGlzYWJsZSgpIHsKCQkJCQl0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKSwgdGhpcy52aWRlb0NhY2hlID0gbmV3IFdlYWtTZXQoKTsKCQkJCX0KCQkJfQoJCX0sCgkJIi4vc3JjL3V0aWxzL2RlYnVnLnRzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmQoZiwgeyBBOiAoKSA9PiBtIH0pOwoJCQlsZXQgbSA9IHsgbG9nOiAoLi4uZCkgPT4ge30gfTsKCQl9LAoJCSIuL3NyYy91dGlscy9nbS50cyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5hKGQsIGFzeW5jIChkLCBtKSA9PiB7CgkJCQl0cnkgewoJCQkJCXAuZChmLCB7CgkJCQkJCUIwOiAoKSA9PiBDLAoJCQkJCQlHMzogKCkgPT4gR01fZmV0Y2gsCgkJCQkJCU82OiAoKSA9PiB4LAoJCQkJCQl1cDogKCkgPT4gYiwKCQkJCQkJeXg6ICgpID0+IHcKCQkJCQl9KTsKCQkJCQl2YXIgaCA9IHAoIi4vc3JjL2NvbmZpZy9jb25maWcuanMiKSwgZyA9IHAoIi4vc3JjL3V0aWxzL2RlYnVnLnRzIiksIF8gPSBwKCIuL3NyYy91dGlscy91dGlscy50cyIpLCB2ID0gZChbX10pOwoJCQkJCV8gPSAodi50aGVuID8gKGF3YWl0IHYpKCkgOiB2KVswXTsKCQkJCQlsZXQgYiA9IEdNX2luZm8/LnNjcmlwdEhhbmRsZXIgJiYgIWguV2wuaW5jbHVkZXMoR01faW5mby5zY3JpcHRIYW5kbGVyKSwgeCA9IHR5cGVvZiBHTSA8ICJ1IiwgQyA9IHR5cGVvZiB1bnNhZmVXaW5kb3cgPCAidSIsIHcgPSB0eXBlb2YgR01feG1saHR0cFJlcXVlc3QgPCAidSI7CgkJCQkJYXN5bmMgZnVuY3Rpb24gR01fZmV0Y2goZCwgZiA9IHt9KSB7CgkJCQkJCWxldCB7IHRpbWVvdXQ6IHAgPSAxNWUzLC4uLm0gfSA9IGYsIGggPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7CgkJCQkJCXRyeSB7CgkJCQkJCQlpZiAodHlwZW9mIGQgPT0gInN0cmluZyIgJiYgZC5pbmNsdWRlcygiYXBpLmJyb3dzZXIueWFuZGV4LnJ1IikpIHRocm93IEVycm9yKCJQcmV2ZW50aW5nIHlhbmRleCBjb3JzIik7CgkJCQkJCQlyZXR1cm4gYXdhaXQgZmV0Y2goZCwgewoJCQkJCQkJCXNpZ25hbDogaC5zaWduYWwsCgkJCQkJCQkJLi4ubQoJCQkJCQkJfSk7CgkJCQkJCX0gY2F0Y2ggKGYpIHsKCQkJCQkJCWcuQS5sb2coIkdNX2ZldGNoIHByZXZlbnRpbmcgQ09SUyBieSBHTV94bWxodHRwUmVxdWVzdCIsIGYubWVzc2FnZSk7CgkJCQkJCQlsZXQgaCA9ICgwLCBfLmRKKShtLmhlYWRlcnMpOwoJCQkJCQkJcmV0dXJuIG5ldyBQcm9taXNlKChmLCBnKSA9PiB7CgkJCQkJCQkJR01feG1saHR0cFJlcXVlc3QoewoJCQkJCQkJCQltZXRob2Q6IG0ubWV0aG9kIHx8ICJHRVQiLAoJCQkJCQkJCQl1cmw6IGQudG9TdHJpbmcoKSwKCQkJCQkJCQkJcmVzcG9uc2VUeXBlOiAiYmxvYiIsCgkJCQkJCQkJCWRhdGE6IG0uYm9keSwKCQkJCQkJCQkJdGltZW91dDogcCwKCQkJCQkJCQkJaGVhZGVyczogaCwKCQkJCQkJCQkJb25sb2FkOiAoZCkgPT4gewoJCQkJCQkJCQkJbGV0IHAgPSBkLnJlc3BvbnNlSGVhZGVycy5zcGxpdCgvXHI/XG4vKS5yZWR1Y2UoKGQsIGYpID0+IHsKCQkJCQkJCQkJCQlsZXQgWywgcCwgbV0gPSBmLm1hdGNoKC9eKFtcdy1dKyk6ICguKykkLykgfHwgW107CgkJCQkJCQkJCQkJcmV0dXJuIHAgJiYgKGRbcF0gPSBtKSwgZDsKCQkJCQkJCQkJCX0sIHt9KSwgbSA9IG5ldyBSZXNwb25zZShkLnJlc3BvbnNlLCB7CgkJCQkJCQkJCQkJc3RhdHVzOiBkLnN0YXR1cywKCQkJCQkJCQkJCQloZWFkZXJzOiBwCgkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShtLCAidXJsIiwgeyB2YWx1ZTogZC5maW5hbFVybCA/PyAiIiB9KSwgZihtKTsKCQkJCQkJCQkJfSwKCQkJCQkJCQkJb250aW1lb3V0OiAoKSA9PiBnKEVycm9yKCJUaW1lb3V0IikpLAoJCQkJCQkJCQlvbmVycm9yOiAoZCkgPT4gZyhFcnJvcihkKSksCgkJCQkJCQkJCW9uYWJvcnQ6ICgpID0+IGcoRXJyb3IoIkFib3J0RXJyb3IiKSkKCQkJCQkJCQl9KTsKCQkJCQkJCX0pOwoJCQkJCQl9CgkJCQkJfQoJCQkJCW0oKTsKCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQltKGQpOwoJCQkJfQoJCQl9KTsKCQl9LAoJCSIuL3NyYy91dGlscy9pZnJhbWVDb25uZWN0b3IudHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgewoJCQkJCQlJQTogKCkgPT4gZW5zdXJlU2VydmljZUlmcmFtZSwKCQkJCQkJSW86ICgpID0+IGluaXRJZnJhbWVTZXJ2aWNlLAoJCQkJCQlPazogKCkgPT4gZ2VuZXJhdGVNZXNzYWdlSWQsCgkJCQkJCVdGOiAoKSA9PiBfLAoJCQkJCQlkNDogKCkgPT4gaXNJZnJhbWUsCgkJCQkJCWhHOiAoKSA9PiByZXF1ZXN0RGF0YUZyb21NYWluV29ybGQsCgkJCQkJCXlCOiAoKSA9PiBoYXNTZXJ2aWNlSWZyYW1lCgkJCQkJfSk7CgkJCQkJdmFyIGggPSBwKCIuL3NyYy91dGlscy91dGlscy50cyIpLCBnID0gZChbaF0pOwoJCQkJCWggPSAoZy50aGVuID8gKGF3YWl0IGcpKCkgOiBnKVswXTsKCQkJCQlsZXQgXyA9ICJ2b3RfaWZyYW1lIiwgaXNJZnJhbWUgPSAoKSA9PiB3aW5kb3cuc2VsZiAhPT0gd2luZG93LnRvcCwgZ2VuZXJhdGVNZXNzYWdlSWQgPSAoKSA9PiBgbWFpbi13b3JsZC1icmlkZ2UtJHtwZXJmb3JtYW5jZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpfWAsIGhhc1NlcnZpY2VJZnJhbWUgPSAoZCkgPT4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZCk7CgkJCQkJYXN5bmMgZnVuY3Rpb24gc2V0dXBTZXJ2aWNlSWZyYW1lKGQsIGYsIHApIHsKCQkJCQkJbGV0IG0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTsKCQkJCQkJbS5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSIsIG0uc3R5bGUuekluZGV4ID0gIi0xIiwgbS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiLCBtLmlkID0gZiwgbS5zcmMgPSBgJHtkfSMke199YCwgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtKTsKCQkJCQkJbGV0IGcgPSBuZXcgUHJvbWlzZSgoZCkgPT4gewoJCQkJCQkJbGV0IGhhbmRsZU1lc3NhZ2UgPSAoeyBkYXRhOiBmIH0pID0+IHsKCQkJCQkJCQlmLm1lc3NhZ2VUeXBlID09PSBgc2F5LSR7cH0taWZyYW1lLWlzLXJlYWR5YCAmJiAod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCBoYW5kbGVNZXNzYWdlKSwgZCghMCkpOwoJCQkJCQkJfTsKCQkJCQkJCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgaGFuZGxlTWVzc2FnZSk7CgkJCQkJCX0pOwoJCQkJCQlyZXR1cm4gYXdhaXQgUHJvbWlzZS5yYWNlKFtnLCAoMCwgaC53UikoMTVlMywgIlNlcnZpY2UgaWZyYW1lIGRpZCBub3QgaGF2ZSB0aW1lIHRvIGJlIHJlYWR5IildKSwgbTsKCQkJCQl9CgkJCQkJYXN5bmMgZnVuY3Rpb24gZW5zdXJlU2VydmljZUlmcmFtZShkLCBmLCBwLCBtKSB7CgkJCQkJCWlmIChmLmluY2x1ZGVzKCIjIikpIHRocm93IEVycm9yKCJUaGUgc3JjIHBhcmFtZXRlciBzaG91bGQgbm90IGNvbnRhaW4gYSBoYXNoICgjKSBjaGFyYWN0ZXIuIik7CgkJCQkJCWxldCBoID0gaGFzU2VydmljZUlmcmFtZShwKTsKCQkJCQkJaWYgKGgpIHsKCQkJCQkJCWlmIChkICE9PSBudWxsKSByZXR1cm4gZDsKCQkJCQkJCWg/LnJlbW92ZSgpOwoJCQkJCQl9CgkJCQkJCXJldHVybiBkID0gYXdhaXQgc2V0dXBTZXJ2aWNlSWZyYW1lKGYsIHAsIG0pLCBkOwoJCQkJCX0KCQkJCQlmdW5jdGlvbiBpbml0SWZyYW1lU2VydmljZShkLCBmKSB7CgkJCQkJCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgZiksIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoewoJCQkJCQkJbWVzc2FnZVR5cGU6IGBzYXktJHtkfS1pZnJhbWUtaXMtcmVhZHlgLAoJCQkJCQkJbWVzc2FnZURpcmVjdGlvbjogInJlc3BvbnNlIgoJCQkJCQl9LCAiKiIpOwoJCQkJCX0KCQkJCQlmdW5jdGlvbiByZXF1ZXN0RGF0YUZyb21NYWluV29ybGQoZCwgZikgewoJCQkJCQlsZXQgcCA9IGdlbmVyYXRlTWVzc2FnZUlkKCk7CgkJCQkJCXJldHVybiBuZXcgUHJvbWlzZSgobSwgaCkgPT4gewoJCQkJCQkJbGV0IGhhbmRsZU1lc3NhZ2UgPSAoeyBkYXRhOiBmIH0pID0+IHsKCQkJCQkJCQlmPy5tZXNzYWdlSWQgPT09IHAgJiYgZi5tZXNzYWdlVHlwZSA9PT0gZCAmJiBmLm1lc3NhZ2VEaXJlY3Rpb24gPT09ICJyZXNwb25zZSIgJiYgKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgaGFuZGxlTWVzc2FnZSksIGYuZXJyb3IgPyBoKGYuZXJyb3IpIDogbShmLnBheWxvYWQpKTsKCQkJCQkJCX07CgkJCQkJCQl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIGhhbmRsZU1lc3NhZ2UpLCB3aW5kb3cucG9zdE1lc3NhZ2UoewoJCQkJCQkJCW1lc3NhZ2VJZDogcCwKCQkJCQkJCQltZXNzYWdlVHlwZTogZCwKCQkJCQkJCQltZXNzYWdlRGlyZWN0aW9uOiAicmVxdWVzdCIsCgkJCQkJCQkJLi4uZiAhPT0gdm9pZCAwICYmIHsgcGF5bG9hZDogZiB9CgkJCQkJCQl9LCAiKiIpOwoJCQkJCQl9KTsKCQkJCQl9CgkJCQkJbSgpOwoJCQkJfSBjYXRjaCAoZCkgewoJCQkJCW0oZCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJIi4vc3JjL3V0aWxzL2xvY2FsaXphdGlvbi50cyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5hKGQsIGFzeW5jIChkLCBtKSA9PiB7CgkJCQl0cnkgewoJCQkJCXAuZChmLCB7CgkJCQkJCW86ICgpID0+IHNlY3NUb1N0clRpbWUsCgkJCQkJCXY6ICgpID0+IHYKCQkJCQl9KTsKCQkJCQl2YXIgaCA9IHAoIi4vc3JjL2xvY2FsaXphdGlvbi9sb2NhbGl6YXRpb25Qcm92aWRlci50cyIpLCBnID0gZChbaF0pOwoJCQkJCWggPSAoZy50aGVuID8gKGF3YWl0IGcpKCkgOiBnKVswXTsKCQkJCQlsZXQgXyA9IC42NiwgdiA9IG5hdmlnYXRvci5sYW5ndWFnZT8uc3Vic3RyaW5nKDAsIDIpLnRvTG93ZXJDYXNlKCkgfHwgImVuIjsKCQkJCQlmdW5jdGlvbiBzZWNzVG9TdHJUaW1lKGQpIHsKCQkJCQkJbGV0IGYgPSBNYXRoLmZsb29yKGQgLyA2MCksIHAgPSBNYXRoLmZsb29yKGQgJSA2MCksIG0gPSBwIC8gNjA7CgkJCQkJCWlmIChtID49IF8gJiYgKGYgKz0gMSwgcCA9IDApLCBmID49IDYwKSByZXR1cm4gaC5qLmdldCgidHJhbnNsYXRpb25UYWtlTW9yZVRoYW5Ib3VyIik7CgkJCQkJCWlmIChmIDw9IDEpIHJldHVybiBoLmouZ2V0KCJ0cmFuc2xhdGlvblRha2VBYm91dE1pbnV0ZSIpOwoJCQkJCQlsZXQgZyA9IFN0cmluZyhmKTsKCQkJCQkJcmV0dXJuIGYgIT09IDExICYmIGYgJSAxMCA9PSAxID8gaC5qLmdldCgidHJhbnNsYXRpb25UYWtlQXBwcm94aW1hdGVseU1pbnV0ZTIiKS5yZXBsYWNlKCJ7MH0iLCBnKSA6ICFbCgkJCQkJCQkxMiwKCQkJCQkJCTEzLAoJCQkJCQkJMTQKCQkJCQkJXS5pbmNsdWRlcyhmKSAmJiBbCgkJCQkJCQkyLAoJCQkJCQkJMywKCQkJCQkJCTQKCQkJCQkJXS5pbmNsdWRlcyhmICUgMTApID8gaC5qLmdldCgidHJhbnNsYXRpb25UYWtlQXBwcm94aW1hdGVseU1pbnV0ZSIpLnJlcGxhY2UoInswfSIsIGcpIDogaC5qLmdldCgidHJhbnNsYXRpb25UYWtlQXBwcm94aW1hdGVseU1pbnV0ZXMiKS5yZXBsYWNlKCJ7MH0iLCBnKTsKCQkJCQl9CgkJCQkJbSgpOwoJCQkJfSBjYXRjaCAoZCkgewoJCQkJCW0oZCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJIi4vc3JjL3V0aWxzL3N0b3JhZ2UudHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgewoJCQkJCQlfOiAoKSA9PiB1cGRhdGVDb25maWcsCgkJCQkJCWQ6ICgpID0+IHcKCQkJCQl9KTsKCQkJCQl2YXIgaCA9IHAoIi4vc3JjL2NvbmZpZy9jb25maWcuanMiKSwgZyA9IHAoIi4vc3JjL2xvY2FsaXphdGlvbi9sb2NhbGl6YXRpb25Qcm92aWRlci50cyIpLCBfID0gcCgiLi9zcmMvdHlwZXMvc3RvcmFnZS50cyIpLCB2ID0gcCgiLi9zcmMvdXRpbHMvZGVidWcudHMiKSwgYiA9IHAoIi4vc3JjL3V0aWxzL2dtLnRzIiksIHggPSBkKFtnLCBiXSk7CgkJCQkJW2csIGJdID0geC50aGVuID8gKGF3YWl0IHgpKCkgOiB4OwoJCQkJCWxldCBDID0gewoJCQkJCQludW1Ub0Jvb2w6IFsKCQkJCQkJCVsiYXV0b1RyYW5zbGF0ZSJdLAoJCQkJCQkJWyJkb250VHJhbnNsYXRlWW91ckxhbmciLCAiZW5hYmxlZERvbnRUcmFuc2xhdGVMYW5ndWFnZXMiXSwKCQkJCQkJCVsiYXV0b1NldFZvbHVtZVlhbmRleFN0eWxlIiwgImVuYWJsZWRBdXRvVm9sdW1lIl0sCgkJCQkJCQlbInNob3dWaWRlb1NsaWRlciJdLAoJCQkJCQkJWyJzeW5jVm9sdW1lIl0sCgkJCQkJCQlbImRvd25sb2FkV2l0aE5hbWUiXSwKCQkJCQkJCVsic2VuZE5vdGlmeU9uQ29tcGxldGUiXSwKCQkJCQkJCVsiaGlnaGxpZ2h0V29yZHMiXSwKCQkJCQkJCVsib25seUJ5cGFzc01lZGlhQ1NQIl0sCgkJCQkJCQlbIm5ld0F1ZGlvUGxheWVyIl0sCgkJCQkJCQlbInNob3dQaVBCdXR0b24iXSwKCQkJCQkJCVsidHJhbnNsYXRlQVBJRXJyb3JzIl0sCgkJCQkJCQlbImF1ZGlvQm9vc3RlciJdLAoJCQkJCQkJWyJ1c2VOZXdNb2RlbCIsICJ1c2VMaXZlbHlWb2ljZSJdCgkJCQkJCV0sCgkJCQkJCW51bWJlcjogW1siYXV0b1ZvbHVtZSJdXSwKCQkJCQkJYXJyYXk6IFtbImRvbnRUcmFuc2xhdGVMYW5ndWFnZSIsICJkb250VHJhbnNsYXRlTGFuZ3VhZ2VzIl1dLAoJCQkJCQlzdHJpbmc6IFsKCQkJCQkJCVsiaG90a2V5QnV0dG9uIiwgInRyYW5zbGF0aW9uSG90a2V5Il0sCgkJCQkJCQlbImxvY2FsZS1sYW5nLW92ZXJyaWRlIiwgImxvY2FsZUxhbmdPdmVycmlkZSJdLAoJCQkJCQkJWyJsb2NhbGUtbGFuZyIsICJsb2NhbGVMYW5nIl0KCQkJCQkJXQoJCQkJCX07CgkJCQkJZnVuY3Rpb24gZ2V0Q29tcGF0Q2F0ZWdvcnkoZCwgZiwgcCkgewoJCQkJCQlpZiAodHlwZW9mIGYgPT0gIm51bWJlciIpIHJldHVybiBwPy5udW1iZXIuc29tZSgoZikgPT4gZlswXSA9PT0gZCkgPyAibnVtYmVyIiA6ICJudW1Ub0Jvb2wiOwoJCQkJCQlpZiAoQXJyYXkuaXNBcnJheShmKSkgcmV0dXJuICJhcnJheSI7CgkJCQkJCWlmICh0eXBlb2YgZiA9PSAic3RyaW5nIiB8fCBmID09PSBudWxsKSByZXR1cm4gInN0cmluZyI7CgkJCQkJfQoJCQkJCWZ1bmN0aW9uIGNvbnZlcnRCeUNvbXBhdENhdGVnb3J5KGQsIGYpIHsKCQkJCQkJcmV0dXJuIFsKCQkJCQkJCSJzdHJpbmciLAoJCQkJCQkJImFycmF5IiwKCQkJCQkJCSJudW1iZXIiCgkJCQkJCV0uaW5jbHVkZXMoZCkgPyBmIDogISFmOwoJCQkJCX0KCQkJCQlhc3luYyBmdW5jdGlvbiB1cGRhdGVDb25maWcoZCkgewoJCQkJCQlpZiAoZC5jb21wYXRWZXJzaW9uID09PSBoLnI0KSByZXR1cm4gZDsKCQkJCQkJbGV0IGYgPSBPYmplY3QudmFsdWVzKEMpLmZsYXQoKS5yZWR1Y2UoKGQsIGYpID0+IChmWzFdICYmIChkW2ZbMF1dID0gdm9pZCAwKSwgZCksIHt9KSwgcCA9IGF3YWl0IHcuZ2V0VmFsdWVzKGYpLCBtID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKHApLmZpbHRlcigoW2QsIGZdKSA9PiBmICE9PSB2b2lkIDApKSwgXyA9IHsKCQkJCQkJCS4uLmQsCgkJCQkJCQkuLi5tCgkJCQkJCX0sIHYgPSBPYmplY3Qua2V5cyhfKS5yZWR1Y2UoKGQsIGYpID0+IChkW2ZdID0gdm9pZCAwLCBkKSwge30pLCBiID0gYXdhaXQgdy5nZXRWYWx1ZXModiksIHggPSBkOwoJCQkJCQlmb3IgKGxldCBbZCwgZl0gb2YgT2JqZWN0LmVudHJpZXMoXykpIHsKCQkJCQkJCWxldCBwID0gZ2V0Q29tcGF0Q2F0ZWdvcnkoZCwgZiwgQyk7CgkJCQkJCQlpZiAoIXApIGNvbnRpbnVlOwoJCQkJCQkJbGV0IGggPSBDW3BdLmZpbmQoKGYpID0+IGZbMF0gPT09IGQpOwoJCQkJCQkJaWYgKCFoKSBjb250aW51ZTsKCQkJCQkJCWxldCBfID0gaFsxXSA/PyBkOwoJCQkJCQkJaWYgKGJbZF0gPT09IHZvaWQgMCkgY29udGludWU7CgkJCQkJCQlsZXQgdiA9IGNvbnZlcnRCeUNvbXBhdENhdGVnb3J5KHAsIGYpOwoJCQkJCQkJZCA9PT0gImF1dG9Wb2x1bWUiICYmIGYgPCAxICYmICh2ID0gTWF0aC5yb3VuZChmICogMTAwKSksIHhbX10gPSB2LCBtW2RdICE9PSB2b2lkIDAgJiYgYXdhaXQgdy5kZWxldGUoZCksIF8gPT09ICJsb2NhbGVMYW5nT3ZlcnJpZGUiICYmIGF3YWl0IGcuai5jaGFuZ2VMYW5nKGYpLCBhd2FpdCB3LnNldChfLCB2KTsKCQkJCQkJfQoJCQkJCQlyZXR1cm4gewoJCQkJCQkJLi4ueCwKCQkJCQkJCWNvbXBhdFZlcnNpb246ICIyMDI1LTA1LTA5IgoJCQkJCQl9OwoJCQkJCX0KCQkJCQlsZXQgdyA9IG5ldyBjbGFzcyB7CgkJCQkJCXN1cHBvcnRHTTsKCQkJCQkJc3VwcG9ydEdNUHJvbWlzZXM7CgkJCQkJCXN1cHBvcnRHTUdldFZhbHVlczsKCQkJCQkJY29uc3RydWN0b3IoKSB7CgkJCQkJCQl0aGlzLnN1cHBvcnRHTSA9IHR5cGVvZiBHTV9nZXRWYWx1ZSA9PSAiZnVuY3Rpb24iLCB0aGlzLnN1cHBvcnRHTVByb21pc2VzID0gYi5PNiAmJiB0eXBlb2YgR00/LmdldFZhbHVlID09ICJmdW5jdGlvbiIsIHRoaXMuc3VwcG9ydEdNR2V0VmFsdWVzID0gYi5PNiAmJiB0eXBlb2YgR00/LmdldFZhbHVlcyA9PSAiZnVuY3Rpb24iLCB2LkEubG9nKGBbVk9UIFN0b3JhZ2VdIEdNIFByb21pc2VzOiAke3RoaXMuc3VwcG9ydEdNUHJvbWlzZXN9IHwgR006ICR7dGhpcy5zdXBwb3J0R019YCk7CgkJCQkJCX0KCQkJCQkJZ2V0IGlzU3VwcG9ydE9ubHlMUygpIHsKCQkJCQkJCXJldHVybiAhdGhpcy5zdXBwb3J0R00gJiYgIXRoaXMuc3VwcG9ydEdNUHJvbWlzZXM7CgkJCQkJCX0KCQkJCQkJc3luY0dldChkLCBmKSB7CgkJCQkJCQlpZiAodGhpcy5zdXBwb3J0R00pIHJldHVybiBHTV9nZXRWYWx1ZShkLCBmKTsKCQkJCQkJCWxldCBwID0gKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShkKSk7CgkJCQkJCQlpZiAoIXApIHJldHVybiBmOwoJCQkJCQkJdHJ5IHsKCQkJCQkJCQlyZXR1cm4gSlNPTi5wYXJzZShwKTsKCQkJCQkJCX0gY2F0Y2ggewoJCQkJCQkJCXJldHVybiBmOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWFzeW5jIGdldChkLCBmKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5zdXBwb3J0R01Qcm9taXNlcyA/IGF3YWl0IEdNLmdldFZhbHVlKGQsIGYpIDogUHJvbWlzZS5yZXNvbHZlKHRoaXMuc3luY0dldChkLCBmKSk7CgkJCQkJCX0KCQkJCQkJYXN5bmMgZ2V0VmFsdWVzKGQpIHsKCQkJCQkJCXJldHVybiB0aGlzLnN1cHBvcnRHTUdldFZhbHVlcyA/IGF3YWl0IEdNLmdldFZhbHVlcyhkKSA6IE9iamVjdC5mcm9tRW50cmllcyhhd2FpdCBQcm9taXNlLmFsbChPYmplY3QuZW50cmllcyhkKS5tYXAoYXN5bmMgKFtkLCBmXSkgPT4gewoJCQkJCQkJCWxldCBwID0gYXdhaXQgdGhpcy5nZXQoZCwgZik7CgkJCQkJCQkJcmV0dXJuIFtkLCBwXTsKCQkJCQkJCX0pKSk7CgkJCQkJCX0KCQkJCQkJc3luY1NldChkLCBmKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5zdXBwb3J0R00gPyBHTV9zZXRWYWx1ZShkLCBmKSA6IHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShkLCBKU09OLnN0cmluZ2lmeShmKSk7CgkJCQkJCX0KCQkJCQkJYXN5bmMgc2V0KGQsIGYpIHsKCQkJCQkJCXJldHVybiB0aGlzLnN1cHBvcnRHTVByb21pc2VzID8gYXdhaXQgR00uc2V0VmFsdWUoZCwgZikgOiBQcm9taXNlLnJlc29sdmUodGhpcy5zeW5jU2V0KGQsIGYpKTsKCQkJCQkJfQoJCQkJCQlzeW5jRGVsZXRlKGQpIHsKCQkJCQkJCXJldHVybiB0aGlzLnN1cHBvcnRHTSA/IEdNX2RlbGV0ZVZhbHVlKGQpIDogd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGQpOwoJCQkJCQl9CgkJCQkJCWFzeW5jIGRlbGV0ZShkKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5zdXBwb3J0R01Qcm9taXNlcyA/IGF3YWl0IEdNLmRlbGV0ZVZhbHVlKGQpIDogUHJvbWlzZS5yZXNvbHZlKHRoaXMuc3luY0RlbGV0ZShkKSk7CgkJCQkJCX0KCQkJCQkJc3luY0xpc3QoKSB7CgkJCQkJCQlyZXR1cm4gdGhpcy5zdXBwb3J0R00gPyBHTV9saXN0VmFsdWVzKCkgOiBfLnc7CgkJCQkJCX0KCQkJCQkJYXN5bmMgbGlzdCgpIHsKCQkJCQkJCXJldHVybiB0aGlzLnN1cHBvcnRHTVByb21pc2VzID8gYXdhaXQgR00ubGlzdFZhbHVlcygpIDogUHJvbWlzZS5yZXNvbHZlKHRoaXMuc3luY0xpc3QoKSk7CgkJCQkJCX0KCQkJCQl9KCk7CgkJCQkJbSgpOwoJCQkJfSBjYXRjaCAoZCkgewoJCQkJCW0oZCk7CgkJCQl9CgkJCX0pOwoJCX0sCgkJIi4vc3JjL3V0aWxzL3RyYW5zbGF0ZUFwaXMudHMiOiAoZCwgZiwgcCkgPT4gewoJCQkidXNlIHN0cmljdCI7CgkJCXAuYShkLCBhc3luYyAoZCwgbSkgPT4gewoJCQkJdHJ5IHsKCQkJCQlwLmQoZiwgewoJCQkJCQlUbDogKCkgPT4gdHJhbnNsYXRlLAoJCQkJCQlvMDogKCkgPT4gZGV0ZWN0LAoJCQkJCQlxaDogKCkgPT4gdywKCQkJCQkJdk46ICgpID0+IEMKCQkJCQl9KTsKCQkJCQl2YXIgaCA9IHAoIi4vc3JjL2NvbmZpZy9jb25maWcuanMiKSwgZyA9IHAoIi4vc3JjL3V0aWxzL2dtLnRzIiksIF8gPSBwKCIuL3NyYy91dGlscy9zdG9yYWdlLnRzIiksIHYgPSBkKFtnLCBfXSk7CgkJCQkJW2csIF9dID0gdi50aGVuID8gKGF3YWl0IHYpKCkgOiB2OwoJCQkJCWxldCBiID0gbmV3IGNsYXNzIHsKCQkJCQkJaXNGT1NXTFlFcnJvcihkKSB7CgkJCQkJCQlyZXR1cm4gT2JqZWN0Lmhhc093bihkLCAiZXJyb3IiKTsKCQkJCQkJfQoJCQkJCQlhc3luYyByZXF1ZXN0KGQsIGYgPSB7fSkgewoJCQkJCQkJdHJ5IHsKCQkJCQkJCQlsZXQgcCA9IGF3YWl0ICgoMCwgZy5HMykoYCR7aC5rJH0ke2R9YCwgewoJCQkJCQkJCQl0aW1lb3V0OiAzZTMsCgkJCQkJCQkJCS4uLmYKCQkJCQkJCQl9KSksIG0gPSBhd2FpdCAocC5qc29uKCkpOwoJCQkJCQkJCWlmICh0aGlzLmlzRk9TV0xZRXJyb3IobSkpIHRocm93IG0uZXJyb3I7CgkJCQkJCQkJcmV0dXJuIG07CgkJCQkJCQl9IGNhdGNoIChkKSB7CgkJCQkJCQkJY29uc29sZS5lcnJvcihgW1ZPVF0gRmFpbGVkIHRvIGdldCBkYXRhIGZyb20gRk9TV0xZIFRyYW5zbGF0ZSBBUEksIGJlY2F1c2UgJHtkLm1lc3NhZ2V9YCk7CgkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWFzeW5jIHRyYW5zbGF0ZU11bHRpcGxlKGQsIGYsIHApIHsKCQkJCQkJCWxldCBtID0gYXdhaXQgKHRoaXMucmVxdWVzdCgiL3RyYW5zbGF0ZSIsIHsKCQkJCQkJCQltZXRob2Q6ICJQT1NUIiwKCQkJCQkJCQloZWFkZXJzOiB7ICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIgfSwKCQkJCQkJCQlib2R5OiBKU09OLnN0cmluZ2lmeSh7CgkJCQkJCQkJCXRleHQ6IGQsCgkJCQkJCQkJCWxhbmc6IGYsCgkJCQkJCQkJCXNlcnZpY2U6IHAKCQkJCQkJCQl9KQoJCQkJCQkJfSkpOwoJCQkJCQkJcmV0dXJuIG0gPyBtLnRyYW5zbGF0aW9ucyA6IGQ7CgkJCQkJCX0KCQkJCQkJYXN5bmMgdHJhbnNsYXRlKGQsIGYsIHApIHsKCQkJCQkJCWxldCBtID0gYXdhaXQgKHRoaXMucmVxdWVzdChgL3RyYW5zbGF0ZT8ke25ldyBVUkxTZWFyY2hQYXJhbXMoewoJCQkJCQkJCXRleHQ6IGQsCgkJCQkJCQkJbGFuZzogZiwKCQkJCQkJCQlzZXJ2aWNlOiBwCgkJCQkJCQl9KX1gKSk7CgkJCQkJCQlyZXR1cm4gbSA/IG0udHJhbnNsYXRpb25zWzBdIDogZDsKCQkJCQkJfQoJCQkJCQlhc3luYyBkZXRlY3QoZCwgZikgewoJCQkJCQkJbGV0IHAgPSBhd2FpdCAodGhpcy5yZXF1ZXN0KGAvZGV0ZWN0PyR7bmV3IFVSTFNlYXJjaFBhcmFtcyh7CgkJCQkJCQkJdGV4dDogZCwKCQkJCQkJCQlzZXJ2aWNlOiBmCgkJCQkJCQl9KX1gKSk7CgkJCQkJCQlyZXR1cm4gcCA/IHAubGFuZyA6ICJlbiI7CgkJCQkJCX0KCQkJCQl9KCksIHggPSB7IGFzeW5jIGRldGVjdChkKSB7CgkJCQkJCXRyeSB7CgkJCQkJCQlsZXQgZiA9IGF3YWl0ICgwLCBnLkczKShoLnNsLCB7CgkJCQkJCQkJbWV0aG9kOiAiUE9TVCIsCgkJCQkJCQkJYm9keTogZCwKCQkJCQkJCQl0aW1lb3V0OiAzZTMKCQkJCQkJCX0pOwoJCQkJCQkJcmV0dXJuIGF3YWl0IGYudGV4dCgpOwoJCQkJCQl9IGNhdGNoIChkKSB7CgkJCQkJCQlyZXR1cm4gY29uc29sZS5lcnJvcihgW1ZPVF0gRXJyb3IgZ2V0dGluZyBsYW5nIGZyb20gdGV4dCwgYmVjYXVzZSAke2QubWVzc2FnZX1gKSwgImVuIjsKCQkJCQkJfQoJCQkJCX0gfTsKCQkJCQlhc3luYyBmdW5jdGlvbiB0cmFuc2xhdGUoZCwgZiA9ICIiLCBwID0gInJ1IikgewoJCQkJCQlsZXQgbSA9IGF3YWl0IF8uZC5nZXQoInRyYW5zbGF0aW9uU2VydmljZSIsIGgubUUpOwoJCQkJCQlzd2l0Y2ggKG0pIHsKCQkJCQkJCWNhc2UgInlhbmRleGJyb3dzZXIiOgoJCQkJCQkJY2FzZSAibXNlZGdlIjogewoJCQkJCQkJCWxldCBoID0gZiAmJiBwID8gYCR7Zn0tJHtwfWAgOiBwOwoJCQkJCQkJCXJldHVybiBBcnJheS5pc0FycmF5KGQpID8gYXdhaXQgYi50cmFuc2xhdGVNdWx0aXBsZShkLCBoLCBtKSA6IGF3YWl0IGIudHJhbnNsYXRlKGQsIGgsIG0pOwoJCQkJCQkJfQoJCQkJCQkJZGVmYXVsdDogcmV0dXJuIGQ7CgkJCQkJCX0KCQkJCQl9CgkJCQkJYXN5bmMgZnVuY3Rpb24gZGV0ZWN0KGQpIHsKCQkJCQkJbGV0IGYgPSBhd2FpdCBfLmQuZ2V0KCJkZXRlY3RTZXJ2aWNlIiwgaC5LMik7CgkJCQkJCXN3aXRjaCAoZikgewoJCQkJCQkJY2FzZSAieWFuZGV4YnJvd3NlciI6CgkJCQkJCQljYXNlICJtc2VkZ2UiOiByZXR1cm4gYXdhaXQgYi5kZXRlY3QoZCwgZik7CgkJCQkJCQljYXNlICJydXN0LXNlcnZlciI6IHJldHVybiBhd2FpdCB4LmRldGVjdChkKTsKCQkJCQkJCWRlZmF1bHQ6IHJldHVybiAiZW4iOwoJCQkJCQl9CgkJCQkJfQoJCQkJCWxldCBDID0gWyJ5YW5kZXhicm93c2VyIiwgIm1zZWRnZSJdLCB3ID0gWy4uLkMsICJydXN0LXNlcnZlciJdOwoJCQkJCW0oKTsKCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQltKGQpOwoJCQkJfQoJCQl9KTsKCQl9LAoJCSIuL3NyYy91dGlscy91dGlscy50cyI6IChkLCBmLCBwKSA9PiB7CgkJCSJ1c2Ugc3RyaWN0IjsKCQkJcC5hKGQsIGFzeW5jIChkLCBtKSA9PiB7CgkJCQl0cnkgewoJCQkJCXAuZChmLCB7CgkJCQkJCUJzOiAoKSA9PiBpc1BpUEF2YWlsYWJsZSwKCQkJCQkJQ0s6ICgpID0+IGluaXRIbHMsCgkJCQkJCUVoOiAoKSA9PiBleGl0RnVsbHNjcmVlbiwKCQkJCQkJR1c6ICgpID0+IHRvRmxhdE9iaiwKCQkJCQkJSEQ6ICgpID0+IFQsCgkJCQkJCUxlOiAoKSA9PiBjbGVhckZpbGVOYW1lLAoJCQkJCQlNUjogKCkgPT4gZG93bmxvYWRUcmFuc2xhdGlvbiwKCQkJCQkJUjU6ICgpID0+IEUsCgkJCQkJCVVWOiAoKSA9PiB3YWl0Rm9yQ29uZGl0aW9uLAoJCQkJCQlXTjogKCkgPT4gZG93bmxvYWRCbG9iLAoJCQkJCQlXbzogKCkgPT4gb3BlbkRvd25sb2FkVHJhbnNsYXRpb24sCgkJCQkJCVg1OiAoKSA9PiBjbGVhblRleHQsCgkJCQkJCWRKOiAoKSA9PiBnZXRIZWFkZXJzLAoJCQkJCQlsZzogKCkgPT4gZ2V0VGltZXN0YW1wLAoJCQkJCQlxRTogKCkgPT4gY2xhbXAsCgkJCQkJCXdSOiAoKSA9PiB0aW1lb3V0CgkJCQkJfSk7CgkJCQkJdmFyIGggPSBwKCIuL25vZGVfbW9kdWxlcy9ib3dzZXIvZXM1LmpzIiksIGcgPSBwLm4oaCksIF8gPSBwKCIuL25vZGVfbW9kdWxlcy9icm93c2VyLWlkMy13cml0ZXIvZGlzdC9icm93c2VyLWlkMy13cml0ZXIubWpzIiksIHYgPSBwKCIuL25vZGVfbW9kdWxlcy9Adm90LmpzL3NoYXJlZC9kaXN0L2RhdGEvY29uc3RzLmpzIiksIGIgPSBwKCIuL3NyYy91dGlscy9sb2NhbGl6YXRpb24udHMiKSwgeCA9IGQoW2JdKTsKCQkJCQliID0gKHgudGhlbiA/IChhd2FpdCB4KSgpIDogeClbMF07CgkJCQkJbGV0IEMgPSAvKD86aHR0cHM/fHd3d3xcYmh0dHBccyspW15ccy9dKj8oPzpcLlxzKlthLXpdezIsfXxcLylcUyp8I1teXHMjXSt8YXV0by1nZW5lcmF0ZWRccytieVxzK3lvdXR1YmV8cHJvdmlkZWRccyt0b1xzK3lvdXR1YmVccytieXxyZWxlYXNlZFxzK29ufHBheXBhbD98MHhbXGRhLWZdezQwfXxbMTNdWzEtOWEtel17MjUsMzR9fDRbXGRhYl1bMS05YS16XXs5M318dFsxLTlhLXpdezMzfS9naSwgdyA9IG5ldyBTZXQoWwoJCQkJCQkidWsiLAoJCQkJCQkiYmUiLAoJCQkJCQkiYmciLAoJCQkJCQkibWsiLAoJCQkJCQkic3IiLAoJCQkJCQkiYnMiLAoJCQkJCQkiaHIiLAoJCQkJCQkic2wiLAoJCQkJCQkicGwiLAoJCQkJCQkic2siLAoJCQkJCQkiY3MiCgkJCQkJXSksIFQgPSAoKCkgPT4gdi5YaC5pbmNsdWRlcyhiLnYpID8gYi52IDogdy5oYXMoYi52KSA/ICJydSIgOiAiZW4iKSgpLCBFID0gZygpLmdldFBhcnNlcih3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkuZ2V0UmVzdWx0KCksIGlzUGlQQXZhaWxhYmxlID0gKCkgPT4gInBpY3R1cmVJblBpY3R1cmVFbmFibGVkIiBpbiBkb2N1bWVudCAmJiBkb2N1bWVudC5waWN0dXJlSW5QaWN0dXJlRW5hYmxlZDsKCQkJCQlmdW5jdGlvbiBpbml0SGxzKCkgewoJCQkJCQlyZXR1cm4gdHlwZW9mIEhscyA8ICJ1IiAmJiBIbHM/LmlzU3VwcG9ydGVkKCkgPyBuZXcgSGxzKHsKCQkJCQkJCWRlYnVnOiAhMSwKCQkJCQkJCWxvd0xhdGVuY3lNb2RlOiAhMCwKCQkJCQkJCWJhY2tCdWZmZXJMZW5ndGg6IDkwCgkJCQkJCX0pIDogdm9pZCAwOwoJCQkJCX0KCQkJCQlmdW5jdGlvbiBjbGVhblRleHQoZCwgZikgewoJCQkJCQlyZXR1cm4gKGQgKyAiICIgKyAoZiB8fCAiIikpLnJlcGxhY2UoQywgIiIpLnJlcGxhY2UoL1teXHB7TH1dKy9ndSwgIiAiKS5zdWJzdHJpbmcoMCwgNDUwKS50cmltKCk7CgkJCQkJfQoJCQkJCWZ1bmN0aW9uIGRvd25sb2FkQmxvYihkLCBmKSB7CgkJCQkJCWxldCBwID0gVVJMLmNyZWF0ZU9iamVjdFVSTChkKSwgbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKCQkJCQkJbS5ocmVmID0gcCwgbS5kb3dubG9hZCA9IGYsIG0uY2xpY2soKSwgVVJMLnJldm9rZU9iamVjdFVSTChwKTsKCQkJCQl9CgkJCQkJZnVuY3Rpb24gY2xlYXJGaWxlTmFtZShkKSB7CgkJCQkJCXJldHVybiBkLnRyaW0oKS5sZW5ndGggPT09IDAgPyBuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygiZW4tdXMiKS5yZXBsYWNlQWxsKCIvIiwgIi0iKSA6IGQucmVwbGFjZSgvXmh0dHBzPzpcL1wvLywgIiIpLnJlcGxhY2UoL1tcXC86Kj8iJzw+fF0vZywgIi0iKTsKCQkJCQl9CgkJCQkJZnVuY3Rpb24gZ2V0VGltZXN0YW1wKCkgewoJCQkJCQlyZXR1cm4gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMWUzKTsKCQkJCQl9CgkJCQkJZnVuY3Rpb24gZ2V0SGVhZGVycyhkKSB7CgkJCQkJCXJldHVybiBkIGluc3RhbmNlb2YgSGVhZGVycyA/IE9iamVjdC5mcm9tRW50cmllcyhkLmVudHJpZXMoKSkgOiBBcnJheS5pc0FycmF5KGQpID8gT2JqZWN0LmZyb21FbnRyaWVzKGQpIDogZCB8fCB7fTsKCQkJCQl9CgkJCQkJZnVuY3Rpb24gY2xhbXAoZCwgZiA9IDAsIHAgPSAxMDApIHsKCQkJCQkJcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KGQsIGYpLCBwKTsKCQkJCQl9CgkJCQkJZnVuY3Rpb24gdG9GbGF0T2JqKGQpIHsKCQkJCQkJcmV0dXJuIE9iamVjdC5lbnRyaWVzKGQpLnJlZHVjZSgoZiwgW3AsIG1dKSA9PiB7CgkJCQkJCQlpZiAobSA9PT0gdm9pZCAwKSByZXR1cm4gZjsKCQkJCQkJCWlmICh0eXBlb2YgbSAhPSAib2JqZWN0IikgcmV0dXJuIGZbcF0gPSBtLCBmOwoJCQkJCQkJbGV0IGggPSBPYmplY3QuZW50cmllcyh0b0ZsYXRPYmooZFtwXSkpLnJlZHVjZSgoZCwgW2YsIG1dKSA9PiAoZFtgJHtwfS4ke2Z9YF0gPSBtLCBkKSwge30pOwoJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQkuLi5mLAoJCQkJCQkJCS4uLmgKCQkJCQkJCX07CgkJCQkJCX0sIHt9KTsKCQkJCQl9CgkJCQkJYXN5bmMgZnVuY3Rpb24gZXhpdEZ1bGxzY3JlZW4oKSB7CgkJCQkJCWxldCBkID0gZG9jdW1lbnQ7CgkJCQkJCShkLmZ1bGxzY3JlZW5FbGVtZW50IHx8IGQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnQpICYmIChkLndlYmtpdEV4aXRGdWxsc2NyZWVuICYmIGF3YWl0IGQud2Via2l0RXhpdEZ1bGxzY3JlZW4oKSwgZC5leGl0RnVsbHNjcmVlbiAmJiBhd2FpdCBkLmV4aXRGdWxsc2NyZWVuKCkpOwoJCQkJCX0KCQkJCQlsZXQgc2xlZXAgPSAoZCkgPT4gbmV3IFByb21pc2UoKGYpID0+IHNldFRpbWVvdXQoZiwgZCkpOwoJCQkJCWZ1bmN0aW9uIHRpbWVvdXQoZCwgZiA9ICJPcGVyYXRpb24gdGltZWQgb3V0IikgewoJCQkJCQlyZXR1cm4gbmV3IFByb21pc2UoKHAsIG0pID0+IHsKCQkJCQkJCXNldFRpbWVvdXQoKCkgPT4gbShFcnJvcihmKSksIGQpOwoJCQkJCQl9KTsKCQkJCQl9CgkJCQkJYXN5bmMgZnVuY3Rpb24gd2FpdEZvckNvbmRpdGlvbihkLCBmLCBwID0gITEpIHsKCQkJCQkJbGV0IG0gPSAhMTsKCQkJCQkJcmV0dXJuIFByb21pc2UucmFjZShbKGFzeW5jICgpID0+IHsKCQkJCQkJCWZvciAoOyAhZCgpICYmICFtOykgYXdhaXQgc2xlZXAoMTAwKTsKCQkJCQkJfSkoKSwgbmV3IFByb21pc2UoKGQsIGgpID0+IHsKCQkJCQkJCXNldFRpbWVvdXQoKCkgPT4gewoJCQkJCQkJCW0gPSAhMCwgcCA/IGgoRXJyb3IoYFdhaXQgZm9yIGNvbmRpdGlvbiByZWFjaGVkIHRpbWVvdXQgb2YgJHtmfWApKSA6IGQoKTsKCQkJCQkJCX0sIGYpOwoJCQkJCQl9KV0pOwoJCQkJCX0KCQkJCQlhc3luYyBmdW5jdGlvbiBfZG93bmxvYWRUcmFuc2xhdGlvbldpdGhQcm9ncmVzcyhkLCBmLCBwID0gKGQpID0+IHt9KSB7CgkJCQkJCWxldCBtID0gZC5ib2R5Py5nZXRSZWFkZXIoKTsKCQkJCQkJaWYgKCFtKSB0aHJvdyBFcnJvcigiUmVzcG9uc2UgYm9keSBpcyBub3QgcmVhZGFibGUiKTsKCQkJCQkJbGV0IGggPSBuZXcgVWludDhBcnJheShmKSwgZyA9IDA7CgkJCQkJCWZvciAoOzspIHsKCQkJCQkJCWxldCB7IGRvbmU6IGQsIHZhbHVlOiBfIH0gPSBhd2FpdCBtLnJlYWQoKTsKCQkJCQkJCWlmIChkKSBicmVhazsKCQkJCQkJCWguc2V0KF8sIGcpLCBnICs9IF8ubGVuZ3RoLCBwKE1hdGgucm91bmQoZyAvIGYgKiAxMDApKTsKCQkJCQkJfQoJCQkJCQlyZXR1cm4gaC5idWZmZXI7CgkJCQkJfQoJCQkJCWFzeW5jIGZ1bmN0aW9uIGRvd25sb2FkVHJhbnNsYXRpb24oZCwgZiwgcCA9IChkKSA9PiB7fSkgewoJCQkJCQlsZXQgbSA9ICsoZC5oZWFkZXJzLmdldCgiQ29udGVudC1MZW5ndGgiKSA/PyAwKSwgaCA9IGF3YWl0IChtID8gX2Rvd25sb2FkVHJhbnNsYXRpb25XaXRoUHJvZ3Jlc3MoZCwgbSwgcCkgOiBkLmFycmF5QnVmZmVyKCkpOwoJCQkJCQlwKDEwMCk7CgkJCQkJCWxldCBnID0gbmV3IF8uUShoKTsKCQkJCQkJcmV0dXJuIGcuc2V0RnJhbWUoIlRJVDIiLCBmKSwgZy5hZGRUYWcoKSwgZG93bmxvYWRCbG9iKGcuZ2V0QmxvYigpLCBgJHtmfS5tcDNgKSwgITA7CgkJCQkJfQoJCQkJCWZ1bmN0aW9uIG9wZW5Eb3dubG9hZFRyYW5zbGF0aW9uKGQpIHsKCQkJCQkJd2luZG93Lm9wZW4oZCwgIl9ibGFuayIpPy5mb2N1cygpOwoJCQkJCX0KCQkJCQltKCk7CgkJCQl9IGNhdGNoIChkKSB7CgkJCQkJbShkKTsKCQkJCX0KCQkJfSk7CgkJfSwKCQkiLi9zcmMvdXRpbHMvdm9sdW1lLnRzIjogKGQsIGYsIHApID0+IHsKCQkJInVzZSBzdHJpY3QiOwoJCQlwLmQoZiwgeyBxOiAoKSA9PiBzeW5jVm9sdW1lIH0pOwoJCQlmdW5jdGlvbiBzeW5jVm9sdW1lKGQsIGYsIHAsIG0pIHsKCQkJCWxldCBoID0gZjsKCQkJCXJldHVybiBmID4gbSA/IChoID0gcCArIChmIC0gbSksIGggPSBoID4gMTAwID8gMTAwIDogTWF0aC5tYXgoaCwgMCksIGQudm9sdW1lID0gaCAvIDEwMCkgOiBmIDwgbSAmJiAoaCA9IHAgLSAobSAtIGYpLCBoID0gaCA+IDEwMCA/IDEwMCA6IE1hdGgubWF4KGgsIDApLCBkLnZvbHVtZSA9IGggLyAxMDApLCBoOwoJCQl9CgkJfQoJfSwgZiA9IHt9OwoJZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhwKSB7CgkJdmFyIG0gPSBmW3BdOwoJCWlmIChtICE9PSB2b2lkIDApIHJldHVybiBtLmV4cG9ydHM7CgkJdmFyIGggPSBmW3BdID0geyBleHBvcnRzOiB7fSB9OwoJCXJldHVybiBkW3BdLmNhbGwoaC5leHBvcnRzLCBoLCBoLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pLCBoLmV4cG9ydHM7Cgl9CgkoKCkgPT4gewoJCXZhciBkID0gdHlwZW9mIFN5bWJvbCA9PSAiZnVuY3Rpb24iID8gU3ltYm9sKCJ3ZWJwYWNrIHF1ZXVlcyIpIDogIl9fd2VicGFja19xdWV1ZXNfXyIsIGYgPSB0eXBlb2YgU3ltYm9sID09ICJmdW5jdGlvbiIgPyBTeW1ib2woIndlYnBhY2sgZXhwb3J0cyIpIDogIl9fd2VicGFja19leHBvcnRzX18iLCBwID0gdHlwZW9mIFN5bWJvbCA9PSAiZnVuY3Rpb24iID8gU3ltYm9sKCJ3ZWJwYWNrIGVycm9yIikgOiAiX193ZWJwYWNrX2Vycm9yX18iLCByZXNvbHZlUXVldWUgPSAoZCkgPT4gewoJCQlkICYmIGQuZCA8IDEgJiYgKGQuZCA9IDEsIGQuZm9yRWFjaCgoZCkgPT4gZC5yLS0pLCBkLmZvckVhY2goKGQpID0+IGQuci0tID8gZC5yKysgOiBkKCkpKTsKCQl9LCB3cmFwRGVwcyA9IChtKSA9PiBtLm1hcCgobSkgPT4gewoJCQlpZiAodHlwZW9mIG0gPT0gIm9iamVjdCIgJiYgbSkgewoJCQkJaWYgKG1bZF0pIHJldHVybiBtOwoJCQkJaWYgKG0udGhlbikgewoJCQkJCXZhciBoID0gW107CgkJCQkJaC5kID0gMCwgbS50aGVuKChkKSA9PiB7CgkJCQkJCWdbZl0gPSBkLCByZXNvbHZlUXVldWUoaCk7CgkJCQkJfSwgKGQpID0+IHsKCQkJCQkJZ1twXSA9IGQsIHJlc29sdmVRdWV1ZShoKTsKCQkJCQl9KTsKCQkJCQl2YXIgZyA9IHt9OwoJCQkJCXJldHVybiBnW2RdID0gKGQpID0+IGQoaCksIGc7CgkJCQl9CgkJCX0KCQkJdmFyIF8gPSB7fTsKCQkJcmV0dXJuIF9bZF0gPSAoZCkgPT4ge30sIF9bZl0gPSBtLCBfOwoJCX0pOwoJCV9fd2VicGFja19yZXF1aXJlX18uYSA9IChtLCBoLCBnKSA9PiB7CgkJCXZhciBfOwoJCQlnICYmICgoXyA9IFtdKS5kID0gLTEpOwoJCQl2YXIgdiA9IG5ldyBTZXQoKSwgZXhwb3J0cyA9IG0uZXhwb3J0cywgeCwgQywgdywgVCA9IG5ldyBQcm9taXNlKChkLCBmKSA9PiB7CgkJCQl3ID0gZiwgQyA9IGQ7CgkJCX0pOwoJCQlUW2ZdID0gZXhwb3J0cywgVFtkXSA9IChkKSA9PiAoXyAmJiBkKF8pLCB2LmZvckVhY2goZCksIFQuY2F0Y2goKGQpID0+IHt9KSksIG0uZXhwb3J0cyA9IFQsIGgoKG0pID0+IHsKCQkJCXggPSB3cmFwRGVwcyhtKTsKCQkJCXZhciBmbiwgZ2V0UmVzdWx0ID0gKCkgPT4geC5tYXAoKGQpID0+IHsKCQkJCQlpZiAoZFtwXSkgdGhyb3cgZFtwXTsKCQkJCQlyZXR1cm4gZFtmXTsKCQkJCX0pLCBoID0gbmV3IFByb21pc2UoKGYpID0+IHsKCQkJCQlmbiA9ICgpID0+IGYoZ2V0UmVzdWx0KSwgZm4uciA9IDA7CgkJCQkJdmFyIGZuUXVldWUgPSAoZCkgPT4gZCAhPT0gXyAmJiAhdi5oYXMoZCkgJiYgKHYuYWRkKGQpLCBkICYmICFkLmQgJiYgKGZuLnIrKywgZC5wdXNoKGZuKSkpOwoJCQkJCXgubWFwKChmKSA9PiBmW2RdKGZuUXVldWUpKTsKCQkJCX0pOwoJCQkJcmV0dXJuIGZuLnIgPyBoIDogZ2V0UmVzdWx0KCk7CgkJCX0sIChkKSA9PiAoZCA/IHcoVFtwXSA9IGQpIDogQyhleHBvcnRzKSwgcmVzb2x2ZVF1ZXVlKF8pKSksIF8gJiYgXy5kIDwgMCAmJiAoXy5kID0gMCk7CgkJfTsKCX0pKCksIF9fd2VicGFja19yZXF1aXJlX18ubiA9IChkKSA9PiB7CgkJdmFyIGYgPSBkICYmIGQuX19lc01vZHVsZSA/ICgpID0+IGQuZGVmYXVsdCA6ICgpID0+IGQ7CgkJcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uZChmLCB7IGE6IGYgfSksIGY7Cgl9LCBfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZikgPT4gewoJCWZvciAodmFyIHAgaW4gZikgX193ZWJwYWNrX3JlcXVpcmVfXy5vKGYsIHApICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgcCkgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIHAsIHsKCQkJZW51bWVyYWJsZTogITAsCgkJCWdldDogZltwXQoJCX0pOwoJfSwgX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKGQsIGYpID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkLCBmKTsKCXZhciBwID0gX193ZWJwYWNrX3JlcXVpcmVfXygiLi9zcmMvaW5kZXguanMiKTsKfSkoKTsK","requires":[{"meta":{"name":"hls.light.min.js","url":"https://cdnjs.cloudflare.com/ajax/libs/hls.js/1.5.18/hls.light.min.js","ts":1755945990726,"mimetype":"text/javascript"},"source":"IWZ1bmN0aW9uIGUodCl7dmFyIHIsaTtyPXRoaXMsaT1mdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUsdCl7dmFyIHI9T2JqZWN0LmtleXMoZSk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTt0JiYoaT1pLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KS5lbnVtZXJhYmxlfSkpKSxyLnB1c2guYXBwbHkocixpKX1yZXR1cm4gcn1mdW5jdGlvbiBpKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBpPW51bGwhPWFyZ3VtZW50c1t0XT9hcmd1bWVudHNbdF06e307dCUyP3IoT2JqZWN0KGkpLCEwKS5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgcixuLHM7cj1lLG49dCxzPWlbdF0sKG49YShuKSlpbiByP09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLG4se3ZhbHVlOnMsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTpyW25dPXN9KSk6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM/T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhpKSk6cihPYmplY3QoaSkpLmZvckVhY2goKGZ1bmN0aW9uKHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihpLHQpKX0pKX1yZXR1cm4gZX1mdW5jdGlvbiBhKGUpe3ZhciB0PWZ1bmN0aW9uKGUsdCl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHwhZSlyZXR1cm4gZTt2YXIgcj1lW1N5bWJvbC50b1ByaW1pdGl2ZV07aWYodm9pZCAwIT09cil7dmFyIGk9ci5jYWxsKGUsdHx8ImRlZmF1bHQiKTtpZigib2JqZWN0IiE9dHlwZW9mIGkpcmV0dXJuIGk7dGhyb3cgbmV3IFR5cGVFcnJvcigiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS4iKX1yZXR1cm4oInN0cmluZyI9PT10P1N0cmluZzpOdW1iZXIpKGUpfShlLCJzdHJpbmciKTtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIHQ/dDpTdHJpbmcodCl9ZnVuY3Rpb24gbihlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgaT10W3JdO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsYShpLmtleSksaSl9fWZ1bmN0aW9uIHMoZSx0LHIpe3JldHVybiB0JiZuKGUucHJvdG90eXBlLHQpLHImJm4oZSxyKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwicHJvdG90eXBlIix7d3JpdGFibGU6ITF9KSxlfWZ1bmN0aW9uIG8oKXtyZXR1cm4gbz1PYmplY3QuYXNzaWduP09iamVjdC5hc3NpZ24uYmluZCgpOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciByPWFyZ3VtZW50c1t0XTtmb3IodmFyIGkgaW4gcilPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixpKSYmKGVbaV09cltpXSl9cmV0dXJuIGV9LG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIGwoZSx0KXtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGQoZSx0KX1mdW5jdGlvbiB1KGUpe3JldHVybiB1PU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2YuYmluZCgpOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSx1KGUpfWZ1bmN0aW9uIGQoZSx0KXtyZXR1cm4gZD1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mLmJpbmQoKTpmdW5jdGlvbihlLHQpe3JldHVybiBlLl9fcHJvdG9fXz10LGV9LGQoZSx0KX1mdW5jdGlvbiBoKGUsdCxyKXtyZXR1cm4gaD1mdW5jdGlvbigpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFByb3h5KXJldHVybiEwO3RyeXtyZXR1cm4gQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sKGZ1bmN0aW9uKCl7fSkpKSwhMH1jYXRjaChlKXtyZXR1cm4hMX19KCk/UmVmbGVjdC5jb25zdHJ1Y3QuYmluZCgpOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1bbnVsbF07aS5wdXNoLmFwcGx5KGksdCk7dmFyIGE9bmV3KEZ1bmN0aW9uLmJpbmQuYXBwbHkoZSxpKSk7cmV0dXJuIHImJmQoYSxyLnByb3RvdHlwZSksYX0saC5hcHBseShudWxsLGFyZ3VtZW50cyl9ZnVuY3Rpb24gZihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgTWFwP25ldyBNYXA6dm9pZCAwO3JldHVybiBmPWZ1bmN0aW9uKGUpe2lmKG51bGw9PT1lfHwhZnVuY3Rpb24oZSl7dHJ5e3JldHVybi0xIT09RnVuY3Rpb24udG9TdHJpbmcuY2FsbChlKS5pbmRleE9mKCJbbmF0aXZlIGNvZGVdIil9Y2F0Y2godCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGV9fShlKSlyZXR1cm4gZTtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpO2lmKHZvaWQgMCE9PXQpe2lmKHQuaGFzKGUpKXJldHVybiB0LmdldChlKTt0LnNldChlLHIpfWZ1bmN0aW9uIHIoKXtyZXR1cm4gaChlLGFyZ3VtZW50cyx1KHRoaXMpLmNvbnN0cnVjdG9yKX1yZXR1cm4gci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnIsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZChyLGUpfSxmKGUpfWZ1bmN0aW9uIGMoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZSYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRlZmF1bHQiKT9lLmRlZmF1bHQ6ZX12YXIgdj17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKGUsdCl7dmFyIHIsaSxhLG4scztyPS9eKD89KCg/OlthLXpBLVowLTkrXC0uXSs6KT8pKVwxKD89KCg/OlwvXC9bXlwvPyNdKik/KSlcMig/PSgoPzooPzpbXj8jXC9dKlwvKSpbXjs/I1wvXSopPykpXDMoKD86O1tePyNdKik/KShcP1teI10qKT8oI1teXSopPyQvLGk9L14oPz0oW15cLz8jXSopKVwxKFteXSopJC8sYT0vKD86XC98XilcLig/PVwvKS9nLG49Lyg/OlwvfF4pXC5cLlwvKD8hXC5cLlwvKVteXC9dKig/PVwvKS9nLHM9e2J1aWxkQWJzb2x1dGVVUkw6ZnVuY3Rpb24oZSx0LHIpe2lmKHI9cnx8e30sZT1lLnRyaW0oKSwhKHQ9dC50cmltKCkpKXtpZighci5hbHdheXNOb3JtYWxpemUpcmV0dXJuIGU7dmFyIGE9cy5wYXJzZVVSTChlKTtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkVycm9yIHRyeWluZyB0byBwYXJzZSBiYXNlIFVSTC4iKTtyZXR1cm4gYS5wYXRoPXMubm9ybWFsaXplUGF0aChhLnBhdGgpLHMuYnVpbGRVUkxGcm9tUGFydHMoYSl9dmFyIG49cy5wYXJzZVVSTCh0KTtpZighbil0aHJvdyBuZXcgRXJyb3IoIkVycm9yIHRyeWluZyB0byBwYXJzZSByZWxhdGl2ZSBVUkwuIik7aWYobi5zY2hlbWUpcmV0dXJuIHIuYWx3YXlzTm9ybWFsaXplPyhuLnBhdGg9cy5ub3JtYWxpemVQYXRoKG4ucGF0aCkscy5idWlsZFVSTEZyb21QYXJ0cyhuKSk6dDt2YXIgbz1zLnBhcnNlVVJMKGUpO2lmKCFvKXRocm93IG5ldyBFcnJvcigiRXJyb3IgdHJ5aW5nIHRvIHBhcnNlIGJhc2UgVVJMLiIpO2lmKCFvLm5ldExvYyYmby5wYXRoJiYiLyIhPT1vLnBhdGhbMF0pe3ZhciBsPWkuZXhlYyhvLnBhdGgpO28ubmV0TG9jPWxbMV0sby5wYXRoPWxbMl19by5uZXRMb2MmJiFvLnBhdGgmJihvLnBhdGg9Ii8iKTt2YXIgdT17c2NoZW1lOm8uc2NoZW1lLG5ldExvYzpuLm5ldExvYyxwYXRoOm51bGwscGFyYW1zOm4ucGFyYW1zLHF1ZXJ5Om4ucXVlcnksZnJhZ21lbnQ6bi5mcmFnbWVudH07aWYoIW4ubmV0TG9jJiYodS5uZXRMb2M9by5uZXRMb2MsIi8iIT09bi5wYXRoWzBdKSlpZihuLnBhdGgpe3ZhciBkPW8ucGF0aCxoPWQuc3Vic3RyaW5nKDAsZC5sYXN0SW5kZXhPZigiLyIpKzEpK24ucGF0aDt1LnBhdGg9cy5ub3JtYWxpemVQYXRoKGgpfWVsc2UgdS5wYXRoPW8ucGF0aCxuLnBhcmFtc3x8KHUucGFyYW1zPW8ucGFyYW1zLG4ucXVlcnl8fCh1LnF1ZXJ5PW8ucXVlcnkpKTtyZXR1cm4gbnVsbD09PXUucGF0aCYmKHUucGF0aD1yLmFsd2F5c05vcm1hbGl6ZT9zLm5vcm1hbGl6ZVBhdGgobi5wYXRoKTpuLnBhdGgpLHMuYnVpbGRVUkxGcm9tUGFydHModSl9LHBhcnNlVVJMOmZ1bmN0aW9uKGUpe3ZhciB0PXIuZXhlYyhlKTtyZXR1cm4gdD97c2NoZW1lOnRbMV18fCIiLG5ldExvYzp0WzJdfHwiIixwYXRoOnRbM118fCIiLHBhcmFtczp0WzRdfHwiIixxdWVyeTp0WzVdfHwiIixmcmFnbWVudDp0WzZdfHwiIn06bnVsbH0sbm9ybWFsaXplUGF0aDpmdW5jdGlvbihlKXtmb3IoZT1lLnNwbGl0KCIiKS5yZXZlcnNlKCkuam9pbigiIikucmVwbGFjZShhLCIiKTtlLmxlbmd0aCE9PShlPWUucmVwbGFjZShuLCIiKSkubGVuZ3RoOyk7cmV0dXJuIGUuc3BsaXQoIiIpLnJldmVyc2UoKS5qb2luKCIiKX0sYnVpbGRVUkxGcm9tUGFydHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2NoZW1lK2UubmV0TG9jK2UucGF0aCtlLnBhcmFtcytlLnF1ZXJ5K2UuZnJhZ21lbnR9fSxlLmV4cG9ydHM9c30odik7dmFyIGc9di5leHBvcnRzLG09TnVtYmVyLmlzRmluaXRlfHxmdW5jdGlvbihlKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGUmJmlzRmluaXRlKGUpfSxwPU51bWJlci5pc1NhZmVJbnRlZ2VyfHxmdW5jdGlvbihlKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGUmJk1hdGguYWJzKGUpPD15fSx5PU51bWJlci5NQVhfU0FGRV9JTlRFR0VSfHw5MDA3MTk5MjU0NzQwOTkxLEU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuTUVESUFfQVRUQUNISU5HPSJobHNNZWRpYUF0dGFjaGluZyIsZS5NRURJQV9BVFRBQ0hFRD0iaGxzTWVkaWFBdHRhY2hlZCIsZS5NRURJQV9ERVRBQ0hJTkc9Imhsc01lZGlhRGV0YWNoaW5nIixlLk1FRElBX0RFVEFDSEVEPSJobHNNZWRpYURldGFjaGVkIixlLkJVRkZFUl9SRVNFVD0iaGxzQnVmZmVyUmVzZXQiLGUuQlVGRkVSX0NPREVDUz0iaGxzQnVmZmVyQ29kZWNzIixlLkJVRkZFUl9DUkVBVEVEPSJobHNCdWZmZXJDcmVhdGVkIixlLkJVRkZFUl9BUFBFTkRJTkc9Imhsc0J1ZmZlckFwcGVuZGluZyIsZS5CVUZGRVJfQVBQRU5ERUQ9Imhsc0J1ZmZlckFwcGVuZGVkIixlLkJVRkZFUl9FT1M9Imhsc0J1ZmZlckVvcyIsZS5CVUZGRVJfRkxVU0hJTkc9Imhsc0J1ZmZlckZsdXNoaW5nIixlLkJVRkZFUl9GTFVTSEVEPSJobHNCdWZmZXJGbHVzaGVkIixlLk1BTklGRVNUX0xPQURJTkc9Imhsc01hbmlmZXN0TG9hZGluZyIsZS5NQU5JRkVTVF9MT0FERUQ9Imhsc01hbmlmZXN0TG9hZGVkIixlLk1BTklGRVNUX1BBUlNFRD0iaGxzTWFuaWZlc3RQYXJzZWQiLGUuTEVWRUxfU1dJVENISU5HPSJobHNMZXZlbFN3aXRjaGluZyIsZS5MRVZFTF9TV0lUQ0hFRD0iaGxzTGV2ZWxTd2l0Y2hlZCIsZS5MRVZFTF9MT0FESU5HPSJobHNMZXZlbExvYWRpbmciLGUuTEVWRUxfTE9BREVEPSJobHNMZXZlbExvYWRlZCIsZS5MRVZFTF9VUERBVEVEPSJobHNMZXZlbFVwZGF0ZWQiLGUuTEVWRUxfUFRTX1VQREFURUQ9Imhsc0xldmVsUHRzVXBkYXRlZCIsZS5MRVZFTFNfVVBEQVRFRD0iaGxzTGV2ZWxzVXBkYXRlZCIsZS5BVURJT19UUkFDS1NfVVBEQVRFRD0iaGxzQXVkaW9UcmFja3NVcGRhdGVkIixlLkFVRElPX1RSQUNLX1NXSVRDSElORz0iaGxzQXVkaW9UcmFja1N3aXRjaGluZyIsZS5BVURJT19UUkFDS19TV0lUQ0hFRD0iaGxzQXVkaW9UcmFja1N3aXRjaGVkIixlLkFVRElPX1RSQUNLX0xPQURJTkc9Imhsc0F1ZGlvVHJhY2tMb2FkaW5nIixlLkFVRElPX1RSQUNLX0xPQURFRD0iaGxzQXVkaW9UcmFja0xvYWRlZCIsZS5TVUJUSVRMRV9UUkFDS1NfVVBEQVRFRD0iaGxzU3VidGl0bGVUcmFja3NVcGRhdGVkIixlLlNVQlRJVExFX1RSQUNLU19DTEVBUkVEPSJobHNTdWJ0aXRsZVRyYWNrc0NsZWFyZWQiLGUuU1VCVElUTEVfVFJBQ0tfU1dJVENIPSJobHNTdWJ0aXRsZVRyYWNrU3dpdGNoIixlLlNVQlRJVExFX1RSQUNLX0xPQURJTkc9Imhsc1N1YnRpdGxlVHJhY2tMb2FkaW5nIixlLlNVQlRJVExFX1RSQUNLX0xPQURFRD0iaGxzU3VidGl0bGVUcmFja0xvYWRlZCIsZS5TVUJUSVRMRV9GUkFHX1BST0NFU1NFRD0iaGxzU3VidGl0bGVGcmFnUHJvY2Vzc2VkIixlLkNVRVNfUEFSU0VEPSJobHNDdWVzUGFyc2VkIixlLk5PTl9OQVRJVkVfVEVYVF9UUkFDS1NfRk9VTkQ9Imhsc05vbk5hdGl2ZVRleHRUcmFja3NGb3VuZCIsZS5JTklUX1BUU19GT1VORD0iaGxzSW5pdFB0c0ZvdW5kIixlLkZSQUdfTE9BRElORz0iaGxzRnJhZ0xvYWRpbmciLGUuRlJBR19MT0FEX0VNRVJHRU5DWV9BQk9SVEVEPSJobHNGcmFnTG9hZEVtZXJnZW5jeUFib3J0ZWQiLGUuRlJBR19MT0FERUQ9Imhsc0ZyYWdMb2FkZWQiLGUuRlJBR19ERUNSWVBURUQ9Imhsc0ZyYWdEZWNyeXB0ZWQiLGUuRlJBR19QQVJTSU5HX0lOSVRfU0VHTUVOVD0iaGxzRnJhZ1BhcnNpbmdJbml0U2VnbWVudCIsZS5GUkFHX1BBUlNJTkdfVVNFUkRBVEE9Imhsc0ZyYWdQYXJzaW5nVXNlcmRhdGEiLGUuRlJBR19QQVJTSU5HX01FVEFEQVRBPSJobHNGcmFnUGFyc2luZ01ldGFkYXRhIixlLkZSQUdfUEFSU0VEPSJobHNGcmFnUGFyc2VkIixlLkZSQUdfQlVGRkVSRUQ9Imhsc0ZyYWdCdWZmZXJlZCIsZS5GUkFHX0NIQU5HRUQ9Imhsc0ZyYWdDaGFuZ2VkIixlLkZQU19EUk9QPSJobHNGcHNEcm9wIixlLkZQU19EUk9QX0xFVkVMX0NBUFBJTkc9Imhsc0Zwc0Ryb3BMZXZlbENhcHBpbmciLGUuTUFYX0FVVE9fTEVWRUxfVVBEQVRFRD0iaGxzTWF4QXV0b0xldmVsVXBkYXRlZCIsZS5FUlJPUj0iaGxzRXJyb3IiLGUuREVTVFJPWUlORz0iaGxzRGVzdHJveWluZyIsZS5LRVlfTE9BRElORz0iaGxzS2V5TG9hZGluZyIsZS5LRVlfTE9BREVEPSJobHNLZXlMb2FkZWQiLGUuTElWRV9CQUNLX0JVRkZFUl9SRUFDSEVEPSJobHNMaXZlQmFja0J1ZmZlclJlYWNoZWQiLGUuQkFDS19CVUZGRVJfUkVBQ0hFRD0iaGxzQmFja0J1ZmZlclJlYWNoZWQiLGUuU1RFRVJJTkdfTUFOSUZFU1RfTE9BREVEPSJobHNTdGVlcmluZ01hbmlmZXN0TG9hZGVkIixlfSh7fSksVD1mdW5jdGlvbihlKXtyZXR1cm4gZS5ORVRXT1JLX0VSUk9SPSJuZXR3b3JrRXJyb3IiLGUuTUVESUFfRVJST1I9Im1lZGlhRXJyb3IiLGUuS0VZX1NZU1RFTV9FUlJPUj0ia2V5U3lzdGVtRXJyb3IiLGUuTVVYX0VSUk9SPSJtdXhFcnJvciIsZS5PVEhFUl9FUlJPUj0ib3RoZXJFcnJvciIsZX0oe30pLFM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuS0VZX1NZU1RFTV9OT19LRVlTPSJrZXlTeXN0ZW1Ob0tleXMiLGUuS0VZX1NZU1RFTV9OT19BQ0NFU1M9ImtleVN5c3RlbU5vQWNjZXNzIixlLktFWV9TWVNURU1fTk9fU0VTU0lPTj0ia2V5U3lzdGVtTm9TZXNzaW9uIixlLktFWV9TWVNURU1fTk9fQ09ORklHVVJFRF9MSUNFTlNFPSJrZXlTeXN0ZW1Ob0NvbmZpZ3VyZWRMaWNlbnNlIixlLktFWV9TWVNURU1fTElDRU5TRV9SRVFVRVNUX0ZBSUxFRD0ia2V5U3lzdGVtTGljZW5zZVJlcXVlc3RGYWlsZWQiLGUuS0VZX1NZU1RFTV9TRVJWRVJfQ0VSVElGSUNBVEVfUkVRVUVTVF9GQUlMRUQ9ImtleVN5c3RlbVNlcnZlckNlcnRpZmljYXRlUmVxdWVzdEZhaWxlZCIsZS5LRVlfU1lTVEVNX1NFUlZFUl9DRVJUSUZJQ0FURV9VUERBVEVfRkFJTEVEPSJrZXlTeXN0ZW1TZXJ2ZXJDZXJ0aWZpY2F0ZVVwZGF0ZUZhaWxlZCIsZS5LRVlfU1lTVEVNX1NFU1NJT05fVVBEQVRFX0ZBSUxFRD0ia2V5U3lzdGVtU2Vzc2lvblVwZGF0ZUZhaWxlZCIsZS5LRVlfU1lTVEVNX1NUQVRVU19PVVRQVVRfUkVTVFJJQ1RFRD0ia2V5U3lzdGVtU3RhdHVzT3V0cHV0UmVzdHJpY3RlZCIsZS5LRVlfU1lTVEVNX1NUQVRVU19JTlRFUk5BTF9FUlJPUj0ia2V5U3lzdGVtU3RhdHVzSW50ZXJuYWxFcnJvciIsZS5NQU5JRkVTVF9MT0FEX0VSUk9SPSJtYW5pZmVzdExvYWRFcnJvciIsZS5NQU5JRkVTVF9MT0FEX1RJTUVPVVQ9Im1hbmlmZXN0TG9hZFRpbWVPdXQiLGUuTUFOSUZFU1RfUEFSU0lOR19FUlJPUj0ibWFuaWZlc3RQYXJzaW5nRXJyb3IiLGUuTUFOSUZFU1RfSU5DT01QQVRJQkxFX0NPREVDU19FUlJPUj0ibWFuaWZlc3RJbmNvbXBhdGlibGVDb2RlY3NFcnJvciIsZS5MRVZFTF9FTVBUWV9FUlJPUj0ibGV2ZWxFbXB0eUVycm9yIixlLkxFVkVMX0xPQURfRVJST1I9ImxldmVsTG9hZEVycm9yIixlLkxFVkVMX0xPQURfVElNRU9VVD0ibGV2ZWxMb2FkVGltZU91dCIsZS5MRVZFTF9QQVJTSU5HX0VSUk9SPSJsZXZlbFBhcnNpbmdFcnJvciIsZS5MRVZFTF9TV0lUQ0hfRVJST1I9ImxldmVsU3dpdGNoRXJyb3IiLGUuQVVESU9fVFJBQ0tfTE9BRF9FUlJPUj0iYXVkaW9UcmFja0xvYWRFcnJvciIsZS5BVURJT19UUkFDS19MT0FEX1RJTUVPVVQ9ImF1ZGlvVHJhY2tMb2FkVGltZU91dCIsZS5TVUJUSVRMRV9MT0FEX0VSUk9SPSJzdWJ0aXRsZVRyYWNrTG9hZEVycm9yIixlLlNVQlRJVExFX1RSQUNLX0xPQURfVElNRU9VVD0ic3VidGl0bGVUcmFja0xvYWRUaW1lT3V0IixlLkZSQUdfTE9BRF9FUlJPUj0iZnJhZ0xvYWRFcnJvciIsZS5GUkFHX0xPQURfVElNRU9VVD0iZnJhZ0xvYWRUaW1lT3V0IixlLkZSQUdfREVDUllQVF9FUlJPUj0iZnJhZ0RlY3J5cHRFcnJvciIsZS5GUkFHX1BBUlNJTkdfRVJST1I9ImZyYWdQYXJzaW5nRXJyb3IiLGUuRlJBR19HQVA9ImZyYWdHYXAiLGUuUkVNVVhfQUxMT0NfRVJST1I9InJlbXV4QWxsb2NFcnJvciIsZS5LRVlfTE9BRF9FUlJPUj0ia2V5TG9hZEVycm9yIixlLktFWV9MT0FEX1RJTUVPVVQ9ImtleUxvYWRUaW1lT3V0IixlLkJVRkZFUl9BRERfQ09ERUNfRVJST1I9ImJ1ZmZlckFkZENvZGVjRXJyb3IiLGUuQlVGRkVSX0lOQ09NUEFUSUJMRV9DT0RFQ1NfRVJST1I9ImJ1ZmZlckluY29tcGF0aWJsZUNvZGVjc0Vycm9yIixlLkJVRkZFUl9BUFBFTkRfRVJST1I9ImJ1ZmZlckFwcGVuZEVycm9yIixlLkJVRkZFUl9BUFBFTkRJTkdfRVJST1I9ImJ1ZmZlckFwcGVuZGluZ0Vycm9yIixlLkJVRkZFUl9TVEFMTEVEX0VSUk9SPSJidWZmZXJTdGFsbGVkRXJyb3IiLGUuQlVGRkVSX0ZVTExfRVJST1I9ImJ1ZmZlckZ1bGxFcnJvciIsZS5CVUZGRVJfU0VFS19PVkVSX0hPTEU9ImJ1ZmZlclNlZWtPdmVySG9sZSIsZS5CVUZGRVJfTlVER0VfT05fU1RBTEw9ImJ1ZmZlck51ZGdlT25TdGFsbCIsZS5JTlRFUk5BTF9FWENFUFRJT049ImludGVybmFsRXhjZXB0aW9uIixlLklOVEVSTkFMX0FCT1JURUQ9ImFib3J0ZWQiLGUuVU5LTk9XTj0idW5rbm93biIsZX0oe30pLEw9ZnVuY3Rpb24oKXt9LFI9e3RyYWNlOkwsZGVidWc6TCxsb2c6TCx3YXJuOkwsaW5mbzpMLGVycm9yOkx9LEE9UjtmdW5jdGlvbiBiKGUpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLHI9bmV3IEFycmF5KHQ+MT90LTE6MCksaT0xO2k8dDtpKyspcltpLTFdPWFyZ3VtZW50c1tpXTtyLmZvckVhY2goKGZ1bmN0aW9uKHQpe0FbdF09ZVt0XT9lW3RdLmJpbmQoZSk6ZnVuY3Rpb24oZSl7dmFyIHQ9c2VsZi5jb25zb2xlW2VdO3JldHVybiB0P3QuYmluZChzZWxmLmNvbnNvbGUsIlsiK2UrIl0gPiIpOkx9KHQpfSkpfWZ1bmN0aW9uIGsoZSx0KXtpZigib2JqZWN0Ij09dHlwZW9mIGNvbnNvbGUmJiEwPT09ZXx8Im9iamVjdCI9PXR5cGVvZiBlKXtiKGUsImRlYnVnIiwibG9nIiwiaW5mbyIsIndhcm4iLCJlcnJvciIpO3RyeXtBLmxvZygnRGVidWcgbG9ncyBlbmFibGVkIGZvciAiJyt0KyciIGluIGhscy5qcyB2ZXJzaW9uIDEuNS4xOCcpfWNhdGNoKGUpe0E9Un19ZWxzZSBBPVJ9dmFyIEQ9QSxfPS9eKFxkKyl4KFxkKykkLyx4PS8oLis/KT0oIi4qPyJ8Lio/KSg/Oix8JCkvZyx3PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXsic3RyaW5nIj09dHlwZW9mIHQmJih0PWUucGFyc2VBdHRyTGlzdCh0KSksbyh0aGlzLHQpfXZhciB0PWUucHJvdG90eXBlO3JldHVybiB0LmRlY2ltYWxJbnRlZ2VyPWZ1bmN0aW9uKGUpe3ZhciB0PXBhcnNlSW50KHRoaXNbZV0sMTApO3JldHVybiB0Pk51bWJlci5NQVhfU0FGRV9JTlRFR0VSPzEvMDp0fSx0LmhleGFkZWNpbWFsSW50ZWdlcj1mdW5jdGlvbihlKXtpZih0aGlzW2VdKXt2YXIgdD0odGhpc1tlXXx8IjB4Iikuc2xpY2UoMik7dD0oMSZ0Lmxlbmd0aD8iMCI6IiIpK3Q7Zm9yKHZhciByPW5ldyBVaW50OEFycmF5KHQubGVuZ3RoLzIpLGk9MDtpPHQubGVuZ3RoLzI7aSsrKXJbaV09cGFyc2VJbnQodC5zbGljZSgyKmksMippKzIpLDE2KTtyZXR1cm4gcn1yZXR1cm4gbnVsbH0sdC5oZXhhZGVjaW1hbEludGVnZXJBc051bWJlcj1mdW5jdGlvbihlKXt2YXIgdD1wYXJzZUludCh0aGlzW2VdLDE2KTtyZXR1cm4gdD5OdW1iZXIuTUFYX1NBRkVfSU5URUdFUj8xLzA6dH0sdC5kZWNpbWFsRmxvYXRpbmdQb2ludD1mdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VGbG9hdCh0aGlzW2VdKX0sdC5vcHRpb25hbEZsb2F0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpc1tlXTtyZXR1cm4gcj9wYXJzZUZsb2F0KHIpOnR9LHQuZW51bWVyYXRlZFN0cmluZz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpc1tlXX0sdC5ib29sPWZ1bmN0aW9uKGUpe3JldHVybiJZRVMiPT09dGhpc1tlXX0sdC5kZWNpbWFsUmVzb2x1dGlvbj1mdW5jdGlvbihlKXt2YXIgdD1fLmV4ZWModGhpc1tlXSk7aWYobnVsbCE9PXQpcmV0dXJue3dpZHRoOnBhcnNlSW50KHRbMV0sMTApLGhlaWdodDpwYXJzZUludCh0WzJdLDEwKX19LGUucGFyc2VBdHRyTGlzdD1mdW5jdGlvbihlKXt2YXIgdCxyPXt9O2Zvcih4Lmxhc3RJbmRleD0wO251bGwhPT0odD14LmV4ZWMoZSkpOyl7dmFyIGk9dFsyXTswPT09aS5pbmRleE9mKCciJykmJmkubGFzdEluZGV4T2YoJyInKT09PWkubGVuZ3RoLTEmJihpPWkuc2xpY2UoMSwtMSkpLHJbdFsxXS50cmltKCldPWl9cmV0dXJuIHJ9LHMoZSxbe2tleToiY2xpZW50QXR0cnMiLGdldDpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiJYLSI9PT1lLnN1YnN0cmluZygwLDIpfSkpfX1dKSxlfSgpO2Z1bmN0aW9uIEMoZSl7cmV0dXJuIlNDVEUzNS1PVVQiPT09ZXx8IlNDVEUzNS1JTiI9PT1lfXZhciBJPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2lmKHRoaXMuYXR0cj12b2lkIDAsdGhpcy5fc3RhcnREYXRlPXZvaWQgMCx0aGlzLl9lbmREYXRlPXZvaWQgMCx0aGlzLl9iYWRWYWx1ZUZvclNhbWVJZD12b2lkIDAsdCl7dmFyIHI9dC5hdHRyO2Zvcih2YXIgaSBpbiByKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZlW2ldIT09cltpXSl7RC53YXJuKCdEQVRFUkFOR0UgdGFnIGF0dHJpYnV0ZTogIicraSsnIiBkb2VzIG5vdCBtYXRjaCBmb3IgdGFncyB3aXRoIElEOiAiJytlLklEKyciJyksdGhpcy5fYmFkVmFsdWVGb3JTYW1lSWQ9aTticmVha31lPW8obmV3IHcoe30pLHIsZSl9aWYodGhpcy5hdHRyPWUsdGhpcy5fc3RhcnREYXRlPW5ldyBEYXRlKGVbIlNUQVJULURBVEUiXSksIkVORC1EQVRFImluIHRoaXMuYXR0cil7dmFyIGE9bmV3IERhdGUodGhpcy5hdHRyWyJFTkQtREFURSJdKTttKGEuZ2V0VGltZSgpKSYmKHRoaXMuX2VuZERhdGU9YSl9fXJldHVybiBzKGUsW3trZXk6ImlkIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hdHRyLklEfX0se2tleToiY2xhc3MiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmF0dHIuQ0xBU1N9fSx7a2V5OiJzdGFydERhdGUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGFydERhdGV9fSx7a2V5OiJlbmREYXRlIixnZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9lbmREYXRlKXJldHVybiB0aGlzLl9lbmREYXRlO3ZhciBlPXRoaXMuZHVyYXRpb247cmV0dXJuIG51bGwhPT1lP25ldyBEYXRlKHRoaXMuX3N0YXJ0RGF0ZS5nZXRUaW1lKCkrMWUzKmUpOm51bGx9fSx7a2V5OiJkdXJhdGlvbiIsZ2V0OmZ1bmN0aW9uKCl7aWYoIkRVUkFUSU9OImluIHRoaXMuYXR0cil7dmFyIGU9dGhpcy5hdHRyLmRlY2ltYWxGbG9hdGluZ1BvaW50KCJEVVJBVElPTiIpO2lmKG0oZSkpcmV0dXJuIGV9ZWxzZSBpZih0aGlzLl9lbmREYXRlKXJldHVybih0aGlzLl9lbmREYXRlLmdldFRpbWUoKS10aGlzLl9zdGFydERhdGUuZ2V0VGltZSgpKS8xZTM7cmV0dXJuIG51bGx9fSx7a2V5OiJwbGFubmVkRHVyYXRpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiJQTEFOTkVELURVUkFUSU9OImluIHRoaXMuYXR0cj90aGlzLmF0dHIuZGVjaW1hbEZsb2F0aW5nUG9pbnQoIlBMQU5ORUQtRFVSQVRJT04iKTpudWxsfX0se2tleToiZW5kT25OZXh0IixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hdHRyLmJvb2woIkVORC1PTi1ORVhUIil9fSx7a2V5OiJpc1ZhbGlkIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuaWQmJiF0aGlzLl9iYWRWYWx1ZUZvclNhbWVJZCYmbSh0aGlzLnN0YXJ0RGF0ZS5nZXRUaW1lKCkpJiYobnVsbD09PXRoaXMuZHVyYXRpb258fHRoaXMuZHVyYXRpb24+PTApJiYoIXRoaXMuZW5kT25OZXh0fHwhIXRoaXMuY2xhc3MpfX1dKSxlfSgpLFA9ZnVuY3Rpb24oKXt0aGlzLmFib3J0ZWQ9ITEsdGhpcy5sb2FkZWQ9MCx0aGlzLnJldHJ5PTAsdGhpcy50b3RhbD0wLHRoaXMuY2h1bmtDb3VudD0wLHRoaXMuYndFc3RpbWF0ZT0wLHRoaXMubG9hZGluZz17c3RhcnQ6MCxmaXJzdDowLGVuZDowfSx0aGlzLnBhcnNpbmc9e3N0YXJ0OjAsZW5kOjB9LHRoaXMuYnVmZmVyaW5nPXtzdGFydDowLGZpcnN0OjAsZW5kOjB9fSxGPSJhdWRpbyIsTz0idmlkZW8iLE09ImF1ZGlvdmlkZW8iLE49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3ZhciB0O3RoaXMuX2J5dGVSYW5nZT1udWxsLHRoaXMuX3VybD1udWxsLHRoaXMuYmFzZXVybD12b2lkIDAsdGhpcy5yZWx1cmw9dm9pZCAwLHRoaXMuZWxlbWVudGFyeVN0cmVhbXM9KCh0PXt9KVtGXT1udWxsLHRbT109bnVsbCx0W01dPW51bGwsdCksdGhpcy5iYXNldXJsPWV9cmV0dXJuIGUucHJvdG90eXBlLnNldEJ5dGVSYW5nZT1mdW5jdGlvbihlLHQpe3ZhciByLGk9ZS5zcGxpdCgiQCIsMik7cj0xPT09aS5sZW5ndGg/KG51bGw9PXQ/dm9pZCAwOnQuYnl0ZVJhbmdlRW5kT2Zmc2V0KXx8MDpwYXJzZUludChpWzFdKSx0aGlzLl9ieXRlUmFuZ2U9W3IscGFyc2VJbnQoaVswXSkrcl19LHMoZSxbe2tleToiYnl0ZVJhbmdlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnl0ZVJhbmdlP3RoaXMuX2J5dGVSYW5nZTpbXX19LHtrZXk6ImJ5dGVSYW5nZVN0YXJ0T2Zmc2V0IixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ieXRlUmFuZ2VbMF19fSx7a2V5OiJieXRlUmFuZ2VFbmRPZmZzZXQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJ5dGVSYW5nZVsxXX19LHtrZXk6InVybCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuX3VybCYmdGhpcy5iYXNldXJsJiZ0aGlzLnJlbHVybCYmKHRoaXMuX3VybD1nLmJ1aWxkQWJzb2x1dGVVUkwodGhpcy5iYXNldXJsLHRoaXMucmVsdXJsLHthbHdheXNOb3JtYWxpemU6ITB9KSksdGhpcy5fdXJsfHwiIn0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3VybD1lfX1dKSxlfSgpLEI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe3ZhciBpO3JldHVybihpPWUuY2FsbCh0aGlzLHIpfHx0aGlzKS5fZGVjcnlwdGRhdGE9bnVsbCxpLnJhd1Byb2dyYW1EYXRlVGltZT1udWxsLGkucHJvZ3JhbURhdGVUaW1lPW51bGwsaS50YWdMaXN0PVtdLGkuZHVyYXRpb249MCxpLnNuPTAsaS5sZXZlbGtleXM9dm9pZCAwLGkudHlwZT12b2lkIDAsaS5sb2FkZXI9bnVsbCxpLmtleUxvYWRlcj1udWxsLGkubGV2ZWw9LTEsaS5jYz0wLGkuc3RhcnRQVFM9dm9pZCAwLGkuZW5kUFRTPXZvaWQgMCxpLnN0YXJ0RFRTPXZvaWQgMCxpLmVuZERUUz12b2lkIDAsaS5zdGFydD0wLGkuZGVsdGFQVFM9dm9pZCAwLGkubWF4U3RhcnRQVFM9dm9pZCAwLGkubWluRW5kUFRTPXZvaWQgMCxpLnN0YXRzPW5ldyBQLGkuZGF0YT12b2lkIDAsaS5iaXRyYXRlVGVzdD0hMSxpLnRpdGxlPW51bGwsaS5pbml0U2VnbWVudD1udWxsLGkuZW5kTGlzdD12b2lkIDAsaS5nYXA9dm9pZCAwLGkudXJsSWQ9MCxpLnR5cGU9dCxpfWwodCxlKTt2YXIgcj10LnByb3RvdHlwZTtyZXR1cm4gci5zZXRLZXlGb3JtYXQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5sZXZlbGtleXMpe3ZhciB0PXRoaXMubGV2ZWxrZXlzW2VdO3QmJiF0aGlzLl9kZWNyeXB0ZGF0YSYmKHRoaXMuX2RlY3J5cHRkYXRhPXQuZ2V0RGVjcnlwdERhdGEodGhpcy5zbikpfX0sci5hYm9ydFJlcXVlc3RzPWZ1bmN0aW9uKCl7dmFyIGUsdDtudWxsPT0oZT10aGlzLmxvYWRlcil8fGUuYWJvcnQoKSxudWxsPT0odD10aGlzLmtleUxvYWRlcil8fHQuYWJvcnQoKX0sci5zZXRFbGVtZW50YXJ5U3RyZWFtSW5mbz1mdW5jdGlvbihlLHQscixpLGEsbil7dm9pZCAwPT09biYmKG49ITEpO3ZhciBzPXRoaXMuZWxlbWVudGFyeVN0cmVhbXMsbz1zW2VdO28/KG8uc3RhcnRQVFM9TWF0aC5taW4oby5zdGFydFBUUyx0KSxvLmVuZFBUUz1NYXRoLm1heChvLmVuZFBUUyxyKSxvLnN0YXJ0RFRTPU1hdGgubWluKG8uc3RhcnREVFMsaSksby5lbmREVFM9TWF0aC5tYXgoby5lbmREVFMsYSkpOnNbZV09e3N0YXJ0UFRTOnQsZW5kUFRTOnIsc3RhcnREVFM6aSxlbmREVFM6YSxwYXJ0aWFsOm59fSxyLmNsZWFyRWxlbWVudGFyeVN0cmVhbUluZm89ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnRhcnlTdHJlYW1zO2VbRl09bnVsbCxlW09dPW51bGwsZVtNXT1udWxsfSxzKHQsW3trZXk6ImRlY3J5cHRkYXRhIixnZXQ6ZnVuY3Rpb24oKXtpZighdGhpcy5sZXZlbGtleXMmJiF0aGlzLl9kZWNyeXB0ZGF0YSlyZXR1cm4gbnVsbDtpZighdGhpcy5fZGVjcnlwdGRhdGEmJnRoaXMubGV2ZWxrZXlzJiYhdGhpcy5sZXZlbGtleXMuTk9ORSl7dmFyIGU9dGhpcy5sZXZlbGtleXMuaWRlbnRpdHk7aWYoZSl0aGlzLl9kZWNyeXB0ZGF0YT1lLmdldERlY3J5cHREYXRhKHRoaXMuc24pO2Vsc2V7dmFyIHQ9T2JqZWN0LmtleXModGhpcy5sZXZlbGtleXMpO2lmKDE9PT10Lmxlbmd0aClyZXR1cm4gdGhpcy5fZGVjcnlwdGRhdGE9dGhpcy5sZXZlbGtleXNbdFswXV0uZ2V0RGVjcnlwdERhdGEodGhpcy5zbil9fXJldHVybiB0aGlzLl9kZWNyeXB0ZGF0YX19LHtrZXk6ImVuZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnQrdGhpcy5kdXJhdGlvbn19LHtrZXk6ImVuZFByb2dyYW1EYXRlVGltZSIsZ2V0OmZ1bmN0aW9uKCl7aWYobnVsbD09PXRoaXMucHJvZ3JhbURhdGVUaW1lKXJldHVybiBudWxsO2lmKCFtKHRoaXMucHJvZ3JhbURhdGVUaW1lKSlyZXR1cm4gbnVsbDt2YXIgZT1tKHRoaXMuZHVyYXRpb24pP3RoaXMuZHVyYXRpb246MDtyZXR1cm4gdGhpcy5wcm9ncmFtRGF0ZVRpbWUrMWUzKmV9fSx7a2V5OiJlbmNyeXB0ZWQiLGdldDpmdW5jdGlvbigpe3ZhciBlO2lmKG51bGwhPShlPXRoaXMuX2RlY3J5cHRkYXRhKSYmZS5lbmNyeXB0ZWQpcmV0dXJuITA7aWYodGhpcy5sZXZlbGtleXMpe3ZhciB0PU9iamVjdC5rZXlzKHRoaXMubGV2ZWxrZXlzKSxyPXQubGVuZ3RoO2lmKHI+MXx8MT09PXImJnRoaXMubGV2ZWxrZXlzW3RbMF1dLmVuY3J5cHRlZClyZXR1cm4hMH1yZXR1cm4hMX19XSksdH0oTiksVT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLGEsbil7dmFyIHM7KHM9ZS5jYWxsKHRoaXMsaSl8fHRoaXMpLmZyYWdPZmZzZXQ9MCxzLmR1cmF0aW9uPTAscy5nYXA9ITEscy5pbmRlcGVuZGVudD0hMSxzLnJlbHVybD12b2lkIDAscy5mcmFnbWVudD12b2lkIDAscy5pbmRleD12b2lkIDAscy5zdGF0cz1uZXcgUCxzLmR1cmF0aW9uPXQuZGVjaW1hbEZsb2F0aW5nUG9pbnQoIkRVUkFUSU9OIikscy5nYXA9dC5ib29sKCJHQVAiKSxzLmluZGVwZW5kZW50PXQuYm9vbCgiSU5ERVBFTkRFTlQiKSxzLnJlbHVybD10LmVudW1lcmF0ZWRTdHJpbmcoIlVSSSIpLHMuZnJhZ21lbnQ9cixzLmluZGV4PWE7dmFyIG89dC5lbnVtZXJhdGVkU3RyaW5nKCJCWVRFUkFOR0UiKTtyZXR1cm4gbyYmcy5zZXRCeXRlUmFuZ2UobyxuKSxuJiYocy5mcmFnT2Zmc2V0PW4uZnJhZ09mZnNldCtuLmR1cmF0aW9uKSxzfXJldHVybiBsKHQsZSkscyh0LFt7a2V5OiJzdGFydCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZnJhZ21lbnQuc3RhcnQrdGhpcy5mcmFnT2Zmc2V0fX0se2tleToiZW5kIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydCt0aGlzLmR1cmF0aW9ufX0se2tleToibG9hZGVkIixnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsZW1lbnRhcnlTdHJlYW1zO3JldHVybiEhKGUuYXVkaW98fGUudmlkZW98fGUuYXVkaW92aWRlbyl9fV0pLHR9KE4pLEc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuUFRTS25vd249ITEsdGhpcy5hbGlnbmVkU2xpZGluZz0hMSx0aGlzLmF2ZXJhZ2V0YXJnZXRkdXJhdGlvbj12b2lkIDAsdGhpcy5lbmRDQz0wLHRoaXMuZW5kU049MCx0aGlzLmZyYWdtZW50cz12b2lkIDAsdGhpcy5mcmFnbWVudEhpbnQ9dm9pZCAwLHRoaXMucGFydExpc3Q9bnVsbCx0aGlzLmRhdGVSYW5nZXM9dm9pZCAwLHRoaXMubGl2ZT0hMCx0aGlzLmFnZUhlYWRlcj0wLHRoaXMuYWR2YW5jZWREYXRlVGltZT12b2lkIDAsdGhpcy51cGRhdGVkPSEwLHRoaXMuYWR2YW5jZWQ9ITAsdGhpcy5hdmFpbGFiaWxpdHlEZWxheT12b2lkIDAsdGhpcy5taXNzZXM9MCx0aGlzLnN0YXJ0Q0M9MCx0aGlzLnN0YXJ0U049MCx0aGlzLnN0YXJ0VGltZU9mZnNldD1udWxsLHRoaXMudGFyZ2V0ZHVyYXRpb249MCx0aGlzLnRvdGFsZHVyYXRpb249MCx0aGlzLnR5cGU9bnVsbCx0aGlzLnVybD12b2lkIDAsdGhpcy5tM3U4PSIiLHRoaXMudmVyc2lvbj1udWxsLHRoaXMuY2FuQmxvY2tSZWxvYWQ9ITEsdGhpcy5jYW5Ta2lwVW50aWw9MCx0aGlzLmNhblNraXBEYXRlUmFuZ2VzPSExLHRoaXMuc2tpcHBlZFNlZ21lbnRzPTAsdGhpcy5yZWNlbnRseVJlbW92ZWREYXRlcmFuZ2VzPXZvaWQgMCx0aGlzLnBhcnRIb2xkQmFjaz0wLHRoaXMuaG9sZEJhY2s9MCx0aGlzLnBhcnRUYXJnZXQ9MCx0aGlzLnByZWxvYWRIaW50PXZvaWQgMCx0aGlzLnJlbmRpdGlvblJlcG9ydHM9dm9pZCAwLHRoaXMudHVuZUluR29hbD0wLHRoaXMuZGVsdGFVcGRhdGVGYWlsZWQ9dm9pZCAwLHRoaXMuZHJpZnRTdGFydFRpbWU9MCx0aGlzLmRyaWZ0RW5kVGltZT0wLHRoaXMuZHJpZnRTdGFydD0wLHRoaXMuZHJpZnRFbmQ9MCx0aGlzLmVuY3J5cHRlZEZyYWdtZW50cz12b2lkIDAsdGhpcy5wbGF5bGlzdFBhcnNpbmdFcnJvcj1udWxsLHRoaXMudmFyaWFibGVMaXN0PW51bGwsdGhpcy5oYXNWYXJpYWJsZVJlZnM9ITEsdGhpcy5mcmFnbWVudHM9W10sdGhpcy5lbmNyeXB0ZWRGcmFnbWVudHM9W10sdGhpcy5kYXRlUmFuZ2VzPXt9LHRoaXMudXJsPWV9cmV0dXJuIGUucHJvdG90eXBlLnJlbG9hZGVkPWZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiB0aGlzLmFkdmFuY2VkPSEwLHZvaWQodGhpcy51cGRhdGVkPSEwKTt2YXIgdD10aGlzLmxhc3RQYXJ0U24tZS5sYXN0UGFydFNuLHI9dGhpcy5sYXN0UGFydEluZGV4LWUubGFzdFBhcnRJbmRleDt0aGlzLnVwZGF0ZWQ9dGhpcy5lbmRTTiE9PWUuZW5kU058fCEhcnx8ISF0fHwhdGhpcy5saXZlLHRoaXMuYWR2YW5jZWQ9dGhpcy5lbmRTTj5lLmVuZFNOfHx0PjB8fDA9PT10JiZyPjAsdGhpcy51cGRhdGVkfHx0aGlzLmFkdmFuY2VkP3RoaXMubWlzc2VzPU1hdGguZmxvb3IoLjYqZS5taXNzZXMpOnRoaXMubWlzc2VzPWUubWlzc2VzKzEsdGhpcy5hdmFpbGFiaWxpdHlEZWxheT1lLmF2YWlsYWJpbGl0eURlbGF5fSxzKGUsW3trZXk6Imhhc1Byb2dyYW1EYXRlVGltZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmZyYWdtZW50cy5sZW5ndGgmJm0odGhpcy5mcmFnbWVudHNbdGhpcy5mcmFnbWVudHMubGVuZ3RoLTFdLnByb2dyYW1EYXRlVGltZSl9fSx7a2V5OiJsZXZlbFRhcmdldER1cmF0aW9uIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hdmVyYWdldGFyZ2V0ZHVyYXRpb258fHRoaXMudGFyZ2V0ZHVyYXRpb258fDEwfX0se2tleToiZHJpZnQiLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZHJpZnRFbmRUaW1lLXRoaXMuZHJpZnRTdGFydFRpbWU7cmV0dXJuIGU+MD8xZTMqKHRoaXMuZHJpZnRFbmQtdGhpcy5kcmlmdFN0YXJ0KS9lOjF9fSx7a2V5OiJlZGdlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJ0RW5kfHx0aGlzLmZyYWdtZW50RW5kfX0se2tleToicGFydEVuZCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIG51bGwhPShlPXRoaXMucGFydExpc3QpJiZlLmxlbmd0aD90aGlzLnBhcnRMaXN0W3RoaXMucGFydExpc3QubGVuZ3RoLTFdLmVuZDp0aGlzLmZyYWdtZW50RW5kfX0se2tleToiZnJhZ21lbnRFbmQiLGdldDpmdW5jdGlvbigpe3ZhciBlO3JldHVybiBudWxsIT0oZT10aGlzLmZyYWdtZW50cykmJmUubGVuZ3RoP3RoaXMuZnJhZ21lbnRzW3RoaXMuZnJhZ21lbnRzLmxlbmd0aC0xXS5lbmQ6MH19LHtrZXk6ImFnZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWR2YW5jZWREYXRlVGltZT9NYXRoLm1heChEYXRlLm5vdygpLXRoaXMuYWR2YW5jZWREYXRlVGltZSwwKS8xZTM6MH19LHtrZXk6Imxhc3RQYXJ0SW5kZXgiLGdldDpmdW5jdGlvbigpe3ZhciBlO3JldHVybiBudWxsIT0oZT10aGlzLnBhcnRMaXN0KSYmZS5sZW5ndGg/dGhpcy5wYXJ0TGlzdFt0aGlzLnBhcnRMaXN0Lmxlbmd0aC0xXS5pbmRleDotMX19LHtrZXk6Imxhc3RQYXJ0U24iLGdldDpmdW5jdGlvbigpe3ZhciBlO3JldHVybiBudWxsIT0oZT10aGlzLnBhcnRMaXN0KSYmZS5sZW5ndGg/dGhpcy5wYXJ0TGlzdFt0aGlzLnBhcnRMaXN0Lmxlbmd0aC0xXS5mcmFnbWVudC5zbjp0aGlzLmVuZFNOfX1dKSxlfSgpLEg9Yyh2b2lkIDApO2Z1bmN0aW9uIFYoZSx0LHIpe3JldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5zbGljZT9lLnNsaWNlKHQscik6bmV3IFVpbnQ4QXJyYXkoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSx0LHIpKX12YXIgSyxXPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQrMTA8PWUubGVuZ3RoJiY3Mz09PWVbdF0mJjY4PT09ZVt0KzFdJiY1MT09PWVbdCsyXSYmZVt0KzNdPDI1NSYmZVt0KzRdPDI1NSYmZVt0KzZdPDEyOCYmZVt0KzddPDEyOCYmZVt0KzhdPDEyOCYmZVt0KzldPDEyOH0saj1mdW5jdGlvbihlLHQpe3JldHVybiB0KzEwPD1lLmxlbmd0aCYmNTE9PT1lW3RdJiY2OD09PWVbdCsxXSYmNzM9PT1lW3QrMl0mJmVbdCszXTwyNTUmJmVbdCs0XTwyNTUmJmVbdCs2XTwxMjgmJmVbdCs3XTwxMjgmJmVbdCs4XTwxMjgmJmVbdCs5XTwxMjh9LFk9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9dCxpPTA7VyhlLHQpOylpKz0xMCxpKz1xKGUsdCs2KSxqKGUsdCsxMCkmJihpKz0xMCksdCs9aTtpZihpPjApcmV0dXJuIGUuc3ViYXJyYXkocixyK2kpfSxxPWZ1bmN0aW9uKGUsdCl7dmFyIHI9MDtyZXR1cm4gcj0oMTI3JmVbdF0pPDwyMSxyfD0oMTI3JmVbdCsxXSk8PDE0LHJ8PSgxMjcmZVt0KzJdKTw8NyxyfD0xMjcmZVt0KzNdfSx6PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIFcoZSx0KSYmcShlLHQrNikrMTA8PWUubGVuZ3RoLXR9LFg9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PSQoZSkscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgaT10W3JdO2lmKFEoaSkpcmV0dXJuIGllKGkpfX0sUT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmIlBSSVYiPT09ZS5rZXkmJiJjb20uYXBwbGUuc3RyZWFtaW5nLnRyYW5zcG9ydFN0cmVhbVRpbWVzdGFtcCI9PT1lLmluZm99LEo9ZnVuY3Rpb24oZSl7dmFyIHQ9U3RyaW5nLmZyb21DaGFyQ29kZShlWzBdLGVbMV0sZVsyXSxlWzNdKSxyPXEoZSw0KTtyZXR1cm57dHlwZTp0LHNpemU6cixkYXRhOmUuc3ViYXJyYXkoMTAsMTArcil9fSwkPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9W107VyhlLHQpOyl7Zm9yKHZhciBpPXEoZSx0KzYpLGE9KHQrPTEwKStpO3QrODxhOyl7dmFyIG49SihlLnN1YmFycmF5KHQpKSxzPVoobik7cyYmci5wdXNoKHMpLHQrPW4uc2l6ZSsxMH1qKGUsdCkmJih0Kz0xMCl9cmV0dXJuIHJ9LFo9ZnVuY3Rpb24oZSl7cmV0dXJuIlBSSVYiPT09ZS50eXBlP2VlKGUpOiJXIj09PWUudHlwZVswXT9yZShlKTp0ZShlKX0sZWU9ZnVuY3Rpb24oZSl7aWYoIShlLnNpemU8Mikpe3ZhciB0PWFlKGUuZGF0YSwhMCkscj1uZXcgVWludDhBcnJheShlLmRhdGEuc3ViYXJyYXkodC5sZW5ndGgrMSkpO3JldHVybntrZXk6ZS50eXBlLGluZm86dCxkYXRhOnIuYnVmZmVyfX19LHRlPWZ1bmN0aW9uKGUpe2lmKCEoZS5zaXplPDIpKXtpZigiVFhYWCI9PT1lLnR5cGUpe3ZhciB0PTEscj1hZShlLmRhdGEuc3ViYXJyYXkodCksITApO3QrPXIubGVuZ3RoKzE7dmFyIGk9YWUoZS5kYXRhLnN1YmFycmF5KHQpKTtyZXR1cm57a2V5OmUudHlwZSxpbmZvOnIsZGF0YTppfX12YXIgYT1hZShlLmRhdGEuc3ViYXJyYXkoMSkpO3JldHVybntrZXk6ZS50eXBlLGRhdGE6YX19fSxyZT1mdW5jdGlvbihlKXtpZigiV1hYWCI9PT1lLnR5cGUpe2lmKGUuc2l6ZTwyKXJldHVybjt2YXIgdD0xLHI9YWUoZS5kYXRhLnN1YmFycmF5KHQpLCEwKTt0Kz1yLmxlbmd0aCsxO3ZhciBpPWFlKGUuZGF0YS5zdWJhcnJheSh0KSk7cmV0dXJue2tleTplLnR5cGUsaW5mbzpyLGRhdGE6aX19dmFyIGE9YWUoZS5kYXRhKTtyZXR1cm57a2V5OmUudHlwZSxkYXRhOmF9fSxpZT1mdW5jdGlvbihlKXtpZig4PT09ZS5kYXRhLmJ5dGVMZW5ndGgpe3ZhciB0PW5ldyBVaW50OEFycmF5KGUuZGF0YSkscj0xJnRbM10saT0odFs0XTw8MjMpKyh0WzVdPDwxNSkrKHRbNl08PDcpK3RbN107cmV0dXJuIGkvPTQ1LHImJihpKz00NzcyMTg1OC44NCksTWF0aC5yb3VuZChpKX19LGFlPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9ITEpO3ZhciByPW5lKCk7aWYocil7dmFyIGk9ci5kZWNvZGUoZSk7aWYodCl7dmFyIGE9aS5pbmRleE9mKCJcMCIpO3JldHVybi0xIT09YT9pLnN1YnN0cmluZygwLGEpOml9cmV0dXJuIGkucmVwbGFjZSgvXDAvZywiIil9Zm9yKHZhciBuLHMsbyxsPWUubGVuZ3RoLHU9IiIsZD0wO2Q8bDspe2lmKDA9PT0obj1lW2QrK10pJiZ0KXJldHVybiB1O2lmKDAhPT1uJiYzIT09bilzd2l0Y2gobj4+NCl7Y2FzZSAwOmNhc2UgMTpjYXNlIDI6Y2FzZSAzOmNhc2UgNDpjYXNlIDU6Y2FzZSA2OmNhc2UgNzp1Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKG4pO2JyZWFrO2Nhc2UgMTI6Y2FzZSAxMzpzPWVbZCsrXSx1Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKCgzMSZuKTw8Nnw2MyZzKTticmVhaztjYXNlIDE0OnM9ZVtkKytdLG89ZVtkKytdLHUrPVN0cmluZy5mcm9tQ2hhckNvZGUoKDE1Jm4pPDwxMnwoNjMmcyk8PDZ8KDYzJm8pPDwwKX19cmV0dXJuIHV9O2Z1bmN0aW9uIG5lKCl7aWYoIW5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoIlBsYXlTdGF0aW9uIDQiKSlyZXR1cm4gS3x8dm9pZCAwPT09c2VsZi5UZXh0RGVjb2Rlcnx8KEs9bmV3IHNlbGYuVGV4dERlY29kZXIoInV0Zi04IikpLEt9dmFyIHNlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0iIixyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBpPWVbcl0udG9TdHJpbmcoMTYpO2kubGVuZ3RoPDImJihpPSIwIitpKSx0Kz1pfXJldHVybiB0fSxvZT1NYXRoLnBvdygyLDMyKS0xLGxlPVtdLnB1c2gsdWU9e3ZpZGVvOjEsYXVkaW86MixpZDM6Myx0ZXh0OjR9O2Z1bmN0aW9uIGRlKGUpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsZSl9ZnVuY3Rpb24gaGUoZSx0KXt2YXIgcj1lW3RdPDw4fGVbdCsxXTtyZXR1cm4gcjwwPzY1NTM2K3I6cn1mdW5jdGlvbiBmZShlLHQpe3ZhciByPXZlKGUsdCk7cmV0dXJuIHI8MD80Mjk0OTY3Mjk2K3I6cn1mdW5jdGlvbiBjZShlLHQpe3ZhciByPWZlKGUsdCk7cmV0dXJuIHIqPU1hdGgucG93KDIsMzIpLHIrPWZlKGUsdCs0KX1mdW5jdGlvbiB2ZShlLHQpe3JldHVybiBlW3RdPDwyNHxlW3QrMV08PDE2fGVbdCsyXTw8OHxlW3QrM119ZnVuY3Rpb24gZ2UoZSx0LHIpe2VbdF09cj4+MjQsZVt0KzFdPXI+PjE2JjI1NSxlW3QrMl09cj4+OCYyNTUsZVt0KzNdPTI1NSZyfWZ1bmN0aW9uIG1lKGUsdCl7dmFyIHI9W107aWYoIXQubGVuZ3RoKXJldHVybiByO2Zvcih2YXIgaT1lLmJ5dGVMZW5ndGgsYT0wO2E8aTspe3ZhciBuPWZlKGUsYSkscz1uPjE/YStuOmk7aWYoZGUoZS5zdWJhcnJheShhKzQsYSs4KSk9PT10WzBdKWlmKDE9PT10Lmxlbmd0aClyLnB1c2goZS5zdWJhcnJheShhKzgscykpO2Vsc2V7dmFyIG89bWUoZS5zdWJhcnJheShhKzgscyksdC5zbGljZSgxKSk7by5sZW5ndGgmJmxlLmFwcGx5KHIsbyl9YT1zfXJldHVybiByfWZ1bmN0aW9uIHBlKGUpe3ZhciB0PVtdLHI9ZVswXSxpPTgsYT1mZShlLGkpO2krPTQ7dmFyIG49MCxzPTA7MD09PXI/KG49ZmUoZSxpKSxzPWZlKGUsaSs0KSxpKz04KToobj1jZShlLGkpLHM9Y2UoZSxpKzgpLGkrPTE2KSxpKz0yO3ZhciBvPWUubGVuZ3RoK3MsbD1oZShlLGkpO2krPTI7Zm9yKHZhciB1PTA7dTxsO3UrKyl7dmFyIGQ9aSxoPWZlKGUsZCk7ZCs9NDt2YXIgZj0yMTQ3NDgzNjQ3Jmg7aWYoMT09KDIxNDc0ODM2NDgmaCk+Pj4zMSlyZXR1cm4gRC53YXJuKCJTSURYIGhhcyBoaWVyYXJjaGljYWwgcmVmZXJlbmNlcyAobm90IHN1cHBvcnRlZCkiKSxudWxsO3ZhciBjPWZlKGUsZCk7ZCs9NCx0LnB1c2goe3JlZmVyZW5jZVNpemU6ZixzdWJzZWdtZW50RHVyYXRpb246YyxpbmZvOntkdXJhdGlvbjpjL2Esc3RhcnQ6byxlbmQ6bytmLTF9fSksbys9ZixpPWQrPTR9cmV0dXJue2VhcmxpZXN0UHJlc2VudGF0aW9uVGltZTpuLHRpbWVzY2FsZTphLHZlcnNpb246cixyZWZlcmVuY2VzQ291bnQ6bCxyZWZlcmVuY2VzOnR9fWZ1bmN0aW9uIHllKGUpe2Zvcih2YXIgdD1bXSxyPW1lKGUsWyJtb292IiwidHJhayJdKSxhPTA7YTxyLmxlbmd0aDthKyspe3ZhciBuPXJbYV0scz1tZShuLFsidGtoZCJdKVswXTtpZihzKXt2YXIgbz1zWzBdLGw9ZmUocywwPT09bz8xMjoyMCksdT1tZShuLFsibWRpYSIsIm1kaGQiXSlbMF07aWYodSl7dmFyIGQ9ZmUodSwwPT09KG89dVswXSk/MTI6MjApLGg9bWUobixbIm1kaWEiLCJoZGxyIl0pWzBdO2lmKGgpe3ZhciBmPWRlKGguc3ViYXJyYXkoOCwxMikpLGM9e3NvdW46Rix2aWRlOk99W2ZdO2lmKGMpe3ZhciB2PUVlKG1lKG4sWyJtZGlhIiwibWluZiIsInN0YmwiLCJzdHNkIl0pWzBdKTt0W2xdPXt0aW1lc2NhbGU6ZCx0eXBlOmN9LHRbY109aSh7dGltZXNjYWxlOmQsaWQ6bH0sdil9fX19fXJldHVybiBtZShlLFsibW9vdiIsIm12ZXgiLCJ0cmV4Il0pLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciByPWZlKGUsNCksaT10W3JdO2kmJihpLmRlZmF1bHQ9e2R1cmF0aW9uOmZlKGUsMTIpLGZsYWdzOmZlKGUsMjApfSl9KSksdH1mdW5jdGlvbiBFZShlKXt2YXIgdD1lLnN1YmFycmF5KDgpLHI9dC5zdWJhcnJheSg4NiksaT1kZSh0LnN1YmFycmF5KDQsOCkpLGE9aSxuPSJlbmNhIj09PWl8fCJlbmN2Ij09PWk7aWYobil7dmFyIHM9bWUodCxbaV0pWzBdO21lKHMuc3ViYXJyYXkoImVuY2EiPT09aT8yODo3OCksWyJzaW5mIl0pLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PW1lKGUsWyJzY2htIl0pWzBdO2lmKHQpe3ZhciByPWRlKHQuc3ViYXJyYXkoNCw4KSk7aWYoImNiY3MiPT09cnx8ImNlbmMiPT09cil7dmFyIGk9bWUoZSxbImZybWEiXSlbMF07aSYmKGE9ZGUoaSkpfX19KSl9c3dpdGNoKGEpe2Nhc2UiYXZjMSI6Y2FzZSJhdmMyIjpjYXNlImF2YzMiOmNhc2UiYXZjNCI6dmFyIG89bWUocixbImF2Y0MiXSlbMF07YSs9Ii4iK1NlKG9bMV0pK1NlKG9bMl0pK1NlKG9bM10pO2JyZWFrO2Nhc2UibXA0YSI6dmFyIGw9bWUodCxbaV0pWzBdLHU9bWUobC5zdWJhcnJheSgyOCksWyJlc2RzIl0pWzBdO2lmKHUmJnUubGVuZ3RoPjEyKXt2YXIgZD00O2lmKDMhPT11W2QrK10pYnJlYWs7ZD1UZSh1LGQpLGQrPTI7dmFyIGg9dVtkKytdO2lmKDEyOCZoJiYoZCs9MiksNjQmaCYmKGQrPXVbZCsrXSksNCE9PXVbZCsrXSlicmVhaztkPVRlKHUsZCk7dmFyIGY9dVtkKytdO2lmKDY0IT09ZilicmVhaztpZihhKz0iLiIrU2UoZiksZCs9MTIsNSE9PXVbZCsrXSlicmVhaztkPVRlKHUsZCk7dmFyIGM9dVtkKytdLHY9KDI0OCZjKT4+MzszMT09PXYmJih2Kz0xKygoNyZjKTw8MykrKCgyMjQmdVtkXSk+PjUpKSxhKz0iLiIrdn1icmVhaztjYXNlImh2YzEiOmNhc2UiaGV2MSI6dmFyIGc9bWUocixbImh2Y0MiXSlbMF0sbT1nWzFdLHA9WyIiLCJBIiwiQiIsIkMiXVttPj42XSx5PTMxJm0sRT1mZShnLDIpLFQ9KDMyJm0pPj41PyJIIjoiTCIsUz1nWzEyXSxMPWcuc3ViYXJyYXkoNiwxMik7YSs9Ii4iK3AreSxhKz0iLiIrRS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKSxhKz0iLiIrVCtTO2Zvcih2YXIgUj0iIixBPUwubGVuZ3RoO0EtLTspe3ZhciBiPUxbQV07KGJ8fFIpJiYoUj0iLiIrYi50b1N0cmluZygxNikudG9VcHBlckNhc2UoKStSKX1hKz1SO2JyZWFrO2Nhc2UiZHZoMSI6Y2FzZSJkdmhlIjp2YXIgaz1tZShyLFsiZHZjQyJdKVswXSxEPWtbMl0+PjEmMTI3LF89a1syXTw8NSYzMnxrWzNdPj4zJjMxO2ErPSIuIitMZShEKSsiLiIrTGUoXyk7YnJlYWs7Y2FzZSJ2cDA5Ijp2YXIgeD1tZShyLFsidnBjQyJdKVswXSx3PXhbNF0sQz14WzVdLEk9eFs2XT4+NCYxNTthKz0iLiIrTGUodykrIi4iK0xlKEMpKyIuIitMZShJKTticmVhaztjYXNlImF2MDEiOnZhciBQPW1lKHIsWyJhdjFDIl0pWzBdLEY9UFsxXT4+PjUsTz0zMSZQWzFdLE09UFsyXT4+Pjc/IkgiOiJNIixOPSg2NCZQWzJdKT4+NixCPSgzMiZQWzJdKT4+NSxVPTI9PT1GJiZOP0I/MTI6MTA6Tj8xMDo4LEc9KDE2JlBbMl0pPj40LEg9KDgmUFsyXSk+PjMsVj0oNCZQWzJdKT4+MixLPTMmUFsyXTthKz0iLiIrRisiLiIrTGUoTykrTSsiLiIrTGUoVSkrIi4iK0crIi4iK0grVitLKyIuIitMZSgxKSsiLiIrTGUoMSkrIi4iK0xlKDEpKyIuMCJ9cmV0dXJue2NvZGVjOmEsZW5jcnlwdGVkOm59fWZ1bmN0aW9uIFRlKGUsdCl7Zm9yKHZhciByPXQrNTsxMjgmZVt0KytdJiZ0PHI7KTtyZXR1cm4gdH1mdW5jdGlvbiBTZShlKXtyZXR1cm4oIjAiK2UudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkpLnNsaWNlKC0yKX1mdW5jdGlvbiBMZShlKXtyZXR1cm4oZTwxMD8iMCI6IiIpK2V9ZnVuY3Rpb24gUmUoZSx0KXtpZighZXx8IXQpcmV0dXJuIGU7dmFyIHI9dC5rZXlJZDtyZXR1cm4gciYmdC5pc0NvbW1vbkVuY3J5cHRpb24mJm1lKGUsWyJtb292IiwidHJhayJdKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1tZShlLFsibWRpYSIsIm1pbmYiLCJzdGJsIiwic3RzZCJdKVswXS5zdWJhcnJheSg4KSxpPW1lKHQsWyJlbmNhIl0pLGE9aS5sZW5ndGg+MDthfHwoaT1tZSh0LFsiZW5jdiJdKSksaS5mb3JFYWNoKChmdW5jdGlvbihlKXttZShhP2Uuc3ViYXJyYXkoMjgpOmUuc3ViYXJyYXkoNzgpLFsic2luZiJdKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbihlKXt2YXIgdD1tZShlLFsic2NobSJdKVswXTtpZih0KXt2YXIgcj1kZSh0LnN1YmFycmF5KDQsOCkpO2lmKCJjYmNzIj09PXJ8fCJjZW5jIj09PXIpcmV0dXJuIG1lKGUsWyJzY2hpIiwidGVuYyJdKVswXX1yZXR1cm4gbnVsbH0oZSk7aWYodCl7dmFyIGk9dC5zdWJhcnJheSg4LDI0KTtpLnNvbWUoKGZ1bmN0aW9uKGUpe3JldHVybiAwIT09ZX0pKXx8KEQubG9nKCJbZW1lXSBQYXRjaGluZyBrZXlJZCBpbiAnZW5jIisoYT8iYSI6InYiKSsiPnNpbmY+PnRlbmMnIGJveDogIitzZShpKSsiIC0+ICIrc2UocikpLHQuc2V0KHIsOCkpfX0pKX0pKX0pKSxlfWZ1bmN0aW9uIEFlKGUpe3ZhciB0PWZlKGUsMCkscj04OzEmdCYmKHIrPTQpLDQmdCYmKHIrPTQpO2Zvcih2YXIgaT0wLGE9ZmUoZSw0KSxuPTA7bjxhO24rKykyNTYmdCYmKGkrPWZlKGUscikscis9NCksNTEyJnQmJihyKz00KSwxMDI0JnQmJihyKz00KSwyMDQ4JnQmJihyKz00KTtyZXR1cm4gaX1mdW5jdGlvbiBiZShlLHQpe3ZhciByPW5ldyBVaW50OEFycmF5KGUubGVuZ3RoK3QubGVuZ3RoKTtyZXR1cm4gci5zZXQoZSksci5zZXQodCxlLmxlbmd0aCkscn1mdW5jdGlvbiBrZShlLHQpe3ZhciByPVtdLGk9dC5zYW1wbGVzLGE9dC50aW1lc2NhbGUsbj10LmlkLHM9ITE7cmV0dXJuIG1lKGksWyJtb29mIl0pLm1hcCgoZnVuY3Rpb24obyl7dmFyIGw9by5ieXRlT2Zmc2V0LTg7bWUobyxbInRyYWYiXSkubWFwKChmdW5jdGlvbihvKXt2YXIgdT1tZShvLFsidGZkdCJdKS5tYXAoKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scj1mZShlLDQpO3JldHVybiAxPT09dCYmKHIqPU1hdGgucG93KDIsMzIpLHIrPWZlKGUsOCkpLHIvYX0pKVswXTtyZXR1cm4gdm9pZCAwIT09dSYmKGU9dSksbWUobyxbInRmaGQiXSkubWFwKChmdW5jdGlvbih1KXt2YXIgZD1mZSh1LDQpLGg9MTY3NzcyMTUmZmUodSwwKSxmPTAsYz0wIT0oMTYmaCksdj0wLGc9MCE9KDMyJmgpLG09ODtkPT09biYmKDAhPSgxJmgpJiYobSs9OCksMCE9KDImaCkmJihtKz00KSwwIT0oOCZoKSYmKGY9ZmUodSxtKSxtKz00KSxjJiYodj1mZSh1LG0pLG0rPTQpLGcmJihtKz00KSwidmlkZW8iPT09dC50eXBlJiYocz1mdW5jdGlvbihlKXtpZighZSlyZXR1cm4hMTt2YXIgdD1lLmluZGV4T2YoIi4iKSxyPXQ8MD9lOmUuc3Vic3RyaW5nKDAsdCk7cmV0dXJuImh2YzEiPT09cnx8ImhldjEiPT09cnx8ImR2aDEiPT09cnx8ImR2aGUiPT09cn0odC5jb2RlYykpLG1lKG8sWyJ0cnVuIl0pLm1hcCgoZnVuY3Rpb24obil7dmFyIG89blswXSx1PTE2Nzc3MjE1JmZlKG4sMCksZD0wIT0oMSZ1KSxoPTAsYz0wIT0oNCZ1KSxnPTAhPSgyNTYmdSksbT0wLHA9MCE9KDUxMiZ1KSx5PTAsRT0wIT0oMTAyNCZ1KSxUPTAhPSgyMDQ4JnUpLFM9MCxMPWZlKG4sNCksUj04O2QmJihoPWZlKG4sUiksUis9NCksYyYmKFIrPTQpO2Zvcih2YXIgQT1oK2wsYj0wO2I8TDtiKyspe2lmKGc/KG09ZmUobixSKSxSKz00KTptPWYscD8oeT1mZShuLFIpLFIrPTQpOnk9dixFJiYoUis9NCksVCYmKFM9MD09PW8/ZmUobixSKTp2ZShuLFIpLFIrPTQpLHQudHlwZT09PU8pZm9yKHZhciBrPTA7azx5Oyl7dmFyIEQ9ZmUoaSxBKTtEZShzLGlbQSs9NF0pJiZfZShpLnN1YmFycmF5KEEsQStEKSxzPzI6MSxlK1MvYSxyKSxBKz1ELGsrPUQrNH1lKz1tL2F9fSkpKX0pKX0pKX0pKSxyfWZ1bmN0aW9uIERlKGUsdCl7aWYoZSl7dmFyIHI9dD4+MSY2MztyZXR1cm4gMzk9PT1yfHw0MD09PXJ9cmV0dXJuIDY9PSgzMSZ0KX1mdW5jdGlvbiBfZShlLHQscixpKXt2YXIgYT14ZShlKSxuPTA7bis9dDtmb3IodmFyIHM9MCxvPTAsbD0wO248YS5sZW5ndGg7KXtzPTA7ZG97aWYobj49YS5sZW5ndGgpYnJlYWs7cys9bD1hW24rK119d2hpbGUoMjU1PT09bCk7bz0wO2Rve2lmKG4+PWEubGVuZ3RoKWJyZWFrO28rPWw9YVtuKytdfXdoaWxlKDI1NT09PWwpO3ZhciB1PWEubGVuZ3RoLW4sZD1uO2lmKG88dSluKz1vO2Vsc2UgaWYobz51KXtELmVycm9yKCJNYWxmb3JtZWQgU0VJIHBheWxvYWQuICIrbysiIGlzIHRvbyBzbWFsbCwgb25seSAiK3UrIiBieXRlcyBsZWZ0IHRvIHBhcnNlLiIpO2JyZWFrfWlmKDQ9PT1zKXtpZigxODE9PT1hW2QrK10pe3ZhciBoPWhlKGEsZCk7aWYoZCs9Miw0OT09PWgpe3ZhciBmPWZlKGEsZCk7aWYoZCs9NCwxMTk1NDU2ODIwPT09Zil7dmFyIGM9YVtkKytdO2lmKDM9PT1jKXt2YXIgdj1hW2QrK10sZz02NCZ2LG09Zz8yKzMqKDMxJnYpOjAscD1uZXcgVWludDhBcnJheShtKTtpZihnKXtwWzBdPXY7Zm9yKHZhciB5PTE7eTxtO3krKylwW3ldPWFbZCsrXX1pLnB1c2goe3R5cGU6YyxwYXlsb2FkVHlwZTpzLHB0czpyLGJ5dGVzOnB9KX19fX19ZWxzZSBpZig1PT09cyYmbz4xNil7Zm9yKHZhciBFPVtdLFQ9MDtUPDE2O1QrKyl7dmFyIFM9YVtkKytdLnRvU3RyaW5nKDE2KTtFLnB1c2goMT09Uy5sZW5ndGg/IjAiK1M6UyksMyE9PVQmJjUhPT1UJiY3IT09VCYmOSE9PVR8fEUucHVzaCgiLSIpfWZvcih2YXIgTD1vLTE2LFI9bmV3IFVpbnQ4QXJyYXkoTCksQT0wO0E8TDtBKyspUltBXT1hW2QrK107aS5wdXNoKHtwYXlsb2FkVHlwZTpzLHB0czpyLHV1aWQ6RS5qb2luKCIiKSx1c2VyRGF0YTphZShSKSx1c2VyRGF0YUJ5dGVzOlJ9KX19fWZ1bmN0aW9uIHhlKGUpe2Zvcih2YXIgdD1lLmJ5dGVMZW5ndGgscj1bXSxpPTE7aTx0LTI7KTA9PT1lW2ldJiYwPT09ZVtpKzFdJiYzPT09ZVtpKzJdPyhyLnB1c2goaSsyKSxpKz0yKTppKys7aWYoMD09PXIubGVuZ3RoKXJldHVybiBlO3ZhciBhPXQtci5sZW5ndGgsbj1uZXcgVWludDhBcnJheShhKSxzPTA7Zm9yKGk9MDtpPGE7cysrLGkrKylzPT09clswXSYmKHMrKyxyLnNoaWZ0KCkpLG5baV09ZVtzXTtyZXR1cm4gbn12YXIgd2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLGksYSl7dm9pZCAwPT09aSYmKGk9WzFdKSx2b2lkIDA9PT1hJiYoYT1udWxsKSx0aGlzLnVyaT12b2lkIDAsdGhpcy5tZXRob2Q9dm9pZCAwLHRoaXMua2V5Rm9ybWF0PXZvaWQgMCx0aGlzLmtleUZvcm1hdFZlcnNpb25zPXZvaWQgMCx0aGlzLmVuY3J5cHRlZD12b2lkIDAsdGhpcy5pc0NvbW1vbkVuY3J5cHRpb249dm9pZCAwLHRoaXMuaXY9bnVsbCx0aGlzLmtleT1udWxsLHRoaXMua2V5SWQ9bnVsbCx0aGlzLnBzc2g9bnVsbCx0aGlzLm1ldGhvZD1lLHRoaXMudXJpPXQsdGhpcy5rZXlGb3JtYXQ9cix0aGlzLmtleUZvcm1hdFZlcnNpb25zPWksdGhpcy5pdj1hLHRoaXMuZW5jcnlwdGVkPSEhZSYmIk5PTkUiIT09ZSx0aGlzLmlzQ29tbW9uRW5jcnlwdGlvbj10aGlzLmVuY3J5cHRlZCYmIkFFUy0xMjgiIT09ZX1lLmNsZWFyS2V5VXJpVG9LZXlJZE1hcD1mdW5jdGlvbigpe307dmFyIHQ9ZS5wcm90b3R5cGU7cmV0dXJuIHQuaXNTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtpZih0aGlzLm1ldGhvZCl7aWYoIkFFUy0xMjgiPT09dGhpcy5tZXRob2R8fCJOT05FIj09PXRoaXMubWV0aG9kKXJldHVybiEwO2lmKCJpZGVudGl0eSI9PT10aGlzLmtleUZvcm1hdClyZXR1cm4iU0FNUExFLUFFUyI9PT10aGlzLm1ldGhvZH1yZXR1cm4hMX0sdC5nZXREZWNyeXB0RGF0YT1mdW5jdGlvbih0KXtpZighdGhpcy5lbmNyeXB0ZWR8fCF0aGlzLnVyaSlyZXR1cm4gbnVsbDtpZigiQUVTLTEyOCI9PT10aGlzLm1ldGhvZCYmdGhpcy51cmkmJiF0aGlzLml2KXsibnVtYmVyIiE9dHlwZW9mIHQmJigiQUVTLTEyOCIhPT10aGlzLm1ldGhvZHx8dGhpcy5pdnx8RC53YXJuKCdtaXNzaW5nIElWIGZvciBpbml0aWFsaXphdGlvbiBzZWdtZW50IHdpdGggbWV0aG9kPSInK3RoaXMubWV0aG9kKyciIC0gY29tcGxpYW5jZSBpc3N1ZScpLHQ9MCk7dmFyIHI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PW5ldyBVaW50OEFycmF5KDE2KSxyPTEyO3I8MTY7cisrKXRbcl09ZT4+OCooMTUtcikmMjU1O3JldHVybiB0fSh0KTtyZXR1cm4gbmV3IGUodGhpcy5tZXRob2QsdGhpcy51cmksImlkZW50aXR5Iix0aGlzLmtleUZvcm1hdFZlcnNpb25zLHIpfXJldHVybiB0aGlzfSxlfSgpO2Z1bmN0aW9uIENlKGUpe2lmKHZvaWQgMD09PWUmJihlPSEwKSwidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYpcmV0dXJuKGV8fCFzZWxmLk1lZGlhU291cmNlKSYmc2VsZi5NYW5hZ2VkTWVkaWFTb3VyY2V8fHNlbGYuTWVkaWFTb3VyY2V8fHNlbGYuV2ViS2l0TWVkaWFTb3VyY2V9dmFyIEllPXthdWRpbzp7YTNkczoxLCJhYy0zIjouOTUsImFjLTQiOjEsYWxhYzouOSxhbGF3OjEsZHJhMToxLCJkdHMrIjoxLCJkdHMtIjoxLGR0c2M6MSxkdHNlOjEsZHRzaDoxLCJlYy0zIjouOSxlbmNhOjEsZkxhQzouOSxmbGFjOi45LEZMQUM6LjksZzcxOToxLGc3MjY6MSxtNGFlOjEsbWhhMToxLG1oYTI6MSxtaG0xOjEsbWhtMjoxLG1scGE6MSxtcDRhOjEsInJhdyAiOjEsT3B1czoxLG9wdXM6MSxzYW1yOjEsc2F3YjoxLHNhd3A6MSxzZXZjOjEsc3FjcDoxLHNzbXY6MSx0d29zOjEsdWxhdzoxfSx2aWRlbzp7YXZjMToxLGF2YzI6MSxhdmMzOjEsYXZjNDoxLGF2Y3A6MSxhdjAxOi44LGRyYWM6MSxkdmExOjEsZHZhdjoxLGR2aDE6LjcsZHZoZTouNyxlbmN2OjEsaGV2MTouNzUsaHZjMTouNzUsbWpwMjoxLG1wNHY6MSxtdmMxOjEsbXZjMjoxLG12YzM6MSxtdmM0OjEscmVzdjoxLHJ2NjA6MSxzMjYzOjEsc3ZjMToxLHN2YzI6MSwidmMtMSI6MSx2cDA4OjEsdnAwOTouOX0sdGV4dDp7c3RwcDoxLHd2dHQ6MX19O2Z1bmN0aW9uIFBlKGUsdCxyKXtyZXR1cm4gdm9pZCAwPT09ciYmKHI9ITApLCFlLnNwbGl0KCIsIikuc29tZSgoZnVuY3Rpb24oZSl7cmV0dXJuIUZlKGUsdCxyKX0pKX1mdW5jdGlvbiBGZShlLHQscil7dmFyIGk7dm9pZCAwPT09ciYmKHI9ITApO3ZhciBhPUNlKHIpO3JldHVybiBudWxsIT0oaT1udWxsPT1hP3ZvaWQgMDphLmlzVHlwZVN1cHBvcnRlZChPZShlLHQpKSkmJml9ZnVuY3Rpb24gT2UoZSx0KXtyZXR1cm4gdCsnL21wNDtjb2RlY3M9IicrZSsnIid9ZnVuY3Rpb24gTWUoZSl7aWYoZSl7dmFyIHQ9ZS5zdWJzdHJpbmcoMCw0KTtyZXR1cm4gSWUudmlkZW9bdF19cmV0dXJuIDJ9ZnVuY3Rpb24gTmUoZSl7cmV0dXJuIGUuc3BsaXQoIiwiKS5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCl7dmFyIHI9SWUudmlkZW9bdF07cmV0dXJuIHI/KDIqcitlKS8oZT8zOjIpOihJZS5hdWRpb1t0XStlKS8oZT8yOjEpfSksMCl9dmFyIEJlPXt9LFVlPS9mbGFjfG9wdXMvaTtmdW5jdGlvbiBHZShlLHQpe3JldHVybiB2b2lkIDA9PT10JiYodD0hMCksZS5yZXBsYWNlKFVlLChmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10JiYodD0hMCksQmVbZV0pcmV0dXJuIEJlW2VdO2Zvcih2YXIgcj17ZmxhYzpbImZsYWMiLCJmTGFDIiwiRkxBQyJdLG9wdXM6WyJvcHVzIiwiT3B1cyJdfVtlXSxpPTA7aTxyLmxlbmd0aDtpKyspaWYoRmUocltpXSwiYXVkaW8iLHQpKXJldHVybiBCZVtlXT1yW2ldLHJbaV07cmV0dXJuIGV9KGUudG9Mb3dlckNhc2UoKSx0KX0pKX1mdW5jdGlvbiBIZShlLHQpe3JldHVybiBlJiYibXA0YSIhPT1lP2U6dD90LnNwbGl0KCIsIilbMF06dH12YXIgVmU9LyNFWFQtWC1TVFJFQU0tSU5GOihbXlxyXG5dKikoPzpbXHJcbl0oPzojW15cclxuXSopPykqKFteXHJcbl0rKXwjRVhULVgtKFNFU1NJT04tREFUQXxTRVNTSU9OLUtFWXxERUZJTkV8Q09OVEVOVC1TVEVFUklOR3xTVEFSVCk6KFteXHJcbl0qKVtcclxuXSsvZyxLZT0vI0VYVC1YLU1FRElBOiguKikvZyxXZT0vXiNFWFQoPzpJTkZ8LVgtVEFSR0VURFVSQVRJT04pOi9tLGplPW5ldyBSZWdFeHAoWy8jRVhUSU5GOlxzKihcZCooPzpcLlxkKyk/KSg/OiwoLiopXHMrKT8vLnNvdXJjZSwvKD8hIykgKihcU1teXHJcbl0qKS8uc291cmNlLC8jRVhULVgtQllURVJBTkdFOiooLispLy5zb3VyY2UsLyNFWFQtWC1QUk9HUkFNLURBVEUtVElNRTooLispLy5zb3VyY2UsLyMuKi8uc291cmNlXS5qb2luKCJ8IiksImciKSxZZT1uZXcgUmVnRXhwKFsvIyhFWFRNM1UpLy5zb3VyY2UsLyNFWFQtWC0oREFURVJBTkdFfERFRklORXxLRVl8TUFQfFBBUlR8UEFSVC1JTkZ8UExBWUxJU1QtVFlQRXxQUkVMT0FELUhJTlR8UkVORElUSU9OLVJFUE9SVHxTRVJWRVItQ09OVFJPTHxTS0lQfFNUQVJUKTooLispLy5zb3VyY2UsLyNFWFQtWC0oQklUUkFURXxESVNDT05USU5VSVRZLVNFUVVFTkNFfE1FRElBLVNFUVVFTkNFfFRBUkdFVERVUkFUSU9OfFZFUlNJT04pOiAqKFxkKykvLnNvdXJjZSwvI0VYVC1YLShESVNDT05USU5VSVRZfEVORExJU1R8R0FQfElOREVQRU5ERU5ULVNFR01FTlRTKS8uc291cmNlLC8oIykoW146XSopOiguKikvLnNvdXJjZSwvKCMpKC4qKSg/Oi4qKVxyP1xuPy8uc291cmNlXS5qb2luKCJ8IikpLHFlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5maW5kR3JvdXA9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIGk9ZVtyXTtpZihpLmlkPT09dClyZXR1cm4gaX19LGUucmVzb2x2ZT1mdW5jdGlvbihlLHQpe3JldHVybiBnLmJ1aWxkQWJzb2x1dGVVUkwodCxlLHthbHdheXNOb3JtYWxpemU6ITB9KX0sZS5pc01lZGlhUGxheWxpc3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIFdlLnRlc3QoZSl9LGUucGFyc2VNYXN0ZXJQbGF5bGlzdD1mdW5jdGlvbih0LHIpe3ZhciBpLGE9e2NvbnRlbnRTdGVlcmluZzpudWxsLGxldmVsczpbXSxwbGF5bGlzdFBhcnNpbmdFcnJvcjpudWxsLHNlc3Npb25EYXRhOm51bGwsc2Vzc2lvbktleXM6bnVsbCxzdGFydFRpbWVPZmZzZXQ6bnVsbCx2YXJpYWJsZUxpc3Q6bnVsbCxoYXNWYXJpYWJsZVJlZnM6ITF9LG49W107Zm9yKFZlLmxhc3RJbmRleD0wO251bGwhPShpPVZlLmV4ZWModCkpOylpZihpWzFdKXt2YXIgcyxvPW5ldyB3KGlbMV0pLGw9aVsyXSx1PXthdHRyczpvLGJpdHJhdGU6by5kZWNpbWFsSW50ZWdlcigiQkFORFdJRFRIIil8fG8uZGVjaW1hbEludGVnZXIoIkFWRVJBR0UtQkFORFdJRFRIIiksbmFtZTpvLk5BTUUsdXJsOmUucmVzb2x2ZShsLHIpfSxkPW8uZGVjaW1hbFJlc29sdXRpb24oIlJFU09MVVRJT04iKTtkJiYodS53aWR0aD1kLndpZHRoLHUuaGVpZ2h0PWQuaGVpZ2h0KSxRZShvLkNPREVDUyx1KSxudWxsIT0ocz11LnVua25vd25Db2RlY3MpJiZzLmxlbmd0aHx8bi5wdXNoKHUpLGEubGV2ZWxzLnB1c2godSl9ZWxzZSBpZihpWzNdKXt2YXIgaD1pWzNdLGY9aVs0XTtzd2l0Y2goaCl7Y2FzZSJTRVNTSU9OLURBVEEiOnZhciBjPW5ldyB3KGYpLHY9Y1siREFUQS1JRCJdO3YmJihudWxsPT09YS5zZXNzaW9uRGF0YSYmKGEuc2Vzc2lvbkRhdGE9e30pLGEuc2Vzc2lvbkRhdGFbdl09Yyk7YnJlYWs7Y2FzZSJTRVNTSU9OLUtFWSI6dmFyIGc9emUoZixyKTtnLmVuY3J5cHRlZCYmZy5pc1N1cHBvcnRlZCgpPyhudWxsPT09YS5zZXNzaW9uS2V5cyYmKGEuc2Vzc2lvbktleXM9W10pLGEuc2Vzc2lvbktleXMucHVzaChnKSk6RC53YXJuKCdbS2V5c10gSWdub3JpbmcgaW52YWxpZCBFWFQtWC1TRVNTSU9OLUtFWSB0YWc6ICInK2YrJyInKTticmVhaztjYXNlIkRFRklORSI6YnJlYWs7Y2FzZSJDT05URU5ULVNURUVSSU5HIjp2YXIgbT1uZXcgdyhmKTthLmNvbnRlbnRTdGVlcmluZz17dXJpOmUucmVzb2x2ZShtWyJTRVJWRVItVVJJIl0scikscGF0aHdheUlkOm1bIlBBVEhXQVktSUQiXXx8Ii4ifTticmVhaztjYXNlIlNUQVJUIjphLnN0YXJ0VGltZU9mZnNldD1YZShmKX19dmFyIHA9bi5sZW5ndGg+MCYmbi5sZW5ndGg8YS5sZXZlbHMubGVuZ3RoO3JldHVybiBhLmxldmVscz1wP246YS5sZXZlbHMsMD09PWEubGV2ZWxzLmxlbmd0aCYmKGEucGxheWxpc3RQYXJzaW5nRXJyb3I9bmV3IEVycm9yKCJubyBsZXZlbHMgZm91bmQgaW4gbWFuaWZlc3QiKSksYX0sZS5wYXJzZU1hc3RlclBsYXlsaXN0TWVkaWE9ZnVuY3Rpb24odCxyLGkpe3ZhciBhLG49e30scz1pLmxldmVscyxvPXtBVURJTzpzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue2lkOmUuYXR0cnMuQVVESU8sYXVkaW9Db2RlYzplLmF1ZGlvQ29kZWN9fSkpLFNVQlRJVExFUzpzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue2lkOmUuYXR0cnMuU1VCVElUTEVTLHRleHRDb2RlYzplLnRleHRDb2RlY319KSksIkNMT1NFRC1DQVBUSU9OUyI6W119LGw9MDtmb3IoS2UubGFzdEluZGV4PTA7bnVsbCE9PShhPUtlLmV4ZWModCkpOyl7dmFyIHU9bmV3IHcoYVsxXSksZD11LlRZUEU7aWYoZCl7dmFyIGg9b1tkXSxmPW5bZF18fFtdO25bZF09Zjt2YXIgYz11LkxBTkdVQUdFLHY9dVsiQVNTT0MtTEFOR1VBR0UiXSxnPXUuQ0hBTk5FTFMsbT11LkNIQVJBQ1RFUklTVElDUyxwPXVbIklOU1RSRUFNLUlEIl0seT17YXR0cnM6dSxiaXRyYXRlOjAsaWQ6bCsrLGdyb3VwSWQ6dVsiR1JPVVAtSUQiXXx8IiIsbmFtZTp1Lk5BTUV8fGN8fCIiLHR5cGU6ZCxkZWZhdWx0OnUuYm9vbCgiREVGQVVMVCIpLGF1dG9zZWxlY3Q6dS5ib29sKCJBVVRPU0VMRUNUIiksZm9yY2VkOnUuYm9vbCgiRk9SQ0VEIiksbGFuZzpjLHVybDp1LlVSST9lLnJlc29sdmUodS5VUkkscik6IiJ9O2lmKHYmJih5LmFzc29jTGFuZz12KSxnJiYoeS5jaGFubmVscz1nKSxtJiYoeS5jaGFyYWN0ZXJpc3RpY3M9bSkscCYmKHkuaW5zdHJlYW1JZD1wKSxudWxsIT1oJiZoLmxlbmd0aCl7dmFyIEU9ZS5maW5kR3JvdXAoaCx5Lmdyb3VwSWQpfHxoWzBdO0plKHksRSwiYXVkaW9Db2RlYyIpLEplKHksRSwidGV4dENvZGVjIil9Zi5wdXNoKHkpfX1yZXR1cm4gbn0sZS5wYXJzZUxldmVsUGxheWxpc3Q9ZnVuY3Rpb24oZSx0LHIsaSxhLG4pe3ZhciBzLGwsdSxkPW5ldyBHKHQpLGg9ZC5mcmFnbWVudHMsZj1udWxsLGM9MCx2PTAsZz0wLHA9MCx5PW51bGwsRT1uZXcgQihpLHQpLFQ9LTEsUz0hMSxMPW51bGw7Zm9yKGplLmxhc3RJbmRleD0wLGQubTN1OD1lLGQuaGFzVmFyaWFibGVSZWZzPSExO251bGwhPT0ocz1qZS5leGVjKGUpKTspe1MmJihTPSExLChFPW5ldyBCKGksdCkpLnN0YXJ0PWcsRS5zbj1jLEUuY2M9cCxFLmxldmVsPXIsZiYmKEUuaW5pdFNlZ21lbnQ9ZixFLnJhd1Byb2dyYW1EYXRlVGltZT1mLnJhd1Byb2dyYW1EYXRlVGltZSxmLnJhd1Byb2dyYW1EYXRlVGltZT1udWxsLEwmJihFLnNldEJ5dGVSYW5nZShMKSxMPW51bGwpKSk7dmFyIFI9c1sxXTtpZihSKXtFLmR1cmF0aW9uPXBhcnNlRmxvYXQoUik7dmFyIEE9KCIgIitzWzJdKS5zbGljZSgxKTtFLnRpdGxlPUF8fG51bGwsRS50YWdMaXN0LnB1c2goQT9bIklORiIsUixBXTpbIklORiIsUl0pfWVsc2UgaWYoc1szXSl7aWYobShFLmR1cmF0aW9uKSl7RS5zdGFydD1nLHUmJmV0KEUsdSxkKSxFLnNuPWMsRS5sZXZlbD1yLEUuY2M9cCxoLnB1c2goRSk7dmFyIGI9KCIgIitzWzNdKS5zbGljZSgxKTtFLnJlbHVybD1iLCRlKEUseSkseT1FLGcrPUUuZHVyYXRpb24sYysrLHY9MCxTPSEwfX1lbHNlIGlmKHNbNF0pe3ZhciBrPSgiICIrc1s0XSkuc2xpY2UoMSk7eT9FLnNldEJ5dGVSYW5nZShrLHkpOkUuc2V0Qnl0ZVJhbmdlKGspfWVsc2UgaWYoc1s1XSlFLnJhd1Byb2dyYW1EYXRlVGltZT0oIiAiK3NbNV0pLnNsaWNlKDEpLEUudGFnTGlzdC5wdXNoKFsiUFJPR1JBTS1EQVRFLVRJTUUiLEUucmF3UHJvZ3JhbURhdGVUaW1lXSksLTE9PT1UJiYoVD1oLmxlbmd0aCk7ZWxzZXtpZighKHM9c1swXS5tYXRjaChZZSkpKXtELndhcm4oIk5vIG1hdGNoZXMgb24gc2xvdyByZWdleCBtYXRjaCBmb3IgbGV2ZWwgcGxheWxpc3QhIik7Y29udGludWV9Zm9yKGw9MTtsPHMubGVuZ3RoJiZ2b2lkIDA9PT1zW2xdO2wrKyk7dmFyIF89KCIgIitzW2xdKS5zbGljZSgxKSx4PSgiICIrc1tsKzFdKS5zbGljZSgxKSxDPXNbbCsyXT8oIiAiK3NbbCsyXSkuc2xpY2UoMSk6IiI7c3dpdGNoKF8pe2Nhc2UiUExBWUxJU1QtVFlQRSI6ZC50eXBlPXgudG9VcHBlckNhc2UoKTticmVhaztjYXNlIk1FRElBLVNFUVVFTkNFIjpjPWQuc3RhcnRTTj1wYXJzZUludCh4KTticmVhaztjYXNlIlNLSVAiOnZhciBQPW5ldyB3KHgpLEY9UC5kZWNpbWFsSW50ZWdlcigiU0tJUFBFRC1TRUdNRU5UUyIpO2lmKG0oRikpe2Quc2tpcHBlZFNlZ21lbnRzPUY7Zm9yKHZhciBPPUY7Ty0tOyloLnVuc2hpZnQobnVsbCk7Yys9Rn12YXIgTT1QLmVudW1lcmF0ZWRTdHJpbmcoIlJFQ0VOVExZLVJFTU9WRUQtREFURVJBTkdFUyIpO00mJihkLnJlY2VudGx5UmVtb3ZlZERhdGVyYW5nZXM9TS5zcGxpdCgiXHQiKSk7YnJlYWs7Y2FzZSJUQVJHRVREVVJBVElPTiI6ZC50YXJnZXRkdXJhdGlvbj1NYXRoLm1heChwYXJzZUludCh4KSwxKTticmVhaztjYXNlIlZFUlNJT04iOmQudmVyc2lvbj1wYXJzZUludCh4KTticmVhaztjYXNlIklOREVQRU5ERU5ULVNFR01FTlRTIjpjYXNlIkVYVE0zVSI6Y2FzZSJERUZJTkUiOmJyZWFrO2Nhc2UiRU5ETElTVCI6ZC5saXZlPSExO2JyZWFrO2Nhc2UiIyI6KHh8fEMpJiZFLnRhZ0xpc3QucHVzaChDP1t4LENdOlt4XSk7YnJlYWs7Y2FzZSJESVNDT05USU5VSVRZIjpwKyssRS50YWdMaXN0LnB1c2goWyJESVMiXSk7YnJlYWs7Y2FzZSJHQVAiOkUuZ2FwPSEwLEUudGFnTGlzdC5wdXNoKFtfXSk7YnJlYWs7Y2FzZSJCSVRSQVRFIjpFLnRhZ0xpc3QucHVzaChbXyx4XSk7YnJlYWs7Y2FzZSJEQVRFUkFOR0UiOnZhciBOPW5ldyB3KHgpLEg9bmV3IEkoTixkLmRhdGVSYW5nZXNbTi5JRF0pO0guaXNWYWxpZHx8ZC5za2lwcGVkU2VnbWVudHM/ZC5kYXRlUmFuZ2VzW0guaWRdPUg6RC53YXJuKCdJZ25vcmluZyBpbnZhbGlkIERBVEVSQU5HRSB0YWc6ICInK3grJyInKSxFLnRhZ0xpc3QucHVzaChbIkVYVC1YLURBVEVSQU5HRSIseF0pO2JyZWFrO2Nhc2UiRElTQ09OVElOVUlUWS1TRVFVRU5DRSI6cD1wYXJzZUludCh4KTticmVhaztjYXNlIktFWSI6dmFyIFY9emUoeCx0KTtpZihWLmlzU3VwcG9ydGVkKCkpe2lmKCJOT05FIj09PVYubWV0aG9kKXt1PXZvaWQgMDticmVha311fHwodT17fSksdVtWLmtleUZvcm1hdF0mJih1PW8oe30sdSkpLHVbVi5rZXlGb3JtYXRdPVZ9ZWxzZSBELndhcm4oJ1tLZXlzXSBJZ25vcmluZyBpbnZhbGlkIEVYVC1YLUtFWSB0YWc6ICInK3grJyInKTticmVhaztjYXNlIlNUQVJUIjpkLnN0YXJ0VGltZU9mZnNldD1YZSh4KTticmVhaztjYXNlIk1BUCI6dmFyIEs9bmV3IHcoeCk7aWYoRS5kdXJhdGlvbil7dmFyIFc9bmV3IEIoaSx0KTtaZShXLEsscix1KSxmPVcsRS5pbml0U2VnbWVudD1mLGYucmF3UHJvZ3JhbURhdGVUaW1lJiYhRS5yYXdQcm9ncmFtRGF0ZVRpbWUmJihFLnJhd1Byb2dyYW1EYXRlVGltZT1mLnJhd1Byb2dyYW1EYXRlVGltZSl9ZWxzZXt2YXIgaj1FLmJ5dGVSYW5nZUVuZE9mZnNldDtpZihqKXt2YXIgWT1FLmJ5dGVSYW5nZVN0YXJ0T2Zmc2V0O0w9ai1ZKyJAIitZfWVsc2UgTD1udWxsO1plKEUsSyxyLHUpLGY9RSxTPSEwfWJyZWFrO2Nhc2UiU0VSVkVSLUNPTlRST0wiOnZhciBxPW5ldyB3KHgpO2QuY2FuQmxvY2tSZWxvYWQ9cS5ib29sKCJDQU4tQkxPQ0stUkVMT0FEIiksZC5jYW5Ta2lwVW50aWw9cS5vcHRpb25hbEZsb2F0KCJDQU4tU0tJUC1VTlRJTCIsMCksZC5jYW5Ta2lwRGF0ZVJhbmdlcz1kLmNhblNraXBVbnRpbD4wJiZxLmJvb2woIkNBTi1TS0lQLURBVEVSQU5HRVMiKSxkLnBhcnRIb2xkQmFjaz1xLm9wdGlvbmFsRmxvYXQoIlBBUlQtSE9MRC1CQUNLIiwwKSxkLmhvbGRCYWNrPXEub3B0aW9uYWxGbG9hdCgiSE9MRC1CQUNLIiwwKTticmVhaztjYXNlIlBBUlQtSU5GIjp2YXIgej1uZXcgdyh4KTtkLnBhcnRUYXJnZXQ9ei5kZWNpbWFsRmxvYXRpbmdQb2ludCgiUEFSVC1UQVJHRVQiKTticmVhaztjYXNlIlBBUlQiOnZhciBYPWQucGFydExpc3Q7WHx8KFg9ZC5wYXJ0TGlzdD1bXSk7dmFyIFE9dj4wP1hbWC5sZW5ndGgtMV06dm9pZCAwLEo9disrLCQ9bmV3IHcoeCksWj1uZXcgVSgkLEUsdCxKLFEpO1gucHVzaChaKSxFLmR1cmF0aW9uKz1aLmR1cmF0aW9uO2JyZWFrO2Nhc2UiUFJFTE9BRC1ISU5UIjp2YXIgZWU9bmV3IHcoeCk7ZC5wcmVsb2FkSGludD1lZTticmVhaztjYXNlIlJFTkRJVElPTi1SRVBPUlQiOnZhciB0ZT1uZXcgdyh4KTtkLnJlbmRpdGlvblJlcG9ydHM9ZC5yZW5kaXRpb25SZXBvcnRzfHxbXSxkLnJlbmRpdGlvblJlcG9ydHMucHVzaCh0ZSk7YnJlYWs7ZGVmYXVsdDpELndhcm4oImxpbmUgcGFyc2VkIGJ1dCBub3QgaGFuZGxlZDogIitzKX19fXkmJiF5LnJlbHVybD8oaC5wb3AoKSxnLT15LmR1cmF0aW9uLGQucGFydExpc3QmJihkLmZyYWdtZW50SGludD15KSk6ZC5wYXJ0TGlzdCYmKCRlKEUseSksRS5jYz1wLGQuZnJhZ21lbnRIaW50PUUsdSYmZXQoRSx1LGQpKTt2YXIgcmU9aC5sZW5ndGgsaWU9aFswXSxhZT1oW3JlLTFdO2lmKChnKz1kLnNraXBwZWRTZWdtZW50cypkLnRhcmdldGR1cmF0aW9uKT4wJiZyZSYmYWUpe2QuYXZlcmFnZXRhcmdldGR1cmF0aW9uPWcvcmU7dmFyIG5lPWFlLnNuO2QuZW5kU049ImluaXRTZWdtZW50IiE9PW5lP25lOjAsZC5saXZlfHwoYWUuZW5kTGlzdD0hMCksaWUmJihkLnN0YXJ0Q0M9aWUuY2MpfWVsc2UgZC5lbmRTTj0wLGQuc3RhcnRDQz0wO3JldHVybiBkLmZyYWdtZW50SGludCYmKGcrPWQuZnJhZ21lbnRIaW50LmR1cmF0aW9uKSxkLnRvdGFsZHVyYXRpb249ZyxkLmVuZENDPXAsVD4wJiZmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1lW3RdLGk9dDtpLS07KXt2YXIgYT1lW2ldO2lmKCFhKXJldHVybjthLnByb2dyYW1EYXRlVGltZT1yLnByb2dyYW1EYXRlVGltZS0xZTMqYS5kdXJhdGlvbixyPWF9fShoLFQpLGR9LGV9KCk7ZnVuY3Rpb24gemUoZSx0LHIpe3ZhciBpLGEsbj1uZXcgdyhlKSxzPW51bGwhPShpPW4uTUVUSE9EKT9pOiIiLG89bi5VUkksbD1uLmhleGFkZWNpbWFsSW50ZWdlcigiSVYiKSx1PW4uS0VZRk9STUFUVkVSU0lPTlMsZD1udWxsIT0oYT1uLktFWUZPUk1BVCk/YToiaWRlbnRpdHkiO28mJm4uSVYmJiFsJiZELmVycm9yKCJJbnZhbGlkIElWOiAiK24uSVYpO3ZhciBoPW8/cWUucmVzb2x2ZShvLHQpOiIiLGY9KHV8fCIxIikuc3BsaXQoIi8iKS5tYXAoTnVtYmVyKS5maWx0ZXIoTnVtYmVyLmlzRmluaXRlKTtyZXR1cm4gbmV3IHdlKHMsaCxkLGYsbCl9ZnVuY3Rpb24gWGUoZSl7dmFyIHQ9bmV3IHcoZSkuZGVjaW1hbEZsb2F0aW5nUG9pbnQoIlRJTUUtT0ZGU0VUIik7cmV0dXJuIG0odCk/dDpudWxsfWZ1bmN0aW9uIFFlKGUsdCl7dmFyIHI9KGV8fCIiKS5zcGxpdCgvWyAsXSsvKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlfSkpO1sidmlkZW8iLCJhdWRpbyIsInRleHQiXS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgaT1yLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7dmFyIHI9SWVbdF07cmV0dXJuISFyJiYhIXJbZS5zbGljZSgwLDQpXX0odCxlKX0pKTtpLmxlbmd0aCYmKHRbZSsiQ29kZWMiXT1pLmpvaW4oIiwiKSxyPXIuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4tMT09PWkuaW5kZXhPZihlKX0pKSl9KSksdC51bmtub3duQ29kZWNzPXJ9ZnVuY3Rpb24gSmUoZSx0LHIpe3ZhciBpPXRbcl07aSYmKGVbcl09aSl9ZnVuY3Rpb24gJGUoZSx0KXtlLnJhd1Byb2dyYW1EYXRlVGltZT9lLnByb2dyYW1EYXRlVGltZT1EYXRlLnBhcnNlKGUucmF3UHJvZ3JhbURhdGVUaW1lKTpudWxsIT10JiZ0LnByb2dyYW1EYXRlVGltZSYmKGUucHJvZ3JhbURhdGVUaW1lPXQuZW5kUHJvZ3JhbURhdGVUaW1lKSxtKGUucHJvZ3JhbURhdGVUaW1lKXx8KGUucHJvZ3JhbURhdGVUaW1lPW51bGwsZS5yYXdQcm9ncmFtRGF0ZVRpbWU9bnVsbCl9ZnVuY3Rpb24gWmUoZSx0LHIsaSl7ZS5yZWx1cmw9dC5VUkksdC5CWVRFUkFOR0UmJmUuc2V0Qnl0ZVJhbmdlKHQuQllURVJBTkdFKSxlLmxldmVsPXIsZS5zbj0iaW5pdFNlZ21lbnQiLGkmJihlLmxldmVsa2V5cz1pKSxlLmluaXRTZWdtZW50PW51bGx9ZnVuY3Rpb24gZXQoZSx0LHIpe2UubGV2ZWxrZXlzPXQ7dmFyIGk9ci5lbmNyeXB0ZWRGcmFnbWVudHM7aS5sZW5ndGgmJmlbaS5sZW5ndGgtMV0ubGV2ZWxrZXlzPT09dHx8IU9iamVjdC5rZXlzKHQpLnNvbWUoKGZ1bmN0aW9uKGUpe3JldHVybiB0W2VdLmlzQ29tbW9uRW5jcnlwdGlvbn0pKXx8aS5wdXNoKGUpfXZhciB0dD0ibWFuaWZlc3QiLHJ0PSJsZXZlbCIsaXQ9ImF1ZGlvVHJhY2siLGF0PSJzdWJ0aXRsZVRyYWNrIixudD0ibWFpbiIsc3Q9ImF1ZGlvIixvdD0ic3VidGl0bGUiO2Z1bmN0aW9uIGx0KGUpe3N3aXRjaChlLnR5cGUpe2Nhc2UgaXQ6cmV0dXJuIHN0O2Nhc2UgYXQ6cmV0dXJuIG90O2RlZmF1bHQ6cmV0dXJuIG50fX1mdW5jdGlvbiB1dChlLHQpe3ZhciByPWUudXJsO3JldHVybiB2b2lkIDAhPT1yJiYwIT09ci5pbmRleE9mKCJkYXRhOiIpfHwocj10LnVybCkscn12YXIgZHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuaGxzPXZvaWQgMCx0aGlzLmxvYWRlcnM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLnZhcmlhYmxlTGlzdD1udWxsLHRoaXMuaGxzPWUsdGhpcy5yZWdpc3Rlckxpc3RlbmVycygpfXZhciB0PWUucHJvdG90eXBlO3JldHVybiB0LnN0YXJ0TG9hZD1mdW5jdGlvbihlKXt9LHQuc3RvcExvYWQ9ZnVuY3Rpb24oKXt0aGlzLmRlc3Ryb3lJbnRlcm5hbExvYWRlcnMoKX0sdC5yZWdpc3Rlckxpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaGxzO2Uub24oRS5NQU5JRkVTVF9MT0FESU5HLHRoaXMub25NYW5pZmVzdExvYWRpbmcsdGhpcyksZS5vbihFLkxFVkVMX0xPQURJTkcsdGhpcy5vbkxldmVsTG9hZGluZyx0aGlzKSxlLm9uKEUuQVVESU9fVFJBQ0tfTE9BRElORyx0aGlzLm9uQXVkaW9UcmFja0xvYWRpbmcsdGhpcyksZS5vbihFLlNVQlRJVExFX1RSQUNLX0xPQURJTkcsdGhpcy5vblN1YnRpdGxlVHJhY2tMb2FkaW5nLHRoaXMpfSx0LnVucmVnaXN0ZXJMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmhscztlLm9mZihFLk1BTklGRVNUX0xPQURJTkcsdGhpcy5vbk1hbmlmZXN0TG9hZGluZyx0aGlzKSxlLm9mZihFLkxFVkVMX0xPQURJTkcsdGhpcy5vbkxldmVsTG9hZGluZyx0aGlzKSxlLm9mZihFLkFVRElPX1RSQUNLX0xPQURJTkcsdGhpcy5vbkF1ZGlvVHJhY2tMb2FkaW5nLHRoaXMpLGUub2ZmKEUuU1VCVElUTEVfVFJBQ0tfTE9BRElORyx0aGlzLm9uU3VidGl0bGVUcmFja0xvYWRpbmcsdGhpcyl9LHQuY3JlYXRlSW50ZXJuYWxMb2FkZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5obHMuY29uZmlnLHI9dC5wTG9hZGVyLGk9dC5sb2FkZXIsYT1uZXcocnx8aSkodCk7cmV0dXJuIHRoaXMubG9hZGVyc1tlLnR5cGVdPWEsYX0sdC5nZXRJbnRlcm5hbExvYWRlcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5sb2FkZXJzW2UudHlwZV19LHQucmVzZXRJbnRlcm5hbExvYWRlcj1mdW5jdGlvbihlKXt0aGlzLmxvYWRlcnNbZV0mJmRlbGV0ZSB0aGlzLmxvYWRlcnNbZV19LHQuZGVzdHJveUludGVybmFsTG9hZGVycz1mdW5jdGlvbigpe2Zvcih2YXIgZSBpbiB0aGlzLmxvYWRlcnMpe3ZhciB0PXRoaXMubG9hZGVyc1tlXTt0JiZ0LmRlc3Ryb3koKSx0aGlzLnJlc2V0SW50ZXJuYWxMb2FkZXIoZSl9fSx0LmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnZhcmlhYmxlTGlzdD1udWxsLHRoaXMudW5yZWdpc3Rlckxpc3RlbmVycygpLHRoaXMuZGVzdHJveUludGVybmFsTG9hZGVycygpfSx0Lm9uTWFuaWZlc3RMb2FkaW5nPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC51cmw7dGhpcy52YXJpYWJsZUxpc3Q9bnVsbCx0aGlzLmxvYWQoe2lkOm51bGwsbGV2ZWw6MCxyZXNwb25zZVR5cGU6InRleHQiLHR5cGU6dHQsdXJsOnIsZGVsaXZlcnlEaXJlY3RpdmVzOm51bGx9KX0sdC5vbkxldmVsTG9hZGluZz1mdW5jdGlvbihlLHQpe3ZhciByPXQuaWQsaT10LmxldmVsLGE9dC5wYXRod2F5SWQsbj10LnVybCxzPXQuZGVsaXZlcnlEaXJlY3RpdmVzO3RoaXMubG9hZCh7aWQ6cixsZXZlbDppLHBhdGh3YXlJZDphLHJlc3BvbnNlVHlwZToidGV4dCIsdHlwZTpydCx1cmw6bixkZWxpdmVyeURpcmVjdGl2ZXM6c30pfSx0Lm9uQXVkaW9UcmFja0xvYWRpbmc9ZnVuY3Rpb24oZSx0KXt2YXIgcj10LmlkLGk9dC5ncm91cElkLGE9dC51cmwsbj10LmRlbGl2ZXJ5RGlyZWN0aXZlczt0aGlzLmxvYWQoe2lkOnIsZ3JvdXBJZDppLGxldmVsOm51bGwscmVzcG9uc2VUeXBlOiJ0ZXh0Iix0eXBlOml0LHVybDphLGRlbGl2ZXJ5RGlyZWN0aXZlczpufSl9LHQub25TdWJ0aXRsZVRyYWNrTG9hZGluZz1mdW5jdGlvbihlLHQpe3ZhciByPXQuaWQsaT10Lmdyb3VwSWQsYT10LnVybCxuPXQuZGVsaXZlcnlEaXJlY3RpdmVzO3RoaXMubG9hZCh7aWQ6cixncm91cElkOmksbGV2ZWw6bnVsbCxyZXNwb25zZVR5cGU6InRleHQiLHR5cGU6YXQsdXJsOmEsZGVsaXZlcnlEaXJlY3RpdmVzOm59KX0sdC5sb2FkPWZ1bmN0aW9uKGUpe3ZhciB0LHIsaSxhPXRoaXMsbj10aGlzLmhscy5jb25maWcscz10aGlzLmdldEludGVybmFsTG9hZGVyKGUpO2lmKHMpe3ZhciBsPXMuY29udGV4dDtpZihsJiZsLnVybD09PWUudXJsJiZsLmxldmVsPT09ZS5sZXZlbClyZXR1cm4gdm9pZCBELnRyYWNlKCJbcGxheWxpc3QtbG9hZGVyXTogcGxheWxpc3QgcmVxdWVzdCBvbmdvaW5nIik7RC5sb2coIltwbGF5bGlzdC1sb2FkZXJdOiBhYm9ydGluZyBwcmV2aW91cyBsb2FkZXIgZm9yIHR5cGU6ICIrZS50eXBlKSxzLmFib3J0KCl9aWYocj1lLnR5cGU9PT10dD9uLm1hbmlmZXN0TG9hZFBvbGljeS5kZWZhdWx0Om8oe30sbi5wbGF5bGlzdExvYWRQb2xpY3kuZGVmYXVsdCx7dGltZW91dFJldHJ5Om51bGwsZXJyb3JSZXRyeTpudWxsfSkscz10aGlzLmNyZWF0ZUludGVybmFsTG9hZGVyKGUpLG0obnVsbD09KHQ9ZS5kZWxpdmVyeURpcmVjdGl2ZXMpP3ZvaWQgMDp0LnBhcnQpJiYoZS50eXBlPT09cnQmJm51bGwhPT1lLmxldmVsP2k9dGhpcy5obHMubGV2ZWxzW2UubGV2ZWxdLmRldGFpbHM6ZS50eXBlPT09aXQmJm51bGwhPT1lLmlkP2k9dGhpcy5obHMuYXVkaW9UcmFja3NbZS5pZF0uZGV0YWlsczplLnR5cGU9PT1hdCYmbnVsbCE9PWUuaWQmJihpPXRoaXMuaGxzLnN1YnRpdGxlVHJhY2tzW2UuaWRdLmRldGFpbHMpLGkpKXt2YXIgdT1pLnBhcnRUYXJnZXQsZD1pLnRhcmdldGR1cmF0aW9uO2lmKHUmJmQpe3ZhciBoPTFlMypNYXRoLm1heCgzKnUsLjgqZCk7cj1vKHt9LHIse21heFRpbWVUb0ZpcnN0Qnl0ZU1zOk1hdGgubWluKGgsci5tYXhUaW1lVG9GaXJzdEJ5dGVNcyksbWF4TG9hZFRpbWVNczpNYXRoLm1pbihoLHIubWF4VGltZVRvRmlyc3RCeXRlTXMpfSl9fXZhciBmPXIuZXJyb3JSZXRyeXx8ci50aW1lb3V0UmV0cnl8fHt9LGM9e2xvYWRQb2xpY3k6cix0aW1lb3V0OnIubWF4TG9hZFRpbWVNcyxtYXhSZXRyeTpmLm1heE51bVJldHJ5fHwwLHJldHJ5RGVsYXk6Zi5yZXRyeURlbGF5TXN8fDAsbWF4UmV0cnlEZWxheTpmLm1heFJldHJ5RGVsYXlNc3x8MH0sdj17b25TdWNjZXNzOmZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuPWEuZ2V0SW50ZXJuYWxMb2FkZXIocik7YS5yZXNldEludGVybmFsTG9hZGVyKHIudHlwZSk7dmFyIHM9ZS5kYXRhOzA9PT1zLmluZGV4T2YoIiNFWFRNM1UiKT8odC5wYXJzaW5nLnN0YXJ0PXBlcmZvcm1hbmNlLm5vdygpLHFlLmlzTWVkaWFQbGF5bGlzdChzKT9hLmhhbmRsZVRyYWNrT3JMZXZlbFBsYXlsaXN0KGUsdCxyLGl8fG51bGwsbik6YS5oYW5kbGVNYXN0ZXJQbGF5bGlzdChlLHQscixpKSk6YS5oYW5kbGVNYW5pZmVzdFBhcnNpbmdFcnJvcihlLHIsbmV3IEVycm9yKCJubyBFWFRNM1UgZGVsaW1pdGVyIiksaXx8bnVsbCx0KX0sb25FcnJvcjpmdW5jdGlvbihlLHQscixpKXthLmhhbmRsZU5ldHdvcmtFcnJvcih0LHIsITEsZSxpKX0sb25UaW1lb3V0OmZ1bmN0aW9uKGUsdCxyKXthLmhhbmRsZU5ldHdvcmtFcnJvcih0LHIsITAsdm9pZCAwLGUpfX07cy5sb2FkKGUsYyx2KX0sdC5oYW5kbGVNYXN0ZXJQbGF5bGlzdD1mdW5jdGlvbihlLHQscixpKXt2YXIgYT10aGlzLmhscyxuPWUuZGF0YSxzPXV0KGUsciksbz1xZS5wYXJzZU1hc3RlclBsYXlsaXN0KG4scyk7aWYoby5wbGF5bGlzdFBhcnNpbmdFcnJvcil0aGlzLmhhbmRsZU1hbmlmZXN0UGFyc2luZ0Vycm9yKGUscixvLnBsYXlsaXN0UGFyc2luZ0Vycm9yLGksdCk7ZWxzZXt2YXIgbD1vLmNvbnRlbnRTdGVlcmluZyx1PW8ubGV2ZWxzLGQ9by5zZXNzaW9uRGF0YSxoPW8uc2Vzc2lvbktleXMsZj1vLnN0YXJ0VGltZU9mZnNldCxjPW8udmFyaWFibGVMaXN0O3RoaXMudmFyaWFibGVMaXN0PWM7dmFyIHY9cWUucGFyc2VNYXN0ZXJQbGF5bGlzdE1lZGlhKG4scyxvKSxnPXYuQVVESU8sbT12b2lkIDA9PT1nP1tdOmcscD12LlNVQlRJVExFUyx5PXZbIkNMT1NFRC1DQVBUSU9OUyJdO20ubGVuZ3RoJiYobS5zb21lKChmdW5jdGlvbihlKXtyZXR1cm4hZS51cmx9KSl8fCF1WzBdLmF1ZGlvQ29kZWN8fHVbMF0uYXR0cnMuQVVESU98fChELmxvZygiW3BsYXlsaXN0LWxvYWRlcl06IGF1ZGlvIGNvZGVjIHNpZ25hbGVkIGluIHF1YWxpdHkgbGV2ZWwsIGJ1dCBubyBlbWJlZGRlZCBhdWRpbyB0cmFjayBzaWduYWxlZCwgY3JlYXRlIG9uZSIpLG0udW5zaGlmdCh7dHlwZToibWFpbiIsbmFtZToibWFpbiIsZ3JvdXBJZDoibWFpbiIsZGVmYXVsdDohMSxhdXRvc2VsZWN0OiExLGZvcmNlZDohMSxpZDotMSxhdHRyczpuZXcgdyh7fSksYml0cmF0ZTowLHVybDoiIn0pKSksYS50cmlnZ2VyKEUuTUFOSUZFU1RfTE9BREVELHtsZXZlbHM6dSxhdWRpb1RyYWNrczptLHN1YnRpdGxlczpwLGNhcHRpb25zOnksY29udGVudFN0ZWVyaW5nOmwsdXJsOnMsc3RhdHM6dCxuZXR3b3JrRGV0YWlsczppLHNlc3Npb25EYXRhOmQsc2Vzc2lvbktleXM6aCxzdGFydFRpbWVPZmZzZXQ6Zix2YXJpYWJsZUxpc3Q6Y30pfX0sdC5oYW5kbGVUcmFja09yTGV2ZWxQbGF5bGlzdD1mdW5jdGlvbihlLHQscixpLGEpe3ZhciBuPXRoaXMuaGxzLHM9ci5pZCxvPXIubGV2ZWwsbD1yLnR5cGUsdT11dChlLHIpLGQ9bShvKT9vOm0ocyk/czowLGg9bHQociksZj1xZS5wYXJzZUxldmVsUGxheWxpc3QoZS5kYXRhLHUsZCxoLDAsdGhpcy52YXJpYWJsZUxpc3QpO2lmKGw9PT10dCl7dmFyIGM9e2F0dHJzOm5ldyB3KHt9KSxiaXRyYXRlOjAsZGV0YWlsczpmLG5hbWU6IiIsdXJsOnV9O24udHJpZ2dlcihFLk1BTklGRVNUX0xPQURFRCx7bGV2ZWxzOltjXSxhdWRpb1RyYWNrczpbXSx1cmw6dSxzdGF0czp0LG5ldHdvcmtEZXRhaWxzOmksc2Vzc2lvbkRhdGE6bnVsbCxzZXNzaW9uS2V5czpudWxsLGNvbnRlbnRTdGVlcmluZzpudWxsLHN0YXJ0VGltZU9mZnNldDpudWxsLHZhcmlhYmxlTGlzdDpudWxsfSl9dC5wYXJzaW5nLmVuZD1wZXJmb3JtYW5jZS5ub3coKSxyLmxldmVsRGV0YWlscz1mLHRoaXMuaGFuZGxlUGxheWxpc3RMb2FkZWQoZixlLHQscixpLGEpfSx0LmhhbmRsZU1hbmlmZXN0UGFyc2luZ0Vycm9yPWZ1bmN0aW9uKGUsdCxyLGksYSl7dGhpcy5obHMudHJpZ2dlcihFLkVSUk9SLHt0eXBlOlQuTkVUV09SS19FUlJPUixkZXRhaWxzOlMuTUFOSUZFU1RfUEFSU0lOR19FUlJPUixmYXRhbDp0LnR5cGU9PT10dCx1cmw6ZS51cmwsZXJyOnIsZXJyb3I6cixyZWFzb246ci5tZXNzYWdlLHJlc3BvbnNlOmUsY29udGV4dDp0LG5ldHdvcmtEZXRhaWxzOmksc3RhdHM6YX0pfSx0LmhhbmRsZU5ldHdvcmtFcnJvcj1mdW5jdGlvbihlLHQscixhLG4pe3ZvaWQgMD09PXImJihyPSExKTt2YXIgcz0iQSBuZXR3b3JrICIrKHI/InRpbWVvdXQiOiJlcnJvciIrKGE/IiAoc3RhdHVzICIrYS5jb2RlKyIpIjoiIikpKyIgb2NjdXJyZWQgd2hpbGUgbG9hZGluZyAiK2UudHlwZTtlLnR5cGU9PT1ydD9zKz0iOiAiK2UubGV2ZWwrIiBpZDogIitlLmlkOmUudHlwZSE9PWl0JiZlLnR5cGUhPT1hdHx8KHMrPSIgaWQ6ICIrZS5pZCsnIGdyb3VwLWlkOiAiJytlLmdyb3VwSWQrJyInKTt2YXIgbz1uZXcgRXJyb3Iocyk7RC53YXJuKCJbcGxheWxpc3QtbG9hZGVyXTogIitzKTt2YXIgbD1TLlVOS05PV04sdT0hMSxkPXRoaXMuZ2V0SW50ZXJuYWxMb2FkZXIoZSk7c3dpdGNoKGUudHlwZSl7Y2FzZSB0dDpsPXI/Uy5NQU5JRkVTVF9MT0FEX1RJTUVPVVQ6Uy5NQU5JRkVTVF9MT0FEX0VSUk9SLHU9ITA7YnJlYWs7Y2FzZSBydDpsPXI/Uy5MRVZFTF9MT0FEX1RJTUVPVVQ6Uy5MRVZFTF9MT0FEX0VSUk9SLHU9ITE7YnJlYWs7Y2FzZSBpdDpsPXI/Uy5BVURJT19UUkFDS19MT0FEX1RJTUVPVVQ6Uy5BVURJT19UUkFDS19MT0FEX0VSUk9SLHU9ITE7YnJlYWs7Y2FzZSBhdDpsPXI/Uy5TVUJUSVRMRV9UUkFDS19MT0FEX1RJTUVPVVQ6Uy5TVUJUSVRMRV9MT0FEX0VSUk9SLHU9ITF9ZCYmdGhpcy5yZXNldEludGVybmFsTG9hZGVyKGUudHlwZSk7dmFyIGg9e3R5cGU6VC5ORVRXT1JLX0VSUk9SLGRldGFpbHM6bCxmYXRhbDp1LHVybDplLnVybCxsb2FkZXI6ZCxjb250ZXh0OmUsZXJyb3I6byxuZXR3b3JrRGV0YWlsczp0LHN0YXRzOm59O2lmKGEpe3ZhciBmPShudWxsPT10P3ZvaWQgMDp0LnVybCl8fGUudXJsO2gucmVzcG9uc2U9aSh7dXJsOmYsZGF0YTp2b2lkIDB9LGEpfXRoaXMuaGxzLnRyaWdnZXIoRS5FUlJPUixoKX0sdC5oYW5kbGVQbGF5bGlzdExvYWRlZD1mdW5jdGlvbihlLHQscixpLGEsbil7dmFyIHM9dGhpcy5obHMsbz1pLnR5cGUsbD1pLmxldmVsLHU9aS5pZCxkPWkuZ3JvdXBJZCxoPWkuZGVsaXZlcnlEaXJlY3RpdmVzLGY9dXQodCxpKSxjPWx0KGkpLHY9Im51bWJlciI9PXR5cGVvZiBpLmxldmVsJiZjPT09bnQ/bDp2b2lkIDA7aWYoZS5mcmFnbWVudHMubGVuZ3RoKXtlLnRhcmdldGR1cmF0aW9ufHwoZS5wbGF5bGlzdFBhcnNpbmdFcnJvcj1uZXcgRXJyb3IoIk1pc3NpbmcgVGFyZ2V0IER1cmF0aW9uIikpO3ZhciBnPWUucGxheWxpc3RQYXJzaW5nRXJyb3I7aWYoZylzLnRyaWdnZXIoRS5FUlJPUix7dHlwZTpULk5FVFdPUktfRVJST1IsZGV0YWlsczpTLkxFVkVMX1BBUlNJTkdfRVJST1IsZmF0YWw6ITEsdXJsOmYsZXJyb3I6ZyxyZWFzb246Zy5tZXNzYWdlLHJlc3BvbnNlOnQsY29udGV4dDppLGxldmVsOnYscGFyZW50OmMsbmV0d29ya0RldGFpbHM6YSxzdGF0czpyfSk7ZWxzZSBzd2l0Y2goZS5saXZlJiZuJiYobi5nZXRDYWNoZUFnZSYmKGUuYWdlSGVhZGVyPW4uZ2V0Q2FjaGVBZ2UoKXx8MCksbi5nZXRDYWNoZUFnZSYmIWlzTmFOKGUuYWdlSGVhZGVyKXx8KGUuYWdlSGVhZGVyPTApKSxvKXtjYXNlIHR0OmNhc2UgcnQ6cy50cmlnZ2VyKEUuTEVWRUxfTE9BREVELHtkZXRhaWxzOmUsbGV2ZWw6dnx8MCxpZDp1fHwwLHN0YXRzOnIsbmV0d29ya0RldGFpbHM6YSxkZWxpdmVyeURpcmVjdGl2ZXM6aH0pO2JyZWFrO2Nhc2UgaXQ6cy50cmlnZ2VyKEUuQVVESU9fVFJBQ0tfTE9BREVELHtkZXRhaWxzOmUsaWQ6dXx8MCxncm91cElkOmR8fCIiLHN0YXRzOnIsbmV0d29ya0RldGFpbHM6YSxkZWxpdmVyeURpcmVjdGl2ZXM6aH0pO2JyZWFrO2Nhc2UgYXQ6cy50cmlnZ2VyKEUuU1VCVElUTEVfVFJBQ0tfTE9BREVELHtkZXRhaWxzOmUsaWQ6dXx8MCxncm91cElkOmR8fCIiLHN0YXRzOnIsbmV0d29ya0RldGFpbHM6YSxkZWxpdmVyeURpcmVjdGl2ZXM6aH0pfX1lbHNle3ZhciBtPW5ldyBFcnJvcigiTm8gU2VnbWVudHMgZm91bmQgaW4gUGxheWxpc3QiKTtzLnRyaWdnZXIoRS5FUlJPUix7dHlwZTpULk5FVFdPUktfRVJST1IsZGV0YWlsczpTLkxFVkVMX0VNUFRZX0VSUk9SLGZhdGFsOiExLHVybDpmLGVycm9yOm0scmVhc29uOm0ubWVzc2FnZSxyZXNwb25zZTp0LGNvbnRleHQ6aSxsZXZlbDp2LHBhcmVudDpjLG5ldHdvcmtEZXRhaWxzOmEsc3RhdHM6cn0pfX0sZX0oKTtmdW5jdGlvbiBodChlLHQpe3ZhciByO3RyeXtyPW5ldyBFdmVudCgiYWRkdHJhY2siKX1jYXRjaChlKXsocj1kb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKSkuaW5pdEV2ZW50KCJhZGR0cmFjayIsITEsITEpfXIudHJhY2s9ZSx0LmRpc3BhdGNoRXZlbnQocil9ZnVuY3Rpb24gZnQoZSx0LHIsaSl7dmFyIGE9ZS5tb2RlO2lmKCJkaXNhYmxlZCI9PT1hJiYoZS5tb2RlPSJoaWRkZW4iKSxlLmN1ZXMmJmUuY3Vlcy5sZW5ndGg+MClmb3IodmFyIG49ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPVtdLGE9ZnVuY3Rpb24oZSx0KXtpZih0PGVbMF0uc3RhcnRUaW1lKXJldHVybiAwO3ZhciByPWUubGVuZ3RoLTE7aWYodD5lW3JdLmVuZFRpbWUpcmV0dXJuLTE7Zm9yKHZhciBpPTAsYT1yO2k8PWE7KXt2YXIgbj1NYXRoLmZsb29yKChhK2kpLzIpO2lmKHQ8ZVtuXS5zdGFydFRpbWUpYT1uLTE7ZWxzZXtpZighKHQ+ZVtuXS5zdGFydFRpbWUmJmk8cikpcmV0dXJuIG47aT1uKzF9fXJldHVybiBlW2ldLnN0YXJ0VGltZS10PHQtZVthXS5zdGFydFRpbWU/aTphfShlLHQpO2lmKGE+LTEpZm9yKHZhciBuPWEscz1lLmxlbmd0aDtuPHM7bisrKXt2YXIgbz1lW25dO2lmKG8uc3RhcnRUaW1lPj10JiZvLmVuZFRpbWU8PXIpaS5wdXNoKG8pO2Vsc2UgaWYoby5zdGFydFRpbWU+cilyZXR1cm4gaX1yZXR1cm4gaX0oZS5jdWVzLHQscikscz0wO3M8bi5sZW5ndGg7cysrKWkmJiFpKG5bc10pfHxlLnJlbW92ZUN1ZShuW3NdKTsiZGlzYWJsZWQiPT09YSYmKGUubW9kZT1hKX12YXIgY3Q9Im9yZy5pZDMiLHZ0PSJjb20uYXBwbGUucXVpY2t0aW1lLkhMUyIsZ3Q9Imh0dHBzOi8vYW9tZWRpYS5vcmcvZW1zZy9JRDMiO2Z1bmN0aW9uIG10KCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmKXJldHVybiBzZWxmLlZUVEN1ZXx8c2VsZi5UZXh0VHJhY2tDdWV9ZnVuY3Rpb24gcHQoZSx0LHIsYSxuKXt2YXIgcz1uZXcgZSh0LHIsIiIpO3RyeXtzLnZhbHVlPWEsbiYmKHMudHlwZT1uKX1jYXRjaChvKXtzPW5ldyBlKHQscixKU09OLnN0cmluZ2lmeShuP2koe3R5cGU6bn0sYSk6YSkpfXJldHVybiBzfXZhciB5dD1mdW5jdGlvbigpe3ZhciBlPW10KCk7dHJ5e2UmJm5ldyBlKDAsTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLCIiKX1jYXRjaChlKXtyZXR1cm4gTnVtYmVyLk1BWF9WQUxVRX1yZXR1cm4gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSgpO2Z1bmN0aW9uIEV0KGUsdCl7cmV0dXJuIGUuZ2V0VGltZSgpLzFlMy10fXZhciBUdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5obHM9dm9pZCAwLHRoaXMuaWQzVHJhY2s9bnVsbCx0aGlzLm1lZGlhPW51bGwsdGhpcy5kYXRlUmFuZ2VDdWVzQXBwZW5kZWQ9e30sdGhpcy5obHM9ZSx0aGlzLl9yZWdpc3Rlckxpc3RlbmVycygpfXZhciB0PWUucHJvdG90eXBlO3JldHVybiB0LmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLl91bnJlZ2lzdGVyTGlzdGVuZXJzKCksdGhpcy5pZDNUcmFjaz1udWxsLHRoaXMubWVkaWE9bnVsbCx0aGlzLmRhdGVSYW5nZUN1ZXNBcHBlbmRlZD17fSx0aGlzLmhscz1udWxsfSx0Ll9yZWdpc3Rlckxpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaGxzO2Uub24oRS5NRURJQV9BVFRBQ0hFRCx0aGlzLm9uTWVkaWFBdHRhY2hlZCx0aGlzKSxlLm9uKEUuTUVESUFfREVUQUNISU5HLHRoaXMub25NZWRpYURldGFjaGluZyx0aGlzKSxlLm9uKEUuTUFOSUZFU1RfTE9BRElORyx0aGlzLm9uTWFuaWZlc3RMb2FkaW5nLHRoaXMpLGUub24oRS5GUkFHX1BBUlNJTkdfTUVUQURBVEEsdGhpcy5vbkZyYWdQYXJzaW5nTWV0YWRhdGEsdGhpcyksZS5vbihFLkJVRkZFUl9GTFVTSElORyx0aGlzLm9uQnVmZmVyRmx1c2hpbmcsdGhpcyksZS5vbihFLkxFVkVMX1VQREFURUQsdGhpcy5vbkxldmVsVXBkYXRlZCx0aGlzKX0sdC5fdW5yZWdpc3Rlckxpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaGxzO2Uub2ZmKEUuTUVESUFfQVRUQUNIRUQsdGhpcy5vbk1lZGlhQXR0YWNoZWQsdGhpcyksZS5vZmYoRS5NRURJQV9ERVRBQ0hJTkcsdGhpcy5vbk1lZGlhRGV0YWNoaW5nLHRoaXMpLGUub2ZmKEUuTUFOSUZFU1RfTE9BRElORyx0aGlzLm9uTWFuaWZlc3RMb2FkaW5nLHRoaXMpLGUub2ZmKEUuRlJBR19QQVJTSU5HX01FVEFEQVRBLHRoaXMub25GcmFnUGFyc2luZ01ldGFkYXRhLHRoaXMpLGUub2ZmKEUuQlVGRkVSX0ZMVVNISU5HLHRoaXMub25CdWZmZXJGbHVzaGluZyx0aGlzKSxlLm9mZihFLkxFVkVMX1VQREFURUQsdGhpcy5vbkxldmVsVXBkYXRlZCx0aGlzKX0sdC5vbk1lZGlhQXR0YWNoZWQ9ZnVuY3Rpb24oZSx0KXt0aGlzLm1lZGlhPXQubWVkaWF9LHQub25NZWRpYURldGFjaGluZz1mdW5jdGlvbigpe3RoaXMuaWQzVHJhY2smJihmdW5jdGlvbihlKXt2YXIgdD1lLm1vZGU7aWYoImRpc2FibGVkIj09PXQmJihlLm1vZGU9ImhpZGRlbiIpLGUuY3Vlcylmb3IodmFyIHI9ZS5jdWVzLmxlbmd0aDtyLS07KWUucmVtb3ZlQ3VlKGUuY3Vlc1tyXSk7ImRpc2FibGVkIj09PXQmJihlLm1vZGU9dCl9KHRoaXMuaWQzVHJhY2spLHRoaXMuaWQzVHJhY2s9bnVsbCx0aGlzLm1lZGlhPW51bGwsdGhpcy5kYXRlUmFuZ2VDdWVzQXBwZW5kZWQ9e30pfSx0Lm9uTWFuaWZlc3RMb2FkaW5nPWZ1bmN0aW9uKCl7dGhpcy5kYXRlUmFuZ2VDdWVzQXBwZW5kZWQ9e319LHQuY3JlYXRlVHJhY2s9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRJRDNUcmFjayhlLnRleHRUcmFja3MpO3JldHVybiB0Lm1vZGU9ImhpZGRlbiIsdH0sdC5nZXRJRDNUcmFjaz1mdW5jdGlvbihlKXtpZih0aGlzLm1lZGlhKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyl7dmFyIHI9ZVt0XTtpZigibWV0YWRhdGEiPT09ci5raW5kJiYiaWQzIj09PXIubGFiZWwpcmV0dXJuIGh0KHIsdGhpcy5tZWRpYSkscn1yZXR1cm4gdGhpcy5tZWRpYS5hZGRUZXh0VHJhY2soIm1ldGFkYXRhIiwiaWQzIil9fSx0Lm9uRnJhZ1BhcnNpbmdNZXRhZGF0YT1mdW5jdGlvbihlLHQpe2lmKHRoaXMubWVkaWEpe3ZhciByPXRoaXMuaGxzLmNvbmZpZyxpPXIuZW5hYmxlRW1zZ01ldGFkYXRhQ3VlcyxhPXIuZW5hYmxlSUQzTWV0YWRhdGFDdWVzO2lmKGl8fGEpe3ZhciBuPXQuc2FtcGxlczt0aGlzLmlkM1RyYWNrfHwodGhpcy5pZDNUcmFjaz10aGlzLmNyZWF0ZVRyYWNrKHRoaXMubWVkaWEpKTt2YXIgcz1tdCgpO2lmKHMpZm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspe3ZhciBsPW5bb10udHlwZTtpZigobCE9PWd0fHxpKSYmYSl7dmFyIHU9JChuW29dLmRhdGEpO2lmKHUpe3ZhciBkPW5bb10ucHRzLGg9ZCtuW29dLmR1cmF0aW9uO2g+eXQmJihoPXl0KSxoLWQ8PTAmJihoPWQrLjI1KTtmb3IodmFyIGY9MDtmPHUubGVuZ3RoO2YrKyl7dmFyIGM9dVtmXTtpZighUShjKSl7dGhpcy51cGRhdGVJZDNDdWVFbmRzKGQsbCk7dmFyIHY9cHQocyxkLGgsYyxsKTt2JiZ0aGlzLmlkM1RyYWNrLmFkZEN1ZSh2KX19fX19fX19LHQudXBkYXRlSWQzQ3VlRW5kcz1mdW5jdGlvbihlLHQpe3ZhciByLGk9bnVsbD09KHI9dGhpcy5pZDNUcmFjayk/dm9pZCAwOnIuY3VlcztpZihpKWZvcih2YXIgYT1pLmxlbmd0aDthLS07KXt2YXIgbj1pW2FdO24udHlwZT09PXQmJm4uc3RhcnRUaW1lPGUmJm4uZW5kVGltZT09PXl0JiYobi5lbmRUaW1lPWUpfX0sdC5vbkJ1ZmZlckZsdXNoaW5nPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5zdGFydE9mZnNldCxpPXQuZW5kT2Zmc2V0LGE9dC50eXBlLG49dGhpcy5pZDNUcmFjayxzPXRoaXMuaGxzO2lmKHMpe3ZhciBvPXMuY29uZmlnLGw9by5lbmFibGVFbXNnTWV0YWRhdGFDdWVzLHU9by5lbmFibGVJRDNNZXRhZGF0YUN1ZXM7biYmKGx8fHUpJiZmdChuLHIsaSwiYXVkaW8iPT09YT9mdW5jdGlvbihlKXtyZXR1cm4gZS50eXBlPT09Y3QmJnV9OiJ2aWRlbyI9PT1hP2Z1bmN0aW9uKGUpe3JldHVybiBlLnR5cGU9PT1ndCYmbH06ZnVuY3Rpb24oZSl7cmV0dXJuIGUudHlwZT09PWN0JiZ1fHxlLnR5cGU9PT1ndCYmbH0pfX0sdC5vbkxldmVsVXBkYXRlZD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsaT10LmRldGFpbHM7aWYodGhpcy5tZWRpYSYmaS5oYXNQcm9ncmFtRGF0ZVRpbWUmJnRoaXMuaGxzLmNvbmZpZy5lbmFibGVEYXRlUmFuZ2VNZXRhZGF0YUN1ZXMpe3ZhciBhPXRoaXMuZGF0ZVJhbmdlQ3Vlc0FwcGVuZGVkLG49dGhpcy5pZDNUcmFjayxzPWkuZGF0ZVJhbmdlcyxvPU9iamVjdC5rZXlzKHMpO2lmKG4pZm9yKHZhciBsPU9iamVjdC5rZXlzKGEpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIW8uaW5jbHVkZXMoZSl9KSksdT1mdW5jdGlvbigpe3ZhciBlPWxbZF07T2JqZWN0LmtleXMoYVtlXS5jdWVzKS5mb3JFYWNoKChmdW5jdGlvbih0KXtuLnJlbW92ZUN1ZShhW2VdLmN1ZXNbdF0pfSkpLGRlbGV0ZSBhW2VdfSxkPWwubGVuZ3RoO2QtLTspdSgpO3ZhciBoPWkuZnJhZ21lbnRzW2kuZnJhZ21lbnRzLmxlbmd0aC0xXTtpZigwIT09by5sZW5ndGgmJm0obnVsbD09aD92b2lkIDA6aC5wcm9ncmFtRGF0ZVRpbWUpKXt0aGlzLmlkM1RyYWNrfHwodGhpcy5pZDNUcmFjaz10aGlzLmNyZWF0ZVRyYWNrKHRoaXMubWVkaWEpKTtmb3IodmFyIGY9aC5wcm9ncmFtRGF0ZVRpbWUvMWUzLWguc3RhcnQsYz1tdCgpLHY9ZnVuY3Rpb24oKXt2YXIgZT1vW2ddLHQ9c1tlXSxpPUV0KHQuc3RhcnREYXRlLGYpLG49YVtlXSxsPShudWxsPT1uP3ZvaWQgMDpuLmN1ZXMpfHx7fSx1PShudWxsPT1uP3ZvaWQgMDpuLmR1cmF0aW9uS25vd24pfHwhMSxkPXl0LGg9dC5lbmREYXRlO2lmKGgpZD1FdChoLGYpLHU9ITA7ZWxzZSBpZih0LmVuZE9uTmV4dCYmIXUpe3ZhciB2PW8ucmVkdWNlKChmdW5jdGlvbihlLHIpe2lmKHIhPT10LmlkKXt2YXIgaT1zW3JdO2lmKGkuY2xhc3M9PT10LmNsYXNzJiZpLnN0YXJ0RGF0ZT50LnN0YXJ0RGF0ZSYmKCFlfHx0LnN0YXJ0RGF0ZTxlLnN0YXJ0RGF0ZSkpcmV0dXJuIGl9cmV0dXJuIGV9KSxudWxsKTt2JiYoZD1FdCh2LnN0YXJ0RGF0ZSxmKSx1PSEwKX1mb3IodmFyIG0scCx5PU9iamVjdC5rZXlzKHQuYXR0ciksRT0wO0U8eS5sZW5ndGg7RSsrKXt2YXIgVD15W0VdO2lmKCJJRCIhPT0ocD1UKSYmIkNMQVNTIiE9PXAmJiJTVEFSVC1EQVRFIiE9PXAmJiJEVVJBVElPTiIhPT1wJiYiRU5ELURBVEUiIT09cCYmIkVORC1PTi1ORVhUIiE9PXApe3ZhciBTPWxbVF07aWYoUyl1JiYhbi5kdXJhdGlvbktub3duJiYoUy5lbmRUaW1lPWQpO2Vsc2UgaWYoYyl7dmFyIEw9dC5hdHRyW1RdO0MoVCkmJihtPUwsTD1VaW50OEFycmF5LmZyb20obS5yZXBsYWNlKC9eMHgvLCIiKS5yZXBsYWNlKC8oW1xkYS1mQS1GXXsyfSkgPy9nLCIweCQxICIpLnJlcGxhY2UoLyArJC8sIiIpLnNwbGl0KCIgIikpLmJ1ZmZlcik7dmFyIFI9cHQoYyxpLGQse2tleTpULGRhdGE6TH0sdnQpO1ImJihSLmlkPWUsci5pZDNUcmFjay5hZGRDdWUoUiksbFtUXT1SKX19fWFbZV09e2N1ZXM6bCxkYXRlUmFuZ2U6dCxkdXJhdGlvbktub3duOnV9fSxnPTA7ZzxvLmxlbmd0aDtnKyspdigpfX19LGV9KCksU3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3ZhciB0PXRoaXM7dGhpcy5obHM9dm9pZCAwLHRoaXMuY29uZmlnPXZvaWQgMCx0aGlzLm1lZGlhPW51bGwsdGhpcy5sZXZlbERldGFpbHM9bnVsbCx0aGlzLmN1cnJlbnRUaW1lPTAsdGhpcy5zdGFsbENvdW50PTAsdGhpcy5fbGF0ZW5jeT1udWxsLHRoaXMudGltZXVwZGF0ZUhhbmRsZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdC50aW1ldXBkYXRlKCl9LHRoaXMuaGxzPWUsdGhpcy5jb25maWc9ZS5jb25maWcsdGhpcy5yZWdpc3Rlckxpc3RlbmVycygpfXZhciB0PWUucHJvdG90eXBlO3JldHVybiB0LmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnVucmVnaXN0ZXJMaXN0ZW5lcnMoKSx0aGlzLm9uTWVkaWFEZXRhY2hpbmcoKSx0aGlzLmxldmVsRGV0YWlscz1udWxsLHRoaXMuaGxzPXRoaXMudGltZXVwZGF0ZUhhbmRsZXI9bnVsbH0sdC5yZWdpc3Rlckxpc3RlbmVycz1mdW5jdGlvbigpe3RoaXMuaGxzLm9uKEUuTUVESUFfQVRUQUNIRUQsdGhpcy5vbk1lZGlhQXR0YWNoZWQsdGhpcyksdGhpcy5obHMub24oRS5NRURJQV9ERVRBQ0hJTkcsdGhpcy5vbk1lZGlhRGV0YWNoaW5nLHRoaXMpLHRoaXMuaGxzLm9uKEUuTUFOSUZFU1RfTE9BRElORyx0aGlzLm9uTWFuaWZlc3RMb2FkaW5nLHRoaXMpLHRoaXMuaGxzLm9uKEUuTEVWRUxfVVBEQVRFRCx0aGlzLm9uTGV2ZWxVcGRhdGVkLHRoaXMpLHRoaXMuaGxzLm9uKEUuRVJST1IsdGhpcy5vbkVycm9yLHRoaXMpfSx0LnVucmVnaXN0ZXJMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt0aGlzLmhscy5vZmYoRS5NRURJQV9BVFRBQ0hFRCx0aGlzLm9uTWVkaWFBdHRhY2hlZCx0aGlzKSx0aGlzLmhscy5vZmYoRS5NRURJQV9ERVRBQ0hJTkcsdGhpcy5vbk1lZGlhRGV0YWNoaW5nLHRoaXMpLHRoaXMuaGxzLm9mZihFLk1BTklGRVNUX0xPQURJTkcsdGhpcy5vbk1hbmlmZXN0TG9hZGluZyx0aGlzKSx0aGlzLmhscy5vZmYoRS5MRVZFTF9VUERBVEVELHRoaXMub25MZXZlbFVwZGF0ZWQsdGhpcyksdGhpcy5obHMub2ZmKEUuRVJST1IsdGhpcy5vbkVycm9yLHRoaXMpfSx0Lm9uTWVkaWFBdHRhY2hlZD1mdW5jdGlvbihlLHQpe3RoaXMubWVkaWE9dC5tZWRpYSx0aGlzLm1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoInRpbWV1cGRhdGUiLHRoaXMudGltZXVwZGF0ZUhhbmRsZXIpfSx0Lm9uTWVkaWFEZXRhY2hpbmc9ZnVuY3Rpb24oKXt0aGlzLm1lZGlhJiYodGhpcy5tZWRpYS5yZW1vdmVFdmVudExpc3RlbmVyKCJ0aW1ldXBkYXRlIix0aGlzLnRpbWV1cGRhdGVIYW5kbGVyKSx0aGlzLm1lZGlhPW51bGwpfSx0Lm9uTWFuaWZlc3RMb2FkaW5nPWZ1bmN0aW9uKCl7dGhpcy5sZXZlbERldGFpbHM9bnVsbCx0aGlzLl9sYXRlbmN5PW51bGwsdGhpcy5zdGFsbENvdW50PTB9LHQub25MZXZlbFVwZGF0ZWQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10LmRldGFpbHM7dGhpcy5sZXZlbERldGFpbHM9cixyLmFkdmFuY2VkJiZ0aGlzLnRpbWV1cGRhdGUoKSwhci5saXZlJiZ0aGlzLm1lZGlhJiZ0aGlzLm1lZGlhLnJlbW92ZUV2ZW50TGlzdGVuZXIoInRpbWV1cGRhdGUiLHRoaXMudGltZXVwZGF0ZUhhbmRsZXIpfSx0Lm9uRXJyb3I9ZnVuY3Rpb24oZSx0KXt2YXIgcjt0LmRldGFpbHM9PT1TLkJVRkZFUl9TVEFMTEVEX0VSUk9SJiYodGhpcy5zdGFsbENvdW50KyssbnVsbCE9KHI9dGhpcy5sZXZlbERldGFpbHMpJiZyLmxpdmUmJkQud2FybigiW3BsYXliYWNrLXJhdGUtY29udHJvbGxlcl06IFN0YWxsIGRldGVjdGVkLCBhZGp1c3RpbmcgdGFyZ2V0IGxhdGVuY3kiKSl9LHQudGltZXVwZGF0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMubWVkaWEsdD10aGlzLmxldmVsRGV0YWlscztpZihlJiZ0KXt0aGlzLmN1cnJlbnRUaW1lPWUuY3VycmVudFRpbWU7dmFyIHI9dGhpcy5jb21wdXRlTGF0ZW5jeSgpO2lmKG51bGwhPT1yKXt0aGlzLl9sYXRlbmN5PXI7dmFyIGk9dGhpcy5jb25maWcsYT1pLmxvd0xhdGVuY3lNb2RlLG49aS5tYXhMaXZlU3luY1BsYXliYWNrUmF0ZTtpZihhJiYxIT09biYmdC5saXZlKXt2YXIgcz10aGlzLnRhcmdldExhdGVuY3k7aWYobnVsbCE9PXMpe3ZhciBvPXItcztpZihvPE1hdGgubWluKHRoaXMubWF4TGF0ZW5jeSxzK3QudGFyZ2V0ZHVyYXRpb24pJiZvPi4wNSYmdGhpcy5mb3J3YXJkQnVmZmVyTGVuZ3RoPjEpe3ZhciBsPU1hdGgubWluKDIsTWF0aC5tYXgoMSxuKSksdT1NYXRoLnJvdW5kKDIvKDErTWF0aC5leHAoLS43NSpvLXRoaXMuZWRnZVN0YWxsZWQpKSoyMCkvMjA7ZS5wbGF5YmFja1JhdGU9TWF0aC5taW4obCxNYXRoLm1heCgxLHUpKX1lbHNlIDEhPT1lLnBsYXliYWNrUmF0ZSYmMCE9PWUucGxheWJhY2tSYXRlJiYoZS5wbGF5YmFja1JhdGU9MSl9fX19fSx0LmVzdGltYXRlTGl2ZUVkZ2U9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxldmVsRGV0YWlscztyZXR1cm4gbnVsbD09PWU/bnVsbDplLmVkZ2UrZS5hZ2V9LHQuY29tcHV0ZUxhdGVuY3k9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVzdGltYXRlTGl2ZUVkZ2UoKTtyZXR1cm4gbnVsbD09PWU/bnVsbDplLXRoaXMuY3VycmVudFRpbWV9LHMoZSxbe2tleToibGF0ZW5jeSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhdGVuY3l8fDB9fSx7a2V5OiJtYXhMYXRlbmN5IixnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNvbmZpZyx0PXRoaXMubGV2ZWxEZXRhaWxzO3JldHVybiB2b2lkIDAhPT1lLmxpdmVNYXhMYXRlbmN5RHVyYXRpb24/ZS5saXZlTWF4TGF0ZW5jeUR1cmF0aW9uOnQ/ZS5saXZlTWF4TGF0ZW5jeUR1cmF0aW9uQ291bnQqdC50YXJnZXRkdXJhdGlvbjowfX0se2tleToidGFyZ2V0TGF0ZW5jeSIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZXZlbERldGFpbHM7aWYobnVsbD09PWUpcmV0dXJuIG51bGw7dmFyIHQ9ZS5ob2xkQmFjayxyPWUucGFydEhvbGRCYWNrLGk9ZS50YXJnZXRkdXJhdGlvbixhPXRoaXMuY29uZmlnLG49YS5saXZlU3luY0R1cmF0aW9uLHM9YS5saXZlU3luY0R1cmF0aW9uQ291bnQsbz1hLmxvd0xhdGVuY3lNb2RlLGw9dGhpcy5obHMudXNlckNvbmZpZyx1PW8mJnJ8fHQ7KGwubGl2ZVN5bmNEdXJhdGlvbnx8bC5saXZlU3luY0R1cmF0aW9uQ291bnR8fDA9PT11KSYmKHU9dm9pZCAwIT09bj9uOnMqaSk7dmFyIGQ9aTtyZXR1cm4gdStNYXRoLm1pbigxKnRoaXMuc3RhbGxDb3VudCxkKX19LHtrZXk6ImxpdmVTeW5jUG9zaXRpb24iLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZXN0aW1hdGVMaXZlRWRnZSgpLHQ9dGhpcy50YXJnZXRMYXRlbmN5LHI9dGhpcy5sZXZlbERldGFpbHM7aWYobnVsbD09PWV8fG51bGw9PT10fHxudWxsPT09cilyZXR1cm4gbnVsbDt2YXIgaT1yLmVkZ2UsYT1lLXQtdGhpcy5lZGdlU3RhbGxlZCxuPWktci50b3RhbGR1cmF0aW9uLHM9aS0odGhpcy5jb25maWcubG93TGF0ZW5jeU1vZGUmJnIucGFydFRhcmdldHx8ci50YXJnZXRkdXJhdGlvbik7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KG4sYSkscyl9fSx7a2V5OiJkcmlmdCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZXZlbERldGFpbHM7cmV0dXJuIG51bGw9PT1lPzE6ZS5kcmlmdH19LHtrZXk6ImVkZ2VTdGFsbGVkIixnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxldmVsRGV0YWlscztpZihudWxsPT09ZSlyZXR1cm4gMDt2YXIgdD0zKih0aGlzLmNvbmZpZy5sb3dMYXRlbmN5TW9kZSYmZS5wYXJ0VGFyZ2V0fHxlLnRhcmdldGR1cmF0aW9uKTtyZXR1cm4gTWF0aC5tYXgoZS5hZ2UtdCwwKX19LHtrZXk6ImZvcndhcmRCdWZmZXJMZW5ndGgiLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMubWVkaWEsdD10aGlzLmxldmVsRGV0YWlscztpZighZXx8IXQpcmV0dXJuIDA7dmFyIHI9ZS5idWZmZXJlZC5sZW5ndGg7cmV0dXJuKHI/ZS5idWZmZXJlZC5lbmQoci0xKTp0LmVkZ2UpLXRoaXMuY3VycmVudFRpbWV9fV0pLGV9KCksTHQ9WyJOT05FIiwiVFlQRS0wIiwiVFlQRS0xIixudWxsXSxSdD1bIlNEUiIsIlBRIiwiSExHIl0sQXQ9IiIsYnQ9IllFUyIsa3Q9InYyIjtmdW5jdGlvbiBEdChlKXt2YXIgdD1lLmNhblNraXBVbnRpbCxyPWUuY2FuU2tpcERhdGVSYW5nZXMsaT1lLmFnZTtyZXR1cm4gdCYmaTx0LzI/cj9rdDpidDpBdH12YXIgX3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt0aGlzLm1zbj12b2lkIDAsdGhpcy5wYXJ0PXZvaWQgMCx0aGlzLnNraXA9dm9pZCAwLHRoaXMubXNuPWUsdGhpcy5wYXJ0PXQsdGhpcy5za2lwPXJ9cmV0dXJuIGUucHJvdG90eXBlLmFkZERpcmVjdGl2ZXM9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHNlbGYuVVJMKGUpO3JldHVybiB2b2lkIDAhPT10aGlzLm1zbiYmdC5zZWFyY2hQYXJhbXMuc2V0KCJfSExTX21zbiIsdGhpcy5tc24udG9TdHJpbmcoKSksdm9pZCAwIT09dGhpcy5wYXJ0JiZ0LnNlYXJjaFBhcmFtcy5zZXQoIl9ITFNfcGFydCIsdGhpcy5wYXJ0LnRvU3RyaW5nKCkpLHRoaXMuc2tpcCYmdC5zZWFyY2hQYXJhbXMuc2V0KCJfSExTX3NraXAiLHRoaXMuc2tpcCksdC5ocmVmfSxlfSgpLHh0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9hdHRycz12b2lkIDAsdGhpcy5hdWRpb0NvZGVjPXZvaWQgMCx0aGlzLmJpdHJhdGU9dm9pZCAwLHRoaXMuY29kZWNTZXQ9dm9pZCAwLHRoaXMudXJsPXZvaWQgMCx0aGlzLmZyYW1lUmF0ZT12b2lkIDAsdGhpcy5oZWlnaHQ9dm9pZCAwLHRoaXMuaWQ9dm9pZCAwLHRoaXMubmFtZT12b2lkIDAsdGhpcy52aWRlb0NvZGVjPXZvaWQgMCx0aGlzLndpZHRoPXZvaWQgMCx0aGlzLmRldGFpbHM9dm9pZCAwLHRoaXMuZnJhZ21lbnRFcnJvcj0wLHRoaXMubG9hZEVycm9yPTAsdGhpcy5sb2FkZWQ9dm9pZCAwLHRoaXMucmVhbEJpdHJhdGU9MCx0aGlzLnN1cHBvcnRlZFByb21pc2U9dm9pZCAwLHRoaXMuc3VwcG9ydGVkUmVzdWx0PXZvaWQgMCx0aGlzLl9hdmdCaXRyYXRlPTAsdGhpcy5fYXVkaW9Hcm91cHM9dm9pZCAwLHRoaXMuX3N1YnRpdGxlR3JvdXBzPXZvaWQgMCx0aGlzLl91cmxJZD0wLHRoaXMudXJsPVtlLnVybF0sdGhpcy5fYXR0cnM9W2UuYXR0cnNdLHRoaXMuYml0cmF0ZT1lLmJpdHJhdGUsZS5kZXRhaWxzJiYodGhpcy5kZXRhaWxzPWUuZGV0YWlscyksdGhpcy5pZD1lLmlkfHwwLHRoaXMubmFtZT1lLm5hbWUsdGhpcy53aWR0aD1lLndpZHRofHwwLHRoaXMuaGVpZ2h0PWUuaGVpZ2h0fHwwLHRoaXMuZnJhbWVSYXRlPWUuYXR0cnMub3B0aW9uYWxGbG9hdCgiRlJBTUUtUkFURSIsMCksdGhpcy5fYXZnQml0cmF0ZT1lLmF0dHJzLmRlY2ltYWxJbnRlZ2VyKCJBVkVSQUdFLUJBTkRXSURUSCIpLHRoaXMuYXVkaW9Db2RlYz1lLmF1ZGlvQ29kZWMsdGhpcy52aWRlb0NvZGVjPWUudmlkZW9Db2RlYyx0aGlzLmNvZGVjU2V0PVtlLnZpZGVvQ29kZWMsZS5hdWRpb0NvZGVjXS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiEhZX0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN1YnN0cmluZygwLDQpfSkpLmpvaW4oIiwiKSx0aGlzLmFkZEdyb3VwSWQoImF1ZGlvIixlLmF0dHJzLkFVRElPKSx0aGlzLmFkZEdyb3VwSWQoInRleHQiLGUuYXR0cnMuU1VCVElUTEVTKX12YXIgdD1lLnByb3RvdHlwZTtyZXR1cm4gdC5oYXNBdWRpb0dyb3VwPWZ1bmN0aW9uKGUpe3JldHVybiB3dCh0aGlzLl9hdWRpb0dyb3VwcyxlKX0sdC5oYXNTdWJ0aXRsZUdyb3VwPWZ1bmN0aW9uKGUpe3JldHVybiB3dCh0aGlzLl9zdWJ0aXRsZUdyb3VwcyxlKX0sdC5hZGRHcm91cElkPWZ1bmN0aW9uKGUsdCl7aWYodClpZigiYXVkaW8iPT09ZSl7dmFyIHI9dGhpcy5fYXVkaW9Hcm91cHM7cnx8KHI9dGhpcy5fYXVkaW9Hcm91cHM9W10pLC0xPT09ci5pbmRleE9mKHQpJiZyLnB1c2godCl9ZWxzZSBpZigidGV4dCI9PT1lKXt2YXIgaT10aGlzLl9zdWJ0aXRsZUdyb3VwcztpfHwoaT10aGlzLl9zdWJ0aXRsZUdyb3Vwcz1bXSksLTE9PT1pLmluZGV4T2YodCkmJmkucHVzaCh0KX19LHQuYWRkRmFsbGJhY2s9ZnVuY3Rpb24oKXt9LHMoZSxbe2tleToibWF4Qml0cmF0ZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgubWF4KHRoaXMucmVhbEJpdHJhdGUsdGhpcy5iaXRyYXRlKX19LHtrZXk6ImF2ZXJhZ2VCaXRyYXRlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXZnQml0cmF0ZXx8dGhpcy5yZWFsQml0cmF0ZXx8dGhpcy5iaXRyYXRlfX0se2tleToiYXR0cnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hdHRyc1swXX19LHtrZXk6ImNvZGVjcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXR0cnMuQ09ERUNTfHwiIn19LHtrZXk6InBhdGh3YXlJZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXR0cnNbIlBBVEhXQVktSUQiXXx8Ii4ifX0se2tleToidmlkZW9SYW5nZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXR0cnNbIlZJREVPLVJBTkdFIl18fCJTRFIifX0se2tleToic2NvcmUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmF0dHJzLm9wdGlvbmFsRmxvYXQoIlNDT1JFIiwwKX19LHtrZXk6InVyaSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXJsWzBdfHwiIn19LHtrZXk6ImF1ZGlvR3JvdXBzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXVkaW9Hcm91cHN9fSx7a2V5OiJzdWJ0aXRsZUdyb3VwcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N1YnRpdGxlR3JvdXBzfX0se2tleToidXJsSWQiLGdldDpmdW5jdGlvbigpe3JldHVybiAwfSxzZXQ6ZnVuY3Rpb24oZSl7fX0se2tleToiYXVkaW9Hcm91cElkcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXVkaW9Hcm91cHM/W3RoaXMuYXVkaW9Hcm91cElkXTp2b2lkIDB9fSx7a2V5OiJ0ZXh0R3JvdXBJZHMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN1YnRpdGxlR3JvdXBzP1t0aGlzLnRleHRHcm91cElkXTp2b2lkIDB9fSx7a2V5OiJhdWRpb0dyb3VwSWQiLGdldDpmdW5jdGlvbigpe3ZhciBlO3JldHVybiBudWxsPT0oZT10aGlzLmF1ZGlvR3JvdXBzKT92b2lkIDA6ZVswXX19LHtrZXk6InRleHRHcm91cElkIixnZXQ6ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gbnVsbD09KGU9dGhpcy5zdWJ0aXRsZUdyb3Vwcyk/dm9pZCAwOmVbMF19fV0pLGV9KCk7ZnVuY3Rpb24gd3QoZSx0KXtyZXR1cm4hKCF0fHwhZSkmJi0xIT09ZS5pbmRleE9mKHQpfWZ1bmN0aW9uIEN0KGUsdCl7dmFyIHI9dC5zdGFydFBUUztpZihtKHIpKXt2YXIgaSxhPTA7dC5zbj5lLnNuPyhhPXItZS5zdGFydCxpPWUpOihhPWUuc3RhcnQtcixpPXQpLGkuZHVyYXRpb24hPT1hJiYoaS5kdXJhdGlvbj1hKX1lbHNlIHQuc24+ZS5zbj9lLmNjPT09dC5jYyYmZS5taW5FbmRQVFM/dC5zdGFydD1lLnN0YXJ0KyhlLm1pbkVuZFBUUy1lLnN0YXJ0KTp0LnN0YXJ0PWUuc3RhcnQrZS5kdXJhdGlvbjp0LnN0YXJ0PU1hdGgubWF4KGUuc3RhcnQtdC5kdXJhdGlvbiwwKX1mdW5jdGlvbiBJdChlLHQscixpLGEsbil7aS1yPD0wJiYoRC53YXJuKCJGcmFnbWVudCBzaG91bGQgaGF2ZSBhIHBvc2l0aXZlIGR1cmF0aW9uIix0KSxpPXIrdC5kdXJhdGlvbixuPWErdC5kdXJhdGlvbik7dmFyIHM9cixvPWksbD10LnN0YXJ0UFRTLHU9dC5lbmRQVFM7aWYobShsKSl7dmFyIGQ9TWF0aC5hYnMobC1yKTttKHQuZGVsdGFQVFMpP3QuZGVsdGFQVFM9TWF0aC5tYXgoZCx0LmRlbHRhUFRTKTp0LmRlbHRhUFRTPWQscz1NYXRoLm1heChyLGwpLHI9TWF0aC5taW4ocixsKSxhPU1hdGgubWluKGEsdC5zdGFydERUUyksbz1NYXRoLm1pbihpLHUpLGk9TWF0aC5tYXgoaSx1KSxuPU1hdGgubWF4KG4sdC5lbmREVFMpfXZhciBoPXItdC5zdGFydDswIT09dC5zdGFydCYmKHQuc3RhcnQ9ciksdC5kdXJhdGlvbj1pLXQuc3RhcnQsdC5zdGFydFBUUz1yLHQubWF4U3RhcnRQVFM9cyx0LnN0YXJ0RFRTPWEsdC5lbmRQVFM9aSx0Lm1pbkVuZFBUUz1vLHQuZW5kRFRTPW47dmFyIGYsYz10LnNuO2lmKCFlfHxjPGUuc3RhcnRTTnx8Yz5lLmVuZFNOKXJldHVybiAwO3ZhciB2PWMtZS5zdGFydFNOLGc9ZS5mcmFnbWVudHM7Zm9yKGdbdl09dCxmPXY7Zj4wO2YtLSlDdChnW2ZdLGdbZi0xXSk7Zm9yKGY9djtmPGcubGVuZ3RoLTE7ZisrKUN0KGdbZl0sZ1tmKzFdKTtyZXR1cm4gZS5mcmFnbWVudEhpbnQmJkN0KGdbZy5sZW5ndGgtMV0sZS5mcmFnbWVudEhpbnQpLGUuUFRTS25vd249ZS5hbGlnbmVkU2xpZGluZz0hMCxofWZ1bmN0aW9uIFB0KGUsdCl7Zm9yKHZhciByPW51bGwsaT1lLmZyYWdtZW50cyxhPWkubGVuZ3RoLTE7YT49MDthLS0pe3ZhciBuPWlbYV0uaW5pdFNlZ21lbnQ7aWYobil7cj1uO2JyZWFrfX1lLmZyYWdtZW50SGludCYmZGVsZXRlIGUuZnJhZ21lbnRIaW50LmVuZFBUUzt2YXIgcyxsLHUsZCxoLGY9MDtpZihmdW5jdGlvbihlLHQscil7Zm9yKHZhciBpPXQuc2tpcHBlZFNlZ21lbnRzLGE9TWF0aC5tYXgoZS5zdGFydFNOLHQuc3RhcnRTTiktdC5zdGFydFNOLG49KGUuZnJhZ21lbnRIaW50PzE6MCkrKGk/dC5lbmRTTjpNYXRoLm1pbihlLmVuZFNOLHQuZW5kU04pKS10LnN0YXJ0U04scz10LnN0YXJ0U04tZS5zdGFydFNOLG89dC5mcmFnbWVudEhpbnQ/dC5mcmFnbWVudHMuY29uY2F0KHQuZnJhZ21lbnRIaW50KTp0LmZyYWdtZW50cyxsPWUuZnJhZ21lbnRIaW50P2UuZnJhZ21lbnRzLmNvbmNhdChlLmZyYWdtZW50SGludCk6ZS5mcmFnbWVudHMsdT1hO3U8PW47dSsrKXt2YXIgZD1sW3MrdV0saD1vW3VdO2kmJiFoJiZ1PGkmJihoPXQuZnJhZ21lbnRzW3VdPWQpLGQmJmgmJnIoZCxoKX19KGUsdCwoZnVuY3Rpb24oZSxpKXtlLnJlbHVybCYmKGY9ZS5jYy1pLmNjKSxtKGUuc3RhcnRQVFMpJiZtKGUuZW5kUFRTKSYmKGkuc3RhcnQ9aS5zdGFydFBUUz1lLnN0YXJ0UFRTLGkuc3RhcnREVFM9ZS5zdGFydERUUyxpLm1heFN0YXJ0UFRTPWUubWF4U3RhcnRQVFMsaS5lbmRQVFM9ZS5lbmRQVFMsaS5lbmREVFM9ZS5lbmREVFMsaS5taW5FbmRQVFM9ZS5taW5FbmRQVFMsaS5kdXJhdGlvbj1lLmVuZFBUUy1lLnN0YXJ0UFRTLGkuZHVyYXRpb24mJihzPWkpLHQuUFRTS25vd249dC5hbGlnbmVkU2xpZGluZz0hMCksaS5lbGVtZW50YXJ5U3RyZWFtcz1lLmVsZW1lbnRhcnlTdHJlYW1zLGkubG9hZGVyPWUubG9hZGVyLGkuc3RhdHM9ZS5zdGF0cyxlLmluaXRTZWdtZW50JiYoaS5pbml0U2VnbWVudD1lLmluaXRTZWdtZW50LHI9ZS5pbml0U2VnbWVudCl9KSksciYmKHQuZnJhZ21lbnRIaW50P3QuZnJhZ21lbnRzLmNvbmNhdCh0LmZyYWdtZW50SGludCk6dC5mcmFnbWVudHMpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0OyFlfHxlLmluaXRTZWdtZW50JiZlLmluaXRTZWdtZW50LnJlbHVybCE9PShudWxsPT0odD1yKT92b2lkIDA6dC5yZWx1cmwpfHwoZS5pbml0U2VnbWVudD1yKX0pKSx0LnNraXBwZWRTZWdtZW50cylpZih0LmRlbHRhVXBkYXRlRmFpbGVkPXQuZnJhZ21lbnRzLnNvbWUoKGZ1bmN0aW9uKGUpe3JldHVybiFlfSkpLHQuZGVsdGFVcGRhdGVGYWlsZWQpe0Qud2FybigiW2xldmVsLWhlbHBlcl0gUHJldmlvdXMgcGxheWxpc3QgbWlzc2luZyBzZWdtZW50cyBza2lwcGVkIGluIGRlbHRhIHBsYXlsaXN0Iik7Zm9yKHZhciBjPXQuc2tpcHBlZFNlZ21lbnRzO2MtLTspdC5mcmFnbWVudHMuc2hpZnQoKTt0LnN0YXJ0U049dC5mcmFnbWVudHNbMF0uc24sdC5zdGFydENDPXQuZnJhZ21lbnRzWzBdLmNjfWVsc2UgdC5jYW5Ta2lwRGF0ZVJhbmdlcyYmKHQuZGF0ZVJhbmdlcz0obD1lLmRhdGVSYW5nZXMsdT10LmRhdGVSYW5nZXMsZD10LnJlY2VudGx5UmVtb3ZlZERhdGVyYW5nZXMsaD1vKHt9LGwpLGQmJmQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZGVsZXRlIGhbZV19KSksT2JqZWN0LmtleXModSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEkodVtlXS5hdHRyLGhbZV0pO3QuaXNWYWxpZD9oW2VdPXQ6RC53YXJuKCdJZ25vcmluZyBpbnZhbGlkIFBsYXlsaXN0IERlbHRhIFVwZGF0ZSBEQVRFUkFOR0UgdGFnOiAiJytKU09OLnN0cmluZ2lmeSh1W2VdLmF0dHIpKyciJyl9KSksaCkpO3ZhciB2PXQuZnJhZ21lbnRzO2lmKGYpe0Qud2FybigiZGlzY29udGludWl0eSBzbGlkaW5nIGZyb20gcGxheWxpc3QsIHRha2UgZHJpZnQgaW50byBhY2NvdW50Iik7Zm9yKHZhciBnPTA7Zzx2Lmxlbmd0aDtnKyspdltnXS5jYys9Zn10LnNraXBwZWRTZWdtZW50cyYmKHQuc3RhcnRDQz10LmZyYWdtZW50c1swXS5jYyksZnVuY3Rpb24oZSx0LHIpe2lmKGUmJnQpZm9yKHZhciBpPTAsYT0wLG49ZS5sZW5ndGg7YTw9bjthKyspe3ZhciBzPWVbYV0sbz10W2EraV07cyYmbyYmcy5pbmRleD09PW8uaW5kZXgmJnMuZnJhZ21lbnQuc249PT1vLmZyYWdtZW50LnNuP3IocyxvKTppLS19fShlLnBhcnRMaXN0LHQucGFydExpc3QsKGZ1bmN0aW9uKGUsdCl7dC5lbGVtZW50YXJ5U3RyZWFtcz1lLmVsZW1lbnRhcnlTdHJlYW1zLHQuc3RhdHM9ZS5zdGF0c30pKSxzP0l0KHQscyxzLnN0YXJ0UFRTLHMuZW5kUFRTLHMuc3RhcnREVFMscy5lbmREVFMpOkZ0KGUsdCksdi5sZW5ndGgmJih0LnRvdGFsZHVyYXRpb249dC5lZGdlLXZbMF0uc3RhcnQpLHQuZHJpZnRTdGFydFRpbWU9ZS5kcmlmdFN0YXJ0VGltZSx0LmRyaWZ0U3RhcnQ9ZS5kcmlmdFN0YXJ0O3ZhciBwPXQuYWR2YW5jZWREYXRlVGltZTtpZih0LmFkdmFuY2VkJiZwKXt2YXIgeT10LmVkZ2U7dC5kcmlmdFN0YXJ0fHwodC5kcmlmdFN0YXJ0VGltZT1wLHQuZHJpZnRTdGFydD15KSx0LmRyaWZ0RW5kVGltZT1wLHQuZHJpZnRFbmQ9eX1lbHNlIHQuZHJpZnRFbmRUaW1lPWUuZHJpZnRFbmRUaW1lLHQuZHJpZnRFbmQ9ZS5kcmlmdEVuZCx0LmFkdmFuY2VkRGF0ZVRpbWU9ZS5hZHZhbmNlZERhdGVUaW1lfWZ1bmN0aW9uIEZ0KGUsdCl7dmFyIHI9dC5zdGFydFNOK3Quc2tpcHBlZFNlZ21lbnRzLWUuc3RhcnRTTixpPWUuZnJhZ21lbnRzO3I8MHx8cj49aS5sZW5ndGh8fGZ1bmN0aW9uKGUsdCl7aWYodCl7Zm9yKHZhciByPWUuZnJhZ21lbnRzLGk9ZS5za2lwcGVkU2VnbWVudHM7aTxyLmxlbmd0aDtpKyspcltpXS5zdGFydCs9dDtlLmZyYWdtZW50SGludCYmKGUuZnJhZ21lbnRIaW50LnN0YXJ0Kz10KX19KHQsaVtyXS5zdGFydCl9ZnVuY3Rpb24gT3QoZSx0LHIpe3ZhciBpO3JldHVybiBudWxsIT1lJiZlLmRldGFpbHM/TXQobnVsbD09KGk9ZS5kZXRhaWxzKT92b2lkIDA6aS5wYXJ0TGlzdCx0LHIpOm51bGx9ZnVuY3Rpb24gTXQoZSx0LHIpe2lmKGUpZm9yKHZhciBpPWUubGVuZ3RoO2ktLTspe3ZhciBhPWVbaV07aWYoYS5pbmRleD09PXImJmEuZnJhZ21lbnQuc249PT10KXJldHVybiBhfXJldHVybiBudWxsfWZ1bmN0aW9uIE50KGUpe2UuZm9yRWFjaCgoZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmRldGFpbHM7bnVsbCE9ciYmci5mcmFnbWVudHMmJnIuZnJhZ21lbnRzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UubGV2ZWw9dH0pKX0pKX1mdW5jdGlvbiBCdChlKXtzd2l0Y2goZS5kZXRhaWxzKXtjYXNlIFMuRlJBR19MT0FEX1RJTUVPVVQ6Y2FzZSBTLktFWV9MT0FEX1RJTUVPVVQ6Y2FzZSBTLkxFVkVMX0xPQURfVElNRU9VVDpjYXNlIFMuTUFOSUZFU1RfTE9BRF9USU1FT1VUOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIFV0KGUsdCl7dmFyIHI9QnQodCk7cmV0dXJuIGUuZGVmYXVsdFsocj8idGltZW91dCI6ImVycm9yIikrIlJldHJ5Il19ZnVuY3Rpb24gR3QoZSx0KXt2YXIgcj0ibGluZWFyIj09PWUuYmFja29mZj8xOk1hdGgucG93KDIsdCk7cmV0dXJuIE1hdGgubWluKHIqZS5yZXRyeURlbGF5TXMsZS5tYXhSZXRyeURlbGF5TXMpfWZ1bmN0aW9uIEh0KGUpe3JldHVybiBpKGkoe30sZSkse2Vycm9yUmV0cnk6bnVsbCx0aW1lb3V0UmV0cnk6bnVsbH0pfWZ1bmN0aW9uIFZ0KGUsdCxyLGkpe2lmKCFlKXJldHVybiExO3ZhciBhPW51bGw9PWk/dm9pZCAwOmkuY29kZSxuPXQ8ZS5tYXhOdW1SZXRyeSYmKGZ1bmN0aW9uKGUpe3JldHVybiAwPT09ZSYmITE9PT1uYXZpZ2F0b3Iub25MaW5lfHwhIWUmJihlPDQwMHx8ZT40OTkpfShhKXx8ISFyKTtyZXR1cm4gZS5zaG91bGRSZXRyeT9lLnNob3VsZFJldHJ5KGUsdCxyLGksbik6bn12YXIgS3Q9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9MCxpPWUubGVuZ3RoLTEsYT1udWxsLG49bnVsbDtyPD1pOyl7dmFyIHM9dChuPWVbYT0ocitpKS8yfDBdKTtpZihzPjApcj1hKzE7ZWxzZXtpZighKHM8MCkpcmV0dXJuIG47aT1hLTF9fXJldHVybiBudWxsfTtmdW5jdGlvbiBXdChlLHQscixpLGEpe3ZvaWQgMD09PXImJihyPTApLHZvaWQgMD09PWkmJihpPTApLHZvaWQgMD09PWEmJihhPS4wMDUpO3ZhciBuPW51bGw7aWYoZSl7bj10W2Uuc24tdFswXS5zbisxXXx8bnVsbDt2YXIgcz1lLmVuZERUUy1yO3M+MCYmczwxNWUtNyYmKHIrPTE1ZS03KX1lbHNlIDA9PT1yJiYwPT09dFswXS5zdGFydCYmKG49dFswXSk7aWYobiYmKCghZXx8ZS5sZXZlbD09PW4ubGV2ZWwpJiYwPT09anQocixpLG4pfHxmdW5jdGlvbihlLHQscil7aWYodCYmMD09PXQuc3RhcnQmJnQubGV2ZWw8ZS5sZXZlbCYmKHQuZW5kUFRTfHwwKT4wKXt2YXIgaT10LnRhZ0xpc3QucmVkdWNlKChmdW5jdGlvbihlLHQpe3JldHVybiJJTkYiPT09dFswXSYmKGUrPXBhcnNlRmxvYXQodFsxXSkpLGV9KSxyKTtyZXR1cm4gZS5zdGFydDw9aX1yZXR1cm4hMX0obixlLE1hdGgubWluKGEsaSkpKSlyZXR1cm4gbjt2YXIgbz1LdCh0LGp0LmJpbmQobnVsbCxyLGkpKTtyZXR1cm4hb3x8bz09PWUmJm4/bjpvfWZ1bmN0aW9uIGp0KGUsdCxyKXtpZih2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT10JiYodD0wKSxyLnN0YXJ0PD1lJiZyLnN0YXJ0K3IuZHVyYXRpb24+ZSlyZXR1cm4gMDt2YXIgaT1NYXRoLm1pbih0LHIuZHVyYXRpb24rKHIuZGVsdGFQVFM/ci5kZWx0YVBUUzowKSk7cmV0dXJuIHIuc3RhcnQrci5kdXJhdGlvbi1pPD1lPzE6ci5zdGFydC1pPmUmJnIuc3RhcnQ/LTE6MH1mdW5jdGlvbiBZdChlLHQscil7dmFyIGk9MWUzKk1hdGgubWluKHQsci5kdXJhdGlvbisoci5kZWx0YVBUUz9yLmRlbHRhUFRTOjApKTtyZXR1cm4oci5lbmRQcm9ncmFtRGF0ZVRpbWV8fDApLWk+ZX12YXIgcXQ9MCx6dD0yLFh0PTMsUXQ9NSxKdD0wLCR0PTEsWnQ9Mixlcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5obHM9dm9pZCAwLHRoaXMucGxheWxpc3RFcnJvcj0wLHRoaXMucGVuYWxpemVkUmVuZGl0aW9ucz17fSx0aGlzLmxvZz12b2lkIDAsdGhpcy53YXJuPXZvaWQgMCx0aGlzLmVycm9yPXZvaWQgMCx0aGlzLmhscz1lLHRoaXMubG9nPUQubG9nLmJpbmQoRCwiW2luZm9dOiIpLHRoaXMud2Fybj1ELndhcm4uYmluZChELCJbd2FybmluZ106IiksdGhpcy5lcnJvcj1ELmVycm9yLmJpbmQoRCwiW2Vycm9yXToiKSx0aGlzLnJlZ2lzdGVyTGlzdGVuZXJzKCl9dmFyIHQ9ZS5wcm90b3R5cGU7cmV0dXJuIHQucmVnaXN0ZXJMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmhscztlLm9uKEUuRVJST1IsdGhpcy5vbkVycm9yLHRoaXMpLGUub24oRS5NQU5JRkVTVF9MT0FESU5HLHRoaXMub25NYW5pZmVzdExvYWRpbmcsdGhpcyksZS5vbihFLkxFVkVMX1VQREFURUQsdGhpcy5vbkxldmVsVXBkYXRlZCx0aGlzKX0sdC51bnJlZ2lzdGVyTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5obHM7ZSYmKGUub2ZmKEUuRVJST1IsdGhpcy5vbkVycm9yLHRoaXMpLGUub2ZmKEUuRVJST1IsdGhpcy5vbkVycm9yT3V0LHRoaXMpLGUub2ZmKEUuTUFOSUZFU1RfTE9BRElORyx0aGlzLm9uTWFuaWZlc3RMb2FkaW5nLHRoaXMpLGUub2ZmKEUuTEVWRUxfVVBEQVRFRCx0aGlzLm9uTGV2ZWxVcGRhdGVkLHRoaXMpKX0sdC5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy51bnJlZ2lzdGVyTGlzdGVuZXJzKCksdGhpcy5obHM9bnVsbCx0aGlzLnBlbmFsaXplZFJlbmRpdGlvbnM9e319LHQuc3RhcnRMb2FkPWZ1bmN0aW9uKGUpe30sdC5zdG9wTG9hZD1mdW5jdGlvbigpe3RoaXMucGxheWxpc3RFcnJvcj0wfSx0LmdldFZhcmlhbnRMZXZlbEluZGV4PWZ1bmN0aW9uKGUpe3JldHVybihudWxsPT1lP3ZvaWQgMDplLnR5cGUpPT09bnQ/ZS5sZXZlbDp0aGlzLmhscy5sb2FkTGV2ZWx9LHQub25NYW5pZmVzdExvYWRpbmc9ZnVuY3Rpb24oKXt0aGlzLnBsYXlsaXN0RXJyb3I9MCx0aGlzLnBlbmFsaXplZFJlbmRpdGlvbnM9e319LHQub25MZXZlbFVwZGF0ZWQ9ZnVuY3Rpb24oKXt0aGlzLnBsYXlsaXN0RXJyb3I9MH0sdC5vbkVycm9yPWZ1bmN0aW9uKGUsdCl7dmFyIHIsaTtpZighdC5mYXRhbCl7dmFyIGE9dGhpcy5obHMsbj10LmNvbnRleHQ7c3dpdGNoKHQuZGV0YWlscyl7Y2FzZSBTLkZSQUdfTE9BRF9FUlJPUjpjYXNlIFMuRlJBR19MT0FEX1RJTUVPVVQ6Y2FzZSBTLktFWV9MT0FEX0VSUk9SOmNhc2UgUy5LRVlfTE9BRF9USU1FT1VUOnJldHVybiB2b2lkKHQuZXJyb3JBY3Rpb249dGhpcy5nZXRGcmFnUmV0cnlPclN3aXRjaEFjdGlvbih0KSk7Y2FzZSBTLkZSQUdfUEFSU0lOR19FUlJPUjppZihudWxsIT0ocj10LmZyYWcpJiZyLmdhcClyZXR1cm4gdm9pZCh0LmVycm9yQWN0aW9uPXthY3Rpb246cXQsZmxhZ3M6SnR9KTtjYXNlIFMuRlJBR19HQVA6Y2FzZSBTLkZSQUdfREVDUllQVF9FUlJPUjpyZXR1cm4gdC5lcnJvckFjdGlvbj10aGlzLmdldEZyYWdSZXRyeU9yU3dpdGNoQWN0aW9uKHQpLHZvaWQodC5lcnJvckFjdGlvbi5hY3Rpb249enQpO2Nhc2UgUy5MRVZFTF9FTVBUWV9FUlJPUjpjYXNlIFMuTEVWRUxfUEFSU0lOR19FUlJPUjp2YXIgcyxvLGw9dC5wYXJlbnQ9PT1udD90LmxldmVsOmEubG9hZExldmVsO3JldHVybiB2b2lkKHQuZGV0YWlscz09PVMuTEVWRUxfRU1QVFlfRVJST1ImJm51bGwhPShzPXQuY29udGV4dCkmJm51bGwhPShvPXMubGV2ZWxEZXRhaWxzKSYmby5saXZlP3QuZXJyb3JBY3Rpb249dGhpcy5nZXRQbGF5bGlzdFJldHJ5T3JTd2l0Y2hBY3Rpb24odCxsKToodC5sZXZlbFJldHJ5PSExLHQuZXJyb3JBY3Rpb249dGhpcy5nZXRMZXZlbFN3aXRjaEFjdGlvbih0LGwpKSk7Y2FzZSBTLkxFVkVMX0xPQURfRVJST1I6Y2FzZSBTLkxFVkVMX0xPQURfVElNRU9VVDpyZXR1cm4gdm9pZCgibnVtYmVyIj09dHlwZW9mKG51bGw9PW4/dm9pZCAwOm4ubGV2ZWwpJiYodC5lcnJvckFjdGlvbj10aGlzLmdldFBsYXlsaXN0UmV0cnlPclN3aXRjaEFjdGlvbih0LG4ubGV2ZWwpKSk7Y2FzZSBTLkFVRElPX1RSQUNLX0xPQURfRVJST1I6Y2FzZSBTLkFVRElPX1RSQUNLX0xPQURfVElNRU9VVDpjYXNlIFMuU1VCVElUTEVfTE9BRF9FUlJPUjpjYXNlIFMuU1VCVElUTEVfVFJBQ0tfTE9BRF9USU1FT1VUOmlmKG4pe3ZhciB1PWEubGV2ZWxzW2EubG9hZExldmVsXTtpZih1JiYobi50eXBlPT09aXQmJnUuaGFzQXVkaW9Hcm91cChuLmdyb3VwSWQpfHxuLnR5cGU9PT1hdCYmdS5oYXNTdWJ0aXRsZUdyb3VwKG4uZ3JvdXBJZCkpKXJldHVybiB0LmVycm9yQWN0aW9uPXRoaXMuZ2V0UGxheWxpc3RSZXRyeU9yU3dpdGNoQWN0aW9uKHQsYS5sb2FkTGV2ZWwpLHQuZXJyb3JBY3Rpb24uYWN0aW9uPXp0LHZvaWQodC5lcnJvckFjdGlvbi5mbGFncz0kdCl9cmV0dXJuO2Nhc2UgUy5LRVlfU1lTVEVNX1NUQVRVU19PVVRQVVRfUkVTVFJJQ1RFRDp2YXIgZD1hLmxldmVsc1thLmxvYWRMZXZlbF0saD1udWxsPT1kP3ZvaWQgMDpkLmF0dHJzWyJIRENQLUxFVkVMIl07cmV0dXJuIHZvaWQoaD90LmVycm9yQWN0aW9uPXthY3Rpb246enQsZmxhZ3M6WnQsaGRjcExldmVsOmh9OnRoaXMua2V5U3lzdGVtRXJyb3IodCkpO2Nhc2UgUy5CVUZGRVJfQUREX0NPREVDX0VSUk9SOmNhc2UgUy5SRU1VWF9BTExPQ19FUlJPUjpjYXNlIFMuQlVGRkVSX0FQUEVORF9FUlJPUjpyZXR1cm4gdm9pZCh0LmVycm9yQWN0aW9uPXRoaXMuZ2V0TGV2ZWxTd2l0Y2hBY3Rpb24odCxudWxsIT0oaT10LmxldmVsKT9pOmEubG9hZExldmVsKSk7Y2FzZSBTLklOVEVSTkFMX0VYQ0VQVElPTjpjYXNlIFMuQlVGRkVSX0FQUEVORElOR19FUlJPUjpjYXNlIFMuQlVGRkVSX0ZVTExfRVJST1I6Y2FzZSBTLkxFVkVMX1NXSVRDSF9FUlJPUjpjYXNlIFMuQlVGRkVSX1NUQUxMRURfRVJST1I6Y2FzZSBTLkJVRkZFUl9TRUVLX09WRVJfSE9MRTpjYXNlIFMuQlVGRkVSX05VREdFX09OX1NUQUxMOnJldHVybiB2b2lkKHQuZXJyb3JBY3Rpb249e2FjdGlvbjpxdCxmbGFnczpKdH0pfXQudHlwZT09PVQuS0VZX1NZU1RFTV9FUlJPUiYmdGhpcy5rZXlTeXN0ZW1FcnJvcih0KX19LHQua2V5U3lzdGVtRXJyb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRWYXJpYW50TGV2ZWxJbmRleChlLmZyYWcpO2UubGV2ZWxSZXRyeT0hMSxlLmVycm9yQWN0aW9uPXRoaXMuZ2V0TGV2ZWxTd2l0Y2hBY3Rpb24oZSx0KX0sdC5nZXRQbGF5bGlzdFJldHJ5T3JTd2l0Y2hBY3Rpb249ZnVuY3Rpb24oZSx0KXt2YXIgcj1VdCh0aGlzLmhscy5jb25maWcucGxheWxpc3RMb2FkUG9saWN5LGUpLGk9dGhpcy5wbGF5bGlzdEVycm9yKys7aWYoVnQocixpLEJ0KGUpLGUucmVzcG9uc2UpKXJldHVybnthY3Rpb246UXQsZmxhZ3M6SnQscmV0cnlDb25maWc6cixyZXRyeUNvdW50Oml9O3ZhciBhPXRoaXMuZ2V0TGV2ZWxTd2l0Y2hBY3Rpb24oZSx0KTtyZXR1cm4gciYmKGEucmV0cnlDb25maWc9cixhLnJldHJ5Q291bnQ9aSksYX0sdC5nZXRGcmFnUmV0cnlPclN3aXRjaEFjdGlvbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmhscyxyPXRoaXMuZ2V0VmFyaWFudExldmVsSW5kZXgoZS5mcmFnKSxpPXQubGV2ZWxzW3JdLGE9dC5jb25maWcsbj1hLmZyYWdMb2FkUG9saWN5LHM9YS5rZXlMb2FkUG9saWN5LG89VXQoZS5kZXRhaWxzLnN0YXJ0c1dpdGgoImtleSIpP3M6bixlKSxsPXQubGV2ZWxzLnJlZHVjZSgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSt0LmZyYWdtZW50RXJyb3J9KSwwKTtpZihpJiYoZS5kZXRhaWxzIT09Uy5GUkFHX0dBUCYmaS5mcmFnbWVudEVycm9yKyssVnQobyxsLEJ0KGUpLGUucmVzcG9uc2UpKSlyZXR1cm57YWN0aW9uOlF0LGZsYWdzOkp0LHJldHJ5Q29uZmlnOm8scmV0cnlDb3VudDpsfTt2YXIgdT10aGlzLmdldExldmVsU3dpdGNoQWN0aW9uKGUscik7cmV0dXJuIG8mJih1LnJldHJ5Q29uZmlnPW8sdS5yZXRyeUNvdW50PWwpLHV9LHQuZ2V0TGV2ZWxTd2l0Y2hBY3Rpb249ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmhscztudWxsPT10JiYodD1yLmxvYWRMZXZlbCk7dmFyIGk9dGhpcy5obHMubGV2ZWxzW3RdO2lmKGkpe3ZhciBhLG4scz1lLmRldGFpbHM7aS5sb2FkRXJyb3IrKyxzPT09Uy5CVUZGRVJfQVBQRU5EX0VSUk9SJiZpLmZyYWdtZW50RXJyb3IrKzt2YXIgbz0tMSxsPXIubGV2ZWxzLHU9ci5sb2FkTGV2ZWwsZD1yLm1pbkF1dG9MZXZlbCxoPXIubWF4QXV0b0xldmVsO3IuYXV0b0xldmVsRW5hYmxlZHx8KHIubG9hZExldmVsPS0xKTtmb3IodmFyIGYsYz1udWxsPT0oYT1lLmZyYWcpP3ZvaWQgMDphLnR5cGUsdj0oYz09PXN0JiZzPT09Uy5GUkFHX1BBUlNJTkdfRVJST1J8fCJhdWRpbyI9PT1lLnNvdXJjZUJ1ZmZlck5hbWUmJihzPT09Uy5CVUZGRVJfQUREX0NPREVDX0VSUk9SfHxzPT09Uy5CVUZGRVJfQVBQRU5EX0VSUk9SKSkmJmwuc29tZSgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hdWRpb0NvZGVjO3JldHVybiBpLmF1ZGlvQ29kZWMhPT10fSkpLGc9InZpZGVvIj09PWUuc291cmNlQnVmZmVyTmFtZSYmKHM9PT1TLkJVRkZFUl9BRERfQ09ERUNfRVJST1J8fHM9PT1TLkJVRkZFUl9BUFBFTkRfRVJST1IpJiZsLnNvbWUoKGZ1bmN0aW9uKGUpe3ZhciB0PWUuY29kZWNTZXQscj1lLmF1ZGlvQ29kZWM7cmV0dXJuIGkuY29kZWNTZXQhPT10JiZpLmF1ZGlvQ29kZWM9PT1yfSkpLG09bnVsbCE9KG49ZS5jb250ZXh0KT9uOnt9LHA9bS50eXBlLHk9bS5ncm91cElkLEU9ZnVuY3Rpb24oKXt2YXIgdD0oVCt1KSVsLmxlbmd0aDtpZih0IT09dSYmdD49ZCYmdDw9aCYmMD09PWxbdF0ubG9hZEVycm9yKXt2YXIgcixhLG49bFt0XTtpZihzPT09Uy5GUkFHX0dBUCYmYz09PW50JiZlLmZyYWcpe3ZhciBmPWxbdF0uZGV0YWlscztpZihmKXt2YXIgbT1XdChlLmZyYWcsZi5mcmFnbWVudHMsZS5mcmFnLnN0YXJ0KTtpZihudWxsIT1tJiZtLmdhcClyZXR1cm4gMH19ZWxzZXtpZihwPT09aXQmJm4uaGFzQXVkaW9Hcm91cCh5KXx8cD09PWF0JiZuLmhhc1N1YnRpdGxlR3JvdXAoeSkpcmV0dXJuIDA7aWYoYz09PXN0JiZudWxsIT0ocj1pLmF1ZGlvR3JvdXBzKSYmci5zb21lKChmdW5jdGlvbihlKXtyZXR1cm4gbi5oYXNBdWRpb0dyb3VwKGUpfSkpfHxjPT09b3QmJm51bGwhPShhPWkuc3VidGl0bGVHcm91cHMpJiZhLnNvbWUoKGZ1bmN0aW9uKGUpe3JldHVybiBuLmhhc1N1YnRpdGxlR3JvdXAoZSl9KSl8fHYmJmkuYXVkaW9Db2RlYz09PW4uYXVkaW9Db2RlY3x8IXYmJmkuYXVkaW9Db2RlYyE9PW4uYXVkaW9Db2RlY3x8ZyYmaS5jb2RlY1NldD09PW4uY29kZWNTZXQpcmV0dXJuIDB9cmV0dXJuIG89dCwxfX0sVD1sLmxlbmd0aDtULS0mJigwPT09KGY9RSgpKXx8MSE9PWYpOyk7aWYobz4tMSYmci5sb2FkTGV2ZWwhPT1vKXJldHVybiBlLmxldmVsUmV0cnk9ITAsdGhpcy5wbGF5bGlzdEVycm9yPTAse2FjdGlvbjp6dCxmbGFnczpKdCxuZXh0QXV0b0xldmVsOm99fXJldHVybnthY3Rpb246enQsZmxhZ3M6JHR9fSx0Lm9uRXJyb3JPdXQ9ZnVuY3Rpb24oZSx0KXt2YXIgcjtzd2l0Y2gobnVsbD09KHI9dC5lcnJvckFjdGlvbik/dm9pZCAwOnIuYWN0aW9uKXtjYXNlIHF0OmJyZWFrO2Nhc2UgenQ6dGhpcy5zZW5kQWx0ZXJuYXRlVG9QZW5hbHR5Qm94KHQpLHQuZXJyb3JBY3Rpb24ucmVzb2x2ZWR8fHQuZGV0YWlscz09PVMuRlJBR19HQVA/L01lZGlhU291cmNlIHJlYWR5U3RhdGU6IGVuZGVkLy50ZXN0KHQuZXJyb3IubWVzc2FnZSkmJih0aGlzLndhcm4oJ01lZGlhU291cmNlIGVuZGVkIGFmdGVyICInK3Quc291cmNlQnVmZmVyTmFtZSsnIiBzb3VyY2VCdWZmZXIgYXBwZW5kIGVycm9yLiBBdHRlbXB0aW5nIHRvIHJlY292ZXIgZnJvbSBtZWRpYSBlcnJvci4nKSx0aGlzLmhscy5yZWNvdmVyTWVkaWFFcnJvcigpKTp0LmZhdGFsPSEwfXQuZmF0YWwmJnRoaXMuaGxzLnN0b3BMb2FkKCl9LHQuc2VuZEFsdGVybmF0ZVRvUGVuYWx0eUJveD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmhscyxyPWUuZXJyb3JBY3Rpb247aWYocil7dmFyIGk9ci5mbGFncyxhPXIuaGRjcExldmVsLG49ci5uZXh0QXV0b0xldmVsO3N3aXRjaChpKXtjYXNlIEp0OnRoaXMuc3dpdGNoTGV2ZWwoZSxuKTticmVhaztjYXNlIFp0OmEmJih0Lm1heEhkY3BMZXZlbD1MdFtMdC5pbmRleE9mKGEpLTFdLHIucmVzb2x2ZWQ9ITApLHRoaXMud2FybignUmVzdHJpY3RpbmcgcGxheWJhY2sgdG8gSERDUC1MRVZFTCBvZiAiJyt0Lm1heEhkY3BMZXZlbCsnIiBvciBsb3dlcicpfXIucmVzb2x2ZWR8fHRoaXMuc3dpdGNoTGV2ZWwoZSxuKX19LHQuc3dpdGNoTGV2ZWw9ZnVuY3Rpb24oZSx0KXt2b2lkIDAhPT10JiZlLmVycm9yQWN0aW9uJiYodGhpcy53YXJuKCJzd2l0Y2hpbmcgdG8gbGV2ZWwgIit0KyIgYWZ0ZXIgIitlLmRldGFpbHMpLHRoaXMuaGxzLm5leHRBdXRvTGV2ZWw9dCxlLmVycm9yQWN0aW9uLnJlc29sdmVkPSEwLHRoaXMuaGxzLm5leHRMb2FkTGV2ZWw9dGhpcy5obHMubmV4dEF1dG9MZXZlbCl9LGV9KCksdHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5obHM9dm9pZCAwLHRoaXMudGltZXI9LTEsdGhpcy5yZXF1ZXN0U2NoZWR1bGVkPS0xLHRoaXMuY2FuTG9hZD0hMSx0aGlzLmxvZz12b2lkIDAsdGhpcy53YXJuPXZvaWQgMCx0aGlzLmxvZz1ELmxvZy5iaW5kKEQsdCsiOiIpLHRoaXMud2Fybj1ELndhcm4uYmluZChELHQrIjoiKSx0aGlzLmhscz1lfXZhciB0PWUucHJvdG90eXBlO3JldHVybiB0LmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyVGltZXIoKSx0aGlzLmhscz10aGlzLmxvZz10aGlzLndhcm49bnVsbH0sdC5jbGVhclRpbWVyPWZ1bmN0aW9uKCl7LTEhPT10aGlzLnRpbWVyJiYoc2VsZi5jbGVhclRpbWVvdXQodGhpcy50aW1lciksdGhpcy50aW1lcj0tMSl9LHQuc3RhcnRMb2FkPWZ1bmN0aW9uKCl7dGhpcy5jYW5Mb2FkPSEwLHRoaXMucmVxdWVzdFNjaGVkdWxlZD0tMSx0aGlzLmxvYWRQbGF5bGlzdCgpfSx0LnN0b3BMb2FkPWZ1bmN0aW9uKCl7dGhpcy5jYW5Mb2FkPSExLHRoaXMuY2xlYXJUaW1lcigpfSx0LnN3aXRjaFBhcmFtcz1mdW5jdGlvbihlLHQscil7dmFyIGk9bnVsbD09dD92b2lkIDA6dC5yZW5kaXRpb25SZXBvcnRzO2lmKGkpe2Zvcih2YXIgYT0tMSxuPTA7bjxpLmxlbmd0aDtuKyspe3ZhciBzPWlbbl0sbz12b2lkIDA7dHJ5e289bmV3IHNlbGYuVVJMKHMuVVJJLHQudXJsKS5ocmVmfWNhdGNoKGUpe0Qud2FybigiQ291bGQgbm90IGNvbnN0cnVjdCBuZXcgVVJMIGZvciBSZW5kaXRpb24gUmVwb3J0OiAiK2UpLG89cy5VUkl8fCIifWlmKG89PT1lKXthPW47YnJlYWt9bz09PWUuc3Vic3RyaW5nKDAsby5sZW5ndGgpJiYoYT1uKX1pZigtMSE9PWEpe3ZhciBsPWlbYV0sdT1wYXJzZUludChsWyJMQVNULU1TTiJdKXx8KG51bGw9PXQ/dm9pZCAwOnQubGFzdFBhcnRTbiksZD1wYXJzZUludChsWyJMQVNULVBBUlQiXSl8fChudWxsPT10P3ZvaWQgMDp0Lmxhc3RQYXJ0SW5kZXgpO2lmKHRoaXMuaGxzLmNvbmZpZy5sb3dMYXRlbmN5TW9kZSl7dmFyIGg9TWF0aC5taW4odC5hZ2UtdC5wYXJ0VGFyZ2V0LHQudGFyZ2V0ZHVyYXRpb24pO2Q+PTAmJmg+dC5wYXJ0VGFyZ2V0JiYoZCs9MSl9dmFyIGY9ciYmRHQocik7cmV0dXJuIG5ldyBfdCh1LGQ+PTA/ZDp2b2lkIDAsZil9fX0sdC5sb2FkUGxheWxpc3Q9ZnVuY3Rpb24oZSl7LTE9PT10aGlzLnJlcXVlc3RTY2hlZHVsZWQmJih0aGlzLnJlcXVlc3RTY2hlZHVsZWQ9c2VsZi5wZXJmb3JtYW5jZS5ub3coKSl9LHQuc2hvdWxkTG9hZFBsYXlsaXN0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNhbkxvYWQmJiEhZSYmISFlLnVybCYmKCFlLmRldGFpbHN8fGUuZGV0YWlscy5saXZlKX0sdC5zaG91bGRSZWxvYWRQbGF5bGlzdD1mdW5jdGlvbihlKXtyZXR1cm4tMT09PXRoaXMudGltZXImJi0xPT09dGhpcy5yZXF1ZXN0U2NoZWR1bGVkJiZ0aGlzLnNob3VsZExvYWRQbGF5bGlzdChlKX0sdC5wbGF5bGlzdExvYWRlZD1mdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyxhPXQuZGV0YWlscyxuPXQuc3RhdHMscz1zZWxmLnBlcmZvcm1hbmNlLm5vdygpLG89bi5sb2FkaW5nLmZpcnN0P01hdGgubWF4KDAscy1uLmxvYWRpbmcuZmlyc3QpOjA7aWYoYS5hZHZhbmNlZERhdGVUaW1lPURhdGUubm93KCktbyxhLmxpdmV8fG51bGwhPXImJnIubGl2ZSl7aWYoYS5yZWxvYWRlZChyKSxyJiZ0aGlzLmxvZygibGl2ZSBwbGF5bGlzdCAiK2UrIiAiKyhhLmFkdmFuY2VkPyJSRUZSRVNIRUQgIithLmxhc3RQYXJ0U24rIi0iK2EubGFzdFBhcnRJbmRleDphLnVwZGF0ZWQ/IlVQREFURUQiOiJNSVNTRUQiKSksciYmYS5mcmFnbWVudHMubGVuZ3RoPjAmJlB0KHIsYSksIXRoaXMuY2FuTG9hZHx8IWEubGl2ZSlyZXR1cm47dmFyIGwsdT12b2lkIDAsZD12b2lkIDA7aWYoYS5jYW5CbG9ja1JlbG9hZCYmYS5lbmRTTiYmYS5hZHZhbmNlZCl7dmFyIGg9dGhpcy5obHMuY29uZmlnLmxvd0xhdGVuY3lNb2RlLGY9YS5sYXN0UGFydFNuLGM9YS5lbmRTTix2PWEubGFzdFBhcnRJbmRleCxnPWY9PT1jOy0xIT09dj8odT1nP2MrMTpmLGQ9Zz9oPzA6djp2KzEpOnU9YysxO3ZhciBtPWEuYWdlLHA9bSthLmFnZUhlYWRlcix5PU1hdGgubWluKHAtYS5wYXJ0VGFyZ2V0LDEuNSphLnRhcmdldGR1cmF0aW9uKTtpZih5PjApe2lmKHImJnk+ci50dW5lSW5Hb2FsKXRoaXMud2FybigiQ0ROIFR1bmUtaW4gZ29hbCBpbmNyZWFzZWQgZnJvbTogIityLnR1bmVJbkdvYWwrIiB0bzogIit5KyIgd2l0aCBwbGF5bGlzdCBhZ2U6ICIrYS5hZ2UpLHk9MDtlbHNle3ZhciBFPU1hdGguZmxvb3IoeS9hLnRhcmdldGR1cmF0aW9uKTt1Kz1FLHZvaWQgMCE9PWQmJihkKz1NYXRoLnJvdW5kKHklYS50YXJnZXRkdXJhdGlvbi9hLnBhcnRUYXJnZXQpKSx0aGlzLmxvZygiQ0ROIFR1bmUtaW4gYWdlOiAiK2EuYWdlSGVhZGVyKyJzIGxhc3QgYWR2YW5jZWQgIittLnRvRml4ZWQoMikrInMgZ29hbDogIit5KyIgc2tpcCBzbiAiK0UrIiB0byBwYXJ0ICIrZCl9YS50dW5lSW5Hb2FsPXl9aWYobD10aGlzLmdldERlbGl2ZXJ5RGlyZWN0aXZlcyhhLHQuZGVsaXZlcnlEaXJlY3RpdmVzLHUsZCksaHx8IWcpcmV0dXJuIHZvaWQgdGhpcy5sb2FkUGxheWxpc3QobCl9ZWxzZShhLmNhbkJsb2NrUmVsb2FkfHxhLmNhblNraXBVbnRpbCkmJihsPXRoaXMuZ2V0RGVsaXZlcnlEaXJlY3RpdmVzKGEsdC5kZWxpdmVyeURpcmVjdGl2ZXMsdSxkKSk7dmFyIFQ9dGhpcy5obHMubWFpbkZvcndhcmRCdWZmZXJJbmZvLFM9VD9ULmVuZC1ULmxlbjowLEw9ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYodD0xLzApO3ZhciByPTFlMyplLnRhcmdldGR1cmF0aW9uO2lmKGUudXBkYXRlZCl7dmFyIGk9ZS5mcmFnbWVudHM7aWYoaS5sZW5ndGgmJjQqcj50KXt2YXIgYT0xZTMqaVtpLmxlbmd0aC0xXS5kdXJhdGlvbjthPHImJihyPWEpfX1lbHNlIHIvPTI7cmV0dXJuIE1hdGgucm91bmQocil9KGEsMWUzKihhLmVkZ2UtUykpO2EudXBkYXRlZCYmcz50aGlzLnJlcXVlc3RTY2hlZHVsZWQrTCYmKHRoaXMucmVxdWVzdFNjaGVkdWxlZD1uLmxvYWRpbmcuc3RhcnQpLHZvaWQgMCE9PXUmJmEuY2FuQmxvY2tSZWxvYWQ/dGhpcy5yZXF1ZXN0U2NoZWR1bGVkPW4ubG9hZGluZy5maXJzdCtMLSgxZTMqYS5wYXJ0VGFyZ2V0fHwxZTMpOi0xPT09dGhpcy5yZXF1ZXN0U2NoZWR1bGVkfHx0aGlzLnJlcXVlc3RTY2hlZHVsZWQrTDxzP3RoaXMucmVxdWVzdFNjaGVkdWxlZD1zOnRoaXMucmVxdWVzdFNjaGVkdWxlZC1zPD0wJiYodGhpcy5yZXF1ZXN0U2NoZWR1bGVkKz1MKTt2YXIgUj10aGlzLnJlcXVlc3RTY2hlZHVsZWQtcztSPU1hdGgubWF4KDAsUiksdGhpcy5sb2coInJlbG9hZCBsaXZlIHBsYXlsaXN0ICIrZSsiIGluICIrTWF0aC5yb3VuZChSKSsiIG1zIiksdGhpcy50aW1lcj1zZWxmLnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIGkubG9hZFBsYXlsaXN0KGwpfSksUil9ZWxzZSB0aGlzLmNsZWFyVGltZXIoKX0sdC5nZXREZWxpdmVyeURpcmVjdGl2ZXM9ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIGE9RHQoZSk7cmV0dXJuIG51bGwhPXQmJnQuc2tpcCYmZS5kZWx0YVVwZGF0ZUZhaWxlZCYmKHI9dC5tc24saT10LnBhcnQsYT1BdCksbmV3IF90KHIsaSxhKX0sdC5jaGVja1JldHJ5PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmRldGFpbHMsaT1CdChlKSxhPWUuZXJyb3JBY3Rpb24sbj1hfHx7fSxzPW4uYWN0aW9uLG89bi5yZXRyeUNvdW50LGw9dm9pZCAwPT09bz8wOm8sdT1uLnJldHJ5Q29uZmlnLGQ9ISFhJiYhIXUmJihzPT09UXR8fCFhLnJlc29sdmVkJiZzPT09enQpO2lmKGQpe3ZhciBoO2lmKHRoaXMucmVxdWVzdFNjaGVkdWxlZD0tMSxsPj11Lm1heE51bVJldHJ5KXJldHVybiExO2lmKGkmJm51bGwhPShoPWUuY29udGV4dCkmJmguZGVsaXZlcnlEaXJlY3RpdmVzKXRoaXMud2FybigiUmV0cnlpbmcgcGxheWxpc3QgbG9hZGluZyAiKyhsKzEpKyIvIit1Lm1heE51bVJldHJ5KycgYWZ0ZXIgIicrcisnIiB3aXRob3V0IGRlbGl2ZXJ5LWRpcmVjdGl2ZXMnKSx0aGlzLmxvYWRQbGF5bGlzdCgpO2Vsc2V7dmFyIGY9R3QodSxsKTt0aGlzLnRpbWVyPXNlbGYuc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gdC5sb2FkUGxheWxpc3QoKX0pLGYpLHRoaXMud2FybigiUmV0cnlpbmcgcGxheWxpc3QgbG9hZGluZyAiKyhsKzEpKyIvIit1Lm1heE51bVJldHJ5KycgYWZ0ZXIgIicrcisnIiBpbiAnK2YrIm1zIil9ZS5sZXZlbFJldHJ5PSEwLGEucmVzb2x2ZWQ9ITB9cmV0dXJuIGR9LGV9KCkscnI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1yJiYocj0wKSx0aGlzLmhhbGZMaWZlPXZvaWQgMCx0aGlzLmFscGhhXz12b2lkIDAsdGhpcy5lc3RpbWF0ZV89dm9pZCAwLHRoaXMudG90YWxXZWlnaHRfPXZvaWQgMCx0aGlzLmhhbGZMaWZlPWUsdGhpcy5hbHBoYV89ZT9NYXRoLmV4cChNYXRoLmxvZyguNSkvZSk6MCx0aGlzLmVzdGltYXRlXz10LHRoaXMudG90YWxXZWlnaHRfPXJ9dmFyIHQ9ZS5wcm90b3R5cGU7cmV0dXJuIHQuc2FtcGxlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9TWF0aC5wb3codGhpcy5hbHBoYV8sZSk7dGhpcy5lc3RpbWF0ZV89dCooMS1yKStyKnRoaXMuZXN0aW1hdGVfLHRoaXMudG90YWxXZWlnaHRfKz1lfSx0LmdldFRvdGFsV2VpZ2h0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG90YWxXZWlnaHRffSx0LmdldEVzdGltYXRlPWZ1bmN0aW9uKCl7aWYodGhpcy5hbHBoYV8pe3ZhciBlPTEtTWF0aC5wb3codGhpcy5hbHBoYV8sdGhpcy50b3RhbFdlaWdodF8pO2lmKGUpcmV0dXJuIHRoaXMuZXN0aW1hdGVfL2V9cmV0dXJuIHRoaXMuZXN0aW1hdGVffSxlfSgpLGlyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixpKXt2b2lkIDA9PT1pJiYoaT0xMDApLHRoaXMuZGVmYXVsdEVzdGltYXRlXz12b2lkIDAsdGhpcy5taW5XZWlnaHRfPXZvaWQgMCx0aGlzLm1pbkRlbGF5TXNfPXZvaWQgMCx0aGlzLnNsb3dfPXZvaWQgMCx0aGlzLmZhc3RfPXZvaWQgMCx0aGlzLmRlZmF1bHRUVEZCXz12b2lkIDAsdGhpcy50dGZiXz12b2lkIDAsdGhpcy5kZWZhdWx0RXN0aW1hdGVfPXIsdGhpcy5taW5XZWlnaHRfPS4wMDEsdGhpcy5taW5EZWxheU1zXz01MCx0aGlzLnNsb3dfPW5ldyBycihlKSx0aGlzLmZhc3RfPW5ldyBycih0KSx0aGlzLmRlZmF1bHRUVEZCXz1pLHRoaXMudHRmYl89bmV3IHJyKGUpfXZhciB0PWUucHJvdG90eXBlO3JldHVybiB0LnVwZGF0ZT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuc2xvd18saT10aGlzLmZhc3RfLGE9dGhpcy50dGZiXztyLmhhbGZMaWZlIT09ZSYmKHRoaXMuc2xvd189bmV3IHJyKGUsci5nZXRFc3RpbWF0ZSgpLHIuZ2V0VG90YWxXZWlnaHQoKSkpLGkuaGFsZkxpZmUhPT10JiYodGhpcy5mYXN0Xz1uZXcgcnIodCxpLmdldEVzdGltYXRlKCksaS5nZXRUb3RhbFdlaWdodCgpKSksYS5oYWxmTGlmZSE9PWUmJih0aGlzLnR0ZmJfPW5ldyBycihlLGEuZ2V0RXN0aW1hdGUoKSxhLmdldFRvdGFsV2VpZ2h0KCkpKX0sdC5zYW1wbGU9ZnVuY3Rpb24oZSx0KXt2YXIgcj0oZT1NYXRoLm1heChlLHRoaXMubWluRGVsYXlNc18pKS8xZTMsaT04KnQvcjt0aGlzLmZhc3RfLnNhbXBsZShyLGkpLHRoaXMuc2xvd18uc2FtcGxlKHIsaSl9LHQuc2FtcGxlVFRGQj1mdW5jdGlvbihlKXt2YXIgdD1lLzFlMyxyPU1hdGguc3FydCgyKSpNYXRoLmV4cCgtTWF0aC5wb3codCwyKS8yKTt0aGlzLnR0ZmJfLnNhbXBsZShyLE1hdGgubWF4KGUsNSkpfSx0LmNhbkVzdGltYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmFzdF8uZ2V0VG90YWxXZWlnaHQoKT49dGhpcy5taW5XZWlnaHRffSx0LmdldEVzdGltYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FuRXN0aW1hdGUoKT9NYXRoLm1pbih0aGlzLmZhc3RfLmdldEVzdGltYXRlKCksdGhpcy5zbG93Xy5nZXRFc3RpbWF0ZSgpKTp0aGlzLmRlZmF1bHRFc3RpbWF0ZV99LHQuZ2V0RXN0aW1hdGVUVEZCPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHRmYl8uZ2V0VG90YWxXZWlnaHQoKT49dGhpcy5taW5XZWlnaHRfP3RoaXMudHRmYl8uZ2V0RXN0aW1hdGUoKTp0aGlzLmRlZmF1bHRUVEZCX30sdC5kZXN0cm95PWZ1bmN0aW9uKCl7fSxlfSgpO2Z1bmN0aW9uIGFyKGUsdCl7dmFyIHI9ITEsaT1bXTtyZXR1cm4gZSYmKHI9IlNEUiIhPT1lLGk9W2VdKSx0JiYoaT10LmFsbG93ZWRWaWRlb1Jhbmdlc3x8UnQuc2xpY2UoMCksaT0ocj12b2lkIDAhPT10LnByZWZlckhEUj90LnByZWZlckhEUjpmdW5jdGlvbigpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBtYXRjaE1lZGlhKXt2YXIgZT1tYXRjaE1lZGlhKCIoZHluYW1pYy1yYW5nZTogaGlnaCkiKSx0PW1hdGNoTWVkaWEoImJhZCBxdWVyeSIpO2lmKGUubWVkaWEhPT10Lm1lZGlhKXJldHVybiEwPT09ZS5tYXRjaGVzfXJldHVybiExfSgpKT9pLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIlNEUiIhPT1lfSkpOlsiU0RSIl0pLHtwcmVmZXJIRFI6cixhbGxvd2VkVmlkZW9SYW5nZXM6aX19ZnVuY3Rpb24gbnIoZSx0KXtELmxvZygnW2Ficl0gc3RhcnQgY2FuZGlkYXRlcyB3aXRoICInK2UrJyIgaWdub3JlZCBiZWNhdXNlICcrdCl9dmFyIHNyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgdD10aGlzO3RoaXMuaGxzPXZvaWQgMCx0aGlzLmxhc3RMZXZlbExvYWRTZWM9MCx0aGlzLmxhc3RMb2FkZWRGcmFnTGV2ZWw9LTEsdGhpcy5maXJzdFNlbGVjdGlvbj0tMSx0aGlzLl9uZXh0QXV0b0xldmVsPS0xLHRoaXMubmV4dEF1dG9MZXZlbEtleT0iIix0aGlzLmF1ZGlvVHJhY2tzQnlHcm91cD1udWxsLHRoaXMuY29kZWNUaWVycz1udWxsLHRoaXMudGltZXI9LTEsdGhpcy5mcmFnQ3VycmVudD1udWxsLHRoaXMucGFydEN1cnJlbnQ9bnVsbCx0aGlzLmJpdHJhdGVUZXN0RGVsYXk9MCx0aGlzLmJ3RXN0aW1hdG9yPXZvaWQgMCx0aGlzLl9hYmFuZG9uUnVsZXNDaGVjaz1mdW5jdGlvbigpe3ZhciBlPXQuZnJhZ0N1cnJlbnQscj10LnBhcnRDdXJyZW50LGk9dC5obHMsYT1pLmF1dG9MZXZlbEVuYWJsZWQsbj1pLm1lZGlhO2lmKGUmJm4pe3ZhciBzPXBlcmZvcm1hbmNlLm5vdygpLG89cj9yLnN0YXRzOmUuc3RhdHMsbD1yP3IuZHVyYXRpb246ZS5kdXJhdGlvbix1PXMtby5sb2FkaW5nLnN0YXJ0LGQ9aS5taW5BdXRvTGV2ZWw7aWYoby5hYm9ydGVkfHxvLmxvYWRlZCYmby5sb2FkZWQ9PT1vLnRvdGFsfHxlLmxldmVsPD1kKXJldHVybiB0LmNsZWFyVGltZXIoKSx2b2lkKHQuX25leHRBdXRvTGV2ZWw9LTEpO2lmKGEmJiFuLnBhdXNlZCYmbi5wbGF5YmFja1JhdGUmJm4ucmVhZHlTdGF0ZSl7dmFyIGg9aS5tYWluRm9yd2FyZEJ1ZmZlckluZm87aWYobnVsbCE9PWgpe3ZhciBmPXQuYndFc3RpbWF0b3IuZ2V0RXN0aW1hdGVUVEZCKCksYz1NYXRoLmFicyhuLnBsYXliYWNrUmF0ZSk7aWYoISh1PD1NYXRoLm1heChmLGwvKDIqYykqMWUzKSkpe3ZhciB2PWgubGVuL2MsZz1vLmxvYWRpbmcuZmlyc3Q/by5sb2FkaW5nLmZpcnN0LW8ubG9hZGluZy5zdGFydDotMSxwPW8ubG9hZGVkJiZnPi0xLHk9dC5nZXRCd0VzdGltYXRlKCksVD1pLmxldmVscyxTPVRbZS5sZXZlbF0sTD1vLnRvdGFsfHxNYXRoLm1heChvLmxvYWRlZCxNYXRoLnJvdW5kKGwqUy5hdmVyYWdlQml0cmF0ZS84KSksUj1wP3UtZzp1O1I8MSYmcCYmKFI9TWF0aC5taW4odSw4Km8ubG9hZGVkL3kpKTt2YXIgQT1wPzFlMypvLmxvYWRlZC9SOjAsYj1BPyhMLW8ubG9hZGVkKS9BOjgqTC95K2YvMWUzO2lmKCEoYjw9dikpe3ZhciBrLF89QT84KkE6eSx4PU51bWJlci5QT1NJVElWRV9JTkZJTklUWTtmb3Ioaz1lLmxldmVsLTE7az5kO2stLSl7dmFyIHc9VFtrXS5tYXhCaXRyYXRlO2lmKCh4PXQuZ2V0VGltZVRvTG9hZEZyYWcoZi8xZTMsXyxsKncsIVRba10uZGV0YWlscykpPHYpYnJlYWt9aWYoISh4Pj1ifHx4PjEwKmwpKXtpLm5leHRMb2FkTGV2ZWw9aS5uZXh0QXV0b0xldmVsPWsscD90LmJ3RXN0aW1hdG9yLnNhbXBsZSh1LU1hdGgubWluKGYsZyksby5sb2FkZWQpOnQuYndFc3RpbWF0b3Iuc2FtcGxlVFRGQih1KTt2YXIgQz1UW2tdLm1heEJpdHJhdGU7dC5nZXRCd0VzdGltYXRlKCkqdC5obHMuY29uZmlnLmFickJhbmRXaWR0aFVwRmFjdG9yPkMmJnQucmVzZXRFc3RpbWF0b3IoQyksdC5jbGVhclRpbWVyKCksRC53YXJuKCJbYWJyXSBGcmFnbWVudCAiK2Uuc24rKHI/IiBwYXJ0ICIrci5pbmRleDoiIikrIiBvZiBsZXZlbCAiK2UubGV2ZWwrIiBpcyBsb2FkaW5nIHRvbyBzbG93bHk7XG4gICAgICBUaW1lIHRvIHVuZGVyYnVmZmVyOiAiK3YudG9GaXhlZCgzKSsiIHNcbiAgICAgIEVzdGltYXRlZCBsb2FkIHRpbWUgZm9yIGN1cnJlbnQgZnJhZ21lbnQ6ICIrYi50b0ZpeGVkKDMpKyIgc1xuICAgICAgRXN0aW1hdGVkIGxvYWQgdGltZSBmb3IgZG93biBzd2l0Y2ggZnJhZ21lbnQ6ICIreC50b0ZpeGVkKDMpKyIgc1xuICAgICAgVFRGQiBlc3RpbWF0ZTogIisoMHxnKSsiIG1zXG4gICAgICBDdXJyZW50IEJXIGVzdGltYXRlOiAiKyhtKHkpPzB8eToiVW5rbm93biIpKyIgYnBzXG4gICAgICBOZXcgQlcgZXN0aW1hdGU6ICIrKDB8dC5nZXRCd0VzdGltYXRlKCkpKyIgYnBzXG4gICAgICBTd2l0Y2hpbmcgdG8gbGV2ZWwgIitrKyIgQCAiKygwfEMpKyIgYnBzIiksaS50cmlnZ2VyKEUuRlJBR19MT0FEX0VNRVJHRU5DWV9BQk9SVEVELHtmcmFnOmUscGFydDpyLHN0YXRzOm99KX19fX19fX0sdGhpcy5obHM9ZSx0aGlzLmJ3RXN0aW1hdG9yPXRoaXMuaW5pdEVzdGltYXRvcigpLHRoaXMucmVnaXN0ZXJMaXN0ZW5lcnMoKX12YXIgdD1lLnByb3RvdHlwZTtyZXR1cm4gdC5yZXNldEVzdGltYXRvcj1mdW5jdGlvbihlKXtlJiYoRC5sb2coInNldHRpbmcgaW5pdGlhbCBid2UgdG8gIitlKSx0aGlzLmhscy5jb25maWcuYWJyRXdtYURlZmF1bHRFc3RpbWF0ZT1lKSx0aGlzLmZpcnN0U2VsZWN0aW9uPS0xLHRoaXMuYndFc3RpbWF0b3I9dGhpcy5pbml0RXN0aW1hdG9yKCl9LHQuaW5pdEVzdGltYXRvcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaGxzLmNvbmZpZztyZXR1cm4gbmV3IGlyKGUuYWJyRXdtYVNsb3dWb0QsZS5hYnJFd21hRmFzdFZvRCxlLmFickV3bWFEZWZhdWx0RXN0aW1hdGUpfSx0LnJlZ2lzdGVyTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5obHM7ZS5vbihFLk1BTklGRVNUX0xPQURJTkcsdGhpcy5vbk1hbmlmZXN0TG9hZGluZyx0aGlzKSxlLm9uKEUuRlJBR19MT0FESU5HLHRoaXMub25GcmFnTG9hZGluZyx0aGlzKSxlLm9uKEUuRlJBR19MT0FERUQsdGhpcy5vbkZyYWdMb2FkZWQsdGhpcyksZS5vbihFLkZSQUdfQlVGRkVSRUQsdGhpcy5vbkZyYWdCdWZmZXJlZCx0aGlzKSxlLm9uKEUuTEVWRUxfU1dJVENISU5HLHRoaXMub25MZXZlbFN3aXRjaGluZyx0aGlzKSxlLm9uKEUuTEVWRUxfTE9BREVELHRoaXMub25MZXZlbExvYWRlZCx0aGlzKSxlLm9uKEUuTEVWRUxTX1VQREFURUQsdGhpcy5vbkxldmVsc1VwZGF0ZWQsdGhpcyksZS5vbihFLk1BWF9BVVRPX0xFVkVMX1VQREFURUQsdGhpcy5vbk1heEF1dG9MZXZlbFVwZGF0ZWQsdGhpcyksZS5vbihFLkVSUk9SLHRoaXMub25FcnJvcix0aGlzKX0sdC51bnJlZ2lzdGVyTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5obHM7ZSYmKGUub2ZmKEUuTUFOSUZFU1RfTE9BRElORyx0aGlzLm9uTWFuaWZlc3RMb2FkaW5nLHRoaXMpLGUub2ZmKEUuRlJBR19MT0FESU5HLHRoaXMub25GcmFnTG9hZGluZyx0aGlzKSxlLm9mZihFLkZSQUdfTE9BREVELHRoaXMub25GcmFnTG9hZGVkLHRoaXMpLGUub2ZmKEUuRlJBR19CVUZGRVJFRCx0aGlzLm9uRnJhZ0J1ZmZlcmVkLHRoaXMpLGUub2ZmKEUuTEVWRUxfU1dJVENISU5HLHRoaXMub25MZXZlbFN3aXRjaGluZyx0aGlzKSxlLm9mZihFLkxFVkVMX0xPQURFRCx0aGlzLm9uTGV2ZWxMb2FkZWQsdGhpcyksZS5vZmYoRS5MRVZFTFNfVVBEQVRFRCx0aGlzLm9uTGV2ZWxzVXBkYXRlZCx0aGlzKSxlLm9mZihFLk1BWF9BVVRPX0xFVkVMX1VQREFURUQsdGhpcy5vbk1heEF1dG9MZXZlbFVwZGF0ZWQsdGhpcyksZS5vZmYoRS5FUlJPUix0aGlzLm9uRXJyb3IsdGhpcykpfSx0LmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnVucmVnaXN0ZXJMaXN0ZW5lcnMoKSx0aGlzLmNsZWFyVGltZXIoKSx0aGlzLmhscz10aGlzLl9hYmFuZG9uUnVsZXNDaGVjaz1udWxsLHRoaXMuZnJhZ0N1cnJlbnQ9dGhpcy5wYXJ0Q3VycmVudD1udWxsfSx0Lm9uTWFuaWZlc3RMb2FkaW5nPWZ1bmN0aW9uKGUsdCl7dGhpcy5sYXN0TG9hZGVkRnJhZ0xldmVsPS0xLHRoaXMuZmlyc3RTZWxlY3Rpb249LTEsdGhpcy5sYXN0TGV2ZWxMb2FkU2VjPTAsdGhpcy5mcmFnQ3VycmVudD10aGlzLnBhcnRDdXJyZW50PW51bGwsdGhpcy5vbkxldmVsc1VwZGF0ZWQoKSx0aGlzLmNsZWFyVGltZXIoKX0sdC5vbkxldmVsc1VwZGF0ZWQ9ZnVuY3Rpb24oKXt0aGlzLmxhc3RMb2FkZWRGcmFnTGV2ZWw+LTEmJnRoaXMuZnJhZ0N1cnJlbnQmJih0aGlzLmxhc3RMb2FkZWRGcmFnTGV2ZWw9dGhpcy5mcmFnQ3VycmVudC5sZXZlbCksdGhpcy5fbmV4dEF1dG9MZXZlbD0tMSx0aGlzLm9uTWF4QXV0b0xldmVsVXBkYXRlZCgpLHRoaXMuY29kZWNUaWVycz1udWxsLHRoaXMuYXVkaW9UcmFja3NCeUdyb3VwPW51bGx9LHQub25NYXhBdXRvTGV2ZWxVcGRhdGVkPWZ1bmN0aW9uKCl7dGhpcy5maXJzdFNlbGVjdGlvbj0tMSx0aGlzLm5leHRBdXRvTGV2ZWxLZXk9IiJ9LHQub25GcmFnTG9hZGluZz1mdW5jdGlvbihlLHQpe3ZhciByLGk9dC5mcmFnO3RoaXMuaWdub3JlRnJhZ21lbnQoaSl8fChpLmJpdHJhdGVUZXN0fHwodGhpcy5mcmFnQ3VycmVudD1pLHRoaXMucGFydEN1cnJlbnQ9bnVsbCE9KHI9dC5wYXJ0KT9yOm51bGwpLHRoaXMuY2xlYXJUaW1lcigpLHRoaXMudGltZXI9c2VsZi5zZXRJbnRlcnZhbCh0aGlzLl9hYmFuZG9uUnVsZXNDaGVjaywxMDApKX0sdC5vbkxldmVsU3dpdGNoaW5nPWZ1bmN0aW9uKGUsdCl7dGhpcy5jbGVhclRpbWVyKCl9LHQub25FcnJvcj1mdW5jdGlvbihlLHQpe2lmKCF0LmZhdGFsKXN3aXRjaCh0LmRldGFpbHMpe2Nhc2UgUy5CVUZGRVJfQUREX0NPREVDX0VSUk9SOmNhc2UgUy5CVUZGRVJfQVBQRU5EX0VSUk9SOnRoaXMubGFzdExvYWRlZEZyYWdMZXZlbD0tMSx0aGlzLmZpcnN0U2VsZWN0aW9uPS0xO2JyZWFrO2Nhc2UgUy5GUkFHX0xPQURfVElNRU9VVDp2YXIgcj10LmZyYWcsaT10aGlzLmZyYWdDdXJyZW50LGE9dGhpcy5wYXJ0Q3VycmVudDtpZihyJiZpJiZyLnNuPT09aS5zbiYmci5sZXZlbD09PWkubGV2ZWwpe3ZhciBuPXBlcmZvcm1hbmNlLm5vdygpLHM9YT9hLnN0YXRzOnIuc3RhdHMsbz1uLXMubG9hZGluZy5zdGFydCxsPXMubG9hZGluZy5maXJzdD9zLmxvYWRpbmcuZmlyc3Qtcy5sb2FkaW5nLnN0YXJ0Oi0xO2lmKHMubG9hZGVkJiZsPi0xKXt2YXIgdT10aGlzLmJ3RXN0aW1hdG9yLmdldEVzdGltYXRlVFRGQigpO3RoaXMuYndFc3RpbWF0b3Iuc2FtcGxlKG8tTWF0aC5taW4odSxsKSxzLmxvYWRlZCl9ZWxzZSB0aGlzLmJ3RXN0aW1hdG9yLnNhbXBsZVRURkIobyl9fX0sdC5nZXRUaW1lVG9Mb2FkRnJhZz1mdW5jdGlvbihlLHQscixpKXtyZXR1cm4gZStyL3QrKGk/dGhpcy5sYXN0TGV2ZWxMb2FkU2VjOjApfSx0Lm9uTGV2ZWxMb2FkZWQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmhscy5jb25maWcsaT10LnN0YXRzLmxvYWRpbmcsYT1pLmVuZC1pLnN0YXJ0O20oYSkmJih0aGlzLmxhc3RMZXZlbExvYWRTZWM9YS8xZTMpLHQuZGV0YWlscy5saXZlP3RoaXMuYndFc3RpbWF0b3IudXBkYXRlKHIuYWJyRXdtYVNsb3dMaXZlLHIuYWJyRXdtYUZhc3RMaXZlKTp0aGlzLmJ3RXN0aW1hdG9yLnVwZGF0ZShyLmFickV3bWFTbG93Vm9ELHIuYWJyRXdtYUZhc3RWb0QpfSx0Lm9uRnJhZ0xvYWRlZD1mdW5jdGlvbihlLHQpe3ZhciByPXQuZnJhZyxpPXQucGFydCxhPWk/aS5zdGF0czpyLnN0YXRzO2lmKHIudHlwZT09PW50JiZ0aGlzLmJ3RXN0aW1hdG9yLnNhbXBsZVRURkIoYS5sb2FkaW5nLmZpcnN0LWEubG9hZGluZy5zdGFydCksIXRoaXMuaWdub3JlRnJhZ21lbnQocikpe2lmKHRoaXMuY2xlYXJUaW1lcigpLHIubGV2ZWw9PT10aGlzLl9uZXh0QXV0b0xldmVsJiYodGhpcy5fbmV4dEF1dG9MZXZlbD0tMSksdGhpcy5maXJzdFNlbGVjdGlvbj0tMSx0aGlzLmhscy5jb25maWcuYWJyTWF4V2l0aFJlYWxCaXRyYXRlKXt2YXIgbj1pP2kuZHVyYXRpb246ci5kdXJhdGlvbixzPXRoaXMuaGxzLmxldmVsc1tyLmxldmVsXSxvPShzLmxvYWRlZD9zLmxvYWRlZC5ieXRlczowKSthLmxvYWRlZCxsPShzLmxvYWRlZD9zLmxvYWRlZC5kdXJhdGlvbjowKStuO3MubG9hZGVkPXtieXRlczpvLGR1cmF0aW9uOmx9LHMucmVhbEJpdHJhdGU9TWF0aC5yb3VuZCg4Km8vbCl9aWYoci5iaXRyYXRlVGVzdCl7dmFyIHU9e3N0YXRzOmEsZnJhZzpyLHBhcnQ6aSxpZDpyLnR5cGV9O3RoaXMub25GcmFnQnVmZmVyZWQoRS5GUkFHX0JVRkZFUkVELHUpLHIuYml0cmF0ZVRlc3Q9ITF9ZWxzZSB0aGlzLmxhc3RMb2FkZWRGcmFnTGV2ZWw9ci5sZXZlbH19LHQub25GcmFnQnVmZmVyZWQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10LmZyYWcsaT10LnBhcnQsYT1udWxsIT1pJiZpLnN0YXRzLmxvYWRlZD9pLnN0YXRzOnIuc3RhdHM7aWYoIWEuYWJvcnRlZCYmIXRoaXMuaWdub3JlRnJhZ21lbnQocikpe3ZhciBuPWEucGFyc2luZy5lbmQtYS5sb2FkaW5nLnN0YXJ0LU1hdGgubWluKGEubG9hZGluZy5maXJzdC1hLmxvYWRpbmcuc3RhcnQsdGhpcy5id0VzdGltYXRvci5nZXRFc3RpbWF0ZVRURkIoKSk7dGhpcy5id0VzdGltYXRvci5zYW1wbGUobixhLmxvYWRlZCksYS5id0VzdGltYXRlPXRoaXMuZ2V0QndFc3RpbWF0ZSgpLHIuYml0cmF0ZVRlc3Q/dGhpcy5iaXRyYXRlVGVzdERlbGF5PW4vMWUzOnRoaXMuYml0cmF0ZVRlc3REZWxheT0wfX0sdC5pZ25vcmVGcmFnbWVudD1mdW5jdGlvbihlKXtyZXR1cm4gZS50eXBlIT09bnR8fCJpbml0U2VnbWVudCI9PT1lLnNufSx0LmNsZWFyVGltZXI9ZnVuY3Rpb24oKXt0aGlzLnRpbWVyPi0xJiYoc2VsZi5jbGVhckludGVydmFsKHRoaXMudGltZXIpLHRoaXMudGltZXI9LTEpfSx0LmdldEF1dG9MZXZlbEtleT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEJ3RXN0aW1hdGUoKSsiXyIrdGhpcy5nZXRTdGFydmF0aW9uRGVsYXkoKS50b0ZpeGVkKDIpfSx0LmdldE5leHRBQlJBdXRvTGV2ZWw9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmZyYWdDdXJyZW50LHQ9dGhpcy5wYXJ0Q3VycmVudCxyPXRoaXMuaGxzLGk9ci5tYXhBdXRvTGV2ZWwsYT1yLmNvbmZpZyxuPXIubWluQXV0b0xldmVsLHM9dD90LmR1cmF0aW9uOmU/ZS5kdXJhdGlvbjowLG89dGhpcy5nZXRCd0VzdGltYXRlKCksbD10aGlzLmdldFN0YXJ2YXRpb25EZWxheSgpLHU9YS5hYnJCYW5kV2lkdGhGYWN0b3IsZD1hLmFickJhbmRXaWR0aFVwRmFjdG9yO2lmKGwpe3ZhciBoPXRoaXMuZmluZEJlc3RMZXZlbChvLG4saSxsLDAsdSxkKTtpZihoPj0wKXJldHVybiBofXZhciBmPXM/TWF0aC5taW4ocyxhLm1heFN0YXJ2YXRpb25EZWxheSk6YS5tYXhTdGFydmF0aW9uRGVsYXk7aWYoIWwpe3ZhciBjPXRoaXMuYml0cmF0ZVRlc3REZWxheTtjJiYoZj0ocz9NYXRoLm1pbihzLGEubWF4TG9hZGluZ0RlbGF5KTphLm1heExvYWRpbmdEZWxheSktYyxELmluZm8oIlthYnJdIGJpdHJhdGUgdGVzdCB0b29rICIrTWF0aC5yb3VuZCgxZTMqYykrIm1zLCBzZXQgZmlyc3QgZnJhZ21lbnQgbWF4IGZldGNoRHVyYXRpb24gdG8gIitNYXRoLnJvdW5kKDFlMypmKSsiIG1zIiksdT1kPTEpfXZhciB2PXRoaXMuZmluZEJlc3RMZXZlbChvLG4saSxsLGYsdSxkKTtpZihELmluZm8oIlthYnJdICIrKGw/InJlYnVmZmVyaW5nIGV4cGVjdGVkIjoiYnVmZmVyIGlzIGVtcHR5IikrIiwgb3B0aW1hbCBxdWFsaXR5IGxldmVsICIrdiksdj4tMSlyZXR1cm4gdjt2YXIgZz1yLmxldmVsc1tuXSxtPXIubGV2ZWxzW3IubG9hZExldmVsXTtyZXR1cm4obnVsbD09Zz92b2lkIDA6Zy5iaXRyYXRlKTwobnVsbD09bT92b2lkIDA6bS5iaXRyYXRlKT9uOnIubG9hZExldmVsfSx0LmdldFN0YXJ2YXRpb25EZWxheT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaGxzLHQ9ZS5tZWRpYTtpZighdClyZXR1cm4gMS8wO3ZhciByPXQmJjAhPT10LnBsYXliYWNrUmF0ZT9NYXRoLmFicyh0LnBsYXliYWNrUmF0ZSk6MSxpPWUubWFpbkZvcndhcmRCdWZmZXJJbmZvO3JldHVybihpP2kubGVuOjApL3J9LHQuZ2V0QndFc3RpbWF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJ3RXN0aW1hdG9yLmNhbkVzdGltYXRlKCk/dGhpcy5id0VzdGltYXRvci5nZXRFc3RpbWF0ZSgpOnRoaXMuaGxzLmNvbmZpZy5hYnJFd21hRGVmYXVsdEVzdGltYXRlfSx0LmZpbmRCZXN0TGV2ZWw9ZnVuY3Rpb24oZSx0LHIsaSxhLG4scyl7dmFyIG8sbD10aGlzLHU9aSthLGQ9dGhpcy5sYXN0TG9hZGVkRnJhZ0xldmVsLGg9LTE9PT1kP3RoaXMuaGxzLmZpcnN0TGV2ZWw6ZCxmPXRoaXMuZnJhZ0N1cnJlbnQsYz10aGlzLnBhcnRDdXJyZW50LHY9dGhpcy5obHMsZz12LmxldmVscyxwPXYuYWxsQXVkaW9UcmFja3MseT12LmxvYWRMZXZlbCxFPXYuY29uZmlnO2lmKDE9PT1nLmxlbmd0aClyZXR1cm4gMDt2YXIgVCxTPWdbaF0sTD0hKG51bGw9PVN8fG51bGw9PShvPVMuZGV0YWlscyl8fCFvLmxpdmUpLFI9LTE9PT15fHwtMT09PWQsQT0iU0RSIixiPShudWxsPT1TP3ZvaWQgMDpTLmZyYW1lUmF0ZSl8fDAsaz1FLmF1ZGlvUHJlZmVyZW5jZSxfPUUudmlkZW9QcmVmZXJlbmNlO2lmKHRoaXMuYXVkaW9UcmFja3NCeUdyb3VwfHwodGhpcy5hdWRpb1RyYWNrc0J5R3JvdXA9ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVkdWNlKChmdW5jdGlvbihlLHQpe3ZhciByPWUuZ3JvdXBzW3QuZ3JvdXBJZF07cnx8KHI9ZS5ncm91cHNbdC5ncm91cElkXT17dHJhY2tzOltdLGNoYW5uZWxzOnsyOjB9LGhhc0RlZmF1bHQ6ITEsaGFzQXV0b1NlbGVjdDohMX0pLHIudHJhY2tzLnB1c2godCk7dmFyIGk9dC5jaGFubmVsc3x8IjIiO3JldHVybiByLmNoYW5uZWxzW2ldPShyLmNoYW5uZWxzW2ldfHwwKSsxLHIuaGFzRGVmYXVsdD1yLmhhc0RlZmF1bHR8fHQuZGVmYXVsdCxyLmhhc0F1dG9TZWxlY3Q9ci5oYXNBdXRvU2VsZWN0fHx0LmF1dG9zZWxlY3Qsci5oYXNEZWZhdWx0JiYoZS5oYXNEZWZhdWx0QXVkaW89ITApLHIuaGFzQXV0b1NlbGVjdCYmKGUuaGFzQXV0b1NlbGVjdEF1ZGlvPSEwKSxlfSkse2hhc0RlZmF1bHRBdWRpbzohMSxoYXNBdXRvU2VsZWN0QXVkaW86ITEsZ3JvdXBzOnt9fSl9KHApKSxSKXtpZigtMSE9PXRoaXMuZmlyc3RTZWxlY3Rpb24pcmV0dXJuIHRoaXMuZmlyc3RTZWxlY3Rpb247dmFyIHg9dGhpcy5jb2RlY1RpZXJzfHwodGhpcy5jb2RlY1RpZXJzPWZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiBlLnNsaWNlKHIsaSsxKS5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCl7aWYoIXQuY29kZWNTZXQpcmV0dXJuIGU7dmFyIHI9dC5hdWRpb0dyb3VwcyxpPWVbdC5jb2RlY1NldF07aXx8KGVbdC5jb2RlY1NldF09aT17bWluQml0cmF0ZToxLzAsbWluSGVpZ2h0OjEvMCxtaW5GcmFtZXJhdGU6MS8wLG1heFNjb3JlOjAsdmlkZW9SYW5nZXM6e1NEUjowfSxjaGFubmVsczp7MjowfSxoYXNEZWZhdWx0QXVkaW86IXIsZnJhZ21lbnRFcnJvcjowfSksaS5taW5CaXRyYXRlPU1hdGgubWluKGkubWluQml0cmF0ZSx0LmJpdHJhdGUpO3ZhciBhPU1hdGgubWluKHQuaGVpZ2h0LHQud2lkdGgpO3JldHVybiBpLm1pbkhlaWdodD1NYXRoLm1pbihpLm1pbkhlaWdodCxhKSxpLm1pbkZyYW1lcmF0ZT1NYXRoLm1pbihpLm1pbkZyYW1lcmF0ZSx0LmZyYW1lUmF0ZSksaS5tYXhTY29yZT1NYXRoLm1heChpLm1heFNjb3JlLHQuc2NvcmUpLGkuZnJhZ21lbnRFcnJvcis9dC5mcmFnbWVudEVycm9yLGkudmlkZW9SYW5nZXNbdC52aWRlb1JhbmdlXT0oaS52aWRlb1Jhbmdlc1t0LnZpZGVvUmFuZ2VdfHwwKSsxLGV9KSx7fSl9KGcsMCx0LHIpKSx3PWZ1bmN0aW9uKGUsdCxyLGksYSl7Zm9yKHZhciBuPU9iamVjdC5rZXlzKGUpLHM9bnVsbD09aT92b2lkIDA6aS5jaGFubmVscyxvPW51bGw9PWk/dm9pZCAwOmkuYXVkaW9Db2RlYyxsPXMmJjI9PT1wYXJzZUludChzKSx1PSEwLGQ9ITEsaD0xLzAsZj0xLzAsYz0xLzAsdj0wLGc9W10scD1hcih0LGEpLHk9cC5wcmVmZXJIRFIsRT1wLmFsbG93ZWRWaWRlb1JhbmdlcyxUPWZ1bmN0aW9uKCl7dmFyIHQ9ZVtuW1NdXTt1PXQuY2hhbm5lbHNbMl0+MCxoPU1hdGgubWluKGgsdC5taW5IZWlnaHQpLGY9TWF0aC5taW4oZix0Lm1pbkZyYW1lcmF0ZSksYz1NYXRoLm1pbihjLHQubWluQml0cmF0ZSk7dmFyIHI9RS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB0LnZpZGVvUmFuZ2VzW2VdPjB9KSk7ci5sZW5ndGg+MCYmKGQ9ITAsZz1yKX0sUz1uLmxlbmd0aDtTLS07KVQoKTtoPW0oaCk/aDowLGY9bShmKT9mOjA7dmFyIEw9TWF0aC5tYXgoMTA4MCxoKSxSPU1hdGgubWF4KDMwLGYpO3JldHVybiBjPW0oYyk/YzpyLHI9TWF0aC5tYXgoYyxyKSxkfHwodD12b2lkIDAsZz1bXSkse2NvZGVjU2V0Om4ucmVkdWNlKChmdW5jdGlvbih0LGkpe3ZhciBhPWVbaV07aWYoaT09PXQpcmV0dXJuIHQ7aWYoYS5taW5CaXRyYXRlPnIpcmV0dXJuIG5yKGksIm1pbiBiaXRyYXRlIG9mICIrYS5taW5CaXRyYXRlKyIgPiBjdXJyZW50IGVzdGltYXRlIG9mICIrciksdDtpZighYS5oYXNEZWZhdWx0QXVkaW8pcmV0dXJuIG5yKGksIm5vIHJlbmRpdGlvbnMgd2l0aCBkZWZhdWx0IG9yIGF1dG8tc2VsZWN0IHNvdW5kIGZvdW5kIiksdDtpZihvJiZpLmluZGV4T2Yoby5zdWJzdHJpbmcoMCw0KSklNSE9MClyZXR1cm4gbnIoaSwnYXVkaW8gY29kZWMgcHJlZmVyZW5jZSAiJytvKyciIG5vdCBmb3VuZCcpLHQ7aWYocyYmIWwpe2lmKCFhLmNoYW5uZWxzW3NdKXJldHVybiBucihpLCJubyByZW5kaXRpb25zIHdpdGggIitzKyIgY2hhbm5lbCBzb3VuZCBmb3VuZCAoY2hhbm5lbHMgb3B0aW9uczogIitPYmplY3Qua2V5cyhhLmNoYW5uZWxzKSsiKSIpLHR9ZWxzZSBpZigoIW98fGwpJiZ1JiYwPT09YS5jaGFubmVsc1syXSlyZXR1cm4gbnIoaSwibm8gcmVuZGl0aW9ucyB3aXRoIHN0ZXJlbyBzb3VuZCBmb3VuZCIpLHQ7cmV0dXJuIGEubWluSGVpZ2h0Pkw/KG5yKGksIm1pbiByZXNvbHV0aW9uIG9mICIrYS5taW5IZWlnaHQrIiA+IG1heGltdW0gb2YgIitMKSx0KTphLm1pbkZyYW1lcmF0ZT5SPyhucihpLCJtaW4gZnJhbWVyYXRlIG9mICIrYS5taW5GcmFtZXJhdGUrIiA+IG1heGltdW0gb2YgIitSKSx0KTpnLnNvbWUoKGZ1bmN0aW9uKGUpe3JldHVybiBhLnZpZGVvUmFuZ2VzW2VdPjB9KSk/YS5tYXhTY29yZTx2PyhucihpLCJtYXggc2NvcmUgb2YgIithLm1heFNjb3JlKyIgPCBzZWxlY3RlZCBtYXggb2YgIit2KSx0KTp0JiYoTmUoaSk+PU5lKHQpfHxhLmZyYWdtZW50RXJyb3I+ZVt0XS5mcmFnbWVudEVycm9yKT90Oih2PWEubWF4U2NvcmUsaSk6KG5yKGksIm5vIHZhcmlhbnRzIHdpdGggVklERU8tUkFOR0Ugb2YgIitKU09OLnN0cmluZ2lmeShnKSsiIGZvdW5kIiksdCl9KSx2b2lkIDApLHZpZGVvUmFuZ2VzOmcscHJlZmVySERSOnksbWluRnJhbWVyYXRlOmYsbWluQml0cmF0ZTpjfX0oeCxBLGUsayxfKSxDPXcuY29kZWNTZXQsST13LnZpZGVvUmFuZ2VzLFA9dy5taW5GcmFtZXJhdGUsRj13Lm1pbkJpdHJhdGUsTz13LnByZWZlckhEUjtUPUMsQT1PP0lbSS5sZW5ndGgtMV06SVswXSxiPVAsZT1NYXRoLm1heChlLEYpLEQubG9nKCJbYWJyXSBwaWNrZWQgc3RhcnQgdGllciAiK0pTT04uc3RyaW5naWZ5KHcpKX1lbHNlIFQ9bnVsbD09Uz92b2lkIDA6Uy5jb2RlY1NldCxBPW51bGw9PVM/dm9pZCAwOlMudmlkZW9SYW5nZTtmb3IodmFyIE0sTj1jP2MuZHVyYXRpb246Zj9mLmR1cmF0aW9uOjAsQj10aGlzLmJ3RXN0aW1hdG9yLmdldEVzdGltYXRlVFRGQigpLzFlMyxVPVtdLEc9ZnVuY3Rpb24oKXt2YXIgdCxvPWdbSF0sZj1IPmg7aWYoIW8pcmV0dXJuIDA7aWYoVCYmby5jb2RlY1NldCE9PVR8fEEmJm8udmlkZW9SYW5nZSE9PUF8fGYmJmI+by5mcmFtZVJhdGV8fCFmJiZiPjAmJmI8by5mcmFtZVJhdGV8fG8uc3VwcG9ydGVkUmVzdWx0JiYobnVsbD09KHQ9by5zdXBwb3J0ZWRSZXN1bHQuZGVjb2RpbmdJbmZvUmVzdWx0cyl8fCF0WzBdLnNtb290aCkpcmV0dXJuIFUucHVzaChIKSwwO3ZhciB2LHA9by5kZXRhaWxzLEU9KGM/bnVsbD09cD92b2lkIDA6cC5wYXJ0VGFyZ2V0Om51bGw9PXA/dm9pZCAwOnAuYXZlcmFnZXRhcmdldGR1cmF0aW9uKXx8Tjt2PWY/cyplOm4qZTt2YXIgaz1OJiZpPj0yKk4mJjA9PT1hP2dbSF0uYXZlcmFnZUJpdHJhdGU6Z1tIXS5tYXhCaXRyYXRlLF89bC5nZXRUaW1lVG9Mb2FkRnJhZyhCLHYsaypFLHZvaWQgMD09PXApO2lmKHY+PWsmJihIPT09ZHx8MD09PW8ubG9hZEVycm9yJiYwPT09by5mcmFnbWVudEVycm9yKSYmKF88PUJ8fCFtKF8pfHxMJiYhbC5iaXRyYXRlVGVzdERlbGF5fHxfPHUpKXt2YXIgeD1sLmZvcmNlZEF1dG9MZXZlbDtyZXR1cm4gSD09PXl8fC0xIT09eCYmeD09PXl8fChVLmxlbmd0aCYmRC50cmFjZSgiW2Ficl0gU2tpcHBlZCBsZXZlbChzKSAiK1Uuam9pbigiLCIpKyIgb2YgIityKycgbWF4IHdpdGggQ09ERUNTIGFuZCBWSURFTy1SQU5HRToiJytnW1VbMF1dLmNvZGVjcysnIiAnK2dbVVswXV0udmlkZW9SYW5nZSsnOyBub3QgY29tcGF0aWJsZSB3aXRoICInK1MuY29kZWNzKyciICcrQSksRC5pbmZvKCJbYWJyXSBzd2l0Y2ggY2FuZGlkYXRlOiIraCsiLT4iK0grIiBhZGp1c3RlZGJ3KCIrTWF0aC5yb3VuZCh2KSsiKS1iaXRyYXRlPSIrTWF0aC5yb3VuZCh2LWspKyIgdHRmYjoiK0IudG9GaXhlZCgxKSsiIGF2Z0R1cmF0aW9uOiIrRS50b0ZpeGVkKDEpKyIgbWF4RmV0Y2hEdXJhdGlvbjoiK3UudG9GaXhlZCgxKSsiIGZldGNoRHVyYXRpb246IitfLnRvRml4ZWQoMSkrIiBmaXJzdFNlbGVjdGlvbjoiK1IrIiBjb2RlY1NldDoiK1QrIiB2aWRlb1JhbmdlOiIrQSsiIGhscy5sb2FkTGV2ZWw6Iit5KSksUiYmKGwuZmlyc3RTZWxlY3Rpb249SCkse3Y6SH19fSxIPXI7SD49dDtILS0paWYoMCE9PShNPUcoKSkmJk0pcmV0dXJuIE0udjtyZXR1cm4tMX0scyhlLFt7a2V5OiJmaXJzdEF1dG9MZXZlbCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5obHMsdD1lLm1heEF1dG9MZXZlbCxyPWUubWluQXV0b0xldmVsLGk9dGhpcy5nZXRCd0VzdGltYXRlKCksYT10aGlzLmhscy5jb25maWcubWF4U3RhcnZhdGlvbkRlbGF5LG49dGhpcy5maW5kQmVzdExldmVsKGkscix0LDAsYSwxLDEpO2lmKG4+LTEpcmV0dXJuIG47dmFyIHM9dGhpcy5obHMuZmlyc3RMZXZlbCxvPU1hdGgubWluKE1hdGgubWF4KHMsciksdCk7cmV0dXJuIEQud2FybigiW2Ficl0gQ291bGQgbm90IGZpbmQgYmVzdCBzdGFydGluZyBhdXRvIGxldmVsLiBEZWZhdWx0aW5nIHRvIGZpcnN0IGluIHBsYXlsaXN0ICIrcysiIGNsYW1wZWQgdG8gIitvKSxvfX0se2tleToiZm9yY2VkQXV0b0xldmVsIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0QXV0b0xldmVsS2V5Py0xOnRoaXMuX25leHRBdXRvTGV2ZWx9fSx7a2V5OiJuZXh0QXV0b0xldmVsIixnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmZvcmNlZEF1dG9MZXZlbCx0PXRoaXMuYndFc3RpbWF0b3IuY2FuRXN0aW1hdGUoKSxyPXRoaXMubGFzdExvYWRlZEZyYWdMZXZlbD4tMTtpZighKC0xPT09ZXx8dCYmciYmdGhpcy5uZXh0QXV0b0xldmVsS2V5IT09dGhpcy5nZXRBdXRvTGV2ZWxLZXkoKSkpcmV0dXJuIGU7dmFyIGk9dCYmcj90aGlzLmdldE5leHRBQlJBdXRvTGV2ZWwoKTp0aGlzLmZpcnN0QXV0b0xldmVsO2lmKC0xIT09ZSl7dmFyIGE9dGhpcy5obHMubGV2ZWxzO2lmKGEubGVuZ3RoPk1hdGgubWF4KGUsaSkmJmFbZV0ubG9hZEVycm9yPD1hW2ldLmxvYWRFcnJvcilyZXR1cm4gZX1yZXR1cm4gdGhpcy5fbmV4dEF1dG9MZXZlbD1pLHRoaXMubmV4dEF1dG9MZXZlbEtleT10aGlzLmdldEF1dG9MZXZlbEtleSgpLGl9LHNldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmhscyxyPXQubWF4QXV0b0xldmVsLGk9dC5taW5BdXRvTGV2ZWwsYT1NYXRoLm1pbihNYXRoLm1heChlLGkpLHIpO3RoaXMuX25leHRBdXRvTGV2ZWwhPT1hJiYodGhpcy5uZXh0QXV0b0xldmVsS2V5PSIiLHRoaXMuX25leHRBdXRvTGV2ZWw9YSl9fV0pLGV9KCksb3I9e2xlbmd0aDowLHN0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIDB9LGVuZDpmdW5jdGlvbigpe3JldHVybiAwfX0sbHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLmlzQnVmZmVyZWQ9ZnVuY3Rpb24odCxyKXt0cnl7aWYodClmb3IodmFyIGk9ZS5nZXRCdWZmZXJlZCh0KSxhPTA7YTxpLmxlbmd0aDthKyspaWYocj49aS5zdGFydChhKSYmcjw9aS5lbmQoYSkpcmV0dXJuITB9Y2F0Y2goZSl7fXJldHVybiExfSxlLmJ1ZmZlckluZm89ZnVuY3Rpb24odCxyLGkpe3RyeXtpZih0KXt2YXIgYSxuPWUuZ2V0QnVmZmVyZWQodCkscz1bXTtmb3IoYT0wO2E8bi5sZW5ndGg7YSsrKXMucHVzaCh7c3RhcnQ6bi5zdGFydChhKSxlbmQ6bi5lbmQoYSl9KTtyZXR1cm4gdGhpcy5idWZmZXJlZEluZm8ocyxyLGkpfX1jYXRjaChlKXt9cmV0dXJue2xlbjowLHN0YXJ0OnIsZW5kOnIsbmV4dFN0YXJ0OnZvaWQgMH19LGUuYnVmZmVyZWRJbmZvPWZ1bmN0aW9uKGUsdCxyKXt0PU1hdGgubWF4KDAsdCksZS5zb3J0KChmdW5jdGlvbihlLHQpe3ZhciByPWUuc3RhcnQtdC5zdGFydDtyZXR1cm4gcnx8dC5lbmQtZS5lbmR9KSk7dmFyIGk9W107aWYocilmb3IodmFyIGE9MDthPGUubGVuZ3RoO2ErKyl7dmFyIG49aS5sZW5ndGg7aWYobil7dmFyIHM9aVtuLTFdLmVuZDtlW2FdLnN0YXJ0LXM8cj9lW2FdLmVuZD5zJiYoaVtuLTFdLmVuZD1lW2FdLmVuZCk6aS5wdXNoKGVbYV0pfWVsc2UgaS5wdXNoKGVbYV0pfWVsc2UgaT1lO2Zvcih2YXIgbyxsPTAsdT10LGQ9dCxoPTA7aDxpLmxlbmd0aDtoKyspe3ZhciBmPWlbaF0uc3RhcnQsYz1pW2hdLmVuZDtpZih0K3I+PWYmJnQ8Yyl1PWYsbD0oZD1jKS10O2Vsc2UgaWYodCtyPGYpe289ZjticmVha319cmV0dXJue2xlbjpsLHN0YXJ0OnV8fDAsZW5kOmR8fDAsbmV4dFN0YXJ0Om99fSxlLmdldEJ1ZmZlcmVkPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gZS5idWZmZXJlZH1jYXRjaChlKXtyZXR1cm4gRC5sb2coImZhaWxlZCB0byBnZXQgbWVkaWEuYnVmZmVyZWQiLGUpLG9yfX0sZX0oKSx1cj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5idWZmZXJzPXZvaWQgMCx0aGlzLnF1ZXVlcz17dmlkZW86W10sYXVkaW86W10sYXVkaW92aWRlbzpbXX0sdGhpcy5idWZmZXJzPWV9dmFyIHQ9ZS5wcm90b3R5cGU7cmV0dXJuIHQuYXBwZW5kPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzLnF1ZXVlc1t0XTtpLnB1c2goZSksMSE9PWkubGVuZ3RofHxyfHx0aGlzLmV4ZWN1dGVOZXh0KHQpfSx0Lmluc2VydEFib3J0PWZ1bmN0aW9uKGUsdCl7dGhpcy5xdWV1ZXNbdF0udW5zaGlmdChlKSx0aGlzLmV4ZWN1dGVOZXh0KHQpfSx0LmFwcGVuZEJsb2NrZXI9ZnVuY3Rpb24oZSl7dmFyIHQscj1uZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7dD1lfSkpLGk9e2V4ZWN1dGU6dCxvblN0YXJ0OmZ1bmN0aW9uKCl7fSxvbkNvbXBsZXRlOmZ1bmN0aW9uKCl7fSxvbkVycm9yOmZ1bmN0aW9uKCl7fX07cmV0dXJuIHRoaXMuYXBwZW5kKGksZSkscn0sdC5leGVjdXRlTmV4dD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnF1ZXVlc1tlXTtpZih0Lmxlbmd0aCl7dmFyIHI9dFswXTt0cnl7ci5leGVjdXRlKCl9Y2F0Y2godCl7RC53YXJuKCdbYnVmZmVyLW9wZXJhdGlvbi1xdWV1ZV06IEV4Y2VwdGlvbiBleGVjdXRpbmcgIicrZSsnIiBTb3VyY2VCdWZmZXIgb3BlcmF0aW9uOiAnK3QpLHIub25FcnJvcih0KTt2YXIgaT10aGlzLmJ1ZmZlcnNbZV07bnVsbCE9aSYmaS51cGRhdGluZ3x8dGhpcy5zaGlmdEFuZEV4ZWN1dGVOZXh0KGUpfX19LHQuc2hpZnRBbmRFeGVjdXRlTmV4dD1mdW5jdGlvbihlKXt0aGlzLnF1ZXVlc1tlXS5zaGlmdCgpLHRoaXMuZXhlY3V0ZU5leHQoZSl9LHQuY3VycmVudD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5xdWV1ZXNbZV1bMF19LGV9KCksZHI9LyhhdmNbMTIzNF18aHZjMXxoZXYxfGR2aFsxZV18dnAwOXxhdjAxKSg/OlwuW14uLF0rKSsvLGhyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgdD10aGlzO3RoaXMuZGV0YWlscz1udWxsLHRoaXMuX29iamVjdFVybD1udWxsLHRoaXMub3BlcmF0aW9uUXVldWU9dm9pZCAwLHRoaXMubGlzdGVuZXJzPXZvaWQgMCx0aGlzLmhscz12b2lkIDAsdGhpcy5idWZmZXJDb2RlY0V2ZW50c0V4cGVjdGVkPTAsdGhpcy5fYnVmZmVyQ29kZWNFdmVudHNUb3RhbD0wLHRoaXMubWVkaWE9bnVsbCx0aGlzLm1lZGlhU291cmNlPW51bGwsdGhpcy5sYXN0TXBlZ0F1ZGlvQ2h1bms9bnVsbCx0aGlzLmFwcGVuZFNvdXJjZT12b2lkIDAsdGhpcy5hcHBlbmRFcnJvcnM9e2F1ZGlvOjAsdmlkZW86MCxhdWRpb3ZpZGVvOjB9LHRoaXMudHJhY2tzPXt9LHRoaXMucGVuZGluZ1RyYWNrcz17fSx0aGlzLnNvdXJjZUJ1ZmZlcj12b2lkIDAsdGhpcy5sb2c9dm9pZCAwLHRoaXMud2Fybj12b2lkIDAsdGhpcy5lcnJvcj12b2lkIDAsdGhpcy5fb25FbmRTdHJlYW1pbmc9ZnVuY3Rpb24oZSl7dC5obHMmJnQuaGxzLnBhdXNlQnVmZmVyaW5nKCl9LHRoaXMuX29uU3RhcnRTdHJlYW1pbmc9ZnVuY3Rpb24oZSl7dC5obHMmJnQuaGxzLnJlc3VtZUJ1ZmZlcmluZygpfSx0aGlzLl9vbk1lZGlhU291cmNlT3Blbj1mdW5jdGlvbigpe3ZhciBlPXQubWVkaWEscj10Lm1lZGlhU291cmNlO3QubG9nKCJNZWRpYSBzb3VyY2Ugb3BlbmVkIiksZSYmKGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZW1wdGllZCIsdC5fb25NZWRpYUVtcHRpZWQpLHQudXBkYXRlTWVkaWFFbGVtZW50RHVyYXRpb24oKSx0Lmhscy50cmlnZ2VyKEUuTUVESUFfQVRUQUNIRUQse21lZGlhOmUsbWVkaWFTb3VyY2U6cn0pKSxyJiZyLnJlbW92ZUV2ZW50TGlzdGVuZXIoInNvdXJjZW9wZW4iLHQuX29uTWVkaWFTb3VyY2VPcGVuKSx0LmNoZWNrUGVuZGluZ1RyYWNrcygpfSx0aGlzLl9vbk1lZGlhU291cmNlQ2xvc2U9ZnVuY3Rpb24oKXt0LmxvZygiTWVkaWEgc291cmNlIGNsb3NlZCIpfSx0aGlzLl9vbk1lZGlhU291cmNlRW5kZWQ9ZnVuY3Rpb24oKXt0LmxvZygiTWVkaWEgc291cmNlIGVuZGVkIil9LHRoaXMuX29uTWVkaWFFbXB0aWVkPWZ1bmN0aW9uKCl7dmFyIGU9dC5tZWRpYVNyYyxyPXQuX29iamVjdFVybDtlIT09ciYmRC5lcnJvcigiTWVkaWEgZWxlbWVudCBzcmMgd2FzIHNldCB3aGlsZSBhdHRhY2hpbmcgTWVkaWFTb3VyY2UgKCIrcisiID4gIitlKyIpIil9LHRoaXMuaGxzPWU7dmFyIHIsaT0iW2J1ZmZlci1jb250cm9sbGVyXSI7dGhpcy5hcHBlbmRTb3VyY2U9KHI9Q2UoZS5jb25maWcucHJlZmVyTWFuYWdlZE1lZGlhU291cmNlKSwidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnI9PT1zZWxmLk1hbmFnZWRNZWRpYVNvdXJjZSksdGhpcy5sb2c9RC5sb2cuYmluZChELGkpLHRoaXMud2Fybj1ELndhcm4uYmluZChELGkpLHRoaXMuZXJyb3I9RC5lcnJvci5iaW5kKEQsaSksdGhpcy5faW5pdFNvdXJjZUJ1ZmZlcigpLHRoaXMucmVnaXN0ZXJMaXN0ZW5lcnMoKX12YXIgdD1lLnByb3RvdHlwZTtyZXR1cm4gdC5oYXNTb3VyY2VUeXBlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNvdXJjZUJ1ZmZlclR5cGVzKCkubGVuZ3RoPjB8fE9iamVjdC5rZXlzKHRoaXMucGVuZGluZ1RyYWNrcykubGVuZ3RoPjB9LHQuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMudW5yZWdpc3Rlckxpc3RlbmVycygpLHRoaXMuZGV0YWlscz1udWxsLHRoaXMubGFzdE1wZWdBdWRpb0NodW5rPW51bGwsdGhpcy5obHM9bnVsbH0sdC5yZWdpc3Rlckxpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaGxzO2Uub24oRS5NRURJQV9BVFRBQ0hJTkcsdGhpcy5vbk1lZGlhQXR0YWNoaW5nLHRoaXMpLGUub24oRS5NRURJQV9ERVRBQ0hJTkcsdGhpcy5vbk1lZGlhRGV0YWNoaW5nLHRoaXMpLGUub24oRS5NQU5JRkVTVF9MT0FESU5HLHRoaXMub25NYW5pZmVzdExvYWRpbmcsdGhpcyksZS5vbihFLk1BTklGRVNUX1BBUlNFRCx0aGlzLm9uTWFuaWZlc3RQYXJzZWQsdGhpcyksZS5vbihFLkJVRkZFUl9SRVNFVCx0aGlzLm9uQnVmZmVyUmVzZXQsdGhpcyksZS5vbihFLkJVRkZFUl9BUFBFTkRJTkcsdGhpcy5vbkJ1ZmZlckFwcGVuZGluZyx0aGlzKSxlLm9uKEUuQlVGRkVSX0NPREVDUyx0aGlzLm9uQnVmZmVyQ29kZWNzLHRoaXMpLGUub24oRS5CVUZGRVJfRU9TLHRoaXMub25CdWZmZXJFb3MsdGhpcyksZS5vbihFLkJVRkZFUl9GTFVTSElORyx0aGlzLm9uQnVmZmVyRmx1c2hpbmcsdGhpcyksZS5vbihFLkxFVkVMX1VQREFURUQsdGhpcy5vbkxldmVsVXBkYXRlZCx0aGlzKSxlLm9uKEUuRlJBR19QQVJTRUQsdGhpcy5vbkZyYWdQYXJzZWQsdGhpcyksZS5vbihFLkZSQUdfQ0hBTkdFRCx0aGlzLm9uRnJhZ0NoYW5nZWQsdGhpcyl9LHQudW5yZWdpc3Rlckxpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaGxzO2Uub2ZmKEUuTUVESUFfQVRUQUNISU5HLHRoaXMub25NZWRpYUF0dGFjaGluZyx0aGlzKSxlLm9mZihFLk1FRElBX0RFVEFDSElORyx0aGlzLm9uTWVkaWFEZXRhY2hpbmcsdGhpcyksZS5vZmYoRS5NQU5JRkVTVF9MT0FESU5HLHRoaXMub25NYW5pZmVzdExvYWRpbmcsdGhpcyksZS5vZmYoRS5NQU5JRkVTVF9QQVJTRUQsdGhpcy5vbk1hbmlmZXN0UGFyc2VkLHRoaXMpLGUub2ZmKEUuQlVGRkVSX1JFU0VULHRoaXMub25CdWZmZXJSZXNldCx0aGlzKSxlLm9mZihFLkJVRkZFUl9BUFBFTkRJTkcsdGhpcy5vbkJ1ZmZlckFwcGVuZGluZyx0aGlzKSxlLm9mZihFLkJVRkZFUl9DT0RFQ1MsdGhpcy5vbkJ1ZmZlckNvZGVjcyx0aGlzKSxlLm9mZihFLkJVRkZFUl9FT1MsdGhpcy5vbkJ1ZmZlckVvcyx0aGlzKSxlLm9mZihFLkJVRkZFUl9GTFVTSElORyx0aGlzLm9uQnVmZmVyRmx1c2hpbmcsdGhpcyksZS5vZmYoRS5MRVZFTF9VUERBVEVELHRoaXMub25MZXZlbFVwZGF0ZWQsdGhpcyksZS5vZmYoRS5GUkFHX1BBUlNFRCx0aGlzLm9uRnJhZ1BhcnNlZCx0aGlzKSxlLm9mZihFLkZSQUdfQ0hBTkdFRCx0aGlzLm9uRnJhZ0NoYW5nZWQsdGhpcyl9LHQuX2luaXRTb3VyY2VCdWZmZXI9ZnVuY3Rpb24oKXt0aGlzLnNvdXJjZUJ1ZmZlcj17fSx0aGlzLm9wZXJhdGlvblF1ZXVlPW5ldyB1cih0aGlzLnNvdXJjZUJ1ZmZlciksdGhpcy5saXN0ZW5lcnM9e2F1ZGlvOltdLHZpZGVvOltdLGF1ZGlvdmlkZW86W119LHRoaXMuYXBwZW5kRXJyb3JzPXthdWRpbzowLHZpZGVvOjAsYXVkaW92aWRlbzowfSx0aGlzLmxhc3RNcGVnQXVkaW9DaHVuaz1udWxsfSx0Lm9uTWFuaWZlc3RMb2FkaW5nPWZ1bmN0aW9uKCl7dGhpcy5idWZmZXJDb2RlY0V2ZW50c0V4cGVjdGVkPXRoaXMuX2J1ZmZlckNvZGVjRXZlbnRzVG90YWw9MCx0aGlzLmRldGFpbHM9bnVsbH0sdC5vbk1hbmlmZXN0UGFyc2VkPWZ1bmN0aW9uKGUsdCl7dmFyIHI9Mjt0LmF1ZGlvJiYhdC52aWRlb3x8dC5hbHRBdWRpbyxyPTEsdGhpcy5idWZmZXJDb2RlY0V2ZW50c0V4cGVjdGVkPXRoaXMuX2J1ZmZlckNvZGVjRXZlbnRzVG90YWw9cix0aGlzLmxvZyh0aGlzLmJ1ZmZlckNvZGVjRXZlbnRzRXhwZWN0ZWQrIiBidWZmZXJDb2RlYyBldmVudChzKSBleHBlY3RlZCIpfSx0Lm9uTWVkaWFBdHRhY2hpbmc9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLm1lZGlhPXQubWVkaWEsaT1DZSh0aGlzLmFwcGVuZFNvdXJjZSk7aWYociYmaSl7dmFyIGEsbj10aGlzLm1lZGlhU291cmNlPW5ldyBpO3RoaXMubG9nKCJjcmVhdGVkIG1lZGlhIHNvdXJjZTogIisobnVsbD09KGE9bi5jb25zdHJ1Y3Rvcik/dm9pZCAwOmEubmFtZSkpLG4uYWRkRXZlbnRMaXN0ZW5lcigic291cmNlb3BlbiIsdGhpcy5fb25NZWRpYVNvdXJjZU9wZW4pLG4uYWRkRXZlbnRMaXN0ZW5lcigic291cmNlZW5kZWQiLHRoaXMuX29uTWVkaWFTb3VyY2VFbmRlZCksbi5hZGRFdmVudExpc3RlbmVyKCJzb3VyY2VjbG9zZSIsdGhpcy5fb25NZWRpYVNvdXJjZUNsb3NlKSx0aGlzLmFwcGVuZFNvdXJjZSYmKG4uYWRkRXZlbnRMaXN0ZW5lcigic3RhcnRzdHJlYW1pbmciLHRoaXMuX29uU3RhcnRTdHJlYW1pbmcpLG4uYWRkRXZlbnRMaXN0ZW5lcigiZW5kc3RyZWFtaW5nIix0aGlzLl9vbkVuZFN0cmVhbWluZykpO3ZhciBzPXRoaXMuX29iamVjdFVybD1zZWxmLlVSTC5jcmVhdGVPYmplY3RVUkwobik7aWYodGhpcy5hcHBlbmRTb3VyY2UpdHJ5e3IucmVtb3ZlQXR0cmlidXRlKCJzcmMiKTt2YXIgbz1zZWxmLk1hbmFnZWRNZWRpYVNvdXJjZTtyLmRpc2FibGVSZW1vdGVQbGF5YmFjaz1yLmRpc2FibGVSZW1vdGVQbGF5YmFja3x8byYmbiBpbnN0YW5jZW9mIG8sZnIociksZnVuY3Rpb24oZSx0KXt2YXIgcj1zZWxmLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNvdXJjZSIpO3IudHlwZT0idmlkZW8vbXA0IixyLnNyYz10LGUuYXBwZW5kQ2hpbGQocil9KHIscyksci5sb2FkKCl9Y2F0Y2goZSl7ci5zcmM9c31lbHNlIHIuc3JjPXM7ci5hZGRFdmVudExpc3RlbmVyKCJlbXB0aWVkIix0aGlzLl9vbk1lZGlhRW1wdGllZCl9fSx0Lm9uTWVkaWFEZXRhY2hpbmc9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1lZGlhLHQ9dGhpcy5tZWRpYVNvdXJjZSxyPXRoaXMuX29iamVjdFVybDtpZih0KXtpZih0aGlzLmxvZygibWVkaWEgc291cmNlIGRldGFjaGluZyIpLCJvcGVuIj09PXQucmVhZHlTdGF0ZSl0cnl7dC5lbmRPZlN0cmVhbSgpfWNhdGNoKGUpe3RoaXMud2Fybigib25NZWRpYURldGFjaGluZzogIitlLm1lc3NhZ2UrIiB3aGlsZSBjYWxsaW5nIGVuZE9mU3RyZWFtIil9dGhpcy5vbkJ1ZmZlclJlc2V0KCksdC5yZW1vdmVFdmVudExpc3RlbmVyKCJzb3VyY2VvcGVuIix0aGlzLl9vbk1lZGlhU291cmNlT3BlbiksdC5yZW1vdmVFdmVudExpc3RlbmVyKCJzb3VyY2VlbmRlZCIsdGhpcy5fb25NZWRpYVNvdXJjZUVuZGVkKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoInNvdXJjZWNsb3NlIix0aGlzLl9vbk1lZGlhU291cmNlQ2xvc2UpLHRoaXMuYXBwZW5kU291cmNlJiYodC5yZW1vdmVFdmVudExpc3RlbmVyKCJzdGFydHN0cmVhbWluZyIsdGhpcy5fb25TdGFydFN0cmVhbWluZyksdC5yZW1vdmVFdmVudExpc3RlbmVyKCJlbmRzdHJlYW1pbmciLHRoaXMuX29uRW5kU3RyZWFtaW5nKSksZSYmKGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZW1wdGllZCIsdGhpcy5fb25NZWRpYUVtcHRpZWQpLHImJnNlbGYuVVJMLnJldm9rZU9iamVjdFVSTChyKSx0aGlzLm1lZGlhU3JjPT09cj8oZS5yZW1vdmVBdHRyaWJ1dGUoInNyYyIpLHRoaXMuYXBwZW5kU291cmNlJiZmcihlKSxlLmxvYWQoKSk6dGhpcy53YXJuKCJtZWRpYXxzb3VyY2Uuc3JjIHdhcyBjaGFuZ2VkIGJ5IGEgdGhpcmQgcGFydHkgLSBza2lwIGNsZWFudXAiKSksdGhpcy5tZWRpYVNvdXJjZT1udWxsLHRoaXMubWVkaWE9bnVsbCx0aGlzLl9vYmplY3RVcmw9bnVsbCx0aGlzLmJ1ZmZlckNvZGVjRXZlbnRzRXhwZWN0ZWQ9dGhpcy5fYnVmZmVyQ29kZWNFdmVudHNUb3RhbCx0aGlzLnBlbmRpbmdUcmFja3M9e30sdGhpcy50cmFja3M9e319dGhpcy5obHMudHJpZ2dlcihFLk1FRElBX0RFVEFDSEVELHZvaWQgMCl9LHQub25CdWZmZXJSZXNldD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5nZXRTb3VyY2VCdWZmZXJUeXBlcygpLmZvckVhY2goKGZ1bmN0aW9uKHQpe2UucmVzZXRCdWZmZXIodCl9KSksdGhpcy5faW5pdFNvdXJjZUJ1ZmZlcigpLHRoaXMuaGxzLnJlc3VtZUJ1ZmZlcmluZygpfSx0LnJlc2V0QnVmZmVyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc291cmNlQnVmZmVyW2VdO3RyeXt2YXIgcjt0JiYodGhpcy5yZW1vdmVCdWZmZXJMaXN0ZW5lcnMoZSksdGhpcy5zb3VyY2VCdWZmZXJbZV09dm9pZCAwLG51bGwhPShyPXRoaXMubWVkaWFTb3VyY2UpJiZyLnNvdXJjZUJ1ZmZlcnMubGVuZ3RoJiZ0aGlzLm1lZGlhU291cmNlLnJlbW92ZVNvdXJjZUJ1ZmZlcih0KSl9Y2F0Y2godCl7dGhpcy53YXJuKCJvbkJ1ZmZlclJlc2V0ICIrZSx0KX19LHQub25CdWZmZXJDb2RlY3M9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLGk9dGhpcy5nZXRTb3VyY2VCdWZmZXJUeXBlcygpLmxlbmd0aCxhPU9iamVjdC5rZXlzKHQpO2lmKGEuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoaSl7dmFyIGE9ci50cmFja3NbZV07aWYoYSYmImZ1bmN0aW9uIj09dHlwZW9mIGEuYnVmZmVyLmNoYW5nZVR5cGUpe3ZhciBuLHM9dFtlXSxvPXMuaWQsbD1zLmNvZGVjLHU9cy5sZXZlbENvZGVjLGQ9cy5jb250YWluZXIsaD1zLm1ldGFkYXRhLGY9SGUoYS5jb2RlYyxhLmxldmVsQ29kZWMpLGM9bnVsbD09Zj92b2lkIDA6Zi5yZXBsYWNlKGRyLCIkMSIpLHY9SGUobCx1KSxnPW51bGw9PShuPXYpP3ZvaWQgMDpuLnJlcGxhY2UoZHIsIiQxIik7aWYodiYmYyE9PWcpeyJhdWRpbyI9PT1lLnNsaWNlKDAsNSkmJih2PUdlKHYsci5hcHBlbmRTb3VyY2UpKTt2YXIgbT1kKyI7Y29kZWNzPSIrdjtyLmFwcGVuZENoYW5nZVR5cGUoZSxtKSxyLmxvZygic3dpdGNoaW5nIGNvZGVjICIrZisiIHRvICIrdiksci50cmFja3NbZV09e2J1ZmZlcjphLmJ1ZmZlcixjb2RlYzpsLGNvbnRhaW5lcjpkLGxldmVsQ29kZWM6dSxtZXRhZGF0YTpoLGlkOm99fX19ZWxzZSByLnBlbmRpbmdUcmFja3NbZV09dFtlXX0pKSwhaSl7dmFyIG49TWF0aC5tYXgodGhpcy5idWZmZXJDb2RlY0V2ZW50c0V4cGVjdGVkLTEsMCk7dGhpcy5idWZmZXJDb2RlY0V2ZW50c0V4cGVjdGVkIT09biYmKHRoaXMubG9nKG4rIiBidWZmZXJDb2RlYyBldmVudChzKSBleHBlY3RlZCAiK2Euam9pbigiLCIpKSx0aGlzLmJ1ZmZlckNvZGVjRXZlbnRzRXhwZWN0ZWQ9biksdGhpcy5tZWRpYVNvdXJjZSYmIm9wZW4iPT09dGhpcy5tZWRpYVNvdXJjZS5yZWFkeVN0YXRlJiZ0aGlzLmNoZWNrUGVuZGluZ1RyYWNrcygpfX0sdC5hcHBlbmRDaGFuZ2VUeXBlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxpPXRoaXMub3BlcmF0aW9uUXVldWUsYT17ZXhlY3V0ZTpmdW5jdGlvbigpe3ZhciBhPXIuc291cmNlQnVmZmVyW2VdO2EmJihyLmxvZygiY2hhbmdpbmcgIitlKyIgc291cmNlQnVmZmVyIHR5cGUgdG8gIit0KSxhLmNoYW5nZVR5cGUodCkpLGkuc2hpZnRBbmRFeGVjdXRlTmV4dChlKX0sb25TdGFydDpmdW5jdGlvbigpe30sb25Db21wbGV0ZTpmdW5jdGlvbigpe30sb25FcnJvcjpmdW5jdGlvbih0KXtyLndhcm4oIkZhaWxlZCB0byBjaGFuZ2UgIitlKyIgU291cmNlQnVmZmVyIHR5cGUiLHQpfX07aS5hcHBlbmQoYSxlLCEhdGhpcy5wZW5kaW5nVHJhY2tzW2VdKX0sdC5vbkJ1ZmZlckFwcGVuZGluZz1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsaT10aGlzLmhscyxhPXRoaXMub3BlcmF0aW9uUXVldWUsbj10aGlzLnRyYWNrcyxzPXQuZGF0YSxvPXQudHlwZSxsPXQuZnJhZyx1PXQucGFydCxkPXQuY2h1bmtNZXRhLGg9ZC5idWZmZXJpbmdbb10sZj1zZWxmLnBlcmZvcm1hbmNlLm5vdygpO2guc3RhcnQ9Zjt2YXIgYz1sLnN0YXRzLmJ1ZmZlcmluZyx2PXU/dS5zdGF0cy5idWZmZXJpbmc6bnVsbDswPT09Yy5zdGFydCYmKGMuc3RhcnQ9ZiksdiYmMD09PXYuc3RhcnQmJih2LnN0YXJ0PWYpO3ZhciBnPW4uYXVkaW8sbT0hMTsiYXVkaW8iPT09byYmImF1ZGlvL21wZWciPT09KG51bGw9PWc/dm9pZCAwOmcuY29udGFpbmVyKSYmKG09IXRoaXMubGFzdE1wZWdBdWRpb0NodW5rfHwxPT09ZC5pZHx8dGhpcy5sYXN0TXBlZ0F1ZGlvQ2h1bmsuc24hPT1kLnNuLHRoaXMubGFzdE1wZWdBdWRpb0NodW5rPWQpO3ZhciBwPWwuc3RhcnQseT17ZXhlY3V0ZTpmdW5jdGlvbigpe2lmKGguZXhlY3V0ZVN0YXJ0PXNlbGYucGVyZm9ybWFuY2Uubm93KCksbSl7dmFyIGU9ci5zb3VyY2VCdWZmZXJbb107aWYoZSl7dmFyIHQ9cC1lLnRpbWVzdGFtcE9mZnNldDtNYXRoLmFicyh0KT49LjEmJihyLmxvZygiVXBkYXRpbmcgYXVkaW8gU291cmNlQnVmZmVyIHRpbWVzdGFtcE9mZnNldCB0byAiK3ArIiAoZGVsdGE6ICIrdCsiKSBzbjogIitsLnNuKyIpIiksZS50aW1lc3RhbXBPZmZzZXQ9cCl9fXIuYXBwZW5kRXhlY3V0b3IocyxvKX0sb25TdGFydDpmdW5jdGlvbigpe30sb25Db21wbGV0ZTpmdW5jdGlvbigpe3ZhciBlPXNlbGYucGVyZm9ybWFuY2Uubm93KCk7aC5leGVjdXRlRW5kPWguZW5kPWUsMD09PWMuZmlyc3QmJihjLmZpcnN0PWUpLHYmJjA9PT12LmZpcnN0JiYodi5maXJzdD1lKTt2YXIgdD1yLnNvdXJjZUJ1ZmZlcixpPXt9O2Zvcih2YXIgYSBpbiB0KWlbYV09bHIuZ2V0QnVmZmVyZWQodFthXSk7ci5hcHBlbmRFcnJvcnNbb109MCwiYXVkaW8iPT09b3x8InZpZGVvIj09PW8/ci5hcHBlbmRFcnJvcnMuYXVkaW92aWRlbz0wOihyLmFwcGVuZEVycm9ycy5hdWRpbz0wLHIuYXBwZW5kRXJyb3JzLnZpZGVvPTApLHIuaGxzLnRyaWdnZXIoRS5CVUZGRVJfQVBQRU5ERUQse3R5cGU6byxmcmFnOmwscGFydDp1LGNodW5rTWV0YTpkLHBhcmVudDpsLnR5cGUsdGltZVJhbmdlczppfSl9LG9uRXJyb3I6ZnVuY3Rpb24oZSl7dmFyIHQ9e3R5cGU6VC5NRURJQV9FUlJPUixwYXJlbnQ6bC50eXBlLGRldGFpbHM6Uy5CVUZGRVJfQVBQRU5EX0VSUk9SLHNvdXJjZUJ1ZmZlck5hbWU6byxmcmFnOmwscGFydDp1LGNodW5rTWV0YTpkLGVycm9yOmUsZXJyOmUsZmF0YWw6ITF9O2lmKGUuY29kZT09PURPTUV4Y2VwdGlvbi5RVU9UQV9FWENFRURFRF9FUlIpdC5kZXRhaWxzPVMuQlVGRkVSX0ZVTExfRVJST1I7ZWxzZXt2YXIgYT0rK3IuYXBwZW5kRXJyb3JzW29dO3QuZGV0YWlscz1TLkJVRkZFUl9BUFBFTkRfRVJST1Isci53YXJuKCJGYWlsZWQgIithKyIvIitpLmNvbmZpZy5hcHBlbmRFcnJvck1heFJldHJ5KycgdGltZXMgdG8gYXBwZW5kIHNlZ21lbnQgaW4gIicrbysnIiBzb3VyY2VCdWZmZXInKSxhPj1pLmNvbmZpZy5hcHBlbmRFcnJvck1heFJldHJ5JiYodC5mYXRhbD0hMCl9aS50cmlnZ2VyKEUuRVJST1IsdCl9fTthLmFwcGVuZCh5LG8sISF0aGlzLnBlbmRpbmdUcmFja3Nbb10pfSx0Lm9uQnVmZmVyRmx1c2hpbmc9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLGk9dGhpcy5vcGVyYXRpb25RdWV1ZSxhPWZ1bmN0aW9uKGUpe3JldHVybntleGVjdXRlOnIucmVtb3ZlRXhlY3V0b3IuYmluZChyLGUsdC5zdGFydE9mZnNldCx0LmVuZE9mZnNldCksb25TdGFydDpmdW5jdGlvbigpe30sb25Db21wbGV0ZTpmdW5jdGlvbigpe3IuaGxzLnRyaWdnZXIoRS5CVUZGRVJfRkxVU0hFRCx7dHlwZTplfSl9LG9uRXJyb3I6ZnVuY3Rpb24odCl7ci53YXJuKCJGYWlsZWQgdG8gcmVtb3ZlIGZyb20gIitlKyIgU291cmNlQnVmZmVyIix0KX19fTt0LnR5cGU/aS5hcHBlbmQoYSh0LnR5cGUpLHQudHlwZSk6dGhpcy5nZXRTb3VyY2VCdWZmZXJUeXBlcygpLmZvckVhY2goKGZ1bmN0aW9uKGUpe2kuYXBwZW5kKGEoZSksZSl9KSl9LHQub25GcmFnUGFyc2VkPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxpPXQuZnJhZyxhPXQucGFydCxuPVtdLHM9YT9hLmVsZW1lbnRhcnlTdHJlYW1zOmkuZWxlbWVudGFyeVN0cmVhbXM7c1tNXT9uLnB1c2goImF1ZGlvdmlkZW8iKTooc1tGXSYmbi5wdXNoKCJhdWRpbyIpLHNbT10mJm4ucHVzaCgidmlkZW8iKSksMD09PW4ubGVuZ3RoJiZ0aGlzLndhcm4oIkZyYWdtZW50cyBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIEVsZW1lbnRhcnlTdHJlYW1UeXBlIHNldC4gdHlwZTogIitpLnR5cGUrIiBsZXZlbDogIitpLmxldmVsKyIgc246ICIraS5zbiksdGhpcy5ibG9ja0J1ZmZlcnMoKGZ1bmN0aW9uKCl7dmFyIGU9c2VsZi5wZXJmb3JtYW5jZS5ub3coKTtpLnN0YXRzLmJ1ZmZlcmluZy5lbmQ9ZSxhJiYoYS5zdGF0cy5idWZmZXJpbmcuZW5kPWUpO3ZhciB0PWE/YS5zdGF0czppLnN0YXRzO3IuaGxzLnRyaWdnZXIoRS5GUkFHX0JVRkZFUkVELHtmcmFnOmkscGFydDphLHN0YXRzOnQsaWQ6aS50eXBlfSl9KSxuKX0sdC5vbkZyYWdDaGFuZ2VkPWZ1bmN0aW9uKGUsdCl7dGhpcy50cmltQnVmZmVycygpfSx0Lm9uQnVmZmVyRW9zPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpczt0aGlzLmdldFNvdXJjZUJ1ZmZlclR5cGVzKCkucmVkdWNlKChmdW5jdGlvbihlLGkpe3ZhciBhPXIuc291cmNlQnVmZmVyW2ldO3JldHVybiFhfHx0LnR5cGUmJnQudHlwZSE9PWl8fChhLmVuZGluZz0hMCxhLmVuZGVkfHwoYS5lbmRlZD0hMCxyLmxvZyhpKyIgc291cmNlQnVmZmVyIG5vdyBFT1MiKSkpLGUmJiEoYSYmIWEuZW5kZWQpfSksITApJiYodGhpcy5sb2coIlF1ZXVlaW5nIG1lZGlhU291cmNlLmVuZE9mU3RyZWFtKCkiKSx0aGlzLmJsb2NrQnVmZmVycygoZnVuY3Rpb24oKXtyLmdldFNvdXJjZUJ1ZmZlclR5cGVzKCkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ci5zb3VyY2VCdWZmZXJbZV07dCYmKHQuZW5kaW5nPSExKX0pKTt2YXIgZT1yLm1lZGlhU291cmNlO2UmJiJvcGVuIj09PWUucmVhZHlTdGF0ZT8oci5sb2coIkNhbGxpbmcgbWVkaWFTb3VyY2UuZW5kT2ZTdHJlYW0oKSIpLGUuZW5kT2ZTdHJlYW0oKSk6ZSYmci5sb2coIkNvdWxkIG5vdCBjYWxsIG1lZGlhU291cmNlLmVuZE9mU3RyZWFtKCkuIG1lZGlhU291cmNlLnJlYWR5U3RhdGU6ICIrZS5yZWFkeVN0YXRlKX0pKSl9LHQub25MZXZlbFVwZGF0ZWQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10LmRldGFpbHM7ci5mcmFnbWVudHMubGVuZ3RoJiYodGhpcy5kZXRhaWxzPXIsdGhpcy5nZXRTb3VyY2VCdWZmZXJUeXBlcygpLmxlbmd0aD90aGlzLmJsb2NrQnVmZmVycyh0aGlzLnVwZGF0ZU1lZGlhRWxlbWVudER1cmF0aW9uLmJpbmQodGhpcykpOnRoaXMudXBkYXRlTWVkaWFFbGVtZW50RHVyYXRpb24oKSl9LHQudHJpbUJ1ZmZlcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmhscyx0PXRoaXMuZGV0YWlscyxyPXRoaXMubWVkaWE7aWYociYmbnVsbCE9PXQmJnRoaXMuZ2V0U291cmNlQnVmZmVyVHlwZXMoKS5sZW5ndGgpe3ZhciBpPWUuY29uZmlnLGE9ci5jdXJyZW50VGltZSxuPXQubGV2ZWxUYXJnZXREdXJhdGlvbixzPXQubGl2ZSYmbnVsbCE9PWkubGl2ZUJhY2tCdWZmZXJMZW5ndGg/aS5saXZlQmFja0J1ZmZlckxlbmd0aDppLmJhY2tCdWZmZXJMZW5ndGg7aWYobShzKSYmcz4wKXt2YXIgbz1NYXRoLm1heChzLG4pLGw9TWF0aC5mbG9vcihhL24pKm4tbzt0aGlzLmZsdXNoQmFja0J1ZmZlcihhLG4sbCl9aWYobShpLmZyb250QnVmZmVyRmx1c2hUaHJlc2hvbGQpJiZpLmZyb250QnVmZmVyRmx1c2hUaHJlc2hvbGQ+MCl7dmFyIHU9TWF0aC5tYXgoaS5tYXhCdWZmZXJMZW5ndGgsaS5mcm9udEJ1ZmZlckZsdXNoVGhyZXNob2xkKSxkPU1hdGgubWF4KHUsbiksaD1NYXRoLmZsb29yKGEvbikqbitkO3RoaXMuZmx1c2hGcm9udEJ1ZmZlcihhLG4saCl9fX0sdC5mbHVzaEJhY2tCdWZmZXI9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMsYT10aGlzLmRldGFpbHMsbj10aGlzLnNvdXJjZUJ1ZmZlcjt0aGlzLmdldFNvdXJjZUJ1ZmZlclR5cGVzKCkuZm9yRWFjaCgoZnVuY3Rpb24ocyl7dmFyIG89bltzXTtpZihvKXt2YXIgbD1sci5nZXRCdWZmZXJlZChvKTtpZihsLmxlbmd0aD4wJiZyPmwuc3RhcnQoMCkpe2lmKGkuaGxzLnRyaWdnZXIoRS5CQUNLX0JVRkZFUl9SRUFDSEVELHtidWZmZXJFbmQ6cn0pLG51bGwhPWEmJmEubGl2ZSlpLmhscy50cmlnZ2VyKEUuTElWRV9CQUNLX0JVRkZFUl9SRUFDSEVELHtidWZmZXJFbmQ6cn0pO2Vsc2UgaWYoby5lbmRlZCYmbC5lbmQobC5sZW5ndGgtMSktZTwyKnQpcmV0dXJuIHZvaWQgaS5sb2coIkNhbm5vdCBmbHVzaCAiK3MrIiBiYWNrIGJ1ZmZlciB3aGlsZSBTb3VyY2VCdWZmZXIgaXMgaW4gZW5kZWQgc3RhdGUiKTtpLmhscy50cmlnZ2VyKEUuQlVGRkVSX0ZMVVNISU5HLHtzdGFydE9mZnNldDowLGVuZE9mZnNldDpyLHR5cGU6c30pfX19KSl9LHQuZmx1c2hGcm9udEJ1ZmZlcj1mdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyxhPXRoaXMuc291cmNlQnVmZmVyO3RoaXMuZ2V0U291cmNlQnVmZmVyVHlwZXMoKS5mb3JFYWNoKChmdW5jdGlvbihuKXt2YXIgcz1hW25dO2lmKHMpe3ZhciBvPWxyLmdldEJ1ZmZlcmVkKHMpLGw9by5sZW5ndGg7aWYobDwyKXJldHVybjt2YXIgdT1vLnN0YXJ0KGwtMSksZD1vLmVuZChsLTEpO2lmKHI+dXx8ZT49dSYmZTw9ZClyZXR1cm47aWYocy5lbmRlZCYmZS1kPDIqdClyZXR1cm4gdm9pZCBpLmxvZygiQ2Fubm90IGZsdXNoICIrbisiIGZyb250IGJ1ZmZlciB3aGlsZSBTb3VyY2VCdWZmZXIgaXMgaW4gZW5kZWQgc3RhdGUiKTtpLmhscy50cmlnZ2VyKEUuQlVGRkVSX0ZMVVNISU5HLHtzdGFydE9mZnNldDp1LGVuZE9mZnNldDoxLzAsdHlwZTpufSl9fSkpfSx0LnVwZGF0ZU1lZGlhRWxlbWVudER1cmF0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5kZXRhaWxzJiZ0aGlzLm1lZGlhJiZ0aGlzLm1lZGlhU291cmNlJiYib3BlbiI9PT10aGlzLm1lZGlhU291cmNlLnJlYWR5U3RhdGUpe3ZhciBlPXRoaXMuZGV0YWlscyx0PXRoaXMuaGxzLHI9dGhpcy5tZWRpYSxpPXRoaXMubWVkaWFTb3VyY2UsYT1lLmZyYWdtZW50c1swXS5zdGFydCtlLnRvdGFsZHVyYXRpb24sbj1yLmR1cmF0aW9uLHM9bShpLmR1cmF0aW9uKT9pLmR1cmF0aW9uOjA7ZS5saXZlJiZ0LmNvbmZpZy5saXZlRHVyYXRpb25JbmZpbml0eT8oaS5kdXJhdGlvbj0xLzAsdGhpcy51cGRhdGVTZWVrYWJsZVJhbmdlKGUpKTooYT5zJiZhPm58fCFtKG4pKSYmKHRoaXMubG9nKCJVcGRhdGluZyBNZWRpYSBTb3VyY2UgZHVyYXRpb24gdG8gIithLnRvRml4ZWQoMykpLGkuZHVyYXRpb249YSl9fSx0LnVwZGF0ZVNlZWthYmxlUmFuZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5tZWRpYVNvdXJjZSxyPWUuZnJhZ21lbnRzO2lmKHIubGVuZ3RoJiZlLmxpdmUmJm51bGwhPXQmJnQuc2V0TGl2ZVNlZWthYmxlUmFuZ2Upe3ZhciBpPU1hdGgubWF4KDAsclswXS5zdGFydCksYT1NYXRoLm1heChpLGkrZS50b3RhbGR1cmF0aW9uKTt0aGlzLmxvZygiTWVkaWEgU291cmNlIGR1cmF0aW9uIGlzIHNldCB0byAiK3QuZHVyYXRpb24rIi4gU2V0dGluZyBzZWVrYWJsZSByYW5nZSB0byAiK2krIi0iK2ErIi4iKSx0LnNldExpdmVTZWVrYWJsZVJhbmdlKGksYSl9fSx0LmNoZWNrUGVuZGluZ1RyYWNrcz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuYnVmZmVyQ29kZWNFdmVudHNFeHBlY3RlZCx0PXRoaXMub3BlcmF0aW9uUXVldWUscj10aGlzLnBlbmRpbmdUcmFja3MsaT1PYmplY3Qua2V5cyhyKS5sZW5ndGg7aWYoaSYmKCFlfHwyPT09aXx8ImF1ZGlvdmlkZW8iaW4gcikpe3RoaXMuY3JlYXRlU291cmNlQnVmZmVycyhyKSx0aGlzLnBlbmRpbmdUcmFja3M9e307dmFyIGE9dGhpcy5nZXRTb3VyY2VCdWZmZXJUeXBlcygpO2lmKGEubGVuZ3RoKXRoaXMuaGxzLnRyaWdnZXIoRS5CVUZGRVJfQ1JFQVRFRCx7dHJhY2tzOnRoaXMudHJhY2tzfSksYS5mb3JFYWNoKChmdW5jdGlvbihlKXt0LmV4ZWN1dGVOZXh0KGUpfSkpO2Vsc2V7dmFyIG49bmV3IEVycm9yKCJjb3VsZCBub3QgY3JlYXRlIHNvdXJjZSBidWZmZXIgZm9yIG1lZGlhIGNvZGVjKHMpIik7dGhpcy5obHMudHJpZ2dlcihFLkVSUk9SLHt0eXBlOlQuTUVESUFfRVJST1IsZGV0YWlsczpTLkJVRkZFUl9JTkNPTVBBVElCTEVfQ09ERUNTX0VSUk9SLGZhdGFsOiEwLGVycm9yOm4scmVhc29uOm4ubWVzc2FnZX0pfX19LHQuY3JlYXRlU291cmNlQnVmZmVycz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dGhpcy5zb3VyY2VCdWZmZXIsaT10aGlzLm1lZGlhU291cmNlO2lmKCFpKXRocm93IEVycm9yKCJjcmVhdGVTb3VyY2VCdWZmZXJzIGNhbGxlZCB3aGVuIG1lZGlhU291cmNlIHdhcyBudWxsIik7dmFyIGE9ZnVuY3Rpb24oYSl7aWYoIXJbYV0pe3ZhciBuLHM9ZVthXTtpZighcyl0aHJvdyBFcnJvcigic291cmNlIGJ1ZmZlciBleGlzdHMgZm9yIHRyYWNrICIrYSsiLCBob3dldmVyIHRyYWNrIGRvZXMgbm90Iik7dmFyIG89LTE9PT0obnVsbD09KG49cy5sZXZlbENvZGVjKT92b2lkIDA6bi5pbmRleE9mKCIsIikpP3MubGV2ZWxDb2RlYzpzLmNvZGVjO28mJiJhdWRpbyI9PT1hLnNsaWNlKDAsNSkmJihvPUdlKG8sdC5hcHBlbmRTb3VyY2UpKTt2YXIgbD1zLmNvbnRhaW5lcisiO2NvZGVjcz0iK287dC5sb2coImNyZWF0aW5nIHNvdXJjZUJ1ZmZlcigiK2wrIikiKTt0cnl7dmFyIHU9clthXT1pLmFkZFNvdXJjZUJ1ZmZlcihsKSxkPWE7dC5hZGRCdWZmZXJMaXN0ZW5lcihkLCJ1cGRhdGVzdGFydCIsdC5fb25TQlVwZGF0ZVN0YXJ0KSx0LmFkZEJ1ZmZlckxpc3RlbmVyKGQsInVwZGF0ZWVuZCIsdC5fb25TQlVwZGF0ZUVuZCksdC5hZGRCdWZmZXJMaXN0ZW5lcihkLCJlcnJvciIsdC5fb25TQlVwZGF0ZUVycm9yKSx0LmFwcGVuZFNvdXJjZSYmdC5hZGRCdWZmZXJMaXN0ZW5lcihkLCJidWZmZXJlZGNoYW5nZSIsKGZ1bmN0aW9uKGUscil7dmFyIGk9ci5yZW1vdmVkUmFuZ2VzO251bGwhPWkmJmkubGVuZ3RoJiZ0Lmhscy50cmlnZ2VyKEUuQlVGRkVSX0ZMVVNIRUQse3R5cGU6YX0pfSkpLHQudHJhY2tzW2FdPXtidWZmZXI6dSxjb2RlYzpvLGNvbnRhaW5lcjpzLmNvbnRhaW5lcixsZXZlbENvZGVjOnMubGV2ZWxDb2RlYyxtZXRhZGF0YTpzLm1ldGFkYXRhLGlkOnMuaWR9fWNhdGNoKGUpe3QuZXJyb3IoImVycm9yIHdoaWxlIHRyeWluZyB0byBhZGQgc291cmNlQnVmZmVyOiAiK2UubWVzc2FnZSksdC5obHMudHJpZ2dlcihFLkVSUk9SLHt0eXBlOlQuTUVESUFfRVJST1IsZGV0YWlsczpTLkJVRkZFUl9BRERfQ09ERUNfRVJST1IsZmF0YWw6ITEsZXJyb3I6ZSxzb3VyY2VCdWZmZXJOYW1lOmEsbWltZVR5cGU6bH0pfX19O2Zvcih2YXIgbiBpbiBlKWEobil9LHQuX29uU0JVcGRhdGVTdGFydD1mdW5jdGlvbihlKXt0aGlzLm9wZXJhdGlvblF1ZXVlLmN1cnJlbnQoZSkub25TdGFydCgpfSx0Ll9vblNCVXBkYXRlRW5kPWZ1bmN0aW9uKGUpe3ZhciB0O2lmKCJjbG9zZWQiIT09KG51bGw9PSh0PXRoaXMubWVkaWFTb3VyY2UpP3ZvaWQgMDp0LnJlYWR5U3RhdGUpKXt2YXIgcj10aGlzLm9wZXJhdGlvblF1ZXVlO3IuY3VycmVudChlKS5vbkNvbXBsZXRlKCksci5zaGlmdEFuZEV4ZWN1dGVOZXh0KGUpfWVsc2UgdGhpcy5yZXNldEJ1ZmZlcihlKX0sdC5fb25TQlVwZGF0ZUVycm9yPWZ1bmN0aW9uKGUsdCl7dmFyIHIsaT1uZXcgRXJyb3IoZSsiIFNvdXJjZUJ1ZmZlciBlcnJvci4gTWVkaWFTb3VyY2UgcmVhZHlTdGF0ZTogIisobnVsbD09KHI9dGhpcy5tZWRpYVNvdXJjZSk/dm9pZCAwOnIucmVhZHlTdGF0ZSkpO3RoaXMuZXJyb3IoIiIraSx0KSx0aGlzLmhscy50cmlnZ2VyKEUuRVJST1Ise3R5cGU6VC5NRURJQV9FUlJPUixkZXRhaWxzOlMuQlVGRkVSX0FQUEVORElOR19FUlJPUixzb3VyY2VCdWZmZXJOYW1lOmUsZXJyb3I6aSxmYXRhbDohMX0pO3ZhciBhPXRoaXMub3BlcmF0aW9uUXVldWUuY3VycmVudChlKTthJiZhLm9uRXJyb3IoaSl9LHQucmVtb3ZlRXhlY3V0b3I9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMubWVkaWEsYT10aGlzLm1lZGlhU291cmNlLG49dGhpcy5vcGVyYXRpb25RdWV1ZSxzPXRoaXMuc291cmNlQnVmZmVyW2VdO2lmKCFpfHwhYXx8IXMpcmV0dXJuIHRoaXMud2FybigiQXR0ZW1wdGluZyB0byByZW1vdmUgZnJvbSB0aGUgIitlKyIgU291cmNlQnVmZmVyLCBidXQgaXQgZG9lcyBub3QgZXhpc3QiKSx2b2lkIG4uc2hpZnRBbmRFeGVjdXRlTmV4dChlKTt2YXIgbz1tKGkuZHVyYXRpb24pP2kuZHVyYXRpb246MS8wLGw9bShhLmR1cmF0aW9uKT9hLmR1cmF0aW9uOjEvMCx1PU1hdGgubWF4KDAsdCksZD1NYXRoLm1pbihyLG8sbCk7ZD51JiYoIXMuZW5kaW5nfHxzLmVuZGVkKT8ocy5lbmRlZD0hMSx0aGlzLmxvZygiUmVtb3ZpbmcgWyIrdSsiLCIrZCsiXSBmcm9tIHRoZSAiK2UrIiBTb3VyY2VCdWZmZXIiKSxzLnJlbW92ZSh1LGQpKTpuLnNoaWZ0QW5kRXhlY3V0ZU5leHQoZSl9LHQuYXBwZW5kRXhlY3V0b3I9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLnNvdXJjZUJ1ZmZlclt0XTtpZihyKXIuZW5kZWQ9ITEsci5hcHBlbmRCdWZmZXIoZSk7ZWxzZSBpZighdGhpcy5wZW5kaW5nVHJhY2tzW3RdKXRocm93IG5ldyBFcnJvcigiQXR0ZW1wdGluZyB0byBhcHBlbmQgdG8gdGhlICIrdCsiIFNvdXJjZUJ1ZmZlciwgYnV0IGl0IGRvZXMgbm90IGV4aXN0Iil9LHQuYmxvY2tCdWZmZXJzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZih2b2lkIDA9PT10JiYodD10aGlzLmdldFNvdXJjZUJ1ZmZlclR5cGVzKCkpLCF0Lmxlbmd0aClyZXR1cm4gdGhpcy5sb2coIkJsb2NraW5nIG9wZXJhdGlvbiByZXF1ZXN0ZWQsIGJ1dCBubyBTb3VyY2VCdWZmZXJzIGV4aXN0Iiksdm9pZCBQcm9taXNlLnJlc29sdmUoKS50aGVuKGUpO3ZhciBpPXRoaXMub3BlcmF0aW9uUXVldWUsYT10Lm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGkuYXBwZW5kQmxvY2tlcihlKX0pKTtQcm9taXNlLmFsbChhKS50aGVuKChmdW5jdGlvbigpe2UoKSx0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PXIuc291cmNlQnVmZmVyW2VdO251bGwhPXQmJnQudXBkYXRpbmd8fGkuc2hpZnRBbmRFeGVjdXRlTmV4dChlKX0pKX0pKX0sdC5nZXRTb3VyY2VCdWZmZXJUeXBlcz1mdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLnNvdXJjZUJ1ZmZlcil9LHQuYWRkQnVmZmVyTGlzdGVuZXI9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMuc291cmNlQnVmZmVyW2VdO2lmKGkpe3ZhciBhPXIuYmluZCh0aGlzLGUpO3RoaXMubGlzdGVuZXJzW2VdLnB1c2goe2V2ZW50OnQsbGlzdGVuZXI6YX0pLGkuYWRkRXZlbnRMaXN0ZW5lcih0LGEpfX0sdC5yZW1vdmVCdWZmZXJMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zb3VyY2VCdWZmZXJbZV07dCYmdGhpcy5saXN0ZW5lcnNbZV0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5yZW1vdmVFdmVudExpc3RlbmVyKGUuZXZlbnQsZS5saXN0ZW5lcil9KSl9LHMoZSxbe2tleToibWVkaWFTcmMiLGdldDpmdW5jdGlvbigpe3ZhciBlLHQscj0obnVsbD09KGU9dGhpcy5tZWRpYSl8fG51bGw9PSh0PWUucXVlcnlTZWxlY3Rvcik/dm9pZCAwOnQuY2FsbChlLCJzb3VyY2UiKSl8fHRoaXMubWVkaWE7cmV0dXJuIG51bGw9PXI/dm9pZCAwOnIuc3JjfX1dKSxlfSgpO2Z1bmN0aW9uIGZyKGUpe3ZhciB0PWUucXVlcnlTZWxlY3RvckFsbCgic291cmNlIik7W10uc2xpY2UuY2FsbCh0KS5mb3JFYWNoKChmdW5jdGlvbih0KXtlLnJlbW92ZUNoaWxkKHQpfSkpfXZhciBjcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5obHM9dm9pZCAwLHRoaXMuYXV0b0xldmVsQ2FwcGluZz12b2lkIDAsdGhpcy5maXJzdExldmVsPXZvaWQgMCx0aGlzLm1lZGlhPXZvaWQgMCx0aGlzLnJlc3RyaWN0ZWRMZXZlbHM9dm9pZCAwLHRoaXMudGltZXI9dm9pZCAwLHRoaXMuY2xpZW50UmVjdD12b2lkIDAsdGhpcy5zdHJlYW1Db250cm9sbGVyPXZvaWQgMCx0aGlzLmhscz1lLHRoaXMuYXV0b0xldmVsQ2FwcGluZz1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksdGhpcy5maXJzdExldmVsPS0xLHRoaXMubWVkaWE9bnVsbCx0aGlzLnJlc3RyaWN0ZWRMZXZlbHM9W10sdGhpcy50aW1lcj12b2lkIDAsdGhpcy5jbGllbnRSZWN0PW51bGwsdGhpcy5yZWdpc3Rlckxpc3RlbmVycygpfXZhciB0PWUucHJvdG90eXBlO3JldHVybiB0LnNldFN0cmVhbUNvbnRyb2xsZXI9ZnVuY3Rpb24oZSl7dGhpcy5zdHJlYW1Db250cm9sbGVyPWV9LHQuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuaGxzJiZ0aGlzLnVucmVnaXN0ZXJMaXN0ZW5lcigpLHRoaXMudGltZXImJnRoaXMuc3RvcENhcHBpbmcoKSx0aGlzLm1lZGlhPW51bGwsdGhpcy5jbGllbnRSZWN0PW51bGwsdGhpcy5obHM9dGhpcy5zdHJlYW1Db250cm9sbGVyPW51bGx9LHQucmVnaXN0ZXJMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmhscztlLm9uKEUuRlBTX0RST1BfTEVWRUxfQ0FQUElORyx0aGlzLm9uRnBzRHJvcExldmVsQ2FwcGluZyx0aGlzKSxlLm9uKEUuTUVESUFfQVRUQUNISU5HLHRoaXMub25NZWRpYUF0dGFjaGluZyx0aGlzKSxlLm9uKEUuTUFOSUZFU1RfUEFSU0VELHRoaXMub25NYW5pZmVzdFBhcnNlZCx0aGlzKSxlLm9uKEUuTEVWRUxTX1VQREFURUQsdGhpcy5vbkxldmVsc1VwZGF0ZWQsdGhpcyksZS5vbihFLkJVRkZFUl9DT0RFQ1MsdGhpcy5vbkJ1ZmZlckNvZGVjcyx0aGlzKSxlLm9uKEUuTUVESUFfREVUQUNISU5HLHRoaXMub25NZWRpYURldGFjaGluZyx0aGlzKX0sdC51bnJlZ2lzdGVyTGlzdGVuZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmhscztlLm9mZihFLkZQU19EUk9QX0xFVkVMX0NBUFBJTkcsdGhpcy5vbkZwc0Ryb3BMZXZlbENhcHBpbmcsdGhpcyksZS5vZmYoRS5NRURJQV9BVFRBQ0hJTkcsdGhpcy5vbk1lZGlhQXR0YWNoaW5nLHRoaXMpLGUub2ZmKEUuTUFOSUZFU1RfUEFSU0VELHRoaXMub25NYW5pZmVzdFBhcnNlZCx0aGlzKSxlLm9mZihFLkxFVkVMU19VUERBVEVELHRoaXMub25MZXZlbHNVcGRhdGVkLHRoaXMpLGUub2ZmKEUuQlVGRkVSX0NPREVDUyx0aGlzLm9uQnVmZmVyQ29kZWNzLHRoaXMpLGUub2ZmKEUuTUVESUFfREVUQUNISU5HLHRoaXMub25NZWRpYURldGFjaGluZyx0aGlzKX0sdC5vbkZwc0Ryb3BMZXZlbENhcHBpbmc9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmhscy5sZXZlbHNbdC5kcm9wcGVkTGV2ZWxdO3RoaXMuaXNMZXZlbEFsbG93ZWQocikmJnRoaXMucmVzdHJpY3RlZExldmVscy5wdXNoKHtiaXRyYXRlOnIuYml0cmF0ZSxoZWlnaHQ6ci5oZWlnaHQsd2lkdGg6ci53aWR0aH0pfSx0Lm9uTWVkaWFBdHRhY2hpbmc9ZnVuY3Rpb24oZSx0KXt0aGlzLm1lZGlhPXQubWVkaWEgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50P3QubWVkaWE6bnVsbCx0aGlzLmNsaWVudFJlY3Q9bnVsbCx0aGlzLnRpbWVyJiZ0aGlzLmhscy5sZXZlbHMubGVuZ3RoJiZ0aGlzLmRldGVjdFBsYXllclNpemUoKX0sdC5vbk1hbmlmZXN0UGFyc2VkPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5obHM7dGhpcy5yZXN0cmljdGVkTGV2ZWxzPVtdLHRoaXMuZmlyc3RMZXZlbD10LmZpcnN0TGV2ZWwsci5jb25maWcuY2FwTGV2ZWxUb1BsYXllclNpemUmJnQudmlkZW8mJnRoaXMuc3RhcnRDYXBwaW5nKCl9LHQub25MZXZlbHNVcGRhdGVkPWZ1bmN0aW9uKGUsdCl7dGhpcy50aW1lciYmbSh0aGlzLmF1dG9MZXZlbENhcHBpbmcpJiZ0aGlzLmRldGVjdFBsYXllclNpemUoKX0sdC5vbkJ1ZmZlckNvZGVjcz1mdW5jdGlvbihlLHQpe3RoaXMuaGxzLmNvbmZpZy5jYXBMZXZlbFRvUGxheWVyU2l6ZSYmdC52aWRlbyYmdGhpcy5zdGFydENhcHBpbmcoKX0sdC5vbk1lZGlhRGV0YWNoaW5nPWZ1bmN0aW9uKCl7dGhpcy5zdG9wQ2FwcGluZygpfSx0LmRldGVjdFBsYXllclNpemU9ZnVuY3Rpb24oKXtpZih0aGlzLm1lZGlhKXtpZih0aGlzLm1lZGlhSGVpZ2h0PD0wfHx0aGlzLm1lZGlhV2lkdGg8PTApcmV0dXJuIHZvaWQodGhpcy5jbGllbnRSZWN0PW51bGwpO3ZhciBlPXRoaXMuaGxzLmxldmVscztpZihlLmxlbmd0aCl7dmFyIHQ9dGhpcy5obHMscj10aGlzLmdldE1heExldmVsKGUubGVuZ3RoLTEpO3IhPT10aGlzLmF1dG9MZXZlbENhcHBpbmcmJkQubG9nKCJTZXR0aW5nIGF1dG9MZXZlbENhcHBpbmcgdG8gIityKyI6ICIrZVtyXS5oZWlnaHQrInBAIitlW3JdLmJpdHJhdGUrIiBmb3IgbWVkaWEgIit0aGlzLm1lZGlhV2lkdGgrIngiK3RoaXMubWVkaWFIZWlnaHQpLHQuYXV0b0xldmVsQ2FwcGluZz1yLHQuYXV0b0xldmVsQ2FwcGluZz50aGlzLmF1dG9MZXZlbENhcHBpbmcmJnRoaXMuc3RyZWFtQ29udHJvbGxlciYmdGhpcy5zdHJlYW1Db250cm9sbGVyLm5leHRMZXZlbFN3aXRjaCgpLHRoaXMuYXV0b0xldmVsQ2FwcGluZz10LmF1dG9MZXZlbENhcHBpbmd9fX0sdC5nZXRNYXhMZXZlbD1mdW5jdGlvbih0KXt2YXIgcj10aGlzLGk9dGhpcy5obHMubGV2ZWxzO2lmKCFpLmxlbmd0aClyZXR1cm4tMTt2YXIgYT1pLmZpbHRlcigoZnVuY3Rpb24oZSxpKXtyZXR1cm4gci5pc0xldmVsQWxsb3dlZChlKSYmaTw9dH0pKTtyZXR1cm4gdGhpcy5jbGllbnRSZWN0PW51bGwsZS5nZXRNYXhMZXZlbEJ5TWVkaWFTaXplKGEsdGhpcy5tZWRpYVdpZHRoLHRoaXMubWVkaWFIZWlnaHQpfSx0LnN0YXJ0Q2FwcGluZz1mdW5jdGlvbigpe3RoaXMudGltZXJ8fCh0aGlzLmF1dG9MZXZlbENhcHBpbmc9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLHNlbGYuY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKSx0aGlzLnRpbWVyPXNlbGYuc2V0SW50ZXJ2YWwodGhpcy5kZXRlY3RQbGF5ZXJTaXplLmJpbmQodGhpcyksMWUzKSx0aGlzLmRldGVjdFBsYXllclNpemUoKSl9LHQuc3RvcENhcHBpbmc9ZnVuY3Rpb24oKXt0aGlzLnJlc3RyaWN0ZWRMZXZlbHM9W10sdGhpcy5maXJzdExldmVsPS0xLHRoaXMuYXV0b0xldmVsQ2FwcGluZz1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksdGhpcy50aW1lciYmKHNlbGYuY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKSx0aGlzLnRpbWVyPXZvaWQgMCl9LHQuZ2V0RGltZW5zaW9ucz1mdW5jdGlvbigpe2lmKHRoaXMuY2xpZW50UmVjdClyZXR1cm4gdGhpcy5jbGllbnRSZWN0O3ZhciBlPXRoaXMubWVkaWEsdD17d2lkdGg6MCxoZWlnaHQ6MH07aWYoZSl7dmFyIHI9ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTt0LndpZHRoPXIud2lkdGgsdC5oZWlnaHQ9ci5oZWlnaHQsdC53aWR0aHx8dC5oZWlnaHR8fCh0LndpZHRoPXIucmlnaHQtci5sZWZ0fHxlLndpZHRofHwwLHQuaGVpZ2h0PXIuYm90dG9tLXIudG9wfHxlLmhlaWdodHx8MCl9cmV0dXJuIHRoaXMuY2xpZW50UmVjdD10LHR9LHQuaXNMZXZlbEFsbG93ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIXRoaXMucmVzdHJpY3RlZExldmVscy5zb21lKChmdW5jdGlvbih0KXtyZXR1cm4gZS5iaXRyYXRlPT09dC5iaXRyYXRlJiZlLndpZHRoPT09dC53aWR0aCYmZS5oZWlnaHQ9PT10LmhlaWdodH0pKX0sZS5nZXRNYXhMZXZlbEJ5TWVkaWFTaXplPWZ1bmN0aW9uKGUsdCxyKXtpZihudWxsPT1lfHwhZS5sZW5ndGgpcmV0dXJuLTE7Zm9yKHZhciBpLGEsbj1lLmxlbmd0aC0xLHM9TWF0aC5tYXgodCxyKSxvPTA7bzxlLmxlbmd0aDtvKz0xKXt2YXIgbD1lW29dO2lmKChsLndpZHRoPj1zfHxsLmhlaWdodD49cykmJihpPWwsIShhPWVbbysxXSl8fGkud2lkdGghPT1hLndpZHRofHxpLmhlaWdodCE9PWEuaGVpZ2h0KSl7bj1vO2JyZWFrfX1yZXR1cm4gbn0scyhlLFt7a2V5OiJtZWRpYVdpZHRoIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXREaW1lbnNpb25zKCkud2lkdGgqdGhpcy5jb250ZW50U2NhbGVGYWN0b3J9fSx7a2V5OiJtZWRpYUhlaWdodCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RGltZW5zaW9ucygpLmhlaWdodCp0aGlzLmNvbnRlbnRTY2FsZUZhY3Rvcn19LHtrZXk6ImNvbnRlbnRTY2FsZUZhY3RvciIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9MTtpZighdGhpcy5obHMuY29uZmlnLmlnbm9yZURldmljZVBpeGVsUmF0aW8pdHJ5e2U9c2VsZi5kZXZpY2VQaXhlbFJhdGlvfWNhdGNoKGUpe31yZXR1cm4gZX19XSksZX0oKSx2cj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5obHM9dm9pZCAwLHRoaXMuaXNWaWRlb1BsYXliYWNrUXVhbGl0eUF2YWlsYWJsZT0hMSx0aGlzLnRpbWVyPXZvaWQgMCx0aGlzLm1lZGlhPW51bGwsdGhpcy5sYXN0VGltZT12b2lkIDAsdGhpcy5sYXN0RHJvcHBlZEZyYW1lcz0wLHRoaXMubGFzdERlY29kZWRGcmFtZXM9MCx0aGlzLnN0cmVhbUNvbnRyb2xsZXI9dm9pZCAwLHRoaXMuaGxzPWUsdGhpcy5yZWdpc3Rlckxpc3RlbmVycygpfXZhciB0PWUucHJvdG90eXBlO3JldHVybiB0LnNldFN0cmVhbUNvbnRyb2xsZXI9ZnVuY3Rpb24oZSl7dGhpcy5zdHJlYW1Db250cm9sbGVyPWV9LHQucmVnaXN0ZXJMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt0aGlzLmhscy5vbihFLk1FRElBX0FUVEFDSElORyx0aGlzLm9uTWVkaWFBdHRhY2hpbmcsdGhpcyl9LHQudW5yZWdpc3Rlckxpc3RlbmVycz1mdW5jdGlvbigpe3RoaXMuaGxzLm9mZihFLk1FRElBX0FUVEFDSElORyx0aGlzLm9uTWVkaWFBdHRhY2hpbmcsdGhpcyl9LHQuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMudGltZXImJmNsZWFySW50ZXJ2YWwodGhpcy50aW1lciksdGhpcy51bnJlZ2lzdGVyTGlzdGVuZXJzKCksdGhpcy5pc1ZpZGVvUGxheWJhY2tRdWFsaXR5QXZhaWxhYmxlPSExLHRoaXMubWVkaWE9bnVsbH0sdC5vbk1lZGlhQXR0YWNoaW5nPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5obHMuY29uZmlnO2lmKHIuY2FwTGV2ZWxPbkZQU0Ryb3Ape3ZhciBpPXQubWVkaWEgaW5zdGFuY2VvZiBzZWxmLkhUTUxWaWRlb0VsZW1lbnQ/dC5tZWRpYTpudWxsO3RoaXMubWVkaWE9aSxpJiYiZnVuY3Rpb24iPT10eXBlb2YgaS5nZXRWaWRlb1BsYXliYWNrUXVhbGl0eSYmKHRoaXMuaXNWaWRlb1BsYXliYWNrUXVhbGl0eUF2YWlsYWJsZT0hMCksc2VsZi5jbGVhckludGVydmFsKHRoaXMudGltZXIpLHRoaXMudGltZXI9c2VsZi5zZXRJbnRlcnZhbCh0aGlzLmNoZWNrRlBTSW50ZXJ2YWwuYmluZCh0aGlzKSxyLmZwc0Ryb3BwZWRNb25pdG9yaW5nUGVyaW9kKX19LHQuY2hlY2tGUFM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXBlcmZvcm1hbmNlLm5vdygpO2lmKHQpe2lmKHRoaXMubGFzdFRpbWUpe3ZhciBhPWktdGhpcy5sYXN0VGltZSxuPXItdGhpcy5sYXN0RHJvcHBlZEZyYW1lcyxzPXQtdGhpcy5sYXN0RGVjb2RlZEZyYW1lcyxvPTFlMypuL2EsbD10aGlzLmhscztpZihsLnRyaWdnZXIoRS5GUFNfRFJPUCx7Y3VycmVudERyb3BwZWQ6bixjdXJyZW50RGVjb2RlZDpzLHRvdGFsRHJvcHBlZEZyYW1lczpyfSksbz4wJiZuPmwuY29uZmlnLmZwc0Ryb3BwZWRNb25pdG9yaW5nVGhyZXNob2xkKnMpe3ZhciB1PWwuY3VycmVudExldmVsO0Qud2FybigiZHJvcCBGUFMgcmF0aW8gZ3JlYXRlciB0aGFuIG1heCBhbGxvd2VkIHZhbHVlIGZvciBjdXJyZW50TGV2ZWw6ICIrdSksdT4wJiYoLTE9PT1sLmF1dG9MZXZlbENhcHBpbmd8fGwuYXV0b0xldmVsQ2FwcGluZz49dSkmJih1LT0xLGwudHJpZ2dlcihFLkZQU19EUk9QX0xFVkVMX0NBUFBJTkcse2xldmVsOnUsZHJvcHBlZExldmVsOmwuY3VycmVudExldmVsfSksbC5hdXRvTGV2ZWxDYXBwaW5nPXUsdGhpcy5zdHJlYW1Db250cm9sbGVyLm5leHRMZXZlbFN3aXRjaCgpKX19dGhpcy5sYXN0VGltZT1pLHRoaXMubGFzdERyb3BwZWRGcmFtZXM9cix0aGlzLmxhc3REZWNvZGVkRnJhbWVzPXR9fSx0LmNoZWNrRlBTSW50ZXJ2YWw9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1lZGlhO2lmKGUpaWYodGhpcy5pc1ZpZGVvUGxheWJhY2tRdWFsaXR5QXZhaWxhYmxlKXt2YXIgdD1lLmdldFZpZGVvUGxheWJhY2tRdWFsaXR5KCk7dGhpcy5jaGVja0ZQUyhlLHQudG90YWxWaWRlb0ZyYW1lcyx0LmRyb3BwZWRWaWRlb0ZyYW1lcyl9ZWxzZSB0aGlzLmNoZWNrRlBTKGUsZS53ZWJraXREZWNvZGVkRnJhbWVDb3VudCxlLndlYmtpdERyb3BwZWRGcmFtZUNvdW50KX0sZX0oKSxncj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5obHM9dm9pZCAwLHRoaXMubG9nPXZvaWQgMCx0aGlzLmxvYWRlcj1udWxsLHRoaXMudXJpPW51bGwsdGhpcy5wYXRod2F5SWQ9Ii4iLHRoaXMucGF0aHdheVByaW9yaXR5PW51bGwsdGhpcy50aW1lVG9Mb2FkPTMwMCx0aGlzLnJlbG9hZFRpbWVyPS0xLHRoaXMudXBkYXRlZD0wLHRoaXMuc3RhcnRlZD0hMSx0aGlzLmVuYWJsZWQ9ITAsdGhpcy5sZXZlbHM9bnVsbCx0aGlzLmF1ZGlvVHJhY2tzPW51bGwsdGhpcy5zdWJ0aXRsZVRyYWNrcz1udWxsLHRoaXMucGVuYWxpemVkUGF0aHdheXM9e30sdGhpcy5obHM9ZSx0aGlzLmxvZz1ELmxvZy5iaW5kKEQsIltjb250ZW50LXN0ZWVyaW5nXToiKSx0aGlzLnJlZ2lzdGVyTGlzdGVuZXJzKCl9dmFyIHQ9ZS5wcm90b3R5cGU7cmV0dXJuIHQucmVnaXN0ZXJMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmhscztlLm9uKEUuTUFOSUZFU1RfTE9BRElORyx0aGlzLm9uTWFuaWZlc3RMb2FkaW5nLHRoaXMpLGUub24oRS5NQU5JRkVTVF9MT0FERUQsdGhpcy5vbk1hbmlmZXN0TG9hZGVkLHRoaXMpLGUub24oRS5NQU5JRkVTVF9QQVJTRUQsdGhpcy5vbk1hbmlmZXN0UGFyc2VkLHRoaXMpLGUub24oRS5FUlJPUix0aGlzLm9uRXJyb3IsdGhpcyl9LHQudW5yZWdpc3Rlckxpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaGxzO2UmJihlLm9mZihFLk1BTklGRVNUX0xPQURJTkcsdGhpcy5vbk1hbmlmZXN0TG9hZGluZyx0aGlzKSxlLm9mZihFLk1BTklGRVNUX0xPQURFRCx0aGlzLm9uTWFuaWZlc3RMb2FkZWQsdGhpcyksZS5vZmYoRS5NQU5JRkVTVF9QQVJTRUQsdGhpcy5vbk1hbmlmZXN0UGFyc2VkLHRoaXMpLGUub2ZmKEUuRVJST1IsdGhpcy5vbkVycm9yLHRoaXMpKX0sdC5zdGFydExvYWQ9ZnVuY3Rpb24oKXtpZih0aGlzLnN0YXJ0ZWQ9ITAsdGhpcy5jbGVhclRpbWVvdXQoKSx0aGlzLmVuYWJsZWQmJnRoaXMudXJpKXtpZih0aGlzLnVwZGF0ZWQpe3ZhciBlPTFlMyp0aGlzLnRpbWVUb0xvYWQtKHBlcmZvcm1hbmNlLm5vdygpLXRoaXMudXBkYXRlZCk7aWYoZT4wKXJldHVybiB2b2lkIHRoaXMuc2NoZWR1bGVSZWZyZXNoKHRoaXMudXJpLGUpfXRoaXMubG9hZFN0ZWVyaW5nTWFuaWZlc3QodGhpcy51cmkpfX0sdC5zdG9wTG9hZD1mdW5jdGlvbigpe3RoaXMuc3RhcnRlZD0hMSx0aGlzLmxvYWRlciYmKHRoaXMubG9hZGVyLmRlc3Ryb3koKSx0aGlzLmxvYWRlcj1udWxsKSx0aGlzLmNsZWFyVGltZW91dCgpfSx0LmNsZWFyVGltZW91dD1mdW5jdGlvbigpey0xIT09dGhpcy5yZWxvYWRUaW1lciYmKHNlbGYuY2xlYXJUaW1lb3V0KHRoaXMucmVsb2FkVGltZXIpLHRoaXMucmVsb2FkVGltZXI9LTEpfSx0LmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnVucmVnaXN0ZXJMaXN0ZW5lcnMoKSx0aGlzLnN0b3BMb2FkKCksdGhpcy5obHM9bnVsbCx0aGlzLmxldmVscz10aGlzLmF1ZGlvVHJhY2tzPXRoaXMuc3VidGl0bGVUcmFja3M9bnVsbH0sdC5yZW1vdmVMZXZlbD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmxldmVsczt0JiYodGhpcy5sZXZlbHM9dC5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0IT09ZX0pKSl9LHQub25NYW5pZmVzdExvYWRpbmc9ZnVuY3Rpb24oKXt0aGlzLnN0b3BMb2FkKCksdGhpcy5lbmFibGVkPSEwLHRoaXMudGltZVRvTG9hZD0zMDAsdGhpcy51cGRhdGVkPTAsdGhpcy51cmk9bnVsbCx0aGlzLnBhdGh3YXlJZD0iLiIsdGhpcy5sZXZlbHM9dGhpcy5hdWRpb1RyYWNrcz10aGlzLnN1YnRpdGxlVHJhY2tzPW51bGx9LHQub25NYW5pZmVzdExvYWRlZD1mdW5jdGlvbihlLHQpe3ZhciByPXQuY29udGVudFN0ZWVyaW5nO251bGwhPT1yJiYodGhpcy5wYXRod2F5SWQ9ci5wYXRod2F5SWQsdGhpcy51cmk9ci51cmksdGhpcy5zdGFydGVkJiZ0aGlzLnN0YXJ0TG9hZCgpKX0sdC5vbk1hbmlmZXN0UGFyc2VkPWZ1bmN0aW9uKGUsdCl7dGhpcy5hdWRpb1RyYWNrcz10LmF1ZGlvVHJhY2tzLHRoaXMuc3VidGl0bGVUcmFja3M9dC5zdWJ0aXRsZVRyYWNrc30sdC5vbkVycm9yPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5lcnJvckFjdGlvbjtpZigobnVsbD09cj92b2lkIDA6ci5hY3Rpb24pPT09enQmJnIuZmxhZ3M9PT0kdCl7dmFyIGk9dGhpcy5sZXZlbHMsYT10aGlzLnBhdGh3YXlQcmlvcml0eSxuPXRoaXMucGF0aHdheUlkO2lmKHQuY29udGV4dCl7dmFyIHM9dC5jb250ZXh0LG89cy5ncm91cElkLGw9cy5wYXRod2F5SWQsdT1zLnR5cGU7byYmaT9uPXRoaXMuZ2V0UGF0aHdheUZvckdyb3VwSWQobyx1LG4pOmwmJihuPWwpfW4gaW4gdGhpcy5wZW5hbGl6ZWRQYXRod2F5c3x8KHRoaXMucGVuYWxpemVkUGF0aHdheXNbbl09cGVyZm9ybWFuY2Uubm93KCkpLCFhJiZpJiYoYT1pLnJlZHVjZSgoZnVuY3Rpb24oZSx0KXtyZXR1cm4tMT09PWUuaW5kZXhPZih0LnBhdGh3YXlJZCkmJmUucHVzaCh0LnBhdGh3YXlJZCksZX0pLFtdKSksYSYmYS5sZW5ndGg+MSYmKHRoaXMudXBkYXRlUGF0aHdheVByaW9yaXR5KGEpLHIucmVzb2x2ZWQ9dGhpcy5wYXRod2F5SWQhPT1uKSxyLnJlc29sdmVkfHxELndhcm4oIkNvdWxkIG5vdCByZXNvbHZlICIrdC5kZXRhaWxzKycgKCInK3QuZXJyb3IubWVzc2FnZSsnIikgd2l0aCBjb250ZW50LXN0ZWVyaW5nIGZvciBQYXRod2F5OiAnK24rIiBsZXZlbHM6ICIrKGk/aS5sZW5ndGg6aSkrIiBwcmlvcml0aWVzOiAiK0pTT04uc3RyaW5naWZ5KGEpKyIgcGVuYWxpemVkOiAiK0pTT04uc3RyaW5naWZ5KHRoaXMucGVuYWxpemVkUGF0aHdheXMpKX19LHQuZmlsdGVyUGFyc2VkTGV2ZWxzPWZ1bmN0aW9uKGUpe3RoaXMubGV2ZWxzPWU7dmFyIHQ9dGhpcy5nZXRMZXZlbHNGb3JQYXRod2F5KHRoaXMucGF0aHdheUlkKTtpZigwPT09dC5sZW5ndGgpe3ZhciByPWVbMF0ucGF0aHdheUlkO3RoaXMubG9nKCJObyBsZXZlbHMgZm91bmQgaW4gUGF0aHdheSAiK3RoaXMucGF0aHdheUlkKycuIFNldHRpbmcgaW5pdGlhbCBQYXRod2F5IHRvICInK3IrJyInKSx0PXRoaXMuZ2V0TGV2ZWxzRm9yUGF0aHdheShyKSx0aGlzLnBhdGh3YXlJZD1yfXJldHVybiB0Lmxlbmd0aCE9PWUubGVuZ3RoJiZ0aGlzLmxvZygiRm91bmQgIit0Lmxlbmd0aCsiLyIrZS5sZW5ndGgrJyBsZXZlbHMgaW4gUGF0aHdheSAiJyt0aGlzLnBhdGh3YXlJZCsnIicpLHR9LHQuZ2V0TGV2ZWxzRm9yUGF0aHdheT1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09PXRoaXMubGV2ZWxzP1tdOnRoaXMubGV2ZWxzLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIGU9PT10LnBhdGh3YXlJZH0pKX0sdC51cGRhdGVQYXRod2F5UHJpb3JpdHk9ZnVuY3Rpb24oZSl7dmFyIHQ7dGhpcy5wYXRod2F5UHJpb3JpdHk9ZTt2YXIgcj10aGlzLnBlbmFsaXplZFBhdGh3YXlzLGk9cGVyZm9ybWFuY2Uubm93KCk7T2JqZWN0LmtleXMocikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aS1yW2VdPjNlNSYmZGVsZXRlIHJbZV19KSk7Zm9yKHZhciBhPTA7YTxlLmxlbmd0aDthKyspe3ZhciBuPWVbYV07aWYoIShuIGluIHIpKXtpZihuPT09dGhpcy5wYXRod2F5SWQpcmV0dXJuO3ZhciBzPXRoaXMuaGxzLm5leHRMb2FkTGV2ZWwsbz10aGlzLmhscy5sZXZlbHNbc107aWYoKHQ9dGhpcy5nZXRMZXZlbHNGb3JQYXRod2F5KG4pKS5sZW5ndGg+MCl7dGhpcy5sb2coJ1NldHRpbmcgUGF0aHdheSB0byAiJytuKyciJyksdGhpcy5wYXRod2F5SWQ9bixOdCh0KSx0aGlzLmhscy50cmlnZ2VyKEUuTEVWRUxTX1VQREFURUQse2xldmVsczp0fSk7dmFyIGw9dGhpcy5obHMubGV2ZWxzW3NdO28mJmwmJnRoaXMubGV2ZWxzJiYobC5hdHRyc1siU1RBQkxFLVZBUklBTlQtSUQiXSE9PW8uYXR0cnNbIlNUQUJMRS1WQVJJQU5ULUlEIl0mJmwuYml0cmF0ZSE9PW8uYml0cmF0ZSYmdGhpcy5sb2coIlVuc3RhYmxlIFBhdGh3YXlzIGNoYW5nZSBmcm9tIGJpdHJhdGUgIitvLmJpdHJhdGUrIiB0byAiK2wuYml0cmF0ZSksdGhpcy5obHMubmV4dExvYWRMZXZlbD1zKTticmVha319fX0sdC5nZXRQYXRod2F5Rm9yR3JvdXBJZD1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBpPXRoaXMuZ2V0TGV2ZWxzRm9yUGF0aHdheShyKS5jb25jYXQodGhpcy5sZXZlbHN8fFtdKSxhPTA7YTxpLmxlbmd0aDthKyspaWYodD09PWl0JiZpW2FdLmhhc0F1ZGlvR3JvdXAoZSl8fHQ9PT1hdCYmaVthXS5oYXNTdWJ0aXRsZUdyb3VwKGUpKXJldHVybiBpW2FdLnBhdGh3YXlJZDtyZXR1cm4gcn0sdC5jbG9uZVBhdGh3YXlzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzLmxldmVscztpZihyKXt2YXIgaT17fSxhPXt9O2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5JRCxzPWVbIkJBU0UtSUQiXSxvPWVbIlVSSS1SRVBMQUNFTUVOVCJdO2lmKCFyLnNvbWUoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnBhdGh3YXlJZD09PW59KSkpe3ZhciBsPXQuZ2V0TGV2ZWxzRm9yUGF0aHdheShzKS5tYXAoKGZ1bmN0aW9uKGUpe3ZhciB0PW5ldyB3KGUuYXR0cnMpO3RbIlBBVEhXQVktSUQiXT1uO3ZhciByPXQuQVVESU8mJnQuQVVESU8rIl9jbG9uZV8iK24scz10LlNVQlRJVExFUyYmdC5TVUJUSVRMRVMrIl9jbG9uZV8iK247ciYmKGlbdC5BVURJT109cix0LkFVRElPPXIpLHMmJihhW3QuU1VCVElUTEVTXT1zLHQuU1VCVElUTEVTPXMpO3ZhciBsPXByKGUudXJpLHRbIlNUQUJMRS1WQVJJQU5ULUlEIl0sIlBFUi1WQVJJQU5ULVVSSVMiLG8pLHU9bmV3IHh0KHthdHRyczp0LGF1ZGlvQ29kZWM6ZS5hdWRpb0NvZGVjLGJpdHJhdGU6ZS5iaXRyYXRlLGhlaWdodDplLmhlaWdodCxuYW1lOmUubmFtZSx1cmw6bCx2aWRlb0NvZGVjOmUudmlkZW9Db2RlYyx3aWR0aDplLndpZHRofSk7aWYoZS5hdWRpb0dyb3Vwcylmb3IodmFyIGQ9MTtkPGUuYXVkaW9Hcm91cHMubGVuZ3RoO2QrKyl1LmFkZEdyb3VwSWQoImF1ZGlvIixlLmF1ZGlvR3JvdXBzW2RdKyJfY2xvbmVfIituKTtpZihlLnN1YnRpdGxlR3JvdXBzKWZvcih2YXIgaD0xO2g8ZS5zdWJ0aXRsZUdyb3Vwcy5sZW5ndGg7aCsrKXUuYWRkR3JvdXBJZCgidGV4dCIsZS5zdWJ0aXRsZUdyb3Vwc1toXSsiX2Nsb25lXyIrbik7cmV0dXJuIHV9KSk7ci5wdXNoLmFwcGx5KHIsbCksbXIodC5hdWRpb1RyYWNrcyxpLG8sbiksbXIodC5zdWJ0aXRsZVRyYWNrcyxhLG8sbil9fSkpfX0sdC5sb2FkU3RlZXJpbmdNYW5pZmVzdD1mdW5jdGlvbihlKXt2YXIgdCxyPXRoaXMsaT10aGlzLmhscy5jb25maWcsYT1pLmxvYWRlcjt0aGlzLmxvYWRlciYmdGhpcy5sb2FkZXIuZGVzdHJveSgpLHRoaXMubG9hZGVyPW5ldyBhKGkpO3RyeXt0PW5ldyBzZWxmLlVSTChlKX1jYXRjaCh0KXtyZXR1cm4gdGhpcy5lbmFibGVkPSExLHZvaWQgdGhpcy5sb2coIkZhaWxlZCB0byBwYXJzZSBTdGVlcmluZyBNYW5pZmVzdCBVUkk6ICIrZSl9aWYoImRhdGE6IiE9PXQucHJvdG9jb2wpe3ZhciBuPTB8KHRoaXMuaGxzLmJhbmR3aWR0aEVzdGltYXRlfHxpLmFickV3bWFEZWZhdWx0RXN0aW1hdGUpO3Quc2VhcmNoUGFyYW1zLnNldCgiX0hMU19wYXRod2F5Iix0aGlzLnBhdGh3YXlJZCksdC5zZWFyY2hQYXJhbXMuc2V0KCJfSExTX3Rocm91Z2hwdXQiLCIiK24pfXZhciBzPXtyZXNwb25zZVR5cGU6Impzb24iLHVybDp0LmhyZWZ9LG89aS5zdGVlcmluZ01hbmlmZXN0TG9hZFBvbGljeS5kZWZhdWx0LGw9by5lcnJvclJldHJ5fHxvLnRpbWVvdXRSZXRyeXx8e30sdT17bG9hZFBvbGljeTpvLHRpbWVvdXQ6by5tYXhMb2FkVGltZU1zLG1heFJldHJ5OmwubWF4TnVtUmV0cnl8fDAscmV0cnlEZWxheTpsLnJldHJ5RGVsYXlNc3x8MCxtYXhSZXRyeURlbGF5OmwubWF4UmV0cnlEZWxheU1zfHwwfSxkPXtvblN1Y2Nlc3M6ZnVuY3Rpb24oZSxpLGEsbil7ci5sb2coJ0xvYWRlZCBzdGVlcmluZyBtYW5pZmVzdDogIicrdCsnIicpO3ZhciBzPWUuZGF0YTtpZigxPT09cy5WRVJTSU9OKXtyLnVwZGF0ZWQ9cGVyZm9ybWFuY2Uubm93KCksci50aW1lVG9Mb2FkPXMuVFRMO3ZhciBvPXNbIlJFTE9BRC1VUkkiXSxsPXNbIlBBVEhXQVktQ0xPTkVTIl0sdT1zWyJQQVRIV0FZLVBSSU9SSVRZIl07aWYobyl0cnl7ci51cmk9bmV3IHNlbGYuVVJMKG8sdCkuaHJlZn1jYXRjaChlKXtyZXR1cm4gci5lbmFibGVkPSExLHZvaWQgci5sb2coIkZhaWxlZCB0byBwYXJzZSBTdGVlcmluZyBNYW5pZmVzdCBSRUxPQUQtVVJJOiAiK28pfXIuc2NoZWR1bGVSZWZyZXNoKHIudXJpfHxhLnVybCksbCYmci5jbG9uZVBhdGh3YXlzKGwpO3ZhciBkPXtzdGVlcmluZ01hbmlmZXN0OnMsdXJsOnQudG9TdHJpbmcoKX07ci5obHMudHJpZ2dlcihFLlNURUVSSU5HX01BTklGRVNUX0xPQURFRCxkKSx1JiZyLnVwZGF0ZVBhdGh3YXlQcmlvcml0eSh1KX1lbHNlIHIubG9nKCJTdGVlcmluZyBWRVJTSU9OICIrcy5WRVJTSU9OKyIgbm90IHN1cHBvcnRlZCEiKX0sb25FcnJvcjpmdW5jdGlvbihlLHQsaSxhKXtpZihyLmxvZygiRXJyb3IgbG9hZGluZyBzdGVlcmluZyBtYW5pZmVzdDogIitlLmNvZGUrIiAiK2UudGV4dCsiICgiK3QudXJsKyIpIiksci5zdG9wTG9hZCgpLDQxMD09PWUuY29kZSlyZXR1cm4gci5lbmFibGVkPSExLHZvaWQgci5sb2coIlN0ZWVyaW5nIG1hbmlmZXN0ICIrdC51cmwrIiBubyBsb25nZXIgYXZhaWxhYmxlIik7dmFyIG49MWUzKnIudGltZVRvTG9hZDtpZig0MjkhPT1lLmNvZGUpci5zY2hlZHVsZVJlZnJlc2goci51cml8fHQudXJsLG4pO2Vsc2V7dmFyIHM9ci5sb2FkZXI7aWYoImZ1bmN0aW9uIj09dHlwZW9mKG51bGw9PXM/dm9pZCAwOnMuZ2V0UmVzcG9uc2VIZWFkZXIpKXt2YXIgbz1zLmdldFJlc3BvbnNlSGVhZGVyKCJSZXRyeS1BZnRlciIpO28mJihuPTFlMypwYXJzZUZsb2F0KG8pKX1yLmxvZygiU3RlZXJpbmcgbWFuaWZlc3QgIit0LnVybCsiIHJhdGUgbGltaXRlZCIpfX0sb25UaW1lb3V0OmZ1bmN0aW9uKGUsdCxpKXtyLmxvZygiVGltZW91dCBsb2FkaW5nIHN0ZWVyaW5nIG1hbmlmZXN0ICgiK3QudXJsKyIpIiksci5zY2hlZHVsZVJlZnJlc2goci51cml8fHQudXJsKX19O3RoaXMubG9nKCJSZXF1ZXN0aW5nIHN0ZWVyaW5nIG1hbmlmZXN0OiAiK3QpLHRoaXMubG9hZGVyLmxvYWQocyx1LGQpfSx0LnNjaGVkdWxlUmVmcmVzaD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7dm9pZCAwPT09dCYmKHQ9MWUzKnRoaXMudGltZVRvTG9hZCksdGhpcy5jbGVhclRpbWVvdXQoKSx0aGlzLnJlbG9hZFRpbWVyPXNlbGYuc2V0VGltZW91dCgoZnVuY3Rpb24oKXt2YXIgdCxpPW51bGw9PSh0PXIuaGxzKT92b2lkIDA6dC5tZWRpYTshaXx8aS5lbmRlZD9yLnNjaGVkdWxlUmVmcmVzaChlLDFlMypyLnRpbWVUb0xvYWQpOnIubG9hZFN0ZWVyaW5nTWFuaWZlc3QoZSl9KSx0KX0sZX0oKTtmdW5jdGlvbiBtcihlLHQscixpKXtlJiZPYmplY3Qua2V5cyh0KS5mb3JFYWNoKChmdW5jdGlvbihhKXt2YXIgbj1lLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ3JvdXBJZD09PWF9KSkubWFwKChmdW5jdGlvbihlKXt2YXIgbj1vKHt9LGUpO3JldHVybiBuLmRldGFpbHM9dm9pZCAwLG4uYXR0cnM9bmV3IHcobi5hdHRycyksbi51cmw9bi5hdHRycy5VUkk9cHIoZS51cmwsZS5hdHRyc1siU1RBQkxFLVJFTkRJVElPTi1JRCJdLCJQRVItUkVORElUSU9OLVVSSVMiLHIpLG4uZ3JvdXBJZD1uLmF0dHJzWyJHUk9VUC1JRCJdPXRbYV0sbi5hdHRyc1siUEFUSFdBWS1JRCJdPWksbn0pKTtlLnB1c2guYXBwbHkoZSxuKX0pKX1mdW5jdGlvbiBwcihlLHQscixpKXt2YXIgYSxuPWkuSE9TVCxzPWkuUEFSQU1TLG89aVtyXTt0JiYoYT1udWxsPT1vP3ZvaWQgMDpvW3RdKSYmKGU9YSk7dmFyIGw9bmV3IHNlbGYuVVJMKGUpO3JldHVybiBuJiYhYSYmKGwuaG9zdD1uKSxzJiZPYmplY3Qua2V5cyhzKS5zb3J0KCkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZSYmbC5zZWFyY2hQYXJhbXMuc2V0KGUsc1tlXSl9KSksbC5ocmVmfXZhciB5cj0vXmFnZTpccypbXGQuXStccyokL2ltLEVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLnhoclNldHVwPXZvaWQgMCx0aGlzLnJlcXVlc3RUaW1lb3V0PXZvaWQgMCx0aGlzLnJldHJ5VGltZW91dD12b2lkIDAsdGhpcy5yZXRyeURlbGF5PXZvaWQgMCx0aGlzLmNvbmZpZz1udWxsLHRoaXMuY2FsbGJhY2tzPW51bGwsdGhpcy5jb250ZXh0PW51bGwsdGhpcy5sb2FkZXI9bnVsbCx0aGlzLnN0YXRzPXZvaWQgMCx0aGlzLnhoclNldHVwPWUmJmUueGhyU2V0dXB8fG51bGwsdGhpcy5zdGF0cz1uZXcgUCx0aGlzLnJldHJ5RGVsYXk9MH12YXIgdD1lLnByb3RvdHlwZTtyZXR1cm4gdC5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5jYWxsYmFja3M9bnVsbCx0aGlzLmFib3J0SW50ZXJuYWwoKSx0aGlzLmxvYWRlcj1udWxsLHRoaXMuY29uZmlnPW51bGwsdGhpcy5jb250ZXh0PW51bGwsdGhpcy54aHJTZXR1cD1udWxsfSx0LmFib3J0SW50ZXJuYWw9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxvYWRlcjtzZWxmLmNsZWFyVGltZW91dCh0aGlzLnJlcXVlc3RUaW1lb3V0KSxzZWxmLmNsZWFyVGltZW91dCh0aGlzLnJldHJ5VGltZW91dCksZSYmKGUub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsZS5vbnByb2dyZXNzPW51bGwsNCE9PWUucmVhZHlTdGF0ZSYmKHRoaXMuc3RhdHMuYWJvcnRlZD0hMCxlLmFib3J0KCkpKX0sdC5hYm9ydD1mdW5jdGlvbigpe3ZhciBlO3RoaXMuYWJvcnRJbnRlcm5hbCgpLG51bGwhPShlPXRoaXMuY2FsbGJhY2tzKSYmZS5vbkFib3J0JiZ0aGlzLmNhbGxiYWNrcy5vbkFib3J0KHRoaXMuc3RhdHMsdGhpcy5jb250ZXh0LHRoaXMubG9hZGVyKX0sdC5sb2FkPWZ1bmN0aW9uKGUsdCxyKXtpZih0aGlzLnN0YXRzLmxvYWRpbmcuc3RhcnQpdGhyb3cgbmV3IEVycm9yKCJMb2FkZXIgY2FuIG9ubHkgYmUgdXNlZCBvbmNlLiIpO3RoaXMuc3RhdHMubG9hZGluZy5zdGFydD1zZWxmLnBlcmZvcm1hbmNlLm5vdygpLHRoaXMuY29udGV4dD1lLHRoaXMuY29uZmlnPXQsdGhpcy5jYWxsYmFja3M9cix0aGlzLmxvYWRJbnRlcm5hbCgpfSx0LmxvYWRJbnRlcm5hbD1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLmNvbmZpZyxyPXRoaXMuY29udGV4dDtpZih0JiZyKXt2YXIgaT10aGlzLmxvYWRlcj1uZXcgc2VsZi5YTUxIdHRwUmVxdWVzdCxhPXRoaXMuc3RhdHM7YS5sb2FkaW5nLmZpcnN0PTAsYS5sb2FkZWQ9MCxhLmFib3J0ZWQ9ITE7dmFyIG49dGhpcy54aHJTZXR1cDtuP1Byb21pc2UucmVzb2x2ZSgpLnRoZW4oKGZ1bmN0aW9uKCl7aWYoZS5sb2FkZXI9PT1pJiYhZS5zdGF0cy5hYm9ydGVkKXJldHVybiBuKGksci51cmwpfSkpLmNhdGNoKChmdW5jdGlvbih0KXtpZihlLmxvYWRlcj09PWkmJiFlLnN0YXRzLmFib3J0ZWQpcmV0dXJuIGkub3BlbigiR0VUIixyLnVybCwhMCksbihpLHIudXJsKX0pKS50aGVuKChmdW5jdGlvbigpe2UubG9hZGVyIT09aXx8ZS5zdGF0cy5hYm9ydGVkfHxlLm9wZW5BbmRTZW5kWGhyKGkscix0KX0pKS5jYXRjaCgoZnVuY3Rpb24odCl7ZS5jYWxsYmFja3Mub25FcnJvcih7Y29kZTppLnN0YXR1cyx0ZXh0OnQubWVzc2FnZX0scixpLGEpfSkpOnRoaXMub3BlbkFuZFNlbmRYaHIoaSxyLHQpfX0sdC5vcGVuQW5kU2VuZFhocj1mdW5jdGlvbihlLHQscil7ZS5yZWFkeVN0YXRlfHxlLm9wZW4oIkdFVCIsdC51cmwsITApO3ZhciBpPXQuaGVhZGVycyxhPXIubG9hZFBvbGljeSxuPWEubWF4VGltZVRvRmlyc3RCeXRlTXMscz1hLm1heExvYWRUaW1lTXM7aWYoaSlmb3IodmFyIG8gaW4gaSllLnNldFJlcXVlc3RIZWFkZXIobyxpW29dKTt0LnJhbmdlRW5kJiZlLnNldFJlcXVlc3RIZWFkZXIoIlJhbmdlIiwiYnl0ZXM9Iit0LnJhbmdlU3RhcnQrIi0iKyh0LnJhbmdlRW5kLTEpKSxlLm9ucmVhZHlzdGF0ZWNoYW5nZT10aGlzLnJlYWR5c3RhdGVjaGFuZ2UuYmluZCh0aGlzKSxlLm9ucHJvZ3Jlc3M9dGhpcy5sb2FkcHJvZ3Jlc3MuYmluZCh0aGlzKSxlLnJlc3BvbnNlVHlwZT10LnJlc3BvbnNlVHlwZSxzZWxmLmNsZWFyVGltZW91dCh0aGlzLnJlcXVlc3RUaW1lb3V0KSxyLnRpbWVvdXQ9biYmbShuKT9uOnMsdGhpcy5yZXF1ZXN0VGltZW91dD1zZWxmLnNldFRpbWVvdXQodGhpcy5sb2FkdGltZW91dC5iaW5kKHRoaXMpLHIudGltZW91dCksZS5zZW5kKCl9LHQucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuY29udGV4dCx0PXRoaXMubG9hZGVyLHI9dGhpcy5zdGF0cztpZihlJiZ0KXt2YXIgaT10LnJlYWR5U3RhdGUsYT10aGlzLmNvbmZpZztpZighci5hYm9ydGVkJiZpPj0yJiYoMD09PXIubG9hZGluZy5maXJzdCYmKHIubG9hZGluZy5maXJzdD1NYXRoLm1heChzZWxmLnBlcmZvcm1hbmNlLm5vdygpLHIubG9hZGluZy5zdGFydCksYS50aW1lb3V0IT09YS5sb2FkUG9saWN5Lm1heExvYWRUaW1lTXMmJihzZWxmLmNsZWFyVGltZW91dCh0aGlzLnJlcXVlc3RUaW1lb3V0KSxhLnRpbWVvdXQ9YS5sb2FkUG9saWN5Lm1heExvYWRUaW1lTXMsdGhpcy5yZXF1ZXN0VGltZW91dD1zZWxmLnNldFRpbWVvdXQodGhpcy5sb2FkdGltZW91dC5iaW5kKHRoaXMpLGEubG9hZFBvbGljeS5tYXhMb2FkVGltZU1zLShyLmxvYWRpbmcuZmlyc3Qtci5sb2FkaW5nLnN0YXJ0KSkpKSw0PT09aSkpe3NlbGYuY2xlYXJUaW1lb3V0KHRoaXMucmVxdWVzdFRpbWVvdXQpLHQub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsdC5vbnByb2dyZXNzPW51bGw7dmFyIG49dC5zdGF0dXMscz0idGV4dCI9PT10LnJlc3BvbnNlVHlwZT90LnJlc3BvbnNlVGV4dDpudWxsO2lmKG4+PTIwMCYmbjwzMDApe3ZhciBvPW51bGwhPXM/czp0LnJlc3BvbnNlO2lmKG51bGwhPW8pe3IubG9hZGluZy5lbmQ9TWF0aC5tYXgoc2VsZi5wZXJmb3JtYW5jZS5ub3coKSxyLmxvYWRpbmcuZmlyc3QpO3ZhciBsPSJhcnJheWJ1ZmZlciI9PT10LnJlc3BvbnNlVHlwZT9vLmJ5dGVMZW5ndGg6by5sZW5ndGg7aWYoci5sb2FkZWQ9ci50b3RhbD1sLHIuYndFc3RpbWF0ZT04ZTMqci50b3RhbC8oci5sb2FkaW5nLmVuZC1yLmxvYWRpbmcuZmlyc3QpLCF0aGlzLmNhbGxiYWNrcylyZXR1cm47dmFyIHU9dGhpcy5jYWxsYmFja3Mub25Qcm9ncmVzcztpZih1JiZ1KHIsZSxvLHQpLCF0aGlzLmNhbGxiYWNrcylyZXR1cm47dmFyIGQ9e3VybDp0LnJlc3BvbnNlVVJMLGRhdGE6byxjb2RlOm59O3JldHVybiB2b2lkIHRoaXMuY2FsbGJhY2tzLm9uU3VjY2VzcyhkLHIsZSx0KX19dmFyIGg9YS5sb2FkUG9saWN5LmVycm9yUmV0cnk7VnQoaCxyLnJldHJ5LCExLHt1cmw6ZS51cmwsZGF0YTp2b2lkIDAsY29kZTpufSk/dGhpcy5yZXRyeShoKTooRC5lcnJvcihuKyIgd2hpbGUgbG9hZGluZyAiK2UudXJsKSx0aGlzLmNhbGxiYWNrcy5vbkVycm9yKHtjb2RlOm4sdGV4dDp0LnN0YXR1c1RleHR9LGUsdCxyKSl9fX0sdC5sb2FkdGltZW91dD1mdW5jdGlvbigpe2lmKHRoaXMuY29uZmlnKXt2YXIgZT10aGlzLmNvbmZpZy5sb2FkUG9saWN5LnRpbWVvdXRSZXRyeTtpZihWdChlLHRoaXMuc3RhdHMucmV0cnksITApKXRoaXMucmV0cnkoZSk7ZWxzZXt2YXIgdDtELndhcm4oInRpbWVvdXQgd2hpbGUgbG9hZGluZyAiKyhudWxsPT0odD10aGlzLmNvbnRleHQpP3ZvaWQgMDp0LnVybCkpO3ZhciByPXRoaXMuY2FsbGJhY2tzO3ImJih0aGlzLmFib3J0SW50ZXJuYWwoKSxyLm9uVGltZW91dCh0aGlzLnN0YXRzLHRoaXMuY29udGV4dCx0aGlzLmxvYWRlcikpfX19LHQucmV0cnk9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jb250ZXh0LHI9dGhpcy5zdGF0czt0aGlzLnJldHJ5RGVsYXk9R3QoZSxyLnJldHJ5KSxyLnJldHJ5KyssRC53YXJuKChzdGF0dXM/IkhUVFAgU3RhdHVzICIrc3RhdHVzOiJUaW1lb3V0IikrIiB3aGlsZSBsb2FkaW5nICIrKG51bGw9PXQ/dm9pZCAwOnQudXJsKSsiLCByZXRyeWluZyAiK3IucmV0cnkrIi8iK2UubWF4TnVtUmV0cnkrIiBpbiAiK3RoaXMucmV0cnlEZWxheSsibXMiKSx0aGlzLmFib3J0SW50ZXJuYWwoKSx0aGlzLmxvYWRlcj1udWxsLHNlbGYuY2xlYXJUaW1lb3V0KHRoaXMucmV0cnlUaW1lb3V0KSx0aGlzLnJldHJ5VGltZW91dD1zZWxmLnNldFRpbWVvdXQodGhpcy5sb2FkSW50ZXJuYWwuYmluZCh0aGlzKSx0aGlzLnJldHJ5RGVsYXkpfSx0LmxvYWRwcm9ncmVzcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnN0YXRzO3QubG9hZGVkPWUubG9hZGVkLGUubGVuZ3RoQ29tcHV0YWJsZSYmKHQudG90YWw9ZS50b3RhbCl9LHQuZ2V0Q2FjaGVBZ2U9ZnVuY3Rpb24oKXt2YXIgZT1udWxsO2lmKHRoaXMubG9hZGVyJiZ5ci50ZXN0KHRoaXMubG9hZGVyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl7dmFyIHQ9dGhpcy5sb2FkZXIuZ2V0UmVzcG9uc2VIZWFkZXIoImFnZSIpO2U9dD9wYXJzZUZsb2F0KHQpOm51bGx9cmV0dXJuIGV9LHQuZ2V0UmVzcG9uc2VIZWFkZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubG9hZGVyJiZuZXcgUmVnRXhwKCJeIitlKyI6XFxzKltcXGQuXStcXHMqJCIsImltIikudGVzdCh0aGlzLmxvYWRlci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk/dGhpcy5sb2FkZXIuZ2V0UmVzcG9uc2VIZWFkZXIoZSk6bnVsbH0sZX0oKSxUcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmNodW5rcz1bXSx0aGlzLmRhdGFMZW5ndGg9MH12YXIgdD1lLnByb3RvdHlwZTtyZXR1cm4gdC5wdXNoPWZ1bmN0aW9uKGUpe3RoaXMuY2h1bmtzLnB1c2goZSksdGhpcy5kYXRhTGVuZ3RoKz1lLmxlbmd0aH0sdC5mbHVzaD1mdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5jaHVua3Mscj10aGlzLmRhdGFMZW5ndGg7cmV0dXJuIHQubGVuZ3RoPyhlPTE9PT10Lmxlbmd0aD90WzBdOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPW5ldyBVaW50OEFycmF5KHQpLGk9MCxhPTA7YTxlLmxlbmd0aDthKyspe3ZhciBuPWVbYV07ci5zZXQobixpKSxpKz1uLmxlbmd0aH1yZXR1cm4gcn0odCxyKSx0aGlzLnJlc2V0KCksZSk6bmV3IFVpbnQ4QXJyYXkoMCl9LHQucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmNodW5rcy5sZW5ndGg9MCx0aGlzLmRhdGFMZW5ndGg9MH0sZX0oKSxTcj0vKFxkKyktKFxkKylcLyhcZCspLyxMcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5mZXRjaFNldHVwPXZvaWQgMCx0aGlzLnJlcXVlc3RUaW1lb3V0PXZvaWQgMCx0aGlzLnJlcXVlc3Q9bnVsbCx0aGlzLnJlc3BvbnNlPW51bGwsdGhpcy5jb250cm9sbGVyPXZvaWQgMCx0aGlzLmNvbnRleHQ9bnVsbCx0aGlzLmNvbmZpZz1udWxsLHRoaXMuY2FsbGJhY2tzPW51bGwsdGhpcy5zdGF0cz12b2lkIDAsdGhpcy5sb2FkZXI9bnVsbCx0aGlzLmZldGNoU2V0dXA9ZS5mZXRjaFNldHVwfHxScix0aGlzLmNvbnRyb2xsZXI9bmV3IHNlbGYuQWJvcnRDb250cm9sbGVyLHRoaXMuc3RhdHM9bmV3IFB9dmFyIHQ9ZS5wcm90b3R5cGU7cmV0dXJuIHQuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMubG9hZGVyPXRoaXMuY2FsbGJhY2tzPXRoaXMuY29udGV4dD10aGlzLmNvbmZpZz10aGlzLnJlcXVlc3Q9bnVsbCx0aGlzLmFib3J0SW50ZXJuYWwoKSx0aGlzLnJlc3BvbnNlPW51bGwsdGhpcy5mZXRjaFNldHVwPXRoaXMuY29udHJvbGxlcj10aGlzLnN0YXRzPW51bGx9LHQuYWJvcnRJbnRlcm5hbD1mdW5jdGlvbigpe3RoaXMuY29udHJvbGxlciYmIXRoaXMuc3RhdHMubG9hZGluZy5lbmQmJih0aGlzLnN0YXRzLmFib3J0ZWQ9ITAsdGhpcy5jb250cm9sbGVyLmFib3J0KCkpfSx0LmFib3J0PWZ1bmN0aW9uKCl7dmFyIGU7dGhpcy5hYm9ydEludGVybmFsKCksbnVsbCE9KGU9dGhpcy5jYWxsYmFja3MpJiZlLm9uQWJvcnQmJnRoaXMuY2FsbGJhY2tzLm9uQWJvcnQodGhpcy5zdGF0cyx0aGlzLmNvbnRleHQsdGhpcy5yZXNwb25zZSl9LHQubG9hZD1mdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyxhPXRoaXMuc3RhdHM7aWYoYS5sb2FkaW5nLnN0YXJ0KXRocm93IG5ldyBFcnJvcigiTG9hZGVyIGNhbiBvbmx5IGJlIHVzZWQgb25jZS4iKTthLmxvYWRpbmcuc3RhcnQ9c2VsZi5wZXJmb3JtYW5jZS5ub3coKTt2YXIgbj1mdW5jdGlvbihlLHQpe3ZhciByPXttZXRob2Q6IkdFVCIsbW9kZToiY29ycyIsY3JlZGVudGlhbHM6InNhbWUtb3JpZ2luIixzaWduYWw6dCxoZWFkZXJzOm5ldyBzZWxmLkhlYWRlcnMobyh7fSxlLmhlYWRlcnMpKX07cmV0dXJuIGUucmFuZ2VFbmQmJnIuaGVhZGVycy5zZXQoIlJhbmdlIiwiYnl0ZXM9IitlLnJhbmdlU3RhcnQrIi0iK1N0cmluZyhlLnJhbmdlRW5kLTEpKSxyfShlLHRoaXMuY29udHJvbGxlci5zaWduYWwpLHM9ci5vblByb2dyZXNzLGw9ImFycmF5YnVmZmVyIj09PWUucmVzcG9uc2VUeXBlLHU9bD8iYnl0ZUxlbmd0aCI6Imxlbmd0aCIsZD10LmxvYWRQb2xpY3ksaD1kLm1heFRpbWVUb0ZpcnN0Qnl0ZU1zLGY9ZC5tYXhMb2FkVGltZU1zO3RoaXMuY29udGV4dD1lLHRoaXMuY29uZmlnPXQsdGhpcy5jYWxsYmFja3M9cix0aGlzLnJlcXVlc3Q9dGhpcy5mZXRjaFNldHVwKGUsbiksc2VsZi5jbGVhclRpbWVvdXQodGhpcy5yZXF1ZXN0VGltZW91dCksdC50aW1lb3V0PWgmJm0oaCk/aDpmLHRoaXMucmVxdWVzdFRpbWVvdXQ9c2VsZi5zZXRUaW1lb3V0KChmdW5jdGlvbigpe2kuYWJvcnRJbnRlcm5hbCgpLHIub25UaW1lb3V0KGEsZSxpLnJlc3BvbnNlKX0pLHQudGltZW91dCksc2VsZi5mZXRjaCh0aGlzLnJlcXVlc3QpLnRoZW4oKGZ1bmN0aW9uKG4pe2kucmVzcG9uc2U9aS5sb2FkZXI9bjt2YXIgbz1NYXRoLm1heChzZWxmLnBlcmZvcm1hbmNlLm5vdygpLGEubG9hZGluZy5zdGFydCk7aWYoc2VsZi5jbGVhclRpbWVvdXQoaS5yZXF1ZXN0VGltZW91dCksdC50aW1lb3V0PWYsaS5yZXF1ZXN0VGltZW91dD1zZWxmLnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7aS5hYm9ydEludGVybmFsKCksci5vblRpbWVvdXQoYSxlLGkucmVzcG9uc2UpfSksZi0oby1hLmxvYWRpbmcuc3RhcnQpKSwhbi5vayl7dmFyIHU9bi5zdGF0dXMsZD1uLnN0YXR1c1RleHQ7dGhyb3cgbmV3IGJyKGR8fCJmZXRjaCwgYmFkIG5ldHdvcmsgcmVzcG9uc2UiLHUsbil9cmV0dXJuIGEubG9hZGluZy5maXJzdD1vLGEudG90YWw9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXQoIkNvbnRlbnQtUmFuZ2UiKTtpZih0KXt2YXIgcj1mdW5jdGlvbihlKXt2YXIgdD1Tci5leGVjKGUpO2lmKHQpcmV0dXJuIHBhcnNlSW50KHRbMl0pLXBhcnNlSW50KHRbMV0pKzF9KHQpO2lmKG0ocikpcmV0dXJuIHJ9dmFyIGk9ZS5nZXQoIkNvbnRlbnQtTGVuZ3RoIik7aWYoaSlyZXR1cm4gcGFyc2VJbnQoaSl9KG4uaGVhZGVycyl8fGEudG90YWwscyYmbSh0LmhpZ2hXYXRlck1hcmspP2kubG9hZFByb2dyZXNzaXZlbHkobixhLGUsdC5oaWdoV2F0ZXJNYXJrLHMpOmw/bi5hcnJheUJ1ZmZlcigpOiJqc29uIj09PWUucmVzcG9uc2VUeXBlP24uanNvbigpOm4udGV4dCgpfSkpLnRoZW4oKGZ1bmN0aW9uKG4pe3ZhciBvPWkucmVzcG9uc2U7aWYoIW8pdGhyb3cgbmV3IEVycm9yKCJsb2FkZXIgZGVzdHJveWVkIik7c2VsZi5jbGVhclRpbWVvdXQoaS5yZXF1ZXN0VGltZW91dCksYS5sb2FkaW5nLmVuZD1NYXRoLm1heChzZWxmLnBlcmZvcm1hbmNlLm5vdygpLGEubG9hZGluZy5maXJzdCk7dmFyIGw9blt1XTtsJiYoYS5sb2FkZWQ9YS50b3RhbD1sKTt2YXIgZD17dXJsOm8udXJsLGRhdGE6bixjb2RlOm8uc3RhdHVzfTtzJiYhbSh0LmhpZ2hXYXRlck1hcmspJiZzKGEsZSxuLG8pLHIub25TdWNjZXNzKGQsYSxlLG8pfSkpLmNhdGNoKChmdW5jdGlvbih0KXtpZihzZWxmLmNsZWFyVGltZW91dChpLnJlcXVlc3RUaW1lb3V0KSwhYS5hYm9ydGVkKXt2YXIgbj10JiZ0LmNvZGV8fDAscz10P3QubWVzc2FnZTpudWxsO3Iub25FcnJvcih7Y29kZTpuLHRleHQ6c30sZSx0P3QuZGV0YWlsczpudWxsLGEpfX0pKX0sdC5nZXRDYWNoZUFnZT1mdW5jdGlvbigpe3ZhciBlPW51bGw7aWYodGhpcy5yZXNwb25zZSl7dmFyIHQ9dGhpcy5yZXNwb25zZS5oZWFkZXJzLmdldCgiYWdlIik7ZT10P3BhcnNlRmxvYXQodCk6bnVsbH1yZXR1cm4gZX0sdC5nZXRSZXNwb25zZUhlYWRlcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZXNwb25zZT90aGlzLnJlc3BvbnNlLmhlYWRlcnMuZ2V0KGUpOm51bGx9LHQubG9hZFByb2dyZXNzaXZlbHk9ZnVuY3Rpb24oZSx0LHIsaSxhKXt2b2lkIDA9PT1pJiYoaT0wKTt2YXIgbj1uZXcgVHIscz1lLmJvZHkuZ2V0UmVhZGVyKCk7cmV0dXJuIGZ1bmN0aW9uIG8oKXtyZXR1cm4gcy5yZWFkKCkudGhlbigoZnVuY3Rpb24ocyl7aWYocy5kb25lKXJldHVybiBuLmRhdGFMZW5ndGgmJmEodCxyLG4uZmx1c2goKSxlKSxQcm9taXNlLnJlc29sdmUobmV3IEFycmF5QnVmZmVyKDApKTt2YXIgbD1zLnZhbHVlLHU9bC5sZW5ndGg7cmV0dXJuIHQubG9hZGVkKz11LHU8aXx8bi5kYXRhTGVuZ3RoPyhuLnB1c2gobCksbi5kYXRhTGVuZ3RoPj1pJiZhKHQscixuLmZsdXNoKCksZSkpOmEodCxyLGwsZSksbygpfSkpLmNhdGNoKChmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlamVjdCgpfSkpfSgpfSxlfSgpO2Z1bmN0aW9uIFJyKGUsdCl7cmV0dXJuIG5ldyBzZWxmLlJlcXVlc3QoZS51cmwsdCl9dmFyIEFyLGJyPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGkpe3ZhciBhO3JldHVybihhPWUuY2FsbCh0aGlzLHQpfHx0aGlzKS5jb2RlPXZvaWQgMCxhLmRldGFpbHM9dm9pZCAwLGEuY29kZT1yLGEuZGV0YWlscz1pLGF9cmV0dXJuIGwodCxlKSx0fShmKEVycm9yKSksa3I9aShpKHthdXRvU3RhcnRMb2FkOiEwLHN0YXJ0UG9zaXRpb246LTEsZGVmYXVsdEF1ZGlvQ29kZWM6dm9pZCAwLGRlYnVnOiExLGNhcExldmVsT25GUFNEcm9wOiExLGNhcExldmVsVG9QbGF5ZXJTaXplOiExLGlnbm9yZURldmljZVBpeGVsUmF0aW86ITEscHJlZmVyTWFuYWdlZE1lZGlhU291cmNlOiEwLGluaXRpYWxMaXZlTWFuaWZlc3RTaXplOjEsbWF4QnVmZmVyTGVuZ3RoOjMwLGJhY2tCdWZmZXJMZW5ndGg6MS8wLGZyb250QnVmZmVyRmx1c2hUaHJlc2hvbGQ6MS8wLG1heEJ1ZmZlclNpemU6NmU3LG1heEJ1ZmZlckhvbGU6LjEsaGlnaEJ1ZmZlcldhdGNoZG9nUGVyaW9kOjIsbnVkZ2VPZmZzZXQ6LjEsbnVkZ2VNYXhSZXRyeTozLG1heEZyYWdMb29rVXBUb2xlcmFuY2U6LjI1LGxpdmVTeW5jRHVyYXRpb25Db3VudDozLGxpdmVNYXhMYXRlbmN5RHVyYXRpb25Db3VudDoxLzAsbGl2ZVN5bmNEdXJhdGlvbjp2b2lkIDAsbGl2ZU1heExhdGVuY3lEdXJhdGlvbjp2b2lkIDAsbWF4TGl2ZVN5bmNQbGF5YmFja1JhdGU6MSxsaXZlRHVyYXRpb25JbmZpbml0eTohMSxsaXZlQmFja0J1ZmZlckxlbmd0aDpudWxsLG1heE1heEJ1ZmZlckxlbmd0aDo2MDAsZW5hYmxlV29ya2VyOiEwLHdvcmtlclBhdGg6bnVsbCxlbmFibGVTb2Z0d2FyZUFFUzohMCxzdGFydExldmVsOnZvaWQgMCxzdGFydEZyYWdQcmVmZXRjaDohMSxmcHNEcm9wcGVkTW9uaXRvcmluZ1BlcmlvZDo1ZTMsZnBzRHJvcHBlZE1vbml0b3JpbmdUaHJlc2hvbGQ6LjIsYXBwZW5kRXJyb3JNYXhSZXRyeTozLGxvYWRlcjpFcixmTG9hZGVyOnZvaWQgMCxwTG9hZGVyOnZvaWQgMCx4aHJTZXR1cDp2b2lkIDAsbGljZW5zZVhoclNldHVwOnZvaWQgMCxsaWNlbnNlUmVzcG9uc2VDYWxsYmFjazp2b2lkIDAsYWJyQ29udHJvbGxlcjpzcixidWZmZXJDb250cm9sbGVyOmhyLGNhcExldmVsQ29udHJvbGxlcjpjcixlcnJvckNvbnRyb2xsZXI6ZXIsZnBzQ29udHJvbGxlcjp2cixzdHJldGNoU2hvcnRWaWRlb1RyYWNrOiExLG1heEF1ZGlvRnJhbWVzRHJpZnQ6MSxmb3JjZUtleUZyYW1lT25EaXNjb250aW51aXR5OiEwLGFickV3bWFGYXN0TGl2ZTozLGFickV3bWFTbG93TGl2ZTo5LGFickV3bWFGYXN0Vm9EOjMsYWJyRXdtYVNsb3dWb0Q6OSxhYnJFd21hRGVmYXVsdEVzdGltYXRlOjVlNSxhYnJFd21hRGVmYXVsdEVzdGltYXRlTWF4OjVlNixhYnJCYW5kV2lkdGhGYWN0b3I6Ljk1LGFickJhbmRXaWR0aFVwRmFjdG9yOi43LGFick1heFdpdGhSZWFsQml0cmF0ZTohMSxtYXhTdGFydmF0aW9uRGVsYXk6NCxtYXhMb2FkaW5nRGVsYXk6NCxtaW5BdXRvQml0cmF0ZTowLGVtZUVuYWJsZWQ6ITEsd2lkZXZpbmVMaWNlbnNlVXJsOnZvaWQgMCxkcm1TeXN0ZW1zOnt9LGRybVN5c3RlbU9wdGlvbnM6e30scmVxdWVzdE1lZGlhS2V5U3lzdGVtQWNjZXNzRnVuYzpudWxsLHRlc3RCYW5kd2lkdGg6ITAscHJvZ3Jlc3NpdmU6ITEsbG93TGF0ZW5jeU1vZGU6ITAsY21jZDp2b2lkIDAsZW5hYmxlRGF0ZVJhbmdlTWV0YWRhdGFDdWVzOiEwLGVuYWJsZUVtc2dNZXRhZGF0YUN1ZXM6ITAsZW5hYmxlSUQzTWV0YWRhdGFDdWVzOiEwLHVzZU1lZGlhQ2FwYWJpbGl0aWVzOiExLGNlcnRMb2FkUG9saWN5OntkZWZhdWx0OnttYXhUaW1lVG9GaXJzdEJ5dGVNczo4ZTMsbWF4TG9hZFRpbWVNczoyZTQsdGltZW91dFJldHJ5Om51bGwsZXJyb3JSZXRyeTpudWxsfX0sa2V5TG9hZFBvbGljeTp7ZGVmYXVsdDp7bWF4VGltZVRvRmlyc3RCeXRlTXM6OGUzLG1heExvYWRUaW1lTXM6MmU0LHRpbWVvdXRSZXRyeTp7bWF4TnVtUmV0cnk6MSxyZXRyeURlbGF5TXM6MWUzLG1heFJldHJ5RGVsYXlNczoyZTQsYmFja29mZjoibGluZWFyIn0sZXJyb3JSZXRyeTp7bWF4TnVtUmV0cnk6OCxyZXRyeURlbGF5TXM6MWUzLG1heFJldHJ5RGVsYXlNczoyZTQsYmFja29mZjoibGluZWFyIn19fSxtYW5pZmVzdExvYWRQb2xpY3k6e2RlZmF1bHQ6e21heFRpbWVUb0ZpcnN0Qnl0ZU1zOjEvMCxtYXhMb2FkVGltZU1zOjJlNCx0aW1lb3V0UmV0cnk6e21heE51bVJldHJ5OjIscmV0cnlEZWxheU1zOjAsbWF4UmV0cnlEZWxheU1zOjB9LGVycm9yUmV0cnk6e21heE51bVJldHJ5OjEscmV0cnlEZWxheU1zOjFlMyxtYXhSZXRyeURlbGF5TXM6OGUzfX19LHBsYXlsaXN0TG9hZFBvbGljeTp7ZGVmYXVsdDp7bWF4VGltZVRvRmlyc3RCeXRlTXM6MWU0LG1heExvYWRUaW1lTXM6MmU0LHRpbWVvdXRSZXRyeTp7bWF4TnVtUmV0cnk6MixyZXRyeURlbGF5TXM6MCxtYXhSZXRyeURlbGF5TXM6MH0sZXJyb3JSZXRyeTp7bWF4TnVtUmV0cnk6MixyZXRyeURlbGF5TXM6MWUzLG1heFJldHJ5RGVsYXlNczo4ZTN9fX0sZnJhZ0xvYWRQb2xpY3k6e2RlZmF1bHQ6e21heFRpbWVUb0ZpcnN0Qnl0ZU1zOjFlNCxtYXhMb2FkVGltZU1zOjEyZTQsdGltZW91dFJldHJ5OnttYXhOdW1SZXRyeTo0LHJldHJ5RGVsYXlNczowLG1heFJldHJ5RGVsYXlNczowfSxlcnJvclJldHJ5OnttYXhOdW1SZXRyeTo2LHJldHJ5RGVsYXlNczoxZTMsbWF4UmV0cnlEZWxheU1zOjhlM319fSxzdGVlcmluZ01hbmlmZXN0TG9hZFBvbGljeTp7ZGVmYXVsdDp7bWF4VGltZVRvRmlyc3RCeXRlTXM6MWU0LG1heExvYWRUaW1lTXM6MmU0LHRpbWVvdXRSZXRyeTp7bWF4TnVtUmV0cnk6MixyZXRyeURlbGF5TXM6MCxtYXhSZXRyeURlbGF5TXM6MH0sZXJyb3JSZXRyeTp7bWF4TnVtUmV0cnk6MSxyZXRyeURlbGF5TXM6MWUzLG1heFJldHJ5RGVsYXlNczo4ZTN9fX0sbWFuaWZlc3RMb2FkaW5nVGltZU91dDoxZTQsbWFuaWZlc3RMb2FkaW5nTWF4UmV0cnk6MSxtYW5pZmVzdExvYWRpbmdSZXRyeURlbGF5OjFlMyxtYW5pZmVzdExvYWRpbmdNYXhSZXRyeVRpbWVvdXQ6NjRlMyxsZXZlbExvYWRpbmdUaW1lT3V0OjFlNCxsZXZlbExvYWRpbmdNYXhSZXRyeTo0LGxldmVsTG9hZGluZ1JldHJ5RGVsYXk6MWUzLGxldmVsTG9hZGluZ01heFJldHJ5VGltZW91dDo2NGUzLGZyYWdMb2FkaW5nVGltZU91dDoyZTQsZnJhZ0xvYWRpbmdNYXhSZXRyeTo2LGZyYWdMb2FkaW5nUmV0cnlEZWxheToxZTMsZnJhZ0xvYWRpbmdNYXhSZXRyeVRpbWVvdXQ6NjRlM30se2N1ZUhhbmRsZXI6SCxlbmFibGVXZWJWVFQ6ITEsZW5hYmxlSU1TQzE6ITEsZW5hYmxlQ0VBNzA4Q2FwdGlvbnM6ITEsY2FwdGlvbnNUZXh0VHJhY2sxTGFiZWw6IkVuZ2xpc2giLGNhcHRpb25zVGV4dFRyYWNrMUxhbmd1YWdlQ29kZToiZW4iLGNhcHRpb25zVGV4dFRyYWNrMkxhYmVsOiJTcGFuaXNoIixjYXB0aW9uc1RleHRUcmFjazJMYW5ndWFnZUNvZGU6ImVzIixjYXB0aW9uc1RleHRUcmFjazNMYWJlbDoiVW5rbm93biBDQyIsY2FwdGlvbnNUZXh0VHJhY2szTGFuZ3VhZ2VDb2RlOiIiLGNhcHRpb25zVGV4dFRyYWNrNExhYmVsOiJVbmtub3duIENDIixjYXB0aW9uc1RleHRUcmFjazRMYW5ndWFnZUNvZGU6IiIscmVuZGVyVGV4dFRyYWNrc05hdGl2ZWx5OiEwfSkse30se3N1YnRpdGxlU3RyZWFtQ29udHJvbGxlcjp2b2lkIDAsc3VidGl0bGVUcmFja0NvbnRyb2xsZXI6dm9pZCAwLHRpbWVsaW5lQ29udHJvbGxlcjp2b2lkIDAsYXVkaW9TdHJlYW1Db250cm9sbGVyOnZvaWQgMCxhdWRpb1RyYWNrQ29udHJvbGxlcjp2b2lkIDAsZW1lQ29udHJvbGxlcjp2b2lkIDAsY21jZENvbnRyb2xsZXI6dm9pZCAwLGNvbnRlbnRTdGVlcmluZ0NvbnRyb2xsZXI6Z3J9KTtmdW5jdGlvbiBEcihlKXtyZXR1cm4gZSYmIm9iamVjdCI9PXR5cGVvZiBlP0FycmF5LmlzQXJyYXkoZSk/ZS5tYXAoRHIpOk9iamVjdC5rZXlzKGUpLnJlZHVjZSgoZnVuY3Rpb24odCxyKXtyZXR1cm4gdFtyXT1EcihlW3JdKSx0fSkse30pOmV9ZnVuY3Rpb24gX3IoZSl7dmFyIHQ9ZS5sb2FkZXI7dCE9PUxyJiZ0IT09RXI/KEQubG9nKCJbY29uZmlnXTogQ3VzdG9tIGxvYWRlciBkZXRlY3RlZCwgY2Fubm90IGVuYWJsZSBwcm9ncmVzc2l2ZSBzdHJlYW1pbmciKSxlLnByb2dyZXNzaXZlPSExKTpmdW5jdGlvbigpe2lmKHNlbGYuZmV0Y2gmJnNlbGYuQWJvcnRDb250cm9sbGVyJiZzZWxmLlJlYWRhYmxlU3RyZWFtJiZzZWxmLlJlcXVlc3QpdHJ5e3JldHVybiBuZXcgc2VsZi5SZWFkYWJsZVN0cmVhbSh7fSksITB9Y2F0Y2goZSl7fXJldHVybiExfSgpJiYoZS5sb2FkZXI9THIsZS5wcm9ncmVzc2l2ZT0hMCxlLmVuYWJsZVNvZnR3YXJlQUVTPSEwLEQubG9nKCJbY29uZmlnXTogUHJvZ3Jlc3NpdmUgc3RyZWFtaW5nIGVuYWJsZWQsIHVzaW5nIEZldGNoTG9hZGVyIikpfXZhciB4cj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7dmFyIGk7cmV0dXJuKGk9ZS5jYWxsKHRoaXMsdCwiW2xldmVsLWNvbnRyb2xsZXJdIil8fHRoaXMpLl9sZXZlbHM9W10saS5fZmlyc3RMZXZlbD0tMSxpLl9tYXhBdXRvTGV2ZWw9LTEsaS5fc3RhcnRMZXZlbD12b2lkIDAsaS5jdXJyZW50TGV2ZWw9bnVsbCxpLmN1cnJlbnRMZXZlbEluZGV4PS0xLGkubWFudWFsTGV2ZWxJbmRleD0tMSxpLnN0ZWVyaW5nPXZvaWQgMCxpLm9uUGFyc2VkQ29tcGxldGU9dm9pZCAwLGkuc3RlZXJpbmc9cixpLl9yZWdpc3Rlckxpc3RlbmVycygpLGl9bCh0LGUpO3ZhciByPXQucHJvdG90eXBlO3JldHVybiByLl9yZWdpc3Rlckxpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaGxzO2Uub24oRS5NQU5JRkVTVF9MT0FESU5HLHRoaXMub25NYW5pZmVzdExvYWRpbmcsdGhpcyksZS5vbihFLk1BTklGRVNUX0xPQURFRCx0aGlzLm9uTWFuaWZlc3RMb2FkZWQsdGhpcyksZS5vbihFLkxFVkVMX0xPQURFRCx0aGlzLm9uTGV2ZWxMb2FkZWQsdGhpcyksZS5vbihFLkxFVkVMU19VUERBVEVELHRoaXMub25MZXZlbHNVcGRhdGVkLHRoaXMpLGUub24oRS5GUkFHX0JVRkZFUkVELHRoaXMub25GcmFnQnVmZmVyZWQsdGhpcyksZS5vbihFLkVSUk9SLHRoaXMub25FcnJvcix0aGlzKX0sci5fdW5yZWdpc3Rlckxpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaGxzO2Uub2ZmKEUuTUFOSUZFU1RfTE9BRElORyx0aGlzLm9uTWFuaWZlc3RMb2FkaW5nLHRoaXMpLGUub2ZmKEUuTUFOSUZFU1RfTE9BREVELHRoaXMub25NYW5pZmVzdExvYWRlZCx0aGlzKSxlLm9mZihFLkxFVkVMX0xPQURFRCx0aGlzLm9uTGV2ZWxMb2FkZWQsdGhpcyksZS5vZmYoRS5MRVZFTFNfVVBEQVRFRCx0aGlzLm9uTGV2ZWxzVXBkYXRlZCx0aGlzKSxlLm9mZihFLkZSQUdfQlVGRkVSRUQsdGhpcy5vbkZyYWdCdWZmZXJlZCx0aGlzKSxlLm9mZihFLkVSUk9SLHRoaXMub25FcnJvcix0aGlzKX0sci5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5fdW5yZWdpc3Rlckxpc3RlbmVycygpLHRoaXMuc3RlZXJpbmc9bnVsbCx0aGlzLnJlc2V0TGV2ZWxzKCksZS5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpfSxyLnN0b3BMb2FkPWZ1bmN0aW9uKCl7dGhpcy5fbGV2ZWxzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UubG9hZEVycm9yPTAsZS5mcmFnbWVudEVycm9yPTB9KSksZS5wcm90b3R5cGUuc3RvcExvYWQuY2FsbCh0aGlzKX0sci5yZXNldExldmVscz1mdW5jdGlvbigpe3RoaXMuX3N0YXJ0TGV2ZWw9dm9pZCAwLHRoaXMubWFudWFsTGV2ZWxJbmRleD0tMSx0aGlzLmN1cnJlbnRMZXZlbEluZGV4PS0xLHRoaXMuY3VycmVudExldmVsPW51bGwsdGhpcy5fbGV2ZWxzPVtdLHRoaXMuX21heEF1dG9MZXZlbD0tMX0sci5vbk1hbmlmZXN0TG9hZGluZz1mdW5jdGlvbihlLHQpe3RoaXMucmVzZXRMZXZlbHMoKX0sci5vbk1hbmlmZXN0TG9hZGVkPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5obHMuY29uZmlnLnByZWZlck1hbmFnZWRNZWRpYVNvdXJjZSxpPVtdLGE9e30sbj17fSxzPSExLG89ITEsbD0hMTt0LmxldmVscy5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdCx1LGQ9ZS5hdHRycyxoPWUuYXVkaW9Db2RlYyxmPWUudmlkZW9Db2RlYzstMSE9PShudWxsPT0odD1oKT92b2lkIDA6dC5pbmRleE9mKCJtcDRhLjQwLjM0IikpJiYoQXJ8fChBcj0vY2hyb21lfGZpcmVmb3gvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSxBciYmKGUuYXVkaW9Db2RlYz1oPXZvaWQgMCkpLGgmJihlLmF1ZGlvQ29kZWM9aD1HZShoLHIpKSwwPT09KG51bGw9PSh1PWYpP3ZvaWQgMDp1LmluZGV4T2YoImF2YzEiKSkmJihmPWUudmlkZW9Db2RlYz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5zcGxpdCgiLCIpLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIGk9dFtyXS5zcGxpdCgiLiIpO2lmKGkubGVuZ3RoPjIpe3ZhciBhPWkuc2hpZnQoKSsiLiI7YSs9cGFyc2VJbnQoaS5zaGlmdCgpKS50b1N0cmluZygxNiksYSs9KCIwMDAiK3BhcnNlSW50KGkuc2hpZnQoKSkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCksdFtyXT1hfX1yZXR1cm4gdC5qb2luKCIsIil9KGYpKTt2YXIgYz1lLndpZHRoLHY9ZS5oZWlnaHQsZz1lLnVua25vd25Db2RlY3M7aWYoc3x8KHM9ISghY3x8IXYpKSxvfHwobz0hIWYpLGx8fChsPSEhaCksIShudWxsIT1nJiZnLmxlbmd0aHx8aCYmIVBlKGgsImF1ZGlvIixyKXx8ZiYmIVBlKGYsInZpZGVvIixyKSkpe3ZhciBtPWQuQ09ERUNTLHA9ZFsiRlJBTUUtUkFURSJdLHk9ZFsiSERDUC1MRVZFTCJdLEU9ZFsiUEFUSFdBWS1JRCJdLFQ9ZC5SRVNPTFVUSU9OLFM9ZFsiVklERU8tUkFOR0UiXSxMPShFfHwiLiIpKyItIitlLmJpdHJhdGUrIi0iK1QrIi0iK3ArIi0iK20rIi0iK1MrIi0iK3k7aWYoYVtMXSlpZihhW0xdLnVyaT09PWUudXJsfHxlLmF0dHJzWyJQQVRIV0FZLUlEIl0pYVtMXS5hZGRHcm91cElkKCJhdWRpbyIsZC5BVURJTyksYVtMXS5hZGRHcm91cElkKCJ0ZXh0IixkLlNVQlRJVExFUyk7ZWxzZXt2YXIgUj1uW0xdKz0xO2UuYXR0cnNbIlBBVEhXQVktSUQiXT1uZXcgQXJyYXkoUisxKS5qb2luKCIuIik7dmFyIEE9bmV3IHh0KGUpO2FbTF09QSxpLnB1c2goQSl9ZWxzZXt2YXIgYj1uZXcgeHQoZSk7YVtMXT1iLG5bTF09MSxpLnB1c2goYil9fX0pKSx0aGlzLmZpbHRlckFuZFNvcnRNZWRpYU9wdGlvbnMoaSx0LHMsbyxsKX0sci5maWx0ZXJBbmRTb3J0TWVkaWFPcHRpb25zPWZ1bmN0aW9uKGUsdCxyLGksYSl7dmFyIG49dGhpcyxzPVtdLG89W10sbD1lO2lmKChyfHxpKSYmYSYmKGw9bC5maWx0ZXIoKGZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS52aWRlb0NvZGVjLGk9ZS52aWRlb1JhbmdlLGE9ZS53aWR0aCxuPWUuaGVpZ2h0O3JldHVybighIXJ8fCEoIWF8fCFuKSkmJiEhKHQ9aSkmJlJ0LmluZGV4T2YodCk+LTF9KSkpLDAhPT1sLmxlbmd0aCl7aWYodC5hdWRpb1RyYWNrcyl7dmFyIHU9dGhpcy5obHMuY29uZmlnLnByZWZlck1hbmFnZWRNZWRpYVNvdXJjZTt3cihzPXQuYXVkaW9UcmFja3MuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4hZS5hdWRpb0NvZGVjfHxQZShlLmF1ZGlvQ29kZWMsImF1ZGlvIix1KX0pKSl9dC5zdWJ0aXRsZXMmJndyKG89dC5zdWJ0aXRsZXMpO3ZhciBkPWwuc2xpY2UoMCk7bC5zb3J0KChmdW5jdGlvbihlLHQpe2lmKGUuYXR0cnNbIkhEQ1AtTEVWRUwiXSE9PXQuYXR0cnNbIkhEQ1AtTEVWRUwiXSlyZXR1cm4oZS5hdHRyc1siSERDUC1MRVZFTCJdfHwiIik+KHQuYXR0cnNbIkhEQ1AtTEVWRUwiXXx8IiIpPzE6LTE7aWYociYmZS5oZWlnaHQhPT10LmhlaWdodClyZXR1cm4gZS5oZWlnaHQtdC5oZWlnaHQ7aWYoZS5mcmFtZVJhdGUhPT10LmZyYW1lUmF0ZSlyZXR1cm4gZS5mcmFtZVJhdGUtdC5mcmFtZVJhdGU7aWYoZS52aWRlb1JhbmdlIT09dC52aWRlb1JhbmdlKXJldHVybiBSdC5pbmRleE9mKGUudmlkZW9SYW5nZSktUnQuaW5kZXhPZih0LnZpZGVvUmFuZ2UpO2lmKGUudmlkZW9Db2RlYyE9PXQudmlkZW9Db2RlYyl7dmFyIGk9TWUoZS52aWRlb0NvZGVjKSxhPU1lKHQudmlkZW9Db2RlYyk7aWYoaSE9PWEpcmV0dXJuIGEtaX1pZihlLnVyaT09PXQudXJpJiZlLmNvZGVjU2V0IT09dC5jb2RlY1NldCl7dmFyIG49TmUoZS5jb2RlY1NldCkscz1OZSh0LmNvZGVjU2V0KTtpZihuIT09cylyZXR1cm4gcy1ufXJldHVybiBlLmF2ZXJhZ2VCaXRyYXRlIT09dC5hdmVyYWdlQml0cmF0ZT9lLmF2ZXJhZ2VCaXRyYXRlLXQuYXZlcmFnZUJpdHJhdGU6MH0pKTt2YXIgaD1kWzBdO2lmKHRoaXMuc3RlZXJpbmcmJihsPXRoaXMuc3RlZXJpbmcuZmlsdGVyUGFyc2VkTGV2ZWxzKGwpKS5sZW5ndGghPT1kLmxlbmd0aClmb3IodmFyIGY9MDtmPGQubGVuZ3RoO2YrKylpZihkW2ZdLnBhdGh3YXlJZD09PWxbMF0ucGF0aHdheUlkKXtoPWRbZl07YnJlYWt9dGhpcy5fbGV2ZWxzPWw7Zm9yKHZhciBjPTA7YzxsLmxlbmd0aDtjKyspaWYobFtjXT09PWgpe3ZhciB2O3RoaXMuX2ZpcnN0TGV2ZWw9Yzt2YXIgZz1oLmJpdHJhdGUsbT10aGlzLmhscy5iYW5kd2lkdGhFc3RpbWF0ZTtpZih0aGlzLmxvZygibWFuaWZlc3QgbG9hZGVkLCAiK2wubGVuZ3RoKyIgbGV2ZWwocykgZm91bmQsIGZpcnN0IGJpdHJhdGU6ICIrZyksdm9pZCAwPT09KG51bGw9PSh2PXRoaXMuaGxzLnVzZXJDb25maWcpP3ZvaWQgMDp2LmFickV3bWFEZWZhdWx0RXN0aW1hdGUpKXt2YXIgcD1NYXRoLm1pbihnLHRoaXMuaGxzLmNvbmZpZy5hYnJFd21hRGVmYXVsdEVzdGltYXRlTWF4KTtwPm0mJm09PT1rci5hYnJFd21hRGVmYXVsdEVzdGltYXRlJiYodGhpcy5obHMuYmFuZHdpZHRoRXN0aW1hdGU9cCl9YnJlYWt9dmFyIHk9YSYmIWksTD17bGV2ZWxzOmwsYXVkaW9UcmFja3M6cyxzdWJ0aXRsZVRyYWNrczpvLHNlc3Npb25EYXRhOnQuc2Vzc2lvbkRhdGEsc2Vzc2lvbktleXM6dC5zZXNzaW9uS2V5cyxmaXJzdExldmVsOnRoaXMuX2ZpcnN0TGV2ZWwsc3RhdHM6dC5zdGF0cyxhdWRpbzphLHZpZGVvOmksYWx0QXVkaW86IXkmJnMuc29tZSgoZnVuY3Rpb24oZSl7cmV0dXJuISFlLnVybH0pKX07dGhpcy5obHMudHJpZ2dlcihFLk1BTklGRVNUX1BBUlNFRCxMKSwodGhpcy5obHMuY29uZmlnLmF1dG9TdGFydExvYWR8fHRoaXMuaGxzLmZvcmNlU3RhcnRMb2FkKSYmdGhpcy5obHMuc3RhcnRMb2FkKHRoaXMuaGxzLmNvbmZpZy5zdGFydFBvc2l0aW9uKX1lbHNlIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKGZ1bmN0aW9uKCl7aWYobi5obHMpe3QubGV2ZWxzLmxlbmd0aCYmbi53YXJuKCJPbmUgb3IgbW9yZSBDT0RFQ1MgaW4gdmFyaWFudCBub3Qgc3VwcG9ydGVkOiAiK0pTT04uc3RyaW5naWZ5KHQubGV2ZWxzWzBdLmF0dHJzKSk7dmFyIGU9bmV3IEVycm9yKCJubyBsZXZlbCB3aXRoIGNvbXBhdGlibGUgY29kZWNzIGZvdW5kIGluIG1hbmlmZXN0Iik7bi5obHMudHJpZ2dlcihFLkVSUk9SLHt0eXBlOlQuTUVESUFfRVJST1IsZGV0YWlsczpTLk1BTklGRVNUX0lOQ09NUEFUSUJMRV9DT0RFQ1NfRVJST1IsZmF0YWw6ITAsdXJsOnQudXJsLGVycm9yOmUscmVhc29uOmUubWVzc2FnZX0pfX0pKX0sci5vbkVycm9yPWZ1bmN0aW9uKGUsdCl7IXQuZmF0YWwmJnQuY29udGV4dCYmdC5jb250ZXh0LnR5cGU9PT1ydCYmdC5jb250ZXh0LmxldmVsPT09dGhpcy5sZXZlbCYmdGhpcy5jaGVja1JldHJ5KHQpfSxyLm9uRnJhZ0J1ZmZlcmVkPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5mcmFnO2lmKHZvaWQgMCE9PXImJnIudHlwZT09PW50KXt2YXIgaT1yLmVsZW1lbnRhcnlTdHJlYW1zO2lmKCFPYmplY3Qua2V5cyhpKS5zb21lKChmdW5jdGlvbihlKXtyZXR1cm4hIWlbZV19KSkpcmV0dXJuO3ZhciBhPXRoaXMuX2xldmVsc1tyLmxldmVsXTtudWxsIT1hJiZhLmxvYWRFcnJvciYmKHRoaXMubG9nKCJSZXNldHRpbmcgbGV2ZWwgZXJyb3IgY291bnQgb2YgIithLmxvYWRFcnJvcisiIG9uIGZyYWcgYnVmZmVyZWQiKSxhLmxvYWRFcnJvcj0wKX19LHIub25MZXZlbExvYWRlZD1mdW5jdGlvbihlLHQpe3ZhciByLGksYT10LmxldmVsLG49dC5kZXRhaWxzLHM9dGhpcy5fbGV2ZWxzW2FdO2lmKCFzKXJldHVybiB0aGlzLndhcm4oIkludmFsaWQgbGV2ZWwgaW5kZXggIithKSx2b2lkKG51bGwhPShpPXQuZGVsaXZlcnlEaXJlY3RpdmVzKSYmaS5za2lwJiYobi5kZWx0YVVwZGF0ZUZhaWxlZD0hMCkpO2E9PT10aGlzLmN1cnJlbnRMZXZlbEluZGV4PygwPT09cy5mcmFnbWVudEVycm9yJiYocy5sb2FkRXJyb3I9MCksdGhpcy5wbGF5bGlzdExvYWRlZChhLHQscy5kZXRhaWxzKSk6bnVsbCE9KHI9dC5kZWxpdmVyeURpcmVjdGl2ZXMpJiZyLnNraXAmJihuLmRlbHRhVXBkYXRlRmFpbGVkPSEwKX0sci5sb2FkUGxheWxpc3Q9ZnVuY3Rpb24odCl7ZS5wcm90b3R5cGUubG9hZFBsYXlsaXN0LmNhbGwodGhpcyk7dmFyIHI9dGhpcy5jdXJyZW50TGV2ZWxJbmRleCxpPXRoaXMuY3VycmVudExldmVsO2lmKGkmJnRoaXMuc2hvdWxkTG9hZFBsYXlsaXN0KGkpKXt2YXIgYT1pLnVyaTtpZih0KXRyeXthPXQuYWRkRGlyZWN0aXZlcyhhKX1jYXRjaChlKXt0aGlzLndhcm4oIkNvdWxkIG5vdCBjb25zdHJ1Y3QgbmV3IFVSTCB3aXRoIEhMUyBEZWxpdmVyeSBEaXJlY3RpdmVzOiAiK2UpfXZhciBuPWkuYXR0cnNbIlBBVEhXQVktSUQiXTt0aGlzLmxvZygiTG9hZGluZyBsZXZlbCBpbmRleCAiK3IrKHZvaWQgMCE9PShudWxsPT10P3ZvaWQgMDp0Lm1zbik/IiBhdCBzbiAiK3QubXNuKyIgcGFydCAiK3QucGFydDoiIikrIiB3aXRoIisobj8iIFBhdGh3YXkgIituOiIiKSsiICIrYSksdGhpcy5jbGVhclRpbWVyKCksdGhpcy5obHMudHJpZ2dlcihFLkxFVkVMX0xPQURJTkcse3VybDphLGxldmVsOnIscGF0aHdheUlkOmkuYXR0cnNbIlBBVEhXQVktSUQiXSxpZDowLGRlbGl2ZXJ5RGlyZWN0aXZlczp0fHxudWxsfSl9fSxyLnJlbW92ZUxldmVsPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcyxpPXRoaXMuX2xldmVscy5maWx0ZXIoKGZ1bmN0aW9uKHQsaSl7cmV0dXJuIGkhPT1lfHwoci5zdGVlcmluZyYmci5zdGVlcmluZy5yZW1vdmVMZXZlbCh0KSx0PT09ci5jdXJyZW50TGV2ZWwmJihyLmN1cnJlbnRMZXZlbD1udWxsLHIuY3VycmVudExldmVsSW5kZXg9LTEsdC5kZXRhaWxzJiZ0LmRldGFpbHMuZnJhZ21lbnRzLmZvckVhY2goKGZ1bmN0aW9uKGUpe3JldHVybiBlLmxldmVsPS0xfSkpKSwhMSl9KSk7TnQoaSksdGhpcy5fbGV2ZWxzPWksdGhpcy5jdXJyZW50TGV2ZWxJbmRleD4tMSYmbnVsbCE9KHQ9dGhpcy5jdXJyZW50TGV2ZWwpJiZ0LmRldGFpbHMmJih0aGlzLmN1cnJlbnRMZXZlbEluZGV4PXRoaXMuY3VycmVudExldmVsLmRldGFpbHMuZnJhZ21lbnRzWzBdLmxldmVsKSx0aGlzLmhscy50cmlnZ2VyKEUuTEVWRUxTX1VQREFURUQse2xldmVsczppfSl9LHIub25MZXZlbHNVcGRhdGVkPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5sZXZlbHM7dGhpcy5fbGV2ZWxzPXJ9LHIuY2hlY2tNYXhBdXRvVXBkYXRlZD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaGxzLHQ9ZS5hdXRvTGV2ZWxDYXBwaW5nLHI9ZS5tYXhBdXRvTGV2ZWwsaT1lLm1heEhkY3BMZXZlbDt0aGlzLl9tYXhBdXRvTGV2ZWwhPT1yJiYodGhpcy5fbWF4QXV0b0xldmVsPXIsdGhpcy5obHMudHJpZ2dlcihFLk1BWF9BVVRPX0xFVkVMX1VQREFURUQse2F1dG9MZXZlbENhcHBpbmc6dCxsZXZlbHM6dGhpcy5sZXZlbHMsbWF4QXV0b0xldmVsOnIsbWluQXV0b0xldmVsOnRoaXMuaGxzLm1pbkF1dG9MZXZlbCxtYXhIZGNwTGV2ZWw6aX0pKX0scyh0LFt7a2V5OiJsZXZlbHMiLGdldDpmdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5fbGV2ZWxzLmxlbmd0aD9udWxsOnRoaXMuX2xldmVsc319LHtrZXk6ImxldmVsIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJyZW50TGV2ZWxJbmRleH0sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2xldmVscztpZigwIT09dC5sZW5ndGgpe2lmKGU8MHx8ZT49dC5sZW5ndGgpe3ZhciByPW5ldyBFcnJvcigiaW52YWxpZCBsZXZlbCBpZHgiKSxpPWU8MDtpZih0aGlzLmhscy50cmlnZ2VyKEUuRVJST1Ise3R5cGU6VC5PVEhFUl9FUlJPUixkZXRhaWxzOlMuTEVWRUxfU1dJVENIX0VSUk9SLGxldmVsOmUsZmF0YWw6aSxlcnJvcjpyLHJlYXNvbjpyLm1lc3NhZ2V9KSxpKXJldHVybjtlPU1hdGgubWluKGUsdC5sZW5ndGgtMSl9dmFyIGE9dGhpcy5jdXJyZW50TGV2ZWxJbmRleCxuPXRoaXMuY3VycmVudExldmVsLHM9bj9uLmF0dHJzWyJQQVRIV0FZLUlEIl06dm9pZCAwLG89dFtlXSxsPW8uYXR0cnNbIlBBVEhXQVktSUQiXTtpZih0aGlzLmN1cnJlbnRMZXZlbEluZGV4PWUsdGhpcy5jdXJyZW50TGV2ZWw9byxhIT09ZXx8IW8uZGV0YWlsc3x8IW58fHMhPT1sKXt0aGlzLmxvZygiU3dpdGNoaW5nIHRvIGxldmVsICIrZSsiICgiKyhvLmhlaWdodD9vLmhlaWdodCsicCAiOiIiKSsoby52aWRlb1JhbmdlP28udmlkZW9SYW5nZSsiICI6IiIpKyhvLmNvZGVjU2V0P28uY29kZWNTZXQrIiAiOiIiKSsiQCIrby5iaXRyYXRlKyIpIisobD8iIHdpdGggUGF0aHdheSAiK2w6IiIpKyIgZnJvbSBsZXZlbCAiK2ErKHM/IiB3aXRoIFBhdGh3YXkgIitzOiIiKSk7dmFyIHU9e2xldmVsOmUsYXR0cnM6by5hdHRycyxkZXRhaWxzOm8uZGV0YWlscyxiaXRyYXRlOm8uYml0cmF0ZSxhdmVyYWdlQml0cmF0ZTpvLmF2ZXJhZ2VCaXRyYXRlLG1heEJpdHJhdGU6by5tYXhCaXRyYXRlLHJlYWxCaXRyYXRlOm8ucmVhbEJpdHJhdGUsd2lkdGg6by53aWR0aCxoZWlnaHQ6by5oZWlnaHQsY29kZWNTZXQ6by5jb2RlY1NldCxhdWRpb0NvZGVjOm8uYXVkaW9Db2RlYyx2aWRlb0NvZGVjOm8udmlkZW9Db2RlYyxhdWRpb0dyb3VwczpvLmF1ZGlvR3JvdXBzLHN1YnRpdGxlR3JvdXBzOm8uc3VidGl0bGVHcm91cHMsbG9hZGVkOm8ubG9hZGVkLGxvYWRFcnJvcjpvLmxvYWRFcnJvcixmcmFnbWVudEVycm9yOm8uZnJhZ21lbnRFcnJvcixuYW1lOm8ubmFtZSxpZDpvLmlkLHVyaTpvLnVyaSx1cmw6by51cmwsdXJsSWQ6MCxhdWRpb0dyb3VwSWRzOm8uYXVkaW9Hcm91cElkcyx0ZXh0R3JvdXBJZHM6by50ZXh0R3JvdXBJZHN9O3RoaXMuaGxzLnRyaWdnZXIoRS5MRVZFTF9TV0lUQ0hJTkcsdSk7dmFyIGQ9by5kZXRhaWxzO2lmKCFkfHxkLmxpdmUpe3ZhciBoPXRoaXMuc3dpdGNoUGFyYW1zKG8udXJpLG51bGw9PW4/dm9pZCAwOm4uZGV0YWlscyxkKTt0aGlzLmxvYWRQbGF5bGlzdChoKX19fX19LHtrZXk6Im1hbnVhbExldmVsIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYW51YWxMZXZlbEluZGV4fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5tYW51YWxMZXZlbEluZGV4PWUsdm9pZCAwPT09dGhpcy5fc3RhcnRMZXZlbCYmKHRoaXMuX3N0YXJ0TGV2ZWw9ZSksLTEhPT1lJiYodGhpcy5sZXZlbD1lKX19LHtrZXk6ImZpcnN0TGV2ZWwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9maXJzdExldmVsfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fZmlyc3RMZXZlbD1lfX0se2tleToic3RhcnRMZXZlbCIsZ2V0OmZ1bmN0aW9uKCl7aWYodm9pZCAwPT09dGhpcy5fc3RhcnRMZXZlbCl7dmFyIGU9dGhpcy5obHMuY29uZmlnLnN0YXJ0TGV2ZWw7cmV0dXJuIHZvaWQgMCE9PWU/ZTp0aGlzLmhscy5maXJzdEF1dG9MZXZlbH1yZXR1cm4gdGhpcy5fc3RhcnRMZXZlbH0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3N0YXJ0TGV2ZWw9ZX19LHtrZXk6Im5leHRMb2FkTGV2ZWwiLGdldDpmdW5jdGlvbigpe3JldHVybi0xIT09dGhpcy5tYW51YWxMZXZlbEluZGV4P3RoaXMubWFudWFsTGV2ZWxJbmRleDp0aGlzLmhscy5uZXh0QXV0b0xldmVsfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5sZXZlbD1lLC0xPT09dGhpcy5tYW51YWxMZXZlbEluZGV4JiYodGhpcy5obHMubmV4dEF1dG9MZXZlbD1lKX19XSksdH0odHIpO2Z1bmN0aW9uIHdyKGUpe3ZhciB0PXt9O2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHI9ZS5ncm91cElkfHwiIjtlLmlkPXRbcl09dFtyXXx8MCx0W3JdKyt9KSl9dmFyIENyPSJOT1RfTE9BREVEIixJcj0iQVBQRU5ESU5HIixQcj0iUEFSVElBTCIsRnI9Ik9LIixPcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5hY3RpdmVQYXJ0TGlzdHM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLmVuZExpc3RGcmFnbWVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLmZyYWdtZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMudGltZVJhbmdlcz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuYnVmZmVyUGFkZGluZz0uMix0aGlzLmhscz12b2lkIDAsdGhpcy5oYXNHYXBzPSExLHRoaXMuaGxzPWUsdGhpcy5fcmVnaXN0ZXJMaXN0ZW5lcnMoKX12YXIgdD1lLnByb3RvdHlwZTtyZXR1cm4gdC5fcmVnaXN0ZXJMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmhscztlLm9uKEUuQlVGRkVSX0FQUEVOREVELHRoaXMub25CdWZmZXJBcHBlbmRlZCx0aGlzKSxlLm9uKEUuRlJBR19CVUZGRVJFRCx0aGlzLm9uRnJhZ0J1ZmZlcmVkLHRoaXMpLGUub24oRS5GUkFHX0xPQURFRCx0aGlzLm9uRnJhZ0xvYWRlZCx0aGlzKX0sdC5fdW5yZWdpc3Rlckxpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaGxzO2Uub2ZmKEUuQlVGRkVSX0FQUEVOREVELHRoaXMub25CdWZmZXJBcHBlbmRlZCx0aGlzKSxlLm9mZihFLkZSQUdfQlVGRkVSRUQsdGhpcy5vbkZyYWdCdWZmZXJlZCx0aGlzKSxlLm9mZihFLkZSQUdfTE9BREVELHRoaXMub25GcmFnTG9hZGVkLHRoaXMpfSx0LmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLl91bnJlZ2lzdGVyTGlzdGVuZXJzKCksdGhpcy5mcmFnbWVudHM9dGhpcy5hY3RpdmVQYXJ0TGlzdHM9dGhpcy5lbmRMaXN0RnJhZ21lbnRzPXRoaXMudGltZVJhbmdlcz1udWxsfSx0LmdldEFwcGVuZGVkRnJhZz1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuYWN0aXZlUGFydExpc3RzW3RdO2lmKHIpZm9yKHZhciBpPXIubGVuZ3RoO2ktLTspe3ZhciBhPXJbaV07aWYoIWEpYnJlYWs7dmFyIG49YS5lbmQ7aWYoYS5zdGFydDw9ZSYmbnVsbCE9PW4mJmU8PW4pcmV0dXJuIGF9cmV0dXJuIHRoaXMuZ2V0QnVmZmVyZWRGcmFnKGUsdCl9LHQuZ2V0QnVmZmVyZWRGcmFnPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPXRoaXMuZnJhZ21lbnRzLGk9T2JqZWN0LmtleXMociksYT1pLmxlbmd0aDthLS07KXt2YXIgbj1yW2lbYV1dO2lmKChudWxsPT1uP3ZvaWQgMDpuLmJvZHkudHlwZSk9PT10JiZuLmJ1ZmZlcmVkKXt2YXIgcz1uLmJvZHk7aWYocy5zdGFydDw9ZSYmZTw9cy5lbmQpcmV0dXJuIHN9fXJldHVybiBudWxsfSx0LmRldGVjdEV2aWN0ZWRGcmFnbWVudHM9ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIGE9dGhpczt0aGlzLnRpbWVSYW5nZXMmJih0aGlzLnRpbWVSYW5nZXNbZV09dCk7dmFyIG49KG51bGw9PWk/dm9pZCAwOmkuZnJhZ21lbnQuc24pfHwtMTtPYmplY3Qua2V5cyh0aGlzLmZyYWdtZW50cykuZm9yRWFjaCgoZnVuY3Rpb24oaSl7dmFyIHM9YS5mcmFnbWVudHNbaV07aWYocyYmIShuPj1zLmJvZHkuc24pKWlmKHMuYnVmZmVyZWR8fHMubG9hZGVkKXt2YXIgbz1zLnJhbmdlW2VdO28mJm8udGltZS5zb21lKChmdW5jdGlvbihlKXt2YXIgcj0hYS5pc1RpbWVCdWZmZXJlZChlLnN0YXJ0UFRTLGUuZW5kUFRTLHQpO3JldHVybiByJiZhLnJlbW92ZUZyYWdtZW50KHMuYm9keSkscn0pKX1lbHNlIHMuYm9keS50eXBlPT09ciYmYS5yZW1vdmVGcmFnbWVudChzLmJvZHkpfSkpfSx0LmRldGVjdFBhcnRpYWxGcmFnbWVudHM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXMudGltZVJhbmdlcyxpPWUuZnJhZyxhPWUucGFydDtpZihyJiYiaW5pdFNlZ21lbnQiIT09aS5zbil7dmFyIG49TnIoaSkscz10aGlzLmZyYWdtZW50c1tuXTtpZighKCFzfHxzLmJ1ZmZlcmVkJiZpLmdhcCkpe3ZhciBvPSFpLnJlbHVybDtPYmplY3Qua2V5cyhyKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1pLmVsZW1lbnRhcnlTdHJlYW1zW2VdO2lmKG4pe3ZhciBsPXJbZV0sdT1vfHwhMD09PW4ucGFydGlhbDtzLnJhbmdlW2VdPXQuZ2V0QnVmZmVyZWRUaW1lcyhpLGEsdSxsKX19KSkscy5sb2FkZWQ9bnVsbCxPYmplY3Qua2V5cyhzLnJhbmdlKS5sZW5ndGg/KHMuYnVmZmVyZWQ9ITAsKHMuYm9keS5lbmRMaXN0PWkuZW5kTGlzdHx8cy5ib2R5LmVuZExpc3QpJiYodGhpcy5lbmRMaXN0RnJhZ21lbnRzW3MuYm9keS50eXBlXT1zKSxNcihzKXx8dGhpcy5yZW1vdmVQYXJ0cyhpLnNuLTEsaS50eXBlKSk6dGhpcy5yZW1vdmVGcmFnbWVudChzLmJvZHkpfX19LHQucmVtb3ZlUGFydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmFjdGl2ZVBhcnRMaXN0c1t0XTtyJiYodGhpcy5hY3RpdmVQYXJ0TGlzdHNbdF09ci5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmZyYWdtZW50LnNuPj1lfSkpKX0sdC5mcmFnQnVmZmVyZWQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj1OcihlKSxpPXRoaXMuZnJhZ21lbnRzW3JdOyFpJiZ0JiYoaT10aGlzLmZyYWdtZW50c1tyXT17Ym9keTplLGFwcGVuZGVkUFRTOm51bGwsbG9hZGVkOm51bGwsYnVmZmVyZWQ6ITEscmFuZ2U6T2JqZWN0LmNyZWF0ZShudWxsKX0sZS5nYXAmJih0aGlzLmhhc0dhcHM9ITApKSxpJiYoaS5sb2FkZWQ9bnVsbCxpLmJ1ZmZlcmVkPSEwKX0sdC5nZXRCdWZmZXJlZFRpbWVzPWZ1bmN0aW9uKGUsdCxyLGkpe2Zvcih2YXIgYT17dGltZTpbXSxwYXJ0aWFsOnJ9LG49ZS5zdGFydCxzPWUuZW5kLG89ZS5taW5FbmRQVFN8fHMsbD1lLm1heFN0YXJ0UFRTfHxuLHU9MDt1PGkubGVuZ3RoO3UrKyl7dmFyIGQ9aS5zdGFydCh1KS10aGlzLmJ1ZmZlclBhZGRpbmcsaD1pLmVuZCh1KSt0aGlzLmJ1ZmZlclBhZGRpbmc7aWYobD49ZCYmbzw9aCl7YS50aW1lLnB1c2goe3N0YXJ0UFRTOk1hdGgubWF4KG4saS5zdGFydCh1KSksZW5kUFRTOk1hdGgubWluKHMsaS5lbmQodSkpfSk7YnJlYWt9aWYobjxoJiZzPmQpe3ZhciBmPU1hdGgubWF4KG4saS5zdGFydCh1KSksYz1NYXRoLm1pbihzLGkuZW5kKHUpKTtjPmYmJihhLnBhcnRpYWw9ITAsYS50aW1lLnB1c2goe3N0YXJ0UFRTOmYsZW5kUFRTOmN9KSl9ZWxzZSBpZihzPD1kKWJyZWFrfXJldHVybiBhfSx0LmdldFBhcnRpYWxGcmFnbWVudD1mdW5jdGlvbihlKXt2YXIgdCxyLGksYT1udWxsLG49MCxzPXRoaXMuYnVmZmVyUGFkZGluZyxvPXRoaXMuZnJhZ21lbnRzO3JldHVybiBPYmplY3Qua2V5cyhvKS5mb3JFYWNoKChmdW5jdGlvbihsKXt2YXIgdT1vW2xdO3UmJk1yKHUpJiYocj11LmJvZHkuc3RhcnQtcyxpPXUuYm9keS5lbmQrcyxlPj1yJiZlPD1pJiYodD1NYXRoLm1pbihlLXIsaS1lKSxuPD10JiYoYT11LmJvZHksbj10KSkpfSkpLGF9LHQuaXNFbmRMaXN0QXBwZW5kZWQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5lbmRMaXN0RnJhZ21lbnRzW2VdO3JldHVybiB2b2lkIDAhPT10JiYodC5idWZmZXJlZHx8TXIodCkpfSx0LmdldFN0YXRlPWZ1bmN0aW9uKGUpe3ZhciB0PU5yKGUpLHI9dGhpcy5mcmFnbWVudHNbdF07cmV0dXJuIHI/ci5idWZmZXJlZD9NcihyKT9QcjpGcjpJcjpDcn0sdC5pc1RpbWVCdWZmZXJlZD1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBpLGEsbj0wO248ci5sZW5ndGg7bisrKXtpZihpPXIuc3RhcnQobiktdGhpcy5idWZmZXJQYWRkaW5nLGE9ci5lbmQobikrdGhpcy5idWZmZXJQYWRkaW5nLGU+PWkmJnQ8PWEpcmV0dXJuITA7aWYodDw9aSlyZXR1cm4hMX1yZXR1cm4hMX0sdC5vbkZyYWdMb2FkZWQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10LmZyYWcsaT10LnBhcnQ7aWYoImluaXRTZWdtZW50IiE9PXIuc24mJiFyLmJpdHJhdGVUZXN0KXt2YXIgYT1pP251bGw6dCxuPU5yKHIpO3RoaXMuZnJhZ21lbnRzW25dPXtib2R5OnIsYXBwZW5kZWRQVFM6bnVsbCxsb2FkZWQ6YSxidWZmZXJlZDohMSxyYW5nZTpPYmplY3QuY3JlYXRlKG51bGwpfX19LHQub25CdWZmZXJBcHBlbmRlZD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsaT10LmZyYWcsYT10LnBhcnQsbj10LnRpbWVSYW5nZXM7aWYoImluaXRTZWdtZW50IiE9PWkuc24pe3ZhciBzPWkudHlwZTtpZihhKXt2YXIgbz10aGlzLmFjdGl2ZVBhcnRMaXN0c1tzXTtvfHwodGhpcy5hY3RpdmVQYXJ0TGlzdHNbc109bz1bXSksby5wdXNoKGEpfXRoaXMudGltZVJhbmdlcz1uLE9iamVjdC5rZXlzKG4pLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07ci5kZXRlY3RFdmljdGVkRnJhZ21lbnRzKGUsdCxzLGEpfSkpfX0sdC5vbkZyYWdCdWZmZXJlZD1mdW5jdGlvbihlLHQpe3RoaXMuZGV0ZWN0UGFydGlhbEZyYWdtZW50cyh0KX0sdC5oYXNGcmFnbWVudD1mdW5jdGlvbihlKXt2YXIgdD1OcihlKTtyZXR1cm4hIXRoaXMuZnJhZ21lbnRzW3RdfSx0Lmhhc1BhcnRzPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiEobnVsbD09KHQ9dGhpcy5hY3RpdmVQYXJ0TGlzdHNbZV0pfHwhdC5sZW5ndGgpfSx0LnJlbW92ZUZyYWdtZW50c0luUmFuZ2U9ZnVuY3Rpb24oZSx0LHIsaSxhKXt2YXIgbj10aGlzO2kmJiF0aGlzLmhhc0dhcHN8fE9iamVjdC5rZXlzKHRoaXMuZnJhZ21lbnRzKS5mb3JFYWNoKChmdW5jdGlvbihzKXt2YXIgbz1uLmZyYWdtZW50c1tzXTtpZihvKXt2YXIgbD1vLmJvZHk7bC50eXBlIT09cnx8aSYmIWwuZ2FwfHxsLnN0YXJ0PHQmJmwuZW5kPmUmJihvLmJ1ZmZlcmVkfHxhKSYmbi5yZW1vdmVGcmFnbWVudChsKX19KSl9LHQucmVtb3ZlRnJhZ21lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9TnIoZSk7ZS5zdGF0cy5sb2FkZWQ9MCxlLmNsZWFyRWxlbWVudGFyeVN0cmVhbUluZm8oKTt2YXIgcj10aGlzLmFjdGl2ZVBhcnRMaXN0c1tlLnR5cGVdO2lmKHIpe3ZhciBpPWUuc247dGhpcy5hY3RpdmVQYXJ0TGlzdHNbZS50eXBlXT1yLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZnJhZ21lbnQuc24hPT1pfSkpfWRlbGV0ZSB0aGlzLmZyYWdtZW50c1t0XSxlLmVuZExpc3QmJmRlbGV0ZSB0aGlzLmVuZExpc3RGcmFnbWVudHNbZS50eXBlXX0sdC5yZW1vdmVBbGxGcmFnbWVudHM9ZnVuY3Rpb24oKXt0aGlzLmZyYWdtZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuZW5kTGlzdEZyYWdtZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuYWN0aXZlUGFydExpc3RzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5oYXNHYXBzPSExfSxlfSgpO2Z1bmN0aW9uIE1yKGUpe3ZhciB0LHIsaTtyZXR1cm4gZS5idWZmZXJlZCYmKGUuYm9keS5nYXB8fChudWxsPT0odD1lLnJhbmdlLnZpZGVvKT92b2lkIDA6dC5wYXJ0aWFsKXx8KG51bGw9PShyPWUucmFuZ2UuYXVkaW8pP3ZvaWQgMDpyLnBhcnRpYWwpfHwobnVsbD09KGk9ZS5yYW5nZS5hdWRpb3ZpZGVvKT92b2lkIDA6aS5wYXJ0aWFsKSl9ZnVuY3Rpb24gTnIoZSl7cmV0dXJuIGUudHlwZSsiXyIrZS5sZXZlbCsiXyIrZS5zbn12YXIgQnI9TWF0aC5wb3coMiwxNyksVXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuY29uZmlnPXZvaWQgMCx0aGlzLmxvYWRlcj1udWxsLHRoaXMucGFydExvYWRUaW1lb3V0PS0xLHRoaXMuY29uZmlnPWV9dmFyIHQ9ZS5wcm90b3R5cGU7cmV0dXJuIHQuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMubG9hZGVyJiYodGhpcy5sb2FkZXIuZGVzdHJveSgpLHRoaXMubG9hZGVyPW51bGwpfSx0LmFib3J0PWZ1bmN0aW9uKCl7dGhpcy5sb2FkZXImJnRoaXMubG9hZGVyLmFib3J0KCl9LHQubG9hZD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsYT1lLnVybDtpZighYSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFZyKHt0eXBlOlQuTkVUV09SS19FUlJPUixkZXRhaWxzOlMuRlJBR19MT0FEX0VSUk9SLGZhdGFsOiExLGZyYWc6ZSxlcnJvcjpuZXcgRXJyb3IoIkZyYWdtZW50IGRvZXMgbm90IGhhdmUgYSAiKyhhPyJwYXJ0IGxpc3QiOiJ1cmwiKSksbmV0d29ya0RldGFpbHM6bnVsbH0pKTt0aGlzLmFib3J0KCk7dmFyIG49dGhpcy5jb25maWcscz1uLmZMb2FkZXIsbz1uLmxvYWRlcjtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKGwsdSl7aWYoci5sb2FkZXImJnIubG9hZGVyLmRlc3Ryb3koKSxlLmdhcCl7aWYoZS50YWdMaXN0LnNvbWUoKGZ1bmN0aW9uKGUpe3JldHVybiJHQVAiPT09ZVswXX0pKSlyZXR1cm4gdm9pZCB1KEhyKGUpKTtlLmdhcD0hMX12YXIgZD1yLmxvYWRlcj1lLmxvYWRlcj1zP25ldyBzKG4pOm5ldyBvKG4pLGg9R3IoZSksZj1IdChuLmZyYWdMb2FkUG9saWN5LmRlZmF1bHQpLGM9e2xvYWRQb2xpY3k6Zix0aW1lb3V0OmYubWF4TG9hZFRpbWVNcyxtYXhSZXRyeTowLHJldHJ5RGVsYXk6MCxtYXhSZXRyeURlbGF5OjAsaGlnaFdhdGVyTWFyazoiaW5pdFNlZ21lbnQiPT09ZS5zbj8xLzA6QnJ9O2Uuc3RhdHM9ZC5zdGF0cyxkLmxvYWQoaCxjLHtvblN1Y2Nlc3M6ZnVuY3Rpb24odCxpLGEsbil7ci5yZXNldExvYWRlcihlLGQpO3ZhciBzPXQuZGF0YTthLnJlc2V0SVYmJmUuZGVjcnlwdGRhdGEmJihlLmRlY3J5cHRkYXRhLml2PW5ldyBVaW50OEFycmF5KHMuc2xpY2UoMCwxNikpLHM9cy5zbGljZSgxNikpLGwoe2ZyYWc6ZSxwYXJ0Om51bGwscGF5bG9hZDpzLG5ldHdvcmtEZXRhaWxzOm59KX0sb25FcnJvcjpmdW5jdGlvbih0LG4scyxvKXtyLnJlc2V0TG9hZGVyKGUsZCksdShuZXcgVnIoe3R5cGU6VC5ORVRXT1JLX0VSUk9SLGRldGFpbHM6Uy5GUkFHX0xPQURfRVJST1IsZmF0YWw6ITEsZnJhZzplLHJlc3BvbnNlOmkoe3VybDphLGRhdGE6dm9pZCAwfSx0KSxlcnJvcjpuZXcgRXJyb3IoIkhUVFAgRXJyb3IgIit0LmNvZGUrIiAiK3QudGV4dCksbmV0d29ya0RldGFpbHM6cyxzdGF0czpvfSkpfSxvbkFib3J0OmZ1bmN0aW9uKHQsaSxhKXtyLnJlc2V0TG9hZGVyKGUsZCksdShuZXcgVnIoe3R5cGU6VC5ORVRXT1JLX0VSUk9SLGRldGFpbHM6Uy5JTlRFUk5BTF9BQk9SVEVELGZhdGFsOiExLGZyYWc6ZSxlcnJvcjpuZXcgRXJyb3IoIkFib3J0ZWQiKSxuZXR3b3JrRGV0YWlsczphLHN0YXRzOnR9KSl9LG9uVGltZW91dDpmdW5jdGlvbih0LGksYSl7ci5yZXNldExvYWRlcihlLGQpLHUobmV3IFZyKHt0eXBlOlQuTkVUV09SS19FUlJPUixkZXRhaWxzOlMuRlJBR19MT0FEX1RJTUVPVVQsZmF0YWw6ITEsZnJhZzplLGVycm9yOm5ldyBFcnJvcigiVGltZW91dCBhZnRlciAiK2MudGltZW91dCsibXMiKSxuZXR3b3JrRGV0YWlsczphLHN0YXRzOnR9KSl9LG9uUHJvZ3Jlc3M6ZnVuY3Rpb24ocixpLGEsbil7dCYmdCh7ZnJhZzplLHBhcnQ6bnVsbCxwYXlsb2FkOmEsbmV0d29ya0RldGFpbHM6bn0pfX0pfSkpfSx0LmxvYWRQYXJ0PWZ1bmN0aW9uKGUsdCxyKXt2YXIgYT10aGlzO3RoaXMuYWJvcnQoKTt2YXIgbj10aGlzLmNvbmZpZyxzPW4uZkxvYWRlcixvPW4ubG9hZGVyO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24obCx1KXtpZihhLmxvYWRlciYmYS5sb2FkZXIuZGVzdHJveSgpLGUuZ2FwfHx0LmdhcCl1KEhyKGUsdCkpO2Vsc2V7dmFyIGQ9YS5sb2FkZXI9ZS5sb2FkZXI9cz9uZXcgcyhuKTpuZXcgbyhuKSxoPUdyKGUsdCksZj1IdChuLmZyYWdMb2FkUG9saWN5LmRlZmF1bHQpLGM9e2xvYWRQb2xpY3k6Zix0aW1lb3V0OmYubWF4TG9hZFRpbWVNcyxtYXhSZXRyeTowLHJldHJ5RGVsYXk6MCxtYXhSZXRyeURlbGF5OjAsaGlnaFdhdGVyTWFyazpCcn07dC5zdGF0cz1kLnN0YXRzLGQubG9hZChoLGMse29uU3VjY2VzczpmdW5jdGlvbihpLG4scyxvKXthLnJlc2V0TG9hZGVyKGUsZCksYS51cGRhdGVTdGF0c0Zyb21QYXJ0KGUsdCk7dmFyIHU9e2ZyYWc6ZSxwYXJ0OnQscGF5bG9hZDppLmRhdGEsbmV0d29ya0RldGFpbHM6b307cih1KSxsKHUpfSxvbkVycm9yOmZ1bmN0aW9uKHIsbixzLG8pe2EucmVzZXRMb2FkZXIoZSxkKSx1KG5ldyBWcih7dHlwZTpULk5FVFdPUktfRVJST1IsZGV0YWlsczpTLkZSQUdfTE9BRF9FUlJPUixmYXRhbDohMSxmcmFnOmUscGFydDp0LHJlc3BvbnNlOmkoe3VybDpoLnVybCxkYXRhOnZvaWQgMH0sciksZXJyb3I6bmV3IEVycm9yKCJIVFRQIEVycm9yICIrci5jb2RlKyIgIityLnRleHQpLG5ldHdvcmtEZXRhaWxzOnMsc3RhdHM6b30pKX0sb25BYm9ydDpmdW5jdGlvbihyLGksbil7ZS5zdGF0cy5hYm9ydGVkPXQuc3RhdHMuYWJvcnRlZCxhLnJlc2V0TG9hZGVyKGUsZCksdShuZXcgVnIoe3R5cGU6VC5ORVRXT1JLX0VSUk9SLGRldGFpbHM6Uy5JTlRFUk5BTF9BQk9SVEVELGZhdGFsOiExLGZyYWc6ZSxwYXJ0OnQsZXJyb3I6bmV3IEVycm9yKCJBYm9ydGVkIiksbmV0d29ya0RldGFpbHM6bixzdGF0czpyfSkpfSxvblRpbWVvdXQ6ZnVuY3Rpb24ocixpLG4pe2EucmVzZXRMb2FkZXIoZSxkKSx1KG5ldyBWcih7dHlwZTpULk5FVFdPUktfRVJST1IsZGV0YWlsczpTLkZSQUdfTE9BRF9USU1FT1VULGZhdGFsOiExLGZyYWc6ZSxwYXJ0OnQsZXJyb3I6bmV3IEVycm9yKCJUaW1lb3V0IGFmdGVyICIrYy50aW1lb3V0KyJtcyIpLG5ldHdvcmtEZXRhaWxzOm4sc3RhdHM6cn0pKX19KX19KSl9LHQudXBkYXRlU3RhdHNGcm9tUGFydD1mdW5jdGlvbihlLHQpe3ZhciByPWUuc3RhdHMsaT10LnN0YXRzLGE9aS50b3RhbDtpZihyLmxvYWRlZCs9aS5sb2FkZWQsYSl7dmFyIG49TWF0aC5yb3VuZChlLmR1cmF0aW9uL3QuZHVyYXRpb24pLHM9TWF0aC5taW4oTWF0aC5yb3VuZChyLmxvYWRlZC9hKSxuKSxvPShuLXMpKk1hdGgucm91bmQoci5sb2FkZWQvcyk7ci50b3RhbD1yLmxvYWRlZCtvfWVsc2Ugci50b3RhbD1NYXRoLm1heChyLmxvYWRlZCxyLnRvdGFsKTt2YXIgbD1yLmxvYWRpbmcsdT1pLmxvYWRpbmc7bC5zdGFydD9sLmZpcnN0Kz11LmZpcnN0LXUuc3RhcnQ6KGwuc3RhcnQ9dS5zdGFydCxsLmZpcnN0PXUuZmlyc3QpLGwuZW5kPXUuZW5kfSx0LnJlc2V0TG9hZGVyPWZ1bmN0aW9uKGUsdCl7ZS5sb2FkZXI9bnVsbCx0aGlzLmxvYWRlcj09PXQmJihzZWxmLmNsZWFyVGltZW91dCh0aGlzLnBhcnRMb2FkVGltZW91dCksdGhpcy5sb2FkZXI9bnVsbCksdC5kZXN0cm95KCl9LGV9KCk7ZnVuY3Rpb24gR3IoZSx0KXt2b2lkIDA9PT10JiYodD1udWxsKTt2YXIgcj10fHxlLGk9e2ZyYWc6ZSxwYXJ0OnQscmVzcG9uc2VUeXBlOiJhcnJheWJ1ZmZlciIsdXJsOnIudXJsLGhlYWRlcnM6e30scmFuZ2VTdGFydDowLHJhbmdlRW5kOjB9LGE9ci5ieXRlUmFuZ2VTdGFydE9mZnNldCxuPXIuYnl0ZVJhbmdlRW5kT2Zmc2V0O2lmKG0oYSkmJm0obikpe3ZhciBzLG89YSxsPW47aWYoImluaXRTZWdtZW50Ij09PWUuc24mJiJBRVMtMTI4Ij09PShudWxsPT0ocz1lLmRlY3J5cHRkYXRhKT92b2lkIDA6cy5tZXRob2QpKXt2YXIgdT1uLWE7dSUxNiYmKGw9bisoMTYtdSUxNikpLDAhPT1hJiYoaS5yZXNldElWPSEwLG89YS0xNil9aS5yYW5nZVN0YXJ0PW8saS5yYW5nZUVuZD1sfXJldHVybiBpfWZ1bmN0aW9uIEhyKGUsdCl7dmFyIHI9bmV3IEVycm9yKCJHQVAgIisoZS5nYXA/InRhZyI6ImF0dHJpYnV0ZSIpKyIgZm91bmQiKSxpPXt0eXBlOlQuTUVESUFfRVJST1IsZGV0YWlsczpTLkZSQUdfR0FQLGZhdGFsOiExLGZyYWc6ZSxlcnJvcjpyLG5ldHdvcmtEZXRhaWxzOm51bGx9O3JldHVybiB0JiYoaS5wYXJ0PXQpLCh0fHxlKS5zdGF0cy5hYm9ydGVkPSEwLG5ldyBWcihpKX12YXIgVnI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2YXIgcjtyZXR1cm4ocj1lLmNhbGwodGhpcyx0LmVycm9yLm1lc3NhZ2UpfHx0aGlzKS5kYXRhPXZvaWQgMCxyLmRhdGE9dCxyfXJldHVybiBsKHQsZSksdH0oZihFcnJvcikpLEtyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmNvbmZpZz12b2lkIDAsdGhpcy5rZXlVcmlUb0tleUluZm89e30sdGhpcy5lbWVDb250cm9sbGVyPW51bGwsdGhpcy5jb25maWc9ZX12YXIgdD1lLnByb3RvdHlwZTtyZXR1cm4gdC5hYm9ydD1mdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gdGhpcy5rZXlVcmlUb0tleUluZm8pe3ZhciByPXRoaXMua2V5VXJpVG9LZXlJbmZvW3RdLmxvYWRlcjtpZihyKXt2YXIgaTtpZihlJiZlIT09KG51bGw9PShpPXIuY29udGV4dCk/dm9pZCAwOmkuZnJhZy50eXBlKSlyZXR1cm47ci5hYm9ydCgpfX19LHQuZGV0YWNoPWZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIHRoaXMua2V5VXJpVG9LZXlJbmZvKXt2YXIgdD10aGlzLmtleVVyaVRvS2V5SW5mb1tlXTsodC5tZWRpYUtleVNlc3Npb25Db250ZXh0fHx0LmRlY3J5cHRkYXRhLmlzQ29tbW9uRW5jcnlwdGlvbikmJmRlbGV0ZSB0aGlzLmtleVVyaVRvS2V5SW5mb1tlXX19LHQuZGVzdHJveT1mdW5jdGlvbigpe2Zvcih2YXIgZSBpbiB0aGlzLmRldGFjaCgpLHRoaXMua2V5VXJpVG9LZXlJbmZvKXt2YXIgdD10aGlzLmtleVVyaVRvS2V5SW5mb1tlXS5sb2FkZXI7dCYmdC5kZXN0cm95KCl9dGhpcy5rZXlVcmlUb0tleUluZm89e319LHQuY3JlYXRlS2V5TG9hZEVycm9yPWZ1bmN0aW9uKGUsdCxyLGksYSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PVMuS0VZX0xPQURfRVJST1IpLG5ldyBWcih7dHlwZTpULk5FVFdPUktfRVJST1IsZGV0YWlsczp0LGZhdGFsOiExLGZyYWc6ZSxyZXNwb25zZTphLGVycm9yOnIsbmV0d29ya0RldGFpbHM6aX0pfSx0LmxvYWRDbGVhcj1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYodGhpcy5lbWVDb250cm9sbGVyJiZ0aGlzLmNvbmZpZy5lbWVFbmFibGVkKWZvcih2YXIgaT1lLnNuLGE9ZS5jYyxuPWZ1bmN0aW9uKCl7dmFyIGU9dFtzXTtpZihhPD1lLmNjJiYoImluaXRTZWdtZW50Ij09PWl8fCJpbml0U2VnbWVudCI9PT1lLnNufHxpPGUuc24pKXJldHVybiByLmVtZUNvbnRyb2xsZXIuc2VsZWN0S2V5U3lzdGVtRm9ybWF0KGUpLnRoZW4oKGZ1bmN0aW9uKHQpe2Uuc2V0S2V5Rm9ybWF0KHQpfSkpLDF9LHM9MDtzPHQubGVuZ3RoJiYhbigpO3MrKyk7fSx0LmxvYWQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4hZS5kZWNyeXB0ZGF0YSYmZS5lbmNyeXB0ZWQmJnRoaXMuZW1lQ29udHJvbGxlcj90aGlzLmVtZUNvbnRyb2xsZXIuc2VsZWN0S2V5U3lzdGVtRm9ybWF0KGUpLnRoZW4oKGZ1bmN0aW9uKHIpe3JldHVybiB0LmxvYWRJbnRlcm5hbChlLHIpfSkpOnRoaXMubG9hZEludGVybmFsKGUpfSx0LmxvYWRJbnRlcm5hbD1mdW5jdGlvbihlLHQpe3ZhciByLGk7dCYmZS5zZXRLZXlGb3JtYXQodCk7dmFyIGE9ZS5kZWNyeXB0ZGF0YTtpZighYSl7dmFyIG49bmV3IEVycm9yKHQ/IkV4cGVjdGVkIGZyYWcuZGVjcnlwdGRhdGEgdG8gYmUgZGVmaW5lZCBhZnRlciBzZXR0aW5nIGZvcm1hdCAiK3Q6Ik1pc3NpbmcgZGVjcnlwdGlvbiBkYXRhIG9uIGZyYWdtZW50IGluIG9uS2V5TG9hZGluZyIpO3JldHVybiBQcm9taXNlLnJlamVjdCh0aGlzLmNyZWF0ZUtleUxvYWRFcnJvcihlLFMuS0VZX0xPQURfRVJST1IsbikpfXZhciBzPWEudXJpO2lmKCFzKXJldHVybiBQcm9taXNlLnJlamVjdCh0aGlzLmNyZWF0ZUtleUxvYWRFcnJvcihlLFMuS0VZX0xPQURfRVJST1IsbmV3IEVycm9yKCdJbnZhbGlkIGtleSBVUkk6ICInK3MrJyInKSkpO3ZhciBvLGw9dGhpcy5rZXlVcmlUb0tleUluZm9bc107aWYobnVsbCE9KHI9bCkmJnIuZGVjcnlwdGRhdGEua2V5KXJldHVybiBhLmtleT1sLmRlY3J5cHRkYXRhLmtleSxQcm9taXNlLnJlc29sdmUoe2ZyYWc6ZSxrZXlJbmZvOmx9KTtpZihudWxsIT0oaT1sKSYmaS5rZXlMb2FkUHJvbWlzZSlzd2l0Y2gobnVsbD09KG89bC5tZWRpYUtleVNlc3Npb25Db250ZXh0KT92b2lkIDA6by5rZXlTdGF0dXMpe2Nhc2Ugdm9pZCAwOmNhc2Uic3RhdHVzLXBlbmRpbmciOmNhc2UidXNhYmxlIjpjYXNlInVzYWJsZS1pbi1mdXR1cmUiOnJldHVybiBsLmtleUxvYWRQcm9taXNlLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBhLmtleT10LmtleUluZm8uZGVjcnlwdGRhdGEua2V5LHtmcmFnOmUsa2V5SW5mbzpsfX0pKX1zd2l0Y2gobD10aGlzLmtleVVyaVRvS2V5SW5mb1tzXT17ZGVjcnlwdGRhdGE6YSxrZXlMb2FkUHJvbWlzZTpudWxsLGxvYWRlcjpudWxsLG1lZGlhS2V5U2Vzc2lvbkNvbnRleHQ6bnVsbH0sYS5tZXRob2Qpe2Nhc2UiSVNPLTIzMDAxLTciOmNhc2UiU0FNUExFLUFFUyI6Y2FzZSJTQU1QTEUtQUVTLUNFTkMiOmNhc2UiU0FNUExFLUFFUy1DVFIiOnJldHVybiJpZGVudGl0eSI9PT1hLmtleUZvcm1hdD90aGlzLmxvYWRLZXlIVFRQKGwsZSk6dGhpcy5sb2FkS2V5RU1FKGwsZSk7Y2FzZSJBRVMtMTI4IjpyZXR1cm4gdGhpcy5sb2FkS2V5SFRUUChsLGUpO2RlZmF1bHQ6cmV0dXJuIFByb21pc2UucmVqZWN0KHRoaXMuY3JlYXRlS2V5TG9hZEVycm9yKGUsUy5LRVlfTE9BRF9FUlJPUixuZXcgRXJyb3IoJ0tleSBzdXBwbGllZCB3aXRoIHVuc3VwcG9ydGVkIE1FVEhPRDogIicrYS5tZXRob2QrJyInKSkpfX0sdC5sb2FkS2V5RU1FPWZ1bmN0aW9uKGUsdCl7dmFyIHI9e2ZyYWc6dCxrZXlJbmZvOmV9O2lmKHRoaXMuZW1lQ29udHJvbGxlciYmdGhpcy5jb25maWcuZW1lRW5hYmxlZCl7dmFyIGk9dGhpcy5lbWVDb250cm9sbGVyLmxvYWRLZXkocik7aWYoaSlyZXR1cm4oZS5rZXlMb2FkUHJvbWlzZT1pLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBlLm1lZGlhS2V5U2Vzc2lvbkNvbnRleHQ9dCxyfSkpKS5jYXRjaCgoZnVuY3Rpb24odCl7dGhyb3cgZS5rZXlMb2FkUHJvbWlzZT1udWxsLHR9KSl9cmV0dXJuIFByb21pc2UucmVzb2x2ZShyKX0sdC5sb2FkS2V5SFRUUD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsYT10aGlzLmNvbmZpZyxuPW5ldygwLGEubG9hZGVyKShhKTtyZXR1cm4gdC5rZXlMb2FkZXI9ZS5sb2FkZXI9bixlLmtleUxvYWRQcm9taXNlPW5ldyBQcm9taXNlKChmdW5jdGlvbihzLG8pe3ZhciBsPXtrZXlJbmZvOmUsZnJhZzp0LHJlc3BvbnNlVHlwZToiYXJyYXlidWZmZXIiLHVybDplLmRlY3J5cHRkYXRhLnVyaX0sdT1hLmtleUxvYWRQb2xpY3kuZGVmYXVsdCxkPXtsb2FkUG9saWN5OnUsdGltZW91dDp1Lm1heExvYWRUaW1lTXMsbWF4UmV0cnk6MCxyZXRyeURlbGF5OjAsbWF4UmV0cnlEZWxheTowfSxoPXtvblN1Y2Nlc3M6ZnVuY3Rpb24oZSx0LGksYSl7dmFyIG49aS5mcmFnLGw9aS5rZXlJbmZvLHU9aS51cmw7aWYoIW4uZGVjcnlwdGRhdGF8fGwhPT1yLmtleVVyaVRvS2V5SW5mb1t1XSlyZXR1cm4gbyhyLmNyZWF0ZUtleUxvYWRFcnJvcihuLFMuS0VZX0xPQURfRVJST1IsbmV3IEVycm9yKCJhZnRlciBrZXkgbG9hZCwgZGVjcnlwdGRhdGEgdW5zZXQgb3IgY2hhbmdlZCIpLGEpKTtsLmRlY3J5cHRkYXRhLmtleT1uLmRlY3J5cHRkYXRhLmtleT1uZXcgVWludDhBcnJheShlLmRhdGEpLG4ua2V5TG9hZGVyPW51bGwsbC5sb2FkZXI9bnVsbCxzKHtmcmFnOm4sa2V5SW5mbzpsfSl9LG9uRXJyb3I6ZnVuY3Rpb24oZSxhLG4scyl7ci5yZXNldExvYWRlcihhKSxvKHIuY3JlYXRlS2V5TG9hZEVycm9yKHQsUy5LRVlfTE9BRF9FUlJPUixuZXcgRXJyb3IoIkhUVFAgRXJyb3IgIitlLmNvZGUrIiBsb2FkaW5nIGtleSAiK2UudGV4dCksbixpKHt1cmw6bC51cmwsZGF0YTp2b2lkIDB9LGUpKSl9LG9uVGltZW91dDpmdW5jdGlvbihlLGksYSl7ci5yZXNldExvYWRlcihpKSxvKHIuY3JlYXRlS2V5TG9hZEVycm9yKHQsUy5LRVlfTE9BRF9USU1FT1VULG5ldyBFcnJvcigia2V5IGxvYWRpbmcgdGltZWQgb3V0IiksYSkpfSxvbkFib3J0OmZ1bmN0aW9uKGUsaSxhKXtyLnJlc2V0TG9hZGVyKGkpLG8oci5jcmVhdGVLZXlMb2FkRXJyb3IodCxTLklOVEVSTkFMX0FCT1JURUQsbmV3IEVycm9yKCJrZXkgbG9hZGluZyBhYm9ydGVkIiksYSkpfX07bi5sb2FkKGwsZCxoKX0pKX0sdC5yZXNldExvYWRlcj1mdW5jdGlvbihlKXt2YXIgdD1lLmZyYWcscj1lLmtleUluZm8saT1lLnVybCxhPXIubG9hZGVyO3Qua2V5TG9hZGVyPT09YSYmKHQua2V5TG9hZGVyPW51bGwsci5sb2FkZXI9bnVsbCksZGVsZXRlIHRoaXMua2V5VXJpVG9LZXlJbmZvW2ldLGEmJmEuZGVzdHJveSgpfSxlfSgpLFdyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2JvdW5kVGljaz12b2lkIDAsdGhpcy5fdGlja1RpbWVyPW51bGwsdGhpcy5fdGlja0ludGVydmFsPW51bGwsdGhpcy5fdGlja0NhbGxDb3VudD0wLHRoaXMuX2JvdW5kVGljaz10aGlzLnRpY2suYmluZCh0aGlzKX12YXIgdD1lLnByb3RvdHlwZTtyZXR1cm4gdC5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5vbkhhbmRsZXJEZXN0cm95aW5nKCksdGhpcy5vbkhhbmRsZXJEZXN0cm95ZWQoKX0sdC5vbkhhbmRsZXJEZXN0cm95aW5nPWZ1bmN0aW9uKCl7dGhpcy5jbGVhck5leHRUaWNrKCksdGhpcy5jbGVhckludGVydmFsKCl9LHQub25IYW5kbGVyRGVzdHJveWVkPWZ1bmN0aW9uKCl7fSx0Lmhhc0ludGVydmFsPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl90aWNrSW50ZXJ2YWx9LHQuaGFzTmV4dFRpY2s9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX3RpY2tUaW1lcn0sdC5zZXRJbnRlcnZhbD1mdW5jdGlvbihlKXtyZXR1cm4hdGhpcy5fdGlja0ludGVydmFsJiYodGhpcy5fdGlja0NhbGxDb3VudD0wLHRoaXMuX3RpY2tJbnRlcnZhbD1zZWxmLnNldEludGVydmFsKHRoaXMuX2JvdW5kVGljayxlKSwhMCl9LHQuY2xlYXJJbnRlcnZhbD1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fdGlja0ludGVydmFsJiYoc2VsZi5jbGVhckludGVydmFsKHRoaXMuX3RpY2tJbnRlcnZhbCksdGhpcy5fdGlja0ludGVydmFsPW51bGwsITApfSx0LmNsZWFyTmV4dFRpY2s9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX3RpY2tUaW1lciYmKHNlbGYuY2xlYXJUaW1lb3V0KHRoaXMuX3RpY2tUaW1lciksdGhpcy5fdGlja1RpbWVyPW51bGwsITApfSx0LnRpY2s9ZnVuY3Rpb24oKXt0aGlzLl90aWNrQ2FsbENvdW50KyssMT09PXRoaXMuX3RpY2tDYWxsQ291bnQmJih0aGlzLmRvVGljaygpLHRoaXMuX3RpY2tDYWxsQ291bnQ+MSYmdGhpcy50aWNrSW1tZWRpYXRlKCksdGhpcy5fdGlja0NhbGxDb3VudD0wKX0sdC50aWNrSW1tZWRpYXRlPWZ1bmN0aW9uKCl7dGhpcy5jbGVhck5leHRUaWNrKCksdGhpcy5fdGlja1RpbWVyPXNlbGYuc2V0VGltZW91dCh0aGlzLl9ib3VuZFRpY2ssMCl9LHQuZG9UaWNrPWZ1bmN0aW9uKCl7fSxlfSgpLGpyPWZ1bmN0aW9uKGUsdCxyLGksYSxuKXt2b2lkIDA9PT1pJiYoaT0wKSx2b2lkIDA9PT1hJiYoYT0tMSksdm9pZCAwPT09biYmKG49ITEpLHRoaXMubGV2ZWw9dm9pZCAwLHRoaXMuc249dm9pZCAwLHRoaXMucGFydD12b2lkIDAsdGhpcy5pZD12b2lkIDAsdGhpcy5zaXplPXZvaWQgMCx0aGlzLnBhcnRpYWw9dm9pZCAwLHRoaXMudHJhbnNtdXhpbmc9e3N0YXJ0OjAsZXhlY3V0ZVN0YXJ0OjAsZXhlY3V0ZUVuZDowLGVuZDowfSx0aGlzLmJ1ZmZlcmluZz17YXVkaW86e3N0YXJ0OjAsZXhlY3V0ZVN0YXJ0OjAsZXhlY3V0ZUVuZDowLGVuZDowfSx2aWRlbzp7c3RhcnQ6MCxleGVjdXRlU3RhcnQ6MCxleGVjdXRlRW5kOjAsZW5kOjB9LGF1ZGlvdmlkZW86e3N0YXJ0OjAsZXhlY3V0ZVN0YXJ0OjAsZXhlY3V0ZUVuZDowLGVuZDowfX0sdGhpcy5sZXZlbD1lLHRoaXMuc249dCx0aGlzLmlkPXIsdGhpcy5zaXplPWksdGhpcy5wYXJ0PWEsdGhpcy5wYXJ0aWFsPW59O2Z1bmN0aW9uIFlyKGUsdCl7Zm9yKHZhciByPTAsaT1lLmxlbmd0aDtyPGk7cisrKXt2YXIgYTtpZigobnVsbD09KGE9ZVtyXSk/dm9pZCAwOmEuY2MpPT09dClyZXR1cm4gZVtyXX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBxcihlLHQpe2lmKGUpe3ZhciByPWUuc3RhcnQrdDtlLnN0YXJ0PWUuc3RhcnRQVFM9cixlLmVuZFBUUz1yK2UuZHVyYXRpb259fWZ1bmN0aW9uIHpyKGUsdCl7Zm9yKHZhciByPXQuZnJhZ21lbnRzLGk9MCxhPXIubGVuZ3RoO2k8YTtpKyspcXIocltpXSxlKTt0LmZyYWdtZW50SGludCYmcXIodC5mcmFnbWVudEhpbnQsZSksdC5hbGlnbmVkU2xpZGluZz0hMH1mdW5jdGlvbiBYcihlLHQscil7dCYmKGZ1bmN0aW9uKGUsdCxyKXtpZihmdW5jdGlvbihlLHQscil7cmV0dXJuISghdHx8IShyLmVuZENDPnIuc3RhcnRDQ3x8ZSYmZS5jYzxyLnN0YXJ0Q0MpKX0oZSxyLHQpKXt2YXIgaT1mdW5jdGlvbihlLHQpe3ZhciByPWUuZnJhZ21lbnRzLGk9dC5mcmFnbWVudHM7aWYoaS5sZW5ndGgmJnIubGVuZ3RoKXt2YXIgYT1ZcihyLGlbMF0uY2MpO2lmKGEmJighYXx8YS5zdGFydFBUUykpcmV0dXJuIGE7RC5sb2coIk5vIGZyYWcgaW4gcHJldmlvdXMgbGV2ZWwgdG8gYWxpZ24gb24iKX1lbHNlIEQubG9nKCJObyBmcmFnbWVudHMgdG8gYWxpZ24iKX0ocix0KTtpJiZtKGkuc3RhcnQpJiYoRC5sb2coIkFkanVzdGluZyBQVFMgdXNpbmcgbGFzdCBsZXZlbCBkdWUgdG8gQ0MgaW5jcmVhc2Ugd2l0aGluIGN1cnJlbnQgbGV2ZWwgIit0LnVybCksenIoaS5zdGFydCx0KSl9fShlLHIsdCksIXIuYWxpZ25lZFNsaWRpbmcmJnQmJmZ1bmN0aW9uKGUsdCl7aWYoZS5oYXNQcm9ncmFtRGF0ZVRpbWUmJnQuaGFzUHJvZ3JhbURhdGVUaW1lKXt2YXIgcixpLGE9ZS5mcmFnbWVudHMsbj10LmZyYWdtZW50cztpZihhLmxlbmd0aCYmbi5sZW5ndGgpe3ZhciBzPU1hdGgubWluKHQuZW5kQ0MsZS5lbmRDQyk7dC5zdGFydENDPHMmJmUuc3RhcnRDQzxzJiYocj1ZcihuLHMpLGk9WXIoYSxzKSksciYmaXx8KGk9WXIoYSwocj1uW01hdGguZmxvb3Iobi5sZW5ndGgvMildKS5jYyl8fGFbTWF0aC5mbG9vcihhLmxlbmd0aC8yKV0pO3ZhciBvPXIucHJvZ3JhbURhdGVUaW1lLGw9aS5wcm9ncmFtRGF0ZVRpbWU7byYmbCYmenIoKGwtbykvMWUzLShpLnN0YXJ0LXIuc3RhcnQpLGUpfX19KHIsdCksci5hbGlnbmVkU2xpZGluZ3x8IXR8fHIuc2tpcHBlZFNlZ21lbnRzfHxGdCh0LHIpKX12YXIgUXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5zdWJ0bGU9dm9pZCAwLHRoaXMuYWVzSVY9dm9pZCAwLHRoaXMuc3VidGxlPWUsdGhpcy5hZXNJVj10fXJldHVybiBlLnByb3RvdHlwZS5kZWNyeXB0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuc3VidGxlLmRlY3J5cHQoe25hbWU6IkFFUy1DQkMiLGl2OnRoaXMuYWVzSVZ9LHQsZSl9LGV9KCksSnI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5zdWJ0bGU9dm9pZCAwLHRoaXMua2V5PXZvaWQgMCx0aGlzLnN1YnRsZT1lLHRoaXMua2V5PXR9cmV0dXJuIGUucHJvdG90eXBlLmV4cGFuZEtleT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN1YnRsZS5pbXBvcnRLZXkoInJhdyIsdGhpcy5rZXkse25hbWU6IkFFUy1DQkMifSwhMSxbImVuY3J5cHQiLCJkZWNyeXB0Il0pfSxlfSgpLCRyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMucmNvbj1bMCwxLDIsNCw4LDE2LDMyLDY0LDEyOCwyNyw1NF0sdGhpcy5zdWJNaXg9W25ldyBVaW50MzJBcnJheSgyNTYpLG5ldyBVaW50MzJBcnJheSgyNTYpLG5ldyBVaW50MzJBcnJheSgyNTYpLG5ldyBVaW50MzJBcnJheSgyNTYpXSx0aGlzLmludlN1Yk1peD1bbmV3IFVpbnQzMkFycmF5KDI1NiksbmV3IFVpbnQzMkFycmF5KDI1NiksbmV3IFVpbnQzMkFycmF5KDI1NiksbmV3IFVpbnQzMkFycmF5KDI1NildLHRoaXMuc0JveD1uZXcgVWludDMyQXJyYXkoMjU2KSx0aGlzLmludlNCb3g9bmV3IFVpbnQzMkFycmF5KDI1NiksdGhpcy5rZXk9bmV3IFVpbnQzMkFycmF5KDApLHRoaXMua3NSb3dzPTAsdGhpcy5rZXlTaXplPTAsdGhpcy5rZXlTY2hlZHVsZT12b2lkIDAsdGhpcy5pbnZLZXlTY2hlZHVsZT12b2lkIDAsdGhpcy5pbml0VGFibGUoKX12YXIgdD1lLnByb3RvdHlwZTtyZXR1cm4gdC51aW50OEFycmF5VG9VaW50MzJBcnJheV89ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PW5ldyBEYXRhVmlldyhlKSxyPW5ldyBVaW50MzJBcnJheSg0KSxpPTA7aTw0O2krKylyW2ldPXQuZ2V0VWludDMyKDQqaSk7cmV0dXJuIHJ9LHQuaW5pdFRhYmxlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zQm94LHQ9dGhpcy5pbnZTQm94LHI9dGhpcy5zdWJNaXgsaT1yWzBdLGE9clsxXSxuPXJbMl0scz1yWzNdLG89dGhpcy5pbnZTdWJNaXgsbD1vWzBdLHU9b1sxXSxkPW9bMl0saD1vWzNdLGY9bmV3IFVpbnQzMkFycmF5KDI1NiksYz0wLHY9MCxnPTA7Zm9yKGc9MDtnPDI1NjtnKyspZltnXT1nPDEyOD9nPDwxOmc8PDFeMjgzO2ZvcihnPTA7ZzwyNTY7ZysrKXt2YXIgbT12XnY8PDFedjw8Ml52PDwzXnY8PDQ7bT1tPj4+OF4yNTUmbV45OSxlW2NdPW0sdFttXT1jO3ZhciBwPWZbY10seT1mW3BdLEU9Zlt5XSxUPTI1NypmW21dXjE2ODQzMDA4Km07aVtjXT1UPDwyNHxUPj4+OCxhW2NdPVQ8PDE2fFQ+Pj4xNixuW2NdPVQ8PDh8VD4+PjI0LHNbY109VCxUPTE2ODQzMDA5KkVeNjU1MzcqeV4yNTcqcF4xNjg0MzAwOCpjLGxbbV09VDw8MjR8VD4+PjgsdVttXT1UPDwxNnxUPj4+MTYsZFttXT1UPDw4fFQ+Pj4yNCxoW21dPVQsYz8oYz1wXmZbZltmW0VecF1dXSx2Xj1mW2Zbdl1dKTpjPXY9MX19LHQuZXhwYW5kS2V5PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLnVpbnQ4QXJyYXlUb1VpbnQzMkFycmF5XyhlKSxyPSEwLGk9MDtpPHQubGVuZ3RoJiZyOylyPXRbaV09PT10aGlzLmtleVtpXSxpKys7aWYoIXIpe3RoaXMua2V5PXQ7dmFyIGE9dGhpcy5rZXlTaXplPXQubGVuZ3RoO2lmKDQhPT1hJiY2IT09YSYmOCE9PWEpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGFlcyBrZXkgc2l6ZT0iK2EpO3ZhciBuLHMsbyxsLHU9dGhpcy5rc1Jvd3M9NCooYSs2KzEpLGQ9dGhpcy5rZXlTY2hlZHVsZT1uZXcgVWludDMyQXJyYXkodSksaD10aGlzLmludktleVNjaGVkdWxlPW5ldyBVaW50MzJBcnJheSh1KSxmPXRoaXMuc0JveCxjPXRoaXMucmNvbix2PXRoaXMuaW52U3ViTWl4LGc9dlswXSxtPXZbMV0scD12WzJdLHk9dlszXTtmb3Iobj0wO248dTtuKyspbjxhP289ZFtuXT10W25dOihsPW8sbiVhPT0wPyhsPWZbKGw9bDw8OHxsPj4+MjQpPj4+MjRdPDwyNHxmW2w+Pj4xNiYyNTVdPDwxNnxmW2w+Pj44JjI1NV08PDh8ZlsyNTUmbF0sbF49Y1tuL2F8MF08PDI0KTphPjYmJm4lYT09NCYmKGw9ZltsPj4+MjRdPDwyNHxmW2w+Pj4xNiYyNTVdPDwxNnxmW2w+Pj44JjI1NV08PDh8ZlsyNTUmbF0pLGRbbl09bz0oZFtuLWFdXmwpPj4+MCk7Zm9yKHM9MDtzPHU7cysrKW49dS1zLGw9MyZzP2Rbbl06ZFtuLTRdLGhbc109czw0fHxuPD00P2w6Z1tmW2w+Pj4yNF1dXm1bZltsPj4+MTYmMjU1XV1ecFtmW2w+Pj44JjI1NV1dXnlbZlsyNTUmbF1dLGhbc109aFtzXT4+PjB9fSx0Lm5ldHdvcmtUb0hvc3RPcmRlclN3YXA9ZnVuY3Rpb24oZSl7cmV0dXJuIGU8PDI0fCg2NTI4MCZlKTw8OHwoMTY3MTE2ODAmZSk+Pjh8ZT4+PjI0fSx0LmRlY3J5cHQ9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgaSxhLG4scyxvLGwsdSxkLGgsZixjLHYsZyxtLHA9dGhpcy5rZXlTaXplKzYseT10aGlzLmludktleVNjaGVkdWxlLEU9dGhpcy5pbnZTQm94LFQ9dGhpcy5pbnZTdWJNaXgsUz1UWzBdLEw9VFsxXSxSPVRbMl0sQT1UWzNdLGI9dGhpcy51aW50OEFycmF5VG9VaW50MzJBcnJheV8ociksaz1iWzBdLEQ9YlsxXSxfPWJbMl0seD1iWzNdLHc9bmV3IEludDMyQXJyYXkoZSksQz1uZXcgSW50MzJBcnJheSh3Lmxlbmd0aCksST10aGlzLm5ldHdvcmtUb0hvc3RPcmRlclN3YXA7dDx3Lmxlbmd0aDspe2ZvcihoPUkod1t0XSksZj1JKHdbdCsxXSksYz1JKHdbdCsyXSksdj1JKHdbdCszXSksbz1oXnlbMF0sbD12XnlbMV0sdT1jXnlbMl0sZD1mXnlbM10sZz00LG09MTttPHA7bSsrKWk9U1tvPj4+MjRdXkxbbD4+MTYmMjU1XV5SW3U+PjgmMjU1XV5BWzI1NSZkXV55W2ddLGE9U1tsPj4+MjRdXkxbdT4+MTYmMjU1XV5SW2Q+PjgmMjU1XV5BWzI1NSZvXV55W2crMV0sbj1TW3U+Pj4yNF1eTFtkPj4xNiYyNTVdXlJbbz4+OCYyNTVdXkFbMjU1JmxdXnlbZysyXSxzPVNbZD4+PjI0XV5MW28+PjE2JjI1NV1eUltsPj44JjI1NV1eQVsyNTUmdV1eeVtnKzNdLG89aSxsPWEsdT1uLGQ9cyxnKz00O2k9RVtvPj4+MjRdPDwyNF5FW2w+PjE2JjI1NV08PDE2XkVbdT4+OCYyNTVdPDw4XkVbMjU1JmRdXnlbZ10sYT1FW2w+Pj4yNF08PDI0XkVbdT4+MTYmMjU1XTw8MTZeRVtkPj44JjI1NV08PDheRVsyNTUmb11eeVtnKzFdLG49RVt1Pj4+MjRdPDwyNF5FW2Q+PjE2JjI1NV08PDE2XkVbbz4+OCYyNTVdPDw4XkVbMjU1JmxdXnlbZysyXSxzPUVbZD4+PjI0XTw8MjReRVtvPj4xNiYyNTVdPDwxNl5FW2w+PjgmMjU1XTw8OF5FWzI1NSZ1XV55W2crM10sQ1t0XT1JKGleayksQ1t0KzFdPUkoc15EKSxDW3QrMl09SShuXl8pLENbdCszXT1JKGFeeCksaz1oLEQ9ZixfPWMseD12LHQrPTR9cmV0dXJuIEMuYnVmZmVyfSxlfSgpLFpyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3ZhciByPSh2b2lkIDA9PT10P3t9OnQpLnJlbW92ZVBLQ1M3UGFkZGluZyxpPXZvaWQgMD09PXJ8fHI7aWYodGhpcy5sb2dFbmFibGVkPSEwLHRoaXMucmVtb3ZlUEtDUzdQYWRkaW5nPXZvaWQgMCx0aGlzLnN1YnRsZT1udWxsLHRoaXMuc29mdHdhcmVEZWNyeXB0ZXI9bnVsbCx0aGlzLmtleT1udWxsLHRoaXMuZmFzdEFlc0tleT1udWxsLHRoaXMucmVtYWluZGVyRGF0YT1udWxsLHRoaXMuY3VycmVudElWPW51bGwsdGhpcy5jdXJyZW50UmVzdWx0PW51bGwsdGhpcy51c2VTb2Z0d2FyZT12b2lkIDAsdGhpcy51c2VTb2Z0d2FyZT1lLmVuYWJsZVNvZnR3YXJlQUVTLHRoaXMucmVtb3ZlUEtDUzdQYWRkaW5nPWksaSl0cnl7dmFyIGE9c2VsZi5jcnlwdG87YSYmKHRoaXMuc3VidGxlPWEuc3VidGxlfHxhLndlYmtpdFN1YnRsZSl9Y2F0Y2goZSl7fXRoaXMudXNlU29mdHdhcmU9IXRoaXMuc3VidGxlfXZhciB0PWUucHJvdG90eXBlO3JldHVybiB0LmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnN1YnRsZT1udWxsLHRoaXMuc29mdHdhcmVEZWNyeXB0ZXI9bnVsbCx0aGlzLmtleT1udWxsLHRoaXMuZmFzdEFlc0tleT1udWxsLHRoaXMucmVtYWluZGVyRGF0YT1udWxsLHRoaXMuY3VycmVudElWPW51bGwsdGhpcy5jdXJyZW50UmVzdWx0PW51bGx9LHQuaXNTeW5jPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXNlU29mdHdhcmV9LHQuZmx1c2g9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmN1cnJlbnRSZXN1bHQsdD10aGlzLnJlbWFpbmRlckRhdGE7aWYoIWV8fHQpcmV0dXJuIHRoaXMucmVzZXQoKSxudWxsO3ZhciByLGksYSxuPW5ldyBVaW50OEFycmF5KGUpO3JldHVybiB0aGlzLnJlc2V0KCksdGhpcy5yZW1vdmVQS0NTN1BhZGRpbmc/KGk9KHI9bikuYnl0ZUxlbmd0aCwoYT1pJiZuZXcgRGF0YVZpZXcoci5idWZmZXIpLmdldFVpbnQ4KGktMSkpP1YociwwLGktYSk6cik6bn0sdC5yZXNldD1mdW5jdGlvbigpe3RoaXMuY3VycmVudFJlc3VsdD1udWxsLHRoaXMuY3VycmVudElWPW51bGwsdGhpcy5yZW1haW5kZXJEYXRhPW51bGwsdGhpcy5zb2Z0d2FyZURlY3J5cHRlciYmKHRoaXMuc29mdHdhcmVEZWNyeXB0ZXI9bnVsbCl9LHQuZGVjcnlwdD1mdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcztyZXR1cm4gdGhpcy51c2VTb2Z0d2FyZT9uZXcgUHJvbWlzZSgoZnVuY3Rpb24oYSxuKXtpLnNvZnR3YXJlRGVjcnlwdChuZXcgVWludDhBcnJheShlKSx0LHIpO3ZhciBzPWkuZmx1c2goKTtzP2Eocy5idWZmZXIpOm4obmV3IEVycm9yKCJbc29mdHdhcmVEZWNyeXB0XSBGYWlsZWQgdG8gZGVjcnlwdCBkYXRhIikpfSkpOnRoaXMud2ViQ3J5cHRvRGVjcnlwdChuZXcgVWludDhBcnJheShlKSx0LHIpfSx0LnNvZnR3YXJlRGVjcnlwdD1mdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcy5jdXJyZW50SVYsYT10aGlzLmN1cnJlbnRSZXN1bHQsbj10aGlzLnJlbWFpbmRlckRhdGE7dGhpcy5sb2dPbmNlKCJKUyBBRVMgZGVjcnlwdCIpLG4mJihlPWJlKG4sZSksdGhpcy5yZW1haW5kZXJEYXRhPW51bGwpO3ZhciBzPXRoaXMuZ2V0VmFsaWRDaHVuayhlKTtpZighcy5sZW5ndGgpcmV0dXJuIG51bGw7aSYmKHI9aSk7dmFyIG89dGhpcy5zb2Z0d2FyZURlY3J5cHRlcjtvfHwobz10aGlzLnNvZnR3YXJlRGVjcnlwdGVyPW5ldyAkciksby5leHBhbmRLZXkodCk7dmFyIGw9YTtyZXR1cm4gdGhpcy5jdXJyZW50UmVzdWx0PW8uZGVjcnlwdChzLmJ1ZmZlciwwLHIpLHRoaXMuY3VycmVudElWPVYocywtMTYpLmJ1ZmZlcixsfHxudWxsfSx0LndlYkNyeXB0b0RlY3J5cHQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXM7aWYodGhpcy5rZXkhPT10fHwhdGhpcy5mYXN0QWVzS2V5KXtpZighdGhpcy5zdWJ0bGUpcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLm9uV2ViQ3J5cHRvRXJyb3IoZSx0LHIpKTt0aGlzLmtleT10LHRoaXMuZmFzdEFlc0tleT1uZXcgSnIodGhpcy5zdWJ0bGUsdCl9cmV0dXJuIHRoaXMuZmFzdEFlc0tleS5leHBhbmRLZXkoKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gaS5zdWJ0bGU/KGkubG9nT25jZSgiV2ViQ3J5cHRvIEFFUyBkZWNyeXB0IiksbmV3IFFyKGkuc3VidGxlLG5ldyBVaW50OEFycmF5KHIpKS5kZWNyeXB0KGUuYnVmZmVyLHQpKTpQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIndlYiBjcnlwdG8gbm90IGluaXRpYWxpemVkIikpfSkpLmNhdGNoKChmdW5jdGlvbihhKXtyZXR1cm4gRC53YXJuKCJbZGVjcnlwdGVyXTogV2ViQ3J5cHRvIEVycm9yLCBkaXNhYmxlIFdlYkNyeXB0byBBUEksICIrYS5uYW1lKyI6ICIrYS5tZXNzYWdlKSxpLm9uV2ViQ3J5cHRvRXJyb3IoZSx0LHIpfSkpfSx0Lm9uV2ViQ3J5cHRvRXJyb3I9ZnVuY3Rpb24oZSx0LHIpe3RoaXMudXNlU29mdHdhcmU9ITAsdGhpcy5sb2dFbmFibGVkPSEwLHRoaXMuc29mdHdhcmVEZWNyeXB0KGUsdCxyKTt2YXIgaT10aGlzLmZsdXNoKCk7aWYoaSlyZXR1cm4gaS5idWZmZXI7dGhyb3cgbmV3IEVycm9yKCJXZWJDcnlwdG8gYW5kIHNvZnR3YXJlRGVjcnlwdDogZmFpbGVkIHRvIGRlY3J5cHQgZGF0YSIpfSx0LmdldFZhbGlkQ2h1bms9ZnVuY3Rpb24oZSl7dmFyIHQ9ZSxyPWUubGVuZ3RoLWUubGVuZ3RoJTE2O3JldHVybiByIT09ZS5sZW5ndGgmJih0PVYoZSwwLHIpLHRoaXMucmVtYWluZGVyRGF0YT1WKGUscikpLHR9LHQubG9nT25jZT1mdW5jdGlvbihlKXt0aGlzLmxvZ0VuYWJsZWQmJihELmxvZygiW2RlY3J5cHRlcl06ICIrZSksdGhpcy5sb2dFbmFibGVkPSExKX0sZX0oKSxlaT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9IiIscj1lLmxlbmd0aCxpPTA7aTxyO2krKyl0Kz0iWyIrZS5zdGFydChpKS50b0ZpeGVkKDMpKyItIitlLmVuZChpKS50b0ZpeGVkKDMpKyJdIjtyZXR1cm4gdH0sdGk9IlNUT1BQRUQiLHJpPSJJRExFIixpaT0iS0VZX0xPQURJTkciLGFpPSJGUkFHX0xPQURJTkciLG5pPSJGUkFHX0xPQURJTkdfV0FJVElOR19SRVRSWSIsc2k9IlBBUlNJTkciLG9pPSJQQVJTRUQiLGxpPSJFTkRFRCIsdWk9IkVSUk9SIixkaT0iV0FJVElOR19MRVZFTCIsaGk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxhLG4pe3ZhciBzO3JldHVybihzPWUuY2FsbCh0aGlzKXx8dGhpcykuaGxzPXZvaWQgMCxzLmZyYWdQcmV2aW91cz1udWxsLHMuZnJhZ0N1cnJlbnQ9bnVsbCxzLmZyYWdtZW50VHJhY2tlcj12b2lkIDAscy50cmFuc211eGVyPW51bGwscy5fc3RhdGU9dGkscy5wbGF5bGlzdFR5cGU9dm9pZCAwLHMubWVkaWE9bnVsbCxzLm1lZGlhQnVmZmVyPW51bGwscy5jb25maWc9dm9pZCAwLHMuYml0cmF0ZVRlc3Q9ITEscy5sYXN0Q3VycmVudFRpbWU9MCxzLm5leHRMb2FkUG9zaXRpb249MCxzLnN0YXJ0UG9zaXRpb249MCxzLnN0YXJ0VGltZU9mZnNldD1udWxsLHMubG9hZGVkbWV0YWRhdGE9ITEscy5yZXRyeURhdGU9MCxzLmxldmVscz1udWxsLHMuZnJhZ21lbnRMb2FkZXI9dm9pZCAwLHMua2V5TG9hZGVyPXZvaWQgMCxzLmxldmVsTGFzdExvYWRlZD1udWxsLHMuc3RhcnRGcmFnUmVxdWVzdGVkPSExLHMuZGVjcnlwdGVyPXZvaWQgMCxzLmluaXRQVFM9W10scy5idWZmZXJpbmc9ITAscy5vbnZzZWVraW5nPW51bGwscy5vbnZlbmRlZD1udWxsLHMubG9nUHJlZml4PSIiLHMubG9nPXZvaWQgMCxzLndhcm49dm9pZCAwLHMucGxheWxpc3RUeXBlPW4scy5sb2dQcmVmaXg9YSxzLmxvZz1ELmxvZy5iaW5kKEQsYSsiOiIpLHMud2Fybj1ELndhcm4uYmluZChELGErIjoiKSxzLmhscz10LHMuZnJhZ21lbnRMb2FkZXI9bmV3IFVyKHQuY29uZmlnKSxzLmtleUxvYWRlcj1pLHMuZnJhZ21lbnRUcmFja2VyPXIscy5jb25maWc9dC5jb25maWcscy5kZWNyeXB0ZXI9bmV3IFpyKHQuY29uZmlnKSx0Lm9uKEUuTUFOSUZFU1RfTE9BREVELHMub25NYW5pZmVzdExvYWRlZCxmdW5jdGlvbihlKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIGV9KHMpKSxzfWwodCxlKTt2YXIgcj10LnByb3RvdHlwZTtyZXR1cm4gci5kb1RpY2s9ZnVuY3Rpb24oKXt0aGlzLm9uVGlja0VuZCgpfSxyLm9uVGlja0VuZD1mdW5jdGlvbigpe30sci5zdGFydExvYWQ9ZnVuY3Rpb24oZSl7fSxyLnN0b3BMb2FkPWZ1bmN0aW9uKCl7dGhpcy5mcmFnbWVudExvYWRlci5hYm9ydCgpLHRoaXMua2V5TG9hZGVyLmFib3J0KHRoaXMucGxheWxpc3RUeXBlKTt2YXIgZT10aGlzLmZyYWdDdXJyZW50O251bGwhPWUmJmUubG9hZGVyJiYoZS5hYm9ydFJlcXVlc3RzKCksdGhpcy5mcmFnbWVudFRyYWNrZXIucmVtb3ZlRnJhZ21lbnQoZSkpLHRoaXMucmVzZXRUcmFuc211eGVyKCksdGhpcy5mcmFnQ3VycmVudD1udWxsLHRoaXMuZnJhZ1ByZXZpb3VzPW51bGwsdGhpcy5jbGVhckludGVydmFsKCksdGhpcy5jbGVhck5leHRUaWNrKCksdGhpcy5zdGF0ZT10aX0sci5wYXVzZUJ1ZmZlcmluZz1mdW5jdGlvbigpe3RoaXMuYnVmZmVyaW5nPSExfSxyLnJlc3VtZUJ1ZmZlcmluZz1mdW5jdGlvbigpe3RoaXMuYnVmZmVyaW5nPSEwfSxyLl9zdHJlYW1FbmRlZD1mdW5jdGlvbihlLHQpe2lmKHQubGl2ZXx8ZS5uZXh0U3RhcnR8fCFlLmVuZHx8IXRoaXMubWVkaWEpcmV0dXJuITE7dmFyIHI9dC5wYXJ0TGlzdDtpZihudWxsIT1yJiZyLmxlbmd0aCl7dmFyIGk9cltyLmxlbmd0aC0xXTtyZXR1cm4gbHIuaXNCdWZmZXJlZCh0aGlzLm1lZGlhLGkuc3RhcnQraS5kdXJhdGlvbi8yKX12YXIgYT10LmZyYWdtZW50c1t0LmZyYWdtZW50cy5sZW5ndGgtMV0udHlwZTtyZXR1cm4gdGhpcy5mcmFnbWVudFRyYWNrZXIuaXNFbmRMaXN0QXBwZW5kZWQoYSl9LHIuZ2V0TGV2ZWxEZXRhaWxzPWZ1bmN0aW9uKCl7dmFyIGU7aWYodGhpcy5sZXZlbHMmJm51bGwhPT10aGlzLmxldmVsTGFzdExvYWRlZClyZXR1cm4gbnVsbD09KGU9dGhpcy5sZXZlbExhc3RMb2FkZWQpP3ZvaWQgMDplLmRldGFpbHN9LHIub25NZWRpYUF0dGFjaGVkPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5tZWRpYT10aGlzLm1lZGlhQnVmZmVyPXQubWVkaWE7dGhpcy5vbnZzZWVraW5nPXRoaXMub25NZWRpYVNlZWtpbmcuYmluZCh0aGlzKSx0aGlzLm9udmVuZGVkPXRoaXMub25NZWRpYUVuZGVkLmJpbmQodGhpcyksci5hZGRFdmVudExpc3RlbmVyKCJzZWVraW5nIix0aGlzLm9udnNlZWtpbmcpLHIuYWRkRXZlbnRMaXN0ZW5lcigiZW5kZWQiLHRoaXMub252ZW5kZWQpO3ZhciBpPXRoaXMuY29uZmlnO3RoaXMubGV2ZWxzJiZpLmF1dG9TdGFydExvYWQmJnRoaXMuc3RhdGU9PT10aSYmdGhpcy5zdGFydExvYWQoaS5zdGFydFBvc2l0aW9uKX0sci5vbk1lZGlhRGV0YWNoaW5nPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5tZWRpYTtudWxsIT1lJiZlLmVuZGVkJiYodGhpcy5sb2coIk1TRSBkZXRhY2hpbmcgYW5kIHZpZGVvIGVuZGVkLCByZXNldCBzdGFydFBvc2l0aW9uIiksdGhpcy5zdGFydFBvc2l0aW9uPXRoaXMubGFzdEN1cnJlbnRUaW1lPTApLGUmJnRoaXMub252c2Vla2luZyYmdGhpcy5vbnZlbmRlZCYmKGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigic2Vla2luZyIsdGhpcy5vbnZzZWVraW5nKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImVuZGVkIix0aGlzLm9udmVuZGVkKSx0aGlzLm9udnNlZWtpbmc9dGhpcy5vbnZlbmRlZD1udWxsKSx0aGlzLmtleUxvYWRlciYmdGhpcy5rZXlMb2FkZXIuZGV0YWNoKCksdGhpcy5tZWRpYT10aGlzLm1lZGlhQnVmZmVyPW51bGwsdGhpcy5sb2FkZWRtZXRhZGF0YT0hMSx0aGlzLmZyYWdtZW50VHJhY2tlci5yZW1vdmVBbGxGcmFnbWVudHMoKSx0aGlzLnN0b3BMb2FkKCl9LHIub25NZWRpYVNlZWtpbmc9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNvbmZpZyx0PXRoaXMuZnJhZ0N1cnJlbnQscj10aGlzLm1lZGlhLGk9dGhpcy5tZWRpYUJ1ZmZlcixhPXRoaXMuc3RhdGUsbj1yP3IuY3VycmVudFRpbWU6MCxzPWxyLmJ1ZmZlckluZm8oaXx8cixuLGUubWF4QnVmZmVySG9sZSk7aWYodGhpcy5sb2coIm1lZGlhIHNlZWtpbmcgdG8gIisobShuKT9uLnRvRml4ZWQoMyk6bikrIiwgc3RhdGU6ICIrYSksdGhpcy5zdGF0ZT09PWxpKXRoaXMucmVzZXRMb2FkaW5nU3RhdGUoKTtlbHNlIGlmKHQpe3ZhciBvPWUubWF4RnJhZ0xvb2tVcFRvbGVyYW5jZSxsPXQuc3RhcnQtbyx1PXQuc3RhcnQrdC5kdXJhdGlvbitvO2lmKCFzLmxlbnx8dTxzLnN0YXJ0fHxsPnMuZW5kKXt2YXIgZD1uPnU7KG48bHx8ZCkmJihkJiZ0LmxvYWRlciYmKHRoaXMubG9nKCJzZWVraW5nIG91dHNpZGUgb2YgYnVmZmVyIHdoaWxlIGZyYWdtZW50IGxvYWQgaW4gcHJvZ3Jlc3MsIGNhbmNlbCBmcmFnbWVudCBsb2FkIiksdC5hYm9ydFJlcXVlc3RzKCksdGhpcy5yZXNldExvYWRpbmdTdGF0ZSgpKSx0aGlzLmZyYWdQcmV2aW91cz1udWxsKX19ciYmKHRoaXMuZnJhZ21lbnRUcmFja2VyLnJlbW92ZUZyYWdtZW50c0luUmFuZ2UobiwxLzAsdGhpcy5wbGF5bGlzdFR5cGUsITApLHRoaXMubGFzdEN1cnJlbnRUaW1lPW4pLHRoaXMubG9hZGVkbWV0YWRhdGF8fHMubGVufHwodGhpcy5uZXh0TG9hZFBvc2l0aW9uPXRoaXMuc3RhcnRQb3NpdGlvbj1uKSx0aGlzLnRpY2tJbW1lZGlhdGUoKX0sci5vbk1lZGlhRW5kZWQ9ZnVuY3Rpb24oKXt0aGlzLnN0YXJ0UG9zaXRpb249dGhpcy5sYXN0Q3VycmVudFRpbWU9MH0sci5vbk1hbmlmZXN0TG9hZGVkPWZ1bmN0aW9uKGUsdCl7dGhpcy5zdGFydFRpbWVPZmZzZXQ9dC5zdGFydFRpbWVPZmZzZXQsdGhpcy5pbml0UFRTPVtdfSxyLm9uSGFuZGxlckRlc3Ryb3lpbmc9ZnVuY3Rpb24oKXt0aGlzLmhscy5vZmYoRS5NQU5JRkVTVF9MT0FERUQsdGhpcy5vbk1hbmlmZXN0TG9hZGVkLHRoaXMpLHRoaXMuc3RvcExvYWQoKSxlLnByb3RvdHlwZS5vbkhhbmRsZXJEZXN0cm95aW5nLmNhbGwodGhpcyksdGhpcy5obHM9bnVsbH0sci5vbkhhbmRsZXJEZXN0cm95ZWQ9ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPXRpLHRoaXMuZnJhZ21lbnRMb2FkZXImJnRoaXMuZnJhZ21lbnRMb2FkZXIuZGVzdHJveSgpLHRoaXMua2V5TG9hZGVyJiZ0aGlzLmtleUxvYWRlci5kZXN0cm95KCksdGhpcy5kZWNyeXB0ZXImJnRoaXMuZGVjcnlwdGVyLmRlc3Ryb3koKSx0aGlzLmhscz10aGlzLmxvZz10aGlzLndhcm49dGhpcy5kZWNyeXB0ZXI9dGhpcy5rZXlMb2FkZXI9dGhpcy5mcmFnbWVudExvYWRlcj10aGlzLmZyYWdtZW50VHJhY2tlcj1udWxsLGUucHJvdG90eXBlLm9uSGFuZGxlckRlc3Ryb3llZC5jYWxsKHRoaXMpfSxyLmxvYWRGcmFnbWVudD1mdW5jdGlvbihlLHQscil7dGhpcy5fbG9hZEZyYWdGb3JQbGF5YmFjayhlLHQscil9LHIuX2xvYWRGcmFnRm9yUGxheWJhY2s9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXM7dGhpcy5fZG9GcmFnTG9hZChlLHQsciwoZnVuY3Rpb24odCl7aWYoaS5mcmFnQ29udGV4dENoYW5nZWQoZSkpcmV0dXJuIGkud2FybigiRnJhZ21lbnQgIitlLnNuKyh0LnBhcnQ/IiBwOiAiK3QucGFydC5pbmRleDoiIikrIiBvZiBsZXZlbCAiK2UubGV2ZWwrIiB3YXMgZHJvcHBlZCBkdXJpbmcgZG93bmxvYWQuIiksdm9pZCBpLmZyYWdtZW50VHJhY2tlci5yZW1vdmVGcmFnbWVudChlKTtlLnN0YXRzLmNodW5rQ291bnQrKyxpLl9oYW5kbGVGcmFnbWVudExvYWRQcm9ncmVzcyh0KX0pKS50aGVuKChmdW5jdGlvbih0KXtpZih0KXt2YXIgcj1pLnN0YXRlO2kuZnJhZ0NvbnRleHRDaGFuZ2VkKGUpPyhyPT09YWl8fCFpLmZyYWdDdXJyZW50JiZyPT09c2kpJiYoaS5mcmFnbWVudFRyYWNrZXIucmVtb3ZlRnJhZ21lbnQoZSksaS5zdGF0ZT1yaSk6KCJwYXlsb2FkImluIHQmJihpLmxvZygiTG9hZGVkIGZyYWdtZW50ICIrZS5zbisiIG9mIGxldmVsICIrZS5sZXZlbCksaS5obHMudHJpZ2dlcihFLkZSQUdfTE9BREVELHQpKSxpLl9oYW5kbGVGcmFnbWVudExvYWRDb21wbGV0ZSh0KSl9fSkpLmNhdGNoKChmdW5jdGlvbih0KXtpLnN0YXRlIT09dGkmJmkuc3RhdGUhPT11aSYmKGkud2FybigiRnJhZyBlcnJvcjogIisoKG51bGw9PXQ/dm9pZCAwOnQubWVzc2FnZSl8fHQpKSxpLnJlc2V0RnJhZ21lbnRMb2FkaW5nKGUpKX0pKX0sci5jbGVhclRyYWNrZXJJZk5lZWRlZD1mdW5jdGlvbihlKXt2YXIgdCxyPXRoaXMuZnJhZ21lbnRUcmFja2VyO2lmKHIuZ2V0U3RhdGUoZSk9PT1Jcil7dmFyIGk9ZS50eXBlLGE9dGhpcy5nZXRGd2RCdWZmZXJJbmZvKHRoaXMubWVkaWFCdWZmZXIsaSksbj1NYXRoLm1heChlLmR1cmF0aW9uLGE/YS5sZW46dGhpcy5jb25maWcubWF4QnVmZmVyTGVuZ3RoKSxzPXRoaXMuYmFja3RyYWNrRnJhZ21lbnQ7KDE9PShzP2Uuc24tcy5zbjowKXx8dGhpcy5yZWR1Y2VNYXhCdWZmZXJMZW5ndGgobixlLmR1cmF0aW9uKSkmJnIucmVtb3ZlRnJhZ21lbnQoZSl9ZWxzZSAwPT09KG51bGw9PSh0PXRoaXMubWVkaWFCdWZmZXIpP3ZvaWQgMDp0LmJ1ZmZlcmVkLmxlbmd0aCk/ci5yZW1vdmVBbGxGcmFnbWVudHMoKTpyLmhhc1BhcnRzKGUudHlwZSkmJihyLmRldGVjdFBhcnRpYWxGcmFnbWVudHMoe2ZyYWc6ZSxwYXJ0Om51bGwsc3RhdHM6ZS5zdGF0cyxpZDplLnR5cGV9KSxyLmdldFN0YXRlKGUpPT09UHImJnIucmVtb3ZlRnJhZ21lbnQoZSkpfSxyLmNoZWNrTGl2ZVVwZGF0ZT1mdW5jdGlvbihlKXtpZihlLnVwZGF0ZWQmJiFlLmxpdmUpe3ZhciB0PWUuZnJhZ21lbnRzW2UuZnJhZ21lbnRzLmxlbmd0aC0xXTt0aGlzLmZyYWdtZW50VHJhY2tlci5kZXRlY3RQYXJ0aWFsRnJhZ21lbnRzKHtmcmFnOnQscGFydDpudWxsLHN0YXRzOnQuc3RhdHMsaWQ6dC50eXBlfSl9ZS5mcmFnbWVudHNbMF18fChlLmRlbHRhVXBkYXRlRmFpbGVkPSEwKX0sci5mbHVzaE1haW5CdWZmZXI9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PXImJihyPW51bGwpLGUtdCl7dmFyIGk9e3N0YXJ0T2Zmc2V0OmUsZW5kT2Zmc2V0OnQsdHlwZTpyfTt0aGlzLmhscy50cmlnZ2VyKEUuQlVGRkVSX0ZMVVNISU5HLGkpfX0sci5fbG9hZEluaXRTZWdtZW50PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpczt0aGlzLl9kb0ZyYWdMb2FkKGUsdCkudGhlbigoZnVuY3Rpb24odCl7aWYoIXR8fHIuZnJhZ0NvbnRleHRDaGFuZ2VkKGUpfHwhci5sZXZlbHMpdGhyb3cgbmV3IEVycm9yKCJpbml0IGxvYWQgYWJvcnRlZCIpO3JldHVybiB0fSkpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBpPXIuaGxzLGE9dC5wYXlsb2FkLG49ZS5kZWNyeXB0ZGF0YTtpZihhJiZhLmJ5dGVMZW5ndGg+MCYmbnVsbCE9biYmbi5rZXkmJm4uaXYmJiJBRVMtMTI4Ij09PW4ubWV0aG9kKXt2YXIgcz1zZWxmLnBlcmZvcm1hbmNlLm5vdygpO3JldHVybiByLmRlY3J5cHRlci5kZWNyeXB0KG5ldyBVaW50OEFycmF5KGEpLG4ua2V5LmJ1ZmZlcixuLml2LmJ1ZmZlcikuY2F0Y2goKGZ1bmN0aW9uKHQpe3Rocm93IGkudHJpZ2dlcihFLkVSUk9SLHt0eXBlOlQuTUVESUFfRVJST1IsZGV0YWlsczpTLkZSQUdfREVDUllQVF9FUlJPUixmYXRhbDohMSxlcnJvcjp0LHJlYXNvbjp0Lm1lc3NhZ2UsZnJhZzplfSksdH0pKS50aGVuKChmdW5jdGlvbihhKXt2YXIgbj1zZWxmLnBlcmZvcm1hbmNlLm5vdygpO3JldHVybiBpLnRyaWdnZXIoRS5GUkFHX0RFQ1JZUFRFRCx7ZnJhZzplLHBheWxvYWQ6YSxzdGF0czp7dHN0YXJ0OnMsdGRlY3J5cHQ6bn19KSx0LnBheWxvYWQ9YSxyLmNvbXBsZXRlSW5pdFNlZ21lbnRMb2FkKHQpfSkpfXJldHVybiByLmNvbXBsZXRlSW5pdFNlZ21lbnRMb2FkKHQpfSkpLmNhdGNoKChmdW5jdGlvbih0KXtyLnN0YXRlIT09dGkmJnIuc3RhdGUhPT11aSYmKHIud2Fybih0KSxyLnJlc2V0RnJhZ21lbnRMb2FkaW5nKGUpKX0pKX0sci5jb21wbGV0ZUluaXRTZWdtZW50TG9hZD1mdW5jdGlvbihlKXtpZighdGhpcy5sZXZlbHMpdGhyb3cgbmV3IEVycm9yKCJpbml0IGxvYWQgYWJvcnRlZCwgbWlzc2luZyBsZXZlbHMiKTt2YXIgdD1lLmZyYWcuc3RhdHM7dGhpcy5zdGF0ZT1yaSxlLmZyYWcuZGF0YT1uZXcgVWludDhBcnJheShlLnBheWxvYWQpLHQucGFyc2luZy5zdGFydD10LmJ1ZmZlcmluZy5zdGFydD1zZWxmLnBlcmZvcm1hbmNlLm5vdygpLHQucGFyc2luZy5lbmQ9dC5idWZmZXJpbmcuZW5kPXNlbGYucGVyZm9ybWFuY2Uubm93KCksdGhpcy50aWNrKCl9LHIuZnJhZ0NvbnRleHRDaGFuZ2VkPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZnJhZ0N1cnJlbnQ7cmV0dXJuIWV8fCF0fHxlLnNuIT09dC5zbnx8ZS5sZXZlbCE9PXQubGV2ZWx9LHIuZnJhZ0J1ZmZlcmVkQ29tcGxldGU9ZnVuY3Rpb24oZSx0KXt2YXIgcixpLGEsbixzPXRoaXMubWVkaWFCdWZmZXI/dGhpcy5tZWRpYUJ1ZmZlcjp0aGlzLm1lZGlhO2lmKHRoaXMubG9nKCJCdWZmZXJlZCAiK2UudHlwZSsiIHNuOiAiK2Uuc24rKHQ/IiBwYXJ0OiAiK3QuaW5kZXg6IiIpKyIgb2YgIisodGhpcy5wbGF5bGlzdFR5cGU9PT1udD8ibGV2ZWwiOiJ0cmFjayIpKyIgIitlLmxldmVsKyIgKGZyYWc6WyIrKG51bGwhPShyPWUuc3RhcnRQVFMpP3I6TmFOKS50b0ZpeGVkKDMpKyItIisobnVsbCE9KGk9ZS5lbmRQVFMpP2k6TmFOKS50b0ZpeGVkKDMpKyJdID4gYnVmZmVyOiIrKHM/ZWkobHIuZ2V0QnVmZmVyZWQocykpOiIoZGV0YWNoZWQpIikrIikiKSwiaW5pdFNlZ21lbnQiIT09ZS5zbil7dmFyIG87aWYoZS50eXBlIT09b3Qpe3ZhciBsPWUuZWxlbWVudGFyeVN0cmVhbXM7aWYoIU9iamVjdC5rZXlzKGwpLnNvbWUoKGZ1bmN0aW9uKGUpe3JldHVybiEhbFtlXX0pKSlyZXR1cm4gdm9pZCh0aGlzLnN0YXRlPXJpKX12YXIgdT1udWxsPT0obz10aGlzLmxldmVscyk/dm9pZCAwOm9bZS5sZXZlbF07bnVsbCE9dSYmdS5mcmFnbWVudEVycm9yJiYodGhpcy5sb2coIlJlc2V0dGluZyBsZXZlbCBmcmFnbWVudCBlcnJvciBjb3VudCBvZiAiK3UuZnJhZ21lbnRFcnJvcisiIG9uIGZyYWcgYnVmZmVyZWQiKSx1LmZyYWdtZW50RXJyb3I9MCl9dGhpcy5zdGF0ZT1yaSxzJiYoIXRoaXMubG9hZGVkbWV0YWRhdGEmJmUudHlwZT09bnQmJnMuYnVmZmVyZWQubGVuZ3RoJiYobnVsbD09KGE9dGhpcy5mcmFnQ3VycmVudCk/dm9pZCAwOmEuc24pPT09KG51bGw9PShuPXRoaXMuZnJhZ1ByZXZpb3VzKT92b2lkIDA6bi5zbikmJih0aGlzLmxvYWRlZG1ldGFkYXRhPSEwLHRoaXMuc2Vla1RvU3RhcnRQb3MoKSksdGhpcy50aWNrKCkpfSxyLnNlZWtUb1N0YXJ0UG9zPWZ1bmN0aW9uKCl7fSxyLl9oYW5kbGVGcmFnbWVudExvYWRDb21wbGV0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnRyYW5zbXV4ZXI7aWYodCl7dmFyIHI9ZS5mcmFnLGk9ZS5wYXJ0LGE9ZS5wYXJ0c0xvYWRlZCxuPSFhfHwwPT09YS5sZW5ndGh8fGEuc29tZSgoZnVuY3Rpb24oZSl7cmV0dXJuIWV9KSkscz1uZXcganIoci5sZXZlbCxyLnNuLHIuc3RhdHMuY2h1bmtDb3VudCsxLDAsaT9pLmluZGV4Oi0xLCFuKTt0LmZsdXNoKHMpfX0sci5faGFuZGxlRnJhZ21lbnRMb2FkUHJvZ3Jlc3M9ZnVuY3Rpb24oZSl7fSxyLl9kb0ZyYWdMb2FkPWZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBhLG49dGhpczt2b2lkIDA9PT1yJiYocj1udWxsKTt2YXIgcz1udWxsPT10P3ZvaWQgMDp0LmRldGFpbHM7aWYoIXRoaXMubGV2ZWxzfHwhcyl0aHJvdyBuZXcgRXJyb3IoImZyYWcgbG9hZCBhYm9ydGVkLCBtaXNzaW5nIGxldmVsIisocz8iIjoiIGRldGFpbCIpKyJzIik7dmFyIG89bnVsbDtpZighZS5lbmNyeXB0ZWR8fG51bGwhPShhPWUuZGVjcnlwdGRhdGEpJiZhLmtleT8hZS5lbmNyeXB0ZWQmJnMuZW5jcnlwdGVkRnJhZ21lbnRzLmxlbmd0aCYmdGhpcy5rZXlMb2FkZXIubG9hZENsZWFyKGUscy5lbmNyeXB0ZWRGcmFnbWVudHMpOih0aGlzLmxvZygiTG9hZGluZyBrZXkgZm9yICIrZS5zbisiIG9mIFsiK3Muc3RhcnRTTisiLSIrcy5lbmRTTisiXSwgIisoIltzdHJlYW0tY29udHJvbGxlcl0iPT09dGhpcy5sb2dQcmVmaXg/ImxldmVsIjoidHJhY2siKSsiICIrZS5sZXZlbCksdGhpcy5zdGF0ZT1paSx0aGlzLmZyYWdDdXJyZW50PWUsbz10aGlzLmtleUxvYWRlci5sb2FkKGUpLnRoZW4oKGZ1bmN0aW9uKGUpe2lmKCFuLmZyYWdDb250ZXh0Q2hhbmdlZChlLmZyYWcpKXJldHVybiBuLmhscy50cmlnZ2VyKEUuS0VZX0xPQURFRCxlKSxuLnN0YXRlPT09aWkmJihuLnN0YXRlPXJpKSxlfSkpLHRoaXMuaGxzLnRyaWdnZXIoRS5LRVlfTE9BRElORyx7ZnJhZzplfSksbnVsbD09PXRoaXMuZnJhZ0N1cnJlbnQmJihvPVByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiZnJhZyBsb2FkIGFib3J0ZWQsIGNvbnRleHQgY2hhbmdlZCBpbiBLRVlfTE9BRElORyIpKSkpLHI9TWF0aC5tYXgoZS5zdGFydCxyfHwwKSx0aGlzLmNvbmZpZy5sb3dMYXRlbmN5TW9kZSYmImluaXRTZWdtZW50IiE9PWUuc24pe3ZhciBsPXMucGFydExpc3Q7aWYobCYmaSl7cj5lLmVuZCYmcy5mcmFnbWVudEhpbnQmJihlPXMuZnJhZ21lbnRIaW50KTt2YXIgdT10aGlzLmdldE5leHRQYXJ0KGwsZSxyKTtpZih1Pi0xKXt2YXIgZCxoPWxbdV07cmV0dXJuIHRoaXMubG9nKCJMb2FkaW5nIHBhcnQgc246ICIrZS5zbisiIHA6ICIraC5pbmRleCsiIGNjOiAiK2UuY2MrIiBvZiBwbGF5bGlzdCBbIitzLnN0YXJ0U04rIi0iK3MuZW5kU04rIl0gcGFydHMgWzAtIit1KyItIisobC5sZW5ndGgtMSkrIl0gIisoIltzdHJlYW0tY29udHJvbGxlcl0iPT09dGhpcy5sb2dQcmVmaXg/ImxldmVsIjoidHJhY2siKSsiOiAiK2UubGV2ZWwrIiwgdGFyZ2V0OiAiK3BhcnNlRmxvYXQoci50b0ZpeGVkKDMpKSksdGhpcy5uZXh0TG9hZFBvc2l0aW9uPWguc3RhcnQraC5kdXJhdGlvbix0aGlzLnN0YXRlPWFpLGQ9bz9vLnRoZW4oKGZ1bmN0aW9uKHIpe3JldHVybiFyfHxuLmZyYWdDb250ZXh0Q2hhbmdlZChyLmZyYWcpP251bGw6bi5kb0ZyYWdQYXJ0c0xvYWQoZSxoLHQsaSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiBuLmhhbmRsZUZyYWdMb2FkRXJyb3IoZSl9KSk6dGhpcy5kb0ZyYWdQYXJ0c0xvYWQoZSxoLHQsaSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiBuLmhhbmRsZUZyYWdMb2FkRXJyb3IoZSl9KSksdGhpcy5obHMudHJpZ2dlcihFLkZSQUdfTE9BRElORyx7ZnJhZzplLHBhcnQ6aCx0YXJnZXRCdWZmZXJUaW1lOnJ9KSxudWxsPT09dGhpcy5mcmFnQ3VycmVudD9Qcm9taXNlLnJlamVjdChuZXcgRXJyb3IoImZyYWcgbG9hZCBhYm9ydGVkLCBjb250ZXh0IGNoYW5nZWQgaW4gRlJBR19MT0FESU5HIHBhcnRzIikpOmR9aWYoIWUudXJsfHx0aGlzLmxvYWRlZEVuZE9mUGFydHMobCxyKSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpfX10aGlzLmxvZygiTG9hZGluZyBmcmFnbWVudCAiK2Uuc24rIiBjYzogIitlLmNjKyIgIisocz8ib2YgWyIrcy5zdGFydFNOKyItIitzLmVuZFNOKyJdICI6IiIpKygiW3N0cmVhbS1jb250cm9sbGVyXSI9PT10aGlzLmxvZ1ByZWZpeD8ibGV2ZWwiOiJ0cmFjayIpKyI6ICIrZS5sZXZlbCsiLCB0YXJnZXQ6ICIrcGFyc2VGbG9hdChyLnRvRml4ZWQoMykpKSxtKGUuc24pJiYhdGhpcy5iaXRyYXRlVGVzdCYmKHRoaXMubmV4dExvYWRQb3NpdGlvbj1lLnN0YXJ0K2UuZHVyYXRpb24pLHRoaXMuc3RhdGU9YWk7dmFyIGYsYz10aGlzLmNvbmZpZy5wcm9ncmVzc2l2ZTtyZXR1cm4gZj1jJiZvP28udGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIXR8fG4uZnJhZ0NvbnRleHRDaGFuZ2VkKG51bGw9PXQ/dm9pZCAwOnQuZnJhZyk/bnVsbDpuLmZyYWdtZW50TG9hZGVyLmxvYWQoZSxpKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIG4uaGFuZGxlRnJhZ0xvYWRFcnJvcihlKX0pKTpQcm9taXNlLmFsbChbdGhpcy5mcmFnbWVudExvYWRlci5sb2FkKGUsYz9pOnZvaWQgMCksb10pLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF07cmV0dXJuIWMmJnQmJmkmJmkodCksdH0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIG4uaGFuZGxlRnJhZ0xvYWRFcnJvcihlKX0pKSx0aGlzLmhscy50cmlnZ2VyKEUuRlJBR19MT0FESU5HLHtmcmFnOmUsdGFyZ2V0QnVmZmVyVGltZTpyfSksbnVsbD09PXRoaXMuZnJhZ0N1cnJlbnQ/UHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJmcmFnIGxvYWQgYWJvcnRlZCwgY29udGV4dCBjaGFuZ2VkIGluIEZSQUdfTE9BRElORyIpKTpmfSxyLmRvRnJhZ1BhcnRzTG9hZD1mdW5jdGlvbihlLHQscixpKXt2YXIgYT10aGlzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixzKXt2YXIgbyxsPVtdLHU9bnVsbD09KG89ci5kZXRhaWxzKT92b2lkIDA6by5wYXJ0TGlzdDshZnVuY3Rpb24gdChvKXthLmZyYWdtZW50TG9hZGVyLmxvYWRQYXJ0KGUsbyxpKS50aGVuKChmdW5jdGlvbihpKXtsW28uaW5kZXhdPWk7dmFyIHM9aS5wYXJ0O2EuaGxzLnRyaWdnZXIoRS5GUkFHX0xPQURFRCxpKTt2YXIgZD1PdChyLGUuc24sby5pbmRleCsxKXx8TXQodSxlLnNuLG8uaW5kZXgrMSk7aWYoIWQpcmV0dXJuIG4oe2ZyYWc6ZSxwYXJ0OnMscGFydHNMb2FkZWQ6bH0pO3QoZCl9KSkuY2F0Y2gocyl9KHQpfSkpfSxyLmhhbmRsZUZyYWdMb2FkRXJyb3I9ZnVuY3Rpb24oZSl7aWYoImRhdGEiaW4gZSl7dmFyIHQ9ZS5kYXRhO2UuZGF0YSYmdC5kZXRhaWxzPT09Uy5JTlRFUk5BTF9BQk9SVEVEP3RoaXMuaGFuZGxlRnJhZ0xvYWRBYm9ydGVkKHQuZnJhZyx0LnBhcnQpOnRoaXMuaGxzLnRyaWdnZXIoRS5FUlJPUix0KX1lbHNlIHRoaXMuaGxzLnRyaWdnZXIoRS5FUlJPUix7dHlwZTpULk9USEVSX0VSUk9SLGRldGFpbHM6Uy5JTlRFUk5BTF9FWENFUFRJT04sZXJyOmUsZXJyb3I6ZSxmYXRhbDohMH0pO3JldHVybiBudWxsfSxyLl9oYW5kbGVUcmFuc211eGVyRmx1c2g9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRDdXJyZW50Q29udGV4dChlKTtpZih0JiZ0aGlzLnN0YXRlPT09c2kpe3ZhciByPXQuZnJhZyxpPXQucGFydCxhPXQubGV2ZWwsbj1zZWxmLnBlcmZvcm1hbmNlLm5vdygpO3Iuc3RhdHMucGFyc2luZy5lbmQ9bixpJiYoaS5zdGF0cy5wYXJzaW5nLmVuZD1uKSx0aGlzLnVwZGF0ZUxldmVsVGltaW5nKHIsaSxhLGUucGFydGlhbCl9ZWxzZSB0aGlzLmZyYWdDdXJyZW50fHx0aGlzLnN0YXRlPT09dGl8fHRoaXMuc3RhdGU9PT11aXx8KHRoaXMuc3RhdGU9cmkpfSxyLmdldEN1cnJlbnRDb250ZXh0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubGV2ZWxzLHI9dGhpcy5mcmFnQ3VycmVudCxpPWUubGV2ZWwsYT1lLnNuLG49ZS5wYXJ0O2lmKG51bGw9PXR8fCF0W2ldKXJldHVybiB0aGlzLndhcm4oIkxldmVscyBvYmplY3Qgd2FzIHVuc2V0IHdoaWxlIGJ1ZmZlcmluZyBmcmFnbWVudCAiK2ErIiBvZiBsZXZlbCAiK2krIi4gVGhlIGN1cnJlbnQgY2h1bmsgd2lsbCBub3QgYmUgYnVmZmVyZWQuIiksbnVsbDt2YXIgcz10W2ldLG89bj4tMT9PdChzLGEsbik6bnVsbCxsPW8/by5mcmFnbWVudDpmdW5jdGlvbihlLHQscil7aWYobnVsbD09ZXx8IWUuZGV0YWlscylyZXR1cm4gbnVsbDt2YXIgaT1lLmRldGFpbHMsYT1pLmZyYWdtZW50c1t0LWkuc3RhcnRTTl07cmV0dXJuIGF8fCgoYT1pLmZyYWdtZW50SGludCkmJmEuc249PT10P2E6dDxpLnN0YXJ0U04mJnImJnIuc249PT10P3I6bnVsbCl9KHMsYSxyKTtyZXR1cm4gbD8ociYmciE9PWwmJihsLnN0YXRzPXIuc3RhdHMpLHtmcmFnOmwscGFydDpvLGxldmVsOnN9KTpudWxsfSxyLmJ1ZmZlckZyYWdtZW50RGF0YT1mdW5jdGlvbihlLHQscixpLGEpe3ZhciBuO2lmKGUmJnRoaXMuc3RhdGU9PT1zaSl7dmFyIHM9ZS5kYXRhMSxvPWUuZGF0YTIsbD1zO2lmKHMmJm8mJihsPWJlKHMsbykpLG51bGwhPShuPWwpJiZuLmxlbmd0aCl7dmFyIHU9e3R5cGU6ZS50eXBlLGZyYWc6dCxwYXJ0OnIsY2h1bmtNZXRhOmkscGFyZW50OnQudHlwZSxkYXRhOmx9O2lmKHRoaXMuaGxzLnRyaWdnZXIoRS5CVUZGRVJfQVBQRU5ESU5HLHUpLGUuZHJvcHBlZCYmZS5pbmRlcGVuZGVudCYmIXIpe2lmKGEpcmV0dXJuO3RoaXMuZmx1c2hCdWZmZXJHYXAodCl9fX19LHIuZmx1c2hCdWZmZXJHYXA9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5tZWRpYTtpZih0KWlmKGxyLmlzQnVmZmVyZWQodCx0LmN1cnJlbnRUaW1lKSl7dmFyIHI9dC5jdXJyZW50VGltZSxpPWxyLmJ1ZmZlckluZm8odCxyLDApLGE9ZS5kdXJhdGlvbixuPU1hdGgubWluKDIqdGhpcy5jb25maWcubWF4RnJhZ0xvb2tVcFRvbGVyYW5jZSwuMjUqYSkscz1NYXRoLm1heChNYXRoLm1pbihlLnN0YXJ0LW4saS5lbmQtbikscituKTtlLnN0YXJ0LXM+biYmdGhpcy5mbHVzaE1haW5CdWZmZXIocyxlLnN0YXJ0KX1lbHNlIHRoaXMuZmx1c2hNYWluQnVmZmVyKDAsZS5zdGFydCl9LHIuZ2V0RndkQnVmZmVySW5mbz1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuZ2V0TG9hZFBvc2l0aW9uKCk7cmV0dXJuIG0ocik/dGhpcy5nZXRGd2RCdWZmZXJJbmZvQXRQb3MoZSxyLHQpOm51bGx9LHIuZ2V0RndkQnVmZmVySW5mb0F0UG9zPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzLmNvbmZpZy5tYXhCdWZmZXJIb2xlLGE9bHIuYnVmZmVySW5mbyhlLHQsaSk7aWYoMD09PWEubGVuJiZ2b2lkIDAhPT1hLm5leHRTdGFydCl7dmFyIG49dGhpcy5mcmFnbWVudFRyYWNrZXIuZ2V0QnVmZmVyZWRGcmFnKHQscik7aWYobiYmYS5uZXh0U3RhcnQ8bi5lbmQpcmV0dXJuIGxyLmJ1ZmZlckluZm8oZSx0LE1hdGgubWF4KGEubmV4dFN0YXJ0LGkpKX1yZXR1cm4gYX0sci5nZXRNYXhCdWZmZXJMZW5ndGg9ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzLmNvbmZpZztyZXR1cm4gdD1lP01hdGgubWF4KDgqci5tYXhCdWZmZXJTaXplL2Usci5tYXhCdWZmZXJMZW5ndGgpOnIubWF4QnVmZmVyTGVuZ3RoLE1hdGgubWluKHQsci5tYXhNYXhCdWZmZXJMZW5ndGgpfSxyLnJlZHVjZU1heEJ1ZmZlckxlbmd0aD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuY29uZmlnLGk9TWF0aC5tYXgoTWF0aC5taW4oZS10LHIubWF4QnVmZmVyTGVuZ3RoKSx0KSxhPU1hdGgubWF4KGUtMyp0LHIubWF4TWF4QnVmZmVyTGVuZ3RoLzIsaSk7cmV0dXJuIGE+PWkmJihyLm1heE1heEJ1ZmZlckxlbmd0aD1hLHRoaXMud2FybigiUmVkdWNlIG1heCBidWZmZXIgbGVuZ3RoIHRvICIrYSsicyIpLCEwKX0sci5nZXRBcHBlbmRlZEZyYWc9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmZyYWdtZW50VHJhY2tlci5nZXRBcHBlbmRlZEZyYWcoZSxudCk7cmV0dXJuIHImJiJmcmFnbWVudCJpbiByP3IuZnJhZ21lbnQ6cn0sci5nZXROZXh0RnJhZ21lbnQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10LmZyYWdtZW50cyxpPXIubGVuZ3RoO2lmKCFpKXJldHVybiBudWxsO3ZhciBhLG49dGhpcy5jb25maWcscz1yWzBdLnN0YXJ0O2lmKHQubGl2ZSl7dmFyIG89bi5pbml0aWFsTGl2ZU1hbmlmZXN0U2l6ZTtpZihpPG8pcmV0dXJuIHRoaXMud2FybigiTm90IGVub3VnaCBmcmFnbWVudHMgdG8gc3RhcnQgcGxheWJhY2sgKGhhdmU6ICIraSsiLCBuZWVkOiAiK28rIikiKSxudWxsOyghdC5QVFNLbm93biYmIXRoaXMuc3RhcnRGcmFnUmVxdWVzdGVkJiYtMT09PXRoaXMuc3RhcnRQb3NpdGlvbnx8ZTxzKSYmKGE9dGhpcy5nZXRJbml0aWFsTGl2ZUZyYWdtZW50KHQsciksdGhpcy5zdGFydFBvc2l0aW9uPXRoaXMubmV4dExvYWRQb3NpdGlvbj1hP3RoaXMuaGxzLmxpdmVTeW5jUG9zaXRpb258fGEuc3RhcnQ6ZSl9ZWxzZSBlPD1zJiYoYT1yWzBdKTtpZighYSl7dmFyIGw9bi5sb3dMYXRlbmN5TW9kZT90LnBhcnRFbmQ6dC5mcmFnbWVudEVuZDthPXRoaXMuZ2V0RnJhZ21lbnRBdFBvc2l0aW9uKGUsbCx0KX1yZXR1cm4gdGhpcy5tYXBUb0luaXRGcmFnV2hlblJlcXVpcmVkKGEpfSxyLmlzTG9vcExvYWRpbmc9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmZyYWdtZW50VHJhY2tlci5nZXRTdGF0ZShlKTtyZXR1cm4ocj09PUZyfHxyPT09UHImJiEhZS5nYXApJiZ0aGlzLm5leHRMb2FkUG9zaXRpb24+dH0sci5nZXROZXh0RnJhZ21lbnRMb29wTG9hZGluZz1mdW5jdGlvbihlLHQscixpLGEpe3ZhciBuPWUuZ2FwLHM9dGhpcy5nZXROZXh0RnJhZ21lbnQodGhpcy5uZXh0TG9hZFBvc2l0aW9uLHQpO2lmKG51bGw9PT1zKXJldHVybiBzO2lmKGU9cyxuJiZlJiYhZS5nYXAmJnIubmV4dFN0YXJ0KXt2YXIgbz10aGlzLmdldEZ3ZEJ1ZmZlckluZm9BdFBvcyh0aGlzLm1lZGlhQnVmZmVyP3RoaXMubWVkaWFCdWZmZXI6dGhpcy5tZWRpYSxyLm5leHRTdGFydCxpKTtpZihudWxsIT09byYmci5sZW4rby5sZW4+PWEpcmV0dXJuIHRoaXMubG9nKCdidWZmZXIgZnVsbCBhZnRlciBnYXBzIGluICInK2krJyIgcGxheWxpc3Qgc3RhcnRpbmcgYXQgc246ICcrZS5zbiksbnVsbH1yZXR1cm4gZX0sci5tYXBUb0luaXRGcmFnV2hlblJlcXVpcmVkPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lfHwhZS5pbml0U2VnbWVudHx8bnVsbCE9ZSYmZS5pbml0U2VnbWVudC5kYXRhfHx0aGlzLmJpdHJhdGVUZXN0P2U6ZS5pbml0U2VnbWVudH0sci5nZXROZXh0UGFydD1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBpPS0xLGE9ITEsbj0hMCxzPTAsbz1lLmxlbmd0aDtzPG87cysrKXt2YXIgbD1lW3NdO2lmKG49biYmIWwuaW5kZXBlbmRlbnQsaT4tMSYmcjxsLnN0YXJ0KWJyZWFrO3ZhciB1PWwubG9hZGVkO3U/aT0tMTooYXx8bC5pbmRlcGVuZGVudHx8bikmJmwuZnJhZ21lbnQ9PT10JiYoaT1zKSxhPXV9cmV0dXJuIGl9LHIubG9hZGVkRW5kT2ZQYXJ0cz1mdW5jdGlvbihlLHQpe3ZhciByPWVbZS5sZW5ndGgtMV07cmV0dXJuIHImJnQ+ci5zdGFydCYmci5sb2FkZWR9LHIuZ2V0SW5pdGlhbExpdmVGcmFnbWVudD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuZnJhZ1ByZXZpb3VzLGk9bnVsbDtpZihyKXtpZihlLmhhc1Byb2dyYW1EYXRlVGltZSYmKHRoaXMubG9nKCJMaXZlIHBsYXlsaXN0LCBzd2l0Y2hpbmcgcGxheWxpc3QsIGxvYWQgZnJhZyB3aXRoIHNhbWUgUERUOiAiK3IucHJvZ3JhbURhdGVUaW1lKSxpPWZ1bmN0aW9uKGUsdCxyKXtpZihudWxsPT09dHx8IUFycmF5LmlzQXJyYXkoZSl8fCFlLmxlbmd0aHx8IW0odCkpcmV0dXJuIG51bGw7aWYodDwoZVswXS5wcm9ncmFtRGF0ZVRpbWV8fDApKXJldHVybiBudWxsO2lmKHQ+PShlW2UubGVuZ3RoLTFdLmVuZFByb2dyYW1EYXRlVGltZXx8MCkpcmV0dXJuIG51bGw7cj1yfHwwO2Zvcih2YXIgaT0wO2k8ZS5sZW5ndGg7KytpKXt2YXIgYT1lW2ldO2lmKFl0KHQscixhKSlyZXR1cm4gYX1yZXR1cm4gbnVsbH0odCxyLmVuZFByb2dyYW1EYXRlVGltZSx0aGlzLmNvbmZpZy5tYXhGcmFnTG9va1VwVG9sZXJhbmNlKSksIWkpe3ZhciBhPXIuc24rMTtpZihhPj1lLnN0YXJ0U04mJmE8PWUuZW5kU04pe3ZhciBuPXRbYS1lLnN0YXJ0U05dO3IuY2M9PT1uLmNjJiYoaT1uLHRoaXMubG9nKCJMaXZlIHBsYXlsaXN0LCBzd2l0Y2hpbmcgcGxheWxpc3QsIGxvYWQgZnJhZyB3aXRoIG5leHQgU046ICIraS5zbikpfWl8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEt0KGUsKGZ1bmN0aW9uKGUpe3JldHVybiBlLmNjPHQ/MTplLmNjPnQ/LTE6MH0pKX0odCxyLmNjKSxpJiZ0aGlzLmxvZygiTGl2ZSBwbGF5bGlzdCwgc3dpdGNoaW5nIHBsYXlsaXN0LCBsb2FkIGZyYWcgd2l0aCBzYW1lIENDOiAiK2kuc24pKX19ZWxzZXt2YXIgcz10aGlzLmhscy5saXZlU3luY1Bvc2l0aW9uO251bGwhPT1zJiYoaT10aGlzLmdldEZyYWdtZW50QXRQb3NpdGlvbihzLHRoaXMuYml0cmF0ZVRlc3Q/ZS5mcmFnbWVudEVuZDplLmVkZ2UsZSkpfXJldHVybiBpfSxyLmdldEZyYWdtZW50QXRQb3NpdGlvbj1mdW5jdGlvbihlLHQscil7dmFyIGksYT10aGlzLmNvbmZpZyxuPXRoaXMuZnJhZ1ByZXZpb3VzLHM9ci5mcmFnbWVudHMsbz1yLmVuZFNOLGw9ci5mcmFnbWVudEhpbnQsdT1hLm1heEZyYWdMb29rVXBUb2xlcmFuY2UsZD1yLnBhcnRMaXN0LGg9ISEoYS5sb3dMYXRlbmN5TW9kZSYmbnVsbCE9ZCYmZC5sZW5ndGgmJmwpO2lmKGgmJmwmJiF0aGlzLmJpdHJhdGVUZXN0JiYocz1zLmNvbmNhdChsKSxvPWwuc24pLGk9ZTx0P1d0KG4scyxlLGU+dC11PzA6dSk6c1tzLmxlbmd0aC0xXSl7dmFyIGY9aS5zbi1yLnN0YXJ0U04sYz10aGlzLmZyYWdtZW50VHJhY2tlci5nZXRTdGF0ZShpKTtpZigoYz09PUZyfHxjPT09UHImJmkuZ2FwKSYmKG49aSksbiYmaS5zbj09PW4uc24mJighaHx8ZFswXS5mcmFnbWVudC5zbj5pLnNuKSYmbiYmaS5sZXZlbD09PW4ubGV2ZWwpe3ZhciB2PXNbZisxXTtpPWkuc248byYmdGhpcy5mcmFnbWVudFRyYWNrZXIuZ2V0U3RhdGUodikhPT1Gcj92Om51bGx9fXJldHVybiBpfSxyLnN5bmNocm9uaXplVG9MaXZlRWRnZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvbmZpZyxyPXRoaXMubWVkaWE7aWYocil7dmFyIGk9dGhpcy5obHMubGl2ZVN5bmNQb3NpdGlvbixhPXIuY3VycmVudFRpbWUsbj1lLmZyYWdtZW50c1swXS5zdGFydCxzPWUuZWRnZSxvPWE+PW4tdC5tYXhGcmFnTG9va1VwVG9sZXJhbmNlJiZhPD1zO2lmKG51bGwhPT1pJiZyLmR1cmF0aW9uPmkmJihhPGl8fCFvKSl7dmFyIGw9dm9pZCAwIT09dC5saXZlTWF4TGF0ZW5jeUR1cmF0aW9uP3QubGl2ZU1heExhdGVuY3lEdXJhdGlvbjp0LmxpdmVNYXhMYXRlbmN5RHVyYXRpb25Db3VudCplLnRhcmdldGR1cmF0aW9uOyghbyYmci5yZWFkeVN0YXRlPDR8fGE8cy1sKSYmKHRoaXMubG9hZGVkbWV0YWRhdGF8fCh0aGlzLm5leHRMb2FkUG9zaXRpb249aSksci5yZWFkeVN0YXRlJiYodGhpcy53YXJuKCJQbGF5YmFjazogIithLnRvRml4ZWQoMykrIiBpcyBsb2NhdGVkIHRvbyBmYXIgZnJvbSB0aGUgZW5kIG9mIGxpdmUgc2xpZGluZyBwbGF5bGlzdDogIitzKyIsIHJlc2V0IGN1cnJlbnRUaW1lIHRvIDogIitpLnRvRml4ZWQoMykpLHIuY3VycmVudFRpbWU9aSkpfX19LHIuYWxpZ25QbGF5bGlzdHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPWUuZnJhZ21lbnRzLmxlbmd0aDtpZighaSlyZXR1cm4gdGhpcy53YXJuKCJObyBmcmFnbWVudHMgaW4gbGl2ZSBwbGF5bGlzdCIpLDA7dmFyIGE9ZS5mcmFnbWVudHNbMF0uc3RhcnQsbj0hdCxzPWUuYWxpZ25lZFNsaWRpbmcmJm0oYSk7aWYobnx8IXMmJiFhKXt2YXIgbz10aGlzLmZyYWdQcmV2aW91cztYcihvLHIsZSk7dmFyIGw9ZS5mcmFnbWVudHNbMF0uc3RhcnQ7cmV0dXJuIHRoaXMubG9nKCJMaXZlIHBsYXlsaXN0IHNsaWRpbmc6ICIrbC50b0ZpeGVkKDIpKyIgc3RhcnQtc246ICIrKHQ/dC5zdGFydFNOOiJuYSIpKyItPiIrZS5zdGFydFNOKyIgcHJldi1zbjogIisobz9vLnNuOiJuYSIpKyIgZnJhZ21lbnRzOiAiK2kpLGx9cmV0dXJuIGF9LHIud2FpdEZvckNkblR1bmVJbj1mdW5jdGlvbihlKXtyZXR1cm4gZS5saXZlJiZlLmNhbkJsb2NrUmVsb2FkJiZlLnBhcnRUYXJnZXQmJmUudHVuZUluR29hbD5NYXRoLm1heChlLnBhcnRIb2xkQmFjaywzKmUucGFydFRhcmdldCl9LHIuc2V0U3RhcnRQb3NpdGlvbj1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuc3RhcnRQb3NpdGlvbjtpZihyPHQmJihyPS0xKSwtMT09PXJ8fC0xPT09dGhpcy5sYXN0Q3VycmVudFRpbWUpe3ZhciBpPW51bGwhPT10aGlzLnN0YXJ0VGltZU9mZnNldCxhPWk/dGhpcy5zdGFydFRpbWVPZmZzZXQ6ZS5zdGFydFRpbWVPZmZzZXQ7bnVsbCE9PWEmJm0oYSk/KHI9dCthLGE8MCYmKHIrPWUudG90YWxkdXJhdGlvbikscj1NYXRoLm1pbihNYXRoLm1heCh0LHIpLHQrZS50b3RhbGR1cmF0aW9uKSx0aGlzLmxvZygiU3RhcnQgdGltZSBvZmZzZXQgIithKyIgZm91bmQgaW4gIisoaT8ibXVsdGl2YXJpYW50IjoibWVkaWEiKSsiIHBsYXlsaXN0LCBhZGp1c3Qgc3RhcnRQb3NpdGlvbiB0byAiK3IpLHRoaXMuc3RhcnRQb3NpdGlvbj1yKTplLmxpdmU/cj10aGlzLmhscy5saXZlU3luY1Bvc2l0aW9ufHx0OnRoaXMuc3RhcnRQb3NpdGlvbj1yPTAsdGhpcy5sYXN0Q3VycmVudFRpbWU9cn10aGlzLm5leHRMb2FkUG9zaXRpb249cn0sci5nZXRMb2FkUG9zaXRpb249ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1lZGlhLHQ9MDtyZXR1cm4gdGhpcy5sb2FkZWRtZXRhZGF0YSYmZT90PWUuY3VycmVudFRpbWU6dGhpcy5uZXh0TG9hZFBvc2l0aW9uJiYodD10aGlzLm5leHRMb2FkUG9zaXRpb24pLHR9LHIuaGFuZGxlRnJhZ0xvYWRBYm9ydGVkPWZ1bmN0aW9uKGUsdCl7dGhpcy50cmFuc211eGVyJiYiaW5pdFNlZ21lbnQiIT09ZS5zbiYmZS5zdGF0cy5hYm9ydGVkJiYodGhpcy53YXJuKCJGcmFnbWVudCAiK2Uuc24rKHQ/IiBwYXJ0ICIrdC5pbmRleDoiIikrIiBvZiBsZXZlbCAiK2UubGV2ZWwrIiB3YXMgYWJvcnRlZCIpLHRoaXMucmVzZXRGcmFnbWVudExvYWRpbmcoZSkpfSxyLnJlc2V0RnJhZ21lbnRMb2FkaW5nPWZ1bmN0aW9uKGUpe3RoaXMuZnJhZ0N1cnJlbnQmJih0aGlzLmZyYWdDb250ZXh0Q2hhbmdlZChlKXx8dGhpcy5zdGF0ZT09PW5pKXx8KHRoaXMuc3RhdGU9cmkpfSxyLm9uRnJhZ21lbnRPcktleUxvYWRFcnJvcj1mdW5jdGlvbihlLHQpe2lmKHQuY2h1bmtNZXRhJiYhdC5mcmFnKXt2YXIgcj10aGlzLmdldEN1cnJlbnRDb250ZXh0KHQuY2h1bmtNZXRhKTtyJiYodC5mcmFnPXIuZnJhZyl9dmFyIGk9dC5mcmFnO2lmKGkmJmkudHlwZT09PWUmJnRoaXMubGV2ZWxzKWlmKHRoaXMuZnJhZ0NvbnRleHRDaGFuZ2VkKGkpKXt2YXIgYTt0aGlzLndhcm4oIkZyYWcgbG9hZCBlcnJvciBtdXN0IG1hdGNoIGN1cnJlbnQgZnJhZyB0byByZXRyeSAiK2kudXJsKyIgPiAiKyhudWxsPT0oYT10aGlzLmZyYWdDdXJyZW50KT92b2lkIDA6YS51cmwpKX1lbHNle3ZhciBuPXQuZGV0YWlscz09PVMuRlJBR19HQVA7biYmdGhpcy5mcmFnbWVudFRyYWNrZXIuZnJhZ0J1ZmZlcmVkKGksITApO3ZhciBzPXQuZXJyb3JBY3Rpb24sbz1zfHx7fSxsPW8uYWN0aW9uLHU9by5yZXRyeUNvdW50LGQ9dm9pZCAwPT09dT8wOnUsaD1vLnJldHJ5Q29uZmlnO2lmKHMmJmw9PT1RdCYmaCl7dGhpcy5yZXNldFN0YXJ0V2hlbk5vdExvYWRlZCh0aGlzLmxldmVsTGFzdExvYWRlZCk7dmFyIGY9R3QoaCxkKTt0aGlzLndhcm4oIkZyYWdtZW50ICIraS5zbisiIG9mICIrZSsiICIraS5sZXZlbCsiIGVycm9yZWQgd2l0aCAiK3QuZGV0YWlscysiLCByZXRyeWluZyBsb2FkaW5nICIrKGQrMSkrIi8iK2gubWF4TnVtUmV0cnkrIiBpbiAiK2YrIm1zIikscy5yZXNvbHZlZD0hMCx0aGlzLnJldHJ5RGF0ZT1zZWxmLnBlcmZvcm1hbmNlLm5vdygpK2YsdGhpcy5zdGF0ZT1uaX1lbHNlIGlmKGgmJnMpe2lmKHRoaXMucmVzZXRGcmFnbWVudEVycm9ycyhlKSwhKGQ8aC5tYXhOdW1SZXRyeSkpcmV0dXJuIHZvaWQgRC53YXJuKHQuZGV0YWlscysiIHJlYWNoZWQgb3IgZXhjZWVkZWQgbWF4IHJldHJ5ICgiK2QrIikiKTtufHxsPT09WHR8fChzLnJlc29sdmVkPSEwKX1lbHNlKG51bGw9PXM/dm9pZCAwOnMuYWN0aW9uKT09PXp0P3RoaXMuc3RhdGU9ZGk6dGhpcy5zdGF0ZT11aTt0aGlzLnRpY2tJbW1lZGlhdGUoKX19LHIucmVkdWNlTGVuZ3RoQW5kRmx1c2hCdWZmZXI9ZnVuY3Rpb24oZSl7aWYodGhpcy5zdGF0ZT09PXNpfHx0aGlzLnN0YXRlPT09b2kpe3ZhciB0PWUuZnJhZyxyPWUucGFyZW50LGk9dGhpcy5nZXRGd2RCdWZmZXJJbmZvKHRoaXMubWVkaWFCdWZmZXIsciksYT1pJiZpLmxlbj4uNTthJiZ0aGlzLnJlZHVjZU1heEJ1ZmZlckxlbmd0aChpLmxlbiwobnVsbD09dD92b2lkIDA6dC5kdXJhdGlvbil8fDEwKTt2YXIgbj0hYTtyZXR1cm4gbiYmdGhpcy53YXJuKCJCdWZmZXIgZnVsbCBlcnJvciB3aGlsZSBtZWRpYS5jdXJyZW50VGltZSBpcyBub3QgYnVmZmVyZWQsIGZsdXNoICIrcisiIGJ1ZmZlciIpLHQmJih0aGlzLmZyYWdtZW50VHJhY2tlci5yZW1vdmVGcmFnbWVudCh0KSx0aGlzLm5leHRMb2FkUG9zaXRpb249dC5zdGFydCksdGhpcy5yZXNldExvYWRpbmdTdGF0ZSgpLG59cmV0dXJuITF9LHIucmVzZXRGcmFnbWVudEVycm9ycz1mdW5jdGlvbihlKXtlPT09c3QmJih0aGlzLmZyYWdDdXJyZW50PW51bGwpLHRoaXMubG9hZGVkbWV0YWRhdGF8fCh0aGlzLnN0YXJ0RnJhZ1JlcXVlc3RlZD0hMSksdGhpcy5zdGF0ZSE9PXRpJiYodGhpcy5zdGF0ZT1yaSl9LHIuYWZ0ZXJCdWZmZXJGbHVzaGVkPWZ1bmN0aW9uKGUsdCxyKXtpZihlKXt2YXIgaT1sci5nZXRCdWZmZXJlZChlKTt0aGlzLmZyYWdtZW50VHJhY2tlci5kZXRlY3RFdmljdGVkRnJhZ21lbnRzKHQsaSxyKSx0aGlzLnN0YXRlPT09bGkmJnRoaXMucmVzZXRMb2FkaW5nU3RhdGUoKX19LHIucmVzZXRMb2FkaW5nU3RhdGU9ZnVuY3Rpb24oKXt0aGlzLmxvZygiUmVzZXQgbG9hZGluZyBzdGF0ZSIpLHRoaXMuZnJhZ0N1cnJlbnQ9bnVsbCx0aGlzLmZyYWdQcmV2aW91cz1udWxsLHRoaXMuc3RhdGU9cml9LHIucmVzZXRTdGFydFdoZW5Ob3RMb2FkZWQ9ZnVuY3Rpb24oZSl7aWYoIXRoaXMubG9hZGVkbWV0YWRhdGEpe3RoaXMuc3RhcnRGcmFnUmVxdWVzdGVkPSExO3ZhciB0PWU/ZS5kZXRhaWxzOm51bGw7bnVsbCE9dCYmdC5saXZlPyh0aGlzLnN0YXJ0UG9zaXRpb249LTEsdGhpcy5zZXRTdGFydFBvc2l0aW9uKHQsMCksdGhpcy5yZXNldExvYWRpbmdTdGF0ZSgpKTp0aGlzLm5leHRMb2FkUG9zaXRpb249dGhpcy5zdGFydFBvc2l0aW9ufX0sci5yZXNldFdoZW5NaXNzaW5nQ29udGV4dD1mdW5jdGlvbihlKXt0aGlzLndhcm4oIlRoZSBsb2FkaW5nIGNvbnRleHQgY2hhbmdlZCB3aGlsZSBidWZmZXJpbmcgZnJhZ21lbnQgIitlLnNuKyIgb2YgbGV2ZWwgIitlLmxldmVsKyIuIFRoaXMgY2h1bmsgd2lsbCBub3QgYmUgYnVmZmVyZWQuIiksdGhpcy5yZW1vdmVVbmJ1ZmZlcmVkRnJhZ3MoKSx0aGlzLnJlc2V0U3RhcnRXaGVuTm90TG9hZGVkKHRoaXMubGV2ZWxMYXN0TG9hZGVkKSx0aGlzLnJlc2V0TG9hZGluZ1N0YXRlKCl9LHIucmVtb3ZlVW5idWZmZXJlZEZyYWdzPWZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihlPTApLHRoaXMuZnJhZ21lbnRUcmFja2VyLnJlbW92ZUZyYWdtZW50c0luUmFuZ2UoZSwxLzAsdGhpcy5wbGF5bGlzdFR5cGUsITEsITApfSxyLnVwZGF0ZUxldmVsVGltaW5nPWZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBhLG49dGhpcyxzPXIuZGV0YWlscztpZihzKXtpZighT2JqZWN0LmtleXMoZS5lbGVtZW50YXJ5U3RyZWFtcykucmVkdWNlKChmdW5jdGlvbih0LGEpe3ZhciBvPWUuZWxlbWVudGFyeVN0cmVhbXNbYV07aWYobyl7dmFyIGw9by5lbmRQVFMtby5zdGFydFBUUztpZihsPD0wKXJldHVybiBuLndhcm4oIkNvdWxkIG5vdCBwYXJzZSBmcmFnbWVudCAiK2Uuc24rIiAiK2ErIiBkdXJhdGlvbiByZWxpYWJseSAoIitsKyIpIiksdHx8ITE7dmFyIHU9aT8wOkl0KHMsZSxvLnN0YXJ0UFRTLG8uZW5kUFRTLG8uc3RhcnREVFMsby5lbmREVFMpO3JldHVybiBuLmhscy50cmlnZ2VyKEUuTEVWRUxfUFRTX1VQREFURUQse2RldGFpbHM6cyxsZXZlbDpyLGRyaWZ0OnUsdHlwZTphLGZyYWc6ZSxzdGFydDpvLnN0YXJ0UFRTLGVuZDpvLmVuZFBUU30pLCEwfXJldHVybiB0fSksITEpJiZudWxsPT09KG51bGw9PShhPXRoaXMudHJhbnNtdXhlcik/dm9pZCAwOmEuZXJyb3IpKXt2YXIgbz1uZXcgRXJyb3IoIkZvdW5kIG5vIG1lZGlhIGluIGZyYWdtZW50ICIrZS5zbisiIG9mIGxldmVsICIrZS5sZXZlbCsiIHJlc2V0dGluZyB0cmFuc211eGVyIHRvIGZhbGxiYWNrIHRvIHBsYXlsaXN0IHRpbWluZyIpO2lmKDA9PT1yLmZyYWdtZW50RXJyb3ImJihyLmZyYWdtZW50RXJyb3IrKyxlLmdhcD0hMCx0aGlzLmZyYWdtZW50VHJhY2tlci5yZW1vdmVGcmFnbWVudChlKSx0aGlzLmZyYWdtZW50VHJhY2tlci5mcmFnQnVmZmVyZWQoZSwhMCkpLHRoaXMud2FybihvLm1lc3NhZ2UpLHRoaXMuaGxzLnRyaWdnZXIoRS5FUlJPUix7dHlwZTpULk1FRElBX0VSUk9SLGRldGFpbHM6Uy5GUkFHX1BBUlNJTkdfRVJST1IsZmF0YWw6ITEsZXJyb3I6byxmcmFnOmUscmVhc29uOiJGb3VuZCBubyBtZWRpYSBpbiBtc24gIitlLnNuKycgb2YgbGV2ZWwgIicrci51cmwrJyInfSksIXRoaXMuaGxzKXJldHVybjt0aGlzLnJlc2V0VHJhbnNtdXhlcigpfXRoaXMuc3RhdGU9b2ksdGhpcy5obHMudHJpZ2dlcihFLkZSQUdfUEFSU0VELHtmcmFnOmUscGFydDp0fSl9ZWxzZSB0aGlzLndhcm4oImxldmVsLmRldGFpbHMgdW5kZWZpbmVkIil9LHIucmVzZXRUcmFuc211eGVyPWZ1bmN0aW9uKCl7dGhpcy50cmFuc211eGVyJiYodGhpcy50cmFuc211eGVyLmRlc3Ryb3koKSx0aGlzLnRyYW5zbXV4ZXI9bnVsbCl9LHIucmVjb3ZlcldvcmtlckVycm9yPWZ1bmN0aW9uKGUpeyJkZW11eGVyV29ya2VyIj09PWUuZXZlbnQmJih0aGlzLmZyYWdtZW50VHJhY2tlci5yZW1vdmVBbGxGcmFnbWVudHMoKSx0aGlzLnJlc2V0VHJhbnNtdXhlcigpLHRoaXMucmVzZXRTdGFydFdoZW5Ob3RMb2FkZWQodGhpcy5sZXZlbExhc3RMb2FkZWQpLHRoaXMucmVzZXRMb2FkaW5nU3RhdGUoKSl9LHModCxbe2tleToic3RhdGUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZX0sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3N0YXRlO3QhPT1lJiYodGhpcy5fc3RhdGU9ZSx0aGlzLmxvZyh0KyItPiIrZSkpfX1dKSx0fShXcik7ZnVuY3Rpb24gZmkoKXtyZXR1cm4gc2VsZi5Tb3VyY2VCdWZmZXJ8fHNlbGYuV2ViS2l0U291cmNlQnVmZmVyfWZ1bmN0aW9uIGNpKCl7aWYoIUNlKCkpcmV0dXJuITE7dmFyIGU9ZmkoKTtyZXR1cm4hZXx8ZS5wcm90b3R5cGUmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLnByb3RvdHlwZS5hcHBlbmRCdWZmZXImJiJmdW5jdGlvbiI9PXR5cGVvZiBlLnByb3RvdHlwZS5yZW1vdmV9ZnVuY3Rpb24gdmkoZSx0KXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9IiIpLHZvaWQgMD09PXQmJih0PTllNCkse3R5cGU6ZSxpZDotMSxwaWQ6LTEsaW5wdXRUaW1lU2NhbGU6dCxzZXF1ZW5jZU51bWJlcjotMSxzYW1wbGVzOltdLGRyb3BwZWQ6MH19dmFyIGdpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2F1ZGlvVHJhY2s9dm9pZCAwLHRoaXMuX2lkM1RyYWNrPXZvaWQgMCx0aGlzLmZyYW1lSW5kZXg9MCx0aGlzLmNhY2hlZERhdGE9bnVsbCx0aGlzLmJhc2VQVFM9bnVsbCx0aGlzLmluaXRQVFM9bnVsbCx0aGlzLmxhc3RQVFM9bnVsbH12YXIgdD1lLnByb3RvdHlwZTtyZXR1cm4gdC5yZXNldEluaXRTZWdtZW50PWZ1bmN0aW9uKGUsdCxyLGkpe3RoaXMuX2lkM1RyYWNrPXt0eXBlOiJpZDMiLGlkOjMscGlkOi0xLGlucHV0VGltZVNjYWxlOjllNCxzZXF1ZW5jZU51bWJlcjowLHNhbXBsZXM6W10sZHJvcHBlZDowfX0sdC5yZXNldFRpbWVTdGFtcD1mdW5jdGlvbihlKXt0aGlzLmluaXRQVFM9ZSx0aGlzLnJlc2V0Q29udGlndWl0eSgpfSx0LnJlc2V0Q29udGlndWl0eT1mdW5jdGlvbigpe3RoaXMuYmFzZVBUUz1udWxsLHRoaXMubGFzdFBUUz1udWxsLHRoaXMuZnJhbWVJbmRleD0wfSx0LmNhblBhcnNlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuITF9LHQuYXBwZW5kRnJhbWU9ZnVuY3Rpb24oZSx0LHIpe30sdC5kZW11eD1mdW5jdGlvbihlLHQpe3RoaXMuY2FjaGVkRGF0YSYmKGU9YmUodGhpcy5jYWNoZWREYXRhLGUpLHRoaXMuY2FjaGVkRGF0YT1udWxsKTt2YXIgcixpPVkoZSwwKSxhPWk/aS5sZW5ndGg6MCxuPXRoaXMuX2F1ZGlvVHJhY2sscz10aGlzLl9pZDNUcmFjayxvPWk/WChpKTp2b2lkIDAsbD1lLmxlbmd0aDtmb3IoKG51bGw9PT10aGlzLmJhc2VQVFN8fDA9PT10aGlzLmZyYW1lSW5kZXgmJm0obykpJiYodGhpcy5iYXNlUFRTPW1pKG8sdCx0aGlzLmluaXRQVFMpLHRoaXMubGFzdFBUUz10aGlzLmJhc2VQVFMpLG51bGw9PT10aGlzLmxhc3RQVFMmJih0aGlzLmxhc3RQVFM9dGhpcy5iYXNlUFRTKSxpJiZpLmxlbmd0aD4wJiZzLnNhbXBsZXMucHVzaCh7cHRzOnRoaXMubGFzdFBUUyxkdHM6dGhpcy5sYXN0UFRTLGRhdGE6aSx0eXBlOmN0LGR1cmF0aW9uOk51bWJlci5QT1NJVElWRV9JTkZJTklUWX0pO2E8bDspe2lmKHRoaXMuY2FuUGFyc2UoZSxhKSl7dmFyIHU9dGhpcy5hcHBlbmRGcmFtZShuLGUsYSk7dT8odGhpcy5mcmFtZUluZGV4KyssdGhpcy5sYXN0UFRTPXUuc2FtcGxlLnB0cyxyPWErPXUubGVuZ3RoKTphPWx9ZWxzZSB6KGUsYSk/KGk9WShlLGEpLHMuc2FtcGxlcy5wdXNoKHtwdHM6dGhpcy5sYXN0UFRTLGR0czp0aGlzLmxhc3RQVFMsZGF0YTppLHR5cGU6Y3QsZHVyYXRpb246TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSkscj1hKz1pLmxlbmd0aCk6YSsrO2lmKGE9PT1sJiZyIT09bCl7dmFyIGQ9VihlLHIpO3RoaXMuY2FjaGVkRGF0YT90aGlzLmNhY2hlZERhdGE9YmUodGhpcy5jYWNoZWREYXRhLGQpOnRoaXMuY2FjaGVkRGF0YT1kfX1yZXR1cm57YXVkaW9UcmFjazpuLHZpZGVvVHJhY2s6dmkoKSxpZDNUcmFjazpzLHRleHRUcmFjazp2aSgpfX0sdC5kZW11eFNhbXBsZUFlcz1mdW5jdGlvbihlLHQscil7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiWyIrdGhpcysiXSBUaGlzIGRlbXV4ZXIgZG9lcyBub3Qgc3VwcG9ydCBTYW1wbGUtQUVTIGRlY3J5cHRpb24iKSl9LHQuZmx1c2g9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jYWNoZWREYXRhO3JldHVybiB0JiYodGhpcy5jYWNoZWREYXRhPW51bGwsdGhpcy5kZW11eCh0LDApKSx7YXVkaW9UcmFjazp0aGlzLl9hdWRpb1RyYWNrLHZpZGVvVHJhY2s6dmkoKSxpZDNUcmFjazp0aGlzLl9pZDNUcmFjayx0ZXh0VHJhY2s6dmkoKX19LHQuZGVzdHJveT1mdW5jdGlvbigpe30sZX0oKSxtaT1mdW5jdGlvbihlLHQscil7cmV0dXJuIG0oZSk/OTAqZTo5ZTQqdCsocj85ZTQqci5iYXNlVGltZS9yLnRpbWVzY2FsZTowKX07ZnVuY3Rpb24gcGkoZSx0KXtyZXR1cm4gMjU1PT09ZVt0XSYmMjQwPT0oMjQ2JmVbdCsxXSl9ZnVuY3Rpb24geWkoZSx0KXtyZXR1cm4gMSZlW3QrMV0/Nzo5fWZ1bmN0aW9uIEVpKGUsdCl7cmV0dXJuKDMmZVt0KzNdKTw8MTF8ZVt0KzRdPDwzfCgyMjQmZVt0KzVdKT4+PjV9ZnVuY3Rpb24gVGkoZSx0KXtyZXR1cm4gdCsxPGUubGVuZ3RoJiZwaShlLHQpfWZ1bmN0aW9uIFNpKGUsdCl7aWYoVGkoZSx0KSl7dmFyIHI9eWkoZSx0KTtpZih0K3I+PWUubGVuZ3RoKXJldHVybiExO3ZhciBpPUVpKGUsdCk7aWYoaTw9cilyZXR1cm4hMTt2YXIgYT10K2k7cmV0dXJuIGE9PT1lLmxlbmd0aHx8VGkoZSxhKX1yZXR1cm4hMX1mdW5jdGlvbiBMaShlLHQscixpLGEpe2lmKCFlLnNhbXBsZXJhdGUpe3ZhciBuPWZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBhLG4scyxvLGw9bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLHU9aSxkPVs5NmUzLDg4MjAwLDY0ZTMsNDhlMyw0NDEwMCwzMmUzLDI0ZTMsMjIwNTAsMTZlMywxMmUzLDExMDI1LDhlMyw3MzUwXTthPTErKCgxOTImdFtyKzJdKT4+PjYpO3ZhciBoPSg2MCZ0W3IrMl0pPj4+MjtpZighKGg+ZC5sZW5ndGgtMSkpcmV0dXJuIHM9KDEmdFtyKzJdKTw8MixzfD0oMTkyJnRbciszXSk+Pj42LEQubG9nKCJtYW5pZmVzdCBjb2RlYzoiK2krIiwgQURUUyB0eXBlOiIrYSsiLCBzYW1wbGluZ0luZGV4OiIraCksL2ZpcmVmb3gvaS50ZXN0KGwpP2g+PTY/KGE9NSxvPW5ldyBBcnJheSg0KSxuPWgtMyk6KGE9MixvPW5ldyBBcnJheSgyKSxuPWgpOi0xIT09bC5pbmRleE9mKCJhbmRyb2lkIik/KGE9MixvPW5ldyBBcnJheSgyKSxuPWgpOihhPTUsbz1uZXcgQXJyYXkoNCksaSYmKC0xIT09aS5pbmRleE9mKCJtcDRhLjQwLjI5Iil8fC0xIT09aS5pbmRleE9mKCJtcDRhLjQwLjUiKSl8fCFpJiZoPj02P249aC0zOigoaSYmLTEhPT1pLmluZGV4T2YoIm1wNGEuNDAuMiIpJiYoaD49NiYmMT09PXN8fC92aXZhbGRpL2kudGVzdChsKSl8fCFpJiYxPT09cykmJihhPTIsbz1uZXcgQXJyYXkoMikpLG49aCkpLG9bMF09YTw8MyxvWzBdfD0oMTQmaCk+PjEsb1sxXXw9KDEmaCk8PDcsb1sxXXw9czw8Myw1PT09YSYmKG9bMV18PSgxNCZuKT4+MSxvWzJdPSgxJm4pPDw3LG9bMl18PTgsb1szXT0wKSx7Y29uZmlnOm8sc2FtcGxlcmF0ZTpkW2hdLGNoYW5uZWxDb3VudDpzLGNvZGVjOiJtcDRhLjQwLiIrYSxtYW5pZmVzdENvZGVjOnV9O3ZhciBmPW5ldyBFcnJvcigiaW52YWxpZCBBRFRTIHNhbXBsaW5nIGluZGV4OiIraCk7ZS5lbWl0KEUuRVJST1IsRS5FUlJPUix7dHlwZTpULk1FRElBX0VSUk9SLGRldGFpbHM6Uy5GUkFHX1BBUlNJTkdfRVJST1IsZmF0YWw6ITAsZXJyb3I6ZixyZWFzb246Zi5tZXNzYWdlfSl9KHQscixpLGEpO2lmKCFuKXJldHVybjtlLmNvbmZpZz1uLmNvbmZpZyxlLnNhbXBsZXJhdGU9bi5zYW1wbGVyYXRlLGUuY2hhbm5lbENvdW50PW4uY2hhbm5lbENvdW50LGUuY29kZWM9bi5jb2RlYyxlLm1hbmlmZXN0Q29kZWM9bi5tYW5pZmVzdENvZGVjLEQubG9nKCJwYXJzZWQgY29kZWM6IitlLmNvZGVjKyIsIHJhdGU6IituLnNhbXBsZXJhdGUrIiwgY2hhbm5lbHM6IituLmNoYW5uZWxDb3VudCl9fWZ1bmN0aW9uIFJpKGUpe3JldHVybiA5MjE2ZTQvZX1mdW5jdGlvbiBBaShlLHQscixpLGEpe3ZhciBuLHM9aSthKlJpKGUuc2FtcGxlcmF0ZSksbz1mdW5jdGlvbihlLHQpe3ZhciByPXlpKGUsdCk7aWYodCtyPD1lLmxlbmd0aCl7dmFyIGk9RWkoZSx0KS1yO2lmKGk+MClyZXR1cm57aGVhZGVyTGVuZ3RoOnIsZnJhbWVMZW5ndGg6aX19fSh0LHIpO2lmKG8pe3ZhciBsPW8uZnJhbWVMZW5ndGgsdT1vLmhlYWRlckxlbmd0aCxkPXUrbCxoPU1hdGgubWF4KDAscitkLXQubGVuZ3RoKTtoPyhuPW5ldyBVaW50OEFycmF5KGQtdSkpLnNldCh0LnN1YmFycmF5KHIrdSx0Lmxlbmd0aCksMCk6bj10LnN1YmFycmF5KHIrdSxyK2QpO3ZhciBmPXt1bml0Om4scHRzOnN9O3JldHVybiBofHxlLnNhbXBsZXMucHVzaChmKSx7c2FtcGxlOmYsbGVuZ3RoOmQsbWlzc2luZzpofX12YXIgYz10Lmxlbmd0aC1yO3JldHVybihuPW5ldyBVaW50OEFycmF5KGMpKS5zZXQodC5zdWJhcnJheShyLHQubGVuZ3RoKSwwKSx7c2FtcGxlOnt1bml0Om4scHRzOnN9LGxlbmd0aDpjLG1pc3Npbmc6LTF9fXZhciBiaT1udWxsLGtpPVszMiw2NCw5NiwxMjgsMTYwLDE5MiwyMjQsMjU2LDI4OCwzMjAsMzUyLDM4NCw0MTYsNDQ4LDMyLDQ4LDU2LDY0LDgwLDk2LDExMiwxMjgsMTYwLDE5MiwyMjQsMjU2LDMyMCwzODQsMzIsNDAsNDgsNTYsNjQsODAsOTYsMTEyLDEyOCwxNjAsMTkyLDIyNCwyNTYsMzIwLDMyLDQ4LDU2LDY0LDgwLDk2LDExMiwxMjgsMTQ0LDE2MCwxNzYsMTkyLDIyNCwyNTYsOCwxNiwyNCwzMiw0MCw0OCw1Niw2NCw4MCw5NiwxMTIsMTI4LDE0NCwxNjBdLERpPVs0NDEwMCw0OGUzLDMyZTMsMjIwNTAsMjRlMywxNmUzLDExMDI1LDEyZTMsOGUzXSxfaT1bWzAsNzIsMTQ0LDEyXSxbMCwwLDAsMF0sWzAsNzIsMTQ0LDEyXSxbMCwxNDQsMTQ0LDEyXV0seGk9WzAsMSwxLDRdO2Z1bmN0aW9uIHdpKGUsdCxyLGksYSl7aWYoIShyKzI0PnQubGVuZ3RoKSl7dmFyIG49Q2kodCxyKTtpZihuJiZyK24uZnJhbWVMZW5ndGg8PXQubGVuZ3RoKXt2YXIgcz1pK2EqKDllNCpuLnNhbXBsZXNQZXJGcmFtZS9uLnNhbXBsZVJhdGUpLG89e3VuaXQ6dC5zdWJhcnJheShyLHIrbi5mcmFtZUxlbmd0aCkscHRzOnMsZHRzOnN9O3JldHVybiBlLmNvbmZpZz1bXSxlLmNoYW5uZWxDb3VudD1uLmNoYW5uZWxDb3VudCxlLnNhbXBsZXJhdGU9bi5zYW1wbGVSYXRlLGUuc2FtcGxlcy5wdXNoKG8pLHtzYW1wbGU6byxsZW5ndGg6bi5mcmFtZUxlbmd0aCxtaXNzaW5nOjB9fX19ZnVuY3Rpb24gQ2koZSx0KXt2YXIgcj1lW3QrMV0+PjMmMyxpPWVbdCsxXT4+MSYzLGE9ZVt0KzJdPj40JjE1LG49ZVt0KzJdPj4yJjM7aWYoMSE9PXImJjAhPT1hJiYxNSE9PWEmJjMhPT1uKXt2YXIgcz1lW3QrMl0+PjEmMSxvPWVbdCszXT4+NixsPTFlMypraVsxNCooMz09PXI/My1pOjM9PT1pPzM6NCkrYS0xXSx1PURpWzMqKDM9PT1yPzA6Mj09PXI/MToyKStuXSxkPTM9PT1vPzE6MixoPV9pW3JdW2ldLGY9eGlbaV0sYz04KmgqZix2PU1hdGguZmxvb3IoaCpsL3UrcykqZjtpZihudWxsPT09Ymkpe3ZhciBnPShuYXZpZ2F0b3IudXNlckFnZW50fHwiIikubWF0Y2goL0Nocm9tZVwvKFxkKykvaSk7Ymk9Zz9wYXJzZUludChnWzFdKTowfXJldHVybiEhYmkmJmJpPD04NyYmMj09PWkmJmw+PTIyNGUzJiYwPT09byYmKGVbdCszXT0xMjh8ZVt0KzNdKSx7c2FtcGxlUmF0ZTp1LGNoYW5uZWxDb3VudDpkLGZyYW1lTGVuZ3RoOnYsc2FtcGxlc1BlckZyYW1lOmN9fX1mdW5jdGlvbiBJaShlLHQpe3JldHVybiAyNTU9PT1lW3RdJiYyMjQ9PSgyMjQmZVt0KzFdKSYmMCE9KDYmZVt0KzFdKX1mdW5jdGlvbiBQaShlLHQpe3JldHVybiB0KzE8ZS5sZW5ndGgmJklpKGUsdCl9ZnVuY3Rpb24gRmkoZSx0KXtpZih0KzE8ZS5sZW5ndGgmJklpKGUsdCkpe3ZhciByPUNpKGUsdCksaT00O251bGwhPXImJnIuZnJhbWVMZW5ndGgmJihpPXIuZnJhbWVMZW5ndGgpO3ZhciBhPXQraTtyZXR1cm4gYT09PWUubGVuZ3RofHxQaShlLGEpfXJldHVybiExfXZhciBPaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7dmFyIGk7cmV0dXJuKGk9ZS5jYWxsKHRoaXMpfHx0aGlzKS5vYnNlcnZlcj12b2lkIDAsaS5jb25maWc9dm9pZCAwLGkub2JzZXJ2ZXI9dCxpLmNvbmZpZz1yLGl9bCh0LGUpO3ZhciByPXQucHJvdG90eXBlO3JldHVybiByLnJlc2V0SW5pdFNlZ21lbnQ9ZnVuY3Rpb24odCxyLGksYSl7ZS5wcm90b3R5cGUucmVzZXRJbml0U2VnbWVudC5jYWxsKHRoaXMsdCxyLGksYSksdGhpcy5fYXVkaW9UcmFjaz17Y29udGFpbmVyOiJhdWRpby9hZHRzIix0eXBlOiJhdWRpbyIsaWQ6MixwaWQ6LTEsc2VxdWVuY2VOdW1iZXI6MCxzZWdtZW50Q29kZWM6ImFhYyIsc2FtcGxlczpbXSxtYW5pZmVzdENvZGVjOnIsZHVyYXRpb246YSxpbnB1dFRpbWVTY2FsZTo5ZTQsZHJvcHBlZDowfX0sdC5wcm9iZT1mdW5jdGlvbihlKXtpZighZSlyZXR1cm4hMTt2YXIgdD1ZKGUsMCkscj0obnVsbD09dD92b2lkIDA6dC5sZW5ndGgpfHwwO2lmKEZpKGUscikpcmV0dXJuITE7Zm9yKHZhciBpPWUubGVuZ3RoO3I8aTtyKyspaWYoU2koZSxyKSlyZXR1cm4gRC5sb2coIkFEVFMgc3luYyB3b3JkIGZvdW5kICEiKSwhMDtyZXR1cm4hMX0sci5jYW5QYXJzZT1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiB0KzU8ZS5sZW5ndGh9KGUsdCkmJnBpKGUsdCkmJkVpKGUsdCk8PWUubGVuZ3RoLXR9KGUsdCl9LHIuYXBwZW5kRnJhbWU9ZnVuY3Rpb24oZSx0LHIpe0xpKGUsdGhpcy5vYnNlcnZlcix0LHIsZS5tYW5pZmVzdENvZGVjKTt2YXIgaT1BaShlLHQscix0aGlzLmJhc2VQVFMsdGhpcy5mcmFtZUluZGV4KTtpZihpJiYwPT09aS5taXNzaW5nKXJldHVybiBpfSx0fShnaSksTWk9L1wvZW1zZ1stL11JRDMvaSxOaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLnJlbWFpbmRlckRhdGE9bnVsbCx0aGlzLnRpbWVPZmZzZXQ9MCx0aGlzLmNvbmZpZz12b2lkIDAsdGhpcy52aWRlb1RyYWNrPXZvaWQgMCx0aGlzLmF1ZGlvVHJhY2s9dm9pZCAwLHRoaXMuaWQzVHJhY2s9dm9pZCAwLHRoaXMudHh0VHJhY2s9dm9pZCAwLHRoaXMuY29uZmlnPXR9dmFyIHQ9ZS5wcm90b3R5cGU7cmV0dXJuIHQucmVzZXRUaW1lU3RhbXA9ZnVuY3Rpb24oKXt9LHQucmVzZXRJbml0U2VnbWVudD1mdW5jdGlvbihlLHQscixpKXt2YXIgYT10aGlzLnZpZGVvVHJhY2s9dmkoInZpZGVvIiwxKSxuPXRoaXMuYXVkaW9UcmFjaz12aSgiYXVkaW8iLDEpLHM9dGhpcy50eHRUcmFjaz12aSgidGV4dCIsMSk7aWYodGhpcy5pZDNUcmFjaz12aSgiaWQzIiwxKSx0aGlzLnRpbWVPZmZzZXQ9MCxudWxsIT1lJiZlLmJ5dGVMZW5ndGgpe3ZhciBvPXllKGUpO2lmKG8udmlkZW8pe3ZhciBsPW8udmlkZW8sdT1sLmlkLGQ9bC50aW1lc2NhbGUsaD1sLmNvZGVjO2EuaWQ9dSxhLnRpbWVzY2FsZT1zLnRpbWVzY2FsZT1kLGEuY29kZWM9aH1pZihvLmF1ZGlvKXt2YXIgZj1vLmF1ZGlvLGM9Zi5pZCx2PWYudGltZXNjYWxlLGc9Zi5jb2RlYztuLmlkPWMsbi50aW1lc2NhbGU9dixuLmNvZGVjPWd9cy5pZD11ZS50ZXh0LGEuc2FtcGxlRHVyYXRpb249MCxhLmR1cmF0aW9uPW4uZHVyYXRpb249aX19LHQucmVzZXRDb250aWd1aXR5PWZ1bmN0aW9uKCl7dGhpcy5yZW1haW5kZXJEYXRhPW51bGx9LGUucHJvYmU9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmJ5dGVMZW5ndGgscj0wO3I8dDspe3ZhciBpPWZlKGUscik7aWYoaT44JiYxMDk9PT1lW3IrNF0mJjExMT09PWVbcis1XSYmMTExPT09ZVtyKzZdJiYxMDI9PT1lW3IrN10pcmV0dXJuITA7cj1pPjE/citpOnR9cmV0dXJuITF9KGUpfSx0LmRlbXV4PWZ1bmN0aW9uKGUsdCl7dGhpcy50aW1lT2Zmc2V0PXQ7dmFyIHI9ZSxpPXRoaXMudmlkZW9UcmFjayxhPXRoaXMudHh0VHJhY2s7aWYodGhpcy5jb25maWcucHJvZ3Jlc3NpdmUpe3RoaXMucmVtYWluZGVyRGF0YSYmKHI9YmUodGhpcy5yZW1haW5kZXJEYXRhLGUpKTt2YXIgbj1mdW5jdGlvbihlKXt2YXIgdD17dmFsaWQ6bnVsbCxyZW1haW5kZXI6bnVsbH0scj1tZShlLFsibW9vZiJdKTtpZihyLmxlbmd0aDwyKXJldHVybiB0LnJlbWFpbmRlcj1lLHQ7dmFyIGk9cltyLmxlbmd0aC0xXTtyZXR1cm4gdC52YWxpZD1WKGUsMCxpLmJ5dGVPZmZzZXQtOCksdC5yZW1haW5kZXI9VihlLGkuYnl0ZU9mZnNldC04KSx0fShyKTt0aGlzLnJlbWFpbmRlckRhdGE9bi5yZW1haW5kZXIsaS5zYW1wbGVzPW4udmFsaWR8fG5ldyBVaW50OEFycmF5fWVsc2UgaS5zYW1wbGVzPXI7dmFyIHM9dGhpcy5leHRyYWN0SUQzVHJhY2soaSx0KTtyZXR1cm4gYS5zYW1wbGVzPWtlKHQsaSkse3ZpZGVvVHJhY2s6aSxhdWRpb1RyYWNrOnRoaXMuYXVkaW9UcmFjayxpZDNUcmFjazpzLHRleHRUcmFjazp0aGlzLnR4dFRyYWNrfX0sdC5mbHVzaD1mdW5jdGlvbigpe3ZhciBlPXRoaXMudGltZU9mZnNldCx0PXRoaXMudmlkZW9UcmFjayxyPXRoaXMudHh0VHJhY2s7dC5zYW1wbGVzPXRoaXMucmVtYWluZGVyRGF0YXx8bmV3IFVpbnQ4QXJyYXksdGhpcy5yZW1haW5kZXJEYXRhPW51bGw7dmFyIGk9dGhpcy5leHRyYWN0SUQzVHJhY2sodCx0aGlzLnRpbWVPZmZzZXQpO3JldHVybiByLnNhbXBsZXM9a2UoZSx0KSx7dmlkZW9UcmFjazp0LGF1ZGlvVHJhY2s6dmkoKSxpZDNUcmFjazppLHRleHRUcmFjazp2aSgpfX0sdC5leHRyYWN0SUQzVHJhY2s9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmlkM1RyYWNrO2lmKGUuc2FtcGxlcy5sZW5ndGgpe3ZhciBpPW1lKGUuc2FtcGxlcyxbImVtc2ciXSk7aSYmaS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgaT1mdW5jdGlvbihlKXt2YXIgdD1lWzBdLHI9IiIsaT0iIixhPTAsbj0wLHM9MCxvPTAsbD0wLHU9MDtpZigwPT09dCl7Zm9yKDsiXDAiIT09ZGUoZS5zdWJhcnJheSh1LHUrMSkpOylyKz1kZShlLnN1YmFycmF5KHUsdSsxKSksdSs9MTtmb3Iocis9ZGUoZS5zdWJhcnJheSh1LHUrMSkpLHUrPTE7IlwwIiE9PWRlKGUuc3ViYXJyYXkodSx1KzEpKTspaSs9ZGUoZS5zdWJhcnJheSh1LHUrMSkpLHUrPTE7aSs9ZGUoZS5zdWJhcnJheSh1LHUrMSkpLHUrPTEsYT1mZShlLDEyKSxuPWZlKGUsMTYpLG89ZmUoZSwyMCksbD1mZShlLDI0KSx1PTI4fWVsc2UgaWYoMT09PXQpe2E9ZmUoZSx1Kz00KTt2YXIgZD1mZShlLHUrPTQpLGg9ZmUoZSx1Kz00KTtmb3IodSs9NCxzPU1hdGgucG93KDIsMzIpKmQraCxwKHMpfHwocz1OdW1iZXIuTUFYX1NBRkVfSU5URUdFUixELndhcm4oIlByZXNlbnRhdGlvbiB0aW1lIGV4Y2VlZHMgc2FmZSBpbnRlZ2VyIGxpbWl0IGFuZCB3cmFwcGVkIHRvIG1heCBzYWZlIGludGVnZXIgaW4gcGFyc2luZyBlbXNnIGJveCIpKSxvPWZlKGUsdSksbD1mZShlLHUrPTQpLHUrPTQ7IlwwIiE9PWRlKGUuc3ViYXJyYXkodSx1KzEpKTspcis9ZGUoZS5zdWJhcnJheSh1LHUrMSkpLHUrPTE7Zm9yKHIrPWRlKGUuc3ViYXJyYXkodSx1KzEpKSx1Kz0xOyJcMCIhPT1kZShlLnN1YmFycmF5KHUsdSsxKSk7KWkrPWRlKGUuc3ViYXJyYXkodSx1KzEpKSx1Kz0xO2krPWRlKGUuc3ViYXJyYXkodSx1KzEpKSx1Kz0xfXJldHVybntzY2hlbWVJZFVyaTpyLHZhbHVlOmksdGltZVNjYWxlOmEscHJlc2VudGF0aW9uVGltZTpzLHByZXNlbnRhdGlvblRpbWVEZWx0YTpuLGV2ZW50RHVyYXRpb246byxpZDpsLHBheWxvYWQ6ZS5zdWJhcnJheSh1LGUuYnl0ZUxlbmd0aCl9fShlKTtpZihNaS50ZXN0KGkuc2NoZW1lSWRVcmkpKXt2YXIgYT1tKGkucHJlc2VudGF0aW9uVGltZSk/aS5wcmVzZW50YXRpb25UaW1lL2kudGltZVNjYWxlOnQraS5wcmVzZW50YXRpb25UaW1lRGVsdGEvaS50aW1lU2NhbGUsbj00Mjk0OTY3Mjk1PT09aS5ldmVudER1cmF0aW9uP051bWJlci5QT1NJVElWRV9JTkZJTklUWTppLmV2ZW50RHVyYXRpb24vaS50aW1lU2NhbGU7bjw9LjAwMSYmKG49TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTt2YXIgcz1pLnBheWxvYWQ7ci5zYW1wbGVzLnB1c2goe2RhdGE6cyxsZW46cy5ieXRlTGVuZ3RoLGR0czphLHB0czphLHR5cGU6Z3QsZHVyYXRpb246bn0pfX0pKX1yZXR1cm4gcn0sdC5kZW11eFNhbXBsZUFlcz1mdW5jdGlvbihlLHQscil7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiVGhlIE1QNCBkZW11eGVyIGRvZXMgbm90IHN1cHBvcnQgU0FNUExFLUFFUyBkZWNyeXB0aW9uIikpfSx0LmRlc3Ryb3k9ZnVuY3Rpb24oKXt9LGV9KCksQmk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5WaWRlb1NhbXBsZT1udWxsfXZhciB0PWUucHJvdG90eXBlO3JldHVybiB0LmNyZWF0ZVZpZGVvU2FtcGxlPWZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybntrZXk6ZSxmcmFtZTohMSxwdHM6dCxkdHM6cix1bml0czpbXSxkZWJ1ZzppLGxlbmd0aDowfX0sdC5nZXRMYXN0TmFsVW5pdD1mdW5jdGlvbihlKXt2YXIgdCxyLGk9dGhpcy5WaWRlb1NhbXBsZTtpZihpJiYwIT09aS51bml0cy5sZW5ndGh8fChpPWVbZS5sZW5ndGgtMV0pLG51bGwhPSh0PWkpJiZ0LnVuaXRzKXt2YXIgYT1pLnVuaXRzO3I9YVthLmxlbmd0aC0xXX1yZXR1cm4gcn0sdC5wdXNoQWNjZXNzVW5pdD1mdW5jdGlvbihlLHQpe2lmKGUudW5pdHMubGVuZ3RoJiZlLmZyYW1lKXtpZih2b2lkIDA9PT1lLnB0cyl7dmFyIHI9dC5zYW1wbGVzLGk9ci5sZW5ndGg7aWYoIWkpcmV0dXJuIHZvaWQgdC5kcm9wcGVkKys7dmFyIGE9cltpLTFdO2UucHRzPWEucHRzLGUuZHRzPWEuZHRzfXQuc2FtcGxlcy5wdXNoKGUpfWUuZGVidWcubGVuZ3RoJiZELmxvZyhlLnB0cysiLyIrZS5kdHMrIjoiK2UuZGVidWcpfSxlfSgpLFVpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmRhdGE9dm9pZCAwLHRoaXMuYnl0ZXNBdmFpbGFibGU9dm9pZCAwLHRoaXMud29yZD12b2lkIDAsdGhpcy5iaXRzQXZhaWxhYmxlPXZvaWQgMCx0aGlzLmRhdGE9ZSx0aGlzLmJ5dGVzQXZhaWxhYmxlPWUuYnl0ZUxlbmd0aCx0aGlzLndvcmQ9MCx0aGlzLmJpdHNBdmFpbGFibGU9MH12YXIgdD1lLnByb3RvdHlwZTtyZXR1cm4gdC5sb2FkV29yZD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZGF0YSx0PXRoaXMuYnl0ZXNBdmFpbGFibGUscj1lLmJ5dGVMZW5ndGgtdCxpPW5ldyBVaW50OEFycmF5KDQpLGE9TWF0aC5taW4oNCx0KTtpZigwPT09YSl0aHJvdyBuZXcgRXJyb3IoIm5vIGJ5dGVzIGF2YWlsYWJsZSIpO2kuc2V0KGUuc3ViYXJyYXkocixyK2EpKSx0aGlzLndvcmQ9bmV3IERhdGFWaWV3KGkuYnVmZmVyKS5nZXRVaW50MzIoMCksdGhpcy5iaXRzQXZhaWxhYmxlPTgqYSx0aGlzLmJ5dGVzQXZhaWxhYmxlLT1hfSx0LnNraXBCaXRzPWZ1bmN0aW9uKGUpe3ZhciB0O2U9TWF0aC5taW4oZSw4KnRoaXMuYnl0ZXNBdmFpbGFibGUrdGhpcy5iaXRzQXZhaWxhYmxlKSx0aGlzLmJpdHNBdmFpbGFibGU+ZT8odGhpcy53b3JkPDw9ZSx0aGlzLmJpdHNBdmFpbGFibGUtPWUpOihlLT10aGlzLmJpdHNBdmFpbGFibGUsZS09KHQ9ZT4+Myk8PDMsdGhpcy5ieXRlc0F2YWlsYWJsZS09dCx0aGlzLmxvYWRXb3JkKCksdGhpcy53b3JkPDw9ZSx0aGlzLmJpdHNBdmFpbGFibGUtPWUpfSx0LnJlYWRCaXRzPWZ1bmN0aW9uKGUpe3ZhciB0PU1hdGgubWluKHRoaXMuYml0c0F2YWlsYWJsZSxlKSxyPXRoaXMud29yZD4+PjMyLXQ7aWYoZT4zMiYmRC5lcnJvcigiQ2Fubm90IHJlYWQgbW9yZSB0aGFuIDMyIGJpdHMgYXQgYSB0aW1lIiksdGhpcy5iaXRzQXZhaWxhYmxlLT10LHRoaXMuYml0c0F2YWlsYWJsZT4wKXRoaXMud29yZDw8PXQ7ZWxzZXtpZighKHRoaXMuYnl0ZXNBdmFpbGFibGU+MCkpdGhyb3cgbmV3IEVycm9yKCJubyBiaXRzIGF2YWlsYWJsZSIpO3RoaXMubG9hZFdvcmQoKX1yZXR1cm4odD1lLXQpPjAmJnRoaXMuYml0c0F2YWlsYWJsZT9yPDx0fHRoaXMucmVhZEJpdHModCk6cn0sdC5za2lwTFo9ZnVuY3Rpb24oKXt2YXIgZTtmb3IoZT0wO2U8dGhpcy5iaXRzQXZhaWxhYmxlOysrZSlpZigwIT0odGhpcy53b3JkJjIxNDc0ODM2NDg+Pj5lKSlyZXR1cm4gdGhpcy53b3JkPDw9ZSx0aGlzLmJpdHNBdmFpbGFibGUtPWUsZTtyZXR1cm4gdGhpcy5sb2FkV29yZCgpLGUrdGhpcy5za2lwTFooKX0sdC5za2lwVUVHPWZ1bmN0aW9uKCl7dGhpcy5za2lwQml0cygxK3RoaXMuc2tpcExaKCkpfSx0LnNraXBFRz1mdW5jdGlvbigpe3RoaXMuc2tpcEJpdHMoMSt0aGlzLnNraXBMWigpKX0sdC5yZWFkVUVHPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5za2lwTFooKTtyZXR1cm4gdGhpcy5yZWFkQml0cyhlKzEpLTF9LHQucmVhZEVHPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yZWFkVUVHKCk7cmV0dXJuIDEmZT8xK2U+Pj4xOi0xKihlPj4+MSl9LHQucmVhZEJvb2xlYW49ZnVuY3Rpb24oKXtyZXR1cm4gMT09PXRoaXMucmVhZEJpdHMoMSl9LHQucmVhZFVCeXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVhZEJpdHMoOCl9LHQucmVhZFVTaG9ydD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWRCaXRzKDE2KX0sdC5yZWFkVUludD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWRCaXRzKDMyKX0sdC5za2lwU2NhbGluZ0xpc3Q9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTgscj04LGk9MDtpPGU7aSsrKTAhPT1yJiYocj0odCt0aGlzLnJlYWRFRygpKzI1NiklMjU2KSx0PTA9PT1yP3Q6cn0sdC5yZWFkU1BTPWZ1bmN0aW9uKCl7dmFyIGUsdCxyLGk9MCxhPTAsbj0wLHM9MCxvPXRoaXMucmVhZFVCeXRlLmJpbmQodGhpcyksbD10aGlzLnJlYWRCaXRzLmJpbmQodGhpcyksdT10aGlzLnJlYWRVRUcuYmluZCh0aGlzKSxkPXRoaXMucmVhZEJvb2xlYW4uYmluZCh0aGlzKSxoPXRoaXMuc2tpcEJpdHMuYmluZCh0aGlzKSxmPXRoaXMuc2tpcEVHLmJpbmQodGhpcyksYz10aGlzLnNraXBVRUcuYmluZCh0aGlzKSx2PXRoaXMuc2tpcFNjYWxpbmdMaXN0LmJpbmQodGhpcyk7bygpO3ZhciBnPW8oKTtpZihsKDUpLGgoMyksbygpLGMoKSwxMDA9PT1nfHwxMTA9PT1nfHwxMjI9PT1nfHwyNDQ9PT1nfHw0ND09PWd8fDgzPT09Z3x8ODY9PT1nfHwxMTg9PT1nfHwxMjg9PT1nKXt2YXIgbT11KCk7aWYoMz09PW0mJmgoMSksYygpLGMoKSxoKDEpLGQoKSlmb3IodD0zIT09bT84OjEyLHI9MDtyPHQ7cisrKWQoKSYmdihyPDY/MTY6NjQpfWMoKTt2YXIgcD11KCk7aWYoMD09PXApdSgpO2Vsc2UgaWYoMT09PXApZm9yKGgoMSksZigpLGYoKSxlPXUoKSxyPTA7cjxlO3IrKylmKCk7YygpLGgoMSk7dmFyIHk9dSgpLEU9dSgpLFQ9bCgxKTswPT09VCYmaCgxKSxoKDEpLGQoKSYmKGk9dSgpLGE9dSgpLG49dSgpLHM9dSgpKTt2YXIgUz1bMSwxXTtpZihkKCkmJmQoKSlzd2l0Y2gobygpKXtjYXNlIDE6Uz1bMSwxXTticmVhaztjYXNlIDI6Uz1bMTIsMTFdO2JyZWFrO2Nhc2UgMzpTPVsxMCwxMV07YnJlYWs7Y2FzZSA0OlM9WzE2LDExXTticmVhaztjYXNlIDU6Uz1bNDAsMzNdO2JyZWFrO2Nhc2UgNjpTPVsyNCwxMV07YnJlYWs7Y2FzZSA3OlM9WzIwLDExXTticmVhaztjYXNlIDg6Uz1bMzIsMTFdO2JyZWFrO2Nhc2UgOTpTPVs4MCwzM107YnJlYWs7Y2FzZSAxMDpTPVsxOCwxMV07YnJlYWs7Y2FzZSAxMTpTPVsxNSwxMV07YnJlYWs7Y2FzZSAxMjpTPVs2NCwzM107YnJlYWs7Y2FzZSAxMzpTPVsxNjAsOTldO2JyZWFrO2Nhc2UgMTQ6Uz1bNCwzXTticmVhaztjYXNlIDE1OlM9WzMsMl07YnJlYWs7Y2FzZSAxNjpTPVsyLDFdO2JyZWFrO2Nhc2UgMjU1OlM9W28oKTw8OHxvKCksbygpPDw4fG8oKV19cmV0dXJue3dpZHRoOk1hdGguY2VpbCgxNiooeSsxKS0yKmktMiphKSxoZWlnaHQ6KDItVCkqKEUrMSkqMTYtKFQ/Mjo0KSoobitzKSxwaXhlbFJhdGlvOlN9fSx0LnJlYWRTbGljZVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWFkVUJ5dGUoKSx0aGlzLnJlYWRVRUcoKSx0aGlzLnJlYWRVRUcoKX0sZX0oKSxHaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfWwodCxlKTt2YXIgcj10LnByb3RvdHlwZTtyZXR1cm4gci5wYXJzZUFWQ1BFUz1mdW5jdGlvbihlLHQscixpLGEpe3ZhciBuLHM9dGhpcyxvPXRoaXMucGFyc2VBVkNOQUx1KGUsci5kYXRhKSxsPXRoaXMuVmlkZW9TYW1wbGUsdT0hMTtyLmRhdGE9bnVsbCxsJiZvLmxlbmd0aCYmIWUuYXVkRm91bmQmJih0aGlzLnB1c2hBY2Nlc3NVbml0KGwsZSksbD10aGlzLlZpZGVvU2FtcGxlPXRoaXMuY3JlYXRlVmlkZW9TYW1wbGUoITEsci5wdHMsci5kdHMsIiIpKSxvLmZvckVhY2goKGZ1bmN0aW9uKGkpe3ZhciBvO3N3aXRjaChpLnR5cGUpe2Nhc2UgMTp2YXIgZD0hMTtuPSEwO3ZhciBoLGY9aS5kYXRhO2lmKHUmJmYubGVuZ3RoPjQpe3ZhciBjPW5ldyBVaShmKS5yZWFkU2xpY2VUeXBlKCk7MiE9PWMmJjQhPT1jJiY3IT09YyYmOSE9PWN8fChkPSEwKX1kJiZudWxsIT0oaD1sKSYmaC5mcmFtZSYmIWwua2V5JiYocy5wdXNoQWNjZXNzVW5pdChsLGUpLGw9cy5WaWRlb1NhbXBsZT1udWxsKSxsfHwobD1zLlZpZGVvU2FtcGxlPXMuY3JlYXRlVmlkZW9TYW1wbGUoITAsci5wdHMsci5kdHMsIiIpKSxsLmZyYW1lPSEwLGwua2V5PWQ7YnJlYWs7Y2FzZSA1Om49ITAsbnVsbCE9KG89bCkmJm8uZnJhbWUmJiFsLmtleSYmKHMucHVzaEFjY2Vzc1VuaXQobCxlKSxsPXMuVmlkZW9TYW1wbGU9bnVsbCksbHx8KGw9cy5WaWRlb1NhbXBsZT1zLmNyZWF0ZVZpZGVvU2FtcGxlKCEwLHIucHRzLHIuZHRzLCIiKSksbC5rZXk9ITAsbC5mcmFtZT0hMDticmVhaztjYXNlIDY6bj0hMCxfZShpLmRhdGEsMSxyLnB0cyx0LnNhbXBsZXMpO2JyZWFrO2Nhc2UgNzp2YXIgdixnO249ITAsdT0hMDt2YXIgbT1pLmRhdGEscD1uZXcgVWkobSkucmVhZFNQUygpO2lmKCFlLnNwc3x8ZS53aWR0aCE9PXAud2lkdGh8fGUuaGVpZ2h0IT09cC5oZWlnaHR8fChudWxsPT0odj1lLnBpeGVsUmF0aW8pP3ZvaWQgMDp2WzBdKSE9PXAucGl4ZWxSYXRpb1swXXx8KG51bGw9PShnPWUucGl4ZWxSYXRpbyk/dm9pZCAwOmdbMV0pIT09cC5waXhlbFJhdGlvWzFdKXtlLndpZHRoPXAud2lkdGgsZS5oZWlnaHQ9cC5oZWlnaHQsZS5waXhlbFJhdGlvPXAucGl4ZWxSYXRpbyxlLnNwcz1bbV0sZS5kdXJhdGlvbj1hO2Zvcih2YXIgeT1tLnN1YmFycmF5KDEsNCksRT0iYXZjMS4iLFQ9MDtUPDM7VCsrKXt2YXIgUz15W1RdLnRvU3RyaW5nKDE2KTtTLmxlbmd0aDwyJiYoUz0iMCIrUyksRSs9U31lLmNvZGVjPUV9YnJlYWs7Y2FzZSA4Om49ITAsZS5wcHM9W2kuZGF0YV07YnJlYWs7Y2FzZSA5Om49ITAsZS5hdWRGb3VuZD0hMCxsJiZzLnB1c2hBY2Nlc3NVbml0KGwsZSksbD1zLlZpZGVvU2FtcGxlPXMuY3JlYXRlVmlkZW9TYW1wbGUoITEsci5wdHMsci5kdHMsIiIpO2JyZWFrO2Nhc2UgMTI6bj0hMDticmVhaztkZWZhdWx0Om49ITEsbCYmKGwuZGVidWcrPSJ1bmtub3duIE5BTCAiK2kudHlwZSsiICIpfWwmJm4mJmwudW5pdHMucHVzaChpKX0pKSxpJiZsJiYodGhpcy5wdXNoQWNjZXNzVW5pdChsLGUpLHRoaXMuVmlkZW9TYW1wbGU9bnVsbCl9LHIucGFyc2VBVkNOQUx1PWZ1bmN0aW9uKGUsdCl7dmFyIHIsaSxhPXQuYnl0ZUxlbmd0aCxuPWUubmFsdVN0YXRlfHwwLHM9bixvPVtdLGw9MCx1PS0xLGQ9MDtmb3IoLTE9PT1uJiYodT0wLGQ9MzEmdFswXSxuPTAsbD0xKTtsPGE7KWlmKHI9dFtsKytdLG4paWYoMSE9PW4paWYocilpZigxPT09cil7aWYoaT1sLW4tMSx1Pj0wKXt2YXIgaD17ZGF0YTp0LnN1YmFycmF5KHUsaSksdHlwZTpkfTtvLnB1c2goaCl9ZWxzZXt2YXIgZj10aGlzLmdldExhc3ROYWxVbml0KGUuc2FtcGxlcyk7ZiYmKHMmJmw8PTQtcyYmZi5zdGF0ZSYmKGYuZGF0YT1mLmRhdGEuc3ViYXJyYXkoMCxmLmRhdGEuYnl0ZUxlbmd0aC1zKSksaT4wJiYoZi5kYXRhPWJlKGYuZGF0YSx0LnN1YmFycmF5KDAsaSkpLGYuc3RhdGU9MCkpfWw8YT8odT1sLGQ9MzEmdFtsXSxuPTApOm49LTF9ZWxzZSBuPTA7ZWxzZSBuPTM7ZWxzZSBuPXI/MDoyO2Vsc2Ugbj1yPzA6MTtpZih1Pj0wJiZuPj0wKXt2YXIgYz17ZGF0YTp0LnN1YmFycmF5KHUsYSksdHlwZTpkLHN0YXRlOm59O28ucHVzaChjKX1pZigwPT09by5sZW5ndGgpe3ZhciB2PXRoaXMuZ2V0TGFzdE5hbFVuaXQoZS5zYW1wbGVzKTt2JiYodi5kYXRhPWJlKHYuZGF0YSx0KSl9cmV0dXJuIGUubmFsdVN0YXRlPW4sb30sdH0oQmkpLEhpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5rZXlEYXRhPXZvaWQgMCx0aGlzLmRlY3J5cHRlcj12b2lkIDAsdGhpcy5rZXlEYXRhPXIsdGhpcy5kZWNyeXB0ZXI9bmV3IFpyKHQse3JlbW92ZVBLQ1M3UGFkZGluZzohMX0pfXZhciB0PWUucHJvdG90eXBlO3JldHVybiB0LmRlY3J5cHRCdWZmZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZGVjcnlwdGVyLmRlY3J5cHQoZSx0aGlzLmtleURhdGEua2V5LmJ1ZmZlcix0aGlzLmtleURhdGEuaXYuYnVmZmVyKX0sdC5kZWNyeXB0QWFjU2FtcGxlPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzLGE9ZVt0XS51bml0O2lmKCEoYS5sZW5ndGg8PTE2KSl7dmFyIG49YS5zdWJhcnJheSgxNixhLmxlbmd0aC1hLmxlbmd0aCUxNikscz1uLmJ1ZmZlci5zbGljZShuLmJ5dGVPZmZzZXQsbi5ieXRlT2Zmc2V0K24ubGVuZ3RoKTt0aGlzLmRlY3J5cHRCdWZmZXIocykudGhlbigoZnVuY3Rpb24obil7dmFyIHM9bmV3IFVpbnQ4QXJyYXkobik7YS5zZXQocywxNiksaS5kZWNyeXB0ZXIuaXNTeW5jKCl8fGkuZGVjcnlwdEFhY1NhbXBsZXMoZSx0KzEscil9KSl9fSx0LmRlY3J5cHRBYWNTYW1wbGVzPWZ1bmN0aW9uKGUsdCxyKXtmb3IoOzt0Kyspe2lmKHQ+PWUubGVuZ3RoKXJldHVybiB2b2lkIHIoKTtpZighKGVbdF0udW5pdC5sZW5ndGg8MzJ8fCh0aGlzLmRlY3J5cHRBYWNTYW1wbGUoZSx0LHIpLHRoaXMuZGVjcnlwdGVyLmlzU3luYygpKSkpcmV0dXJufX0sdC5nZXRBdmNFbmNyeXB0ZWREYXRhPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0xNipNYXRoLmZsb29yKChlLmxlbmd0aC00OCkvMTYwKSsxNixyPW5ldyBJbnQ4QXJyYXkodCksaT0wLGE9MzI7YTxlLmxlbmd0aC0xNjthKz0xNjAsaSs9MTYpci5zZXQoZS5zdWJhcnJheShhLGErMTYpLGkpO3JldHVybiByfSx0LmdldEF2Y0RlY3J5cHRlZFVuaXQ9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9bmV3IFVpbnQ4QXJyYXkodCksaT0wLGE9MzI7YTxlLmxlbmd0aC0xNjthKz0xNjAsaSs9MTYpZS5zZXQoci5zdWJhcnJheShpLGkrMTYpLGEpO3JldHVybiBlfSx0LmRlY3J5cHRBdmNTYW1wbGU9ZnVuY3Rpb24oZSx0LHIsaSxhKXt2YXIgbj10aGlzLHM9eGUoYS5kYXRhKSxvPXRoaXMuZ2V0QXZjRW5jcnlwdGVkRGF0YShzKTt0aGlzLmRlY3J5cHRCdWZmZXIoby5idWZmZXIpLnRoZW4oKGZ1bmN0aW9uKG8pe2EuZGF0YT1uLmdldEF2Y0RlY3J5cHRlZFVuaXQocyxvKSxuLmRlY3J5cHRlci5pc1N5bmMoKXx8bi5kZWNyeXB0QXZjU2FtcGxlcyhlLHQscisxLGkpfSkpfSx0LmRlY3J5cHRBdmNTYW1wbGVzPWZ1bmN0aW9uKGUsdCxyLGkpe2lmKGUgaW5zdGFuY2VvZiBVaW50OEFycmF5KXRocm93IG5ldyBFcnJvcigiQ2Fubm90IGRlY3J5cHQgc2FtcGxlcyBvZiB0eXBlIFVpbnQ4QXJyYXkiKTtmb3IoOzt0Kysscj0wKXtpZih0Pj1lLmxlbmd0aClyZXR1cm4gdm9pZCBpKCk7Zm9yKHZhciBhPWVbdF0udW5pdHM7IShyPj1hLmxlbmd0aCk7cisrKXt2YXIgbj1hW3JdO2lmKCEobi5kYXRhLmxlbmd0aDw9NDh8fDEhPT1uLnR5cGUmJjUhPT1uLnR5cGV8fCh0aGlzLmRlY3J5cHRBdmNTYW1wbGUoZSx0LHIsaSxuKSx0aGlzLmRlY3J5cHRlci5pc1N5bmMoKSkpKXJldHVybn19fSxlfSgpLFZpPTE4OCxLaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3RoaXMub2JzZXJ2ZXI9dm9pZCAwLHRoaXMuY29uZmlnPXZvaWQgMCx0aGlzLnR5cGVTdXBwb3J0ZWQ9dm9pZCAwLHRoaXMuc2FtcGxlQWVzPW51bGwsdGhpcy5wbXRQYXJzZWQ9ITEsdGhpcy5hdWRpb0NvZGVjPXZvaWQgMCx0aGlzLnZpZGVvQ29kZWM9dm9pZCAwLHRoaXMuX2R1cmF0aW9uPTAsdGhpcy5fcG10SWQ9LTEsdGhpcy5fdmlkZW9UcmFjaz12b2lkIDAsdGhpcy5fYXVkaW9UcmFjaz12b2lkIDAsdGhpcy5faWQzVHJhY2s9dm9pZCAwLHRoaXMuX3R4dFRyYWNrPXZvaWQgMCx0aGlzLmFhY092ZXJGbG93PW51bGwsdGhpcy5yZW1haW5kZXJEYXRhPW51bGwsdGhpcy52aWRlb1BhcnNlcj12b2lkIDAsdGhpcy5vYnNlcnZlcj1lLHRoaXMuY29uZmlnPXQsdGhpcy50eXBlU3VwcG9ydGVkPXIsdGhpcy52aWRlb1BhcnNlcj1uZXcgR2l9ZS5wcm9iZT1mdW5jdGlvbih0KXt2YXIgcj1lLnN5bmNPZmZzZXQodCk7cmV0dXJuIHI+MCYmRC53YXJuKCJNUEVHMi1UUyBkZXRlY3RlZCBidXQgZmlyc3Qgc3luYyB3b3JkIGZvdW5kIEAgb2Zmc2V0ICIrciksLTEhPT1yfSxlLnN5bmNPZmZzZXQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUubGVuZ3RoLHI9TWF0aC5taW4oOTQwLHQtVmkpKzEsaT0wO2k8cjspe2Zvcih2YXIgYT0hMSxuPS0xLHM9MCxvPWk7bzx0O28rPVZpKXtpZig3MSE9PWVbb118fHQtbyE9PVZpJiY3MSE9PWVbbytWaV0pe2lmKHMpcmV0dXJuLTE7YnJlYWt9aWYocysrLC0xPT09biYmMCE9PShuPW8pJiYocj1NYXRoLm1pbihuKzE4NjEyLGUubGVuZ3RoLVZpKSsxKSxhfHwoYT0wPT09V2koZSxvKSksYSYmcz4xJiYoMD09PW4mJnM+Mnx8bytWaT5yKSlyZXR1cm4gbn1pKyt9cmV0dXJuLTF9LGUuY3JlYXRlVHJhY2s9ZnVuY3Rpb24oZSx0KXtyZXR1cm57Y29udGFpbmVyOiJ2aWRlbyI9PT1lfHwiYXVkaW8iPT09ZT8idmlkZW8vbXAydCI6dm9pZCAwLHR5cGU6ZSxpZDp1ZVtlXSxwaWQ6LTEsaW5wdXRUaW1lU2NhbGU6OWU0LHNlcXVlbmNlTnVtYmVyOjAsc2FtcGxlczpbXSxkcm9wcGVkOjAsZHVyYXRpb246ImF1ZGlvIj09PWU/dDp2b2lkIDB9fTt2YXIgdD1lLnByb3RvdHlwZTtyZXR1cm4gdC5yZXNldEluaXRTZWdtZW50PWZ1bmN0aW9uKHQscixpLGEpe3RoaXMucG10UGFyc2VkPSExLHRoaXMuX3BtdElkPS0xLHRoaXMuX3ZpZGVvVHJhY2s9ZS5jcmVhdGVUcmFjaygidmlkZW8iKSx0aGlzLl9hdWRpb1RyYWNrPWUuY3JlYXRlVHJhY2soImF1ZGlvIixhKSx0aGlzLl9pZDNUcmFjaz1lLmNyZWF0ZVRyYWNrKCJpZDMiKSx0aGlzLl90eHRUcmFjaz1lLmNyZWF0ZVRyYWNrKCJ0ZXh0IiksdGhpcy5fYXVkaW9UcmFjay5zZWdtZW50Q29kZWM9ImFhYyIsdGhpcy5hYWNPdmVyRmxvdz1udWxsLHRoaXMucmVtYWluZGVyRGF0YT1udWxsLHRoaXMuYXVkaW9Db2RlYz1yLHRoaXMudmlkZW9Db2RlYz1pLHRoaXMuX2R1cmF0aW9uPWF9LHQucmVzZXRUaW1lU3RhbXA9ZnVuY3Rpb24oKXt9LHQucmVzZXRDb250aWd1aXR5PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fYXVkaW9UcmFjayx0PXRoaXMuX3ZpZGVvVHJhY2sscj10aGlzLl9pZDNUcmFjaztlJiYoZS5wZXNEYXRhPW51bGwpLHQmJih0LnBlc0RhdGE9bnVsbCksciYmKHIucGVzRGF0YT1udWxsKSx0aGlzLmFhY092ZXJGbG93PW51bGwsdGhpcy5yZW1haW5kZXJEYXRhPW51bGx9LHQuZGVtdXg9ZnVuY3Rpb24odCxyLGksYSl7dmFyIG47dm9pZCAwPT09aSYmKGk9ITEpLHZvaWQgMD09PWEmJihhPSExKSxpfHwodGhpcy5zYW1wbGVBZXM9bnVsbCk7dmFyIHM9dGhpcy5fdmlkZW9UcmFjayxvPXRoaXMuX2F1ZGlvVHJhY2ssbD10aGlzLl9pZDNUcmFjayx1PXRoaXMuX3R4dFRyYWNrLGQ9cy5waWQsaD1zLnBlc0RhdGEsZj1vLnBpZCxjPWwucGlkLHY9by5wZXNEYXRhLGc9bC5wZXNEYXRhLG09bnVsbCxwPXRoaXMucG10UGFyc2VkLHk9dGhpcy5fcG10SWQsRT10Lmxlbmd0aDtpZih0aGlzLnJlbWFpbmRlckRhdGEmJihFPSh0PWJlKHRoaXMucmVtYWluZGVyRGF0YSx0KSkubGVuZ3RoLHRoaXMucmVtYWluZGVyRGF0YT1udWxsKSxFPFZpJiYhYSlyZXR1cm4gdGhpcy5yZW1haW5kZXJEYXRhPXQse2F1ZGlvVHJhY2s6byx2aWRlb1RyYWNrOnMsaWQzVHJhY2s6bCx0ZXh0VHJhY2s6dX07dmFyIFQ9TWF0aC5tYXgoMCxlLnN5bmNPZmZzZXQodCkpOyhFLT0oRS1UKSVWaSk8dC5ieXRlTGVuZ3RoJiYhYSYmKHRoaXMucmVtYWluZGVyRGF0YT1uZXcgVWludDhBcnJheSh0LmJ1ZmZlcixFLHQuYnVmZmVyLmJ5dGVMZW5ndGgtRSkpO2Zvcih2YXIgUz0wLEw9VDtMPEU7TCs9VmkpaWYoNzE9PT10W0xdKXt2YXIgUj0hISg2NCZ0W0wrMV0pLEE9V2kodCxMKSxiPXZvaWQgMDtpZigoNDgmdFtMKzNdKT4+ND4xKXtpZigoYj1MKzUrdFtMKzRdKT09PUwrVmkpY29udGludWV9ZWxzZSBiPUwrNDtzd2l0Y2goQSl7Y2FzZSBkOlImJihoJiYobj1YaShoKSkmJnRoaXMudmlkZW9QYXJzZXIucGFyc2VBVkNQRVMocyx1LG4sITEsdGhpcy5fZHVyYXRpb24pLGg9e2RhdGE6W10sc2l6ZTowfSksaCYmKGguZGF0YS5wdXNoKHQuc3ViYXJyYXkoYixMK1ZpKSksaC5zaXplKz1MK1ZpLWIpO2JyZWFrO2Nhc2UgZjppZihSKXtpZih2JiYobj1YaSh2KSkpc3dpdGNoKG8uc2VnbWVudENvZGVjKXtjYXNlImFhYyI6dGhpcy5wYXJzZUFBQ1BFUyhvLG4pO2JyZWFrO2Nhc2UibXAzIjp0aGlzLnBhcnNlTVBFR1BFUyhvLG4pfXY9e2RhdGE6W10sc2l6ZTowfX12JiYodi5kYXRhLnB1c2godC5zdWJhcnJheShiLEwrVmkpKSx2LnNpemUrPUwrVmktYik7YnJlYWs7Y2FzZSBjOlImJihnJiYobj1YaShnKSkmJnRoaXMucGFyc2VJRDNQRVMobCxuKSxnPXtkYXRhOltdLHNpemU6MH0pLGcmJihnLmRhdGEucHVzaCh0LnN1YmFycmF5KGIsTCtWaSkpLGcuc2l6ZSs9TCtWaS1iKTticmVhaztjYXNlIDA6UiYmKGIrPXRbYl0rMSkseT10aGlzLl9wbXRJZD1qaSh0LGIpO2JyZWFrO2Nhc2UgeTpSJiYoYis9dFtiXSsxKTt2YXIgaz1ZaSh0LGIsdGhpcy50eXBlU3VwcG9ydGVkLGksdGhpcy5vYnNlcnZlcik7KGQ9ay52aWRlb1BpZCk+MCYmKHMucGlkPWQscy5zZWdtZW50Q29kZWM9ay5zZWdtZW50VmlkZW9Db2RlYyksKGY9ay5hdWRpb1BpZCk+MCYmKG8ucGlkPWYsby5zZWdtZW50Q29kZWM9ay5zZWdtZW50QXVkaW9Db2RlYyksKGM9ay5pZDNQaWQpPjAmJihsLnBpZD1jKSxudWxsPT09bXx8cHx8KEQud2FybigiTVBFRy1UUyBQTVQgZm91bmQgYXQgIitMKyIgYWZ0ZXIgdW5rbm93biBQSUQgJyIrbSsiJy4gQmFja3RyYWNraW5nIHRvIHN5bmMgYnl0ZSBAIitUKyIgdG8gcGFyc2UgYWxsIFRTIHBhY2tldHMuIiksbT1udWxsLEw9VC0xODgpLHA9dGhpcy5wbXRQYXJzZWQ9ITA7YnJlYWs7Y2FzZSAxNzpjYXNlIDgxOTE6YnJlYWs7ZGVmYXVsdDptPUF9fWVsc2UgUysrO1M+MCYmcWkodGhpcy5vYnNlcnZlcixuZXcgRXJyb3IoIkZvdW5kICIrUysiIFRTIHBhY2tldC9zIHRoYXQgZG8gbm90IHN0YXJ0IHdpdGggMHg0NyIpKSxzLnBlc0RhdGE9aCxvLnBlc0RhdGE9dixsLnBlc0RhdGE9Zzt2YXIgXz17YXVkaW9UcmFjazpvLHZpZGVvVHJhY2s6cyxpZDNUcmFjazpsLHRleHRUcmFjazp1fTtyZXR1cm4gYSYmdGhpcy5leHRyYWN0UmVtYWluaW5nU2FtcGxlcyhfKSxffSx0LmZsdXNoPWZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLnJlbWFpbmRlckRhdGE7cmV0dXJuIHRoaXMucmVtYWluZGVyRGF0YT1udWxsLGU9dD90aGlzLmRlbXV4KHQsLTEsITEsITApOnt2aWRlb1RyYWNrOnRoaXMuX3ZpZGVvVHJhY2ssYXVkaW9UcmFjazp0aGlzLl9hdWRpb1RyYWNrLGlkM1RyYWNrOnRoaXMuX2lkM1RyYWNrLHRleHRUcmFjazp0aGlzLl90eHRUcmFja30sdGhpcy5leHRyYWN0UmVtYWluaW5nU2FtcGxlcyhlKSx0aGlzLnNhbXBsZUFlcz90aGlzLmRlY3J5cHQoZSx0aGlzLnNhbXBsZUFlcyk6ZX0sdC5leHRyYWN0UmVtYWluaW5nU2FtcGxlcz1mdW5jdGlvbihlKXt2YXIgdCxyPWUuYXVkaW9UcmFjayxpPWUudmlkZW9UcmFjayxhPWUuaWQzVHJhY2ssbj1lLnRleHRUcmFjayxzPWkucGVzRGF0YSxvPXIucGVzRGF0YSxsPWEucGVzRGF0YTtpZihzJiYodD1YaShzKSk/KHRoaXMudmlkZW9QYXJzZXIucGFyc2VBVkNQRVMoaSxuLHQsITAsdGhpcy5fZHVyYXRpb24pLGkucGVzRGF0YT1udWxsKTppLnBlc0RhdGE9cyxvJiYodD1YaShvKSkpe3N3aXRjaChyLnNlZ21lbnRDb2RlYyl7Y2FzZSJhYWMiOnRoaXMucGFyc2VBQUNQRVMocix0KTticmVhaztjYXNlIm1wMyI6dGhpcy5wYXJzZU1QRUdQRVMocix0KX1yLnBlc0RhdGE9bnVsbH1lbHNlIG51bGwhPW8mJm8uc2l6ZSYmRC5sb2coImxhc3QgQUFDIFBFUyBwYWNrZXQgdHJ1bmNhdGVkLG1pZ2h0IG92ZXJsYXAgYmV0d2VlbiBmcmFnbWVudHMiKSxyLnBlc0RhdGE9bztsJiYodD1YaShsKSk/KHRoaXMucGFyc2VJRDNQRVMoYSx0KSxhLnBlc0RhdGE9bnVsbCk6YS5wZXNEYXRhPWx9LHQuZGVtdXhTYW1wbGVBZXM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMuZGVtdXgoZSxyLCEwLCF0aGlzLmNvbmZpZy5wcm9ncmVzc2l2ZSksYT10aGlzLnNhbXBsZUFlcz1uZXcgSGkodGhpcy5vYnNlcnZlcix0aGlzLmNvbmZpZyx0KTtyZXR1cm4gdGhpcy5kZWNyeXB0KGksYSl9LHQuZGVjcnlwdD1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24ocil7dmFyIGk9ZS5hdWRpb1RyYWNrLGE9ZS52aWRlb1RyYWNrO2kuc2FtcGxlcyYmImFhYyI9PT1pLnNlZ21lbnRDb2RlYz90LmRlY3J5cHRBYWNTYW1wbGVzKGkuc2FtcGxlcywwLChmdW5jdGlvbigpe2Euc2FtcGxlcz90LmRlY3J5cHRBdmNTYW1wbGVzKGEuc2FtcGxlcywwLDAsKGZ1bmN0aW9uKCl7cihlKX0pKTpyKGUpfSkpOmEuc2FtcGxlcyYmdC5kZWNyeXB0QXZjU2FtcGxlcyhhLnNhbXBsZXMsMCwwLChmdW5jdGlvbigpe3IoZSl9KSl9KSl9LHQuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuX2R1cmF0aW9uPTB9LHQucGFyc2VBQUNQRVM9ZnVuY3Rpb24oZSx0KXt2YXIgcixpLGEsbj0wLHM9dGhpcy5hYWNPdmVyRmxvdyxvPXQuZGF0YTtpZihzKXt0aGlzLmFhY092ZXJGbG93PW51bGw7dmFyIGw9cy5taXNzaW5nLHU9cy5zYW1wbGUudW5pdC5ieXRlTGVuZ3RoO2lmKC0xPT09bClvPWJlKHMuc2FtcGxlLnVuaXQsbyk7ZWxzZXt2YXIgZD11LWw7cy5zYW1wbGUudW5pdC5zZXQoby5zdWJhcnJheSgwLGwpLGQpLGUuc2FtcGxlcy5wdXNoKHMuc2FtcGxlKSxuPXMubWlzc2luZ319Zm9yKHI9bixpPW8ubGVuZ3RoO3I8aS0xJiYhVGkobyxyKTtyKyspO2lmKHIhPT1uKXt2YXIgaCxmPXI8aS0xO2lmKGg9Zj8iQUFDIFBFUyBkaWQgbm90IHN0YXJ0IHdpdGggQURUUyBoZWFkZXIsb2Zmc2V0OiIrcjoiTm8gQURUUyBoZWFkZXIgZm91bmQgaW4gQUFDIFBFUyIscWkodGhpcy5vYnNlcnZlcixuZXcgRXJyb3IoaCksZiksIWYpcmV0dXJufWlmKExpKGUsdGhpcy5vYnNlcnZlcixvLHIsdGhpcy5hdWRpb0NvZGVjKSx2b2lkIDAhPT10LnB0cylhPXQucHRzO2Vsc2V7aWYoIXMpcmV0dXJuIHZvaWQgRC53YXJuKCJbdHNkZW11eGVyXTogQUFDIFBFUyB1bmtub3duIFBUUyIpO3ZhciBjPVJpKGUuc2FtcGxlcmF0ZSk7YT1zLnNhbXBsZS5wdHMrY31mb3IodmFyIHYsZz0wO3I8aTspe2lmKHIrPSh2PUFpKGUsbyxyLGEsZykpLmxlbmd0aCx2Lm1pc3Npbmcpe3RoaXMuYWFjT3ZlckZsb3c9djticmVha31mb3IoZysrO3I8aS0xJiYhVGkobyxyKTtyKyspO319LHQucGFyc2VNUEVHUEVTPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5kYXRhLGk9ci5sZW5ndGgsYT0wLG49MCxzPXQucHRzO2lmKHZvaWQgMCE9PXMpZm9yKDtuPGk7KWlmKFBpKHIsbikpe3ZhciBvPXdpKGUscixuLHMsYSk7aWYoIW8pYnJlYWs7bis9by5sZW5ndGgsYSsrfWVsc2UgbisrO2Vsc2UgRC53YXJuKCJbdHNkZW11eGVyXTogTVBFRyBQRVMgdW5rbm93biBQVFMiKX0sdC5wYXJzZUFDM1BFUz1mdW5jdGlvbihlLHQpe30sdC5wYXJzZUlEM1BFUz1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMCE9PXQucHRzKXt2YXIgcj1vKHt9LHQse3R5cGU6dGhpcy5fdmlkZW9UcmFjaz9ndDpjdCxkdXJhdGlvbjpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9KTtlLnNhbXBsZXMucHVzaChyKX1lbHNlIEQud2FybigiW3RzZGVtdXhlcl06IElEMyBQRVMgdW5rbm93biBQVFMiKX0sZX0oKTtmdW5jdGlvbiBXaShlLHQpe3JldHVybigoMzEmZVt0KzFdKTw8OCkrZVt0KzJdfWZ1bmN0aW9uIGppKGUsdCl7cmV0dXJuKDMxJmVbdCsxMF0pPDw4fGVbdCsxMV19ZnVuY3Rpb24gWWkoZSx0LHIsaSxhKXt2YXIgbj17YXVkaW9QaWQ6LTEsdmlkZW9QaWQ6LTEsaWQzUGlkOi0xLHNlZ21lbnRWaWRlb0NvZGVjOiJhdmMiLHNlZ21lbnRBdWRpb0NvZGVjOiJhYWMifSxzPXQrMysoKDE1JmVbdCsxXSk8PDh8ZVt0KzJdKS00O2Zvcih0Kz0xMisoKDE1JmVbdCsxMF0pPDw4fGVbdCsxMV0pO3Q8czspe3ZhciBvPVdpKGUsdCksbD0oMTUmZVt0KzNdKTw8OHxlW3QrNF07c3dpdGNoKGVbdF0pe2Nhc2UgMjA3OmlmKCFpKXt6aSgiQURUUyBBQUMiKTticmVha31jYXNlIDE1Oi0xPT09bi5hdWRpb1BpZCYmKG4uYXVkaW9QaWQ9byk7YnJlYWs7Y2FzZSAyMTotMT09PW4uaWQzUGlkJiYobi5pZDNQaWQ9byk7YnJlYWs7Y2FzZSAyMTk6aWYoIWkpe3ppKCJILjI2NCIpO2JyZWFrfWNhc2UgMjc6LTE9PT1uLnZpZGVvUGlkJiYobi52aWRlb1BpZD1vLG4uc2VnbWVudFZpZGVvQ29kZWM9ImF2YyIpO2JyZWFrO2Nhc2UgMzpjYXNlIDQ6ci5tcGVnfHxyLm1wMz8tMT09PW4uYXVkaW9QaWQmJihuLmF1ZGlvUGlkPW8sbi5zZWdtZW50QXVkaW9Db2RlYz0ibXAzIik6RC5sb2coIk1QRUcgYXVkaW8gZm91bmQsIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyIik7YnJlYWs7Y2FzZSAxOTM6aWYoIWkpe3ppKCJBQy0zIik7YnJlYWt9Y2FzZSAxMjk6RC53YXJuKCJBQy0zIGluIE0yVFMgc3VwcG9ydCBub3QgaW5jbHVkZWQgaW4gYnVpbGQiKTticmVhaztjYXNlIDY6aWYoLTE9PT1uLmF1ZGlvUGlkJiZsPjApZm9yKHZhciB1PXQrNSxkPWw7ZD4yOyl7MTA2PT09ZVt1XSYmRC53YXJuKCJBQy0zIGluIE0yVFMgc3VwcG9ydCBub3QgaW5jbHVkZWQgaW4gYnVpbGQiKTt2YXIgaD1lW3UrMV0rMjt1Kz1oLGQtPWh9YnJlYWs7Y2FzZSAxOTQ6Y2FzZSAxMzU6cmV0dXJuIHFpKGEsbmV3IEVycm9yKCJVbnN1cHBvcnRlZCBFQy0zIGluIE0yVFMgZm91bmQiKSksbjtjYXNlIDM2OnJldHVybiBxaShhLG5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgSEVWQyBpbiBNMlRTIGZvdW5kIikpLG59dCs9bCs1fXJldHVybiBufWZ1bmN0aW9uIHFpKGUsdCxyKXtELndhcm4oInBhcnNpbmcgZXJyb3I6ICIrdC5tZXNzYWdlKSxlLmVtaXQoRS5FUlJPUixFLkVSUk9SLHt0eXBlOlQuTUVESUFfRVJST1IsZGV0YWlsczpTLkZSQUdfUEFSU0lOR19FUlJPUixmYXRhbDohMSxsZXZlbFJldHJ5OnIsZXJyb3I6dCxyZWFzb246dC5tZXNzYWdlfSl9ZnVuY3Rpb24gemkoZSl7RC5sb2coZSsiIHdpdGggQUVTLTEyOC1DQkMgZW5jcnlwdGlvbiBmb3VuZCBpbiB1bmVuY3J5cHRlZCBzdHJlYW0iKX1mdW5jdGlvbiBYaShlKXt2YXIgdCxyLGksYSxuLHM9MCxvPWUuZGF0YTtpZighZXx8MD09PWUuc2l6ZSlyZXR1cm4gbnVsbDtmb3IoO29bMF0ubGVuZ3RoPDE5JiZvLmxlbmd0aD4xOylvWzBdPWJlKG9bMF0sb1sxXSksby5zcGxpY2UoMSwxKTtpZigxPT09KCh0PW9bMF0pWzBdPDwxNikrKHRbMV08PDgpK3RbMl0pe2lmKChyPSh0WzRdPDw4KSt0WzVdKSYmcj5lLnNpemUtNilyZXR1cm4gbnVsbDt2YXIgbD10WzddOzE5MiZsJiYoYT01MzY4NzA5MTIqKDE0JnRbOV0pKzQxOTQzMDQqKDI1NSZ0WzEwXSkrMTYzODQqKDI1NCZ0WzExXSkrMTI4KigyNTUmdFsxMl0pKygyNTQmdFsxM10pLzIsNjQmbD9hLShuPTUzNjg3MDkxMiooMTQmdFsxNF0pKzQxOTQzMDQqKDI1NSZ0WzE1XSkrMTYzODQqKDI1NCZ0WzE2XSkrMTI4KigyNTUmdFsxN10pKygyNTQmdFsxOF0pLzIpPjU0ZTUmJihELndhcm4oTWF0aC5yb3VuZCgoYS1uKS85ZTQpKyJzIGRlbHRhIGJldHdlZW4gUFRTIGFuZCBEVFMsIGFsaWduIHRoZW0iKSxhPW4pOm49YSk7dmFyIHU9KGk9dFs4XSkrOTtpZihlLnNpemU8PXUpcmV0dXJuIG51bGw7ZS5zaXplLT11O2Zvcih2YXIgZD1uZXcgVWludDhBcnJheShlLnNpemUpLGg9MCxmPW8ubGVuZ3RoO2g8ZjtoKyspe3ZhciBjPSh0PW9baF0pLmJ5dGVMZW5ndGg7aWYodSl7aWYodT5jKXt1LT1jO2NvbnRpbnVlfXQ9dC5zdWJhcnJheSh1KSxjLT11LHU9MH1kLnNldCh0LHMpLHMrPWN9cmV0dXJuIHImJihyLT1pKzMpLHtkYXRhOmQscHRzOmEsZHRzOm4sbGVuOnJ9fXJldHVybiBudWxsfXZhciBRaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfWwodCxlKTt2YXIgcj10LnByb3RvdHlwZTtyZXR1cm4gci5yZXNldEluaXRTZWdtZW50PWZ1bmN0aW9uKHQscixpLGEpe2UucHJvdG90eXBlLnJlc2V0SW5pdFNlZ21lbnQuY2FsbCh0aGlzLHQscixpLGEpLHRoaXMuX2F1ZGlvVHJhY2s9e2NvbnRhaW5lcjoiYXVkaW8vbXBlZyIsdHlwZToiYXVkaW8iLGlkOjIscGlkOi0xLHNlcXVlbmNlTnVtYmVyOjAsc2VnbWVudENvZGVjOiJtcDMiLHNhbXBsZXM6W10sbWFuaWZlc3RDb2RlYzpyLGR1cmF0aW9uOmEsaW5wdXRUaW1lU2NhbGU6OWU0LGRyb3BwZWQ6MH19LHQucHJvYmU9ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuITE7dmFyIHQ9WShlLDApLHI9KG51bGw9PXQ/dm9pZCAwOnQubGVuZ3RoKXx8MDtpZih0JiYxMT09PWVbcl0mJjExOT09PWVbcisxXSYmdm9pZCAwIT09WCh0KSYmZnVuY3Rpb24oZSx0KXt2YXIgcj0wLGk9NTt0Kz1pO2Zvcih2YXIgYT1uZXcgVWludDMyQXJyYXkoMSksbj1uZXcgVWludDMyQXJyYXkoMSkscz1uZXcgVWludDhBcnJheSgxKTtpPjA7KXtzWzBdPWVbdF07dmFyIG89TWF0aC5taW4oaSw4KSxsPTgtbztuWzBdPTQyNzgxOTAwODA+Pj4yNCtsPDxsLGFbMF09KHNbMF0mblswXSk+Pmwscj1yP3I8PG98YVswXTphWzBdLHQrPTEsaS09b31yZXR1cm4gcn0oZSxyKTw9MTYpcmV0dXJuITE7Zm9yKHZhciBpPWUubGVuZ3RoO3I8aTtyKyspaWYoRmkoZSxyKSlyZXR1cm4gRC5sb2coIk1QRUcgQXVkaW8gc3luYyB3b3JkIGZvdW5kICEiKSwhMDtyZXR1cm4hMX0sci5jYW5QYXJzZT1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBJaShlLHQpJiY0PD1lLmxlbmd0aC10fShlLHQpfSxyLmFwcGVuZEZyYW1lPWZ1bmN0aW9uKGUsdCxyKXtpZihudWxsIT09dGhpcy5iYXNlUFRTKXJldHVybiB3aShlLHQscix0aGlzLmJhc2VQVFMsdGhpcy5mcmFtZUluZGV4KX0sdH0oZ2kpLEppPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5nZXRTaWxlbnRGcmFtZT1mdW5jdGlvbihlLHQpe2lmKCJtcDRhLjQwLjIiPT09ZSl7aWYoMT09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFswLDIwMCwwLDEyOCwzNSwxMjhdKTtpZigyPT09dClyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzMzLDAsNzMsMTQ0LDIsMjUsMCwzNSwxMjhdKTtpZigzPT09dClyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzAsMjAwLDAsMTI4LDMyLDEzMiwxLDM4LDY0LDgsMTAwLDAsMTQyXSk7aWYoND09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFswLDIwMCwwLDEyOCwzMiwxMzIsMSwzOCw2NCw4LDEwMCwwLDEyOCw0NCwxMjgsOCwyLDU2XSk7aWYoNT09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFswLDIwMCwwLDEyOCwzMiwxMzIsMSwzOCw2NCw4LDEwMCwwLDEzMCw0OCw0LDE1MywwLDMzLDE0NCwyLDU2XSk7aWYoNj09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFswLDIwMCwwLDEyOCwzMiwxMzIsMSwzOCw2NCw4LDEwMCwwLDEzMCw0OCw0LDE1MywwLDMzLDE0NCwyLDAsMTc4LDAsMzIsOCwyMjRdKX1lbHNle2lmKDE9PT10KXJldHVybiBuZXcgVWludDhBcnJheShbMSw2NCwzNCwxMjgsMTYzLDc4LDIzMCwxMjgsMTg2LDgsMCwwLDAsMjgsNiwyNDEsMTkzLDEwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDkwLDk0XSk7aWYoMj09PXQpcmV0dXJuIG5ldyBVaW50OEFycmF5KFsxLDY0LDM0LDEyOCwxNjMsOTQsMjMwLDEyOCwxODYsOCwwLDAsMCwwLDE0OSwwLDYsMjQxLDE2MSwxMCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5MCw5NF0pO2lmKDM9PT10KXJldHVybiBuZXcgVWludDhBcnJheShbMSw2NCwzNCwxMjgsMTYzLDk0LDIzMCwxMjgsMTg2LDgsMCwwLDAsMCwxNDksMCw2LDI0MSwxNjEsMTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTAsOTRdKX19LGV9KCksJGk9TWF0aC5wb3coMiwzMiktMSxaaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0O2Zvcih0IGluIGUudHlwZXM9e2F2YzE6W10sYXZjQzpbXSxidHJ0OltdLGRpbmY6W10sZHJlZjpbXSxlc2RzOltdLGZ0eXA6W10saGRscjpbXSxtZGF0OltdLG1kaGQ6W10sbWRpYTpbXSxtZmhkOltdLG1pbmY6W10sbW9vZjpbXSxtb292OltdLG1wNGE6W10sIi5tcDMiOltdLGRhYzM6W10sImFjLTMiOltdLG12ZXg6W10sbXZoZDpbXSxwYXNwOltdLHNkdHA6W10sc3RibDpbXSxzdGNvOltdLHN0c2M6W10sc3RzZDpbXSxzdHN6OltdLHN0dHM6W10sdGZkdDpbXSx0ZmhkOltdLHRyYWY6W10sdHJhazpbXSx0cnVuOltdLHRyZXg6W10sdGtoZDpbXSx2bWhkOltdLHNtaGQ6W119LGUudHlwZXMpZS50eXBlcy5oYXNPd25Qcm9wZXJ0eSh0KSYmKGUudHlwZXNbdF09W3QuY2hhckNvZGVBdCgwKSx0LmNoYXJDb2RlQXQoMSksdC5jaGFyQ29kZUF0KDIpLHQuY2hhckNvZGVBdCgzKV0pO3ZhciByPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDAsMTE4LDEwNSwxMDAsMTAxLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDg2LDEwNSwxMDAsMTAxLDExMSw3Miw5NywxMTAsMTAwLDEwOCwxMDEsMTE0LDBdKSxpPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDAsMTE1LDExMSwxMTcsMTEwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDgzLDExMSwxMTcsMTEwLDEwMCw3Miw5NywxMTAsMTAwLDEwOCwxMDEsMTE0LDBdKTtlLkhETFJfVFlQRVM9e3ZpZGVvOnIsYXVkaW86aX07dmFyIGE9bmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMSwwLDAsMCwxMiwxMTcsMTE0LDEwOCwzMiwwLDAsMCwxXSksbj1uZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwwXSk7ZS5TVFRTPWUuU1RTQz1lLlNUQ089bixlLlNUU1o9bmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwXSksZS5WTUhEPW5ldyBVaW50OEFycmF5KFswLDAsMCwxLDAsMCwwLDAsMCwwLDAsMF0pLGUuU01IRD1uZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwwXSksZS5TVFNEPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDFdKTt2YXIgcz1uZXcgVWludDhBcnJheShbMTA1LDExNSwxMTEsMTA5XSksbz1uZXcgVWludDhBcnJheShbOTcsMTE4LDk5LDQ5XSksbD1uZXcgVWludDhBcnJheShbMCwwLDAsMV0pO2UuRlRZUD1lLmJveChlLnR5cGVzLmZ0eXAscyxsLHMsbyksZS5ESU5GPWUuYm94KGUudHlwZXMuZGluZixlLmJveChlLnR5cGVzLmRyZWYsYSkpfSxlLmJveD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9OCxyPWFyZ3VtZW50cy5sZW5ndGgsaT1uZXcgQXJyYXkocj4xP3ItMTowKSxhPTE7YTxyO2ErKylpW2EtMV09YXJndW1lbnRzW2FdO2Zvcih2YXIgbj1pLmxlbmd0aCxzPW47bi0tOyl0Kz1pW25dLmJ5dGVMZW5ndGg7dmFyIG89bmV3IFVpbnQ4QXJyYXkodCk7Zm9yKG9bMF09dD4+MjQmMjU1LG9bMV09dD4+MTYmMjU1LG9bMl09dD4+OCYyNTUsb1szXT0yNTUmdCxvLnNldChlLDQpLG49MCx0PTg7bjxzO24rKylvLnNldChpW25dLHQpLHQrPWlbbl0uYnl0ZUxlbmd0aDtyZXR1cm4gb30sZS5oZGxyPWZ1bmN0aW9uKHQpe3JldHVybiBlLmJveChlLnR5cGVzLmhkbHIsZS5IRExSX1RZUEVTW3RdKX0sZS5tZGF0PWZ1bmN0aW9uKHQpe3JldHVybiBlLmJveChlLnR5cGVzLm1kYXQsdCl9LGUubWRoZD1mdW5jdGlvbih0LHIpe3IqPXQ7dmFyIGk9TWF0aC5mbG9vcihyLygkaSsxKSksYT1NYXRoLmZsb29yKHIlKCRpKzEpKTtyZXR1cm4gZS5ib3goZS50eXBlcy5tZGhkLG5ldyBVaW50OEFycmF5KFsxLDAsMCwwLDAsMCwwLDAsMCwwLDAsMiwwLDAsMCwwLDAsMCwwLDMsdD4+MjQmMjU1LHQ+PjE2JjI1NSx0Pj44JjI1NSwyNTUmdCxpPj4yNCxpPj4xNiYyNTUsaT4+OCYyNTUsMjU1JmksYT4+MjQsYT4+MTYmMjU1LGE+PjgmMjU1LDI1NSZhLDg1LDE5NiwwLDBdKSl9LGUubWRpYT1mdW5jdGlvbih0KXtyZXR1cm4gZS5ib3goZS50eXBlcy5tZGlhLGUubWRoZCh0LnRpbWVzY2FsZSx0LmR1cmF0aW9uKSxlLmhkbHIodC50eXBlKSxlLm1pbmYodCkpfSxlLm1maGQ9ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMubWZoZCxuZXcgVWludDhBcnJheShbMCwwLDAsMCx0Pj4yNCx0Pj4xNiYyNTUsdD4+OCYyNTUsMjU1JnRdKSl9LGUubWluZj1mdW5jdGlvbih0KXtyZXR1cm4iYXVkaW8iPT09dC50eXBlP2UuYm94KGUudHlwZXMubWluZixlLmJveChlLnR5cGVzLnNtaGQsZS5TTUhEKSxlLkRJTkYsZS5zdGJsKHQpKTplLmJveChlLnR5cGVzLm1pbmYsZS5ib3goZS50eXBlcy52bWhkLGUuVk1IRCksZS5ESU5GLGUuc3RibCh0KSl9LGUubW9vZj1mdW5jdGlvbih0LHIsaSl7cmV0dXJuIGUuYm94KGUudHlwZXMubW9vZixlLm1maGQodCksZS50cmFmKGkscikpfSxlLm1vb3Y9ZnVuY3Rpb24odCl7Zm9yKHZhciByPXQubGVuZ3RoLGk9W107ci0tOylpW3JdPWUudHJhayh0W3JdKTtyZXR1cm4gZS5ib3guYXBwbHkobnVsbCxbZS50eXBlcy5tb292LGUubXZoZCh0WzBdLnRpbWVzY2FsZSx0WzBdLmR1cmF0aW9uKV0uY29uY2F0KGkpLmNvbmNhdChlLm12ZXgodCkpKX0sZS5tdmV4PWZ1bmN0aW9uKHQpe2Zvcih2YXIgcj10Lmxlbmd0aCxpPVtdO3ItLTspaVtyXT1lLnRyZXgodFtyXSk7cmV0dXJuIGUuYm94LmFwcGx5KG51bGwsW2UudHlwZXMubXZleF0uY29uY2F0KGkpKX0sZS5tdmhkPWZ1bmN0aW9uKHQscil7cio9dDt2YXIgaT1NYXRoLmZsb29yKHIvKCRpKzEpKSxhPU1hdGguZmxvb3IociUoJGkrMSkpLG49bmV3IFVpbnQ4QXJyYXkoWzEsMCwwLDAsMCwwLDAsMCwwLDAsMCwyLDAsMCwwLDAsMCwwLDAsMyx0Pj4yNCYyNTUsdD4+MTYmMjU1LHQ+PjgmMjU1LDI1NSZ0LGk+PjI0LGk+PjE2JjI1NSxpPj44JjI1NSwyNTUmaSxhPj4yNCxhPj4xNiYyNTUsYT4+OCYyNTUsMjU1JmEsMCwxLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsNjQsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMjU1LDI1NSwyNTUsMjU1XSk7cmV0dXJuIGUuYm94KGUudHlwZXMubXZoZCxuKX0sZS5zZHRwPWZ1bmN0aW9uKHQpe3ZhciByLGksYT10LnNhbXBsZXN8fFtdLG49bmV3IFVpbnQ4QXJyYXkoNCthLmxlbmd0aCk7Zm9yKHI9MDtyPGEubGVuZ3RoO3IrKylpPWFbcl0uZmxhZ3MsbltyKzRdPWkuZGVwZW5kc09uPDw0fGkuaXNEZXBlbmRlZE9uPDwyfGkuaGFzUmVkdW5kYW5jeTtyZXR1cm4gZS5ib3goZS50eXBlcy5zZHRwLG4pfSxlLnN0Ymw9ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXMuc3RibCxlLnN0c2QodCksZS5ib3goZS50eXBlcy5zdHRzLGUuU1RUUyksZS5ib3goZS50eXBlcy5zdHNjLGUuU1RTQyksZS5ib3goZS50eXBlcy5zdHN6LGUuU1RTWiksZS5ib3goZS50eXBlcy5zdGNvLGUuU1RDTykpfSxlLmF2YzE9ZnVuY3Rpb24odCl7dmFyIHIsaSxhLG49W10scz1bXTtmb3Iocj0wO3I8dC5zcHMubGVuZ3RoO3IrKylhPShpPXQuc3BzW3JdKS5ieXRlTGVuZ3RoLG4ucHVzaChhPj4+OCYyNTUpLG4ucHVzaCgyNTUmYSksbj1uLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChpKSk7Zm9yKHI9MDtyPHQucHBzLmxlbmd0aDtyKyspYT0oaT10LnBwc1tyXSkuYnl0ZUxlbmd0aCxzLnB1c2goYT4+PjgmMjU1KSxzLnB1c2goMjU1JmEpLHM9cy5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoaSkpO3ZhciBvPWUuYm94KGUudHlwZXMuYXZjQyxuZXcgVWludDhBcnJheShbMSxuWzNdLG5bNF0sbls1XSwyNTUsMjI0fHQuc3BzLmxlbmd0aF0uY29uY2F0KG4pLmNvbmNhdChbdC5wcHMubGVuZ3RoXSkuY29uY2F0KHMpKSksbD10LndpZHRoLHU9dC5oZWlnaHQsZD10LnBpeGVsUmF0aW9bMF0saD10LnBpeGVsUmF0aW9bMV07cmV0dXJuIGUuYm94KGUudHlwZXMuYXZjMSxuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsbD4+OCYyNTUsMjU1JmwsdT4+OCYyNTUsMjU1JnUsMCw3MiwwLDAsMCw3MiwwLDAsMCwwLDAsMCwwLDEsMTgsMTAwLDk3LDEwNSwxMDgsMTIxLDEwOSwxMTEsMTE2LDEwNSwxMTEsMTEwLDQ3LDEwNCwxMDgsMTE1LDQ2LDEwNiwxMTUsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDI0LDE3LDE3XSksbyxlLmJveChlLnR5cGVzLmJ0cnQsbmV3IFVpbnQ4QXJyYXkoWzAsMjgsMTU2LDEyOCwwLDQ1LDE5OCwxOTIsMCw0NSwxOTgsMTkyXSkpLGUuYm94KGUudHlwZXMucGFzcCxuZXcgVWludDhBcnJheShbZD4+MjQsZD4+MTYmMjU1LGQ+PjgmMjU1LDI1NSZkLGg+PjI0LGg+PjE2JjI1NSxoPj44JjI1NSwyNTUmaF0pKSl9LGUuZXNkcz1mdW5jdGlvbihlKXt2YXIgdD1lLmNvbmZpZy5sZW5ndGg7cmV0dXJuIG5ldyBVaW50OEFycmF5KFswLDAsMCwwLDMsMjMrdCwwLDEsMCw0LDE1K3QsNjQsMjEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDVdLmNvbmNhdChbdF0pLmNvbmNhdChlLmNvbmZpZykuY29uY2F0KFs2LDEsMl0pKX0sZS5hdWRpb1N0c2Q9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zYW1wbGVyYXRlO3JldHVybiBuZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLGUuY2hhbm5lbENvdW50LDAsMTYsMCwwLDAsMCx0Pj44JjI1NSwyNTUmdCwwLDBdKX0sZS5tcDRhPWZ1bmN0aW9uKHQpe3JldHVybiBlLmJveChlLnR5cGVzLm1wNGEsZS5hdWRpb1N0c2QodCksZS5ib3goZS50eXBlcy5lc2RzLGUuZXNkcyh0KSkpfSxlLm1wMz1mdW5jdGlvbih0KXtyZXR1cm4gZS5ib3goZS50eXBlc1siLm1wMyJdLGUuYXVkaW9TdHNkKHQpKX0sZS5hYzM9ZnVuY3Rpb24odCl7cmV0dXJuIGUuYm94KGUudHlwZXNbImFjLTMiXSxlLmF1ZGlvU3RzZCh0KSxlLmJveChlLnR5cGVzLmRhYzMsdC5jb25maWcpKX0sZS5zdHNkPWZ1bmN0aW9uKHQpe3JldHVybiJhdWRpbyI9PT10LnR5cGU/Im1wMyI9PT10LnNlZ21lbnRDb2RlYyYmIm1wMyI9PT10LmNvZGVjP2UuYm94KGUudHlwZXMuc3RzZCxlLlNUU0QsZS5tcDModCkpOiJhYzMiPT09dC5zZWdtZW50Q29kZWM/ZS5ib3goZS50eXBlcy5zdHNkLGUuU1RTRCxlLmFjMyh0KSk6ZS5ib3goZS50eXBlcy5zdHNkLGUuU1RTRCxlLm1wNGEodCkpOmUuYm94KGUudHlwZXMuc3RzZCxlLlNUU0QsZS5hdmMxKHQpKX0sZS50a2hkPWZ1bmN0aW9uKHQpe3ZhciByPXQuaWQsaT10LmR1cmF0aW9uKnQudGltZXNjYWxlLGE9dC53aWR0aCxuPXQuaGVpZ2h0LHM9TWF0aC5mbG9vcihpLygkaSsxKSksbz1NYXRoLmZsb29yKGklKCRpKzEpKTtyZXR1cm4gZS5ib3goZS50eXBlcy50a2hkLG5ldyBVaW50OEFycmF5KFsxLDAsMCw3LDAsMCwwLDAsMCwwLDAsMiwwLDAsMCwwLDAsMCwwLDMscj4+MjQmMjU1LHI+PjE2JjI1NSxyPj44JjI1NSwyNTUmciwwLDAsMCwwLHM+PjI0LHM+PjE2JjI1NSxzPj44JjI1NSwyNTUmcyxvPj4yNCxvPj4xNiYyNTUsbz4+OCYyNTUsMjU1Jm8sMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsNjQsMCwwLDAsYT4+OCYyNTUsMjU1JmEsMCwwLG4+PjgmMjU1LDI1NSZuLDAsMF0pKX0sZS50cmFmPWZ1bmN0aW9uKHQscil7dmFyIGk9ZS5zZHRwKHQpLGE9dC5pZCxuPU1hdGguZmxvb3Ioci8oJGkrMSkpLHM9TWF0aC5mbG9vcihyJSgkaSsxKSk7cmV0dXJuIGUuYm94KGUudHlwZXMudHJhZixlLmJveChlLnR5cGVzLnRmaGQsbmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsYT4+MjQsYT4+MTYmMjU1LGE+PjgmMjU1LDI1NSZhXSkpLGUuYm94KGUudHlwZXMudGZkdCxuZXcgVWludDhBcnJheShbMSwwLDAsMCxuPj4yNCxuPj4xNiYyNTUsbj4+OCYyNTUsMjU1Jm4scz4+MjQscz4+MTYmMjU1LHM+PjgmMjU1LDI1NSZzXSkpLGUudHJ1bih0LGkubGVuZ3RoKzE2KzIwKzgrMTYrOCs4KSxpKX0sZS50cmFrPWZ1bmN0aW9uKHQpe3JldHVybiB0LmR1cmF0aW9uPXQuZHVyYXRpb258fDQyOTQ5NjcyOTUsZS5ib3goZS50eXBlcy50cmFrLGUudGtoZCh0KSxlLm1kaWEodCkpfSxlLnRyZXg9ZnVuY3Rpb24odCl7dmFyIHI9dC5pZDtyZXR1cm4gZS5ib3goZS50eXBlcy50cmV4LG5ldyBVaW50OEFycmF5KFswLDAsMCwwLHI+PjI0LHI+PjE2JjI1NSxyPj44JjI1NSwyNTUmciwwLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwwLDEsMCwxXSkpfSxlLnRydW49ZnVuY3Rpb24odCxyKXt2YXIgaSxhLG4scyxvLGwsdT10LnNhbXBsZXN8fFtdLGQ9dS5sZW5ndGgsaD0xMisxNipkLGY9bmV3IFVpbnQ4QXJyYXkoaCk7Zm9yKHIrPTgraCxmLnNldChbInZpZGVvIj09PXQudHlwZT8xOjAsMCwxNSwxLGQ+Pj4yNCYyNTUsZD4+PjE2JjI1NSxkPj4+OCYyNTUsMjU1JmQscj4+PjI0JjI1NSxyPj4+MTYmMjU1LHI+Pj44JjI1NSwyNTUmcl0sMCksaT0wO2k8ZDtpKyspbj0oYT11W2ldKS5kdXJhdGlvbixzPWEuc2l6ZSxvPWEuZmxhZ3MsbD1hLmN0cyxmLnNldChbbj4+PjI0JjI1NSxuPj4+MTYmMjU1LG4+Pj44JjI1NSwyNTUmbixzPj4+MjQmMjU1LHM+Pj4xNiYyNTUscz4+PjgmMjU1LDI1NSZzLG8uaXNMZWFkaW5nPDwyfG8uZGVwZW5kc09uLG8uaXNEZXBlbmRlZE9uPDw2fG8uaGFzUmVkdW5kYW5jeTw8NHxvLnBhZGRpbmdWYWx1ZTw8MXxvLmlzTm9uU3luYyw2MTQ0MCZvLmRlZ3JhZFByaW8sMTUmby5kZWdyYWRQcmlvLGw+Pj4yNCYyNTUsbD4+PjE2JjI1NSxsPj4+OCYyNTUsMjU1JmxdLDEyKzE2KmkpO3JldHVybiBlLmJveChlLnR5cGVzLnRydW4sZil9LGUuaW5pdFNlZ21lbnQ9ZnVuY3Rpb24odCl7ZS50eXBlc3x8ZS5pbml0KCk7dmFyIHI9ZS5tb292KHQpO3JldHVybiBiZShlLkZUWVAscil9LGV9KCk7ZnVuY3Rpb24gZWEoZSx0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9ITEpLGZ1bmN0aW9uKGUsdCxyLGkpe3ZvaWQgMD09PXImJihyPTEpLHZvaWQgMD09PWkmJihpPSExKTt2YXIgYT1lKnQqcjtyZXR1cm4gaT9NYXRoLnJvdW5kKGEpOmF9KGUsMWUzLDEvOWU0LHQpfVppLnR5cGVzPXZvaWQgMCxaaS5IRExSX1RZUEVTPXZvaWQgMCxaaS5TVFRTPXZvaWQgMCxaaS5TVFNDPXZvaWQgMCxaaS5TVENPPXZvaWQgMCxaaS5TVFNaPXZvaWQgMCxaaS5WTUhEPXZvaWQgMCxaaS5TTUhEPXZvaWQgMCxaaS5TVFNEPXZvaWQgMCxaaS5GVFlQPXZvaWQgMCxaaS5ESU5GPXZvaWQgMDt2YXIgdGE9bnVsbCxyYT1udWxsLGlhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixpKXtpZih0aGlzLm9ic2VydmVyPXZvaWQgMCx0aGlzLmNvbmZpZz12b2lkIDAsdGhpcy50eXBlU3VwcG9ydGVkPXZvaWQgMCx0aGlzLklTR2VuZXJhdGVkPSExLHRoaXMuX2luaXRQVFM9bnVsbCx0aGlzLl9pbml0RFRTPW51bGwsdGhpcy5uZXh0QXZjRHRzPW51bGwsdGhpcy5uZXh0QXVkaW9QdHM9bnVsbCx0aGlzLnZpZGVvU2FtcGxlRHVyYXRpb249bnVsbCx0aGlzLmlzQXVkaW9Db250aWd1b3VzPSExLHRoaXMuaXNWaWRlb0NvbnRpZ3VvdXM9ITEsdGhpcy52aWRlb1RyYWNrQ29uZmlnPXZvaWQgMCx0aGlzLm9ic2VydmVyPWUsdGhpcy5jb25maWc9dCx0aGlzLnR5cGVTdXBwb3J0ZWQ9cix0aGlzLklTR2VuZXJhdGVkPSExLG51bGw9PT10YSl7dmFyIGE9KG5hdmlnYXRvci51c2VyQWdlbnR8fCIiKS5tYXRjaCgvQ2hyb21lXC8oXGQrKS9pKTt0YT1hP3BhcnNlSW50KGFbMV0pOjB9aWYobnVsbD09PXJhKXt2YXIgbj1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9TYWZhcmlcLyhcZCspL2kpO3JhPW4/cGFyc2VJbnQoblsxXSk6MH19dmFyIHQ9ZS5wcm90b3R5cGU7cmV0dXJuIHQuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuY29uZmlnPXRoaXMudmlkZW9UcmFja0NvbmZpZz10aGlzLl9pbml0UFRTPXRoaXMuX2luaXREVFM9bnVsbH0sdC5yZXNldFRpbWVTdGFtcD1mdW5jdGlvbihlKXtELmxvZygiW21wNC1yZW11eGVyXTogaW5pdFBUUyAmIGluaXREVFMgcmVzZXQiKSx0aGlzLl9pbml0UFRTPXRoaXMuX2luaXREVFM9ZX0sdC5yZXNldE5leHRUaW1lc3RhbXA9ZnVuY3Rpb24oKXtELmxvZygiW21wNC1yZW11eGVyXTogcmVzZXQgbmV4dCB0aW1lc3RhbXAiKSx0aGlzLmlzVmlkZW9Db250aWd1b3VzPSExLHRoaXMuaXNBdWRpb0NvbnRpZ3VvdXM9ITF9LHQucmVzZXRJbml0U2VnbWVudD1mdW5jdGlvbigpe0QubG9nKCJbbXA0LXJlbXV4ZXJdOiBJU0dlbmVyYXRlZCBmbGFnIHJlc2V0IiksdGhpcy5JU0dlbmVyYXRlZD0hMSx0aGlzLnZpZGVvVHJhY2tDb25maWc9dm9pZCAwfSx0LmdldFZpZGVvU3RhcnRQdHM9ZnVuY3Rpb24oZSl7dmFyIHQ9ITEscj1lWzBdLnB0cyxpPWUucmVkdWNlKChmdW5jdGlvbihlLGkpe3ZhciBhPWkucHRzLG49YS1lO3JldHVybiBuPC00Mjk0OTY3Mjk2JiYodD0hMCxuPShhPWFhKGEscikpLWUpLG4+MD9lOmF9KSxyKTtyZXR1cm4gdCYmRC5kZWJ1ZygiUFRTIHJvbGxvdmVyIGRldGVjdGVkIiksaX0sdC5yZW11eD1mdW5jdGlvbihlLHQscixpLGEsbixzLG8pe3ZhciBsLHUsZCxoLGYsYyx2PWEsZz1hLG09ZS5waWQ+LTEscD10LnBpZD4tMSx5PXQuc2FtcGxlcy5sZW5ndGgsRT1lLnNhbXBsZXMubGVuZ3RoPjAsVD1zJiZ5PjB8fHk+MTtpZigoIW18fEUpJiYoIXB8fFQpfHx0aGlzLklTR2VuZXJhdGVkfHxzKXtpZih0aGlzLklTR2VuZXJhdGVkKXt2YXIgUyxMLFIsQSxiPXRoaXMudmlkZW9UcmFja0NvbmZpZzshYnx8dC53aWR0aD09PWIud2lkdGgmJnQuaGVpZ2h0PT09Yi5oZWlnaHQmJihudWxsPT0oUz10LnBpeGVsUmF0aW8pP3ZvaWQgMDpTWzBdKT09PShudWxsPT0oTD1iLnBpeGVsUmF0aW8pP3ZvaWQgMDpMWzBdKSYmKG51bGw9PShSPXQucGl4ZWxSYXRpbyk/dm9pZCAwOlJbMV0pPT09KG51bGw9PShBPWIucGl4ZWxSYXRpbyk/dm9pZCAwOkFbMV0pfHx0aGlzLnJlc2V0SW5pdFNlZ21lbnQoKX1lbHNlIGQ9dGhpcy5nZW5lcmF0ZUlTKGUsdCxhLG4pO3ZhciBrLF89dGhpcy5pc1ZpZGVvQ29udGlndW91cyx4PS0xO2lmKFQmJih4PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKWlmKGVbdF0ua2V5KXJldHVybiB0O3JldHVybi0xfSh0LnNhbXBsZXMpLCFfJiZ0aGlzLmNvbmZpZy5mb3JjZUtleUZyYW1lT25EaXNjb250aW51aXR5KSlpZihjPSEwLHg+MCl7RC53YXJuKCJbbXA0LXJlbXV4ZXJdOiBEcm9wcGVkICIreCsiIG91dCBvZiAiK3krIiB2aWRlbyBzYW1wbGVzIGR1ZSB0byBhIG1pc3Npbmcga2V5ZnJhbWUiKTt2YXIgdz10aGlzLmdldFZpZGVvU3RhcnRQdHModC5zYW1wbGVzKTt0LnNhbXBsZXM9dC5zYW1wbGVzLnNsaWNlKHgpLHQuZHJvcHBlZCs9eCxrPWcrPSh0LnNhbXBsZXNbMF0ucHRzLXcpL3QuaW5wdXRUaW1lU2NhbGV9ZWxzZS0xPT09eCYmKEQud2FybigiW21wNC1yZW11eGVyXTogTm8ga2V5ZnJhbWUgZm91bmQgb3V0IG9mICIreSsiIHZpZGVvIHNhbXBsZXMiKSxjPSExKTtpZih0aGlzLklTR2VuZXJhdGVkKXtpZihFJiZUKXt2YXIgQz10aGlzLmdldFZpZGVvU3RhcnRQdHModC5zYW1wbGVzKSxJPShhYShlLnNhbXBsZXNbMF0ucHRzLEMpLUMpL3QuaW5wdXRUaW1lU2NhbGU7dis9TWF0aC5tYXgoMCxJKSxnKz1NYXRoLm1heCgwLC1JKX1pZihFKXtpZihlLnNhbXBsZXJhdGV8fChELndhcm4oIlttcDQtcmVtdXhlcl06IHJlZ2VuZXJhdGUgSW5pdFNlZ21lbnQgYXMgYXVkaW8gZGV0ZWN0ZWQiKSxkPXRoaXMuZ2VuZXJhdGVJUyhlLHQsYSxuKSksdT10aGlzLnJlbXV4QXVkaW8oZSx2LHRoaXMuaXNBdWRpb0NvbnRpZ3VvdXMsbixwfHxUfHxvPT09c3Q/Zzp2b2lkIDApLFQpe3ZhciBQPXU/dS5lbmRQVFMtdS5zdGFydFBUUzowO3QuaW5wdXRUaW1lU2NhbGV8fChELndhcm4oIlttcDQtcmVtdXhlcl06IHJlZ2VuZXJhdGUgSW5pdFNlZ21lbnQgYXMgdmlkZW8gZGV0ZWN0ZWQiKSxkPXRoaXMuZ2VuZXJhdGVJUyhlLHQsYSxuKSksbD10aGlzLnJlbXV4VmlkZW8odCxnLF8sUCl9fWVsc2UgVCYmKGw9dGhpcy5yZW11eFZpZGVvKHQsZyxfLDApKTtsJiYobC5maXJzdEtleUZyYW1lPXgsbC5pbmRlcGVuZGVudD0tMSE9PXgsbC5maXJzdEtleUZyYW1lUFRTPWspfX1yZXR1cm4gdGhpcy5JU0dlbmVyYXRlZCYmdGhpcy5faW5pdFBUUyYmdGhpcy5faW5pdERUUyYmKHIuc2FtcGxlcy5sZW5ndGgmJihmPW5hKHIsYSx0aGlzLl9pbml0UFRTLHRoaXMuX2luaXREVFMpKSxpLnNhbXBsZXMubGVuZ3RoJiYoaD1zYShpLGEsdGhpcy5faW5pdFBUUykpKSx7YXVkaW86dSx2aWRlbzpsLGluaXRTZWdtZW50OmQsaW5kZXBlbmRlbnQ6Yyx0ZXh0OmgsaWQzOmZ9fSx0LmdlbmVyYXRlSVM9ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIGEsbixzLG89ZS5zYW1wbGVzLGw9dC5zYW1wbGVzLHU9dGhpcy50eXBlU3VwcG9ydGVkLGQ9e30saD10aGlzLl9pbml0UFRTLGY9IWh8fGksYz0iYXVkaW8vbXA0IjtpZihmJiYoYT1uPTEvMCksZS5jb25maWcmJm8ubGVuZ3RoKXtzd2l0Y2goZS50aW1lc2NhbGU9ZS5zYW1wbGVyYXRlLGUuc2VnbWVudENvZGVjKXtjYXNlIm1wMyI6dS5tcGVnPyhjPSJhdWRpby9tcGVnIixlLmNvZGVjPSIiKTp1Lm1wMyYmKGUuY29kZWM9Im1wMyIpO2JyZWFrO2Nhc2UiYWMzIjplLmNvZGVjPSJhYy0zIn1kLmF1ZGlvPXtpZDoiYXVkaW8iLGNvbnRhaW5lcjpjLGNvZGVjOmUuY29kZWMsaW5pdFNlZ21lbnQ6Im1wMyI9PT1lLnNlZ21lbnRDb2RlYyYmdS5tcGVnP25ldyBVaW50OEFycmF5KDApOlppLmluaXRTZWdtZW50KFtlXSksbWV0YWRhdGE6e2NoYW5uZWxDb3VudDplLmNoYW5uZWxDb3VudH19LGYmJihzPWUuaW5wdXRUaW1lU2NhbGUsaCYmcz09PWgudGltZXNjYWxlP2Y9ITE6YT1uPW9bMF0ucHRzLU1hdGgucm91bmQocypyKSl9aWYodC5zcHMmJnQucHBzJiZsLmxlbmd0aCl7aWYodC50aW1lc2NhbGU9dC5pbnB1dFRpbWVTY2FsZSxkLnZpZGVvPXtpZDoibWFpbiIsY29udGFpbmVyOiJ2aWRlby9tcDQiLGNvZGVjOnQuY29kZWMsaW5pdFNlZ21lbnQ6WmkuaW5pdFNlZ21lbnQoW3RdKSxtZXRhZGF0YTp7d2lkdGg6dC53aWR0aCxoZWlnaHQ6dC5oZWlnaHR9fSxmKWlmKHM9dC5pbnB1dFRpbWVTY2FsZSxoJiZzPT09aC50aW1lc2NhbGUpZj0hMTtlbHNle3ZhciB2PXRoaXMuZ2V0VmlkZW9TdGFydFB0cyhsKSxnPU1hdGgucm91bmQocypyKTtuPU1hdGgubWluKG4sYWEobFswXS5kdHMsdiktZyksYT1NYXRoLm1pbihhLHYtZyl9dGhpcy52aWRlb1RyYWNrQ29uZmlnPXt3aWR0aDp0LndpZHRoLGhlaWdodDp0LmhlaWdodCxwaXhlbFJhdGlvOnQucGl4ZWxSYXRpb319aWYoT2JqZWN0LmtleXMoZCkubGVuZ3RoKXJldHVybiB0aGlzLklTR2VuZXJhdGVkPSEwLGY/KHRoaXMuX2luaXRQVFM9e2Jhc2VUaW1lOmEsdGltZXNjYWxlOnN9LHRoaXMuX2luaXREVFM9e2Jhc2VUaW1lOm4sdGltZXNjYWxlOnN9KTphPXM9dm9pZCAwLHt0cmFja3M6ZCxpbml0UFRTOmEsdGltZXNjYWxlOnN9fSx0LnJlbXV4VmlkZW89ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIGEsbixzPWUuaW5wdXRUaW1lU2NhbGUsbD1lLnNhbXBsZXMsdT1bXSxkPWwubGVuZ3RoLGg9dGhpcy5faW5pdFBUUyxmPXRoaXMubmV4dEF2Y0R0cyxjPTgsdj10aGlzLnZpZGVvU2FtcGxlRHVyYXRpb24sZz1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbT1OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkscD0hMTtpZighcnx8bnVsbD09PWYpe3ZhciB5PXQqcyxMPWxbMF0ucHRzLWFhKGxbMF0uZHRzLGxbMF0ucHRzKTt0YSYmbnVsbCE9PWYmJk1hdGguYWJzKHktTC1mKTwxNWUzP3I9ITA6Zj15LUx9Zm9yKHZhciBSPWguYmFzZVRpbWUqcy9oLnRpbWVzY2FsZSxBPTA7QTxkO0ErKyl7dmFyIGI9bFtBXTtiLnB0cz1hYShiLnB0cy1SLGYpLGIuZHRzPWFhKGIuZHRzLVIsZiksYi5kdHM8bFtBPjA/QS0xOkFdLmR0cyYmKHA9ITApfXAmJmwuc29ydCgoZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmR0cy10LmR0cyxpPWUucHRzLXQucHRzO3JldHVybiByfHxpfSkpLGE9bFswXS5kdHM7dmFyIGs9KG49bFtsLmxlbmd0aC0xXS5kdHMpLWEsXz1rP01hdGgucm91bmQoay8oZC0xKSk6dnx8ZS5pbnB1dFRpbWVTY2FsZS8zMDtpZihyKXt2YXIgeD1hLWYsdz14Pl8sQz14PC0xO2lmKCh3fHxDKSYmKHc/RC53YXJuKCJBVkM6ICIrZWEoeCwhMCkrIiBtcyAoIit4KyJkdHMpIGhvbGUgYmV0d2VlbiBmcmFnbWVudHMgZGV0ZWN0ZWQgYXQgIit0LnRvRml4ZWQoMykpOkQud2FybigiQVZDOiAiK2VhKC14LCEwKSsiIG1zICgiK3grImR0cykgb3ZlcmxhcHBpbmcgYmV0d2VlbiBmcmFnbWVudHMgZGV0ZWN0ZWQgYXQgIit0LnRvRml4ZWQoMykpLCFDfHxmPj1sWzBdLnB0c3x8dGEpKXthPWY7dmFyIEk9bFswXS5wdHMteDtpZih3KWxbMF0uZHRzPWEsbFswXS5wdHM9STtlbHNlIGZvcih2YXIgUD0wO1A8bC5sZW5ndGgmJiEobFtQXS5kdHM+SSk7UCsrKWxbUF0uZHRzLT14LGxbUF0ucHRzLT14O0QubG9nKCJWaWRlbzogSW5pdGlhbCBQVFMvRFRTIGFkanVzdGVkOiAiK2VhKEksITApKyIvIitlYShhLCEwKSsiLCBkZWx0YTogIitlYSh4LCEwKSsiIG1zIil9fWZvcih2YXIgRj0wLE89MCxNPWE9TWF0aC5tYXgoMCxhKSxOPTA7TjxkO04rKyl7Zm9yKHZhciBCPWxbTl0sVT1CLnVuaXRzLEc9VS5sZW5ndGgsSD0wLFY9MDtWPEc7VisrKUgrPVVbVl0uZGF0YS5sZW5ndGg7Tys9SCxGKz1HLEIubGVuZ3RoPUgsQi5kdHM8TT8oQi5kdHM9TSxNKz1fLzR8MHx8MSk6TT1CLmR0cyxnPU1hdGgubWluKEIucHRzLGcpLG09TWF0aC5tYXgoQi5wdHMsbSl9bj1sW2QtMV0uZHRzO3ZhciBLLFc9Tys0KkYrODt0cnl7Sz1uZXcgVWludDhBcnJheShXKX1jYXRjaChlKXtyZXR1cm4gdm9pZCB0aGlzLm9ic2VydmVyLmVtaXQoRS5FUlJPUixFLkVSUk9SLHt0eXBlOlQuTVVYX0VSUk9SLGRldGFpbHM6Uy5SRU1VWF9BTExPQ19FUlJPUixmYXRhbDohMSxlcnJvcjplLGJ5dGVzOlcscmVhc29uOiJmYWlsIGFsbG9jYXRpbmcgdmlkZW8gbWRhdCAiK1d9KX12YXIgaj1uZXcgRGF0YVZpZXcoSy5idWZmZXIpO2ouc2V0VWludDMyKDAsVyksSy5zZXQoWmkudHlwZXMubWRhdCw0KTtmb3IodmFyIFk9ITEscT1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksej1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksWD1OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksUT1OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksSj0wO0o8ZDtKKyspe2Zvcih2YXIgJD1sW0pdLFo9JC51bml0cyxlZT0wLHRlPTAscmU9Wi5sZW5ndGg7dGU8cmU7dGUrKyl7dmFyIGllPVpbdGVdLGFlPWllLmRhdGEsbmU9aWUuZGF0YS5ieXRlTGVuZ3RoO2ouc2V0VWludDMyKGMsbmUpLGMrPTQsSy5zZXQoYWUsYyksYys9bmUsZWUrPTQrbmV9dmFyIHNlPXZvaWQgMDtpZihKPGQtMSl2PWxbSisxXS5kdHMtJC5kdHMsc2U9bFtKKzFdLnB0cy0kLnB0cztlbHNle3ZhciBvZT10aGlzLmNvbmZpZyxsZT1KPjA/JC5kdHMtbFtKLTFdLmR0czpfO2lmKHNlPUo+MD8kLnB0cy1sW0otMV0ucHRzOl8sb2Uuc3RyZXRjaFNob3J0VmlkZW9UcmFjayYmbnVsbCE9PXRoaXMubmV4dEF1ZGlvUHRzKXt2YXIgdWU9TWF0aC5mbG9vcihvZS5tYXhCdWZmZXJIb2xlKnMpLGRlPShpP2craSpzOnRoaXMubmV4dEF1ZGlvUHRzKS0kLnB0cztkZT51ZT8oKHY9ZGUtbGUpPDA/dj1sZTpZPSEwLEQubG9nKCJbbXA0LXJlbXV4ZXJdOiBJdCBpcyBhcHByb3hpbWF0ZWx5ICIrZGUvOTArIiBtcyB0byB0aGUgbmV4dCBzZWdtZW50OyB1c2luZyBkdXJhdGlvbiAiK3YvOTArIiBtcyBmb3IgdGhlIGxhc3QgdmlkZW8gZnJhbWUuIikpOnY9bGV9ZWxzZSB2PWxlfXZhciBoZT1NYXRoLnJvdW5kKCQucHRzLSQuZHRzKTtxPU1hdGgubWluKHEsdiksWD1NYXRoLm1heChYLHYpLHo9TWF0aC5taW4oeixzZSksUT1NYXRoLm1heChRLHNlKSx1LnB1c2gobmV3IG9hKCQua2V5LHYsZWUsaGUpKX1pZih1Lmxlbmd0aClpZih0YSl7aWYodGE8NzApe3ZhciBmZT11WzBdLmZsYWdzO2ZlLmRlcGVuZHNPbj0yLGZlLmlzTm9uU3luYz0wfX1lbHNlIGlmKHJhJiZRLXo8WC1xJiZfL1g8LjAyNSYmMD09PXVbMF0uY3RzKXtELndhcm4oIkZvdW5kIGlycmVndWxhciBnYXBzIGluIHNhbXBsZSBkdXJhdGlvbi4gVXNpbmcgUFRTIGluc3RlYWQgb2YgRFRTIHRvIGRldGVybWluZSBNUDQgc2FtcGxlIGR1cmF0aW9uLiIpO2Zvcih2YXIgY2U9YSx2ZT0wLGdlPXUubGVuZ3RoO3ZlPGdlO3ZlKyspe3ZhciBtZT1jZSt1W3ZlXS5kdXJhdGlvbixwZT1jZSt1W3ZlXS5jdHM7aWYodmU8Z2UtMSl7dmFyIHllPW1lK3VbdmUrMV0uY3RzO3VbdmVdLmR1cmF0aW9uPXllLXBlfWVsc2UgdVt2ZV0uZHVyYXRpb249dmU/dVt2ZS0xXS5kdXJhdGlvbjpfO3VbdmVdLmN0cz0wLGNlPW1lfX12PVl8fCF2P186dix0aGlzLm5leHRBdmNEdHM9Zj1uK3YsdGhpcy52aWRlb1NhbXBsZUR1cmF0aW9uPXYsdGhpcy5pc1ZpZGVvQ29udGlndW91cz0hMDt2YXIgRWU9e2RhdGExOlppLm1vb2YoZS5zZXF1ZW5jZU51bWJlcisrLGEsbyh7fSxlLHtzYW1wbGVzOnV9KSksZGF0YTI6SyxzdGFydFBUUzpnL3MsZW5kUFRTOihtK3YpL3Msc3RhcnREVFM6YS9zLGVuZERUUzpmL3MsdHlwZToidmlkZW8iLGhhc0F1ZGlvOiExLGhhc1ZpZGVvOiEwLG5iOnUubGVuZ3RoLGRyb3BwZWQ6ZS5kcm9wcGVkfTtyZXR1cm4gZS5zYW1wbGVzPVtdLGUuZHJvcHBlZD0wLEVlfSx0LmdldFNhbXBsZXNQZXJGcmFtZT1mdW5jdGlvbihlKXtzd2l0Y2goZS5zZWdtZW50Q29kZWMpe2Nhc2UibXAzIjpyZXR1cm4gMTE1MjtjYXNlImFjMyI6cmV0dXJuIDE1MzY7ZGVmYXVsdDpyZXR1cm4gMTAyNH19LHQucmVtdXhBdWRpbz1mdW5jdGlvbihlLHQscixpLGEpe3ZhciBuPWUuaW5wdXRUaW1lU2NhbGUscz1uLyhlLnNhbXBsZXJhdGU/ZS5zYW1wbGVyYXRlOm4pLGw9dGhpcy5nZXRTYW1wbGVzUGVyRnJhbWUoZSksdT1sKnMsZD10aGlzLl9pbml0UFRTLGg9Im1wMyI9PT1lLnNlZ21lbnRDb2RlYyYmdGhpcy50eXBlU3VwcG9ydGVkLm1wZWcsZj1bXSxjPXZvaWQgMCE9PWEsdj1lLnNhbXBsZXMsZz1oPzA6OCxtPXRoaXMubmV4dEF1ZGlvUHRzfHwtMSxwPXQqbix5PWQuYmFzZVRpbWUqbi9kLnRpbWVzY2FsZTtpZih0aGlzLmlzQXVkaW9Db250aWd1b3VzPXI9cnx8di5sZW5ndGgmJm0+MCYmKGkmJk1hdGguYWJzKHAtbSk8OWUzfHxNYXRoLmFicyhhYSh2WzBdLnB0cy15LHApLW0pPDIwKnUpLHYuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5wdHM9YWEoZS5wdHMteSxwKX0pKSwhcnx8bTwwKXtpZih2PXYuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZS5wdHM+PTB9KSksIXYubGVuZ3RoKXJldHVybjttPTA9PT1hPzA6aSYmIWM/TWF0aC5tYXgoMCxwKTp2WzBdLnB0c31pZigiYWFjIj09PWUuc2VnbWVudENvZGVjKWZvcih2YXIgTD10aGlzLmNvbmZpZy5tYXhBdWRpb0ZyYW1lc0RyaWZ0LFI9MCxBPW07Ujx2Lmxlbmd0aDtSKyspe3ZhciBiPXZbUl0saz1iLnB0cyxfPWstQSx4PU1hdGguYWJzKDFlMypfL24pO2lmKF88PS1MKnUmJmMpMD09PVImJihELndhcm4oIkF1ZGlvIGZyYW1lIEAgIisoay9uKS50b0ZpeGVkKDMpKyJzIG92ZXJsYXBzIG5leHRBdWRpb1B0cyBieSAiK01hdGgucm91bmQoMWUzKl8vbikrIiBtcy4iKSx0aGlzLm5leHRBdWRpb1B0cz1tPUE9ayk7ZWxzZSBpZihfPj1MKnUmJng8MWU0JiZjKXt2YXIgdz1NYXRoLnJvdW5kKF8vdSk7KEE9ay13KnUpPDAmJih3LS0sQSs9dSksMD09PVImJih0aGlzLm5leHRBdWRpb1B0cz1tPUEpLEQud2FybigiW21wNC1yZW11eGVyXTogSW5qZWN0aW5nICIrdysiIGF1ZGlvIGZyYW1lIEAgIisoQS9uKS50b0ZpeGVkKDMpKyJzIGR1ZSB0byAiK01hdGgucm91bmQoMWUzKl8vbikrIiBtcyBnYXAuIik7Zm9yKHZhciBDPTA7Qzx3O0MrKyl7dmFyIEk9TWF0aC5tYXgoQSwwKSxQPUppLmdldFNpbGVudEZyYW1lKGUubWFuaWZlc3RDb2RlY3x8ZS5jb2RlYyxlLmNoYW5uZWxDb3VudCk7UHx8KEQubG9nKCJbbXA0LXJlbXV4ZXJdOiBVbmFibGUgdG8gZ2V0IHNpbGVudCBmcmFtZSBmb3IgZ2l2ZW4gYXVkaW8gY29kZWM7IGR1cGxpY2F0aW5nIGxhc3QgZnJhbWUgaW5zdGVhZC4iKSxQPWIudW5pdC5zdWJhcnJheSgpKSx2LnNwbGljZShSLDAse3VuaXQ6UCxwdHM6SX0pLEErPXUsUisrfX1iLnB0cz1BLEErPXV9Zm9yKHZhciBGLE89bnVsbCxNPW51bGwsTj0wLEI9di5sZW5ndGg7Qi0tOylOKz12W0JdLnVuaXQuYnl0ZUxlbmd0aDtmb3IodmFyIFU9MCxHPXYubGVuZ3RoO1U8RztVKyspe3ZhciBIPXZbVV0sVj1ILnVuaXQsSz1ILnB0cztpZihudWxsIT09TSlmW1UtMV0uZHVyYXRpb249TWF0aC5yb3VuZCgoSy1NKS9zKTtlbHNle2lmKHImJiJhYWMiPT09ZS5zZWdtZW50Q29kZWMmJihLPW0pLE89SywhKE4+MCkpcmV0dXJuO04rPWc7dHJ5e0Y9bmV3IFVpbnQ4QXJyYXkoTil9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgdGhpcy5vYnNlcnZlci5lbWl0KEUuRVJST1IsRS5FUlJPUix7dHlwZTpULk1VWF9FUlJPUixkZXRhaWxzOlMuUkVNVVhfQUxMT0NfRVJST1IsZmF0YWw6ITEsZXJyb3I6ZSxieXRlczpOLHJlYXNvbjoiZmFpbCBhbGxvY2F0aW5nIGF1ZGlvIG1kYXQgIitOfSl9aHx8KG5ldyBEYXRhVmlldyhGLmJ1ZmZlcikuc2V0VWludDMyKDAsTiksRi5zZXQoWmkudHlwZXMubWRhdCw0KSl9Ri5zZXQoVixnKTt2YXIgVz1WLmJ5dGVMZW5ndGg7Zys9VyxmLnB1c2gobmV3IG9hKCEwLGwsVywwKSksTT1LfXZhciBqPWYubGVuZ3RoO2lmKGope3ZhciBZPWZbZi5sZW5ndGgtMV07dGhpcy5uZXh0QXVkaW9QdHM9bT1NK3MqWS5kdXJhdGlvbjt2YXIgcT1oP25ldyBVaW50OEFycmF5KDApOlppLm1vb2YoZS5zZXF1ZW5jZU51bWJlcisrLE8vcyxvKHt9LGUse3NhbXBsZXM6Zn0pKTtlLnNhbXBsZXM9W107dmFyIHo9Ty9uLFg9bS9uLFE9e2RhdGExOnEsZGF0YTI6RixzdGFydFBUUzp6LGVuZFBUUzpYLHN0YXJ0RFRTOnosZW5kRFRTOlgsdHlwZToiYXVkaW8iLGhhc0F1ZGlvOiEwLGhhc1ZpZGVvOiExLG5iOmp9O3JldHVybiB0aGlzLmlzQXVkaW9Db250aWd1b3VzPSEwLFF9fSx0LnJlbXV4RW1wdHlBdWRpbz1mdW5jdGlvbihlLHQscixpKXt2YXIgYT1lLmlucHV0VGltZVNjYWxlLG49YS8oZS5zYW1wbGVyYXRlP2Uuc2FtcGxlcmF0ZTphKSxzPXRoaXMubmV4dEF1ZGlvUHRzLG89dGhpcy5faW5pdERUUyxsPTllNCpvLmJhc2VUaW1lL28udGltZXNjYWxlLHU9KG51bGwhPT1zP3M6aS5zdGFydERUUyphKStsLGQ9aS5lbmREVFMqYStsLGg9MTAyNCpuLGY9TWF0aC5jZWlsKChkLXUpL2gpLGM9SmkuZ2V0U2lsZW50RnJhbWUoZS5tYW5pZmVzdENvZGVjfHxlLmNvZGVjLGUuY2hhbm5lbENvdW50KTtpZihELndhcm4oIlttcDQtcmVtdXhlcl06IHJlbXV4IGVtcHR5IEF1ZGlvIiksYyl7Zm9yKHZhciB2PVtdLGc9MDtnPGY7ZysrKXt2YXIgbT11K2cqaDt2LnB1c2goe3VuaXQ6YyxwdHM6bSxkdHM6bX0pfXJldHVybiBlLnNhbXBsZXM9dix0aGlzLnJlbXV4QXVkaW8oZSx0LHIsITEpfUQudHJhY2UoIlttcDQtcmVtdXhlcl06IFVuYWJsZSB0byByZW11eEVtcHR5QXVkaW8gc2luY2Ugd2Ugd2VyZSB1bmFibGUgdG8gZ2V0IGEgc2lsZW50IGZyYW1lIGZvciBnaXZlbiBhdWRpbyBjb2RlYyIpfSxlfSgpO2Z1bmN0aW9uIGFhKGUsdCl7dmFyIHI7aWYobnVsbD09PXQpcmV0dXJuIGU7Zm9yKHI9dDxlPy04NTg5OTM0NTkyOjg1ODk5MzQ1OTI7TWF0aC5hYnMoZS10KT40Mjk0OTY3Mjk2OyllKz1yO3JldHVybiBlfWZ1bmN0aW9uIG5hKGUsdCxyLGkpe3ZhciBhPWUuc2FtcGxlcy5sZW5ndGg7aWYoYSl7Zm9yKHZhciBuPWUuaW5wdXRUaW1lU2NhbGUscz0wO3M8YTtzKyspe3ZhciBvPWUuc2FtcGxlc1tzXTtvLnB0cz1hYShvLnB0cy1yLmJhc2VUaW1lKm4vci50aW1lc2NhbGUsdCpuKS9uLG8uZHRzPWFhKG8uZHRzLWkuYmFzZVRpbWUqbi9pLnRpbWVzY2FsZSx0Km4pL259dmFyIGw9ZS5zYW1wbGVzO3JldHVybiBlLnNhbXBsZXM9W10se3NhbXBsZXM6bH19fWZ1bmN0aW9uIHNhKGUsdCxyKXt2YXIgaT1lLnNhbXBsZXMubGVuZ3RoO2lmKGkpe2Zvcih2YXIgYT1lLmlucHV0VGltZVNjYWxlLG49MDtuPGk7bisrKXt2YXIgcz1lLnNhbXBsZXNbbl07cy5wdHM9YWEocy5wdHMtci5iYXNlVGltZSphL3IudGltZXNjYWxlLHQqYSkvYX1lLnNhbXBsZXMuc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5wdHMtdC5wdHN9KSk7dmFyIG89ZS5zYW1wbGVzO3JldHVybiBlLnNhbXBsZXM9W10se3NhbXBsZXM6b319fXZhciBvYT1mdW5jdGlvbihlLHQscixpKXt0aGlzLnNpemU9dm9pZCAwLHRoaXMuZHVyYXRpb249dm9pZCAwLHRoaXMuY3RzPXZvaWQgMCx0aGlzLmZsYWdzPXZvaWQgMCx0aGlzLmR1cmF0aW9uPXQsdGhpcy5zaXplPXIsdGhpcy5jdHM9aSx0aGlzLmZsYWdzPXtpc0xlYWRpbmc6MCxpc0RlcGVuZGVkT246MCxoYXNSZWR1bmRhbmN5OjAsZGVncmFkUHJpbzowLGRlcGVuZHNPbjplPzI6MSxpc05vblN5bmM6ZT8wOjF9fSxsYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmVtaXRJbml0U2VnbWVudD0hMSx0aGlzLmF1ZGlvQ29kZWM9dm9pZCAwLHRoaXMudmlkZW9Db2RlYz12b2lkIDAsdGhpcy5pbml0RGF0YT12b2lkIDAsdGhpcy5pbml0UFRTPW51bGwsdGhpcy5pbml0VHJhY2tzPXZvaWQgMCx0aGlzLmxhc3RFbmRUaW1lPW51bGx9dmFyIHQ9ZS5wcm90b3R5cGU7cmV0dXJuIHQuZGVzdHJveT1mdW5jdGlvbigpe30sdC5yZXNldFRpbWVTdGFtcD1mdW5jdGlvbihlKXt0aGlzLmluaXRQVFM9ZSx0aGlzLmxhc3RFbmRUaW1lPW51bGx9LHQucmVzZXROZXh0VGltZXN0YW1wPWZ1bmN0aW9uKCl7dGhpcy5sYXN0RW5kVGltZT1udWxsfSx0LnJlc2V0SW5pdFNlZ21lbnQ9ZnVuY3Rpb24oZSx0LHIsaSl7dGhpcy5hdWRpb0NvZGVjPXQsdGhpcy52aWRlb0NvZGVjPXIsdGhpcy5nZW5lcmF0ZUluaXRTZWdtZW50KFJlKGUsaSkpLHRoaXMuZW1pdEluaXRTZWdtZW50PSEwfSx0LmdlbmVyYXRlSW5pdFNlZ21lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5hdWRpb0NvZGVjLHI9dGhpcy52aWRlb0NvZGVjO2lmKG51bGw9PWV8fCFlLmJ5dGVMZW5ndGgpcmV0dXJuIHRoaXMuaW5pdFRyYWNrcz12b2lkIDAsdm9pZCh0aGlzLmluaXREYXRhPXZvaWQgMCk7dmFyIGk9dGhpcy5pbml0RGF0YT15ZShlKTtpLmF1ZGlvJiYodD11YShpLmF1ZGlvLEYpKSxpLnZpZGVvJiYocj11YShpLnZpZGVvLE8pKTt2YXIgYT17fTtpLmF1ZGlvJiZpLnZpZGVvP2EuYXVkaW92aWRlbz17Y29udGFpbmVyOiJ2aWRlby9tcDQiLGNvZGVjOnQrIiwiK3IsaW5pdFNlZ21lbnQ6ZSxpZDoibWFpbiJ9OmkuYXVkaW8/YS5hdWRpbz17Y29udGFpbmVyOiJhdWRpby9tcDQiLGNvZGVjOnQsaW5pdFNlZ21lbnQ6ZSxpZDoiYXVkaW8ifTppLnZpZGVvP2EudmlkZW89e2NvbnRhaW5lcjoidmlkZW8vbXA0Iixjb2RlYzpyLGluaXRTZWdtZW50OmUsaWQ6Im1haW4ifTpELndhcm4oIltwYXNzdGhyb3VnaC1yZW11eGVyLnRzXTogaW5pdFNlZ21lbnQgZG9lcyBub3QgY29udGFpbiBtb292IG9yIHRyYWsgYm94ZXMuIiksdGhpcy5pbml0VHJhY2tzPWF9LHQucmVtdXg9ZnVuY3Rpb24oZSx0LHIsaSxhLG4pe3ZhciBzLG8sbD10aGlzLmluaXRQVFMsdT10aGlzLmxhc3RFbmRUaW1lLGQ9e2F1ZGlvOnZvaWQgMCx2aWRlbzp2b2lkIDAsdGV4dDppLGlkMzpyLGluaXRTZWdtZW50OnZvaWQgMH07bSh1KXx8KHU9dGhpcy5sYXN0RW5kVGltZT1hfHwwKTt2YXIgaD10LnNhbXBsZXM7aWYobnVsbD09aHx8IWgubGVuZ3RoKXJldHVybiBkO3ZhciBmPXtpbml0UFRTOnZvaWQgMCx0aW1lc2NhbGU6MX0sYz10aGlzLmluaXREYXRhO2lmKG51bGwhPShzPWMpJiZzLmxlbmd0aHx8KHRoaXMuZ2VuZXJhdGVJbml0U2VnbWVudChoKSxjPXRoaXMuaW5pdERhdGEpLG51bGw9PShvPWMpfHwhby5sZW5ndGgpcmV0dXJuIEQud2FybigiW3Bhc3N0aHJvdWdoLXJlbXV4ZXIudHNdOiBGYWlsZWQgdG8gZ2VuZXJhdGUgaW5pdFNlZ21lbnQuIiksZDt0aGlzLmVtaXRJbml0U2VnbWVudCYmKGYudHJhY2tzPXRoaXMuaW5pdFRyYWNrcyx0aGlzLmVtaXRJbml0U2VnbWVudD0hMSk7dmFyIHY9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9MCxpPTAsYT0wLG49bWUoZSxbIm1vb2YiLCJ0cmFmIl0pLHM9MDtzPG4ubGVuZ3RoO3MrKyl7dmFyIG89bltzXSxsPW1lKG8sWyJ0ZmhkIl0pWzBdLHU9dFtmZShsLDQpXTtpZih1KXt2YXIgZD11LmRlZmF1bHQsaD1mZShsLDApfChudWxsPT1kP3ZvaWQgMDpkLmZsYWdzKSxmPW51bGw9PWQ/dm9pZCAwOmQuZHVyYXRpb247OCZoJiYoZj1mZShsLDImaD8xMjo4KSk7Zm9yKHZhciBjPXUudGltZXNjYWxlfHw5ZTQsdj1tZShvLFsidHJ1biJdKSxnPTA7Zzx2Lmxlbmd0aDtnKyspIShyPUFlKHZbZ10pKSYmZiYmKHI9ZipmZSh2W2ddLDQpKSx1LnR5cGU9PT1PP2krPXIvYzp1LnR5cGU9PT1GJiYoYSs9ci9jKX19aWYoMD09PWkmJjA9PT1hKXtmb3IodmFyIHA9MS8wLHk9MCxFPTAsVD1tZShlLFsic2lkeCJdKSxTPTA7UzxULmxlbmd0aDtTKyspe3ZhciBMPXBlKFRbU10pO2lmKG51bGwhPUwmJkwucmVmZXJlbmNlcyl7cD1NYXRoLm1pbihwLEwuZWFybGllc3RQcmVzZW50YXRpb25UaW1lL0wudGltZXNjYWxlKTt2YXIgUj1MLnJlZmVyZW5jZXMucmVkdWNlKChmdW5jdGlvbihlLHQpe3JldHVybiBlK3QuaW5mby5kdXJhdGlvbnx8MH0pLDApO0U9KHk9TWF0aC5tYXgoeSxSK0wuZWFybGllc3RQcmVzZW50YXRpb25UaW1lL0wudGltZXNjYWxlKSktcH19aWYoRSYmbShFKSlyZXR1cm4gRX1yZXR1cm4gaXx8YX0oaCxjKSxnPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG1lKHQsWyJtb29mIiwidHJhZiJdKS5yZWR1Y2UoKGZ1bmN0aW9uKHQscil7dmFyIGk9bWUocixbInRmZHQiXSlbMF0sYT1pWzBdLG49bWUocixbInRmaGQiXSkucmVkdWNlKChmdW5jdGlvbih0LHIpe3ZhciBuPWZlKHIsNCkscz1lW25dO2lmKHMpe3ZhciBvPWZlKGksNCk7aWYoMT09PWEpe2lmKG89PT1vZSlyZXR1cm4gRC53YXJuKCJbbXA0LWRlbXV4ZXJdOiBJZ25vcmluZyBhc3N1bWVkIGludmFsaWQgc2lnbmVkIDY0LWJpdCB0cmFjayBmcmFnbWVudCBkZWNvZGUgdGltZSIpLHQ7byo9b2UrMSxvKz1mZShpLDgpfXZhciBsPW8vKHMudGltZXNjYWxlfHw5ZTQpO2lmKG0obCkmJihudWxsPT09dHx8bDx0KSlyZXR1cm4gbH1yZXR1cm4gdH0pLG51bGwpO3JldHVybiBudWxsIT09biYmbShuKSYmKG51bGw9PT10fHxuPHQpP246dH0pLG51bGwpfShjLGgpLHA9bnVsbD09PWc/YTpnOyhmdW5jdGlvbihlLHQscixpKXtpZihudWxsPT09ZSlyZXR1cm4hMDt2YXIgYT1NYXRoLm1heChpLDEpLG49dC1lLmJhc2VUaW1lL2UudGltZXNjYWxlO3JldHVybiBNYXRoLmFicyhuLXIpPmF9KGwscCxhLHYpfHxmLnRpbWVzY2FsZSE9PWwudGltZXNjYWxlJiZuKSYmKGYuaW5pdFBUUz1wLWEsbCYmMT09PWwudGltZXNjYWxlJiZELndhcm4oIkFkanVzdGluZyBpbml0UFRTIGJ5ICIrKGYuaW5pdFBUUy1sLmJhc2VUaW1lKSksdGhpcy5pbml0UFRTPWw9e2Jhc2VUaW1lOmYuaW5pdFBUUyx0aW1lc2NhbGU6MX0pO3ZhciB5PWU/cC1sLmJhc2VUaW1lL2wudGltZXNjYWxlOnUsRT15K3Y7IWZ1bmN0aW9uKGUsdCxyKXttZSh0LFsibW9vZiIsInRyYWYiXSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7bWUodCxbInRmaGQiXSkuZm9yRWFjaCgoZnVuY3Rpb24oaSl7dmFyIGE9ZmUoaSw0KSxuPWVbYV07aWYobil7dmFyIHM9bi50aW1lc2NhbGV8fDllNDttZSh0LFsidGZkdCJdKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLGk9cipzO2lmKGkpe3ZhciBhPWZlKGUsNCk7aWYoMD09PXQpYS09aSxnZShlLDQsYT1NYXRoLm1heChhLDApKTtlbHNle2EqPU1hdGgucG93KDIsMzIpLGErPWZlKGUsOCksYS09aSxhPU1hdGgubWF4KGEsMCk7dmFyIG49TWF0aC5mbG9vcihhLyhvZSsxKSksbz1NYXRoLmZsb29yKGElKG9lKzEpKTtnZShlLDQsbiksZ2UoZSw4LG8pfX19KSl9fSkpfSkpfShjLGgsbC5iYXNlVGltZS9sLnRpbWVzY2FsZSksdj4wP3RoaXMubGFzdEVuZFRpbWU9RTooRC53YXJuKCJEdXJhdGlvbiBwYXJzZWQgZnJvbSBtcDQgc2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiB6ZXJvIiksdGhpcy5yZXNldE5leHRUaW1lc3RhbXAoKSk7dmFyIFQ9ISFjLmF1ZGlvLFM9ISFjLnZpZGVvLEw9IiI7VCYmKEwrPSJhdWRpbyIpLFMmJihMKz0idmlkZW8iKTt2YXIgUj17ZGF0YTE6aCxzdGFydFBUUzp5LHN0YXJ0RFRTOnksZW5kUFRTOkUsZW5kRFRTOkUsdHlwZTpMLGhhc0F1ZGlvOlQsaGFzVmlkZW86UyxuYjoxLGRyb3BwZWQ6MH07cmV0dXJuIGQuYXVkaW89ImF1ZGlvIj09PVIudHlwZT9SOnZvaWQgMCxkLnZpZGVvPSJhdWRpbyIhPT1SLnR5cGU/Ujp2b2lkIDAsZC5pbml0U2VnbWVudD1mLGQuaWQzPW5hKHIsYSxsLGwpLGkuc2FtcGxlcy5sZW5ndGgmJihkLnRleHQ9c2EoaSxhLGwpKSxkfSxlfSgpO2Z1bmN0aW9uIHVhKGUsdCl7dmFyIHI9bnVsbD09ZT92b2lkIDA6ZS5jb2RlYztpZihyJiZyLmxlbmd0aD40KXJldHVybiByO2lmKHQ9PT1GKXtpZigiZWMtMyI9PT1yfHwiYWMtMyI9PT1yfHwiYWxhYyI9PT1yKXJldHVybiByO2lmKCJmTGFDIj09PXJ8fCJPcHVzIj09PXIpcmV0dXJuIEdlKHIsITEpO3ZhciBpPSJtcDRhLjQwLjUiO3JldHVybiBELmluZm8oJ1BhcnNlZCBhdWRpbyBjb2RlYyAiJytyKyciIG9yIGF1ZGlvIG9iamVjdCB0eXBlIG5vdCBoYW5kbGVkLiBVc2luZyAiJytpKyciJyksaX1yZXR1cm4gRC53YXJuKCdVbmhhbmRsZWQgdmlkZW8gY29kZWMgIicrcisnIicpLCJodmMxIj09PXJ8fCJoZXYxIj09PXI/Imh2YzEuMS42LkwxMjAuOTAiOiJhdjAxIj09PXI/ImF2MDEuMC4wNE0uMDgiOiJhdmMxLjQyZTAxZSJ9dmFyIGRhLGhhPSJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnZvaWQgMDt0cnl7ZGE9c2VsZi5wZXJmb3JtYW5jZS5ub3cuYmluZChzZWxmLnBlcmZvcm1hbmNlKX1jYXRjaChlKXtELmRlYnVnKCJVbmFibGUgdG8gdXNlIFBlcmZvcm1hbmNlIEFQSSBvbiB0aGlzIGVudmlyb25tZW50IiksZGE9bnVsbD09aGE/dm9pZCAwOmhhLkRhdGUubm93fXZhciBmYT1be2RlbXV4Ok5pLHJlbXV4OmxhfSx7ZGVtdXg6S2kscmVtdXg6aWF9LHtkZW11eDpPaSxyZW11eDppYX0se2RlbXV4OlFpLHJlbXV4OmlhfV0sY2E9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLGksYSl7dGhpcy5hc3luYz0hMSx0aGlzLm9ic2VydmVyPXZvaWQgMCx0aGlzLnR5cGVTdXBwb3J0ZWQ9dm9pZCAwLHRoaXMuY29uZmlnPXZvaWQgMCx0aGlzLnZlbmRvcj12b2lkIDAsdGhpcy5pZD12b2lkIDAsdGhpcy5kZW11eGVyPXZvaWQgMCx0aGlzLnJlbXV4ZXI9dm9pZCAwLHRoaXMuZGVjcnlwdGVyPXZvaWQgMCx0aGlzLnByb2JlPXZvaWQgMCx0aGlzLmRlY3J5cHRpb25Qcm9taXNlPW51bGwsdGhpcy50cmFuc211eENvbmZpZz12b2lkIDAsdGhpcy5jdXJyZW50VHJhbnNtdXhTdGF0ZT12b2lkIDAsdGhpcy5vYnNlcnZlcj1lLHRoaXMudHlwZVN1cHBvcnRlZD10LHRoaXMuY29uZmlnPXIsdGhpcy52ZW5kb3I9aSx0aGlzLmlkPWF9dmFyIHQ9ZS5wcm90b3R5cGU7cmV0dXJuIHQuY29uZmlndXJlPWZ1bmN0aW9uKGUpe3RoaXMudHJhbnNtdXhDb25maWc9ZSx0aGlzLmRlY3J5cHRlciYmdGhpcy5kZWNyeXB0ZXIucmVzZXQoKX0sdC5wdXNoPWZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBhPXRoaXMsbj1yLnRyYW5zbXV4aW5nO24uZXhlY3V0ZVN0YXJ0PWRhKCk7dmFyIHM9bmV3IFVpbnQ4QXJyYXkoZSksbz10aGlzLmN1cnJlbnRUcmFuc211eFN0YXRlLGw9dGhpcy50cmFuc211eENvbmZpZztpJiYodGhpcy5jdXJyZW50VHJhbnNtdXhTdGF0ZT1pKTt2YXIgdT1pfHxvLGQ9dS5jb250aWd1b3VzLGg9dS5kaXNjb250aW51aXR5LGY9dS50cmFja1N3aXRjaCxjPXUuYWNjdXJhdGVUaW1lT2Zmc2V0LHY9dS50aW1lT2Zmc2V0LGc9dS5pbml0U2VnbWVudENoYW5nZSxtPWwuYXVkaW9Db2RlYyxwPWwudmlkZW9Db2RlYyx5PWwuZGVmYXVsdEluaXRQdHMsTD1sLmR1cmF0aW9uLFI9bC5pbml0U2VnbWVudERhdGEsQT1mdW5jdGlvbihlLHQpe3ZhciByPW51bGw7cmV0dXJuIGUuYnl0ZUxlbmd0aD4wJiZudWxsIT0obnVsbD09dD92b2lkIDA6dC5rZXkpJiZudWxsIT09dC5pdiYmbnVsbCE9dC5tZXRob2QmJihyPXQpLHJ9KHMsdCk7aWYoQSYmIkFFUy0xMjgiPT09QS5tZXRob2Qpe3ZhciBiPXRoaXMuZ2V0RGVjcnlwdGVyKCk7aWYoIWIuaXNTeW5jKCkpcmV0dXJuIHRoaXMuZGVjcnlwdGlvblByb21pc2U9Yi53ZWJDcnlwdG9EZWNyeXB0KHMsQS5rZXkuYnVmZmVyLEEuaXYuYnVmZmVyKS50aGVuKChmdW5jdGlvbihlKXt2YXIgdD1hLnB1c2goZSxudWxsLHIpO3JldHVybiBhLmRlY3J5cHRpb25Qcm9taXNlPW51bGwsdH0pKSx0aGlzLmRlY3J5cHRpb25Qcm9taXNlO3ZhciBrPWIuc29mdHdhcmVEZWNyeXB0KHMsQS5rZXkuYnVmZmVyLEEuaXYuYnVmZmVyKTtpZihyLnBhcnQ+LTEmJihrPWIuZmx1c2goKSksIWspcmV0dXJuIG4uZXhlY3V0ZUVuZD1kYSgpLHZhKHIpO3M9bmV3IFVpbnQ4QXJyYXkoayl9dmFyIF89dGhpcy5uZWVkc1Byb2JpbmcoaCxmKTtpZihfKXt2YXIgeD10aGlzLmNvbmZpZ3VyZVRyYW5zbXV4ZXIocyk7aWYoeClyZXR1cm4gRC53YXJuKCJbdHJhbnNtdXhlcl0gIit4Lm1lc3NhZ2UpLHRoaXMub2JzZXJ2ZXIuZW1pdChFLkVSUk9SLEUuRVJST1Ise3R5cGU6VC5NRURJQV9FUlJPUixkZXRhaWxzOlMuRlJBR19QQVJTSU5HX0VSUk9SLGZhdGFsOiExLGVycm9yOngscmVhc29uOngubWVzc2FnZX0pLG4uZXhlY3V0ZUVuZD1kYSgpLHZhKHIpfShofHxmfHxnfHxfKSYmdGhpcy5yZXNldEluaXRTZWdtZW50KFIsbSxwLEwsdCksKGh8fGd8fF8pJiZ0aGlzLnJlc2V0SW5pdGlhbFRpbWVzdGFtcCh5KSxkfHx0aGlzLnJlc2V0Q29udGlndWl0eSgpO3ZhciB3PXRoaXMudHJhbnNtdXgocyxBLHYsYyxyKSxDPXRoaXMuY3VycmVudFRyYW5zbXV4U3RhdGU7cmV0dXJuIEMuY29udGlndW91cz0hMCxDLmRpc2NvbnRpbnVpdHk9ITEsQy50cmFja1N3aXRjaD0hMSxuLmV4ZWN1dGVFbmQ9ZGEoKSx3fSx0LmZsdXNoPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLnRyYW5zbXV4aW5nO3IuZXhlY3V0ZVN0YXJ0PWRhKCk7dmFyIGk9dGhpcy5kZWNyeXB0ZXIsYT10aGlzLmN1cnJlbnRUcmFuc211eFN0YXRlLG49dGhpcy5kZWNyeXB0aW9uUHJvbWlzZTtpZihuKXJldHVybiBuLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIHQuZmx1c2goZSl9KSk7dmFyIHM9W10sbz1hLnRpbWVPZmZzZXQ7aWYoaSl7dmFyIGw9aS5mbHVzaCgpO2wmJnMucHVzaCh0aGlzLnB1c2gobCxudWxsLGUpKX12YXIgdT10aGlzLmRlbXV4ZXIsZD10aGlzLnJlbXV4ZXI7aWYoIXV8fCFkKXJldHVybiByLmV4ZWN1dGVFbmQ9ZGEoKSxbdmEoZSldO3ZhciBoPXUuZmx1c2gobyk7cmV0dXJuIGdhKGgpP2gudGhlbigoZnVuY3Rpb24ocil7cmV0dXJuIHQuZmx1c2hSZW11eChzLHIsZSksc30pKToodGhpcy5mbHVzaFJlbXV4KHMsaCxlKSxzKX0sdC5mbHVzaFJlbXV4PWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10LmF1ZGlvVHJhY2ssYT10LnZpZGVvVHJhY2ssbj10LmlkM1RyYWNrLHM9dC50ZXh0VHJhY2ssbz10aGlzLmN1cnJlbnRUcmFuc211eFN0YXRlLGw9by5hY2N1cmF0ZVRpbWVPZmZzZXQsdT1vLnRpbWVPZmZzZXQ7RC5sb2coIlt0cmFuc211eGVyLnRzXTogRmx1c2hlZCBmcmFnbWVudCAiK3Iuc24rKHIucGFydD4tMT8iIHA6ICIrci5wYXJ0OiIiKSsiIG9mIGxldmVsICIrci5sZXZlbCk7dmFyIGQ9dGhpcy5yZW11eGVyLnJlbXV4KGksYSxuLHMsdSxsLCEwLHRoaXMuaWQpO2UucHVzaCh7cmVtdXhSZXN1bHQ6ZCxjaHVua01ldGE6cn0pLHIudHJhbnNtdXhpbmcuZXhlY3V0ZUVuZD1kYSgpfSx0LnJlc2V0SW5pdGlhbFRpbWVzdGFtcD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmRlbXV4ZXIscj10aGlzLnJlbXV4ZXI7dCYmciYmKHQucmVzZXRUaW1lU3RhbXAoZSksci5yZXNldFRpbWVTdGFtcChlKSl9LHQucmVzZXRDb250aWd1aXR5PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kZW11eGVyLHQ9dGhpcy5yZW11eGVyO2UmJnQmJihlLnJlc2V0Q29udGlndWl0eSgpLHQucmVzZXROZXh0VGltZXN0YW1wKCkpfSx0LnJlc2V0SW5pdFNlZ21lbnQ9ZnVuY3Rpb24oZSx0LHIsaSxhKXt2YXIgbj10aGlzLmRlbXV4ZXIscz10aGlzLnJlbXV4ZXI7biYmcyYmKG4ucmVzZXRJbml0U2VnbWVudChlLHQscixpKSxzLnJlc2V0SW5pdFNlZ21lbnQoZSx0LHIsYSkpfSx0LmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmRlbXV4ZXImJih0aGlzLmRlbXV4ZXIuZGVzdHJveSgpLHRoaXMuZGVtdXhlcj12b2lkIDApLHRoaXMucmVtdXhlciYmKHRoaXMucmVtdXhlci5kZXN0cm95KCksdGhpcy5yZW11eGVyPXZvaWQgMCl9LHQudHJhbnNtdXg9ZnVuY3Rpb24oZSx0LHIsaSxhKXtyZXR1cm4gdCYmIlNBTVBMRS1BRVMiPT09dC5tZXRob2Q/dGhpcy50cmFuc211eFNhbXBsZUFlcyhlLHQscixpLGEpOnRoaXMudHJhbnNtdXhVbmVuY3J5cHRlZChlLHIsaSxhKX0sdC50cmFuc211eFVuZW5jcnlwdGVkPWZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBhPXRoaXMuZGVtdXhlci5kZW11eChlLHQsITEsIXRoaXMuY29uZmlnLnByb2dyZXNzaXZlKSxuPWEuYXVkaW9UcmFjayxzPWEudmlkZW9UcmFjayxvPWEuaWQzVHJhY2ssbD1hLnRleHRUcmFjaztyZXR1cm57cmVtdXhSZXN1bHQ6dGhpcy5yZW11eGVyLnJlbXV4KG4scyxvLGwsdCxyLCExLHRoaXMuaWQpLGNodW5rTWV0YTppfX0sdC50cmFuc211eFNhbXBsZUFlcz1mdW5jdGlvbihlLHQscixpLGEpe3ZhciBuPXRoaXM7cmV0dXJuIHRoaXMuZGVtdXhlci5kZW11eFNhbXBsZUFlcyhlLHQscikudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJue3JlbXV4UmVzdWx0Om4ucmVtdXhlci5yZW11eChlLmF1ZGlvVHJhY2ssZS52aWRlb1RyYWNrLGUuaWQzVHJhY2ssZS50ZXh0VHJhY2sscixpLCExLG4uaWQpLGNodW5rTWV0YTphfX0pKX0sdC5jb25maWd1cmVUcmFuc211eGVyPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPXRoaXMuY29uZmlnLGk9dGhpcy5vYnNlcnZlcixhPXRoaXMudHlwZVN1cHBvcnRlZCxuPXRoaXMudmVuZG9yLHM9MCxvPWZhLmxlbmd0aDtzPG87cysrKXt2YXIgbDtpZihudWxsIT0obD1mYVtzXS5kZW11eCkmJmwucHJvYmUoZSkpe3Q9ZmFbc107YnJlYWt9fWlmKCF0KXJldHVybiBuZXcgRXJyb3IoIkZhaWxlZCB0byBmaW5kIGRlbXV4ZXIgYnkgcHJvYmluZyBmcmFnbWVudCBkYXRhIik7dmFyIHU9dGhpcy5kZW11eGVyLGQ9dGhpcy5yZW11eGVyLGg9dC5yZW11eCxmPXQuZGVtdXg7ZCYmZCBpbnN0YW5jZW9mIGh8fCh0aGlzLnJlbXV4ZXI9bmV3IGgoaSxyLGEsbikpLHUmJnUgaW5zdGFuY2VvZiBmfHwodGhpcy5kZW11eGVyPW5ldyBmKGkscixhKSx0aGlzLnByb2JlPWYucHJvYmUpfSx0Lm5lZWRzUHJvYmluZz1mdW5jdGlvbihlLHQpe3JldHVybiF0aGlzLmRlbXV4ZXJ8fCF0aGlzLnJlbXV4ZXJ8fGV8fHR9LHQuZ2V0RGVjcnlwdGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kZWNyeXB0ZXI7cmV0dXJuIGV8fChlPXRoaXMuZGVjcnlwdGVyPW5ldyBacih0aGlzLmNvbmZpZykpLGV9LGV9KCksdmE9ZnVuY3Rpb24oZSl7cmV0dXJue3JlbXV4UmVzdWx0Ont9LGNodW5rTWV0YTplfX07ZnVuY3Rpb24gZ2EoZSl7cmV0dXJuInRoZW4iaW4gZSYmZS50aGVuIGluc3RhbmNlb2YgRnVuY3Rpb259dmFyIG1hPWZ1bmN0aW9uKGUsdCxyLGksYSl7dGhpcy5hdWRpb0NvZGVjPXZvaWQgMCx0aGlzLnZpZGVvQ29kZWM9dm9pZCAwLHRoaXMuaW5pdFNlZ21lbnREYXRhPXZvaWQgMCx0aGlzLmR1cmF0aW9uPXZvaWQgMCx0aGlzLmRlZmF1bHRJbml0UHRzPXZvaWQgMCx0aGlzLmF1ZGlvQ29kZWM9ZSx0aGlzLnZpZGVvQ29kZWM9dCx0aGlzLmluaXRTZWdtZW50RGF0YT1yLHRoaXMuZHVyYXRpb249aSx0aGlzLmRlZmF1bHRJbml0UHRzPWF8fG51bGx9LHBhPWZ1bmN0aW9uKGUsdCxyLGksYSxuKXt0aGlzLmRpc2NvbnRpbnVpdHk9dm9pZCAwLHRoaXMuY29udGlndW91cz12b2lkIDAsdGhpcy5hY2N1cmF0ZVRpbWVPZmZzZXQ9dm9pZCAwLHRoaXMudHJhY2tTd2l0Y2g9dm9pZCAwLHRoaXMudGltZU9mZnNldD12b2lkIDAsdGhpcy5pbml0U2VnbWVudENoYW5nZT12b2lkIDAsdGhpcy5kaXNjb250aW51aXR5PWUsdGhpcy5jb250aWd1b3VzPXQsdGhpcy5hY2N1cmF0ZVRpbWVPZmZzZXQ9cix0aGlzLnRyYWNrU3dpdGNoPWksdGhpcy50aW1lT2Zmc2V0PWEsdGhpcy5pbml0U2VnbWVudENoYW5nZT1ufSx5YT17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKGUpe3ZhciB0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkscj0ifiI7ZnVuY3Rpb24gaSgpe31mdW5jdGlvbiBhKGUsdCxyKXt0aGlzLmZuPWUsdGhpcy5jb250ZXh0PXQsdGhpcy5vbmNlPXJ8fCExfWZ1bmN0aW9uIG4oZSx0LGksbixzKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgaSl0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGUgbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uIik7dmFyIG89bmV3IGEoaSxufHxlLHMpLGw9cj9yK3Q6dDtyZXR1cm4gZS5fZXZlbnRzW2xdP2UuX2V2ZW50c1tsXS5mbj9lLl9ldmVudHNbbF09W2UuX2V2ZW50c1tsXSxvXTplLl9ldmVudHNbbF0ucHVzaChvKTooZS5fZXZlbnRzW2xdPW8sZS5fZXZlbnRzQ291bnQrKyksZX1mdW5jdGlvbiBzKGUsdCl7MD09LS1lLl9ldmVudHNDb3VudD9lLl9ldmVudHM9bmV3IGk6ZGVsZXRlIGUuX2V2ZW50c1t0XX1mdW5jdGlvbiBvKCl7dGhpcy5fZXZlbnRzPW5ldyBpLHRoaXMuX2V2ZW50c0NvdW50PTB9T2JqZWN0LmNyZWF0ZSYmKGkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobnVsbCksKG5ldyBpKS5fX3Byb3RvX198fChyPSExKSksby5wcm90b3R5cGUuZXZlbnROYW1lcz1mdW5jdGlvbigpe3ZhciBlLGksYT1bXTtpZigwPT09dGhpcy5fZXZlbnRzQ291bnQpcmV0dXJuIGE7Zm9yKGkgaW4gZT10aGlzLl9ldmVudHMpdC5jYWxsKGUsaSkmJmEucHVzaChyP2kuc2xpY2UoMSk6aSk7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM/YS5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKSk6YX0sby5wcm90b3R5cGUubGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0PXI/citlOmUsaT10aGlzLl9ldmVudHNbdF07aWYoIWkpcmV0dXJuW107aWYoaS5mbilyZXR1cm5baS5mbl07Zm9yKHZhciBhPTAsbj1pLmxlbmd0aCxzPW5ldyBBcnJheShuKTthPG47YSsrKXNbYV09aVthXS5mbjtyZXR1cm4gc30sby5wcm90b3R5cGUubGlzdGVuZXJDb3VudD1mdW5jdGlvbihlKXt2YXIgdD1yP3IrZTplLGk9dGhpcy5fZXZlbnRzW3RdO3JldHVybiBpP2kuZm4/MTppLmxlbmd0aDowfSxvLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGUsdCxpLGEsbixzKXt2YXIgbz1yP3IrZTplO2lmKCF0aGlzLl9ldmVudHNbb10pcmV0dXJuITE7dmFyIGwsdSxkPXRoaXMuX2V2ZW50c1tvXSxoPWFyZ3VtZW50cy5sZW5ndGg7aWYoZC5mbil7c3dpdGNoKGQub25jZSYmdGhpcy5yZW1vdmVMaXN0ZW5lcihlLGQuZm4sdm9pZCAwLCEwKSxoKXtjYXNlIDE6cmV0dXJuIGQuZm4uY2FsbChkLmNvbnRleHQpLCEwO2Nhc2UgMjpyZXR1cm4gZC5mbi5jYWxsKGQuY29udGV4dCx0KSwhMDtjYXNlIDM6cmV0dXJuIGQuZm4uY2FsbChkLmNvbnRleHQsdCxpKSwhMDtjYXNlIDQ6cmV0dXJuIGQuZm4uY2FsbChkLmNvbnRleHQsdCxpLGEpLCEwO2Nhc2UgNTpyZXR1cm4gZC5mbi5jYWxsKGQuY29udGV4dCx0LGksYSxuKSwhMDtjYXNlIDY6cmV0dXJuIGQuZm4uY2FsbChkLmNvbnRleHQsdCxpLGEsbixzKSwhMH1mb3IodT0xLGw9bmV3IEFycmF5KGgtMSk7dTxoO3UrKylsW3UtMV09YXJndW1lbnRzW3VdO2QuZm4uYXBwbHkoZC5jb250ZXh0LGwpfWVsc2V7dmFyIGYsYz1kLmxlbmd0aDtmb3IodT0wO3U8Yzt1Kyspc3dpdGNoKGRbdV0ub25jZSYmdGhpcy5yZW1vdmVMaXN0ZW5lcihlLGRbdV0uZm4sdm9pZCAwLCEwKSxoKXtjYXNlIDE6ZFt1XS5mbi5jYWxsKGRbdV0uY29udGV4dCk7YnJlYWs7Y2FzZSAyOmRbdV0uZm4uY2FsbChkW3VdLmNvbnRleHQsdCk7YnJlYWs7Y2FzZSAzOmRbdV0uZm4uY2FsbChkW3VdLmNvbnRleHQsdCxpKTticmVhaztjYXNlIDQ6ZFt1XS5mbi5jYWxsKGRbdV0uY29udGV4dCx0LGksYSk7YnJlYWs7ZGVmYXVsdDppZighbClmb3IoZj0xLGw9bmV3IEFycmF5KGgtMSk7ZjxoO2YrKylsW2YtMV09YXJndW1lbnRzW2ZdO2RbdV0uZm4uYXBwbHkoZFt1XS5jb250ZXh0LGwpfX1yZXR1cm4hMH0sby5wcm90b3R5cGUub249ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuKHRoaXMsZSx0LHIsITEpfSxvLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbih0aGlzLGUsdCxyLCEwKX0sby5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZSx0LGksYSl7dmFyIG49cj9yK2U6ZTtpZighdGhpcy5fZXZlbnRzW25dKXJldHVybiB0aGlzO2lmKCF0KXJldHVybiBzKHRoaXMsbiksdGhpczt2YXIgbz10aGlzLl9ldmVudHNbbl07aWYoby5mbilvLmZuIT09dHx8YSYmIW8ub25jZXx8aSYmby5jb250ZXh0IT09aXx8cyh0aGlzLG4pO2Vsc2V7Zm9yKHZhciBsPTAsdT1bXSxkPW8ubGVuZ3RoO2w8ZDtsKyspKG9bbF0uZm4hPT10fHxhJiYhb1tsXS5vbmNlfHxpJiZvW2xdLmNvbnRleHQhPT1pKSYmdS5wdXNoKG9bbF0pO3UubGVuZ3RoP3RoaXMuX2V2ZW50c1tuXT0xPT09dS5sZW5ndGg/dVswXTp1OnModGhpcyxuKX1yZXR1cm4gdGhpc30sby5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlPyh0PXI/citlOmUsdGhpcy5fZXZlbnRzW3RdJiZzKHRoaXMsdCkpOih0aGlzLl9ldmVudHM9bmV3IGksdGhpcy5fZXZlbnRzQ291bnQ9MCksdGhpc30sby5wcm90b3R5cGUub2ZmPW8ucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyLG8ucHJvdG90eXBlLmFkZExpc3RlbmVyPW8ucHJvdG90eXBlLm9uLG8ucHJlZml4ZWQ9cixvLkV2ZW50RW1pdHRlcj1vLGUuZXhwb3J0cz1vfSh5YSk7dmFyIEVhPWMoeWEuZXhwb3J0cyk7ZnVuY3Rpb24gVGEoZSx0KXtpZighKChyPXQucmVtdXhSZXN1bHQpLmF1ZGlvfHxyLnZpZGVvfHxyLnRleHR8fHIuaWQzfHxyLmluaXRTZWdtZW50KSlyZXR1cm4hMTt2YXIgcixpPVtdLGE9dC5yZW11eFJlc3VsdCxuPWEuYXVkaW8scz1hLnZpZGVvO3JldHVybiBuJiZTYShpLG4pLHMmJlNhKGkscyksZS5wb3N0TWVzc2FnZSh7ZXZlbnQ6InRyYW5zbXV4Q29tcGxldGUiLGRhdGE6dH0saSksITB9ZnVuY3Rpb24gU2EoZSx0KXt0LmRhdGExJiZlLnB1c2godC5kYXRhMS5idWZmZXIpLHQuZGF0YTImJmUucHVzaCh0LmRhdGEyLmJ1ZmZlcil9ZnVuY3Rpb24gTGEoZSx0LHIpe3QucmVkdWNlKChmdW5jdGlvbih0LHIpe3JldHVybiBUYShlLHIpfHx0fSksITEpfHxlLnBvc3RNZXNzYWdlKHtldmVudDoidHJhbnNtdXhDb21wbGV0ZSIsZGF0YTp0WzBdfSksZS5wb3N0TWVzc2FnZSh7ZXZlbnQ6ImZsdXNoIixkYXRhOnJ9KX12b2lkIDAhPT10JiZ0JiZmdW5jdGlvbihlKXt2YXIgdD1uZXcgRWEscj1mdW5jdGlvbih0LHIpe2UucG9zdE1lc3NhZ2Uoe2V2ZW50OnQsZGF0YTpyfSl9O3Qub24oRS5GUkFHX0RFQ1JZUFRFRCxyKSx0Lm9uKEUuRVJST1Iscik7dmFyIGk9ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0KXtyKCJ3b3JrZXJMb2ciLHtsb2dUeXBlOmUsbWVzc2FnZTp0fSl9O0RbZV09dH07Zm9yKHZhciB0IGluIEQpZSh0KX07ZS5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwoZnVuY3Rpb24oYSl7dmFyIG49YS5kYXRhO3N3aXRjaChuLmNtZCl7Y2FzZSJpbml0Ijp2YXIgcz1KU09OLnBhcnNlKG4uY29uZmlnKTtlLnRyYW5zbXV4ZXI9bmV3IGNhKHQsbi50eXBlU3VwcG9ydGVkLHMsIiIsbi5pZCksayhzLmRlYnVnLG4uaWQpLGkoKSxyKCJpbml0IixudWxsKTticmVhaztjYXNlImNvbmZpZ3VyZSI6ZS50cmFuc211eGVyLmNvbmZpZ3VyZShuLmNvbmZpZyk7YnJlYWs7Y2FzZSJkZW11eCI6dmFyIG89ZS50cmFuc211eGVyLnB1c2gobi5kYXRhLG4uZGVjcnlwdGRhdGEsbi5jaHVua01ldGEsbi5zdGF0ZSk7Z2Eobyk/KGUudHJhbnNtdXhlci5hc3luYz0hMCxvLnRoZW4oKGZ1bmN0aW9uKHQpe1RhKGUsdCl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe3IoRS5FUlJPUix7dHlwZTpULk1FRElBX0VSUk9SLGRldGFpbHM6Uy5GUkFHX1BBUlNJTkdfRVJST1IsY2h1bmtNZXRhOm4uY2h1bmtNZXRhLGZhdGFsOiExLGVycm9yOmUsZXJyOmUscmVhc29uOiJ0cmFuc211eGVyLXdvcmtlciBwdXNoIGVycm9yIn0pfSkpKTooZS50cmFuc211eGVyLmFzeW5jPSExLFRhKGUsbykpO2JyZWFrO2Nhc2UiZmx1c2giOnZhciBsPW4uY2h1bmtNZXRhLHU9ZS50cmFuc211eGVyLmZsdXNoKGwpO2dhKHUpfHxlLnRyYW5zbXV4ZXIuYXN5bmM/KGdhKHUpfHwodT1Qcm9taXNlLnJlc29sdmUodSkpLHUudGhlbigoZnVuY3Rpb24odCl7TGEoZSx0LGwpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtyKEUuRVJST1Ise3R5cGU6VC5NRURJQV9FUlJPUixkZXRhaWxzOlMuRlJBR19QQVJTSU5HX0VSUk9SLGNodW5rTWV0YTpuLmNodW5rTWV0YSxmYXRhbDohMSxlcnJvcjplLGVycjplLHJlYXNvbjoidHJhbnNtdXhlci13b3JrZXIgZmx1c2ggZXJyb3IifSl9KSkpOkxhKGUsdSxsKX19KSl9KHNlbGYpO3ZhciBSYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxyLGksYSl7dmFyIG49dGhpczt0aGlzLmVycm9yPW51bGwsdGhpcy5obHM9dm9pZCAwLHRoaXMuaWQ9dm9pZCAwLHRoaXMub2JzZXJ2ZXI9dm9pZCAwLHRoaXMuZnJhZz1udWxsLHRoaXMucGFydD1udWxsLHRoaXMudXNlV29ya2VyPXZvaWQgMCx0aGlzLndvcmtlckNvbnRleHQ9bnVsbCx0aGlzLm9ud21zZz12b2lkIDAsdGhpcy50cmFuc211eGVyPW51bGwsdGhpcy5vblRyYW5zbXV4Q29tcGxldGU9dm9pZCAwLHRoaXMub25GbHVzaD12b2lkIDA7dmFyIHM9dC5jb25maWc7dGhpcy5obHM9dCx0aGlzLmlkPXIsdGhpcy51c2VXb3JrZXI9ISFzLmVuYWJsZVdvcmtlcix0aGlzLm9uVHJhbnNtdXhDb21wbGV0ZT1pLHRoaXMub25GbHVzaD1hO3ZhciBvPWZ1bmN0aW9uKGUsdCl7KHQ9dHx8e30pLmZyYWc9bi5mcmFnLHQuaWQ9bi5pZCxlPT09RS5FUlJPUiYmKG4uZXJyb3I9dC5lcnJvciksbi5obHMudHJpZ2dlcihlLHQpfTt0aGlzLm9ic2VydmVyPW5ldyBFYSx0aGlzLm9ic2VydmVyLm9uKEUuRlJBR19ERUNSWVBURUQsbyksdGhpcy5vYnNlcnZlci5vbihFLkVSUk9SLG8pO3ZhciBsLHUsZCxoLGY9Q2Uocy5wcmVmZXJNYW5hZ2VkTWVkaWFTb3VyY2UpfHx7aXNUeXBlU3VwcG9ydGVkOmZ1bmN0aW9uKCl7cmV0dXJuITF9fSxjPXttcGVnOmYuaXNUeXBlU3VwcG9ydGVkKCJhdWRpby9tcGVnIiksbXAzOmYuaXNUeXBlU3VwcG9ydGVkKCdhdWRpby9tcDQ7IGNvZGVjcz0ibXAzIicpLGFjMzohMX07aWYoIXRoaXMudXNlV29ya2VyfHwidW5kZWZpbmVkIj09dHlwZW9mIFdvcmtlcnx8KHMud29ya2VyUGF0aCwwKSl0aGlzLnRyYW5zbXV4ZXI9bmV3IGNhKHRoaXMub2JzZXJ2ZXIsYyxzLCIiLHIpO2Vsc2UgdHJ5e3Mud29ya2VyUGF0aD8oRC5sb2coImxvYWRpbmcgV2ViIFdvcmtlciAiK3Mud29ya2VyUGF0aCsnIGZvciAiJytyKyciJyksdGhpcy53b3JrZXJDb250ZXh0PShkPXMud29ya2VyUGF0aCxoPW5ldyBzZWxmLlVSTChkLHNlbGYubG9jYXRpb24uaHJlZikuaHJlZix7d29ya2VyOm5ldyBzZWxmLldvcmtlcihoKSxzY3JpcHRVUkw6aH0pKTooRC5sb2coJ2luamVjdGluZyBXZWIgV29ya2VyIGZvciAiJytyKyciJyksdGhpcy53b3JrZXJDb250ZXh0PShsPW5ldyBzZWxmLkJsb2IoWyJ2YXIgZXhwb3J0cz17fTt2YXIgbW9kdWxlPXtleHBvcnRzOmV4cG9ydHN9O2Z1bmN0aW9uIGRlZmluZShmKXtmKCl9O2RlZmluZS5hbWQ9dHJ1ZTsoIitlLnRvU3RyaW5nKCkrIikodHJ1ZSk7Il0se3R5cGU6InRleHQvamF2YXNjcmlwdCJ9KSx1PXNlbGYuVVJMLmNyZWF0ZU9iamVjdFVSTChsKSx7d29ya2VyOm5ldyBzZWxmLldvcmtlcih1KSxvYmplY3RVUkw6dX0pKSx0aGlzLm9ud21zZz1mdW5jdGlvbihlKXtyZXR1cm4gbi5vbldvcmtlck1lc3NhZ2UoZSl9O3ZhciB2PXRoaXMud29ya2VyQ29udGV4dC53b3JrZXI7di5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIix0aGlzLm9ud21zZyksdi5vbmVycm9yPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBFcnJvcihlLm1lc3NhZ2UrIiAgKCIrZS5maWxlbmFtZSsiOiIrZS5saW5lbm8rIikiKTtzLmVuYWJsZVdvcmtlcj0hMSxELndhcm4oJ0Vycm9yIGluICInK3IrJyIgV2ViIFdvcmtlciwgZmFsbGJhY2sgdG8gaW5saW5lJyksbi5obHMudHJpZ2dlcihFLkVSUk9SLHt0eXBlOlQuT1RIRVJfRVJST1IsZGV0YWlsczpTLklOVEVSTkFMX0VYQ0VQVElPTixmYXRhbDohMSxldmVudDoiZGVtdXhlcldvcmtlciIsZXJyb3I6dH0pfSx2LnBvc3RNZXNzYWdlKHtjbWQ6ImluaXQiLHR5cGVTdXBwb3J0ZWQ6Yyx2ZW5kb3I6IiIsaWQ6cixjb25maWc6SlNPTi5zdHJpbmdpZnkocyl9KX1jYXRjaChlKXtELndhcm4oJ0Vycm9yIHNldHRpbmcgdXAgIicrcisnIiBXZWIgV29ya2VyLCBmYWxsYmFjayB0byBpbmxpbmUnLGUpLHRoaXMucmVzZXRXb3JrZXIoKSx0aGlzLmVycm9yPW51bGwsdGhpcy50cmFuc211eGVyPW5ldyBjYSh0aGlzLm9ic2VydmVyLGMscywiIixyKX19dmFyIHI9dC5wcm90b3R5cGU7cmV0dXJuIHIucmVzZXRXb3JrZXI9ZnVuY3Rpb24oKXtpZih0aGlzLndvcmtlckNvbnRleHQpe3ZhciBlPXRoaXMud29ya2VyQ29udGV4dCx0PWUud29ya2VyLHI9ZS5vYmplY3RVUkw7ciYmc2VsZi5VUkwucmV2b2tlT2JqZWN0VVJMKHIpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsdGhpcy5vbndtc2cpLHQub25lcnJvcj1udWxsLHQudGVybWluYXRlKCksdGhpcy53b3JrZXJDb250ZXh0PW51bGx9fSxyLmRlc3Ryb3k9ZnVuY3Rpb24oKXtpZih0aGlzLndvcmtlckNvbnRleHQpdGhpcy5yZXNldFdvcmtlcigpLHRoaXMub253bXNnPXZvaWQgMDtlbHNle3ZhciBlPXRoaXMudHJhbnNtdXhlcjtlJiYoZS5kZXN0cm95KCksdGhpcy50cmFuc211eGVyPW51bGwpfXZhciB0PXRoaXMub2JzZXJ2ZXI7dCYmdC5yZW1vdmVBbGxMaXN0ZW5lcnMoKSx0aGlzLmZyYWc9bnVsbCx0aGlzLm9ic2VydmVyPW51bGwsdGhpcy5obHM9bnVsbH0sci5wdXNoPWZ1bmN0aW9uKGUsdCxyLGksYSxuLHMsbyxsLHUpe3ZhciBkLGgsZj10aGlzO2wudHJhbnNtdXhpbmcuc3RhcnQ9c2VsZi5wZXJmb3JtYW5jZS5ub3coKTt2YXIgYz10aGlzLnRyYW5zbXV4ZXIsdj1uP24uc3RhcnQ6YS5zdGFydCxnPWEuZGVjcnlwdGRhdGEsbT10aGlzLmZyYWcscD0hKG0mJmEuY2M9PT1tLmNjKSx5PSEobSYmbC5sZXZlbD09PW0ubGV2ZWwpLEU9bT9sLnNuLW0uc246LTEsVD10aGlzLnBhcnQ/bC5wYXJ0LXRoaXMucGFydC5pbmRleDotMSxTPTA9PT1FJiZsLmlkPjEmJmwuaWQ9PT0obnVsbD09bT92b2lkIDA6bS5zdGF0cy5jaHVua0NvdW50KSxMPSF5JiYoMT09PUV8fDA9PT1FJiYoMT09PVR8fFMmJlQ8PTApKSxSPXNlbGYucGVyZm9ybWFuY2Uubm93KCk7KHl8fEV8fDA9PT1hLnN0YXRzLnBhcnNpbmcuc3RhcnQpJiYoYS5zdGF0cy5wYXJzaW5nLnN0YXJ0PVIpLCFufHwhVCYmTHx8KG4uc3RhdHMucGFyc2luZy5zdGFydD1SKTt2YXIgQT0hKG0mJihudWxsPT0oZD1hLmluaXRTZWdtZW50KT92b2lkIDA6ZC51cmwpPT09KG51bGw9PShoPW0uaW5pdFNlZ21lbnQpP3ZvaWQgMDpoLnVybCkpLGI9bmV3IHBhKHAsTCxvLHksdixBKTtpZighTHx8cHx8QSl7RC5sb2coIlt0cmFuc211eGVyLWludGVyZmFjZSwgIithLnR5cGUrIl06IFN0YXJ0aW5nIG5ldyB0cmFuc211eCBzZXNzaW9uIGZvciBzbjogIitsLnNuKyIgcDogIitsLnBhcnQrIiBsZXZlbDogIitsLmxldmVsKyIgaWQ6ICIrbC5pZCsiXG4gICAgICAgIGRpc2NvbnRpbnVpdHk6ICIrcCsiXG4gICAgICAgIHRyYWNrU3dpdGNoOiAiK3krIlxuICAgICAgICBjb250aWd1b3VzOiAiK0wrIlxuICAgICAgICBhY2N1cmF0ZVRpbWVPZmZzZXQ6ICIrbysiXG4gICAgICAgIHRpbWVPZmZzZXQ6ICIrdisiXG4gICAgICAgIGluaXRTZWdtZW50Q2hhbmdlOiAiK0EpO3ZhciBrPW5ldyBtYShyLGksdCxzLHUpO3RoaXMuY29uZmlndXJlVHJhbnNtdXhlcihrKX1pZih0aGlzLmZyYWc9YSx0aGlzLnBhcnQ9bix0aGlzLndvcmtlckNvbnRleHQpdGhpcy53b3JrZXJDb250ZXh0Lndvcmtlci5wb3N0TWVzc2FnZSh7Y21kOiJkZW11eCIsZGF0YTplLGRlY3J5cHRkYXRhOmcsY2h1bmtNZXRhOmwsc3RhdGU6Yn0sZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyP1tlXTpbXSk7ZWxzZSBpZihjKXt2YXIgXz1jLnB1c2goZSxnLGwsYik7Z2EoXyk/KGMuYXN5bmM9ITAsXy50aGVuKChmdW5jdGlvbihlKXtmLmhhbmRsZVRyYW5zbXV4Q29tcGxldGUoZSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe2YudHJhbnNtdXhlckVycm9yKGUsbCwidHJhbnNtdXhlci1pbnRlcmZhY2UgcHVzaCBlcnJvciIpfSkpKTooYy5hc3luYz0hMSx0aGlzLmhhbmRsZVRyYW5zbXV4Q29tcGxldGUoXykpfX0sci5mbHVzaD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2UudHJhbnNtdXhpbmcuc3RhcnQ9c2VsZi5wZXJmb3JtYW5jZS5ub3coKTt2YXIgcj10aGlzLnRyYW5zbXV4ZXI7aWYodGhpcy53b3JrZXJDb250ZXh0KXRoaXMud29ya2VyQ29udGV4dC53b3JrZXIucG9zdE1lc3NhZ2Uoe2NtZDoiZmx1c2giLGNodW5rTWV0YTplfSk7ZWxzZSBpZihyKXt2YXIgaT1yLmZsdXNoKGUpO2dhKGkpfHxyLmFzeW5jPyhnYShpKXx8KGk9UHJvbWlzZS5yZXNvbHZlKGkpKSxpLnRoZW4oKGZ1bmN0aW9uKHIpe3QuaGFuZGxlRmx1c2hSZXN1bHQocixlKX0pKS5jYXRjaCgoZnVuY3Rpb24ocil7dC50cmFuc211eGVyRXJyb3IocixlLCJ0cmFuc211eGVyLWludGVyZmFjZSBmbHVzaCBlcnJvciIpfSkpKTp0aGlzLmhhbmRsZUZsdXNoUmVzdWx0KGksZSl9fSxyLnRyYW5zbXV4ZXJFcnJvcj1mdW5jdGlvbihlLHQscil7dGhpcy5obHMmJih0aGlzLmVycm9yPWUsdGhpcy5obHMudHJpZ2dlcihFLkVSUk9SLHt0eXBlOlQuTUVESUFfRVJST1IsZGV0YWlsczpTLkZSQUdfUEFSU0lOR19FUlJPUixjaHVua01ldGE6dCxmcmFnOnRoaXMuZnJhZ3x8dm9pZCAwLGZhdGFsOiExLGVycm9yOmUsZXJyOmUscmVhc29uOnJ9KSl9LHIuaGFuZGxlRmx1c2hSZXN1bHQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ci5oYW5kbGVUcmFuc211eENvbXBsZXRlKGUpfSkpLHRoaXMub25GbHVzaCh0KX0sci5vbldvcmtlck1lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhO2lmKG51bGwhPXQmJnQuZXZlbnQpe3ZhciByPXRoaXMuaGxzO2lmKHRoaXMuaGxzKXN3aXRjaCh0LmV2ZW50KXtjYXNlImluaXQiOnZhciBpLGE9bnVsbD09KGk9dGhpcy53b3JrZXJDb250ZXh0KT92b2lkIDA6aS5vYmplY3RVUkw7YSYmc2VsZi5VUkwucmV2b2tlT2JqZWN0VVJMKGEpO2JyZWFrO2Nhc2UidHJhbnNtdXhDb21wbGV0ZSI6dGhpcy5oYW5kbGVUcmFuc211eENvbXBsZXRlKHQuZGF0YSk7YnJlYWs7Y2FzZSJmbHVzaCI6dGhpcy5vbkZsdXNoKHQuZGF0YSk7YnJlYWs7Y2FzZSJ3b3JrZXJMb2ciOkRbdC5kYXRhLmxvZ1R5cGVdJiZEW3QuZGF0YS5sb2dUeXBlXSh0LmRhdGEubWVzc2FnZSk7YnJlYWs7ZGVmYXVsdDp0LmRhdGE9dC5kYXRhfHx7fSx0LmRhdGEuZnJhZz10aGlzLmZyYWcsdC5kYXRhLmlkPXRoaXMuaWQsci50cmlnZ2VyKHQuZXZlbnQsdC5kYXRhKX19ZWxzZSBELndhcm4oIndvcmtlciBtZXNzYWdlIHJlY2VpdmVkIHdpdGggbm8gIisodD8iZXZlbnQgbmFtZSI6ImRhdGEiKSl9LHIuY29uZmlndXJlVHJhbnNtdXhlcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnRyYW5zbXV4ZXI7dGhpcy53b3JrZXJDb250ZXh0P3RoaXMud29ya2VyQ29udGV4dC53b3JrZXIucG9zdE1lc3NhZ2Uoe2NtZDoiY29uZmlndXJlIixjb25maWc6ZX0pOnQmJnQuY29uZmlndXJlKGUpfSxyLmhhbmRsZVRyYW5zbXV4Q29tcGxldGU9ZnVuY3Rpb24oZSl7ZS5jaHVua01ldGEudHJhbnNtdXhpbmcuZW5kPXNlbGYucGVyZm9ybWFuY2Uubm93KCksdGhpcy5vblRyYW5zbXV4Q29tcGxldGUoZSl9LHR9KCksQWE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLGkpe3RoaXMuY29uZmlnPXZvaWQgMCx0aGlzLm1lZGlhPW51bGwsdGhpcy5mcmFnbWVudFRyYWNrZXI9dm9pZCAwLHRoaXMuaGxzPXZvaWQgMCx0aGlzLm51ZGdlUmV0cnk9MCx0aGlzLnN0YWxsUmVwb3J0ZWQ9ITEsdGhpcy5zdGFsbGVkPW51bGwsdGhpcy5tb3ZlZD0hMSx0aGlzLnNlZWtpbmc9ITEsdGhpcy5jb25maWc9ZSx0aGlzLm1lZGlhPXQsdGhpcy5mcmFnbWVudFRyYWNrZXI9cix0aGlzLmhscz1pfXZhciB0PWUucHJvdG90eXBlO3JldHVybiB0LmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLm1lZGlhPW51bGwsdGhpcy5obHM9dGhpcy5mcmFnbWVudFRyYWNrZXI9bnVsbH0sdC5wb2xsPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5jb25maWcsaT10aGlzLm1lZGlhLGE9dGhpcy5zdGFsbGVkO2lmKG51bGwhPT1pKXt2YXIgbj1pLmN1cnJlbnRUaW1lLHM9aS5zZWVraW5nLG89dGhpcy5zZWVraW5nJiYhcyxsPSF0aGlzLnNlZWtpbmcmJnM7aWYodGhpcy5zZWVraW5nPXMsbj09PWUpaWYobHx8byl0aGlzLnN0YWxsZWQ9bnVsbDtlbHNlIGlmKGkucGF1c2VkJiYhc3x8aS5lbmRlZHx8MD09PWkucGxheWJhY2tSYXRlfHwhbHIuZ2V0QnVmZmVyZWQoaSkubGVuZ3RoKXRoaXMubnVkZ2VSZXRyeT0wO2Vsc2V7dmFyIHU9bHIuYnVmZmVySW5mbyhpLG4sMCksZD11Lm5leHRTdGFydHx8MDtpZihzKXt2YXIgaD11Lmxlbj4yLGY9IWR8fHQmJnQuc3RhcnQ8PW58fGQtbj4yJiYhdGhpcy5mcmFnbWVudFRyYWNrZXIuZ2V0UGFydGlhbEZyYWdtZW50KG4pO2lmKGh8fGYpcmV0dXJuO3RoaXMubW92ZWQ9ITF9aWYoIXRoaXMubW92ZWQmJm51bGwhPT10aGlzLnN0YWxsZWQpe3ZhciBjO2lmKCEodS5sZW4+MHx8ZCkpcmV0dXJuO3ZhciB2PU1hdGgubWF4KGQsdS5zdGFydHx8MCktbixnPXRoaXMuaGxzLmxldmVscz90aGlzLmhscy5sZXZlbHNbdGhpcy5obHMuY3VycmVudExldmVsXTpudWxsLG09KG51bGw9PWd8fG51bGw9PShjPWcuZGV0YWlscyk/dm9pZCAwOmMubGl2ZSk/MipnLmRldGFpbHMudGFyZ2V0ZHVyYXRpb246MixwPXRoaXMuZnJhZ21lbnRUcmFja2VyLmdldFBhcnRpYWxGcmFnbWVudChuKTtpZih2PjAmJih2PD1tfHxwKSlyZXR1cm4gdm9pZChpLnBhdXNlZHx8dGhpcy5fdHJ5U2tpcEJ1ZmZlckhvbGUocCkpfXZhciB5PXNlbGYucGVyZm9ybWFuY2Uubm93KCk7aWYobnVsbCE9PWEpe3ZhciBFPXktYTtpZihzfHwhKEU+PTI1MCl8fCh0aGlzLl9yZXBvcnRTdGFsbCh1KSx0aGlzLm1lZGlhKSl7dmFyIFQ9bHIuYnVmZmVySW5mbyhpLG4sci5tYXhCdWZmZXJIb2xlKTt0aGlzLl90cnlGaXhCdWZmZXJTdGFsbChULEUpfX1lbHNlIHRoaXMuc3RhbGxlZD15fWVsc2UgaWYodGhpcy5tb3ZlZD0hMCxzfHwodGhpcy5udWRnZVJldHJ5PTApLG51bGwhPT1hKXtpZih0aGlzLnN0YWxsUmVwb3J0ZWQpe3ZhciBTPXNlbGYucGVyZm9ybWFuY2Uubm93KCktYTtELndhcm4oInBsYXliYWNrIG5vdCBzdHVjayBhbnltb3JlIEAiK24rIiwgYWZ0ZXIgIitNYXRoLnJvdW5kKFMpKyJtcyIpLHRoaXMuc3RhbGxSZXBvcnRlZD0hMX10aGlzLnN0YWxsZWQ9bnVsbH19fSx0Ll90cnlGaXhCdWZmZXJTdGFsbD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuY29uZmlnLGk9dGhpcy5mcmFnbWVudFRyYWNrZXIsYT10aGlzLm1lZGlhO2lmKG51bGwhPT1hKXt2YXIgbj1hLmN1cnJlbnRUaW1lLHM9aS5nZXRQYXJ0aWFsRnJhZ21lbnQobik7aWYocyYmKHRoaXMuX3RyeVNraXBCdWZmZXJIb2xlKHMpfHwhdGhpcy5tZWRpYSkpcmV0dXJuOyhlLmxlbj5yLm1heEJ1ZmZlckhvbGV8fGUubmV4dFN0YXJ0JiZlLm5leHRTdGFydC1uPHIubWF4QnVmZmVySG9sZSkmJnQ+MWUzKnIuaGlnaEJ1ZmZlcldhdGNoZG9nUGVyaW9kJiYoRC53YXJuKCJUcnlpbmcgdG8gbnVkZ2UgcGxheWhlYWQgb3ZlciBidWZmZXItaG9sZSIpLHRoaXMuc3RhbGxlZD1udWxsLHRoaXMuX3RyeU51ZGdlQnVmZmVyKCkpfX0sdC5fcmVwb3J0U3RhbGw9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5obHMscj10aGlzLm1lZGlhO2lmKCF0aGlzLnN0YWxsUmVwb3J0ZWQmJnIpe3RoaXMuc3RhbGxSZXBvcnRlZD0hMDt2YXIgaT1uZXcgRXJyb3IoIlBsYXliYWNrIHN0YWxsaW5nIGF0IEAiK3IuY3VycmVudFRpbWUrIiBkdWUgdG8gbG93IGJ1ZmZlciAoIitKU09OLnN0cmluZ2lmeShlKSsiKSIpO0Qud2FybihpLm1lc3NhZ2UpLHQudHJpZ2dlcihFLkVSUk9SLHt0eXBlOlQuTUVESUFfRVJST1IsZGV0YWlsczpTLkJVRkZFUl9TVEFMTEVEX0VSUk9SLGZhdGFsOiExLGVycm9yOmksYnVmZmVyOmUubGVufSl9fSx0Ll90cnlTa2lwQnVmZmVySG9sZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvbmZpZyxyPXRoaXMuaGxzLGk9dGhpcy5tZWRpYTtpZihudWxsPT09aSlyZXR1cm4gMDt2YXIgYT1pLmN1cnJlbnRUaW1lLG49bHIuYnVmZmVySW5mbyhpLGEsMCkscz1hPG4uc3RhcnQ/bi5zdGFydDpuLm5leHRTdGFydDtpZihzKXt2YXIgbz1uLmxlbjw9dC5tYXhCdWZmZXJIb2xlLGw9bi5sZW4+MCYmbi5sZW48MSYmaS5yZWFkeVN0YXRlPDMsdT1zLWE7aWYodT4wJiYob3x8bCkpe2lmKHU+dC5tYXhCdWZmZXJIb2xlKXt2YXIgZD10aGlzLmZyYWdtZW50VHJhY2tlcixoPSExO2lmKDA9PT1hKXt2YXIgZj1kLmdldEFwcGVuZGVkRnJhZygwLG50KTtmJiZzPGYuZW5kJiYoaD0hMCl9aWYoIWgpe3ZhciBjPWV8fGQuZ2V0QXBwZW5kZWRGcmFnKGEsbnQpO2lmKGMpe2Zvcih2YXIgdj0hMSxnPWMuZW5kO2c8czspe3ZhciBtPWQuZ2V0UGFydGlhbEZyYWdtZW50KGcpO2lmKCFtKXt2PSEwO2JyZWFrfWcrPW0uZHVyYXRpb259aWYodilyZXR1cm4gMH19fXZhciBwPU1hdGgubWF4KHMrLjA1LGErLjEpO2lmKEQud2Fybigic2tpcHBpbmcgaG9sZSwgYWRqdXN0aW5nIGN1cnJlbnRUaW1lIGZyb20gIithKyIgdG8gIitwKSx0aGlzLm1vdmVkPSEwLHRoaXMuc3RhbGxlZD1udWxsLGkuY3VycmVudFRpbWU9cCxlJiYhZS5nYXApe3ZhciB5PW5ldyBFcnJvcigiZnJhZ21lbnQgbG9hZGVkIHdpdGggYnVmZmVyIGhvbGVzLCBzZWVraW5nIGZyb20gIithKyIgdG8gIitwKTtyLnRyaWdnZXIoRS5FUlJPUix7dHlwZTpULk1FRElBX0VSUk9SLGRldGFpbHM6Uy5CVUZGRVJfU0VFS19PVkVSX0hPTEUsZmF0YWw6ITEsZXJyb3I6eSxyZWFzb246eS5tZXNzYWdlLGZyYWc6ZX0pfXJldHVybiBwfX1yZXR1cm4gMH0sdC5fdHJ5TnVkZ2VCdWZmZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNvbmZpZyx0PXRoaXMuaGxzLHI9dGhpcy5tZWRpYSxpPXRoaXMubnVkZ2VSZXRyeTtpZihudWxsIT09cil7dmFyIGE9ci5jdXJyZW50VGltZTtpZih0aGlzLm51ZGdlUmV0cnkrKyxpPGUubnVkZ2VNYXhSZXRyeSl7dmFyIG49YSsoaSsxKSplLm51ZGdlT2Zmc2V0LHM9bmV3IEVycm9yKCJOdWRnaW5nICdjdXJyZW50VGltZScgZnJvbSAiK2ErIiB0byAiK24pO0Qud2FybihzLm1lc3NhZ2UpLHIuY3VycmVudFRpbWU9bix0LnRyaWdnZXIoRS5FUlJPUix7dHlwZTpULk1FRElBX0VSUk9SLGRldGFpbHM6Uy5CVUZGRVJfTlVER0VfT05fU1RBTEwsZXJyb3I6cyxmYXRhbDohMX0pfWVsc2V7dmFyIG89bmV3IEVycm9yKCJQbGF5aGVhZCBzdGlsbCBub3QgbW92aW5nIHdoaWxlIGVub3VnaCBkYXRhIGJ1ZmZlcmVkIEAiK2ErIiBhZnRlciAiK2UubnVkZ2VNYXhSZXRyeSsiIG51ZGdlcyIpO0QuZXJyb3Ioby5tZXNzYWdlKSx0LnRyaWdnZXIoRS5FUlJPUix7dHlwZTpULk1FRElBX0VSUk9SLGRldGFpbHM6Uy5CVUZGRVJfU1RBTExFRF9FUlJPUixlcnJvcjpvLGZhdGFsOiEwfSl9fX0sZX0oKSxiYT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpKXt2YXIgYTtyZXR1cm4oYT1lLmNhbGwodGhpcyx0LHIsaSwiW3N0cmVhbS1jb250cm9sbGVyXSIsbnQpfHx0aGlzKS5hdWRpb0NvZGVjU3dhcD0hMSxhLmdhcENvbnRyb2xsZXI9bnVsbCxhLmxldmVsPS0xLGEuX2ZvcmNlU3RhcnRMb2FkPSExLGEuYWx0QXVkaW89ITEsYS5hdWRpb09ubHk9ITEsYS5mcmFnUGxheWluZz1udWxsLGEub252cGxheWluZz1udWxsLGEub252c2Vla2VkPW51bGwsYS5mcmFnTGFzdEticHM9MCxhLmNvdWxkQmFja3RyYWNrPSExLGEuYmFja3RyYWNrRnJhZ21lbnQ9bnVsbCxhLmF1ZGlvQ29kZWNTd2l0Y2g9ITEsYS52aWRlb0J1ZmZlcj1udWxsLGEuX3JlZ2lzdGVyTGlzdGVuZXJzKCksYX1sKHQsZSk7dmFyIHI9dC5wcm90b3R5cGU7cmV0dXJuIHIuX3JlZ2lzdGVyTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5obHM7ZS5vbihFLk1FRElBX0FUVEFDSEVELHRoaXMub25NZWRpYUF0dGFjaGVkLHRoaXMpLGUub24oRS5NRURJQV9ERVRBQ0hJTkcsdGhpcy5vbk1lZGlhRGV0YWNoaW5nLHRoaXMpLGUub24oRS5NQU5JRkVTVF9MT0FESU5HLHRoaXMub25NYW5pZmVzdExvYWRpbmcsdGhpcyksZS5vbihFLk1BTklGRVNUX1BBUlNFRCx0aGlzLm9uTWFuaWZlc3RQYXJzZWQsdGhpcyksZS5vbihFLkxFVkVMX0xPQURJTkcsdGhpcy5vbkxldmVsTG9hZGluZyx0aGlzKSxlLm9uKEUuTEVWRUxfTE9BREVELHRoaXMub25MZXZlbExvYWRlZCx0aGlzKSxlLm9uKEUuRlJBR19MT0FEX0VNRVJHRU5DWV9BQk9SVEVELHRoaXMub25GcmFnTG9hZEVtZXJnZW5jeUFib3J0ZWQsdGhpcyksZS5vbihFLkVSUk9SLHRoaXMub25FcnJvcix0aGlzKSxlLm9uKEUuQVVESU9fVFJBQ0tfU1dJVENISU5HLHRoaXMub25BdWRpb1RyYWNrU3dpdGNoaW5nLHRoaXMpLGUub24oRS5BVURJT19UUkFDS19TV0lUQ0hFRCx0aGlzLm9uQXVkaW9UcmFja1N3aXRjaGVkLHRoaXMpLGUub24oRS5CVUZGRVJfQ1JFQVRFRCx0aGlzLm9uQnVmZmVyQ3JlYXRlZCx0aGlzKSxlLm9uKEUuQlVGRkVSX0ZMVVNIRUQsdGhpcy5vbkJ1ZmZlckZsdXNoZWQsdGhpcyksZS5vbihFLkxFVkVMU19VUERBVEVELHRoaXMub25MZXZlbHNVcGRhdGVkLHRoaXMpLGUub24oRS5GUkFHX0JVRkZFUkVELHRoaXMub25GcmFnQnVmZmVyZWQsdGhpcyl9LHIuX3VucmVnaXN0ZXJMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmhscztlLm9mZihFLk1FRElBX0FUVEFDSEVELHRoaXMub25NZWRpYUF0dGFjaGVkLHRoaXMpLGUub2ZmKEUuTUVESUFfREVUQUNISU5HLHRoaXMub25NZWRpYURldGFjaGluZyx0aGlzKSxlLm9mZihFLk1BTklGRVNUX0xPQURJTkcsdGhpcy5vbk1hbmlmZXN0TG9hZGluZyx0aGlzKSxlLm9mZihFLk1BTklGRVNUX1BBUlNFRCx0aGlzLm9uTWFuaWZlc3RQYXJzZWQsdGhpcyksZS5vZmYoRS5MRVZFTF9MT0FERUQsdGhpcy5vbkxldmVsTG9hZGVkLHRoaXMpLGUub2ZmKEUuRlJBR19MT0FEX0VNRVJHRU5DWV9BQk9SVEVELHRoaXMub25GcmFnTG9hZEVtZXJnZW5jeUFib3J0ZWQsdGhpcyksZS5vZmYoRS5FUlJPUix0aGlzLm9uRXJyb3IsdGhpcyksZS5vZmYoRS5BVURJT19UUkFDS19TV0lUQ0hJTkcsdGhpcy5vbkF1ZGlvVHJhY2tTd2l0Y2hpbmcsdGhpcyksZS5vZmYoRS5BVURJT19UUkFDS19TV0lUQ0hFRCx0aGlzLm9uQXVkaW9UcmFja1N3aXRjaGVkLHRoaXMpLGUub2ZmKEUuQlVGRkVSX0NSRUFURUQsdGhpcy5vbkJ1ZmZlckNyZWF0ZWQsdGhpcyksZS5vZmYoRS5CVUZGRVJfRkxVU0hFRCx0aGlzLm9uQnVmZmVyRmx1c2hlZCx0aGlzKSxlLm9mZihFLkxFVkVMU19VUERBVEVELHRoaXMub25MZXZlbHNVcGRhdGVkLHRoaXMpLGUub2ZmKEUuRlJBR19CVUZGRVJFRCx0aGlzLm9uRnJhZ0J1ZmZlcmVkLHRoaXMpfSxyLm9uSGFuZGxlckRlc3Ryb3lpbmc9ZnVuY3Rpb24oKXt0aGlzLl91bnJlZ2lzdGVyTGlzdGVuZXJzKCksZS5wcm90b3R5cGUub25IYW5kbGVyRGVzdHJveWluZy5jYWxsKHRoaXMpfSxyLnN0YXJ0TG9hZD1mdW5jdGlvbihlKXtpZih0aGlzLmxldmVscyl7dmFyIHQ9dGhpcy5sYXN0Q3VycmVudFRpbWUscj10aGlzLmhscztpZih0aGlzLnN0b3BMb2FkKCksdGhpcy5zZXRJbnRlcnZhbCgxMDApLHRoaXMubGV2ZWw9LTEsIXRoaXMuc3RhcnRGcmFnUmVxdWVzdGVkKXt2YXIgaT1yLnN0YXJ0TGV2ZWw7LTE9PT1pJiYoci5jb25maWcudGVzdEJhbmR3aWR0aCYmdGhpcy5sZXZlbHMubGVuZ3RoPjE/KGk9MCx0aGlzLmJpdHJhdGVUZXN0PSEwKTppPXIuZmlyc3RBdXRvTGV2ZWwpLHIubmV4dExvYWRMZXZlbD1pLHRoaXMubGV2ZWw9ci5sb2FkTGV2ZWwsdGhpcy5sb2FkZWRtZXRhZGF0YT0hMX10PjAmJi0xPT09ZSYmKHRoaXMubG9nKCJPdmVycmlkZSBzdGFydFBvc2l0aW9uIHdpdGggbGFzdEN1cnJlbnRUaW1lIEAiK3QudG9GaXhlZCgzKSksZT10KSx0aGlzLnN0YXRlPXJpLHRoaXMubmV4dExvYWRQb3NpdGlvbj10aGlzLnN0YXJ0UG9zaXRpb249dGhpcy5sYXN0Q3VycmVudFRpbWU9ZSx0aGlzLnRpY2soKX1lbHNlIHRoaXMuX2ZvcmNlU3RhcnRMb2FkPSEwLHRoaXMuc3RhdGU9dGl9LHIuc3RvcExvYWQ9ZnVuY3Rpb24oKXt0aGlzLl9mb3JjZVN0YXJ0TG9hZD0hMSxlLnByb3RvdHlwZS5zdG9wTG9hZC5jYWxsKHRoaXMpfSxyLmRvVGljaz1mdW5jdGlvbigpe3N3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIGRpOnZhciBlPXRoaXMubGV2ZWxzLHQ9dGhpcy5sZXZlbCxyPW51bGw9PWU/dm9pZCAwOmVbdF0saT1udWxsPT1yP3ZvaWQgMDpyLmRldGFpbHM7aWYoaSYmKCFpLmxpdmV8fHRoaXMubGV2ZWxMYXN0TG9hZGVkPT09cikpe2lmKHRoaXMud2FpdEZvckNkblR1bmVJbihpKSlicmVhazt0aGlzLnN0YXRlPXJpO2JyZWFrfWlmKHRoaXMuaGxzLm5leHRMb2FkTGV2ZWwhPT10aGlzLmxldmVsKXt0aGlzLnN0YXRlPXJpO2JyZWFrfWJyZWFrO2Nhc2Ugbmk6dmFyIGEsbj1zZWxmLnBlcmZvcm1hbmNlLm5vdygpLHM9dGhpcy5yZXRyeURhdGU7aWYoIXN8fG4+PXN8fG51bGwhPShhPXRoaXMubWVkaWEpJiZhLnNlZWtpbmcpe3ZhciBvPXRoaXMubGV2ZWxzLGw9dGhpcy5sZXZlbCx1PW51bGw9PW8/dm9pZCAwOm9bbF07dGhpcy5yZXNldFN0YXJ0V2hlbk5vdExvYWRlZCh1fHxudWxsKSx0aGlzLnN0YXRlPXJpfX10aGlzLnN0YXRlPT09cmkmJnRoaXMuZG9UaWNrSWRsZSgpLHRoaXMub25UaWNrRW5kKCl9LHIub25UaWNrRW5kPWZ1bmN0aW9uKCl7ZS5wcm90b3R5cGUub25UaWNrRW5kLmNhbGwodGhpcyksdGhpcy5jaGVja0J1ZmZlcigpLHRoaXMuY2hlY2tGcmFnbWVudENoYW5nZWQoKX0sci5kb1RpY2tJZGxlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5obHMsdD10aGlzLmxldmVsTGFzdExvYWRlZCxyPXRoaXMubGV2ZWxzLGk9dGhpcy5tZWRpYTtpZihudWxsIT09dCYmKGl8fCF0aGlzLnN0YXJ0RnJhZ1JlcXVlc3RlZCYmZS5jb25maWcuc3RhcnRGcmFnUHJlZmV0Y2gpJiYoIXRoaXMuYWx0QXVkaW98fCF0aGlzLmF1ZGlvT25seSkpe3ZhciBhPXRoaXMuYnVmZmVyaW5nP2UubmV4dExvYWRMZXZlbDplLmxvYWRMZXZlbDtpZihudWxsIT1yJiZyW2FdKXt2YXIgbj1yW2FdLHM9dGhpcy5nZXRNYWluRndkQnVmZmVySW5mbygpO2lmKG51bGwhPT1zKXt2YXIgbz10aGlzLmdldExldmVsRGV0YWlscygpO2lmKG8mJnRoaXMuX3N0cmVhbUVuZGVkKHMsbykpe3ZhciBsPXt9O3JldHVybiB0aGlzLmFsdEF1ZGlvJiYobC50eXBlPSJ2aWRlbyIpLHRoaXMuaGxzLnRyaWdnZXIoRS5CVUZGRVJfRU9TLGwpLHZvaWQodGhpcy5zdGF0ZT1saSl9aWYodGhpcy5idWZmZXJpbmcpe2UubG9hZExldmVsIT09YSYmLTE9PT1lLm1hbnVhbExldmVsJiZ0aGlzLmxvZygiQWRhcHRpbmcgdG8gbGV2ZWwgIithKyIgZnJvbSBsZXZlbCAiK3RoaXMubGV2ZWwpLHRoaXMubGV2ZWw9ZS5uZXh0TG9hZExldmVsPWE7dmFyIHU9bi5kZXRhaWxzO2lmKCF1fHx0aGlzLnN0YXRlPT09ZGl8fHUubGl2ZSYmdGhpcy5sZXZlbExhc3RMb2FkZWQhPT1uKXJldHVybiB0aGlzLmxldmVsPWEsdm9pZCh0aGlzLnN0YXRlPWRpKTt2YXIgZD1zLmxlbixoPXRoaXMuZ2V0TWF4QnVmZmVyTGVuZ3RoKG4ubWF4Qml0cmF0ZSk7aWYoIShkPj1oKSl7dGhpcy5iYWNrdHJhY2tGcmFnbWVudCYmdGhpcy5iYWNrdHJhY2tGcmFnbWVudC5zdGFydD5zLmVuZCYmKHRoaXMuYmFja3RyYWNrRnJhZ21lbnQ9bnVsbCk7dmFyIGY9dGhpcy5iYWNrdHJhY2tGcmFnbWVudD90aGlzLmJhY2t0cmFja0ZyYWdtZW50LnN0YXJ0OnMuZW5kLGM9dGhpcy5nZXROZXh0RnJhZ21lbnQoZix1KTtpZih0aGlzLmNvdWxkQmFja3RyYWNrJiYhdGhpcy5mcmFnUHJldmlvdXMmJmMmJiJpbml0U2VnbWVudCIhPT1jLnNuJiZ0aGlzLmZyYWdtZW50VHJhY2tlci5nZXRTdGF0ZShjKSE9PUZyKXt2YXIgdixnPShudWxsIT0odj10aGlzLmJhY2t0cmFja0ZyYWdtZW50KT92OmMpLnNuLXUuc3RhcnRTTixtPXUuZnJhZ21lbnRzW2ctMV07bSYmYy5jYz09PW0uY2MmJihjPW0sdGhpcy5mcmFnbWVudFRyYWNrZXIucmVtb3ZlRnJhZ21lbnQobSkpfWVsc2UgdGhpcy5iYWNrdHJhY2tGcmFnbWVudCYmcy5sZW4mJih0aGlzLmJhY2t0cmFja0ZyYWdtZW50PW51bGwpO2lmKGMmJnRoaXMuaXNMb29wTG9hZGluZyhjLGYpKXtpZighYy5nYXApe3ZhciBwPXRoaXMuYXVkaW9Pbmx5JiYhdGhpcy5hbHRBdWRpbz9GOk8seT0ocD09PU8/dGhpcy52aWRlb0J1ZmZlcjp0aGlzLm1lZGlhQnVmZmVyKXx8dGhpcy5tZWRpYTt5JiZ0aGlzLmFmdGVyQnVmZmVyRmx1c2hlZCh5LHAsbnQpfWM9dGhpcy5nZXROZXh0RnJhZ21lbnRMb29wTG9hZGluZyhjLHUscyxudCxoKX1jJiYoIWMuaW5pdFNlZ21lbnR8fGMuaW5pdFNlZ21lbnQuZGF0YXx8dGhpcy5iaXRyYXRlVGVzdHx8KGM9Yy5pbml0U2VnbWVudCksdGhpcy5sb2FkRnJhZ21lbnQoYyxuLGYpKX19fX19fSxyLmxvYWRGcmFnbWVudD1mdW5jdGlvbih0LHIsaSl7dmFyIGE9dGhpcy5mcmFnbWVudFRyYWNrZXIuZ2V0U3RhdGUodCk7dGhpcy5mcmFnQ3VycmVudD10LGE9PT1Dcnx8YT09PVByPyJpbml0U2VnbWVudCI9PT10LnNuP3RoaXMuX2xvYWRJbml0U2VnbWVudCh0LHIpOnRoaXMuYml0cmF0ZVRlc3Q/KHRoaXMubG9nKCJGcmFnbWVudCAiK3Quc24rIiBvZiBsZXZlbCAiK3QubGV2ZWwrIiBpcyBiZWluZyBkb3dubG9hZGVkIHRvIHRlc3QgYml0cmF0ZSBhbmQgd2lsbCBub3QgYmUgYnVmZmVyZWQiKSx0aGlzLl9sb2FkQml0cmF0ZVRlc3RGcmFnKHQscikpOih0aGlzLnN0YXJ0RnJhZ1JlcXVlc3RlZD0hMCxlLnByb3RvdHlwZS5sb2FkRnJhZ21lbnQuY2FsbCh0aGlzLHQscixpKSk6dGhpcy5jbGVhclRyYWNrZXJJZk5lZWRlZCh0KX0sci5nZXRCdWZmZXJlZEZyYWc9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZnJhZ21lbnRUcmFja2VyLmdldEJ1ZmZlcmVkRnJhZyhlLG50KX0sci5mb2xsb3dpbmdCdWZmZXJlZEZyYWc9ZnVuY3Rpb24oZSl7cmV0dXJuIGU/dGhpcy5nZXRCdWZmZXJlZEZyYWcoZS5lbmQrLjUpOm51bGx9LHIuaW1tZWRpYXRlTGV2ZWxTd2l0Y2g9ZnVuY3Rpb24oKXt0aGlzLmFib3J0Q3VycmVudEZyYWcoKSx0aGlzLmZsdXNoTWFpbkJ1ZmZlcigwLE51bWJlci5QT1NJVElWRV9JTkZJTklUWSl9LHIubmV4dExldmVsU3dpdGNoPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZXZlbHMsdD10aGlzLm1lZGlhO2lmKG51bGwhPXQmJnQucmVhZHlTdGF0ZSl7dmFyIHIsaT10aGlzLmdldEFwcGVuZGVkRnJhZyh0LmN1cnJlbnRUaW1lKTtpJiZpLnN0YXJ0PjEmJnRoaXMuZmx1c2hNYWluQnVmZmVyKDAsaS5zdGFydC0xKTt2YXIgYT10aGlzLmdldExldmVsRGV0YWlscygpO2lmKG51bGwhPWEmJmEubGl2ZSl7dmFyIG49dGhpcy5nZXRNYWluRndkQnVmZmVySW5mbygpO2lmKCFufHxuLmxlbjwyKmEudGFyZ2V0ZHVyYXRpb24pcmV0dXJufWlmKCF0LnBhdXNlZCYmZSl7dmFyIHM9ZVt0aGlzLmhscy5uZXh0TG9hZExldmVsXSxvPXRoaXMuZnJhZ0xhc3RLYnBzO3I9byYmdGhpcy5mcmFnQ3VycmVudD90aGlzLmZyYWdDdXJyZW50LmR1cmF0aW9uKnMubWF4Qml0cmF0ZS8oMWUzKm8pKzE6MH1lbHNlIHI9MDt2YXIgbD10aGlzLmdldEJ1ZmZlcmVkRnJhZyh0LmN1cnJlbnRUaW1lK3IpO2lmKGwpe3ZhciB1PXRoaXMuZm9sbG93aW5nQnVmZmVyZWRGcmFnKGwpO2lmKHUpe3RoaXMuYWJvcnRDdXJyZW50RnJhZygpO3ZhciBkPXUubWF4U3RhcnRQVFM/dS5tYXhTdGFydFBUUzp1LnN0YXJ0LGg9dS5kdXJhdGlvbixmPU1hdGgubWF4KGwuZW5kLGQrTWF0aC5taW4oTWF0aC5tYXgoaC10aGlzLmNvbmZpZy5tYXhGcmFnTG9va1VwVG9sZXJhbmNlLGgqKHRoaXMuY291bGRCYWNrdHJhY2s/LjU6LjEyNSkpLGgqKHRoaXMuY291bGRCYWNrdHJhY2s/Ljc1Oi4yNSkpKTt0aGlzLmZsdXNoTWFpbkJ1ZmZlcihmLE51bWJlci5QT1NJVElWRV9JTkZJTklUWSl9fX19LHIuYWJvcnRDdXJyZW50RnJhZz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZnJhZ0N1cnJlbnQ7c3dpdGNoKHRoaXMuZnJhZ0N1cnJlbnQ9bnVsbCx0aGlzLmJhY2t0cmFja0ZyYWdtZW50PW51bGwsZSYmKGUuYWJvcnRSZXF1ZXN0cygpLHRoaXMuZnJhZ21lbnRUcmFja2VyLnJlbW92ZUZyYWdtZW50KGUpKSx0aGlzLnN0YXRlKXtjYXNlIGlpOmNhc2UgYWk6Y2FzZSBuaTpjYXNlIHNpOmNhc2Ugb2k6dGhpcy5zdGF0ZT1yaX10aGlzLm5leHRMb2FkUG9zaXRpb249dGhpcy5nZXRMb2FkUG9zaXRpb24oKX0sci5mbHVzaE1haW5CdWZmZXI9ZnVuY3Rpb24odCxyKXtlLnByb3RvdHlwZS5mbHVzaE1haW5CdWZmZXIuY2FsbCh0aGlzLHQscix0aGlzLmFsdEF1ZGlvPyJ2aWRlbyI6bnVsbCl9LHIub25NZWRpYUF0dGFjaGVkPWZ1bmN0aW9uKHQscil7ZS5wcm90b3R5cGUub25NZWRpYUF0dGFjaGVkLmNhbGwodGhpcyx0LHIpO3ZhciBpPXIubWVkaWE7dGhpcy5vbnZwbGF5aW5nPXRoaXMub25NZWRpYVBsYXlpbmcuYmluZCh0aGlzKSx0aGlzLm9udnNlZWtlZD10aGlzLm9uTWVkaWFTZWVrZWQuYmluZCh0aGlzKSxpLmFkZEV2ZW50TGlzdGVuZXIoInBsYXlpbmciLHRoaXMub252cGxheWluZyksaS5hZGRFdmVudExpc3RlbmVyKCJzZWVrZWQiLHRoaXMub252c2Vla2VkKSx0aGlzLmdhcENvbnRyb2xsZXI9bmV3IEFhKHRoaXMuY29uZmlnLGksdGhpcy5mcmFnbWVudFRyYWNrZXIsdGhpcy5obHMpfSxyLm9uTWVkaWFEZXRhY2hpbmc9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm1lZGlhO3QmJnRoaXMub252cGxheWluZyYmdGhpcy5vbnZzZWVrZWQmJih0LnJlbW92ZUV2ZW50TGlzdGVuZXIoInBsYXlpbmciLHRoaXMub252cGxheWluZyksdC5yZW1vdmVFdmVudExpc3RlbmVyKCJzZWVrZWQiLHRoaXMub252c2Vla2VkKSx0aGlzLm9udnBsYXlpbmc9dGhpcy5vbnZzZWVrZWQ9bnVsbCx0aGlzLnZpZGVvQnVmZmVyPW51bGwpLHRoaXMuZnJhZ1BsYXlpbmc9bnVsbCx0aGlzLmdhcENvbnRyb2xsZXImJih0aGlzLmdhcENvbnRyb2xsZXIuZGVzdHJveSgpLHRoaXMuZ2FwQ29udHJvbGxlcj1udWxsKSxlLnByb3RvdHlwZS5vbk1lZGlhRGV0YWNoaW5nLmNhbGwodGhpcyl9LHIub25NZWRpYVBsYXlpbmc9ZnVuY3Rpb24oKXt0aGlzLnRpY2soKX0sci5vbk1lZGlhU2Vla2VkPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5tZWRpYSx0PWU/ZS5jdXJyZW50VGltZTpudWxsO20odCkmJnRoaXMubG9nKCJNZWRpYSBzZWVrZWQgdG8gIit0LnRvRml4ZWQoMykpO3ZhciByPXRoaXMuZ2V0TWFpbkZ3ZEJ1ZmZlckluZm8oKTtudWxsIT09ciYmMCE9PXIubGVuP3RoaXMudGljaygpOnRoaXMud2FybignTWFpbiBmb3J3YXJkIGJ1ZmZlciBsZW5ndGggb24gInNlZWtlZCIgZXZlbnQgJysocj9yLmxlbjoiZW1wdHkiKSsiKSIpfSxyLm9uTWFuaWZlc3RMb2FkaW5nPWZ1bmN0aW9uKCl7dGhpcy5sb2coIlRyaWdnZXIgQlVGRkVSX1JFU0VUIiksdGhpcy5obHMudHJpZ2dlcihFLkJVRkZFUl9SRVNFVCx2b2lkIDApLHRoaXMuZnJhZ21lbnRUcmFja2VyLnJlbW92ZUFsbEZyYWdtZW50cygpLHRoaXMuY291bGRCYWNrdHJhY2s9ITEsdGhpcy5zdGFydFBvc2l0aW9uPXRoaXMubGFzdEN1cnJlbnRUaW1lPXRoaXMuZnJhZ0xhc3RLYnBzPTAsdGhpcy5sZXZlbHM9dGhpcy5mcmFnUGxheWluZz10aGlzLmJhY2t0cmFja0ZyYWdtZW50PXRoaXMubGV2ZWxMYXN0TG9hZGVkPW51bGwsdGhpcy5hbHRBdWRpbz10aGlzLmF1ZGlvT25seT10aGlzLnN0YXJ0RnJhZ1JlcXVlc3RlZD0hMX0sci5vbk1hbmlmZXN0UGFyc2VkPWZ1bmN0aW9uKGUsdCl7dmFyIHIsaSxhPSExLG49ITE7dC5sZXZlbHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hdWRpb0NvZGVjO3QmJihhPWF8fC0xIT09dC5pbmRleE9mKCJtcDRhLjQwLjIiKSxuPW58fC0xIT09dC5pbmRleE9mKCJtcDRhLjQwLjUiKSl9KSksdGhpcy5hdWRpb0NvZGVjU3dpdGNoPWEmJm4mJiEoImZ1bmN0aW9uIj09dHlwZW9mKG51bGw9PShpPWZpKCkpfHxudWxsPT0ocj1pLnByb3RvdHlwZSk/dm9pZCAwOnIuY2hhbmdlVHlwZSkpLHRoaXMuYXVkaW9Db2RlY1N3aXRjaCYmdGhpcy5sb2coIkJvdGggQUFDL0hFLUFBQyBhdWRpbyBmb3VuZCBpbiBsZXZlbHM7IGRlY2xhcmluZyBsZXZlbCBjb2RlYyBhcyBIRS1BQUMiKSx0aGlzLmxldmVscz10LmxldmVscyx0aGlzLnN0YXJ0RnJhZ1JlcXVlc3RlZD0hMX0sci5vbkxldmVsTG9hZGluZz1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMubGV2ZWxzO2lmKHImJnRoaXMuc3RhdGU9PT1yaSl7dmFyIGk9clt0LmxldmVsXTsoIWkuZGV0YWlsc3x8aS5kZXRhaWxzLmxpdmUmJnRoaXMubGV2ZWxMYXN0TG9hZGVkIT09aXx8dGhpcy53YWl0Rm9yQ2RuVHVuZUluKGkuZGV0YWlscykpJiYodGhpcy5zdGF0ZT1kaSl9fSxyLm9uTGV2ZWxMb2FkZWQ9ZnVuY3Rpb24oZSx0KXt2YXIgcixpPXRoaXMubGV2ZWxzLGE9dC5sZXZlbCxuPXQuZGV0YWlscyxzPW4udG90YWxkdXJhdGlvbjtpZihpKXt0aGlzLmxvZygiTGV2ZWwgIithKyIgbG9hZGVkIFsiK24uc3RhcnRTTisiLCIrbi5lbmRTTisiXSIrKG4ubGFzdFBhcnRTbj8iW3BhcnQtIituLmxhc3RQYXJ0U24rIi0iK24ubGFzdFBhcnRJbmRleCsiXSI6IiIpKyIsIGNjIFsiK24uc3RhcnRDQysiLCAiK24uZW5kQ0MrIl0gZHVyYXRpb246IitzKTt2YXIgbz1pW2FdLGw9dGhpcy5mcmFnQ3VycmVudDshbHx8dGhpcy5zdGF0ZSE9PWFpJiZ0aGlzLnN0YXRlIT09bml8fGwubGV2ZWwhPT10LmxldmVsJiZsLmxvYWRlciYmdGhpcy5hYm9ydEN1cnJlbnRGcmFnKCk7dmFyIHU9MDtpZihuLmxpdmV8fG51bGwhPShyPW8uZGV0YWlscykmJnIubGl2ZSl7dmFyIGQ7aWYodGhpcy5jaGVja0xpdmVVcGRhdGUobiksbi5kZWx0YVVwZGF0ZUZhaWxlZClyZXR1cm47dT10aGlzLmFsaWduUGxheWxpc3RzKG4sby5kZXRhaWxzLG51bGw9PShkPXRoaXMubGV2ZWxMYXN0TG9hZGVkKT92b2lkIDA6ZC5kZXRhaWxzKX1pZihvLmRldGFpbHM9bix0aGlzLmxldmVsTGFzdExvYWRlZD1vLHRoaXMuaGxzLnRyaWdnZXIoRS5MRVZFTF9VUERBVEVELHtkZXRhaWxzOm4sbGV2ZWw6YX0pLHRoaXMuc3RhdGU9PT1kaSl7aWYodGhpcy53YWl0Rm9yQ2RuVHVuZUluKG4pKXJldHVybjt0aGlzLnN0YXRlPXJpfXRoaXMuc3RhcnRGcmFnUmVxdWVzdGVkP24ubGl2ZSYmdGhpcy5zeW5jaHJvbml6ZVRvTGl2ZUVkZ2Uobik6dGhpcy5zZXRTdGFydFBvc2l0aW9uKG4sdSksdGhpcy50aWNrKCl9ZWxzZSB0aGlzLndhcm4oIkxldmVscyB3ZXJlIHJlc2V0IHdoaWxlIGxvYWRpbmcgbGV2ZWwgIithKX0sci5faGFuZGxlRnJhZ21lbnRMb2FkUHJvZ3Jlc3M9ZnVuY3Rpb24oZSl7dmFyIHQscj1lLmZyYWcsaT1lLnBhcnQsYT1lLnBheWxvYWQsbj10aGlzLmxldmVscztpZihuKXt2YXIgcz1uW3IubGV2ZWxdLG89cy5kZXRhaWxzO2lmKCFvKXJldHVybiB0aGlzLndhcm4oIkRyb3BwaW5nIGZyYWdtZW50ICIrci5zbisiIG9mIGxldmVsICIrci5sZXZlbCsiIGFmdGVyIGxldmVsIGRldGFpbHMgd2VyZSByZXNldCIpLHZvaWQgdGhpcy5mcmFnbWVudFRyYWNrZXIucmVtb3ZlRnJhZ21lbnQocik7dmFyIGw9cy52aWRlb0NvZGVjLHU9by5QVFNLbm93bnx8IW8ubGl2ZSxkPW51bGw9PSh0PXIuaW5pdFNlZ21lbnQpP3ZvaWQgMDp0LmRhdGEsaD10aGlzLl9nZXRBdWRpb0NvZGVjKHMpLGY9dGhpcy50cmFuc211eGVyPXRoaXMudHJhbnNtdXhlcnx8bmV3IFJhKHRoaXMuaGxzLG50LHRoaXMuX2hhbmRsZVRyYW5zbXV4Q29tcGxldGUuYmluZCh0aGlzKSx0aGlzLl9oYW5kbGVUcmFuc211eGVyRmx1c2guYmluZCh0aGlzKSksYz1pP2kuaW5kZXg6LTEsdj0tMSE9PWMsZz1uZXcganIoci5sZXZlbCxyLnNuLHIuc3RhdHMuY2h1bmtDb3VudCxhLmJ5dGVMZW5ndGgsYyx2KSxtPXRoaXMuaW5pdFBUU1tyLmNjXTtmLnB1c2goYSxkLGgsbCxyLGksby50b3RhbGR1cmF0aW9uLHUsZyxtKX1lbHNlIHRoaXMud2FybigiTGV2ZWxzIHdlcmUgcmVzZXQgd2hpbGUgZnJhZ21lbnQgbG9hZCB3YXMgaW4gcHJvZ3Jlc3MuIEZyYWdtZW50ICIrci5zbisiIG9mIGxldmVsICIrci5sZXZlbCsiIHdpbGwgbm90IGJlIGJ1ZmZlcmVkIil9LHIub25BdWRpb1RyYWNrU3dpdGNoaW5nPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5hbHRBdWRpbztpZighdC51cmwpe2lmKHRoaXMubWVkaWFCdWZmZXIhPT10aGlzLm1lZGlhKXt0aGlzLmxvZygiU3dpdGNoaW5nIG9uIG1haW4gYXVkaW8sIHVzZSBtZWRpYS5idWZmZXJlZCB0byBzY2hlZHVsZSBtYWluIGZyYWdtZW50IGxvYWRpbmciKSx0aGlzLm1lZGlhQnVmZmVyPXRoaXMubWVkaWE7dmFyIGk9dGhpcy5mcmFnQ3VycmVudDtpJiYodGhpcy5sb2coIlN3aXRjaGluZyB0byBtYWluIGF1ZGlvIHRyYWNrLCBjYW5jZWwgbWFpbiBmcmFnbWVudCBsb2FkIiksaS5hYm9ydFJlcXVlc3RzKCksdGhpcy5mcmFnbWVudFRyYWNrZXIucmVtb3ZlRnJhZ21lbnQoaSkpLHRoaXMucmVzZXRUcmFuc211eGVyKCksdGhpcy5yZXNldExvYWRpbmdTdGF0ZSgpfWVsc2UgdGhpcy5hdWRpb09ubHkmJnRoaXMucmVzZXRUcmFuc211eGVyKCk7dmFyIGE9dGhpcy5obHM7ciYmKGEudHJpZ2dlcihFLkJVRkZFUl9GTFVTSElORyx7c3RhcnRPZmZzZXQ6MCxlbmRPZmZzZXQ6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLHR5cGU6bnVsbH0pLHRoaXMuZnJhZ21lbnRUcmFja2VyLnJlbW92ZUFsbEZyYWdtZW50cygpKSxhLnRyaWdnZXIoRS5BVURJT19UUkFDS19TV0lUQ0hFRCx0KX19LHIub25BdWRpb1RyYWNrU3dpdGNoZWQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10LmlkLGk9ISF0aGlzLmhscy5hdWRpb1RyYWNrc1tyXS51cmw7aWYoaSl7dmFyIGE9dGhpcy52aWRlb0J1ZmZlcjthJiZ0aGlzLm1lZGlhQnVmZmVyIT09YSYmKHRoaXMubG9nKCJTd2l0Y2hpbmcgb24gYWx0ZXJuYXRlIGF1ZGlvLCB1c2UgdmlkZW8uYnVmZmVyZWQgdG8gc2NoZWR1bGUgbWFpbiBmcmFnbWVudCBsb2FkaW5nIiksdGhpcy5tZWRpYUJ1ZmZlcj1hKX10aGlzLmFsdEF1ZGlvPWksdGhpcy50aWNrKCl9LHIub25CdWZmZXJDcmVhdGVkPWZ1bmN0aW9uKGUsdCl7dmFyIHIsaSxhPXQudHJhY2tzLG49ITE7Zm9yKHZhciBzIGluIGEpe3ZhciBvPWFbc107aWYoIm1haW4iPT09by5pZCl7aWYoaT1zLHI9bywidmlkZW8iPT09cyl7dmFyIGw9YVtzXTtsJiYodGhpcy52aWRlb0J1ZmZlcj1sLmJ1ZmZlcil9fWVsc2Ugbj0hMH1uJiZyPyh0aGlzLmxvZygiQWx0ZXJuYXRlIHRyYWNrIGZvdW5kLCB1c2UgIitpKyIuYnVmZmVyZWQgdG8gc2NoZWR1bGUgbWFpbiBmcmFnbWVudCBsb2FkaW5nIiksdGhpcy5tZWRpYUJ1ZmZlcj1yLmJ1ZmZlcik6dGhpcy5tZWRpYUJ1ZmZlcj10aGlzLm1lZGlhfSxyLm9uRnJhZ0J1ZmZlcmVkPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5mcmFnLGk9dC5wYXJ0O2lmKCFyfHxyLnR5cGU9PT1udCl7aWYodGhpcy5mcmFnQ29udGV4dENoYW5nZWQocikpcmV0dXJuIHRoaXMud2FybigiRnJhZ21lbnQgIityLnNuKyhpPyIgcDogIitpLmluZGV4OiIiKSsiIG9mIGxldmVsICIrci5sZXZlbCsiIGZpbmlzaGVkIGJ1ZmZlcmluZywgYnV0IHdhcyBhYm9ydGVkLiBzdGF0ZTogIit0aGlzLnN0YXRlKSx2b2lkKHRoaXMuc3RhdGU9PT1vaSYmKHRoaXMuc3RhdGU9cmkpKTt2YXIgYT1pP2kuc3RhdHM6ci5zdGF0czt0aGlzLmZyYWdMYXN0S2Jwcz1NYXRoLnJvdW5kKDgqYS50b3RhbC8oYS5idWZmZXJpbmcuZW5kLWEubG9hZGluZy5maXJzdCkpLCJpbml0U2VnbWVudCIhPT1yLnNuJiYodGhpcy5mcmFnUHJldmlvdXM9ciksdGhpcy5mcmFnQnVmZmVyZWRDb21wbGV0ZShyLGkpfX0sci5vbkVycm9yPWZ1bmN0aW9uKGUsdCl7dmFyIHI7aWYodC5mYXRhbCl0aGlzLnN0YXRlPXVpO2Vsc2Ugc3dpdGNoKHQuZGV0YWlscyl7Y2FzZSBTLkZSQUdfR0FQOmNhc2UgUy5GUkFHX1BBUlNJTkdfRVJST1I6Y2FzZSBTLkZSQUdfREVDUllQVF9FUlJPUjpjYXNlIFMuRlJBR19MT0FEX0VSUk9SOmNhc2UgUy5GUkFHX0xPQURfVElNRU9VVDpjYXNlIFMuS0VZX0xPQURfRVJST1I6Y2FzZSBTLktFWV9MT0FEX1RJTUVPVVQ6dGhpcy5vbkZyYWdtZW50T3JLZXlMb2FkRXJyb3IobnQsdCk7YnJlYWs7Y2FzZSBTLkxFVkVMX0xPQURfRVJST1I6Y2FzZSBTLkxFVkVMX0xPQURfVElNRU9VVDpjYXNlIFMuTEVWRUxfUEFSU0lOR19FUlJPUjp0LmxldmVsUmV0cnl8fHRoaXMuc3RhdGUhPT1kaXx8KG51bGw9PShyPXQuY29udGV4dCk/dm9pZCAwOnIudHlwZSkhPT1ydHx8KHRoaXMuc3RhdGU9cmkpO2JyZWFrO2Nhc2UgUy5CVUZGRVJfQVBQRU5EX0VSUk9SOmNhc2UgUy5CVUZGRVJfRlVMTF9FUlJPUjppZighdC5wYXJlbnR8fCJtYWluIiE9PXQucGFyZW50KXJldHVybjtpZih0LmRldGFpbHM9PT1TLkJVRkZFUl9BUFBFTkRfRVJST1IpcmV0dXJuIHZvaWQgdGhpcy5yZXNldExvYWRpbmdTdGF0ZSgpO3RoaXMucmVkdWNlTGVuZ3RoQW5kRmx1c2hCdWZmZXIodCkmJnRoaXMuZmx1c2hNYWluQnVmZmVyKDAsTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTticmVhaztjYXNlIFMuSU5URVJOQUxfRVhDRVBUSU9OOnRoaXMucmVjb3ZlcldvcmtlckVycm9yKHQpfX0sci5jaGVja0J1ZmZlcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMubWVkaWEsdD10aGlzLmdhcENvbnRyb2xsZXI7aWYoZSYmdCYmZS5yZWFkeVN0YXRlKXtpZih0aGlzLmxvYWRlZG1ldGFkYXRhfHwhbHIuZ2V0QnVmZmVyZWQoZSkubGVuZ3RoKXt2YXIgcj10aGlzLnN0YXRlIT09cmk/dGhpcy5mcmFnQ3VycmVudDpudWxsO3QucG9sbCh0aGlzLmxhc3RDdXJyZW50VGltZSxyKX10aGlzLmxhc3RDdXJyZW50VGltZT1lLmN1cnJlbnRUaW1lfX0sci5vbkZyYWdMb2FkRW1lcmdlbmN5QWJvcnRlZD1mdW5jdGlvbigpe3RoaXMuc3RhdGU9cmksdGhpcy5sb2FkZWRtZXRhZGF0YXx8KHRoaXMuc3RhcnRGcmFnUmVxdWVzdGVkPSExLHRoaXMubmV4dExvYWRQb3NpdGlvbj10aGlzLnN0YXJ0UG9zaXRpb24pLHRoaXMudGlja0ltbWVkaWF0ZSgpfSxyLm9uQnVmZmVyRmx1c2hlZD1mdW5jdGlvbihlLHQpe3ZhciByPXQudHlwZTtpZihyIT09Rnx8dGhpcy5hdWRpb09ubHkmJiF0aGlzLmFsdEF1ZGlvKXt2YXIgaT0ocj09PU8/dGhpcy52aWRlb0J1ZmZlcjp0aGlzLm1lZGlhQnVmZmVyKXx8dGhpcy5tZWRpYTt0aGlzLmFmdGVyQnVmZmVyRmx1c2hlZChpLHIsbnQpLHRoaXMudGljaygpfX0sci5vbkxldmVsc1VwZGF0ZWQ9ZnVuY3Rpb24oZSx0KXt0aGlzLmxldmVsPi0xJiZ0aGlzLmZyYWdDdXJyZW50JiYodGhpcy5sZXZlbD10aGlzLmZyYWdDdXJyZW50LmxldmVsKSx0aGlzLmxldmVscz10LmxldmVsc30sci5zd2FwQXVkaW9Db2RlYz1mdW5jdGlvbigpe3RoaXMuYXVkaW9Db2RlY1N3YXA9IXRoaXMuYXVkaW9Db2RlY1N3YXB9LHIuc2Vla1RvU3RhcnRQb3M9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1lZGlhO2lmKGUpe3ZhciB0PWUuY3VycmVudFRpbWUscj10aGlzLnN0YXJ0UG9zaXRpb247aWYocj49MCYmdDxyKXtpZihlLnNlZWtpbmcpcmV0dXJuIHZvaWQgdGhpcy5sb2coImNvdWxkIG5vdCBzZWVrIHRvICIrcisiLCBhbHJlYWR5IHNlZWtpbmcgYXQgIit0KTt2YXIgaT1sci5nZXRCdWZmZXJlZChlKSxhPShpLmxlbmd0aD9pLnN0YXJ0KDApOjApLXI7YT4wJiYoYTx0aGlzLmNvbmZpZy5tYXhCdWZmZXJIb2xlfHxhPHRoaXMuY29uZmlnLm1heEZyYWdMb29rVXBUb2xlcmFuY2UpJiYodGhpcy5sb2coImFkanVzdGluZyBzdGFydCBwb3NpdGlvbiBieSAiK2ErIiB0byBtYXRjaCBidWZmZXIgc3RhcnQiKSxyKz1hLHRoaXMuc3RhcnRQb3NpdGlvbj1yKSx0aGlzLmxvZygic2VlayB0byB0YXJnZXQgc3RhcnQgcG9zaXRpb24gIityKyIgZnJvbSBjdXJyZW50IHRpbWUgIit0KSxlLmN1cnJlbnRUaW1lPXJ9fX0sci5fZ2V0QXVkaW9Db2RlYz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvbmZpZy5kZWZhdWx0QXVkaW9Db2RlY3x8ZS5hdWRpb0NvZGVjO3JldHVybiB0aGlzLmF1ZGlvQ29kZWNTd2FwJiZ0JiYodGhpcy5sb2coIlN3YXBwaW5nIGF1ZGlvIGNvZGVjIiksdD0tMSE9PXQuaW5kZXhPZigibXA0YS40MC41Iik/Im1wNGEuNDAuMiI6Im1wNGEuNDAuNSIpLHR9LHIuX2xvYWRCaXRyYXRlVGVzdEZyYWc9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2UuYml0cmF0ZVRlc3Q9ITAsdGhpcy5fZG9GcmFnTG9hZChlLHQpLnRoZW4oKGZ1bmN0aW9uKGkpe3ZhciBhPXIuaGxzO2lmKGkmJiFyLmZyYWdDb250ZXh0Q2hhbmdlZChlKSl7dC5mcmFnbWVudEVycm9yPTAsci5zdGF0ZT1yaSxyLnN0YXJ0RnJhZ1JlcXVlc3RlZD0hMSxyLmJpdHJhdGVUZXN0PSExO3ZhciBuPWUuc3RhdHM7bi5wYXJzaW5nLnN0YXJ0PW4ucGFyc2luZy5lbmQ9bi5idWZmZXJpbmcuc3RhcnQ9bi5idWZmZXJpbmcuZW5kPXNlbGYucGVyZm9ybWFuY2Uubm93KCksYS50cmlnZ2VyKEUuRlJBR19MT0FERUQsaSksZS5iaXRyYXRlVGVzdD0hMX19KSl9LHIuX2hhbmRsZVRyYW5zbXV4Q29tcGxldGU9ZnVuY3Rpb24oZSl7dmFyIHQscj0ibWFpbiIsaT10aGlzLmhscyxhPWUucmVtdXhSZXN1bHQsbj1lLmNodW5rTWV0YSxzPXRoaXMuZ2V0Q3VycmVudENvbnRleHQobik7aWYocyl7dmFyIG89cy5mcmFnLGw9cy5wYXJ0LHU9cy5sZXZlbCxkPWEudmlkZW8saD1hLnRleHQsZj1hLmlkMyxjPWEuaW5pdFNlZ21lbnQsdj11LmRldGFpbHMsZz10aGlzLmFsdEF1ZGlvP3ZvaWQgMDphLmF1ZGlvO2lmKHRoaXMuZnJhZ0NvbnRleHRDaGFuZ2VkKG8pKXRoaXMuZnJhZ21lbnRUcmFja2VyLnJlbW92ZUZyYWdtZW50KG8pO2Vsc2V7aWYodGhpcy5zdGF0ZT1zaSxjKXtpZihudWxsIT1jJiZjLnRyYWNrcyl7dmFyIHA9by5pbml0U2VnbWVudHx8bzt0aGlzLl9idWZmZXJJbml0U2VnbWVudCh1LGMudHJhY2tzLHAsbiksaS50cmlnZ2VyKEUuRlJBR19QQVJTSU5HX0lOSVRfU0VHTUVOVCx7ZnJhZzpwLGlkOnIsdHJhY2tzOmMudHJhY2tzfSl9dmFyIHk9Yy5pbml0UFRTLFQ9Yy50aW1lc2NhbGU7bSh5KSYmKHRoaXMuaW5pdFBUU1tvLmNjXT17YmFzZVRpbWU6eSx0aW1lc2NhbGU6VH0saS50cmlnZ2VyKEUuSU5JVF9QVFNfRk9VTkQse2ZyYWc6byxpZDpyLGluaXRQVFM6eSx0aW1lc2NhbGU6VH0pKX1pZihkJiZ2JiYiaW5pdFNlZ21lbnQiIT09by5zbil7dmFyIFM9di5mcmFnbWVudHNbby5zbi0xLXYuc3RhcnRTTl0sTD1vLnNuPT09di5zdGFydFNOLFI9IVN8fG8uY2M+Uy5jYztpZighMSE9PWEuaW5kZXBlbmRlbnQpe3ZhciBBPWQuc3RhcnRQVFMsYj1kLmVuZFBUUyxrPWQuc3RhcnREVFMsRD1kLmVuZERUUztpZihsKWwuZWxlbWVudGFyeVN0cmVhbXNbZC50eXBlXT17c3RhcnRQVFM6QSxlbmRQVFM6YixzdGFydERUUzprLGVuZERUUzpEfTtlbHNlIGlmKGQuZmlyc3RLZXlGcmFtZSYmZC5pbmRlcGVuZGVudCYmMT09PW4uaWQmJiFSJiYodGhpcy5jb3VsZEJhY2t0cmFjaz0hMCksZC5kcm9wcGVkJiZkLmluZGVwZW5kZW50KXt2YXIgXz10aGlzLmdldE1haW5Gd2RCdWZmZXJJbmZvKCkseD0oXz9fLmVuZDp0aGlzLmdldExvYWRQb3NpdGlvbigpKSt0aGlzLmNvbmZpZy5tYXhCdWZmZXJIb2xlLHc9ZC5maXJzdEtleUZyYW1lUFRTP2QuZmlyc3RLZXlGcmFtZVBUUzpBO2lmKCFMJiZ4PHctdGhpcy5jb25maWcubWF4QnVmZmVySG9sZSYmIVIpcmV0dXJuIHZvaWQgdGhpcy5iYWNrdHJhY2sobyk7UiYmKG8uZ2FwPSEwKSxvLnNldEVsZW1lbnRhcnlTdHJlYW1JbmZvKGQudHlwZSxvLnN0YXJ0LGIsby5zdGFydCxELCEwKX1lbHNlIEwmJkE+MiYmKG8uZ2FwPSEwKTtvLnNldEVsZW1lbnRhcnlTdHJlYW1JbmZvKGQudHlwZSxBLGIsayxEKSx0aGlzLmJhY2t0cmFja0ZyYWdtZW50JiYodGhpcy5iYWNrdHJhY2tGcmFnbWVudD1vKSx0aGlzLmJ1ZmZlckZyYWdtZW50RGF0YShkLG8sbCxuLEx8fFIpfWVsc2V7aWYoIUwmJiFSKXJldHVybiB2b2lkIHRoaXMuYmFja3RyYWNrKG8pO28uZ2FwPSEwfX1pZihnKXt2YXIgQz1nLnN0YXJ0UFRTLEk9Zy5lbmRQVFMsUD1nLnN0YXJ0RFRTLE89Zy5lbmREVFM7bCYmKGwuZWxlbWVudGFyeVN0cmVhbXNbRl09e3N0YXJ0UFRTOkMsZW5kUFRTOkksc3RhcnREVFM6UCxlbmREVFM6T30pLG8uc2V0RWxlbWVudGFyeVN0cmVhbUluZm8oRixDLEksUCxPKSx0aGlzLmJ1ZmZlckZyYWdtZW50RGF0YShnLG8sbCxuKX1pZih2JiZudWxsIT1mJiZudWxsIT0odD1mLnNhbXBsZXMpJiZ0Lmxlbmd0aCl7dmFyIE09e2lkOnIsZnJhZzpvLGRldGFpbHM6dixzYW1wbGVzOmYuc2FtcGxlc307aS50cmlnZ2VyKEUuRlJBR19QQVJTSU5HX01FVEFEQVRBLE0pfWlmKHYmJmgpe3ZhciBOPXtpZDpyLGZyYWc6byxkZXRhaWxzOnYsc2FtcGxlczpoLnNhbXBsZXN9O2kudHJpZ2dlcihFLkZSQUdfUEFSU0lOR19VU0VSREFUQSxOKX19fWVsc2UgdGhpcy5yZXNldFdoZW5NaXNzaW5nQ29udGV4dChuKX0sci5fYnVmZmVySW5pdFNlZ21lbnQ9ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIGE9dGhpcztpZih0aGlzLnN0YXRlPT09c2kpe3RoaXMuYXVkaW9Pbmx5PSEhdC5hdWRpbyYmIXQudmlkZW8sdGhpcy5hbHRBdWRpbyYmIXRoaXMuYXVkaW9Pbmx5JiZkZWxldGUgdC5hdWRpbzt2YXIgbj10LmF1ZGlvLHM9dC52aWRlbyxvPXQuYXVkaW92aWRlbztpZihuKXt2YXIgbD1lLmF1ZGlvQ29kZWMsdT1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7aWYodGhpcy5hdWRpb0NvZGVjU3dpdGNoKXtsJiYobD0tMSE9PWwuaW5kZXhPZigibXA0YS40MC41Iik/Im1wNGEuNDAuMiI6Im1wNGEuNDAuNSIpO3ZhciBkPW4ubWV0YWRhdGE7ZCYmImNoYW5uZWxDb3VudCJpbiBkJiYxIT09KGQuY2hhbm5lbENvdW50fHwxKSYmLTE9PT11LmluZGV4T2YoImZpcmVmb3giKSYmKGw9Im1wNGEuNDAuNSIpfWwmJi0xIT09bC5pbmRleE9mKCJtcDRhLjQwLjUiKSYmLTEhPT11LmluZGV4T2YoImFuZHJvaWQiKSYmImF1ZGlvL21wZWciIT09bi5jb250YWluZXImJihsPSJtcDRhLjQwLjIiLHRoaXMubG9nKCJBbmRyb2lkOiBmb3JjZSBhdWRpbyBjb2RlYyB0byAiK2wpKSxlLmF1ZGlvQ29kZWMmJmUuYXVkaW9Db2RlYyE9PWwmJnRoaXMubG9nKCdTd2FwcGluZyBtYW5pZmVzdCBhdWRpbyBjb2RlYyAiJytlLmF1ZGlvQ29kZWMrJyIgZm9yICInK2wrJyInKSxuLmxldmVsQ29kZWM9bCxuLmlkPSJtYWluIix0aGlzLmxvZygiSW5pdCBhdWRpbyBidWZmZXIsIGNvbnRhaW5lcjoiK24uY29udGFpbmVyKyIsIGNvZGVjc1tzZWxlY3RlZC9sZXZlbC9wYXJzZWRdPVsiKyhsfHwiIikrIi8iKyhlLmF1ZGlvQ29kZWN8fCIiKSsiLyIrbi5jb2RlYysiXSIpfXMmJihzLmxldmVsQ29kZWM9ZS52aWRlb0NvZGVjLHMuaWQ9Im1haW4iLHRoaXMubG9nKCJJbml0IHZpZGVvIGJ1ZmZlciwgY29udGFpbmVyOiIrcy5jb250YWluZXIrIiwgY29kZWNzW2xldmVsL3BhcnNlZF09WyIrKGUudmlkZW9Db2RlY3x8IiIpKyIvIitzLmNvZGVjKyJdIikpLG8mJnRoaXMubG9nKCJJbml0IGF1ZGlvdmlkZW8gYnVmZmVyLCBjb250YWluZXI6IitvLmNvbnRhaW5lcisiLCBjb2RlY3NbbGV2ZWwvcGFyc2VkXT1bIitlLmNvZGVjcysiLyIrby5jb2RlYysiXSIpLHRoaXMuaGxzLnRyaWdnZXIoRS5CVUZGRVJfQ09ERUNTLHQpLE9iamVjdC5rZXlzKHQpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPXRbZV0uaW5pdFNlZ21lbnQ7bnVsbCE9biYmbi5ieXRlTGVuZ3RoJiZhLmhscy50cmlnZ2VyKEUuQlVGRkVSX0FQUEVORElORyx7dHlwZTplLGRhdGE6bixmcmFnOnIscGFydDpudWxsLGNodW5rTWV0YTppLHBhcmVudDpyLnR5cGV9KX0pKSx0aGlzLnRpY2tJbW1lZGlhdGUoKX19LHIuZ2V0TWFpbkZ3ZEJ1ZmZlckluZm89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRGd2RCdWZmZXJJbmZvKHRoaXMubWVkaWFCdWZmZXI/dGhpcy5tZWRpYUJ1ZmZlcjp0aGlzLm1lZGlhLG50KX0sci5iYWNrdHJhY2s9ZnVuY3Rpb24oZSl7dGhpcy5jb3VsZEJhY2t0cmFjaz0hMCx0aGlzLmJhY2t0cmFja0ZyYWdtZW50PWUsdGhpcy5yZXNldFRyYW5zbXV4ZXIoKSx0aGlzLmZsdXNoQnVmZmVyR2FwKGUpLHRoaXMuZnJhZ21lbnRUcmFja2VyLnJlbW92ZUZyYWdtZW50KGUpLHRoaXMuZnJhZ1ByZXZpb3VzPW51bGwsdGhpcy5uZXh0TG9hZFBvc2l0aW9uPWUuc3RhcnQsdGhpcy5zdGF0ZT1yaX0sci5jaGVja0ZyYWdtZW50Q2hhbmdlZD1mdW5jdGlvbigpe3ZhciBlPXRoaXMubWVkaWEsdD1udWxsO2lmKGUmJmUucmVhZHlTdGF0ZT4xJiYhMT09PWUuc2Vla2luZyl7dmFyIHI9ZS5jdXJyZW50VGltZTtpZihsci5pc0J1ZmZlcmVkKGUscik/dD10aGlzLmdldEFwcGVuZGVkRnJhZyhyKTpsci5pc0J1ZmZlcmVkKGUscisuMSkmJih0PXRoaXMuZ2V0QXBwZW5kZWRGcmFnKHIrLjEpKSx0KXt0aGlzLmJhY2t0cmFja0ZyYWdtZW50PW51bGw7dmFyIGk9dGhpcy5mcmFnUGxheWluZyxhPXQubGV2ZWw7aSYmdC5zbj09PWkuc24mJmkubGV2ZWw9PT1hfHwodGhpcy5mcmFnUGxheWluZz10LHRoaXMuaGxzLnRyaWdnZXIoRS5GUkFHX0NIQU5HRUQse2ZyYWc6dH0pLGkmJmkubGV2ZWw9PT1hfHx0aGlzLmhscy50cmlnZ2VyKEUuTEVWRUxfU1dJVENIRUQse2xldmVsOmF9KSl9fX0scyh0LFt7a2V5OiJuZXh0TGV2ZWwiLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMubmV4dEJ1ZmZlcmVkRnJhZztyZXR1cm4gZT9lLmxldmVsOi0xfX0se2tleToiY3VycmVudEZyYWciLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMubWVkaWE7cmV0dXJuIGU/dGhpcy5mcmFnUGxheWluZ3x8dGhpcy5nZXRBcHBlbmRlZEZyYWcoZS5jdXJyZW50VGltZSk6bnVsbH19LHtrZXk6ImN1cnJlbnRQcm9ncmFtRGF0ZVRpbWUiLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMubWVkaWE7aWYoZSl7dmFyIHQ9ZS5jdXJyZW50VGltZSxyPXRoaXMuY3VycmVudEZyYWc7aWYociYmbSh0KSYmbShyLnByb2dyYW1EYXRlVGltZSkpe3ZhciBpPXIucHJvZ3JhbURhdGVUaW1lKzFlMyoodC1yLnN0YXJ0KTtyZXR1cm4gbmV3IERhdGUoaSl9fXJldHVybiBudWxsfX0se2tleToiY3VycmVudExldmVsIixnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmN1cnJlbnRGcmFnO3JldHVybiBlP2UubGV2ZWw6LTF9fSx7a2V5OiJuZXh0QnVmZmVyZWRGcmFnIixnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmN1cnJlbnRGcmFnO3JldHVybiBlP3RoaXMuZm9sbG93aW5nQnVmZmVyZWRGcmFnKGUpOm51bGx9fSx7a2V5OiJmb3JjZVN0YXJ0TG9hZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvcmNlU3RhcnRMb2FkfX1dKSx0fShoaSksa2E9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3ZvaWQgMD09PXQmJih0PXt9KSx0aGlzLmNvbmZpZz12b2lkIDAsdGhpcy51c2VyQ29uZmlnPXZvaWQgMCx0aGlzLmNvcmVDb21wb25lbnRzPXZvaWQgMCx0aGlzLm5ldHdvcmtDb250cm9sbGVycz12b2lkIDAsdGhpcy5zdGFydGVkPSExLHRoaXMuX2VtaXR0ZXI9bmV3IEVhLHRoaXMuX2F1dG9MZXZlbENhcHBpbmc9LTEsdGhpcy5fbWF4SGRjcExldmVsPW51bGwsdGhpcy5hYnJDb250cm9sbGVyPXZvaWQgMCx0aGlzLmJ1ZmZlckNvbnRyb2xsZXI9dm9pZCAwLHRoaXMuY2FwTGV2ZWxDb250cm9sbGVyPXZvaWQgMCx0aGlzLmxhdGVuY3lDb250cm9sbGVyPXZvaWQgMCx0aGlzLmxldmVsQ29udHJvbGxlcj12b2lkIDAsdGhpcy5zdHJlYW1Db250cm9sbGVyPXZvaWQgMCx0aGlzLmF1ZGlvVHJhY2tDb250cm9sbGVyPXZvaWQgMCx0aGlzLnN1YnRpdGxlVHJhY2tDb250cm9sbGVyPXZvaWQgMCx0aGlzLmVtZUNvbnRyb2xsZXI9dm9pZCAwLHRoaXMuY21jZENvbnRyb2xsZXI9dm9pZCAwLHRoaXMuX21lZGlhPW51bGwsdGhpcy51cmw9bnVsbCx0aGlzLnRyaWdnZXJpbmdFeGNlcHRpb249dm9pZCAwLGsodC5kZWJ1Z3x8ITEsIkhscyBpbnN0YW5jZSIpO3ZhciByPXRoaXMuY29uZmlnPWZ1bmN0aW9uKGUsdCl7aWYoKHQubGl2ZVN5bmNEdXJhdGlvbkNvdW50fHx0LmxpdmVNYXhMYXRlbmN5RHVyYXRpb25Db3VudCkmJih0LmxpdmVTeW5jRHVyYXRpb258fHQubGl2ZU1heExhdGVuY3lEdXJhdGlvbikpdGhyb3cgbmV3IEVycm9yKCJJbGxlZ2FsIGhscy5qcyBjb25maWc6IGRvbid0IG1peCB1cCBsaXZlU3luY0R1cmF0aW9uQ291bnQvbGl2ZU1heExhdGVuY3lEdXJhdGlvbkNvdW50IGFuZCBsaXZlU3luY0R1cmF0aW9uL2xpdmVNYXhMYXRlbmN5RHVyYXRpb24iKTtpZih2b2lkIDAhPT10LmxpdmVNYXhMYXRlbmN5RHVyYXRpb25Db3VudCYmKHZvaWQgMD09PXQubGl2ZVN5bmNEdXJhdGlvbkNvdW50fHx0LmxpdmVNYXhMYXRlbmN5RHVyYXRpb25Db3VudDw9dC5saXZlU3luY0R1cmF0aW9uQ291bnQpKXRocm93IG5ldyBFcnJvcignSWxsZWdhbCBobHMuanMgY29uZmlnOiAibGl2ZU1heExhdGVuY3lEdXJhdGlvbkNvdW50IiBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAibGl2ZVN5bmNEdXJhdGlvbkNvdW50IicpO2lmKHZvaWQgMCE9PXQubGl2ZU1heExhdGVuY3lEdXJhdGlvbiYmKHZvaWQgMD09PXQubGl2ZVN5bmNEdXJhdGlvbnx8dC5saXZlTWF4TGF0ZW5jeUR1cmF0aW9uPD10LmxpdmVTeW5jRHVyYXRpb24pKXRocm93IG5ldyBFcnJvcignSWxsZWdhbCBobHMuanMgY29uZmlnOiAibGl2ZU1heExhdGVuY3lEdXJhdGlvbiIgbXVzdCBiZSBncmVhdGVyIHRoYW4gImxpdmVTeW5jRHVyYXRpb24iJyk7dmFyIHI9RHIoZSksYT1bIlRpbWVPdXQiLCJNYXhSZXRyeSIsIlJldHJ5RGVsYXkiLCJNYXhSZXRyeVRpbWVvdXQiXTtyZXR1cm5bIm1hbmlmZXN0IiwibGV2ZWwiLCJmcmFnIl0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIGk9KCJsZXZlbCI9PT1lPyJwbGF5bGlzdCI6ZSkrIkxvYWRQb2xpY3kiLG49dm9pZCAwPT09dFtpXSxzPVtdO2EuZm9yRWFjaCgoZnVuY3Rpb24oYSl7dmFyIG89ZSsiTG9hZGluZyIrYSxsPXRbb107aWYodm9pZCAwIT09bCYmbil7cy5wdXNoKG8pO3ZhciB1PXJbaV0uZGVmYXVsdDtzd2l0Y2godFtpXT17ZGVmYXVsdDp1fSxhKXtjYXNlIlRpbWVPdXQiOnUubWF4TG9hZFRpbWVNcz1sLHUubWF4VGltZVRvRmlyc3RCeXRlTXM9bDticmVhaztjYXNlIk1heFJldHJ5Ijp1LmVycm9yUmV0cnkubWF4TnVtUmV0cnk9bCx1LnRpbWVvdXRSZXRyeS5tYXhOdW1SZXRyeT1sO2JyZWFrO2Nhc2UiUmV0cnlEZWxheSI6dS5lcnJvclJldHJ5LnJldHJ5RGVsYXlNcz1sLHUudGltZW91dFJldHJ5LnJldHJ5RGVsYXlNcz1sO2JyZWFrO2Nhc2UiTWF4UmV0cnlUaW1lb3V0Ijp1LmVycm9yUmV0cnkubWF4UmV0cnlEZWxheU1zPWwsdS50aW1lb3V0UmV0cnkubWF4UmV0cnlEZWxheU1zPWx9fX0pKSxzLmxlbmd0aCYmRC53YXJuKCdobHMuanMgY29uZmlnOiAiJytzLmpvaW4oJyIsICInKSsnIiBzZXR0aW5nKHMpIGFyZSBkZXByZWNhdGVkLCB1c2UgIicraSsnIjogJytKU09OLnN0cmluZ2lmeSh0W2ldKSl9KSksaShpKHt9LHIpLHQpfShlLkRlZmF1bHRDb25maWcsdCk7dGhpcy51c2VyQ29uZmlnPXQsci5wcm9ncmVzc2l2ZSYmX3Iocik7dmFyIGE9ci5hYnJDb250cm9sbGVyLG49ci5idWZmZXJDb250cm9sbGVyLHM9ci5jYXBMZXZlbENvbnRyb2xsZXIsbz1yLmVycm9yQ29udHJvbGxlcixsPXIuZnBzQ29udHJvbGxlcix1PW5ldyBvKHRoaXMpLGQ9dGhpcy5hYnJDb250cm9sbGVyPW5ldyBhKHRoaXMpLGg9dGhpcy5idWZmZXJDb250cm9sbGVyPW5ldyBuKHRoaXMpLGY9dGhpcy5jYXBMZXZlbENvbnRyb2xsZXI9bmV3IHModGhpcyksYz1uZXcgbCh0aGlzKSx2PW5ldyBkdCh0aGlzKSxnPW5ldyBUdCh0aGlzKSxtPXIuY29udGVudFN0ZWVyaW5nQ29udHJvbGxlcixwPW0/bmV3IG0odGhpcyk6bnVsbCx5PXRoaXMubGV2ZWxDb250cm9sbGVyPW5ldyB4cih0aGlzLHApLFQ9bmV3IE9yKHRoaXMpLFM9bmV3IEtyKHRoaXMuY29uZmlnKSxMPXRoaXMuc3RyZWFtQ29udHJvbGxlcj1uZXcgYmEodGhpcyxULFMpO2Yuc2V0U3RyZWFtQ29udHJvbGxlcihMKSxjLnNldFN0cmVhbUNvbnRyb2xsZXIoTCk7dmFyIFI9W3YseSxMXTtwJiZSLnNwbGljZSgxLDAscCksdGhpcy5uZXR3b3JrQ29udHJvbGxlcnM9Ujt2YXIgQT1bZCxoLGYsYyxnLFRdO3RoaXMuYXVkaW9UcmFja0NvbnRyb2xsZXI9dGhpcy5jcmVhdGVDb250cm9sbGVyKHIuYXVkaW9UcmFja0NvbnRyb2xsZXIsUik7dmFyIGI9ci5hdWRpb1N0cmVhbUNvbnRyb2xsZXI7YiYmUi5wdXNoKG5ldyBiKHRoaXMsVCxTKSksdGhpcy5zdWJ0aXRsZVRyYWNrQ29udHJvbGxlcj10aGlzLmNyZWF0ZUNvbnRyb2xsZXIoci5zdWJ0aXRsZVRyYWNrQ29udHJvbGxlcixSKTt2YXIgXz1yLnN1YnRpdGxlU3RyZWFtQ29udHJvbGxlcjtfJiZSLnB1c2gobmV3IF8odGhpcyxULFMpKSx0aGlzLmNyZWF0ZUNvbnRyb2xsZXIoci50aW1lbGluZUNvbnRyb2xsZXIsQSksUy5lbWVDb250cm9sbGVyPXRoaXMuZW1lQ29udHJvbGxlcj10aGlzLmNyZWF0ZUNvbnRyb2xsZXIoci5lbWVDb250cm9sbGVyLEEpLHRoaXMuY21jZENvbnRyb2xsZXI9dGhpcy5jcmVhdGVDb250cm9sbGVyKHIuY21jZENvbnRyb2xsZXIsQSksdGhpcy5sYXRlbmN5Q29udHJvbGxlcj10aGlzLmNyZWF0ZUNvbnRyb2xsZXIoU3QsQSksdGhpcy5jb3JlQ29tcG9uZW50cz1BLFIucHVzaCh1KTt2YXIgeD11Lm9uRXJyb3JPdXQ7ImZ1bmN0aW9uIj09dHlwZW9mIHgmJnRoaXMub24oRS5FUlJPUix4LHUpfWUuaXNNU0VTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gY2koKX0sZS5pc1N1cHBvcnRlZD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbigpe2lmKCFjaSgpKXJldHVybiExO3ZhciBlPUNlKCk7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mKG51bGw9PWU/dm9pZCAwOmUuaXNUeXBlU3VwcG9ydGVkKSYmKFsiYXZjMS40MkUwMUUsbXA0YS40MC4yIiwiYXYwMS4wLjAxTS4wOCIsInZwMDkuMDAuNTAuMDgiXS5zb21lKChmdW5jdGlvbih0KXtyZXR1cm4gZS5pc1R5cGVTdXBwb3J0ZWQoT2UodCwidmlkZW8iKSl9KSl8fFsibXA0YS40MC4yIiwiZkxhQyJdLnNvbWUoKGZ1bmN0aW9uKHQpe3JldHVybiBlLmlzVHlwZVN1cHBvcnRlZChPZSh0LCJhdWRpbyIpKX0pKSl9KCl9LGUuZ2V0TWVkaWFTb3VyY2U9ZnVuY3Rpb24oKXtyZXR1cm4gQ2UoKX07dmFyIHQ9ZS5wcm90b3R5cGU7cmV0dXJuIHQuY3JlYXRlQ29udHJvbGxlcj1mdW5jdGlvbihlLHQpe2lmKGUpe3ZhciByPW5ldyBlKHRoaXMpO3JldHVybiB0JiZ0LnB1c2gocikscn1yZXR1cm4gbnVsbH0sdC5vbj1mdW5jdGlvbihlLHQscil7dm9pZCAwPT09ciYmKHI9dGhpcyksdGhpcy5fZW1pdHRlci5vbihlLHQscil9LHQub25jZT1mdW5jdGlvbihlLHQscil7dm9pZCAwPT09ciYmKHI9dGhpcyksdGhpcy5fZW1pdHRlci5vbmNlKGUsdCxyKX0sdC5yZW1vdmVBbGxMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7dGhpcy5fZW1pdHRlci5yZW1vdmVBbGxMaXN0ZW5lcnMoZSl9LHQub2ZmPWZ1bmN0aW9uKGUsdCxyLGkpe3ZvaWQgMD09PXImJihyPXRoaXMpLHRoaXMuX2VtaXR0ZXIub2ZmKGUsdCxyLGkpfSx0Lmxpc3RlbmVycz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW1pdHRlci5saXN0ZW5lcnMoZSl9LHQuZW1pdD1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMuX2VtaXR0ZXIuZW1pdChlLHQscil9LHQudHJpZ2dlcj1mdW5jdGlvbihlLHQpe2lmKHRoaXMuY29uZmlnLmRlYnVnKXJldHVybiB0aGlzLmVtaXQoZSxlLHQpO3RyeXtyZXR1cm4gdGhpcy5lbWl0KGUsZSx0KX1jYXRjaCh0KXtpZihELmVycm9yKCJBbiBpbnRlcm5hbCBlcnJvciBoYXBwZW5lZCB3aGlsZSBoYW5kbGluZyBldmVudCAiK2UrJy4gRXJyb3IgbWVzc2FnZTogIicrdC5tZXNzYWdlKyciLiBIZXJlIGlzIGEgc3RhY2t0cmFjZTonLHQpLCF0aGlzLnRyaWdnZXJpbmdFeGNlcHRpb24pe3RoaXMudHJpZ2dlcmluZ0V4Y2VwdGlvbj0hMDt2YXIgcj1lPT09RS5FUlJPUjt0aGlzLnRyaWdnZXIoRS5FUlJPUix7dHlwZTpULk9USEVSX0VSUk9SLGRldGFpbHM6Uy5JTlRFUk5BTF9FWENFUFRJT04sZmF0YWw6cixldmVudDplLGVycm9yOnR9KSx0aGlzLnRyaWdnZXJpbmdFeGNlcHRpb249ITF9fXJldHVybiExfSx0Lmxpc3RlbmVyQ291bnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VtaXR0ZXIubGlzdGVuZXJDb3VudChlKX0sdC5kZXN0cm95PWZ1bmN0aW9uKCl7RC5sb2coImRlc3Ryb3kiKSx0aGlzLnRyaWdnZXIoRS5ERVNUUk9ZSU5HLHZvaWQgMCksdGhpcy5kZXRhY2hNZWRpYSgpLHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCksdGhpcy5fYXV0b0xldmVsQ2FwcGluZz0tMSx0aGlzLnVybD1udWxsLHRoaXMubmV0d29ya0NvbnRyb2xsZXJzLmZvckVhY2goKGZ1bmN0aW9uKGUpe3JldHVybiBlLmRlc3Ryb3koKX0pKSx0aGlzLm5ldHdvcmtDb250cm9sbGVycy5sZW5ndGg9MCx0aGlzLmNvcmVDb21wb25lbnRzLmZvckVhY2goKGZ1bmN0aW9uKGUpe3JldHVybiBlLmRlc3Ryb3koKX0pKSx0aGlzLmNvcmVDb21wb25lbnRzLmxlbmd0aD0wO3ZhciBlPXRoaXMuY29uZmlnO2UueGhyU2V0dXA9ZS5mZXRjaFNldHVwPXZvaWQgMCx0aGlzLnVzZXJDb25maWc9bnVsbH0sdC5hdHRhY2hNZWRpYT1mdW5jdGlvbihlKXtELmxvZygiYXR0YWNoTWVkaWEiKSx0aGlzLl9tZWRpYT1lLHRoaXMudHJpZ2dlcihFLk1FRElBX0FUVEFDSElORyx7bWVkaWE6ZX0pfSx0LmRldGFjaE1lZGlhPWZ1bmN0aW9uKCl7RC5sb2coImRldGFjaE1lZGlhIiksdGhpcy50cmlnZ2VyKEUuTUVESUFfREVUQUNISU5HLHZvaWQgMCksdGhpcy5fbWVkaWE9bnVsbH0sdC5sb2FkU291cmNlPWZ1bmN0aW9uKGUpe3RoaXMuc3RvcExvYWQoKTt2YXIgdD10aGlzLm1lZGlhLHI9dGhpcy51cmwsaT10aGlzLnVybD1nLmJ1aWxkQWJzb2x1dGVVUkwoc2VsZi5sb2NhdGlvbi5ocmVmLGUse2Fsd2F5c05vcm1hbGl6ZTohMH0pO3RoaXMuX2F1dG9MZXZlbENhcHBpbmc9LTEsdGhpcy5fbWF4SGRjcExldmVsPW51bGwsRC5sb2coImxvYWRTb3VyY2U6IitpKSx0JiZyJiYociE9PWl8fHRoaXMuYnVmZmVyQ29udHJvbGxlci5oYXNTb3VyY2VUeXBlcygpKSYmKHRoaXMuZGV0YWNoTWVkaWEoKSx0aGlzLmF0dGFjaE1lZGlhKHQpKSx0aGlzLnRyaWdnZXIoRS5NQU5JRkVTVF9MT0FESU5HLHt1cmw6ZX0pfSx0LnN0YXJ0TG9hZD1mdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoZT0tMSksRC5sb2coInN0YXJ0TG9hZCgiK2UrIikiKSx0aGlzLnN0YXJ0ZWQ9ITAsdGhpcy5yZXN1bWVCdWZmZXJpbmcoKTtmb3IodmFyIHQ9MDt0PHRoaXMubmV0d29ya0NvbnRyb2xsZXJzLmxlbmd0aCYmKHRoaXMubmV0d29ya0NvbnRyb2xsZXJzW3RdLnN0YXJ0TG9hZChlKSx0aGlzLnN0YXJ0ZWQmJnRoaXMubmV0d29ya0NvbnRyb2xsZXJzKTt0KyspO30sdC5zdG9wTG9hZD1mdW5jdGlvbigpe0QubG9nKCJzdG9wTG9hZCIpLHRoaXMuc3RhcnRlZD0hMTtmb3IodmFyIGU9MDtlPHRoaXMubmV0d29ya0NvbnRyb2xsZXJzLmxlbmd0aCYmKHRoaXMubmV0d29ya0NvbnRyb2xsZXJzW2VdLnN0b3BMb2FkKCksIXRoaXMuc3RhcnRlZCYmdGhpcy5uZXR3b3JrQ29udHJvbGxlcnMpO2UrKyk7fSx0LnJlc3VtZUJ1ZmZlcmluZz1mdW5jdGlvbigpe0QubG9nKCJyZXN1bWUgYnVmZmVyaW5nIiksdGhpcy5uZXR3b3JrQ29udHJvbGxlcnMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5yZXN1bWVCdWZmZXJpbmcmJmUucmVzdW1lQnVmZmVyaW5nKCl9KSl9LHQucGF1c2VCdWZmZXJpbmc9ZnVuY3Rpb24oKXtELmxvZygicGF1c2UgYnVmZmVyaW5nIiksdGhpcy5uZXR3b3JrQ29udHJvbGxlcnMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5wYXVzZUJ1ZmZlcmluZyYmZS5wYXVzZUJ1ZmZlcmluZygpfSkpfSx0LnN3YXBBdWRpb0NvZGVjPWZ1bmN0aW9uKCl7RC5sb2coInN3YXBBdWRpb0NvZGVjIiksdGhpcy5zdHJlYW1Db250cm9sbGVyLnN3YXBBdWRpb0NvZGVjKCl9LHQucmVjb3Zlck1lZGlhRXJyb3I9ZnVuY3Rpb24oKXtELmxvZygicmVjb3Zlck1lZGlhRXJyb3IiKTt2YXIgZT10aGlzLl9tZWRpYTt0aGlzLmRldGFjaE1lZGlhKCksZSYmdGhpcy5hdHRhY2hNZWRpYShlKX0sdC5yZW1vdmVMZXZlbD1mdW5jdGlvbihlKXt0aGlzLmxldmVsQ29udHJvbGxlci5yZW1vdmVMZXZlbChlKX0sdC5zZXRBdWRpb09wdGlvbj1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gbnVsbD09KHQ9dGhpcy5hdWRpb1RyYWNrQ29udHJvbGxlcik/dm9pZCAwOnQuc2V0QXVkaW9PcHRpb24oZSl9LHQuc2V0U3VidGl0bGVPcHRpb249ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIG51bGw9PSh0PXRoaXMuc3VidGl0bGVUcmFja0NvbnRyb2xsZXIpfHx0LnNldFN1YnRpdGxlT3B0aW9uKGUpLG51bGx9LHMoZSxbe2tleToibGV2ZWxzIixnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxldmVsQ29udHJvbGxlci5sZXZlbHM7cmV0dXJuIGV8fFtdfX0se2tleToiY3VycmVudExldmVsIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHJlYW1Db250cm9sbGVyLmN1cnJlbnRMZXZlbH0sc2V0OmZ1bmN0aW9uKGUpe0QubG9nKCJzZXQgY3VycmVudExldmVsOiIrZSksdGhpcy5sZXZlbENvbnRyb2xsZXIubWFudWFsTGV2ZWw9ZSx0aGlzLnN0cmVhbUNvbnRyb2xsZXIuaW1tZWRpYXRlTGV2ZWxTd2l0Y2goKX19LHtrZXk6Im5leHRMZXZlbCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RyZWFtQ29udHJvbGxlci5uZXh0TGV2ZWx9LHNldDpmdW5jdGlvbihlKXtELmxvZygic2V0IG5leHRMZXZlbDoiK2UpLHRoaXMubGV2ZWxDb250cm9sbGVyLm1hbnVhbExldmVsPWUsdGhpcy5zdHJlYW1Db250cm9sbGVyLm5leHRMZXZlbFN3aXRjaCgpfX0se2tleToibG9hZExldmVsIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZXZlbENvbnRyb2xsZXIubGV2ZWx9LHNldDpmdW5jdGlvbihlKXtELmxvZygic2V0IGxvYWRMZXZlbDoiK2UpLHRoaXMubGV2ZWxDb250cm9sbGVyLm1hbnVhbExldmVsPWV9fSx7a2V5OiJuZXh0TG9hZExldmVsIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZXZlbENvbnRyb2xsZXIubmV4dExvYWRMZXZlbH0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMubGV2ZWxDb250cm9sbGVyLm5leHRMb2FkTGV2ZWw9ZX19LHtrZXk6ImZpcnN0TGV2ZWwiLGdldDpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1heCh0aGlzLmxldmVsQ29udHJvbGxlci5maXJzdExldmVsLHRoaXMubWluQXV0b0xldmVsKX0sc2V0OmZ1bmN0aW9uKGUpe0QubG9nKCJzZXQgZmlyc3RMZXZlbDoiK2UpLHRoaXMubGV2ZWxDb250cm9sbGVyLmZpcnN0TGV2ZWw9ZX19LHtrZXk6InN0YXJ0TGV2ZWwiLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMubGV2ZWxDb250cm9sbGVyLnN0YXJ0TGV2ZWw7cmV0dXJuLTE9PT1lJiZ0aGlzLmFickNvbnRyb2xsZXIuZm9yY2VkQXV0b0xldmVsPi0xP3RoaXMuYWJyQ29udHJvbGxlci5mb3JjZWRBdXRvTGV2ZWw6ZX0sc2V0OmZ1bmN0aW9uKGUpe0QubG9nKCJzZXQgc3RhcnRMZXZlbDoiK2UpLC0xIT09ZSYmKGU9TWF0aC5tYXgoZSx0aGlzLm1pbkF1dG9MZXZlbCkpLHRoaXMubGV2ZWxDb250cm9sbGVyLnN0YXJ0TGV2ZWw9ZX19LHtrZXk6ImNhcExldmVsVG9QbGF5ZXJTaXplIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25maWcuY2FwTGV2ZWxUb1BsYXllclNpemV9LHNldDpmdW5jdGlvbihlKXt2YXIgdD0hIWU7dCE9PXRoaXMuY29uZmlnLmNhcExldmVsVG9QbGF5ZXJTaXplJiYodD90aGlzLmNhcExldmVsQ29udHJvbGxlci5zdGFydENhcHBpbmcoKToodGhpcy5jYXBMZXZlbENvbnRyb2xsZXIuc3RvcENhcHBpbmcoKSx0aGlzLmF1dG9MZXZlbENhcHBpbmc9LTEsdGhpcy5zdHJlYW1Db250cm9sbGVyLm5leHRMZXZlbFN3aXRjaCgpKSx0aGlzLmNvbmZpZy5jYXBMZXZlbFRvUGxheWVyU2l6ZT10KX19LHtrZXk6ImF1dG9MZXZlbENhcHBpbmciLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hdXRvTGV2ZWxDYXBwaW5nfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fYXV0b0xldmVsQ2FwcGluZyE9PWUmJihELmxvZygic2V0IGF1dG9MZXZlbENhcHBpbmc6IitlKSx0aGlzLl9hdXRvTGV2ZWxDYXBwaW5nPWUsdGhpcy5sZXZlbENvbnRyb2xsZXIuY2hlY2tNYXhBdXRvVXBkYXRlZCgpKX19LHtrZXk6ImJhbmR3aWR0aEVzdGltYXRlIixnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmFickNvbnRyb2xsZXIuYndFc3RpbWF0b3I7cmV0dXJuIGU/ZS5nZXRFc3RpbWF0ZSgpOk5hTn0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuYWJyQ29udHJvbGxlci5yZXNldEVzdGltYXRvcihlKX19LHtrZXk6InR0ZmJFc3RpbWF0ZSIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5hYnJDb250cm9sbGVyLmJ3RXN0aW1hdG9yO3JldHVybiBlP2UuZ2V0RXN0aW1hdGVUVEZCKCk6TmFOfX0se2tleToibWF4SGRjcExldmVsIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWF4SGRjcExldmVsfSxzZXQ6ZnVuY3Rpb24oZSl7KGZ1bmN0aW9uKGUpe3JldHVybiBMdC5pbmRleE9mKGUpPi0xfSkoZSkmJnRoaXMuX21heEhkY3BMZXZlbCE9PWUmJih0aGlzLl9tYXhIZGNwTGV2ZWw9ZSx0aGlzLmxldmVsQ29udHJvbGxlci5jaGVja01heEF1dG9VcGRhdGVkKCkpfX0se2tleToiYXV0b0xldmVsRW5hYmxlZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuLTE9PT10aGlzLmxldmVsQ29udHJvbGxlci5tYW51YWxMZXZlbH19LHtrZXk6Im1hbnVhbExldmVsIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZXZlbENvbnRyb2xsZXIubWFudWFsTGV2ZWx9fSx7a2V5OiJtaW5BdXRvTGV2ZWwiLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMubGV2ZWxzLHQ9dGhpcy5jb25maWcubWluQXV0b0JpdHJhdGU7aWYoIWUpcmV0dXJuIDA7Zm9yKHZhciByPWUubGVuZ3RoLGk9MDtpPHI7aSsrKWlmKGVbaV0ubWF4Qml0cmF0ZT49dClyZXR1cm4gaTtyZXR1cm4gMH19LHtrZXk6Im1heEF1dG9MZXZlbCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLmxldmVscyxyPXRoaXMuYXV0b0xldmVsQ2FwcGluZyxpPXRoaXMubWF4SGRjcExldmVsO2lmKGU9LTE9PT1yJiZudWxsIT10JiZ0Lmxlbmd0aD90Lmxlbmd0aC0xOnIsaSlmb3IodmFyIGE9ZTthLS07KXt2YXIgbj10W2FdLmF0dHJzWyJIRENQLUxFVkVMIl07aWYobiYmbjw9aSlyZXR1cm4gYX1yZXR1cm4gZX19LHtrZXk6ImZpcnN0QXV0b0xldmVsIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hYnJDb250cm9sbGVyLmZpcnN0QXV0b0xldmVsfX0se2tleToibmV4dEF1dG9MZXZlbCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWJyQ29udHJvbGxlci5uZXh0QXV0b0xldmVsfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5hYnJDb250cm9sbGVyLm5leHRBdXRvTGV2ZWw9ZX19LHtrZXk6InBsYXlpbmdEYXRlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHJlYW1Db250cm9sbGVyLmN1cnJlbnRQcm9ncmFtRGF0ZVRpbWV9fSx7a2V5OiJtYWluRm9yd2FyZEJ1ZmZlckluZm8iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0cmVhbUNvbnRyb2xsZXIuZ2V0TWFpbkZ3ZEJ1ZmZlckluZm8oKX19LHtrZXk6ImFsbEF1ZGlvVHJhY2tzIixnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmF1ZGlvVHJhY2tDb250cm9sbGVyO3JldHVybiBlP2UuYWxsQXVkaW9UcmFja3M6W119fSx7a2V5OiJhdWRpb1RyYWNrcyIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5hdWRpb1RyYWNrQ29udHJvbGxlcjtyZXR1cm4gZT9lLmF1ZGlvVHJhY2tzOltdfX0se2tleToiYXVkaW9UcmFjayIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5hdWRpb1RyYWNrQ29udHJvbGxlcjtyZXR1cm4gZT9lLmF1ZGlvVHJhY2s6LTF9LHNldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmF1ZGlvVHJhY2tDb250cm9sbGVyO3QmJih0LmF1ZGlvVHJhY2s9ZSl9fSx7a2V5OiJhbGxTdWJ0aXRsZVRyYWNrcyIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zdWJ0aXRsZVRyYWNrQ29udHJvbGxlcjtyZXR1cm4gZT9lLmFsbFN1YnRpdGxlVHJhY2tzOltdfX0se2tleToic3VidGl0bGVUcmFja3MiLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3VidGl0bGVUcmFja0NvbnRyb2xsZXI7cmV0dXJuIGU/ZS5zdWJ0aXRsZVRyYWNrczpbXX19LHtrZXk6InN1YnRpdGxlVHJhY2siLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3VidGl0bGVUcmFja0NvbnRyb2xsZXI7cmV0dXJuIGU/ZS5zdWJ0aXRsZVRyYWNrOi0xfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zdWJ0aXRsZVRyYWNrQ29udHJvbGxlcjt0JiYodC5zdWJ0aXRsZVRyYWNrPWUpfX0se2tleToibWVkaWEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZWRpYX19LHtrZXk6InN1YnRpdGxlRGlzcGxheSIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zdWJ0aXRsZVRyYWNrQ29udHJvbGxlcjtyZXR1cm4hIWUmJmUuc3VidGl0bGVEaXNwbGF5fSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zdWJ0aXRsZVRyYWNrQ29udHJvbGxlcjt0JiYodC5zdWJ0aXRsZURpc3BsYXk9ZSl9fSx7a2V5OiJsb3dMYXRlbmN5TW9kZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uZmlnLmxvd0xhdGVuY3lNb2RlfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5jb25maWcubG93TGF0ZW5jeU1vZGU9ZX19LHtrZXk6ImxpdmVTeW5jUG9zaXRpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxhdGVuY3lDb250cm9sbGVyLmxpdmVTeW5jUG9zaXRpb259fSx7a2V5OiJsYXRlbmN5IixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYXRlbmN5Q29udHJvbGxlci5sYXRlbmN5fX0se2tleToibWF4TGF0ZW5jeSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGF0ZW5jeUNvbnRyb2xsZXIubWF4TGF0ZW5jeX19LHtrZXk6InRhcmdldExhdGVuY3kiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxhdGVuY3lDb250cm9sbGVyLnRhcmdldExhdGVuY3l9fSx7a2V5OiJkcmlmdCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGF0ZW5jeUNvbnRyb2xsZXIuZHJpZnR9fSx7a2V5OiJmb3JjZVN0YXJ0TG9hZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RyZWFtQ29udHJvbGxlci5mb3JjZVN0YXJ0TG9hZH19XSxbe2tleToidmVyc2lvbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIjEuNS4xOCJ9fSx7a2V5OiJFdmVudHMiLGdldDpmdW5jdGlvbigpe3JldHVybiBFfX0se2tleToiRXJyb3JUeXBlcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFR9fSx7a2V5OiJFcnJvckRldGFpbHMiLGdldDpmdW5jdGlvbigpe3JldHVybiBTfX0se2tleToiRGVmYXVsdENvbmZpZyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdENvbmZpZz9lLmRlZmF1bHRDb25maWc6a3J9LHNldDpmdW5jdGlvbih0KXtlLmRlZmF1bHRDb25maWc9dH19XSksZX0oKTtyZXR1cm4ga2EuZGVmYXVsdENvbmZpZz12b2lkIDAsa2F9LCJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9aSgpOiJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGkpOihyPSJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOnJ8fHNlbGYpLkhscz1pKCl9KCExKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGxzLmxpZ2h0Lm1pbi5qcy5tYXAK"},{"meta":{"name":"gm-addstyle-polyfill.js","url":"https://gist.githubusercontent.com/ilyhalight/6eb5bb4dffc7ca9e3c57d6933e2452f3/raw/7ab38af2228d0bed13912e503bc8a9ee4b11828d/gm-addstyle-polyfill.js","ts":1755945990727,"mimetype":"text/javascript"},"source":"aWYgKHR5cGVvZiBHTV9hZGRTdHlsZSA9PSAndW5kZWZpbmVkJykgewogIHRoaXMuR01fYWRkU3R5bGUgPSAoYUNzcykgPT4gewogICAgJ3VzZSBzdHJpY3QnOwogICAgbGV0IGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdOwogICAgaWYgKGhlYWQpIHsKICAgICAgbGV0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICAgICAgc3R5bGUuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvY3NzJyk7CiAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gYUNzczsKICAgICAgaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7CiAgICAgIHJldHVybiBzdHlsZTsKICAgIH0KICAgIHJldHVybiBudWxsOwogIH07Cn0="}]},{"name":"More Speed Buttons on YouTube","options":{"check_for_updates":true,"user_modified":null,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":null,"unwrap":null,"run_at":null,"run_in":null,"tags":[],"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["*://*.youtube.com/*","*://youtube.com/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"orig_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_run_in":[],"orig_noframes":null,"orig_tags":[]}},"storage":{"ts":1758126519702,"data":{}},"enabled":true,"position":2,"file_url":"https://update.greasyfork.org/scripts/549838/More%20Speed%20Buttons%20on%20YouTube.user.js","uuid":"aac8b572-73a4-485d-a1aa-6c0f81c64595","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBNb3JlIFNwZWVkIEJ1dHRvbnMgb24gWW91VHViZQovLyBAbmFtZTp0ciAgICAgIFlvdVR1YmUtZGEgRGFoYSBGYXpsYSBIxLF6IETDvMSfbWVzaQovLyBAbmFtZTpheiAgICAgIFlvdVR1YmUtZGEgRGFoYSDDh294IFPDvHLJmXQgRMO8eW3JmXNpCi8vIEBuYW1lOnJ1ICAgICAg0JHQvtC70YzRiNC1INC60L3QvtC/0L7QuiDRgdC60L7RgNC+0YHRgtC4INC90LAgWW91VHViZQovLyBAZGVzY3JpcHRpb24gIEFkZHMgYnV0dG9ucyB1bmRlciBhIFlvdVR1YmUgdmlkZW8gd2l0aCBtb3JlIHNwZWVkcy4KLy8gQGRlc2NyaXB0aW9uOnRyIFlvdVR1YmUgdmlkZW9zdW51biBhbHTEsW5kYSBkYWhhIGZhemxhIGjEsXogacOnaW4gZMO8xJ9tZWxlciBla2xlci4KLy8gQGRlc2NyaXB0aW9uOmF6IFlvdVR1YmUgdmlkZW9zdW51biBhbHTEsW5kYSBkYWhhIMOnb3ggc8O8csmZdCDDvMOnw7xuIGTDvHltyZlsyZlyIMmZbGF2yZkgZWRpci4KLy8gQGRlc2NyaXB0aW9uOnJ1INCR0L7Qu9GM0YjQtSDQutC90L7Qv9C+0Log0YHQutC+0YDQvtGB0YLQuCDQvdCwIFlvdVR1YmUuCi8vIEBhdXRob3IgICAgICAgT3J1YyBRYWZhcm92IChPcnI4ODgpCi8vIEB2ZXJzaW9uICAgICAgMS4wLjAKLy8gQGxpY2Vuc2UgICAgICBNSVQKLy8gQG1hdGNoICAgICAgICAqOi8vKi55b3V0dWJlLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgKjovL3lvdXR1YmUuY29tLyoKLy8gQGljb24gICAgICAgICBodHRwczovL3d3dy5nb29nbGUuY29tL3MyL2Zhdmljb25zP3N6PTY0JmRvbWFpbj15b3V0dWJlLmNvbQovLyBAZ3JhbnQgICAgICAgIG5vbmUKLy8gQHJ1bi1hdCAgICAgICBkb2N1bWVudC1pZGxlCi8vIEBjb250cmlidXRpb25VUkwgaHR0cHM6Ly93d3cueW91dHViZS5jb20vQE9yclN0dWRpbwovLyBAbmFtZXNwYWNlICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9vcnJzdHVkaW8KLy8gQGhvbWVwYWdlVVJMICBodHRwczovL2dpdGh1Yi5jb20vb3Jyc3R1ZGlvL3lvdXR1YmUtbW9yZS1zcGVlZC1idXR0b25zCi8vIEBzdXBwb3J0VVJMICAgaHR0cHM6Ly9naXRodWIuY29tL29ycnN0dWRpby95b3V0dWJlLW1vcmUtc3BlZWQtYnV0dG9ucy9pc3N1ZXMKLy8gQGRvd25sb2FkVVJMIGh0dHBzOi8vdXBkYXRlLmdyZWFzeWZvcmsub3JnL3NjcmlwdHMvNTQ5ODM4L01vcmUlMjBTcGVlZCUyMEJ1dHRvbnMlMjBvbiUyMFlvdVR1YmUudXNlci5qcwovLyBAdXBkYXRlVVJMIGh0dHBzOi8vdXBkYXRlLmdyZWFzeWZvcmsub3JnL3NjcmlwdHMvNTQ5ODM4L01vcmUlMjBTcGVlZCUyMEJ1dHRvbnMlMjBvbiUyMFlvdVR1YmUubWV0YS5qcwovLyA9PS9Vc2VyU2NyaXB0PT0KCihmdW5jdGlvbigpIHsKICAgICd1c2Ugc3RyaWN0JzsKCiAgICAvLyBCRUdJTiB3YWl0Rm9yS2V5RWxlbWVudHMKICAgIC8qKgogKiBBIHV0aWxpdHkgZnVuY3Rpb24gZm9yIHVzZXJzY3JpcHRzIHRoYXQgZGV0ZWN0cyBhbmQgaGFuZGxlcyBBSkFYZWQgY29udGVudC4KICoKICogVXNhZ2UgZXhhbXBsZToKICoKICogICAgIGZ1bmN0aW9uIGNhbGxiYWNrKGRvbUVsZW1lbnQpIHsKICogICAgICAgICBkb21FbGVtZW50LmlubmVySFRNTCA9ICJUaGlzIHRleHQgaW5zZXJ0ZWQgYnkgd2FpdEZvcktleUVsZW1lbnRzKCkuIjsKICogICAgIH0KICoKICogICAgIHdhaXRGb3JLZXlFbGVtZW50cygiZGl2LmNvbW1lbnRzIiwgY2FsbGJhY2spOwogKiAgICAgLy8gb3IKICogICAgIHdhaXRGb3JLZXlFbGVtZW50cyhzZWxlY3RvckZ1bmN0aW9uLCBjYWxsYmFjayk7CiAqCiAqIEBwYXJhbSB7KHN0cmluZ3xmdW5jdGlvbil9IHNlbGVjdG9yT3JGdW5jdGlvbiAtIFRoZSBzZWxlY3RvciBzdHJpbmcgb3IgZnVuY3Rpb24uCiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uOyB0YWtlcyBhIHNpbmdsZSBET00gZWxlbWVudCBhcyBwYXJhbWV0ZXIuCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgcmV0dXJucyB0cnVlLCBlbGVtZW50IHdpbGwgYmUgcHJvY2Vzc2VkIGFnYWluIG9uIHN1YnNlcXVlbnQgaXRlcmF0aW9ucy4KICogQHBhcmFtIHtib29sZWFufSBbd2FpdE9uY2U9dHJ1ZV0gLSBXaGV0aGVyIHRvIHN0b3AgYWZ0ZXIgdGhlIGZpcnN0IGVsZW1lbnRzIGFyZSBmb3VuZC4KICogQHBhcmFtIHtudW1iZXJ9IFtpbnRlcnZhbD0zMDBdIC0gVGhlIHRpbWUgKG1zKSB0byB3YWl0IGJldHdlZW4gaXRlcmF0aW9ucy4KICogQHBhcmFtIHtudW1iZXJ9IFttYXhJbnRlcnZhbHM9LTFdIC0gVGhlIG1heCBudW1iZXIgb2YgaW50ZXJ2YWxzIHRvIHJ1biAobmVnYXRpdmUgbnVtYmVyIGZvciB1bmxpbWl0ZWQpLgogKi8KICAgIGZ1bmN0aW9uIHdhaXRGb3JLZXlFbGVtZW50cyhzZWxlY3Rvck9yRnVuY3Rpb24sIGNhbGxiYWNrLCB3YWl0T25jZSwgaW50ZXJ2YWwsIG1heEludGVydmFscykgewogICAgICAgIGlmICh0eXBlb2Ygd2FpdE9uY2UgPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIHdhaXRPbmNlID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKHR5cGVvZiBpbnRlcnZhbCA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgaW50ZXJ2YWwgPSAzMDA7CiAgICAgICAgfQogICAgICAgIGlmICh0eXBlb2YgbWF4SW50ZXJ2YWxzID09PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICBtYXhJbnRlcnZhbHMgPSAtMTsKICAgICAgICB9CiAgICAgICAgdmFyIHRhcmdldE5vZGVzID0gKHR5cGVvZiBzZWxlY3Rvck9yRnVuY3Rpb24gPT09ICJmdW5jdGlvbiIpCiAgICAgICAgPyBzZWxlY3Rvck9yRnVuY3Rpb24oKQogICAgICAgIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvck9yRnVuY3Rpb24pOwoKICAgICAgICB2YXIgdGFyZ2V0c0ZvdW5kID0gdGFyZ2V0Tm9kZXMgJiYgdGFyZ2V0Tm9kZXMubGVuZ3RoID4gMDsKICAgICAgICBpZiAodGFyZ2V0c0ZvdW5kKSB7CiAgICAgICAgICAgIHRhcmdldE5vZGVzLmZvckVhY2goZnVuY3Rpb24odGFyZ2V0Tm9kZSkgewogICAgICAgICAgICAgICAgdmFyIGF0dHJBbHJlYWR5Rm91bmQgPSAiZGF0YS11c2Vyc2NyaXB0LWFscmVhZHlGb3VuZCI7CiAgICAgICAgICAgICAgICB2YXIgYWxyZWFkeUZvdW5kID0gdGFyZ2V0Tm9kZS5nZXRBdHRyaWJ1dGUoYXR0ckFscmVhZHlGb3VuZCkgfHwgZmFsc2U7CiAgICAgICAgICAgICAgICBpZiAoIWFscmVhZHlGb3VuZCkgewogICAgICAgICAgICAgICAgICAgIHZhciBjYW5jZWxGb3VuZCA9IGNhbGxiYWNrKHRhcmdldE5vZGUpOwogICAgICAgICAgICAgICAgICAgIGlmIChjYW5jZWxGb3VuZCkgewogICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRzRm91bmQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE5vZGUuc2V0QXR0cmlidXRlKGF0dHJBbHJlYWR5Rm91bmQsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAobWF4SW50ZXJ2YWxzICE9PSAwICYmICEodGFyZ2V0c0ZvdW5kICYmIHdhaXRPbmNlKSkgewogICAgICAgICAgICBtYXhJbnRlcnZhbHMgLT0gMTsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHdhaXRGb3JLZXlFbGVtZW50cyhzZWxlY3Rvck9yRnVuY3Rpb24sIGNhbGxiYWNrLCB3YWl0T25jZSwgaW50ZXJ2YWwsIG1heEludGVydmFscyk7CiAgICAgICAgICAgIH0sIGludGVydmFsKTsKICAgICAgICB9CiAgICB9CiAgICAvLyBFTkQgd2FpdEZvcktleUVsZW1lbnRzCgogICAgLy8gQWN0dWFsIGNvZGUgc3RhcnRzIGhlcmUKICAgIGxldCBmdW5jRG9uZSA9IGZhbHNlOwogICAgY29uc3QgdGl0bGVFbGVtU2VsZWN0b3IgPSAnZGl2I3RpdGxlLnN0eWxlLXNjb3BlLnl0ZC13YXRjaC1tZXRhZGF0YSc7CiAgICBjb25zdCBjb2xvcnMgPSBbJyMwNzI1MjUnLCAnIzI4N0Y1NCcsICcjQzIyNTQ0J107IC8vIGh0dHBzOi8vd3d3LnNjaGVtZWNvbG9yLmNvbS93ZWRkaW5nLWluLWluZGlhLnBocAogICAgaWYgKCFmdW5jRG9uZSkgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3l0LW5hdmlnYXRlLXN0YXJ0JywgYWRkU3BlZWRzKTsKCiAgICBpZiAoZG9jdW1lbnQuYm9keSAmJiAhZnVuY0RvbmUpIHsKICAgICAgICB3YWl0Rm9yS2V5RWxlbWVudHModGl0bGVFbGVtU2VsZWN0b3IsIGFkZFNwZWVkcyk7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkU3BlZWRzKCkgewogICAgICAgIGlmIChmdW5jRG9uZSkgcmV0dXJuOwoKICAgICAgICBsZXQgYmdDb2xvciA9IGNvbG9yc1swXTsKICAgICAgICBsZXQgbW9yZVNwZWVkc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIG1vcmVTcGVlZHNEaXYuaWQgPSAnbW9yZS1zcGVlZHMnOwoKICAgICAgICBmb3IgKGxldCBpID0gMC4yNTsgaSA8IDE2OyBpICs9LjI1KSB7CiAgICAgICAgICAgIGlmIChpID49IDEpIHsgYmdDb2xvciA9IGNvbG9yc1sxXTsgfQogICAgICAgICAgICBpZiAoaSA+IDQpIHsgaSs9Ljc1OyB9CiAgICAgICAgICAgIGlmIChpID4gOCkgeyBpKys7IGJnQ29sb3IgPSBjb2xvcnNbMl07IH0KCiAgICAgICAgICAgIGxldCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICAgICAgYnRuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGJnQ29sb3I7CiAgICAgICAgICAgIGJ0bi5zdHlsZS5tYXJnaW5SaWdodCA9ICc0cHgnOwogICAgICAgICAgICBidG4uc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCAjRDNEM0QzJzsKICAgICAgICAgICAgYnRuLnN0eWxlLmJvcmRlclJhZGl1cyA9ICcycHgnOwogICAgICAgICAgICBidG4uc3R5bGUuY29sb3IgPSAnI2ZmZmZmZic7CiAgICAgICAgICAgIGJ0bi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7CiAgICAgICAgICAgIGJ0bi5zdHlsZS5mb250RmFtaWx5ID0gJ21vbm9zcGFjZSc7CiAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9ICfDlycgKyAoaS50b1N0cmluZygpLnN1YnN0cigwLCAxKSA9PSAnMCcgPyBpLnRvU3RyaW5nKCkuc3Vic3RyKDEpOiBpLnRvU3RyaW5nKCkpOwogICAgICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd2aWRlbycpWzBdLnBsYXliYWNrUmF0ZSA9IGkgfSApOwogICAgICAgICAgICBtb3JlU3BlZWRzRGl2LmFwcGVuZENoaWxkKGJ0bik7CiAgICAgICAgfQoKICAgICAgICBsZXQgdGl0bGVFbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aXRsZUVsZW1TZWxlY3Rvcik7CiAgICAgICAgdGl0bGVFbGVtLmFmdGVyKG1vcmVTcGVlZHNEaXYpOwoKICAgICAgICBmdW5jRG9uZSA9IHRydWU7CiAgICB9Cn0pKCk7Cg=="},{"name":"Auto Skip YouTube Ads","options":{"check_for_updates":true,"user_modified":null,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":null,"unwrap":null,"run_at":null,"run_in":null,"tags":[],"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["https://www.youtube.com/*","https://m.youtube.com/*","https://music.youtube.com/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":["https://studio.youtube.com/*"],"merge_excludes":true,"use_connects":[],"orig_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_run_in":[],"orig_noframes":true,"orig_tags":[]}},"storage":{"ts":1758125752226,"data":{}},"enabled":true,"position":3,"file_url":"https://update.greasyfork.org/scripts/498197/Auto%20Skip%20YouTube%20Ads.user.js","uuid":"4a648450-6468-4c06-8453-10e3a4611ad9","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICAgICBBdXRvIFNraXAgWW91VHViZSBBZHMKLy8gQG5hbWU6YXIgICAgICAgICAgICDYqtiu2LfZiiDYpdi52YTYp9mG2KfYqiBZb3VUdWJlINiq2YTZgtin2KbZitmL2KcKLy8gQG5hbWU6ZXMgICAgICAgICAgICBTYWx0YXIgQXV0b23DoXRpY2FtZW50ZSBBbnVuY2lvcyBEZSBZb3VUdWJlCi8vIEBuYW1lOmZyICAgICAgICAgICAgSWdub3JlciBBdXRvbWF0aXF1ZW1lbnQgTGVzIFB1YmxpY2l0w6lzIFlvdVR1YmUKLy8gQG5hbWU6aGkgICAgICAgICAgICBZb3VUdWJlIOCkteCkv+CknOCljeCknuCkvuCkquCkqCDgpLjgpY3gpLXgpJrgpL7gpLLgpL/gpKQg4KSw4KWC4KSqIOCkuOClhyDgpJvgpYvgpKHgpLzgpYfgpIIKLy8gQG5hbWU6aWQgICAgICAgICAgICBMZXdhdGkgT3RvbWF0aXMgSWtsYW4gWW91VHViZQovLyBAbmFtZTpqYSAgICAgICAgICAgIFlvdVR1YmUg5bqD5ZGK44KS6Ieq5YuV44K544Kt44OD44OXCi8vIEBuYW1lOmtvICAgICAgICAgICAgWW91VHViZSDqtJHqs6Ag7J6Q64+ZIOqxtOuEiOubsOq4sAovLyBAbmFtZTpubCAgICAgICAgICAgIFlvdVR1YmUtQWR2ZXJ0ZW50aWVzIEF1dG9tYXRpc2NoIE92ZXJzbGFhbgovLyBAbmFtZTpwdC1CUiAgICAgICAgIFB1bGFyIEF1dG9tYXRpY2FtZW50ZSBBbsO6bmNpb3MgRG8gWW91VHViZQovLyBAbmFtZTpydSAgICAgICAgICAgINCQ0LLRgtC+0LzQsNGC0LjRh9C10YHQutC40Lkg0J/RgNC+0L/Rg9GB0Log0KDQtdC60LvQsNC80Ysg0J3QsCBZb3VUdWJlCi8vIEBuYW1lOnZpICAgICAgICAgICAgVOG7sSDEkOG7mW5nIELhu48gUXVhIFF14bqjbmcgQ8OhbyBZb3VUdWJlCi8vIEBuYW1lOnpoLUNOICAgICAgICAg6Ieq5Yqo6Lez6L+HIFlvdVR1YmUg5bm/5ZGKCi8vIEBuYW1lOnpoLVRXICAgICAgICAg6Ieq5YuV6Lez6YGOIFlvdVR1YmUg5buj5ZGKCi8vIEBuYW1lc3BhY2UgICAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL3RpZW50cTY0L3VzZXJzY3JpcHRzCi8vIEB2ZXJzaW9uICAgICAgICAgICAgNy4zLjAKLy8gQGRlc2NyaXB0aW9uICAgICAgICBBdXRvbWF0aWNhbGx5IHNraXAgWW91VHViZSBhZHMgaW5zdGFudGx5LiBVbmRldGVjdGVkIGJ5IFlvdVR1YmUgYWQgYmxvY2tlciB3YXJuaW5ncy4KLy8gQGRlc2NyaXB0aW9uOmFyICAgICDYqtiu2LfZiiDYpdi52YTYp9mG2KfYqiBZb3VUdWJlINiq2YTZgtin2KbZitmL2Kcg2LnZhNmJINin2YTZgdmI2LEuINiv2YjZhiDYo9mGINmK2KrZhSDYp9mD2KrYtNin2YEg2LDZhNmDINmF2YYg2K7ZhNin2YQg2KrYrdiw2YrYsdin2Kog2KPYr9in2Kkg2K3YuNixINin2YTYpdi52YTYp9mG2KfYqiDZgdmKIFlvdVR1YmUuCi8vIEBkZXNjcmlwdGlvbjplcyAgICAgT21pdGUgYXV0b23DoXRpY2FtZW50ZSBsb3MgYW51bmNpb3MgZGUgWW91VHViZSBhbCBpbnN0YW50ZS4gU2luIHF1ZSB0ZSBkZXRlY3RlbiBsYXMgYWR2ZXJ0ZW5jaWFzIGRlbCBibG9xdWVhZG9yIGRlIGFudW5jaW9zIGRlIFlvdVR1YmUuCi8vIEBkZXNjcmlwdGlvbjpmciAgICAgSWdub3JleiBhdXRvbWF0aXF1ZW1lbnQgZXQgaW5zdGFudGFuw6ltZW50IGxlcyBwdWJsaWNpdMOpcyBZb3VUdWJlLiBOb24gZMOpdGVjdMOpIHBhciBsZXMgYXZlcnRpc3NlbWVudHMgZHUgYmxvcXVldXIgZGUgcHVibGljaXTDqXMgWW91VHViZS4KLy8gQGRlc2NyaXB0aW9uOmhpICAgICBZb3VUdWJlIOCkteCkv+CknOCljeCknuCkvuCkquCkqOCli+CkgiDgpJXgpYsg4KS44KWN4KS14KSa4KS+4KSy4KS/4KSkIOCksOClguCkqiDgpLjgpYcg4KSk4KWB4KSw4KSC4KSkIOCkm+Cli+CkoeCkvCDgpKbgpYfgpILgpaQgWW91VHViZSDgpLXgpL/gpJzgpY3gpJ7gpL7gpKrgpKgg4KSF4KS14KSw4KWL4KSn4KSVIOCkmuClh+CkpOCkvuCkteCkqOCkv+Ckr+Cli+CkgiDgpKbgpY3gpLXgpL7gpLDgpL4g4KSq4KSk4KS+IOCkqOCkueClgOCkgiDgpLLgpJfgpL7gpK/gpL4g4KSX4KSv4KS+4KWkCi8vIEBkZXNjcmlwdGlvbjppZCAgICAgTGV3YXRpIGlrbGFuIFlvdVR1YmUgc2VjYXJhIG90b21hdGlzIHNlY2FyYSBpbnN0YW4uIFRpZGFrIHRlcmRldGVrc2kgb2xlaCBwZXJpbmdhdGFuIHBlbWJsb2tpciBpa2xhbiBZb3VUdWJlLgovLyBAZGVzY3JpcHRpb246amEgICAgIFlvdVR1YmUg5bqD5ZGK44KS5Y2z5bqn44Gr6Ieq5YuV55qE44Gr44K544Kt44OD44OX44GX44G+44GZ44CCWW91VHViZSDluoPlkYrjg5bjg63jg4Pjgqvjg7zjga7orablkYrjgavjga/mpJzlh7rjgZXjgozjgb7jgZvjgpPjgIIKLy8gQGRlc2NyaXB0aW9uOmtvICAgICBZb3VUdWJlIOq0keqzoOulvCDsponsi5wg7J6Q64+Z7Jy866GcIOqxtOuEiOucgeuLiOuLpC4gWW91VHViZSDqtJHqs6Ag7LCo64uoIOqyveqzoOyXkCDqsJDsp4DrkJjsp4Ag7JWK7Iq164uI64ukLgovLyBAZGVzY3JpcHRpb246bmwgICAgIFNsYSBZb3VUdWJlLWFkdmVydGVudGllcyBkaXJlY3QgYXV0b21hdGlzY2ggb3Zlci4gT25nZW1lcmt0IGRvb3IgWW91VHViZS1hZGJsb2NrZXJ3YWFyc2NodXdpbmdlbi4KLy8gQGRlc2NyaXB0aW9uOnB0LUJSICBQdWxlIGFuw7puY2lvcyBkbyBZb3VUdWJlIGluc3RhbnRhbmVhbWVudGUuIE7Do28gZGV0ZWN0YWRvIHBlbG9zIGF2aXNvcyBkbyBibG9xdWVhZG9yIGRlIGFuw7puY2lvcyBkbyBZb3VUdWJlLgovLyBAZGVzY3JpcHRpb246cnUgICAgINCQ0LLRgtC+0LzQsNGC0LjRh9C10YHQutC4INC/0YDQvtC/0YPRgdC60LDRgtGMINGA0LXQutC70LDQvNGDIFlvdVR1YmUg0LzQs9C90L7QstC10L3QvdC+LiDQndC1INC+0LHQvdCw0YDRg9C20LjQstCw0LXRgtGB0Y8g0L/RgNC10LTRg9C/0YDQtdC20LTQtdC90LjRj9C80Lgg0LHQu9C+0LrQuNGA0L7QstGJ0LjQutC+0LIg0YDQtdC60LvQsNC80YsgWW91VHViZS4KLy8gQGRlc2NyaXB0aW9uOnZpICAgICBU4buxIMSR4buZbmcgYuG7jyBxdWEgcXXhuqNuZyBjw6FvIFlvdVR1YmUgbmdheSBs4bqtcCB04bupYy4gS2jDtG5nIGLhu4sgcGjDoXQgaGnhu4duIGLhu59pIGPhuqNuaCBiw6FvIHRyw6xuaCBjaOG6t24gcXXhuqNuZyBjw6FvIGPhu6dhIFlvdVR1YmUuCi8vIEBkZXNjcmlwdGlvbjp6aC1DTiAg56uL5Y2z6Ieq5Yqo6Lez6L+HIFlvdVR1YmUg5bm/5ZGK44CC5LiN5Lya6KKrIFlvdVR1YmUg5bm/5ZGK5oum5oiq5Zmo6K2m5ZGK5qOA5rWL5Yiw44CCCi8vIEBkZXNjcmlwdGlvbjp6aC1UVyAg56uL5Y2z6Ieq5YuV6Lez6YGOIFlvdVR1YmUg5buj5ZGK44CCIFlvdVR1YmUg5buj5ZGK5pSU5oiq5Zmo6K2m5ZGK5pyq6KKr5YG15ris5Yiw44CCCi8vIEBhdXRob3IgICAgICAgICAgICAgdGllbnRxNjQKLy8gQGljb24gICAgICAgICAgICAgICBodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzY0LzI1MDQvMjUwNDk2NS5wbmcKLy8gQG1hdGNoICAgICAgICAgICAgICBodHRwczovL3d3dy55b3V0dWJlLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAgICAgaHR0cHM6Ly9tLnlvdXR1YmUuY29tLyoKLy8gQG1hdGNoICAgICAgICAgICAgICBodHRwczovL211c2ljLnlvdXR1YmUuY29tLyoKLy8gQGV4Y2x1ZGUgICAgICAgICAgICBodHRwczovL3N0dWRpby55b3V0dWJlLmNvbS8qCi8vIEBncmFudCAgICAgICAgICAgICAgbm9uZQovLyBAbGljZW5zZSAgICAgICAgICAgIE1JVAovLyBAY29tcGF0aWJsZSAgICAgICAgIGZpcmVmb3gKLy8gQGNvbXBhdGlibGUgICAgICAgICBjaHJvbWUKLy8gQGNvbXBhdGlibGUgICAgICAgICBvcGVyYQovLyBAY29tcGF0aWJsZSAgICAgICAgIHNhZmFyaQovLyBAY29tcGF0aWJsZSAgICAgICAgIGVkZ2UKLy8gQG5vZnJhbWVzCi8vIEBob21lcGFnZSAgICAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL3RpZW50cTY0L3VzZXJzY3JpcHRzL3RyZWUvbWFpbi9zY3JpcHRzL0F1dG8tU2tpcC1Zb3VUdWJlLUFkcwovLyBAZG93bmxvYWRVUkwgaHR0cHM6Ly91cGRhdGUuZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy80OTgxOTcvQXV0byUyMFNraXAlMjBZb3VUdWJlJTIwQWRzLnVzZXIuanMKLy8gQHVwZGF0ZVVSTCBodHRwczovL3VwZGF0ZS5ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzQ5ODE5Ny9BdXRvJTIwU2tpcCUyMFlvdVR1YmUlMjBBZHMubWV0YS5qcwovLyA9PS9Vc2VyU2NyaXB0PT0KCmZ1bmN0aW9uIHNraXBBZCgpIHsKICAgIGlmIChjaGVja0lzWW91VHViZVNob3J0cygpKSByZXR1cm4KCiAgICAvLyBUaGlzIGVsZW1lbnQgYXBwZWFycyB3aGVuIGEgdmlkZW8gYWQgYXBwZWFycy4KICAgIGNvbnN0IGFkU2hvd2luZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZC1zaG93aW5nJykKCiAgICAvLyBUaW1lZCBwaWUgY291bnRkb3duIGFkLgogICAgY29uc3QgcGllQ291bnRkb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnl0cC1hZC10aW1lZC1waWUtY291bnRkb3duLWNvbnRhaW5lcicpCgogICAgLy8gU3VydmV5IHF1ZXN0aW9ucyBpbiB2aWRlbyBwbGF5ZXIuCiAgICBjb25zdCBzdXJ2ZXlRdWVzdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcueXRwLWFkLXN1cnZleS1xdWVzdGlvbnMnKQoKICAgIGlmIChhZFNob3dpbmcgPT09IG51bGwgJiYgcGllQ291bnRkb3duID09PSBudWxsICYmIHN1cnZleVF1ZXN0aW9ucyA9PT0gbnVsbCkgcmV0dXJuCgogICAgY29uc3QgbW92aWVQbGF5ZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb3ZpZV9wbGF5ZXInKQogICAgbGV0IHBsYXllckVsCiAgICBsZXQgcGxheWVyCgogICAgaWYgKGlzWW91VHViZU1vYmlsZSB8fCBpc1lvdVR1YmVNdXNpYykgewogICAgICAgIHBsYXllckVsID0gbW92aWVQbGF5ZXJFbAogICAgICAgIHBsYXllciA9IHBsYXllckVsCiAgICB9IGVsc2UgewogICAgICAgIHBsYXllckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3l0ZC1wbGF5ZXInKQogICAgICAgIHBsYXllciA9IHBsYXllckVsICYmIHBsYXllckVsLmdldFBsYXllcigpCiAgICB9CgogICAgaWYgKHBsYXllckVsID09PSBudWxsIHx8IHBsYXllciA9PT0gbnVsbCkgewogICAgICAgIGNvbnNvbGUubG9nKHsKICAgICAgICAgICAgbWVzc2FnZTogJ1BsYXllciBub3QgZm91bmQnLAogICAgICAgICAgICB0aW1lU3RhbXA6IGdldEN1cnJlbnRUaW1lU3RyaW5nKCkKICAgICAgICB9KQogICAgICAgIHJldHVybgogICAgfQoKICAgIC8vIGFkLmNsYXNzTGlzdC5yZW1vdmUoJ2FkLXNob3dpbmcnKQoKICAgIGxldCBhZFZpZGVvID0gbnVsbAoKICAgIGlmIChwaWVDb3VudGRvd24gPT09IG51bGwgJiYgc3VydmV5UXVlc3Rpb25zID09PSBudWxsKSB7CiAgICAgICAgYWRWaWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCiAgICAgICAgICAgICcjeXRkLXBsYXllciB2aWRlby5odG1sNS1tYWluLXZpZGVvLCAjc29uZy12aWRlbyB2aWRlby5odG1sNS1tYWluLXZpZGVvJwogICAgICAgICkKCiAgICAgICAgY29uc29sZS50YWJsZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICdBZCB2aWRlbycsCiAgICAgICAgICAgIHZpZGVvOiBhZFZpZGVvICE9PSBudWxsLAogICAgICAgICAgICBzcmM6IGFkVmlkZW8/LnNyYywKICAgICAgICAgICAgcGF1c2VkOiBhZFZpZGVvPy5wYXVzZWQsCiAgICAgICAgICAgIGN1cnJlbnRUaW1lOiBhZFZpZGVvPy5jdXJyZW50VGltZSwKICAgICAgICAgICAgZHVyYXRpb246IGFkVmlkZW8/LmR1cmF0aW9uLAogICAgICAgICAgICB0aW1lU3RhbXA6IGdldEN1cnJlbnRUaW1lU3RyaW5nKCkKICAgICAgICB9KQoKICAgICAgICBpZiAoYWRWaWRlbyAhPT0gbnVsbCkgewogICAgICAgICAgICBhZFZpZGVvLm11dGVkID0gdHJ1ZQogICAgICAgIH0KICAgICAgICBpZiAoYWRWaWRlbyA9PT0gbnVsbCB8fCAhYWRWaWRlby5zcmMgfHwgYWRWaWRlby5wYXVzZWQgfHwgaXNOYU4oYWRWaWRlby5kdXJhdGlvbikpIHsKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLmxvZyh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICdBZCB2aWRlbyBoYXMgZmluaXNoZWQgbG9hZGluZycsCiAgICAgICAgICAgIHRpbWVTdGFtcDogZ2V0Q3VycmVudFRpbWVTdHJpbmcoKQogICAgICAgIH0pCiAgICB9CgogICAgaWYgKGlzWW91VHViZU11c2ljICYmIGFkVmlkZW8gIT09IG51bGwpIHsKICAgICAgICBhZFZpZGVvLmN1cnJlbnRUaW1lID0gYWRWaWRlby5kdXJhdGlvbgoKICAgICAgICBjb25zb2xlLnRhYmxlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ0FkIHNraXBwZWQnLAogICAgICAgICAgICB0aW1lU3RhbXA6IGdldEN1cnJlbnRUaW1lU3RyaW5nKCksCiAgICAgICAgICAgIGFkU2hvd2luZzogYWRTaG93aW5nICE9PSBudWxsLAogICAgICAgICAgICBwaWVDb3VudGRvd246IHBpZUNvdW50ZG93biAhPT0gbnVsbCwKICAgICAgICAgICAgc3VydmV5UXVlc3Rpb25zOiBzdXJ2ZXlRdWVzdGlvbnMgIT09IG51bGwKICAgICAgICB9KQogICAgfSBlbHNlIHsKICAgICAgICBjb25zdCB2aWRlb0RhdGEgPSBwbGF5ZXIuZ2V0VmlkZW9EYXRhKCkKICAgICAgICBjb25zdCB2aWRlb0lkID0gdmlkZW9EYXRhLnZpZGVvX2lkCiAgICAgICAgY29uc3Qgc3RhcnQgPSBNYXRoLmZsb29yKHBsYXllci5nZXRDdXJyZW50VGltZSgpKQoKICAgICAgICBpZiAobW92aWVQbGF5ZXJFbCAhPT0gbnVsbCAmJiBtb3ZpZVBsYXllckVsLmlzU3VidGl0bGVzT24oKSkgewogICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChtb3ZpZVBsYXllckVsLnRvZ2dsZVN1YnRpdGxlc09uLCAxMDAwKQogICAgICAgIH0KCiAgICAgICAgaWYgKCdsb2FkVmlkZW9XaXRoUGxheWVyVmFycycgaW4gcGxheWVyRWwpIHsKICAgICAgICAgICAgcGxheWVyRWwubG9hZFZpZGVvV2l0aFBsYXllclZhcnMoeyB2aWRlb0lkLCBzdGFydCB9KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHBsYXllckVsLmxvYWRWaWRlb0J5UGxheWVyVmFycyh7IHZpZGVvSWQsIHN0YXJ0IH0pCiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLnRhYmxlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ0FkIHNraXBwZWQnLAogICAgICAgICAgICB2aWRlb0lkLAogICAgICAgICAgICBzdGFydCwKICAgICAgICAgICAgdGl0bGU6IHZpZGVvRGF0YS50aXRsZSwKICAgICAgICAgICAgdGltZVN0YW1wOiBnZXRDdXJyZW50VGltZVN0cmluZygpLAogICAgICAgICAgICBhZFNob3dpbmc6IGFkU2hvd2luZyAhPT0gbnVsbCwKICAgICAgICAgICAgcGllQ291bnRkb3duOiBwaWVDb3VudGRvd24gIT09IG51bGwsCiAgICAgICAgICAgIHN1cnZleVF1ZXN0aW9uczogc3VydmV5UXVlc3Rpb25zICE9PSBudWxsCiAgICAgICAgfSkKICAgIH0KfQoKZnVuY3Rpb24gY2hlY2tJc1lvdVR1YmVTaG9ydHMoKSB7CiAgICByZXR1cm4gbG9jYXRpb24ucGF0aG5hbWUuc3RhcnRzV2l0aCgnL3Nob3J0cy8nKQp9CgpmdW5jdGlvbiBnZXRDdXJyZW50VGltZVN0cmluZygpIHsKICAgIHJldHVybiBuZXcgRGF0ZSgpLnRvVGltZVN0cmluZygpLnNwbGl0KCcgJywgMSlbMF0KfQoKZnVuY3Rpb24gYWRkQ3NzKCkgewogICAgY29uc3QgYWRzU2VsZWN0b3JzID0gWwogICAgICAgIC8vIEFkIGJhbm5lciBpbiB0aGUgdXBwZXIgcmlnaHQgY29ybmVyLCBhYm92ZSB0aGUgdmlkZW8gcGxheWxpc3QuCiAgICAgICAgJyNwbGF5ZXItYWRzJywKICAgICAgICAnI3BhbmVscyA+IHl0ZC1lbmdhZ2VtZW50LXBhbmVsLXNlY3Rpb24tbGlzdC1yZW5kZXJlclt0YXJnZXQtaWQ9ImVuZ2FnZW1lbnQtcGFuZWwtYWRzIl0nLAoKICAgICAgICAvLyBNYXN0aGVhZCBhZCBvbiBob21lIHBhZ2UuCiAgICAgICAgJyNtYXN0aGVhZC1hZCcsCgogICAgICAgIC8vIFNwb25zb3JlZCBhZCB2aWRlbyBpdGVtcyBvbiBob21lIHBhZ2UuCiAgICAgICAgLy8gJ3l0ZC1hZC1zbG90LXJlbmRlcmVyJywKCiAgICAgICAgLy8gJy55dHAtc3VnZ2VzdGVkLWFjdGlvbicsCiAgICAgICAgJy55dC1tZWFsYmFyLXByb21vLXJlbmRlcmVyJywKCiAgICAgICAgLy8gRmVhdHVyZWQgcHJvZHVjdCBhZCBiYW5uZXIgYXQgdGhlIGJvdHRvbSBsZWZ0IG9mIHRoZSB2aWRlby4KICAgICAgICAnLnl0cC1mZWF0dXJlZC1wcm9kdWN0JywKCiAgICAgICAgLy8gUHJvZHVjdHMgc2hlbGYgYWQgYmFubmVyIGJlbG93IHRoZSB2aWRlbyBkZXNjcmlwdGlvbi4KICAgICAgICAneXRkLW1lcmNoLXNoZWxmLXJlbmRlcmVyJywKCiAgICAgICAgLy8gWW91VHViZSBNdXNpYyBQcmVtaXVtIHRyaWFsIHByb21vdGlvbiBkaWFsb2csIGJvdHRvbSBsZWZ0IGNvcm5lci4KICAgICAgICAneXRtdXNpYy1tZWFsYmFyLXByb21vLXJlbmRlcmVyJywKCiAgICAgICAgLy8gWW91VHViZSBNdXNpYyBQcmVtaXVtIHRyaWFsIHByb21vdGlvbiBiYW5uZXIgb24gaG9tZSBwYWdlLgogICAgICAgICd5dG11c2ljLXN0YXRlbWVudC1iYW5uZXItcmVuZGVyZXInCiAgICBdCiAgICBjb25zdCBhZHNTZWxlY3RvciA9IGFkc1NlbGVjdG9ycy5qb2luKCcsJykKICAgIGNvbnN0IGNzcyA9IGAke2Fkc1NlbGVjdG9yfSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfWAKICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKQogICAgc3R5bGUudGV4dENvbnRlbnQgPSBjc3MKICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpCn0KCi8qKgogKiBSZW1vdmUgYWQgZWxlbWVudHMgdXNpbmcgSmF2YVNjcmlwdCBiZWNhdXNlIHRoZXNlIHNlbGVjdG9ycyByZXF1aXJlIHRoZSB1c2Ugb2YgdGhlIENTUwogKiBgOmhhc2Agc2VsZWN0b3Igd2hpY2ggaXMgbm90IHN1cHBvcnRlZCBpbiBvbGRlciBicm93c2VyIHZlcnNpb25zLgogKi8KZnVuY3Rpb24gcmVtb3ZlQWRFbGVtZW50cygpIHsKICAgIGNvbnN0IGFkU2VsZWN0b3JzID0gWwogICAgICAgIC8vIFNwb25zb3JlZCBhZCB2aWRlbyBpdGVtcyBvbiBob21lIHBhZ2UuCiAgICAgICAgLy8gWyd5dGQtcmljaC1pdGVtLXJlbmRlcmVyJywgJy55dGQtYWQtc2xvdC1yZW5kZXJlciddLAoKICAgICAgICAvLyBbJ3l0ZC1yaWNoLXNlY3Rpb24tcmVuZGVyZXInLCAnLnl0ZC1zdGF0ZW1lbnQtYmFubmVyLXJlbmRlcmVyJ10sCgogICAgICAgIC8vIEFkIHZpZGVvcyBvbiBZb3VUdWJlIFNob3J0cy4KICAgICAgICBbJ3l0ZC1yZWVsLXZpZGVvLXJlbmRlcmVyJywgJy55dGQtYWQtc2xvdC1yZW5kZXJlciddCgogICAgICAgIC8vIEFkIGJsb2NrZXIgd2FybmluZyBkaWFsb2cuCiAgICAgICAgLy8gWyd0cC15dC1wYXBlci1kaWFsb2cnLCAnI2ZlZWRiYWNrLnl0ZC1lbmZvcmNlbWVudC1tZXNzYWdlLXZpZXctbW9kZWwnXSwKCiAgICAgICAgLy8gU3VydmV5IGRpYWxvZyBvbiBob21lIHBhZ2UsIGxvY2F0ZWQgYXQgYm90dG9tIHJpZ2h0LgogICAgICAgIC8vIFsndHAteXQtcGFwZXItZGlhbG9nJywgJzpzY29wZSA+IHl0ZC1jaGVja2JveC1zdXJ2ZXktcmVuZGVyZXInXSwKCiAgICAgICAgLy8gU3VydmV5IHRvIHJhdGUgc3VnZ2VzdGVkIGNvbnRlbnQsIGxvY2F0ZWQgYXQgYm90dG9tIHJpZ2h0LgogICAgICAgIC8vIFsndHAteXQtcGFwZXItZGlhbG9nJywgJzpzY29wZSA+IHl0ZC1zaW5nbGUtb3B0aW9uLXN1cnZleS1yZW5kZXJlciddCiAgICBdCiAgICBmb3IgKGNvbnN0IGFkU2VsZWN0b3Igb2YgYWRTZWxlY3RvcnMpIHsKICAgICAgICBjb25zdCBhZEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhZFNlbGVjdG9yWzBdKQogICAgICAgIGlmIChhZEVsID09PSBudWxsKSBjb250aW51ZQogICAgICAgIGNvbnN0IG5lZWRlZEVsID0gYWRFbC5xdWVyeVNlbGVjdG9yKGFkU2VsZWN0b3JbMV0pCiAgICAgICAgaWYgKG5lZWRlZEVsID09PSBudWxsKSBjb250aW51ZQogICAgICAgIGFkRWwucmVtb3ZlKCkKICAgIH0KfQoKY29uc3QgaXNZb3VUdWJlTW9iaWxlID0gbG9jYXRpb24uaG9zdG5hbWUgPT09ICdtLnlvdXR1YmUuY29tJwpjb25zdCBpc1lvdVR1YmVEZXNrdG9wID0gIWlzWW91VHViZU1vYmlsZQoKY29uc3QgaXNZb3VUdWJlTXVzaWMgPSBsb2NhdGlvbi5ob3N0bmFtZSA9PT0gJ211c2ljLnlvdXR1YmUuY29tJwpjb25zdCBpc1lvdVR1YmVWaWRlbyA9ICFpc1lvdVR1YmVNdXNpYwoKYWRkQ3NzKCkKCmlmIChpc1lvdVR1YmVWaWRlbykgewogICAgd2luZG93LnNldEludGVydmFsKHJlbW92ZUFkRWxlbWVudHMsIDEwMDApCiAgICByZW1vdmVBZEVsZW1lbnRzKCkKfQoKd2luZG93LnNldEludGVydmFsKHNraXBBZCwgNTAwKQpza2lwQWQoKQoKLy8gY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihza2lwQWQpCi8vIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwgewovLyAJYXR0cmlidXRlczogdHJ1ZSwKLy8gCWF0dHJpYnV0ZUZpbHRlcjogWydjbGFzcyddLAovLyAJY2hpbGRMaXN0OiB0cnVlLAovLyAJc3VidHJlZTogdHJ1ZQovLyB9KQo="},{"name":"Tabview YouTube Totara","options":{"check_for_updates":true,"user_modified":null,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":null,"unwrap":null,"run_at":null,"run_in":null,"tags":[],"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["https://www.youtube.com/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":["/^https?://\\w+\\.youtube\\.com\\/live_chat.*$/","/^https?://\\S+\\.(txt|png|jpg|jpeg|gif|xml|svg|manifest|log|ini)[^\\/]*$/"],"merge_excludes":true,"use_connects":[],"orig_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-start","orig_run_in":[],"orig_noframes":true,"orig_tags":[]}},"storage":{"ts":1756027020256,"data":{}},"enabled":true,"position":4,"file_url":"https://update.greasyfork.org/scripts/501249/Tabview%20YouTube%20Totara.user.js","uuid":"a56f1a8b-1221-4a1b-81fb-546b642782a9","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICAgICAgICBUYWJ2aWV3IFlvdVR1YmUgVG90YXJhCi8vIEB2ZXJzaW9uICAgICAgICAgICAgICAgNS4wLjExOAovLyBAbmFtZXNwYWNlICAgICAgICAgICAgIGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tLwovLyBAYXV0aG9yICAgICAgICAgICAgICAgIENZIEZ1bmcKLy8gQGxpY2Vuc2UgICAgICAgICAgICAgICBNSVQKLy8gQG1hdGNoICAgICAgICAgICAgICAgICBodHRwczovL3d3dy55b3V0dWJlLmNvbS8qCgovLyBAbmFtZTp6aC1UVyAgICAgICAgICAgIFRhYnZpZXcgWW91VHViZSBUb3RhcmEKLy8gQG5hbWU6amEgICAgICAgICAgICAgICBUYWJ2aWV3IFlvdVR1YmUgVG90YXJhCi8vIEBkZXNjcmlwdGlvbiAgICAgICAgICAgVG8gbWFrZSB0YWJzIGZvciBJbmZvLCBDb21tZW50cywgVmlkZW9zIGFuZCBQbGF5bGlzdAoKLy8gQGRlc2NyaXB0aW9uOmVzICAgICAgICBQYXJhIGNyZWFyIHBlc3Rhw7FhcyBwYXJhIEluZm9ybWFjacOzbiwgQ29tZW50YXJpb3MsIFZpZGVvcyB5IExpc3RhIGRlIHJlcHJvZHVjY2nDs24KLy8gQGRlc2NyaXB0aW9uOmZyICAgICAgICBQb3VyIGNyw6llciBkZXMgb25nbGV0cyBwb3VyIEluZm9zLCBDb21tZW50YWlyZXMsIFZpZMOpb3MgZXQgUGxheWxpc3QKLy8gQGRlc2NyaXB0aW9uOmRlICAgICAgICBVbSBUYWJzIGbDvHIgSW5mb3JtYXRpb25lbiwgS29tbWVudGFyZSwgVmlkZW9zIHVuZCBQbGF5bGlzdCB6dSBlcnN0ZWxsZW4KLy8gQGRlc2NyaXB0aW9uOnpoICAgICAgICDliLbkvZzkv6Hmga/jgIHor4TorrrjgIHop4bpopHlkozmkq3mlL7liJfooajnmoTmoIfnrb4KLy8gQGRlc2NyaXB0aW9uOnpoLUNOICAgICDliLbkvZzkv6Hmga/jgIHor4TorrrjgIHop4bpopHlkozmkq3mlL7liJfooajnmoTmoIfnrb4KLy8gQGRlc2NyaXB0aW9uOnpoLVRXICAgICDoo73kvZzos4foqIrjgIHoqZXoq5bjgIHlvbHniYflkozmkq3mlL7liJfooajnmoTmqJnnsaQKLy8gQGRlc2NyaXB0aW9uOnpoLUhLICAgICDoo73kvZzos4foqIrjgIHoqZXoq5bjgIHlvbHniYfoppbpoLvlkozmkq3mlL7liJfooajnmoTmqJnnsaQKLy8gQGRlc2NyaXB0aW9uOmphICAgICAgICDmg4XloLHjgIHjgrPjg6Hjg7Pjg4jjgIHli5XnlLvjgIHjgYrjgojjgbPlho3nlJ/jg6rjgrnjg4jjga7jgr/jg5bjgpLkvZzmiJDjgZnjgovjgZ/jgoHjgasKLy8gQGRlc2NyaXB0aW9uOmtvICAgICAgICDsoJXrs7QsIOuMk+q4gCwg64+Z7JiB7IOBIOuwjyDsnqzsg50g66qp66Gd7JeQIOuMgO2VnCDtg60g66eM65Ok6riwCi8vIEBkZXNjcmlwdGlvbjpydSAgICAgICAg0KfRgtC+0LHRiyDRgdC+0LfQtNCw0YLRjCDQstC60LvQsNC00LrQuCDQtNC70Y8g0JjQvdGE0L7RgNC80LDRhtC40LgsINCa0L7QvNC80LXQvdGC0LDRgNC40LXQsiwg0JLQuNC00LXQviDQuCDQn9C70LXQudC70LjRgdGC0LAKLy8gQGRlc2NyaXB0aW9uOnB0ICAgICAgICBQYXJhIGZhemVyIGFiYXMgcGFyYSBJbmZvcm1hw6fDtWVzLCBDb21lbnTDoXJpb3MsIFbDrWRlb3MgZSBQbGF5bGlzdAovLyBAZGVzY3JpcHRpb246YXIgICAgICAgINmE2KXZhti02KfYoSDYudmE2KfZhdin2Kog2KrYqNmI2YrYqCDZhNmE2YXYudmE2YjZhdin2Kog2YjYp9mE2KrYudmE2YrZgtin2Kog2YjYp9mE2YHZitiv2YrZiCDZiNmC2KfYptmF2Kkg2KfZhNiq2LTYutmK2YQKCi8vIEBpY29uICAgICAgICAgICAgICAgICAgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3RhYnZpZXcteW91dHViZS9UYWJ2aWV3LVlvdVR1YmUtVG90YXJhL21haW4vaW1hZ2VzL2ljb24xMjhwLnBuZwovLyBAc3VwcG9ydFVSTCAgICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS90YWJ2aWV3LXlvdXR1YmUvVGFidmlldy1Zb3VUdWJlLVRvdGFyYQovLyBAcnVuLWF0ICAgICAgICAgICAgICAgIGRvY3VtZW50LXN0YXJ0Ci8vIEBncmFudCAgICAgICAgICAgICAgICAgR01fZ2V0UmVzb3VyY2VUZXh0Ci8vIEBncmFudCAgICAgICAgICAgICAgICAgR00uZ2V0UmVzb3VyY2VUZXh0Ci8vIEBncmFudCAgICAgICAgICAgICAgICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZAovLyBAZ3JhbnQgICAgICAgICAgICAgICAgIEdNX2FkZEVsZW1lbnQKLy8gQG5vZnJhbWVzCi8vIEBleGNsdWRlICAgICAgICAgICAgICAgL15odHRwcz86Ly9cdytcLnlvdXR1YmVcLmNvbVwvbGl2ZV9jaGF0LiokLwovLyBAZXhjbHVkZSAgICAgICAgICAgICAgIC9eaHR0cHM/Oi8vXFMrXC4odHh0fHBuZ3xqcGd8anBlZ3xnaWZ8eG1sfHN2Z3xtYW5pZmVzdHxsb2d8aW5pKVteXC9dKiQvCi8vIEByZXF1aXJlICAgICAgICAgICAgICAgaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2N5ZnVuZzEwMzEvdXNlcnNjcmlwdC1zdXBwb3J0c0BjMmI3MDdlNDk3N2Y3Nzc5MjA0MmQ0YTUwMTVmYjE4OGFhZTQ3NzJlL2xpYnJhcnkvbmV4dEJyb3dzZXJUaWNrLm1pbi5qcwovLwovLyBAZG93bmxvYWRVUkwgaHR0cHM6Ly91cGRhdGUuZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy81MDEyNDkvVGFidmlldyUyMFlvdVR1YmUlMjBUb3RhcmEudXNlci5qcwovLyBAdXBkYXRlVVJMIGh0dHBzOi8vdXBkYXRlLmdyZWFzeWZvcmsub3JnL3NjcmlwdHMvNTAxMjQ5L1RhYnZpZXclMjBZb3VUdWJlJTIwVG90YXJhLm1ldGEuanMKLy8gPT0vVXNlclNjcmlwdD09CgovKgoKTUlUIExpY2Vuc2UKCkNvcHlyaWdodCAoYykgMjAyNCBjeWZ1bmcxMDMxCgpQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5Cm9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLCB0byBkZWFsCmluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMKdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbApjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMKZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKClRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbApjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgoKVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRQpBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCkxJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sCk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFClNPRlRXQVJFLgoKKi8KCmlmICh0eXBlb2YgdHJ1c3RlZFR5cGVzICE9PSAndW5kZWZpbmVkJyAmJiB0cnVzdGVkVHlwZXMuZGVmYXVsdFBvbGljeSA9PT0gbnVsbCkgewogIGxldCBzID0gcyA9PiBzOwogIHRydXN0ZWRUeXBlcy5jcmVhdGVQb2xpY3koJ2RlZmF1bHQnLCB7IGNyZWF0ZUhUTUw6IHMsIGNyZWF0ZVNjcmlwdFVSTDogcywgY3JlYXRlU2NyaXB0OiBzIH0pOwp9Cgpjb25zdCBkZWZhdWx0UG9saWN5ID0gKHR5cGVvZiB0cnVzdGVkVHlwZXMgIT09ICd1bmRlZmluZWQnICYmIHRydXN0ZWRUeXBlcy5kZWZhdWx0UG9saWN5KSB8fCB7IGNyZWF0ZUhUTUw6IHMgPT4gcyB9OwpmdW5jdGlvbiBjcmVhdGVIVE1MKHMpIHsKICByZXR1cm4gZGVmYXVsdFBvbGljeS5jcmVhdGVIVE1MKHMpOwp9CgpsZXQgdHJ1c3RIVE1MRXJyID0gbnVsbDsKdHJ5IHsKICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKS5pbm5lckhUTUwgPSBjcmVhdGVIVE1MKCcxJyk7Cn0gY2F0Y2ggKGUpIHsKICB0cnVzdEhUTUxFcnIgPSBlOwp9CgppZiAodHJ1c3RIVE1MRXJyKSB7CiAgY29uc29sZS5sb2coYHRydXN0SFRNTEVycmAsIHRydXN0SFRNTEVycik7CiAgdHJ1c3RIVE1MRXJyKCk7IC8vIGV4aXQgdXNlcnNjcmlwdAp9CgoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmNvbnN0IFZBTF9ST1VOREVEX0ExID0gMTI7Cgpjb25zdCBleGVjdXRpb25TY3JpcHQgPSAoY29tbXVuaWNhdGlvbktleSkgPT4gewoKICBjb25zdCBERUJVR181MDg0ID0gZmFsc2U7CiAgY29uc3QgREVCVUdfNTA4NSA9IGZhbHNlOwogIGNvbnN0IFRBQl9BVVRPX1NXSVRDSF9UT19DT01NRU5UUyA9IGZhbHNlOwoKCiAgaWYgKHR5cGVvZiB0cnVzdGVkVHlwZXMgIT09ICd1bmRlZmluZWQnICYmIHRydXN0ZWRUeXBlcy5kZWZhdWx0UG9saWN5ID09PSBudWxsKSB7CiAgICBsZXQgcyA9IHMgPT4gczsKICAgIHRydXN0ZWRUeXBlcy5jcmVhdGVQb2xpY3koJ2RlZmF1bHQnLCB7IGNyZWF0ZUhUTUw6IHMsIGNyZWF0ZVNjcmlwdFVSTDogcywgY3JlYXRlU2NyaXB0OiBzIH0pOwogIH0KICAKICBjb25zdCBkZWZhdWx0UG9saWN5ID0gKHR5cGVvZiB0cnVzdGVkVHlwZXMgIT09ICd1bmRlZmluZWQnICYmIHRydXN0ZWRUeXBlcy5kZWZhdWx0UG9saWN5KSB8fCB7IGNyZWF0ZUhUTUw6IHMgPT4gcyB9OwogIGZ1bmN0aW9uIGNyZWF0ZUhUTUwocykgewogICAgcmV0dXJuIGRlZmF1bHRQb2xpY3kuY3JlYXRlSFRNTChzKTsKICB9CgogIGxldCB0cnVzdEhUTUxFcnIgPSBudWxsOwogIHRyeSB7CiAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKS5pbm5lckhUTUwgPSBjcmVhdGVIVE1MKCcxJyk7CiAgfSBjYXRjaCAoZSkgewogICAgdHJ1c3RIVE1MRXJyID0gZTsKICB9CgogIGlmICh0cnVzdEhUTUxFcnIpIHsKICAgIGNvbnNvbGUubG9nKGB0cnVzdEhUTUxFcnJgLCB0cnVzdEhUTUxFcnIpOwogICAgdHJ1c3RIVE1MRXJyKCk7IC8vIGV4aXQgdXNlcnNjcmlwdAogIH0KCiAgdHJ5IHsKCiAgICBsZXQgZXhlY3V0aW9uRmluaXNoZWQgPSAwOwoKICAgIGlmICh0eXBlb2YgQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5ID09PSAndW5kZWZpbmVkJykgcmV0dXJuOwogICAgaWYgKEN1c3RvbUVsZW1lbnRSZWdpc3RyeS5wcm90b3R5cGUuZGVmaW5lMDAwKSByZXR1cm47CiAgICBpZiAodHlwZW9mIEN1c3RvbUVsZW1lbnRSZWdpc3RyeS5wcm90b3R5cGUuZGVmaW5lICE9PSAnZnVuY3Rpb24nKSByZXR1cm47CgogICAgLyoqIEB0eXBlIHtIVE1MRWxlbWVudH0gKi8KICAgIGNvbnN0IEhUTUxFbGVtZW50XyA9IEhUTUxFbGVtZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvcjsKCiAgICAvKioKICAgICAqICBAcGFyYW0ge0VsZW1lbnR9IGVsbQogICAgICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yCiAgICAgKiBAcmV0dXJucyB7RWxlbWVudCB8IG51bGx9CiAgICAgKiAgKi8KICAgIGNvbnN0IHFzT25lID0gKGVsbSwgc2VsZWN0b3IpID0+IHsKICAgICAgcmV0dXJuIEhUTUxFbGVtZW50Xy5wcm90b3R5cGUucXVlcnlTZWxlY3Rvci5jYWxsKGVsbSwgc2VsZWN0b3IpOwogICAgfQoKICAgIC8qKgogICAgICogIEBwYXJhbSB7RWxlbWVudH0gZWxtCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IKICAgICAqIEByZXR1cm5zIHtOb2RlTGlzdE9mPEVsZW1lbnQ+fQogICAgICogICovCiAgICBjb25zdCBxc0FsbCA9IChlbG0sIHNlbGVjdG9yKSA9PiB7CiAgICAgIHJldHVybiBIVE1MRWxlbWVudF8ucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGwuY2FsbChlbG0sIHNlbGVjdG9yKTsKICAgIH0KCiAgICBjb25zdCBwZHNCYXNlREYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhEb2N1bWVudEZyYWdtZW50LnByb3RvdHlwZSk7CgogICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRG9jdW1lbnRGcmFnbWVudC5wcm90b3R5cGUsIHsKICAgICAgcmVwbGFjZUNoaWxkcmVuMDAwOiBwZHNCYXNlREYucmVwbGFjZUNoaWxkcmVuLAogICAgfSk7CgogICAgY29uc3QgcGRzQmFzZU5vZGUgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhOb2RlLnByb3RvdHlwZSk7CiAgICAvLyBjb25zb2xlLmxvZyhwZHNCYXNlRWxlbWVudC5zZXRBdHRyaWJ1dGUsIHBkc0Jhc2VFbGVtZW50LmdldEF0dHJpYnV0ZSkKCiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhOb2RlLnByb3RvdHlwZSwgewogICAgICBhcHBlbmRDaGlsZDAwMDogcGRzQmFzZU5vZGUuYXBwZW5kQ2hpbGQsCiAgICAgIGluc2VydEJlZm9yZTAwMDogcGRzQmFzZU5vZGUuaW5zZXJ0QmVmb3JlCiAgICB9KTsKCiAgICAvLyBjbGFzcyBCYXNlRWxlbWVudCBleHRlbmRzIEVsZW1lbnR7CgogICAgLy8gfQogICAgY29uc3QgcGRzQmFzZUVsZW1lbnQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhFbGVtZW50LnByb3RvdHlwZSk7CiAgICAvLyBjb25zb2xlLmxvZyhwZHNCYXNlRWxlbWVudC5zZXRBdHRyaWJ1dGUsIHBkc0Jhc2VFbGVtZW50LmdldEF0dHJpYnV0ZSkKCiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhFbGVtZW50LnByb3RvdHlwZSwgewogICAgICBzZXRBdHRyaWJ1dGUwMDA6IHBkc0Jhc2VFbGVtZW50LnNldEF0dHJpYnV0ZSwKICAgICAgZ2V0QXR0cmlidXRlMDAwOiBwZHNCYXNlRWxlbWVudC5nZXRBdHRyaWJ1dGUsCiAgICAgIGhhc0F0dHJpYnV0ZTAwMDogcGRzQmFzZUVsZW1lbnQuaGFzQXR0cmlidXRlLAogICAgICByZW1vdmVBdHRyaWJ1dGUwMDA6IHBkc0Jhc2VFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSwKICAgICAgcXVlcnlTZWxlY3RvcjAwMDogcGRzQmFzZUVsZW1lbnQucXVlcnlTZWxlY3RvciwKICAgICAgcmVwbGFjZUNoaWxkcmVuMDAwOiBwZHNCYXNlRWxlbWVudC5yZXBsYWNlQ2hpbGRyZW4KICAgIH0pOwoKICAgIEVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZTExMSA9IGZ1bmN0aW9uIChwLCB2KSB7CiAgICAgIHYgPSBgJHt2fWA7CiAgICAgIGlmICh0aGlzLmdldEF0dHJpYnV0ZTAwMChwKSA9PT0gdikgcmV0dXJuOwogICAgICB0aGlzLnNldEF0dHJpYnV0ZTAwMChwLCB2KQogICAgfQoKICAgIEVsZW1lbnQucHJvdG90eXBlLmluY0F0dHJpYnV0ZTExMSA9IGZ1bmN0aW9uIChwKXsKICAgICAgbGV0IHYgPSArdGhpcy5nZXRBdHRyaWJ1dGUwMDAocCkgfHwgMDsKICAgICAgdiA9IHYgPiAxZTkgPyB2ICsgMSA6IDk7CiAgICAgIHRoaXMuc2V0QXR0cmlidXRlMDAwKHAsIGAke3Z9YCk7CiAgICAgIHJldHVybiB2OwogICAgfQoKICAgIEVsZW1lbnQucHJvdG90eXBlLmFzc2lnbkNoaWxkcmVuMTExID0gZnVuY3Rpb24gKHByZXZpb3VzU2libGluZ3MsIG5vZGUsIG5leHRTaWJsaW5ncykgewogICAgICAvLyBhc3N1bWUgYWxsIHByZXZpb3VzU2libGluZ3MsIG5vZGUsIGFuZCBuZXh0U2libGluZ3MgYXJlIG9uIHRoZSBwYWdlCiAgICAgIC8vICAtPiBvbmx5IHJlbW92ZSB0cmlnZ2VyaW5nIGlzIG5lZWRlZAogICAgICBsZXQgbm9kZUxpc3QgPSBbXTsKICAgICAgZm9yIChsZXQgdCA9IHRoaXMuZmlyc3RDaGlsZDsgdCBpbnN0YW5jZW9mIE5vZGU7IHQgPSB0Lm5leHRTaWJsaW5nKSB7CiAgICAgICAgaWYgKHQgPT09IG5vZGUpIGNvbnRpbnVlOwogICAgICAgIG5vZGVMaXN0LnB1c2godCk7CiAgICAgIH0KCiAgICAgIGluUGFnZVJlYXJyYW5nZSA9IHRydWU7CiAgICAgIGlmIChub2RlLnBhcmVudE5vZGUgPT09IHRoaXMpIHsKICAgICAgICBsZXQgZm0gPSBuZXcgRG9jdW1lbnRGcmFnbWVudCgpOwogICAgICAgIGlmIChub2RlTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICBmbS5yZXBsYWNlQ2hpbGRyZW4wMDAoLi4ubm9kZUxpc3QpOwogICAgICAgICAgLy8gbm9kZUxpc3QubGVuZ3RoID0gMDsKICAgICAgICB9CiAgICAgICAgLy8gbm9kZUxpc3QgPSBudWxsOwogICAgICAgIGlmIChwcmV2aW91c1NpYmxpbmdzICYmIHByZXZpb3VzU2libGluZ3MubGVuZ3RoID4gMCkgewogICAgICAgICAgZm0ucmVwbGFjZUNoaWxkcmVuMDAwKC4uLnByZXZpb3VzU2libGluZ3MpOwogICAgICAgICAgdGhpcy5pbnNlcnRCZWZvcmUwMDAoZm0sIG5vZGUpOwogICAgICAgIH0KICAgICAgICBpZiAobmV4dFNpYmxpbmdzICYmIG5leHRTaWJsaW5ncy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBmbS5yZXBsYWNlQ2hpbGRyZW4wMDAoLi4ubmV4dFNpYmxpbmdzKTsKICAgICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQwMDAoZm0pOwogICAgICAgIH0KICAgICAgICBmbS5yZXBsYWNlQ2hpbGRyZW4wMDAoKTsKICAgICAgICBmbSA9IG51bGw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCFwcmV2aW91c1NpYmxpbmdzKSBwcmV2aW91c1NpYmxpbmdzID0gW107CiAgICAgICAgaWYgKCFuZXh0U2libGluZ3MpIG5leHRTaWJsaW5ncyA9IFtdOwogICAgICAgIHRoaXMucmVwbGFjZUNoaWxkcmVuMDAwKC4uLnByZXZpb3VzU2libGluZ3MsIG5vZGUsIC4uLm5leHRTaWJsaW5ncyk7CiAgICAgIH0KICAgICAgaW5QYWdlUmVhcnJhbmdlID0gZmFsc2U7CiAgICAgIGlmIChub2RlTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgZm9yIChjb25zdCB0IG9mIG5vZGVMaXN0KSB7CiAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEVsZW1lbnQgJiYgdC5pc0Nvbm5lY3RlZCA9PT0gZmFsc2UpIHQucmVtb3ZlKCk7IC8vIHJlbW92ZSB0cmlnZ2VyaW5nCiAgICAgICAgfQogICAgICB9CiAgICAgIG5vZGVMaXN0Lmxlbmd0aCA9IDA7CiAgICAgIG5vZGVMaXN0ID0gbnVsbDsKICAgIH0KCgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgogICAgY29uc3QgRElTQUJMRV9GTEFHU19TSEFEWURPTV9GUkVFID0gdHJ1ZTsKCiAgICAvKioKICAgICAqIAogICAgICogTWluaWZpZWQgQ29kZSBmcm9tIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZW4vc2NyaXB0cy80NzU2MzIteXRjb25maWdoYWNrcy9jb2RlICh5dENvbmZpZ0hhY2tzKQogICAgICogRGF0ZTogMjAyNC4wNC4xNwogICAgICogTWluaWZpZXI6IGh0dHBzOi8vd3d3LnRvcHRhbC5jb20vZGV2ZWxvcGVycy9qYXZhc2NyaXB0LW1pbmlmaWVyCiAgICAgKiAKICAgICAqLwogICAgKCgpID0+IHsKICAgICAgbGV0IGUgPSAidW5kZWZpbmVkIiAhPSB0eXBlb2YgdW5zYWZlV2luZG93ID8gdW5zYWZlV2luZG93IDogdGhpcyBpbnN0YW5jZW9mIFdpbmRvdyA/CiAgICAgICAgdGhpcyA6IHdpbmRvdzsgaWYgKCFlLl95dENvbmZpZ0hhY2tzKSB7CiAgICAgICAgICBsZXQgdCA9IDQ7IGNsYXNzIG4gZXh0ZW5kcyBTZXQgewogICAgICAgICAgICBhZGQoZSkgewogICAgICAgICAgICAgIGlmICh0IDw9IDApIHJldHVybiBjb25zb2xlLndhcm4oCiAgICAgICAgICAgICAgICAieXQuY29uZmlnXyBpcyBhbHJlYWR5IGFwcGxpZWQgb24gdGhlIHBhZ2UuIik7ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgJiYgc3VwZXIuYWRkKGUpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0gbGV0IGEgPSAoYXN5bmMgKCkgPT4geyB9KSgpCiAgICAgICAgICAgIC5jb25zdHJ1Y3RvciwgaSA9IGUuX3l0Q29uZmlnSGFja3MgPSBuZXcgbiwgbCA9ICgpID0+IHsgbGV0IHQgPSBlLnl0Y3NpLm9yaWdpbmFsWXRjc2k7IHQgJiYgKGUueXRjc2kgPSB0LCBsID0gbnVsbCkgfSwKICAgICAgICAgICAgYyA9IG51bGwsIG8gPSAoKSA9PiB7CiAgICAgICAgICAgICAgaWYgKHQgPj0gMSkgewogICAgICAgICAgICAgICAgbGV0IG4gPSAoZS55dCB8fCAwKS5jb25maWdfIHx8IChlLnl0Y2ZnIHx8IDApLmRhdGFfIHx8IDA7IGlmICgic3RyaW5nIiA9PSB0eXBlb2Ygbi4KICAgICAgICAgICAgICAgICAgSU5ORVJUVUJFX0FQSV9LRVkgJiYgIm9iamVjdCIgPT0gdHlwZW9mIG4uRVhQRVJJTUVOVF9GTEFHUykgZm9yIChsZXQgYSBvZiAoLS10IDw9IDAgJiYgbCAmJiBsKCksIGMgPSAhMCwgaSkpIGEobikKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGYgPSAxLAogICAgICAgICAgICBkID0gdCA9PiB7CiAgICAgICAgICAgICAgaWYgKHQgPSB0IHx8IGUueXRjc2kpIHJldHVybiBlLnl0Y3NpID0gbmV3IFByb3h5KHQsIHsgZ2V0OiAoZSwgdCwgbikgPT4gIm9yaWdpbmFsWXRjc2kiID09PSB0ID8gZSA6IChvKCksIGMgJiYgLS1mIDw9IDAgJiYgbCAmJiBsKCksIGVbdF0pIH0pCiAgICAgICAgICAgICAgICAsICEwCiAgICAgICAgICAgIH07IGQoKSB8fCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgInl0Y3NpIiwgewogICAgICAgICAgICAgIGdldCgpIHsgfSwgc2V0OiB0ID0+ICh0ICYmIChkZWxldGUgZS55dGNzaSwgZCh0KSksICEwKSwgZW51bWVyYWJsZTogITEsIGNvbmZpZ3VyYWJsZTogITAKICAgICAgICAgICAgfSk7IGxldCB7IGFkZEV2ZW50TGlzdGVuZXI6IHMsIHJlbW92ZUV2ZW50TGlzdGVuZXI6IHkgfSA9IERvY3VtZW50LnByb3RvdHlwZTsgZnVuY3Rpb24gcih0KSB7CiAgICAgICAgICAgICAgbygpLAogICAgICAgICAgICAgICAgdCAmJiBlLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCByLCAhMSkKICAgICAgICAgICAgfSBuZXcgYShlID0+IHsKICAgICAgICAgICAgICBpZiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIEFib3J0U2lnbmFsKSBzLmNhbGwoZG9jdW1lbnQsCiAgICAgICAgICAgICAgICAieXQtcGFnZS1kYXRhLWZldGNoZWQiLCBlLCB7IG9uY2U6ICEwIH0pLCBzLmNhbGwoZG9jdW1lbnQsICJ5dC1uYXZpZ2F0ZS1maW5pc2giLCBlLCB7IG9uY2U6ICEwIH0pLCBzLmNhbGwoZG9jdW1lbnQsICJzcGZkb25lIiwgZSwKICAgICAgICAgICAgICAgICAgeyBvbmNlOiAhMCB9KTsgZWxzZSB7CiAgICAgICAgICAgICAgICBsZXQgdCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgZSgpLCB5LmNhbGwoZG9jdW1lbnQsICJ5dC1wYWdlLWRhdGEtZmV0Y2hlZCIsIHQsICExKSwgeS5jYWxsKGRvY3VtZW50LCAieXQtbmF2aWdhdGUtZmluaXNoIiwgdCwgITEpLAogICAgICAgICAgICAgICAgICAgIHkuY2FsbChkb2N1bWVudCwgInNwZmRvbmUiLCB0LCAhMSkKICAgICAgICAgICAgICAgIH07IHMuY2FsbChkb2N1bWVudCwgInl0LXBhZ2UtZGF0YS1mZXRjaGVkIiwgdCwgITEpLCBzLmNhbGwoZG9jdW1lbnQsICJ5dC1uYXZpZ2F0ZS1maW5pc2giLCB0LCAhMSksCiAgICAgICAgICAgICAgICAgIHMuY2FsbChkb2N1bWVudCwgInNwZmRvbmUiLCB0LCAhMSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4obyksIG5ldyBhKGUgPT4gewogICAgICAgICAgICAgIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgQWJvcnRTaWduYWwpIHMuY2FsbChkb2N1bWVudCwgInl0LWFjdGlvbiIsIGUsCiAgICAgICAgICAgICAgICB7IG9uY2U6ICEwLCBjYXB0dXJlOiAhMCB9KTsgZWxzZSB7IGxldCB0ID0gKCkgPT4geyBlKCksIHkuY2FsbChkb2N1bWVudCwgInl0LWFjdGlvbiIsIHQsICEwKSB9OyBzLmNhbGwoZG9jdW1lbnQsICJ5dC1hY3Rpb24iLCB0LCAhMCkgfQogICAgICAgICAgICB9KS50aGVuKG8pLAogICAgICAgICAgICAgIGEucmVzb2x2ZSgpLnRoZW4oKCkgPT4geyAibG9hZGluZyIgIT09IGRvY3VtZW50LnJlYWR5U3RhdGUgPyByKCkgOiBlLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCByLCAhMSkgfSkKICAgICAgICB9CiAgICB9KSgpOwoKICAgIGxldCBjb25maWdPbmNlID0gZmFsc2U7CiAgICB3aW5kb3cuX3l0Q29uZmlnSGFja3MuYWRkKChjb25maWdfKSA9PiB7CiAgICAgIGlmIChjb25maWdPbmNlKSByZXR1cm47CiAgICAgIGNvbmZpZ09uY2UgPSB0cnVlOwoKICAgICAgY29uc3QgRVhQRVJJTUVOVF9GTEFHUyA9IGNvbmZpZ18uRVhQRVJJTUVOVF9GTEFHUyB8fCAwOwogICAgICBjb25zdCBFWFBFUklNRU5UU19GT1JDRURfRkxBR1MgPSBjb25maWdfLkVYUEVSSU1FTlRTX0ZPUkNFRF9GTEFHUyB8fCAwOwogICAgICBmb3IgKGNvbnN0IGZsYWdzIG9mIFtFWFBFUklNRU5UX0ZMQUdTLCBFWFBFUklNRU5UU19GT1JDRURfRkxBR1NdKSB7CiAgICAgICAgaWYgKGZsYWdzKSB7CiAgICAgICAgICAvLyBmbGFncy5rZXZsYXJfd2F0Y2hfbWV0YWRhdGFfcmVmcmVzaF9ub19vbGRfc2Vjb25kYXJ5X2RhdGEgPSBmYWxzZTsKICAgICAgICAgIC8vIGZsYWdzLmxpdmVfY2hhdF9vdmVyZmxvd19oaWRlX2NoYXQgPSBmYWxzZTsKICAgICAgICAgIGZsYWdzLndlYl93YXRjaF9jaGF0X2hpZGVfYnV0dG9uX2tpbGxzd2l0Y2ggPSBmYWxzZTsKICAgICAgICAgIGZsYWdzLndlYl93YXRjaF90aGVhdGVyX2NoYXQgPSBmYWxzZTsgLy8gZm9yIHJlLW9wZW5hYmxlIGNoYXQgKHl0ZC13YXRjaC1mbGV4eSdzIGxpdmVDaGF0Q29sbGFwc2VkIGlzIGFsd2F5cyB1bmRlZmluZWQpCiAgICAgICAgICBmbGFncy5zdXBwcmVzc19lcnJvcl8yMDRfbG9nZ2luZyA9IHRydWU7CiAgICAgICAgICBmbGFncy5rZXZsYXJfd2F0Y2hfZ3JpZCA9IGZhbHNlOyAgLy8gQS9CIHRlc3RpbmcgZm9yIHdhdGNoIGdyaWQKCiAgICAgICAgICBpZiAoRElTQUJMRV9GTEFHU19TSEFEWURPTV9GUkVFKSB7CiAgICAgICAgICAgIGZsYWdzLmVuYWJsZV9zaGFkeWRvbV9mcmVlX3Njb3BlZF9ub2RlX21ldGhvZHMgPSBmYWxzZTsKICAgICAgICAgICAgZmxhZ3MuZW5hYmxlX3NoYWR5ZG9tX2ZyZWVfc2NvcGVkX3F1ZXJ5X21ldGhvZHMgPSBmYWxzZTsKICAgICAgICAgICAgZmxhZ3MuZW5hYmxlX3NoYWR5ZG9tX2ZyZWVfc2NvcGVkX3JlYWRvbmx5X3Byb3BlcnRpZXNfYmF0Y2hfb25lID0gZmFsc2U7CiAgICAgICAgICAgIGZsYWdzLmVuYWJsZV9zaGFkeWRvbV9mcmVlX3BhcmVudF9ub2RlID0gZmFsc2U7CiAgICAgICAgICAgIGZsYWdzLmVuYWJsZV9zaGFkeWRvbV9mcmVlX2NoaWxkcmVuID0gZmFsc2U7CiAgICAgICAgICAgIGZsYWdzLmVuYWJsZV9zaGFkeWRvbV9mcmVlX2xhc3RfY2hpbGQgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICB9KTsKCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCgogICAgLyogZ2xvYmFscyBXZWFrUmVmOmZhbHNlICovCgogICAgLyoqIEB0eXBlIHsobzogT2JqZWN0IHwgbnVsbCkgPT4gV2Vha1JlZiB8IG51bGx9ICovCiAgICBjb25zdCBtV2Vha1JlZiA9IHR5cGVvZiBXZWFrUmVmID09PSAnZnVuY3Rpb24nID8gKG8gPT4gbyA/IG5ldyBXZWFrUmVmKG8pIDogbnVsbCkgOiAobyA9PiBvIHx8IG51bGwpOyAvLyB0eXBlb2YgSW52YWxpZFZhciA9PSAndW5kZWZpbmVkJwoKICAgIC8qKiBAdHlwZSB7KHdyOiBPYmplY3QgfCBudWxsKSA9PiBPYmplY3QgfCBudWxsfSAqLwogICAgY29uc3Qga1JlZiA9ICh3ciA9PiAod3IgJiYgd3IuZGVyZWYpID8gd3IuZGVyZWYoKSA6IHdyKTsKCgogICAgLyoqIEB0eXBlIHtnbG9iYWxUaGlzLlByb21pc2VDb25zdHJ1Y3Rvcn0gKi8KICAgIGNvbnN0IFByb21pc2UgPSAoYXN5bmMgKCkgPT4geyB9KSgpLmNvbnN0cnVjdG9yOyAvLyBZb3VUdWJlIGhhY2tzIFByb21pc2UgaW4gV2F0ZXJGb3ggQ2xhc3NpYyBhbmQgIlByb21pc2UucmVzb2x2ZSgwKSIgbmV2ZXJzIHJlc29sdmUuCgogICAgY29uc3QgZGVsYXlQbiA9IGRlbGF5ID0+IG5ldyBQcm9taXNlKChmbiA9PiBzZXRUaW1lb3V0KGZuLCBkZWxheSkpKTsKCiAgICBjb25zdCBpbnNwID0gbyA9PiBvID8gKG8ucG9seW1lckNvbnRyb2xsZXIgfHwgby5pbnN0IHx8IG8gfHwgMCkgOiAobyB8fCAwKTsKCiAgICBjb25zdCBzZXRUaW1lb3V0XyA9IHNldFRpbWVvdXQuYmluZCh3aW5kb3cpOwoKICAgIGNvbnN0IFByb21pc2VFeHRlcm5hbCA9ICgocmVzb2x2ZV8sIHJlamVjdF8pID0+IHsKICAgICAgY29uc3QgaCA9IChyZXNvbHZlLCByZWplY3QpID0+IHsgcmVzb2x2ZV8gPSByZXNvbHZlOyByZWplY3RfID0gcmVqZWN0IH07CiAgICAgIHJldHVybiBjbGFzcyBQcm9taXNlRXh0ZXJuYWwgZXh0ZW5kcyBQcm9taXNlIHsKICAgICAgICBjb25zdHJ1Y3RvcihjYiA9IGgpIHsKICAgICAgICAgIHN1cGVyKGNiKTsKICAgICAgICAgIGlmIChjYiA9PT0gaCkgewogICAgICAgICAgICAvKiogQHR5cGUgeyh2YWx1ZTogYW55KSA9PiB2b2lkfSAqLwogICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlXzsKICAgICAgICAgICAgLyoqIEB0eXBlIHsocmVhc29uPzogYW55KSA9PiB2b2lkfSAqLwogICAgICAgICAgICB0aGlzLnJlamVjdCA9IHJlamVjdF87CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwogICAgfSkoKTsKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gbmV4dEJyb3dzZXJUaWNrIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgdmFyIG5leHRCcm93c2VyVGljayA9IHZvaWQgMCAhPT0gbmV4dEJyb3dzZXJUaWNrICYmIG5leHRCcm93c2VyVGljay52ZXJzaW9uID49IDIgPyBuZXh0QnJvd3NlclRpY2sgOiAoKCkgPT4gewogICAgICAgInVzZSBzdHJpY3QiOyBjb25zdCBlID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIHNlbGYgPyBzZWxmIDogInVuZGVmaW5lZCIgIT0gdHlwZW9mIGdsb2JhbCA/IGdsb2JhbCA6IHRoaXM7IAogICAgICAgbGV0IHQgPSAhMDsgaWYgKCEgZnVuY3Rpb24gbihzKSB7CiAgICAgICAgIHJldHVybiBzID8gdCA9ICExIDogZS5wb3N0TWVzc2FnZSAmJiAhZS5pbXBvcnRTY3JpcHRzICYmIGUuYWRkRXZlbnRMaXN0ZW5lciA/IChlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCBuLCAhMSksIGUucG9zdE1lc3NhZ2UoIiQkJCIsICIqIiksIGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIG4sICExKSwgdCkgOiB2b2lkIDAgCiAgICAgICAgfSgpKSByZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oIllvdXIgYnJvd3NlciBlbnZpcm9ubWVudCBjYW5ub3QgdXNlIG5leHRCcm93c2VyVGljayIpOwogICAgICAgICBjb25zdCBuID0gKGFzeW5jICgpID0+IHt9KSgpLmNvbnN0cnVjdG9yOyBsZXQgcyA9IG51bGw7IAogICAgICAgICBjb25zdCBvID0gbmV3IE1hcCwgeyBmbG9vcjogciwgcmFuZG9tOiBpIH0gPSBNYXRoOyBsZXQgbDsKICAgICAgICBkbyB7IGwgPSBgJCRuZXh0QnJvd3NlclRpY2skJCR7KGkoKSs4KS50b1N0cmluZygpLnNsaWNlKDIpfSQkYCB9IHdoaWxlIChsIGluIGUpOyBjb25zdCBhID0gbCwKICAgICAgICBjID0gYS5sZW5ndGggKyA5OwogICAgICAgIGVbYV0gPSAxOwogICAgICAgIGUuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIChlID0+IHsgaWYgKDAgIT09IG8uc2l6ZSkgeyBjb25zdCB0ID0gKGUgfHwgMCkuZGF0YTsgaWYgKCJzdHJpbmciID09IHR5cGVvZiB0ICYmIHQubGVuZ3RoID09PSBjICYmIGUuc291cmNlID09PSAoZS50YXJnZXQgfHwgMSkpIHsgY29uc3QgZSA9IG8uZ2V0KHQpOwogICAgICAgICAgICBlICYmICgicCIgPT09IHRbMF0gJiYgKHMgPSBudWxsKSwgby5kZWxldGUodCksIGUoKSkgfSB9IH0pLCAhMSk7IGNvbnN0IGQgPSAodCA9IG8pID0+IHsgaWYgKHQgPT09IG8pIHsgaWYgKHMpIHJldHVybiBzOyBsZXQgdDsKICAgICAgICBkbyB7IHQgPSBgcCR7YX0ke3IoMzE0MTU5MjY1MzU5KmkoKSszMTQxNTkyNjUzNTkpLnRvU3RyaW5nKDM2KX1gIH0gd2hpbGUgKG8uaGFzKHQpKTsgcmV0dXJuIHMgPSBuZXcgbigoZSA9PiB7IG8uc2V0KHQsIGUpIH0pKSwgZS5wb3N0TWVzc2FnZSh0LCAiKiIpLCB0ID0gbnVsbCwgcyB9IHsgbGV0IG47CiAgICAgICAgZG8geyBuID0gYGYke2F9JHtyKDMxNDE1OTI2NTM1OSppKCkrMzE0MTU5MjY1MzU5KS50b1N0cmluZygzNil9YCB9IHdoaWxlIChvLmhhcyhuKSk7CiAgICAgICAgby5zZXQobiwgdCksIGUucG9zdE1lc3NhZ2UobiwgIioiKSB9IH07IHJldHVybiBkLnZlcnNpb24gPSAyLCBkIH0pKCk7CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIG5leHRCcm93c2VyVGljayAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBjb25zdCBpc1Bhc3NpdmVBcmdTdXBwb3J0ID0gKHR5cGVvZiBJbnRlcnNlY3Rpb25PYnNlcnZlciA9PT0gJ2Z1bmN0aW9uJyk7CiAgICBjb25zdCBidWJibGVQYXNzaXZlID0gaXNQYXNzaXZlQXJnU3VwcG9ydCA/IHsgY2FwdHVyZTogZmFsc2UsIHBhc3NpdmU6IHRydWUgfSA6IGZhbHNlOwogICAgY29uc3QgY2FwdHVyZVBhc3NpdmUgPSBpc1Bhc3NpdmVBcmdTdXBwb3J0ID8geyBjYXB0dXJlOiB0cnVlLCBwYXNzaXZlOiB0cnVlIH0gOiB0cnVlOwoKCgogICAgY2xhc3MgQXR0cmlidXRlciB7CiAgICAgIGNvbnN0cnVjdG9yKGxpc3QpIHsKICAgICAgICB0aGlzLmxpc3QgPSBsaXN0OwogICAgICAgIHRoaXMuZmxhZyA9IDA7CiAgICAgIH0KICAgICAgbWFrZVN0cmluZygpIHsKICAgICAgICBsZXQgayA9IDE7CiAgICAgICAgbGV0IHMgPSAnJzsKICAgICAgICBsZXQgaSA9IDA7CiAgICAgICAgd2hpbGUgKHRoaXMuZmxhZyA+PSBrKSB7CiAgICAgICAgICBpZiAodGhpcy5mbGFnICYgaykgewogICAgICAgICAgICBzICs9IHRoaXMubGlzdFtpXTsKICAgICAgICAgIH0KICAgICAgICAgIGkrKzsKICAgICAgICAgIGsgPDw9IDE7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzOwogICAgICB9CiAgICB9CgogICAgY29uc3QgbUxvYWRlZCA9IG5ldyBBdHRyaWJ1dGVyKCdpY3AnKTsKCiAgICBjb25zdCB3clNlbGZNYXAgPSBuZXcgV2Vha01hcCgpOwoKICAgIC8qKiBAdHlwZSB7T2JqZWN0LjxzdHJpbmcsIEVsZW1lbnQgfCBudWxsPn0gKi8KICAgIGNvbnN0IGVsZW1lbnRzID0gbmV3IFByb3h5KHsKICAgICAgcmVsYXRlZDogbnVsbCwKICAgICAgY29tbWVudHM6IG51bGwsCiAgICAgIGluZm9FeHBhbmRlcjogbnVsbCwKICAgIH0sIHsKICAgICAgZ2V0KHRhcmdldCwgcHJvcCkgewogICAgICAgIHJldHVybiBrUmVmKHRhcmdldFtwcm9wXSk7CiAgICAgIH0sCiAgICAgIHNldCh0YXJnZXQsIHByb3AsIHZhbHVlKSB7CiAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICBsZXQgd3IgPSB3clNlbGZNYXAuZ2V0KHZhbHVlKTsKICAgICAgICAgIGlmICghd3IpIHsKICAgICAgICAgICAgd3IgPSBtV2Vha1JlZih2YWx1ZSk7CiAgICAgICAgICAgIHdyU2VsZk1hcC5zZXQodmFsdWUsIHdyKTsKICAgICAgICAgIH0KICAgICAgICAgIHRhcmdldFtwcm9wXSA9IHdyOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0YXJnZXRbcHJvcF0gPSBudWxsOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfSk7CiAgICBjb25zdCBnZXRNYWluSW5mbyA9ICgpID0+IHsKICAgICAgY29uc3QgaW5mb0V4cGFuZGVyID0gZWxlbWVudHMuaW5mb0V4cGFuZGVyOwogICAgICBpZiAoIWluZm9FeHBhbmRlcikgcmV0dXJuIG51bGw7CiAgICAgIGNvbnN0IG1haW5JbmZvID0gaW5mb0V4cGFuZGVyLm1hdGNoZXMoJ1t0eXQtbWFpbi1pbmZvXScpID8gaW5mb0V4cGFuZGVyIDogaW5mb0V4cGFuZGVyLnF1ZXJ5U2VsZWN0b3IwMDAoJ1t0eXQtbWFpbi1pbmZvXScpOwogICAgICByZXR1cm4gbWFpbkluZm8gfHwgbnVsbDsKICAgIH0KICAgIGNvbnN0IGFzeW5jV3JhcCA9IChhc3luY0ZuKSA9PiB7CiAgICAgIHJldHVybiAoKSA9PiB7CiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihhc3luY0ZuKTsKICAgICAgfTsKICAgIH0KCgogICAgbGV0IHBhZ2VUeXBlID0gbnVsbDsKCiAgICBsZXQgcGFnZUxhbmcgPSAnZW4nOwogICAgY29uc3QgbGFuZ1dvcmRzID0gewogICAgICAnZW4nOiB7CiAgICAgICAgLy8nc2hhcmUnOidTaGFyZScsCiAgICAgICAgJ2luZm8nOiAnSW5mbycsCiAgICAgICAgJ3ZpZGVvcyc6ICdWaWRlb3MnLAogICAgICAgICdwbGF5bGlzdCc6ICdQbGF5bGlzdCcKICAgICAgfSwKICAgICAgJ2pwJzogewogICAgICAgIC8vJ3NoYXJlJzon5YWx5pyJJywKICAgICAgICAnaW5mbyc6ICfmg4XloLEnLAogICAgICAgICd2aWRlb3MnOiAn5YuV55S7JywKICAgICAgICAncGxheWxpc3QnOiAn5YaN55Sf44Oq44K544OIJwogICAgICB9LAogICAgICAndHcnOiB7CiAgICAgICAgLy8nc2hhcmUnOifliIbkuqsnLAogICAgICAgICdpbmZvJzogJ+izh+ioiicsCiAgICAgICAgJ3ZpZGVvcyc6ICflvbHniYcnLAogICAgICAgICdwbGF5bGlzdCc6ICfmkq3mlL7muIXllq4nCiAgICAgIH0sCiAgICAgICdjbic6IHsKICAgICAgICAvLydzaGFyZSc6J+WIhuS6qycsCiAgICAgICAgJ2luZm8nOiAn6LWE6K6vJywKICAgICAgICAndmlkZW9zJzogJ+inhumikScsCiAgICAgICAgJ3BsYXlsaXN0JzogJ+aSreaUvuWIl+ihqCcKICAgICAgfSwKICAgICAgJ2R1JzogewogICAgICAgIC8vJ3NoYXJlJzonVGVpbGVuJywKICAgICAgICAnaW5mbyc6ICdJbmZvJywKICAgICAgICAndmlkZW9zJzogJ1ZpZGVvcycsCiAgICAgICAgJ3BsYXlsaXN0JzogJ1BsYXlsaXN0JwogICAgICB9LAogICAgICAnZnInOiB7CiAgICAgICAgLy8nc2hhcmUnOidQYXJ0YWdlcicsCiAgICAgICAgJ2luZm8nOiAnSW5mbycsCiAgICAgICAgJ3ZpZGVvcyc6ICdWaWTDqW9zJywKICAgICAgICAncGxheWxpc3QnOiAnUGxheWxpc3QnCiAgICAgIH0sCiAgICAgICdrcic6IHsKICAgICAgICAvLydzaGFyZSc6J+qzteycoCcsCiAgICAgICAgJ2luZm8nOiAn7KCV67O0JywKICAgICAgICAndmlkZW9zJzogJ+uPmeyYgeyDgScsCiAgICAgICAgJ3BsYXlsaXN0JzogJ+yerOyDneuqqeuhnScKICAgICAgfSwKICAgICAgJ3J1JzogewogICAgICAgIC8vJ3NoYXJlJzon0J/QvtC00LXQu9C40YLRjNGB0Y8nLAogICAgICAgICdpbmZvJzogJ9Ce0L/QuNGB0LDQvdC40LUnLAogICAgICAgICd2aWRlb3MnOiAn0JLQuNC00LXQvicsCiAgICAgICAgJ3BsYXlsaXN0JzogJ9Cf0LvQtdC50LvQuNGB0YInCiAgICAgIH0KICAgIH07CgogICAgY29uc3Qgc3ZnQ29tbWVudHMgPSBgPHBhdGggZD0iTTgwIDI3SDEyQTEyIDEyIDkwIDAgMCAwIDM5djQyYTEyIDEyIDkwIDAgMCAxMiAxMmgxMnYyMGEyIDIgOTAgMCAwIDMuNCAyTDQ3IDkzaDMzYTEyIAogIDEyIDkwIDAgMCAxMi0xMlYzOWExMiAxMiA5MCAwIDAtMTItMTJ6TTIwIDQ3aDI2YTIgMiA5MCAxIDEgMCA0SDIwYTIgMiA5MCAxIDEgMC00em01MiAyOEgyMGEyIDIgOTAgMSAxIDAtNGg1MmEyIDIgOTAgCiAgMSAxIDAgNHptMC0xMkgyMGEyIDIgOTAgMSAxIDAtNGg1MmEyIDIgOTAgMSAxIDAgNHptMzYtNThINDBhMTIgMTIgOTAgMCAwLTEyIDEydjZoNTJjOSAwIDE2IDcgMTYgMTZ2NDJoMHY0bDcgN2EyIDIgOTAgCiAgMCAwIDMtMVY3MWgyYTEyIDEyIDkwIDAgMCAxMi0xMlYxN2ExMiAxMiA5MCAwIDAtMTItMTJ6Ii8+YC50cmltKCk7CgogICAgY29uc3Qgc3ZnVmlkZW9zID0gYDxwYXRoIGQ9Ik04OSAxMGMwLTQtMy03LTctN0g3Yy00IDAtNyAzLTcgN3Y3MGMwIDQgMyA3IDcgN2g3NWM0IDAgNy0zIDctN1YxMHptLTYyIDJoMTN2MTBIMjdWMTJ6bS05IAogIDY2SDlWNjhoOXYxMHptMC01Nkg5VjEyaDl2MTB6bTIyIDU2SDI3VjY4aDEzdjEwem0tMy0yNVYzNmMwLTIgMi0zIDQtMmwxMiA4YzIgMSAyIDQgMCA1bC0xMiA4Yy0yIDEtNCAwLTQtMnptMjUgCiAgMjVINDlWNjhoMTN2MTB6bTAtNTZINDlWMTJoMTN2MTB6bTE4IDU2aC05VjY4aDl2MTB6bTAtNTZoLTlWMTJoOXYxMHoiLz5gLnRyaW0oKTsKCiAgICBjb25zdCBzdmdJbmZvID0gYDxwYXRoIGQ9Ik0zMCAwQzEzLjMgMCAwIDEzLjMgMCAzMHMxMy4zIDMwIDMwIDMwIDMwLTEzLjMgMzAtMzBTNDYuNyAwIDMwIDB6bTYuMiA0Ni42Yy0xLjUuNS0yLjYgCiAgMS0zLjYgMS4zYTEwLjkgMTAuOSAwIDAgMS0zLjMuNWMtMS43IDAtMy4zLS41LTQuMy0xLjRhNC42OCA0LjY4IDAgMCAxLTEuNi0zLjZjMC0uNC4yLTEgLjItMS41YTIwLjkgMjAuOSA5MCAwIDEgCiAgLjMtMmwyLTYuOGMuMS0uNy4zLTEuMy40LTEuOWE4LjIgOC4yIDkwIDAgMCAuMy0xLjZjMC0uOC0uMy0xLjQtLjctMS44cy0xLS41LTItLjVhNC41MyA0LjUzIDAgMCAwLTEuNi4zYy0uNS4yLTEgCiAgLjItMS4zLjRsLjYtMi4xYzEuMi0uNSAyLjQtMSAzLjUtMS4zczIuMy0uNiAzLjMtLjZjMS45IDAgMy4zLjYgNC4zIDEuM3MxLjUgMi4xIDEuNSAzLjVjMCAuMyAwIC45LS4xIDEuNmExMC40IDEwLjQgCiAgOTAgMCAxLS40IDIuMmwtMS45IDYuN2MtLjIuNS0uMiAxLjEtLjQgMS44cy0uMiAxLjMtLjIgMS42YzAgLjkuMiAxLjYuNiAxLjlzMS4xLjUgMi4xLjVhNi4xIDYuMSA5MCAwIDAgMS41LS4zIDkgOSA5MCAKICAwIDAgMS40LS40bC0uNiAyLjJ6bS0zLjgtMzUuMmExIDEgMCAwMTAgOC42IDEgMSAwIDAxMC04LjZ6Ii8+YC50cmltKCk7CgogICAgY29uc3Qgc3ZnUGxheUxpc3QgPSBgPHBhdGggZD0iTTAgM2gxMnYySDB6bTAgNGgxMnYySDB6bTAgNGg4djJIMHptMTYgMFY3aC0ydjRoLTR2Mmg0djRoMnYtNGg0di0yeiIvPmAudHJpbSgpOwoKICAgIGNvbnN0IHN2Z0RpYWcxID0gYDxzdmcgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIGZpbGw9Im5vbmUiPjxwYXRoIGQ9Ik04IDJoMnYyTTcgNWwzLTNtLTYgOEgyVjhtMCAybDMtMyIvPjwvc3ZnPmA7CiAgICBjb25zdCBzdmdEaWFnMiA9IGA8c3ZnIHN0cm9rZT0iY3VycmVudENvbG9yIiBmaWxsPSJub25lIj48cGF0aCBkPSJNNyAzdjJoMk03IDVsMy0zTTUgOVY3SDNtLTEgM2wzLTMiLz48L3N2Zz5gOwoKCiAgICBjb25zdCBnZXRHTVQgPSAoKSA9PiB7CiAgICAgIGxldCBtID0gbmV3IERhdGUoJzIwMjMtMDEtMDFUMDA6MDA6MDBaJyk7CiAgICAgIHJldHVybiBtLmdldERhdGUoKSA9PT0gMSA/IGArJHttLmdldEhvdXJzKCl9YCA6IGAtJHsyNCAtIG0uZ2V0SG91cnMoKX1gOwogICAgfTsKCiAgICBmdW5jdGlvbiBnZXRXb3JkKHRhZykgewogICAgICByZXR1cm4gbGFuZ1dvcmRzW3BhZ2VMYW5nXVt0YWddIHx8IGxhbmdXb3Jkc1snZW4nXVt0YWddIHx8ICcnOwogICAgfQoKICAgIGNvbnN0IHN2Z0VsbSA9ICh3LCBoLCB2dywgdmgsIHAsIG0pID0+IGA8c3ZnJHttID8gYCBjbGFzcz0ke219YCA6ICcnfSB3aWR0aD0iJHt3fSIgaGVpZ2h0PSIke2h9IiB2aWV3Qm94PSIwIDAgJHt2d30gJHt2aH0iIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiPiR7cH08L3N2Zz5gCgogICAgbGV0IGhpZGRlblRhYnNCeVVzZXJDU1MgPSAwOwoKICAgIGZ1bmN0aW9uIGdldFRhYnNIVE1MKCkgewoKICAgICAgY29uc3Qgc1RhYkJ0blZpZGVvcyA9IGAke3N2Z0VsbSgxNiwgMTYsIDkwLCA5MCwgc3ZnVmlkZW9zKX08c3Bhbj4ke2dldFdvcmQoJ3ZpZGVvcycpfTwvc3Bhbj5gOwogICAgICBjb25zdCBzVGFiQnRuSW5mbyA9IGAke3N2Z0VsbSgxNiwgMTYsIDYwLCA2MCwgc3ZnSW5mbyl9PHNwYW4+JHtnZXRXb3JkKCdpbmZvJyl9PC9zcGFuPmA7CiAgICAgIGNvbnN0IHNUYWJCdG5QbGF5TGlzdCA9IGAke3N2Z0VsbSgxNiwgMTYsIDIwLCAyMCwgc3ZnUGxheUxpc3QpfTxzcGFuPiR7Z2V0V29yZCgncGxheWxpc3QnKX08L3NwYW4+YDsKCiAgICAgIGxldCBzdHIxID0gYAogICAgICAgIDxwYXBlci1yaXBwbGUgY2xhc3M9InN0eWxlLXNjb3BlIHl0LWljb24tYnV0dG9uIj4KICAgICAgICAgICAgPGRpdiBpZD0iYmFja2dyb3VuZCIgY2xhc3M9InN0eWxlLXNjb3BlIHBhcGVyLXJpcHBsZSIgc3R5bGU9Im9wYWNpdHk6MDsiPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGlkPSJ3YXZlcyIgY2xhc3M9InN0eWxlLXNjb3BlIHBhcGVyLXJpcHBsZSI+PC9kaXY+CiAgICAgICAgPC9wYXBlci1yaXBwbGU+CiAgICAgICAgYDsKCiAgICAgIGxldCBzdHJfZmJ0bnMgPSBgCiAgICA8ZGl2IGNsYXNzPSJmb250LXNpemUtcmlnaHQiPgogICAgPGRpdiBjbGFzcz0iZm9udC1zaXplLWJ0biBmb250LXNpemUtcGx1cyIgdHl0LWRpPSI4cmRMUSI+CiAgICA8c3ZnIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgdmlld2JveD0iMCAwIDUwIDUwIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0IiAKICAgIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgdmVjdG9yLWVmZmVjdD0ibm9uLXNjYWxpbmctc2l6ZSI+CiAgICAgIDxwYXRoIGQ9Ik0xMiAyNUgzOE0yNSAxMlYzOCIvPgogICAgPC9zdmc+CiAgICA8L2Rpdj48ZGl2IGNsYXNzPSJmb250LXNpemUtYnRuIGZvbnQtc2l6ZS1taW51cyIgdHl0LWRpPSI4cmRMUSI+CiAgICA8c3ZnIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgdmlld2JveD0iMCAwIDUwIDUwIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0IgogICAgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iNiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiB2ZWN0b3ItZWZmZWN0PSJub24tc2NhbGluZy1zaXplIj4KICAgICAgPHBhdGggZD0iTTEyIDI1aDI2Ii8+CiAgICA8L3N2Zz4KICAgIDwvZGl2PgogICAgPC9kaXY+CiAgICBgLnJlcGxhY2UoL1tcclxuXSsvZywgJycpOwoKICAgICAgY29uc3Qgc3RyX3RhYnMgPSBbCiAgICAgICAgYDxhIGlkPSJ0YWItYnRuMSIgdHl0LWRpPSJxOUtqYyIgdHl0LXRhYi1jb250ZW50PSIjdGFiLWluZm8iIGNsYXNzPSJ0YWItYnRuJHsoaGlkZGVuVGFic0J5VXNlckNTUyAmIDEpID09PSAxID8gJyB0YWItYnRuLWhpZGRlbicgOiAnJ30iPiR7c1RhYkJ0bkluZm99JHtzdHIxfSR7c3RyX2ZidG5zfTwvYT5gLAogICAgICAgIGA8YSBpZD0idGFiLWJ0bjMiIHR5dC1kaT0icTlLamMiIHR5dC10YWItY29udGVudD0iI3RhYi1jb21tZW50cyIgY2xhc3M9InRhYi1idG4keyhoaWRkZW5UYWJzQnlVc2VyQ1NTICYgMikgPT09IDIgPyAnIHRhYi1idG4taGlkZGVuJyA6ICcnfSI+JHtzdmdFbG0oMTYsIDE2LCAxMjAsIDEyMCwgc3ZnQ29tbWVudHMpfTxzcGFuIGlkPSJ0eXQtY20tY291bnQiPjwvc3Bhbj4ke3N0cjF9JHtzdHJfZmJ0bnN9PC9hPmAsCiAgICAgICAgYDxhIGlkPSJ0YWItYnRuNCIgdHl0LWRpPSJxOUtqYyIgdHl0LXRhYi1jb250ZW50PSIjdGFiLXZpZGVvcyIgY2xhc3M9InRhYi1idG4keyhoaWRkZW5UYWJzQnlVc2VyQ1NTICYgNCkgPT09IDQgPyAnIHRhYi1idG4taGlkZGVuJyA6ICcnfSI+JHtzVGFiQnRuVmlkZW9zfSR7c3RyMX0ke3N0cl9mYnRuc308L2E+YCwKICAgICAgICBgPGEgaWQ9InRhYi1idG41IiB0eXQtZGk9InE5S2pjIiB0eXQtdGFiLWNvbnRlbnQ9IiN0YWItbGlzdCIgY2xhc3M9InRhYi1idG4gdGFiLWJ0bi1oaWRkZW4iPiR7c1RhYkJ0blBsYXlMaXN0fSR7c3RyMX0ke3N0cl9mYnRuc308L2E+YAogICAgICBdLmpvaW4oJycpOwoKICAgICAgbGV0IGFkZEhUTUwgPSBgCiAgICAgICAgPGRpdiBpZD0icmlnaHQtdGFicyI+CiAgICAgICAgICAgIDx0YWJ2aWV3LXZpZXctcG9zLXRoZWFkPjwvdGFidmlldy12aWV3LXBvcy10aGVhZD4KICAgICAgICAgICAgPGhlYWRlcj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9Im1hdGVyaWFsLXRhYnMiPgogICAgICAgICAgICAgICAgICAgICR7c3RyX3RhYnN9CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9oZWFkZXI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InRhYi1jb250ZW50Ij4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9InRhYi1pbmZvIiBjbGFzcz0idGFiLWNvbnRlbnQtY2xkIHRhYi1jb250ZW50LWhpZGRlbiIgdHl0LWhpZGRlbiB1c2Vyc2NyaXB0LXNjcm9sbGJhci1yZW5kZXI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ0YWItY29tbWVudHMiIGNsYXNzPSJ0YWItY29udGVudC1jbGQgdGFiLWNvbnRlbnQtaGlkZGVuIiB0eXQtaGlkZGVuIHVzZXJzY3JpcHQtc2Nyb2xsYmFyLXJlbmRlcj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9InRhYi12aWRlb3MiIGNsYXNzPSJ0YWItY29udGVudC1jbGQgdGFiLWNvbnRlbnQtaGlkZGVuIiB0eXQtaGlkZGVuIHVzZXJzY3JpcHQtc2Nyb2xsYmFyLXJlbmRlcj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9InRhYi1saXN0IiBjbGFzcz0idGFiLWNvbnRlbnQtY2xkIHRhYi1jb250ZW50LWhpZGRlbiIgdHl0LWhpZGRlbiB1c2Vyc2NyaXB0LXNjcm9sbGJhci1yZW5kZXI+PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIGA7CgogICAgICByZXR1cm4gYWRkSFRNTDsKCiAgICB9CgoKICAgIGZ1bmN0aW9uIGdldExhbmcoKSB7CgogICAgICBsZXQgbGFuZyA9ICdlbic7CiAgICAgIGxldCBodG1sTGFuZyA9ICgoZG9jdW1lbnQgfHwgMCkuZG9jdW1lbnRFbGVtZW50IHx8IDApLmxhbmcgfHwgJyc7CiAgICAgIHN3aXRjaCAoaHRtbExhbmcpIHsKICAgICAgICBjYXNlICdlbic6CiAgICAgICAgY2FzZSAnZW4tR0InOgogICAgICAgICAgbGFuZyA9ICdlbic7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdkZSc6CiAgICAgICAgY2FzZSAnZGUtREUnOgogICAgICAgICAgbGFuZyA9ICdkdSc7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdmcic6CiAgICAgICAgY2FzZSAnZnItQ0EnOgogICAgICAgIGNhc2UgJ2ZyLUZSJzoKICAgICAgICAgIGxhbmcgPSAnZnInOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnemgtSGFudCc6CiAgICAgICAgY2FzZSAnemgtSGFudC1ISyc6CiAgICAgICAgY2FzZSAnemgtSGFudC1UVyc6CiAgICAgICAgICBsYW5nID0gJ3R3JzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ3poLUhhbnMnOgogICAgICAgIGNhc2UgJ3poLUhhbnMtQ04nOgogICAgICAgICAgbGFuZyA9ICdjbic7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdqYSc6CiAgICAgICAgY2FzZSAnamEtSlAnOgogICAgICAgICAgbGFuZyA9ICdqcCc7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdrbyc6CiAgICAgICAgY2FzZSAna28tS1InOgogICAgICAgICAgbGFuZyA9ICdrcic7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdydSc6CiAgICAgICAgY2FzZSAncnUtUlUnOgogICAgICAgICAgbGFuZyA9ICdydSc7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgbGFuZyA9ICdlbic7CiAgICAgIH0KCiAgICAgIHJldHVybiBsYW5nOwoKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRMYW5nRm9yUGFnZSgpIHsKCiAgICAgIGxldCBsYW5nID0gZ2V0TGFuZygpOwoKICAgICAgaWYgKGxhbmdXb3Jkc1tsYW5nXSkgcGFnZUxhbmcgPSBsYW5nOyBlbHNlIHBhZ2VMYW5nID0gJ2VuJzsKCiAgICB9CgogICAgLyoqIEB0eXBlIHtPYmplY3QuPHN0cmluZywgbnVtYmVyPn0gKi8KICAgIGNvbnN0IF9sb2NrcyA9IHt9CgogICAgY29uc3QgbG9ja0dldCA9IG5ldyBQcm94eShfbG9ja3MsCiAgICAgIHsKICAgICAgICBnZXQodGFyZ2V0LCBwcm9wKSB7CiAgICAgICAgICByZXR1cm4gKHRhcmdldFtwcm9wXSB8fCAwKTsKICAgICAgICB9LAogICAgICAgIHNldCh0YXJnZXQsIHByb3AsIHZhbCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICApOwoKICAgIGNvbnN0IGxvY2tTZXQgPSBuZXcgUHJveHkoX2xvY2tzLAogICAgICB7CiAgICAgICAgZ2V0KHRhcmdldCwgcHJvcCkgewogICAgICAgICAgaWYgKHRhcmdldFtwcm9wXSA+IDFlOSkgdGFyZ2V0W3Byb3BdID0gOTsKICAgICAgICAgIHJldHVybiAodGFyZ2V0W3Byb3BdID0gKHRhcmdldFtwcm9wXSB8fCAwKSArIDEpOwogICAgICAgIH0sCiAgICAgICAgc2V0KHRhcmdldCwgcHJvcCwgdmFsKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgICk7CgogICAgLy8gbm90ZTogeHh4eHh4eHh4QXN5bmNMb2NrIGlzIG5vdCBleHBlY3RlZCBmb3IgY2FsbGluZyBtdWx0aXBsZSB0aW1lIGluIGEgc2hvcnQgcGVyaW9kLgogICAgLy8gICAgICAgaXQgaXMganVzdCB0byBzcGxpdCB0aGUgcHJvY2VzcyBpbnRvIG1pY3JvVGFza3MuCgogICAgY29uc3QgdmlkZW9zRWxlbWVudFByb3ZpZGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlRXh0ZXJuYWwoKTsKICAgIGNvbnN0IG5hdmlnYXRlRmluaXNoZWRQcm9taXNlID0gbmV3IFByb21pc2VFeHRlcm5hbCgpOwoKICAgIGxldCBpc1JpZ2h0VGFic0luc2VydGVkID0gZmFsc2U7CiAgICBjb25zdCByaWdodFRhYnNQcm92aWRlZFByb21pc2UgPSBuZXcgUHJvbWlzZUV4dGVybmFsKCk7CgogICAgY29uc3QgaW5mb0V4cGFuZGVyRWxlbWVudFByb3ZpZGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlRXh0ZXJuYWwoKTsKCiAgICBjb25zdCBjbUF0dHIgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KCcxJyk7CiAgICBjb25zdCBjbUF0dHJTdGFjayA9IFtdOwogICAgY29uc3QgY21BdHRyU3RhY2tQdXNoID0gKGYpID0+IHsKICAgICAgY21BdHRyU3RhY2sucHVzaChmKTsKICAgICAgY21BdHRyLmRhdGEgPSBgJHsoY21BdHRyLmRhdGEgJiA3KSArIDF9YDsKICAgIH0KICAgIGNvbnN0IGNtQXR0ck9icyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHsKICAgICAgY29uc3QgbCA9IGNtQXR0clN0YWNrLmxlbmd0aDsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHsKICAgICAgICBjbUF0dHJTdGFja1tpXSgpOwogICAgICB9CiAgICB9KTsKICAgIGNtQXR0ck9icy5vYnNlcnZlKGNtQXR0ciwgeyBjaGFyYWN0ZXJEYXRhOiB0cnVlIH0pOwoKCiAgICBjb25zdCBmdW5jQ2FuQ29sbGFwc2UgPSBmdW5jdGlvbiAocykgewogICAgICAvLyBpZiAoIXMpIHJldHVybjsKICAgICAgY29uc3QgY29udGVudCA9IHRoaXMuY29udGVudCB8fCB0aGlzLiQuY29udGVudDsKICAgICAgdGhpcy5jYW5Ub2dnbGUgPSB0aGlzLnNob3VsZFVzZU51bWJlck9mTGluZXMgJiYgKHRoaXMuYWx3YXlzQ29sbGFwc2VkIHx8IHRoaXMuY29sbGFwc2VkIHx8ICh0aGlzLmlzVG9nZ2xlZCA9PT0gZmFsc2UpKQogICAgICAgID8gdGhpcy5hbHdheXNUb2dnbGVhYmxlIHx8IHRoaXMuaXNUb2dnbGVkIHx8IChjb250ZW50ICYmIGNvbnRlbnQub2Zmc2V0SGVpZ2h0IDwgY29udGVudC5zY3JvbGxIZWlnaHQpCiAgICAgICAgOiB0aGlzLmFsd2F5c1RvZ2dsZWFibGUgfHwgdGhpcy5pc1RvZ2dsZWQgfHwgKGNvbnRlbnQgJiYgY29udGVudC5zY3JvbGxIZWlnaHQgPiB0aGlzLmNvbGxhcHNlZEhlaWdodCkKICAgIH07CgogICAgY29uc3QgYW9DaGF0QXR0ckNoYW5nZUZuID0gYXN5bmMgKGxvY2tJZCkgPT4gewogICAgICBpZiAobG9ja0dldFsnYW9DaGF0QXR0ckFzeW5jTG9jayddICE9PSBsb2NrSWQpIHJldHVybjsKCiAgICAgIGNvbnN0IGNoYXRFbG0gPSBlbGVtZW50cy5jaGF0OwogICAgICBjb25zdCB5dGRGbGV4eUVsbSA9IGVsZW1lbnRzLmZsZXh5OwogICAgICAvLyBjb25zb2xlLmxvZygxODgyLCBjaGF0RWxtLCB5dGRGbGV4eUVsbSkKICAgICAgaWYgKGNoYXRFbG0gJiYgeXRkRmxleHlFbG0pIHsKCiAgICAgICAgY29uc3QgaXNDaGF0Q29sbGFwc2VkID0gY2hhdEVsbS5oYXNBdHRyaWJ1dGUwMDAoJ2NvbGxhcHNlZCcpOwogICAgICAgIGlmIChpc0NoYXRDb2xsYXBzZWQpIHsKCiAgICAgICAgICB5dGRGbGV4eUVsbS5zZXRBdHRyaWJ1dGUxMTEoJ3R5dC1jaGF0LWNvbGxhcHNlZCcsICcnKQogICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgeXRkRmxleHlFbG0ucmVtb3ZlQXR0cmlidXRlMDAwKCd0eXQtY2hhdC1jb2xsYXBzZWQnKQogICAgICAgIH0KCiAgICAgICAgeXRkRmxleHlFbG0uc2V0QXR0cmlidXRlMTExKCd0eXQtY2hhdCcsIGlzQ2hhdENvbGxhcHNlZCA/ICctJyA6ICcrJyk7CgogICAgICB9CiAgICB9OwoKICAgIC8vIGNvbnN0IGFvSW5mb0F0dHJDaGFuZ2VGbiA9IGFzeW5jIChsb2NrSWQpID0+IHsKICAgIC8vICAgaWYgKGxvY2tHZXRbJ2FvSW5mb0F0dHJBc3luY0xvY2snXSAhPT0gbG9ja0lkKSByZXR1cm47CiAgICAvLyB9OwoKICAgIC8vIGNvbnN0IHpvSW5mb0F0dHJDaGFuZ2VGbiA9IGFzeW5jIChsb2NrSWQpID0+IHsKICAgIC8vICAgaWYgKGxvY2tHZXRbJ3pvSW5mb0F0dHJBc3luY0xvY2snXSAhPT0gbG9ja0lkKSByZXR1cm47CiAgICAvLyB9OwoKICAgIGNvbnN0IGFvUGxheUxpc3RBdHRyQ2hhbmdlRm4gPSBhc3luYyAobG9ja0lkKSA9PiB7CiAgICAgIGlmIChsb2NrR2V0Wydhb1BsYXlMaXN0QXR0ckFzeW5jTG9jayddICE9PSBsb2NrSWQpIHJldHVybjsKCiAgICAgIGNvbnN0IHBsYXlsaXN0RWxtID0gZWxlbWVudHMucGxheWxpc3Q7CiAgICAgIGNvbnN0IHl0ZEZsZXh5RWxtID0gZWxlbWVudHMuZmxleHk7CiAgICAgIC8vIGNvbnNvbGUubG9nKDE4ODIsIGNoYXRFbG0sIHl0ZEZsZXh5RWxtKQogICAgICBpZiAocGxheWxpc3RFbG0gJiYgeXRkRmxleHlFbG0pIHsKICAgICAgICBpZiAocGxheWxpc3RFbG0uaGFzQXR0cmlidXRlMDAwKCdjb2xsYXBzZWQnKSkgewogICAgICAgICAgeXRkRmxleHlFbG0ucmVtb3ZlQXR0cmlidXRlMDAwKCd0eXQtcGxheWxpc3QtZXhwYW5kZWQnKQogICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgeXRkRmxleHlFbG0uc2V0QXR0cmlidXRlMTExKCd0eXQtcGxheWxpc3QtZXhwYW5kZWQnLCAnJykKICAgICAgICB9CiAgICAgIH1lbHNlIGlmKHl0ZEZsZXh5RWxtKXsKCiAgICAgICAgeXRkRmxleHlFbG0ucmVtb3ZlQXR0cmlidXRlMDAwKCd0eXQtcGxheWxpc3QtZXhwYW5kZWQnKQogICAgICB9CiAgICB9OwoKICAgIGNvbnN0IGFvQ2hhdCA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpPT57CiAgICAgIFByb21pc2UucmVzb2x2ZShsb2NrU2V0Wydhb0NoYXRBdHRyQXN5bmNMb2NrJ10pLnRoZW4oYW9DaGF0QXR0ckNoYW5nZUZuKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgfSk7CgogICAgLy8gY29uc3QgYW9JbmZvID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCk9PnsKICAgIC8vICAgUHJvbWlzZS5yZXNvbHZlKGxvY2tTZXRbJ2FvSW5mb0F0dHJBc3luY0xvY2snXSkudGhlbihhb0luZm9BdHRyQ2hhbmdlRm4pLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAvLyB9KTsKCiAgICAvLyBjb25zdCB6b0luZm8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKT0+ewogICAgLy8gICBQcm9taXNlLnJlc29sdmUobG9ja1NldFsnem9JbmZvQXR0ckFzeW5jTG9jayddKS50aGVuKHpvSW5mb0F0dHJDaGFuZ2VGbikuY2F0Y2goY29uc29sZS53YXJuKTsKICAgIC8vIH0pOwoKICAgIGNvbnN0IGFvUGxheUxpc3QgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKT0+ewogICAgICBQcm9taXNlLnJlc29sdmUobG9ja1NldFsnYW9QbGF5TGlzdEF0dHJBc3luY0xvY2snXSkudGhlbihhb1BsYXlMaXN0QXR0ckNoYW5nZUZuKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgfSk7CgogICAgY29uc3QgYW9Db21tZW50ID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoYXN5bmMgKG11dGF0aW9ucykgPT4gewogICAgICBjb25zdCBjb21tZW50c0FyZWEgPSBlbGVtZW50cy5jb21tZW50czsKICAgICAgY29uc3QgeXRkRmxleHlFbG0gPSBlbGVtZW50cy5mbGV4eTsKCiAgICAgIC8vdHl0LWNvbW1lbnRzLXZpZGVvLWlkIC8vdHl0LWNvbW1lbnRzLWRhdGEtc3RhdHVzIC8vIGhpZGRlbgogICAgICBpZiAoIWNvbW1lbnRzQXJlYSkgcmV0dXJuOwogICAgICBsZXQgYmZIaWRkZW4gPSBmYWxzZTsKICAgICAgbGV0IGJmQ29tbWVudHNWaWRlb0lkID0gZmFsc2U7CiAgICAgIGxldCBiZkNvbW1lbnREaXNhYmxlZCA9IGZhbHNlOwogICAgICBmb3IgKGNvbnN0IG11dGF0aW9uIG9mIG11dGF0aW9ucykgewogICAgICAgIGlmIChtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lID09PSAnaGlkZGVuJyAmJiBtdXRhdGlvbi50YXJnZXQgPT09IGNvbW1lbnRzQXJlYSkgewogICAgICAgICAgYmZIaWRkZW4gPSB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAobXV0YXRpb24uYXR0cmlidXRlTmFtZSA9PT0gJ3R5dC1jb21tZW50cy12aWRlby1pZCcgJiYgbXV0YXRpb24udGFyZ2V0ID09PSBjb21tZW50c0FyZWEpIHsKICAgICAgICAgIGJmQ29tbWVudHNWaWRlb0lkID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09ICd0eXQtY29tbWVudHMtZGF0YS1zdGF0dXMnICYmIG11dGF0aW9uLnRhcmdldCA9PT0gY29tbWVudHNBcmVhKSB7CiAgICAgICAgICBiZkNvbW1lbnREaXNhYmxlZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoYmZIaWRkZW4pIHsKCiAgICAgICAgaWYgKCFjb21tZW50c0FyZWEuaGFzQXR0cmlidXRlMDAwKCdoaWRkZW4nKSkgewogICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKGNvbW1lbnRzQXJlYSkudGhlbihldmVudE1hcFsnc2V0dGluZ0NvbW1lbnRzVmlkZW9JZCddKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICAgIH0KCiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKGxvY2tTZXRbJ3JlbW92ZUtlZXBDb21tZW50c1Njcm9sbGVyTG9jayddKS50aGVuKHJlbW92ZUtlZXBDb21tZW50c1Njcm9sbGVyKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICB9CgogICAgICBpZiAoKGJmSGlkZGVuIHx8IGJmQ29tbWVudHNWaWRlb0lkIHx8IGJmQ29tbWVudERpc2FibGVkKSAmJiB5dGRGbGV4eUVsbSkgewoKICAgICAgICBjb25zdCBjb21tZW50c0RhdGFTdGF0dXMgPSArY29tbWVudHNBcmVhLmdldEF0dHJpYnV0ZTAwMCgndHl0LWNvbW1lbnRzLWRhdGEtc3RhdHVzJyk7CiAgICAgICAgaWYgKGNvbW1lbnRzRGF0YVN0YXR1cyA9PT0gMikgewogICAgICAgICAgeXRkRmxleHlFbG0uc2V0QXR0cmlidXRlMTExKCd0eXQtY29tbWVudC1kaXNhYmxlZCcsICcnKQogICAgICAgIH0gZWxzZSBpZiAoY29tbWVudHNEYXRhU3RhdHVzID09PSAxKSB7CiAgICAgICAgICB5dGRGbGV4eUVsbS5yZW1vdmVBdHRyaWJ1dGUwMDAoJ3R5dC1jb21tZW50LWRpc2FibGVkJykKICAgICAgICB9CgogICAgICAgIFByb21pc2UucmVzb2x2ZShsb2NrU2V0WydjaGVja0NvbW1lbnRzU2hvdWxkQmVIaWRkZW5Mb2NrJ10pLnRoZW4oZXZlbnRNYXBbJ2NoZWNrQ29tbWVudHNTaG91bGRCZUhpZGRlbiddKS5jYXRjaChjb25zb2xlLndhcm4pOwoKCiAgICAgICAgY29uc3QgbG9ja0lkID0gbG9ja1NldFsncmlnaHRUYWJSZWFkeUxvY2swMSddOwogICAgICAgIGF3YWl0IHJpZ2h0VGFic1Byb3ZpZGVkUHJvbWlzZS50aGVuKCk7CiAgICAgICAgaWYgKGxvY2tHZXRbJ3JpZ2h0VGFiUmVhZHlMb2NrMDEnXSAhPT0gbG9ja0lkKSByZXR1cm47CiAgICAgICAgCiAgICAgICAgaWYgKGVsZW1lbnRzLmNvbW1lbnRzICE9PSBjb21tZW50c0FyZWEpIHJldHVybjsKICAgICAgICBpZiAoY29tbWVudHNBcmVhLmlzQ29ubmVjdGVkID09PSBmYWxzZSkgcmV0dXJuOwogICAgICAgIC8vIGNvbnNvbGUubG9nKDc5MzIsICdjb21tZW50cycpOwoKICAgICAgICBpZiAoY29tbWVudHNBcmVhLmNsb3Nlc3QoJyN0YWItY29tbWVudHMnKSkgewogICAgICAgICAgY29uc3Qgc2hvdWxkVGFiVmlzaWJsZSA9ICFjb21tZW50c0FyZWEuY2xvc2VzdCgnW2hpZGRlbl0nKTsKICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1t0eXQtdGFiLWNvbnRlbnQ9IiN0YWItY29tbWVudHMiXScpLmNsYXNzTGlzdC50b2dnbGUoJ3RhYi1idG4taGlkZGVuJywgIXNob3VsZFRhYlZpc2libGUpOwogICAgICAgIH0KCiAgICAgIH0KCgogICAgfSk7CgogICAgY29uc3QgaW9Db21tZW50ID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzKSA9PiB7CgogICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHsKICAgICAgICBjb25zdCB0YXJnZXQgPSBlbnRyeS50YXJnZXQ7CiAgICAgICAgY29uc3QgY250ID0gaW5zcCh0YXJnZXQpOwogICAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZyAmJiB0YXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudF8gJiYgdHlwZW9mIGNudC5jYWxjdWxhdGVDYW5Db2xsYXBzZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgbG9ja1NldFsncmVtb3ZlS2VlcENvbW1lbnRzU2Nyb2xsZXJMb2NrJ107CiAgICAgICAgICBjbnQuY2FsY3VsYXRlQ2FuQ29sbGFwc2UodHJ1ZSk7CiAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlMTExKCdpby1pbnRlcnNlY3RlZCcsICcnKTsKICAgICAgICAgIGNvbnN0IHl0ZEZsZXh5RWxtID0gZWxlbWVudHMuZmxleHk7CiAgICAgICAgICBpZiAoeXRkRmxleHlFbG0gJiYgIXl0ZEZsZXh5RWxtLmhhc0F0dHJpYnV0ZTAwMCgna2VlcC1jb21tZW50cy1zY3JvbGxlcicpKSB7CiAgICAgICAgICAgIHl0ZEZsZXh5RWxtLnNldEF0dHJpYnV0ZTExMSgna2VlcC1jb21tZW50cy1zY3JvbGxlcicsICcnKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC5oYXNBdHRyaWJ1dGUwMDAoJ2lvLWludGVyc2VjdGVkJykpIHsKCiAgICAgICAgICB0YXJnZXQucmVtb3ZlQXR0cmlidXRlMDAwKCdpby1pbnRlcnNlY3RlZCcpOwogICAgICAgIH0KICAgICAgfQoKICAgIH0sIHsKICAgICAgdGhyZXNob2xkOiBbMF0sCiAgICAgIHJvb3RNYXJnaW46ICIzMnB4IiAvLyBlbmxhcmdpbmcgdmlld3BvcnQgZm9yIGdldHRpbmcgaW50ZXJzZWN0aW9uIGVhcmxpZXIKICAgIH0pOwoKCiAgICBsZXQgYkZpeEZvclJlc2l6ZWRUYWJMYXRlciA9IGZhbHNlOwogICAgbGV0IGxhc3RSb1JpZ2h0VGFic1dpZHRoID0gMDsKICAgIGNvbnN0IHJvUmlnaHRUYWJzID0gbmV3IFJlc2l6ZU9ic2VydmVyKChlbnRyaWVzKSA9PiB7CiAgICAgIGNvbnN0IGVudHJ5ID0gZW50cmllc1tlbnRyaWVzLmxlbmd0aCAtIDFdOwogICAgICBjb25zdCB3aWR0aCA9IE1hdGgucm91bmQoZW50cnkuYm9yZGVyQm94U2l6ZS5pbmxpbmVTaXplKTsKICAgICAgaWYgKGxhc3RSb1JpZ2h0VGFic1dpZHRoICE9PSB3aWR0aCkgewogICAgICAgIGxhc3RSb1JpZ2h0VGFic1dpZHRoID0gd2lkdGg7CiAgICAgICAgaWYgKCh0YWJBU3RhdHVzICYgMikgPT09IDIpIHsKICAgICAgICAgIGJGaXhGb3JSZXNpemVkVGFiTGF0ZXIgPSBmYWxzZTsKICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgxKS50aGVuKGV2ZW50TWFwWydmaXhGb3JUYWJEaXNwbGF5J10pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBiRml4Rm9yUmVzaXplZFRhYkxhdGVyID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgLy8gY29uc29sZS5sb2coJ3Jlc2l6ZScpCiAgICB9KTsKCiAgICBjb25zdCBzd2l0Y2hUb1RhYiA9IChhY3RpdmVMaW5rKSA9PiB7CgogICAgICBpZiAodHlwZW9mIGFjdGl2ZUxpbmsgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgYWN0aXZlTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGFbdHl0LXRhYi1jb250ZW50PSIke2FjdGl2ZUxpbmt9Il1gKSB8fCBudWxsOwogICAgICB9CgogICAgICBjb25zdCB5dGRGbGV4eUVsbSA9IGVsZW1lbnRzLmZsZXh5OwoKCiAgICAgIGNvbnN0IGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI21hdGVyaWFsLXRhYnMgYVt0eXQtdGFiLWNvbnRlbnRdJyk7CgogICAgICAvL2NvbnNvbGUubG9nKDcwMSwgYWN0aXZlTGluaykKCiAgICAgIGZvciAoY29uc3QgbGluayBvZiBsaW5rcykgewogICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGxpbmsuZ2V0QXR0cmlidXRlMDAwKCd0eXQtdGFiLWNvbnRlbnQnKSk7CiAgICAgICAgaWYgKGxpbmsgJiYgY29udGVudCkgewogICAgICAgICAgaWYgKGxpbmsgIT09IGFjdGl2ZUxpbmspIHsKICAgICAgICAgICAgbGluay5jbGFzc0xpc3QucmVtb3ZlKCJhY3RpdmUiKTsKICAgICAgICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKCJ0YWItY29udGVudC1oaWRkZW4iKTsKICAgICAgICAgICAgaWYgKCFjb250ZW50Lmhhc0F0dHJpYnV0ZTAwMCgidHl0LWhpZGRlbiIpKSB7CiAgICAgICAgICAgICAgY29udGVudC5zZXRBdHRyaWJ1dGUxMTEoInR5dC1oaWRkZW4iLCAiIik7IC8vIGZvciBodHRwczovL2dyZWFzeWZvcmsub3JnL2VuL3NjcmlwdHMvNDU2MTA4CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxpbmsuY2xhc3NMaXN0LmFkZCgiYWN0aXZlIik7CiAgICAgICAgICAgIGlmIChjb250ZW50Lmhhc0F0dHJpYnV0ZTAwMCgidHl0LWhpZGRlbiIpKSB7CiAgICAgICAgICAgICAgY29udGVudC5yZW1vdmVBdHRyaWJ1dGUwMDAoInR5dC1oaWRkZW4iKTsgLy8gZm9yIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZW4vc2NyaXB0cy80NTYxMDgKICAgICAgICAgICAgfQogICAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoInRhYi1jb250ZW50LWhpZGRlbiIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgY29uc3Qgc3dpdGNoaW5nVG8gPSBhY3RpdmVMaW5rID8gYWN0aXZlTGluay5nZXRBdHRyaWJ1dGUwMDAoJ3R5dC10YWItY29udGVudCcpIDogJyc7CiAgICAgIGlmIChzd2l0Y2hpbmdUbykgewogICAgICAgIGxhc3RUYWIgPSBsYXN0UGFuZWwgPSBzd2l0Y2hpbmdUbwogICAgICB9CgogICAgICBpZiAoeXRkRmxleHlFbG0uZ2V0QXR0cmlidXRlMDAwKCd0eXQtY2hhdCcpID09PSAnJykgeXRkRmxleHlFbG0ucmVtb3ZlQXR0cmlidXRlMDAwKCd0eXQtY2hhdCcpOwogICAgICB5dGRGbGV4eUVsbS5zZXRBdHRyaWJ1dGUxMTEoJ3R5dC10YWInLCBzd2l0Y2hpbmdUbyk7CgogICAgICBpZiAoc3dpdGNoaW5nVG8pIHsKICAgICAgICBiRml4Rm9yUmVzaXplZFRhYkxhdGVyID0gZmFsc2U7CiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKDApLnRoZW4oZXZlbnRNYXBbJ2ZpeEZvclRhYkRpc3BsYXknXSk7CiAgICAgIH0KCiAgICB9CgogICAgbGV0IHRhYkFTdGF0dXMgPSAwOwogICAgY29uc3QgY2FsY3VsYXRpb25GbiA9IChyID0gMCwgZmxhZykgPT4gewogICAgICBjb25zdCB5dGRGbGV4eUVsbSA9IGVsZW1lbnRzLmZsZXh5OwogICAgICBpZiAoIXl0ZEZsZXh5RWxtKSByZXR1cm4gcjsKICAgICAgaWYgKGZsYWcgJiAxKSB7CiAgICAgICAgciB8PSAxOwogICAgICAgIGlmICgheXRkRmxleHlFbG0uaGFzQXR0cmlidXRlMDAwKCd0aGVhdGVyJykpIHIgLT0gMTsKICAgICAgfQogICAgICBpZiAoZmxhZyAmIDIpIHsKICAgICAgICByIHw9IDI7CiAgICAgICAgaWYgKCF5dGRGbGV4eUVsbS5nZXRBdHRyaWJ1dGUwMDAoJ3R5dC10YWInKSkgciAtPSAyOwogICAgICB9CiAgICAgIGlmIChmbGFnICYgNCkgewogICAgICAgIHIgfD0gNDsKICAgICAgICBpZiAoeXRkRmxleHlFbG0uZ2V0QXR0cmlidXRlMDAwKCd0eXQtY2hhdCcpICE9PSAnLScpIHIgLT0gNDsKICAgICAgfQogICAgICBpZiAoZmxhZyAmIDgpIHsKICAgICAgICByIHw9IDg7CiAgICAgICAgaWYgKHl0ZEZsZXh5RWxtLmdldEF0dHJpYnV0ZTAwMCgndHl0LWNoYXQnKSAhPT0gJysnKSByIC09IDg7CiAgICAgIH0KICAgICAgaWYgKGZsYWcgJiAxNikgewogICAgICAgIHIgfD0gMTY7CiAgICAgICAgaWYgKCF5dGRGbGV4eUVsbS5oYXNBdHRyaWJ1dGUwMDAoJ2lzLXR3by1jb2x1bW5zXycpKSByIC09IDE2OwogICAgICB9CiAgICAgIGlmIChmbGFnICYgMzIpIHsKICAgICAgICByIHw9IDMyOwogICAgICAgIGlmICgheXRkRmxleHlFbG0uaGFzQXR0cmlidXRlMDAwKCd0eXQtZWdtLXBhbmVsXycpKSByIC09IDMyOwogICAgICB9CiAgICAgIGlmIChmbGFnICYgNjQpIHsKCiAgICAgICAgciB8PSA2NDsKICAgICAgICBpZiAoIWRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50KSByIC09IDY0OwogICAgICB9CgogICAgICBpZiAoZmxhZyAmIDEyOCkgewogICAgICAgIHIgfD0gMTI4OwogICAgICAgIGlmICgheXRkRmxleHlFbG0uaGFzQXR0cmlidXRlMDAwKCd0eXQtcGxheWxpc3QtZXhwYW5kZWQnKSkgciAtPSAxMjg7CiAgICAgIH0KICAgICAgcmV0dXJuIHI7CgogICAgfQoKICAgIGZ1bmN0aW9uIGlzVGhlYXRlcigpIHsKICAgICAgY29uc3QgeXRkRmxleHlFbG0gPSBlbGVtZW50cy5mbGV4eTsKICAgICAgcmV0dXJuICh5dGRGbGV4eUVsbSAmJiB5dGRGbGV4eUVsbS5oYXNBdHRyaWJ1dGUwMDAoJ3RoZWF0ZXInKSkKICAgIH0KCiAgICBmdW5jdGlvbiB5dEJ0blNldFRoZWF0ZXIoKSB7CiAgICAgIGlmICghaXNUaGVhdGVyKCkpIHsKICAgICAgICBjb25zdCBzaXplQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigneXRkLXdhdGNoLWZsZXh5ICN5dGQtcGxheWVyIGJ1dHRvbi55dHAtc2l6ZS1idXR0b24nKQogICAgICAgIGlmIChzaXplQnRuKSBzaXplQnRuLmNsaWNrKCk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB5dEJ0bkNhbmNlbFRoZWF0ZXIoKSB7CiAgICAgIGlmIChpc1RoZWF0ZXIoKSkgewogICAgICAgIGNvbnN0IHNpemVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd5dGQtd2F0Y2gtZmxleHkgI3l0ZC1wbGF5ZXIgYnV0dG9uLnl0cC1zaXplLWJ1dHRvbicpCiAgICAgICAgaWYgKHNpemVCdG4pIHNpemVCdG4uY2xpY2soKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGdldFN1aXRhYmxlRWxlbWVudChzZWxlY3RvcikgewogICAgICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpOwogICAgICBsZXQgaiA9IC0xLCBoID0gLTE7CiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgbGV0IGQgPSBlbGVtZW50c1tpXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aDsKICAgICAgICBpZiAoZCA+IGgpIHsKICAgICAgICAgIGggPSBkOwogICAgICAgICAgaiA9IGk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBqID49IDAgPyBlbGVtZW50c1tqXSA6IG51bGw7CiAgICB9CgogICAgZnVuY3Rpb24geXRCdG5FeHBhbmRDaGF0KCkgewogICAgICBjb25zdCBkb20gPSBnZXRTdWl0YWJsZUVsZW1lbnQoJ3l0ZC1saXZlLWNoYXQtZnJhbWUjY2hhdCcpOwogICAgICBjb25zdCBjbnQgPSBpbnNwKGRvbSk7CiAgICAgIGlmIChjbnQgJiYgdHlwZW9mIGNudC5jb2xsYXBzZWQgPT09ICJib29sZWFuIikgewogICAgICAgIGlmICh0eXBlb2YgY250LnNldENvbGxhcHNlZFN0YXRlID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICBjbnQuc2V0Q29sbGFwc2VkU3RhdGUoewogICAgICAgICAgICBzZXRMaXZlQ2hhdENvbGxhcHNlZFN0YXRlQWN0aW9uOiB7CiAgICAgICAgICAgICAgY29sbGFwc2VkOiBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChjbnQuY29sbGFwc2VkID09PSBmYWxzZSkgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjbnQuY29sbGFwc2VkID0gZmFsc2U7CiAgICAgICAgaWYgKGNudC5jb2xsYXBzZWQgPT09IGZhbHNlKSByZXR1cm47CiAgICAgIH0KICAgICAgbGV0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3l0ZC1saXZlLWNoYXQtZnJhbWUjY2hhdFtjb2xsYXBzZWRdID4gLnl0ZC1saXZlLWNoYXQtZnJhbWUjc2hvdy1oaWRlLWJ1dHRvbicpCiAgICAgIGlmIChidXR0b24pIHsKICAgICAgICBidXR0b24gPQogICAgICAgICAgYnV0dG9uLnF1ZXJ5U2VsZWN0b3IwMDAoJ2Rpdi55dC1zcGVjLXRvdWNoLWZlZWRiYWNrLXNoYXBlJykgfHwKICAgICAgICAgIGJ1dHRvbi5xdWVyeVNlbGVjdG9yMDAwKCd5dGQtdG9nZ2xlLWJ1dHRvbi1yZW5kZXJlcicpOwogICAgICAgIGlmIChidXR0b24pIGJ1dHRvbi5jbGljaygpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24geXRCdG5Db2xsYXBzZUNoYXQoKSB7CiAgICAgIGNvbnN0IGRvbSA9IGdldFN1aXRhYmxlRWxlbWVudCgneXRkLWxpdmUtY2hhdC1mcmFtZSNjaGF0Jyk7CiAgICAgIGNvbnN0IGNudCA9IGluc3AoZG9tKTsKICAgICAgaWYgKGNudCAmJiB0eXBlb2YgY250LmNvbGxhcHNlZCA9PT0gImJvb2xlYW4iKSB7CiAgICAgICAgaWYgKHR5cGVvZiBjbnQuc2V0Q29sbGFwc2VkU3RhdGUgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgIGNudC5zZXRDb2xsYXBzZWRTdGF0ZSh7CiAgICAgICAgICAgIHNldExpdmVDaGF0Q29sbGFwc2VkU3RhdGVBY3Rpb246IHsKICAgICAgICAgICAgICBjb2xsYXBzZWQ6IHRydWUKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAoY250LmNvbGxhcHNlZCA9PT0gdHJ1ZSkgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjbnQuY29sbGFwc2VkID0gdHJ1ZTsKICAgICAgICBpZiAoY250LmNvbGxhcHNlZCA9PT0gdHJ1ZSkgcmV0dXJuOwogICAgICB9CiAgICAgIGxldCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd5dGQtbGl2ZS1jaGF0LWZyYW1lI2NoYXQ6bm90KFtjb2xsYXBzZWRdKSA+IC55dGQtbGl2ZS1jaGF0LWZyYW1lI3Nob3ctaGlkZS1idXR0b24nKQogICAgICBpZiAoYnV0dG9uKSB7CiAgICAgICAgYnV0dG9uID0KICAgICAgICAgIGJ1dHRvbi5xdWVyeVNlbGVjdG9yMDAwKCdkaXYueXQtc3BlYy10b3VjaC1mZWVkYmFjay1zaGFwZScpIHx8CiAgICAgICAgICBidXR0b24ucXVlcnlTZWxlY3RvcjAwMCgneXRkLXRvZ2dsZS1idXR0b24tcmVuZGVyZXInKTsKICAgICAgICBpZiAoYnV0dG9uKSBidXR0b24uY2xpY2soKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHl0QnRuRWdtUGFuZWxDb3JlKGFycikgewoKICAgICAgaWYgKCFhcnIpIHJldHVybgogICAgICBpZiAoISgnbGVuZ3RoJyBpbiBhcnIpKSBhcnIgPSBbYXJyXQoKICAgICAgY29uc3QgeXRkRmxleHlFbG0gPSBlbGVtZW50cy5mbGV4eTsKICAgICAgaWYgKCF5dGRGbGV4eUVsbSkgcmV0dXJuOwoKICAgICAgbGV0IGFjdGlvbnMgPSBbXQoKICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBhcnIpIHsKCiAgICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7CgogICAgICAgIGxldCBwYW5lbElkID0gZW50cnkucGFuZWxJZAoKICAgICAgICBsZXQgdG9IaWRlID0gZW50cnkudG9IaWRlCiAgICAgICAgbGV0IHRvU2hvdyA9IGVudHJ5LnRvU2hvdwoKICAgICAgICBpZiAodG9IaWRlID09PSB0cnVlICYmICF0b1Nob3cpIHsKCiAgICAgICAgICBhY3Rpb25zLnB1c2goewogICAgICAgICAgICAiY2hhbmdlRW5nYWdlbWVudFBhbmVsVmlzaWJpbGl0eUFjdGlvbiI6IHsKICAgICAgICAgICAgICAidGFyZ2V0SWQiOiBwYW5lbElkLAogICAgICAgICAgICAgICJ2aXNpYmlsaXR5IjogIkVOR0FHRU1FTlRfUEFORUxfVklTSUJJTElUWV9ISURERU4iCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCgogICAgICAgIH0gZWxzZSBpZiAodG9TaG93ID09PSB0cnVlICYmICF0b0hpZGUpIHsKCiAgICAgICAgICBhY3Rpb25zLnB1c2goewogICAgICAgICAgICAic2hvd0VuZ2FnZW1lbnRQYW5lbEVuZHBvaW50IjogewogICAgICAgICAgICAgICJwYW5lbElkZW50aWZpZXIiOiBwYW5lbElkCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCgogICAgICAgIH0KCiAgICAgICAgaWYgKGFjdGlvbnMubGVuZ3RoID4gMCkgewogICAgICAgICAgY29uc3QgY250ID0gaW5zcCh5dGRGbGV4eUVsbSk7CgogICAgICAgICAgY250LnJlc29sdmVDb21tYW5kKAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgInNpZ25hbFNlcnZpY2VFbmRwb2ludCI6IHsKICAgICAgICAgICAgICAgICJzaWduYWwiOiAiQ0xJRU5UX1NJR05BTCIsCiAgICAgICAgICAgICAgICAiYWN0aW9ucyI6IGFjdGlvbnMKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICB7fSwKICAgICAgICAgICAgZmFsc2UpOwogICAgICAgIH0KICAgICAgICBhY3Rpb25zID0gbnVsbDsKCiAgICAgIH0KICAgIH0KCiAgICAvKgogICAgZnVuY3Rpb24geXRCdG5DbG9zZUVuZ2FnZW1lbnRQYW5lbCggcykgewogICAgICAvL2VQYW5lbC5zZXRBdHRyaWJ1dGUoJ3Zpc2liaWxpdHknLCJFTkdBR0VNRU5UX1BBTkVMX1ZJU0lCSUxJVFlfSElEREVOIik7CiAgIAogICAgICBsZXQgcGFuZWxJZCA9IHMuZ2V0QXR0cmlidXRlKCd0YXJnZXQtaWQnKQogICAgICBzY3JpcHRsZXREZWZlcnJlZC5kZWJvdW5jZSgoKSA9PiB7CiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3R5dC1lbmdhZ2VtZW50LXBhbmVsLXZpc2liaWxpdHktY2hhbmdlJywgewogICAgICAgICAgZGV0YWlsOiB7CiAgICAgICAgICAgIHBhbmVsSWQsCiAgICAgICAgICAgIHRvSGlkZTogdHJ1ZQogICAgICAgICAgfQogICAgICAgIH0pKQogICAgICB9KQogICAKICAgIH0KICAgIAogICAgZnVuY3Rpb24geXRCdG5DbG9zZUVuZ2FnZW1lbnRQYW5lbHMoKSB7CiAgICAgIGlmIChpc0VuZ2FnZW1lbnRQYW5lbEV4cGFuZGVkKCkpIHsKICAgICAgICBmb3IgKGNvbnN0IHMgb2YgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgKICAgICAgICAgIGB5dGQtd2F0Y2gtZmxleHlbZmxleHldW3R5dC10YWJdICNwYW5lbHMueXRkLXdhdGNoLWZsZXh5IHl0ZC1lbmdhZ2VtZW50LXBhbmVsLXNlY3Rpb24tbGlzdC1yZW5kZXJlclt0YXJnZXQtaWRdW3Zpc2liaWxpdHldOm5vdChbaGlkZGVuXSlgCiAgICAgICAgKSkgewogICAgICAgICAgaWYgKHMuZ2V0QXR0cmlidXRlKCd2aXNpYmlsaXR5JykgPT0gIkVOR0FHRU1FTlRfUEFORUxfVklTSUJJTElUWV9FWFBBTkRFRCIpIHl0QnRuQ2xvc2VFbmdhZ2VtZW50UGFuZWwocyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAqLwoKCiAgICBmdW5jdGlvbiB5dEJ0bkNsb3NlRW5nYWdlbWVudFBhbmVscygpIHsKCiAgICAgIGNvbnN0IGFjdGlvbnMgPSBbXTsKICAgICAgZm9yIChjb25zdCBwYW5lbEVsbSBvZiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKAogICAgICAgIGB5dGQtd2F0Y2gtZmxleHlbZmxleHldW3R5dC10YWJdICNwYW5lbHMueXRkLXdhdGNoLWZsZXh5IHl0ZC1lbmdhZ2VtZW50LXBhbmVsLXNlY3Rpb24tbGlzdC1yZW5kZXJlclt0YXJnZXQtaWRdW3Zpc2liaWxpdHldOm5vdChbaGlkZGVuXSlgCiAgICAgICkpIHsKICAgICAgICBpZiAocGFuZWxFbG0uZ2V0QXR0cmlidXRlKCd2aXNpYmlsaXR5JykgPT0gIkVOR0FHRU1FTlRfUEFORUxfVklTSUJJTElUWV9FWFBBTkRFRCIgJiYgIXBhbmVsRWxtLmNsb3Nlc3QoJ1toaWRkZW5dJykpIHsKICAgICAgICAgIGFjdGlvbnMucHVzaCh7CiAgICAgICAgICAgIHBhbmVsSWQ6IHBhbmVsRWxtLmdldEF0dHJpYnV0ZTAwMCgndGFyZ2V0LWlkJyksCiAgICAgICAgICAgIHRvSGlkZTogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHl0QnRuRWdtUGFuZWxDb3JlKGFjdGlvbnMpOwogICAgfQoKCiAgICBmdW5jdGlvbiB5dEJ0bk9wZW5QbGF5bGlzdCgpIHsKCiAgICAgIGNvbnN0IGNudCA9IGluc3AoZWxlbWVudHMucGxheWxpc3QpOwogICAgICBpZiAoY250ICYmIHR5cGVvZiBjbnQuY29sbGFwc2VkID09PSAnYm9vbGVhbicpIHsKICAgICAgICBjbnQuY29sbGFwc2VkID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHl0QnRuQ2xvc2VQbGF5bGlzdCgpIHsKCiAgICAgIGNvbnN0IGNudCA9IGluc3AoZWxlbWVudHMucGxheWxpc3QpOwogICAgICBpZiAoY250ICYmIHR5cGVvZiBjbnQuY29sbGFwc2VkID09PSAnYm9vbGVhbicpIHsKICAgICAgICBjbnQuY29sbGFwc2VkID0gdHJ1ZTsKICAgICAgfQogICAgfQoKICAgIGNvbnN0IHVwZGF0ZUNoYXRMb2NhdGlvbjQ5OCA9IGZ1bmN0aW9uICgpIHsKICAgICAgLyoKICAgCiAgICAgICAgICAgICAgdXBkYXRlQ2hhdExvY2F0aW9uOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICBpZiAodGhpcy5pcyAhPT0gInl0ZC13YXRjaC1ncmlkIiAmJiB5KCJ3ZWJfd2F0Y2hfdGhlYXRlcl9jaGF0IikpIHsKICAgICAgICAgICAgICAgICAgdmFyIGEgPSBUKHRoaXMuaG9zdEVsZW1lbnQpLnF1ZXJ5U2VsZWN0b3IoIiNjaGF0LWNvbnRhaW5lciIpCiAgICAgICAgICAgICAgICAgICAgLCBiID0gdGhpcy50aGVhdGVyICYmICghdGhpcy5mdWxsc2NyZWVuIHx8IHkoIndlYl93YXRjaF9mdWxsc2NyZWVuX3BhbmVscyIpKTsKICAgICAgICAgICAgICAgICAgdGhpcy53YXRjaFdoaWxlV2luZG93U2l6ZVN1ZmZpY2llbnQgJiYgdGhpcy5saXZlQ2hhdFByZXNlbnRBbmRFeHBhbmRlZCAmJiBiID8geSgid2ViX3dhdGNoX3RoZWF0ZXJfY2hhdF9iZXNpZGVfcGxheWVyIikgPyAoYiA9IFQodGhpcy5ob3N0RWxlbWVudCkucXVlcnlTZWxlY3RvcigiI3BhbmVscy1mdWxsLWJsZWVkLWNvbnRhaW5lciIpLAogICAgICAgICAgICAgICAgICAoYSA9PSBudWxsID8gdm9pZCAwIDogYS5wYXJlbnRFbGVtZW50KSAhPT0gYiAmJiBiLmFwcGVuZChhKSwKICAgICAgICAgICAgICAgICAgdGhpcy5wYW5lbHNCZXNpZGVQbGF5ZXIgPSAhMCkgOiB5KCJ3ZWJfd2F0Y2hfdGhlYXRlcl9maXhlZF9jaGF0IikgJiYgKGIgPSBUKHRoaXMuaG9zdEVsZW1lbnQpLnF1ZXJ5U2VsZWN0b3IoIiNjb2x1bW5zIiksCiAgICAgICAgICAgICAgICAgIChhID09IG51bGwgPyB2b2lkIDAgOiBhLnBhcmVudEVsZW1lbnQpICE9PSBiICYmIGIuYXBwZW5kKGEpLAogICAgICAgICAgICAgICAgICB0aGlzLmZpeGVkUGFuZWxzID0gITApIDogKHkoIndlYl93YXRjaF90aGVhdGVyX2NoYXRfYmVzaWRlX3BsYXllciIpID8gdGhpcy5wYW5lbHNCZXNpZGVQbGF5ZXIgPSAhMSA6IHkoIndlYl93YXRjaF90aGVhdGVyX2ZpeGVkX2NoYXQiKSAmJiAodGhpcy5maXhlZFBhbmVscyA9ICExKSwKICAgICAgICAgICAgICAgICAgYiA9IFQodGhpcy5ob3N0RWxlbWVudCkucXVlcnlTZWxlY3RvcigiI3BsYXlsaXN0IiksCiAgICAgICAgICAgICAgICAgIGEgJiYgYiA/IEZoKGEsIGIpIDogR20obmV3IHprKCJNaXNzaW5nIGVsZW1lbnQgd2hlbiB1cGRhdGluZyBjaGF0IGxvY2F0aW9uIix7CiAgICAgICAgICAgICAgICAgICAgICAiY2hhdENvbnRhaW5lciBkZWZpbmVkIjogISFhLAogICAgICAgICAgICAgICAgICAgICAgInBsYXlsaXN0IGRlZmluZWQiOiAhIWIKICAgICAgICAgICAgICAgICAgfSkpKTsKICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQYWdlTWVkaWFRdWVyaWVzKCk7CiAgICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVQbGF5ZXJTaXplVXBkYXRlXygpCiAgICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgCiAgICAgICAgICAqLwoKICAgICAgLy8gY29uc29sZS5sb2coJ3VwZGF0ZUNoYXRMb2NhdGlvbjQ5OCcpCiAgICAgIGlmICh0aGlzLmlzICE9PSAieXRkLXdhdGNoLWdyaWQiKSB7CiAgICAgICAgdGhpcy51cGRhdGVQYWdlTWVkaWFRdWVyaWVzKCk7CiAgICAgICAgdGhpcy5zY2hlZHVsZVBsYXllclNpemVVcGRhdGVfKCkKICAgICAgfQoKICAgIH0KCiAgICBjb25zdCBtaXJyb3JOb2RlV1MgPSBuZXcgV2Vha01hcCgpOwoKICAgIC8qCiAgICAgIGNvbnN0IGluZm9GaXggPSAoKSA9PiB7CiAgICAgICAgY29uc3QgaW5mb0V4cGFuZGVyID0gZWxlbWVudHMuaW5mb0V4cGFuZGVyOwogICAgICAgIGNvbnN0IHl0ZEZsZXh5RWxtID0gZWxlbWVudHMuZmxleHk7CiAgICAgICAgaWYgKCFpbmZvRXhwYW5kZXIgfHwgIXl0ZEZsZXh5RWxtKSByZXR1cm47CiAgICAgICAgY29uc29sZS5sb2coMzg2LCBpbmZvRXhwYW5kZXIsIGluZm9FeHBhbmRlci5tYXRjaGVzKCcjdGFiLWluZm8gPiBbY2xhc3NdJykpCiAgICAgICAgaWYgKCFpbmZvRXhwYW5kZXIubWF0Y2hlcygnI3RhYi1pbmZvID4gW2NsYXNzXScpKSByZXR1cm47CiAgICAgICAgLy8gY29uc3QgZWxtcyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd5dGQtd2F0Y2gtbWV0YWRhdGEueXRkLXdhdGNoLWZsZXh5IGRpdltzbG90PSJleHRyYS1jb250ZW50Il0sIHl0ZC13YXRjaC1tZXRhZGF0YS55dGQtd2F0Y2gtZmxleHkgeXRkLW1ldGFkYXRhLXJvdy1jb250YWluZXItcmVuZGVyZXInKV0uZmlsdGVyKGVsbT0+ewogICAgICAgIC8vICAgaWYoZWxtLnBhcmVudE5vZGUuY2xvc2VzdCgnZGl2W3Nsb3Q9ImV4dHJhLWNvbnRlbnQiXSwgeXRkLW1ldGFkYXRhLXJvdy1jb250YWluZXItcmVuZGVyZXInKSkgcmV0dXJuIGZhbHNlOwogICAgICAgIC8vICAgIHJldHVybiB0cnVlOwogICAgICAgIC8vIH0pOwogICAgCiAgICAKICAgIAogICAgICAgIGNvbnN0IHJlcXVpcmVFbGVtZW50cyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd5dGQtd2F0Y2gtbWV0YWRhdGEueXRkLXdhdGNoLWZsZXh5IGRpdltzbG90PSJleHRyYS1jb250ZW50Il0gPiAqLCB5dGQtd2F0Y2gtbWV0YWRhdGEueXRkLXdhdGNoLWZsZXh5ICNleHRyYS1jb250ZW50ID4gKicpXS5maWx0ZXIoZWxtID0+IHsKICAgICAgICAgIHJldHVybiB0eXBlb2YgZWxtLmlzID09ICdzdHJpbmcnCiAgICAgICAgfSkubWFwKGVsbSA9PiB7CiAgICAgICAgICBjb25zdCBpcyA9IGVsbS5pczsKICAgICAgICAgIHdoaWxlIChlbG0gaW5zdGFuY2VvZiBIVE1MRWxlbWVudF8pIHsKICAgICAgICAgICAgY29uc3QgcSA9IFsuLi5lbG0ucXVlcnlTZWxlY3RvckFsbChpcyldLmZpbHRlcihlID0+IGluc3AoZSkuZGF0YSk7CiAgICAgICAgICAgIGlmIChxLmxlbmd0aCA+PSAxKSByZXR1cm4gcVswXTsKICAgICAgICAgICAgZWxtID0gZWxtLnBhcmVudE5vZGU7CiAgICAgICAgICB9CiAgICAgICAgfSkuZmlsdGVyKGVsbSA9PiAhIWVsbSAmJiB0eXBlb2YgZWxtLmlzID09PSAnc3RyaW5nJyk7CiAgICAgICAgY29uc29sZS5sb2cocmVxdWlyZUVsZW1lbnRzKQogICAgCiAgICAgICAgY29uc3Qgc291cmNlID0gcmVxdWlyZUVsZW1lbnRzLm1hcChlbnRyeT0+KHsKICAgICAgICAgIGRhdGE6IGluc3AoZW50cnkpLmRhdGEsCiAgICAgICAgICB0YWc6IGluc3AoZW50cnkpLmlzLAogICAgICAgICAgZWxtOiBlbnRyeQogICAgICAgIH0pKQogICAgCiAgICAgICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdub3NjcmlwdCNheXRobCcpKSB7CiAgICAgICAgICBjb25zdCBub3NjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ25vc2NyaXB0JykKICAgICAgICAgIG5vc2NyaXB0LmlkID0gJ2F5dGhsJzsKICAgICAgICAgIHl0ZEZsZXh5RWxtLmluc2VydEJlZm9yZTAwMChub3NjcmlwdCwgeXRkRmxleHlFbG0uZmlyc3RDaGlsZCk7CiAgICAKICAgICAgICB9CiAgICAgICAgY29uc3Qgbm9zY3JpcHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdub3NjcmlwdCNheXRobCcpOwogICAgCiAgICAgICAgY29uc3QgY2xvbmVzID0gbmV3IFNldCgpOwogICAgICAgIGZvciAoY29uc3Qge2RhdGEsIHRhZywgZWxtfSBvZiBzb3VyY2UpIHsKICAgIAogICAgICAgICAgLy8gY29uc3QgY2xvbmVOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpOwogICAgICAgICAgbGV0IGNsb25lTm9kZSA9IGVsbS5jbG9uZU5vZGUodHJ1ZSk7CiAgICAgICAgICAvLyBub3NjcmlwdC5hcHBlbmRDaGlsZChjbG9uZU5vZGUpOwogICAgICAgICAgLy8gaW5zcChjbG9uZU5vZGUpLmRhdGEgPSBudWxsOwogICAgICAgICAgaW5zcChjbG9uZU5vZGUpLmRhdGEgPSBkYXRhOwogICAgICAgICAgc291cmNlLmNsb25lID0gY2xvbmVOb2RlOwogICAgICAgICAgY2xvbmVzLmFkZChjbG9uZU5vZGUpOwogICAgICAgIH0KICAgIAogICAgCiAgICAgICAgLy8gY29uc3QgZWxtcyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd5dGQtd2F0Y2gtbWV0YWRhdGEueXRkLXdhdGNoLWZsZXh5IGRpdltzbG90PSJleHRyYS1jb250ZW50Il0nKV0uZmlsdGVyKGVsbSA9PiB7CiAgICAgICAgLy8gICBpZiAoZWxtLnBhcmVudE5vZGUuY2xvc2VzdCgnZGl2W3Nsb3Q9ImV4dHJhLWNvbnRlbnQiXSwgeXRkLW1ldGFkYXRhLXJvdy1jb250YWluZXItcmVuZGVyZXInKSkgcmV0dXJuIGZhbHNlOwogICAgICAgIC8vICAgcmV0dXJuIHRydWU7CiAgICAgICAgLy8gfSk7CiAgICAKICAgICAgICAvLyBsZXQgYXJyID0gW107CiAgICAgICAgLy8gZm9yKGNvbnN0IGVsbSBvZiBlbG1zKXsKICAgICAgICAvLyAgIGlmKGVsbS5oYXNBdHRyaWJ1dGUoJ3Nsb3QnKSkgYXJyLnB1c2goLi4uZWxtLmNoaWxkTm9kZXMpOwogICAgICAgIC8vICAgZWxzZSBhcnIucHVzaChlbG0pOwogICAgICAgIC8vIH0KICAgICAgICAvLyBhcnIgPSBhcnIuZmlsdGVyKGU9PmUgJiYgZS5ub2RlVHlwZSA9PT0gMSk7CiAgICAgICAgLy8gY29uc29sZS5sb2coMzg2LGFycikKICAgIAogICAgICAgIC8vIGNvbnN0IGNsb25lcyA9IGFyci5tYXAoZT0+ZS5jbG9uZU5vZGUodHJ1ZSkpOwogICAgCiAgICAgICAgLy8gZm9yKGxldCBub2RlID0gaW5mb0V4cGFuZGVyLm5leHRTaWJsaW5nOyBub2RlIGluc3RhbmNlb2YgTm9kZTsgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmcpIG5vZGUucmVtb3ZlKCk7CiAgICAKICAgICAgICAvLyBpbmZvRXhwYW5kZXIucGFyZW50Tm9kZS5hc3NpZ25DaGlsZHJlbjExMShudWxsLCBpbmZvRXhwYW5kZXIsIFsuLi5jbG9uZXNdKTsKICAgICAgICBsZXQgcmVtb3ZhbCA9IFtdOwogICAgICAgIGZvcihsZXQgbm9kZSA9IGluZm9FeHBhbmRlci5uZXh0U2libGluZzsgbm9kZSBpbnN0YW5jZW9mIE5vZGU7IG5vZGUgPSBub2RlLm5leHRTaWJsaW5nKXJlbW92YWwucHVzaChub2RlKTsKICAgICAgICBmb3IoY29uc3Qgbm9kZSBvZiByZW1vdmFsKSBub2RlLnJlbW92ZSgpOwogICAgICAgIGZvcihjb25zdCBub2RlIG9mIGNsb25lcykgaW5mb0V4cGFuZGVyLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQobm9kZSk7CiAgICAgICAgCiAgICAKICAgICAgICBmb3IgKGNvbnN0IHtkYXRhLCB0YWcsIGVsbSwgY2xvbmV9IG9mIHNvdXJjZSkgewogICAgCiAgICAgICAgICBpbnNwKGNsb25lKS5kYXRhID0gbnVsbDsKICAgICAgICAgIGluc3AoY2xvbmUpLmRhdGEgPSBkYXRhOwogICAgICAgIH0KICAgIAogICAgICAgIC8vIGNvbnNvbGUubG9nKGluZm9FeHBhbmRlci5wYXJlbnROb2RlLmNoaWxkTm9kZXMpCiAgICAgIH0KICAgICovCgogICAgY29uc3QgZHVtbXlOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbm9zY3JpcHQnKTsKCiAgICAvLyBjb25zdCBfX2o0ODM4X18gPSBTeW1ib2woKTsKICAgIGNvbnN0IF9fajQ4MzZfXyA9IFN5bWJvbCgpOwogICAgY29uc3QgX19qNTc0NF9fID0gU3ltYm9sKCk7IC8vIG9yaWdpbmFsIGVsZW1lbnQKICAgIGNvbnN0IF9fajU3MzNfXyA9IFN5bWJvbCgpOyAvLyBfX2xhc3RDaGFuZ2VkX18KCiAgICBjb25zdCBtb25pdG9yRGF0YUNoYW5nZWRCeURPTU11dGF0aW9uID0gYXN5bmMgZnVuY3Rpb24gKG11dGF0aW9ucykgewoKICAgICAgY29uc3Qgbm9kZVdSID0gdGhpczsKICAgICAgY29uc3Qgbm9kZSA9IGtSZWYobm9kZVdSKTsKICAgICAgaWYgKCFub2RlKSByZXR1cm47CgogICAgICBjb25zdCBjbnQgPSBpbnNwKG5vZGUpOwogICAgICBjb25zdCBfX2xhc3RDaGFuZ2VkX18gPSBjbnRbX19qNTczM19fXTsKCgogICAgICBjb25zdCB2YWwgPSBjbnQuZGF0YSA/IChjbnQuZGF0YVtfX2o0ODM2X19dIHx8IDEpIDogMDsKCiAgICAgIGlmIChfX2xhc3RDaGFuZ2VkX18gIT09IHZhbCkgewogICAgICAgIGNudFtfX2o1NzMzX19dID0gdmFsID4gMCA/IChjbnQuZGF0YVtfX2o0ODM2X19dID0gRGF0ZS5ub3coKSkgOiAwOwoKICAgICAgICBhd2FpdCBQcm9taXNlLnJlc29sdmUoKTsgLy8gcmVxdWlyZWQgZm9yIG1ha2luZyBzdWZmaWNpZW50IGRlbGF5IGZvciBkYXRhIHJlbmRlcmluZwogICAgICAgIGF0dHJpYnV0ZUluYyhub2RlLCAndHl0LWRhdGEtY2hhbmdlLWNvdW50ZXInKTsgLy8gbmV4dCBtYWNybyB0YXNrCgogICAgICB9CgogICAgfQoKICAgIGNvbnN0IG1vQ2hhbmdlUmVmbGVjdGlvbiA9IGZ1bmN0aW9uIChtdXRhdGlvbnMpIHsKCiAgICAgIGNvbnN0IG5vZGVXUiA9IHRoaXM7CiAgICAgIGNvbnN0IG5vZGUgPSBrUmVmKG5vZGVXUik7CiAgICAgIGlmICghbm9kZSkgcmV0dXJuOwogICAgICBjb25zdCBvcmlnaW5FbGVtZW50ID0ga1JlZihub2RlW19fajU3NDRfX10gfHwgbnVsbCkgfHwgbnVsbDsKICAgICAgaWYgKCFvcmlnaW5FbGVtZW50KSByZXR1cm47CgogICAgICBjb25zdCBjbnQgPSBpbnNwKG5vZGUpOwogICAgICBjb25zdCBvcmlDbnQgPSBpbnNwKG9yaWdpbkVsZW1lbnQpOwoKICAgICAgaWYgKG11dGF0aW9ucykgewoKICAgICAgICBsZXQgYmZEYXRhQ2hhbmdlQ291bnRlciA9IGZhbHNlOwogICAgICAgIGZvciAoY29uc3QgbXV0YXRpb24gb2YgbXV0YXRpb25zKSB7CgogICAgICAgICAgaWYgKG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09ICd0eXQtY2xvbmUtcmVmcmVzaC1jb3VudCcgJiYgbXV0YXRpb24udGFyZ2V0ID09PSBvcmlnaW5FbGVtZW50KSB7CiAgICAgICAgICAgIGJmRGF0YUNoYW5nZUNvdW50ZXIgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIGlmIChtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lID09PSAndHl0LWRhdGEtY2hhbmdlLWNvdW50ZXInICYmIG11dGF0aW9uLnRhcmdldCA9PT0gb3JpZ2luRWxlbWVudCkgewogICAgICAgICAgICBiZkRhdGFDaGFuZ2VDb3VudGVyID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGJmRGF0YUNoYW5nZUNvdW50ZXIgJiYgb3JpQ250LmRhdGEpIHsKICAgICAgICAgIG5vZGUucmVwbGFjZVdpdGgoZHVtbXlOb2RlKTsKICAgICAgICAgIGNudC5kYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgb3JpQ250LmRhdGEpOwogICAgICAgICAgZHVtbXlOb2RlLnJlcGxhY2VXaXRoKG5vZGUpOwogICAgICAgIH0KCiAgICAgIH0KICAgIH0KCiAgICAvKgogICAgY29uc3QgbW9DaGFuZ2VSZWZsZWN0aW9uID0gYXN5bmMgZnVuY3Rpb24gKG11dGF0aW9ucykgewogIAogICAgICBjb25zdCBub2RlV1IgPSB0aGlzOwogICAgICBjb25zdCBub2RlID0ga1JlZihub2RlV1IpOwogICAgICBpZiAoIW5vZGUpIHJldHVybjsKICAgICAgY29uc3Qgb3JpZ2luRWxlbWVudCA9IGtSZWYobm9kZVtfX2o1NzQ0X19dIHx8IG51bGwpIHx8IG51bGw7CiAgICAgIGlmICghb3JpZ2luRWxlbWVudCkgcmV0dXJuOwogIAogICAgICBjb25zdCBjbnQgPSBpbnNwKG5vZGUpOwogICAgICBjb25zdCBvcmlDbnQgPSBpbnNwKG9yaWdpbkVsZW1lbnQpOwogIAogICAgICBpZihtdXRhdGlvbnMpewogIAogICAgICAgIGxldCBiZkRhdGFDaGFuZ2VDb3VudGVyID0gZmFsc2U7CiAgICAgICAgZm9yIChjb25zdCBtdXRhdGlvbiBvZiBtdXRhdGlvbnMpIHsKICAgICAgICAgIGlmIChtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lID09PSAndHl0LWRhdGEtY2hhbmdlLWNvdW50ZXInICYmIG11dGF0aW9uLnRhcmdldCA9PT0gb3JpZ2luRWxlbWVudCkgewogICAgICAgICAgICBiZkRhdGFDaGFuZ2VDb3VudGVyID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYoYmZEYXRhQ2hhbmdlQ291bnRlciAmJiBvcmlDbnQuZGF0YSl7CiAgICAgICAgICBub2RlLnJlcGxhY2VXaXRoKGR1bW15Tm9kZSk7CiAgICAgICAgICBjbnQuZGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIG9yaUNudC5kYXRhKTsKICAgICAgICAgIGR1bW15Tm9kZS5yZXBsYWNlV2l0aChub2RlKTsKICAgICAgICB9CiAgCiAgICAgIH0gCiAgCiAgICAgIC8vIGNvbnNvbGUubG9nKDgzNDgsIG9yaWdpbkVsZW1lbnQpCiAgCiAgICAgIGlmIChjbnQuaXNBdHRhY2hlZCA9PT0gZmFsc2UpIHsKICAgICAgICAvLyBkbyBub3RoaW5nCiAgICAgICAgLy8gZG9uJ3QgY2FsbCBpbmZvRml4KCkgYXMgaXQgc2hhbGwgYmUgb25seSBjYWxsZWQgaW4geXRkLWV4cGFuZGVyOjphdHRhY2hlZCBhbmQgeXQtbmF2aWdhdGUtZmluaXNoCiAgICAgIH0gZWxzZSBpZiAob3JpQ250LmlzQXR0YWNoZWQgPT09IGZhbHNlICYmIGNudC5pc0F0dGFjaGVkID09PSB0cnVlKSB7CiAgICAgICAgaWYgKG5vZGUuaXNDb25uZWN0ZWQgJiYgbm9kZS5wYXJlbnROb2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnRfKSB7CiAgICAgICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5vZGUucmVtb3ZlKCk7CiAgICAgICAgfQogICAgICAgIGlmIChvcmlDbnQuZGF0YSAhPT0gbnVsbCkgewogICAgICAgICAgY250LmRhdGEgPSBudWxsOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChvcmlDbnQuaXNBdHRhY2hlZCA9PT0gdHJ1ZSAmJiBjbnQuaXNBdHRhY2hlZCA9PT0gdHJ1ZSkgewogICAgICAgIGlmICghb3JpQ250LmRhdGEpIHsKICAgICAgICAgIGlmKGNudC5kYXRhKXsKICAgICAgICAgICAgY250LmRhdGEgPSBudWxsOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoIWNudC5kYXRhIHx8IG9yaUNudC5kYXRhW19fajQ4MzhfX10gIT09IGNudC5kYXRhW19fajQ4MzhfX10pIHsKICAgICAgICAgIG9yaUNudC5kYXRhW19fajQ4MzhfX10gPSBEYXRlLm5vdygpOwogICAgICAgICAgYXdhaXQgUHJvbWlzZS5yZXNvbHZlKCk7IC8vIHJlcXVpcmVkIGZvciBtYWtpbmcgc3VmZmljaWVudCBkZWxheSBmb3IgZGF0YSByZW5kZXJpbmcKICAgICAgICAgIGF0dHJpYnV0ZUluYyhvcmlnaW5FbGVtZW50LCAndHl0LWRhdGEtY2hhbmdlLWNvdW50ZXInKTsgLy8gbmV4dCBtYWNybyB0YXNrCiAgICAgICAgfQogICAgICB9CiAgCiAgICB9OwogICAgKi8KCiAgICBjb25zdCBhdHRyaWJ1dGVJbmMgPSAoZWxtLCBwcm9wKSA9PiB7CiAgICAgIGxldCB2ID0gKCtlbG0uZ2V0QXR0cmlidXRlMDAwKHByb3ApIHx8IDApICsgMTsKICAgICAgaWYgKHYgPiAxZTkpIHYgPSA5OwogICAgICBlbG0uc2V0QXR0cmlidXRlMDAwKHByb3AsIHYpOwogICAgICByZXR1cm4gdjsKICAgIH0KCgogICAgLyoqCiAgICAgICAgKiBVQ1stX2EtekEtWjAtOSs9Ll17MjJ9CiAgICAgICAgKiBodHRwczovL3N1cHBvcnQuZ29vZ2xlLmNvbS95b3V0dWJlL2Fuc3dlci82MDcwMzQ0P2hsPWVuCiAgICAgICAgKiBUaGUgY2hhbm5lbCBJRCBpcyB0aGUgMjQgY2hhcmFjdGVyIGFscGhhbnVtZXJpYyBzdHJpbmcgdGhhdCBzdGFydHMgd2l0aCAnVUMnIGluIHRoZSBjaGFubmVsIFVSTC4KICAgICovCgogICAgY29uc3QgaXNDaGFubmVsSWQgPSAoeCkgPT4gewogICAgICBpZiAodHlwZW9mIHggPT09ICdzdHJpbmcnICYmIHgubGVuZ3RoID09PSAyNCkgewogICAgICAgIHJldHVybiAvVUNbLV9hLXpBLVowLTkrPS5dezIyfS8udGVzdCh4KTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgoKICAgIGNvbnN0IGluZm9GaXggPSAobG9ja0lkKSA9PiB7CiAgICAgIGlmIChsb2NrSWQgIT09IG51bGwgJiYgbG9ja0dldFsnaW5mb0ZpeExvY2snXSAhPT0gbG9ja0lkKSByZXR1cm47CiAgICAgIC8vIGNvbnNvbGUubG9nKCcoKGluZm9GaXgpKScpCiAgICAgIGNvbnN0IGluZm9FeHBhbmRlciA9IGVsZW1lbnRzLmluZm9FeHBhbmRlcjsKICAgICAgY29uc3QgaW5mb0NvbnRhaW5lciA9IChpbmZvRXhwYW5kZXIgPyBpbmZvRXhwYW5kZXIucGFyZW50Tm9kZSA6IG51bGwpIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YWItaW5mbycpOwogICAgICBjb25zdCB5dGRGbGV4eUVsbSA9IGVsZW1lbnRzLmZsZXh5OwogICAgICBpZiAoIWluZm9Db250YWluZXIgfHwgIXl0ZEZsZXh5RWxtKSByZXR1cm47CiAgICAgIC8vIGNvbnNvbGUubG9nKDM4NiwgaW5mb0V4cGFuZGVyLCBpbmZvRXhwYW5kZXIubWF0Y2hlcygnI3RhYi1pbmZvID4gW2NsYXNzXScpKQogICAgICBpZiAoaW5mb0V4cGFuZGVyKSB7CiAgICAgICAgY29uc3QgbWF0Y2ggPSBpbmZvRXhwYW5kZXIubWF0Y2hlcygnI3RhYi1pbmZvID4gW2NsYXNzXScpIHx8IGluZm9FeHBhbmRlci5tYXRjaGVzKCcjdGFiLWluZm8gPiBbdHl0LW1haW4taW5mb10nKTsKICAgICAgICBpZiAoIW1hdGNoKSByZXR1cm47CiAgICAgIH0KICAgICAgLy8gY29uc3QgZWxtcyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd5dGQtd2F0Y2gtbWV0YWRhdGEueXRkLXdhdGNoLWZsZXh5IGRpdltzbG90PSJleHRyYS1jb250ZW50Il0sIHl0ZC13YXRjaC1tZXRhZGF0YS55dGQtd2F0Y2gtZmxleHkgeXRkLW1ldGFkYXRhLXJvdy1jb250YWluZXItcmVuZGVyZXInKV0uZmlsdGVyKGVsbT0+ewogICAgICAvLyAgIGlmKGVsbS5wYXJlbnROb2RlLmNsb3Nlc3QoJ2RpdltzbG90PSJleHRyYS1jb250ZW50Il0sIHl0ZC1tZXRhZGF0YS1yb3ctY29udGFpbmVyLXJlbmRlcmVyJykpIHJldHVybiBmYWxzZTsKICAgICAgLy8gICAgcmV0dXJuIHRydWU7CiAgICAgIC8vIH0pOwoKICAgICAgY29uc3QgcmVxdWlyZUVsZW1lbnRzID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3l0ZC13YXRjaC1tZXRhZGF0YS55dGQtd2F0Y2gtZmxleHkgZGl2W3Nsb3Q9ImV4dHJhLWNvbnRlbnQiXSA+ICosIHl0ZC13YXRjaC1tZXRhZGF0YS55dGQtd2F0Y2gtZmxleHkgI2V4dHJhLWNvbnRlbnQgPiAqJyldLmZpbHRlcihlbG0gPT4gewogICAgICAgIHJldHVybiB0eXBlb2YgZWxtLmlzID09ICdzdHJpbmcnCiAgICAgIH0pLm1hcChlbG0gPT4gewogICAgICAgIGNvbnN0IGlzID0gZWxtLmlzOwogICAgICAgIHdoaWxlIChlbG0gaW5zdGFuY2VvZiBIVE1MRWxlbWVudF8pIHsKICAgICAgICAgIGNvbnN0IHEgPSBbLi4uZWxtLnF1ZXJ5U2VsZWN0b3JBbGwoaXMpXS5maWx0ZXIoZSA9PiBpbnNwKGUpLmRhdGEpOwogICAgICAgICAgaWYgKHEubGVuZ3RoID49IDEpIHJldHVybiBxWzBdOwogICAgICAgICAgZWxtID0gZWxtLnBhcmVudE5vZGU7CiAgICAgICAgfQogICAgICB9KS5maWx0ZXIoZWxtID0+ICEhZWxtICYmIHR5cGVvZiBlbG0uaXMgPT09ICdzdHJpbmcnKTsKICAgICAgLy8gY29uc29sZS5sb2coOTE2MiwgcmVxdWlyZUVsZW1lbnRzKQoKICAgICAgLy8gaWYgKCFpbmZvRXhwYW5kZXIgJiYgIXJlcXVpcmVFbGVtZW50cy5sZW5ndGgpIHJldHVybjsKCiAgICAgIGNvbnN0IHNvdXJjZSA9IHJlcXVpcmVFbGVtZW50cy5tYXAoZW50cnkgPT4gewogICAgICAgIGNvbnN0IGluc3QgPSBpbnNwKGVudHJ5KTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZGF0YTogaW5zdC5kYXRhLAogICAgICAgICAgdGFnOiBpbnN0LmlzLAogICAgICAgICAgZWxtOiBlbnRyeQogICAgICAgIH07CiAgICAgIH0pOwoKICAgICAgbGV0IG5vc2NyaXB0XyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ25vc2NyaXB0I2F5dGhsJyk7CiAgICAgIGlmICghbm9zY3JpcHRfKSB7CiAgICAgICAgbm9zY3JpcHRfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbm9zY3JpcHQnKQogICAgICAgIG5vc2NyaXB0Xy5pZCA9ICdheXRobCc7CgogICAgICAgIGluUGFnZVJlYXJyYW5nZSA9IHRydWU7CiAgICAgICAgeXRkRmxleHlFbG0uaW5zZXJ0QmVmb3JlMDAwKG5vc2NyaXB0XywgeXRkRmxleHlFbG0uZmlyc3RDaGlsZCk7CiAgICAgICAgaW5QYWdlUmVhcnJhbmdlID0gZmFsc2U7CiAgICAgIH0KICAgICAgY29uc3Qgbm9zY3JpcHQgPSBub3NjcmlwdF87CgoKICAgICAgbGV0IHJlcXVpcmVkVXBkYXRlID0gZmFsc2U7CiAgICAgIGNvbnN0IG1pcnJvckVsbVNldCA9IG5ldyBTZXQoKTsKICAgICAgY29uc3QgdGFyZ2V0UGFyZW50ID0gaW5mb0NvbnRhaW5lcjsKICAgICAgZm9yIChjb25zdCB7IGRhdGEsIHRhZzogdGFnLCBlbG06IHMgfSBvZiBzb3VyY2UpIHsKCiAgICAgICAgbGV0IG1pcnJvck5vZGUgPSBtaXJyb3JOb2RlV1MuZ2V0KHMpCiAgICAgICAgbWlycm9yTm9kZSA9IG1pcnJvck5vZGUgPyBrUmVmKG1pcnJvck5vZGUpIDogbWlycm9yTm9kZTsKICAgICAgICBpZiAoIW1pcnJvck5vZGUpIHsKICAgICAgICAgIGNvbnN0IGNudCA9IGluc3Aocyk7CiAgICAgICAgICBjb25zdCBjUHJvdG8gPSBjbnQuY29uc3RydWN0b3IucHJvdG90eXBlOwoKICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7CiAgICAgICAgICBub3NjcmlwdC5hcHBlbmRDaGlsZChlbGVtZW50KTsgLy8gYXBwZW5kQ2hpbGQgdG8gdHJpZ2dlciAuYXR0YWNoZWQoKQogICAgICAgICAgbWlycm9yTm9kZSA9IGVsZW1lbnQKICAgICAgICAgIG1pcnJvck5vZGVbX19qNTc0NF9fXSA9IG1XZWFrUmVmKHMpOwoKICAgICAgICAgIGNvbnN0IG5vZGVXUiA9IG1XZWFrUmVmKG1pcnJvck5vZGUpOwogICAgICAgICAgLy8gaWYoIShpbnNwKHMpLl9kYXRhQ2hhbmdlZDQzOCkpewogICAgICAgICAgLy8gICBpbnNwKHMpLl9kYXRhQ2hhbmdlZDQzOCA9IGFzeW5jIGZ1bmN0aW9uKCl7CgogICAgICAgICAgLy8gICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpOyAvLyByZXF1aXJlZCBmb3IgbWFraW5nIHN1ZmZpY2llbnQgZGVsYXkgZm9yIGRhdGEgcmVuZGVyaW5nCiAgICAgICAgICAvLyAgICAgYXR0cmlidXRlSW5jKG9yaWdpbkVsZW1lbnQsICd0eXQtZGF0YS1jaGFuZ2UtY291bnRlcicpOyAvLyBuZXh0IG1hY3JvIHRhc2sKICAgICAgICAgIC8vICAgICBtb0NoYW5nZVJlZmxlY3Rpb24uY2FsbChub2RlV1IpOwogICAgICAgICAgLy8gICB9CiAgICAgICAgICAvLyB9CgoKCgogICAgICAgICAgbmV3IE11dGF0aW9uT2JzZXJ2ZXIobW9DaGFuZ2VSZWZsZWN0aW9uLmJpbmQobm9kZVdSKSkub2JzZXJ2ZShzLCB7IGF0dHJpYnV0ZXM6IHRydWUsIGF0dHJpYnV0ZUZpbHRlcjogWyd0eXQtY2xvbmUtcmVmcmVzaC1jb3VudCcsICd0eXQtZGF0YS1jaGFuZ2UtY291bnRlciddIH0pOwoKCiAgICAgICAgICBzLmp5ODQzMiA9IDE7CiAgICAgICAgICBpZiAoIShjUHJvdG8gaW5zdGFuY2VvZiBOb2RlKSAmJiAhY1Byb3RvLl9kYXRhQ2hhbmdlZDQ5NiAmJiB0eXBlb2YgY1Byb3RvLl9jcmVhdGVQcm9wZXJ0eU9ic2VydmVyID09PSAnZnVuY3Rpb24nKSB7CgoKICAgICAgICAgICAgY1Byb3RvLl9kYXRhQ2hhbmdlZDQ5NiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBjb25zdCBjbnQgPSB0aGlzOwogICAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBjbnQuaG9zdEVsZW1lbnQgfHwgY250OwogICAgICAgICAgICAgIGlmIChub2RlLmp5ODQzMikgewoKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdoZWxsbyBfZGF0YUNoYW5nZWQ0OTYnLCB0aGlzLmlzKTsKICAgICAgICAgICAgICAgIC8vIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpOyAvLyByZXF1aXJlZCBmb3IgbWFraW5nIHN1ZmZpY2llbnQgZGVsYXkgZm9yIGRhdGEgcmVuZGVyaW5nCiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVJbmMobm9kZSwgJ3R5dC1kYXRhLWNoYW5nZS1jb3VudGVyJyk7IC8vIG5leHQgbWFjcm8gdGFzawogICAgICAgICAgICAgIH0KCgogICAgICAgICAgICB9CgogICAgICAgICAgICBjUHJvdG8uX2NyZWF0ZVByb3BlcnR5T2JzZXJ2ZXIoJ2RhdGEnLCAnX2RhdGFDaGFuZ2VkNDk2JywgdW5kZWZpbmVkKQoKICAgICAgICAgIH0gZWxzZSBpZiAoIShjUHJvdG8gaW5zdGFuY2VvZiBOb2RlKSAmJiAhY1Byb3RvLl9kYXRhQ2hhbmdlZDQ5NiAmJiBjUHJvdG8udXNlU2lnbmFscyA9PT0gdHJ1ZSAmJiBpbnNwKHMpLnNpZ25hbFByb3h5KSB7CgogICAgICAgICAgICBjb25zdCBkYXRhU2lnbmFsID0gY250Py5zaWduYWxQcm94eT8uc2lnbmFsQ2FjaGU/LmRhdGE7CiAgICAgICAgICAgIGlmIChkYXRhU2lnbmFsICYmIHR5cGVvZiBkYXRhU2lnbmFsLnNldFdpdGhQYXRoID09PSAnZnVuY3Rpb24nICYmICFkYXRhU2lnbmFsLnNldFdpdGhQYXRoNTczICYmICFkYXRhU2lnbmFsLmNvbnRyb2xsZXI1NzMpIHsKICAgICAgICAgICAgICBkYXRhU2lnbmFsLmNvbnRyb2xsZXI1NzMgPSBtV2Vha1JlZihjbnQpOwogICAgICAgICAgICAgIGRhdGFTaWduYWwuc2V0V2l0aFBhdGg1NzMgPSBkYXRhU2lnbmFsLnNldFdpdGhQYXRoOwogICAgICAgICAgICAgIGRhdGFTaWduYWwuc2V0V2l0aFBhdGggPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBjb25zdCBjbnQgPSAoa1JlZih0aGlzLmNvbnRyb2xsZXI1NzMgfHwgbnVsbCkgfHwgbnVsbCk7CiAgICAgICAgICAgICAgICBjbnQgJiYgdHlwZW9mIGNudC5fZGF0YUNoYW5nZWQ0OTZrID09PSAnZnVuY3Rpb24nICYmIFByb21pc2UucmVzb2x2ZShjbnQpLnRoZW4oY250Ll9kYXRhQ2hhbmdlZDQ5NmspLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRXaXRoUGF0aDU3MyguLi5hcmd1bWVudHMpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGNQcm90by5fZGF0YUNoYW5nZWQ0OTYgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBjb25zdCBjbnQgPSB0aGlzOwogICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IGNudC5ob3N0RWxlbWVudCB8fCBjbnQ7CiAgICAgICAgICAgICAgICBpZiAobm9kZS5qeTg0MzIpIHsKICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2hlbGxvIF9kYXRhQ2hhbmdlZDQ5NicsIHRoaXMuaXMpOwogICAgICAgICAgICAgICAgICAvLyBhd2FpdCBQcm9taXNlLnJlc29sdmUoKTsgLy8gcmVxdWlyZWQgZm9yIG1ha2luZyBzdWZmaWNpZW50IGRlbGF5IGZvciBkYXRhIHJlbmRlcmluZwogICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVJbmMobm9kZSwgJ3R5dC1kYXRhLWNoYW5nZS1jb3VudGVyJyk7IC8vIG5leHQgbWFjcm8gdGFzawogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjUHJvdG8uX2RhdGFDaGFuZ2VkNDk2ayA9ICgoY250KSA9PiBjbnQuX2RhdGFDaGFuZ2VkNDk2KCkpOwoKICAgICAgICAgICAgfQoKICAgICAgICAgIH0KCgogICAgICAgICAgaWYgKCFjUHJvdG8uX2RhdGFDaGFuZ2VkNDk2KSB7CgogICAgICAgICAgICBuZXcgTXV0YXRpb25PYnNlcnZlcihtb25pdG9yRGF0YUNoYW5nZWRCeURPTU11dGF0aW9uLmJpbmQobWlycm9yTm9kZVtfX2o1NzQ0X19dKSkub2JzZXJ2ZShzLCB7IGF0dHJpYnV0ZXM6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTsKCiAgICAgICAgICB9CgoKICAgICAgICAgIC8vIG5ldyBNdXRhdGlvbk9ic2VydmVyKG1vQ2hhbmdlUmVmbGVjdGlvbi5iaW5kKG5vZGVXUikpLm9ic2VydmUocywge2F0dHJpYnV0ZXM6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZX0pOwoKICAgICAgICAgIG1pcnJvck5vZGVXUy5zZXQocywgbm9kZVdSKTsKICAgICAgICAgIHJlcXVpcmVkVXBkYXRlID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewoKICAgICAgICAgIGlmIChtaXJyb3JOb2RlLnBhcmVudE5vZGUgIT09IHRhcmdldFBhcmVudCkgewogICAgICAgICAgICByZXF1aXJlZFVwZGF0ZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghcmVxdWlyZWRVcGRhdGUpIHsKICAgICAgICAgIGNvbnN0IGNsb25lTm9kZUNudCA9IGluc3AobWlycm9yTm9kZSk7CiAgICAgICAgICBpZiAoY2xvbmVOb2RlQ250LmRhdGEgIT09IGRhdGEpIHsKICAgICAgICAgICAgLy8gaWYobWlycm9yTm9kZS5wYXJlbnROb2RlICE9PSBub3NjcmlwdCl7CiAgICAgICAgICAgIC8vICAgbm9zY3JpcHQuYXBwZW5kQ2hpbGQobWlycm9yTm9kZSk7CiAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgLy8gbWlycm9yTm9kZS5yZXBsYWNlV2l0aChkdW1teU5vZGUpOwogICAgICAgICAgICAvLyBjbG9uZU5vZGVDbnQuZGF0YSA9IGRhdGE7CiAgICAgICAgICAgIC8vIGR1bW15Tm9kZS5yZXBsYWNlV2l0aChtaXJyb3JOb2RlKTsKICAgICAgICAgICAgcmVxdWlyZWRVcGRhdGUgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KCgogICAgICAgIG1pcnJvckVsbVNldC5hZGQobWlycm9yTm9kZSk7CiAgICAgICAgc291cmNlLm1pcnJvcmVkID0gbWlycm9yTm9kZTsKCiAgICAgIH0KCiAgICAgIGNvbnN0IG1pcnJvRWxtQXJyID0gWy4uLm1pcnJvckVsbVNldF07CiAgICAgIG1pcnJvckVsbVNldC5jbGVhcigpOwoKICAgICAgaWYgKCFyZXF1aXJlZFVwZGF0ZSkgewogICAgICAgIGxldCBlID0gaW5mb0V4cGFuZGVyID8gLTEgOiAwOwogICAgICAgIC8vIERPTSBUcmVlIENoZWNrCiAgICAgICAgZm9yIChsZXQgbiA9IHRhcmdldFBhcmVudC5maXJzdENoaWxkOyBuIGluc3RhbmNlb2YgTm9kZTsgbiA9IG4ubmV4dFNpYmxpbmcpIHsKICAgICAgICAgIGxldCB0YXJnZXQgPSBlIDwgMCA/IGluZm9FeHBhbmRlciA6IG1pcnJvRWxtQXJyW2VdOwogICAgICAgICAgZSsrOwogICAgICAgICAgaWYgKG4gIT09IHRhcmdldCkgewogICAgICAgICAgICAvLyB0YXJnZXQgY2FuIGJlIHVuZGVmaW5lZCBpZiBpbmRleCBvdmVyZmxvdwogICAgICAgICAgICByZXF1aXJlZFVwZGF0ZSA9IHRydWU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIXJlcXVpcmVkVXBkYXRlICYmIGUgIT09IG1pcnJvRWxtQXJyLmxlbmd0aCArIDEpIHJlcXVpcmVkVXBkYXRlID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKHJlcXVpcmVkVXBkYXRlKSB7CiAgICAgICAgaWYgKGluZm9FeHBhbmRlcikgewogICAgICAgICAgdGFyZ2V0UGFyZW50LmFzc2lnbkNoaWxkcmVuMTExKG51bGwsIGluZm9FeHBhbmRlciwgbWlycm9FbG1BcnIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0YXJnZXRQYXJlbnQucmVwbGFjZUNoaWxkcmVuMDAwKC4uLm1pcnJvRWxtQXJyKTsKICAgICAgICB9CiAgICAgICAgZm9yIChjb25zdCBtaXJyb3JFbG0gb2YgbWlycm9FbG1BcnIpIHsKICAgICAgICAgIC8vIHRyaWdnZXIgZGF0YSBhc3NpZ25tZW50IGFuZCByZWNvcmQgcmVmcmVzaCBjb3VudCBieSBtYW51YWwgdXBkYXRlCiAgICAgICAgICBjb25zdCBqID0gYXR0cmlidXRlSW5jKG1pcnJvckVsbSwgJ3R5dC1jbG9uZS1yZWZyZXNoLWNvdW50Jyk7CiAgICAgICAgICBjb25zdCBvcmlFbG0gPSBrUmVmKG1pcnJvckVsbVtfX2o1NzQ0X19dIHx8IG51bGwpIHx8IG51bGw7CiAgICAgICAgICBpZiAob3JpRWxtKSB7CiAgICAgICAgICAgIG9yaUVsbS5zZXRBdHRyaWJ1dGUxMTEoJ3R5dC1jbG9uZS1yZWZyZXNoLWNvdW50JywgaikKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1pcnJvRWxtQXJyLmxlbmd0aCA9IDA7CiAgICAgIHNvdXJjZS5sZW5ndGggPSAwOwoKICAgIH0KCiAgICBjb25zdCBsYXlvdXRGaXggPSAobG9ja0lkKSA9PiB7CiAgICAgIGlmIChsb2NrR2V0WydsYXlvdXRGaXhMb2NrJ10gIT09IGxvY2tJZCkgcmV0dXJuOwogICAgICAvLyBjb25zb2xlLmxvZygnKChsYXlvdXRGaXgpKScpCgogICAgICBjb25zdCBzZWNvbmRhcnlXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlY29uZGFyeS1pbm5lci5zdHlsZS1zY29wZS55dGQtd2F0Y2gtZmxleHkgPiBzZWNvbmRhcnktd3JhcHBlcicpOwogICAgICAvLyBjb25zb2xlLmxvZygzODM4LCAhIWNoYXRDb250YWluZXIsICEhKHNlY29uZGFyeVdyYXBwZXIgJiYgc2Vjb25kYXJ5SW5uZXIpLCBzZWNvbmRhcnlJbm5lcj8uZmlyc3RDaGlsZCwgc2Vjb25kYXJ5SW5uZXI/Lmxhc3RDaGlsZCAsIHNlY29uZGFyeVdyYXBwZXI/LnBhcmVudE5vZGUgPT09IHNlY29uZGFyeUlubmVyKQogICAgICBpZiAoc2Vjb25kYXJ5V3JhcHBlcikgewogICAgICAgIGNvbnN0IHNlY29uZGFyeUlubmVyID0gc2Vjb25kYXJ5V3JhcHBlci5wYXJlbnROb2RlOwoKICAgICAgICBjb25zdCBjaGF0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbHVtbnMuc3R5bGUtc2NvcGUueXRkLXdhdGNoLWZsZXh5IFt0eXQtY2hhdC1jb250YWluZXJdJyk7CiAgICAgICAgaWYgKHNlY29uZGFyeUlubmVyLmZpcnN0Q2hpbGQgIT09IHNlY29uZGFyeUlubmVyLmxhc3RDaGlsZCB8fCAoY2hhdENvbnRhaW5lciAmJiAhY2hhdENvbnRhaW5lci5jbG9zZXN0KCdzZWNvbmRhcnktd3JhcHBlcicpKSkgewogICAgICAgICAgLy8gY29uc29sZS5sb2coMzgzODEpCiAgICAgICAgICBsZXQgdyA9IFtdOwogICAgICAgICAgbGV0IHcyID0gW107CiAgICAgICAgICBmb3IgKGxldCBub2RlID0gc2Vjb25kYXJ5SW5uZXIuZmlyc3RDaGlsZDsgbm9kZSBpbnN0YW5jZW9mIE5vZGU7IG5vZGUgPSBub2RlLm5leHRTaWJsaW5nKSB7CiAgICAgICAgICAgIGlmIChub2RlID09PSBjaGF0Q29udGFpbmVyICYmIGNoYXRDb250YWluZXIpIHsKCiAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZSA9PT0gc2Vjb25kYXJ5V3JhcHBlcikgewoKICAgICAgICAgICAgICBmb3IgKGxldCBub2RlMiA9IHNlY29uZGFyeVdyYXBwZXIuZmlyc3RDaGlsZDsgbm9kZTIgaW5zdGFuY2VvZiBOb2RlOyBub2RlMiA9IG5vZGUyLm5leHRTaWJsaW5nKSB7CiAgICAgICAgICAgICAgICBpZiAobm9kZTIgPT09IGNoYXRDb250YWluZXIgJiYgY2hhdENvbnRhaW5lcikgewogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgaWYgKG5vZGUyLmlkID09PSAncmlnaHQtdGFicycgJiYgY2hhdENvbnRhaW5lcikgewogICAgICAgICAgICAgICAgICAgIHcyLnB1c2goY2hhdENvbnRhaW5lcik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdzIucHVzaChub2RlMik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHcucHVzaChub2RlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgLy8gY29uc29sZS5sb2coJ3F3dycsIHcsIHcyKQoKICAgICAgICAgIGluUGFnZVJlYXJyYW5nZSA9IHRydWU7CiAgICAgICAgICBzZWNvbmRhcnlXcmFwcGVyLnJlcGxhY2VDaGlsZHJlbjAwMCguLi53LCAuLi53Mik7CiAgICAgICAgICBpblBhZ2VSZWFycmFuZ2UgPSBmYWxzZTsKICAgICAgICAgIGNvbnN0IGNoYXRFbG0gPSBlbGVtZW50cy5jaGF0OwogICAgICAgICAgY29uc3QgY2hhdENudCA9IGluc3AoY2hhdEVsbSk7CiAgICAgICAgICBpZiAoY2hhdENudCAmJiB0eXBlb2YgY2hhdENudC51cmxDaGFuZ2VkID09PSAnZnVuY3Rpb24nICYmIHNlY29uZGFyeVdyYXBwZXIuY29udGFpbnMoY2hhdEVsbSkpIHsKCiAgICAgICAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4gY2hhdENudC51cmxDaGFuZ2VkLCAxMzYpOwogICAgICAgICAgICBpZiAodHlwZW9mIGNoYXRDbnQudXJsQ2hhbmdlZEFzeW5jMTIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICBERUJVR181MDg1ICYmIGNvbnNvbGUubG9nKCdlbGVtZW50cy5jaGF0IHVybENoYW5nZWRBc3luYzEyJywgNjEpOwogICAgICAgICAgICAgIGNoYXRDbnQudXJsQ2hhbmdlZCgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIERFQlVHXzUwODUgJiYgY29uc29sZS5sb2coJ2VsZW1lbnRzLmNoYXQgdXJsQ2hhbmdlZEFzeW5jMTInLCA2Mik7CiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBjaGF0Q250LnVybENoYW5nZWQoKSwgMTM2KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgIH0KCiAgICBsZXQgbGFzdFBhbmVsID0gJyc7CiAgICBsZXQgbGFzdFRhYiA9ICcnOwogICAgLy8gbGV0IGZpeEluaXRpYWxUYWJTdGF0ZSA9IDA7CgogICAgY29uc3QgYW9FZ21QYW5lbHMgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7CiAgICAgIC8vIGNvbnNvbGUubG9nKDUwOTQsMyk7CiAgICAgIFByb21pc2UucmVzb2x2ZShsb2NrU2V0Wyd1cGRhdGVFZ21QYW5lbHNMb2NrJ10pLnRoZW4odXBkYXRlRWdtUGFuZWxzKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgfSk7CgogICAgY29uc3QgcmVtb3ZlS2VlcENvbW1lbnRzU2Nyb2xsZXIgPSBhc3luYyAobG9ja0lkKSA9PiB7CiAgICAgIGlmIChsb2NrR2V0WydyZW1vdmVLZWVwQ29tbWVudHNTY3JvbGxlckxvY2snXSAhPT0gbG9ja0lkKSByZXR1cm47CiAgICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpOwogICAgICBpZiAobG9ja0dldFsncmVtb3ZlS2VlcENvbW1lbnRzU2Nyb2xsZXJMb2NrJ10gIT09IGxvY2tJZCkgcmV0dXJuOwogICAgICBjb25zdCB5dGRGbGV4eUZsbSA9IGVsZW1lbnRzLmZsZXh5OwogICAgICBpZiAoeXRkRmxleHlGbG0pIHsKICAgICAgICB5dGRGbGV4eUZsbS5yZW1vdmVBdHRyaWJ1dGUwMDAoJ2tlZXAtY29tbWVudHMtc2Nyb2xsZXInKTsKICAgICAgfQogICAgfQoKICAgIGNvbnN0IHVwZGF0ZUVnbVBhbmVscyA9IGFzeW5jIChsb2NrSWQpID0+IHsKICAgICAgaWYgKGxvY2tJZCAhPT0gbG9ja0dldFsndXBkYXRlRWdtUGFuZWxzTG9jayddKSByZXR1cm47CiAgICAgIGF3YWl0IG5hdmlnYXRlRmluaXNoZWRQcm9taXNlLnRoZW4oKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICBpZiAobG9ja0lkICE9PSBsb2NrR2V0Wyd1cGRhdGVFZ21QYW5lbHNMb2NrJ10pIHJldHVybjsKICAgICAgLy8gY29uc29sZS5sb2coJ3VwZGF0ZUVnbVBhbmVsczo6Y2FsbGVkJyk7CiAgICAgIGNvbnN0IHl0ZEZsZXh5RWxtID0gZWxlbWVudHMuZmxleHk7CiAgICAgIGlmICgheXRkRmxleHlFbG0pIHJldHVybjsKICAgICAgbGV0IG5ld1Zpc2libGVQYW5lbHMgPSBbXTsKICAgICAgbGV0IG5ld0hpZGRlblBhbmVscyA9IFtdOwogICAgICBsZXQgYWxsVmlzaWJsZVBhbmVscyA9IFtdOwogICAgICBmb3IgKGNvbnN0IHBhbmVsRWxtIG9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1t0eXQtZWdtLXBhbmVsXVt0YXJnZXQtaWRdW3Zpc2liaWxpdHldJykpIHsKICAgICAgICBjb25zdCB2aXNpYmlsaXR5ID0gcGFuZWxFbG0uZ2V0QXR0cmlidXRlMDAwKCd2aXNpYmlsaXR5Jyk7CgogICAgICAgIGlmICh2aXNpYmlsaXR5ID09PSAnRU5HQUdFTUVOVF9QQU5FTF9WSVNJQklMSVRZX0hJRERFTicgfHwgcGFuZWxFbG0uY2xvc2VzdCgnW2hpZGRlbl0nKSkgewogICAgICAgICAgaWYgKHBhbmVsRWxtLmhhc0F0dHJpYnV0ZTAwMCgndHl0LXZpc2libGUtYXQnKSkgewogICAgICAgICAgICBwYW5lbEVsbS5yZW1vdmVBdHRyaWJ1dGUwMDAoJ3R5dC12aXNpYmxlLWF0Jyk7CiAgICAgICAgICAgIG5ld0hpZGRlblBhbmVscy5wdXNoKHBhbmVsRWxtKTsKICAgICAgICAgIH0KCiAgICAgICAgfSBlbHNlIGlmICh2aXNpYmlsaXR5ID09PSAnRU5HQUdFTUVOVF9QQU5FTF9WSVNJQklMSVRZX0VYUEFOREVEJyAmJiAhcGFuZWxFbG0uY2xvc2VzdCgnW2hpZGRlbl0nKSkgewogICAgICAgICAgbGV0IHZpc2libGVBdCA9IHBhbmVsRWxtLmdldEF0dHJpYnV0ZTAwMCgndHl0LXZpc2libGUtYXQnKTsKICAgICAgICAgIGlmICghdmlzaWJsZUF0KSB7CiAgICAgICAgICAgIHBhbmVsRWxtLnNldEF0dHJpYnV0ZTExMSgndHl0LXZpc2libGUtYXQnLCBEYXRlLm5vdygpKTsKICAgICAgICAgICAgbmV3VmlzaWJsZVBhbmVscy5wdXNoKHBhbmVsRWxtKTsKICAgICAgICAgIH0KICAgICAgICAgIGFsbFZpc2libGVQYW5lbHMucHVzaChwYW5lbEVsbSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChuZXdWaXNpYmxlUGFuZWxzLmxlbmd0aCA+PSAxICYmIGFsbFZpc2libGVQYW5lbHMubGVuZ3RoID49IDIpIHsKICAgICAgICBjb25zdCB0YXJnZXRWaXNpYmxlID0gbmV3VmlzaWJsZVBhbmVsc1tuZXdWaXNpYmxlUGFuZWxzLmxlbmd0aCAtIDFdOwoKICAgICAgICBjb25zdCBhY3Rpb25zID0gW107CiAgICAgICAgZm9yIChjb25zdCBwYW5lbEVsbSBvZiBhbGxWaXNpYmxlUGFuZWxzKSB7CiAgICAgICAgICBpZiAocGFuZWxFbG0gPT09IHRhcmdldFZpc2libGUpIGNvbnRpbnVlOwogICAgICAgICAgYWN0aW9ucy5wdXNoKHsKICAgICAgICAgICAgcGFuZWxJZDogcGFuZWxFbG0uZ2V0QXR0cmlidXRlMDAwKCd0YXJnZXQtaWQnKSwKICAgICAgICAgICAgdG9IaWRlOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmIChhY3Rpb25zLmxlbmd0aCA+PSAxKSB7CiAgICAgICAgICB5dEJ0bkVnbVBhbmVsQ29yZShhY3Rpb25zKTsKICAgICAgICB9CgogICAgICB9CiAgICAgIGlmIChhbGxWaXNpYmxlUGFuZWxzLmxlbmd0aCA+PSAxKSB7CiAgICAgICAgeXRkRmxleHlFbG0uc2V0QXR0cmlidXRlMTExKCd0eXQtZWdtLXBhbmVsXycsICcnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB5dGRGbGV4eUVsbS5yZW1vdmVBdHRyaWJ1dGUwMDAoJ3R5dC1lZ20tcGFuZWxfJyk7CiAgICAgIH0KICAgICAgbmV3VmlzaWJsZVBhbmVscy5sZW5ndGggPSAwOwogICAgICBuZXdWaXNpYmxlUGFuZWxzID0gbnVsbDsKICAgICAgbmV3SGlkZGVuUGFuZWxzLmxlbmd0aCA9IDA7CiAgICAgIG5ld0hpZGRlblBhbmVscyA9IG51bGw7CiAgICAgIGFsbFZpc2libGVQYW5lbHMubGVuZ3RoID0gMDsKICAgICAgYWxsVmlzaWJsZVBhbmVscyA9IG51bGw7CiAgICB9CgogICAgY29uc3QgY2hlY2tFbGVtZW50RXhpc3QgPSAoY3NzLCBleGNsdWRlKSA9PiB7CiAgICAgIGZvciAoY29uc3QgcCBvZiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNzcykpIHsKICAgICAgICBpZiAoIXAuY2xvc2VzdChleGNsdWRlKSkgcmV0dXJuIHA7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgbGV0IGZpeEluaXRpYWxUYWJTdGF0ZUsgPSAwOwoKICAgIGNvbnN0IHsgaGFuZGxlTmF2aWdhdGVGYWN0b3J5IH0gPSAoKCkgPT4gewoKCiAgICAgIGxldCBpc0xvYWRTdGFydExpc3RlbmVkID0gZmFsc2U7CgogICAgICBmdW5jdGlvbiBmaW5kTGNDb21tZW50KGxjKSB7CiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHsKCiAgICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCN0YWItY29tbWVudHMgeXRkLWNvbW1lbnRzIHl0ZC1jb21tZW50LXJlbmRlcmVyICNoZWFkZXItYXV0aG9yIGFbaHJlZio9ImxjPSR7bGN9Il1gKTsKICAgICAgICAgIGlmIChlbGVtZW50KSB7CiAgICAgICAgICAgIGxldCBjb21tZW50UmVuZGVyZXJFbG0gPSBjbG9zZXN0RnJvbUFuY2hvci5jYWxsKGVsZW1lbnQsICd5dGQtY29tbWVudC1yZW5kZXJlcicpOwogICAgICAgICAgICBpZiAoY29tbWVudFJlbmRlcmVyRWxtICYmIGxjKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGxjLAogICAgICAgICAgICAgICAgY29tbWVudFJlbmRlcmVyRWxtCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7CgogICAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjdGFiLWNvbW1lbnRzIHl0ZC1jb21tZW50cyB5dGQtY29tbWVudC1yZW5kZXJlciA+ICNsaW5rZWQtY29tbWVudC1iYWRnZSBzcGFuOm5vdCg6ZW1wdHkpYCk7CiAgICAgICAgICBpZiAoZWxlbWVudCkgewogICAgICAgICAgICBsZXQgY29tbWVudFJlbmRlcmVyRWxtID0gY2xvc2VzdEZyb21BbmNob3IuY2FsbChlbGVtZW50LCAneXRkLWNvbW1lbnQtcmVuZGVyZXInKTsKICAgICAgICAgICAgaWYgKGNvbW1lbnRSZW5kZXJlckVsbSkgewoKICAgICAgICAgICAgICBsZXQgaGVhZGVyID0gX3F1ZXJ5U2VsZWN0b3IuY2FsbChjb21tZW50UmVuZGVyZXJFbG0sICcjaGVhZGVyLWF1dGhvcicpOwogICAgICAgICAgICAgIGlmIChoZWFkZXIpIHsKCiAgICAgICAgICAgICAgICBsZXQgYW5jaG9yID0gX3F1ZXJ5U2VsZWN0b3IuY2FsbChoZWFkZXIsICdhW2hyZWYqPSJsYz0iXScpOwogICAgICAgICAgICAgICAgaWYgKGFuY2hvcikgewogICAgICAgICAgICAgICAgICBsZXQgaHJlZiA9IChhbmNob3IuZ2V0QXR0cmlidXRlKCdocmVmJykgfHwgJycpOwogICAgICAgICAgICAgICAgICBsZXQgbSA9IC9bJj9dbGM9KFtcd18uLV0rKS8uZXhlYyhocmVmKTsgLy8gZG90ID0gc3ViLWNvbW1lbnQKICAgICAgICAgICAgICAgICAgaWYgKG0pIHsKICAgICAgICAgICAgICAgICAgICBsYyA9IG1bMV07CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjb21tZW50UmVuZGVyZXJFbG0gJiYgbGMpIHsKICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgbGMsCiAgICAgICAgICAgICAgICBjb21tZW50UmVuZGVyZXJFbG0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBudWxsOwoKICAgICAgfQoKCiAgICAgIGZ1bmN0aW9uIGxjU3dhcEZ1bmNBKHRhcmdldExjSWQsIGN1cnJlbnRMY0lkKSB7CgoKICAgICAgICBsZXQgZG9uZSA9IDA7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGN1cnJlbnRMY0lkLCB0YXJnZXRMY0lkKQoKICAgICAgICAgIGxldCByMSA9IGZpbmRMY0NvbW1lbnQoY3VycmVudExjSWQpLmNvbW1lbnRSZW5kZXJlckVsbTsKICAgICAgICAgIGxldCByMiA9IGZpbmRMY0NvbW1lbnQodGFyZ2V0TGNJZCkuY29tbWVudFJlbmRlcmVyRWxtOwoKCiAgICAgICAgICBpZiAodHlwZW9mIGluc3AocjEpLmRhdGEubGlua2VkQ29tbWVudEJhZGdlID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgaW5zcChyMikuZGF0YS5saW5rZWRDb21tZW50QmFkZ2UgPT09ICd1bmRlZmluZWQnKSB7CgogICAgICAgICAgICBsZXQgcCA9IE9iamVjdC5hc3NpZ24oe30sIGluc3AocjEpLmRhdGEubGlua2VkQ29tbWVudEJhZGdlKQoKICAgICAgICAgICAgaWYgKCgocCB8fCAwKS5tZXRhZGF0YUJhZGdlUmVuZGVyZXIgfHwgMCkudHJhY2tpbmdQYXJhbXMpIHsKICAgICAgICAgICAgICBkZWxldGUgcC5tZXRhZGF0YUJhZGdlUmVuZGVyZXIudHJhY2tpbmdQYXJhbXM7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnN0IHYxID0gZmluZENvbnRlbnRzUmVuZGVyZXIocjEpCiAgICAgICAgICAgIGNvbnN0IHYyID0gZmluZENvbnRlbnRzUmVuZGVyZXIocjIpCgoKICAgICAgICAgICAgaWYgKHYxLnBhcmVudCA9PT0gdjIucGFyZW50ICYmICh2Mi5wYXJlbnQubm9kZU5hbWUgPT09ICdZVEQtQ09NTUVOVFMnIHx8IHYyLnBhcmVudC5ub2RlTmFtZSA9PT0gJ1lURC1JVEVNLVNFQ1RJT04tUkVOREVSRVInKSkgewoKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZAogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKCgogICAgICAgICAgICBpZiAodjIuaW5kZXggPj0gMCkgewogICAgICAgICAgICAgIGlmICh2Mi5wYXJlbnQubm9kZU5hbWUgPT09ICdZVEQtQ09NTUVOVC1SRVBMSUVTLVJFTkRFUkVSJykgewoKCiAgICAgICAgICAgICAgICBpZiAobGNTd2FwRnVuY0IodGFyZ2V0TGNJZCwgY3VycmVudExjSWQsIHApKSB7CiAgICAgICAgICAgICAgICAgIGRvbmUgPSAxOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRvbmUgPSAxOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb25zdCB2MnBDbnQgPSBpbnNwKHYyLnBhcmVudCk7CiAgICAgICAgICAgICAgICBjb25zdCB2MkNvbmVudHMgPSAodjJwQ250LmRhdGEgfHwgMCkuY29udGVudHMgfHwgMDsKICAgICAgICAgICAgICAgIGlmICghdjJDb25lbnRzKSBjb25zb2xlLndhcm4oJ3YyQ29uZW50cyBpcyBub3QgZm91bmQnKTsKCiAgICAgICAgICAgICAgICB2MnBDbnQuZGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIHYycENudC5kYXRhLCB7IGNvbnRlbnRzOiBbXS5jb25jYXQoW3YyQ29uZW50c1t2Mi5pbmRleF1dLCB2MkNvbmVudHMuc2xpY2UoMCwgdjIuaW5kZXgpLCB2MkNvbmVudHMuc2xpY2UodjIuaW5kZXggKyAxKSkgfSk7CgogICAgICAgICAgICAgICAgaWYgKGxjU3dhcEZ1bmNCKHRhcmdldExjSWQsIGN1cnJlbnRMY0lkLCBwKSkgewogICAgICAgICAgICAgICAgICBkb25lID0gMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgfQoKCgogICAgICAgICAgfQoKCgogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGNvbnNvbGUud2FybihlKQogICAgICAgIH0KICAgICAgICByZXR1cm4gZG9uZSA9PT0gMTsKICAgICAgfQoKCiAgICAgIGZ1bmN0aW9uIGxjU3dhcEZ1bmNCKHRhcmdldExjSWQsIGN1cnJlbnRMY0lkLCBfcCkgewoKICAgICAgICBsZXQgZG9uZSA9IDA7CiAgICAgICAgdHJ5IHsKCiAgICAgICAgICBsZXQgcjEgPSBmaW5kTGNDb21tZW50KGN1cnJlbnRMY0lkKS5jb21tZW50UmVuZGVyZXJFbG07CiAgICAgICAgICBsZXQgcjFjbnQgPSBpbnNwKHIxKTsKICAgICAgICAgIGxldCByMiA9IGZpbmRMY0NvbW1lbnQodGFyZ2V0TGNJZCkuY29tbWVudFJlbmRlcmVyRWxtOwogICAgICAgICAgbGV0IHIyY250ID0gaW5zcChyMik7CgogICAgICAgICAgY29uc3QgcjFkID0gcjFjbnQuZGF0YTsKICAgICAgICAgIGxldCBwID0gT2JqZWN0LmFzc2lnbih7fSwgX3ApCiAgICAgICAgICByMWQubGlua2VkQ29tbWVudEJhZGdlID0gbnVsbDsKICAgICAgICAgIGRlbGV0ZSByMWQubGlua2VkQ29tbWVudEJhZGdlOwoKICAgICAgICAgIGxldCBxID0gT2JqZWN0LmFzc2lnbih7fSwgcjFkKTsKICAgICAgICAgIHEubGlua2VkQ29tbWVudEJhZGdlID0gbnVsbDsKICAgICAgICAgIGRlbGV0ZSBxLmxpbmtlZENvbW1lbnRCYWRnZTsKCiAgICAgICAgICByMWNudC5kYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgcSk7CiAgICAgICAgICByMmNudC5kYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgcjJjbnQuZGF0YSwgeyBsaW5rZWRDb21tZW50QmFkZ2U6IHAgfSk7CgogICAgICAgICAgZG9uZSA9IDE7CgogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGNvbnNvbGUud2FybihlKQogICAgICAgIH0KICAgICAgICByZXR1cm4gZG9uZSA9PT0gMTsKICAgICAgfQoKICAgICAgY29uc3QgbG9hZFN0YXJ0RnggPSBhc3luYyAoZXZ0KSA9PiB7CgogICAgICAgIGxldCBtZWRpYSA9IChldnQgfHwgMCkudGFyZ2V0IHx8IDA7CiAgICAgICAgaWYgKG1lZGlhLm5vZGVOYW1lID09PSAnVklERU8nIHx8IG1lZGlhLm5vZGVOYW1lID09PSAnQVVESU8nKSB7IH0KICAgICAgICBlbHNlIHJldHVybjsKCiAgICAgICAgY29uc3QgbmV3TWVkaWEgPSBtZWRpYTsKCiAgICAgICAgY29uc3QgbWVkaWExID0gY29tbW9uLmdldE1lZGlhRWxlbWVudCgwKTsgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vdmllX3BsYXllciB2aWRlb1tzcmNdJyk7CiAgICAgICAgY29uc3QgbWVkaWEyID0gY29tbW9uLmdldE1lZGlhRWxlbWVudHMoMik7IC8vIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3l0ZC1icm93c2Vbcm9sZT0ibWFpbiJdIHZpZGVvW3NyY10nKTsKCiAgICAgICAgaWYgKG1lZGlhMSAhPT0gbnVsbCAmJiBtZWRpYTIubGVuZ3RoID4gMCkgewogICAgICAgICAgaWYgKG5ld01lZGlhICE9PSBtZWRpYTEgJiYgbWVkaWExLnBhdXNlZCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgaWYgKGlzVmlkZW9QbGF5aW5nKG1lZGlhMSkpIHsKICAgICAgICAgICAgICBQcm9taXNlLnJlc29sdmUobmV3TWVkaWEpLnRoZW4odmlkZW8gPT4gdmlkZW8ucGF1c2VkID09PSBmYWxzZSAmJiB2aWRlby5wYXVzZSgpKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKG5ld01lZGlhID09PSBtZWRpYTEpIHsKICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIG1lZGlhMikgewogICAgICAgICAgICAgIGlmIChzLnBhdXNlZCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZShzKS50aGVuKHMgPT4gcy5wYXVzZWQgPT09IGZhbHNlICYmIHMucGF1c2UoKSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKG1lZGlhMSkudGhlbih2aWRlbzEgPT4gdmlkZW8xLnBhdXNlZCA9PT0gZmFsc2UgJiYgdmlkZW8xLnBhdXNlKCkpLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgfQoKICAgICAgY29uc3QgZ2V0QnJvd3NhYmxlRW5kUG9pbnQgPSAocmVxKSA9PiB7CgogICAgICAgIGxldCB2YWxpZCA9IGZhbHNlOwogICAgICAgIGxldCBlbmRwb2ludCA9IHJlcSA/IHJlcS5jb21tYW5kIDogbnVsbDsKICAgICAgICBpZiAoZW5kcG9pbnQgJiYgKGVuZHBvaW50LmNvbW1hbmRNZXRhZGF0YSB8fCAwKS53ZWJDb21tYW5kTWV0YWRhdGEgJiYgZW5kcG9pbnQud2F0Y2hFbmRwb2ludCkgewogICAgICAgICAgbGV0IHZpZGVvSWQgPSBlbmRwb2ludC53YXRjaEVuZHBvaW50LnZpZGVvSWQ7CiAgICAgICAgICBsZXQgdXJsID0gZW5kcG9pbnQuY29tbWFuZE1ldGFkYXRhLndlYkNvbW1hbmRNZXRhZGF0YS51cmw7CgogICAgICAgICAgaWYgKHR5cGVvZiB2aWRlb0lkID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgdXJsID09PSAnc3RyaW5nJyAmJiB1cmwuaW5kZXhPZignbGM9JykgPiAwKSB7CgogICAgICAgICAgICBsZXQgbSA9IC9eXC93YXRjaFw/dj0oW1x3Xy1dKykmbGM9KFtcd18uLV0rKSQvLmV4ZWModXJsKTsgLy8gZG90ID0gc3ViLWNvbW1lbnQKICAgICAgICAgICAgaWYgKG0gJiYgbVsxXSA9PT0gdmlkZW9JZCkgewoKCiAgICAgICAgICAgICAgLyoKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAic3R5bGUiOiAiQkFER0VfU1RZTEVfVFlQRV9TSU1QTEUiLAogICAgICAgICAgICAgICAgImxhYmVsIjogIuazqOebruOBruOCs+ODoeODs+ODiCIsCiAgICAgICAgICAgICAgICAidHJhY2tpbmdQYXJhbXMiOiAiWFhYWFhYIgogICAgICAgICAgICB9CiAgICAgICAgICAgICAgKi8KCiAgICAgICAgICAgICAgbGV0IHRhcmdldExjID0gZmluZExjQ29tbWVudChtWzJdKQogICAgICAgICAgICAgIGxldCBjdXJyZW50TGMgPSB0YXJnZXRMYyA/IGZpbmRMY0NvbW1lbnQoKSA6IG51bGw7CgogICAgICAgICAgICAgIGlmICh0YXJnZXRMYyAmJiBjdXJyZW50TGMpIHsKCgogICAgICAgICAgICAgICAgbGV0IGRvbmUgPSB0YXJnZXRMYy5sYyA9PT0gY3VycmVudExjLmxjID8gMSA6IGxjU3dhcEZ1bmNBKHRhcmdldExjLmxjLCBjdXJyZW50TGMubGMpID8gMSA6IDAKCiAgICAgICAgICAgICAgICBpZiAoZG9uZSA9PT0gMSkgewoKICAgICAgICAgICAgICAgICAgY29tbW9uLnhSZXBsYWNlU3RhdGUoaGlzdG9yeS5zdGF0ZSwgdXJsKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgIH0KCiAgICAgICAgfQoKCgogICAgICAgIC8qCiAgICAgICAgICAgIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgInR5cGUiOiAwLAogICAgICAgICAgICAgICJjb21tYW5kIjogZW5kcG9pbnQsCiAgICAgICAgICAgICAgImZvcm0iOiB7CiAgICAgICAgICAgICAgICAidGVtcERhdGEiOiB7fSwKICAgICAgICAgICAgICAgICJyZWxvYWQiOiBmYWxzZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogIAogICAgICAgICovCgogICAgICAgIGlmIChlbmRwb2ludCAmJiAoZW5kcG9pbnQuY29tbWFuZE1ldGFkYXRhIHx8IDApLndlYkNvbW1hbmRNZXRhZGF0YSAmJiBlbmRwb2ludC5icm93c2VFbmRwb2ludCAmJiBpc0NoYW5uZWxJZChlbmRwb2ludC5icm93c2VFbmRwb2ludC5icm93c2VJZCkpIHsKICAgICAgICAgIHZhbGlkID0gdHJ1ZTsKCiAgICAgICAgfSBlbHNlIGlmIChlbmRwb2ludCAmJiAoZW5kcG9pbnQuYnJvd3NlRW5kcG9pbnQgfHwgZW5kcG9pbnQuc2VhcmNoRW5kcG9pbnQpICYmICFlbmRwb2ludC51cmxFbmRwb2ludCAmJiAhZW5kcG9pbnQud2F0Y2hFbmRwb2ludCkgewoKICAgICAgICAgIGlmIChlbmRwb2ludC5icm93c2VFbmRwb2ludCAmJiBlbmRwb2ludC5icm93c2VFbmRwb2ludC5icm93c2VJZCA9PT0gIkZFd2hhdF90b193YXRjaCIpIHsKICAgICAgICAgICAgLy8gdmFsaWQgPSBmYWxzZTsKICAgICAgICAgICAgY29uc3QgcGxheWVyTWVkaWEgPSBjb21tb24uZ2V0TWVkaWFFbGVtZW50KDEpOwogICAgICAgICAgICBpZiAocGxheWVyTWVkaWEgJiYgcGxheWVyTWVkaWEucGF1c2VkID09PSBmYWxzZSkgdmFsaWQgPSB0cnVlOyAvLyBob21lIHBhZ2UKICAgICAgICAgIH0gZWxzZSBpZiAoZW5kcG9pbnQuY29tbWFuZE1ldGFkYXRhICYmIGVuZHBvaW50LmNvbW1hbmRNZXRhZGF0YS53ZWJDb21tYW5kTWV0YWRhdGEpIHsKCiAgICAgICAgICAgIGxldCBtZXRhID0gZW5kcG9pbnQuY29tbWFuZE1ldGFkYXRhLndlYkNvbW1hbmRNZXRhZGF0YQogICAgICAgICAgICBpZiAobWV0YSAmJiAvKm1ldGEuYXBpVXJsICYmKi8gbWV0YS51cmwgJiYgbWV0YS53ZWJQYWdlVHlwZSkgewogICAgICAgICAgICAgIHZhbGlkID0gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICghdmFsaWQpIGVuZHBvaW50ID0gbnVsbDsKCiAgICAgICAgcmV0dXJuIGVuZHBvaW50OwogICAgICB9CgogICAgICBjb25zdCBzaG91bGRVc2VNaW5pUGxheWVyID0gKCk9PnsKCiAgICAgICAgY29uc3QgaXNTdWJUeXBlRXhpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd5dGQtcGFnZS1tYW5hZ2VyI3BhZ2UtbWFuYWdlciA+IHl0ZC1icm93c2VbcGFnZS1zdWJ0eXBlXScpOwoKICAgICAgICBpZihpc1N1YlR5cGVFeGlzdCkgcmV0dXJuIHRydWU7CgogICAgICAgIGNvbnN0IG1vdmllX3BsYXllciA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjbW92aWVfcGxheWVyJyldLmZpbHRlcihlID0+ICFlLmNsb3Nlc3QoJ1toaWRkZW5dJykpWzBdOwogICAgICAgIGlmIChtb3ZpZV9wbGF5ZXIpIHsKICAgICAgICAgIGNvbnN0IG1lZGlhID0gcXNPbmUobW92aWVfcGxheWVyLCAndmlkZW9bY2xhc3NdLCBhdWRpb1tjbGFzc10nKTsKICAgICAgICAgIGlmIChtZWRpYSAmJiBtZWRpYS5jdXJyZW50VGltZSA+IDMgJiYgbWVkaWEuZHVyYXRpb24gLSBtZWRpYS5jdXJyZW50VGltZSA+IDMgJiYgbWVkaWEucGF1c2VkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIC8vIHJldHVybiB0cnVlOwogICAgICAgIC8vIHJldHVybiAhIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3l0ZC1wYWdlLW1hbmFnZXIjcGFnZS1tYW5hZ2VyID4geXRkLWJyb3dzZVtwYWdlLXN1YnR5cGVdJyk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGNvbmRpdGlvbkZ1bGZpbGxtZW50ID0gKHJlcSkgPT4gewogICAgICAgIGNvbnN0IGVuZHBvaW50ID0gcmVxID8gcmVxLmNvbW1hbmQgOiBudWxsOwogICAgICAgIGlmICghZW5kcG9pbnQpIHJldHVybjsKCiAgICAgICAgaWYgKGVuZHBvaW50ICYmIChlbmRwb2ludC5jb21tYW5kTWV0YWRhdGEgfHwgMCkud2ViQ29tbWFuZE1ldGFkYXRhICYmIGVuZHBvaW50LndhdGNoRW5kcG9pbnQpIHsKICAgICAgICB9IGVsc2UgaWYgKGVuZHBvaW50ICYmIChlbmRwb2ludC5jb21tYW5kTWV0YWRhdGEgfHwgMCkud2ViQ29tbWFuZE1ldGFkYXRhICYmIGVuZHBvaW50LmJyb3dzZUVuZHBvaW50ICYmIGlzQ2hhbm5lbElkKGVuZHBvaW50LmJyb3dzZUVuZHBvaW50LmJyb3dzZUlkKSkgewogICAgICAgIH0gZWxzZSBpZiAoZW5kcG9pbnQgJiYgKGVuZHBvaW50LmJyb3dzZUVuZHBvaW50IHx8IGVuZHBvaW50LnNlYXJjaEVuZHBvaW50KSAmJiAhZW5kcG9pbnQudXJsRW5kcG9pbnQgJiYgIWVuZHBvaW50LndhdGNoRW5kcG9pbnQpIHsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCgogICAgICAgIGlmICghc2hvdWxkVXNlTWluaVBsYXllcigpKSByZXR1cm4gZmFsc2U7CgogICAgICAgIC8qCiAgICAgICAgICAvLyB1c2VyIHdvdWxkIGxpa2UgdG8gc3dpdGNoIHBhZ2UgaW1tZWRpYXRlbHkgd2l0aG91dCBwbGF5aW5nIHRoZSB2aWRlbzsKICAgICAgICAgIC8vIGF0dHJpYnV0ZSBhcHBlYXIgYWZ0ZXIgcGxheWluZyB2aWRlbyBmb3IgbW9yZSB0aGFuIDJzCiAgICAgICAgICBpZiAoIWRvY3VtZW50LmhlYWQuZGF0YXNldC52aVRpbWUpIHJldHVybiBmYWxzZTsKICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBsZXQgY3VycmVudFZpZGVvID0gY29tbW9uLmdldE1lZGlhRWxlbWVudCgwKTsKICAgICAgICAgICAgaWYgKGN1cnJlbnRWaWRlbyAmJiBjdXJyZW50VmlkZW8ucmVhZHlTdGF0ZSA+IGN1cnJlbnRWaWRlby5IQVZFX0NVUlJFTlRfREFUQSAmJiBjdXJyZW50VmlkZW8uY3VycmVudFRpbWUgPiAyLjIgJiYgY3VycmVudFZpZGVvLmR1cmF0aW9uIC0gMi4yIDwgY3VycmVudFZpZGVvLmN1cnJlbnRUaW1lKSB7CiAgICAgICAgICAgICAgLy8gZGlzYWJsZSBtaW5pdmlldyBicm93c2luZyBpZiB0aGUgbWVkaWEgaXMgbmVhciB0byB0aGUgZW5kCiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgKi8KCgogICAgICAgIGlmIChwYWdlVHlwZSAhPT0gIndhdGNoIikgcmV0dXJuIGZhbHNlOwoKCiAgICAgICAgaWYgKCFjaGVja0VsZW1lbnRFeGlzdCgneXRkLXdhdGNoLWZsZXh5ICNwbGF5ZXIgYnV0dG9uLnl0cC1taW5pcGxheWVyLWJ1dHRvbi55dHAtYnV0dG9uJywgJ1toaWRkZW5dJykpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICBsZXQgdTM4ID0gMDsKICAgICAgY29uc3QgZml4Q2hhbm5lbEFib3V0UG9wdXAgPSBhc3luYyAodDM4KT0+ewoKICAgICAgICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlRXh0ZXJuYWwoKTsKICAgICAgICBjb25zdCBmID0gKCkgPT4gewogICAgICAgICAgcHJvbWlzZSAmJiBwcm9taXNlLnJlc29sdmUoKTsKICAgICAgICAgIHByb21pc2UgPSBudWxsOwogICAgICAgIH0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd5dC1uYXZpZ2F0ZS1maW5pc2gnLCBmLCBmYWxzZSk7CiAgICAgICAgYXdhaXQgcHJvbWlzZS50aGVuKCk7CiAgICAgICAgcHJvbWlzZSA9IG51bGw7CiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigneXQtbmF2aWdhdGUtZmluaXNoJywgZiwgZmFsc2UpOwogICAgICAgIGlmICh0MzggIT09IHUzOCkgcmV0dXJuOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgY29uc3QgY3VycmVudEFib3V0ID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3l0ZC1hYm91dC1jaGFubmVsLXJlbmRlcmVyJyldLmZpbHRlcihlID0+ICFlLmNsb3Nlc3QoJ1toaWRkZW5dJykpWzBdOwogICAgICAgICAgbGV0IG9rYXkgPSBmYWxzZTsKICAgICAgICAgIGlmICghY3VycmVudEFib3V0KSBva2F5ID0gdHJ1ZTsKICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBjb25zdCBwb3B1cENvbnRhaW5lciA9IGN1cnJlbnRBYm91dC5jbG9zZXN0KCd5dGQtcG9wdXAtY29udGFpbmVyJyk7CiAgICAgICAgICAgIGlmIChwb3B1cENvbnRhaW5lcikgewogICAgICAgICAgICAgIGNvbnN0IGNudCA9IGluc3AocG9wdXBDb250YWluZXIpOwogICAgICAgICAgICAgIGxldCBhcnIgPSBudWxsOwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBhcnIgPSBjbnQuaGFuZGxlR2V0T3BlbmVkUG9wdXBzQWN0aW9uXygpCiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewoKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGFyciAmJiBhcnIubGVuZ3RoID09PSAwKSBva2F5ID0gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBva2F5ID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChva2F5KSB7CiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uTW9kZWwgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgneXQtZGVzY3JpcHRpb24tcHJldmlldy12aWV3LW1vZGVsJyldLmZpbHRlcihlID0+ICFlLmNsb3Nlc3QoJ1toaWRkZW5dJykpWzBdOwogICAgICAgICAgICBpZiAoZGVzY3JpcHRpb25Nb2RlbCkgewogICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IFsuLi5kZXNjcmlwdGlvbk1vZGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpXS5maWx0ZXIoZSA9PiAhZS5jbG9zZXN0KCdbaGlkZGVuXScpICYmIGAke2UudGV4dENvbnRlbnR9YC50cmltKCkubGVuZ3RoID4gMClbMF07CiAgICAgICAgICAgICAgaWYgKGJ1dHRvbikgewogICAgICAgICAgICAgICAgYnV0dG9uLmNsaWNrKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgODApOyAKCiAgICAgIH0KICAgICAgY29uc3QgaGFuZGxlTmF2aWdhdGVGYWN0b3J5ID0gKGhhbmRsZU5hdmlnYXRlKSA9PiB7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAocmVxKSB7CgogICAgICAgICAgaWYgKHUzOCA+IDFlOSkgdTM4ID0gOTsKICAgICAgICAgIGNvbnN0IHQzOCA9ICsrdTM4OwoKICAgICAgICAgIGNvbnN0ICR0aGlzID0gdGhpczsKICAgICAgICAgIGNvbnN0ICRhcmd1bWVudHMgPSBhcmd1bWVudHM7CgogICAgICAgICAgbGV0IGVuZHBvaW50ID0gbnVsbDsKCgogICAgICAgICAgaWYgKGNvbmRpdGlvbkZ1bGZpbGxtZW50KHJlcSkpIHsKCgogICAgICAgICAgICBlbmRwb2ludCA9IGdldEJyb3dzYWJsZUVuZFBvaW50KHJlcSk7CgogICAgICAgICAgfQoKCiAgICAgICAgICBpZiAoIWVuZHBvaW50IHx8ICFzaG91bGRVc2VNaW5pUGxheWVyKCkpIHJldHVybiBoYW5kbGVOYXZpZ2F0ZS5hcHBseSgkdGhpcywgJGFyZ3VtZW50cyk7CgogICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RhYnZpZXctc2NyaXB0LWhhbmRsZU5hdmlnYXRlJykKCiAgICAgICAgICBjb25zdCB5dGRBcHBFbG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd5dGQtYXBwJyk7CiAgICAgICAgICBjb25zdCB5dGRBcHBDbnQgPSBpbnNwKHl0ZEFwcEVsbSk7CgogICAgICAgICAgbGV0IG9iamVjdCA9IG51bGw7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBvYmplY3QgPSB5dGRBcHBDbnQuZGF0YS5yZXNwb25zZS5jdXJyZW50VmlkZW9FbmRwb2ludC53YXRjaEVuZHBvaW50IHx8IG51bGw7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIG9iamVjdCA9IG51bGw7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QgIT09ICdvYmplY3QnKSBvYmplY3QgPSBudWxsOwoKICAgICAgICAgIGNvbnN0IG9uY2UgPSB7IG9uY2U6IHRydWUgfTsgLy8gYnJvd3NlcnMgc3VwcG9ydGluZyBhc3luYyBmdW5jdGlvbiBjYW4gYWxzbyB1c2Ugb25jZSBvcHRpb24uCgogICAgICAgICAgaWYgKG9iamVjdCAhPT0gbnVsbCAmJiAhKCdwbGF5bGlzdElkJyBpbiBvYmplY3QpKSB7CgogICAgICAgICAgICBsZXQgd09iamVjdCA9IG1XZWFrUmVmKG9iamVjdCkKCiAgICAgICAgICAgIGNvbnN0IE4gPSAzOwoKICAgICAgICAgICAgbGV0IGNvdW50ID0gMDsKCiAgICAgICAgICAgIC8qCiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgcmNiKGIpID0+IGEgPSBwbGF5bGlzdElkID0gdW5kZWZpbmRlZAogICAgICAgICAgICAgIAogICAgICAgICAgICAgIHZhciBzY2IgPSBmdW5jdGlvbihhLCBiLCBjLCBkKSB7CiAgICAgICAgICAgICAgICAgICAgICBhLmlzSW5pdGlhbGl6ZWQoKSAmJiAoQigia2V2bGFyX21pbmlwbGF5ZXJfbmF2aWdhdGVfdG9fc2hvcnRzX2tpbGxzd2l0Y2giKSA/IGMgfHwgZCA/ICgid2F0Y2giICE9PSBYdShiKSAmJiAic2hvcnRzIiAhPT0gWHUoYikgJiYgb3MoYS5taW5pcGxheWVyRWwsICJ5dC1jYWNoZS1taW5pcGxheWVyLXBhZ2UtYWN0aW9uIiwgW2JdKSwKICAgICAgICAgICAgICAgICAgICAgIHFzKGEubWluaXBsYXllckVsLCAieXQtZGVhY3RpdmF0ZS1taW5pcGxheWVyLWFjdGlvbiIpKSA6ICJ3YXRjaCIgPT09IFh1KGIpICYmIHJjYihiKSAmJiAocXQuZ2V0SW5zdGFuY2UoKS5wbGF5bGlzdFdhdGNoUGFnZUFjdGl2YXRpb24gPSAhMCwKICAgICAgICAgICAgICAgICAgICAgIGEuYWN0aXZhdGVNaW5pcGxheWVyKGIpKSA6IGMgPyAoIndhdGNoIiAhPT0gWHUoYikgJiYgb3MoYS5taW5pcGxheWVyRWwsICJ5dC1jYWNoZS1taW5pcGxheWVyLXBhZ2UtYWN0aW9uIiwgW2JdKSwKICAgICAgICAgICAgICAgICAgICAgIHFzKGEubWluaXBsYXllckVsLCAieXQtZGVhY3RpdmF0ZS1taW5pcGxheWVyLWFjdGlvbiIpKSA6IGQgPyBxcyhhLm1pbmlwbGF5ZXJFbCwgInl0LXBhdXNlLW1pbmlwbGF5ZXItYWN0aW9uIikgOiAid2F0Y2giID09PSBYdShiKSAmJiByY2IoYikgJiYgKHF0LmdldEluc3RhbmNlKCkucGxheWxpc3RXYXRjaFBhZ2VBY3RpdmF0aW9uID0gITAsCiAgICAgICAgICAgICAgICAgICAgICBhLmFjdGl2YXRlTWluaXBsYXllcihiKSkpCiAgICAgICAgICAgICAgICAgIH07CiAgICAKICAgICAgICAgICAgKi8KCiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSgoa1JlZih3T2JqZWN0KSB8fCB7fSksICdwbGF5bGlzdElkJywgewogICAgICAgICAgICAgIGdldCgpIHsKICAgICAgICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgICAgICAgICBpZiAoY291bnQgPT09IE4pIHsKICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucGxheWxpc3RJZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiAnKic7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzZXQodmFsdWUpIHsKICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnBsYXlsaXN0SWQ7IC8vIHJlbW92ZSBwcm9wZXJ0eSBkZWZpbml0aW9uCiAgICAgICAgICAgICAgICB0aGlzLnBsYXlsaXN0SWQgPSB2YWx1ZTsgLy8gYXNzaWduIGFzIG5vcm1hbCBwcm9wZXJ0eQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgbGV0IHBsYXlsaXN0Q2xlYXJvdXQgPSBudWxsOwoKICAgICAgICAgICAgbGV0IHRpbWVvdXRpZCA9IDA7CiAgICAgICAgICAgIFByb21pc2UucmFjZShbCiAgICAgICAgICAgICAgbmV3IFByb21pc2UociA9PiB7CiAgICAgICAgICAgICAgICB0aW1lb3V0aWQgPSBzZXRUaW1lb3V0KHIsIDQwMDApCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgbmV3IFByb21pc2UociA9PiB7CiAgICAgICAgICAgICAgICBwbGF5bGlzdENsZWFyb3V0ID0gKCkgPT4gewogICAgICAgICAgICAgICAgICBpZiAodGltZW91dGlkID4gMCkgewogICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0aWQpOwogICAgICAgICAgICAgICAgICAgIHRpbWVvdXRpZCA9IDA7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigneXQtcGFnZS10eXBlLWNoYW5nZWQnLCBwbGF5bGlzdENsZWFyb3V0LCBvbmNlKTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICBdKS50aGVuKCgpID0+IHsKCiAgICAgICAgICAgICAgaWYgKHRpbWVvdXRpZCAhPT0gMCkgewogICAgICAgICAgICAgICAgcGxheWxpc3RDbGVhcm91dCAmJiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd5dC1wYWdlLXR5cGUtY2hhbmdlZCcsIHBsYXlsaXN0Q2xlYXJvdXQsIG9uY2UpOwogICAgICAgICAgICAgICAgdGltZW91dGlkID0gMDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcGxheWxpc3RDbGVhcm91dCA9IG51bGw7CiAgICAgICAgICAgICAgY291bnQgPSBOIC0gMTsKICAgICAgICAgICAgICBsZXQgb2JqZWN0ID0ga1JlZih3T2JqZWN0KQogICAgICAgICAgICAgIHdPYmplY3QgPSBudWxsOwogICAgICAgICAgICAgIHJldHVybiBvYmplY3QgPyBvYmplY3QucGxheWxpc3RJZCA6IG51bGw7CiAgICAgICAgICAgIH0pLmNhdGNoKGNvbnNvbGUud2Fybik7CgogICAgICAgICAgfQoKICAgICAgICAgIGlmICghaXNMb2FkU3RhcnRMaXN0ZW5lZCkgewogICAgICAgICAgICBpc0xvYWRTdGFydExpc3RlbmVkID0gdHJ1ZTsKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZHN0YXJ0JywgbG9hZFN0YXJ0RngsIHRydWUpCiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgZW5kcG9pbnRVUkwgPSBgJHsoZW5kcG9pbnQ/LmNvbW1hbmRNZXRhZGF0YT8ud2ViQ29tbWFuZE1ldGFkYXRhPy51cmwgfHwgJycgKX1gOwoKICAgICAgICAgIGlmIChlbmRwb2ludFVSTCAmJiBlbmRwb2ludFVSTC5lbmRzV2l0aCgnL2Fib3V0JykgJiYgL1wvY2hhbm5lbFwvVUNbLV9hLXpBLVowLTkrPS5dezIyfVwvYWJvdXQvLnRlc3QoZW5kcG9pbnRVUkwpKSB7CiAgICAgICAgICAgIGZpeENoYW5uZWxBYm91dFBvcHVwKHQzOCk7CiAgICAgICAgICB9CgogICAgICAgICAgaGFuZGxlTmF2aWdhdGUuYXBwbHkoJHRoaXMsICRhcmd1bWVudHMpOwoKCiAgICAgICAgfQoKICAgICAgfTsKCiAgICAgIHJldHVybiB7IGhhbmRsZU5hdmlnYXRlRmFjdG9yeSB9OwoKCiAgICB9KSgpOwoKICAgIGNvbnN0IGNvbW1vbiA9ICgoKSA9PiB7CgoKICAgICAgbGV0IG1lZGlhTW9kZUxvY2sgPSAwOwogICAgICBjb25zdCBfZ2V0TWVkaWFFbGVtZW50ID0gKGkpID0+IHsKICAgICAgICBpZiAobWVkaWFNb2RlTG9jayA9PT0gMCkgewogICAgICAgICAgbGV0IGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW8tc3RyZWFtLmh0bWw1LW1haW4tdmlkZW8nKSB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW92aWVfcGxheWVyIHZpZGVvLCAjbW92aWVfcGxheWVyIGF1ZGlvJykgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keSB2aWRlb1tzcmNdLCBib2R5IGF1ZGlvW3NyY10nKTsKICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgIGlmIChlLm5vZGVOYW1lID09PSAnVklERU8nKSBtZWRpYU1vZGVMb2NrID0gMTsKICAgICAgICAgICAgZWxzZSBpZiAoZS5ub2RlTmFtZSA9PT0gJ0FVRElPJykgbWVkaWFNb2RlTG9jayA9IDI7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghbWVkaWFNb2RlTG9jaykgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKG1lZGlhTW9kZUxvY2sgPT09IDEpIHsKICAgICAgICAgIHN3aXRjaCAoaSkgewogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgcmV0dXJuICgneXRkLXBsYXllciN5dGQtcGxheWVyIHZpZGVvW3NyY10nKTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJldHVybiAoJ3l0ZC1icm93c2Vbcm9sZT0ibWFpbiJdIHZpZGVvW3NyY10nKTsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHJldHVybiAoJyNtb3ZpZV9wbGF5ZXIgdmlkZW9bc3JjXScpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAobWVkaWFNb2RlTG9jayA9PT0gMikgewogICAgICAgICAgc3dpdGNoIChpKSB7CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICByZXR1cm4gKCd5dGQtcGxheWVyI3l0ZC1wbGF5ZXIgYXVkaW8udmlkZW8tc3RyZWFtLmh0bWw1LW1haW4tdmlkZW9bc3JjXScpOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmV0dXJuICgneXRkLWJyb3dzZVtyb2xlPSJtYWluIl0gYXVkaW8udmlkZW8tc3RyZWFtLmh0bWw1LW1haW4tdmlkZW9bc3JjXScpOwogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgcmV0dXJuICgnI21vdmllX3BsYXllciBhdWRpby52aWRlby1zdHJlYW0uaHRtbDUtbWFpbi12aWRlb1tzcmNdJyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICByZXR1cm4gewoKCiAgICAgICAgeFJlcGxhY2VTdGF0ZShzLCB1KSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShzLCAnJywgdSk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIC8vIGluIGNhc2UgZXJyb3Igb2NjdXJzIGlmIHJlcGxhY2VTdGF0ZSBpcyByZXBsYWNlZCBieSBhbnkgZXh0ZXJuYWwgc2NyaXB0IC8gZXh0ZW5zaW9uCiAgICAgICAgICB9CiAgICAgICAgICBpZiAocy5lbmRwb2ludCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGNvbnN0IHl0ZEFwcEVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3l0ZC1hcHAnKTsKICAgICAgICAgICAgICBjb25zdCB5dGRBcHBDbnQgPSBpbnNwKHl0ZEFwcEVsbSk7CiAgICAgICAgICAgICAgeXRkQXBwQ250LnJlcGxhY2VTdGF0ZShzLmVuZHBvaW50LCAnJywgdSkKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBnZXRNZWRpYUVsZW1lbnQoaSkgewogICAgICAgICAgbGV0IHMgPSBfZ2V0TWVkaWFFbGVtZW50KGkpIHx8ICcnOwogICAgICAgICAgaWYgKHMpIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHMpOwogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfSwKICAgICAgICBnZXRNZWRpYUVsZW1lbnRzKGkpIHsKICAgICAgICAgIGxldCBzID0gX2dldE1lZGlhRWxlbWVudChpKSB8fCAnJzsKICAgICAgICAgIGlmIChzKSByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzKTsKICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICB9CiAgICAgIH07CiAgICB9KSgpOwoKICAgIGxldCBpblBhZ2VSZWFycmFuZ2UgPSBmYWxzZTsKICAgIGxldCB0bXBMYXN0VmlkZW9JZCA9ICcnOwogICAgLy8gY29uc3QgbnNNYXAgPSBuZXcgTWFwKCk7CgogICAgY29uc3QgZ2V0Q3VycmVudFZpZGVvSWQgPSAoKT0+ewogICAgICBjb25zdCB5dGRGbGV4eUVsbSA9IGVsZW1lbnRzLmZsZXh5OwogICAgICBjb25zdCB5dGRGbGV4eUNudCA9IGluc3AoeXRkRmxleHlFbG0pOwogICAgICBpZih5dGRGbGV4eUNudCAmJiB0eXBlb2YgeXRkRmxleHlDbnQudmlkZW9JZCA9PT0gJ3N0cmluZycpIHJldHVybiB5dGRGbGV4eUNudC52aWRlb0lkOwogICAgICBpZih5dGRGbGV4eUVsbSAmJiB0eXBlb2YgeXRkRmxleHlFbG0udmlkZW9JZCA9PT0gJ3N0cmluZycpIHJldHVybiB5dGRGbGV4eUVsbS52aWRlb0lkOwogICAgICBjb25zb2xlLmxvZygndmlkZW8gaWQgbm90IGZvdW5kJyk7CiAgICAgIHJldHVybiAnJzsKICAgIH07CgogICAgY29uc3QgaG9sZElubGluZUV4cGFuZGVyQWx3YXlzRXhwYW5kZWQgPSAoaW5saW5lRXhwYW5kZXJDbnQpID0+IHsKICAgICAgY29uc29sZS5sb2coJ2hvbGRJbmxpbmVFeHBhbmRlckFsd2F5c0V4cGFuZGVkJykKICAgICAgaWYgKGlubGluZUV4cGFuZGVyQ250LmFsd2F5c1Nob3dFeHBhbmRCdXR0b24gPT09IHRydWUpIGlubGluZUV4cGFuZGVyQ250LmFsd2F5c1Nob3dFeHBhbmRCdXR0b24gPSBmYWxzZTsKICAgICAgaWYgKHR5cGVvZiAoaW5saW5lRXhwYW5kZXJDbnQuY29sbGFwc2VMYWJlbCB8fCAwKSA9PT0gJ3N0cmluZycpIGlubGluZUV4cGFuZGVyQ250LmNvbGxhcHNlTGFiZWwgPSAnJzsKICAgICAgaWYgKHR5cGVvZiAoaW5saW5lRXhwYW5kZXJDbnQuZXhwYW5kTGFiZWwgfHwgMCkgPT09ICdzdHJpbmcnKSBpbmxpbmVFeHBhbmRlckNudC5leHBhbmRMYWJlbCA9ICcnOwogICAgICBpZiAoaW5saW5lRXhwYW5kZXJDbnQuc2hvd0NvbGxhcHNlQnV0dG9uID09PSB0cnVlKSBpbmxpbmVFeHBhbmRlckNudC5zaG93Q29sbGFwc2VCdXR0b24gPSBmYWxzZTsKICAgICAgaWYgKGlubGluZUV4cGFuZGVyQ250LnNob3dFeHBhbmRCdXR0b24gPT09IHRydWUpIGlubGluZUV4cGFuZGVyQ250LnNob3dFeHBhbmRCdXR0b24gPSBmYWxzZTsKICAgICAgaWYgKGlubGluZUV4cGFuZGVyQ250LmV4cGFuZEJ1dHRvbiBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XykgewogICAgICAgIGlubGluZUV4cGFuZGVyQ250LmV4cGFuZEJ1dHRvbiA9IG51bGw7CiAgICAgICAgaW5saW5lRXhwYW5kZXJDbnQuZXhwYW5kQnV0dG9uLnJlbW92ZSgpOwogICAgICB9CiAgICB9OwoKICAgIGNvbnN0IGZpeElubGluZUV4cGFuZGVyRGlzcGxheSA9IChpbmxpbmVFeHBhbmRlckNudCkgPT4gewogICAgICB0cnkgewogICAgICAgIGlubGluZUV4cGFuZGVyQ250LnVwZGF0ZUlzQXR0cmlidXRlZEV4cGFuZGVkKCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsgfQogICAgICB0cnkgewogICAgICAgIGlubGluZUV4cGFuZGVyQ250LnVwZGF0ZUlzRm9ybWF0dGVkRXhwYW5kZWQoKTsKICAgICAgfSBjYXRjaCAoZSkgeyB9CiAgICAgIHRyeSB7CiAgICAgICAgaW5saW5lRXhwYW5kZXJDbnQudXBkYXRlVGV4dE9uU25pcHBldFR5cGVDaGFuZ2UoKTsKICAgICAgfSBjYXRjaCAoZSkgeyB9CiAgICAgIHRyeSB7CiAgICAgICAgaW5saW5lRXhwYW5kZXJDbnQudXBkYXRlU3R5bGVzKCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsgfQogICAgfTsKCiAgICBjb25zdCBmaXhJbmxpbmVFeHBhbmRlck1ldGhvZHMgPSAoaW5saW5lRXhwYW5kZXJDbnQpID0+IHsKICAgICAgaWYgKGlubGluZUV4cGFuZGVyQ250ICYmICFpbmxpbmVFeHBhbmRlckNudC5fXyQkaWRuY2prODQ4NyQkX18pIHsKICAgICAgICBpbmxpbmVFeHBhbmRlckNudC5fXyQkaWRuY2prODQ4NyQkX18gPSB0cnVlOwogICAgICAgIGlubGluZUV4cGFuZGVyQ250LnVwZGF0ZVRleHRPblNuaXBwZXRUeXBlQ2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgdHJ1ZSB8fCB0aGlzLmlzUmVzZXRNdXRhdGlvbiAmJiB0aGlzLm11dGF0aW9uQ2FsbGJhY2soKTsKICAgICAgICB9CiAgICAgICAgLy8gaW5saW5lRXhwYW5kZXJDbnQuaGFzQXR0cmlidXRlZFN0cmluZ1RleHQgPSB0cnVlOwogICAgICAgIGlubGluZUV4cGFuZGVyQ250LmlzUmVzZXRNdXRhdGlvbiA9IHRydWU7CiAgICAgICAgZml4SW5saW5lRXhwYW5kZXJEaXNwbGF5KGlubGluZUV4cGFuZGVyQ250KTsgLy8gZG8gdGhlIGluaXRpYWwgZml4CiAgICAgIH0KICAgIH07CgogICAgY29uc3QgZml4SW5saW5lRXhwYW5kZXJDb250ZW50ID0gKCkgPT4gewogICAgICAvLyBjb25zb2xlLmxvZygyMTg4NiwxKQogICAgICBjb25zdCBtYWluSW5mbyA9IGdldE1haW5JbmZvKCk7CiAgICAgIGlmICghbWFpbkluZm8pIHJldHVybjsKICAgICAgLy8gY29uc29sZS5sb2coMjE4ODYsMikKICAgICAgY29uc3QgaW5saW5lRXhwYW5kZXJFbG0gPSBtYWluSW5mby5xdWVyeVNlbGVjdG9yKCd5dGQtdGV4dC1pbmxpbmUtZXhwYW5kZXInKTsKICAgICAgY29uc3QgaW5saW5lRXhwYW5kZXJDbnQgPSBpbnNwKGlubGluZUV4cGFuZGVyRWxtKTsKICAgICAgZml4SW5saW5lRXhwYW5kZXJNZXRob2RzKGlubGluZUV4cGFuZGVyQ250KTsKCiAgICAgIC8vIGNvbnNvbGUubG9nKDIxODg2LCAzKQogICAgICAvLyBpZiAoaW5saW5lRXhwYW5kZXJDbnQgJiYgaW5saW5lRXhwYW5kZXJDbnQuaXNFeHBhbmRlZCA9PT0gdHJ1ZSAmJiBwbHVnaW4uYXV0b0V4cGFuZEluZm9EZXNjLmFjdGl2YXRlZCkgewogICAgICAvLyAgIC8vIGlubGluZUV4cGFuZGVyQ250LmlzRXhwYW5kZWRDaGFuZ2VkKCk7CiAgICAgIC8vICAgLy8gaG9sZElubGluZUV4cGFuZGVyQWx3YXlzRXhwYW5kZWQoaW5saW5lRXhwYW5kZXJDbnQpOwogICAgICAvLyB9CiAgICAgIC8vIGlmKGlubGluZUV4cGFuZGVyQ250KXsKICAgICAgLy8gICAvLyBjb25zb2xlLmxvZygyMTg4Niw0LCBpbmxpbmVFeHBhbmRlckNudC5pc0V4cGFuZGVkLCBpbmxpbmVFeHBhbmRlckNudC5pc1RydW5jYXRlZCkKICAgICAgLy8gICBpZiAoaW5saW5lRXhwYW5kZXJDbnQuaXNFeHBhbmRlZCA9PT0gZmFsc2UgJiYgaW5saW5lRXhwYW5kZXJDbnQuaXNUcnVuY2F0ZWQgPT09IHRydWUpIHsKICAgICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKDIxODgxKQogICAgICAvLyAgICAgaW5saW5lRXhwYW5kZXJDbnQuaXNUcnVuY2F0ZWQgPSBmYWxzZTsKICAgICAgLy8gICB9CiAgICAgIC8vIH0KICAgIH0KCiAgICBjb25zdCBwbHVnaW4gPSB7CiAgICAgICdtaW5pYnJvd3Nlcic6IHsKICAgICAgICBhY3RpdmF0ZWQ6IGZhbHNlLAogICAgICAgIHRvVXNlOiB0cnVlLCAvLyBkZXBlbmRzIG9uIHNob3VsZFVzZU1pbmlQbGF5ZXIoKQogICAgICAgIGFjdGl2YXRlKCkgewoKICAgICAgICAgIGlmICh0aGlzLmFjdGl2YXRlZCkgcmV0dXJuOwoKICAgICAgICAgIGNvbnN0IGlzUGFzc2l2ZUFyZ1N1cHBvcnQgPSAodHlwZW9mIEludGVyc2VjdGlvbk9ic2VydmVyID09PSAnZnVuY3Rpb24nKTsKICAgICAgICAgIC8vIGh0dHBzOi8vY2FuaXVzZS5jb20vP3NlYXJjaD1vYnNlcnZlcgogICAgICAgICAgLy8gaHR0cHM6Ly9jYW5pdXNlLmNvbS8/c2VhcmNoPWFkZEV2ZW50TGlzdGVuZXIlMjBwYXNzaXZlCgogICAgICAgICAgaWYgKCFpc1Bhc3NpdmVBcmdTdXBwb3J0KSByZXR1cm47CgogICAgICAgICAgdGhpcy5hY3RpdmF0ZWQgPSB0cnVlOwoKICAgICAgICAgIGNvbnN0IHl0ZEFwcEVsbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3l0ZC1hcHAnKTsKICAgICAgICAgIGNvbnN0IHl0ZEFwcENudCA9IGluc3AoeXRkQXBwRWxtKTsKCgogICAgICAgICAgaWYgKCF5dGRBcHBDbnQpIHJldHVybjsKCiAgICAgICAgICBjb25zdCBjUHJvdG8gPSB5dGRBcHBDbnQuY29uc3RydWN0b3IucHJvdG90eXBlOwoKICAgICAgICAgIGlmICghY1Byb3RvLmhhbmRsZU5hdmlnYXRlKSByZXR1cm47CgogICAgICAgICAgaWYgKGNQcm90by5oYW5kbGVOYXZpZ2F0ZS5fX21hMzU1X18pIHJldHVybjsKCiAgICAgICAgICBjUHJvdG8uaGFuZGxlTmF2aWdhdGUgPSBoYW5kbGVOYXZpZ2F0ZUZhY3RvcnkoY1Byb3RvLmhhbmRsZU5hdmlnYXRlKTsKCiAgICAgICAgICBjUHJvdG8uaGFuZGxlTmF2aWdhdGUuX19tYTM1NV9fID0gMTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgICdhdXRvRXhwYW5kSW5mb0Rlc2MnOiB7CiAgICAgICAgYWN0aXZhdGVkOiBmYWxzZSwKICAgICAgICB0b1VzZTogZmFsc2UsIC8vIGZhbHNlIGJ5IGRlZmF1bHQ7IG9uY2UgdGhlIGV4cGFuZCBpcyBjbGlja2VkLCBtYWludGFpbiB0aGUgZmVhdHVyZSB1bnRpbCB0aGUgYnJvd3NlciBpcyBjbG9zZWQuCiAgICAgICAgLyoqIEB0eXBlIHsgTXV0YXRpb25PYnNlcnZlciB8IG51bGwgfSAqLwogICAgICAgIG1vOiBudWxsLAogICAgICAgIHByb21pc2VSZWFkeTogbmV3IFByb21pc2VFeHRlcm5hbCgpLAogICAgICAgIG1vRm4obG9ja0lkKSB7CgogICAgICAgICAgaWYgKGxvY2tHZXRbJ2F1dG9FeHBhbmRJbmZvRGVzY0F0dHJBc3luY0xvY2snXSAhPT0gbG9ja0lkKSByZXR1cm47CgogICAgICAgICAgY29uc3QgbWFpbkluZm8gPSBnZXRNYWluSW5mbygpOwoKICAgICAgICAgIGlmICghbWFpbkluZm8pIHJldHVybjsKICAgICAgICAgIHN3aXRjaCAoKChtYWluSW5mbyB8fCAwKS5ub2RlTmFtZSB8fCAnJykudG9Mb3dlckNhc2UoKSkgewogICAgICAgICAgICBjYXNlICd5dGQtZXhwYW5kZXInOgogICAgICAgICAgICAgIGlmIChtYWluSW5mby5oYXNBdHRyaWJ1dGUwMDAoJ2NvbGxhcHNlZCcpKSB7CiAgICAgICAgICAgICAgICBsZXQgc3VjY2VzcyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgaW5zcChtYWluSW5mbykuaGFuZGxlTW9yZVRhcChuZXcgRXZlbnQoInRhcCIpKTsKICAgICAgICAgICAgICAgICAgc3VjY2VzcyA9IHRydWU7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoc3VjY2VzcykgbWFpbkluZm8uc2V0QXR0cmlidXRlMTExKCd0eXQtbm8tbGVzcy1idG4nLCAnJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICd5dGQtZXhwYW5kYWJsZS12aWRlby1kZXNjcmlwdGlvbi1ib2R5LXJlbmRlcmVyJzoKICAgICAgICAgICAgICBjb25zdCBpbmxpbmVFeHBhbmRlckVsbSA9IG1haW5JbmZvLnF1ZXJ5U2VsZWN0b3IoJ3l0ZC10ZXh0LWlubGluZS1leHBhbmRlcicpOwogICAgICAgICAgICAgIGNvbnN0IGlubGluZUV4cGFuZGVyQ250ID0gaW5zcChpbmxpbmVFeHBhbmRlckVsbSk7CiAgICAgICAgICAgICAgaWYgKGlubGluZUV4cGFuZGVyQ250ICYmIGlubGluZUV4cGFuZGVyQ250LmlzRXhwYW5kZWQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICBpbmxpbmVFeHBhbmRlckNudC5pc0V4cGFuZGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGlubGluZUV4cGFuZGVyQ250LmlzRXhwYW5kZWRDaGFuZ2VkKCk7CiAgICAgICAgICAgICAgICAvLyBob2xkSW5saW5lRXhwYW5kZXJBbHdheXNFeHBhbmRlZChpbmxpbmVFeHBhbmRlckNudCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKCgogICAgICAgIH0sCiAgICAgICAgYWN0aXZhdGUoKSB7CiAgICAgICAgICBpZiAodGhpcy5hY3RpdmF0ZWQpIHJldHVybjsKCiAgICAgICAgICB0aGlzLm1vRm4gPSB0aGlzLm1vRm4uYmluZCh0aGlzKTsKICAgICAgICAgIHRoaXMubW8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7CiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZShsb2NrU2V0WydhdXRvRXhwYW5kSW5mb0Rlc2NBdHRyQXN5bmNMb2NrJ10pLnRoZW4odGhpcy5tb0ZuKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmFjdGl2YXRlZCA9IHRydWU7CiAgICAgICAgICB0aGlzLnByb21pc2VSZWFkeS5yZXNvbHZlKCk7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBvbk1haW5JbmZvU2V0KG1haW5JbmZvKXsKICAgICAgICAgIGF3YWl0IHRoaXMucHJvbWlzZVJlYWR5LnRoZW4oKTsKICAgICAgICAgIGlmIChtYWluSW5mby5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAneXRkLWV4cGFuZGVyJykgewogICAgICAgICAgICB0aGlzLm1vLm9ic2VydmUobWFpbkluZm8sIHsgYXR0cmlidXRlczogdHJ1ZSwgYXR0cmlidXRlRmlsdGVyOiBbJ2NvbGxhcHNlZCcsICdhdHRyLThpZnY3J10gfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLm1vLm9ic2VydmUobWFpbkluZm8sIHsgYXR0cmlidXRlczogdHJ1ZSwgYXR0cmlidXRlRmlsdGVyOiBbJ2F0dHItOGlmdjcnXSB9KTsKICAgICAgICAgIH0KICAgICAgICAgIG1haW5JbmZvLmluY0F0dHJpYnV0ZTExMSgnYXR0ci04aWZ2NycpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgJ2Z1bGxDaGFubmVsTmFtZU9uSG92ZXInOiB7CiAgICAgICAgYWN0aXZhdGVkOiBmYWxzZSwKICAgICAgICB0b1VzZTogdHJ1ZSwKICAgICAgICAvKiogQHR5cGUgeyBNdXRhdGlvbk9ic2VydmVyIHwgbnVsbCB9ICovCiAgICAgICAgbW86IG51bGwsCiAgICAgICAgLyoqIEB0eXBlIHsgUmVzaXplT2JzZXJ2ZXIgfCBudWxsfSAqLwogICAgICAgIHJvOiBudWxsLAogICAgICAgIHByb21pc2VSZWFkeTogbmV3IFByb21pc2VFeHRlcm5hbCgpLAogICAgICAgIGNoZWNrUmVzaXplOiAwLAogICAgICAgIG1vdXNlRW50ZXJGbihldnQpIHsKCiAgICAgICAgICBjb25zdCB0YXJnZXQgPSBldnQgPyBldnQudGFyZ2V0IDogbnVsbDsKICAgICAgICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XykpIHJldHVybjsKICAgICAgICAgIGNvbnN0IG1ldGFEYXRhRWxtID0gdGFyZ2V0LmNsb3Nlc3QoJ3l0ZC13YXRjaC1tZXRhZGF0YScpOwogICAgICAgICAgbWV0YURhdGFFbG0uY2xhc3NMaXN0LnJlbW92ZSgndHl0LW1ldGFkYXRhLWhvdmVyLXJlc2l6ZWQnKTsKICAgICAgICAgIHRoaXMuY2hlY2tSZXNpemUgPSBEYXRlLm5vdygpICsgMzAwOwogICAgICAgICAgbWV0YURhdGFFbG0uY2xhc3NMaXN0LmFkZCgndHl0LW1ldGFkYXRhLWhvdmVyJyk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbW91c2VFbnRlcicpCgogICAgICAgIH0sCiAgICAgICAgbW91c2VMZWF2ZUZuKGV2dCkgewogICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZ0ID8gZXZ0LnRhcmdldCA6IG51bGw7CiAgICAgICAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudF8pKSByZXR1cm47CiAgICAgICAgICBjb25zdCBtZXRhRGF0YUVsbSA9IHRhcmdldC5jbG9zZXN0KCd5dGQtd2F0Y2gtbWV0YWRhdGEnKTsKICAgICAgICAgIG1ldGFEYXRhRWxtLmNsYXNzTGlzdC5yZW1vdmUoJ3R5dC1tZXRhZGF0YS1ob3Zlci1yZXNpemVkJyk7CiAgICAgICAgICBtZXRhRGF0YUVsbS5jbGFzc0xpc3QucmVtb3ZlKCd0eXQtbWV0YWRhdGEtaG92ZXInKTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdtb3VzZUxlYXZlRm4nKQoKICAgICAgICB9LAogICAgICAgIG1vRm4obG9ja0lkKSB7CgogICAgICAgICAgaWYgKGxvY2tHZXRbJ2Z1bGxDaGFubmVsTmFtZU9uSG92ZXJBdHRyQXN5bmNMb2NrJ10gIT09IGxvY2tJZCkgcmV0dXJuOwoKICAgICAgICAgIGNvbnN0IHVwbG9hZEluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJpbWFyeS55dGQtd2F0Y2gtZmxleHkgeXRkLXdhdGNoLW1ldGFkYXRhICN1cGxvYWQtaW5mbycpOwogICAgICAgICAgaWYgKCF1cGxvYWRJbmZvKSByZXR1cm47CgogICAgICAgICAgY29uc3QgZXZ0T3B0ID0geyBwYXNzaXZlOiB0cnVlLCBjYXB0dXJlOiBmYWxzZSB9OwogICAgICAgICAgdXBsb2FkSW5mby5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVyZW50ZXInLCB0aGlzLm1vdXNlRW50ZXJGbiwgZXZ0T3B0KTsKICAgICAgICAgIHVwbG9hZEluZm8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmxlYXZlJywgdGhpcy5tb3VzZUxlYXZlRm4sIGV2dE9wdCk7CgogICAgICAgICAgdXBsb2FkSW5mby5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZW50ZXInLCB0aGlzLm1vdXNlRW50ZXJGbiwgZXZ0T3B0KTsKICAgICAgICAgIHVwbG9hZEluZm8uYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmxlYXZlJywgdGhpcy5tb3VzZUxlYXZlRm4sIGV2dE9wdCk7CgoKCiAgICAgICAgfSwKICAgICAgICBhc3luYyBvbk5hdmlnYXRlRmluaXNoKCkgewogICAgICAgICAgYXdhaXQgdGhpcy5wcm9taXNlUmVhZHkudGhlbigpOwogICAgICAgICAgY29uc3QgdXBsb2FkSW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmltYXJ5Lnl0ZC13YXRjaC1mbGV4eSB5dGQtd2F0Y2gtbWV0YWRhdGEgI3VwbG9hZC1pbmZvJyk7CiAgICAgICAgICBpZiAoIXVwbG9hZEluZm8pIHJldHVybjsKICAgICAgICAgIHRoaXMubW8ub2JzZXJ2ZSh1cGxvYWRJbmZvLCB7IGF0dHJpYnV0ZXM6IHRydWUsIGF0dHJpYnV0ZUZpbHRlcjogWydoaWRkZW4nLCAnYXR0ci0zd2IwayddIH0pOwogICAgICAgICAgdXBsb2FkSW5mby5pbmNBdHRyaWJ1dGUxMTEoJ2F0dHItM3diMGsnKTsKICAgICAgICAgIHRoaXMucm8ub2JzZXJ2ZSh1cGxvYWRJbmZvKTsKICAgICAgICB9LAogICAgICAgIGFjdGl2YXRlKCkgewoKICAgICAgICAgIGlmICh0aGlzLmFjdGl2YXRlZCkgcmV0dXJuOwoKICAgICAgICAgIGNvbnN0IGlzUGFzc2l2ZUFyZ1N1cHBvcnQgPSAodHlwZW9mIEludGVyc2VjdGlvbk9ic2VydmVyID09PSAnZnVuY3Rpb24nKTsKICAgICAgICAgIC8vIGh0dHBzOi8vY2FuaXVzZS5jb20vP3NlYXJjaD1vYnNlcnZlcgogICAgICAgICAgLy8gaHR0cHM6Ly9jYW5pdXNlLmNvbS8/c2VhcmNoPWFkZEV2ZW50TGlzdGVuZXIlMjBwYXNzaXZlCgogICAgICAgICAgaWYgKCFpc1Bhc3NpdmVBcmdTdXBwb3J0KSByZXR1cm47CgogICAgICAgICAgdGhpcy5hY3RpdmF0ZWQgPSB0cnVlOwoKICAgICAgICAgIHRoaXMubW91c2VFbnRlckZuID0gdGhpcy5tb3VzZUVudGVyRm4uYmluZCh0aGlzKTsKICAgICAgICAgIHRoaXMubW91c2VMZWF2ZUZuID0gdGhpcy5tb3VzZUxlYXZlRm4uYmluZCh0aGlzKTsKCiAgICAgICAgICB0aGlzLm1vRm4gPSB0aGlzLm1vRm4uYmluZCh0aGlzKTsKICAgICAgICAgIHRoaXMubW8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7CiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZShsb2NrU2V0WydmdWxsQ2hhbm5lbE5hbWVPbkhvdmVyQXR0ckFzeW5jTG9jayddKS50aGVuKHRoaXMubW9GbikuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5ybyA9IG5ldyBSZXNpemVPYnNlcnZlcigobXV0YXRpb25zKSA9PiB7CgogICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSA+IHRoaXMuY2hlY2tSZXNpemUpIHJldHVybjsKICAgICAgICAgICAgZm9yIChjb25zdCBtdXRhdGlvbiBvZiBtdXRhdGlvbnMpIHsKICAgICAgICAgICAgICBjb25zdCB1cGxvYWRJbmZvID0gbXV0YXRpb24udGFyZ2V0OwogICAgICAgICAgICAgIGlmICh1cGxvYWRJbmZvICYmIG11dGF0aW9uLmNvbnRlbnRSZWN0LndpZHRoID4gMCAmJiBtdXRhdGlvbi5jb250ZW50UmVjdC5oZWlnaHQgPiAwKSB7CgogICAgICAgICAgICAgICAgY29uc3QgbWV0YURhdGFFbG0gPSB1cGxvYWRJbmZvLmNsb3Nlc3QoJ3l0ZC13YXRjaC1tZXRhZGF0YScpOwogICAgICAgICAgICAgICAgaWYgKG1ldGFEYXRhRWxtLmNsYXNzTGlzdC5jb250YWlucygndHl0LW1ldGFkYXRhLWhvdmVyJykpIHsKCiAgICAgICAgICAgICAgICAgIG1ldGFEYXRhRWxtLmNsYXNzTGlzdC5hZGQoJ3R5dC1tZXRhZGF0YS1ob3Zlci1yZXNpemVkJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLnByb21pc2VSZWFkeS5yZXNvbHZlKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKHNlc3Npb25TdG9yYWdlLl9fJCR0bXBfVXNlQXV0b0V4cGFuZEluZm9EZXNjJCRfXykgcGx1Z2luLmF1dG9FeHBhbmRJbmZvRGVzYy50b1VzZSA9IHRydWU7CgogICAgLy8gbGV0IHNob3VsZEZpeEluZm8gPSBmYWxzZTsKICAgIGNvbnN0IF9fYXR0YWNoZWRTeW1ib2xfXyA9IFN5bWJvbCgpOwoKICAgIGNvbnN0IG1ha2VJbml0QXR0YWNoZWQgPSAodGFnKT0+ewogICAgICBjb25zdCBpblBhZ2VSZWFycmFuZ2VfID0gaW5QYWdlUmVhcnJhbmdlOwogICAgICBpblBhZ2VSZWFycmFuZ2UgPSBmYWxzZTsKICAgICAgZm9yIChjb25zdCBlbG0gb2YgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgJHt0YWd9YCkpIHsKICAgICAgICBjb25zdCBjbnQgPSBpbnNwKGVsbSkgfHwgMDsKICAgICAgICBpZiAodHlwZW9mIGNudC5hdHRhY2hlZDQ5OCA9PT0gJ2Z1bmN0aW9uJyAmJiAhZWxtW19fYXR0YWNoZWRTeW1ib2xfX10pIFByb21pc2UucmVzb2x2ZShlbG0pLnRoZW4oZXZlbnRNYXBbYCR7dGFnfTo6YXR0YWNoZWRgXSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgfQogICAgICBpblBhZ2VSZWFycmFuZ2UgPSBpblBhZ2VSZWFycmFuZ2VfOwogICAgfTsKCiAgICBjb25zdCBnZXRHZW5lcmFsQ2hhdEVsZW1lbnQgPSBhc3luYyAoKSA9PiB7CiAgICAgIGZvciAobGV0IGkgPSAyOyBpLS0gPiAwOykgewogICAgICAgIGxldCB0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbHVtbnMuc3R5bGUtc2NvcGUueXRkLXdhdGNoLWZsZXh5IHl0ZC1saXZlLWNoYXQtZnJhbWUjY2hhdCcpOwogICAgICAgIGlmICh0IGluc3RhbmNlb2YgRWxlbWVudCkgcmV0dXJuIHQ7CiAgICAgICAgaWYgKGkgPiAwKSB7CiAgICAgICAgICAvLyB0cnkgbGF0ZXIKICAgICAgICAgIGNvbnNvbGUubG9nKCd5dGQtbGl2ZS1jaGF0LWZyYW1lOjphdHRhY2hlZCAtIGRlbGF5UG4oMjAwKScpCiAgICAgICAgICBhd2FpdCBkZWxheVBuKDIwMCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfTsKCiAgICBjb25zdCBuc1RlbXBsYXRlT2J0YWluID0gKCkgPT4gewogICAgICBsZXQgbnNUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3l0ZC13YXRjaC1mbGV4eSBub3NjcmlwdFtucy10ZW1wbGF0ZV0nKTsKICAgICAgaWYgKCFuc1RlbXBsYXRlKSB7CiAgICAgICAgbnNUZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ25vc2NyaXB0Jyk7CiAgICAgICAgbnNUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ25zLXRlbXBsYXRlJywgJycpOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3l0ZC13YXRjaC1mbGV4eScpLmFwcGVuZENoaWxkKG5zVGVtcGxhdGUpOwogICAgICB9CiAgICAgIHJldHVybiBuc1RlbXBsYXRlOwogICAgfTsKCiAgICBjb25zdCBpc1BhZ2VET00gPSAoZWxtLCBzZWxlY3RvcikgPT4gewogICAgICBpZiAoIWVsbSB8fCAhKGVsbSBpbnN0YW5jZW9mIEVsZW1lbnQpIHx8ICEoZWxtLm5vZGVOYW1lKSkgcmV0dXJuIGZhbHNlOwogICAgICBpZiAoIWVsbS5jbG9zZXN0KHNlbGVjdG9yKSkgcmV0dXJuIGZhbHNlOwogICAgICBpZiAoZWxtLmlzQ29ubmVjdGVkICE9PSB0cnVlKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiB0cnVlOwogICAgfTsKCiAgICBjb25zdCBpbnZhbGlkRmxleHlQYXJlbnQgPSAoaG9zdEVsZW1lbnQpID0+IHsKICAgICAgaWYgKGhvc3RFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHsKICAgICAgICBjb25zdCBoYXNGbGV4eVBhcmVudCA9IEhUTUxFbGVtZW50LnByb3RvdHlwZS5jbG9zZXN0LmNhbGwoaG9zdEVsZW1lbnQsICd5dGQtd2F0Y2gtZmxleHknKTsgIC8vIGVnIHNob3J0CiAgICAgICAgaWYgKCFoYXNGbGV4eVBhcmVudCkgcmV0dXJuIHRydWU7CiAgICAgICAgY29uc3QgY3VycmVudEZsZXh5ID0gZWxlbWVudHMuZmxleHk7CiAgICAgICAgaWYgKGN1cnJlbnRGbGV4eSAmJiBjdXJyZW50RmxleHkgIT09IGhhc0ZsZXh5UGFyZW50KSByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8gY29uc3QgbXV0YXRpb25Db21tZW50ID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgnMScpOwogICAgLy8gbGV0IG11dGF0aW9uUHJvbWlzZSA9IG5ldyBQcm9taXNlRXh0ZXJuYWwoKTsKICAgIC8vIGNvbnN0IG11dGF0aW9uUHJvbWlzZU9icyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpPT57CiAgICAvLyAgIG11dGF0aW9uUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAvLyAgIG11dGF0aW9uUHJvbWlzZSA9IG5ldyBQcm9taXNlRXh0ZXJuYWwoKTsKICAgIC8vIH0pOwogICAgLy8gbXV0YXRpb25Qcm9taXNlT2JzLm9ic2VydmUobXV0YXRpb25Db21tZW50LCB7Y2hhcmFjdGVyRGF0YTogdHJ1ZX0pOwoKICAgIGxldCBoZWFkZXJNdXRhdGlvbk9ic2VydmVyID0gbnVsbDsKICAgIGxldCBoZWFkZXJNdXRhdGlvblRtcE5vZGUgPSBudWxsOwoKICAgIGNvbnN0IGV2ZW50TWFwID0gewoKICAgICAgJ2NlSGFjayc6ICgpID0+IHsKICAgICAgICBtTG9hZGVkLmZsYWcgfD0gMjsKICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlMTExKCd0YWJ2aWV3LWxvYWRlZCcsIG1Mb2FkZWQubWFrZVN0cmluZygpKTsKCiAgICAgICAgcmV0cmlldmVDRSgneXRkLXdhdGNoLWZsZXh5JykudGhlbihldmVudE1hcFsneXRkLXdhdGNoLWZsZXh5OjpkZWZpbmVkJ10pLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgcmV0cmlldmVDRSgneXRkLWV4cGFuZGVyJykudGhlbihldmVudE1hcFsneXRkLWV4cGFuZGVyOjpkZWZpbmVkJ10pLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgcmV0cmlldmVDRSgneXRkLXdhdGNoLW5leHQtc2Vjb25kYXJ5LXJlc3VsdHMtcmVuZGVyZXInKS50aGVuKGV2ZW50TWFwWyd5dGQtd2F0Y2gtbmV4dC1zZWNvbmRhcnktcmVzdWx0cy1yZW5kZXJlcjo6ZGVmaW5lZCddKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICAgIHJldHJpZXZlQ0UoJ3l0ZC1jb21tZW50cy1oZWFkZXItcmVuZGVyZXInKS50aGVuKGV2ZW50TWFwWyd5dGQtY29tbWVudHMtaGVhZGVyLXJlbmRlcmVyOjpkZWZpbmVkJ10pLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgcmV0cmlldmVDRSgneXRkLWxpdmUtY2hhdC1mcmFtZScpLnRoZW4oZXZlbnRNYXBbJ3l0ZC1saXZlLWNoYXQtZnJhbWU6OmRlZmluZWQnXSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICByZXRyaWV2ZUNFKCd5dGQtY29tbWVudHMnKS50aGVuKGV2ZW50TWFwWyd5dGQtY29tbWVudHM6OmRlZmluZWQnXSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICByZXRyaWV2ZUNFKCd5dGQtZW5nYWdlbWVudC1wYW5lbC1zZWN0aW9uLWxpc3QtcmVuZGVyZXInKS50aGVuKGV2ZW50TWFwWyd5dGQtZW5nYWdlbWVudC1wYW5lbC1zZWN0aW9uLWxpc3QtcmVuZGVyZXI6OmRlZmluZWQnXSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICByZXRyaWV2ZUNFKCd5dGQtd2F0Y2gtbWV0YWRhdGEnKS50aGVuKGV2ZW50TWFwWyd5dGQtd2F0Y2gtbWV0YWRhdGE6OmRlZmluZWQnXSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICByZXRyaWV2ZUNFKCd5dGQtcGxheWxpc3QtcGFuZWwtcmVuZGVyZXInKS50aGVuKGV2ZW50TWFwWyd5dGQtcGxheWxpc3QtcGFuZWwtcmVuZGVyZXI6OmRlZmluZWQnXSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICByZXRyaWV2ZUNFKCd5dGQtZXhwYW5kYWJsZS12aWRlby1kZXNjcmlwdGlvbi1ib2R5LXJlbmRlcmVyJykudGhlbihldmVudE1hcFsneXRkLWV4cGFuZGFibGUtdmlkZW8tZGVzY3JpcHRpb24tYm9keS1yZW5kZXJlcjo6ZGVmaW5lZCddKS5jYXRjaChjb25zb2xlLndhcm4pOwoKICAgICAgfSwKCiAgICAgICdmaXhGb3JUYWJEaXNwbGF5JzogKGlzUmVzaXplKSA9PiB7CiAgICAgICAgLy8gaXNSZXNpemUgaXMgdHJ1ZSBpZiB0aGUgbGF5b3V0IGlzIHJlc2l6ZWQgKG5vdCBkdWUgdG8gdGFiIHN3aXRjaGluZykKICAgICAgICAvLyB5b3V0dWJlIGNvbXBvbmVudHMgc2hhbGwgaGFuZGxlIHRoZSByZXNpemUgaXNzdWUuIGNhbiBza2lwIHNvbWUgY2hlY2tpbmdzLgoKICAgICAgICBiRml4Rm9yUmVzaXplZFRhYkxhdGVyID0gZmFsc2U7CiAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tpby1pbnRlcnNlY3RlZF0nKSkgewogICAgICAgICAgY29uc3QgY250ID0gaW5zcChlbGVtZW50KTsKICAgICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnRfICYmIHR5cGVvZiBjbnQuY2FsY3VsYXRlQ2FuQ29sbGFwc2UgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBjbnQuY2FsY3VsYXRlQ2FuQ29sbGFwc2UodHJ1ZSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKCFpc1Jlc2l6ZSAmJiBsYXN0VGFiID09PSAnI3RhYi1pbmZvJykgewogICAgICAgICAgLy8gI3RhYi1pbmZvIGlzIG5vdyBzaG93bi4KICAgICAgICAgIC8vIHRvIGZpeCB0aGUgc2l6aW5nIGlzc3VlIChkZXNjcmlwdGlvbiBpbmZvIGNhcmRzIGluIHRhYiBpbmZvKQogICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyN0YWItaW5mbyB5dGQtdmlkZW8tZGVzY3JpcHRpb24taW5mb2NhcmRzLXNlY3Rpb24tcmVuZGVyZXIsICN0YWItaW5mbyB5dC1jaGlwLWNsb3VkLXJlbmRlcmVyLCAjdGFiLWluZm8geXRkLWhvcml6b250YWwtY2FyZC1saXN0LXJlbmRlcmVyLCAjdGFiLWluZm8geXQtaG9yaXpvbnRhbC1saXN0LXJlbmRlcmVyJykpIHsKICAgICAgICAgICAgY29uc3QgY250ID0gaW5zcChlbGVtZW50KTsKICAgICAgICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudF8gJiYgdHlwZW9mIGNudC5ub3RpZnlSZXNpemUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY250Lm5vdGlmeVJlc2l6ZSgpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAvLyB0byBmaXggZXhwYW5kL2NvbGxhcHNlIHNpemluZyBpc3N1ZSAoaW5saW5lLWV4cGFuZGVyIGluIHRhYiBpbmZvKQogICAgICAgICAgLy8gZm9yIGV4YW1wbGUsIGV4cGFuZCBidXR0b24gaXMgcmVxdWlyZWQgYnV0IG5vdCBzaG93biBhcyBpdCB3YXMgcmVuZGVyZWQgaW4gdGhlIGhpZGRlbiBzdGF0ZQogICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyN0YWItaW5mbyB5dGQtdGV4dC1pbmxpbmUtZXhwYW5kZXInKSkgewogICAgICAgICAgICBjb25zdCBjbnQgPSBpbnNwKGVsZW1lbnQpOwogICAgICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XyAmJiB0eXBlb2YgY250LnJlc2l6ZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgIGNudC5yZXNpemUoZmFsc2UpOyAvLyByZWZsb3cgZHVlIHRvIG9mZnNldFdpZHRoIGNhbGxpbmcKICAgICAgICAgICAgfQogICAgICAgICAgICBmaXhJbmxpbmVFeHBhbmRlckRpc3BsYXkoY250KTsgLy8ganVzdCBpbiBjYXNlCiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoIWlzUmVzaXplICYmIHR5cGVvZiBsYXN0VGFiID09PSAnc3RyaW5nJyAmJiBsYXN0VGFiLnN0YXJ0c1dpdGgoJyN0YWItJykpIHsKICAgICAgICAgIGNvbnN0IHRhYkNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFiLWNvbnRlbnQtY2xkOm5vdCgudGFiLWNvbnRlbnQtaGlkZGVuKScpOwogICAgICAgICAgaWYgKHRhYkNvbnRlbnQpIHsKICAgICAgICAgICAgY29uc3QgcmVuZGVyZXJzID0gdGFiQ29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCd5dC1jaGlwLWNsb3VkLXJlbmRlcmVyJyk7CiAgICAgICAgICAgIGZvciAoY29uc3QgcmVuZGVyZXIgb2YgcmVuZGVyZXJzKSB7CiAgICAgICAgICAgICAgY29uc3QgY250ID0gaW5zcChyZW5kZXJlcik7CiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjbnQubm90aWZ5UmVzaXplID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBjbnQubm90aWZ5UmVzaXplKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7IH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICB9LAoKICAgICAgJ3l0ZC13YXRjaC1mbGV4eTo6ZGVmaW5lZCc6IChjUHJvdG8pID0+IHsKCiAgICAgICAgaWYgKCFjUHJvdG8udXBkYXRlQ2hhdExvY2F0aW9uNDk4ICYmIHR5cGVvZiBjUHJvdG8udXBkYXRlQ2hhdExvY2F0aW9uID09PSAnZnVuY3Rpb24nICYmIGNQcm90by51cGRhdGVDaGF0TG9jYXRpb24ubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBjUHJvdG8udXBkYXRlQ2hhdExvY2F0aW9uNDk4ID0gY1Byb3RvLnVwZGF0ZUNoYXRMb2NhdGlvbjsKICAgICAgICAgIGNQcm90by51cGRhdGVDaGF0TG9jYXRpb24gPSB1cGRhdGVDaGF0TG9jYXRpb240OTg7CiAgICAgICAgfQoKICAgICAgfSwKCgoKICAgICAgJ3l0ZC13YXRjaC1uZXh0LXNlY29uZGFyeS1yZXN1bHRzLXJlbmRlcmVyOjpkZWZpbmVkJzogKGNQcm90bykgPT4gewogICAgICAgIGlmICghY1Byb3RvLmF0dGFjaGVkNDk4ICYmIHR5cGVvZiBjUHJvdG8uYXR0YWNoZWQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIGNQcm90by5hdHRhY2hlZDQ5OCA9IGNQcm90by5hdHRhY2hlZDsKICAgICAgICAgIGNQcm90by5hdHRhY2hlZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKCFpblBhZ2VSZWFycmFuZ2UpIFByb21pc2UucmVzb2x2ZSh0aGlzLmhvc3RFbGVtZW50KS50aGVuKGV2ZW50TWFwWyd5dGQtd2F0Y2gtbmV4dC1zZWNvbmRhcnktcmVzdWx0cy1yZW5kZXJlcjo6YXR0YWNoZWQnXSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXR0YWNoZWQ0OTgoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFjUHJvdG8uZGV0YWNoZWQ0OTggJiYgdHlwZW9mIGNQcm90by5kZXRhY2hlZCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgY1Byb3RvLmRldGFjaGVkNDk4ID0gY1Byb3RvLmRldGFjaGVkOwogICAgICAgICAgY1Byb3RvLmRldGFjaGVkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIWluUGFnZVJlYXJyYW5nZSkgUHJvbWlzZS5yZXNvbHZlKHRoaXMuaG9zdEVsZW1lbnQpLnRoZW4oZXZlbnRNYXBbJ3l0ZC13YXRjaC1uZXh0LXNlY29uZGFyeS1yZXN1bHRzLXJlbmRlcmVyOjpkZXRhY2hlZCddKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICAgICAgICByZXR1cm4gdGhpcy5kZXRhY2hlZDQ5OCgpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgbWFrZUluaXRBdHRhY2hlZCgneXRkLXdhdGNoLW5leHQtc2Vjb25kYXJ5LXJlc3VsdHMtcmVuZGVyZXInKTsKCiAgICAgIH0sCgogICAgICAneXRkLXdhdGNoLW5leHQtc2Vjb25kYXJ5LXJlc3VsdHMtcmVuZGVyZXI6OmF0dGFjaGVkJzogKGhvc3RFbGVtZW50KSA9PiB7CgogICAgICAgIGlmIChpbnZhbGlkRmxleHlQYXJlbnQoaG9zdEVsZW1lbnQpKSByZXR1cm47CgogICAgICAgIC8vIGlmIChpblBhZ2VSZWFycmFuZ2UpIHJldHVybjsKICAgICAgICBERUJVR181MDg0ICYmIGNvbnNvbGUubG9nKDUwODQsICd5dGQtd2F0Y2gtbmV4dC1zZWNvbmRhcnktcmVzdWx0cy1yZW5kZXJlcjo6YXR0YWNoZWQnKTsKICAgICAgICBpZiAoaG9zdEVsZW1lbnQgaW5zdGFuY2VvZiBFbGVtZW50KSBob3N0RWxlbWVudFtfX2F0dGFjaGVkU3ltYm9sX19dID0gdHJ1ZTsKICAgICAgICBpZiAoIShob3N0RWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XykgfHwgIShob3N0RWxlbWVudC5jbGFzc0xpc3QubGVuZ3RoID4gMCkgfHwgaG9zdEVsZW1lbnQuY2xvc2VzdCgnbm9zY3JpcHQnKSkgcmV0dXJuOwogICAgICAgIGlmIChob3N0RWxlbWVudC5pc0Nvbm5lY3RlZCAhPT0gdHJ1ZSkgcmV0dXJuOwogICAgICAgIC8vIGlmIChob3N0RWxlbWVudC5fX2Nvbm5lY3RlZEZsZ19fICE9PSA0KSByZXR1cm47CiAgICAgICAgLy8gaG9zdEVsZW1lbnQuX19jb25uZWN0ZWRGbGdfXyA9IDU7CiAgICAgICAgaWYgKGhvc3RFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnRfICYmIGhvc3RFbGVtZW50Lm1hdGNoZXMoJyNjb2x1bW5zICNyZWxhdGVkIHl0ZC13YXRjaC1uZXh0LXNlY29uZGFyeS1yZXN1bHRzLXJlbmRlcmVyJykgJiYgIWhvc3RFbGVtZW50Lm1hdGNoZXMoJyNyaWdodC10YWJzIHl0ZC13YXRjaC1uZXh0LXNlY29uZGFyeS1yZXN1bHRzLXJlbmRlcmVyLCBbaGlkZGVuXSB5dGQtd2F0Y2gtbmV4dC1zZWNvbmRhcnktcmVzdWx0cy1yZW5kZXJlcicpKSB7CiAgICAgICAgICBlbGVtZW50cy5yZWxhdGVkID0gaG9zdEVsZW1lbnQuY2xvc2VzdCgnI3JlbGF0ZWQnKTsKICAgICAgICAgIGhvc3RFbGVtZW50LnNldEF0dHJpYnV0ZTExMSgndHl0LXZpZGVvcy1saXN0JywgJycpOwogICAgICAgIH0KICAgICAgICAvLyBjb25zb2xlLmxvZygneXRkLXdhdGNoLW5leHQtc2Vjb25kYXJ5LXJlc3VsdHMtcmVuZGVyZXI6OmF0dGFjaGVkJywgaG9zdEVsZW1lbnQpOwogICAgICB9LAoKICAgICAgJ3l0ZC13YXRjaC1uZXh0LXNlY29uZGFyeS1yZXN1bHRzLXJlbmRlcmVyOjpkZXRhY2hlZCc6IChob3N0RWxlbWVudCkgPT4gewogICAgICAgIC8vIGlmIChpblBhZ2VSZWFycmFuZ2UpIHJldHVybjsKICAgICAgICBERUJVR181MDg0ICYmIGNvbnNvbGUubG9nKDUwODQsICd5dGQtd2F0Y2gtbmV4dC1zZWNvbmRhcnktcmVzdWx0cy1yZW5kZXJlcjo6ZGV0YWNoZWQnKTsKICAgICAgICBpZiAoIShob3N0RWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XykgfHwgaG9zdEVsZW1lbnQuY2xvc2VzdCgnbm9zY3JpcHQnKSkgcmV0dXJuOwogICAgICAgIGlmIChob3N0RWxlbWVudC5pc0Nvbm5lY3RlZCAhPT0gZmFsc2UpIHJldHVybjsKICAgICAgICAvLyBpZiAoaG9zdEVsZW1lbnQuX19jb25uZWN0ZWRGbGdfXyAhPT0gOCkgcmV0dXJuOwogICAgICAgIC8vIGhvc3RFbGVtZW50Ll9fY29ubmVjdGVkRmxnX18gPSA5OwogICAgICAgIGlmIChob3N0RWxlbWVudC5oYXNBdHRyaWJ1dGUwMDAoJ3R5dC12aWRlb3MtbGlzdCcpKSB7CiAgICAgICAgICBlbGVtZW50cy5yZWxhdGVkID0gbnVsbDsKICAgICAgICAgIGhvc3RFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZTAwMCgndHl0LXZpZGVvcy1saXN0Jyk7CiAgICAgICAgfQogICAgICAgIGNvbnNvbGUubG9nKCd5dGQtd2F0Y2gtbmV4dC1zZWNvbmRhcnktcmVzdWx0cy1yZW5kZXJlcjo6ZGV0YWNoZWQnLCBob3N0RWxlbWVudCk7CiAgICAgIH0sCgoKICAgICAgJ3NldHRpbmdDb21tZW50c1ZpZGVvSWQnOiAoaG9zdEVsZW1lbnQpID0+IHsKICAgICAgICBpZiAoIShob3N0RWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XykgfHwgIShob3N0RWxlbWVudC5jbGFzc0xpc3QubGVuZ3RoID4gMCkgfHwgaG9zdEVsZW1lbnQuY2xvc2VzdCgnbm9zY3JpcHQnKSkgcmV0dXJuOwogICAgICAgIGNvbnN0IGNudCA9IGluc3AoaG9zdEVsZW1lbnQpOwogICAgICAgIGNvbnN0IGNvbW1lbnRzQXJlYSA9IGVsZW1lbnRzLmNvbW1lbnRzOwogICAgICAgIGlmIChjb21tZW50c0FyZWEgIT09IGhvc3RFbGVtZW50IHx8IGhvc3RFbGVtZW50LmlzQ29ubmVjdGVkICE9PSB0cnVlIHx8IGNudC5pc0F0dGFjaGVkICE9PSB0cnVlIHx8ICFjbnQuZGF0YSB8fCBjbnQuaGlkZGVuICE9PSBmYWxzZSkgcmV0dXJuOwogICAgICAgIGNvbnN0IHl0ZEZsZXh5RWxtID0gZWxlbWVudHMuZmxleHk7CiAgICAgICAgY29uc3QgeXRkRmxleHlDbnQgPSB5dGRGbGV4eUVsbSA/IGluc3AoeXRkRmxleHlFbG0pIDogbnVsbDsKICAgICAgICBpZiAoeXRkRmxleHlDbnQgJiYgeXRkRmxleHlDbnQudmlkZW9JZCkgewogICAgICAgICAgaG9zdEVsZW1lbnQuc2V0QXR0cmlidXRlMTExKCd0eXQtY29tbWVudHMtdmlkZW8taWQnLCB5dGRGbGV4eUNudC52aWRlb0lkKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBob3N0RWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUwMDAoJ3R5dC1jb21tZW50cy12aWRlby1pZCcpCiAgICAgICAgfQogICAgICB9LAogICAgICAnY2hlY2tDb21tZW50c1Nob3VsZEJlSGlkZGVuJzogKGxvY2tJZCkgPT4gewoKICAgICAgICBpZiAobG9ja0dldFsnY2hlY2tDb21tZW50c1Nob3VsZEJlSGlkZGVuTG9jayddICE9PSBsb2NrSWQpIHJldHVybjsKCiAgICAgICAgLy8gY29tbWVudHNBcmVhJ3MgYXR0cmlidXRlOiB0eXQtY29tbWVudHMtdmlkZW8taWQKICAgICAgICAvLyB5dGRGbGV4eUVsbSdzIGF0dHJpYnV0ZTogdmlkZW8taWQKCgogICAgICAgIGNvbnN0IGNvbW1lbnRzQXJlYSA9IGVsZW1lbnRzLmNvbW1lbnRzOwogICAgICAgIGNvbnN0IHl0ZEZsZXh5RWxtID0gZWxlbWVudHMuZmxleHk7CiAgICAgICAgaWYgKGNvbW1lbnRzQXJlYSAmJiB5dGRGbGV4eUVsbSAmJiAhY29tbWVudHNBcmVhLmhhc0F0dHJpYnV0ZTAwMCgnaGlkZGVuJykpIHsKICAgICAgICAgIGNvbnN0IHl0ZEZsZXh5Q250ID0gaW5zcCh5dGRGbGV4eUVsbSk7CiAgICAgICAgICBpZiAodHlwZW9mIHl0ZEZsZXh5Q250LnZpZGVvSWQgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRzVmlkZW9JZCA9IGNvbW1lbnRzQXJlYS5nZXRBdHRyaWJ1dGUoJ3R5dC1jb21tZW50cy12aWRlby1pZCcpOwogICAgICAgICAgICBpZiAoY29tbWVudHNWaWRlb0lkICYmIGNvbW1lbnRzVmlkZW9JZCAhPT0geXRkRmxleHlDbnQudmlkZW9JZCkgewogICAgICAgICAgICAgIGNvbW1lbnRzQXJlYS5zZXRBdHRyaWJ1dGUxMTEoJ2hpZGRlbicsICcnKTsKICAgICAgICAgICAgICAvLyByZW1vdmVLZWVwQ29tbWVudHNTY3JvbGxlcigpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgfSwKICAgICAgJ3l0ZC1jb21tZW50czo6ZGVmaW5lZCc6IChjUHJvdG8pID0+IHsKCiAgICAgICAgaWYgKCFjUHJvdG8uYXR0YWNoZWQ0OTggJiYgdHlwZW9mIGNQcm90by5hdHRhY2hlZCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgY1Byb3RvLmF0dGFjaGVkNDk4ID0gY1Byb3RvLmF0dGFjaGVkOwogICAgICAgICAgY1Byb3RvLmF0dGFjaGVkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIWluUGFnZVJlYXJyYW5nZSkgUHJvbWlzZS5yZXNvbHZlKHRoaXMuaG9zdEVsZW1lbnQpLnRoZW4oZXZlbnRNYXBbJ3l0ZC1jb21tZW50czo6YXR0YWNoZWQnXSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICAgICAgLy8gUHJvbWlzZS5yZXNvbHZlKHRoaXMuaG9zdEVsZW1lbnQpLnRoZW4oZXZlbnRNYXBbJ3l0ZC1jb21tZW50czo6ZGF0YUNoYW5nZWRfJ10pLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmF0dGFjaGVkNDk4KCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghY1Byb3RvLmRldGFjaGVkNDk4ICYmIHR5cGVvZiBjUHJvdG8uZGV0YWNoZWQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIGNQcm90by5kZXRhY2hlZDQ5OCA9IGNQcm90by5kZXRhY2hlZDsKICAgICAgICAgIGNQcm90by5kZXRhY2hlZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKCFpblBhZ2VSZWFycmFuZ2UpIFByb21pc2UucmVzb2x2ZSh0aGlzLmhvc3RFbGVtZW50KS50aGVuKGV2ZW50TWFwWyd5dGQtY29tbWVudHM6OmRldGFjaGVkJ10pLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgICAgIC8vIFByb21pc2UucmVzb2x2ZSh0aGlzLmhvc3RFbGVtZW50KS50aGVuKGV2ZW50TWFwWyd5dGQtY29tbWVudHM6OmRhdGFDaGFuZ2VkXyddKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICAgICAgICByZXR1cm4gdGhpcy5kZXRhY2hlZDQ5OCgpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgY1Byb3RvLl9jcmVhdGVQcm9wZXJ0eU9ic2VydmVyKCdkYXRhJywgJ19kYXRhQ2hhbmdlZDQ5OCcsIHVuZGVmaW5lZCkKICAgICAgICBjUHJvdG8uX2RhdGFDaGFuZ2VkNDk4ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gY29uc29sZS5sb2coJ19kYXRhQ2hhbmdlZDQ5OCcsIHRoaXMuaG9zdEVsZW1lbnQpCiAgICAgICAgICBQcm9taXNlLnJlc29sdmUodGhpcy5ob3N0RWxlbWVudCkudGhlbihldmVudE1hcFsneXRkLWNvbW1lbnRzOjpfZGF0YUNoYW5nZWQ0OTgnXSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICB9CgoKICAgICAgICAvLyBpZiAoIWNQcm90by5kYXRhQ2hhbmdlZDQ5OF8gJiYgdHlwZW9mIGNQcm90by5kYXRhQ2hhbmdlZF8gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAvLyAgIGNQcm90by5kYXRhQ2hhbmdlZDQ5OF8gPSBjUHJvdG8uZGF0YUNoYW5nZWRfOwogICAgICAgIC8vICAgY1Byb3RvLmRhdGFDaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyAgICAgUHJvbWlzZS5yZXNvbHZlKHRoaXMuaG9zdEVsZW1lbnQpLnRoZW4oZXZlbnRNYXBbJ3l0ZC1jb21tZW50czo6ZGF0YUNoYW5nZWRfJ10pLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgLy8gICAgIHJldHVybiB0aGlzLmRhdGFDaGFuZ2VkNDk4XygpOwogICAgICAgIC8vICAgfQogICAgICAgIC8vIH0KCiAgICAgICAgbWFrZUluaXRBdHRhY2hlZCgneXRkLWNvbW1lbnRzJyk7CgogICAgICB9LAoKICAgICAgJ3l0ZC1jb21tZW50czo6X2RhdGFDaGFuZ2VkNDk4JzogKGhvc3RFbGVtZW50KSA9PiB7CiAgICAgICAgLy8gY29uc29sZS5sb2coMTg5ODQsIGhvc3RFbGVtZW50Lmhhc0F0dHJpYnV0ZSgndHl0LWNvbW1lbnRzLWFyZWEnKSkKICAgICAgICBpZiAoIWhvc3RFbGVtZW50Lmhhc0F0dHJpYnV0ZTAwMCgndHl0LWNvbW1lbnRzLWFyZWEnKSkgcmV0dXJuOwogICAgICAgIGxldCBjb21tZW50c0RhdGFTdGF0dXMgPSAwOwogICAgICAgIGNvbnN0IGNudCA9IGluc3AoaG9zdEVsZW1lbnQpOwogICAgICAgIGNvbnN0IGRhdGEgPSBjbnQgPyBjbnQuZGF0YSA6IG51bGwKICAgICAgICBjb25zdCBjb250ZW50cyA9IGRhdGEgPyBkYXRhLmNvbnRlbnRzIDogbnVsbDsKICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgaWYgKGNvbnRlbnRzICYmIGNvbnRlbnRzLmxlbmd0aCA9PT0gMSAmJiBjb250ZW50c1swXS5tZXNzYWdlUmVuZGVyZXIpIHsKICAgICAgICAgICAgY29tbWVudHNEYXRhU3RhdHVzID0gMjsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjb250ZW50cyAmJiBjb250ZW50cy5sZW5ndGggPiAxICYmIGNvbnRlbnRzWzBdLmNvbW1lbnRUaHJlYWRSZW5kZXJlcikgewogICAgICAgICAgICBjb21tZW50c0RhdGFTdGF0dXMgPSAxOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoY29tbWVudHNEYXRhU3RhdHVzKSB7CiAgICAgICAgICBob3N0RWxlbWVudC5zZXRBdHRyaWJ1dGUxMTEoJ3R5dC1jb21tZW50cy1kYXRhLXN0YXR1cycsIGNvbW1lbnRzRGF0YVN0YXR1cyk7CiAgICAgICAgICAvLyB5dGRGbGV4eUVsbS5zZXRBdHRyaWJ1dGUxMTEoJ3R5dC1jb21tZW50LWRpc2FibGVkJywgJycpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIHl0ZEZsZXh5RWxtLnJlbW92ZUF0dHJpYnV0ZTAwMCgndHl0LWNvbW1lbnQtZGlzYWJsZWQnKQogICAgICAgICAgaG9zdEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlMDAwKCd0eXQtY29tbWVudHMtZGF0YS1zdGF0dXMnKQogICAgICAgIH0KICAgICAgICBQcm9taXNlLnJlc29sdmUoaG9zdEVsZW1lbnQpLnRoZW4oZXZlbnRNYXBbJ3NldHRpbmdDb21tZW50c1ZpZGVvSWQnXSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgfSwKCiAgICAgICd5dGQtY29tbWVudHM6OmF0dGFjaGVkJzogYXN5bmMgKGhvc3RFbGVtZW50KSA9PiB7CgogICAgICAgIGlmIChpbnZhbGlkRmxleHlQYXJlbnQoaG9zdEVsZW1lbnQpKSByZXR1cm47CgogICAgICAgIC8vIGlmIChpblBhZ2VSZWFycmFuZ2UpIHJldHVybjsKICAgICAgICBERUJVR181MDg0ICYmIGNvbnNvbGUubG9nKDUwODQsICd5dGQtY29tbWVudHM6OmF0dGFjaGVkJyk7CiAgICAgICAgaWYgKGhvc3RFbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCkgaG9zdEVsZW1lbnRbX19hdHRhY2hlZFN5bWJvbF9fXSA9IHRydWU7CiAgICAgICAgaWYgKCEoaG9zdEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudF8pIHx8ICEoaG9zdEVsZW1lbnQuY2xhc3NMaXN0Lmxlbmd0aCA+IDApIHx8IGhvc3RFbGVtZW50LmNsb3Nlc3QoJ25vc2NyaXB0JykpIHJldHVybjsKICAgICAgICBpZiAoaG9zdEVsZW1lbnQuaXNDb25uZWN0ZWQgIT09IHRydWUpIHJldHVybjsKICAgICAgICAvLyBpZiAoaG9zdEVsZW1lbnQuX19jb25uZWN0ZWRGbGdfXyAhPT0gNCkgcmV0dXJuOwogICAgICAgIC8vIGhvc3RFbGVtZW50Ll9fY29ubmVjdGVkRmxnX18gPSA1OwogICAgICAgIGlmICghaG9zdEVsZW1lbnQgfHwgaG9zdEVsZW1lbnQuaWQgIT09ICdjb21tZW50cycpIHJldHVybjsKICAgICAgICAvLyBpZiAoIWhvc3RFbGVtZW50IHx8IGhvc3RFbGVtZW50LmNsb3Nlc3QoJ1toaWRkZW5dJykpIHJldHVybjsKICAgICAgICBlbGVtZW50cy5jb21tZW50cyA9IGhvc3RFbGVtZW50OwogICAgICAgIGNvbnNvbGUubG9nKCd5dGQtY29tbWVudHM6OmF0dGFjaGVkJykKICAgICAgICBQcm9taXNlLnJlc29sdmUoaG9zdEVsZW1lbnQpLnRoZW4oZXZlbnRNYXBbJ3NldHRpbmdDb21tZW50c1ZpZGVvSWQnXSkuY2F0Y2goY29uc29sZS53YXJuKTsKCiAgICAgICAgYW9Db21tZW50Lm9ic2VydmUoaG9zdEVsZW1lbnQsIHsgYXR0cmlidXRlczogdHJ1ZSB9KTsKICAgICAgICBob3N0RWxlbWVudC5zZXRBdHRyaWJ1dGUxMTEoJ3R5dC1jb21tZW50cy1hcmVhJywgJycpOwoKICAgICAgICBjb25zdCBsb2NrSWQgPSBsb2NrU2V0WydyaWdodFRhYlJlYWR5TG9jazAyJ107CiAgICAgICAgYXdhaXQgcmlnaHRUYWJzUHJvdmlkZWRQcm9taXNlLnRoZW4oKTsKICAgICAgICBpZiAobG9ja0dldFsncmlnaHRUYWJSZWFkeUxvY2swMiddICE9PSBsb2NrSWQpIHJldHVybjsKCiAgICAgICAgaWYgKGVsZW1lbnRzLmNvbW1lbnRzICE9PSBob3N0RWxlbWVudCkgcmV0dXJuOwogICAgICAgIGlmIChob3N0RWxlbWVudC5pc0Nvbm5lY3RlZCA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICBERUJVR181MDg1ICYmIGNvbnNvbGUubG9nKDc5MzIsICdjb21tZW50cycpOwoKICAgICAgICAvLyBpZighZWxlbWVudHMuY29tbWVudHMgfHwgZWxlbWVudHMuY29tbWVudHMuaXNDb25uZWN0ZWQgPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgaWYgKGhvc3RFbGVtZW50ICYmICFob3N0RWxlbWVudC5jbG9zZXN0KCcjcmlnaHQtdGFicycpKSB7CiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFiLWNvbW1lbnRzJykuYXNzaWduQ2hpbGRyZW4xMTEobnVsbCwgaG9zdEVsZW1lbnQsIG51bGwpOwogICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgY29uc3Qgc2hvdWxkVGFiVmlzaWJsZSA9IGVsZW1lbnRzLmNvbW1lbnRzICYmIGVsZW1lbnRzLmNvbW1lbnRzLmNsb3Nlc3QoJyN0YWItY29tbWVudHMnKSAmJiAhZWxlbWVudHMuY29tbWVudHMuY2xvc2VzdCgnW2hpZGRlbl0nKTsKCiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbdHl0LXRhYi1jb250ZW50PSIjdGFiLWNvbW1lbnRzIl0nKS5jbGFzc0xpc3QudG9nZ2xlKCd0YWItYnRuLWhpZGRlbicsICFzaG91bGRUYWJWaXNpYmxlKTsKCiAgICAgICAgICAvLyAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YWItY29tbWVudHMnKS5jbGFzc0xpc3QucmVtb3ZlKCd0YWItY29udGVudC1oaWRkZW4nKQogICAgICAgICAgLy8gICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbdHl0LXRhYi1jb250ZW50PSIjdGFiLWNvbW1lbnRzIl0nKS5jbGFzc0xpc3QucmVtb3ZlKCd0YWItYnRuLWhpZGRlbicpCgogICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKGxvY2tTZXRbJ3JlbW92ZUtlZXBDb21tZW50c1Njcm9sbGVyTG9jayddKS50aGVuKHJlbW92ZUtlZXBDb21tZW50c1Njcm9sbGVyKS5jYXRjaChjb25zb2xlLndhcm4pOwoKICAgICAgICB9CgogICAgICAgIFRBQl9BVVRPX1NXSVRDSF9UT19DT01NRU5UUyAmJiBzd2l0Y2hUb1RhYignI3RhYi1jb21tZW50cycpOyAKCiAgICAgIH0sCiAgICAgICd5dGQtY29tbWVudHM6OmRldGFjaGVkJzogKGhvc3RFbGVtZW50KSA9PiB7CiAgICAgICAgLy8gaWYgKGluUGFnZVJlYXJyYW5nZSkgcmV0dXJuOwogICAgICAgIERFQlVHXzUwODQgJiYgY29uc29sZS5sb2coNTA4NCwgJ3l0ZC1jb21tZW50czo6ZGV0YWNoZWQnKTsKICAgICAgICAvLyBjb25zb2xlLmxvZyg4NTgsIGhvc3RFbGVtZW50KQogICAgICAgIGlmICghKGhvc3RFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnRfKSB8fCBob3N0RWxlbWVudC5jbG9zZXN0KCdub3NjcmlwdCcpKSByZXR1cm47CiAgICAgICAgaWYgKGhvc3RFbGVtZW50LmlzQ29ubmVjdGVkICE9PSBmYWxzZSkgcmV0dXJuOwogICAgICAgIC8vIGlmIChob3N0RWxlbWVudC5fX2Nvbm5lY3RlZEZsZ19fICE9PSA4KSByZXR1cm47CiAgICAgICAgLy8gaG9zdEVsZW1lbnQuX19jb25uZWN0ZWRGbGdfXyA9IDk7CgogICAgICAgIGlmIChob3N0RWxlbWVudC5oYXNBdHRyaWJ1dGUwMDAoJ3R5dC1jb21tZW50cy1hcmVhJykpIHsKICAgICAgICAgIC8vIGZvQ29tbWVudHMuZGlzY29ubmVjdCgpOwogICAgICAgICAgLy8gZm9Db21tZW50cy50YWtlUmVjb3JkcygpOwogICAgICAgICAgaG9zdEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlMDAwKCd0eXQtY29tbWVudHMtYXJlYScpOwogICAgICAgICAgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RhYi1jb21tZW50cycpLmNsYXNzTGlzdC5hZGQoJ3RhYi1jb250ZW50LWhpZGRlbicpCiAgICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbdHl0LXRhYi1jb250ZW50PSIjdGFiLWNvbW1lbnRzIl0nKS5jbGFzc0xpc3QuYWRkKCd0YWItYnRuLWhpZGRlbicpCgoKICAgICAgICAgIGFvQ29tbWVudC5kaXNjb25uZWN0KCk7CiAgICAgICAgICBhb0NvbW1lbnQudGFrZVJlY29yZHMoKTsKICAgICAgICAgIGVsZW1lbnRzLmNvbW1lbnRzID0gbnVsbDsKCiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbdHl0LXRhYi1jb250ZW50PSIjdGFiLWNvbW1lbnRzIl0nKS5jbGFzc0xpc3QuYWRkKCd0YWItYnRuLWhpZGRlbicpOwoKICAgICAgICAgIFByb21pc2UucmVzb2x2ZShsb2NrU2V0WydyZW1vdmVLZWVwQ29tbWVudHNTY3JvbGxlckxvY2snXSkudGhlbihyZW1vdmVLZWVwQ29tbWVudHNTY3JvbGxlcikuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICB9CgoKICAgICAgfSwKCgogICAgICAneXRkLWNvbW1lbnRzLWhlYWRlci1yZW5kZXJlcjo6ZGVmaW5lZCc6IChjUHJvdG8pID0+IHsKCiAgICAgICAgaWYgKCFjUHJvdG8uYXR0YWNoZWQ0OTggJiYgdHlwZW9mIGNQcm90by5hdHRhY2hlZCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgY1Byb3RvLmF0dGFjaGVkNDk4ID0gY1Byb3RvLmF0dGFjaGVkOwogICAgICAgICAgY1Byb3RvLmF0dGFjaGVkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIWluUGFnZVJlYXJyYW5nZSkgUHJvbWlzZS5yZXNvbHZlKHRoaXMuaG9zdEVsZW1lbnQpLnRoZW4oZXZlbnRNYXBbJ3l0ZC1jb21tZW50cy1oZWFkZXItcmVuZGVyZXI6OmF0dGFjaGVkJ10pLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSh0aGlzLmhvc3RFbGVtZW50KS50aGVuKGV2ZW50TWFwWyd5dGQtY29tbWVudHMtaGVhZGVyLXJlbmRlcmVyOjpkYXRhQ2hhbmdlZCddKS5jYXRjaChjb25zb2xlLndhcm4pOyAvLyBmb3JjZSBkYXRhQ2hhbmdlZCBvbiBhdHRhY2hlZAogICAgICAgICAgICByZXR1cm4gdGhpcy5hdHRhY2hlZDQ5OCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIWNQcm90by5kZXRhY2hlZDQ5OCAmJiB0eXBlb2YgY1Byb3RvLmRldGFjaGVkID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICBjUHJvdG8uZGV0YWNoZWQ0OTggPSBjUHJvdG8uZGV0YWNoZWQ7CiAgICAgICAgICBjUHJvdG8uZGV0YWNoZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICghaW5QYWdlUmVhcnJhbmdlKSBQcm9taXNlLnJlc29sdmUodGhpcy5ob3N0RWxlbWVudCkudGhlbihldmVudE1hcFsneXRkLWNvbW1lbnRzLWhlYWRlci1yZW5kZXJlcjo6ZGV0YWNoZWQnXSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGV0YWNoZWQ0OTgoKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICghY1Byb3RvLmRhdGFDaGFuZ2VkNDk4ICYmIHR5cGVvZiBjUHJvdG8uZGF0YUNoYW5nZWQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIGNQcm90by5kYXRhQ2hhbmdlZDQ5OCA9IGNQcm90by5kYXRhQ2hhbmdlZDsKICAgICAgICAgIGNQcm90by5kYXRhQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHRoaXMuaG9zdEVsZW1lbnQpLnRoZW4oZXZlbnRNYXBbJ3l0ZC1jb21tZW50cy1oZWFkZXItcmVuZGVyZXI6OmRhdGFDaGFuZ2VkJ10pLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFDaGFuZ2VkNDk4KCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKCiAgICAgICAgbWFrZUluaXRBdHRhY2hlZCgneXRkLWNvbW1lbnRzLWhlYWRlci1yZW5kZXJlcicpOwoKCiAgICAgIH0sCgoKICAgICAgJ3l0ZC1jb21tZW50cy1oZWFkZXItcmVuZGVyZXI6OmF0dGFjaGVkJzogKGhvc3RFbGVtZW50KSA9PiB7CgogICAgICAgIGlmIChpbnZhbGlkRmxleHlQYXJlbnQoaG9zdEVsZW1lbnQpKSByZXR1cm47CgogICAgICAgIC8vIGlmIChpblBhZ2VSZWFycmFuZ2UpIHJldHVybjsKICAgICAgICBERUJVR181MDg0ICYmIGNvbnNvbGUubG9nKDUwODQsICd5dGQtY29tbWVudHMtaGVhZGVyLXJlbmRlcmVyOjphdHRhY2hlZCcpOwogICAgICAgIGlmIChob3N0RWxlbWVudCBpbnN0YW5jZW9mIEVsZW1lbnQpIGhvc3RFbGVtZW50W19fYXR0YWNoZWRTeW1ib2xfX10gPSB0cnVlOwogICAgICAgIGlmICghKGhvc3RFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnRfKSB8fCAhKGhvc3RFbGVtZW50LmNsYXNzTGlzdC5sZW5ndGggPiAwKSB8fCBob3N0RWxlbWVudC5jbG9zZXN0KCdub3NjcmlwdCcpKSByZXR1cm47CiAgICAgICAgaWYgKGhvc3RFbGVtZW50LmlzQ29ubmVjdGVkICE9PSB0cnVlKSByZXR1cm47CiAgICAgICAgLy8gaWYgKGhvc3RFbGVtZW50Ll9fY29ubmVjdGVkRmxnX18gIT09IDQpIHJldHVybjsKICAgICAgICAvLyBob3N0RWxlbWVudC5fX2Nvbm5lY3RlZEZsZ19fID0gNTsKICAgICAgICBpZiAoIWhvc3RFbGVtZW50IHx8ICFob3N0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3l0ZC1pdGVtLXNlY3Rpb24tcmVuZGVyZXInKSkgcmV0dXJuOwogICAgICAgIC8vIGNvbnNvbGUubG9nKDEyOTkxLCAneXRkLWNvbW1lbnRzLWhlYWRlci1yZW5kZXJlcjo6YXR0YWNoZWQnKQogICAgICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbdHl0LWNvbW1lbnRzLWFyZWFdIHl0ZC1jb21tZW50cy1oZWFkZXItcmVuZGVyZXInKTsKICAgICAgICBpZiAoaG9zdEVsZW1lbnQgPT09IHRhcmdldEVsZW1lbnQpIHsKICAgICAgICAgIGhvc3RFbGVtZW50LnNldEF0dHJpYnV0ZTExMSgndHl0LWNvbW1lbnRzLWhlYWRlci1maWVsZCcsICcnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3QgcGFyZW50Tm9kZSA9IGhvc3RFbGVtZW50LnBhcmVudE5vZGU7CiAgICAgICAgICBpZiAocGFyZW50Tm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XyAmJiBwYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ1t0eXQtY29tbWVudHMtaGVhZGVyLWZpZWxkXScpKSB7CiAgICAgICAgICAgIGhvc3RFbGVtZW50LnNldEF0dHJpYnV0ZTExMSgndHl0LWNvbW1lbnRzLWhlYWRlci1maWVsZCcsICcnKQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgIH0sCgogICAgICAneXRkLWNvbW1lbnRzLWhlYWRlci1yZW5kZXJlcjo6ZGV0YWNoZWQnOiAoaG9zdEVsZW1lbnQpID0+IHsKICAgICAgICAvLyBpZiAoaW5QYWdlUmVhcnJhbmdlKSByZXR1cm47CiAgICAgICAgREVCVUdfNTA4NCAmJiBjb25zb2xlLmxvZyg1MDg0LCAneXRkLWNvbW1lbnRzLWhlYWRlci1yZW5kZXJlcjo6ZGV0YWNoZWQnKTsKCiAgICAgICAgaWYgKCEoaG9zdEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudF8pIHx8IGhvc3RFbGVtZW50LmNsb3Nlc3QoJ25vc2NyaXB0JykpIHJldHVybjsKICAgICAgICBpZiAoaG9zdEVsZW1lbnQuaXNDb25uZWN0ZWQgIT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgLy8gaWYgKGhvc3RFbGVtZW50Ll9fY29ubmVjdGVkRmxnX18gIT09IDgpIHJldHVybjsKICAgICAgICAvLyBob3N0RWxlbWVudC5fX2Nvbm5lY3RlZEZsZ19fID0gOTsKICAgICAgICAvLyBjb25zb2xlLmxvZygxMjk5MiwgJ3l0ZC1jb21tZW50cy1oZWFkZXItcmVuZGVyZXI6OmRldGFjaGVkJykKICAgICAgICBpZiAoaG9zdEVsZW1lbnQuaGFzQXR0cmlidXRlMDAwKCdmaWVsZC1vZi1jbS1jb3VudCcpKSB7CiAgICAgICAgICBob3N0RWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUwMDAoJ2ZpZWxkLW9mLWNtLWNvdW50Jyk7CgogICAgICAgICAgY29uc3QgY21Db3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0eXQtY20tY291bnQnKTsKICAgICAgICAgIGlmIChjbUNvdW50ICYmICFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFiLWNvbW1lbnRzIHl0ZC1jb21tZW50cy1oZWFkZXItcmVuZGVyZXJbZmllbGQtb2YtY20tY291bnRdJykpIHsKICAgICAgICAgICAgY21Db3VudC50ZXh0Q29udGVudCA9ICcnOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoaG9zdEVsZW1lbnQuaGFzQXR0cmlidXRlMDAwKCd0eXQtY29tbWVudHMtaGVhZGVyLWZpZWxkJykpIHsKICAgICAgICAgIGhvc3RFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZTAwMCgndHl0LWNvbW1lbnRzLWhlYWRlci1maWVsZCcpOwogICAgICAgIH0KCiAgICAgIH0sCgogICAgICAneXRkLWNvbW1lbnRzLWhlYWRlci1yZW5kZXJlcjo6ZGF0YUNoYW5nZWQnOiAoaG9zdEVsZW1lbnQpID0+IHsKCiAgICAgICAgaWYgKCEoaG9zdEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudF8pIHx8ICEoaG9zdEVsZW1lbnQuY2xhc3NMaXN0Lmxlbmd0aCA+IDApIHx8IGhvc3RFbGVtZW50LmNsb3Nlc3QoJ25vc2NyaXB0JykpIHJldHVybjsKCiAgICAgICAgY29uc3QgeXRkRmxleHlFbG0gPSBlbGVtZW50cy5mbGV4eTsKCiAgICAgICAgbGV0IGIgPSBmYWxzZTsKICAgICAgICBjb25zdCBjbnQgPSBpbnNwKGhvc3RFbGVtZW50KTsKICAgICAgICBpZiAoY250ICYmIGhvc3RFbGVtZW50LmNsb3Nlc3QoJyN0YWItY29tbWVudHMnKSAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFiLWNvbW1lbnRzIHl0ZC1jb21tZW50cy1oZWFkZXItcmVuZGVyZXInKSA9PT0gaG9zdEVsZW1lbnQpIHsKICAgICAgICAgIGIgPSB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAoaG9zdEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudF8gJiYgaG9zdEVsZW1lbnQucGFyZW50Tm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XyAmJiBob3N0RWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ1t0eXQtY29tbWVudHMtaGVhZGVyLWZpZWxkXScpKSB7CiAgICAgICAgICBiID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKGIpIHsKICAgICAgICAgIGhvc3RFbGVtZW50LnNldEF0dHJpYnV0ZTExMSgndHl0LWNvbW1lbnRzLWhlYWRlci1maWVsZCcsICcnKQogICAgICAgICAgeXRkRmxleHlFbG0gJiYgeXRkRmxleHlFbG0ucmVtb3ZlQXR0cmlidXRlMDAwKCd0eXQtY29tbWVudC1kaXNhYmxlZCcpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGhvc3RFbGVtZW50Lmhhc0F0dHJpYnV0ZTAwMCgndHl0LWNvbW1lbnRzLWhlYWRlci1maWVsZCcpICYmIGhvc3RFbGVtZW50LmlzQ29ubmVjdGVkID09PSB0cnVlKSB7CiAgICAgICAgICBpZiAoIWhlYWRlck11dGF0aW9uT2JzZXJ2ZXIpIHsKICAgICAgICAgICAgaGVhZGVyTXV0YXRpb25PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGV2ZW50TWFwWyd5dGQtY29tbWVudHMtaGVhZGVyLXJlbmRlcmVyOjpkZWZlcnJlZENvdW50ZXJVcGRhdGUnXSk7CiAgICAgICAgICB9CiAgICAgICAgICBoZWFkZXJNdXRhdGlvbk9ic2VydmVyLm9ic2VydmUoaG9zdEVsZW1lbnQucGFyZW50Tm9kZSwgeyBzdWJ0cmVlOiBmYWxzZSwgY2hpbGRMaXN0OiB0cnVlIH0pCiAgICAgICAgICBpZiAoIWhlYWRlck11dGF0aW9uVG1wTm9kZSkgaGVhZGVyTXV0YXRpb25UbXBOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdkZWZzJyk7CiAgICAgICAgICBjb25zdCB0bXBOb2RlID0gaGVhZGVyTXV0YXRpb25UbXBOb2RlOwogICAgICAgICAgaG9zdEVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCJhZnRlcmVuZCIsIHRtcE5vZGUpOwogICAgICAgICAgdG1wTm9kZS5yZW1vdmUoKTsKICAgICAgICB9CiAgICAgIH0sCgogICAgICAneXRkLWNvbW1lbnRzLWhlYWRlci1yZW5kZXJlcjo6ZGVmZXJyZWRDb3VudGVyVXBkYXRlJzogKCkgPT4gewoKICAgICAgICBjb25zdCBub2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyN0YWItY29tbWVudHMgeXRkLWNvbW1lbnRzLWhlYWRlci1yZW5kZXJlcltjbGFzc10nKTsKICAgICAgICBpZiAobm9kZXMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICBjb25zdCBob3N0RWxlbWVudCA9IG5vZGVzWzBdOwogICAgICAgICAgY29uc3QgY250ID0gaW5zcChob3N0RWxlbWVudCk7CiAgICAgICAgICBjb25zdCBkYXRhID0gY250LmRhdGE7CiAgICAgICAgICBpZiAoIWRhdGEpIHJldHVybjsKICAgICAgICAgIGxldCBleiA9ICcnOwogICAgICAgICAgaWYgKGRhdGEuY29tbWVudHNDb3VudCAmJiBkYXRhLmNvbW1lbnRzQ291bnQucnVucyAmJiBkYXRhLmNvbW1lbnRzQ291bnQucnVucy5sZW5ndGggPj0gMSkgewogICAgICAgICAgICBsZXQgbWF4ID0gLTE7CiAgICAgICAgICAgIGNvbnN0IHogPSBkYXRhLmNvbW1lbnRzQ291bnQucnVucy5tYXAoZSA9PiB7CiAgICAgICAgICAgICAgbGV0IGMgPSBlLnRleHQucmVwbGFjZSgvXEQrL2csICcnKS5sZW5ndGg7CiAgICAgICAgICAgICAgaWYgKGMgPiBtYXgpIG1heCA9IGM7CiAgICAgICAgICAgICAgcmV0dXJuIFtlLnRleHQsIGNdOwogICAgICAgICAgICB9KS5maWx0ZXIoYSA9PiBhWzFdID09PSBtYXgpOwogICAgICAgICAgICBpZiAoei5sZW5ndGggPj0gMSkgewogICAgICAgICAgICAgIGV6ID0gelswXVswXTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChkYXRhLmNvdW50VGV4dCAmJiBkYXRhLmNvdW50VGV4dC5ydW5zICYmIGRhdGEuY291bnRUZXh0LnJ1bnMubGVuZ3RoID49IDEpIHsKICAgICAgICAgICAgbGV0IG1heCA9IC0xOwogICAgICAgICAgICBjb25zdCB6ID0gZGF0YS5jb3VudFRleHQucnVucy5tYXAoZSA9PiB7CiAgICAgICAgICAgICAgbGV0IGMgPSBlLnRleHQucmVwbGFjZSgvXEQrL2csICcnKS5sZW5ndGg7CiAgICAgICAgICAgICAgaWYgKGMgPiBtYXgpIG1heCA9IGM7CiAgICAgICAgICAgICAgcmV0dXJuIFtlLnRleHQsIGNdOwogICAgICAgICAgICB9KS5maWx0ZXIoYSA9PiBhWzFdID09PSBtYXgpOwogICAgICAgICAgICBpZiAoei5sZW5ndGggPj0gMSkgewogICAgICAgICAgICAgIGV6ID0gelswXVswXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgY29uc3QgY21Db3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0eXQtY20tY291bnQnKTsKICAgICAgICAgIGlmIChleikgewogICAgICAgICAgICBob3N0RWxlbWVudC5zZXRBdHRyaWJ1dGUxMTEoJ2ZpZWxkLW9mLWNtLWNvdW50JywgJycpOwogICAgICAgICAgICBjbUNvdW50ICYmIChjbUNvdW50LnRleHRDb250ZW50ID0gZXoudHJpbSgpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGhvc3RFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZTAwMCgnZmllbGQtb2YtY20tY291bnQnKTsKICAgICAgICAgICAgY21Db3VudCAmJiAoY21Db3VudC50ZXh0Q29udGVudCA9ICcnKTsKICAgICAgICAgICAgY29uc29sZS53YXJuKCdubyB0ZXh0IGZvciAjdHl0LWNtLWNvdW50JykKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCgogICAgICAneXRkLWV4cGFuZGVyOjpkZWZpbmVkJzogKGNQcm90bykgPT4gewogICAgICAgIGlmICghY1Byb3RvLmF0dGFjaGVkNDk4ICYmIHR5cGVvZiBjUHJvdG8uYXR0YWNoZWQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIGNQcm90by5hdHRhY2hlZDQ5OCA9IGNQcm90by5hdHRhY2hlZDsKICAgICAgICAgIGNQcm90by5hdHRhY2hlZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKCFpblBhZ2VSZWFycmFuZ2UpIFByb21pc2UucmVzb2x2ZSh0aGlzLmhvc3RFbGVtZW50KS50aGVuKGV2ZW50TWFwWyd5dGQtZXhwYW5kZXI6OmF0dGFjaGVkJ10pLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmF0dGFjaGVkNDk4KCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghY1Byb3RvLmRldGFjaGVkNDk4ICYmIHR5cGVvZiBjUHJvdG8uZGV0YWNoZWQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIGNQcm90by5kZXRhY2hlZDQ5OCA9IGNQcm90by5kZXRhY2hlZDsKICAgICAgICAgIGNQcm90by5kZXRhY2hlZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKCFpblBhZ2VSZWFycmFuZ2UpIFByb21pc2UucmVzb2x2ZSh0aGlzLmhvc3RFbGVtZW50KS50aGVuKGV2ZW50TWFwWyd5dGQtZXhwYW5kZXI6OmRldGFjaGVkJ10pLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmRldGFjaGVkNDk4KCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghY1Byb3RvLmNhbGN1bGF0ZUNhbkNvbGxhcHNlNDk4ICYmIHR5cGVvZiBjUHJvdG8uY2FsY3VsYXRlQ2FuQ29sbGFwc2UgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIGNQcm90by5jYWxjdWxhdGVDYW5Db2xsYXBzZTQ5OCA9IGNQcm90by5jYWxjdWxhdGVDYW5Db2xsYXBzZTsKICAgICAgICAgIGNQcm90by5jYWxjdWxhdGVDYW5Db2xsYXBzZSA9IGZ1bmNDYW5Db2xsYXBzZTsKCgogICAgICAgIH0KCiAgICAgICAgaWYgKCFjUHJvdG8uY2hpbGRyZW5DaGFuZ2VkNDk4ICYmIHR5cGVvZiBjUHJvdG8uY2hpbGRyZW5DaGFuZ2VkID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICBjUHJvdG8uY2hpbGRyZW5DaGFuZ2VkNDk4ID0gY1Byb3RvLmNoaWxkcmVuQ2hhbmdlZDsKICAgICAgICAgIGNQcm90by5jaGlsZHJlbkNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSh0aGlzLmhvc3RFbGVtZW50KS50aGVuKGV2ZW50TWFwWyd5dGQtZXhwYW5kZXI6OmNoaWxkcmVuQ2hhbmdlZCddKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbkNoYW5nZWQ0OTgoKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8qCgogICAgICAgIGNvbnNvbGUubG9nKCd5dGQtZXhwYW5kZXI6OmRlZmluZWQgMDEnKTsKICAgICAgICAKICAgICAgICBDdXN0b21FbGVtZW50UmVnaXN0cnkucHJvdG90eXBlLmdldC5jYWxsKGN1c3RvbUVsZW1lbnRzLCAneXRkLWV4cGFuZGVyJykucHJvdG90eXBlLmNvbm5lY3RlZENhbGxiYWNrID0gY29ubmVjdGVkQ2FsbGJhY2tZKEN1c3RvbUVsZW1lbnRSZWdpc3RyeS5wcm90b3R5cGUuZ2V0LmNhbGwoY3VzdG9tRWxlbWVudHMsICd5dGQtZXhwYW5kZXInKS5wcm90b3R5cGUuY29ubmVjdGVkQ2FsbGJhY2spCiAgICAgICAgQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5LnByb3RvdHlwZS5nZXQuY2FsbChjdXN0b21FbGVtZW50cywgJ3l0ZC1leHBhbmRlcicpLnByb3RvdHlwZS5kaXNjb25uZWN0ZWRDYWxsYmFjayA9IGRpc2Nvbm5lY3RlZENhbGxiYWNrWShDdXN0b21FbGVtZW50UmVnaXN0cnkucHJvdG90eXBlLmdldC5jYWxsKGN1c3RvbUVsZW1lbnRzLCAneXRkLWV4cGFuZGVyJykucHJvdG90eXBlLmRpc2Nvbm5lY3RlZENhbGxiYWNrKQogICAgICAgIAogICAgICAgIGNvbnNvbGUubG9nKCd5dGQtZXhwYW5kZXI6OmRlZmluZWQgMDInKTsKCiAgICAgICAgKi8KCiAgICAgICAgbWFrZUluaXRBdHRhY2hlZCgneXRkLWV4cGFuZGVyJyk7CgogICAgICB9LAoKCiAgICAgICd5dGQtZXhwYW5kZXI6OmNoaWxkcmVuQ2hhbmdlZCc6IChob3N0RWxlbWVudCkgPT4gewoKICAgICAgICBpZiAoaG9zdEVsZW1lbnQgaW5zdGFuY2VvZiBOb2RlICYmIGhvc3RFbGVtZW50Lmhhc0F0dHJpYnV0ZTAwMCgnaGlkZGVuJykgJiYgaG9zdEVsZW1lbnQuaGFzQXR0cmlidXRlMDAwKCd0eXQtbWFpbi1pbmZvJykgJiYgaG9zdEVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQpIHsKICAgICAgICAgIGhvc3RFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7CiAgICAgICAgfQogICAgICB9LAoKICAgICAgJ3l0ZC1leHBhbmRhYmxlLXZpZGVvLWRlc2NyaXB0aW9uLWJvZHktcmVuZGVyZXI6OmRlZmluZWQnOiAoY1Byb3RvKSA9PiB7CgoKICAgICAgICBpZiAoIWNQcm90by5hdHRhY2hlZDQ5OCAmJiB0eXBlb2YgY1Byb3RvLmF0dGFjaGVkID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICBjUHJvdG8uYXR0YWNoZWQ0OTggPSBjUHJvdG8uYXR0YWNoZWQ7CiAgICAgICAgICBjUHJvdG8uYXR0YWNoZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICghaW5QYWdlUmVhcnJhbmdlKSBQcm9taXNlLnJlc29sdmUodGhpcy5ob3N0RWxlbWVudCkudGhlbihldmVudE1hcFsneXRkLWV4cGFuZGFibGUtdmlkZW8tZGVzY3JpcHRpb24tYm9keS1yZW5kZXJlcjo6YXR0YWNoZWQnXSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXR0YWNoZWQ0OTgoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFjUHJvdG8uZGV0YWNoZWQ0OTggJiYgdHlwZW9mIGNQcm90by5kZXRhY2hlZCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgY1Byb3RvLmRldGFjaGVkNDk4ID0gY1Byb3RvLmRldGFjaGVkOwogICAgICAgICAgY1Byb3RvLmRldGFjaGVkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIWluUGFnZVJlYXJyYW5nZSkgUHJvbWlzZS5yZXNvbHZlKHRoaXMuaG9zdEVsZW1lbnQpLnRoZW4oZXZlbnRNYXBbJ3l0ZC1leHBhbmRhYmxlLXZpZGVvLWRlc2NyaXB0aW9uLWJvZHktcmVuZGVyZXI6OmRldGFjaGVkJ10pLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmRldGFjaGVkNDk4KCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBtYWtlSW5pdEF0dGFjaGVkKCd5dGQtZXhwYW5kYWJsZS12aWRlby1kZXNjcmlwdGlvbi1ib2R5LXJlbmRlcmVyJykKCgogICAgICB9LAoKICAgICAgJ3l0ZC1leHBhbmRhYmxlLXZpZGVvLWRlc2NyaXB0aW9uLWJvZHktcmVuZGVyZXI6OmF0dGFjaGVkJzogYXN5bmMgKGhvc3RFbGVtZW50KSA9PiB7CgoKICAgICAgICBpZihob3N0RWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XyAmJiBpc1BhZ2VET00oaG9zdEVsZW1lbnQsJ1t0eXQtaW5mby1yZW5kZXJlcl0nKSAmJiAhaG9zdEVsZW1lbnQubWF0Y2hlcygnW3R5dC1tYWluLWluZm9dJykpewogIAoKICAgICAgICAgIGVsZW1lbnRzLmluZm9FeHBhbmRlciA9IGhvc3RFbGVtZW50OwogICAgICAgICAgY29uc29sZS5sb2coMTI4Mzg0LCBlbGVtZW50cy5pbmZvRXhwYW5kZXIpCgoKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKDEyOTksIGhvc3RFbGVtZW50LnBhcmVudE5vZGUsIGlzUmlnaHRUYWJzSW5zZXJ0ZWQpCgogICAgICAgICAgaW5mb0V4cGFuZGVyRWxlbWVudFByb3ZpZGVkUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgICAgICBob3N0RWxlbWVudC5zZXRBdHRyaWJ1dGUxMTEoJ3R5dC1tYWluLWluZm8nLCAnJyk7CiAgICAgICAgICBpZiAocGx1Z2luLmF1dG9FeHBhbmRJbmZvRGVzYy50b1VzZSkgewogICAgICAgICAgICBwbHVnaW4uYXV0b0V4cGFuZEluZm9EZXNjLm9uTWFpbkluZm9TZXQoaG9zdEVsZW1lbnQpOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IGxvY2tJZCA9IGxvY2tTZXRbJ3JpZ2h0VGFiUmVhZHlMb2NrMDMnXTsKICAgICAgICAgIGF3YWl0IHJpZ2h0VGFic1Byb3ZpZGVkUHJvbWlzZS50aGVuKCk7CiAgICAgICAgICBpZiAobG9ja0dldFsncmlnaHRUYWJSZWFkeUxvY2swMyddICE9PSBsb2NrSWQpIHJldHVybjsKCiAgICAgICAgICBpZiAoZWxlbWVudHMuaW5mb0V4cGFuZGVyICE9PSBob3N0RWxlbWVudCkgcmV0dXJuOwogICAgICAgICAgaWYgKGhvc3RFbGVtZW50LmlzQ29ubmVjdGVkID09PSBmYWxzZSkgcmV0dXJuOwogICAgICAgICAgY29uc29sZS5sb2coNzkzMiwgJ2luZm9FeHBhbmRlcicpOwoKICAgICAgICAgIGVsZW1lbnRzLmluZm9FeHBhbmRlci5jbGFzc0xpc3QuYWRkKCd0eXQtbWFpbi1pbmZvJyk7IC8vIGFkZCBhIGNsYXNzbmFtZSBmb3IgaXQKCiAgICAgICAgICBjb25zdCBpbmZvRXhwYW5kZXIgPSBlbGVtZW50cy5pbmZvRXhwYW5kZXI7CiAgICAgICAgICAvLyBjb25zdCBpbmZvRXhwYW5kZXJCYWNrID0gZWxlbWVudHMuaW5mb0V4cGFuZGVyQmFjazsKCiAgICAgICAgICAKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKDU0MzgsaW5mb0V4cGFuZGVyLCBxdCk7CiAgICAgICAgICAKICAgICAgICAgIC8vIGNvbnN0IGR1bW15ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbm9zY3JpcHQnKTsKICAgICAgICAgIC8vIGR1bW15LnNldEF0dHJpYnV0ZTAwMCgnaWQnLCAnaW5mby1leHBhbmRlci12aWQnKTsKICAgICAgICAgIC8vIGR1bW15LnNldEF0dHJpYnV0ZTAwMCgndmlkZW8taWQnLCBnZXRDdXJyZW50VmlkZW9JZCgpKTsKICAgICAgICAgIC8vIGluZm9FeHBhbmRlci5pbnNlcnRCZWZvcmUwMDAoZHVtbXksIGluZm9FeHBhbmRlci5maXJzdENoaWxkKTsKCiAgICAgICAgICAvLyBhb0luZm8ub2JzZXJ2ZShpbmZvRXhwYW5kZXIsIHsgYXR0cmlidXRlczogdHJ1ZSwgYXR0cmlidXRlRmlsdGVyOiBbJ3R5dC1kaXNwbGF5LWZvcicsICd0eXQtdmlkZW8taWQnXSB9KTsKICAgICAgICAgIC8vIHpvSW5mby5vYnNlcnZlKGluZm9FeHBhbmRlckJhY2ssIHsgYXR0cmlidXRlczogdHJ1ZSwgYXR0cmlidXRlRmlsdGVyOiBbJ2hpZGRlbicsICdhdHRyLXcyMHRzJ10sIGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZX0pOwogICAgICAgICAgLy8gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCk9PnsKICAgICAgICAgIC8vICAgY29uc29sZS5sb2coNTkxNDk5KQogICAgICAgICAgLy8gfSkub2JzZXJ2ZShpbmZvRXhwYW5kZXJCYWNrLCB7Y2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlfSkKCiAgICAgICAgICBjb25zdCBpbmxpbmVFeHBhbmRlckVsbSA9IGluZm9FeHBhbmRlci5xdWVyeVNlbGVjdG9yKCd5dGQtdGV4dC1pbmxpbmUtZXhwYW5kZXInKTsKICAgICAgICAgIGlmIChpbmxpbmVFeHBhbmRlckVsbSkgewogICAgICAgICAgICBjb25zdCBtbyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHsKICAgICAgICAgICAgICBjb25zdCBwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RhYi1pbmZvIHl0ZC10ZXh0LWlubGluZS1leHBhbmRlcicpOwogICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLl9fJCR0bXBfVXNlQXV0b0V4cGFuZEluZm9EZXNjJCRfXyA9IHAgJiYgcC5oYXNBdHRyaWJ1dGUoJ2lzLWV4cGFuZGVkJykgPyAnMScgOiAnJzsKICAgICAgICAgICAgICBpZiAocCkgZml4SW5saW5lRXhwYW5kZXJDb250ZW50KCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBtby5vYnNlcnZlKGlubGluZUV4cGFuZGVyRWxtLCB7IGF0dHJpYnV0ZXM6IFsnaXMtZXhwYW5kZWQnLCAnYXR0ci02djhxdScsICdoaWRkZW4nXSwgc3VidHJlZTogdHJ1ZSB9KTsgLy8gaGlkZGVuICsgc3VidHJlZSB0byB0cmlnZ2VyIHRoZSBmbiBieSBkZWxheWVkVXBkYXRlCiAgICAgICAgICAgIGlubGluZUV4cGFuZGVyRWxtLmluY0F0dHJpYnV0ZTExMSgnYXR0ci02djhxdScpOwogICAgICAgICAgICBjb25zdCBjbnQgPSBpbnNwKGlubGluZUV4cGFuZGVyRWxtKTsKCiAgICAgICAgICAgIGlmIChjbnQpIGZpeElubGluZUV4cGFuZGVyRGlzcGxheShjbnQpOwoKICAgICAgICAgIH0KCgogICAgICAgICAgaWYgKGluZm9FeHBhbmRlciAmJiAhaW5mb0V4cGFuZGVyLmNsb3Nlc3QoJyNyaWdodC10YWJzJykpIHsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RhYi1pbmZvJykuYXNzaWduQ2hpbGRyZW4xMTEobnVsbCwgaW5mb0V4cGFuZGVyLCBudWxsKTsKICAgICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW3R5dC10YWItY29udGVudD0iI3RhYi1pbmZvIl0nKSkgewogICAgICAgICAgICAgIGNvbnN0IHNob3VsZFRhYlZpc2libGUgPSBlbGVtZW50cy5pbmZvRXhwYW5kZXIgJiYgZWxlbWVudHMuaW5mb0V4cGFuZGVyLmNsb3Nlc3QoJyN0YWItaW5mbycpOwogICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1t0eXQtdGFiLWNvbnRlbnQ9IiN0YWItaW5mbyJdJykuY2xhc3NMaXN0LnRvZ2dsZSgndGFiLWJ0bi1oaWRkZW4nLCAhc2hvdWxkVGFiVmlzaWJsZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAKICAgICAgICAgIFByb21pc2UucmVzb2x2ZShsb2NrU2V0WydpbmZvRml4TG9jayddKS50aGVuKGluZm9GaXgpLmNhdGNoKGNvbnNvbGUud2Fybik7IC8vIHJlcXVpcmVkIHdoZW4gdGhlIHBhZ2UgaXMgc3dpdGNoZWQgZnJvbSBjaGFubmVsIHRvIHdhdGNoCgogICAgICAgICAgLy8gaWYgKGluZm9FeHBhbmRlciAmJiBpbmZvRXhwYW5kZXIuY2xvc2VzdCgnI3JpZ2h0LXRhYnMnKSkgUHJvbWlzZS5yZXNvbHZlKGxvY2tTZXRbJ2luZm9GaXhMb2NrJ10pLnRoZW4oaW5mb0ZpeCkuY2F0Y2goY29uc29sZS53YXJuKTsKCiAgICAgICAgICAvLyBpbmZvRXhwYW5kZXJCYWNrLmluY0F0dHJpYnV0ZTExMSgnYXR0ci13MjB0cycpOwoKICAgICAgICAgIC8vIHJldHVybjsKICAgICAgICB9CgoKICAgICAgICBERUJVR181MDg0ICYmIGNvbnNvbGUubG9nKDUwODQsICd5dGQtZXhwYW5kYWJsZS12aWRlby1kZXNjcmlwdGlvbi1ib2R5LXJlbmRlcmVyOjphdHRhY2hlZCcpOwogICAgICAgIGlmIChob3N0RWxlbWVudCBpbnN0YW5jZW9mIEVsZW1lbnQpIGhvc3RFbGVtZW50W19fYXR0YWNoZWRTeW1ib2xfX10gPSB0cnVlOwogICAgICAgIGlmICghKGhvc3RFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnRfKSB8fCAhKGhvc3RFbGVtZW50LmNsYXNzTGlzdC5sZW5ndGggPiAwKSB8fCBob3N0RWxlbWVudC5jbG9zZXN0KCdub3NjcmlwdCcpKSByZXR1cm47CiAgICAgICAgaWYgKGhvc3RFbGVtZW50LmlzQ29ubmVjdGVkICE9PSB0cnVlKSByZXR1cm47CgogICAgICAgIGlmIChpc1BhZ2VET00oaG9zdEVsZW1lbnQsICcjdGFiLWluZm8gW3R5dC1tYWluLWluZm9dJykpIHsKCiAgICAgICAgICAvLyBjb25zdCBjbnQgPSBpbnNwKGhvc3RFbGVtZW50KTsKICAgICAgICAgIC8vIGlmKGNudC5kYXRhKXsKICAgICAgICAgIC8vICAgY250LmRhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBjbnQuZGF0YSk7CiAgICAgICAgICAvLyB9CgoKICAgICAgICB9IGVsc2UgaWYgKCFob3N0RWxlbWVudC5jbG9zZXN0KCcjdGFiLWluZm8nKSkgewoKCiAgICAgICAgICBjb25zdCBib2R5UmVuZGVyZXIgPSBob3N0RWxlbWVudDsKICAgICAgICAgIGxldCBib2R5UmVuZGVyZXJOZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd5dGQtZXhwYW5kYWJsZS12aWRlby1kZXNjcmlwdGlvbi1ib2R5LXJlbmRlcmVyW3R5dC1pbmZvLXJlbmRlcmVyXScpOwogICAgICAgICAgaWYgKCFib2R5UmVuZGVyZXJOZXcpIHsKICAgICAgICAgICAgYm9keVJlbmRlcmVyTmV3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgneXRkLWV4cGFuZGFibGUtdmlkZW8tZGVzY3JpcHRpb24tYm9keS1yZW5kZXJlcicpOwogICAgICAgICAgICBib2R5UmVuZGVyZXJOZXcuc2V0QXR0cmlidXRlKCd0eXQtaW5mby1yZW5kZXJlcicsICcnKTsKICAgICAgICAgICAgbnNUZW1wbGF0ZU9idGFpbigpLmFwcGVuZENoaWxkKGJvZHlSZW5kZXJlck5ldyk7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFiLWluZm8nKS5hc3NpZ25DaGlsZHJlbjExMShudWxsLCBib2R5UmVuZGVyZXJOZXcsIG51bGwpOwoKICAgICAgICAgIAogICAgICAgICAgY29uc3QgY250ID0gaW5zcChib2R5UmVuZGVyZXJOZXcpOwogICAgICAgICAgY250LmRhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBpbnNwKGJvZHlSZW5kZXJlcikuZGF0YSk7CgogICAgICAgICAgY29uc3QgaW5saW5lRXhwYW5kZXJFbG0gPSBib2R5UmVuZGVyZXJOZXcucXVlcnlTZWxlY3RvcigneXRkLXRleHQtaW5saW5lLWV4cGFuZGVyJyk7CiAgICAgICAgICBjb25zdCBpbmxpbmVFeHBhbmRlckNudCA9IGluc3AoaW5saW5lRXhwYW5kZXJFbG0pOwogICAgICAgICAgZml4SW5saW5lRXhwYW5kZXJNZXRob2RzKGlubGluZUV4cGFuZGVyQ250KTsKCiAgICAgICAgICAvLyBpbnNwKGJvZHlSZW5kZXJlck5ldykuZGF0YSA9IGluc3AoYm9keVJlbmRlcmVyKS5kYXRhOwoKICAgICAgICAgIC8vIGlmKChib2R5UmVuZGVyZXJOZXcuaGFzQXR0cmlidXRlKCdoaWRkZW4nKT8xOjApXihib2R5UmVuZGVyZXIuaGFzQXR0cmlidXRlKCdoaWRkZW4nKT8xOjApKXsKICAgICAgICAgIC8vICAgaWYoYm9keVJlbmRlcmVyLmhhc0F0dHJpYnV0ZSgnaGlkZGVuJykpIGJvZHlSZW5kZXJlck5ldy5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICcnKTsKICAgICAgICAgIC8vICAgZWxzZSBib2R5UmVuZGVyZXJOZXcucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKTsKICAgICAgICAgIC8vIH0KCiAgICAgICAgICBlbGVtZW50cy5pbmZvRXhwYW5kZXJSZW5kZXJlckJhY2sgPSBib2R5UmVuZGVyZXI7CiAgICAgICAgICBlbGVtZW50cy5pbmZvRXhwYW5kZXJSZW5kZXJlckZyb250ID0gYm9keVJlbmRlcmVyTmV3OwogICAgICAgICAgYm9keVJlbmRlcmVyLnNldEF0dHJpYnV0ZSgndHl0LWluZm8tcmVuZGVyZXItYmFjaycsICcnKTsKICAgICAgICAgIGJvZHlSZW5kZXJlck5ldy5zZXRBdHRyaWJ1dGUoJ3R5dC1pbmZvLXJlbmRlcmVyLWZyb250JywgJycpOwoKICAgICAgICAgIC8vIGVsZW1lbnRzLmluZm9FeHBhbmRlckJhY2sgPSB7e3l0ZC1leHBhbmRlcn19OwoKCiAgICAgICAgfQoKICAgICAgCgogICAgICB9LAoKICAgICAgJ3l0ZC1leHBhbmRhYmxlLXZpZGVvLWRlc2NyaXB0aW9uLWJvZHktcmVuZGVyZXI6OmRldGFjaGVkJzogYXN5bmMgKGhvc3RFbGVtZW50KSA9PiB7CiAgICAgICAgaWYgKCEoaG9zdEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudF8pIHx8IGhvc3RFbGVtZW50LmNsb3Nlc3QoJ25vc2NyaXB0JykpIHJldHVybjsKICAgICAgICBpZiAoaG9zdEVsZW1lbnQuaXNDb25uZWN0ZWQgIT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgLy8gaWYgKGhvc3RFbGVtZW50Ll9fY29ubmVjdGVkRmxnX18gIT09IDgpIHJldHVybjsKICAgICAgICAvLyBob3N0RWxlbWVudC5fX2Nvbm5lY3RlZEZsZ19fID0gOTsKICAgICAgICAvLyBjb25zb2xlLmxvZyg1OTkyLCBob3N0RWxlbWVudCkKICAgICAgICBpZiAoaG9zdEVsZW1lbnQuaGFzQXR0cmlidXRlMDAwKCd0eXQtbWFpbi1pbmZvJykpIHsKICAgICAgICAgIERFQlVHXzUwODQgJiYgY29uc29sZS5sb2coNTA4NCwgJ3l0ZC1leHBhbmRhYmxlLXZpZGVvLWRlc2NyaXB0aW9uLWJvZHktcmVuZGVyZXI6OmRldGFjaGVkJyk7CiAgICAgICAgICBlbGVtZW50cy5pbmZvRXhwYW5kZXIgPSBudWxsOwogICAgICAgICAgaG9zdEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlMDAwKCd0eXQtbWFpbi1pbmZvJyk7CiAgICAgICAgfQogICAgICB9LAoKICAgICAgJ3l0ZC1leHBhbmRlcjo6YXR0YWNoZWQnOiBhc3luYyAoaG9zdEVsZW1lbnQpID0+IHsKCiAgICAgICAgaWYgKGludmFsaWRGbGV4eVBhcmVudChob3N0RWxlbWVudCkpIHJldHVybjsKCiAgICAgICAgLy8gaWYgKGluUGFnZVJlYXJyYW5nZSkgcmV0dXJuOwogICAgICAgIGlmIChob3N0RWxlbWVudCBpbnN0YW5jZW9mIEVsZW1lbnQpIGhvc3RFbGVtZW50W19fYXR0YWNoZWRTeW1ib2xfX10gPSB0cnVlOwogICAgICAgIGlmICghKGhvc3RFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnRfKSB8fCAhKGhvc3RFbGVtZW50LmNsYXNzTGlzdC5sZW5ndGggPiAwKSB8fCBob3N0RWxlbWVudC5jbG9zZXN0KCdub3NjcmlwdCcpKSByZXR1cm47CiAgICAgICAgaWYgKGhvc3RFbGVtZW50LmlzQ29ubmVjdGVkICE9PSB0cnVlKSByZXR1cm47CiAgICAgICAgLy8gaWYgKGhvc3RFbGVtZW50Ll9fY29ubmVjdGVkRmxnX18gIT09IDQpIHJldHVybjsKICAgICAgICAvLyBob3N0RWxlbWVudC5fX2Nvbm5lY3RlZEZsZ19fID0gNTsKICAgICAgICAvLyBjb25zb2xlLmxvZyg0OTU5LCBob3N0RWxlbWVudCkKICAgICAgICAKICAgIAogICAgICAgIGlmIChob3N0RWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XyAmJiBob3N0RWxlbWVudC5tYXRjaGVzKCdbdHl0LWNvbW1lbnRzLWFyZWFdICNjb250ZW50cyB5dGQtZXhwYW5kZXIjZXhwYW5kZXInKSAmJiAhaG9zdEVsZW1lbnQubWF0Y2hlcygnW2hpZGRlbl0geXRkLWV4cGFuZGVyI2V4cGFuZGVyJykpIHsKCiAgICAgICAgICBob3N0RWxlbWVudC5zZXRBdHRyaWJ1dGUxMTEoJ3R5dC1jb250ZW50LWNvbW1lbnQtZW50cnknLCAnJykKICAgICAgICAgIGlvQ29tbWVudC5vYnNlcnZlKGhvc3RFbGVtZW50KTsKICAgICAgICB9IAogICAgICAgIAogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tCgogICAgICAgIC8vIGVsc2UgaWYgKGhvc3RFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnRfICYmIGhvc3RFbGVtZW50Lm1hdGNoZXMoJ3l0ZC1leHBhbmRlciNleHBhbmRlci5zdHlsZS1zY29wZS55dGQtZXhwYW5kYWJsZS12aWRlby1kZXNjcmlwdGlvbi1ib2R5LXJlbmRlcmVyJykpIHsKICAgICAgICAvLyAgIC8vICAmJiAhaG9zdEVsZW1lbnQubWF0Y2hlcygnI3JpZ2h0LXRhYnMgeXRkLWV4cGFuZGVyI2V4cGFuZGVyLCBbaGlkZGVuXSB5dGQtZXhwYW5kZXIjZXhwYW5kZXInKQoKICAgICAgICAvLyAgIGNvbnNvbGUubG9nKDUwODQsICd5dGQtZXhwYW5kZXI6OmF0dGFjaGVkJyk7CiAgICAgICAgLy8gICBjb25zdCBib2R5UmVuZGVyZXIgPSBob3N0RWxlbWVudC5jbG9zZXN0KCd5dGQtZXhwYW5kYWJsZS12aWRlby1kZXNjcmlwdGlvbi1ib2R5LXJlbmRlcmVyJyk7CiAgICAgICAgLy8gICBsZXQgYm9keVJlbmRlcmVyTmV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigneXRkLWV4cGFuZGFibGUtdmlkZW8tZGVzY3JpcHRpb24tYm9keS1yZW5kZXJlclt0eXQtaW5mby1yZW5kZXJlcl0nKTsKICAgICAgICAvLyAgIGlmICghYm9keVJlbmRlcmVyTmV3KSB7CiAgICAgICAgLy8gICAgIGJvZHlSZW5kZXJlck5ldyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3l0ZC1leHBhbmRhYmxlLXZpZGVvLWRlc2NyaXB0aW9uLWJvZHktcmVuZGVyZXInKTsKICAgICAgICAvLyAgICAgYm9keVJlbmRlcmVyTmV3LnNldEF0dHJpYnV0ZSgndHl0LWluZm8tcmVuZGVyZXInLCAnJyk7CiAgICAgICAgLy8gICAgIG5zVGVtcGxhdGVPYnRhaW4oKS5hcHBlbmRDaGlsZChib2R5UmVuZGVyZXJOZXcpOwogICAgICAgIC8vICAgfQogICAgICAgIC8vICAgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RhYi1pbmZvJykuYXNzaWduQ2hpbGRyZW4xMTEobnVsbCwgYm9keVJlbmRlcmVyTmV3LCBudWxsKTsKCiAgICAgICAgLy8gICBpbnNwKGJvZHlSZW5kZXJlck5ldykuZGF0YSA9IGluc3AoYm9keVJlbmRlcmVyKS5kYXRhOwogICAgICAgIC8vICAgLy8gaWYoKGJvZHlSZW5kZXJlck5ldy5oYXNBdHRyaWJ1dGUoJ2hpZGRlbicpPzE6MCleKGJvZHlSZW5kZXJlci5oYXNBdHRyaWJ1dGUoJ2hpZGRlbicpPzE6MCkpewogICAgICAgIC8vICAgLy8gICBpZihib2R5UmVuZGVyZXIuaGFzQXR0cmlidXRlKCdoaWRkZW4nKSkgYm9keVJlbmRlcmVyTmV3LnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJycpOwogICAgICAgIC8vICAgLy8gICBlbHNlIGJvZHlSZW5kZXJlck5ldy5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpOwogICAgICAgIC8vICAgLy8gfQoKICAgICAgICAvLyAgIGVsZW1lbnRzLmluZm9FeHBhbmRlclJlbmRlcmVyQmFjayA9IGJvZHlSZW5kZXJlcjsKICAgICAgICAvLyAgIGVsZW1lbnRzLmluZm9FeHBhbmRlclJlbmRlcmVyRnJvbnQgPSBib2R5UmVuZGVyZXJOZXc7CiAgICAgICAgLy8gICBib2R5UmVuZGVyZXIuc2V0QXR0cmlidXRlKCd0eXQtaW5mby1yZW5kZXJlci1iYWNrJywnJykKICAgICAgICAvLyAgIGJvZHlSZW5kZXJlck5ldy5zZXRBdHRyaWJ1dGUoJ3R5dC1pbmZvLXJlbmRlcmVyLWZyb250JywnJykKCiAgICAgICAgLy8gICBlbGVtZW50cy5pbmZvRXhwYW5kZXJCYWNrID0gaG9zdEVsZW1lbnQ7CiAgICAgICAgICAKICAgICAgICAvLyB9CgogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tCgogICAgICAgIC8vIGNvbnNvbGUubG9nKCd5dGQtZXhwYW5kZXI6OmF0dGFjaGVkJywgaG9zdEVsZW1lbnQpOwoKCgogICAgICB9LAoKICAgICAgJ3l0ZC1leHBhbmRlcjo6ZGV0YWNoZWQnOiAoaG9zdEVsZW1lbnQpID0+IHsKICAgICAgICAvLyBpZiAoaW5QYWdlUmVhcnJhbmdlKSByZXR1cm47CiAgICAgICAgaWYgKCEoaG9zdEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudF8pIHx8IGhvc3RFbGVtZW50LmNsb3Nlc3QoJ25vc2NyaXB0JykpIHJldHVybjsKICAgICAgICBpZiAoaG9zdEVsZW1lbnQuaXNDb25uZWN0ZWQgIT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgLy8gaWYgKGhvc3RFbGVtZW50Ll9fY29ubmVjdGVkRmxnX18gIT09IDgpIHJldHVybjsKICAgICAgICAvLyBob3N0RWxlbWVudC5fX2Nvbm5lY3RlZEZsZ19fID0gOTsKICAgICAgICAvLyBjb25zb2xlLmxvZyg1OTkyLCBob3N0RWxlbWVudCkKICAgICAgICBpZiAoaG9zdEVsZW1lbnQuaGFzQXR0cmlidXRlMDAwKCd0eXQtY29udGVudC1jb21tZW50LWVudHJ5JykpIHsKICAgICAgICAgIGlvQ29tbWVudC51bm9ic2VydmUoaG9zdEVsZW1lbnQpOwogICAgICAgICAgaG9zdEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlMDAwKCd0eXQtY29udGVudC1jb21tZW50LWVudHJ5JykKICAgICAgICB9IGVsc2UgaWYgKGhvc3RFbGVtZW50Lmhhc0F0dHJpYnV0ZTAwMCgndHl0LW1haW4taW5mbycpKSB7CiAgICAgICAgICBERUJVR181MDg0ICYmIGNvbnNvbGUubG9nKDUwODQsICd5dGQtZXhwYW5kZXI6OmRldGFjaGVkJyk7CiAgICAgICAgICBlbGVtZW50cy5pbmZvRXhwYW5kZXIgPSBudWxsOwogICAgICAgICAgaG9zdEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlMDAwKCd0eXQtbWFpbi1pbmZvJyk7CiAgICAgICAgfQogICAgICAgIC8vIGNvbnNvbGUubG9nKCd5dGQtZXhwYW5kZXI6OmRldGFjaGVkJywgaG9zdEVsZW1lbnQpOwogICAgICB9LAoKCiAgICAgICd5dGQtbGl2ZS1jaGF0LWZyYW1lOjpkZWZpbmVkJzogKGNQcm90bykgPT4gewoKICAgICAgICBsZXQgbGFzdERvbUFjdGlvbiA9IDA7CgogICAgICAgIGlmICghY1Byb3RvLmF0dGFjaGVkNDk4ICYmIHR5cGVvZiBjUHJvdG8uYXR0YWNoZWQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIGNQcm90by5hdHRhY2hlZDQ5OCA9IGNQcm90by5hdHRhY2hlZDsKICAgICAgICAgIGNQcm90by5hdHRhY2hlZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbGFzdERvbUFjdGlvbiA9IERhdGUubm93KCk7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdjaGF0ODY4LWF0dGFjaGVkJywgRGF0ZS5ub3coKSk7CiAgICAgICAgICAgIGlmICghaW5QYWdlUmVhcnJhbmdlKSBQcm9taXNlLnJlc29sdmUodGhpcy5ob3N0RWxlbWVudCkudGhlbihldmVudE1hcFsneXRkLWxpdmUtY2hhdC1mcmFtZTo6YXR0YWNoZWQnXSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXR0YWNoZWQ0OTgoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFjUHJvdG8uZGV0YWNoZWQ0OTggJiYgdHlwZW9mIGNQcm90by5kZXRhY2hlZCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgY1Byb3RvLmRldGFjaGVkNDk4ID0gY1Byb3RvLmRldGFjaGVkOwogICAgICAgICAgY1Byb3RvLmRldGFjaGVkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsYXN0RG9tQWN0aW9uID0gRGF0ZS5ub3coKTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2NoYXQ4NjgtZGV0YWNoZWQnLCBEYXRlLm5vdygpKTsKICAgICAgICAgICAgaWYgKCFpblBhZ2VSZWFycmFuZ2UpIFByb21pc2UucmVzb2x2ZSh0aGlzLmhvc3RFbGVtZW50KS50aGVuKGV2ZW50TWFwWyd5dGQtbGl2ZS1jaGF0LWZyYW1lOjpkZXRhY2hlZCddKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICAgICAgICByZXR1cm4gdGhpcy5kZXRhY2hlZDQ5OCgpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHR5cGVvZiBjUHJvdG8udXJsQ2hhbmdlZCA9PT0gJ2Z1bmN0aW9uJyAmJiAhY1Byb3RvLnVybENoYW5nZWQ2NiAmJiAhY1Byb3RvLnVybENoYW5nZWRBc3luYzEyICYmIGNQcm90by51cmxDaGFuZ2VkLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgY1Byb3RvLnVybENoYW5nZWQ2NiA9IGNQcm90by51cmxDaGFuZ2VkOwogICAgICAgICAgbGV0IGF0aCA9IDA7CiAgICAgICAgICBjUHJvdG8udXJsQ2hhbmdlZEFzeW5jMTIgPSBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuX191cmxDaGFuZ2VkQXN5bmNUNjg5X187CiAgICAgICAgICAgIGNvbnN0IHQgPSBhdGggPSAoYXRoICYgMTA3Mzc0MTgyMykgKyAxOwogICAgICAgICAgICBjb25zdCBjaGF0ZnJhbWUgPSB0aGlzLmNoYXRmcmFtZSB8fCAodGhpcy4kIHx8IDApLmNoYXRmcmFtZSB8fCAwOwogICAgICAgICAgICBpZiAoY2hhdGZyYW1lIGluc3RhbmNlb2YgSFRNTElGcmFtZUVsZW1lbnQpIHsKICAgICAgICAgICAgICBpZiAoY2hhdGZyYW1lLmNvbnRlbnREb2N1bWVudCA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5yZXNvbHZlKCcjJykuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICAgICAgICAgIGlmICh0ICE9PSBhdGgpIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0XyhyZXNvbHZlLCAxKSkuY2F0Y2goY29uc29sZS53YXJuKTsgLy8gbmVjY2Vzc2FyeSBmb3IgQnJhdmUKICAgICAgICAgICAgICBpZiAodCAhPT0gYXRoKSByZXR1cm47CiAgICAgICAgICAgICAgY29uc3QgaXNCbGFua1BhZ2UgPSAhdGhpcy5kYXRhIHx8IHRoaXMuY29sbGFwc2VkOwogICAgICAgICAgICAgIGNvbnN0IHAxID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0XyhyZXNvbHZlLCA3MDYpKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICAgICAgICAgIGNvbnN0IHAyID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICAobmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzLCBvYnNlcnZlcikgPT4gewogICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gZW50cnkuYm91bmRpbmdDbGllbnRSZWN0IHx8IDA7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQmxhbmtQYWdlIHx8IChyZWN0LndpZHRoID4gMCAmJiByZWN0LmhlaWdodCA+IDApKSB7CiAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCcjJyk7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKS5vYnNlcnZlKGNoYXRmcmFtZSk7CiAgICAgICAgICAgICAgfSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLnJhY2UoW3AxLCBwMl0pOwogICAgICAgICAgICAgIGlmICh0ICE9PSBhdGgpIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnVybENoYW5nZWQ2NigpOwogICAgICAgICAgfQogICAgICAgICAgY1Byb3RvLnVybENoYW5nZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLl9fdXJsQ2hhbmdlZEFzeW5jVDY4OF9fID0gKHRoaXMuX191cmxDaGFuZ2VkQXN5bmNUNjg4X18gJiAxMDczNzQxODIzKSArIDE7CiAgICAgICAgICAgIG5leHRCcm93c2VyVGljaygoKSA9PiB7CiAgICAgICAgICAgICAgaWYgKHQgIT09IHRoaXMuX191cmxDaGFuZ2VkQXN5bmNUNjg4X18pIHJldHVybjsKICAgICAgICAgICAgICB0aGlzLnVybENoYW5nZWRBc3luYzEyKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgbWFrZUluaXRBdHRhY2hlZCgneXRkLWxpdmUtY2hhdC1mcmFtZScpOwoKICAgICAgfSwKCiAgICAgICd5dGQtbGl2ZS1jaGF0LWZyYW1lOjphdHRhY2hlZCc6IGFzeW5jIChob3N0RWxlbWVudCkgPT4gewoKICAgICAgICBpZiAoaW52YWxpZEZsZXh5UGFyZW50KGhvc3RFbGVtZW50KSkgcmV0dXJuOwoKICAgICAgICAvLyBpZiAoaW5QYWdlUmVhcnJhbmdlKSByZXR1cm47CiAgICAgICAgREVCVUdfNTA4NCAmJiBjb25zb2xlLmxvZyg1MDg0LCAneXRkLWxpdmUtY2hhdC1mcmFtZTo6YXR0YWNoZWQnKTsKICAgICAgICBpZiAoaG9zdEVsZW1lbnQgaW5zdGFuY2VvZiBFbGVtZW50KSBob3N0RWxlbWVudFtfX2F0dGFjaGVkU3ltYm9sX19dID0gdHJ1ZTsKICAgICAgICBpZiAoIShob3N0RWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XykgfHwgIShob3N0RWxlbWVudC5jbGFzc0xpc3QubGVuZ3RoID4gMCkgfHwgaG9zdEVsZW1lbnQuY2xvc2VzdCgnbm9zY3JpcHQnKSkgcmV0dXJuOwogICAgICAgIGlmIChob3N0RWxlbWVudC5pc0Nvbm5lY3RlZCAhPT0gdHJ1ZSkgcmV0dXJuOwogICAgICAgIC8vIGlmIChob3N0RWxlbWVudC5fX2Nvbm5lY3RlZEZsZ19fICE9PSA0KSByZXR1cm47CiAgICAgICAgLy8gaG9zdEVsZW1lbnQuX19jb25uZWN0ZWRGbGdfXyA9IDU7CiAgICAgICAgaWYgKCFob3N0RWxlbWVudCB8fCBob3N0RWxlbWVudC5pZCAhPT0gJ2NoYXQnKSByZXR1cm47CiAgICAgICAgY29uc29sZS5sb2coJ3l0ZC1saXZlLWNoYXQtZnJhbWU6OmF0dGFjaGVkJykKCiAgICAgICAgY29uc3QgbG9ja0lkID0gbG9ja1NldFsneXRkTGl2ZUF0dGFjaGVkTG9jayddOwogICAgICAgIGNvbnN0IGNoYXRFbGVtID0gYXdhaXQgZ2V0R2VuZXJhbENoYXRFbGVtZW50KCk7CiAgICAgICAgaWYgKGxvY2tHZXRbJ3l0ZExpdmVBdHRhY2hlZExvY2snXSAhPT0gbG9ja0lkKSByZXR1cm47CgogICAgICAgIGlmIChjaGF0RWxlbSA9PT0gaG9zdEVsZW1lbnQpIHsKICAgICAgICAgIGVsZW1lbnRzLmNoYXQgPSBjaGF0RWxlbTsKICAgICAgICAgIGFvQ2hhdC5vYnNlcnZlKGNoYXRFbGVtLCB7IGF0dHJpYnV0ZXM6IHRydWUgfSk7CiAgICAgICAgICBjb25zdCBpc0ZsZXh5UmVhZHkgPSAoZWxlbWVudHMuZmxleHkgaW5zdGFuY2VvZiBFbGVtZW50KTsKICAgICAgICAgIGNoYXRFbGVtLnNldEF0dHJpYnV0ZTExMSgndHl0LWFjdGl2ZS1jaGF0LWZyYW1lJywgaXNGbGV4eVJlYWR5ID8gJ0NGJzogJ0MnKTsKCiAgICAgICAgICBjb25zdCBjaGF0Q29udGFpbmVyID0gY2hhdEVsZW0gPyAoY2hhdEVsZW0uY2xvc2VzdCgnI2NoYXQtY29udGFpbmVyJykgfHwgY2hhdEVsZW0pIDogbnVsbDsKICAgICAgICAgIGlmIChjaGF0Q29udGFpbmVyICYmICFjaGF0Q29udGFpbmVyLmhhc0F0dHJpYnV0ZTAwMCgndHl0LWNoYXQtY29udGFpbmVyJykpIHsKICAgICAgICAgICAgZm9yIChjb25zdCBwIG9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1t0eXQtY2hhdC1jb250YWluZXJdJykpIHsKICAgICAgICAgICAgICBwLnJlbW92ZUF0dHJpYnV0ZTAwMCgnW3R5dC1jaGF0LWNvbnRhaW5lcl0nKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjaGF0Q29udGFpbmVyLnNldEF0dHJpYnV0ZTExMSgndHl0LWNoYXQtY29udGFpbmVyJywgJycpCiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBjbnQgPSBpbnNwKGhvc3RFbGVtZW50KTsKICAgICAgICAgIGNvbnN0IHEgPSBjbnQuX191cmxDaGFuZ2VkQXN5bmNUNjg4X187CiAgICAgICAgICBjb25zdCBwID0gY250Ll9fdXJsQ2hhbmdlZEFzeW5jVDY4OV9fID0gbmV3IFByb21pc2VFeHRlcm5hbCgpOwogICAgICAgICAgc2V0VGltZW91dF8oKCkgPT4gewogICAgICAgICAgICBpZiAocCAhPT0gY250Ll9fdXJsQ2hhbmdlZEFzeW5jVDY4OV9fKSByZXR1cm47CiAgICAgICAgICAgIGlmIChjbnQuaXNBdHRhY2hlZCA9PT0gdHJ1ZSAmJiBob3N0RWxlbWVudC5pc0Nvbm5lY3RlZCA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIHAucmVzb2x2ZSgpOwogICAgICAgICAgICAgIGlmIChxID09PSBjbnQuX191cmxDaGFuZ2VkQXN5bmNUNjg4X18pIHsKICAgICAgICAgICAgICAgIGNudC51cmxDaGFuZ2VkKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCAzMjApOwogICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKGxvY2tTZXRbJ2xheW91dEZpeExvY2snXSkudGhlbihsYXlvdXRGaXgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnSXNzdWUgZm91bmQgaW4geXRkLWxpdmUtY2hhdC1mcmFtZTo6YXR0YWNoZWQnLCBjaGF0RWxlbSwgaG9zdEVsZW1lbnQpOwogICAgICAgIH0KICAgICAgfSwKCiAgICAgICd5dGQtbGl2ZS1jaGF0LWZyYW1lOjpkZXRhY2hlZCc6IChob3N0RWxlbWVudCkgPT4gewogICAgICAgIC8vIGlmIChpblBhZ2VSZWFycmFuZ2UpIHJldHVybjsKICAgICAgICBERUJVR181MDg0ICYmIGNvbnNvbGUubG9nKDUwODQsICd5dGQtbGl2ZS1jaGF0LWZyYW1lOjpkZXRhY2hlZCcpOwoKICAgICAgICBpZiAoIShob3N0RWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XykgfHwgaG9zdEVsZW1lbnQuY2xvc2VzdCgnbm9zY3JpcHQnKSkgcmV0dXJuOwogICAgICAgIGlmIChob3N0RWxlbWVudC5pc0Nvbm5lY3RlZCAhPT0gZmFsc2UpIHJldHVybjsKICAgICAgICAvLyBpZiAoaG9zdEVsZW1lbnQuX19jb25uZWN0ZWRGbGdfXyAhPT0gOCkgcmV0dXJuOwogICAgICAgIC8vIGhvc3RFbGVtZW50Ll9fY29ubmVjdGVkRmxnX18gPSA5OwogICAgICAgIGNvbnNvbGUubG9nKCd5dGQtbGl2ZS1jaGF0LWZyYW1lOjpkZXRhY2hlZCcpCiAgICAgICAgaWYgKGhvc3RFbGVtZW50Lmhhc0F0dHJpYnV0ZTAwMCgndHl0LWFjdGl2ZS1jaGF0LWZyYW1lJykpIHsKICAgICAgICAgIGFvQ2hhdC5kaXNjb25uZWN0KCk7CiAgICAgICAgICBhb0NoYXQudGFrZVJlY29yZHMoKTsKICAgICAgICAgIGhvc3RFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZTAwMCgndHl0LWFjdGl2ZS1jaGF0LWZyYW1lJyk7CiAgICAgICAgICBlbGVtZW50cy5jaGF0ID0gbnVsbDsKCiAgICAgICAgICBjb25zdCB5dGRGbGV4eUVsbSA9IGVsZW1lbnRzLmZsZXh5OwogICAgICAgICAgaWYgKHl0ZEZsZXh5RWxtKSB7CiAgICAgICAgICAgIHl0ZEZsZXh5RWxtLnJlbW92ZUF0dHJpYnV0ZTAwMCgndHl0LWNoYXQtY29sbGFwc2VkJykKICAgICAgICAgICAgeXRkRmxleHlFbG0uc2V0QXR0cmlidXRlMTExKCd0eXQtY2hhdCcsICcnKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICB9LAoKICAgICAgJ3l0ZC1lbmdhZ2VtZW50LXBhbmVsLXNlY3Rpb24tbGlzdC1yZW5kZXJlcjo6ZGVmaW5lZCc6IChjUHJvdG8pID0+IHsKCiAgICAgICAgaWYgKCFjUHJvdG8uYXR0YWNoZWQ0OTggJiYgdHlwZW9mIGNQcm90by5hdHRhY2hlZCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgY1Byb3RvLmF0dGFjaGVkNDk4ID0gY1Byb3RvLmF0dGFjaGVkOwogICAgICAgICAgY1Byb3RvLmF0dGFjaGVkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIWluUGFnZVJlYXJyYW5nZSkgUHJvbWlzZS5yZXNvbHZlKHRoaXMuaG9zdEVsZW1lbnQpLnRoZW4oZXZlbnRNYXBbJ3l0ZC1lbmdhZ2VtZW50LXBhbmVsLXNlY3Rpb24tbGlzdC1yZW5kZXJlcjo6YXR0YWNoZWQnXSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXR0YWNoZWQ0OTgoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFjUHJvdG8uZGV0YWNoZWQ0OTggJiYgdHlwZW9mIGNQcm90by5kZXRhY2hlZCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgY1Byb3RvLmRldGFjaGVkNDk4ID0gY1Byb3RvLmRldGFjaGVkOwogICAgICAgICAgY1Byb3RvLmRldGFjaGVkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIWluUGFnZVJlYXJyYW5nZSkgUHJvbWlzZS5yZXNvbHZlKHRoaXMuaG9zdEVsZW1lbnQpLnRoZW4oZXZlbnRNYXBbJ3l0ZC1lbmdhZ2VtZW50LXBhbmVsLXNlY3Rpb24tbGlzdC1yZW5kZXJlcjo6ZGV0YWNoZWQnXSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGV0YWNoZWQ0OTgoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgbWFrZUluaXRBdHRhY2hlZCgneXRkLWVuZ2FnZW1lbnQtcGFuZWwtc2VjdGlvbi1saXN0LXJlbmRlcmVyJyk7CiAgICAgIH0sCgogICAgICAneXRkLWVuZ2FnZW1lbnQtcGFuZWwtc2VjdGlvbi1saXN0LXJlbmRlcmVyOjpiaW5kVGFyZ2V0JzogKGhvc3RFbGVtZW50KSA9PiB7CgoKICAgICAgICBpZiAoaG9zdEVsZW1lbnQubWF0Y2hlcygnI3BhbmVscy55dGQtd2F0Y2gtZmxleHkgPiB5dGQtZW5nYWdlbWVudC1wYW5lbC1zZWN0aW9uLWxpc3QtcmVuZGVyZXJbdGFyZ2V0LWlkXVt2aXNpYmlsaXR5XScpKSB7CiAgICAgICAgICBob3N0RWxlbWVudC5zZXRBdHRyaWJ1dGUxMTEoJ3R5dC1lZ20tcGFuZWwnLCAnJyk7CiAgICAgICAgICBQcm9taXNlLnJlc29sdmUobG9ja1NldFsndXBkYXRlRWdtUGFuZWxzTG9jayddKS50aGVuKHVwZGF0ZUVnbVBhbmVscykuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICAgIGFvRWdtUGFuZWxzLm9ic2VydmUoaG9zdEVsZW1lbnQsIHsgYXR0cmlidXRlczogdHJ1ZSwgYXR0cmlidXRlRmlsdGVyOiBbJ3Zpc2liaWxpdHknLCAnaGlkZGVuJ10gfSk7CgogICAgICAgICAgLy8gY29uc29sZS5sb2coNTA5NCwgMiwgJ3l0ZC1lbmdhZ2VtZW50LXBhbmVsLXNlY3Rpb24tbGlzdC1yZW5kZXJlcjo6YXR0YWNoZWQnLCBob3N0RWxlbWVudCk7CiAgICAgICAgfQoKICAgICAgfSwKCgogICAgICAneXRkLWVuZ2FnZW1lbnQtcGFuZWwtc2VjdGlvbi1saXN0LXJlbmRlcmVyOjphdHRhY2hlZCc6IChob3N0RWxlbWVudCkgPT4gewoKICAgICAgICBpZiAoaW52YWxpZEZsZXh5UGFyZW50KGhvc3RFbGVtZW50KSkgcmV0dXJuOwoKICAgICAgICAvLyBpZiAoaW5QYWdlUmVhcnJhbmdlKSByZXR1cm47CgogICAgICAgIERFQlVHXzUwODQgJiYgY29uc29sZS5sb2coNTA4NCwgJ3l0ZC1lbmdhZ2VtZW50LXBhbmVsLXNlY3Rpb24tbGlzdC1yZW5kZXJlcjo6YXR0YWNoZWQnKTsKICAgICAgICBpZiAoaG9zdEVsZW1lbnQgaW5zdGFuY2VvZiBFbGVtZW50KSBob3N0RWxlbWVudFtfX2F0dGFjaGVkU3ltYm9sX19dID0gdHJ1ZTsKICAgICAgICBpZiAoIShob3N0RWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XykgfHwgIShob3N0RWxlbWVudC5jbGFzc0xpc3QubGVuZ3RoID4gMCkgfHwgaG9zdEVsZW1lbnQuY2xvc2VzdCgnbm9zY3JpcHQnKSkgcmV0dXJuOwogICAgICAgIGlmIChob3N0RWxlbWVudC5pc0Nvbm5lY3RlZCAhPT0gdHJ1ZSkgcmV0dXJuOwogICAgICAgIC8vIGlmIChob3N0RWxlbWVudC5fX2Nvbm5lY3RlZEZsZ19fICE9PSA0KSByZXR1cm47CiAgICAgICAgLy8gaG9zdEVsZW1lbnQuX19jb25uZWN0ZWRGbGdfXyA9IDU7CiAgICAgICAgLy8gY29uc29sZS5sb2coJ3l0ZC1lbmdhZ2VtZW50LXBhbmVsLXNlY3Rpb24tbGlzdC1yZW5kZXJlcjo6YXR0YWNoZWQnLCBob3N0RWxlbWVudCkKICAgICAgICAvLyBjb25zb2xlLmxvZyg1MDk0LCAxLCAneXRkLWVuZ2FnZW1lbnQtcGFuZWwtc2VjdGlvbi1saXN0LXJlbmRlcmVyOjphdHRhY2hlZCcsIGhvc3RFbGVtZW50KTsKCiAgICAgICAgaWYgKCFob3N0RWxlbWVudC5tYXRjaGVzKCcjcGFuZWxzLnl0ZC13YXRjaC1mbGV4eSA+IHl0ZC1lbmdhZ2VtZW50LXBhbmVsLXNlY3Rpb24tbGlzdC1yZW5kZXJlcicpKSByZXR1cm47CgoKICAgICAgICBpZiAoaG9zdEVsZW1lbnQuaGFzQXR0cmlidXRlMDAwKCd0YXJnZXQtaWQnKSAmJiBob3N0RWxlbWVudC5oYXNBdHRyaWJ1dGUwMDAoJ3Zpc2liaWxpdHknKSkgewoKICAgICAgICAgIFByb21pc2UucmVzb2x2ZShob3N0RWxlbWVudCkudGhlbihldmVudE1hcFsneXRkLWVuZ2FnZW1lbnQtcGFuZWwtc2VjdGlvbi1saXN0LXJlbmRlcmVyOjpiaW5kVGFyZ2V0J10pLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgfSBlbHNlIHsKCiAgICAgICAgICBob3N0RWxlbWVudC5zZXRBdHRyaWJ1dGUwMDAoJ3R5dC1lZ20tcGFuZWwtamNsbWQnLCAnJyk7CiAgICAgICAgICBtb0VnbVBhbmVsUmVhZHkub2JzZXJ2ZShob3N0RWxlbWVudCwgeyBhdHRyaWJ1dGVzOiB0cnVlLCBhdHRyaWJ1dGVGaWx0ZXI6IFsndmlzaWJpbGl0eScsICd0YXJnZXQtaWQnXSB9KTsKCiAgICAgICAgfQogICAgICB9LAoKICAgICAgJ3l0ZC1lbmdhZ2VtZW50LXBhbmVsLXNlY3Rpb24tbGlzdC1yZW5kZXJlcjo6ZGV0YWNoZWQnOiAoaG9zdEVsZW1lbnQpID0+IHsKICAgICAgICAvLyBpZiAoaW5QYWdlUmVhcnJhbmdlKSByZXR1cm47CgogICAgICAgIERFQlVHXzUwODQgJiYgY29uc29sZS5sb2coNTA4NCwgJ3l0ZC1lbmdhZ2VtZW50LXBhbmVsLXNlY3Rpb24tbGlzdC1yZW5kZXJlcjo6ZGV0YWNoZWQnKTsKICAgICAgICBpZiAoIShob3N0RWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XykgfHwgaG9zdEVsZW1lbnQuY2xvc2VzdCgnbm9zY3JpcHQnKSkgcmV0dXJuOwogICAgICAgIGlmIChob3N0RWxlbWVudC5pc0Nvbm5lY3RlZCAhPT0gZmFsc2UpIHJldHVybjsKICAgICAgICAvLyBpZiAoaG9zdEVsZW1lbnQuX19jb25uZWN0ZWRGbGdfXyAhPT0gOCkgcmV0dXJuOwogICAgICAgIC8vIGhvc3RFbGVtZW50Ll9fY29ubmVjdGVkRmxnX18gPSA5OwogICAgICAgIGlmIChob3N0RWxlbWVudC5oYXNBdHRyaWJ1dGUwMDAoJ3R5dC1lZ20tcGFuZWwnKSkgewogICAgICAgICAgaG9zdEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlMDAwKCd0eXQtZWdtLXBhbmVsJyk7CiAgICAgICAgICBQcm9taXNlLnJlc29sdmUobG9ja1NldFsndXBkYXRlRWdtUGFuZWxzTG9jayddKS50aGVuKHVwZGF0ZUVnbVBhbmVscykuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICB9IGVsc2UgaWYgKGhvc3RFbGVtZW50Lmhhc0F0dHJpYnV0ZTAwMCgndHl0LWVnbS1wYW5lbC1qY2xtZCcpKSB7CiAgICAgICAgICBob3N0RWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUwMDAoJ3R5dC1lZ20tcGFuZWwtamNsbWQnKTsKICAgICAgICAgIG1vRWdtUGFuZWxSZWFkeUNsZWFyRm4oKTsKICAgICAgICB9CiAgICAgIH0sCgogICAgICAneXRkLXdhdGNoLW1ldGFkYXRhOjpkZWZpbmVkJzogKGNQcm90bykgPT4gewoKICAgICAgICBpZiAoIWNQcm90by5hdHRhY2hlZDQ5OCAmJiB0eXBlb2YgY1Byb3RvLmF0dGFjaGVkID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICBjUHJvdG8uYXR0YWNoZWQ0OTggPSBjUHJvdG8uYXR0YWNoZWQ7CiAgICAgICAgICBjUHJvdG8uYXR0YWNoZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICghaW5QYWdlUmVhcnJhbmdlKSBQcm9taXNlLnJlc29sdmUodGhpcy5ob3N0RWxlbWVudCkudGhlbihldmVudE1hcFsneXRkLXdhdGNoLW1ldGFkYXRhOjphdHRhY2hlZCddKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICAgICAgICByZXR1cm4gdGhpcy5hdHRhY2hlZDQ5OCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIWNQcm90by5kZXRhY2hlZDQ5OCAmJiB0eXBlb2YgY1Byb3RvLmRldGFjaGVkID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICBjUHJvdG8uZGV0YWNoZWQ0OTggPSBjUHJvdG8uZGV0YWNoZWQ7CiAgICAgICAgICBjUHJvdG8uZGV0YWNoZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICghaW5QYWdlUmVhcnJhbmdlKSBQcm9taXNlLnJlc29sdmUodGhpcy5ob3N0RWxlbWVudCkudGhlbihldmVudE1hcFsneXRkLXdhdGNoLW1ldGFkYXRhOjpkZXRhY2hlZCddKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICAgICAgICByZXR1cm4gdGhpcy5kZXRhY2hlZDQ5OCgpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgbWFrZUluaXRBdHRhY2hlZCgneXRkLXdhdGNoLW1ldGFkYXRhJyk7CiAgICAgIH0sCgoKCiAgICAgICd5dGQtd2F0Y2gtbWV0YWRhdGE6OmF0dGFjaGVkJzogKGhvc3RFbGVtZW50KSA9PiB7CgogICAgICAgIGlmIChpbnZhbGlkRmxleHlQYXJlbnQoaG9zdEVsZW1lbnQpKSByZXR1cm47CgogICAgICAgIC8vIGlmIChpblBhZ2VSZWFycmFuZ2UpIHJldHVybjsKCiAgICAgICAgREVCVUdfNTA4NCAmJiBjb25zb2xlLmxvZyg1MDg0LCAneXRkLXdhdGNoLW1ldGFkYXRhOjphdHRhY2hlZCcpOwogICAgICAgIGlmIChob3N0RWxlbWVudCBpbnN0YW5jZW9mIEVsZW1lbnQpIGhvc3RFbGVtZW50W19fYXR0YWNoZWRTeW1ib2xfX10gPSB0cnVlOwogICAgICAgIGlmICghKGhvc3RFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnRfKSB8fCAhKGhvc3RFbGVtZW50LmNsYXNzTGlzdC5sZW5ndGggPiAwKSB8fCBob3N0RWxlbWVudC5jbG9zZXN0KCdub3NjcmlwdCcpKSByZXR1cm47CiAgICAgICAgaWYgKGhvc3RFbGVtZW50LmlzQ29ubmVjdGVkICE9PSB0cnVlKSByZXR1cm47CiAgICAgICAgLy8gaWYgKGhvc3RFbGVtZW50Ll9fY29ubmVjdGVkRmxnX18gIT09IDQpIHJldHVybjsKICAgICAgICAvLyBob3N0RWxlbWVudC5fX2Nvbm5lY3RlZEZsZ19fID0gNTsKCiAgICAgICAgaWYgKHBsdWdpbi5mdWxsQ2hhbm5lbE5hbWVPbkhvdmVyLmFjdGl2YXRlZCkgcGx1Z2luLmZ1bGxDaGFubmVsTmFtZU9uSG92ZXIub25OYXZpZ2F0ZUZpbmlzaCgpOwogICAgICB9LAoKICAgICAgJ3l0ZC13YXRjaC1tZXRhZGF0YTo6ZGV0YWNoZWQnOiAoaG9zdEVsZW1lbnQpID0+IHsKICAgICAgICAvLyBpZiAoaW5QYWdlUmVhcnJhbmdlKSByZXR1cm47CgogICAgICAgIERFQlVHXzUwODQgJiYgY29uc29sZS5sb2coNTA4NCwgJ3l0ZC13YXRjaC1tZXRhZGF0YTo6ZGV0YWNoZWQnKTsKICAgICAgICBpZiAoIShob3N0RWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XykgfHwgaG9zdEVsZW1lbnQuY2xvc2VzdCgnbm9zY3JpcHQnKSkgcmV0dXJuOwogICAgICAgIGlmIChob3N0RWxlbWVudC5pc0Nvbm5lY3RlZCAhPT0gZmFsc2UpIHJldHVybjsKICAgICAgICAvLyBpZiAoaG9zdEVsZW1lbnQuX19jb25uZWN0ZWRGbGdfXyAhPT0gOCkgcmV0dXJuOwogICAgICAgIC8vIGhvc3RFbGVtZW50Ll9fY29ubmVjdGVkRmxnX18gPSA5OwoKICAgICAgfSwKCgoKICAgICAgJ3l0ZC1wbGF5bGlzdC1wYW5lbC1yZW5kZXJlcjo6ZGVmaW5lZCc6IChjUHJvdG8pID0+IHsKCiAgICAgICAgaWYgKCFjUHJvdG8uYXR0YWNoZWQ0OTggJiYgdHlwZW9mIGNQcm90by5hdHRhY2hlZCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgY1Byb3RvLmF0dGFjaGVkNDk4ID0gY1Byb3RvLmF0dGFjaGVkOwogICAgICAgICAgY1Byb3RvLmF0dGFjaGVkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIWluUGFnZVJlYXJyYW5nZSkgUHJvbWlzZS5yZXNvbHZlKHRoaXMuaG9zdEVsZW1lbnQpLnRoZW4oZXZlbnRNYXBbJ3l0ZC1wbGF5bGlzdC1wYW5lbC1yZW5kZXJlcjo6YXR0YWNoZWQnXSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXR0YWNoZWQ0OTgoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFjUHJvdG8uZGV0YWNoZWQ0OTggJiYgdHlwZW9mIGNQcm90by5kZXRhY2hlZCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgY1Byb3RvLmRldGFjaGVkNDk4ID0gY1Byb3RvLmRldGFjaGVkOwogICAgICAgICAgY1Byb3RvLmRldGFjaGVkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIWluUGFnZVJlYXJyYW5nZSkgUHJvbWlzZS5yZXNvbHZlKHRoaXMuaG9zdEVsZW1lbnQpLnRoZW4oZXZlbnRNYXBbJ3l0ZC1wbGF5bGlzdC1wYW5lbC1yZW5kZXJlcjo6ZGV0YWNoZWQnXSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGV0YWNoZWQ0OTgoKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIG1ha2VJbml0QXR0YWNoZWQoJ3l0ZC1wbGF5bGlzdC1wYW5lbC1yZW5kZXJlcicpOwogICAgICB9LAoKCgogICAgICAneXRkLXBsYXlsaXN0LXBhbmVsLXJlbmRlcmVyOjphdHRhY2hlZCc6IChob3N0RWxlbWVudCkgPT4gewoKICAgICAgICBpZiAoaW52YWxpZEZsZXh5UGFyZW50KGhvc3RFbGVtZW50KSkgcmV0dXJuOwoKICAgICAgICAvLyBpZiAoaW5QYWdlUmVhcnJhbmdlKSByZXR1cm47CgogICAgICAgIERFQlVHXzUwODQgJiYgY29uc29sZS5sb2coNTA4NCwgJ3l0ZC1wbGF5bGlzdC1wYW5lbC1yZW5kZXJlcjo6YXR0YWNoZWQnKTsKICAgICAgICBpZiAoaG9zdEVsZW1lbnQgaW5zdGFuY2VvZiBFbGVtZW50KSBob3N0RWxlbWVudFtfX2F0dGFjaGVkU3ltYm9sX19dID0gdHJ1ZTsKICAgICAgICBpZiAoIShob3N0RWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XykgfHwgIShob3N0RWxlbWVudC5jbGFzc0xpc3QubGVuZ3RoID4gMCkgfHwgaG9zdEVsZW1lbnQuY2xvc2VzdCgnbm9zY3JpcHQnKSkgcmV0dXJuOwogICAgICAgIGlmIChob3N0RWxlbWVudC5pc0Nvbm5lY3RlZCAhPT0gdHJ1ZSkgcmV0dXJuOwogICAgICAgIC8vIGlmIChob3N0RWxlbWVudC5fX2Nvbm5lY3RlZEZsZ19fICE9PSA0KSByZXR1cm47CiAgICAgICAgLy8gaG9zdEVsZW1lbnQuX19jb25uZWN0ZWRGbGdfXyA9IDU7CgogICAgICAgIGVsZW1lbnRzLnBsYXlsaXN0ID0gaG9zdEVsZW1lbnQ7CgogICAgICAgIGFvUGxheUxpc3Qub2JzZXJ2ZShob3N0RWxlbWVudCwgIHsgYXR0cmlidXRlczogdHJ1ZSwgYXR0cmlidXRlRmlsdGVyOiBbJ2hpZGRlbicsICdjb2xsYXBzZWQnLCAnYXR0ci0xeTZudSddIH0pOwogICAgICAgIGhvc3RFbGVtZW50LmluY0F0dHJpYnV0ZTExMSgnYXR0ci0xeTZudScpCgoKICAgICAgfSwKCiAgICAgICd5dGQtcGxheWxpc3QtcGFuZWwtcmVuZGVyZXI6OmRldGFjaGVkJzogKGhvc3RFbGVtZW50KSA9PiB7CiAgICAgICAgLy8gaWYgKGluUGFnZVJlYXJyYW5nZSkgcmV0dXJuOwoKICAgICAgICBERUJVR181MDg0ICYmIGNvbnNvbGUubG9nKDUwODQsICd5dGQtcGxheWxpc3QtcGFuZWwtcmVuZGVyZXI6OmRldGFjaGVkJyk7CiAgICAgICAgaWYgKCEoaG9zdEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudF8pIHx8IGhvc3RFbGVtZW50LmNsb3Nlc3QoJ25vc2NyaXB0JykpIHJldHVybjsKICAgICAgICBpZiAoaG9zdEVsZW1lbnQuaXNDb25uZWN0ZWQgIT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgLy8gaWYgKGhvc3RFbGVtZW50Ll9fY29ubmVjdGVkRmxnX18gIT09IDgpIHJldHVybjsKICAgICAgICAvLyBob3N0RWxlbWVudC5fX2Nvbm5lY3RlZEZsZ19fID0gOTsKCiAgICAgIH0sCgoKCgoKICAgICAgJ195dF9wbGF5ZXJQcm92aWRlZCc6ICgpID0+IHsKICAgICAgICBtTG9hZGVkLmZsYWcgfD0gNDsKICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlMTExKCd0YWJ2aWV3LWxvYWRlZCcsIG1Mb2FkZWQubWFrZVN0cmluZygpKTsKICAgICAgfSwKICAgICAgJ3JlbGF0ZWRFbGVtZW50UHJvdmlkZWQnOiAodGFyZ2V0KSA9PiB7CiAgICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCdbaGlkZGVuXScpKSByZXR1cm47CiAgICAgICAgZWxlbWVudHMucmVsYXRlZCA9IHRhcmdldDsKICAgICAgICBjb25zb2xlLmxvZygncmVsYXRlZEVsZW1lbnRQcm92aWRlZCcpCiAgICAgICAgdmlkZW9zRWxlbWVudFByb3ZpZGVkUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgIH0sCiAgICAgICdvbmNlSW5mb0V4cGFuZGVyRWxlbWVudFByb3ZpZGVkUHJvbWlzZWQnOiAoKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ2hpZGUtZGVmYXVsdC10ZXh0LWlubGluZS1leHBhbmRlcicpOwogICAgICAgIGNvbnN0IHl0ZEZsZXh5RWxtID0gZWxlbWVudHMuZmxleHk7CiAgICAgICAgaWYgKHl0ZEZsZXh5RWxtKSB7CiAgICAgICAgICB5dGRGbGV4eUVsbS5zZXRBdHRyaWJ1dGUxMTEoJ2hpZGUtZGVmYXVsdC10ZXh0LWlubGluZS1leHBhbmRlcicsICcnKTsKICAgICAgICB9CiAgICAgIH0sCgogICAgICAncmVmcmVzaFNlY29uZGFyeUlubmVyJzogKGxvY2tJZCkgPT4gewoKCiAgICAgICAgaWYgKGxvY2tHZXRbJ3JlZnJlc2hTZWNvbmRhcnlJbm5lckxvY2snXSAhPT0gbG9ja0lkKSByZXR1cm47CiAgICAgICAgLyoKICAgCiAgICAgICAgeXRkLXdhdGNoLWZsZXh5Om5vdChbcGFuZWxzLWJlc2lkZS1wbGF5ZXJdKTpub3QoW2ZpeGVkLXBhbmVsc10pICNwYW5lbHMtZnVsbC1ibGVlZC1jb250YWluZXIueXRkLXdhdGNoLWZsZXh5ewogICAgICAgICAgICBkaXNwbGF5OiBub25lO30KICAgCiAgI3BsYXllci1mdWxsLWJsZWVkLWNvbnRhaW5lci55dGQtd2F0Y2gtZmxleHl7CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgZmxleDogMTt9CiAgIAogICAgICAgICovCgogICAgICAgIGNvbnN0IHl0ZEZsZXh5RWxtID0gZWxlbWVudHMuZmxleHk7CiAgICAgICAgLy8gaWYoeXRkRmxleHlFbG0gJiYgeXRkRmxleHlFbG0ubWF0Y2hlcygneXRkLXdhdGNoLWZsZXh5W2ZpeGVkLXBhbmVsc11bdGhlYXRlcl0nKSl7CiAgICAgICAgLy8gICAvLyB5dGRGbGV4eUVsbS5maXhlZFBhbmVscyA9IHRydWU7CiAgICAgICAgLy8gICB5dGRGbGV4eUVsbS5yZW1vdmVBdHRyaWJ1dGUwMDAoJ2ZpeGVkLXBhbmVscycpOwogICAgICAgIC8vIH0KCiAgICAgICAgaWYgKHl0ZEZsZXh5RWxtICYmIHl0ZEZsZXh5RWxtLm1hdGNoZXMoJ3l0ZC13YXRjaC1mbGV4eVt0aGVhdGVyXVtmbGV4eV1bZnVsbC1ibGVlZC1wbGF5ZXJdOm5vdChbZnVsbC1ibGVlZC1uby1tYXgtd2lkdGgtY29sdW1uc10pJykpIHsKICAgICAgICAgIC8vIHl0ZEZsZXh5RWxtLmZ1bGxCbGVlZE5vTWF4V2lkdGhDb2x1bW5zID0gdHJ1ZTsKICAgICAgICAgIHl0ZEZsZXh5RWxtLnNldEF0dHJpYnV0ZTExMSgnZnVsbC1ibGVlZC1uby1tYXgtd2lkdGgtY29sdW1ucycsICcnKTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHJlbGF0ZWQgPSBlbGVtZW50cy5yZWxhdGVkOwogICAgICAgIGlmIChyZWxhdGVkICYmIHJlbGF0ZWQuaXNDb25uZWN0ZWQgJiYgIXJlbGF0ZWQuY2xvc2VzdCgnI3JpZ2h0LXRhYnMgI3RhYi12aWRlb3MnKSkgewogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RhYi12aWRlb3MnKS5hc3NpZ25DaGlsZHJlbjExMShudWxsLCByZWxhdGVkLCBudWxsKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgaW5mb0V4cGFuZGVyID0gZWxlbWVudHMuaW5mb0V4cGFuZGVyOwogICAgICAgIGlmIChpbmZvRXhwYW5kZXIgJiYgaW5mb0V4cGFuZGVyLmlzQ29ubmVjdGVkICYmICFpbmZvRXhwYW5kZXIuY2xvc2VzdCgnI3JpZ2h0LXRhYnMgI3RhYi1pbmZvJykpIHsKICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YWItaW5mbycpLmFzc2lnbkNoaWxkcmVuMTExKG51bGwsIGluZm9FeHBhbmRlciwgbnVsbCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIGlmIChpbmZvRXhwYW5kZXIgJiYgeXRkRmxleHlFbG0gJiYgc2hvdWxkRml4SW5mbykgewogICAgICAgICAgLy8gICBzaG91bGRGaXhJbmZvID0gZmFsc2U7CiAgICAgICAgICAvLyAgIFByb21pc2UucmVzb2x2ZShsb2NrU2V0WydpbmZvRml4TG9jayddKS50aGVuKGluZm9GaXgpLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgICAvLyB9CiAgICAgICAgfQoKICAgICAgICBjb25zdCBjb21tZW50c0FyZWEgPSBlbGVtZW50cy5jb21tZW50czsKICAgICAgICBpZiAoY29tbWVudHNBcmVhKSB7CiAgICAgICAgICBjb25zdCBpc0Nvbm5lY3RlZCA9IGNvbW1lbnRzQXJlYS5pc0Nvbm5lY3RlZDsKICAgICAgICAgIGlmIChpc0Nvbm5lY3RlZCAmJiAhY29tbWVudHNBcmVhLmNsb3Nlc3QoJyNyaWdodC10YWJzICN0YWItY29tbWVudHMnKSkgewogICAgICAgICAgICBjb25zdCB0YWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFiLWNvbW1lbnRzJyk7CiAgICAgICAgICAgIHRhYi5hc3NpZ25DaGlsZHJlbjExMShudWxsLCBjb21tZW50c0FyZWEsIG51bGwpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gaWYgKCFpc0Nvbm5lY3RlZCB8fCB0YWIuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YWItY29udGVudC1oaWRkZW4nKSkgcmVtb3ZlS2VlcENvbW1lbnRzU2Nyb2xsZXIoKTsKICAgICAgICAgIH0KICAgICAgICB9CgoKCgoKCgogICAgICB9LAoKICAgICAgJ3l0LW5hdmlnYXRlLWZpbmlzaCc6IChldnQpID0+IHsKCiAgICAgICAgY29uc3QgeXRkQXBwRWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigneXRkLXBhZ2UtbWFuYWdlciNwYWdlLW1hbmFnZXIuc3R5bGUtc2NvcGUueXRkLWFwcCcpOwogICAgICAgIGNvbnN0IHl0ZEFwcENudCA9IGluc3AoeXRkQXBwRWxtKTsKICAgICAgICBwYWdlVHlwZSA9IHl0ZEFwcENudCA/ICh5dGRBcHBDbnQuZGF0YSB8fCAwKS5wYWdlIDogbnVsbDsKCiAgICAgICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd5dGQtd2F0Y2gtZmxleHkgI3BsYXllcicpKSByZXR1cm47CiAgICAgICAgLy8gc2hvdWxkRml4SW5mbyA9IHRydWU7CiAgICAgICAgLy8gY29uc29sZS5sb2coJ3l0LW5hdmlnYXRlLWZpbmlzaCcpCiAgICAgICAgY29uc3QgZmxleHlBcnIgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgneXRkLXdhdGNoLWZsZXh5JyldLmZpbHRlcihlID0+ICFlLmNsb3Nlc3QoJ1toaWRkZW5dJykgJiYgZS5xdWVyeVNlbGVjdG9yKCcjcGxheWVyJykpOwogICAgICAgIGlmIChmbGV4eUFyci5sZW5ndGggPT09IDEpIHsKICAgICAgICAgIC8vIGNvbnN0IGxvY2tJZCA9IGxvY2tTZXRbJ3l0LW5hdmlnYXRlLWZpbmlzaC12aWRlb3MnXTsKICAgICAgICAgIGVsZW1lbnRzLmZsZXh5ID0gZmxleHlBcnJbMF07CiAgICAgICAgICBpZiAoaXNSaWdodFRhYnNJbnNlcnRlZCkgewogICAgICAgICAgICBQcm9taXNlLnJlc29sdmUobG9ja1NldFsncmVmcmVzaFNlY29uZGFyeUlubmVyTG9jayddKS50aGVuKGV2ZW50TWFwWydyZWZyZXNoU2Vjb25kYXJ5SW5uZXInXSkuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKGxvY2tTZXRbJ3JlbW92ZUtlZXBDb21tZW50c1Njcm9sbGVyTG9jayddKS50aGVuKHJlbW92ZUtlZXBDb21tZW50c1Njcm9sbGVyKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmF2aWdhdGVGaW5pc2hlZFByb21pc2UucmVzb2x2ZSgpOwogICAgICAgICAgICBpZiAocGx1Z2luLm1pbmlicm93c2VyLnRvVXNlKSBwbHVnaW4ubWluaWJyb3dzZXIuYWN0aXZhdGUoKTsKICAgICAgICAgICAgaWYgKHBsdWdpbi5hdXRvRXhwYW5kSW5mb0Rlc2MudG9Vc2UpIHBsdWdpbi5hdXRvRXhwYW5kSW5mb0Rlc2MuYWN0aXZhdGUoKTsKICAgICAgICAgICAgaWYgKHBsdWdpbi5mdWxsQ2hhbm5lbE5hbWVPbkhvdmVyLnRvVXNlKSBwbHVnaW4uZnVsbENoYW5uZWxOYW1lT25Ib3Zlci5hY3RpdmF0ZSgpOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgY2hhdCA9IGVsZW1lbnRzLmNoYXQ7CiAgICAgICAgICBpZiAoY2hhdCBpbnN0YW5jZW9mIEVsZW1lbnQpIHsKICAgICAgICAgICAgY2hhdC5zZXRBdHRyaWJ1dGUxMTEoJ3R5dC1hY3RpdmUtY2hhdC1mcmFtZScsICdDRicpOyAvLyBjaGF0IGFuZCBmbGV4eSByZWFkeQogICAgICAgICAgfQogICAgICAgICAgY29uc3QgaW5mb0V4cGFuZGVyID0gZWxlbWVudHMuaW5mb0V4cGFuZGVyOwogICAgICAgICAgaWYgKGluZm9FeHBhbmRlciAmJiBpbmZvRXhwYW5kZXIuY2xvc2VzdCgnI3JpZ2h0LXRhYnMnKSl7CiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZShsb2NrU2V0WydpbmZvRml4TG9jayddKS50aGVuKGluZm9GaXgpLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgICB9CiAgICAgICAgICBQcm9taXNlLnJlc29sdmUobG9ja1NldFsnbGF5b3V0Rml4TG9jayddKS50aGVuKGxheW91dEZpeCk7CiAgICAgICAgICBpZiAocGx1Z2luLmZ1bGxDaGFubmVsTmFtZU9uSG92ZXIuYWN0aXZhdGVkKSBwbHVnaW4uZnVsbENoYW5uZWxOYW1lT25Ib3Zlci5vbk5hdmlnYXRlRmluaXNoKCk7CiAgICAgICAgfQogICAgICB9LAoKICAgICAgJ29uY2VJbnNlcnRSaWdodFRhYnMnOiAoKSA9PiB7CgoKICAgICAgICAvLyBpZihsb2NrSWQgIT09IGxvY2tHZXRbJ3l0LW5hdmlnYXRlLWZpbmlzaC12aWRlb3MnXSkgcmV0dXJuOwogICAgICAgIGNvbnN0IHJlbGF0ZWQgPSBlbGVtZW50cy5yZWxhdGVkOwogICAgICAgIGxldCByaWdodFRhYnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmlnaHQtdGFicycpOwogICAgICAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JpZ2h0LXRhYnMnKSAmJiByZWxhdGVkKSB7CiAgICAgICAgICBnZXRMYW5nRm9yUGFnZSgpOwogICAgICAgICAgbGV0IGRvY1RtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7CiAgICAgICAgICBkb2NUbXAuaW5uZXJIVE1MID0gY3JlYXRlSFRNTChnZXRUYWJzSFRNTCgpKTsKICAgICAgICAgIGxldCBuZXdFbG0gPSBkb2NUbXAuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDsKICAgICAgICAgIGlmIChuZXdFbG0gIT09IG51bGwpIHsKICAgICAgICAgICAgaW5QYWdlUmVhcnJhbmdlID0gdHJ1ZTsKICAgICAgICAgICAgcmVsYXRlZC5wYXJlbnROb2RlLmluc2VydEJlZm9yZTAwMChuZXdFbG0sIHJlbGF0ZWQpOwogICAgICAgICAgICBpblBhZ2VSZWFycmFuZ2UgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIHJpZ2h0VGFicyA9IG5ld0VsbTsKICAgICAgICAgIHJpZ2h0VGFicy5xdWVyeVNlbGVjdG9yKCdbdHl0LXRhYi1jb250ZW50PSIjdGFiLWNvbW1lbnRzIl0nKS5jbGFzc0xpc3QuYWRkKCd0YWItYnRuLWhpZGRlbicpOwoKICAgICAgICAgIGNvbnN0IHNlY29uZGFyeVdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWNvbmRhcnktd3JhcHBlcicpOwogICAgICAgICAgY29uc3Qgc2Vjb25kYXJ5SW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Vjb25kYXJ5LWlubmVyLnN0eWxlLXNjb3BlLnl0ZC13YXRjaC1mbGV4eScpOwogICAgICAgICAgCiAgICAgICAgICBpblBhZ2VSZWFycmFuZ2UgPSB0cnVlOwogICAgICAgICAgc2Vjb25kYXJ5V3JhcHBlci5yZXBsYWNlQ2hpbGRyZW4wMDAoLi4uc2Vjb25kYXJ5SW5uZXIuY2hpbGROb2Rlcyk7CiAgICAgICAgICBzZWNvbmRhcnlJbm5lci5pbnNlcnRCZWZvcmUwMDAoc2Vjb25kYXJ5V3JhcHBlciwgc2Vjb25kYXJ5SW5uZXIuZmlyc3RDaGlsZCk7CiAgICAgICAgICBpblBhZ2VSZWFycmFuZ2UgPSBmYWxzZTsKCiAgICAgICAgICByaWdodFRhYnMucXVlcnlTZWxlY3RvcignI21hdGVyaWFsLXRhYnMnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50TWFwWyd0YWJzLWJ0bi1jbGljayddLCB0cnVlKQoKICAgICAgICAgIGluUGFnZVJlYXJyYW5nZSA9IHRydWU7CiAgICAgICAgICBpZiAoIXJpZ2h0VGFicy5jbG9zZXN0KCdzZWNvbmRhcnktd3JhcHBlcicpKSBzZWNvbmRhcnlXcmFwcGVyLmFwcGVuZENoaWxkMDAwKHJpZ2h0VGFicyk7CiAgICAgICAgICBpblBhZ2VSZWFycmFuZ2UgPSBmYWxzZTsKCiAgICAgICAgfQogICAgICAgIGlmIChyaWdodFRhYnMpIHsKICAgICAgICAgIGlzUmlnaHRUYWJzSW5zZXJ0ZWQgPSB0cnVlOwogICAgICAgICAgY29uc3QgaW9UYWJCdG5zID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzKSA9PiB7CiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykgewogICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBlbnRyeS5ib3VuZGluZ0NsaWVudFJlY3Q7CiAgICAgICAgICAgICAgZW50cnkudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ3RhYi1idG4tdmlzaWJsZScsIHJlY3Qud2lkdGggJiYgcmVjdC5oZWlnaHQpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIHsgcm9vdE1hcmdpbjogJzBweCcgfSk7CiAgICAgICAgICBmb3IgKGNvbnN0IGJ0biBvZiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiLWJ0blt0eXQtdGFiLWNvbnRlbnRdJykpIHsKICAgICAgICAgICAgaW9UYWJCdG5zLm9ic2VydmUoYnRuKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghcmVsYXRlZC5jbG9zZXN0KCcjcmlnaHQtdGFicycpKSB7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0YWItdmlkZW9zJykuYXNzaWduQ2hpbGRyZW4xMTEobnVsbCwgcmVsYXRlZCwgbnVsbCk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBpbmZvRXhwYW5kZXIgPSBlbGVtZW50cy5pbmZvRXhwYW5kZXI7CiAgICAgICAgICBpZiAoaW5mb0V4cGFuZGVyICYmICFpbmZvRXhwYW5kZXIuY2xvc2VzdCgnI3JpZ2h0LXRhYnMnKSkgewogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFiLWluZm8nKS5hc3NpZ25DaGlsZHJlbjExMShudWxsLCBpbmZvRXhwYW5kZXIsIG51bGwpOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgY29tbWVudHNBcmVhID0gZWxlbWVudHMuY29tbWVudHM7CiAgICAgICAgICBpZiAoY29tbWVudHNBcmVhICYmICFjb21tZW50c0FyZWEuY2xvc2VzdCgnI3JpZ2h0LXRhYnMnKSkgewogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFiLWNvbW1lbnRzJykuYXNzaWduQ2hpbGRyZW4xMTEobnVsbCwgY29tbWVudHNBcmVhLCBudWxsKTsKICAgICAgICAgIH0KICAgICAgICAgIHJpZ2h0VGFic1Byb3ZpZGVkUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgICAgICByb1JpZ2h0VGFicy5kaXNjb25uZWN0KCk7CiAgICAgICAgICByb1JpZ2h0VGFicy5vYnNlcnZlKHJpZ2h0VGFicyk7CiAgICAgICAgICBjb25zdCB5dGRGbGV4eUVsbSA9IGVsZW1lbnRzLmZsZXh5OwogICAgICAgICAgY29uc3QgYW9GbGV4eSA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGV2ZW50TWFwWydhb0ZsZXh5Rm4nXSk7CiAgICAgICAgICBhb0ZsZXh5Lm9ic2VydmUoeXRkRmxleHlFbG0sIHsgYXR0cmlidXRlczogdHJ1ZSB9KTsKICAgICAgICAgIC8vIFByb21pc2UucmVzb2x2ZShsb2NrU2V0Wyd0YWJzU3RhdHVzQ29ycmVjdGlvbkxvY2snXSkudGhlbihldmVudE1hcFsndGFic1N0YXR1c0NvcnJlY3Rpb24nXSkuY2F0Y2goY29uc29sZS53YXJuKTsKCiAgICAgICAgICBQcm9taXNlLnJlc29sdmUobG9ja1NldFsnZml4SW5pdGlhbFRhYlN0YXRlTG9jayddKS50aGVuKGV2ZW50TWFwWydmaXhJbml0aWFsVGFiU3RhdGVGbiddKS5jYXRjaChjb25zb2xlLndhcm4pOwoKICAgICAgICAgIHl0ZEZsZXh5RWxtLmluY0F0dHJpYnV0ZTExMSgnYXR0ci03cWxzeScpOyAvLyB0YWJzU3RhdHVzQ29ycmVjdGlvbkxvY2sgYW5kIHZpZGVvLWlkCgoKICAgICAgICAgIAogICAgICAgIH0KCiAgICAgIH0sCgogICAgICAnYW9GbGV4eUZuJzogKCkgPT4gewoKICAgICAgICBQcm9taXNlLnJlc29sdmUobG9ja1NldFsnY2hlY2tDb21tZW50c1Nob3VsZEJlSGlkZGVuTG9jayddKS50aGVuKGV2ZW50TWFwWydjaGVja0NvbW1lbnRzU2hvdWxkQmVIaWRkZW4nXSkuY2F0Y2goY29uc29sZS53YXJuKTsKCiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKGxvY2tTZXRbJ3JlZnJlc2hTZWNvbmRhcnlJbm5lckxvY2snXSkudGhlbihldmVudE1hcFsncmVmcmVzaFNlY29uZGFyeUlubmVyJ10pLmNhdGNoKGNvbnNvbGUud2Fybik7CgogICAgICAgIFByb21pc2UucmVzb2x2ZShsb2NrU2V0Wyd0YWJzU3RhdHVzQ29ycmVjdGlvbkxvY2snXSkudGhlbihldmVudE1hcFsndGFic1N0YXR1c0NvcnJlY3Rpb24nXSkuY2F0Y2goY29uc29sZS53YXJuKTsKCiAgICAgICAgY29uc3QgdmlkZW9JZCA9IGdldEN1cnJlbnRWaWRlb0lkKCk7CiAgICAgICAgaWYgKHZpZGVvSWQgIT09IHRtcExhc3RWaWRlb0lkKSB7CiAgICAgICAgICB0bXBMYXN0VmlkZW9JZCA9IHZpZGVvSWQ7CiAgICAgICAgICBQcm9taXNlLnJlc29sdmUobG9ja1NldFsndXBkYXRlT25WaWRlb0lkQ2hhbmdlZExvY2snXSkudGhlbihldmVudE1hcFsndXBkYXRlT25WaWRlb0lkQ2hhbmdlZCddKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICAgIH0KCiAgICAgIH0sCgogICAgICAndHdvQ29sdW1uQ2hhbmdlZDEwJzogKGxvY2tJZCkgPT4gewoKICAgICAgICBpZiAobG9ja0lkICE9PSBsb2NrR2V0Wyd0d29Db2x1bW5DaGFuZ2VkMTBMb2NrJ10pIHJldHVybjsKICAgICAgICBmb3IgKGNvbnN0IGNvbnRpbnVhdGlvbiBvZiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjdGFiLXZpZGVvcyB5dGQtd2F0Y2gtbmV4dC1zZWNvbmRhcnktcmVzdWx0cy1yZW5kZXJlciB5dGQtY29udGludWF0aW9uLWl0ZW0tcmVuZGVyZXInKSkgewogICAgICAgICAgaWYgKGNvbnRpbnVhdGlvbi5jbG9zZXN0KCdbaGlkZGVuXScpKSBjb250aW51ZTsKICAgICAgICAgIGNvbnN0IGNudCA9IGluc3AoY29udGludWF0aW9uKTsKICAgICAgICAgIGlmICh0eXBlb2YgY250LnNob3dCdXR0b24gPT09ICdib29sZWFuJykgewogICAgICAgICAgICBpZiAoY250LnNob3dCdXR0b24gPT09IGZhbHNlKSBjb250aW51ZTsKICAgICAgICAgICAgY250LnNob3dCdXR0b24gPSBmYWxzZTsKICAgICAgICAgICAgY29uc3QgYmVoYXZpb3IgPSAoY250Lnl0UmVuZGVyZXJCZWhhdmlvciB8fCBjbnQpOwogICAgICAgICAgICBpZiAodHlwZW9mIGJlaGF2aW9yLmludmFsaWRhdGUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICBiZWhhdmlvci5pbnZhbGlkYXRlKCExKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgIH0sCgogICAgICAndGFic1N0YXR1c0NvcnJlY3Rpb24nOiAobG9ja0lkKSA9PiB7CiAgICAgICAgaWYgKGxvY2tJZCAhPT0gbG9ja0dldFsndGFic1N0YXR1c0NvcnJlY3Rpb25Mb2NrJ10pIHJldHVybjsKICAgICAgICBjb25zdCB5dGRGbGV4eUVsbSA9IGVsZW1lbnRzLmZsZXh5OwogICAgICAgIGlmICgheXRkRmxleHlFbG0pIHJldHVybjsKICAgICAgICBjb25zdCBwID0gdGFiQVN0YXR1czsKICAgICAgICBjb25zdCBxID0gY2FsY3VsYXRpb25GbihwLCAxIHwgMiB8IDQgfCA4IHwgMTYgfCAzMiB8IDY0IHwgMTI4KTsKCiAgICAgICAgbGV0IHJlc2V0Rm9yUGFuZWxEaXNhcHBlYXJlZCA9IGZhbHNlOwogICAgICAgIGlmIChwICE9PSBxKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygzODgsIHAsIHEpCiAgICAgICAgICBsZXQgYWN0aW9uZWQgPSBmYWxzZTsKICAgICAgICAgIGlmICgocCAmIDEyOCkgPT09IDAgJiYgKHEgJiAxMjgpID09PSAxMjgpIHsKICAgICAgICAgICAgbGFzdFBhbmVsID0gJ3BsYXlsaXN0JwogICAgICAgICAgfSBlbHNlIGlmICgocCAmIDgpID09PSAwICYmIChxICYgOCkgPT09IDgpIHsKICAgICAgICAgICAgbGFzdFBhbmVsID0gJ2NoYXQnCiAgICAgICAgICB9IGVsc2UgaWYgKCgoKHAgJiA0KSA9PSA0ICYmIChxICYgKDQgfCA4KSkgPT0gKDAgfCAwKSkgfHwgKChwICYgOCkgPT0gOCAmJiAocSAmICg0IHwgOCkpID09PSAoMCB8IDApKSkgJiYgbGFzdFBhbmVsID09PSAnY2hhdCcpIHsKICAgICAgICAgICAgLy8gMjQgLT4gMTYgPSAtODsgJ2QnCiAgICAgICAgICAgIGxhc3RQYW5lbCA9IChsYXN0VGFiIHx8ICcnKTsKICAgICAgICAgICAgcmVzZXRGb3JQYW5lbERpc2FwcGVhcmVkID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSBpZiAoKHAgJiAoNCB8IDgpKSA9PT0gOCAmJiAocSAmICg0IHwgOCkpID09PSA0ICYmIGxhc3RQYW5lbCA9PT0gJ2NoYXQnKSB7CiAgICAgICAgICAgIC8vIGNsaWNrIGNsb3NlCiAgICAgICAgICAgIGxhc3RQYW5lbCA9IChsYXN0VGFiIHx8ICcnKTsKICAgICAgICAgICAgcmVzZXRGb3JQYW5lbERpc2FwcGVhcmVkID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSBpZiAoKHAgJiAxMjgpID09PSAxMjggJiYgKHEgJiAxMjgpID09PSAwICYmIGxhc3RQYW5lbCA9PT0gJ3BsYXlsaXN0JykgewoKICAgICAgICAgICAgbGFzdFBhbmVsID0gKGxhc3RUYWIgfHwgJycpOwogICAgICAgICAgICByZXNldEZvclBhbmVsRGlzYXBwZWFyZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgdGFiQVN0YXR1cyA9IHE7CgogICAgICAgICAgbGV0IGJGaXhGb3JSZXNpemVkVGFiID0gZmFsc2U7CgogICAgICAgICAgaWYgKChxIF4gMikgPT09IDIgJiYgYkZpeEZvclJlc2l6ZWRUYWJMYXRlcikgewogICAgICAgICAgICBiRml4Rm9yUmVzaXplZFRhYiA9IHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKChwICYgMTYpID09PSAxNiAmIChxICYgMTYpID09PSAwKSB7CiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZShsb2NrU2V0Wyd0d29Db2x1bW5DaGFuZ2VkMTBMb2NrJ10pLnRoZW4oZXZlbnRNYXBbJ3R3b0NvbHVtbkNoYW5nZWQxMCddKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICgoKChwICYgMikgPT09IDIpIF4gKChxICYgMikgPT09IDIpKSAmJiAoKHEgJiAyKSA9PT0gMikpIHsKICAgICAgICAgICAgYkZpeEZvclJlc2l6ZWRUYWIgPSB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIHAtPnEgKzIKICAgICAgICAgIGlmICgocCAmIDIpID09PSAwICYmIChxICYgMikgPT09IDIgJiYgKHAgJiAxMjgpID09PSAxMjggJiYgKHEgJiAxMjgpID09PSAxMjgpIHsKICAgICAgICAgICAgbGFzdFBhbmVsID0gKGxhc3RUYWIgfHwgJycpOwogICAgICAgICAgICB5dEJ0bkNsb3NlUGxheWxpc3QoKTsKICAgICAgICAgICAgYWN0aW9uZWQgPSB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIHAtPnEgKzgKICAgICAgICAgIGlmICgocCAmICg4IHwgMTI4KSkgPT09ICgwIHwgMTI4KSAmJiAocSAmICg4IHwgMTI4KSkgPT09ICg4IHwgMTI4KSAmJiBsYXN0UGFuZWwgPT09ICdjaGF0JykgewogICAgICAgICAgICBsYXN0UGFuZWwgPSAobGFzdFRhYiB8fCAnJyk7CiAgICAgICAgICAgIHl0QnRuQ2xvc2VQbGF5bGlzdCgpOwogICAgICAgICAgICBhY3Rpb25lZCA9IHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gcC0+cSArMTI4CiAgICAgICAgICBpZiAoKHAgJiAoMiB8IDEyOCkpID09PSAoMiB8IDApICYmIChxICYgKDIgfCAxMjgpKSA9PT0gKDIgfCAxMjgpICYmIGxhc3RQYW5lbCA9PT0gJ3BsYXlsaXN0JykgewogICAgICAgICAgICBzd2l0Y2hUb1RhYihudWxsKTsKICAgICAgICAgICAgYWN0aW9uZWQgPSB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIHAtPnEgKzEyOAogICAgICAgICAgaWYgKChwICYgKDggfCAxMjgpKSA9PT0gKDggfCAwKSAmJiAocSAmICg4IHwgMTI4KSkgPT09ICg4IHwgMTI4KSAmJiBsYXN0UGFuZWwgPT09ICdwbGF5bGlzdCcpIHsKICAgICAgICAgICAgbGFzdFBhbmVsID0gKGxhc3RUYWIgfHwgJycpOwogICAgICAgICAgICB5dEJ0bkNvbGxhcHNlQ2hhdCgpOwogICAgICAgICAgICBhY3Rpb25lZCA9IHRydWU7CiAgICAgICAgICB9CgoKICAgICAgICAgIC8vIHAtPnEgKzEyOAogICAgICAgICAgaWYgKChwICYgKDEgfCAxNiB8IDEyOCkpID09ICgxIHwgMTYpICYmIChxICYgKDEgfCAxNiB8IDEyOCkpID09ICgxIHwgMTYgfCAxMjgpKSB7CiAgICAgICAgICAgIHl0QnRuQ2FuY2VsVGhlYXRlcigpOwogICAgICAgICAgICBhY3Rpb25lZCA9IHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gcC0+cSArMQogICAgICAgICAgaWYgKChwICYgKDEgfCAxNiB8IDEyOCkpID09ICgxNiB8IDEyOCkgJiYgKHEgJiAoMSB8IDE2IHwgMTI4KSkgPT0gKDEgfCAxNiB8IDEyOCkpIHsKICAgICAgICAgICAgbGFzdFBhbmVsID0gKGxhc3RUYWIgfHwgJycpOwogICAgICAgICAgICB5dEJ0bkNsb3NlUGxheWxpc3QoKTsKICAgICAgICAgICAgYWN0aW9uZWQgPSB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICgocSAmIDY0KSA9PT0gNjQpIHsKICAgICAgICAgICAgYWN0aW9uZWQgPSBmYWxzZTsKICAgICAgICAgIH0gZWxzZSBpZiAoKHAgJiA2NCkgPT0gNjQgJiYgKHEgJiA2NCkgPT09IDApIHsKICAgICAgICAgICAgLy8gcC0+cSAtNjQKCiAgICAgICAgICAgIGlmICgocSAmIDMyKSA9PT0gMzIpIHsKICAgICAgICAgICAgICB5dEJ0bkNsb3NlRW5nYWdlbWVudFBhbmVscygpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoKHEgJiAoMiB8IDgpKSA9PT0gKDIgfCA4KSkgewogICAgICAgICAgICAgIGlmIChsYXN0UGFuZWwgPT09ICdjaGF0JykgewoKICAgICAgICAgICAgICAgIHN3aXRjaFRvVGFiKG51bGwpOwogICAgICAgICAgICAgICAgYWN0aW9uZWQgPSB0cnVlOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAobGFzdFBhbmVsKSB7CiAgICAgICAgICAgICAgICB5dEJ0bkNvbGxhcHNlQ2hhdCgpOwogICAgICAgICAgICAgICAgYWN0aW9uZWQgPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgIH0gZWxzZSBpZiAoKHAgJiAoMSB8IDIgfCA4IHwgMTYgfCAzMikpID09PSAoMSB8IDAgfCAwIHwgMTYgfCAwKSAmJiAocSAmICgxIHwgMiB8IDggfCAxNiB8IDMyKSkgPT09ICgxIHwgMCB8IDggfCAxNiB8IDApKSB7CiAgICAgICAgICAgIC8vIHAtPnEgKzgKICAgICAgICAgICAgeXRCdG5DYW5jZWxUaGVhdGVyKCk7CiAgICAgICAgICAgIGFjdGlvbmVkID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSBpZiAoKHAgJiAoMSB8IDE2IHwgMzIpKSA9PT0gKDAgfCAxNiB8IDApICYmIChxICYgKDEgfCAxNiB8IDMyKSkgPT09ICgwIHwgMTYgfCAzMikgJiYgKHEgJiAoMiB8IDgpKSA+IDApIHsKICAgICAgICAgICAgLy8gcC0+cSArMzIKICAgICAgICAgICAgaWYgKHEgJiAyKSB7CiAgICAgICAgICAgICAgc3dpdGNoVG9UYWIobnVsbCk7CiAgICAgICAgICAgICAgYWN0aW9uZWQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChxICYgOCkgewogICAgICAgICAgICAgIHl0QnRuQ29sbGFwc2VDaGF0KCk7CiAgICAgICAgICAgICAgYWN0aW9uZWQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKChwICYgKDEgfCAxNiB8IDggfCAyKSkgPT09ICgxNiB8IDgpICYmIChxICYgKDEgfCAxNiB8IDggfCAyKSkgPT09ICgxNikgJiYgKHEgJiAxMjgpID09PSAwKSB7CiAgICAgICAgICAgIC8vIHAtPnEgLTgKICAgICAgICAgICAgaWYgKGxhc3RUYWIpIHsKICAgICAgICAgICAgICBzd2l0Y2hUb1RhYihsYXN0VGFiKQogICAgICAgICAgICAgIGFjdGlvbmVkID0gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgIH0gZWxzZSBpZiAoKHAgJiAxKSA9PT0gMCAmJiAocSAmIDEpID09PSAxKSB7CiAgICAgICAgICAgIC8vIHAtPnEgKzEKICAgICAgICAgICAgaWYgKChxICYgMzIpID09PSAzMikgewogICAgICAgICAgICAgIHl0QnRuQ2xvc2VFbmdhZ2VtZW50UGFuZWxzKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKChwICYgOSkgPT09IDggJiYgKHEgJiA5KSA9PT0gOSkgewogICAgICAgICAgICAgIHl0QnRuQ29sbGFwc2VDaGF0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3dpdGNoVG9UYWIobnVsbCkKICAgICAgICAgICAgYWN0aW9uZWQgPSB0cnVlOwoKICAgICAgICAgIH0gZWxzZSBpZiAoKHAgJiAzKSA9PT0gMSAmJiAocSAmIDMpID09PSAzKSB7CiAgICAgICAgICAgIC8vIHAtPnEgKzIKICAgICAgICAgICAgeXRCdG5DYW5jZWxUaGVhdGVyKCk7CiAgICAgICAgICAgIGFjdGlvbmVkID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSBpZiAoKHAgJiAxMCkgPT09IDIgJiYgKHEgJiAxMCkgPT09IDEwKSB7CiAgICAgICAgICAgIC8vIHAtPnEgKzgKICAgICAgICAgICAgc3dpdGNoVG9UYWIobnVsbCkKICAgICAgICAgICAgYWN0aW9uZWQgPSB0cnVlOwoKICAgICAgICAgIH0gZWxzZSBpZiAoKHAgJiAoOCB8IDMyKSkgPT09ICgwIHwgMzIpICYmIChxICYgKDggfCAzMikpID09PSAoOCB8IDMyKSkgewogICAgICAgICAgICAvLyBwLT5xICs4CiAgICAgICAgICAgIHl0QnRuQ2xvc2VFbmdhZ2VtZW50UGFuZWxzKCk7CiAgICAgICAgICAgIGFjdGlvbmVkID0gdHJ1ZTsKCgogICAgICAgICAgfSBlbHNlIGlmICgocCAmICgyIHwgMzIpKSA9PT0gKDAgfCAzMikgJiYgKHEgJiAoMiB8IDMyKSkgPT09ICgyIHwgMzIpKSB7CiAgICAgICAgICAgIC8vIHAtPnEgKzIKICAgICAgICAgICAgeXRCdG5DbG9zZUVuZ2FnZW1lbnRQYW5lbHMoKTsKICAgICAgICAgICAgYWN0aW9uZWQgPSB0cnVlOwoKICAgICAgICAgIH0gZWxzZSBpZiAoKHAgJiAoMiB8IDgpKSA9PT0gKDAgfCA4KSAmJiAocSAmICgyIHwgOCkpID09PSAoMiB8IDgpKSB7CiAgICAgICAgICAgIC8vIHAtPnEgKzIKICAgICAgICAgICAgeXRCdG5Db2xsYXBzZUNoYXQoKTsKICAgICAgICAgICAgYWN0aW9uZWQgPSB0cnVlOwogICAgICAgICAgICAvLyBpZiggbGFzdFBhbmVsICYmIChwICYgKDF8MTYpID09PSAxNikgICYmIChxICYgKDEgfCAxNiB8IDggfCAyKSkgPT09ICgxNikgKXsKICAgICAgICAgICAgLy8gICBzd2l0Y2hUb1RhYihsYXN0VGFiKQogICAgICAgICAgICAvLyAgIGFjdGlvbmVkID0gdHJ1ZTsKICAgICAgICAgICAgLy8gfQogICAgICAgICAgfSBlbHNlIGlmICgocCAmIDEpID09PSAxICYmIChxICYgKDEgfCAzMikpID09PSAoMCB8IDApKSB7CiAgICAgICAgICAgIC8vIHAtPnEgLTEKICAgICAgICAgICAgaWYgKGxhc3RQYW5lbCA9PT0gJ2NoYXQnKSB7CiAgICAgICAgICAgICAgeXRCdG5FeHBhbmRDaGF0KCkKICAgICAgICAgICAgICBhY3Rpb25lZCA9IHRydWU7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobGFzdFBhbmVsID09PSBsYXN0VGFiICYmIGxhc3RUYWIpIHsKICAgICAgICAgICAgICBzd2l0Y2hUb1RhYihsYXN0VGFiKQogICAgICAgICAgICAgIGFjdGlvbmVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKCiAgICAgICAgICAvLyAyNCAyMAogICAgICAgICAgLy8gOCAxNiAgIDQgMTYKCiAgICAgICAgICBpZiAoIWFjdGlvbmVkICYmIChxICYgMTI4KSA9PT0gMTI4KSB7CiAgICAgICAgICAgIGxhc3RQYW5lbCA9ICdwbGF5bGlzdCcKICAgICAgICAgICAgaWYgKChxICYgMikgPT09IDIpIHsKICAgICAgICAgICAgICBzd2l0Y2hUb1RhYihudWxsKQogICAgICAgICAgICAgIGFjdGlvbmVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmICgocCAmIDIpID09PSAyICYmIChxICYgKDIgfCAxMjgpKSA9PT0gKDAgfCAxMjgpKSB7CiAgICAgICAgICAgIC8vIHAtPnEgLTIKCiAgICAgICAgICB9IGVsc2UgaWYgKChwICYgOCkgPT09IDggJiYgKHEgJiAoOCB8IDEyOCkpID09PSAoMCB8IDEyOCkpIHsKICAgICAgICAgICAgLy8gcC0+cSAtOAoKICAgICAgICAgIH0gZWxzZSBpZiAoIWFjdGlvbmVkICYmIChwICYgKDEgfCAxNikpID09PSAxNiAmJiAocSAmICgxIHwgMTYgfCA4IHwgMiB8IDMyIHwgNjQpKSA9PT0gKDE2IHwgMCB8IDApKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKDM4OCwgJ2QnKQogICAgICAgICAgICBpZiAobGFzdFBhbmVsID09PSAnY2hhdCcpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygzODgsICdkMWMnKQogICAgICAgICAgICAgIHl0QnRuRXhwYW5kQ2hhdCgpCiAgICAgICAgICAgICAgYWN0aW9uZWQgPSB0cnVlOwoKICAgICAgICAgICAgfSBlbHNlIGlmIChsYXN0UGFuZWwgPT09ICdwbGF5bGlzdCcpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygzODgsICdkMXAnKQogICAgICAgICAgICAgIHl0QnRuT3BlblBsYXlsaXN0KCkKICAgICAgICAgICAgICBhY3Rpb25lZCA9IHRydWU7CgogICAgICAgICAgICB9IGVsc2UgaWYgKGxhc3RUYWIpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygzODgsICdkMnQnKQogICAgICAgICAgICAgIHN3aXRjaFRvVGFiKGxhc3RUYWIpCiAgICAgICAgICAgICAgYWN0aW9uZWQgPSB0cnVlOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJlc2V0Rm9yUGFuZWxEaXNhcHBlYXJlZCkgewogICAgICAgICAgICAgIC8vIGlmIGxhc3RUYWIgaXMgdW5kZWZpbmVkCiAgICAgICAgICAgICAgY29uc29sZS5sb2coMzg4LCAnZDJkJykKICAgICAgICAgICAgICBQcm9taXNlLnJlc29sdmUobG9ja1NldFsnZml4SW5pdGlhbFRhYlN0YXRlTG9jayddKS50aGVuKGV2ZW50TWFwWydmaXhJbml0aWFsVGFiU3RhdGVGbiddKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICAgICAgICAgIGFjdGlvbmVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKCiAgICAgICAgICBpZiAoYkZpeEZvclJlc2l6ZWRUYWIpIHsKICAgICAgICAgICAgYkZpeEZvclJlc2l6ZWRUYWJMYXRlciA9IGZhbHNlOwogICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoMCkudGhlbihldmVudE1hcFsnZml4Rm9yVGFiRGlzcGxheSddKS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICgoKHAgJiAxNikgPT09IDE2KSBeICgocSAmIDE2KSA9PT0gMTYpKSB7CiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZShsb2NrU2V0WydpbmZvRml4TG9jayddKS50aGVuKGluZm9GaXgpLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZShsb2NrU2V0WydyZW1vdmVLZWVwQ29tbWVudHNTY3JvbGxlckxvY2snXSkudGhlbihyZW1vdmVLZWVwQ29tbWVudHNTY3JvbGxlcikuY2F0Y2goY29uc29sZS53YXJuKTsKICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKGxvY2tTZXRbJ2xheW91dEZpeExvY2snXSkudGhlbihsYXlvdXRGaXgpLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgfSwKCiAgICAgICd1cGRhdGVPblZpZGVvSWRDaGFuZ2VkJzogKGxvY2tJZCkgPT4gewogICAgICAgIGlmIChsb2NrSWQgIT09IGxvY2tHZXRbJ3VwZGF0ZU9uVmlkZW9JZENoYW5nZWRMb2NrJ10pIHJldHVybjsKICAgICAgICBjb25zdCB2aWRlb0lkID0gdG1wTGFzdFZpZGVvSWQ7CiAgICAgICAgaWYgKCF2aWRlb0lkKSByZXR1cm47CiAgICAgICAgCiAgICAgICAgY29uc3QgYm9keVJlbmRlcmVyID0gZWxlbWVudHMuaW5mb0V4cGFuZGVyUmVuZGVyZXJCYWNrOwogICAgICAgIGNvbnN0IGJvZHlSZW5kZXJlck5ldyA9IGVsZW1lbnRzLmluZm9FeHBhbmRlclJlbmRlcmVyRnJvbnQ7CgogICAgICAgIGlmKGJvZHlSZW5kZXJlck5ldyAmJiBib2R5UmVuZGVyZXIpewoKICAgICAgICAgIGluc3AoYm9keVJlbmRlcmVyTmV3KS5kYXRhID0gaW5zcChib2R5UmVuZGVyZXIpLmRhdGE7CiAgICAgICAgICAvLyBpZiAoKGJvZHlSZW5kZXJlck5ldy5oYXNBdHRyaWJ1dGUoJ2hpZGRlbicpID8gMSA6IDApIF4gKGJvZHlSZW5kZXJlci5oYXNBdHRyaWJ1dGUoJ2hpZGRlbicpID8gMSA6IDApKSB7CiAgICAgICAgICAvLyAgIGlmIChib2R5UmVuZGVyZXIuaGFzQXR0cmlidXRlKCdoaWRkZW4nKSkgYm9keVJlbmRlcmVyTmV3LnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJycpOwogICAgICAgICAgLy8gICBlbHNlIGJvZHlSZW5kZXJlck5ldy5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpOwogICAgICAgICAgLy8gfQoKICAgICAgICB9CgoKICAgICAgICBQcm9taXNlLnJlc29sdmUobG9ja1NldFsnaW5mb0ZpeExvY2snXSkudGhlbihpbmZvRml4KS5jYXRjaChjb25zb2xlLndhcm4pOwogICAgICB9LAoKICAgICAgJ2ZpeEluaXRpYWxUYWJTdGF0ZUZuJzogYXN5bmMgKGxvY2tJZCkgPT4gewogICAgICAgIC8vIGNvbnNvbGUubG9nKCdmaXhJbml0aWFsVGFiU3RhdGVGbiAwYScpOwogICAgICAgIGlmIChsb2NrR2V0WydmaXhJbml0aWFsVGFiU3RhdGVMb2NrJ10gIT09IGxvY2tJZCkgcmV0dXJuOwogICAgICAgIC8vIGNvbnNvbGUubG9nKCdmaXhJbml0aWFsVGFiU3RhdGVGbiAwYicpOwogICAgICAgIGNvbnN0IGRlbGF5VGltZSA9IGZpeEluaXRpYWxUYWJTdGF0ZUsgPiAwID8gMjAwIDogMTsKICAgICAgICBhd2FpdCBkZWxheVBuKGRlbGF5VGltZSk7CiAgICAgICAgaWYgKGxvY2tHZXRbJ2ZpeEluaXRpYWxUYWJTdGF0ZUxvY2snXSAhPT0gbG9ja0lkKSByZXR1cm47CiAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZpeEluaXRpYWxUYWJTdGF0ZUZuIDBjJyk7CiAgICAgICAgY29uc3Qga1RhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1t0eXQtdGFiXScpOwogICAgICAgIGNvbnN0IHFUYWIgPSAoIWtUYWIgfHwga1RhYi5nZXRBdHRyaWJ1dGUoJ3R5dC10YWInKSA9PT0gJycpID8gY2hlY2tFbGVtZW50RXhpc3QoJ3l0ZC13YXRjaC1mbGV4eVtpcy10d28tY29sdW1uc19dJywgJ1toaWRkZW5dJykgOiBudWxsOwogICAgICAgIGlmIChjaGVja0VsZW1lbnRFeGlzdCgneXRkLXBsYXlsaXN0LXBhbmVsLXJlbmRlcmVyI3BsYXlsaXN0JywgJ1toaWRkZW5dLCBbY29sbGFwc2VkXScpKSB7CiAgICAgICAgICBERUJVR181MDg1ICYmIGNvbnNvbGUubG9nKCdmaXhJbml0aWFsVGFiU3RhdGVGbiAxcCcpOwogICAgICAgICAgc3dpdGNoVG9UYWIobnVsbCk7CiAgICAgICAgfSBlbHNlIGlmIChjaGVja0VsZW1lbnRFeGlzdCgneXRkLWxpdmUtY2hhdC1mcmFtZSNjaGF0JywgJ1toaWRkZW5dLCBbY29sbGFwc2VkXScpKSB7CiAgICAgICAgICBERUJVR181MDg1ICYmIGNvbnNvbGUubG9nKCdmaXhJbml0aWFsVGFiU3RhdGVGbiAxYScpOwogICAgICAgICAgc3dpdGNoVG9UYWIobnVsbCk7CiAgICAgICAgICBpZiAoY2hlY2tFbGVtZW50RXhpc3QoJ3l0ZC13YXRjaC1mbGV4eVt0aGVhdGVyXScsICdbaGlkZGVuXScpKSB7CiAgICAgICAgICAgIHl0QnRuQ29sbGFwc2VDaGF0KCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChxVGFiKSB7CiAgICAgICAgICBjb25zdCBoYXNUaGVhdGVyID0gcVRhYi5oYXNBdHRyaWJ1dGUoJ3RoZWF0ZXInKTsKICAgICAgICAgIGlmICghaGFzVGhlYXRlcikgewogICAgICAgICAgICBERUJVR181MDg1ICYmIGNvbnNvbGUubG9nKCdmaXhJbml0aWFsVGFiU3RhdGVGbiAxYicpOwogICAgICAgICAgICBjb25zdCBidG4wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhYi1idG4tdmlzaWJsZScpIC8vIG9yIGRlZmF1bHQgYnV0dG9uCiAgICAgICAgICAgIGlmIChidG4wKSB7CiAgICAgICAgICAgICAgc3dpdGNoVG9UYWIoYnRuMCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgc3dpdGNoVG9UYWIobnVsbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIERFQlVHXzUwODUgJiYgY29uc29sZS5sb2coJ2ZpeEluaXRpYWxUYWJTdGF0ZUZuIDFjJyk7CiAgICAgICAgICAgIHN3aXRjaFRvVGFiKG51bGwpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBERUJVR181MDg1ICYmIGNvbnNvbGUubG9nKCdmaXhJbml0aWFsVGFiU3RhdGVGbiAxeicpOwogICAgICAgIH0KICAgICAgICAvLyBjb25zb2xlLmxvZygnZml4SW5pdGlhbFRhYlN0YXRlRm4gMGQnKTsKICAgICAgICBmaXhJbml0aWFsVGFiU3RhdGVLKys7CiAgICAgIH0sCgogICAgICAndGFicy1idG4tY2xpY2snOiAoZXZ0KSA9PiB7CgogICAgICAgIGNvbnN0IHRhcmdldCA9IGV2dC50YXJnZXQ7CiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XyAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YWItYnRuJykgJiYgdGFyZ2V0Lmhhc0F0dHJpYnV0ZTAwMCgndHl0LXRhYi1jb250ZW50JykpIHsKCiAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgIGV2dC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTsKCgogICAgICAgICAgY29uc3QgYWN0aXZlTGluayA9IHRhcmdldDsKCiAgICAgICAgICBzd2l0Y2hUb1RhYihhY3RpdmVMaW5rKTsKCiAgICAgICAgfQoKICAgICAgfQoKICAgIH0KCiAgICBQcm9taXNlLmFsbChbdmlkZW9zRWxlbWVudFByb3ZpZGVkUHJvbWlzZSwgbmF2aWdhdGVGaW5pc2hlZFByb21pc2VdKS50aGVuKGV2ZW50TWFwWydvbmNlSW5zZXJ0UmlnaHRUYWJzJ10pLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICBQcm9taXNlLmFsbChbbmF2aWdhdGVGaW5pc2hlZFByb21pc2UsIGluZm9FeHBhbmRlckVsZW1lbnRQcm92aWRlZFByb21pc2VdKS50aGVuKGV2ZW50TWFwWydvbmNlSW5mb0V4cGFuZGVyRWxlbWVudFByb3ZpZGVkUHJvbWlzZWQnXSkuY2F0Y2goY29uc29sZS53YXJuKTsKCiAgICBjb25zdCBpc0N1c3RvbUVsZW1lbnRzUHJvdmlkZWQgPSB0eXBlb2YgY3VzdG9tRWxlbWVudHMgIT09ICJ1bmRlZmluZWQiICYmIHR5cGVvZiAoY3VzdG9tRWxlbWVudHMgfHwgMCkud2hlbkRlZmluZWQgPT09ICJmdW5jdGlvbiI7CgogICAgY29uc3QgcHJvbWlzZUZvckN1c3RvbVl0RWxlbWVudHNSZWFkeSA9IGlzQ3VzdG9tRWxlbWVudHNQcm92aWRlZCA/IFByb21pc2UucmVzb2x2ZSgwKSA6IG5ldyBQcm9taXNlKChjYWxsYmFjaykgPT4gewogICAgICBjb25zdCBFVkVOVF9LRVlfT05fUkVHSVNUUllfUkVBRFkgPSAieXRJLWNlLXJlZ2lzdHJ5LWNyZWF0ZWQiOwogICAgICBpZiAodHlwZW9mIGN1c3RvbUVsZW1lbnRzID09PSAndW5kZWZpbmVkJykgewogICAgICAgIGlmICghKCdfX0NFX3JlZ2lzdHJ5JyBpbiBkb2N1bWVudCkpIHsKICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJjb21wb25lbnRzL3BvbHlmaWxscy8KICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkb2N1bWVudCwgJ19fQ0VfcmVnaXN0cnknLCB7CiAgICAgICAgICAgIGdldCgpIHsKICAgICAgICAgICAgICAvLyByZXR1cm4gdW5kZWZpbmVkCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNldChudikgewogICAgICAgICAgICAgIGlmICh0eXBlb2YgbnYgPT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9fQ0VfcmVnaXN0cnk7CiAgICAgICAgICAgICAgICB0aGlzLl9fQ0VfcmVnaXN0cnkgPSBudjsKICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoRVZFTlRfS0VZX09OX1JFR0lTVFJZX1JFQURZKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9LAogICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICBsZXQgZXZlbnRIYW5kbGVyID0gKGV2dCkgPT4gewogICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihFVkVOVF9LRVlfT05fUkVHSVNUUllfUkVBRFksIGV2ZW50SGFuZGxlciwgZmFsc2UpOwogICAgICAgICAgY29uc3QgZiA9IGNhbGxiYWNrOwogICAgICAgICAgY2FsbGJhY2sgPSBudWxsOwogICAgICAgICAgZXZlbnRIYW5kbGVyID0gbnVsbDsKICAgICAgICAgIGYoKTsKICAgICAgICB9OwogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoRVZFTlRfS0VZX09OX1JFR0lTVFJZX1JFQURZLCBldmVudEhhbmRsZXIsIGZhbHNlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9KTsKCiAgICBjb25zdCBfcmV0cmlldmVDRSA9IGFzeW5jIChub2RlTmFtZSkgPT4gewogICAgICB0cnkgewogICAgICAgIGlzQ3VzdG9tRWxlbWVudHNQcm92aWRlZCB8fCAoYXdhaXQgcHJvbWlzZUZvckN1c3RvbVl0RWxlbWVudHNSZWFkeSk7CiAgICAgICAgYXdhaXQgY3VzdG9tRWxlbWVudHMud2hlbkRlZmluZWQobm9kZU5hbWUpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS53YXJuKGUpOwogICAgICB9CiAgICB9CgoKICAgIGNvbnN0IHJldHJpZXZlQ0UgPSBhc3luYyAobm9kZU5hbWUpID0+IHsKICAgICAgdHJ5IHsKICAgICAgICBpc0N1c3RvbUVsZW1lbnRzUHJvdmlkZWQgfHwgKGF3YWl0IHByb21pc2VGb3JDdXN0b21ZdEVsZW1lbnRzUmVhZHkpOwogICAgICAgIGF3YWl0IGN1c3RvbUVsZW1lbnRzLndoZW5EZWZpbmVkKG5vZGVOYW1lKTsKICAgICAgICBjb25zdCBkdW1teSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iobm9kZU5hbWUpIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpOwogICAgICAgIGNvbnN0IGNQcm90byA9IGluc3AoZHVtbXkpLmNvbnN0cnVjdG9yLnByb3RvdHlwZTsKICAgICAgICByZXR1cm4gY1Byb3RvOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS53YXJuKGUpOwogICAgICB9CiAgICB9CgoKICAgIGNvbnN0IG1vT3ZlcmFsbFJlcyA9IHsKICAgICAgX3l0X3BsYXllclByb3ZpZGVkOiAoKSA9PiAoKCh3aW5kb3cgfHwgMCkuX3l0X3BsYXllciB8fCAwKSB8fCAwKQogICAgfQoKICAgIGxldCBwcm9taXNlV2FpdE5leHQgPSBudWxsOwogICAgY29uc3QgbW9PdmVyYWxsID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4gewogICAgICBpZiAocHJvbWlzZVdhaXROZXh0KSB7CiAgICAgICAgcHJvbWlzZVdhaXROZXh0LnJlc29sdmUoKTsKICAgICAgICBwcm9taXNlV2FpdE5leHQgPSBudWxsOwogICAgICB9CgogICAgICBpZiAodHlwZW9mIG1vT3ZlcmFsbFJlcy5feXRfcGxheWVyUHJvdmlkZWQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBjb25zdCByID0gbW9PdmVyYWxsUmVzLl95dF9wbGF5ZXJQcm92aWRlZCgpOwogICAgICAgIGlmIChyKSB7CiAgICAgICAgICBtb092ZXJhbGxSZXMuX3l0X3BsYXllclByb3ZpZGVkID0gcjsKICAgICAgICAgIGV2ZW50TWFwLl95dF9wbGF5ZXJQcm92aWRlZCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CgogICAgbW9PdmVyYWxsLm9ic2VydmUoZG9jdW1lbnQsIHsgc3VidHJlZTogdHJ1ZSwgY2hpbGRMaXN0OiB0cnVlIH0pOwoKCiAgICBjb25zdCBtb0VnbVBhbmVsUmVhZHkgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihtdXRhdGlvbnMgPT4gewogICAgICBmb3IgKGNvbnN0IG11dGF0aW9uIG9mIG11dGF0aW9ucykgewogICAgICAgIGNvbnN0IHRhcmdldCA9IG11dGF0aW9uLnRhcmdldDsKICAgICAgICBpZiAoIXRhcmdldC5oYXNBdHRyaWJ1dGUwMDAoJ3R5dC1lZ20tcGFuZWwtamNsbWQnKSkgY29udGludWU7CiAgICAgICAgaWYgKHRhcmdldC5oYXNBdHRyaWJ1dGUwMDAoJ3RhcmdldC1pZCcpICYmIHRhcmdldC5oYXNBdHRyaWJ1dGUwMDAoJ3Zpc2liaWxpdHknKSkgewogICAgICAgICAgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZTAwMCgndHl0LWVnbS1wYW5lbC1qY2xtZCcpOwogICAgICAgICAgbW9FZ21QYW5lbFJlYWR5Q2xlYXJGbigpOwogICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHRhcmdldCkudGhlbihldmVudE1hcFsneXRkLWVuZ2FnZW1lbnQtcGFuZWwtc2VjdGlvbi1saXN0LXJlbmRlcmVyOjpiaW5kVGFyZ2V0J10pLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKCiAgICBjb25zdCBtb0VnbVBhbmVsUmVhZHlDbGVhckZuID0gKCkgPT4gewoKICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1t0eXQtZWdtLXBhbmVsLWpjbG1kXScpID09PSBudWxsKSB7CiAgICAgICAgbW9FZ21QYW5lbFJlYWR5LnRha2VSZWNvcmRzKCk7CiAgICAgICAgbW9FZ21QYW5lbFJlYWR5LmRpc2Nvbm5lY3QoKTsKICAgICAgfQoKICAgIH07CgogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigneXQtbmF2aWdhdGUtZmluaXNoJywgZXZlbnRNYXBbJ3l0LW5hdmlnYXRlLWZpbmlzaCddLCBmYWxzZSk7CgogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uc3RhcnQnLCBldnQgPT4gewogICAgICBjb25zdCBmID0gZXZlbnRNYXBbZXZ0LmFuaW1hdGlvbk5hbWVdOwogICAgICBpZiAodHlwZW9mIGYgPT09ICdmdW5jdGlvbicpIGYoZXZ0LnRhcmdldCk7CiAgICB9LCBjYXB0dXJlUGFzc2l2ZSk7CgogICAgLy8gY29uc29sZS5sb2coJ2hpMTIyJykKCgogICAgbUxvYWRlZC5mbGFnIHw9IDE7CiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlMTExKCd0YWJ2aWV3LWxvYWRlZCcsIG1Mb2FkZWQubWFrZVN0cmluZygpKTsKCiAgICBwcm9taXNlRm9yQ3VzdG9tWXRFbGVtZW50c1JlYWR5LnRoZW4oZXZlbnRNYXBbJ2NlSGFjayddKS5jYXRjaChjb25zb2xlLndhcm4pOwoKCiAgICBleGVjdXRpb25GaW5pc2hlZCA9IDE7CgoKCiAgfSBjYXRjaCAoZSkgewogICAgY29uc29sZS5sb2coJ2Vycm9yIDB4RjQ5MScpOwogICAgY29uc29sZS5lcnJvcihlKTsKICB9Cgp9Owpjb25zdCBzdHlsZXMgPSB7CiAgJ21haW4nOiBgCgoKICBAa2V5ZnJhbWVzIHJlbGF0ZWRFbGVtZW50UHJvdmlkZWQgewogICAgMCUgewogICAgICAgIGJhY2tncm91bmQtcG9zaXRpb24teDogM3B4OwogICAgfQogICAgMTAwJSB7CiAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbi14OiA0cHg7CiAgICB9CiAgfQogICAgCiAgaHRtbFt0YWJ2aWV3LWxvYWRlZD0iaWNwIl0gI3JlbGF0ZWQueXRkLXdhdGNoLWZsZXh5IHsKICAgIGFuaW1hdGlvbjogcmVsYXRlZEVsZW1lbnRQcm92aWRlZCAxbXMgbGluZWFyIDBzIDEgbm9ybWFsIGZvcndhcmRzOwogIH0KICAgIAogIGh0bWxbdGFidmlldy1sb2FkZWQ9ImljcCJdICNyaWdodC10YWJzICNyZWxhdGVkLnl0ZC13YXRjaC1mbGV4eSwKICBodG1sW3RhYnZpZXctbG9hZGVkPSJpY3AiXSBbaGlkZGVuXSAjcmVsYXRlZC55dGQtd2F0Y2gtZmxleHkgewogICAgYW5pbWF0aW9uOiBpbml0aWFsOwogIH0KCiAgCgoKICAKICAgIAogIGh0bWxbdGFidmlldy1sb2FkZWQ9ImljcCJdICNyaWdodC10YWJzIHl0ZC1leHBhbmRlciNleHBhbmRlciwKICBodG1sW3RhYnZpZXctbG9hZGVkPSJpY3AiXSBbaGlkZGVuXSB5dGQtZXhwYW5kZXIjZXhwYW5kZXIsCiAgaHRtbFt0YWJ2aWV3LWxvYWRlZD0iaWNwIl0geXRkLWNvbW1lbnRzIHl0ZC1leHBhbmRlciNleHBhbmRlcnsKICAgIGFuaW1hdGlvbjogaW5pdGlhbDsKICB9CgoKCgoKICAjc2Vjb25kYXJ5Lnl0ZC13YXRjaC1mbGV4eSB7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgfQoKICAjc2Vjb25kYXJ5LWlubmVyLnN0eWxlLXNjb3BlLnl0ZC13YXRjaC1mbGV4eSB7CiAgICBoZWlnaHQ6IDEwMCU7CiAgfQoKICAvKgogIHl0ZC13YXRjaC1mbGV4eVt0eXQtdGFiXj0iIyJdICNzZWNvbmRhcnktaW5uZXIuc3R5bGUtc2NvcGUueXRkLXdhdGNoLWZsZXh5OjphZnRlciB7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIGNvbnRlbnQ6Jyc7CiAgICBoZWlnaHQ6IDEwMHZoOwogIH0KICAgICovCgogIHNlY29uZGFyeS13cmFwcGVyIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgZmxleC13cmFwOiBub3dyYXA7CiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgcGFkZGluZzogMDsKICAgIG1hcmdpbjogMDsKICAgIGJvcmRlcjogMDsKICAgIGhlaWdodDogMTAwJTsKICAgIG1heC1oZWlnaHQ6IGNhbGMoMTAwdmggLSB2YXIoLS15dGQtdG9vbGJhci1oZWlnaHQsIDU2cHgpKTsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogMDsKICAgIHJpZ2h0OiAwOwogICAgbGVmdDogMDsKICAgIGNvbnRhaW46IHN0cmljdDsKICAgIHBhZGRpbmctdG9wOiB2YXIoLS15dGQtbWFyZ2luLTZ4KTsKICAgIHBhZGRpbmctcmlnaHQ6IHZhcigtLXl0ZC1tYXJnaW4tNngpOwogICAgcGFkZGluZy1ib3R0b206IHZhcigtLXl0ZC1tYXJnaW4tNngpOwogIH0KCgogICNyaWdodC10YWJzIHsKICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBwYWRkaW5nOiAwOwogICAgICBtYXJnaW46IDA7ICAgIAogICAgICBmbGV4LWdyb3c6IDE7CiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgfQoKICBbdHl0LXRhYj0iIl0gI3JpZ2h0LXRhYnN7CiAgICBmbGV4LWdyb3c6IDA7CiAgfQoKICBbdHl0LXRhYj0iIl0gI3JpZ2h0LXRhYnMgLnRhYi1jb250ZW50ewogICAgICBib3JkZXI6IDA7CiAgfQoKICAjcmlnaHQtdGFicyAudGFiLWNvbnRlbnQgewogICAgZmxleC1ncm93OiAxOwogIH0KCiAgeXRkLXdhdGNoLWZsZXh5W2hpZGUtZGVmYXVsdC10ZXh0LWlubGluZS1leHBhbmRlcl0gI3ByaW1hcnkuc3R5bGUtc2NvcGUueXRkLXdhdGNoLWZsZXh5IHl0ZC10ZXh0LWlubGluZS1leHBhbmRlciB7CiAgICBkaXNwbGF5OiBub25lOwogIH0KCgogIHl0ZC13YXRjaC1mbGV4eTpub3QoW2tlZXAtY29tbWVudHMtc2Nyb2xsZXJdKSAjdGFiLWNvbW1lbnRzLnRhYi1jb250ZW50LWhpZGRlbiB7CiAgICAtLWNvbW1lbnQtcHJlLWxvYWQtc2l6aW5nOiA5MHB4OwogICAgdmlzaWJpbGl0eTogY29sbGFwc2U7CiAgICB6LWluZGV4OiAtMTsKICAgIHBvc2l0aW9uOiBmaXhlZCAhaW1wb3J0YW50OwogICAgbGVmdDogMnB4OwogICAgdG9wOiAycHg7CiAgICB3aWR0aDogdmFyKC0tY29tbWVudC1wcmUtbG9hZC1zaXppbmcpICFpbXBvcnRhbnQ7CiAgICBoZWlnaHQ6IHZhcigtLWNvbW1lbnQtcHJlLWxvYWQtc2l6aW5nKSAhaW1wb3J0YW50OwogICAgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsKICAgIHBvaW50ZXItZXZlbnRzOiBub25lICFpbXBvcnRhbnQ7CiAgICBvdmVyZmxvdzpoaWRkZW47CiAgICBjb250YWluOnN0cmljdDsKICAgIGJvcmRlcjogMDsKICAgIG1hcmdpbjogMDsKICAgIHBhZGRpbmc6IDA7CiAgfQoKICAvKgogIHl0ZC13YXRjaC1mbGV4eTpub3QoW2tlZXAtY29tbWVudHMtc2Nyb2xsZXJdKSAjdGFiLWNvbW1lbnRzLnRhYi1jb250ZW50LWhpZGRlbiB5dGQtY29tbWVudHMjY29tbWVudHMgPiAqIHsKICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsKICB9CiAgICAqLwoKICB5dGQtd2F0Y2gtZmxleHk6bm90KFtrZWVwLWNvbW1lbnRzLXNjcm9sbGVyXSkgI3RhYi1jb21tZW50cy50YWItY29udGVudC1oaWRkZW4geXRkLWNvbW1lbnRzI2NvbW1lbnRzID4geXRkLWl0ZW0tc2VjdGlvbi1yZW5kZXJlciNzZWN0aW9ucyB7CiAgICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OwogICAgb3ZlcmZsb3c6aGlkZGVuOwogICAgaGVpZ2h0OiB2YXIoLS1jb21tZW50LXByZS1sb2FkLXNpemluZyk7CiAgICB3aWR0aDogdmFyKC0tY29tbWVudC1wcmUtbG9hZC1zaXppbmcpOwogICAgY29udGFpbjpzdHJpY3Q7CiAgICBib3JkZXI6IDA7CiAgICBtYXJnaW46IDA7CiAgICBwYWRkaW5nOiAwOwogIH0KCiAgLyoKICB5dGQtd2F0Y2gtZmxleHk6bm90KFtrZWVwLWNvbW1lbnRzLXNjcm9sbGVyXSkgI3RhYi1jb21tZW50cy50YWItY29udGVudC1oaWRkZW4geXRkLWNvbW1lbnRzI2NvbW1lbnRzID4geXRkLWl0ZW0tc2VjdGlvbi1yZW5kZXJlciNzZWN0aW9ucyA+ICogewogICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OwogIH0KCiAgKi8KIAogIHl0ZC13YXRjaC1mbGV4eTpub3QoW2tlZXAtY29tbWVudHMtc2Nyb2xsZXJdKSAjdGFiLWNvbW1lbnRzLnRhYi1jb250ZW50LWhpZGRlbiB5dGQtY29tbWVudHMjY29tbWVudHMgPiB5dGQtaXRlbS1zZWN0aW9uLXJlbmRlcmVyI3NlY3Rpb25zID4gI2NvbnRlbnRzIHsKICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDsKICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7CiAgICBnYXA6IDYwcHg7CiAgICBvdmVyZmxvdzpoaWRkZW47CiAgICBoZWlnaHQ6IHZhcigtLWNvbW1lbnQtcHJlLWxvYWQtc2l6aW5nKTsKICAgIHdpZHRoOiB2YXIoLS1jb21tZW50LXByZS1sb2FkLXNpemluZyk7CiAgICBjb250YWluOnN0cmljdDsKICAgIGJvcmRlcjogMDsKICAgIG1hcmdpbjogMDsKICAgIHBhZGRpbmc6IDA7CiAgfQogICAgCiAgLyoKICB5dGQtd2F0Y2gtZmxleHk6bm90KFtrZWVwLWNvbW1lbnRzLXNjcm9sbGVyXSkgI3RhYi1jb21tZW50cy50YWItY29udGVudC1oaWRkZW4geXRkLWNvbW1lbnRzI2NvbW1lbnRzID4geXRkLWl0ZW0tc2VjdGlvbi1yZW5kZXJlciNzZWN0aW9ucyA+ICNjb250ZW50cyA+ICogewogICAgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsKICAgIHZpc2liaWxpdHk6IGNvbGxhcHNlICFpbXBvcnRhbnQ7CiAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgbWFyZ2luOiBjYWxjKDIgKiB2YXIoLS1jb21tZW50LXByZS1sb2FkLXNpemluZykpICFpbXBvcnRhbnQ7CiAgICB3aWR0aDogdmFyKC0tY29tbWVudC1wcmUtbG9hZC1zaXppbmcpOwogICAgaGVpZ2h0OiB2YXIoLS1jb21tZW50LXByZS1sb2FkLXNpemluZyk7CiAgICBib3gtc2l6aW5nOiBjb250ZW50LWJveDsKICAgIGNvbnRhaW46c3RyaWN0OwogICAgYm9yZGVyOiAwOwogICAgcGFkZGluZzogMDsKICB9CiAgICAqLwoKICAKICB5dGQtd2F0Y2gtZmxleHk6bm90KFtrZWVwLWNvbW1lbnRzLXNjcm9sbGVyXSkgI3RhYi1jb21tZW50cy50YWItY29udGVudC1oaWRkZW4geXRkLWNvbW1lbnRzI2NvbW1lbnRzICNjb250ZW50cyB7CiAgICAtLWNvbW1lbnQtcHJlLWxvYWQtZGlzcGxheTogbm9uZTsKICB9CgogIHl0ZC13YXRjaC1mbGV4eTpub3QoW2tlZXAtY29tbWVudHMtc2Nyb2xsZXJdKSAjdGFiLWNvbW1lbnRzLnRhYi1jb250ZW50LWhpZGRlbiB5dGQtY29tbWVudHMjY29tbWVudHMgI2NvbnRlbnRzID4gKjpvbmx5LW9mLXR5cGUsCiAgeXRkLXdhdGNoLWZsZXh5Om5vdChba2VlcC1jb21tZW50cy1zY3JvbGxlcl0pICN0YWItY29tbWVudHMudGFiLWNvbnRlbnQtaGlkZGVuIHl0ZC1jb21tZW50cyNjb21tZW50cyAjY29udGVudHMgPiAqOmxhc3QtY2hpbGQgewogICAgLS1jb21tZW50LXByZS1sb2FkLWRpc3BsYXk6IGJsb2NrOwogIH0KCiAgeXRkLXdhdGNoLWZsZXh5Om5vdChba2VlcC1jb21tZW50cy1zY3JvbGxlcl0pICN0YWItY29tbWVudHMudGFiLWNvbnRlbnQtaGlkZGVuIHl0ZC1jb21tZW50cyNjb21tZW50cyAjY29udGVudHMgPiAqIHsKICAgIGRpc3BsYXk6IHZhcigtLWNvbW1lbnQtcHJlLWxvYWQtZGlzcGxheSkgIWltcG9ydGFudDsKICB9CgogICNyaWdodC10YWJzICNtYXRlcmlhbC10YWJzIHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBwYWRkaW5nOiAwOwogICAgLypvdXRsaW5lOiAxcHggc29saWQgdmFyKC0tdHl0LXgtYm9yZGVyLWNvbG9yKTsqLwogICAgLypvdXRsaW5lOiAxcHggc29saWQgdmFyKC0teXRkLXNlYXJjaGJveC1sZWdhY3ktYm9yZGVyLWNvbG9yKTsqLwogICAgLyogMjAyMy8wNS8wNSBjaGFnZWQgZnJvbSBvdXRsaW5lIHRvIGJvcmRlciAqLwogICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0teXRkLXNlYXJjaGJveC1sZWdhY3ktYm9yZGVyLWNvbG9yKTsKICAgIC8qIGJvcmRlci1ib3R0b206MDsgKi8KICAgIG92ZXJmbG93OiBoaWRkZW47CiAgfQoKICBbdHl0LXRhYl0gI3JpZ2h0LXRhYnMgI21hdGVyaWFsLXRhYnMgewogICAgYm9yZGVyLXJhZGl1czogdmFyKC0tdHl0LXJvdW5kZWQtYTEpIHZhcigtLXR5dC1yb3VuZGVkLWExKSB2YXIoLS10eXQtcm91bmRlZC1hMSkgdmFyKC0tdHl0LXJvdW5kZWQtYTEpOwogIH0KCiAgW3R5dC10YWJePSIjIl0gI3JpZ2h0LXRhYnMgI21hdGVyaWFsLXRhYnMgewogICAgYm9yZGVyLXJhZGl1czogdmFyKC0tdHl0LXJvdW5kZWQtYTEpIHZhcigtLXR5dC1yb3VuZGVkLWExKSAwIDA7CiAgfQoKICB5dGQtd2F0Y2gtZmxleHlbZmxleHldOm5vdChbaXMtdHdvLWNvbHVtbnNfXSkgI3JpZ2h0LXRhYnMgI21hdGVyaWFsLXRhYnMgewogICAgICBvdXRsaW5lOiAwOwogIH0KCiAgI3JpZ2h0LXRhYnMgI21hdGVyaWFsLXRhYnMgYS50YWItYnRuW3R5dC10YWItY29udGVudF0gPiAqIHsKICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogIH0KCiAgI3JpZ2h0LXRhYnMgI21hdGVyaWFsLXRhYnMgYS50YWItYnRuW3R5dC10YWItY29udGVudF0gPiAuZm9udC1zaXplLXJpZ2h0IHsKICAgIHBvaW50ZXItZXZlbnRzOiBpbml0aWFsOwogICAgZGlzcGxheTogbm9uZTsgLyogbm90IHlldCBzdXBwb3J0ZWQgKi8KICB9CgogICAgICAKICB5dGQtd2F0Y2gtZmxleHkgI3JpZ2h0LXRhYnMgLnRhYi1jb250ZW50IHsKICAgICAgcGFkZGluZzogMDsKICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgIC8qLS15dC1zcGVjLWJyYW5kLWJhY2tncm91bmQtcHJpbWFyeTp2YXIoLS15dC1zcGVjLWdlbmVyYWwtYmFja2dyb3VuZC1hKTsqLwogICAgICAvKm91dGxpbmU6IDFweCBzb2xpZCB2YXIoLS10eXQteC1ib3JkZXItY29sb3IpOyovCiAgICAgIC8qIG91dGxpbmU6IDFweCBzb2xpZCB2YXIoLS15dGQtc2VhcmNoYm94LWxlZ2FjeS1ib3JkZXItY29sb3IpOyAqLwogICAgICAvKiAyMDIzLzA1LzA1IGNoYWdlZCBmcm9tIG91dGxpbmUgdG8gYm9yZGVyICovCiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLXl0ZC1zZWFyY2hib3gtbGVnYWN5LWJvcmRlci1jb2xvcik7CiAgICAgIGJvcmRlci10b3A6MDsKICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICB0b3A6IDA7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7CiAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgIGJvcmRlci1yYWRpdXM6IDAgMCB2YXIoLS10eXQtcm91bmRlZC1hMSkgdmFyKC0tdHl0LXJvdW5kZWQtYTEpOwogIH0KCiAgeXRkLXdhdGNoLWZsZXh5W2lzLXR3by1jb2x1bW5zX10gI3JpZ2h0LXRhYnMgLnRhYi1jb250ZW50IHsKICAvKgogICAgICBoZWlnaHQ6IHZhcigtLXR5dC10YWJzLWNvbnRlbnQtaGVpZ2h0KTsKICAgICAgY29udGFpbjogc2l6ZSBsYXlvdXQgcGFpbnQ7CiAgICAgICovCiAgfQoKICB5dGQtd2F0Y2gtZmxleHk6bm90KFtpcy10d28tY29sdW1uc19dKSAjcmlnaHQtdGFicyAudGFiLWNvbnRlbnQgewogICAgICBoZWlnaHQ6IDEwMCU7CiAgfQoKICB5dGQtd2F0Y2gtZmxleHkgI3JpZ2h0LXRhYnMgLnRhYi1jb250ZW50LWNsZCB7CiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBvdmVyZmxvdzogYXV0bzsKICAgICAgLS10YWItY29udGVudC1wYWRkaW5nOiB2YXIoLS15dGQtbWFyZ2luLTR4KTsKICAgICAgcGFkZGluZzogdmFyKC0tdGFiLWNvbnRlbnQtcGFkZGluZyk7CiAgICAgIGNvbnRhaW46IGxheW91dCBwYWludDsKCiAgfQoKICAudGFiLWNvbnRlbnQtY2xkLAogICNyaWdodC10YWJzLAogIC50YWItY29udGVudCB7CiAgICAgIHRyYW5zaXRpb246IG5vbmU7CiAgICAgIGFuaW1hdGlvbjogbm9uZTsKICB9CgogIC8qIGVtb2ppcyBib3ggc2l6ZSBjb3JyZWN0aW9uICovCiAgI3JpZ2h0LXRhYnMgI2Vtb2ppcy55dGQtY29tbWVudGJveCB7CiAgICAgIGluc2V0OiBhdXRvIDBweCBhdXRvIDBweDsKICAgICAgd2lkdGg6IGF1dG87CiAgfSAgICAKCiAgeXRkLXdhdGNoLWZsZXh5W2lzLXR3by1jb2x1bW5zX10gI3JpZ2h0LXRhYnMgLnRhYi1jb250ZW50LWNsZCB7CiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGNvbnRhaW46IHNpemUgbGF5b3V0IHBhaW50IHN0eWxlOwogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgfQoKICB5dGQtd2F0Y2gtZmxleHkgI3JpZ2h0LXRhYnMgLnRhYi1jb250ZW50LWNsZC50YWItY29udGVudC1oaWRkZW4gewogICAgICBkaXNwbGF5OiBub25lOwogICAgICB3aWR0aDogMTAwJTsKICAgICAgLyogd2lkdGggZml4ICovCiAgICAgIGNvbnRhaW46IHNpemUgbGF5b3V0IHBhaW50IHN0eWxlOwogIH0KCgoKCgoKICBAc3VwcG9ydHMgKGNvbG9yOiB2YXIoLS10YWJ2aWV3LXRhYi1idG4tZGVmaW5lKSkgewoKICAvKiBnaXZlIGJhY2tncm91bmQgY29sb3I7IG90aGVyd2lzZSBpdCB3aWxsIGJlIHRyYW5zcGFyZW50IGluIGRhcmsgbW9kZSwgc2luZ2xlIGNvbHVtbiovCiAgeXRkLXdhdGNoLWZsZXh5ICNyaWdodC10YWJzIC50YWItYnRuIHsKICAgICAgYmFja2dyb3VuZDogdmFyKC0teXQtc3BlYy1nZW5lcmFsLWJhY2tncm91bmQtYSk7CiAgfQoKICBodG1sIHsKICAgICAgLS10eXQtdGFiLWJ0bi1mbGV4LWdyb3c6IDE7CiAgICAgIC0tdHl0LXRhYi1idG4tZmxleC1iYXNpczogMCU7CiAgICAgIC0tdHl0LXRhYi1iYXItY29sb3ItMS1kZWY6ICNmZjQ1MzM7CiAgICAgIC0tdHl0LXRhYi1iYXItY29sb3ItMi1kZWY6IHZhcigtLXl0LWJyYW5kLWxpZ2h0LXJlZCk7CiAgICAgIC0tdHl0LXRhYi1iYXItY29sb3ItMTp2YXIoLS1tYWluLWNvbG9yLCB2YXIoLS10eXQtdGFiLWJhci1jb2xvci0xLWRlZikpOwogICAgICAtLXR5dC10YWItYmFyLWNvbG9yLTI6dmFyKC0tbWFpbi1jb2xvciwgdmFyKC0tdHl0LXRhYi1iYXItY29sb3ItMi1kZWYpKTsKICB9CgogIHl0ZC13YXRjaC1mbGV4eSAjcmlnaHQtdGFicyAudGFiLWJ0blt0eXQtdGFiLWNvbnRlbnRdIHsKCiAgICAgIGZsZXgtZ3JvdzogMTsKICAgICAgZmxleC1zaHJpbms6IDE7CiAgICAgIGZsZXgtYmFzaXM6IDAlOwogICAgICAKICAgICAgZmxleC1ncm93OiB2YXIoLS10eXQtdGFiLWJ0bi1mbGV4LWdyb3cpOwogICAgICBmbGV4LWJhc2lzOiB2YXIoLS10eXQtdGFiLWJ0bi1mbGV4LWJhc2lzKTsKICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKICAgICAgLS10eXQtdGFiLWJ0bi1jb2xvcjogdmFyKC0teXQtc3BlYy10ZXh0LXNlY29uZGFyeSk7CiAgICAgIGNvbG9yOiB2YXIoLS10eXQtdGFiLWJ0bi1jb2xvcik7CiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgcGFkZGluZzogMTRweCA4cHggMTBweDsKICAgICAgYm9yZGVyOiAwOwogICAgICBib3JkZXItYm90dG9tOiA0cHggc29saWQgdHJhbnNwYXJlbnQ7CiAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgbGluZS1oZWlnaHQ6IDE4cHg7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgdHJhbnNpdGlvbjogYm9yZGVyIDIwMG1zIGxpbmVhciAxMDBtczsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0teXRkLXNlYXJjaGJveC1sZWdhY3ktYnV0dG9uLWNvbG9yKTsKICAgICAgdGV4dC10cmFuc2Zvcm06IHZhcigtLXl0LWJ1dHRvbi10ZXh0LXRyYW5zZm9ybSwgaW5oZXJpdCk7CiAgICAgIHVzZXItc2VsZWN0OiBub25lICFpbXBvcnRhbnQ7CgogICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICAvKnRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyovCiAgICAgIHRleHQtb3ZlcmZsb3c6IGNsaXA7CgogIH0KCgogIC8qIC50YWItYnRuW3R5dC10YWItY29udGVudF0gKi8KCiAgeXRkLXdhdGNoLWZsZXh5ICNyaWdodC10YWJzIC50YWItYnRuW3R5dC10YWItY29udGVudF0+c3ZnIHsKICAgICAgaGVpZ2h0OiAxOHB4OwogICAgICBwYWRkaW5nLXJpZ2h0OiAwcHg7CiAgICAgIHZlcnRpY2FsLWFsaWduOiBib3R0b207CiAgICAgIG9wYWNpdHk6IC41OwogICAgICBtYXJnaW4tcmlnaHQ6IDBweDsKICAgICAgY29sb3I6IHZhcigtLXl0LWJ1dHRvbi1jb2xvciwgaW5oZXJpdCk7CiAgICAgIGZpbGw6IHZhcigtLWlyb24taWNvbi1maWxsLWNvbG9yLCBjdXJyZW50Y29sb3IpOwogICAgICBzdHJva2U6IHZhcigtLWlyb24taWNvbi1zdHJva2UtY29sb3IsIG5vbmUpOwogIH0KCiAgeXRkLXdhdGNoLWZsZXh5ICNyaWdodC10YWJzIC50YWItYnRuIHsKICAgICAgLS10YWJ2aWV3LWJ0bi10eHQtbWw6IDhweDsKICB9CiAgeXRkLXdhdGNoLWZsZXh5W3R5dC1jb21tZW50LWRpc2FibGVkXSAjcmlnaHQtdGFicyAudGFiLWJ0blt0eXQtdGFiLWNvbnRlbnQ9IiN0YWItY29tbWVudHMiXSB7CiAgICAgIC0tdGFidmlldy1idG4tdHh0LW1sOiAwcHg7CiAgfQoKICB5dGQtd2F0Y2gtZmxleHkgI3JpZ2h0LXRhYnMgLnRhYi1idG5bdHl0LXRhYi1jb250ZW50XT5zdmcrc3BhbiB7CiAgICAgIG1hcmdpbi1sZWZ0OiB2YXIoLS10YWJ2aWV3LWJ0bi10eHQtbWwpOwogIH0KCiAgeXRkLXdhdGNoLWZsZXh5ICNyaWdodC10YWJzIC50YWItYnRuW3R5dC10YWItY29udGVudF0gc3ZnIHsKICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgfQoKICB5dGQtd2F0Y2gtZmxleHkgI3JpZ2h0LXRhYnMgLnRhYi1idG5bdHl0LXRhYi1jb250ZW50XS5hY3RpdmUgewogICAgICBmb250LXdlaWdodDogNTAwOwogICAgICBvdXRsaW5lOiAwOwogICAgICAtLXR5dC10YWItYnRuLWNvbG9yOiB2YXIoLS15dC1zcGVjLXRleHQtcHJpbWFyeSk7CiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXl0ZC1zZWFyY2hib3gtbGVnYWN5LWJ1dHRvbi1mb2N1cy1jb2xvcik7CiAgICAgIGJvcmRlci1ib3R0b206IDRweCB2YXIoLS10eXQtdGFiLWJhci1jb2xvci0xKSBzb2xpZDsKICAgICAgYm9yZGVyLWJvdHRvbS1jb2xvcjogdmFyKC0tdHl0LXRhYi1iYXItY29sb3ItMik7CiAgfQoKICB5dGQtd2F0Y2gtZmxleHkgI3JpZ2h0LXRhYnMgLnRhYi1idG5bdHl0LXRhYi1jb250ZW50XS5hY3RpdmUgc3ZnIHsKICAgICAgb3BhY2l0eTogLjkKICB9CgogIHl0ZC13YXRjaC1mbGV4eSAjcmlnaHQtdGFicyAudGFiLWJ0blt0eXQtdGFiLWNvbnRlbnRdOm5vdCguYWN0aXZlKTpob3ZlciB7CiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXl0ZC1zZWFyY2hib3gtbGVnYWN5LWJ1dHRvbi1ob3Zlci1jb2xvcik7CiAgICAgIC0tdHl0LXRhYi1idG4tY29sb3I6IHZhcigtLXl0LXNwZWMtdGV4dC1wcmltYXJ5KTsKICB9CgogIHl0ZC13YXRjaC1mbGV4eSAjcmlnaHQtdGFicyAudGFiLWJ0blt0eXQtdGFiLWNvbnRlbnRdOm5vdCguYWN0aXZlKTpob3ZlciBzdmcgewogICAgICBvcGFjaXR5OiAuOQogIH0KCiAgeXRkLXdhdGNoLWZsZXh5ICNyaWdodC10YWJzIC50YWItYnRuW3R5dC10YWItY29udGVudF0gewogICAgICB1c2VyLXNlbGVjdDogbm9uZSAhaW1wb3J0YW50OwogIH0KCiAgeXRkLXdhdGNoLWZsZXh5ICNyaWdodC10YWJzIC50YWItYnRuW3R5dC10YWItY29udGVudF0udGFiLWJ0bi1oaWRkZW4gewogICAgICBkaXNwbGF5OiBub25lOwogIH0KCiAgeXRkLXdhdGNoLWZsZXh5W3R5dC1jb21tZW50LWRpc2FibGVkXSAjcmlnaHQtdGFicyAudGFiLWJ0blt0eXQtdGFiLWNvbnRlbnQ9IiN0YWItY29tbWVudHMiXSwKICB5dGQtd2F0Y2gtZmxleHlbdHl0LWNvbW1lbnQtZGlzYWJsZWRdICNyaWdodC10YWJzIC50YWItYnRuW3R5dC10YWItY29udGVudD0iI3RhYi1jb21tZW50cyJdOmhvdmVyIHsKICAgICAgLS10eXQtdGFiLWJ0bi1jb2xvcjogdmFyKC0teXQtc3BlYy1pY29uLWRpc2FibGVkKTsKICB9CgogIHl0ZC13YXRjaC1mbGV4eVt0eXQtY29tbWVudC1kaXNhYmxlZF0gI3JpZ2h0LXRhYnMgLnRhYi1idG5bdHl0LXRhYi1jb250ZW50PSIjdGFiLWNvbW1lbnRzIl0gc3BhbiN0eXQtY20tY291bnQ6ZW1wdHl7CiAgICBkaXNwbGF5Om5vbmU7CiAgfQoKCiAgeXRkLXdhdGNoLWZsZXh5ICNyaWdodC10YWJzIC50YWItYnRuIHNwYW4jdHl0LWNtLWNvdW50OmVtcHR5OjphZnRlciB7CiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgd2lkdGg6IDRlbTsKICAgICAgdGV4dC1hbGlnbjogbGVmdDsKICAgICAgZm9udC1zaXplOiBpbmhlcml0OwogICAgICBjb2xvcjogY3VycmVudENvbG9yOwogICAgICB0cmFuc2Zvcm06IHNjYWxlWCgwLjgpOwogIH0KCiAgfQoKICBAc3VwcG9ydHMgKGNvbG9yOiB2YXIoLS10eXQtY20tY291bnQtZGVmaW5lKSl7CgogIHl0ZC13YXRjaC1mbGV4eSB7CiAgICAgIC0tdHl0LXgtbG9hZGluZy1jb250ZW50LWxldHRlci1zcGFjaW5nOiAycHg7CiAgfQoKICBodG1sIHsKICAgICAgLS10YWJ2aWV3LXRleHQtbG9hZGluZzogIkxvYWRpbmciOwogICAgICAtLXRhYnZpZXctdGV4dC1mZXRjaGluZzogIkZldGNoaW5nIjsKICAgICAgLS10YWJ2aWV3LXBhbmVsLWxvYWRpbmc6IHZhcigtLXRhYnZpZXctdGV4dC1sb2FkaW5nKTsKICB9CgogIGh0bWw6bGFuZyhqYSkgewogICAgICAtLXRhYnZpZXctdGV4dC1sb2FkaW5nOiAi6Kqt44G/6L6844G/5LitIjsKICAgICAgLS10YWJ2aWV3LXRleHQtZmV0Y2hpbmc6ICLjg5Xjgqfjg4Pjg4EuLiI7CiAgfQoKICBodG1sOmxhbmcoa28pIHsKICAgICAgLS10YWJ2aWV3LXRleHQtbG9hZGluZzogIuuhnOuUqS4uIjsKICAgICAgLS10YWJ2aWV3LXRleHQtZmV0Y2hpbmc6ICLqsIDsoLjsmKTquLAuLiI7CiAgfQoKICBodG1sOmxhbmcoemgtSGFudCkgewogICAgICAvKiDos4foqIrnp5HmioDlkI3oqZ4gQCBodHRwczovL3Rlcm1zLm5hZXIuZWR1LnR3LyAqLwogICAgICAtLXRhYnZpZXctdGV4dC1sb2FkaW5nOiAi6LyJ5YWl5LitIjsKICAgICAgLS10YWJ2aWV3LXRleHQtZmV0Y2hpbmc6ICLmk7flj5bkuK0iOwogIH0KCiAgaHRtbDpsYW5nKHpoLUhhbnMpIHsKICAgICAgLS10YWJ2aWV3LXRleHQtbG9hZGluZzogIuWKoOi9veS4rSI7CiAgICAgIC0tdGFidmlldy10ZXh0LWZldGNoaW5nOiAi5oqT5Y+W5LitIjsKICB9CgogIGh0bWw6bGFuZyhydSkgewogICAgICAtLXRhYnZpZXctdGV4dC1sb2FkaW5nOiAi0JfQsNCz0YDRg9C30LrQsCI7CiAgICAgIC0tdGFidmlldy10ZXh0LWZldGNoaW5nOiAi0J/QvtC70YPRh9C10L3QuNC1IjsKICB9CgogIHl0ZC13YXRjaC1mbGV4eSAjcmlnaHQtdGFicyAudGFiLWJ0biBzcGFuI3R5dC1jbS1jb3VudDplbXB0eTo6YWZ0ZXIgewogICAgICBjb250ZW50OiB2YXIoLS10YWJ2aWV3LXRleHQtbG9hZGluZyk7CiAgICAgIGxldHRlci1zcGFjaW5nOiB2YXIoLS10eXQteC1sb2FkaW5nLWNvbnRlbnQtbGV0dGVyLXNwYWNpbmcpOwogIH0KCiAgfQoKCiAgQHN1cHBvcnRzIChjb2xvcjogdmFyKC0tdGFidmlldy1mb250LXNpemUtYnRuLWRlZmluZSkpIHsKCiAgLmZvbnQtc2l6ZS1yaWdodCB7CiAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgIHJpZ2h0OiAwOwogICAgICB0b3A6IDA7CiAgICAgIGJvdHRvbTogMDsKICAgICAgd2lkdGg6IDE2cHg7CiAgICAgIHBhZGRpbmc6IDRweCAwOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWV2ZW5seTsKICAgICAgYWxpZ24tY29udGVudDogc3BhY2UtZXZlbmx5OwogICAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKICB9CgogIGh0bWwgYm9keSB5dGQtd2F0Y2gtZmxleHkuc3R5bGUtc2NvcGUgLmZvbnQtc2l6ZS1idG4gewogICAgICB1c2VyLXNlbGVjdDogbm9uZSAhaW1wb3J0YW50OwogIH0KCiAgLmZvbnQtc2l6ZS1idG4gewogICAgICAtLXR5dC1mb250LXNpemUtYnRuLWRpc3BsYXk6IG5vbmU7CiAgICAgIGRpc3BsYXk6IHZhcigtLXR5dC1mb250LXNpemUtYnRuLWRpc3BsYXksIG5vbmUpOwogICAgICAvKiBoaWRlIHpvb20gYnRuIGZvciBGaXJlRm94ICovCiAgICAgIHdpZHRoOiAxMnB4OwogICAgICBoZWlnaHQ6IDEycHg7CiAgICAgIGNvbG9yOiB2YXIoLS15dC1zcGVjLXRleHQtc2Vjb25kYXJ5KTsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0teXQtc3BlYy1iYWRnZS1jaGlwLWJhY2tncm91bmQpOwogICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IGxlZnQgdG9wOwogICAgICBtYXJnaW46IDA7CiAgICAgIHBhZGRpbmc6IDA7CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgZm9udC1mYW1pbHk6ICdNZW5sbycsICdMdWNpZGEgQ29uc29sZScsICdNb25hY28nLCAnQ29uc29sYXMnLCBtb25vc3BhY2U7CiAgICAgIGxpbmUtaGVpZ2h0OiAxMDAlOwogICAgICBmb250LXdlaWdodDogOTAwOwogICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDkwbXMgbGluZWFyLCBjb2xvciA5MG1zIGxpbmVhcjsKICAgICAgcG9pbnRlci1ldmVudHM6IGFsbDsKICB9CgogIC5mb250LXNpemUtYnRuOmhvdmVyIHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0teXQtc3BlYy10ZXh0LXByaW1hcnkpOwogICAgICBjb2xvcjogdmFyKC0teXQtc3BlYy1nZW5lcmFsLWJhY2tncm91bmQtYSk7CiAgfQoKICBAc3VwcG9ydHMgKHpvb206IDAuNSkgewoKICAgICAgLnRhYi1idG4gLmZvbnQtc2l6ZS1idG4gewogICAgICAgICAgLS10eXQtZm9udC1zaXplLWJ0bi1kaXNwbGF5OiBub25lOwogICAgICB9CgogICAgICAudGFiLWJ0bi5hY3RpdmU6aG92ZXIgLmZvbnQtc2l6ZS1idG4gewogICAgICAgICAgLS10eXQtZm9udC1zaXplLWJ0bi1kaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgIH0KCiAgfQoKICB9CgoKICBib2R5IHl0ZC13YXRjaC1mbGV4eTpub3QoW2lzLXR3by1jb2x1bW5zX10pICNjb2x1bW5zLnl0ZC13YXRjaC1mbGV4eXsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgfQoKICBib2R5IHl0ZC13YXRjaC1mbGV4eTpub3QoW2lzLXR3by1jb2x1bW5zX10pICNzZWNvbmRhcnkueXRkLXdhdGNoLWZsZXh5IHsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgd2lkdGg6IDEwMCU7CiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIH0KCiAgYm9keSB5dGQtd2F0Y2gtZmxleHk6bm90KFtpcy10d28tY29sdW1uc19dKSAjc2Vjb25kYXJ5Lnl0ZC13YXRjaC1mbGV4eSBzZWNvbmRhcnktd3JhcHBlciB7CgogICAgICBwYWRkaW5nLWxlZnQ6IHZhcigtLXl0ZC1tYXJnaW4tNngpOwogICAgICBjb250YWluOiBjb250ZW50OwogICAgICBoZWlnaHQ6IGluaXRpYWw7CgoKICB9CgogIGJvZHkgeXRkLXdhdGNoLWZsZXh5Om5vdChbaXMtdHdvLWNvbHVtbnNfXSkgI3NlY29uZGFyeS55dGQtd2F0Y2gtZmxleHkgc2Vjb25kYXJ5LXdyYXBwZXIgI3JpZ2h0LXRhYnMgewogICAgb3ZlcmZsb3c6IGF1dG87CgogIH0KCiAgW3R5dC1jaGF0PSIrIl0gc2Vjb25kYXJ5LXdyYXBwZXIgPiBbdHl0LWNoYXQtY29udGFpbmVyXXsKICAgICAgZmxleC1ncm93OiAxOwogICAgICBmbGV4LXNocmluazogMDsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICB9CgogIFt0eXQtY2hhdD0iKyJdIHNlY29uZGFyeS13cmFwcGVyID4gW3R5dC1jaGF0LWNvbnRhaW5lcl0gPiAjY2hhdHsKICAgICAgZmxleC1ncm93OiAxOwogIH0KCiAgeXRkLXdhdGNoLWZsZXh5W2lzLXR3by1jb2x1bW5zX106bm90KFt0aGVhdGVyXSkgI2NvbHVtbnMuc3R5bGUtc2NvcGUueXRkLXdhdGNoLWZsZXh5IHsKICAgICAgbWluLWhlaWdodDogY2FsYygxMDB2aCAtIHZhcigtLXl0ZC10b29sYmFyLWhlaWdodCwgNTZweCkpOwogIH0KCiAgeXRkLXdhdGNoLWZsZXh5W2lzLXR3by1jb2x1bW5zX10geXRkLWxpdmUtY2hhdC1mcmFtZSNjaGF0IHsKICAgICAgbWluLWhlaWdodDogaW5pdGlhbCAhaW1wb3J0YW50OwogICAgICBoZWlnaHQ6IGluaXRpYWwgIWltcG9ydGFudDsKICB9CgogIHl0ZC13YXRjaC1mbGV4eVt0eXQtdGFiXj0iIyJdOm5vdChbaXMtdHdvLWNvbHVtbnNfXSk6bm90KFt0eXQtY2hhdD0iKyJdKSAjcmlnaHQtdGFicyB7CiAgICAgIG1pbi1oZWlnaHQ6IHZhcigtLXl0ZC13YXRjaC1mbGV4eS1jaGF0LW1heC1oZWlnaHQpCiAgfQoKICBib2R5IHl0ZC13YXRjaC1mbGV4eTpub3QoW2lzLXR3by1jb2x1bW5zX10pICNjaGF0Lnl0ZC13YXRjaC1mbGV4eSB7CiAgICBtYXJnaW4tdG9wOiAwOwoKICB9CgogIGJvZHkgeXRkLXdhdGNoLWZsZXh5Om5vdChbaXMtdHdvLWNvbHVtbnNfXSkgeXRkLXdhdGNoLW1ldGFkYXRhLnl0ZC13YXRjaC1mbGV4eSB7CiAgICBtYXJnaW4tYm90dG9tOiAwOwogIH0KCiAgeXRkLXdhdGNoLW1ldGFkYXRhLnl0ZC13YXRjaC1mbGV4eSB5dGQtbWV0YWRhdGEtcm93LWNvbnRhaW5lci1yZW5kZXJlciB7CiAgICBkaXNwbGF5OiBub25lOwogIH0KCiAgLyoKICAjdGFiLWluZm8gI2l0ZW1zLnN0eWxlLXNjb3BlLnl0ZC12aWRlby1kZXNjcmlwdGlvbi1pbmZvY2FyZHMtc2VjdGlvbi1yZW5kZXJlciB7CgogICAgZGlzcGxheTogaW5saW5lLWZsZXg7CiAgICBmbGV4LXdyYXA6IHdyYXA7CiAgICByb3ctZ2FwOiA4cHg7CiAgfQoKICAjdGFiLWluZm8gI2xlZnQtYXJyb3ctY29udGFpbmVyLnN0eWxlLXNjb3BlLnl0ZC12aWRlby1kZXNjcmlwdGlvbi1pbmZvY2FyZHMtc2VjdGlvbi1yZW5kZXJlciwKICAjdGFiLWluZm8gI2xlZnQtYXJyb3cuc3R5bGUtc2NvcGUueXRkLXZpZGVvLWRlc2NyaXB0aW9uLWluZm9jYXJkcy1zZWN0aW9uLXJlbmRlcmVyLAogICN0YWItaW5mbyAjcmlnaHQtYXJyb3ctY29udGFpbmVyLnN0eWxlLXNjb3BlLnl0ZC12aWRlby1kZXNjcmlwdGlvbi1pbmZvY2FyZHMtc2VjdGlvbi1yZW5kZXJlciwKICAjdGFiLWluZm8gI3JpZ2h0LWFycm93LnN0eWxlLXNjb3BlLnl0ZC12aWRlby1kZXNjcmlwdGlvbi1pbmZvY2FyZHMtc2VjdGlvbi1yZW5kZXJlciB7CiAgICB2aXNpYmlsaXR5OiBjb2xsYXBzZTsKICB9CiAgICAqLwoKICAvKgogICN0YWItaW5mbyAjc29jaWFsLWxpbmtzLnN0eWxlLXNjb3BlLnl0ZC12aWRlby1kZXNjcmlwdGlvbi1pbmZvY2FyZHMtc2VjdGlvbi1yZW5kZXJlciA+ICNsZWZ0LWFycm93LWNvbnRhaW5lci55dGQtdmlkZW8tZGVzY3JpcHRpb24taW5mb2NhcmRzLXNlY3Rpb24tcmVuZGVyZXJ7CiAgbGVmdDowOwogIH0KICAjdGFiLWluZm8gI3NvY2lhbC1saW5rcy5zdHlsZS1zY29wZS55dGQtdmlkZW8tZGVzY3JpcHRpb24taW5mb2NhcmRzLXNlY3Rpb24tcmVuZGVyZXIgPiAjcmlnaHQtYXJyb3ctY29udGFpbmVyLnl0ZC12aWRlby1kZXNjcmlwdGlvbi1pbmZvY2FyZHMtc2VjdGlvbi1yZW5kZXJlcnsKICByaWdodDowOwogIH0KCiAgI3RhYi1pbmZvICNzb2NpYWwtbGlua3Muc3R5bGUtc2NvcGUueXRkLXZpZGVvLWRlc2NyaXB0aW9uLWluZm9jYXJkcy1zZWN0aW9uLXJlbmRlcmVyID4gI3Njcm9sbC1jb250YWluZXIueXRkLXZpZGVvLWRlc2NyaXB0aW9uLWluZm9jYXJkcy1zZWN0aW9uLXJlbmRlcmVyewogIG1hcmdpbjogMCAzMnB4OwogIH0KICAqLwoKICAjdGFiLWluZm8gW3Nob3ctZXhwYW5kLWJ1dHRvbl0gI2V4cGFuZC1zaXplci55dGQtdGV4dC1pbmxpbmUtZXhwYW5kZXJ7CiAgICB2aXNpYmlsaXR5OiBpbml0aWFsOwogIH0KCgogICN0YWItaW5mbyAjc29jaWFsLWxpbmtzLnN0eWxlLXNjb3BlLnl0ZC12aWRlby1kZXNjcmlwdGlvbi1pbmZvY2FyZHMtc2VjdGlvbi1yZW5kZXJlciA+ICNsZWZ0LWFycm93LWNvbnRhaW5lci55dGQtdmlkZW8tZGVzY3JpcHRpb24taW5mb2NhcmRzLXNlY3Rpb24tcmVuZGVyZXIgPiAjbGVmdC1hcnJvd3sKICAgIGJvcmRlcjogNnB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgb3BhY2l0eTogMC42NTsKICAgIH0KICAgICN0YWItaW5mbyAjc29jaWFsLWxpbmtzLnN0eWxlLXNjb3BlLnl0ZC12aWRlby1kZXNjcmlwdGlvbi1pbmZvY2FyZHMtc2VjdGlvbi1yZW5kZXJlciA+ICNyaWdodC1hcnJvdy1jb250YWluZXIueXRkLXZpZGVvLWRlc2NyaXB0aW9uLWluZm9jYXJkcy1zZWN0aW9uLXJlbmRlcmVyID4jcmlnaHQtYXJyb3d7CiAgICBib3JkZXI6IDZweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgIG9wYWNpdHk6IDAuNjU7CiAgICB9CgoKCiAgI3RhYi1pbmZvICNzb2NpYWwtbGlua3Muc3R5bGUtc2NvcGUueXRkLXZpZGVvLWRlc2NyaXB0aW9uLWluZm9jYXJkcy1zZWN0aW9uLXJlbmRlcmVyID4gI2xlZnQtYXJyb3ctY29udGFpbmVyLnl0ZC12aWRlby1kZXNjcmlwdGlvbi1pbmZvY2FyZHMtc2VjdGlvbi1yZW5kZXJlciA+ICNsZWZ0LWFycm93OmhvdmVyewogICAgb3BhY2l0eTogMTsKICAgIH0KICAgICN0YWItaW5mbyAjc29jaWFsLWxpbmtzLnN0eWxlLXNjb3BlLnl0ZC12aWRlby1kZXNjcmlwdGlvbi1pbmZvY2FyZHMtc2VjdGlvbi1yZW5kZXJlciA+ICNyaWdodC1hcnJvdy1jb250YWluZXIueXRkLXZpZGVvLWRlc2NyaXB0aW9uLWluZm9jYXJkcy1zZWN0aW9uLXJlbmRlcmVyID4jcmlnaHQtYXJyb3c6aG92ZXJ7CgogICAgICBvcGFjaXR5OiAxOwogICAgICB9CgoKICAgICN0YWItaW5mbyAjc29jaWFsLWxpbmtzLnN0eWxlLXNjb3BlLnl0ZC12aWRlby1kZXNjcmlwdGlvbi1pbmZvY2FyZHMtc2VjdGlvbi1yZW5kZXJlciA+ICBkaXYjbGVmdC1hcnJvdy1jb250YWluZXI6OmJlZm9yZSB7CiAgICAgIGNvbnRlbnQ6ICcnOwogICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICAgICAgd2lkdGg6IDQwcHg7CiAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICBoZWlnaHQ6IDQwcHg7CiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgbGVmdDogLTIwcHg7CiAgICAgIHRvcDogMDsKICAgICAgei1pbmRleDogLTE7CiAgfQogICAgI3RhYi1pbmZvICNzb2NpYWwtbGlua3Muc3R5bGUtc2NvcGUueXRkLXZpZGVvLWRlc2NyaXB0aW9uLWluZm9jYXJkcy1zZWN0aW9uLXJlbmRlcmVyID4gIGRpdiNyaWdodC1hcnJvdy1jb250YWluZXI6OmJlZm9yZSB7CiAgICAgIGNvbnRlbnQ6ICcnOwogICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICAgICAgd2lkdGg6IDQwcHg7CiAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICBoZWlnaHQ6IDQwcHg7CiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgcmlnaHQ6IC0yMHB4OwogICAgICB0b3A6IDA7CiAgICAgIHotaW5kZXg6IC0xOwogIH0KCgoKICBib2R5IHl0ZC13YXRjaC1mbGV4eVtpcy10d28tY29sdW1uc19dW3R5dC1lZ20tcGFuZWxfXSAjY29sdW1ucy5zdHlsZS1zY29wZS55dGQtd2F0Y2gtZmxleHkgI3BhbmVscy5zdHlsZS1zY29wZS55dGQtd2F0Y2gtZmxleHl7CiAgICAgIGZsZXgtZ3JvdzogMTsKICAgICAgZmxleC1zaHJpbms6IDA7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgfQoKCiAgYm9keSB5dGQtd2F0Y2gtZmxleHlbaXMtdHdvLWNvbHVtbnNfXVt0eXQtZWdtLXBhbmVsX10gI2NvbHVtbnMuc3R5bGUtc2NvcGUueXRkLXdhdGNoLWZsZXh5ICNwYW5lbHMuc3R5bGUtc2NvcGUueXRkLXdhdGNoLWZsZXh5IHl0ZC1lbmdhZ2VtZW50LXBhbmVsLXNlY3Rpb24tbGlzdC1yZW5kZXJlclt0YXJnZXQtaWRdW3Zpc2liaWxpdHk9IkVOR0FHRU1FTlRfUEFORUxfVklTSUJJTElUWV9FWFBBTkRFRCJdewoKICAgICAgaGVpZ2h0OiBpbml0aWFsOwogICAgICBtYXgtaGVpZ2h0OiBpbml0aWFsOwogICAgICBtaW4taGVpZ2h0OiBpbml0aWFsOwogICAgICBmbGV4LWdyb3c6IDE7CiAgICAgIGZsZXgtc2hyaW5rOiAwOwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwoKICAgICAgCiAgfQoKCiAgYm9keSB5dGQtd2F0Y2gtZmxleHlbaXMtdHdvLWNvbHVtbnNfXVt0eXQtZWdtLXBhbmVsX10gI2NvbHVtbnMuc3R5bGUtc2NvcGUueXRkLXdhdGNoLWZsZXh5ICNwYW5lbHMuc3R5bGUtc2NvcGUueXRkLXdhdGNoLWZsZXh5IHl0ZC1lbmdhZ2VtZW50LXBhbmVsLXNlY3Rpb24tbGlzdC1yZW5kZXJlclt0YXJnZXQtaWRdW3Zpc2liaWxpdHk9IkVOR0FHRU1FTlRfUEFORUxfVklTSUJJTElUWV9FWFBBTkRFRCJdICNjb250ZW50LnN0eWxlLXNjb3BlLnl0ZC1lbmdhZ2VtZW50LXBhbmVsLXNlY3Rpb24tbGlzdC1yZW5kZXJlcnsKCiAgLyoKICBoZWlnaHQ6IGluaXRpYWw7CiAgbWF4LWhlaWdodDogaW5pdGlhbDsKICBtaW4taGVpZ2h0OiBpbml0aWFsOwogICAgICBmbGV4LWdyb3c6IDE7CiAgICAgIGZsZXgtc2hyaW5rOiAwOwogICAgICBtYXJnaW46IDA7CiAgICAgIHBhZGRpbmc6IDA7CiAgICAgIGJvcmRlcjogMDsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgKi8KICB9CgoKICBib2R5IHl0ZC13YXRjaC1mbGV4eVtpcy10d28tY29sdW1uc19dW3R5dC1lZ20tcGFuZWxfXSAjY29sdW1ucy5zdHlsZS1zY29wZS55dGQtd2F0Y2gtZmxleHkgI3BhbmVscy5zdHlsZS1zY29wZS55dGQtd2F0Y2gtZmxleHkgeXRkLWVuZ2FnZW1lbnQtcGFuZWwtc2VjdGlvbi1saXN0LXJlbmRlcmVyW3RhcmdldC1pZF1bdmlzaWJpbGl0eT0iRU5HQUdFTUVOVF9QQU5FTF9WSVNJQklMSVRZX0VYUEFOREVEIl0gI2NvbnRlbnQuc3R5bGUtc2NvcGUueXRkLWVuZ2FnZW1lbnQtcGFuZWwtc2VjdGlvbi1saXN0LXJlbmRlcmVyID4gW3BhbmVsLXRhcmdldC1pZF17CgogIC8qCiAgaGVpZ2h0OiBpbml0aWFsOwogIG1heC1oZWlnaHQ6IGluaXRpYWw7CiAgbWluLWhlaWdodDogaW5pdGlhbDsKICAgICAgZmxleC1ncm93OiAxOwogICAgICBmbGV4LXNocmluazogMDsKICAgICAgbWFyZ2luOiAwOwogICAgICBwYWRkaW5nOiAwOwogICAgICBib3JkZXI6IDA7CiAgICAgICovCiAgfQoKCiAgc2Vjb25kYXJ5LXdyYXBwZXIgW3Zpc2liaWxpdHk9IkVOR0FHRU1FTlRfUEFORUxfVklTSUJJTElUWV9FWFBBTkRFRCJdIHl0ZC10cmFuc2NyaXB0LXJlbmRlcmVyOm5vdCg6ZW1wdHkpLAogIHNlY29uZGFyeS13cmFwcGVyIFt2aXNpYmlsaXR5PSJFTkdBR0VNRU5UX1BBTkVMX1ZJU0lCSUxJVFlfRVhQQU5ERUQiXSAjYm9keS55dGQtdHJhbnNjcmlwdC1yZW5kZXJlcjpub3QoOmVtcHR5KSwKICAgIHNlY29uZGFyeS13cmFwcGVyIFt2aXNpYmlsaXR5PSJFTkdBR0VNRU5UX1BBTkVMX1ZJU0lCSUxJVFlfRVhQQU5ERUQiXSAgI2NvbnRlbnQueXRkLXRyYW5zY3JpcHQtcmVuZGVyZXI6bm90KDplbXB0eSl7CgogICAgZmxleC1ncm93OiAxOwogIGhlaWdodDogaW5pdGlhbDsKICBtYXgtaGVpZ2h0OiBpbml0aWFsOwogIG1pbi1oZWlnaHQ6IGluaXRpYWw7CiAgfQoKICBzZWNvbmRhcnktd3JhcHBlciAjY29udGVudC55dGQtZW5nYWdlbWVudC1wYW5lbC1zZWN0aW9uLWxpc3QtcmVuZGVyZXJ7CgogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgfQoKICAvKgogIEBzdXBwb3J0cyAoY29udGFpbjogc3RyaWN0KSB7CgogIHNlY29uZGFyeS13cmFwcGVyICNjb250ZW50Lnl0ZC1lbmdhZ2VtZW50LXBhbmVsLXNlY3Rpb24tbGlzdC1yZW5kZXJlciA+IFtwYW5lbC10YXJnZXQtaWRdOm9ubHktY2hpbGR7CgogICAgICBjb250YWluOiBzdHJpY3Q7CiAgICAgIG1heC1oZWlnaHQ6IDEwMCU7CiAgfQoKICB9CgoKICBAc3VwcG9ydHMgbm90IChjb250YWluOiBzdHJpY3QpIHsKCiAgc2Vjb25kYXJ5LXdyYXBwZXIgI2NvbnRlbnQueXRkLWVuZ2FnZW1lbnQtcGFuZWwtc2VjdGlvbi1saXN0LXJlbmRlcmVyID4gW3BhbmVsLXRhcmdldC1pZF06b25seS1jaGlsZHsKCiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgbWF4LWhlaWdodDogMTAwJTsKICB9CgogIH0KICAqLwoKCiAgc2Vjb25kYXJ5LXdyYXBwZXIgI2NvbnRlbnQueXRkLWVuZ2FnZW1lbnQtcGFuZWwtc2VjdGlvbi1saXN0LXJlbmRlcmVyID4gW3BhbmVsLXRhcmdldC1pZF06b25seS1jaGlsZHsKICAgIC8qIGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9ekxhazBkeEJLcE0gVHJhbnNjcmlwdCBQYW5lbCBMYW5ndWFnZSBUb2dnbGUgKi8KICAgIGNvbnRhaW46IHN0eWxlIHNpemU7CiAgfQoKICBzZWNvbmRhcnktd3JhcHBlciAjY29udGVudC55dGQtZW5nYWdlbWVudC1wYW5lbC1zZWN0aW9uLWxpc3QtcmVuZGVyZXIgeXRkLXRyYW5zY3JpcHQtc2VnbWVudC1saXN0LXJlbmRlcmVyLnl0ZC10cmFuc2NyaXB0LXNlYXJjaC1wYW5lbC1yZW5kZXJlciB7CiAgICBmbGV4LWdyb3c6IDE7CiAgICBjb250YWluOiBzdHJpY3Q7CiAgfQoKICBzZWNvbmRhcnktd3JhcHBlciAjY29udGVudC55dGQtZW5nYWdlbWVudC1wYW5lbC1zZWN0aW9uLWxpc3QtcmVuZGVyZXIgeXRkLXRyYW5zY3JpcHQtc2VnbWVudC1yZW5kZXJlci5zdHlsZS1zY29wZS55dGQtdHJhbnNjcmlwdC1zZWdtZW50LWxpc3QtcmVuZGVyZXIgewogICAgY29udGFpbjogbGF5b3V0IHBhaW50IHN0eWxlOwogIH0KCiAgc2Vjb25kYXJ5LXdyYXBwZXIgI2NvbnRlbnQueXRkLWVuZ2FnZW1lbnQtcGFuZWwtc2VjdGlvbi1saXN0LXJlbmRlcmVyIHl0ZC10cmFuc2NyaXB0LXNlZ21lbnQtcmVuZGVyZXIuc3R5bGUtc2NvcGUueXRkLXRyYW5zY3JpcHQtc2VnbWVudC1saXN0LXJlbmRlcmVyID4gLnNlZ21lbnQgewogICAgY29udGFpbjogbGF5b3V0IHBhaW50IHN0eWxlOwogIH0KCgoKICAKCgoKICBib2R5IHl0ZC13YXRjaC1mbGV4eVt0aGVhdGVyXSAjc2Vjb25kYXJ5Lnl0ZC13YXRjaC1mbGV4eSB7CiAgICAgIG1hcmdpbi10b3A6IHZhcigtLXl0ZC1tYXJnaW4tM3gpOwogICAgICBwYWRkaW5nLXRvcDogMDsKICB9CgogIGJvZHkgeXRkLXdhdGNoLWZsZXh5W3RoZWF0ZXJdIHNlY29uZGFyeS13cmFwcGVyIHsKICAgICAgbWFyZ2luLXRvcDogMDsKICAgICAgcGFkZGluZy10b3A6IDA7CiAgfQoKICBib2R5IHl0ZC13YXRjaC1mbGV4eVt0aGVhdGVyXSAjY2hhdC55dGQtd2F0Y2gtZmxleHl7CiAgICAgIG1hcmdpbi1ib3R0b206ICB2YXIoLS15dGQtbWFyZ2luLTJ4KTsKICB9CgogICN0YWItY29tbWVudHMgeXRkLWNvbW1lbnRzI2NvbW1lbnRzIFtmaWVsZC1vZi1jbS1jb3VudF17CiAgICBtYXJnaW4tdG9wOjA7CiAgfQogICAgLyoKCiAgI3RhYi1pbmZvICNzb2NpYWwtbGlua3MueXRkLXZpZGVvLWRlc2NyaXB0aW9uLWluZm9jYXJkcy1zZWN0aW9uLXJlbmRlcmVyIHsKICAgIG1hcmdpbi1ib3R0b206MDsKICB9CiAgI3RhYi1pbmZvICNzb2NpYWwtbGlua3MueXRkLXZpZGVvLWRlc2NyaXB0aW9uLWluZm9jYXJkcy1zZWN0aW9uLXJlbmRlcmVyIH4gI2luZm9jYXJkcy1zZWN0aW9uIHsKICAgICAgbWFyZ2luLXRvcDogMTZweDsKICB9CgogICN0YWItaW5mbyB5dGQtc3RydWN0dXJlZC1kZXNjcmlwdGlvbi1jb250ZW50LXJlbmRlcmVyIHl0ZC12aWRlby1kZXNjcmlwdGlvbi1pbmZvY2FyZHMtc2VjdGlvbi1yZW5kZXJlci55dGQtc3RydWN0dXJlZC1kZXNjcmlwdGlvbi1jb250ZW50LXJlbmRlcmVyewogIHBhZGRpbmctYm90dG9tOjA7CiAgfQogICovCgogICN0YWItaW5mbyA+IHl0ZC1leHBhbmRhYmxlLXZpZGVvLWRlc2NyaXB0aW9uLWJvZHktcmVuZGVyZXIgewogICAgbWFyZ2luLWJvdHRvbTogdmFyKC0teXRkLW1hcmdpbi0zeCk7CiAgfQoKICAjdGFiLWluZm8gW2NsYXNzXTpsYXN0LWNoaWxkIHsKICAgIG1hcmdpbi1ib3R0b206IDA7CiAgICBwYWRkaW5nLWJvdHRvbTogMDsKICB9CgoKICAjdGFiLWluZm8geXRkLXJpY2gtbWV0YWRhdGEtcm93LXJlbmRlcmVyIHl0ZC1yaWNoLW1ldGFkYXRhLXJlbmRlcmVyIHsKICAgIG1heC13aWR0aDogaW5pdGlhbDsKICB9CgogIHl0ZC13YXRjaC1mbGV4eVtpcy10d28tY29sdW1uc19dIHNlY29uZGFyeS13cmFwcGVyICNjaGF0Lnl0ZC13YXRjaC1mbGV4eSB7CiAgICBtYXJnaW4tYm90dG9tOiB2YXIoLS15dGQtbWFyZ2luLTN4KTsKICB9CgogIHl0ZC13YXRjaC1mbGV4eVt0eXQtdGFiXSB0cC15dC1wYXBlci10b29sdGlwIHsKICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgY29udGFpbjogY29udGVudDsKICB9CgoKICB5dGQtd2F0Y2gtaW5mby10ZXh0IHRwLXl0LXBhcGVyLXRvb2x0aXAuc3R5bGUtc2NvcGUueXRkLXdhdGNoLWluZm8tdGV4dHsKICAgIG1hcmdpbi1ib3R0b206IC0zMDBweDsKICAgIG1hcmdpbi10b3A6IC05NnB4OwogIH0KCgogIFtoaWRlLWRlZmF1bHQtdGV4dC1pbmxpbmUtZXhwYW5kZXJdICNib3R0b20tcm93ICNkZXNjcmlwdGlvbi55dGQtd2F0Y2gtbWV0YWRhdGEgewogIAogIGZvbnQtc2l6ZTogMS4ycmVtOwogIGxpbmUtaGVpZ2h0OiAxLjhyZW07CgogIH0KCiAgW2hpZGUtZGVmYXVsdC10ZXh0LWlubGluZS1leHBhbmRlcl0gI2JvdHRvbS1yb3cgI2Rlc2NyaXB0aW9uLnl0ZC13YXRjaC1tZXRhZGF0YSB5dC1hbmltYXRlZC1yb2xsaW5nLW51bWJlcnsKICAgICAgZm9udC1zaXplOiBpbmhlcml0OwogIH0KCgogIFtoaWRlLWRlZmF1bHQtdGV4dC1pbmxpbmUtZXhwYW5kZXJdICNib3R0b20tcm93ICNkZXNjcmlwdGlvbi55dGQtd2F0Y2gtbWV0YWRhdGEgI2luZm8tY29udGFpbmVyLnN0eWxlLXNjb3BlLnl0ZC13YXRjaC1pbmZvLXRleHR7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogIH0KCgogIHl0ZC13YXRjaC1mbGV4eVtoaWRlLWRlZmF1bHQtdGV4dC1pbmxpbmUtZXhwYW5kZXJdewogICAgLS10eXQtYm90dG9tLXdhdGNoLW1ldGFkYXRhLW1hcmdpbjogNnB4OwogIH0KCiAgW2hpZGUtZGVmYXVsdC10ZXh0LWlubGluZS1leHBhbmRlcl0gI2JvdHRvbS1yb3cgI2Rlc2NyaXB0aW9uLnl0ZC13YXRjaC1tZXRhZGF0YSA+ICNkZXNjcmlwdGlvbi1pbm5lci55dGQtd2F0Y2gtbWV0YWRhdGF7CgogICAgbWFyZ2luOiA2cHggMTJweDsgCgogIH0KCiAgW2hpZGUtZGVmYXVsdC10ZXh0LWlubGluZS1leHBhbmRlcl0geXRkLXdhdGNoLW1ldGFkYXRhW3RpdGxlLWhlYWRsaW5lLXhzXSBoMS55dGQtd2F0Y2gtbWV0YWRhdGEgewoKICAgIGZvbnQtc2l6ZTogMS44cmVtOwogIH0KCgogIAoKICB5dGQtd2F0Y2gtZmxleHlbaXMtdHdvLWNvbHVtbnNfXVtoaWRlLWRlZmF1bHQtdGV4dC1pbmxpbmUtZXhwYW5kZXJdICNiZWxvdy5zdHlsZS1zY29wZS55dGQtd2F0Y2gtZmxleHkgeXRkLW1lcmNoLXNoZWxmLXJlbmRlcmVyewogICAgICBwYWRkaW5nOiAwOwogICAgICBib3JkZXI6IDA7CiAgICAgIG1hcmdpbjowOwogIH0KCgogIHl0ZC13YXRjaC1mbGV4eVtpcy10d28tY29sdW1uc19dW2hpZGUtZGVmYXVsdC10ZXh0LWlubGluZS1leHBhbmRlcl0gI2JlbG93LnN0eWxlLXNjb3BlLnl0ZC13YXRjaC1mbGV4eSB5dGQtd2F0Y2gtbWV0YWRhdGEueXRkLXdhdGNoLWZsZXh5IHsKICAgIG1hcmdpbi1ib3R0b206IDZweDsKICB9CgogICN0YWItaW5mbyB5dC12aWRlby1hdHRyaWJ1dGUtdmlldy1tb2RlbCAueXQtdmlkZW8tYXR0cmlidXRlLXZpZXctbW9kZWwtLWhvcml6b250YWwgLnl0LXZpZGVvLWF0dHJpYnV0ZS12aWV3LW1vZGVsX19saW5rLWNvbnRhaW5lciAueXQtdmlkZW8tYXR0cmlidXRlLXZpZXctbW9kZWxfX2hlcm8tc2VjdGlvbiB7CiAgICBmbGV4LXNocmluazowOwogIH0KCgogICN0YWItaW5mbyB5dC12aWRlby1hdHRyaWJ1dGUtdmlldy1tb2RlbCAueXQtdmlkZW8tYXR0cmlidXRlLXZpZXctbW9kZWxfX292ZXJmbG93LW1lbnV7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS15dC1lbW9qaS1waWNrZXItY2F0ZWdvcnktYmFja2dyb3VuZC1jb2xvcik7CiAgICBib3JkZXItcmFkaXVzOiA5OXB4OwogIH0KCiAgI3RhYi1pbmZvIHl0LXZpZGVvLWF0dHJpYnV0ZS12aWV3LW1vZGVsIC55dC12aWRlby1hdHRyaWJ1dGUtdmlldy1tb2RlbC0taW1hZ2Utc3F1YXJlLnl0LXZpZGVvLWF0dHJpYnV0ZS12aWV3LW1vZGVsLS1pbWFnZS1sYXJnZSAueXQtdmlkZW8tYXR0cmlidXRlLXZpZXctbW9kZWxfX2hlcm8tc2VjdGlvbnsKCiAgICBtYXgtaGVpZ2h0OiAxMjhweDsKICB9CgogICN0YWItaW5mbyB5dC12aWRlby1hdHRyaWJ1dGUtdmlldy1tb2RlbCAueXQtdmlkZW8tYXR0cmlidXRlLXZpZXctbW9kZWwtLWltYWdlLWxhcmdlIC55dC12aWRlby1hdHRyaWJ1dGUtdmlldy1tb2RlbF9faGVyby1zZWN0aW9uewoKICAgIG1heC13aWR0aDogMTI4cHg7CiAgfQoKICAjdGFiLWluZm8geXRkLXJlZWwtc2hlbGYtcmVuZGVyZXIgI2l0ZW1zLnl0LWhvcml6b250YWwtbGlzdC1yZW5kZXJlciB5dGQtcmVlbC1pdGVtLXJlbmRlcmVyLnl0LWhvcml6b250YWwtbGlzdC1yZW5kZXJlciB7CiAgICBtYXgtd2lkdGg6IDE0MnB4OwogIH0KCiAgeXRkLXdhdGNoLWluZm8tdGV4dCN5dGQtd2F0Y2gtaW5mby10ZXh0LnN0eWxlLXNjb3BlLnl0ZC13YXRjaC1tZXRhZGF0YSAjdmlldy1jb3VudC5zdHlsZS1zY29wZS55dGQtd2F0Y2gtaW5mby10ZXh0ewogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIAogICAgfQoKCiAgeXRkLXdhdGNoLWluZm8tdGV4dCN5dGQtd2F0Y2gtaW5mby10ZXh0LnN0eWxlLXNjb3BlLnl0ZC13YXRjaC1tZXRhZGF0YSAjZGF0ZS10ZXh0LnN0eWxlLXNjb3BlLnl0ZC13YXRjaC1pbmZvLXRleHR7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgCiAgICB9CgoKICB5dGQtd2F0Y2gtaW5mby10ZXh0Om5vdChbZGV0YWlsZWRdKSAjaW5mby55dGQtd2F0Y2gtaW5mby10ZXh0IGEueXQtc2ltcGxlLWVuZHBvaW50Lnl0LWZvcm1hdHRlZC1zdHJpbmcgewoKICBwb2ludGVyLWV2ZW50czogbm9uZTsKICB9CgoKICBib2R5IHl0ZC1hcHAgPiB5dGQtcG9wdXAtY29udGFpbmVyID4gdHAteXQtaXJvbi1kcm9wZG93biA+ICNjb250ZW50V3JhcHBlciA+ICBbc2xvdD0iZHJvcGRvd24tY29udGVudCJdIHsKCiAgICAgIGJhY2tkcm9wLWZpbHRlcjogbm9uZSA7CiAgfQoKICAjdGFiLWluZm8gW3R5dC1jbG9uZS1yZWZyZXNoLWNvdW50XSB7CiAgICBvdmVyZmxvdzogdmlzaWJsZSAhaW1wb3J0YW50OwogIH0KCiAgLyogY3NzIHVua25vd24gc2l6aW5nIGJ1ZyAqLwogICN0YWItaW5mbyAjaXRlbXMueXRkLWhvcml6b250YWwtY2FyZC1saXN0LXJlbmRlcmVyIHl0LXZpZGVvLWF0dHJpYnV0ZS12aWV3LW1vZGVsLnl0ZC1ob3Jpem9udGFsLWNhcmQtbGlzdC1yZW5kZXJlciB7CiAgICAgIGNvbnRhaW46IGxheW91dDsKICAgIH0KCgogIC8qIGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9MmgzcGJkVFB1NlEgKi8KCiAgI3RhYi1pbmZvICN0aHVtYm5haWwtY29udGFpbmVyLnl0ZC1zdHJ1Y3R1cmVkLWRlc2NyaXB0aW9uLWNoYW5uZWwtbG9ja3VwLXJlbmRlcmVyIHsKICAgIAogICAgICBmbGV4LXNocmluazogMDsKICB9CiAgI3RhYi1pbmZvIHl0ZC1tZWRpYS1sb2NrdXAtcmVuZGVyZXJbaXMtY29tcGFjdF0gI3RodW1ibmFpbC1jb250YWluZXIueXRkLW1lZGlhLWxvY2t1cC1yZW5kZXJlciB7CiAgICAKICAgICAgZmxleC1zaHJpbms6IDA7CiAgfQoKICAvKiBodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PWNWMmdCVTZoS2ZZICovCiAgc2Vjb25kYXJ5LXdyYXBwZXIgeXRkLWRvbmF0aW9uLXVuYXZhaWxhYmxlLXJlbmRlcmVyewogICAgLS15dGQtbWFyZ2luLTZ4OnZhcigtLXl0ZC1tYXJnaW4tMngpOwogICAgLS15dGQtbWFyZ2luLTV4OnZhcigtLXl0ZC1tYXJnaW4tMngpOwogICAgLS15dGQtbWFyZ2luLTR4OnZhcigtLXl0ZC1tYXJnaW4tMngpOwogICAgLS15dGQtbWFyZ2luLTN4OnZhcigtLXl0ZC1tYXJnaW4tMngpOwogIH0KCgogIFt0eXQtbm8tbGVzcy1idG5dICNsZXNzewogICAgZGlzcGxheTogbm9uZTsKICB9CgogIC50eXQtbWV0YWRhdGEtaG92ZXItcmVzaXplZCAjcHVyY2hhc2UtYnV0dG9uLAogIC50eXQtbWV0YWRhdGEtaG92ZXItcmVzaXplZCAjc3BvbnNvci1idXR0b24sCiAgLnR5dC1tZXRhZGF0YS1ob3Zlci1yZXNpemVkICNhbmFseXRpY3MtYnV0dG9uLAogIC50eXQtbWV0YWRhdGEtaG92ZXItcmVzaXplZCAjc3Vic2NyaWJlLWJ1dHRvbgogIHsKICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsKICB9CgogIC50eXQtbWV0YWRhdGEtaG92ZXIgI3VwbG9hZC1pbmZvIHsKICAgIG1heC13aWR0aDogbWF4LWNvbnRlbnQ7CiAgICBtaW4td2lkdGg6IG1heC1jb250ZW50OwogICAgZmxleC1iYXNpczogMTAwdnc7CiAgICBmbGV4LXNocmluazogMDsKICB9CgogICN0YWItaW5mbyB5dGQtc3RydWN0dXJlZC1kZXNjcmlwdGlvbi1wbGF5bGlzdC1sb2NrdXAtcmVuZGVyZXJbY29sbGVjdGlvbnNdICNwbGF5bGlzdC10aHVtYm5haWwuc3R5bGUtc2NvcGUueXRkLXN0cnVjdHVyZWQtZGVzY3JpcHRpb24tcGxheWxpc3QtbG9ja3VwLXJlbmRlcmVyIHsKICAgICAgbWF4LXdpZHRoOiAxMDAlOwogIH0KCiAgI3RhYi1pbmZvIHl0ZC1zdHJ1Y3R1cmVkLWRlc2NyaXB0aW9uLXBsYXlsaXN0LWxvY2t1cC1yZW5kZXJlcltjb2xsZWN0aW9uc10gI2xvY2t1cC1jb250YWluZXIueXRkLXN0cnVjdHVyZWQtZGVzY3JpcHRpb24tcGxheWxpc3QtbG9ja3VwLXJlbmRlcmVyewogICAgICBwYWRkaW5nOiAxcHg7CiAgfQoKICAjdGFiLWluZm8geXRkLXN0cnVjdHVyZWQtZGVzY3JpcHRpb24tcGxheWxpc3QtbG9ja3VwLXJlbmRlcmVyW2NvbGxlY3Rpb25zXSAjdGh1bWJuYWlsLnl0ZC1zdHJ1Y3R1cmVkLWRlc2NyaXB0aW9uLXBsYXlsaXN0LWxvY2t1cC1yZW5kZXJlciB7CiAgICAgIG91dGxpbmU6IDFweCBzb2xpZCByZ2JhKDEyNywgMTI3LCAxMjcsIDAuNSk7CiAgfQoKICAvKiBtaW5vciBzcGFjaW5nIGZpeCAqLwoKICAvKiBodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PXdBY1kyZngwVVdRICovCiAgeXRkLWxpdmUtY2hhdC1mcmFtZSNjaGF0W2NvbGxhcHNlZF0geXRkLW1lc3NhZ2UtcmVuZGVyZXIgfiAjc2hvdy1oaWRlLWJ1dHRvbi55dGQtbGl2ZS1jaGF0LWZyYW1lPnl0ZC10b2dnbGUtYnV0dG9uLXJlbmRlcmVyLnl0ZC1saXZlLWNoYXQtZnJhbWUKICB7CiAgICBwYWRkaW5nOjA7CiAgfQoKICAudHl0LWluZm8taW52aXNpYmxlIHsKICBkaXNwbGF5OiBub25lOwogIH0KCiAgW3R5dC1wbGF5bGlzdC1leHBhbmRlZF0gc2Vjb25kYXJ5LXdyYXBwZXIgPiB5dGQtcGxheWxpc3QtcGFuZWwtcmVuZGVyZXIjcGxheWxpc3QgewogICAgICBvdmVyZmxvdzogYXV0bzsKICAgICAgZmxleC1zaHJpbms6IDE7CiAgICAgIGZsZXgtZ3JvdzogMTsKICAgICAgbWF4LWhlaWdodDogdW5zZXQgIWltcG9ydGFudDsKICB9CgogIFt0eXQtcGxheWxpc3QtZXhwYW5kZWRdIHNlY29uZGFyeS13cmFwcGVyID4geXRkLXBsYXlsaXN0LXBhbmVsLXJlbmRlcmVyI3BsYXlsaXN0ID4gI2NvbnRhaW5lciB7CiAgICBtYXgtaGVpZ2h0OiB1bnNldCAhaW1wb3J0YW50OwogIH0KCiAgc2Vjb25kYXJ5LXdyYXBwZXIgeXRkLXBsYXlsaXN0LXBhbmVsLXJlbmRlcmVyewogICAgLS15dGQtbWFyZ2luLTZ4OiB2YXIoLS15dGQtbWFyZ2luLTN4KTsKICB9CgogIHl0ZC13YXRjaC1mbGV4eVt0aGVhdGVyXSB5dGQtcGxheWxpc3QtcGFuZWwtcmVuZGVyZXJbY29sbGFwc2libGVdW2NvbGxhcHNlZF0gLmhlYWRlci55dGQtcGxheWxpc3QtcGFuZWwtcmVuZGVyZXIgewogICAgcGFkZGluZzogNnB4IDhweDsKICB9CiAgeXRkLXdhdGNoLWZsZXh5W3RoZWF0ZXJdICNwbGF5bGlzdC55dGQtd2F0Y2gtZmxleHkgewogICAgbWFyZ2luLWJvdHRvbTogdmFyKC0teXRkLW1hcmdpbi0yeCk7CiAgfQoKICB5dGQtd2F0Y2gtZmxleHlbdGhlYXRlcl0gI3JpZ2h0LXRhYnMgLnRhYi1idG5bdHl0LXRhYi1jb250ZW50XSB7CiAgICBwYWRkaW5nOiA4cHggNHB4IDZweDsKICAgIGJvcmRlci1ib3R0b206IDBweCBzb2xpZCB0cmFuc3BhcmVudDsKICB9CgogIHl0ZC13YXRjaC1mbGV4eSB7CiAgICAtLXR5dC1ib3R0b20td2F0Y2gtbWV0YWRhdGEtbWFyZ2luOiAxMnB4OyAgCiAgfQogIHl0ZC13YXRjaC1mbGV4eVtyb3VuZGVkLWluZm8tcGFuZWxdLCAKICB5dGQtd2F0Y2gtZmxleHlbcm91bmRlZC1wbGF5ZXItbGFyZ2VdIHsKICAgIC0tdHl0LXJvdW5kZWQtYTE6ICR7VkFMX1JPVU5ERURfQTF9cHg7CiAgfQoKICAjYm90dG9tLXJvdy5zdHlsZS1zY29wZS55dGQtd2F0Y2gtbWV0YWRhdGEgLml0ZW0ueXRkLXdhdGNoLW1ldGFkYXRhIHsKICAgIG1hcmdpbi1yaWdodDogdmFyKC0tdHl0LWJvdHRvbS13YXRjaC1tZXRhZGF0YS1tYXJnaW4sIDEycHgpOwogICAgbWFyZ2luLXRvcDogdmFyKC0tdHl0LWJvdHRvbS13YXRjaC1tZXRhZGF0YS1tYXJnaW4sIDEycHgpOwogIH0KCiAgLyogZml4IGNpbmVtYXRpY3MgbGlnaHRpbmcgaXNzdWUgKi8KICAjY2luZW1hdGljcyB7CiAgICBjb250YWluOiBsYXlvdXQgc3R5bGUgc2l6ZTsKICB9CgogIGAKfTsKKGFzeW5jICgpID0+IHsKICBjb25zdCBjb21tdW5pY2F0aW9uS2V5ID0gYGNrLSR7RGF0ZS5ub3coKX0tJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzMTQxNTkyNjUzNTkgKyAzMTQxNTkyNjUzNTkpLnRvU3RyaW5nKDM2KX1gOwoKICAvKiogQHR5cGUge2dsb2JhbFRoaXMuUHJvbWlzZUNvbnN0cnVjdG9yfSAqLwogIGNvbnN0IFByb21pc2UgPSAoYXN5bmMgKCkgPT4geyB9KSgpLmNvbnN0cnVjdG9yOyAvLyBZb3VUdWJlIGhhY2tzIFByb21pc2UgaW4gV2F0ZXJGb3ggQ2xhc3NpYyBhbmQgIlByb21pc2UucmVzb2x2ZSgwKSIgbmV2ZXJzIHJlc29sdmUuCgogIGlmICghZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7CiAgICBhd2FpdCBQcm9taXNlLnJlc29sdmUoMCk7CiAgICB3aGlsZSAoIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkgewogICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IG5leHRCcm93c2VyVGljayhyZXNvbHZlKSkudGhlbigpLmNhdGNoKGNvbnNvbGUud2Fybik7CiAgICB9CiAgfQogIGNvbnN0IHNvdXJjZVVSTCA9ICdkZWJ1ZzovL3RhYnZpZXcteW91dHViZS90YWJ2aWV3LmV4ZWN1dGlvbi5qcycKICBjb25zdCB0ZXh0Q29udGVudCA9IGAoJHtleGVjdXRpb25TY3JpcHR9KSgiJHtjb21tdW5pY2F0aW9uS2V5fSIpOyR7IlxuXG4ifS8vIyBzb3VyY2VVUkw9JHtzb3VyY2VVUkx9JHsnXG4nfWAKCiAgLy8gY29uc3QgaXNNeVNjcmlwdEluQ2hyb21lUnVudGltZSA9ICgpID0+IHR5cGVvZiBHTSA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mICgoKCh3aW5kb3cgfHwgMCkuY2hyb21lIHx8IDApLnJ1bnRpbWUgfHwgMCkuZ2V0VVJMKSA9PT0gJ2Z1bmN0aW9uJzsKICAvLyBjb25zdCBpc0dNQXZhaWxhYmxlID0gKCkgPT4gdHlwZW9mIEdNICE9PSAndW5kZWZpbmVkJyAmJiAhaXNNeVNjcmlwdEluQ2hyb21lUnVudGltZSgpOwoKICAvLyBpZihpc015U2NyaXB0SW5DaHJvbWVSdW50aW1lKCkpewogIC8vICAgbGV0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogIC8vICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnb25jbGljaycsIHRleHRDb250ZW50KTsKICAvLyAgIGJ1dHRvbi5jbGljaygpOwogIC8vICAgYnV0dG9uID0gbnVsbDsKICAvLyB9ZWxzZXsKICAvLyAgIEdNX2FkZEVsZW1lbnQoJ3NjcmlwdCcsIHsKICAvLyAgICAgdGV4dENvbnRlbnQ6IHRleHRDb250ZW50CiAgLy8gICB9KTsKICAvLyB9CgogIGxldCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICBidXR0b24uc2V0QXR0cmlidXRlKCdvbmNsaWNrJywgY3JlYXRlSFRNTCh0ZXh0Q29udGVudCkpOyAvLyBtYXggc2l6ZSAxMCBtaWxsaW9uIGJ5dGVzCiAgYnV0dG9uLmNsaWNrKCk7CiAgYnV0dG9uID0gbnVsbDsKCgogIGxldCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgY29uc3Qgc291cmNlVVJMTWFpbkNTUyA9ICdkZWJ1ZzovL3RhYnZpZXcteW91dHViZS90YWJ2aWV3Lm1haW4uY3NzJzsKICBzdHlsZS50ZXh0Q29udGVudCA9IGAke3N0eWxlc1snbWFpbiddLnRyaW0oKX0keydcblxuJ30vKiMgc291cmNlVVJMPSR7c291cmNlVVJMTWFpbkNTU30gKi8keydcbid9YDsKICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoc3R5bGUpOwoKCn0pKCk7Cg==","requires":[{"meta":{"name":"nextBrowserTick.min.js","url":"https://cdn.jsdelivr.net/gh/cyfung1031/userscript-supports@c2b707e4977f77792042d4a5015fb188aae4772e/library/nextBrowserTick.min.js","ts":1758014587537,"mimetype":"text/javascript"},"source":"LyoqCiAqIE1pbmlmaWVkIGJ5IGpzRGVsaXZyIHVzaW5nIFRlcnNlciB2NS4zOS4wLgogKiBPcmlnaW5hbCBmaWxlOiAvZ2gvY3lmdW5nMTAzMS91c2Vyc2NyaXB0LXN1cHBvcnRzQGMyYjcwN2U0OTc3Zjc3NzkyMDQyZDRhNTAxNWZiMTg4YWFlNDc3MmUvbGlicmFyeS9uZXh0QnJvd3NlclRpY2suanMKICoKICogRG8gTk9UIHVzZSBTUkkgd2l0aCBkeW5hbWljYWxseSBnZW5lcmF0ZWQgZmlsZXMhIE1vcmUgaW5mb3JtYXRpb246IGh0dHBzOi8vd3d3LmpzZGVsaXZyLmNvbS91c2luZy1zcmktd2l0aC1keW5hbWljLWZpbGVzCiAqLwp2YXIgbmV4dEJyb3dzZXJUaWNrPXZvaWQgMCE9PW5leHRCcm93c2VyVGljayYmbmV4dEJyb3dzZXJUaWNrLnZlcnNpb24+PTI/bmV4dEJyb3dzZXJUaWNrOigoKT0+eyJ1c2Ugc3RyaWN0Ijtjb25zdCBlPSJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDp0aGlzO2xldCB0PSEwO2lmKCFmdW5jdGlvbiBuKHMpe3JldHVybiBzP3Q9ITE6ZS5wb3N0TWVzc2FnZSYmIWUuaW1wb3J0U2NyaXB0cyYmZS5hZGRFdmVudExpc3RlbmVyPyhlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLG4sITEpLGUucG9zdE1lc3NhZ2UoIiQkJCIsIioiKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLG4sITEpLHQpOnZvaWQgMH0oKSlyZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oIllvdXIgYnJvd3NlciBlbnZpcm9ubWVudCBjYW5ub3QgdXNlIG5leHRCcm93c2VyVGljayIpO2NvbnN0IG49KGFzeW5jKCk9Pnt9KSgpLmNvbnN0cnVjdG9yO2xldCBzPW51bGw7Y29uc3Qgbz1uZXcgTWFwLHtmbG9vcjpyLHJhbmRvbTppfT1NYXRoO2xldCBsO2Rve2w9YCQkbmV4dEJyb3dzZXJUaWNrJCQkeyhpKCkrOCkudG9TdHJpbmcoKS5zbGljZSgyKX0kJGB9d2hpbGUobCBpbiBlKTtjb25zdCBhPWwsYz1hLmxlbmd0aCs5O2VbYV09MTtlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLChlPT57aWYoMCE9PW8uc2l6ZSl7Y29uc3QgdD0oZXx8MCkuZGF0YTtpZigic3RyaW5nIj09dHlwZW9mIHQmJnQubGVuZ3RoPT09YyYmZS5zb3VyY2U9PT0oZS50YXJnZXR8fDEpKXtjb25zdCBlPW8uZ2V0KHQpO2UmJigicCI9PT10WzBdJiYocz1udWxsKSxvLmRlbGV0ZSh0KSxlKCkpfX19KSwhMSk7Y29uc3QgZD0odD1vKT0+e2lmKHQ9PT1vKXtpZihzKXJldHVybiBzO2xldCB0O2Rve3Q9YHAke2F9JHtyKDMxNDE1OTI2NTM1OSppKCkrMzE0MTU5MjY1MzU5KS50b1N0cmluZygzNil9YH13aGlsZShvLmhhcyh0KSk7cmV0dXJuIHM9bmV3IG4oKGU9PntvLnNldCh0LGUpfSkpLGUucG9zdE1lc3NhZ2UodCwiKiIpLHQ9bnVsbCxzfXtsZXQgbjtkb3tuPWBmJHthfSR7cigzMTQxNTkyNjUzNTkqaSgpKzMxNDE1OTI2NTM1OSkudG9TdHJpbmcoMzYpfWB9d2hpbGUoby5oYXMobikpO28uc2V0KG4sdCksZS5wb3N0TWVzc2FnZShuLCIqIil9fTtyZXR1cm4gZC52ZXJzaW9uPTIsZH0pKCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPS9zbS9jMWEwZjY4YmNlZDYxYmE5YWRkNDFhM2UzZDg5ZTI2YzQxYjIzNDJiYzc2MzUwNGIwMmFiMDhkODg4ZjY4NjYzLm1hcA=="}]},{"name":"YouTube speed rememberer","options":{"check_for_updates":true,"user_modified":null,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":null,"unwrap":null,"run_at":null,"run_in":null,"tags":[],"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["*.youtube.com/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"orig_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-body","orig_run_in":[],"orig_noframes":null}},"storage":{"ts":1755912927267,"data":{}},"enabled":true,"position":5,"file_url":"https://greasyfork.org/scripts/27091-youtube-speed-rememberer/code/YouTube%20speed%20rememberer.user.js","uuid":"fa903b9e-8d6f-408f-bcf7-5e2fd57a0512","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIFlvdVR1YmUgc3BlZWQgcmVtZW1iZXJlcgovLyBAdmVyc2lvbiAgICAgICAgMC4zLjQKLy8gQGRlc2NyaXB0aW9uICAgIFJlbWVtYmVycyBwbGF5YmFjayBzcGVlZC4KLy8gQGRlc2NyaXB0aW9uOnJ1INCX0LDQv9C+0LzQuNC90LDQtdGCINGB0LrQvtGA0L7RgdGC0Ywg0LLQvtGB0L/RgNC+0LjQt9Cy0LXQtNC10L3QuNGPLgovLyBAYXV0aG9yICAgICAgICAgZ3Z2YWQKLy8gQG1hdGNoICAgICAgICAgICoueW91dHViZS5jb20vKgovLyBAcnVuLWF0ICAgICAgICAgZG9jdW1lbnQtYm9keQovLyBAbGljZW5zZSAgICAgICAgR1BMLTMuMCs7IGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9ncGwtMy4wLnR4dAovLyBAbmFtZXNwYWNlICAgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy91c2Vycy8xMDAxNjAKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKSB7CiAgICAndXNlIHN0cmljdCc7CiAgICBjb25zdCBQTEFZRVJfU0VMRUNUT1IgPSAiI21vdmllX3BsYXllciI7CiAgICBsZXQgc3RvcmUgPSB7CiAgICAgICAgZ2V0IHJhdGUoKSB7CiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJwbC1yYXRlIikpIHx8IDEuMDsKICAgICAgICB9LAogICAgICAgIHNldCByYXRlKHYpIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInBsLXJhdGUiLCB2KTsKICAgICAgICB9CiAgICB9CgogICAgLy8gIHNldCBidXR0b24gb24gdmlkZW8gcGxheWVyCiAgICAvLyAgX21zZyAtIGxhYmxlIHN0cmluZwogICAgbGV0IHNldExhYmVsID0gZnVuY3Rpb24oX21zZywgX21wKSB7CiAgICAgICAgbGV0IGxhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI195dHAtbGFiZWwiKTsKICAgICAgICBpZiAoX21zZyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGlmIChsYWJlbCkgbGFiZWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChsYWJlbCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKGxhYmVsKSB7CiAgICAgICAgICAgIGxhYmVsLmlubmVyVGV4dCA9IF9tc2c7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGxldCBjbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFBMQVlFUl9TRUxFQ1RPUikucXVlcnlTZWxlY3RvcigiI21vdmllX3BsYXllciAueXRwLXJpZ2h0LWNvbnRyb2xzIik7CgogICAgICAgIGxldCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKCdpZCcsJ195dHAtbGFiZWwnKTsKICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCd5dHAtYnV0dG9uJyk7CiAgICAgICAgc3Bhbi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIF9tcC5zZXRQbGF5YmFja1JhdGUoMSk7CiAgICAgICAgfTsKICAgICAgICBzcGFuLmlubmVyVGV4dCA9IF9tc2c7CgogICAgICAgIGNscy5pbnNlcnRCZWZvcmUoc3BhbiwgY2xzLmZpcnN0Q2hpbGQpOwogICAgfTsKCiAgICAvLyAgc2V0IG9yIHJlbW92ZSBidXR0b24KICAgIGxldCBzZXRTcGVlZExhYmVsID0gZnVuY3Rpb24ocmF0ZSwgbXApIHsKICAgICAgICBzZXRMYWJlbCgocmF0ZT09MSk/IHVuZGVmaW5lZCA6ICd4JytyYXRlLCBtcCk7CiAgICB9OwoKICAgIC8vICBtb2RpZmljYXRlIHBsYXllciBvYmplY3QgYW5kIHN0b3JlIHBsYXkgcmF0ZQogICAgLy8gIG1wIC0gbW92aWVwbGF5ZXIgb2JqZWN0CiAgICBsZXQgd29ya2VyID0gZnVuY3Rpb24obXApIHsKICAgICAgICBsZXQgc3RhdGUgPSBtcC5nZXRQcm9ncmVzc1N0YXRlKCk7CgogICAgICAgIGlmIChzdG9yZS5yYXRlICE9IDEuMCAmJiAhc3RhdGUuaXNBdExpdmVIZWFkKSB7CiAgICAgICAgICAgIG1wLnNldFBsYXliYWNrUmF0ZShzdG9yZS5yYXRlKTsKICAgICAgICAgICAgc2V0U3BlZWRMYWJlbChtcC5nZXRQbGF5YmFja1JhdGUoKSwgbXApOwogICAgICAgIH0KCiAgICAgICAgbXAuYWRkRXZlbnRMaXN0ZW5lcigib25QbGF5YmFja1JhdGVDaGFuZ2UiLCBmdW5jdGlvbigpewogICAgICAgICAgICBzdG9yZS5yYXRlID0gbXAuZ2V0UGxheWJhY2tSYXRlKCk7CiAgICAgICAgICAgIHNldFNwZWVkTGFiZWwobXAuZ2V0UGxheWJhY2tSYXRlKCksIG1wKTsKICAgICAgICB9KTsKICAgIH07CgogICAgbGV0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24obVJlY29yZCl7CiAgICAgICAgbGV0IHBsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihQTEFZRVJfU0VMRUNUT1IpOwogICAgICAgIGlmIChwbCkgewogICAgICAgICAgICB3b3JrZXIocGwpOwogICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKTsKICAgICAgICB9CiAgICB9KTsKICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwge2F0dHJpYnV0ZXM6IGZhbHNlLCBjaGlsZExpc3Q6IHRydWUsIGNoYXJhY3RlckRhdGE6IGZhbHNlfSk7Cn0pKCk7Cg=="},{"name":"Remove YouTube Shorts","options":{"check_for_updates":true,"user_modified":null,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":null,"unwrap":null,"run_at":null,"run_in":null,"tags":[],"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["https://*.youtube.com/*","https://m.youtube.com/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"orig_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-start","orig_run_in":[],"orig_noframes":null,"orig_tags":[]}},"storage":{"ts":1756026877930,"data":{}},"enabled":true,"position":6,"file_url":"https://update.greasyfork.org/scripts/522057/Remove%20YouTube%20Shorts.user.js","uuid":"55193199-e2f5-4f94-a910-d615ab51d5fa","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICAgICBSZW1vdmUgWW91VHViZSBTaG9ydHMKLy8gQG5hbWU6emgtQ04gICAgICAgICDnp7vpmaQgWW91VHViZSBTaG9ydHMKLy8gQG5hbWU6emgtVFcgICAgICAgICDnp7vpmaQgWW91VHViZSBTaG9ydHMKLy8gQG5hbWU6amEgICAgICAgICAgICBZb3VUdWJlIOOBriBTaG9ydHMg44KS5YmK6ZmkCi8vIEBuYW1lOmtvICAgICAgICAgICAgWW91VHViZSBTaG9ydHMg7KCc6rGwCi8vIEBuYW1lOmVzICAgICAgICAgICAgRWxpbWluYXIgWW91VHViZSBTaG9ydHMKLy8gQG5hbWU6cHQtQlIgICAgICAgICBSZW1vdmVyIFlvdVR1YmUgU2hvcnRzCi8vIEBuYW1lOnJ1ICAgICAgICAgICAg0KPQtNCw0LvQuNGC0YwgWW91VHViZSBTaG9ydHMKLy8gQG5hbWU6aWQgICAgICAgICAgICBIYXB1cyBZb3VUdWJlIFNob3J0cwovLyBAbmFtZTpoaSAgICAgICAgICAgIFlvdVR1YmUgU2hvcnRzIOCkueCkn+CkvuCkj+CkgQovLyBAbmFtZXNwYWNlICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9zdHJhbmdlWm9tYmllcwovLyBAdmVyc2lvbiAgICAgICAgICAgIDIwMjUuNC40LjAKLy8gQGRlc2NyaXB0aW9uICAgICAgICBSZW1vdmUgWW91VHViZSBTaG9ydHMgdGFncywgZGlzbWlzc2libGUgZWxlbWVudHMsIFNob3J0cyBsaW5rcywgYW5kIFJlZWwgU2hlbGYKLy8gQGRlc2NyaXB0aW9uOnpoLUNOICDnp7vpmaQgWW91VHViZSDkuIrnmoQgU2hvcnRzIOagh+etvuOAgURpc21pc3NpYmxlIOWFg+e0oOOAgVNob3J0cyDpk77mjqXlkowgUmVlbCBTaGVsZgovLyBAZGVzY3JpcHRpb246emgtVFcgIOenu+mZpCBZb3VUdWJlIOS4iueahCBTaG9ydHMg5qCH562+44CBRGlzbWlzc2libGUg5YWD57Sg44CBU2hvcnRzIOmTvuaOpeWSjCBSZWVsIFNoZWxmCi8vIEBkZXNjcmlwdGlvbjpqYSAgICAgWW91VHViZSDkuIrjga4gU2hvcnRzIOOCv+OCsOOAgeODh+OCo+OCueODn+ODg+OCt+ODluODq+imgee0oOOAgVNob3J0cyDjg6rjg7Pjgq/jgIHjgYrjgojjgbMgUmVlbCBTaGVsZiDjgpLliYrpmaQKLy8gQGRlc2NyaXB0aW9uOmtvICAgICBZb3VUdWJl7J2YIFNob3J0cyDtg5zqt7gsIO2VtOygnCDqsIDriqXtlZwg7JqU7IaMLCBTaG9ydHMg66eB7YGsIOuwjyBSZWVsIOyEoOuwmCDsoJzqsbAKLy8gQGRlc2NyaXB0aW9uOmVzICAgICBFbGltaW5hciBldGlxdWV0YXMgZGUgU2hvcnRzIGRlIFlvdVR1YmUsIGVsZW1lbnRvcyBkZXNlY2hhYmxlcywgZW5sYWNlcyBkZSBTaG9ydHMgeSBlc3RhbnRlIGRlIGNhcnJldGVzCi8vIEBkZXNjcmlwdGlvbjpwdC1CUiAgUmVtb3ZlciB0YWdzIGRlIFNob3J0cyBkbyBZb3VUdWJlLCBlbGVtZW50b3MgZGVzY2FydMOhdmVpcywgbGlua3MgZGUgU2hvcnRzIGUgcHJhdGVsZWlyYSBkZSByb2xvcwovLyBAZGVzY3JpcHRpb246cnUgICAgINCj0LTQsNC70LjRgtC1INGC0LXQs9C4IFlvdVR1YmUgU2hvcnRzLCDRjdC70LXQvNC10L3RgtGLLCDQutC+0YLQvtGA0YvQtSDQvNC+0LbQvdC+INC+0YLQutC70L7QvdC40YLRjCwg0YHRgdGL0LvQutC4INC90LAgU2hvcnRzINC4INC/0L7Qu9C60YMg0YEg0LrQsNGC0YPRiNC60LDQvNC4Ci8vIEBkZXNjcmlwdGlvbjppZCAgICAgSGFwdXMgdGFnIFNob3J0cyBZb3VUdWJlLCBlbGVtZW4geWFuZyBkYXBhdCBkaWhhcHVzLCB0YXV0YW4gU2hvcnRzLCBkYW4gUmFrIFJlZWwKLy8gQGRlc2NyaXB0aW9uOmhpICAgICBZb3VUdWJlIFNob3J0cyDgpJ/gpYjgpJcsIOCkluCkvuCksOCkv+CknCDgpJXgpLDgpKjgpYcg4KSv4KWL4KSX4KWN4KSvIOCkpOCkpOCljeCktSwgU2hvcnRzIOCksuCkv+CkguCklSDgpJTgpLAgUmVlbCBTaGVsZiDgpKjgpL/gpJXgpL7gpLLgpYfgpIIKLy8gQGF1dGhvciAgICAgICAgICAgICBTdHJhbmdlWm9tYmllcwovLyBAaWNvbiAgICAgICAgICAgICAgIGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vczIvZmF2aWNvbnM/c3o9NjQmZG9tYWluPXlvdXR1YmUuY29tCi8vIEBtYXRjaCAgICAgICAgICAgICAgaHR0cHM6Ly8qLnlvdXR1YmUuY29tLyoKLy8gQG1hdGNoICAgICAgICAgICAgICBodHRwczovL20ueW91dHViZS5jb20vKgovLyBAZ3JhbnQgICAgICAgICAgICAgIG5vbmUKLy8gQHJ1bi1hdCAgICAgICAgICAgICBkb2N1bWVudC1zdGFydAovLyBAZG93bmxvYWRVUkwgaHR0cHM6Ly91cGRhdGUuZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy81MjIwNTcvUmVtb3ZlJTIwWW91VHViZSUyMFNob3J0cy51c2VyLmpzCi8vIEB1cGRhdGVVUkwgaHR0cHM6Ly91cGRhdGUuZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy81MjIwNTcvUmVtb3ZlJTIwWW91VHViZSUyMFNob3J0cy5tZXRhLmpzCi8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uICgpIHsKICAgICd1c2Ugc3RyaWN0JzsKCiAgICAvLyDphY3nva7pobkKICAgIGNvbnN0IGhpZGVIaXN0b3J5U2hvcnRzID0gZmFsc2U7IC8vIOaYr+WQpuenu+mZpOWOhuWPsuiusOW9leS4reeahCBTaG9ydHMg5YWD57SgCiAgICBjb25zdCBkZWJ1ZyA9IGZhbHNlOyAvLyDlkK/nlKjosIPor5XmqKHlvI8KCiAgICAvLyDpgJrnlKjpgInmi6nlmagKICAgIGNvbnN0IGNvbW1vblNlbGVjdG9ycyA9IFsKICAgICAgICAnYVtocmVmKj0iL3Nob3J0cy8iXScsCiAgICAgICAgJ1tpcy1zaG9ydHNdJywKICAgICAgICAneXQtY2hpcC1jbG91ZC1jaGlwLXJlbmRlcmVyOmhhcyhhW2hyZWYqPSIvc2hvcnRzLyJdKScsCiAgICAgICAgJ3l0ZC1yZWVsLXNoZWxmLXJlbmRlcmVyJywKICAgICAgICAneXRkLXRodW1ibmFpbC1vdmVybGF5LXRpbWUtc3RhdHVzLXJlbmRlcmVyW292ZXJsYXktc3R5bGU9IlNIT1JUUyJdJywKICAgICAgICAnI2d1aWRlIFt0aXRsZT0iU2hvcnRzIl0nLAogICAgICAgICcueXRkLW1pbmktZ3VpZGUtZW50cnktcmVuZGVyZXJbdGl0bGU9IlNob3J0cyJdJywKICAgICAgICAnLnl0ZC1taW5pLWd1aWRlLWVudHJ5LXJlbmRlcmVyW2FyaWEtbGFiZWw9IlNob3J0cyJdJywKICAgIF07CgogICAgLy8g56e75Yqo56uv6YCJ5oup5ZmoCiAgICBjb25zdCBtb2JpbGVTZWxlY3RvcnMgPSBbCiAgICAgICAgJy5waXZvdC1zaG9ydHMnLAogICAgICAgICd5dG0tcmVlbC1zaGVsZi1yZW5kZXJlcicsCiAgICAgICAgJ3l0bS1zZWFyY2ggeXRtLXZpZGVvLXdpdGgtY29udGV4dC1yZW5kZXJlciBbZGF0YS1zdHlsZT0iU0hPUlRTIl0nLAogICAgXTsKCiAgICAvLyDnibnlrprpobXpnaLpgInmi6nlmagKICAgIGNvbnN0IGZlZWRTZWxlY3RvcnMgPSBbCiAgICAgICAgJ3l0ZC1icm93c2VbcGFnZS1zdWJ0eXBlPSJzdWJzY3JpcHRpb25zIl0geXRkLWdyaWQtdmlkZW8tcmVuZGVyZXIgW292ZXJsYXktc3R5bGU9IlNIT1JUUyJdJywKICAgICAgICAneXRkLWJyb3dzZVtwYWdlLXN1YnR5cGU9InN1YnNjcmlwdGlvbnMiXSB5dGQtdmlkZW8tcmVuZGVyZXIgW292ZXJsYXktc3R5bGU9IlNIT1JUUyJdJywKICAgICAgICAneXRkLWJyb3dzZVtwYWdlLXN1YnR5cGU9InN1YnNjcmlwdGlvbnMiXSB5dGQtcmljaC1pdGVtLXJlbmRlcmVyIFtvdmVybGF5LXN0eWxlPSJTSE9SVFMiXScsCiAgICBdOwogICAgY29uc3QgY2hhbm5lbFNlbGVjdG9ycyA9IFsneXQtdGFiLXNoYXBlW3RhYi10aXRsZT0iU2hvcnRzIl0nXTsKICAgIGNvbnN0IGhpc3RvcnlTZWxlY3RvcnMgPSBbJ3l0ZC1icm93c2VbcGFnZS1zdWJ0eXBlPSJoaXN0b3J5Il0geXRkLXJlZWwtc2hlbGYtcmVuZGVyZXInXTsKCiAgICAvLyDnp7vpmaQgU2hvcnRzIOWFg+e0oOeahOWHveaVsAogICAgZnVuY3Rpb24gcmVtb3ZlRWxlbWVudHNCeVNlbGVjdG9ycyhzZWxlY3RvcnMpIHsKICAgICAgICBzZWxlY3RvcnMuZm9yRWFjaCgoc2VsZWN0b3IpID0+IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICAgICAgICAgICAgICBlbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuZGF0YXNldC5yZW1vdmVkQnlTY3JpcHQpIHJldHVybjsgLy8g6Lez6L+H5bey5aSE55CG55qE5YWD57SgCiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmVudCA9IGVsZW1lbnQuY2xvc2VzdCgKICAgICAgICAgICAgICAgICAgICAgICAgJ3l0ZC12aWRlby1yZW5kZXJlciwgeXRkLWdyaWQtdmlkZW8tcmVuZGVyZXIsIHl0ZC1jb21wYWN0LXZpZGVvLXJlbmRlcmVyLCB5dGQtcmljaC1pdGVtLXJlbmRlcmVyLCB5dG0tdmlkZW8td2l0aC1jb250ZXh0LXJlbmRlcmVyJwogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJlbnQpIHBhcmVudCA9IGVsZW1lbnQ7CiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIHBhcmVudC5kYXRhc2V0LnJlbW92ZWRCeVNjcmlwdCA9ICd0cnVlJzsgLy8g5qCH6K6w5Li65bey5aSE55CGCiAgICAgICAgICAgICAgICAgICAgaWYgKGRlYnVnKSBjb25zb2xlLmxvZyhgUmVtb3ZlZCBlbGVtZW50OiAke3BhcmVudH1gKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgaWYgKGRlYnVnKSBjb25zb2xlLndhcm4oYEVycm9yIHByb2Nlc3Npbmcgc2VsZWN0b3I6ICR7c2VsZWN0b3J9YCwgZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CgogICAgLy8g5qC55o2uIFVSTCDlrprkvY3opoHlpITnkIbnmoTpgInmi6nlmagKICAgIGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnRzKCkgewogICAgICAgIGNvbnN0IGN1cnJlbnRVcmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKICAgICAgICBpZiAoZGVidWcpIGNvbnNvbGUubG9nKCdDdXJyZW50IFVSTDonLCBjdXJyZW50VXJsKTsKCiAgICAgICAgaWYgKGN1cnJlbnRVcmwuaW5jbHVkZXMoJ20ueW91dHViZS5jb20nKSkgewogICAgICAgICAgICByZW1vdmVFbGVtZW50c0J5U2VsZWN0b3JzKG1vYmlsZVNlbGVjdG9ycyk7CiAgICAgICAgfQogICAgICAgIGlmIChjdXJyZW50VXJsLmluY2x1ZGVzKCcvZmVlZC9zdWJzY3JpcHRpb25zJykpIHsKICAgICAgICAgICAgcmVtb3ZlRWxlbWVudHNCeVNlbGVjdG9ycyhmZWVkU2VsZWN0b3JzKTsKICAgICAgICB9CiAgICAgICAgLy8g6ZyA6KaB6YeN5paw5YGa77yM5Zug5Li65Lya5aSa5Yig6Zmk77yM6L+Y5pyJ5YW25a6DYnVn5Zyo5YW25a6D6YOo5YiG77yM6L+Y5rKh5p2l5b6X5Y+K5pCe77yM6IO955So5bCx6KGMCiAgICAgICAgLy9pZiAoY3VycmVudFVybC5pbmNsdWRlcygnL2NoYW5uZWwnKSB8fCBjdXJyZW50VXJsLmluY2x1ZGVzKCcvQCcpKSB7CiAgICAgICAgLy8gICAgcmVtb3ZlRWxlbWVudHNCeVNlbGVjdG9ycyhjaGFubmVsU2VsZWN0b3JzKTsKICAgICAgICAvL30KICAgICAgICBpZiAoaGlkZUhpc3RvcnlTaG9ydHMgJiYgY3VycmVudFVybC5pbmNsdWRlcygnL2ZlZWQvaGlzdG9yeScpKSB7CiAgICAgICAgICAgIHJlbW92ZUVsZW1lbnRzQnlTZWxlY3RvcnMoaGlzdG9yeVNlbGVjdG9ycyk7CiAgICAgICAgfQoKICAgICAgICAvLyDpgJrnlKjpgInmi6nlmajpgILnlKjkuo7miYDmnInpobXpnaIKICAgICAgICByZW1vdmVFbGVtZW50c0J5U2VsZWN0b3JzKGNvbW1vblNlbGVjdG9ycyk7CiAgICB9CgogICAgLy8g6Ziy5oqW5Ye95pWwCiAgICBmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCBkZWxheSkgewogICAgICAgIGxldCB0aW1lb3V0OwogICAgICAgIHJldHVybiAoLi4uYXJncykgPT4gewogICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7CiAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IGZ1bmMuYXBwbHkodGhpcywgYXJncyksIGRlbGF5KTsKICAgICAgICB9OwogICAgfQoKICAgIGNvbnN0IGRlYm91bmNlZFJlbW92ZUVsZW1lbnRzID0gZGVib3VuY2UocmVtb3ZlRWxlbWVudHMsIDMwMCk7CgogICAgLy8g5Yid5aeL5YyW6ISa5pysCiAgICBmdW5jdGlvbiBpbml0KCkgewogICAgICAgIGlmIChkZWJ1ZykgY29uc29sZS5sb2coJ1JlbW92ZSBZb3VUdWJlIFNob3J0cyBzY3JpcHQgYWN0aXZhdGVkJyk7CiAgICAgICAgcmVtb3ZlRWxlbWVudHMoKTsgLy8g5Yid5qyh5Yqg6L295pe25omn6KGM5riF55CGCgogICAgICAgIC8vIOi3qOa1j+iniOWZqOaUr+aMgeeahOWvvOiIquS6i+S7tgogICAgICAgIGNvbnN0IGlzRmlyZWZveCA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ0ZpcmVmb3gnKTsKICAgICAgICBpZiAoaXNGaXJlZm94KSB7CiAgICAgICAgICAgIC8vIEZpcmVmb3gg5L2/55SoIHBvcHN0YXRlIOebkeWQrOWvvOiIquWPmOWMlgogICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCByZW1vdmVFbGVtZW50cyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gQ2hyb21lIOS9v+eUqCB5dC1uYXZpZ2F0ZSDkuovku7YKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigneXQtbmF2aWdhdGUtZmluaXNoJywgcmVtb3ZlRWxlbWVudHMpOwogICAgICAgIH0KCiAgICAgICAgLy8g55uR5ZCsIERPTSDlj5jljJYKICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGRlYm91bmNlZFJlbW92ZUVsZW1lbnRzKTsKICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pOwogICAgfQoKICAgIC8vIOetieW+hSBET00g5a6M5YWo5Yqg6L295ZCO5Yid5aeL5YyW6ISa5pysCiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2xvYWRpbmcnKSB7CiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGluaXQpOwogICAgfSBlbHNlIHsKICAgICAgICBpbml0KCk7CiAgICB9Cn0pKCk7CgovL2NvbnN0IHNlbGVjdG9ycyA9IFsKLy8gICAgaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vc3Vtb25zdDIxLzE3NzkzMDdiODA3NTA5NDg4ZDFhOTE1ZDJiZDM3MGJkCi8vICAgICdbaXMtc2hvcnRzXScsIC8vIFlUIEhvbWVwYWdlIC0gSGlkZSB0aGUgU2hvcnRzIHNlY3Rpb24KLy8gICAgJyNndWlkZSBbdGl0bGU9IlNob3J0cyJdJywgLy8gWVQgTWVudSAtIEhpZGUgdGhlIFNob3J0cyBidXR0b24KLy8gICAgJy55dGQtbWluaS1ndWlkZS1lbnRyeS1yZW5kZXJlclt0aXRsZT0iU2hvcnRzIl0nLCAvLyBZVCBNZW51IC0gSGlkZSB0aGUgU2hvcnRzIGJ1dHRvbgovLyAgICAneXRkLXNlYXJjaCB5dGQtdmlkZW8tcmVuZGVyZXIgW292ZXJsYXktc3R5bGU9IlNIT1JUUyJdOnVwd2FyZCh5dGQtdmlkZW8tcmVuZGVyZXIpJywgLy8gWVQgU2VhcmNoIC0gSGlkZSBTaG9ydHMKLy8gICAgJ3l0ZC1yZWVsLXNoZWxmLXJlbmRlcmVyJywKLy8gICAgJ3l0ZC1icm93c2VbcGFnZS1zdWJ0eXBlPSJjaGFubmVscyJdIFtyb2xlPSJ0YWIiXTpudGgtb2YtdHlwZSgzKTpoYXMtdGV4dChTaG9ydHMpJywgLy8gWVQgQ2hhbm5lbHMgLSBIaWRlIHRoZSBTaG9ydHMgdGFiCi8vICAgICd5dGQtYnJvd3NlW3BhZ2Utc3VidHlwZT0ic3Vic2NyaXB0aW9ucyJdIHl0ZC1ncmlkLXZpZGVvLXJlbmRlcmVyIFtvdmVybGF5LXN0eWxlPSJTSE9SVFMiXTp1cHdhcmQoeXRkLWdyaWQtdmlkZW8tcmVuZGVyZXIpJywgLy8gWVQgU3Vic2NyaXB0aW9ucyAtIEhpZGUgU2hvcnRzIC0gR3JpZCBWaWV3Ci8vICAgICd5dGQtYnJvd3NlW3BhZ2Utc3VidHlwZT0ic3Vic2NyaXB0aW9ucyJdIHl0ZC12aWRlby1yZW5kZXJlciBbb3ZlcmxheS1zdHlsZT0iU0hPUlRTIl06dXB3YXJkKHl0ZC1pdGVtLXNlY3Rpb24tcmVuZGVyZXIpJywgLy8gWVQgU3Vic2NyaXB0aW9ucyAtIEhpZGUgU2hvcnRzIC0gTGlzdCBWaWV3Ci8vICAgICd5dGQtYnJvd3NlW3BhZ2Utc3VidHlwZT0ic3Vic2NyaXB0aW9ucyJdIHl0ZC1yaWNoLWl0ZW0tcmVuZGVyZXIgW292ZXJsYXktc3R5bGU9IlNIT1JUUyJdOnVwd2FyZCh5dGQtcmljaC1pdGVtLXJlbmRlcmVyKScsIC8vIFlUIFN1YnNjcmlwdGlvbnMgLSBOZXcgTGF5b3V0IC0gSGlkZSBTaG9ydHMKLy8gICAgJyNyZWxhdGVkIHl0ZC1jb21wYWN0LXZpZGVvLXJlbmRlcmVyIFtvdmVybGF5LXN0eWxlPSJTSE9SVFMiXTp1cHdhcmQoeXRkLWNvbXBhY3QtdmlkZW8tcmVuZGVyZXIpJywgLy8gWVQgU2lkZWJhciAtIEhpZGUgU2hvcnRzCi8vICAgICcucGl2b3Qtc2hvcnRzOnVwd2FyZCh5dG0tcGl2b3QtYmFyLWl0ZW0tcmVuZGVyZXIpJywgLy8gWVQgTW9iaWxlIC0gSGlkZSB0aGUgU2hvcnRzIE1lbnUgYnV0dG9uCi8vICAgICd5dG0tcmVlbC1zaGVsZi1yZW5kZXJlcicsIC8vIFlUIE1vYmlsZSAtIEhpZGUgU2hvcnRzIHNlY3Rpb25zCi8vICAgICd5dG0tc2VhcmNoIHl0bS12aWRlby13aXRoLWNvbnRleHQtcmVuZGVyZXIgW2RhdGEtc3R5bGU9IlNIT1JUUyJdJywgLy8gWVQgTW9iaWxlIC0gSGlkZSBTaG9ydHMgaW4gc2VhcmNoIHJlc3VsdHMKLy9dOwo="},{"name":"Export ChatGPT/Gemini/Grok conversations as Markdown","options":{"check_for_updates":true,"user_modified":null,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":null,"unwrap":null,"run_at":null,"run_in":null,"tags":[],"override":{"use_includes":[],"orig_includes":["*://chatgpt.com/*","*://grok.com/*","*://gemini.google.com/*"],"merge_includes":true,"use_matches":[],"orig_matches":[],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"orig_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_run_in":[],"orig_noframes":true,"orig_tags":[]}},"storage":{"ts":1756026299412,"data":{}},"enabled":true,"position":7,"file_url":"https://update.greasyfork.org/scripts/543471/Export%20ChatGPTGeminiGrok%20conversations%20as%20Markdown.user.js","uuid":"05a68c86-a89e-4af5-be14-a745b8f908f2","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6emgtQ04gIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6emgtVFcgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6YXIgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6YmcgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6Y3MgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6ZGEgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6ZGUgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6ZWwgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6ZW4gICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6ZW8gICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6ZXMgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6ZXMtNDE5IEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6ZmkgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6ZnIgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6ZnItQ0EgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6aGUgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6aHIgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6aHUgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6aWQgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6aXQgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6amEgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6a2EgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6a28gICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6bmIgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6bmwgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6cGwgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6cHQtQlIgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6cm8gICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6cnUgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6c3YgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6dGggICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6dHIgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6dWsgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6dWcgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQG5hbWU6dmkgICAgIEV4cG9ydCBDaGF0R1BUL0dlbWluaS9Hcm9rIGNvbnZlcnNhdGlvbnMgYXMgTWFya2Rvd24KLy8gQGRlc2NyaXB0aW9uICAgICAgICBFeHBvcnQgY2hhdCBoaXN0b3J5IGZyb20gQ2hhdEdQVCBhbmQgR3JvayB3ZWJzaXRlcyB0byBub3JtYWwgZm9ybWF0IGFzIE1hcmtkb3duLCB3aGljaCBjYW4gYmUgb3BlbmVkIHZpYSB0eXBvcmEgZXhhY3RseS4KLy8gQGRlc2NyaXB0aW9uOnpoLUNOICDlsIYgQ2hhdEdQVCDlkowgR3JvayDnvZHnq5nnmoTogYrlpKnorrDlvZXlr7zlh7rkuLrmma7pgJogTWFya2Rvd24g5qC85byP77yM5Y+v5ZyoIFR5cG9yYSDkuK3lh4bnoa7miZPlvIDjgIIKLy8gQGRlc2NyaXB0aW9uOnpoLVRXICDlsIcgQ2hhdEdQVCDlkowgR3JvayDntrLnq5nnmoTogYrlpKnoqJjpjITlsI7lh7rngrrmma7pgJogTWFya2Rvd24g5qC85byP77yM5Y+v5pa8IFR5cG9yYSDkuK3nsr7norrmiZPplovjgIIKLy8gQGRlc2NyaXB0aW9uOmFyICAgICDYqti12K/ZitixINmF2K3ZgdmI2LjYp9iqINin2YTYr9ix2K/YtNipINmF2YYg2YXZiNmC2LnZiiBDaGF0R1BUINmIIEdyb2sg2KXZhNmJINiq2YbYs9mK2YIgTWFya2Rvd24g2LnYp9iv2Yog2YrZhdmD2YYg2YHYqtit2Ycg2LnYqNixIFR5cG9yYSDYqNiv2YLYqS4KLy8gQGRlc2NyaXB0aW9uOmJnICAgICDQldC60YHQv9C+0YDRgtC40YDQsNC90LUg0L3QsCDQuNGB0YLQvtGA0LjRj9GC0LAg0L3QsCDRh9Cw0YLQvtCy0LXRgtC1INC+0YIg0YPQtdCx0YHQsNC50YLQvtCy0LXRgtC1IENoYXRHUFQg0LggR3JvayDQsiDQvtCx0LjQutC90L7QstC10L0gTWFya2Rvd24g0YTQvtGA0LzQsNGCLCDQutC+0LnRgtC+INC80L7QttC1INC00LAg0YHQtSDQvtGC0LLQvtGA0Lgg0YLQvtGH0L3QviDRh9GA0LXQtyBUeXBvcmEuCi8vIEBkZXNjcmlwdGlvbjpjcyAgICAgRXhwb3J0b3ZhdCBoaXN0b3JpaSBjaGF0dSB6IHdlYsWvIENoYXRHUFQgYSBHcm9rIGRvIG9iecSNZWpuw6lobyBmb3Jtw6F0dSBNYXJrZG93biwga3RlcsO9IGx6ZSBwxZllc27EmyBvdGV2xZnDrXQgdiBUeXBvcmEuCi8vIEBkZXNjcmlwdGlvbjpkYSAgICAgRWtzcG9ydMOpciBjaGF04oCRaGlzdG9yaWsgZnJhIENoYXRHUFQtIG9nIEdyb2vigJF3ZWJzdGVkZXIgdGlsIG5vcm1hbHQgTWFya2Rvd27igJFmb3JtYXQsIHNvbSBrYW4gw6VibmVzIHByw6ZjaXN0IGkgVHlwb3JhLgovLyBAZGVzY3JpcHRpb246ZGUgICAgIEV4cG9ydGllcmUgZGVuIENoYXR2ZXJsYXVmIHZvbiBkZW4gQ2hhdEdQVOKAkSB1bmQgR3Jva+KAkVdlYnNpdGVzIGluIGVpbiBub3JtYWxlcyBNYXJrZG93buKAkUZvcm1hdCwgZGFzIGV4YWt0IGluIFR5cG9yYSBnZcO2ZmZuZXQgd2VyZGVuIGthbm4uCi8vIEBkZXNjcmlwdGlvbjplbCAgICAgzpXOvs6xzrPPic6zzq4gz4TOv8+FIM65z4PPhM6/z4HOuc66zr/PjSDPg8+Fzr3Ov868zrnOu86vzrHPgiDOsc+Az4wgz4TOuc+CIM65z4PPhM6/z4POtc67zq/OtM61z4IgQ2hhdEdQVCDOus6xzrkgR3JvayDPg861IM6xz4DOu8+MIM68zr/Pgc+Gz4zPhM+Fz4DOvyBNYXJrZG93biwgz4DOv8+FIM68z4DOv8+BzrXOryDOvc6xIM6xzr3Ov865z4fPhM61zq8gzrHOus+BzrnOss+Oz4IgzrzOtSDPhM6/IFR5cG9yYS4KLy8gQGRlc2NyaXB0aW9uOmVuICAgICBFeHBvcnQgY2hhdCBoaXN0b3J5IGZyb20gQ2hhdEdQVCBhbmQgR3JvayB3ZWJzaXRlcyB0byBub3JtYWwgZm9ybWF0IGFzIE1hcmtkb3duLCB3aGljaCBjYW4gYmUgb3BlbmVkIHZpYSB0eXBvcmEgZXhhY3RseS4KLy8gQGRlc2NyaXB0aW9uOmVvICAgICBFa3Nwb3J0aSBiYWJpbGhpc3RvcmlvbiBkZSBDaGF0R1BULSBrYWogR3Jva+KAkXJldGVqb2ogYWwgbm9ybWEgTWFya2Rvd27igJFmb3JtYXRvLCBraXUgcG92YXMgZXN0aSBtYWxmZXJtaXRhIMSddXN0ZSBlbiBUeXBvcmEuCi8vIEBkZXNjcmlwdGlvbjplcyAgICAgRXhwb3J0YXIgZWwgaGlzdG9yaWFsIGRlIGNoYXQgZGUgbG9zIHNpdGlvcyB3ZWIgQ2hhdEdQVCB5IEdyb2sgYSB1biBmb3JtYXRvIG5vcm1hbCBNYXJrZG93biwgcXVlIHNlIHB1ZWRhIGFicmlyIGV4YWN0YW1lbnRlIGNvbiBUeXBvcmEuCi8vIEBkZXNjcmlwdGlvbjplcy00MTkgRXhwb3J0YXIgZWwgaGlzdG9yaWFsIGRlIGNoYXQgZGUgbG9zIHNpdGlvcyB3ZWIgQ2hhdEdQVCB5IEdyb2sgYSB1biBmb3JtYXRvIG5vcm1hbCBNYXJrZG93biwgcXVlIHNlIHB1ZWRhIGFicmlyIGV4YWN0YW1lbnRlIGNvbiBUeXBvcmEuCi8vIEBkZXNjcmlwdGlvbjpmaSAgICAgVmllIENoYXRHUFQ6biBqYSBHcm9rLXZlcmtrb3NpdnVzdG9qZW4gY2jDpHTDpGhpc3RvcmlhIHRhdmFsbGlzZWVuIE1hcmtkb3du4oCRbXVvdG9vbiwgam9ua2EgVHlwb3JhIGF2YWEgdMOkc23DpGxsZWVuIG9pa2Vpbi4KLy8gQGRlc2NyaXB0aW9uOmZyICAgICBFeHBvcnRlciBs4oCZaGlzdG9yaXF1ZSBkZSBkaXNjdXNzaW9uIGRlcyBzaXRlcyBDaGF0R1BUIGV0IEdyb2sgdmVycyB1biBmb3JtYXQgTWFya2Rvd24gbm9ybWFsLCBwb3V2YW50IMOqdHJlIG91dmVydCBleGFjdGVtZW50IGF2ZWMgVHlwb3JhLgovLyBAZGVzY3JpcHRpb246ZnItQ0EgIEV4cG9ydGVyIGzigJloaXN0b3JpcXVlIGRlcyBjb252ZXJzYXRpb25zIGRlcyBzaXRlcyBDaGF0R1BUIGV0IEdyb2sgZGFucyB1biBmb3JtYXQgTWFya2Rvd24gc3RhbmRhcmQsIHBvdXZhbnQgw6p0cmUgb3V2ZXJ0IHByw6ljaXPDqW1lbnQgYXZlYyBUeXBvcmEuCi8vIEBkZXNjcmlwdGlvbjpoZSAgICAg15nXmdem15XXkCDXlNeZ16HXmNeV16jXmdeZ16og15TXpifXkNeYINee15DXqteo15kgQ2hhdEdQVCDXleKAkUdyb2sg15zXpNeV16jXnteYIE1hcmtkb3duINeo15LXmdecLCDXqdeg15nXqtefINec16TXqteV15cg15HigJFUeXBvcmEg15HXk9eZ15XXpy4KLy8gQGRlc2NyaXB0aW9uOmhyICAgICBJenZlemkgcG92aWplc3QgcmF6Z292b3JhIHMgd2Vi4oCRbWplc3RhIENoYXRHUFQgaSBHcm9rIHUgb2JpxI1uaSBNYXJrZG93biBmb3JtYXQsIGtvamkgc2UgdG/EjW5vIG1vxb5lIG90dm9yaXRpIHUgVHlwb3JhLgovLyBAZGVzY3JpcHRpb246aHUgICAgIEEgQ2hhdEdQVCDDqXMgR3JvayB3ZWJoZWx5ZWsgY3NldmVnw6lzaSBlbMWRem3DqW55ZWluZWsgZXhwb3J0w6Fsw6FzYSBub3Jtw6FsIE1hcmtkb3duIGZvcm3DoXR1bWJhLCBhbWVseSBwb250b3NhbiBtZWdueWl0aGF0w7MgYSBUeXBvcmEgc2Vnw610c8OpZ8OpdmVsLgovLyBAZGVzY3JpcHRpb246aWQgICAgIEVrc3BvciByaXdheWF0IG9icm9sYW4gZGFyaSBzaXR1cyB3ZWIgQ2hhdEdQVCBkYW4gR3JvayBrZSBmb3JtYXQgTWFya2Rvd24gYmlhc2EsIHlhbmcgYmlzYSBkaWJ1a2EgcGVyc2lzIGRlbmdhbiBUeXBvcmEuCi8vIEBkZXNjcmlwdGlvbjppdCAgICAgRXNwb3J0YSBsYSBjcm9ub2xvZ2lhIGRlbGxhIGNoYXQgZGFpIHNpdGkgQ2hhdEdQVCBlIEdyb2sgaW4gZm9ybWF0byBNYXJrZG93biBub3JtYWxlLCBjaGUgcHXDsiBlc3NlcmUgYXBlcnRvIGVzYXR0YW1lbnRlIGNvbiBUeXBvcmEuCi8vIEBkZXNjcmlwdGlvbjpqYSAgICAgQ2hhdEdQVCDjgaggR3JvayDjga7jgqbjgqfjg5bjgrXjgqTjg4jjgYvjgonjg4Hjg6Pjg4Pjg4jlsaXmrbTjgpLpgJrluLjjga4gTWFya2Rvd24g5b2i5byP44Gr44Ko44Kv44K544Od44O844OI44GX44CBVHlwb3JhIOOBp+ato+eiuuOBq+mWi+OBkeOCi+OCiOOBhuOBq+OBl+OBvuOBmeOAggovLyBAZGVzY3JpcHRpb246a2EgICAgIENoYXRHUFQg4YOT4YOQIEdyb2sg4YOV4YOU4YOR4YOh4YOQ4YOY4YOi4YOU4YOR4YOY4YOhIOGDqeGDkOGDouGDmOGDoSDhg5jhg6Hhg6Lhg53hg6Dhg5jhg5jhg6Eg4YOU4YOl4YOh4YOe4YOd4YOg4YOi4YOYIOGDnOGDneGDoOGDm+GDkOGDmuGDo+GDoCBNYXJrZG93biDhg6Thg53hg6Dhg5vhg5Dhg6Lhg6jhg5gsIOGDoOGDneGDm+GDlOGDmuGDmOGDqiBUeXBvcmEt4YOo4YOYIOGDluGDo+GDoeGDouGDkOGDkyDhg5jhg67hg6Hhg5zhg5Thg5Hhg5AuCi8vIEBkZXNjcmlwdGlvbjprbyAgICAgQ2hhdEdQVCDrsI8gR3JvayDsm7nsgqzsnbTtirjsnZgg7LGE7YyFIOq4sOuhneydhCDsnbzrsJggTWFya2Rvd24g7ZiV7Iud7Jy866GcIOuCtOuztOuCtCBUeXBvcmHsl5DshJwg7KCV7ZmV7ZWY6rKMIOyXtCDsiJgg7J6I7Iq164uI64ukLgovLyBAZGVzY3JpcHRpb246bmIgICAgIEVrc3BvcnRlciBjaGF0dGVoaXN0b3Jpa2sgZnJhIENoYXRHUFQtIG9nIEdyb2stbmV0dHN0ZWRlciB0aWwgdmFubGlnIE1hcmtkb3duLWZvcm1hdCwgc29tIGthbiDDpXBuZXMgbsO4eWFrdGlnIGkgVHlwb3JhLgovLyBAZGVzY3JpcHRpb246bmwgICAgIEV4cG9ydGVlciBkZSBjaGF0Z2VzY2hpZWRlbmlzIHZhbiBkZSBDaGF0R1BULSBlbiBHcm9rLXdlYnNpdGVzIG5hYXIgbm9ybWFhbCBNYXJrZG93buKAkWZvcm1hYXQsIGRhdCBwcmVjaWVzIG1ldCBUeXBvcmEgZ2VvcGVuZCBrYW4gd29yZGVuLgovLyBAZGVzY3JpcHRpb246cGwgICAgIEVrc3BvcnR1aiBoaXN0b3JpxJkgY3phdMOzdyB6ZSBzdHJvbiBDaGF0R1BUIGkgR3JvayBkbyB6d3lrxYJlZ28gZm9ybWF0dSBNYXJrZG93biwga3TDs3J5IG1vxbxuYSBkb2vFgmFkbmllIG90d29yennEhyB3IFR5cG9yYS4KLy8gQGRlc2NyaXB0aW9uOnB0LUJSICBFeHBvcnRlIG8gaGlzdMOzcmljbyBkZSBjb252ZXJzYSBkb3Mgc2l0ZXMgQ2hhdEdQVCBlIEdyb2sgcGFyYSB1bSBmb3JtYXRvIE1hcmtkb3duIG5vcm1hbCwgcXVlIHBvc3NhIHNlciBhYmVydG8gZXhhdGFtZW50ZSB2aWEgVHlwb3JhLgovLyBAZGVzY3JpcHRpb246cm8gICAgIEV4cG9ydMSDIGlzdG9yaWN1bCBjb252ZXJzYcibaWVpIGRlIHBlIHNpdGXigJF1cmlsZSBDaGF0R1BUIMiZaSBHcm9rIMOubnRy4oCRdW4gZm9ybWF0IE1hcmtkb3duIG5vcm1hbCwgY2FyZSBwb2F0ZSBmaSBkZXNjaGlzIGV4YWN0IMOubiBUeXBvcmEuCi8vIEBkZXNjcmlwdGlvbjpydSAgICAg0K3QutGB0L/QvtGA0YIg0LjRgdGC0L7RgNC40Lgg0YfQsNGC0LAg0YEg0YHQsNC50YLQvtCyIENoYXRHUFQg0LggR3JvayDQsiDQvtCx0YvRh9C90YvQuSDRhNC+0YDQvNCw0YIgTWFya2Rvd24sINC60L7RgtC+0YDRi9C5INC80L7QttC90L4g0YLQvtGH0L3QviDQvtGC0LrRgNGL0YLRjCDQsiBUeXBvcmEuCi8vIEBkZXNjcmlwdGlvbjpzdiAgICAgRXhwb3J0ZXJhIGNoYXR0aGlzdG9yaWsgZnLDpW4gQ2hhdEdQVC0gb2NoIEdyb2std2ViYnBsYXRzZXIgdGlsbCB2YW5saWd0IE1hcmtkb3duLWZvcm1hdCwgc29tIGthbiDDtnBwbmFzIGV4YWt0IGkgVHlwb3JhLgovLyBAZGVzY3JpcHRpb246dGggICAgIOC4quC5iOC4h+C4reC4reC4geC4m+C4o+C4sOC4p+C4seC4leC4tOC5geC4iuC4l+C4iOC4suC4geC5gOC4p+C5h+C4muC5hOC4i+C4leC5jCBDaGF0R1BUIOC5geC4peC4sCBHcm9rIOC5hOC4m+C4ouC4seC4h+C4o+C4ueC4m+C5geC4muC4miBNYXJrZG93biDguJvguIHguJXguLQg4LiL4Li24LmI4LiH4Liq4Liy4Lih4Liy4Lij4LiW4LmA4Lib4Li04LiU4LmE4LiU4LmJ4Lit4Lii4LmI4Liy4LiH4LiW4Li54LiB4LiV4LmJ4Lit4LiH4Lic4LmI4Liy4LiZIFR5cG9yYQovLyBAZGVzY3JpcHRpb246dHIgICAgIENoYXRHUFQgdmUgR3JvayB3ZWIgc2l0ZWxlcmluZGVuIHNvaGJldCBnZcOnbWnFn2luaSBub3JtYWwgTWFya2Rvd24gZm9ybWF0xLFuYSBha3RhcsSxbjsgVHlwb3JhIGlsZSB0YW0gb2xhcmFrIGHDp8SxbGFiaWxpci4KLy8gQGRlc2NyaXB0aW9uOnVrICAgICDQldC60YHQv9C+0YDRgtGD0LLQsNGC0Lgg0ZbRgdGC0L7RgNGW0Y4g0YfQsNGC0YMg0Lcg0LLQtdCx4oCR0YHQsNC50YLRltCyIENoYXRHUFQg0ZYgR3JvayDRgyDQt9Cy0LjRh9Cw0LnQvdC40Lkg0YTQvtGA0LzQsNGCIE1hcmtkb3duLCDRj9C60LjQuSDRgtC+0YfQvdC+INCy0ZbQtNC60YDQuNCy0LDRlNGC0YzRgdGPINCyIFR5cG9yYS4KLy8gQGRlc2NyaXB0aW9uOnVnICAgICBDaGF0R1BUINuL25UgR3JvayDYqtmI2LEg2Kjbldiq2YTZidix2YnYr9mJ2YPZiSDahtuV2Kog2KrYp9ix2YnYrtmG2Ykg2KbYp9iv25XYqtiq2YnZg9mJIE1hcmtkb3duINmB2YjYsdmF2KfYqtmJ2LrYpyDahtmJ2YLYp9ix2LPZidqt2YnYsiDYqNmI2YTZidiv24fYjCDYqNuH2YbZiSBUeXBvcmEg2YLZiNi024fZhNmF2YnYs9mJ2K/blSDYqtmI2YTbh9mCINim2KfahtmJ2LTZgtinINio2YjZhNmJ2K/bhy4KLy8gQGRlc2NyaXB0aW9uOnZpICAgICBYdeG6pXQgbOG7i2NoIHPhu60gdHLDsiBjaHV54buHbiB04burIGPDoWMgdHJhbmcgQ2hhdEdQVCB2w6AgR3JvayBzYW5nIMSR4buLbmggZOG6oW5nIE1hcmtkb3duIGLDrG5oIHRoxrDhu51uZywgY8OzIHRo4buDIG3hu58gY2jDrW5oIHjDoWMgYuG6sW5nIFR5cG9yYS4KLy8gQG5hbWVzcGFjZSBFbGlvcl9DaGF0Z3B0X1hYCi8vIEB2ZXJzaW9uICAgMS4xLjEKLy8gQGF1dGhvciAgICBFbGlvcgovLyBAaWNvbiAgICAgIGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQ0FBQUFBZ0NBWUFBQUJ6ZW5yMEFBQUFBWE5TUjBJQXJzNGM2UUFBQWtaSlJFRlVXRWZOVjh0U3d6QU10UHRGbEtGTWJtMi9yTzJYRVc0WnlnQmZWTU82bGtkV0xGdHBlNkNYd01TV1ZxdlZJOTR0K0QyOUREdnYzWUZkMmFXL1J6eTlkKzk0Zm4xTVI2dFpiem00M2d4dnpqbHlacmtDTUNjTGtDYUE1OWZoR0VJUnNjazVQOVFEb2dLNEplb0d1dkg3UE8xcjcyY0FVcDVCK2NOL0liajl6K2NVOVVLL0dZRDFaZ2dQOTh3TWZwK253bWZ4ajVIMk1RUjNva2lnRTloZm9KVWlIUm1BUlhBa0tLUnB0YnBXeGVYaVJvQko5N2NveFI0WUxzd01vRWM5WGFvQXJRcXNGeENsSWdMb0hmN3JBZEdKT0pkVHdScFVaSVV6NWIzVEJCMXRSZ0N0NkxseUNZQndnTTVZYTFMUlFVdFhZTUczb29kekFFUyswZFhJR0M0S3d6a04zQjdkMTFqQWV4VUFSWm5ZS2FLSkY2L1V4alFrMmc4UUlMVmZxbzRFWEN2dFVVYVNLeFpSc21obUFPZ2dWUU5YUGs5UkFxZnE0Q1lBTWdWS2hYQjJtZ0NxOUlqOGFTbklqT0U4YVlYclFEQTVhN0pnb0FwQWFDQ1hGb3lqK1VoaGNWMXc5ZmVFcUtZZ3RkYzRQTGppTmJxVFV3UlRzQ1VERVJUb0lpUUFlTEpXbTdjaEdLWlduQ2RicWd6T3dGMEFLSDl3d01zckJMZmw1WWRHcEtXZ3BRR0E4NjM1TC9QSGgwaXRFZkdlUVZwcGxXRUUwR25GdlhhYTU0SHNHYkRiVzI1aUswNEExS1dUWnNIU1FkVGJMWWhOMHpqV0ZzdUtrOXJVckM1WXhUZzJqdVRZQ3lCQTJmTkpsTFZxcVhtdkxpUzlWRWhEVklaVUhYSW5hT3lWOVpXTUx2UTJvM3NYMXVaU2FsSHVQUUJNYXpsall2SG5tSlYyZnU3L2ZwcHhsSWFsdFJhOCtqbG1aa0JhWlI4aDIvU3UrRHhQQXl4L3RGajA4Z3UxMkN0bWh1UHMyQUFBQUFCSlJVNUVya0pnZ2c9PQovLyBAaW5jbHVkZSAgICo6Ly9jaGF0Z3B0LmNvbS8qCi8vIEBpbmNsdWRlICAgKjovL2dyb2suY29tLyoKLy8gQGluY2x1ZGUgICAqOi8vZ2VtaW5pLmdvb2dsZS5jb20vKgovLyBAbm9mcmFtZXMKLy8gQGxpY2Vuc2UgICBNSVQKLy8gQHJ1bi1hdCAgICBkb2N1bWVudC1pZGxlCi8vIEBncmFudCAgICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZAovLyBAZ3JhbnQgICAgIEdNX29wZW5JblRhYgovLyBAZ3JhbnQgICAgIEdNLm9wZW5JblRhYgovLyBAZ3JhbnQgICAgIEdNX2FkZFN0eWxlCi8vIEBncmFudCAgICAgR01fc2V0VmFsdWUKLy8gQGdyYW50ICAgICBHTV9nZXRWYWx1ZQovLyBAZ3JhbnQgICAgIEdNX3htbGh0dHBSZXF1ZXN0Ci8vIEBkb3dubG9hZFVSTCBodHRwczovL3VwZGF0ZS5ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzU0MzQ3MS9FeHBvcnQlMjBDaGF0R1BUR2VtaW5pR3JvayUyMGNvbnZlcnNhdGlvbnMlMjBhcyUyME1hcmtkb3duLnVzZXIuanMKLy8gQHVwZGF0ZVVSTCBodHRwczovL3VwZGF0ZS5ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzU0MzQ3MS9FeHBvcnQlMjBDaGF0R1BUR2VtaW5pR3JvayUyMGNvbnZlcnNhdGlvbnMlMjBhcyUyME1hcmtkb3duLm1ldGEuanMKLy8gPT0vVXNlclNjcmlwdD09CihmdW5jdGlvbiAoKSB7CgkndXNlIHN0cmljdCc7CgoJCgkvKiEKCSogQ29weXJpZ2h0IChjKSAyMDI0IC0gMjAyNSwgRWxpb3IuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCgkqCgkqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkKCSogb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksIHRvIGRlYWwKCSogaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cwoJKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsCgkqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcwoJKiBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgoJKgoJKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgoJKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KCSoKCSogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKCSogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCgkqCgkqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRQoJKiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCgkqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sCgkqIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFCgkqIFNPRlRXQVJFLgoJKi8KCgoJY29uc3QgQ29tbW9uVXRpbCA9IHsKCSAgb25QYWdlTG9hZDogZnVuY3Rpb24oY2FsbGJhY2spIHsKCSAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gImNvbXBsZXRlIikgewoJICAgICAgY2FsbGJhY2soKTsKCSAgICB9IGVsc2UgewoJICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCBjYWxsYmFjaywgeyBvbmNlOiB0cnVlIH0pOwoJICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLCBjYWxsYmFjaywgeyBvbmNlOiB0cnVlIH0pOwoJICAgIH0KCSAgfSwKCSAgYWRkU3R5bGU6IGZ1bmN0aW9uKHN0eWxlKSB7CgkgICAgR01fYWRkU3R5bGUoc3R5bGUpOwoJICB9LAoJICBjcmVhdGVFbGVtZW50OiBmdW5jdGlvbih0YWcsIG9wdGlvbnMgPSB7fSkgewoJICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7CgkgICAgaWYgKG9wdGlvbnMudGV4dCkgewoJICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IG9wdGlvbnMudGV4dDsKCSAgICB9CgkgICAgaWYgKG9wdGlvbnMuaHRtbCkgewoJICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBvcHRpb25zLmh0bWw7CgkgICAgfQoJICAgIGlmIChvcHRpb25zLnN0eWxlKSB7CgkgICAgICBPYmplY3QuYXNzaWduKGVsZW1lbnQuc3R5bGUsIG9wdGlvbnMuc3R5bGUpOwoJICAgIH0KCSAgICBpZiAob3B0aW9ucy5jbGFzc05hbWUpIHsKCSAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gb3B0aW9ucy5jbGFzc05hbWU7CgkgICAgfQoJICAgIGlmIChvcHRpb25zLmF0dHJpYnV0ZXMpIHsKCSAgICAgIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhvcHRpb25zLmF0dHJpYnV0ZXMpKSB7CgkgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpOwoJICAgICAgfQoJICAgIH0KCSAgICBpZiAob3B0aW9ucy5jaGlsZHJlbnMpIHsKCSAgICAgIG9wdGlvbnMuY2hpbGRyZW5zLmZvckVhY2goKGNoaWxkKSA9PiB7CgkgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hpbGQpOwoJICAgICAgfSk7CgkgICAgfQoJICAgIHJldHVybiBlbGVtZW50OwoJICB9LAoJICBvcGVuSW5UYWI6IGZ1bmN0aW9uKHVybCwgb3B0aW9ucyA9IHsgImFjdGl2ZSI6IHRydWUsICJpbnNlcnQiOiB0cnVlLCAic2V0UGFyZW50IjogdHJ1ZSB9KSB7CgkgICAgaWYgKHR5cGVvZiBHTV9vcGVuSW5UYWIgPT09ICJmdW5jdGlvbiIpIHsKCSAgICAgIEdNX29wZW5JblRhYih1cmwsIG9wdGlvbnMpOwoJICAgIH0gZWxzZSB7CgkgICAgICBHTS5vcGVuSW5UYWIodXJsLCBvcHRpb25zKTsKCSAgICB9CgkgIH0sCgkgIHdhaXRGb3JFbGVtZW50QnlJbnRlcnZhbDogZnVuY3Rpb24oc2VsZWN0b3IsIHRhcmdldCA9IGRvY3VtZW50LmJvZHksIGFsbG93RW1wdHkgPSB0cnVlLCBkZWxheSA9IDEwLCBtYXhEZWxheSA9IDEwICogMWUzKSB7CgkgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKCSAgICAgIGxldCB0b3RhbERlbGF5ID0gMDsKCSAgICAgIGxldCBlbGVtZW50ID0gdGFyZ2V0LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpOwoJICAgICAgbGV0IHJlc3VsdCA9IGFsbG93RW1wdHkgPyAhIWVsZW1lbnQgOiAhIWVsZW1lbnQgJiYgISFlbGVtZW50LmlubmVySFRNTDsKCSAgICAgIGlmIChyZXN1bHQpIHsKCSAgICAgICAgcmVzb2x2ZShlbGVtZW50KTsKCSAgICAgIH0KCSAgICAgIGNvbnN0IGVsZW1lbnRJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHsKCSAgICAgICAgaWYgKHRvdGFsRGVsYXkgPj0gbWF4RGVsYXkpIHsKCSAgICAgICAgICBjbGVhckludGVydmFsKGVsZW1lbnRJbnRlcnZhbCk7CgkgICAgICAgICAgcmVzb2x2ZShudWxsKTsKCSAgICAgICAgfQoJICAgICAgICBlbGVtZW50ID0gdGFyZ2V0LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpOwoJICAgICAgICByZXN1bHQgPSBhbGxvd0VtcHR5ID8gISFlbGVtZW50IDogISFlbGVtZW50ICYmICEhZWxlbWVudC5pbm5lckhUTUw7CgkgICAgICAgIGlmIChyZXN1bHQpIHsKCSAgICAgICAgICBjbGVhckludGVydmFsKGVsZW1lbnRJbnRlcnZhbCk7CgkgICAgICAgICAgcmVzb2x2ZShlbGVtZW50KTsKCSAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICB0b3RhbERlbGF5ICs9IGRlbGF5OwoJICAgICAgICB9CgkgICAgICB9LCBkZWxheSk7CgkgICAgfSk7CgkgIH0KCX07CgoJY29uc3QgSHRtbFRvTWFya2Rvd24gPSB7CgkgIHRvOiBmdW5jdGlvbihodG1sLCBwbGF0Zm9ybSkgewoJICAgIGNvbnN0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTsKCSAgICBjb25zdCBkb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKGh0bWwsICJ0ZXh0L2h0bWwiKTsKCSAgICBjb25zdCBpc0NoYXRHUFQgPSBwbGF0Zm9ybSA9PT0gImNoYXRHUFQiLCBpc0dlbWluaSA9IHBsYXRmb3JtID09PSAiZ2VtaW5pIiwgaXNHcm9rID0gcGxhdGZvcm0gPT09ICJncm9rIjsKCSAgICBpZiAoIWlzR2VtaW5pKSB7CgkgICAgICBkb2MucXVlcnlTZWxlY3RvckFsbCgic3Bhbi5rYXRleC1odG1sIikuZm9yRWFjaCgoZWxlbWVudCkgPT4gZWxlbWVudC5yZW1vdmUoKSk7CgkgICAgfQoJICAgIGRvYy5xdWVyeVNlbGVjdG9yQWxsKCJtcm93IikuZm9yRWFjaCgobXJvdykgPT4gbXJvdy5yZW1vdmUoKSk7CgkgICAgZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ2Fubm90YXRpb25bZW5jb2Rpbmc9ImFwcGxpY2F0aW9uL3gtdGV4Il0nKS5mb3JFYWNoKChlbGVtZW50KSA9PiB7CgkgICAgICBpZiAoZWxlbWVudC5jbG9zZXN0KCIua2F0ZXgtZGlzcGxheSIpKSB7CgkgICAgICAgIGNvbnN0IGxhdGV4ID0gZWxlbWVudC50ZXh0Q29udGVudDsKCSAgICAgICAgY29uc3QgdHJpbW1lZExhdGV4ID0gbGF0ZXgudHJpbSgpOwoJICAgICAgICBlbGVtZW50LnJlcGxhY2VXaXRoKGAKJCQKJHt0cmltbWVkTGF0ZXh9CiQkCmApOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgY29uc3QgbGF0ZXggPSBlbGVtZW50LnRleHRDb250ZW50OwoJICAgICAgICBjb25zdCB0cmltbWVkTGF0ZXggPSBsYXRleC50cmltKCk7CgkgICAgICAgIGVsZW1lbnQucmVwbGFjZVdpdGgoYCQke3RyaW1tZWRMYXRleH0kYCk7CgkgICAgICB9CgkgICAgfSk7CgkgICAgZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoInN0cm9uZywgYiIpLmZvckVhY2goKGJvbGQpID0+IHsKCSAgICAgIGNvbnN0IG1hcmtkb3duQm9sZCA9IGAqKiR7Ym9sZC50ZXh0Q29udGVudH0qKmA7CgkgICAgICBib2xkLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG1hcmtkb3duQm9sZCksIGJvbGQpOwoJICAgIH0pOwoJICAgIGRvYy5xdWVyeVNlbGVjdG9yQWxsKCJlbSwgaSIpLmZvckVhY2goKGl0YWxpYykgPT4gewoJICAgICAgY29uc3QgbWFya2Rvd25JdGFsaWMgPSBgKiR7aXRhbGljLnRleHRDb250ZW50fSpgOwoJICAgICAgaXRhbGljLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG1hcmtkb3duSXRhbGljKSwgaXRhbGljKTsKCSAgICB9KTsKCSAgICBkb2MucXVlcnlTZWxlY3RvckFsbCgicCBjb2RlIikuZm9yRWFjaCgoY29kZSkgPT4gewoJICAgICAgY29uc3QgbWFya2Rvd25Db2RlID0gYFxgJHtjb2RlLnRleHRDb250ZW50fVxgYDsKCSAgICAgIGNvZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobWFya2Rvd25Db2RlKSwgY29kZSk7CgkgICAgfSk7CgkgICAgZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoImEiKS5mb3JFYWNoKChsaW5rKSA9PiB7CgkgICAgICBjb25zdCBtYXJrZG93bkxpbmsgPSBgWyR7bGluay50ZXh0Q29udGVudH1dKCR7bGluay5ocmVmfSlgOwoJICAgICAgbGluay5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShtYXJrZG93bkxpbmspLCBsaW5rKTsKCSAgICB9KTsKCSAgICBkb2MucXVlcnlTZWxlY3RvckFsbCgiaW1nIikuZm9yRWFjaCgoaW1nKSA9PiB7CgkgICAgICBjb25zdCBtYXJrZG93bkltYWdlID0gYCFbJHtpbWcuYWx0fV0oJHtpbWcuc3JjfSlgOwoJICAgICAgaW1nLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG1hcmtkb3duSW1hZ2UpLCBpbWcpOwoJICAgIH0pOwoJICAgIGlmIChpc0NoYXRHUFQpIHsKCSAgICAgIGRvYy5xdWVyeVNlbGVjdG9yQWxsKCJwcmUiKS5mb3JFYWNoKChwcmUpID0+IHsKCSAgICAgICAgY29uc3QgY29kZVR5cGUgPSBwcmUucXVlcnlTZWxlY3RvcigiZGl2ID4gZGl2OmZpcnN0LWNoaWxkIik/LnRleHRDb250ZW50IHx8ICIiOwoJICAgICAgICBjb25zdCBtYXJrZG93bkNvZGUgPSBwcmUucXVlcnlTZWxlY3RvcigiZGl2ID4gZGl2Om50aC1jaGlsZCgzKSA+IGNvZGUiKT8udGV4dENvbnRlbnQgfHwgcHJlLnRleHRDb250ZW50OwoJICAgICAgICBwcmUuaW5uZXJIVE1MID0gYApcYFxgXGAke2NvZGVUeXBlfQoke21hcmtkb3duQ29kZX0KXGBcYFxgYDsKCSAgICAgIH0pOwoJICAgIH0gZWxzZSBpZiAoaXNHcm9rKSB7CgkgICAgICBkb2MucXVlcnlTZWxlY3RvckFsbCgiZGl2Lm5vdC1wcm9zZSIpLmZvckVhY2goKGRpdikgPT4gewoJICAgICAgICBjb25zdCBjb2RlVHlwZSA9IGRpdi5xdWVyeVNlbGVjdG9yKCJkaXYgPiBkaXYgPiBzcGFuIik/LnRleHRDb250ZW50IHx8ICIiOwoJICAgICAgICBjb25zdCBtYXJrZG93bkNvZGUgPSBkaXYucXVlcnlTZWxlY3RvcigiZGl2ID4gZGl2Om50aC1jaGlsZCgzKSA+IGNvZGUiKT8udGV4dENvbnRlbnQgfHwgZGl2LnRleHRDb250ZW50OwoJICAgICAgICBkaXYuaW5uZXJIVE1MID0gYApcYFxgXGAke2NvZGVUeXBlfQoke21hcmtkb3duQ29kZX0KXGBcYFxgYDsKCSAgICAgIH0pOwoJICAgIH0gZWxzZSBpZiAoaXNHZW1pbmkpIHsKCSAgICAgIGRvYy5xdWVyeVNlbGVjdG9yQWxsKCJjb2RlLWJsb2NrIikuZm9yRWFjaCgoZGl2KSA9PiB7CgkgICAgICAgIGNvbnN0IGNvZGVUeXBlID0gZGl2LnF1ZXJ5U2VsZWN0b3IoImRpdiA+IGRpdiA+IHNwYW4iKT8udGV4dENvbnRlbnQgfHwgIiI7CgkgICAgICAgIGNvbnN0IG1hcmtkb3duQ29kZSA9IGRpdi5xdWVyeVNlbGVjdG9yKCJkaXYgPiBkaXY6bnRoLWNoaWxkKDIpID4gZGl2ID4gcHJlIik/LnRleHRDb250ZW50IHx8IGRpdi50ZXh0Q29udGVudDsKCSAgICAgICAgZGl2LmlubmVySFRNTCA9IGAKXGBcYFxgJHtjb2RlVHlwZX0KJHttYXJrZG93bkNvZGV9ClxgXGBcYGA7CgkgICAgICB9KTsKCSAgICB9CgkgICAgZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoInVsIikuZm9yRWFjaCgodWwpID0+IHsKCSAgICAgIGxldCBtYXJrZG93bjIgPSAiIjsKCSAgICAgIHVsLnF1ZXJ5U2VsZWN0b3JBbGwoIjpzY29wZSA+IGxpIikuZm9yRWFjaCgobGkpID0+IHsKCSAgICAgICAgbWFya2Rvd24yICs9IGAtICR7bGkudGV4dENvbnRlbnQudHJpbSgpfQpgOwoJICAgICAgfSk7CgkgICAgICB1bC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiXG4iICsgbWFya2Rvd24yLnRyaW0oKSksIHVsKTsKCSAgICB9KTsKCSAgICBkb2MucXVlcnlTZWxlY3RvckFsbCgib2wiKS5mb3JFYWNoKChvbCkgPT4gewoJICAgICAgbGV0IG1hcmtkb3duMiA9ICIiOwoJICAgICAgb2wucXVlcnlTZWxlY3RvckFsbCgiOnNjb3BlID4gbGkiKS5mb3JFYWNoKChsaSwgaW5kZXgpID0+IHsKCSAgICAgICAgbWFya2Rvd24yICs9IGAke2luZGV4ICsgMX0uICR7bGkudGV4dENvbnRlbnQudHJpbSgpfQpgOwoJICAgICAgfSk7CgkgICAgICBvbC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiXG4iICsgbWFya2Rvd24yLnRyaW0oKSksIG9sKTsKCSAgICB9KTsKCSAgICBmb3IgKGxldCBpID0gMTsgaSA8PSA2OyBpKyspIHsKCSAgICAgIGRvYy5xdWVyeVNlbGVjdG9yQWxsKGBoJHtpfWApLmZvckVhY2goKGhlYWRlcikgPT4gewoJICAgICAgICBjb25zdCBtYXJrZG93bkhlYWRlciA9IGAKJHsiIyIucmVwZWF0KGkpfSAke2hlYWRlci50ZXh0Q29udGVudH0KYDsKCSAgICAgICAgaGVhZGVyLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG1hcmtkb3duSGVhZGVyKSwgaGVhZGVyKTsKCSAgICAgIH0pOwoJICAgIH0KCSAgICBkb2MucXVlcnlTZWxlY3RvckFsbCgicCIpLmZvckVhY2goKHApID0+IHsKCSAgICAgIGNvbnN0IG1hcmtkb3duUGFyYWdyYXBoID0gIlxuIiArIHAudGV4dENvbnRlbnQgKyAiXG4iOwoJICAgICAgcC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShtYXJrZG93blBhcmFncmFwaCksIHApOwoJICAgIH0pOwoJICAgIGRvYy5xdWVyeVNlbGVjdG9yQWxsKCJ0YWJsZSIpLmZvckVhY2goKHRhYmxlKSA9PiB7CgkgICAgICBsZXQgbWFya2Rvd24yID0gIiI7CgkgICAgICB0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCJ0aGVhZCB0ciIpLmZvckVhY2goKHRyKSA9PiB7CgkgICAgICAgIHRyLnF1ZXJ5U2VsZWN0b3JBbGwoInRoIikuZm9yRWFjaCgodGgpID0+IHsKCSAgICAgICAgICBtYXJrZG93bjIgKz0gYHwgJHt0aC50ZXh0Q29udGVudH0gYDsKCSAgICAgICAgfSk7CgkgICAgICAgIG1hcmtkb3duMiArPSAifFxuIjsKCSAgICAgICAgdHIucXVlcnlTZWxlY3RvckFsbCgidGgiKS5mb3JFYWNoKCgpID0+IHsKCSAgICAgICAgICBtYXJrZG93bjIgKz0gInwgLS0tLSAiOwoJICAgICAgICB9KTsKCSAgICAgICAgbWFya2Rvd24yICs9ICJ8XG4iOwoJICAgICAgfSk7CgkgICAgICB0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCJ0Ym9keSB0ciIpLmZvckVhY2goKHRyKSA9PiB7CgkgICAgICAgIHRyLnF1ZXJ5U2VsZWN0b3JBbGwoInRkIikuZm9yRWFjaCgodGQpID0+IHsKCSAgICAgICAgICBtYXJrZG93bjIgKz0gYHwgJHt0ZC50ZXh0Q29udGVudH0gYDsKCSAgICAgICAgfSk7CgkgICAgICAgIG1hcmtkb3duMiArPSAifFxuIjsKCSAgICAgIH0pOwoJICAgICAgdGFibGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIlxuIiArIG1hcmtkb3duMi50cmltKCkgKyAiXG4iKSwgdGFibGUpOwoJICAgIH0pOwoJICAgIGxldCBtYXJrZG93biA9IGRvYy5ib2R5LmlubmVySFRNTC5yZXBsYWNlKC88W14+XSo+L2csICIiKTsKCSAgICBtYXJrZG93biA9IG1hcmtkb3duLnJlcGxhY2VBbGwoLy0gJmd0Oy9nLCAiLSAkXFxndCQiKTsKCSAgICBtYXJrZG93biA9IG1hcmtkb3duLnJlcGxhY2VBbGwoLz4vZywgIj4iKTsKCSAgICBtYXJrZG93biA9IG1hcmtkb3duLnJlcGxhY2VBbGwoLzwvZywgIjwiKTsKCSAgICBtYXJrZG93biA9IG1hcmtkb3duLnJlcGxhY2VBbGwoL+KJpS9nLCAiPj0iKTsKCSAgICBtYXJrZG93biA9IG1hcmtkb3duLnJlcGxhY2VBbGwoL+KJpC9nLCAiPD0iKTsKCSAgICBtYXJrZG93biA9IG1hcmtkb3duLnJlcGxhY2VBbGwoL+KJoC9nLCAiXFxuZXEiKTsKCSAgICByZXR1cm4gbWFya2Rvd24udHJpbSgpOwoJICB9Cgl9OwoKCWNvbnN0IERvd25sb2FkID0gewoJICBzdGFydDogZnVuY3Rpb24oZGF0YSwgZmlsZW5hbWUsIHR5cGUpIHsKCSAgICB2YXIgZmlsZSA9IG5ldyBCbG9iKFtkYXRhXSwgeyB0eXBlIH0pOwoJICAgIGlmICh3aW5kb3cubmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IpIHsKCSAgICAgIHdpbmRvdy5uYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYihmaWxlLCBmaWxlbmFtZSk7CgkgICAgfSBlbHNlIHsKCSAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpLCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpOwoJICAgICAgYS5ocmVmID0gdXJsOwoJICAgICAgYS5kb3dubG9hZCA9IGZpbGVuYW1lOwoJICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKCSAgICAgIGEuY2xpY2soKTsKCSAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7CgkgICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7CgkgICAgICB9LCAwKTsKCSAgICB9CgkgIH0KCX07CgoJY29uc3QgQ2hhdCA9IHsKCSAgc2FuaXRpemVGaWxlbmFtZTogZnVuY3Rpb24oaW5wdXQsIHJlcGxhY2VtZW50ID0gIl8iKSB7CgkgICAgY29uc3QgaWxsZWdhbFJlID0gL1tcL1xcXD9cJVwqXDpcfCI8PlwuXS9nOwoJICAgIGNvbnN0IGNvbnRyb2xSZSA9IC9bXHgwMC1ceDFmXHg4MC1ceDlmXS9nOwoJICAgIGNvbnN0IHJlc2VydmVkUmUgPSAvXlwuKyQvOwoJICAgIGNvbnN0IHdpbmRvd3NSZXNlcnZlZFJlID0gL14oY29ufHBybnxhdXh8bnVsfGNvbVsxLTldfGxwdFsxLTldKSQvaTsKCSAgICBsZXQgbmFtZSA9IGlucHV0LnJlcGxhY2UoaWxsZWdhbFJlLCByZXBsYWNlbWVudCkucmVwbGFjZShjb250cm9sUmUsIHJlcGxhY2VtZW50KS5yZXBsYWNlKC9ccysvZywgIiAiKS50cmltKCk7CgkgICAgaWYgKHJlc2VydmVkUmUudGVzdChuYW1lKSkKCSAgICAgIG5hbWUgPSAiZmlsZSI7CgkgICAgaWYgKHdpbmRvd3NSZXNlcnZlZFJlLnRlc3QobmFtZSkpCgkgICAgICBuYW1lID0gYGZpbGVfJHtuYW1lfWA7CgkgICAgcmV0dXJuIG5hbWUgfHwgInVudGl0bGVkIjsKCSAgfSwKCSAgZ2V0Q29udmVyc2F0aW9uRWxlbWVudHM6IGZ1bmN0aW9uKCkgewoJICAgIGNvbnN0IGN1cnJlbnRVcmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKCSAgICBjb25zdCByZXN1bHQgPSBbXTsKCSAgICBsZXQgcGxhdGZvcm0gPSAiIjsKCSAgICBsZXQgdGl0bGUgPSAiIjsKCSAgICBpZiAoY3VycmVudFVybC5pbmNsdWRlcygib3BlbmFpLmNvbSIpIHx8IGN1cnJlbnRVcmwuaW5jbHVkZXMoImNoYXRncHQuY29tIikpIHsKCSAgICAgIHBsYXRmb3JtID0gImNoYXRHUFQiOwoJICAgICAgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjaGlzdG9yeSBhW2RhdGEtYWN0aXZlXSIpPy50ZXh0Q29udGVudDsKCSAgICAgIHJlc3VsdC5wdXNoKC4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImRpdltkYXRhLW1lc3NhZ2UtaWRdIikpOwoJICAgIH0gZWxzZSBpZiAoY3VycmVudFVybC5pbmNsdWRlcygiZ3Jvay5jb20iKSkgewoJICAgICAgcGxhdGZvcm0gPSAiZ3JvayI7CgkgICAgICByZXN1bHQucHVzaCguLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYubWVzc2FnZS1idWJibGUiKSk7CgkgICAgfSBlbHNlIGlmIChjdXJyZW50VXJsLmluY2x1ZGVzKCJnZW1pbmkuZ29vZ2xlLmNvbSIpKSB7CgkgICAgICBwbGF0Zm9ybSA9ICJnZW1pbmkiOwoJICAgICAgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJjb252ZXJzYXRpb25zLWxpc3QgZGl2LnNlbGVjdGVkIik/LnRleHRDb250ZW50OwoJICAgICAgY29uc3QgdXNlclF1ZXJpZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJ1c2VyLXF1ZXJ5LWNvbnRlbnQiKTsKCSAgICAgIGNvbnN0IG1vZGVsUmVzcG9uc2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgibW9kZWwtcmVzcG9uc2UiKTsKCSAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXNlclF1ZXJpZXMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgaWYgKGkgPCBtb2RlbFJlc3BvbnNlcy5sZW5ndGgpIHsKCSAgICAgICAgICByZXN1bHQucHVzaCh1c2VyUXVlcmllc1tpXSk7CgkgICAgICAgICAgcmVzdWx0LnB1c2gobW9kZWxSZXNwb25zZXNbaV0pOwoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIHJlc3VsdC5wdXNoKHVzZXJRdWVyaWVzW2ldKTsKCSAgICAgICAgfQoJICAgICAgfQoJICAgIH0KCSAgICByZXR1cm4geyAicmVzdWx0IjogcmVzdWx0LCAicGxhdGZvcm0iOiBwbGF0Zm9ybSwgInRpdGxlIjogdGl0bGUgfTsKCSAgfSwKCSAgZXhwb3J0Q2hhdEFzTWFya2Rvd246IGZ1bmN0aW9uKCkgewoJICAgIGxldCBtYXJrZG93bkNvbnRlbnQgPSAiIjsKCSAgICBjb25zdCB7IHJlc3VsdCwgcGxhdGZvcm0sIHRpdGxlIH0gPSB0aGlzLmdldENvbnZlcnNhdGlvbkVsZW1lbnRzKCk7CgkgICAgY29uc3QgZmlsZW5hbWUgPSAodGhpcy5zYW5pdGl6ZUZpbGVuYW1lKHRpdGxlKSB8fCAiY2hhdF9leHBvcnQiKSArICIubWQiOwoJICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSArPSAyKSB7CgkgICAgICBpZiAoIXJlc3VsdFtpICsgMV0pCgkgICAgICAgIGJyZWFrOwoJICAgICAgbGV0IHVzZXJUZXh0ID0gcmVzdWx0W2ldLnRleHRDb250ZW50LnRyaW0oKTsKCSAgICAgIGxldCBhbnN3ZXJIdG1sID0gcmVzdWx0W2kgKyAxXS5pbm5lckhUTUwudHJpbSgpOwoJICAgICAgdXNlclRleHQgPSBIdG1sVG9NYXJrZG93bi50byh1c2VyVGV4dCwgcGxhdGZvcm0pOwoJICAgICAgYW5zd2VySHRtbCA9IEh0bWxUb01hcmtkb3duLnRvKGFuc3dlckh0bWwsIHBsYXRmb3JtKTsKCSAgICAgIG1hcmtkb3duQ29udGVudCArPSBgCiMgUToKJHt1c2VyVGV4dH0KIyBBOgoke2Fuc3dlckh0bWx9YDsKCSAgICB9CgkgICAgbWFya2Rvd25Db250ZW50ID0gbWFya2Rvd25Db250ZW50LnJlcGxhY2UoLyZhbXA7L2csICImIik7CgkgICAgaWYgKG1hcmtkb3duQ29udGVudCkgewoJICAgICAgRG93bmxvYWQuc3RhcnQobWFya2Rvd25Db250ZW50LCBmaWxlbmFtZSwgInRleHQvbWFya2Rvd24iKTsKCSAgICB9CgkgIH0KCX07CgoJdmFyIGNzc18yNDh6ID0gIi5jaGF0LWdwdC1kb2N1bWVudC1ibG9ja3thbGlnbi1pdGVtczpjZW50ZXI7Ym9yZGVyOjFweCBzb2xpZCAjZTVlNWU1O2JvcmRlci1yYWRpdXM6MzVweDtjdXJzb3I6cG9pbnRlcjtkaXNwbGF5OmZsZXg7Zm9udC1zaXplOjE1cHg7anVzdGlmeS1jb250ZW50OmNlbnRlcjtsZWZ0OjUwJTtwYWRkaW5nOjVweCAxNXB4O3Bvc2l0aW9uOmZpeGVkO3RvcDo5cHg7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSk7ei1pbmRleDo5OTk5OTk5OTk5OSFpbXBvcnRhbnR9LmNoYXQtZ3B0LWRvY3VtZW50LWljb24tc217bWFyZ2luLXJpZ2h0OjVweH0uY2hhdC1ncHQtZG9jdW1lbnQtYnRuLWNvbnRlbnR7YWxpZ24taXRlbXM6Y2VudGVyO2Rpc3BsYXk6ZmxleH0iOwoKCWNvbnN0IEV4cG9ydCA9IHsKCSAgYWRkU3R5bGU6IGZ1bmN0aW9uKCkgewoJICAgIENvbW1vblV0aWwuYWRkU3R5bGUoY3NzXzI0OHopOwoJICB9LAoJICBjcmVhdGVTdmdJY29uOiBmdW5jdGlvbigpIHsKCSAgICBjb25zdCBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgInN2ZyIpOwoJICAgIHN2Zy5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImNoYXQtZ3B0LWRvY3VtZW50LWljb24tc20gY2hhdC1ncHQtZG9jdW1lbnQtYnRuLWNvbnRlbnQiKTsKCSAgICBzdmcuc2V0QXR0cmlidXRlKCJ4bWxucyIsICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIpOwoJICAgIHN2Zy5zZXRBdHRyaWJ1dGUoImZpbGwiLCAibm9uZSIpOwoJICAgIHN2Zy5zZXRBdHRyaWJ1dGUoInZpZXdCb3giLCAiMCAwIDI0IDI0Iik7CgkgICAgc3ZnLnNldEF0dHJpYnV0ZSgid2lkdGgiLCAiMTYiKTsKCSAgICBzdmcuc2V0QXR0cmlidXRlKCJoZWlnaHQiLCAiMTYiKTsKCSAgICBzdmcuc2V0QXR0cmlidXRlKCJzdHJva2Utd2lkdGgiLCAiMS41Iik7CgkgICAgc3ZnLnNldEF0dHJpYnV0ZSgic3Ryb2tlIiwgImN1cnJlbnRDb2xvciIpOwoJICAgIGNvbnN0IHBhdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgInBhdGgiKTsKCSAgICBwYXRoLnNldEF0dHJpYnV0ZSgic3Ryb2tlLWxpbmVjYXAiLCAicm91bmQiKTsKCSAgICBwYXRoLnNldEF0dHJpYnV0ZSgic3Ryb2tlLWxpbmVqb2luIiwgInJvdW5kIik7CgkgICAgcGF0aC5zZXRBdHRyaWJ1dGUoImQiLCAiTTE5LjUgMTQuMjV2LTIuNjI1YTMuMzc1IDMuMzc1IDAgMCAwLTMuMzc1LTMuMzc1aC0xLjVBMS4xMjUgMS4xMjUgMCAwIDEgMTMuNSA3LjEyNXYtMS41YTMuMzc1IDMuMzc1IDAgMCAwLTMuMzc1LTMuMzc1SDguMjVtLjc1IDEyIDMgM20wIDAgMy0zbS0zIDN2LTZtLTEuNS05SDUuNjI1Yy0uNjIxIDAtMS4xMjUuNTA0LTEuMTI1IDEuMTI1djE3LjI1YzAgLjYyMS41MDQgMS4xMjUgMS4xMjUgMS4xMjVoMTIuNzVjLjYyMSAwIDEuMTI1LS41MDQgMS4xMjUtMS4xMjVWMTEuMjVhOSA5IDAgMCAwLTktOVoiKTsKCSAgICBzdmcuYXBwZW5kQ2hpbGQocGF0aCk7CgkgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdmcpOwoJICAgIHJldHVybiBzdmc7CgkgIH0sCgkgIGdlbmVyYXRlSHRtbDogZnVuY3Rpb24oKSB7CgkgICAgY29uc3Qgb3V0ZXJEaXYgPSBDb21tb25VdGlsLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKCSAgICAgIGNsYXNzTmFtZTogImNoYXQtZ3B0LWRvY3VtZW50LWJsb2NrIiwKCSAgICAgIGNoaWxkcmVuczogWwoJICAgICAgICB0aGlzLmNyZWF0ZVN2Z0ljb24oKSwKCSAgICAgICAgQ29tbW9uVXRpbC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CgkgICAgICAgICAgY2xhc3NOYW1lOiAiY2hhdC1ncHQtZG9jdW1lbnQtYnRuLWNvbnRlbnQiLAoJICAgICAgICAgIHRleHQ6ICJTYXZlIEFzIFBERiIKCSAgICAgICAgfSkKCSAgICAgIF0KCSAgICB9KTsKCSAgICAoZG9jdW1lbnQuYm9keSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmFwcGVuZENoaWxkKG91dGVyRGl2KTsKCSAgICBvdXRlckRpdi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uKCkgewoJICAgICAgQ2hhdC5leHBvcnRDaGF0QXNNYXJrZG93bigpOwoJICAgIH0pOwoJICB9LAoJICBzdGFydDogZnVuY3Rpb24oKSB7CgkgICAgdGhpcy5hZGRTdHlsZSgpOwoJICAgIHRoaXMuZ2VuZXJhdGVIdG1sKCk7CgkgIH0KCX07CgoJKCgpID0+IHsKCSAgaWYgKHR5cGVvZiB0cnVzdGVkVHlwZXMgIT09ICJ1bmRlZmluZWQiICYmIHRydXN0ZWRUeXBlcy5kZWZhdWx0UG9saWN5ID09PSBudWxsKSB7CgkgICAgbGV0IHMgPSAoczIpID0+IHMyOwoJICAgIHRydXN0ZWRUeXBlcy5jcmVhdGVQb2xpY3koImRlZmF1bHQiLCB7IGNyZWF0ZUhUTUw6IHMsIGNyZWF0ZVNjcmlwdFVSTDogcywgY3JlYXRlU2NyaXB0OiBzIH0pOwoJICB9Cgl9KSgpOwoKCUV4cG9ydC5zdGFydCgpOwoKfSgpKTsK"},{"name":"Caixa Inútil do Facebook","options":{"check_for_updates":true,"user_modified":null,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":null,"unwrap":null,"run_at":null,"run_in":null,"tags":[],"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["https://www.facebook.com/*","https://facebook.com/*","https://m.facebook.com/*","https://facebookwkhpilnemxj7asaniu7vnjjbiltxjqhye3mhbshg7kx5tfyd.onion/*","http://facebookwkhpilnemxj7asaniu7vnjjbiltxjqhye3mhbshg7kx5tfyd.onion/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"orig_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-start","orig_run_in":[],"orig_noframes":null,"orig_tags":[]}},"storage":{"ts":1756027455734,"data":{}},"enabled":true,"position":8,"file_url":"https://update.greasyfork.org/scripts/480649/Caixa%20In%C3%BAtil%20do%20Facebook.user.js","uuid":"2bd10121-67fe-4122-b0e2-7df891fbc607","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBDYWl4YSBJbsO6dGlsIGRvIEZhY2Vib29rCi8vIEBkZXNjcmlwdGlvbiAgUmVtb3ZlIG8gcG9wdXAgcXVlIGRpeiBxdWUgdm9jw6ogZGV2ZSBmYXplciBsb2dpbiBvdSBzZSBjYWRhc3RyYXIgbm8gZmFjZWJvb2suCi8vIEBuYW1lc3BhY2UgICAgaHR0cDovL2xpbmttZS5iaW8vamhvbnBlcmdvbi8/dXNlcnNjcmlwdD1iYW5uZXJmYgovLyBAdmVyc2lvbiAgICAgIDEuMgovLyBAYXV0aG9yICAgICAgIEpob24gUMOpcmdvbgovLyBAaWNvbiAgICAgICAgIGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQ0FBQUFBZ0NBWUFBQUJ6ZW5yMEFBQUNUVWxFUVZSWVIyTmtHR0RBT01EMk01RHZnUHFqeHhuKy9iTUFlNENKNlFSRG83VWxPWjRoM1FGTlozUVpmbisvaE5VeVZrNDloanFUeTZRNGhEUUgxQjcrVDVUaHpiWkVtMHVjd3Rvai94Z1kvaE9uRnU1Q3h2OE16VFpNaEJ5TTM5Q0c0L01ZL3Y1SkpHUUlYbmxtbHZrTURaWkp1TlJnZDBERE1TR0d2My9mVW1ReHVtWm1abUdHQnF0MzZNS1lEaUEybm9FbVdVdHpNNnlPMGtZeFU2NTVMOE1mRGw3Y2JrZExIK1E3NFA5L2htZGw1aGdXMGMwQjE3TU5HUGk1Mk9BT3FGOXhrT0hqOTU4TWF4NHpNZnpqNUtOOUNEd3JOWU5iSWxPem1lRWZ2emh4U1laYVVZRHNBS25XQXd3TWJGd2p3UUYvZmpFOHE3VEI2MU9wenVQQXVvR1pSbW1BR0FkMG44SWZGUlNsZ1FGM0FKTGZSbWdpSEEwQmVvUUFvMlBKLy84Mi9nUkxOWElTSWVPUmpRei85L2VnVklBWXRTR2pTK1YvQm1CTjkxOUNub0ZCU1FlblEwaHl3TDByREl3dkhqSXdNREl5L04vVGp0OEJZQnZkRzRRWS8vOTZDM2FJRlRBMC92M0dkTWo5czhCV0dyQ2xCZ0l5UUlleWNXS3FZV0psWUR5MkVXSXhJNXN3dzg0R0lob2tTTVl3ZVRYTUE3WUVFeG4rL1dINGIrSk9NRnFRRlRDZTJRa3NrbGtZZ0MzRCtmKzJOWkRZSkVPemlpbXdIZHdvL2Yvdkw4Ti9QUWU4RG1HOGRJQ0JFVndYQUpXdnI2U3dVWXJ1a01oK1lMUDhQOE0vU1RVR0JtNStWTm12SHhtWW50OENXY3p3YjNraDBTMW9vaFhDYlV1WXFjdkUrTzhTS1A3L0tVRWFKVXozZ0JVUUk3QWw5UGUvUHNPaUxPeWRGaHpoUnJvRG9BWXhaaTQ0RHRRTTdwb0JnK1hFLytrSmRPcWFrWlFVQ1NzbU93UUlHMDJjQ2dDY05PUWhOVFZNRHdBQUFBQkpSVTVFcmtKZ2dnPT0KCi8vIEBuYW1lOnB0ICAgICAgICAgQ2FpeGEgSW7DunRpbCBkbyBGYWNlYm9vawovLyBAbmFtZTpwdC1CUiAgICAgIENhaXhhIEluw7p0aWwgZG8gRmFjZWJvb2sKLy8gQG5hbWU6cHQtUFQgICAgICBDYWl4YSBJbsO6dGlsIGRvIEZhY2Vib29rCi8vIEBuYW1lOmVzICAgICAgICAgQ2FqYSBJbsO6dGlsIGRlIEZhY2Vib29rCi8vIEBuYW1lOmVuICAgICAgICAgRmFjZWJvb2sgVXNlbGVzcyBCb3gKLy8gQG5hbWU6ZnIgICAgICAgICBCb8OudGUgSW51dGlsZSBGYWNlYm9vawovLyBAbmFtZTpydSAgICAgICAgINCR0LXRgdC/0L7Qu9C10LfQvdCw0Y8g0LrQvtGA0L7QsdC60LAgRmFjZWJvb2sKLy8gQG5hbWU6amEgICAgICAgICDjg5XjgqfjgqTjgrnjg5bjg4Pjgq/jga7nhKHpp4Tjgarjg5zjg4Pjgq/jgrkKLy8gQG5hbWU6a28gICAgICAgICDtjpjsnbTsiqTrtoEg7JO466qo7JeG64qUIOuwleyKpAovLyBAbmFtZTp6aC1UVyAgICAgIEZhY2Vib29rIOeEoeeUqOebkgovLyBAbmFtZTp6aC1DTiAgICAgIEZhY2Vib29rIOaXoOeUqOebkgovLyBAbmFtZTppZCAgICAgICAgIEtvdGFrIFRpZGFrIEJlcmd1bmEgRmFjZWJvb2sKLy8gQG5hbWU6dWcgICAgICAgICBGYWNlYm9vayBIZXFpcWkgUXV0aQovLyBAbmFtZTphciAgICAgICAgINi12YbYr9mI2YIg2YHZitiz2KjZiNmDINin2YTYutmK2LEg2YXZgdmK2K8KLy8gQG5hbWU6aGUgICAgICAgICDXp9eV16TXodeqINek15nXmdeh15HXldenINec15Ag16nXmdee15XXqdeZ16oKLy8gQG5hbWU6aGkgICAgICAgICDgpKvgpYfgpLjgpKzgpYHgpJUg4KSv4KWC4KSc4KS84KSy4KWH4KS4IOCkrOClieCkleCljeCkuAovLyBAbmFtZTp0aCAgICAgICAgIOC4geC4peC5iOC4reC4h+C5hOC4o+C5ieC4m+C4o+C4sOC5guC4ouC4iuC4meC5jOC4guC4reC4hyBGYWNlYm9vawovLyBAbmFtZTpiZyAgICAgICAgINCk0LXQudGB0LHRg9C6INCR0LXQt9C/0L7Qu9C10LfQvdCwINCa0YPRgtC40Y8KLy8gQG5hbWU6cm8gICAgICAgICBDdXRpZSBJbnV0aWzEgyBGYWNlYm9vawovLyBAbmFtZTpmaSAgICAgICAgIEZhY2Vib29raW4gSHnDtmR5dMO2biBMYWF0aWtrbwovLyBAbmFtZTppdCAgICAgICAgIFNjYXRvbGEgSW51dGlsZSBkaSBGYWNlYm9vawovLyBAbmFtZTplbCAgICAgICAgIM6Rzr3PhM6vz4PPhM6/zrnPh86/IM6azr/Phc+Ezq8gzpzOt8+HzrHOvc65z4POvM6/z40gz4TOv8+FIEZhY2Vib29rCi8vIEBuYW1lOmVvICAgICAgICAgU2VudXRpbGEgU2thdG9sbyBkZSBGYWNlYm9vawovLyBAbmFtZTpodSAgICAgICAgIEZhY2Vib29rIEhhc3pvbnRhbGFuIERvYm96Ci8vIEBuYW1lOm5iICAgICAgICAgRmFjZWJvb2sgTnl0dGVsw7hzIEJva3MKLy8gQG5hbWU6c2sgICAgICAgICBGYWNlYm9vayBCZXpvYnNhaG92w6EgU2NocsOhbmthCi8vIEBuYW1lOnN2ICAgICAgICAgRmFjZWJvb2sgT27DtmRpZyBMw6VkYQovLyBAbmFtZTpzciAgICAgICAgINCk0LXRmNGB0LHRg9C6INCR0LXRgdC60L7RgNC40YHQvdCwINCa0YPRgtC40ZjQsAovLyBAbmFtZTpwbCAgICAgICAgIEJlenNlbnNvd25lIFB1ZGXFgmtvIEZhY2Vib29rYQovLyBAbmFtZTpubCAgICAgICAgIE51dHRlbG96ZSBEb29zIHZhbiBGYWNlYm9vawovLyBAbmFtZTpkZSAgICAgICAgIEZhY2Vib29rIE51dHpsb3NlIEJveAovLyBAbmFtZTpkYSAgICAgICAgIEZhY2Vib29rIEJydWdsw7hzIEJva3MKLy8gQG5hbWU6Y3MgICAgICAgICBGYWNlYm9vayBaYnl0ZcSNbsOhIEtyYWJpY2UKLy8gQG5hbWU6dWsgICAgICAgICDQndC10L/QvtGC0YDRltCx0L3QsCDRgdC60YDQuNC90YzQutCwIEZhY2Vib29rCi8vIEBuYW1lOnRyICAgICAgICAgRmFjZWJvb2sgR2VyZWtzaXogS3V0dQovLyBAbmFtZTp2aSAgICAgICAgIEjhu5lwIFbDtCBE4bulbmcgY+G7p2EgRmFjZWJvb2sKLy8gQG5hbWU6ZnItQ0EgICAgICBCb8OudGUgSW51dGlsZSBkZSBGYWNlYm9vawoKLy8gQGRlc2NyaXB0aW9uOnB0ICAgICAgIFJlbW92ZSBvIHBvcHVwIHF1ZSBkaXogcXVlIHZvY8OqIGRldmUgZmF6ZXIgbG9naW4gb3Ugc2UgY2FkYXN0cmFyIG5vIGZhY2Vib29rLgovLyBAZGVzY3JpcHRpb246cHQtQlIgICAgUmVtb3ZlIG8gcG9wdXAgcXVlIGRpeiBxdWUgdm9jw6ogZGV2ZSBmYXplciBsb2dpbiBvdSBzZSBjYWRhc3RyYXIgbm8gZmFjZWJvb2suCi8vIEBkZXNjcmlwdGlvbjpwdC1QVCAgICBSZW1vdmUgbyBwb3B1cCBxdWUgZGl6IHF1ZSB2b2PDqiBkZXZlIGZhemVyIGxvZ2luIG91IHNlIGNhZGFzdHJhciBubyBmYWNlYm9vay4KLy8gQGRlc2NyaXB0aW9uOmVuICAgICAgIFJlbW92ZSB0aGUgYm94IHRoYXQgc2F5cyB5b3UgbXVzdCByZWdpc3RlciBvciBsb2cgaW4gdG8gdmlldyB0aGlzIHBhZ2Ugb24gRmFjZWJvb2suCi8vIEBkZXNjcmlwdGlvbjplcyAgICAgICBFbGltaW5hIGxhIGNhamEgcXVlIGRpY2UgcXVlIGRlYmVzIHJlZ2lzdHJhcnRlIG8gaW5pY2lhciBzZXNpw7NuIHBhcmEgdmVyIGVzdGEgcMOhZ2luYSBlbiBGYWNlYm9vay4KLy8gQGRlc2NyaXB0aW9uOmZyICAgICAgIFN1cHByaW1leiBsYSBib8OudGUgcXVpIGluZGlxdWUgcXVlIHZvdXMgZGV2ZXogdm91cyBpbnNjcmlyZSBvdSB2b3VzIGNvbm5lY3RlciBwb3VyIHZvaXIgY2V0dGUgcGFnZSBzdXIgRmFjZWJvb2suCi8vIEBkZXNjcmlwdGlvbjpydSAgICAgICDQo9Cx0LXRgNC40YLQtSDQvtC60L3Qviwg0LrQvtGC0L7RgNC+0LUg0LPQvtCy0L7RgNC40YIsINGH0YLQviDQtNC70Y8g0L/RgNC+0YHQvNC+0YLRgNCwINGN0YLQvtC5INGB0YLRgNCw0L3QuNGG0Ysg0L3QsCBGYWNlYm9vayDQvdC10L7QsdGF0L7QtNC40LzQviDQt9Cw0YDQtdCz0LjRgdGC0YDQuNGA0L7QstCw0YLRjNGB0Y8g0LjQu9C4INCy0L7QudGC0Lgg0LIg0YHQuNGB0YLQtdC80YMuCi8vIEBkZXNjcmlwdGlvbjpqYSAgICAgICBGYWNlYm9va+OBp+OBk+OBruODmuODvOOCuOOCkuihqOekuuOBmeOCi+OBq+OBr+eZu+mMsuOBvuOBn+OBr+ODreOCsOOCpOODs+OBmeOCi+W/heimgeOBjOOBguOCi+OBqOihqOekuuOBleOCjOOBpuOBhOOCi+ODnOODg+OCr+OCueOCkuWPluOCiumZpOOBjeOBvuOBmeOAggovLyBAZGVzY3JpcHRpb246a28gICAgICAgRmFjZWJvb2vsl5DshJwg7J20IO2OmOydtOyngOulvCDrs7TroKTrqbQg65Ox66Gd7ZWY6rGw64KYIOuhnOq3uOyduO2VtOyVvO2VnOuLpOuKlCDsg4HsnpDrpbwg7KCc6rGw7ZWp64uI64ukLgovLyBAZGVzY3JpcHRpb246emgtVFcgICAg56e76Zmk6aGv56S65ZyoIEZhY2Vib29rIOS4iuafpeeci+atpOmggemdouW/hemgiOiou+WGiuaIlueZu+mMhOeahOahhuOAggovLyBAZGVzY3JpcHRpb246emgtQ04gICAg5Yig6Zmk5ZyoIEZhY2Vib29rIOS4iuafpeeci+atpOmhtemdouW/hemhu+azqOWGjOaIlueZu+W9leeahOahhuOAggovLyBAZGVzY3JpcHRpb246aWQgICAgICAgSGFwdXMga290YWsgeWFuZyBtZW55YXRha2FuIEFuZGEgaGFydXMgbWVuZGFmdGFyIGF0YXUgbWFzdWsgdW50dWsgbWVsaWhhdCBoYWxhbWFuIGluaSBkaSBGYWNlYm9vay4KLy8gQGRlc2NyaXB0aW9uOnVnICAgICAgIEZhY2Vib29rZGlraSBidSBzYWhpZmluaSBrbydyaXNoIHVjaHVuIHJvJ3l4YXRkYW4gbyd0aXNoIHlva2kga2lyaXNoIGtpcml0aXNobmkgYXl0YWRpZ2FuIHF1dGluaSBvbGliIHRhc2hsYW5nLgovLyBAZGVzY3JpcHRpb246YXIgICAgICAg2YLZhSDYqNil2LLYp9mE2Kkg2KfZhNi12YbYr9mI2YIg2KfZhNiw2Yog2YrZgtmI2YQg2KXZhtmHINmK2KzYqCDYudmE2YrZgyDYp9mE2KrYs9is2YrZhCDYo9mIINiq2LPYrNmK2YQg2KfZhNiv2K7ZiNmEINmE2LnYsdi2INmH2LDZhyDYp9mE2LXZgdit2Kkg2LnZhNmJINmB2YrYs9io2YjZgy4KLy8gQGRlc2NyaXB0aW9uOmhlICAgICAgINeU16HXqCDXkNeqINeU16rXmdenINeR15Ug15vXqteV15Eg16nXotec15nXmiDXnNeU15nXqNep150g15DXlSDXnNeU16rXl9eR16gg15vXk9eZINec16jXkNeV16og15PXoyDXlteUINeR16TXmdeZ16HXkdeV16cuCi8vIEBkZXNjcmlwdGlvbjpoaSAgICAgICDgpIngpLgg4KSs4KWJ4KSV4KWN4KS4IOCkleCliyDgpLngpJ/gpL7gpI/gpIIg4KSc4KS/4KS44KSu4KWH4KSCIOCkleCkueCkviDgpJfgpK/gpL4g4KS54KWIIOCkleCkvyDgpIbgpKrgpJXgpYsg4KSH4KS4IOCkquClg+Ckt+CljeCkoCDgpJXgpYsg4KSm4KWH4KSW4KSo4KWHIOCkleClhyDgpLLgpL/gpI8g4KSq4KSC4KSc4KWA4KSV4KSw4KSjIOCkleCksOCkqOCkviDgpK/gpL4g4KSy4KWJ4KSX4KS/4KSoIOCkleCksOCkqOCkviDgpLngpYvgpJfgpL7gpaQKLy8gQGRlc2NyaXB0aW9uOnRoICAgICAgIOC4peC4muC4geC4peC5iOC4reC4h+C4l+C4teC5iOC4o+C4sOC4muC4uOC4p+C5iOC4suC4hOC4uOC4k+C4leC5ieC4reC4h+C4peC4h+C4l+C4sOC5gOC4muC4teC4ouC4meC4q+C4o+C4t+C4reC5gOC4guC5ieC4suC4quC4ueC5iOC4o+C4sOC4muC4muC5gOC4nuC4t+C5iOC4reC4lOC4ueC4q+C4meC5ieC4suC4meC4teC5ieC5g+C4mSBGYWNlYm9vayDguK3guK3guIEKLy8gQGRlc2NyaXB0aW9uOmJnICAgICAgINCf0YDQtdC80LDRhdC90LXRgtC1INC60YPRgtC40Y/RgtCwLCDQutC+0Y/RgtC+INC60LDQt9Cy0LAsINGH0LUg0YLRgNGP0LHQstCwINC00LAg0YHQtSDRgNC10LPQuNGB0YLRgNC40YDQsNGC0LUg0LjQu9C4INCy0LvQtdC30LXRgtC1LCDQt9CwINC00LAg0LLQuNC00LjRgtC1INGC0LDQt9C4INGB0YLRgNCw0L3QuNGG0LAg0LLRitCyIEZhY2Vib29rLgovLyBAZGVzY3JpcHRpb246cm8gICAgICAgRWxpbWluYcibaSBjdXRpYSBjYXJlIHNwdW5lIGPEgyB0cmVidWllIHPEgyB2xIMgw65ucmVnaXN0cmHIm2kgc2F1IHPEgyB2xIMgYXV0ZW50aWZpY2HIm2kgcGVudHJ1IGEgdml6dWFsaXphIGFjZWFzdMSDIHBhZ2luxIMgcGUgRmFjZWJvb2suCi8vIEBkZXNjcmlwdGlvbjpmaSAgICAgICBQb2lzdGEgbGFhdGlra28sIGpva2Egc2Fub28sIGV0dMOkIHNpbnVuIG9uIHJla2lzdGVyw7ZpZHl0dMOkdsOkIHRhaSBraXJqYXVkdXR0YXZhIHNpc8Okw6RuIG7DpGhkw6Rrc2VzaSB0w6Rtw6RuIHNpdnVuIEZhY2Vib29raXNzYS4KLy8gQGRlc2NyaXB0aW9uOml0ICAgICAgIFJpbXVvdmkgbGEgY2FzZWxsYSBjaGUgZGljZSBjaGUgZGV2aSByZWdpc3RyYXJ0aSBvIGFjY2VkZXJlIHBlciB2aXN1YWxpenphcmUgcXVlc3RhIHBhZ2luYSBzdSBGYWNlYm9vay4KLy8gQGRlc2NyaXB0aW9uOmVsICAgICAgIM6Rz4bOsc65z4HOrc+Dz4TOtSDPhM6/IM66zr/Phc+Ezq8gz4DOv8+FIM67zq3Otc65IM+Az4HOrc+AzrXOuSDOvc6xIM61zrPOs8+BzrHPhs61zq/PhM61IM6uIM69zrEgz4PPhc69zrTOtc64zrXOr8+EzrUgzrPOuc6xIM69zrEgzrTOtc6vz4TOtSDOsc+Fz4TOriDPhM63IM+DzrXOu86vzrTOsSDPg8+Ezr8gRmFjZWJvb2suCi8vIEBkZXNjcmlwdGlvbjplbyAgICAgICBGb3JpZ2lsbyBsYSBza2F0b2xvbiBraXUgZGlyYXMga2UgdmkgZGV2YXMgcmVnaXN0cmnEnWkgYcWtIGVuc2FsdXRpIHBvciB2aWRpIHRpdW4gcGHEnW9uIHN1ciBGYWNlYm9vay4KLy8gQGRlc2NyaXB0aW9uOmh1ICAgICAgIFTDoXZvbMOtdHNhIGVsIGF6dCBhIGRvYm96dCwgYW1lbHkgYXp0IG1vbmRqYSwgaG9neSByZWdpc3p0csOhbG5pYSB2YWd5IGJlamVsZW50a2V6bmllIGtlbGwgYSBGYWNlYm9va29uIHTDtnJ0w6luxZEgb2xkYWxuw6l6w6lzaGV6LgovLyBAZGVzY3JpcHRpb246bmIgICAgICAgRmplcm4gYm9rc2VuIHNvbSBzaWVyIGF0IGR1IG3DpSByZWdpc3RyZXJlIGRlZyBlbGxlciBsb2dnZSBpbm4gZm9yIMOlIHNlIGRlbm5lIHNpZGVuIHDDpSBGYWNlYm9vay4KLy8gQGRlc2NyaXB0aW9uOnNrICAgICAgIE9kc3Ryw6HFiHRlIGJveCwga3RvcsO9IGhvdm9yw60sIMW+ZSBzYSBtdXPDrXRlIHByaWhsw6FzacWlIGFsZWJvIHphcmVnaXN0cm92YcWlLCBhYnkgc3RlIHZpZGVsaSB0w7p0byBzdHLDoW5rdSBuYSBGYWNlYm9va3UuCi8vIEBkZXNjcmlwdGlvbjpzdiAgICAgICBUYSBib3J0IHJ1dGFuIHNvbSBzw6RnZXIgYXR0IGR1IG3DpXN0ZSByZWdpc3RyZXJhIGRpZyBlbGxlciBsb2dnYSBpbiBmw7ZyIGF0dCBzZSBkZW4gaMOkciBzaWRhbiBww6UgRmFjZWJvb2suCi8vIEBkZXNjcmlwdGlvbjpzciAgICAgICDQo9C60LvQvtC90LjRgtC1INC60YPRgtC40ZjRgyDQutC+0ZjQsCDQutCw0LbQtSDQtNCwINGB0LUg0LzQvtGA0LDRgtC1INGA0LXQs9C40YHRgtGA0L7QstCw0YLQuCDQuNC70Lgg0L/RgNC40ZjQsNCy0LjRgtC4INC00LAg0LHQuNGB0YLQtSDQstC40LTQtdC70Lgg0L7QstGDINGB0YLRgNCw0L3QuNGG0YMg0L3QsCDQpNC10ZjRgdCx0YPQutGDLgovLyBAZGVzY3JpcHRpb246cGwgICAgICAgVXN1xYQgcG9sZSwga3TDs3JlIG3Ds3dpLCDFvGUgbXVzaXN6IHNpxJkgemFyZWplc3Ryb3dhxIcgbHViIHphbG9nb3dhxIcsIGFieSB6b2JhY3p5xIcgdMSZIHN0cm9uxJkgbmEgRmFjZWJvb2t1LgovLyBAZGVzY3JpcHRpb246bmwgICAgICAgVmVyd2lqZGVyIGRlIGJveCBkaWUgemVndCBkYXQgamUgamUgbW9ldCByZWdpc3RyZXJlbiBvZiBpbmxvZ2dlbiBvbSBkZXplIHBhZ2luYSBvcCBGYWNlYm9vayB0ZSBiZWtpamtlbi4KLy8gQGRlc2NyaXB0aW9uOmRlICAgICAgIEVudGZlcm5lbiBTaWUgZGllIEJveCwgZGllIGJlc2FndCwgZGFzcyBTaWUgc2ljaCByZWdpc3RyaWVyZW4gb2RlciBhbm1lbGRlbiBtw7xzc2VuLCB1bSBkaWVzZSBTZWl0ZSBhdWYgRmFjZWJvb2sgenUgc2VoZW4uCi8vIEBkZXNjcmlwdGlvbjpkYSAgICAgICBGamVybiBib2tzZW4sIGRlciBzaWdlciwgYXQgZHUgc2thbCByZWdpc3RyZXJlIGRpZyBlbGxlciBsb2dnZSBpbmQgZm9yIGF0IHNlIGRlbm5lIHNpZGUgcMOlIEZhY2Vib29rLgovLyBAZGVzY3JpcHRpb246Y3MgICAgICAgT2RlYmVydGUgcG9sZSwga3RlcsOpIMWZw61rw6EsIMW+ZSBzZSBtdXPDrXRlIHphcmVnaXN0cm92YXQgbmVibyBwxZlpaGzDoXNpdCwgYWJ5c3RlIG1vaGxpIHpvYnJheml0IHR1dG8gc3Ryw6Fua3UgbmEgRmFjZWJvb2t1LgovLyBAZGVzY3JpcHRpb246dWsgICAgICAg0JLQuNC00LDQu9GW0YLRjCDQutC+0YDQvtCx0LrRgywg0Y/QutCwINC60LDQttC1LCDRidC+INC00LvRjyDQv9C10YDQtdCz0LvRj9C00YMg0YbRltGU0Zcg0YHRgtC+0YDRltC90LrQuCDQvdCwIEZhY2Vib29rINC/0L7RgtGA0ZbQsdC90L4g0LfQsNGA0LXRlNGB0YLRgNGD0LLQsNGC0LjRgdGPINCw0LHQviDRg9Cy0ZbQudGC0LguCi8vIEBkZXNjcmlwdGlvbjp0ciAgICAgICBGYWNlYm9vayd0YSBidSBzYXlmYXnEsSBnw7ZybWVrIGnDp2luIGtheWRvbG1hbsSxeiB2ZXlhIGdpcmnFnyB5YXBtYW7EsXogZ2VyZWt0acSfaW5pIHPDtnlsZXllbiBrdXR1eXUga2FsZMSxcsSxbi4KLy8gQGRlc2NyaXB0aW9uOnZpICAgICAgIExv4bqhaSBi4buPIGjhu5lwIHRow7RuZyBiw6FvIGLhuqFuIHBo4bqjaSDEkcSDbmcga8O9IGhv4bq3YyDEkcSDbmcgbmjhuq1wIMSR4buDIHhlbSB0cmFuZyBuw6B5IHRyw6puIEZhY2Vib29rLgovLyBAZGVzY3JpcHRpb246ZnItQ0EgICAgU3VwcHJpbWV6IGxhIGJvw650ZSBxdWkgaW5kaXF1ZSBxdWUgdm91cyBkZXZleiB2b3VzIGluc2NyaXJlIG91IHZvdXMgY29ubmVjdGVyIHBvdXIgdm9pciBjZXR0ZSBwYWdlIHN1ciBGYWNlYm9vay4KCi8vIEBtYXRjaCAgICAgICAgaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tLyoKLy8gQG1hdGNoICAgICAgICBodHRwczovL2ZhY2Vib29rLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgaHR0cHM6Ly9mYWNlYm9va3draHBpbG5lbXhqN2FzYW5pdTd2bmpqYmlsdHhqcWh5ZTNtaGJzaGc3a3g1dGZ5ZC5vbmlvbi8qCi8vIEBtYXRjaCAgICAgICAgaHR0cDovL2ZhY2Vib29rd2tocGlsbmVteGo3YXNhbml1N3ZuampiaWx0eGpxaHllM21oYnNoZzdreDV0ZnlkLm9uaW9uLyoKCi8vIEBsaWNlbnNlICAgICAgTUlUCi8vIEBncmFudCAgICAgICAgbm9uZQovLyBAcnVuLWF0ICAgICAgIGRvY3VtZW50LXN0YXJ0CgovLyBAY29tcGF0aWJsZSAgICAgIGNocm9tZQovLyBAY29tcGF0aWJsZSAgICAgIGZpcmVmb3gKLy8gQGNvbXBhdGlibGUgICAgICBvcGVyYQovLyBAY29tcGF0aWJsZSAgICAgIGVkZ2UKLy8gQGNvbXBhdGlibGUgICAgICBzYWZhcmkKLy8gQGNvbXBhdGlibGUgICAgICBiZXJyeWJyb3dzZXIKLy8gQGRvd25sb2FkVVJMIGh0dHBzOi8vdXBkYXRlLmdyZWFzeWZvcmsub3JnL3NjcmlwdHMvNDgwNjQ5L0NhaXhhJTIwSW4lQzMlQkF0aWwlMjBkbyUyMEZhY2Vib29rLnVzZXIuanMKLy8gQHVwZGF0ZVVSTCBodHRwczovL3VwZGF0ZS5ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzQ4MDY0OS9DYWl4YSUyMEluJUMzJUJBdGlsJTIwZG8lMjBGYWNlYm9vay5tZXRhLmpzCi8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uKCkgewogICAgJ3VzZSBzdHJpY3QnOwogICAgZnVuY3Rpb24gcmVtb3ZlRngoKXsKICAgICAgbGV0IGNoZWNhck1hcmdpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2RpdicpOwogICAgICAgIGlmKGNoZWNhck1hcmdpbil7CiAgICAgICAgICBjaGVjYXJNYXJnaW4uZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudG9EKSB7CiAgICAgICAgICAgIC8vIFRpcmEgYSBtYXJnZW0gZGUgb3V0cmEgY29pc2EgcGFyYSBhdW1lbnRhciBvIGVzcGHDp28gZW0gdGVsYQogICAgICAgICAgICBpZihlbGVtZW50b0Quc3R5bGUudG9wID09ICI1NnB4Iil7CiAgICAgICAgICAgICAgZWxlbWVudG9ELnN0eWxlLnRvcCA9ICctNXB4JzsKICAgICAgICAgICAgICBlbGVtZW50b0Quc3R5bGUubWFyZ2luVG9wID0gJy01cHgnOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICAgIC8vIENhc28gbyBjYXJyZWdhbWVudG8gc2VqYSBsZW50bwogICAgd2luZG93LnNldFRpbWVvdXQocmVtb3ZlRngsIDI1MCk7CiAgICB3aW5kb3cuc2V0VGltZW91dChyZW1vdmVGeCwgNTUwKTsKICAgIHdpbmRvdy5zZXRUaW1lb3V0KHJlbW92ZUZ4LCAxMDUwKTsKICAgIHdpbmRvdy5zZXRUaW1lb3V0KHJlbW92ZUZ4LCAxNTUwKTsKICAgIHdpbmRvdy5zZXRUaW1lb3V0KHJlbW92ZUZ4LCAyNTAwKTsKCiAgZnVuY3Rpb24gcmVtb3ZlQm94ZG93bigpewogICAgIGxldCBjaGVjYXJEaXZzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGl2W2RhdGEtbm9zbmlwcGV0XScpOwogICAgICAgIGlmKGNoZWNhckRpdnMpewogICAgICAgICAgY2hlY2FyRGl2cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50b04pIHsKICAgICAgICAgICAgZWxlbWVudG9OLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICB9KTsKICAgICAgfQogICAgbGV0IGNoZWNhckV4aXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BhZ2VsZXRfZ3Jvd3RoX2V4cGFuZGluZ19jdGEnKTsKICAgIGlmKGNoZWNhckV4aXN0KXsKICAgICAgICBjaGVjYXJFeGlzdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgfQogIH0KCiAgIGNvbnN0IGNoZWNrQmFubmVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIHJlbW92ZUJveGRvd24oKQogICAgfSwgNTAwKTsKCiAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIGNsZWFySW50ZXJ2YWwoY2hlY2tCYW5uZXIpOwogIH0sIDEyMDAwKTsKCn0pKCk7Cg=="},{"name":"Picviewer CE+","options":{"check_for_updates":true,"user_modified":null,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":null,"unwrap":null,"run_at":null,"run_in":null,"tags":[],"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["*://*/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":["http://www.toodledo.com/tasks/*","http*://maps.google.com*/*","*://www.google.*/_/chrome/newtab*","*://mega.*/*","*://*.mega.*/*","*://onedrive.live.com/*"],"merge_excludes":true,"use_connects":[],"orig_connects":["www.google.com","www.google.com.hk","www.google.co.jp","ipv4.google.com","image.baidu.com","www.tineye.com","hoothin.com","*"],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-end","orig_run_in":[],"orig_noframes":null,"orig_tags":[]}},"storage":{"ts":1756026654704,"data":{"inited":"btrue"}},"enabled":false,"position":9,"file_url":"https://update.greasyfork.org/scripts/24204/Picviewer%20CE%2B.user.js","uuid":"d966cee8-b943-4c77-a5dd-3041f3b1ca58","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICAgICAgIFBpY3ZpZXdlciBDRSsKLy8gQG5hbWU6emgtQ04gICAgICAgICAgIFBpY3ZpZXdlciBDRSsKLy8gQG5hbWU6emgtVFcgICAgICAgICAgIFBpY3ZpZXdlciBDRSsKLy8gQG5hbWU6amEgICAgICAgICAgICAgIFBpY3ZpZXdlciBDRSsKLy8gQG5hbWU6cHQtQlIgICAgICAgICAgIFBpY3ZpZXdlciBDRSsKLy8gQG5hbWU6cnUgICAgICAgICAgICAgIFBpY3ZpZXdlciBDRSsKLy8gQGF1dGhvciAgICAgICAgICAgICAgIE5MRiAmJiB5d3poYWlxaSAmJiBob290aGluCi8vIEBkZXNjcmlwdGlvbiAgICAgICAgICBQb3dlcmZ1bCBwaWN0dXJlIHZpZXdpbmcgdG9vbCBvbmxpbmUsIHdoaWNoIGNhbiBwb3B1cC9zY2FsZS9yb3RhdGUvYmF0Y2ggc2F2ZSBwaWN0dXJlcyBhdXRvbWF0aWNhbGx5Ci8vIEBkZXNjcmlwdGlvbjp6aC1DTiAgICDlnKjnur/nnIvlm77lt6XlhbfvvIzmlK/mjIHlm77niYfnv7vovazjgIHml4vovazjgIHnvKnmlL7jgIHlvLnlh7rlpKflm77jgIHmibnph4/kv53lrZgKLy8gQGRlc2NyaXB0aW9uOnpoLVRXICAgIOe3muS4iueci+WcluW3peWFt++8jOaUr+aPtOWclueJh+e/u+i9ieOAgeaXi+i9ieOAgee4ruaUvuOAgeW9iOWHuuWkp+WcluOAgeaJuemHj+WEsuWtmAovLyBAZGVzY3JpcHRpb246amEgICAgICAg55S75YOP44KS5by35Yqb44Gr6Zay6Kan44Gn44GN44KL44OE44O844Or44CC44Od44OD44OX44Ki44OD44OX6KGo56S644CB5ouh5aSn44O757iu5bCP44CB5Zue6Lui44CB5LiA5ous5L+d5a2Y44Gq44Gp44Gu5qmf6IO944KS6Ieq5YuV44Gn5a6f6KGM44Gn44GN44G+44GZCi8vIEBkZXNjcmlwdGlvbjpwdC1CUiAgICBQb2Rlcm9zYSBmZXJyYW1lbnRhIGRlIHZpc3VhbGl6YcOnw6NvIGRlIGltYWdlbnMgb24tbGluZSwgcXVlIHBvZGUgcG9wLXVwL2RpbWVuc2lvbmFyL2dpcmFyL3NhbHZhciBlbSBsb3RlIGltYWdlbnMgYXV0b21hdGljYW1lbnRlCi8vIEBkZXNjcmlwdGlvbjpydSAgICAgICDQnNC+0YnQvdGL0Lkg0L7QvdC70LDQudC9LdC40L3RgdGC0YDRg9C80LXQvdGCINC00LvRjyDQv9GA0L7RgdC80L7RgtGA0LAg0LjQt9C+0LHRgNCw0LbQtdC90LjQuSwg0LrQvtGC0L7RgNGL0Lkg0LzQvtC20LXRgiDQsNCy0YLQvtC80LDRgtC40YfQtdGB0LrQuCDQvtGC0L7QsdGA0LDQttCw0YLRjC/QvNCw0YHRiNGC0LDQsdC40YDQvtCy0LDRgtGML9Cy0YDQsNGJ0LDRgtGML9C/0LDQutC10YLQvdC+INGB0L7RhdGA0LDQvdGP0YLRjCDQuNC30L7QsdGA0LDQttC10L3QuNGPCi8vIEB2ZXJzaW9uICAgICAgICAgICAgICAyMDI1LjkuMTEuMQovLyBAaWNvbiAgICAgICAgICAgICAgICAgZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FNQUFBRFhxYzNLQUFBQVYxQk1WRVVBQUFELy8vLzI5dmJLeXNvcUtpb2lJaUt5c3JLaG9hR1RrNU45ZlgzejgvUHY3Ky9yNit2azVPVGIyOXZPenM2T2pvNVVWRlF6TXpNWkdSa1JFUkVNREF5NHVMaXNyS3lscGFWNGVIaGtaR1JQVDA4L1B6L0lmeGpRQUFBQWdrbEVRVlFvejUzUlJ3N0RJQkJBVWI1cHhyMm0zLytja2ZESW13eUpsTDlERHpRZ0RJVU1SdTF2V094VEJkZU0rb25BcEVORjBxSGpwa09rMlZUd0xWRUY0MEtiZmoxd0s4QVZ1MnBRQTFhQkJZREhKMXd5OUNmNGNYRDVjaHpOQXZzQW5jOFRqb0xBaEl6c0Jhbzl3MXJsVlRJdmtPWU1kOW5tNnhQaTE2OHQ5QVlrYkFOZGFqcGpjd0FBQUFCSlJVNUVya0pnZ2c9PQovLyBAbmFtZXNwYWNlICAgICAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2hvb3RoaW4vVXNlclNjcmlwdHMKLy8gQGhvbWVwYWdlICAgICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9ob290aGluL1VzZXJTY3JpcHRzL3RyZWUvbWFzdGVyL1BpY3ZpZXdlciUyMENFJTJCCi8vIEBzdXBwb3J0VVJMICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vaG9vdGhpbi9Vc2VyU2NyaXB0cy9pc3N1ZXMKLy8gQGNvbm5lY3QgICAgICAgICAgICAgIHd3dy5nb29nbGUuY29tCi8vIEBjb25uZWN0ICAgICAgICAgICAgICB3d3cuZ29vZ2xlLmNvbS5oawovLyBAY29ubmVjdCAgICAgICAgICAgICAgd3d3Lmdvb2dsZS5jby5qcAovLyBAY29ubmVjdCAgICAgICAgICAgICAgaXB2NC5nb29nbGUuY29tCi8vIEBjb25uZWN0ICAgICAgICAgICAgICBpbWFnZS5iYWlkdS5jb20KLy8gQGNvbm5lY3QgICAgICAgICAgICAgIHd3dy50aW5leWUuY29tCi8vIEBjb25uZWN0ICAgICAgICAgICAgICBob290aGluLmNvbQovLyBAY29ubmVjdCAgICAgICAgICAgICAgKgovLyBAZ3JhbnQgICAgICAgICAgICAgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICAgICAgICAgICBHTV9kZWxldGVWYWx1ZQovLyBAZ3JhbnQgICAgICAgICAgICAgICAgR01fYWRkU3R5bGUKLy8gQGdyYW50ICAgICAgICAgICAgICAgIEdNX29wZW5JblRhYgovLyBAZ3JhbnQgICAgICAgICAgICAgICAgR01fc2V0Q2xpcGJvYXJkCi8vIEBncmFudCAgICAgICAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgICAgICAgICAgICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZAovLyBAZ3JhbnQgICAgICAgICAgICAgICAgR01fbm90aWZpY2F0aW9uCi8vIEBncmFudCAgICAgICAgICAgICAgICBHTV9kb3dubG9hZAovLyBAZ3JhbnQgICAgICAgICAgICAgICAgR00uZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICAgICAgICAgIEdNLnNldFZhbHVlCi8vIEBncmFudCAgICAgICAgICAgICAgICBHTS5kZWxldGVWYWx1ZQovLyBAZ3JhbnQgICAgICAgICAgICAgICAgR00uYWRkU3R5bGUKLy8gQGdyYW50ICAgICAgICAgICAgICAgIEdNLm9wZW5JblRhYgovLyBAZ3JhbnQgICAgICAgICAgICAgICAgR00uc2V0Q2xpcGJvYXJkCi8vIEBncmFudCAgICAgICAgICAgICAgICBHTS54bWxIdHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgICAgICAgICAgICAgR00ucmVnaXN0ZXJNZW51Q29tbWFuZAovLyBAZ3JhbnQgICAgICAgICAgICAgICAgR00ubm90aWZpY2F0aW9uCi8vIEBncmFudCAgICAgICAgICAgICAgICB1bnNhZmVXaW5kb3cKLy8gQHJlcXVpcmUgICAgICAgICAgICAgIGh0dHBzOi8vdXBkYXRlLmdyZWFzeWZvcmsub3JnL3NjcmlwdHMvNjE1OC8yMzcxMC9HTV9jb25maWclMjBDTi5qcwovLyBAcmVxdWlyZSAgICAgICAgICAgICAgaHR0cHM6Ly91cGRhdGUuZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy80MzgwODAvMTY1NTYyOS9wdmNlcF9ydWxlcy5qcwovLyBAcmVxdWlyZSAgICAgICAgICAgICAgaHR0cHM6Ly91cGRhdGUuZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy80NDA2OTgvMTY1MzQyNC9wdmNlcF9sYW5nLmpzCi8vIEBtYXRjaCAgICAgICAgICAgICAgICAqOi8vKi8qCi8vIEBleGNsdWRlICAgICAgICAgICAgICBodHRwOi8vd3d3LnRvb2RsZWRvLmNvbS90YXNrcy8qCi8vIEBleGNsdWRlICAgICAgICAgICAgICBodHRwKjovL21hcHMuZ29vZ2xlLmNvbSovKgovLyBAZXhjbHVkZSAgICAgICAgICAgICAgKjovL3d3dy5nb29nbGUuKi9fL2Nocm9tZS9uZXd0YWIqCi8vIEBleGNsdWRlICAgICAgICAgICAgICAqOi8vbWVnYS4qLyoKLy8gQGV4Y2x1ZGUgICAgICAgICAgICAgICo6Ly8qLm1lZ2EuKi8qCi8vIEBleGNsdWRlICAgICAgICAgICAgICAqOi8vb25lZHJpdmUubGl2ZS5jb20vKgovLyBAcnVuLWF0ICAgICAgICAgICAgICAgZG9jdW1lbnQtZW5kCi8vIEBjcmVhdGVkICAgICAgICAgICAgICAyMDExLTYtMTUKLy8gQGNvbnRyaWJ1dGlvblVSTCAgICAgIGh0dHBzOi8va28tZmkuY29tL2hvb3RoaW4KLy8gQGNvbnRyaWJ1dGlvbkFtb3VudCAgIDEKLy8gQGRvd25sb2FkVVJMIGh0dHBzOi8vdXBkYXRlLmdyZWFzeWZvcmsub3JnL3NjcmlwdHMvMjQyMDQvUGljdmlld2VyJTIwQ0UlMkIudXNlci5qcwovLyBAdXBkYXRlVVJMIGh0dHBzOi8vdXBkYXRlLmdyZWFzeWZvcmsub3JnL3NjcmlwdHMvMjQyMDQvUGljdmlld2VyJTIwQ0UlMkIubWV0YS5qcwovLyA9PS9Vc2VyU2NyaXB0PT0KCmlmICh3aW5kb3cudG9wICE9IHdpbmRvdy5zZWxmKSB7CiAgICB0cnkgewogICAgICAgIGlmICgod2luZG93LnNlbGYuaW5uZXJXaWR0aCAmJiB3aW5kb3cuc2VsZi5pbm5lcldpZHRoIDwgMjUwKSB8fCAod2luZG93LnNlbGYuaW5uZXJIZWlnaHQgJiYgd2luZG93LnNlbGYuaW5uZXJIZWlnaHQgPCAyNTApKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICB9IGNhdGNoKGUpIHsKICAgICAgICByZXR1cm47CiAgICB9Cn0KCihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7CiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICJmdW5jdGlvbiIgJiYgZGVmaW5lLmFtZCkgewogICAgZGVmaW5lKFtdLCBmYWN0b3J5KTsKICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAidW5kZWZpbmVkIikgewogICAgZmFjdG9yeSgpOwogIH0gZWxzZSB7CiAgICB2YXIgbW9kID0gewogICAgICBleHBvcnRzOiB7fQogICAgfTsKICAgIGZhY3RvcnkoKTsKICAgIGdsb2JhbC5GaWxlU2F2ZXIgPSBtb2QuZXhwb3J0czsKICB9Cn0pKHRoaXMsIGZ1bmN0aW9uICgpIHsKICAidXNlIHN0cmljdCI7CgogIC8qCiAgKiBGaWxlU2F2ZXIuanMKICAqIEEgc2F2ZUFzKCkgRmlsZVNhdmVyIGltcGxlbWVudGF0aW9uLgogICoKICAqIEJ5IEVsaSBHcmV5LCBodHRwOi8vZWxpZ3JleS5jb20KICAqCiAgKiBMaWNlbnNlIDogaHR0cHM6Ly9naXRodWIuY29tL2VsaWdyZXkvRmlsZVNhdmVyLmpzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQgKE1JVCkKICAqIHNvdXJjZSAgOiBodHRwOi8vcHVybC5lbGlncmV5LmNvbS9naXRodWIvRmlsZVNhdmVyLmpzCiAgKi8KICAvLyBUaGUgb25lIGFuZCBvbmx5IHdheSBvZiBnZXR0aW5nIGdsb2JhbCBzY29wZSBpbiBhbGwgZW52aXJvbm1lbnRzCiAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzMyNzcxODIvMTAwODk5OQogIHZhciBfZ2xvYmFsID0gdHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LndpbmRvdyA9PT0gd2luZG93ID8gd2luZG93IDogdHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZiA/IHNlbGYgOiB0eXBlb2YgZ2xvYmFsID09PSAnb2JqZWN0JyAmJiBnbG9iYWwuZ2xvYmFsID09PSBnbG9iYWwgPyBnbG9iYWwgOiB2b2lkIDA7CgogIGZ1bmN0aW9uIGJvbShibG9iLCBvcHRzKSB7CiAgICBpZiAodHlwZW9mIG9wdHMgPT09ICd1bmRlZmluZWQnKSBvcHRzID0gewogICAgICBhdXRvQm9tOiBmYWxzZQogICAgfTtlbHNlIGlmICh0eXBlb2Ygb3B0cyAhPT0gJ29iamVjdCcpIHsKICAgICAgY29uc29sZS53YXJuKCdEZXByZWNhdGVkOiBFeHBlY3RlZCB0aGlyZCBhcmd1bWVudCB0byBiZSBhIG9iamVjdCcpOwogICAgICBvcHRzID0gewogICAgICAgIGF1dG9Cb206ICFvcHRzCiAgICAgIH07CiAgICB9IC8vIHByZXBlbmQgQk9NIGZvciBVVEYtOCBYTUwgYW5kIHRleHQvKiB0eXBlcyAoaW5jbHVkaW5nIEhUTUwpCiAgICAvLyBub3RlOiB5b3VyIGJyb3dzZXIgd2lsbCBhdXRvbWF0aWNhbGx5IGNvbnZlcnQgVVRGLTE2IFUrRkVGRiB0byBFRiBCQiBCRgoKICAgIGlmIChvcHRzLmF1dG9Cb20gJiYgL15ccyooPzp0ZXh0XC9cUyp8YXBwbGljYXRpb25cL3htbHxcUypcL1xTKlwreG1sKVxzKjsuKmNoYXJzZXRccyo9XHMqdXRmLTgvaS50ZXN0KGJsb2IudHlwZSkpIHsKICAgICAgcmV0dXJuIG5ldyBCbG9iKFtTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RkVGRiksIGJsb2JdLCB7CiAgICAgICAgdHlwZTogYmxvYi50eXBlCiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBibG9iOwogIH0KCiAgZnVuY3Rpb24gZG93bmxvYWQodXJsLCBuYW1lLCBvcHRzKSB7CiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICB4aHIub3BlbignR0VUJywgdXJsKTsKICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYic7CgogICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgc2F2ZUFzKHhoci5yZXNwb25zZSwgbmFtZSwgb3B0cyk7CiAgICB9OwoKICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICBjb25zb2xlLmVycm9yKCdjb3VsZCBub3QgZG93bmxvYWQgZmlsZScpOwogICAgfTsKCiAgICB4aHIuc2VuZCgpOwogIH0KCiAgZnVuY3Rpb24gY29yc0VuYWJsZWQodXJsKSB7CiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7IC8vIHVzZSBzeW5jIHRvIGF2b2lkIHBvcHVwIGJsb2NrZXIKCiAgICB4aHIub3BlbignSEVBRCcsIHVybCwgZmFsc2UpOwoKICAgIHRyeSB7CiAgICAgIHhoci5zZW5kKCk7CiAgICB9IGNhdGNoIChlKSB7fQoKICAgIHJldHVybiB4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDw9IDI5OTsKICB9IC8vIGBhLmNsaWNrKClgIGRvZXNuJ3Qgd29yayBmb3IgYWxsIGJyb3dzZXJzICgjNDY1KQoKCiAgZnVuY3Rpb24gY2xpY2sobm9kZSkgewogICAgdHJ5IHsKICAgICAgbm9kZS5kaXNwYXRjaEV2ZW50KG5ldyBNb3VzZUV2ZW50KCdjbGljaycpKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50cycpOwogICAgICBldnQuaW5pdE1vdXNlRXZlbnQoJ2NsaWNrJywgdHJ1ZSwgdHJ1ZSwgd2luZG93LCAwLCAwLCAwLCA4MCwgMjAsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAwLCBudWxsKTsKICAgICAgbm9kZS5kaXNwYXRjaEV2ZW50KGV2dCk7CiAgICB9CiAgfSAvLyBEZXRlY3QgV2ViVmlldyBpbnNpZGUgYSBuYXRpdmUgbWFjT1MgYXBwIGJ5IHJ1bGluZyBvdXQgYWxsIGJyb3dzZXJzCiAgLy8gV2UganVzdCBuZWVkIHRvIGNoZWNrIGZvciAnU2FmYXJpJyBiZWNhdXNlIGFsbCBvdGhlciBicm93c2VycyAoYmVzaWRlcyBGaXJlZm94KSBpbmNsdWRlIHRoYXQgdG9vCiAgLy8gaHR0cHM6Ly93d3cud2hhdGlzbXlicm93c2VyLmNvbS9ndWlkZXMvdGhlLWxhdGVzdC11c2VyLWFnZW50L21hY29zCgoKICB2YXIgaXNNYWNPU1dlYlZpZXcgPSBfZ2xvYmFsLm5hdmlnYXRvciAmJiAvTWFjaW50b3NoLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmIC9BcHBsZVdlYktpdC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhL1NhZmFyaS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTsKICB2YXIgVVJMID0gX2dsb2JhbC5VUkwgfHwgX2dsb2JhbC53ZWJraXRVUkw7CiAgdmFyIHJldm9rZU9iamVjdFVSTCA9IFVSTC5yZXZva2VPYmplY3RVUkw7CiAgdmFyIGNyZWF0ZU9iamVjdFVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkw7CiAgdmFyIHNhdmVBcyA9IF9nbG9iYWwuc2F2ZUFzIHx8ICggLy8gcHJvYmFibHkgaW4gc29tZSB3ZWIgd29ya2VyCiAgdHlwZW9mIHdpbmRvdyAhPT0gJ29iamVjdCcgfHwgd2luZG93ICE9PSBfZ2xvYmFsID8gZnVuY3Rpb24gc2F2ZUFzKCkge30KICAvKiBub29wICovCiAgLy8gVXNlIGRvd25sb2FkIGF0dHJpYnV0ZSBmaXJzdCBpZiBwb3NzaWJsZSAoIzE5MyBMdW1pYSBtb2JpbGUpIHVubGVzcyB0aGlzIGlzIGEgbWFjT1MgV2ViVmlldwogIDogJ2Rvd25sb2FkJyBpbiBIVE1MQW5jaG9yRWxlbWVudC5wcm90b3R5cGUgJiYgIWlzTWFjT1NXZWJWaWV3ID8gZnVuY3Rpb24gc2F2ZUFzKGJsb2IsIG5hbWUsIG9wdHMpIHsKICAgIHZhciBVUkwgPSBfZ2xvYmFsLlVSTCB8fCBfZ2xvYmFsLndlYmtpdFVSTDsKICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgbmFtZSA9IG5hbWUgfHwgYmxvYi5uYW1lIHx8ICdkb3dubG9hZCc7CiAgICBhLmRvd25sb2FkID0gbmFtZTsKICAgIGEucmVsID0gJ25vb3BlbmVyJzsgLy8gdGFibmFiYmluZwogICAgLy8gVE9ETzogZGV0ZWN0IGNocm9tZSBleHRlbnNpb25zICYgcGFja2FnZWQgYXBwcwogICAgLy8gYS50YXJnZXQgPSAnX2JsYW5rJwoKICAgIGlmICh0eXBlb2YgYmxvYiA9PT0gJ3N0cmluZycpIHsKICAgICAgLy8gU3VwcG9ydCByZWd1bGFyIGxpbmtzCiAgICAgIGEuaHJlZiA9IGJsb2I7CgogICAgICBpZiAoYS5vcmlnaW4gIT09IGxvY2F0aW9uLm9yaWdpbikgewogICAgICAgIGNvcnNFbmFibGVkKGEuaHJlZikgPyBkb3dubG9hZChibG9iLCBuYW1lLCBvcHRzKSA6IGNsaWNrKGEsIGEudGFyZ2V0ID0gJ19ibGFuaycpOwogICAgICB9IGVsc2UgewogICAgICAgIGNsaWNrKGEpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICAvLyBTdXBwb3J0IGJsb2JzCiAgICAgIGEuaHJlZiA9IGNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV2b2tlT2JqZWN0VVJMKGEuaHJlZik7CiAgICAgIH0sIDRFNCk7IC8vIDQwcwoKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgY2xpY2soYSk7CiAgICAgIH0sIDApOwogICAgfQogIH0gLy8gVXNlIG1zU2F2ZU9yT3BlbkJsb2IgYXMgYSBzZWNvbmQgYXBwcm9hY2gKICA6ICdtc1NhdmVPck9wZW5CbG9iJyBpbiBuYXZpZ2F0b3IgPyBmdW5jdGlvbiBzYXZlQXMoYmxvYiwgbmFtZSwgb3B0cykgewogICAgbmFtZSA9IG5hbWUgfHwgYmxvYi5uYW1lIHx8ICdkb3dubG9hZCc7CgogICAgaWYgKHR5cGVvZiBibG9iID09PSAnc3RyaW5nJykgewogICAgICBpZiAoY29yc0VuYWJsZWQoYmxvYikpIHsKICAgICAgICBkb3dubG9hZChibG9iLCBuYW1lLCBvcHRzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhLmhyZWYgPSBibG9iOwogICAgICAgIGEudGFyZ2V0ID0gJ19ibGFuayc7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjbGljayhhKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IoYm9tKGJsb2IsIG9wdHMpLCBuYW1lKTsKICAgIH0KICB9IC8vIEZhbGxiYWNrIHRvIHVzaW5nIEZpbGVSZWFkZXIgYW5kIGEgcG9wdXAKICA6IGZ1bmN0aW9uIHNhdmVBcyhibG9iLCBuYW1lLCBvcHRzLCBwb3B1cCkgewogICAgLy8gT3BlbiBhIHBvcHVwIGltbWVkaWF0ZWx5IGRvIGdvIGFyb3VuZCBwb3B1cCBibG9ja2VyCiAgICAvLyBNb3N0bHkgb25seSBhdmFpbGFibGUgb24gdXNlciBpbnRlcmFjdGlvbiBhbmQgdGhlIGZpbGVSZWFkZXIgaXMgYXN5bmMgc28uLi4KICAgIHBvcHVwID0gcG9wdXAgfHwgb3BlbignJywgJ19ibGFuaycpOwoKICAgIGlmIChwb3B1cCkgewogICAgICBwb3B1cC5kb2N1bWVudC50aXRsZSA9IHBvcHVwLmRvY3VtZW50LmJvZHkuaW5uZXJUZXh0ID0gJ2Rvd25sb2FkaW5nLi4uJzsKICAgIH0KCiAgICBpZiAodHlwZW9mIGJsb2IgPT09ICdzdHJpbmcnKSByZXR1cm4gZG93bmxvYWQoYmxvYiwgbmFtZSwgb3B0cyk7CiAgICB2YXIgZm9yY2UgPSBibG9iLnR5cGUgPT09ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nOwoKICAgIHZhciBpc1NhZmFyaSA9IC9jb25zdHJ1Y3Rvci9pLnRlc3QoX2dsb2JhbC5IVE1MRWxlbWVudCkgfHwgX2dsb2JhbC5zYWZhcmk7CgogICAgdmFyIGlzQ2hyb21lSU9TID0gL0NyaU9TXC9bXGRdKy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTsKCiAgICBpZiAoKGlzQ2hyb21lSU9TIHx8IGZvcmNlICYmIGlzU2FmYXJpIHx8IGlzTWFjT1NXZWJWaWV3KSAmJiB0eXBlb2YgRmlsZVJlYWRlciAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgLy8gU2FmYXJpIGRvZXNuJ3QgYWxsb3cgZG93bmxvYWRpbmcgb2YgYmxvYiBVUkxzCiAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgdXJsID0gcmVhZGVyLnJlc3VsdDsKICAgICAgICB1cmwgPSBpc0Nocm9tZUlPUyA/IHVybCA6IHVybC5yZXBsYWNlKC9eZGF0YTpbXjtdKjsvLCAnZGF0YTphdHRhY2htZW50L2ZpbGU7Jyk7CiAgICAgICAgaWYgKHBvcHVwKSBwb3B1cC5sb2NhdGlvbi5ocmVmID0gdXJsO2Vsc2UgbG9jYXRpb24gPSB1cmw7CiAgICAgICAgcG9wdXAgPSBudWxsOyAvLyByZXZlcnNlLXRhYm5hYmJpbmcgIzQ2MAogICAgICB9OwoKICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7CiAgICB9IGVsc2UgewogICAgICB2YXIgdXJsID0gY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICBpZiAocG9wdXApIHBvcHVwLmxvY2F0aW9uID0gdXJsO2Vsc2UgbG9jYXRpb24uaHJlZiA9IHVybDsKICAgICAgcG9wdXAgPSBudWxsOyAvLyByZXZlcnNlLXRhYm5hYmJpbmcgIzQ2MAoKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV2b2tlT2JqZWN0VVJMKHVybCk7CiAgICAgIH0sIDRFNCk7IC8vIDQwcwogICAgfQogIH0pOwogIF9nbG9iYWwuc2F2ZUFzID0gc2F2ZUFzLnNhdmVBcyA9IHNhdmVBczsKCiAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7CiAgICBtb2R1bGUuZXhwb3J0cyA9IHNhdmVBczsKICB9Cn0pOwoKLyohCgpKU1ppcCB2My43LjEgLSBBIEphdmFTY3JpcHQgY2xhc3MgZm9yIGdlbmVyYXRpbmcgYW5kIHJlYWRpbmcgemlwIGZpbGVzCjxodHRwOi8vc3R1YXJ0ay5jb20vanN6aXA+CgooYykgMjAwOS0yMDE2IFN0dWFydCBLbmlnaHRsZXkgPHN0dWFydCBbYXRdIHN0dWFydGsuY29tPgpEdWFsIGxpY2VuY2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBvciBHUEx2My4gU2VlIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vU3R1ay9qc3ppcC9tYXN0ZXIvTElDRU5TRS5tYXJrZG93bi4KCkpTWmlwIHVzZXMgdGhlIGxpYnJhcnkgcGFrbyByZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgOgpodHRwczovL2dpdGh1Yi5jb20vbm9kZWNhL3Bha28vYmxvYi9tYXN0ZXIvTElDRU5TRQoqLwoKKGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuSlNaaXAgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwp2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7CnZhciBzdXBwb3J0ID0gcmVxdWlyZSgnLi9zdXBwb3J0Jyk7Ci8vIHByaXZhdGUgcHJvcGVydHkKdmFyIF9rZXlTdHIgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0iOwoKCi8vIHB1YmxpYyBtZXRob2QgZm9yIGVuY29kaW5nCmV4cG9ydHMuZW5jb2RlID0gZnVuY3Rpb24oaW5wdXQpIHsKICAgIHZhciBvdXRwdXQgPSBbXTsKICAgIHZhciBjaHIxLCBjaHIyLCBjaHIzLCBlbmMxLCBlbmMyLCBlbmMzLCBlbmM0OwogICAgdmFyIGkgPSAwLCBsZW4gPSBpbnB1dC5sZW5ndGgsIHJlbWFpbmluZ0J5dGVzID0gbGVuOwoKICAgIHZhciBpc0FycmF5ID0gdXRpbHMuZ2V0VHlwZU9mKGlucHV0KSAhPT0gInN0cmluZyI7CiAgICB3aGlsZSAoaSA8IGlucHV0Lmxlbmd0aCkgewogICAgICAgIHJlbWFpbmluZ0J5dGVzID0gbGVuIC0gaTsKCiAgICAgICAgaWYgKCFpc0FycmF5KSB7CiAgICAgICAgICAgIGNocjEgPSBpbnB1dC5jaGFyQ29kZUF0KGkrKyk7CiAgICAgICAgICAgIGNocjIgPSBpIDwgbGVuID8gaW5wdXQuY2hhckNvZGVBdChpKyspIDogMDsKICAgICAgICAgICAgY2hyMyA9IGkgPCBsZW4gPyBpbnB1dC5jaGFyQ29kZUF0KGkrKykgOiAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNocjEgPSBpbnB1dFtpKytdOwogICAgICAgICAgICBjaHIyID0gaSA8IGxlbiA/IGlucHV0W2krK10gOiAwOwogICAgICAgICAgICBjaHIzID0gaSA8IGxlbiA/IGlucHV0W2krK10gOiAwOwogICAgICAgIH0KCiAgICAgICAgZW5jMSA9IGNocjEgPj4gMjsKICAgICAgICBlbmMyID0gKChjaHIxICYgMykgPDwgNCkgfCAoY2hyMiA+PiA0KTsKICAgICAgICBlbmMzID0gcmVtYWluaW5nQnl0ZXMgPiAxID8gKCgoY2hyMiAmIDE1KSA8PCAyKSB8IChjaHIzID4+IDYpKSA6IDY0OwogICAgICAgIGVuYzQgPSByZW1haW5pbmdCeXRlcyA+IDIgPyAoY2hyMyAmIDYzKSA6IDY0OwoKICAgICAgICBvdXRwdXQucHVzaChfa2V5U3RyLmNoYXJBdChlbmMxKSArIF9rZXlTdHIuY2hhckF0KGVuYzIpICsgX2tleVN0ci5jaGFyQXQoZW5jMykgKyBfa2V5U3RyLmNoYXJBdChlbmM0KSk7CgogICAgfQoKICAgIHJldHVybiBvdXRwdXQuam9pbigiIik7Cn07CgovLyBwdWJsaWMgbWV0aG9kIGZvciBkZWNvZGluZwpleHBvcnRzLmRlY29kZSA9IGZ1bmN0aW9uKGlucHV0KSB7CiAgICB2YXIgY2hyMSwgY2hyMiwgY2hyMzsKICAgIHZhciBlbmMxLCBlbmMyLCBlbmMzLCBlbmM0OwogICAgdmFyIGkgPSAwLCByZXN1bHRJbmRleCA9IDA7CgogICAgdmFyIGRhdGFVcmxQcmVmaXggPSAiZGF0YToiOwoKICAgIGlmIChpbnB1dC5zdWJzdHIoMCwgZGF0YVVybFByZWZpeC5sZW5ndGgpID09PSBkYXRhVXJsUHJlZml4KSB7CiAgICAgICAgLy8gVGhpcyBpcyBhIGNvbW1vbiBlcnJvcjogcGVvcGxlIGdpdmUgYSBkYXRhIHVybAogICAgICAgIC8vIChkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1IuLi4pIHdpdGggYSB7YmFzZTY0OiB0cnVlfSBhbmQKICAgICAgICAvLyB3b25kZXJzIHdoeSB0aGluZ3MgZG9uJ3Qgd29yay4KICAgICAgICAvLyBXZSBjYW4gZGV0ZWN0IHRoYXQgdGhlIHN0cmluZyBpbnB1dCBsb29rcyBsaWtlIGEgZGF0YSB1cmwgYnV0IHdlCiAgICAgICAgLy8gKmNhbid0KiBiZSBzdXJlIGl0IGlzIG9uZTogcmVtb3ZpbmcgZXZlcnl0aGluZyB1cCB0byB0aGUgY29tbWEgd291bGQKICAgICAgICAvLyBiZSB0b28gZGFuZ2Vyb3VzLgogICAgICAgIHRocm93IG5ldyBFcnJvcigiSW52YWxpZCBiYXNlNjQgaW5wdXQsIGl0IGxvb2tzIGxpa2UgYSBkYXRhIHVybC4iKTsKICAgIH0KCiAgICBpbnB1dCA9IGlucHV0LnJlcGxhY2UoL1teQS1aYS16MC05XCtcL1w9XS9nLCAiIik7CgogICAgdmFyIHRvdGFsTGVuZ3RoID0gaW5wdXQubGVuZ3RoICogMyAvIDQ7CiAgICBpZihpbnB1dC5jaGFyQXQoaW5wdXQubGVuZ3RoIC0gMSkgPT09IF9rZXlTdHIuY2hhckF0KDY0KSkgewogICAgICAgIHRvdGFsTGVuZ3RoLS07CiAgICB9CiAgICBpZihpbnB1dC5jaGFyQXQoaW5wdXQubGVuZ3RoIC0gMikgPT09IF9rZXlTdHIuY2hhckF0KDY0KSkgewogICAgICAgIHRvdGFsTGVuZ3RoLS07CiAgICB9CiAgICBpZiAodG90YWxMZW5ndGggJSAxICE9PSAwKSB7CiAgICAgICAgLy8gdG90YWxMZW5ndGggaXMgbm90IGFuIGludGVnZXIsIHRoZSBsZW5ndGggZG9lcyBub3QgbWF0Y2ggYSB2YWxpZAogICAgICAgIC8vIGJhc2U2NCBjb250ZW50LiBUaGF0IGNhbiBoYXBwZW4gaWY6CiAgICAgICAgLy8gLSB0aGUgaW5wdXQgaXMgbm90IGEgYmFzZTY0IGNvbnRlbnQKICAgICAgICAvLyAtIHRoZSBpbnB1dCBpcyAqYWxtb3N0KiBhIGJhc2U2NCBjb250ZW50LCB3aXRoIGEgZXh0cmEgY2hhcnMgYXQgdGhlCiAgICAgICAgLy8gICBiZWdpbm5pbmcgb3IgYXQgdGhlIGVuZAogICAgICAgIC8vIC0gdGhlIGlucHV0IHVzZXMgYSBiYXNlNjQgdmFyaWFudCAoYmFzZTY0dXJsIGZvciBleGFtcGxlKQogICAgICAgIHRocm93IG5ldyBFcnJvcigiSW52YWxpZCBiYXNlNjQgaW5wdXQsIGJhZCBjb250ZW50IGxlbmd0aC4iKTsKICAgIH0KICAgIHZhciBvdXRwdXQ7CiAgICBpZiAoc3VwcG9ydC51aW50OGFycmF5KSB7CiAgICAgICAgb3V0cHV0ID0gbmV3IFVpbnQ4QXJyYXkodG90YWxMZW5ndGh8MCk7CiAgICB9IGVsc2UgewogICAgICAgIG91dHB1dCA9IG5ldyBBcnJheSh0b3RhbExlbmd0aHwwKTsKICAgIH0KCiAgICB3aGlsZSAoaSA8IGlucHV0Lmxlbmd0aCkgewoKICAgICAgICBlbmMxID0gX2tleVN0ci5pbmRleE9mKGlucHV0LmNoYXJBdChpKyspKTsKICAgICAgICBlbmMyID0gX2tleVN0ci5pbmRleE9mKGlucHV0LmNoYXJBdChpKyspKTsKICAgICAgICBlbmMzID0gX2tleVN0ci5pbmRleE9mKGlucHV0LmNoYXJBdChpKyspKTsKICAgICAgICBlbmM0ID0gX2tleVN0ci5pbmRleE9mKGlucHV0LmNoYXJBdChpKyspKTsKCiAgICAgICAgY2hyMSA9IChlbmMxIDw8IDIpIHwgKGVuYzIgPj4gNCk7CiAgICAgICAgY2hyMiA9ICgoZW5jMiAmIDE1KSA8PCA0KSB8IChlbmMzID4+IDIpOwogICAgICAgIGNocjMgPSAoKGVuYzMgJiAzKSA8PCA2KSB8IGVuYzQ7CgogICAgICAgIG91dHB1dFtyZXN1bHRJbmRleCsrXSA9IGNocjE7CgogICAgICAgIGlmIChlbmMzICE9PSA2NCkgewogICAgICAgICAgICBvdXRwdXRbcmVzdWx0SW5kZXgrK10gPSBjaHIyOwogICAgICAgIH0KICAgICAgICBpZiAoZW5jNCAhPT0gNjQpIHsKICAgICAgICAgICAgb3V0cHV0W3Jlc3VsdEluZGV4KytdID0gY2hyMzsKICAgICAgICB9CgogICAgfQoKICAgIHJldHVybiBvdXRwdXQ7Cn07Cgp9LHsiLi9zdXBwb3J0IjozMCwiLi91dGlscyI6MzJ9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGV4dGVybmFsID0gcmVxdWlyZSgiLi9leHRlcm5hbCIpOwp2YXIgRGF0YVdvcmtlciA9IHJlcXVpcmUoJy4vc3RyZWFtL0RhdGFXb3JrZXInKTsKdmFyIENyYzMyUHJvYmUgPSByZXF1aXJlKCcuL3N0cmVhbS9DcmMzMlByb2JlJyk7CnZhciBEYXRhTGVuZ3RoUHJvYmUgPSByZXF1aXJlKCcuL3N0cmVhbS9EYXRhTGVuZ3RoUHJvYmUnKTsKCi8qKgogKiBSZXByZXNlbnQgYSBjb21wcmVzc2VkIG9iamVjdCwgd2l0aCBldmVyeXRoaW5nIG5lZWRlZCB0byBkZWNvbXByZXNzIGl0LgogKiBAY29uc3RydWN0b3IKICogQHBhcmFtIHtudW1iZXJ9IGNvbXByZXNzZWRTaXplIHRoZSBzaXplIG9mIHRoZSBkYXRhIGNvbXByZXNzZWQuCiAqIEBwYXJhbSB7bnVtYmVyfSB1bmNvbXByZXNzZWRTaXplIHRoZSBzaXplIG9mIHRoZSBkYXRhIGFmdGVyIGRlY29tcHJlc3Npb24uCiAqIEBwYXJhbSB7bnVtYmVyfSBjcmMzMiB0aGUgY3JjMzIgb2YgdGhlIGRlY29tcHJlc3NlZCBmaWxlLgogKiBAcGFyYW0ge29iamVjdH0gY29tcHJlc3Npb24gdGhlIHR5cGUgb2YgY29tcHJlc3Npb24sIHNlZSBsaWIvY29tcHJlc3Npb25zLmpzLgogKiBAcGFyYW0ge1N0cmluZ3xBcnJheUJ1ZmZlcnxVaW50OEFycmF5fEJ1ZmZlcn0gZGF0YSB0aGUgY29tcHJlc3NlZCBkYXRhLgogKi8KZnVuY3Rpb24gQ29tcHJlc3NlZE9iamVjdChjb21wcmVzc2VkU2l6ZSwgdW5jb21wcmVzc2VkU2l6ZSwgY3JjMzIsIGNvbXByZXNzaW9uLCBkYXRhKSB7CiAgICB0aGlzLmNvbXByZXNzZWRTaXplID0gY29tcHJlc3NlZFNpemU7CiAgICB0aGlzLnVuY29tcHJlc3NlZFNpemUgPSB1bmNvbXByZXNzZWRTaXplOwogICAgdGhpcy5jcmMzMiA9IGNyYzMyOwogICAgdGhpcy5jb21wcmVzc2lvbiA9IGNvbXByZXNzaW9uOwogICAgdGhpcy5jb21wcmVzc2VkQ29udGVudCA9IGRhdGE7Cn0KCkNvbXByZXNzZWRPYmplY3QucHJvdG90eXBlID0gewogICAgLyoqCiAgICAgKiBDcmVhdGUgYSB3b3JrZXIgdG8gZ2V0IHRoZSB1bmNvbXByZXNzZWQgY29udGVudC4KICAgICAqIEByZXR1cm4ge0dlbmVyaWNXb3JrZXJ9IHRoZSB3b3JrZXIuCiAgICAgKi8KICAgIGdldENvbnRlbnRXb3JrZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgd29ya2VyID0gbmV3IERhdGFXb3JrZXIoZXh0ZXJuYWwuUHJvbWlzZS5yZXNvbHZlKHRoaXMuY29tcHJlc3NlZENvbnRlbnQpKQogICAgICAgICAgICAucGlwZSh0aGlzLmNvbXByZXNzaW9uLnVuY29tcHJlc3NXb3JrZXIoKSkKICAgICAgICAgICAgLnBpcGUobmV3IERhdGFMZW5ndGhQcm9iZSgiZGF0YV9sZW5ndGgiKSk7CgogICAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgICB3b3JrZXIub24oImVuZCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuc3RyZWFtSW5mb1snZGF0YV9sZW5ndGgnXSAhPT0gdGhhdC51bmNvbXByZXNzZWRTaXplKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkJ1ZyA6IHVuY29tcHJlc3NlZCBkYXRhIHNpemUgbWlzbWF0Y2giKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybiB3b3JrZXI7CiAgICB9LAogICAgLyoqCiAgICAgKiBDcmVhdGUgYSB3b3JrZXIgdG8gZ2V0IHRoZSBjb21wcmVzc2VkIGNvbnRlbnQuCiAgICAgKiBAcmV0dXJuIHtHZW5lcmljV29ya2VyfSB0aGUgd29ya2VyLgogICAgICovCiAgICBnZXRDb21wcmVzc2VkV29ya2VyOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIG5ldyBEYXRhV29ya2VyKGV4dGVybmFsLlByb21pc2UucmVzb2x2ZSh0aGlzLmNvbXByZXNzZWRDb250ZW50KSkKICAgICAgICAgICAgLndpdGhTdHJlYW1JbmZvKCJjb21wcmVzc2VkU2l6ZSIsIHRoaXMuY29tcHJlc3NlZFNpemUpCiAgICAgICAgICAgIC53aXRoU3RyZWFtSW5mbygidW5jb21wcmVzc2VkU2l6ZSIsIHRoaXMudW5jb21wcmVzc2VkU2l6ZSkKICAgICAgICAgICAgLndpdGhTdHJlYW1JbmZvKCJjcmMzMiIsIHRoaXMuY3JjMzIpCiAgICAgICAgICAgIC53aXRoU3RyZWFtSW5mbygiY29tcHJlc3Npb24iLCB0aGlzLmNvbXByZXNzaW9uKQogICAgICAgICAgICA7CiAgICB9Cn07CgovKioKICogQ2hhaW4gdGhlIGdpdmVuIHdvcmtlciB3aXRoIG90aGVyIHdvcmtlcnMgdG8gY29tcHJlc3MgdGhlIGNvbnRlbnQgd2l0aCB0aGUKICogZ2l2ZW4gY29tcHJlc3Npb24uCiAqIEBwYXJhbSB7R2VuZXJpY1dvcmtlcn0gdW5jb21wcmVzc2VkV29ya2VyIHRoZSB3b3JrZXIgdG8gcGlwZS4KICogQHBhcmFtIHtPYmplY3R9IGNvbXByZXNzaW9uIHRoZSBjb21wcmVzc2lvbiBvYmplY3QuCiAqIEBwYXJhbSB7T2JqZWN0fSBjb21wcmVzc2lvbk9wdGlvbnMgdGhlIG9wdGlvbnMgdG8gdXNlIHdoZW4gY29tcHJlc3NpbmcuCiAqIEByZXR1cm4ge0dlbmVyaWNXb3JrZXJ9IHRoZSBuZXcgd29ya2VyIGNvbXByZXNzaW5nIHRoZSBjb250ZW50LgogKi8KQ29tcHJlc3NlZE9iamVjdC5jcmVhdGVXb3JrZXJGcm9tID0gZnVuY3Rpb24gKHVuY29tcHJlc3NlZFdvcmtlciwgY29tcHJlc3Npb24sIGNvbXByZXNzaW9uT3B0aW9ucykgewogICAgcmV0dXJuIHVuY29tcHJlc3NlZFdvcmtlcgogICAgICAgIC5waXBlKG5ldyBDcmMzMlByb2JlKCkpCiAgICAgICAgLnBpcGUobmV3IERhdGFMZW5ndGhQcm9iZSgidW5jb21wcmVzc2VkU2l6ZSIpKQogICAgICAgIC5waXBlKGNvbXByZXNzaW9uLmNvbXByZXNzV29ya2VyKGNvbXByZXNzaW9uT3B0aW9ucykpCiAgICAgICAgLnBpcGUobmV3IERhdGFMZW5ndGhQcm9iZSgiY29tcHJlc3NlZFNpemUiKSkKICAgICAgICAud2l0aFN0cmVhbUluZm8oImNvbXByZXNzaW9uIiwgY29tcHJlc3Npb24pOwp9OwoKbW9kdWxlLmV4cG9ydHMgPSBDb21wcmVzc2VkT2JqZWN0OwoKfSx7Ii4vZXh0ZXJuYWwiOjYsIi4vc3RyZWFtL0NyYzMyUHJvYmUiOjI1LCIuL3N0cmVhbS9EYXRhTGVuZ3RoUHJvYmUiOjI2LCIuL3N0cmVhbS9EYXRhV29ya2VyIjoyN31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgR2VuZXJpY1dvcmtlciA9IHJlcXVpcmUoIi4vc3RyZWFtL0dlbmVyaWNXb3JrZXIiKTsKCmV4cG9ydHMuU1RPUkUgPSB7CiAgICBtYWdpYzogIlx4MDBceDAwIiwKICAgIGNvbXByZXNzV29ya2VyIDogZnVuY3Rpb24gKGNvbXByZXNzaW9uT3B0aW9ucykgewogICAgICAgIHJldHVybiBuZXcgR2VuZXJpY1dvcmtlcigiU1RPUkUgY29tcHJlc3Npb24iKTsKICAgIH0sCiAgICB1bmNvbXByZXNzV29ya2VyIDogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBuZXcgR2VuZXJpY1dvcmtlcigiU1RPUkUgZGVjb21wcmVzc2lvbiIpOwogICAgfQp9OwpleHBvcnRzLkRFRkxBVEUgPSByZXF1aXJlKCcuL2ZsYXRlJyk7Cgp9LHsiLi9mbGF0ZSI6NywiLi9zdHJlYW0vR2VuZXJpY1dvcmtlciI6Mjh9XSw0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpOwoKLyoqCiAqIFRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zIGNvbWUgZnJvbSBwYWtvLCBmcm9tIHBha28vbGliL3psaWIvY3JjMzIuanMKICogcmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLCBzZWUgcGFrbyBodHRwczovL2dpdGh1Yi5jb20vbm9kZWNhL3Bha28vCiAqLwoKLy8gVXNlIG9yZGluYXJ5IGFycmF5LCBzaW5jZSB1bnR5cGVkIG1ha2VzIG5vIGJvb3N0IGhlcmUKZnVuY3Rpb24gbWFrZVRhYmxlKCkgewogICAgdmFyIGMsIHRhYmxlID0gW107CgogICAgZm9yKHZhciBuID0wOyBuIDwgMjU2OyBuKyspewogICAgICAgIGMgPSBuOwogICAgICAgIGZvcih2YXIgayA9MDsgayA8IDg7IGsrKyl7CiAgICAgICAgICAgIGMgPSAoKGMmMSkgPyAoMHhFREI4ODMyMCBeIChjID4+PiAxKSkgOiAoYyA+Pj4gMSkpOwogICAgICAgIH0KICAgICAgICB0YWJsZVtuXSA9IGM7CiAgICB9CgogICAgcmV0dXJuIHRhYmxlOwp9CgovLyBDcmVhdGUgdGFibGUgb24gbG9hZC4gSnVzdCAyNTUgc2lnbmVkIGxvbmdzLiBOb3QgYSBwcm9ibGVtLgp2YXIgY3JjVGFibGUgPSBtYWtlVGFibGUoKTsKCgpmdW5jdGlvbiBjcmMzMihjcmMsIGJ1ZiwgbGVuLCBwb3MpIHsKICAgIHZhciB0ID0gY3JjVGFibGUsIGVuZCA9IHBvcyArIGxlbjsKCiAgICBjcmMgPSBjcmMgXiAoLTEpOwoKICAgIGZvciAodmFyIGkgPSBwb3M7IGkgPCBlbmQ7IGkrKyApIHsKICAgICAgICBjcmMgPSAoY3JjID4+PiA4KSBeIHRbKGNyYyBeIGJ1ZltpXSkgJiAweEZGXTsKICAgIH0KCiAgICByZXR1cm4gKGNyYyBeICgtMSkpOyAvLyA+Pj4gMDsKfQoKLy8gVGhhdCdzIGFsbCBmb3IgdGhlIHBha28gZnVuY3Rpb25zLgoKLyoqCiAqIENvbXB1dGUgdGhlIGNyYzMyIG9mIGEgc3RyaW5nLgogKiBUaGlzIGlzIGFsbW9zdCB0aGUgc2FtZSBhcyB0aGUgZnVuY3Rpb24gY3JjMzIsIGJ1dCBmb3Igc3RyaW5ncy4gVXNpbmcgdGhlCiAqIHNhbWUgZnVuY3Rpb24gZm9yIHRoZSB0d28gdXNlIGNhc2VzIGxlYWRzIHRvIGhvcnJpYmxlIHBlcmZvcm1hbmNlcy4KICogQHBhcmFtIHtOdW1iZXJ9IGNyYyB0aGUgc3RhcnRpbmcgdmFsdWUgb2YgdGhlIGNyYy4KICogQHBhcmFtIHtTdHJpbmd9IHN0ciB0aGUgc3RyaW5nIHRvIHVzZS4KICogQHBhcmFtIHtOdW1iZXJ9IGxlbiB0aGUgbGVuZ3RoIG9mIHRoZSBzdHJpbmcuCiAqIEBwYXJhbSB7TnVtYmVyfSBwb3MgdGhlIHN0YXJ0aW5nIHBvc2l0aW9uIGZvciB0aGUgY3JjMzIgY29tcHV0YXRpb24uCiAqIEByZXR1cm4ge051bWJlcn0gdGhlIGNvbXB1dGVkIGNyYzMyLgogKi8KZnVuY3Rpb24gY3JjMzJzdHIoY3JjLCBzdHIsIGxlbiwgcG9zKSB7CiAgICB2YXIgdCA9IGNyY1RhYmxlLCBlbmQgPSBwb3MgKyBsZW47CgogICAgY3JjID0gY3JjIF4gKC0xKTsKCiAgICBmb3IgKHZhciBpID0gcG9zOyBpIDwgZW5kOyBpKysgKSB7CiAgICAgICAgY3JjID0gKGNyYyA+Pj4gOCkgXiB0WyhjcmMgXiBzdHIuY2hhckNvZGVBdChpKSkgJiAweEZGXTsKICAgIH0KCiAgICByZXR1cm4gKGNyYyBeICgtMSkpOyAvLyA+Pj4gMDsKfQoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmMzMndyYXBwZXIoaW5wdXQsIGNyYykgewogICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gInVuZGVmaW5lZCIgfHwgIWlucHV0Lmxlbmd0aCkgewogICAgICAgIHJldHVybiAwOwogICAgfQoKICAgIHZhciBpc0FycmF5ID0gdXRpbHMuZ2V0VHlwZU9mKGlucHV0KSAhPT0gInN0cmluZyI7CgogICAgaWYoaXNBcnJheSkgewogICAgICAgIHJldHVybiBjcmMzMihjcmN8MCwgaW5wdXQsIGlucHV0Lmxlbmd0aCwgMCk7CiAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBjcmMzMnN0cihjcmN8MCwgaW5wdXQsIGlucHV0Lmxlbmd0aCwgMCk7CiAgICB9Cn07Cgp9LHsiLi91dGlscyI6MzJ9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwpleHBvcnRzLmJhc2U2NCA9IGZhbHNlOwpleHBvcnRzLmJpbmFyeSA9IGZhbHNlOwpleHBvcnRzLmRpciA9IGZhbHNlOwpleHBvcnRzLmNyZWF0ZUZvbGRlcnMgPSB0cnVlOwpleHBvcnRzLmRhdGUgPSBudWxsOwpleHBvcnRzLmNvbXByZXNzaW9uID0gbnVsbDsKZXhwb3J0cy5jb21wcmVzc2lvbk9wdGlvbnMgPSBudWxsOwpleHBvcnRzLmNvbW1lbnQgPSBudWxsOwpleHBvcnRzLnVuaXhQZXJtaXNzaW9ucyA9IG51bGw7CmV4cG9ydHMuZG9zUGVybWlzc2lvbnMgPSBudWxsOwoKfSx7fV0sNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8qIGdsb2JhbCBQcm9taXNlICovCid1c2Ugc3RyaWN0JzsKCi8vIGxvYWQgdGhlIGdsb2JhbCBvYmplY3QgZmlyc3Q6Ci8vIC0gaXQgc2hvdWxkIGJlIGJldHRlciBpbnRlZ3JhdGVkIGluIHRoZSBzeXN0ZW0gKHVuaGFuZGxlZFJlamVjdGlvbiBpbiBub2RlKQovLyAtIHRoZSBlbnZpcm9ubWVudCBtYXkgaGF2ZSBhIGN1c3RvbSBQcm9taXNlIGltcGxlbWVudGF0aW9uIChzZWUgem9uZS5qcykKdmFyIEVTNlByb21pc2UgPSBudWxsOwppZiAodHlwZW9mIFByb21pc2UgIT09ICJ1bmRlZmluZWQiKSB7CiAgICBFUzZQcm9taXNlID0gUHJvbWlzZTsKfSBlbHNlIHsKICAgIEVTNlByb21pc2UgPSByZXF1aXJlKCJsaWUiKTsKfQoKLyoqCiAqIExldCB0aGUgdXNlciB1c2UvY2hhbmdlIHNvbWUgaW1wbGVtZW50YXRpb25zLgogKi8KbW9kdWxlLmV4cG9ydHMgPSB7CiAgICBQcm9taXNlOiBFUzZQcm9taXNlCn07Cgp9LHsibGllIjozN31dLDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CnZhciBVU0VfVFlQRURBUlJBWSA9ICh0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcpICYmICh0eXBlb2YgVWludDE2QXJyYXkgIT09ICd1bmRlZmluZWQnKSAmJiAodHlwZW9mIFVpbnQzMkFycmF5ICE9PSAndW5kZWZpbmVkJyk7Cgp2YXIgcGFrbyA9IHJlcXVpcmUoInBha28iKTsKdmFyIHV0aWxzID0gcmVxdWlyZSgiLi91dGlscyIpOwp2YXIgR2VuZXJpY1dvcmtlciA9IHJlcXVpcmUoIi4vc3RyZWFtL0dlbmVyaWNXb3JrZXIiKTsKCnZhciBBUlJBWV9UWVBFID0gVVNFX1RZUEVEQVJSQVkgPyAidWludDhhcnJheSIgOiAiYXJyYXkiOwoKZXhwb3J0cy5tYWdpYyA9ICJceDA4XHgwMCI7CgovKioKICogQ3JlYXRlIGEgd29ya2VyIHRoYXQgdXNlcyBwYWtvIHRvIGluZmxhdGUvZGVmbGF0ZS4KICogQGNvbnN0cnVjdG9yCiAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb24gdGhlIG5hbWUgb2YgdGhlIHBha28gZnVuY3Rpb24gdG8gY2FsbCA6IGVpdGhlciAiRGVmbGF0ZSIgb3IgIkluZmxhdGUiLgogKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyB0aGUgb3B0aW9ucyB0byB1c2Ugd2hlbiAoZGUpY29tcHJlc3NpbmcuCiAqLwpmdW5jdGlvbiBGbGF0ZVdvcmtlcihhY3Rpb24sIG9wdGlvbnMpIHsKICAgIEdlbmVyaWNXb3JrZXIuY2FsbCh0aGlzLCAiRmxhdGVXb3JrZXIvIiArIGFjdGlvbik7CgogICAgdGhpcy5fcGFrbyA9IG51bGw7CiAgICB0aGlzLl9wYWtvQWN0aW9uID0gYWN0aW9uOwogICAgdGhpcy5fcGFrb09wdGlvbnMgPSBvcHRpb25zOwogICAgLy8gdGhlIGBtZXRhYCBvYmplY3QgZnJvbSB0aGUgbGFzdCBjaHVuayByZWNlaXZlZAogICAgLy8gdGhpcyBhbGxvdyB0aGlzIHdvcmtlciB0byBwYXNzIGFyb3VuZCBtZXRhZGF0YQogICAgdGhpcy5tZXRhID0ge307Cn0KCnV0aWxzLmluaGVyaXRzKEZsYXRlV29ya2VyLCBHZW5lcmljV29ya2VyKTsKCi8qKgogKiBAc2VlIEdlbmVyaWNXb3JrZXIucHJvY2Vzc0NodW5rCiAqLwpGbGF0ZVdvcmtlci5wcm90b3R5cGUucHJvY2Vzc0NodW5rID0gZnVuY3Rpb24gKGNodW5rKSB7CiAgICB0aGlzLm1ldGEgPSBjaHVuay5tZXRhOwogICAgaWYgKHRoaXMuX3Bha28gPT09IG51bGwpIHsKICAgICAgICB0aGlzLl9jcmVhdGVQYWtvKCk7CiAgICB9CiAgICB0aGlzLl9wYWtvLnB1c2godXRpbHMudHJhbnNmb3JtVG8oQVJSQVlfVFlQRSwgY2h1bmsuZGF0YSksIGZhbHNlKTsKfTsKCi8qKgogKiBAc2VlIEdlbmVyaWNXb3JrZXIuZmx1c2gKICovCkZsYXRlV29ya2VyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHsKICAgIEdlbmVyaWNXb3JrZXIucHJvdG90eXBlLmZsdXNoLmNhbGwodGhpcyk7CiAgICBpZiAodGhpcy5fcGFrbyA9PT0gbnVsbCkgewogICAgICAgIHRoaXMuX2NyZWF0ZVBha28oKTsKICAgIH0KICAgIHRoaXMuX3Bha28ucHVzaChbXSwgdHJ1ZSk7Cn07Ci8qKgogKiBAc2VlIEdlbmVyaWNXb3JrZXIuY2xlYW5VcAogKi8KRmxhdGVXb3JrZXIucHJvdG90eXBlLmNsZWFuVXAgPSBmdW5jdGlvbiAoKSB7CiAgICBHZW5lcmljV29ya2VyLnByb3RvdHlwZS5jbGVhblVwLmNhbGwodGhpcyk7CiAgICB0aGlzLl9wYWtvID0gbnVsbDsKfTsKCi8qKgogKiBDcmVhdGUgdGhlIF9wYWtvIG9iamVjdC4KICogVE9ETzogbGF6eS1sb2FkaW5nIHRoaXMgb2JqZWN0IGlzbid0IHRoZSBiZXN0IHNvbHV0aW9uIGJ1dCBpdCdzIHRoZQogKiBxdWlja2VzdC4gVGhlIGJlc3Qgc29sdXRpb24gaXMgdG8gbGF6eS1sb2FkIHRoZSB3b3JrZXIgbGlzdC4gU2VlIGFsc28gdGhlCiAqIGlzc3VlICM0NDYuCiAqLwpGbGF0ZVdvcmtlci5wcm90b3R5cGUuX2NyZWF0ZVBha28gPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLl9wYWtvID0gbmV3IHBha29bdGhpcy5fcGFrb0FjdGlvbl0oewogICAgICAgIHJhdzogdHJ1ZSwKICAgICAgICBsZXZlbDogdGhpcy5fcGFrb09wdGlvbnMubGV2ZWwgfHwgLTEgLy8gZGVmYXVsdCBjb21wcmVzc2lvbgogICAgfSk7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB0aGlzLl9wYWtvLm9uRGF0YSA9IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICBzZWxmLnB1c2goewogICAgICAgICAgICBkYXRhIDogZGF0YSwKICAgICAgICAgICAgbWV0YSA6IHNlbGYubWV0YQogICAgICAgIH0pOwogICAgfTsKfTsKCmV4cG9ydHMuY29tcHJlc3NXb3JrZXIgPSBmdW5jdGlvbiAoY29tcHJlc3Npb25PcHRpb25zKSB7CiAgICByZXR1cm4gbmV3IEZsYXRlV29ya2VyKCJEZWZsYXRlIiwgY29tcHJlc3Npb25PcHRpb25zKTsKfTsKZXhwb3J0cy51bmNvbXByZXNzV29ya2VyID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIG5ldyBGbGF0ZVdvcmtlcigiSW5mbGF0ZSIsIHt9KTsKfTsKCn0seyIuL3N0cmVhbS9HZW5lcmljV29ya2VyIjoyOCwiLi91dGlscyI6MzIsInBha28iOjM4fV0sODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7CnZhciBHZW5lcmljV29ya2VyID0gcmVxdWlyZSgnLi4vc3RyZWFtL0dlbmVyaWNXb3JrZXInKTsKdmFyIHV0ZjggPSByZXF1aXJlKCcuLi91dGY4Jyk7CnZhciBjcmMzMiA9IHJlcXVpcmUoJy4uL2NyYzMyJyk7CnZhciBzaWduYXR1cmUgPSByZXF1aXJlKCcuLi9zaWduYXR1cmUnKTsKCi8qKgogKiBUcmFuc2Zvcm0gYW4gaW50ZWdlciBpbnRvIGEgc3RyaW5nIGluIGhleGFkZWNpbWFsLgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge251bWJlcn0gZGVjIHRoZSBudW1iZXIgdG8gY29udmVydC4KICogQHBhcmFtIHtudW1iZXJ9IGJ5dGVzIHRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gZ2VuZXJhdGUuCiAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSByZXN1bHQuCiAqLwp2YXIgZGVjVG9IZXggPSBmdW5jdGlvbihkZWMsIGJ5dGVzKSB7CiAgICB2YXIgaGV4ID0gIiIsIGk7CiAgICBmb3IgKGkgPSAwOyBpIDwgYnl0ZXM7IGkrKykgewogICAgICAgIGhleCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGRlYyAmIDB4ZmYpOwogICAgICAgIGRlYyA9IGRlYyA+Pj4gODsKICAgIH0KICAgIHJldHVybiBoZXg7Cn07CgovKioKICogR2VuZXJhdGUgdGhlIFVOSVggcGFydCBvZiB0aGUgZXh0ZXJuYWwgZmlsZSBhdHRyaWJ1dGVzLgogKiBAcGFyYW0ge09iamVjdH0gdW5peFBlcm1pc3Npb25zIHRoZSB1bml4IHBlcm1pc3Npb25zIG9yIG51bGwuCiAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNEaXIgdHJ1ZSBpZiB0aGUgZW50cnkgaXMgYSBkaXJlY3RvcnksIGZhbHNlIG90aGVyd2lzZS4KICogQHJldHVybiB7TnVtYmVyfSBhIDMyIGJpdCBpbnRlZ2VyLgogKgogKiBhZGFwdGVkIGZyb20gaHR0cDovL3VuaXguc3RhY2tleGNoYW5nZS5jb20vcXVlc3Rpb25zLzE0NzA1L3RoZS16aXAtZm9ybWF0cy1leHRlcm5hbC1maWxlLWF0dHJpYnV0ZSA6CiAqCiAqIFRUVFRzc3Ryd3hyd3hyd3gwMDAwMDAwMDAwQURWU0hSCiAqIF5eXl5fX19fX19fX19fX19fX19fX19fX19fX19fX19fIGZpbGUgdHlwZSwgc2VlIHppcGluZm8uYyAoVU5YXyopCiAqICAgICBeXl5fX19fX19fX19fX19fX19fX19fX19fX19fIHNldHVpZCwgc2V0Z2lkLCBzdGlja3kKICogICAgICAgIF5eXl5eXl5eXl9fX19fX19fX19fX19fX18gcGVybWlzc2lvbnMKICogICAgICAgICAgICAgICAgIF5eXl5eXl5eXl5fX19fX18gbm90IHVzZWQgPwogKiAgICAgICAgICAgICAgICAgICAgICAgICAgIF5eXl5eXiBET1MgYXR0cmlidXRlIGJpdHMgOiBBcmNoaXZlLCBEaXJlY3RvcnksIFZvbHVtZSBsYWJlbCwgU3lzdGVtIGZpbGUsIEhpZGRlbiwgUmVhZCBvbmx5CiAqLwp2YXIgZ2VuZXJhdGVVbml4RXh0ZXJuYWxGaWxlQXR0ciA9IGZ1bmN0aW9uICh1bml4UGVybWlzc2lvbnMsIGlzRGlyKSB7CgogICAgdmFyIHJlc3VsdCA9IHVuaXhQZXJtaXNzaW9uczsKICAgIGlmICghdW5peFBlcm1pc3Npb25zKSB7CiAgICAgICAgLy8gSSBjYW4ndCB1c2Ugb2N0YWwgdmFsdWVzIGluIHN0cmljdCBtb2RlLCBoZW5jZSB0aGUgaGV4YS4KICAgICAgICAvLyAgMDQwNzc1ID0+IDB4NDFmZAogICAgICAgIC8vIDAxMDA2NjQgPT4gMHg4MWI0CiAgICAgICAgcmVzdWx0ID0gaXNEaXIgPyAweDQxZmQgOiAweDgxYjQ7CiAgICB9CiAgICByZXR1cm4gKHJlc3VsdCAmIDB4RkZGRikgPDwgMTY7Cn07CgovKioKICogR2VuZXJhdGUgdGhlIERPUyBwYXJ0IG9mIHRoZSBleHRlcm5hbCBmaWxlIGF0dHJpYnV0ZXMuCiAqIEBwYXJhbSB7T2JqZWN0fSBkb3NQZXJtaXNzaW9ucyB0aGUgZG9zIHBlcm1pc3Npb25zIG9yIG51bGwuCiAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNEaXIgdHJ1ZSBpZiB0aGUgZW50cnkgaXMgYSBkaXJlY3RvcnksIGZhbHNlIG90aGVyd2lzZS4KICogQHJldHVybiB7TnVtYmVyfSBhIDMyIGJpdCBpbnRlZ2VyLgogKgogKiBCaXQgMCAgICAgUmVhZC1Pbmx5CiAqIEJpdCAxICAgICBIaWRkZW4KICogQml0IDIgICAgIFN5c3RlbQogKiBCaXQgMyAgICAgVm9sdW1lIExhYmVsCiAqIEJpdCA0ICAgICBEaXJlY3RvcnkKICogQml0IDUgICAgIEFyY2hpdmUKICovCnZhciBnZW5lcmF0ZURvc0V4dGVybmFsRmlsZUF0dHIgPSBmdW5jdGlvbiAoZG9zUGVybWlzc2lvbnMsIGlzRGlyKSB7CgogICAgLy8gdGhlIGRpciBmbGFnIGlzIGFscmVhZHkgc2V0IGZvciBjb21wYXRpYmlsaXR5CiAgICByZXR1cm4gKGRvc1Blcm1pc3Npb25zIHx8IDApICAmIDB4M0Y7Cn07CgovKioKICogR2VuZXJhdGUgdGhlIHZhcmlvdXMgcGFydHMgdXNlZCBpbiB0aGUgY29uc3RydWN0aW9uIG9mIHRoZSBmaW5hbCB6aXAgZmlsZS4KICogQHBhcmFtIHtPYmplY3R9IHN0cmVhbUluZm8gdGhlIGhhc2ggd2l0aCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY29tcHJlc3NlZCBmaWxlLgogKiBAcGFyYW0ge0Jvb2xlYW59IHN0cmVhbWVkQ29udGVudCBpcyB0aGUgY29udGVudCBzdHJlYW1lZCA/CiAqIEBwYXJhbSB7Qm9vbGVhbn0gc3RyZWFtaW5nRW5kZWQgaXMgdGhlIHN0cmVhbSBmaW5pc2hlZCA/CiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgdGhlIGN1cnJlbnQgb2Zmc2V0IGZyb20gdGhlIHN0YXJ0IG9mIHRoZSB6aXAgZmlsZS4KICogQHBhcmFtIHtTdHJpbmd9IHBsYXRmb3JtIGxldCdzIHByZXRlbmQgd2UgYXJlIHRoaXMgcGxhdGZvcm0gKGNoYW5nZSBwbGF0Zm9ybSBkZXBlbmRlbnRzIGZpZWxkcykKICogQHBhcmFtIHtGdW5jdGlvbn0gZW5jb2RlRmlsZU5hbWUgdGhlIGZ1bmN0aW9uIHRvIGVuY29kZSB0aGUgZmlsZSBuYW1lIC8gY29tbWVudC4KICogQHJldHVybiB7T2JqZWN0fSB0aGUgemlwIHBhcnRzLgogKi8KdmFyIGdlbmVyYXRlWmlwUGFydHMgPSBmdW5jdGlvbihzdHJlYW1JbmZvLCBzdHJlYW1lZENvbnRlbnQsIHN0cmVhbWluZ0VuZGVkLCBvZmZzZXQsIHBsYXRmb3JtLCBlbmNvZGVGaWxlTmFtZSkgewogICAgdmFyIGZpbGUgPSBzdHJlYW1JbmZvWydmaWxlJ10sCiAgICBjb21wcmVzc2lvbiA9IHN0cmVhbUluZm9bJ2NvbXByZXNzaW9uJ10sCiAgICB1c2VDdXN0b21FbmNvZGluZyA9IGVuY29kZUZpbGVOYW1lICE9PSB1dGY4LnV0ZjhlbmNvZGUsCiAgICBlbmNvZGVkRmlsZU5hbWUgPSB1dGlscy50cmFuc2Zvcm1Ubygic3RyaW5nIiwgZW5jb2RlRmlsZU5hbWUoZmlsZS5uYW1lKSksCiAgICB1dGZFbmNvZGVkRmlsZU5hbWUgPSB1dGlscy50cmFuc2Zvcm1Ubygic3RyaW5nIiwgdXRmOC51dGY4ZW5jb2RlKGZpbGUubmFtZSkpLAogICAgY29tbWVudCA9IGZpbGUuY29tbWVudCwKICAgIGVuY29kZWRDb21tZW50ID0gdXRpbHMudHJhbnNmb3JtVG8oInN0cmluZyIsIGVuY29kZUZpbGVOYW1lKGNvbW1lbnQpKSwKICAgIHV0ZkVuY29kZWRDb21tZW50ID0gdXRpbHMudHJhbnNmb3JtVG8oInN0cmluZyIsIHV0ZjgudXRmOGVuY29kZShjb21tZW50KSksCiAgICB1c2VVVEY4Rm9yRmlsZU5hbWUgPSB1dGZFbmNvZGVkRmlsZU5hbWUubGVuZ3RoICE9PSBmaWxlLm5hbWUubGVuZ3RoLAogICAgdXNlVVRGOEZvckNvbW1lbnQgPSB1dGZFbmNvZGVkQ29tbWVudC5sZW5ndGggIT09IGNvbW1lbnQubGVuZ3RoLAogICAgZG9zVGltZSwKICAgIGRvc0RhdGUsCiAgICBleHRyYUZpZWxkcyA9ICIiLAogICAgdW5pY29kZVBhdGhFeHRyYUZpZWxkID0gIiIsCiAgICB1bmljb2RlQ29tbWVudEV4dHJhRmllbGQgPSAiIiwKICAgIGRpciA9IGZpbGUuZGlyLAogICAgZGF0ZSA9IGZpbGUuZGF0ZTsKCgogICAgdmFyIGRhdGFJbmZvID0gewogICAgICAgIGNyYzMyIDogMCwKICAgICAgICBjb21wcmVzc2VkU2l6ZSA6IDAsCiAgICAgICAgdW5jb21wcmVzc2VkU2l6ZSA6IDAKICAgIH07CgogICAgLy8gaWYgdGhlIGNvbnRlbnQgaXMgc3RyZWFtZWQsIHRoZSBzaXplcy9jcmMzMiBhcmUgb25seSBhdmFpbGFibGUgQUZURVIKICAgIC8vIHRoZSBlbmQgb2YgdGhlIHN0cmVhbS4KICAgIGlmICghc3RyZWFtZWRDb250ZW50IHx8IHN0cmVhbWluZ0VuZGVkKSB7CiAgICAgICAgZGF0YUluZm8uY3JjMzIgPSBzdHJlYW1JbmZvWydjcmMzMiddOwogICAgICAgIGRhdGFJbmZvLmNvbXByZXNzZWRTaXplID0gc3RyZWFtSW5mb1snY29tcHJlc3NlZFNpemUnXTsKICAgICAgICBkYXRhSW5mby51bmNvbXByZXNzZWRTaXplID0gc3RyZWFtSW5mb1sndW5jb21wcmVzc2VkU2l6ZSddOwogICAgfQoKICAgIHZhciBiaXRmbGFnID0gMDsKICAgIGlmIChzdHJlYW1lZENvbnRlbnQpIHsKICAgICAgICAvLyBCaXQgMzogdGhlIHNpemVzL2NyYzMyIGFyZSBzZXQgdG8gemVybyBpbiB0aGUgbG9jYWwgaGVhZGVyLgogICAgICAgIC8vIFRoZSBjb3JyZWN0IHZhbHVlcyBhcmUgcHV0IGluIHRoZSBkYXRhIGRlc2NyaXB0b3IgaW1tZWRpYXRlbHkKICAgICAgICAvLyBmb2xsb3dpbmcgdGhlIGNvbXByZXNzZWQgZGF0YS4KICAgICAgICBiaXRmbGFnIHw9IDB4MDAwODsKICAgIH0KICAgIGlmICghdXNlQ3VzdG9tRW5jb2RpbmcgJiYgKHVzZVVURjhGb3JGaWxlTmFtZSB8fCB1c2VVVEY4Rm9yQ29tbWVudCkpIHsKICAgICAgICAvLyBCaXQgMTE6IExhbmd1YWdlIGVuY29kaW5nIGZsYWcgKEVGUykuCiAgICAgICAgYml0ZmxhZyB8PSAweDA4MDA7CiAgICB9CgoKICAgIHZhciBleHRGaWxlQXR0ciA9IDA7CiAgICB2YXIgdmVyc2lvbk1hZGVCeSA9IDA7CiAgICBpZiAoZGlyKSB7CiAgICAgICAgLy8gZG9zIG9yIHVuaXgsIHdlIHNldCB0aGUgZG9zIGRpciBmbGFnCiAgICAgICAgZXh0RmlsZUF0dHIgfD0gMHgwMDAxMDsKICAgIH0KICAgIGlmKHBsYXRmb3JtID09PSAiVU5JWCIpIHsKICAgICAgICB2ZXJzaW9uTWFkZUJ5ID0gMHgwMzFFOyAvLyBVTklYLCB2ZXJzaW9uIDMuMAogICAgICAgIGV4dEZpbGVBdHRyIHw9IGdlbmVyYXRlVW5peEV4dGVybmFsRmlsZUF0dHIoZmlsZS51bml4UGVybWlzc2lvbnMsIGRpcik7CiAgICB9IGVsc2UgeyAvLyBET1Mgb3Igb3RoZXIsIGZhbGxiYWNrIHRvIERPUwogICAgICAgIHZlcnNpb25NYWRlQnkgPSAweDAwMTQ7IC8vIERPUywgdmVyc2lvbiAyLjAKICAgICAgICBleHRGaWxlQXR0ciB8PSBnZW5lcmF0ZURvc0V4dGVybmFsRmlsZUF0dHIoZmlsZS5kb3NQZXJtaXNzaW9ucywgZGlyKTsKICAgIH0KCiAgICAvLyBkYXRlCiAgICAvLyBAc2VlIGh0dHA6Ly93d3cuZGVsb3JpZS5jb20vZGpncHAvZG9jL3JiaW50ZXIvaXQvNTIvMTMuaHRtbAogICAgLy8gQHNlZSBodHRwOi8vd3d3LmRlbG9yaWUuY29tL2RqZ3BwL2RvYy9yYmludGVyL2l0LzY1LzE2Lmh0bWwKICAgIC8vIEBzZWUgaHR0cDovL3d3dy5kZWxvcmllLmNvbS9kamdwcC9kb2MvcmJpbnRlci9pdC82Ni8xNi5odG1sCgogICAgZG9zVGltZSA9IGRhdGUuZ2V0VVRDSG91cnMoKTsKICAgIGRvc1RpbWUgPSBkb3NUaW1lIDw8IDY7CiAgICBkb3NUaW1lID0gZG9zVGltZSB8IGRhdGUuZ2V0VVRDTWludXRlcygpOwogICAgZG9zVGltZSA9IGRvc1RpbWUgPDwgNTsKICAgIGRvc1RpbWUgPSBkb3NUaW1lIHwgZGF0ZS5nZXRVVENTZWNvbmRzKCkgLyAyOwoKICAgIGRvc0RhdGUgPSBkYXRlLmdldFVUQ0Z1bGxZZWFyKCkgLSAxOTgwOwogICAgZG9zRGF0ZSA9IGRvc0RhdGUgPDwgNDsKICAgIGRvc0RhdGUgPSBkb3NEYXRlIHwgKGRhdGUuZ2V0VVRDTW9udGgoKSArIDEpOwogICAgZG9zRGF0ZSA9IGRvc0RhdGUgPDwgNTsKICAgIGRvc0RhdGUgPSBkb3NEYXRlIHwgZGF0ZS5nZXRVVENEYXRlKCk7CgogICAgaWYgKHVzZVVURjhGb3JGaWxlTmFtZSkgewogICAgICAgIC8vIHNldCB0aGUgdW5pY29kZSBwYXRoIGV4dHJhIGZpZWxkLiB1bnppcCBuZWVkcyBhdCBsZWFzdCBvbmUgZXh0cmEKICAgICAgICAvLyBmaWVsZCB0byBjb3JyZWN0bHkgaGFuZGxlIHVuaWNvZGUgcGF0aCwgc28gdXNpbmcgdGhlIHBhdGggaXMgYXMgZ29vZAogICAgICAgIC8vIGFzIGFueSBvdGhlciBpbmZvcm1hdGlvbi4gVGhpcyBjb3VsZCBpbXByb3ZlIHRoZSBzaXR1YXRpb24gd2l0aAogICAgICAgIC8vIG90aGVyIGFyY2hpdmUgbWFuYWdlcnMgdG9vLgogICAgICAgIC8vIFRoaXMgZmllbGQgaXMgdXN1YWxseSB1c2VkIHdpdGhvdXQgdGhlIHV0ZjggZmxhZywgd2l0aCBhIG5vbgogICAgICAgIC8vIHVuaWNvZGUgcGF0aCBpbiB0aGUgaGVhZGVyICh3aW5yYXIsIHdpbnppcCkuIFRoaXMgaGVscHMgKGEgYml0KQogICAgICAgIC8vIHdpdGggdGhlIG1lc3N5IFdpbmRvd3MnIGRlZmF1bHQgY29tcHJlc3NlZCBmb2xkZXJzIGZlYXR1cmUgYnV0CiAgICAgICAgLy8gYnJlYWtzIG9uIHA3emlwIHdoaWNoIGRvZXNuJ3Qgc2VlayB0aGUgdW5pY29kZSBwYXRoIGV4dHJhIGZpZWxkLgogICAgICAgIC8vIFNvIGZvciBub3csIFVURi04IGV2ZXJ5d2hlcmUgIQogICAgICAgIHVuaWNvZGVQYXRoRXh0cmFGaWVsZCA9CiAgICAgICAgICAgIC8vIFZlcnNpb24KICAgICAgICAgICAgZGVjVG9IZXgoMSwgMSkgKwogICAgICAgICAgICAvLyBOYW1lQ1JDMzIKICAgICAgICAgICAgZGVjVG9IZXgoY3JjMzIoZW5jb2RlZEZpbGVOYW1lKSwgNCkgKwogICAgICAgICAgICAvLyBVbmljb2RlTmFtZQogICAgICAgICAgICB1dGZFbmNvZGVkRmlsZU5hbWU7CgogICAgICAgIGV4dHJhRmllbGRzICs9CiAgICAgICAgICAgIC8vIEluZm8tWklQIFVuaWNvZGUgUGF0aCBFeHRyYSBGaWVsZAogICAgICAgICAgICAiXHg3NVx4NzAiICsKICAgICAgICAgICAgLy8gc2l6ZQogICAgICAgICAgICBkZWNUb0hleCh1bmljb2RlUGF0aEV4dHJhRmllbGQubGVuZ3RoLCAyKSArCiAgICAgICAgICAgIC8vIGNvbnRlbnQKICAgICAgICAgICAgdW5pY29kZVBhdGhFeHRyYUZpZWxkOwogICAgfQoKICAgIGlmKHVzZVVURjhGb3JDb21tZW50KSB7CgogICAgICAgIHVuaWNvZGVDb21tZW50RXh0cmFGaWVsZCA9CiAgICAgICAgICAgIC8vIFZlcnNpb24KICAgICAgICAgICAgZGVjVG9IZXgoMSwgMSkgKwogICAgICAgICAgICAvLyBDb21tZW50Q1JDMzIKICAgICAgICAgICAgZGVjVG9IZXgoY3JjMzIoZW5jb2RlZENvbW1lbnQpLCA0KSArCiAgICAgICAgICAgIC8vIFVuaWNvZGVOYW1lCiAgICAgICAgICAgIHV0ZkVuY29kZWRDb21tZW50OwoKICAgICAgICBleHRyYUZpZWxkcyArPQogICAgICAgICAgICAvLyBJbmZvLVpJUCBVbmljb2RlIFBhdGggRXh0cmEgRmllbGQKICAgICAgICAgICAgIlx4NzVceDYzIiArCiAgICAgICAgICAgIC8vIHNpemUKICAgICAgICAgICAgZGVjVG9IZXgodW5pY29kZUNvbW1lbnRFeHRyYUZpZWxkLmxlbmd0aCwgMikgKwogICAgICAgICAgICAvLyBjb250ZW50CiAgICAgICAgICAgIHVuaWNvZGVDb21tZW50RXh0cmFGaWVsZDsKICAgIH0KCiAgICB2YXIgaGVhZGVyID0gIiI7CgogICAgLy8gdmVyc2lvbiBuZWVkZWQgdG8gZXh0cmFjdAogICAgaGVhZGVyICs9ICJceDBBXHgwMCI7CiAgICAvLyBnZW5lcmFsIHB1cnBvc2UgYml0IGZsYWcKICAgIGhlYWRlciArPSBkZWNUb0hleChiaXRmbGFnLCAyKTsKICAgIC8vIGNvbXByZXNzaW9uIG1ldGhvZAogICAgaGVhZGVyICs9IGNvbXByZXNzaW9uLm1hZ2ljOwogICAgLy8gbGFzdCBtb2QgZmlsZSB0aW1lCiAgICBoZWFkZXIgKz0gZGVjVG9IZXgoZG9zVGltZSwgMik7CiAgICAvLyBsYXN0IG1vZCBmaWxlIGRhdGUKICAgIGhlYWRlciArPSBkZWNUb0hleChkb3NEYXRlLCAyKTsKICAgIC8vIGNyYy0zMgogICAgaGVhZGVyICs9IGRlY1RvSGV4KGRhdGFJbmZvLmNyYzMyLCA0KTsKICAgIC8vIGNvbXByZXNzZWQgc2l6ZQogICAgaGVhZGVyICs9IGRlY1RvSGV4KGRhdGFJbmZvLmNvbXByZXNzZWRTaXplLCA0KTsKICAgIC8vIHVuY29tcHJlc3NlZCBzaXplCiAgICBoZWFkZXIgKz0gZGVjVG9IZXgoZGF0YUluZm8udW5jb21wcmVzc2VkU2l6ZSwgNCk7CiAgICAvLyBmaWxlIG5hbWUgbGVuZ3RoCiAgICBoZWFkZXIgKz0gZGVjVG9IZXgoZW5jb2RlZEZpbGVOYW1lLmxlbmd0aCwgMik7CiAgICAvLyBleHRyYSBmaWVsZCBsZW5ndGgKICAgIGhlYWRlciArPSBkZWNUb0hleChleHRyYUZpZWxkcy5sZW5ndGgsIDIpOwoKCiAgICB2YXIgZmlsZVJlY29yZCA9IHNpZ25hdHVyZS5MT0NBTF9GSUxFX0hFQURFUiArIGhlYWRlciArIGVuY29kZWRGaWxlTmFtZSArIGV4dHJhRmllbGRzOwoKICAgIHZhciBkaXJSZWNvcmQgPSBzaWduYXR1cmUuQ0VOVFJBTF9GSUxFX0hFQURFUiArCiAgICAgICAgLy8gdmVyc2lvbiBtYWRlIGJ5ICgwMDogRE9TKQogICAgICAgIGRlY1RvSGV4KHZlcnNpb25NYWRlQnksIDIpICsKICAgICAgICAvLyBmaWxlIGhlYWRlciAoY29tbW9uIHRvIGZpbGUgYW5kIGNlbnRyYWwgZGlyZWN0b3J5KQogICAgICAgIGhlYWRlciArCiAgICAgICAgLy8gZmlsZSBjb21tZW50IGxlbmd0aAogICAgICAgIGRlY1RvSGV4KGVuY29kZWRDb21tZW50Lmxlbmd0aCwgMikgKwogICAgICAgIC8vIGRpc2sgbnVtYmVyIHN0YXJ0CiAgICAgICAgIlx4MDBceDAwIiArCiAgICAgICAgLy8gaW50ZXJuYWwgZmlsZSBhdHRyaWJ1dGVzIFRPRE8KICAgICAgICAiXHgwMFx4MDAiICsKICAgICAgICAvLyBleHRlcm5hbCBmaWxlIGF0dHJpYnV0ZXMKICAgICAgICBkZWNUb0hleChleHRGaWxlQXR0ciwgNCkgKwogICAgICAgIC8vIHJlbGF0aXZlIG9mZnNldCBvZiBsb2NhbCBoZWFkZXIKICAgICAgICBkZWNUb0hleChvZmZzZXQsIDQpICsKICAgICAgICAvLyBmaWxlIG5hbWUKICAgICAgICBlbmNvZGVkRmlsZU5hbWUgKwogICAgICAgIC8vIGV4dHJhIGZpZWxkCiAgICAgICAgZXh0cmFGaWVsZHMgKwogICAgICAgIC8vIGZpbGUgY29tbWVudAogICAgICAgIGVuY29kZWRDb21tZW50OwoKICAgIHJldHVybiB7CiAgICAgICAgZmlsZVJlY29yZDogZmlsZVJlY29yZCwKICAgICAgICBkaXJSZWNvcmQ6IGRpclJlY29yZAogICAgfTsKfTsKCi8qKgogKiBHZW5lcmF0ZSB0aGUgRU9DRCByZWNvcmQuCiAqIEBwYXJhbSB7TnVtYmVyfSBlbnRyaWVzQ291bnQgdGhlIG51bWJlciBvZiBlbnRyaWVzIGluIHRoZSB6aXAgZmlsZS4KICogQHBhcmFtIHtOdW1iZXJ9IGNlbnRyYWxEaXJMZW5ndGggdGhlIGxlbmd0aCAoaW4gYnl0ZXMpIG9mIHRoZSBjZW50cmFsIGRpci4KICogQHBhcmFtIHtOdW1iZXJ9IGxvY2FsRGlyTGVuZ3RoIHRoZSBsZW5ndGggKGluIGJ5dGVzKSBvZiB0aGUgbG9jYWwgZGlyLgogKiBAcGFyYW0ge1N0cmluZ30gY29tbWVudCB0aGUgemlwIGZpbGUgY29tbWVudCBhcyBhIGJpbmFyeSBzdHJpbmcuCiAqIEBwYXJhbSB7RnVuY3Rpb259IGVuY29kZUZpbGVOYW1lIHRoZSBmdW5jdGlvbiB0byBlbmNvZGUgdGhlIGNvbW1lbnQuCiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIEVPQ0QgcmVjb3JkLgogKi8KdmFyIGdlbmVyYXRlQ2VudHJhbERpcmVjdG9yeUVuZCA9IGZ1bmN0aW9uIChlbnRyaWVzQ291bnQsIGNlbnRyYWxEaXJMZW5ndGgsIGxvY2FsRGlyTGVuZ3RoLCBjb21tZW50LCBlbmNvZGVGaWxlTmFtZSkgewogICAgdmFyIGRpckVuZCA9ICIiOwogICAgdmFyIGVuY29kZWRDb21tZW50ID0gdXRpbHMudHJhbnNmb3JtVG8oInN0cmluZyIsIGVuY29kZUZpbGVOYW1lKGNvbW1lbnQpKTsKCiAgICAvLyBlbmQgb2YgY2VudHJhbCBkaXIgc2lnbmF0dXJlCiAgICBkaXJFbmQgPSBzaWduYXR1cmUuQ0VOVFJBTF9ESVJFQ1RPUllfRU5EICsKICAgICAgICAvLyBudW1iZXIgb2YgdGhpcyBkaXNrCiAgICAgICAgIlx4MDBceDAwIiArCiAgICAgICAgLy8gbnVtYmVyIG9mIHRoZSBkaXNrIHdpdGggdGhlIHN0YXJ0IG9mIHRoZSBjZW50cmFsIGRpcmVjdG9yeQogICAgICAgICJceDAwXHgwMCIgKwogICAgICAgIC8vIHRvdGFsIG51bWJlciBvZiBlbnRyaWVzIGluIHRoZSBjZW50cmFsIGRpcmVjdG9yeSBvbiB0aGlzIGRpc2sKICAgICAgICBkZWNUb0hleChlbnRyaWVzQ291bnQsIDIpICsKICAgICAgICAvLyB0b3RhbCBudW1iZXIgb2YgZW50cmllcyBpbiB0aGUgY2VudHJhbCBkaXJlY3RvcnkKICAgICAgICBkZWNUb0hleChlbnRyaWVzQ291bnQsIDIpICsKICAgICAgICAvLyBzaXplIG9mIHRoZSBjZW50cmFsIGRpcmVjdG9yeSAgIDQgYnl0ZXMKICAgICAgICBkZWNUb0hleChjZW50cmFsRGlyTGVuZ3RoLCA0KSArCiAgICAgICAgLy8gb2Zmc2V0IG9mIHN0YXJ0IG9mIGNlbnRyYWwgZGlyZWN0b3J5IHdpdGggcmVzcGVjdCB0byB0aGUgc3RhcnRpbmcgZGlzayBudW1iZXIKICAgICAgICBkZWNUb0hleChsb2NhbERpckxlbmd0aCwgNCkgKwogICAgICAgIC8vIC5aSVAgZmlsZSBjb21tZW50IGxlbmd0aAogICAgICAgIGRlY1RvSGV4KGVuY29kZWRDb21tZW50Lmxlbmd0aCwgMikgKwogICAgICAgIC8vIC5aSVAgZmlsZSBjb21tZW50CiAgICAgICAgZW5jb2RlZENvbW1lbnQ7CgogICAgcmV0dXJuIGRpckVuZDsKfTsKCi8qKgogKiBHZW5lcmF0ZSBkYXRhIGRlc2NyaXB0b3JzIGZvciBhIGZpbGUgZW50cnkuCiAqIEBwYXJhbSB7T2JqZWN0fSBzdHJlYW1JbmZvIHRoZSBoYXNoIGdlbmVyYXRlZCBieSBhIHdvcmtlciwgY29udGFpbmluZyBpbmZvcm1hdGlvbgogKiBvbiB0aGUgZmlsZSBlbnRyeS4KICogQHJldHVybiB7U3RyaW5nfSB0aGUgZGF0YSBkZXNjcmlwdG9ycy4KICovCnZhciBnZW5lcmF0ZURhdGFEZXNjcmlwdG9ycyA9IGZ1bmN0aW9uIChzdHJlYW1JbmZvKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9ICIiOwogICAgZGVzY3JpcHRvciA9IHNpZ25hdHVyZS5EQVRBX0RFU0NSSVBUT1IgKwogICAgICAgIC8vIGNyYy0zMiAgICAgICAgICAgICAgICAgICAgICAgICAgNCBieXRlcwogICAgICAgIGRlY1RvSGV4KHN0cmVhbUluZm9bJ2NyYzMyJ10sIDQpICsKICAgICAgICAvLyBjb21wcmVzc2VkIHNpemUgICAgICAgICAgICAgICAgIDQgYnl0ZXMKICAgICAgICBkZWNUb0hleChzdHJlYW1JbmZvWydjb21wcmVzc2VkU2l6ZSddLCA0KSArCiAgICAgICAgLy8gdW5jb21wcmVzc2VkIHNpemUgICAgICAgICAgICAgICA0IGJ5dGVzCiAgICAgICAgZGVjVG9IZXgoc3RyZWFtSW5mb1sndW5jb21wcmVzc2VkU2l6ZSddLCA0KTsKCiAgICByZXR1cm4gZGVzY3JpcHRvcjsKfTsKCgovKioKICogQSB3b3JrZXIgdG8gY29uY2F0ZW5hdGUgb3RoZXIgd29ya2VycyB0byBjcmVhdGUgYSB6aXAgZmlsZS4KICogQHBhcmFtIHtCb29sZWFufSBzdHJlYW1GaWxlcyBgdHJ1ZWAgdG8gc3RyZWFtIHRoZSBjb250ZW50IG9mIHRoZSBmaWxlcywKICogYGZhbHNlYCB0byBhY2N1bXVsYXRlIGl0LgogKiBAcGFyYW0ge1N0cmluZ30gY29tbWVudCB0aGUgY29tbWVudCB0byB1c2UuCiAqIEBwYXJhbSB7U3RyaW5nfSBwbGF0Zm9ybSB0aGUgcGxhdGZvcm0gdG8gdXNlLCAiVU5JWCIgb3IgIkRPUyIuCiAqIEBwYXJhbSB7RnVuY3Rpb259IGVuY29kZUZpbGVOYW1lIHRoZSBmdW5jdGlvbiB0byBlbmNvZGUgZmlsZSBuYW1lcyBhbmQgY29tbWVudHMuCiAqLwpmdW5jdGlvbiBaaXBGaWxlV29ya2VyKHN0cmVhbUZpbGVzLCBjb21tZW50LCBwbGF0Zm9ybSwgZW5jb2RlRmlsZU5hbWUpIHsKICAgIEdlbmVyaWNXb3JrZXIuY2FsbCh0aGlzLCAiWmlwRmlsZVdvcmtlciIpOwogICAgLy8gVGhlIG51bWJlciBvZiBieXRlcyB3cml0dGVuIHNvIGZhci4gVGhpcyBkb2Vzbid0IGNvdW50IGFjY3VtdWxhdGVkIGNodW5rcy4KICAgIHRoaXMuYnl0ZXNXcml0dGVuID0gMDsKICAgIC8vIFRoZSBjb21tZW50IG9mIHRoZSB6aXAgZmlsZQogICAgdGhpcy56aXBDb21tZW50ID0gY29tbWVudDsKICAgIC8vIFRoZSBwbGF0Zm9ybSAiZ2VuZXJhdGluZyIgdGhlIHppcCBmaWxlLgogICAgdGhpcy56aXBQbGF0Zm9ybSA9IHBsYXRmb3JtOwogICAgLy8gdGhlIGZ1bmN0aW9uIHRvIGVuY29kZSBmaWxlIG5hbWVzIGFuZCBjb21tZW50cy4KICAgIHRoaXMuZW5jb2RlRmlsZU5hbWUgPSBlbmNvZGVGaWxlTmFtZTsKICAgIC8vIFNob3VsZCB3ZSBzdHJlYW0gdGhlIGNvbnRlbnQgb2YgdGhlIGZpbGVzID8KICAgIHRoaXMuc3RyZWFtRmlsZXMgPSBzdHJlYW1GaWxlczsKICAgIC8vIElmIGBzdHJlYW1GaWxlc2AgaXMgZmFsc2UsIHdlIHdpbGwgbmVlZCB0byBhY2N1bXVsYXRlIHRoZSBjb250ZW50IG9mIHRoZQogICAgLy8gZmlsZXMgdG8gY2FsY3VsYXRlIHNpemVzIC8gY3JjMzIgKGFuZCB3cml0ZSB0aGVtICpiZWZvcmUqIHRoZSBjb250ZW50KS4KICAgIC8vIFRoaXMgYm9vbGVhbiBpbmRpY2F0ZXMgaWYgd2UgYXJlIGFjY3VtdWxhdGluZyBjaHVua3MgKGl0IHdpbGwgY2hhbmdlIGEgbG90CiAgICAvLyBkdXJpbmcgdGhlIGxpZmV0aW1lIG9mIHRoaXMgd29ya2VyKS4KICAgIHRoaXMuYWNjdW11bGF0ZSA9IGZhbHNlOwogICAgLy8gVGhlIGJ1ZmZlciByZWNlaXZpbmcgY2h1bmtzIHdoZW4gYWNjdW11bGF0aW5nIGNvbnRlbnQuCiAgICB0aGlzLmNvbnRlbnRCdWZmZXIgPSBbXTsKICAgIC8vIFRoZSBsaXN0IG9mIGdlbmVyYXRlZCBkaXJlY3RvcnkgcmVjb3Jkcy4KICAgIHRoaXMuZGlyUmVjb3JkcyA9IFtdOwogICAgLy8gVGhlIG9mZnNldCAoaW4gYnl0ZXMpIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgemlwIGZpbGUgZm9yIHRoZSBjdXJyZW50IHNvdXJjZS4KICAgIHRoaXMuY3VycmVudFNvdXJjZU9mZnNldCA9IDA7CiAgICAvLyBUaGUgdG90YWwgbnVtYmVyIG9mIGVudHJpZXMgaW4gdGhpcyB6aXAgZmlsZS4KICAgIHRoaXMuZW50cmllc0NvdW50ID0gMDsKICAgIC8vIHRoZSBuYW1lIG9mIHRoZSBmaWxlIGN1cnJlbnRseSBiZWluZyBhZGRlZCwgbnVsbCB3aGVuIGhhbmRsaW5nIHRoZSBlbmQgb2YgdGhlIHppcCBmaWxlLgogICAgLy8gVXNlZCBmb3IgdGhlIGVtaXR0ZWQgbWV0YWRhdGEuCiAgICB0aGlzLmN1cnJlbnRGaWxlID0gbnVsbDsKCgoKICAgIHRoaXMuX3NvdXJjZXMgPSBbXTsKfQp1dGlscy5pbmhlcml0cyhaaXBGaWxlV29ya2VyLCBHZW5lcmljV29ya2VyKTsKCi8qKgogKiBAc2VlIEdlbmVyaWNXb3JrZXIucHVzaAogKi8KWmlwRmlsZVdvcmtlci5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaykgewoKICAgIHZhciBjdXJyZW50RmlsZVBlcmNlbnQgPSBjaHVuay5tZXRhLnBlcmNlbnQgfHwgMDsKICAgIHZhciBlbnRyaWVzQ291bnQgPSB0aGlzLmVudHJpZXNDb3VudDsKICAgIHZhciByZW1haW5pbmdGaWxlcyA9IHRoaXMuX3NvdXJjZXMubGVuZ3RoOwoKICAgIGlmKHRoaXMuYWNjdW11bGF0ZSkgewogICAgICAgIHRoaXMuY29udGVudEJ1ZmZlci5wdXNoKGNodW5rKTsKICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5ieXRlc1dyaXR0ZW4gKz0gY2h1bmsuZGF0YS5sZW5ndGg7CgogICAgICAgIEdlbmVyaWNXb3JrZXIucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLCB7CiAgICAgICAgICAgIGRhdGEgOiBjaHVuay5kYXRhLAogICAgICAgICAgICBtZXRhIDogewogICAgICAgICAgICAgICAgY3VycmVudEZpbGUgOiB0aGlzLmN1cnJlbnRGaWxlLAogICAgICAgICAgICAgICAgcGVyY2VudCA6IGVudHJpZXNDb3VudCA/IChjdXJyZW50RmlsZVBlcmNlbnQgKyAxMDAgKiAoZW50cmllc0NvdW50IC0gcmVtYWluaW5nRmlsZXMgLSAxKSkgLyBlbnRyaWVzQ291bnQgOiAxMDAKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQp9OwoKLyoqCiAqIFRoZSB3b3JrZXIgc3RhcnRlZCBhIG5ldyBzb3VyY2UgKGFuIG90aGVyIHdvcmtlcikuCiAqIEBwYXJhbSB7T2JqZWN0fSBzdHJlYW1JbmZvIHRoZSBzdHJlYW1JbmZvIG9iamVjdCBmcm9tIHRoZSBuZXcgc291cmNlLgogKi8KWmlwRmlsZVdvcmtlci5wcm90b3R5cGUub3BlbmVkU291cmNlID0gZnVuY3Rpb24gKHN0cmVhbUluZm8pIHsKICAgIHRoaXMuY3VycmVudFNvdXJjZU9mZnNldCA9IHRoaXMuYnl0ZXNXcml0dGVuOwogICAgdGhpcy5jdXJyZW50RmlsZSA9IHN0cmVhbUluZm9bJ2ZpbGUnXS5uYW1lOwoKICAgIHZhciBzdHJlYW1lZENvbnRlbnQgPSB0aGlzLnN0cmVhbUZpbGVzICYmICFzdHJlYW1JbmZvWydmaWxlJ10uZGlyOwoKICAgIC8vIGRvbid0IHN0cmVhbSBmb2xkZXJzIChiZWNhdXNlIHRoZXkgZG9uJ3QgaGF2ZSBhbnkgY29udGVudCkKICAgIGlmKHN0cmVhbWVkQ29udGVudCkgewogICAgICAgIHZhciByZWNvcmQgPSBnZW5lcmF0ZVppcFBhcnRzKHN0cmVhbUluZm8sIHN0cmVhbWVkQ29udGVudCwgZmFsc2UsIHRoaXMuY3VycmVudFNvdXJjZU9mZnNldCwgdGhpcy56aXBQbGF0Zm9ybSwgdGhpcy5lbmNvZGVGaWxlTmFtZSk7CiAgICAgICAgdGhpcy5wdXNoKHsKICAgICAgICAgICAgZGF0YSA6IHJlY29yZC5maWxlUmVjb3JkLAogICAgICAgICAgICBtZXRhIDoge3BlcmNlbnQ6MH0KICAgICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgICAgLy8gd2UgbmVlZCB0byB3YWl0IGZvciB0aGUgd2hvbGUgZmlsZSBiZWZvcmUgcHVzaGluZyBhbnl0aGluZwogICAgICAgIHRoaXMuYWNjdW11bGF0ZSA9IHRydWU7CiAgICB9Cn07CgovKioKICogVGhlIHdvcmtlciBmaW5pc2hlZCBhIHNvdXJjZSAoYW4gb3RoZXIgd29ya2VyKS4KICogQHBhcmFtIHtPYmplY3R9IHN0cmVhbUluZm8gdGhlIHN0cmVhbUluZm8gb2JqZWN0IGZyb20gdGhlIGZpbmlzaGVkIHNvdXJjZS4KICovClppcEZpbGVXb3JrZXIucHJvdG90eXBlLmNsb3NlZFNvdXJjZSA9IGZ1bmN0aW9uIChzdHJlYW1JbmZvKSB7CiAgICB0aGlzLmFjY3VtdWxhdGUgPSBmYWxzZTsKICAgIHZhciBzdHJlYW1lZENvbnRlbnQgPSB0aGlzLnN0cmVhbUZpbGVzICYmICFzdHJlYW1JbmZvWydmaWxlJ10uZGlyOwogICAgdmFyIHJlY29yZCA9IGdlbmVyYXRlWmlwUGFydHMoc3RyZWFtSW5mbywgc3RyZWFtZWRDb250ZW50LCB0cnVlLCB0aGlzLmN1cnJlbnRTb3VyY2VPZmZzZXQsIHRoaXMuemlwUGxhdGZvcm0sIHRoaXMuZW5jb2RlRmlsZU5hbWUpOwoKICAgIHRoaXMuZGlyUmVjb3Jkcy5wdXNoKHJlY29yZC5kaXJSZWNvcmQpOwogICAgaWYoc3RyZWFtZWRDb250ZW50KSB7CiAgICAgICAgLy8gYWZ0ZXIgdGhlIHN0cmVhbWVkIGZpbGUsIHdlIHB1dCBkYXRhIGRlc2NyaXB0b3JzCiAgICAgICAgdGhpcy5wdXNoKHsKICAgICAgICAgICAgZGF0YSA6IGdlbmVyYXRlRGF0YURlc2NyaXB0b3JzKHN0cmVhbUluZm8pLAogICAgICAgICAgICBtZXRhIDoge3BlcmNlbnQ6MTAwfQogICAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgICAvLyB0aGUgY29udGVudCB3YXNuJ3Qgc3RyZWFtZWQsIHdlIG5lZWQgdG8gcHVzaCBldmVyeXRoaW5nIG5vdwogICAgICAgIC8vIGZpcnN0IHRoZSBmaWxlIHJlY29yZCwgdGhlbiB0aGUgY29udGVudAogICAgICAgIHRoaXMucHVzaCh7CiAgICAgICAgICAgIGRhdGEgOiByZWNvcmQuZmlsZVJlY29yZCwKICAgICAgICAgICAgbWV0YSA6IHtwZXJjZW50OjB9CiAgICAgICAgfSk7CiAgICAgICAgd2hpbGUodGhpcy5jb250ZW50QnVmZmVyLmxlbmd0aCkgewogICAgICAgICAgICB0aGlzLnB1c2godGhpcy5jb250ZW50QnVmZmVyLnNoaWZ0KCkpOwogICAgICAgIH0KICAgIH0KICAgIHRoaXMuY3VycmVudEZpbGUgPSBudWxsOwp9OwoKLyoqCiAqIEBzZWUgR2VuZXJpY1dvcmtlci5mbHVzaAogKi8KWmlwRmlsZVdvcmtlci5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7CgogICAgdmFyIGxvY2FsRGlyTGVuZ3RoID0gdGhpcy5ieXRlc1dyaXR0ZW47CiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5kaXJSZWNvcmRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5wdXNoKHsKICAgICAgICAgICAgZGF0YSA6IHRoaXMuZGlyUmVjb3Jkc1tpXSwKICAgICAgICAgICAgbWV0YSA6IHtwZXJjZW50OjEwMH0KICAgICAgICB9KTsKICAgIH0KICAgIHZhciBjZW50cmFsRGlyTGVuZ3RoID0gdGhpcy5ieXRlc1dyaXR0ZW4gLSBsb2NhbERpckxlbmd0aDsKCiAgICB2YXIgZGlyRW5kID0gZ2VuZXJhdGVDZW50cmFsRGlyZWN0b3J5RW5kKHRoaXMuZGlyUmVjb3Jkcy5sZW5ndGgsIGNlbnRyYWxEaXJMZW5ndGgsIGxvY2FsRGlyTGVuZ3RoLCB0aGlzLnppcENvbW1lbnQsIHRoaXMuZW5jb2RlRmlsZU5hbWUpOwoKICAgIHRoaXMucHVzaCh7CiAgICAgICAgZGF0YSA6IGRpckVuZCwKICAgICAgICBtZXRhIDoge3BlcmNlbnQ6MTAwfQogICAgfSk7Cn07CgovKioKICogUHJlcGFyZSB0aGUgbmV4dCBzb3VyY2UgdG8gYmUgcmVhZC4KICovClppcEZpbGVXb3JrZXIucHJvdG90eXBlLnByZXBhcmVOZXh0U291cmNlID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5wcmV2aW91cyA9IHRoaXMuX3NvdXJjZXMuc2hpZnQoKTsKICAgIHRoaXMub3BlbmVkU291cmNlKHRoaXMucHJldmlvdXMuc3RyZWFtSW5mbyk7CiAgICBpZiAodGhpcy5pc1BhdXNlZCkgewogICAgICAgIHRoaXMucHJldmlvdXMucGF1c2UoKTsKICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wcmV2aW91cy5yZXN1bWUoKTsKICAgIH0KfTsKCi8qKgogKiBAc2VlIEdlbmVyaWNXb3JrZXIucmVnaXN0ZXJQcmV2aW91cwogKi8KWmlwRmlsZVdvcmtlci5wcm90b3R5cGUucmVnaXN0ZXJQcmV2aW91cyA9IGZ1bmN0aW9uIChwcmV2aW91cykgewogICAgdGhpcy5fc291cmNlcy5wdXNoKHByZXZpb3VzKTsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICBwcmV2aW91cy5vbignZGF0YScsIGZ1bmN0aW9uIChjaHVuaykgewogICAgICAgIHNlbGYucHJvY2Vzc0NodW5rKGNodW5rKTsKICAgIH0pOwogICAgcHJldmlvdXMub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICBzZWxmLmNsb3NlZFNvdXJjZShzZWxmLnByZXZpb3VzLnN0cmVhbUluZm8pOwogICAgICAgIGlmKHNlbGYuX3NvdXJjZXMubGVuZ3RoKSB7CiAgICAgICAgICAgIHNlbGYucHJlcGFyZU5leHRTb3VyY2UoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzZWxmLmVuZCgpOwogICAgICAgIH0KICAgIH0pOwogICAgcHJldmlvdXMub24oJ2Vycm9yJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICBzZWxmLmVycm9yKGUpOwogICAgfSk7CiAgICByZXR1cm4gdGhpczsKfTsKCi8qKgogKiBAc2VlIEdlbmVyaWNXb3JrZXIucmVzdW1lCiAqLwpaaXBGaWxlV29ya2VyLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7CiAgICBpZighR2VuZXJpY1dvcmtlci5wcm90b3R5cGUucmVzdW1lLmNhbGwodGhpcykpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgaWYgKCF0aGlzLnByZXZpb3VzICYmIHRoaXMuX3NvdXJjZXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5wcmVwYXJlTmV4dFNvdXJjZSgpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgaWYgKCF0aGlzLnByZXZpb3VzICYmICF0aGlzLl9zb3VyY2VzLmxlbmd0aCAmJiAhdGhpcy5nZW5lcmF0ZWRFcnJvcikgewogICAgICAgIHRoaXMuZW5kKCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn07CgovKioKICogQHNlZSBHZW5lcmljV29ya2VyLmVycm9yCiAqLwpaaXBGaWxlV29ya2VyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7CiAgICB2YXIgc291cmNlcyA9IHRoaXMuX3NvdXJjZXM7CiAgICBpZighR2VuZXJpY1dvcmtlci5wcm90b3R5cGUuZXJyb3IuY2FsbCh0aGlzLCBlKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzb3VyY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgc291cmNlc1tpXS5lcnJvcihlKTsKICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgICAgLy8gdGhlIGBlcnJvcmAgZXhwbG9kZWQsIG5vdGhpbmcgdG8gZG8KICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKfTsKCi8qKgogKiBAc2VlIEdlbmVyaWNXb3JrZXIubG9jawogKi8KWmlwRmlsZVdvcmtlci5wcm90b3R5cGUubG9jayA9IGZ1bmN0aW9uICgpIHsKICAgIEdlbmVyaWNXb3JrZXIucHJvdG90eXBlLmxvY2suY2FsbCh0aGlzKTsKICAgIHZhciBzb3VyY2VzID0gdGhpcy5fc291cmNlczsKICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzb3VyY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgc291cmNlc1tpXS5sb2NrKCk7CiAgICB9Cn07Cgptb2R1bGUuZXhwb3J0cyA9IFppcEZpbGVXb3JrZXI7Cgp9LHsiLi4vY3JjMzIiOjQsIi4uL3NpZ25hdHVyZSI6MjMsIi4uL3N0cmVhbS9HZW5lcmljV29ya2VyIjoyOCwiLi4vdXRmOCI6MzEsIi4uL3V0aWxzIjozMn1dLDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgY29tcHJlc3Npb25zID0gcmVxdWlyZSgnLi4vY29tcHJlc3Npb25zJyk7CnZhciBaaXBGaWxlV29ya2VyID0gcmVxdWlyZSgnLi9aaXBGaWxlV29ya2VyJyk7CgovKioKICogRmluZCB0aGUgY29tcHJlc3Npb24gdG8gdXNlLgogKiBAcGFyYW0ge1N0cmluZ30gZmlsZUNvbXByZXNzaW9uIHRoZSBjb21wcmVzc2lvbiBkZWZpbmVkIGF0IHRoZSBmaWxlIGxldmVsLCBpZiBhbnkuCiAqIEBwYXJhbSB7U3RyaW5nfSB6aXBDb21wcmVzc2lvbiB0aGUgY29tcHJlc3Npb24gZGVmaW5lZCBhdCB0aGUgbG9hZCgpIGxldmVsLgogKiBAcmV0dXJuIHtPYmplY3R9IHRoZSBjb21wcmVzc2lvbiBvYmplY3QgdG8gdXNlLgogKi8KdmFyIGdldENvbXByZXNzaW9uID0gZnVuY3Rpb24gKGZpbGVDb21wcmVzc2lvbiwgemlwQ29tcHJlc3Npb24pIHsKCiAgICB2YXIgY29tcHJlc3Npb25OYW1lID0gZmlsZUNvbXByZXNzaW9uIHx8IHppcENvbXByZXNzaW9uOwogICAgdmFyIGNvbXByZXNzaW9uID0gY29tcHJlc3Npb25zW2NvbXByZXNzaW9uTmFtZV07CiAgICBpZiAoIWNvbXByZXNzaW9uKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNvbXByZXNzaW9uTmFtZSArICIgaXMgbm90IGEgdmFsaWQgY29tcHJlc3Npb24gbWV0aG9kICEiKTsKICAgIH0KICAgIHJldHVybiBjb21wcmVzc2lvbjsKfTsKCi8qKgogKiBDcmVhdGUgYSB3b3JrZXIgdG8gZ2VuZXJhdGUgYSB6aXAgZmlsZS4KICogQHBhcmFtIHtKU1ppcH0gemlwIHRoZSBKU1ppcCBpbnN0YW5jZSBhdCB0aGUgcmlnaHQgcm9vdCBsZXZlbC4KICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdG8gZ2VuZXJhdGUgdGhlIHppcCBmaWxlLgogKiBAcGFyYW0ge1N0cmluZ30gY29tbWVudCB0aGUgY29tbWVudCB0byB1c2UuCiAqLwpleHBvcnRzLmdlbmVyYXRlV29ya2VyID0gZnVuY3Rpb24gKHppcCwgb3B0aW9ucywgY29tbWVudCkgewoKICAgIHZhciB6aXBGaWxlV29ya2VyID0gbmV3IFppcEZpbGVXb3JrZXIob3B0aW9ucy5zdHJlYW1GaWxlcywgY29tbWVudCwgb3B0aW9ucy5wbGF0Zm9ybSwgb3B0aW9ucy5lbmNvZGVGaWxlTmFtZSk7CiAgICB2YXIgZW50cmllc0NvdW50ID0gMDsKICAgIHRyeSB7CgogICAgICAgIHppcC5mb3JFYWNoKGZ1bmN0aW9uIChyZWxhdGl2ZVBhdGgsIGZpbGUpIHsKICAgICAgICAgICAgZW50cmllc0NvdW50Kys7CiAgICAgICAgICAgIHZhciBjb21wcmVzc2lvbiA9IGdldENvbXByZXNzaW9uKGZpbGUub3B0aW9ucy5jb21wcmVzc2lvbiwgb3B0aW9ucy5jb21wcmVzc2lvbik7CiAgICAgICAgICAgIHZhciBjb21wcmVzc2lvbk9wdGlvbnMgPSBmaWxlLm9wdGlvbnMuY29tcHJlc3Npb25PcHRpb25zIHx8IG9wdGlvbnMuY29tcHJlc3Npb25PcHRpb25zIHx8IHt9OwogICAgICAgICAgICB2YXIgZGlyID0gZmlsZS5kaXIsIGRhdGUgPSBmaWxlLmRhdGU7CgogICAgICAgICAgICBmaWxlLl9jb21wcmVzc1dvcmtlcihjb21wcmVzc2lvbiwgY29tcHJlc3Npb25PcHRpb25zKQogICAgICAgICAgICAud2l0aFN0cmVhbUluZm8oImZpbGUiLCB7CiAgICAgICAgICAgICAgICBuYW1lIDogcmVsYXRpdmVQYXRoLAogICAgICAgICAgICAgICAgZGlyIDogZGlyLAogICAgICAgICAgICAgICAgZGF0ZSA6IGRhdGUsCiAgICAgICAgICAgICAgICBjb21tZW50IDogZmlsZS5jb21tZW50IHx8ICIiLAogICAgICAgICAgICAgICAgdW5peFBlcm1pc3Npb25zIDogZmlsZS51bml4UGVybWlzc2lvbnMsCiAgICAgICAgICAgICAgICBkb3NQZXJtaXNzaW9ucyA6IGZpbGUuZG9zUGVybWlzc2lvbnMKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnBpcGUoemlwRmlsZVdvcmtlcik7CiAgICAgICAgfSk7CiAgICAgICAgemlwRmlsZVdvcmtlci5lbnRyaWVzQ291bnQgPSBlbnRyaWVzQ291bnQ7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgemlwRmlsZVdvcmtlci5lcnJvcihlKTsKICAgIH0KCiAgICByZXR1cm4gemlwRmlsZVdvcmtlcjsKfTsKCn0seyIuLi9jb21wcmVzc2lvbnMiOjMsIi4vWmlwRmlsZVdvcmtlciI6OH1dLDEwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKLyoqCiAqIFJlcHJlc2VudGF0aW9uIGEgb2YgemlwIGZpbGUgaW4ganMKICogQGNvbnN0cnVjdG9yCiAqLwpmdW5jdGlvbiBKU1ppcCgpIHsKICAgIC8vIGlmIHRoaXMgY29uc3RydWN0b3IgaXMgdXNlZCB3aXRob3V0IGBuZXdgLCBpdCBhZGRzIGBuZXdgIGJlZm9yZSBpdHNlbGY6CiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBKU1ppcCkpIHsKICAgICAgICByZXR1cm4gbmV3IEpTWmlwKCk7CiAgICB9CgogICAgaWYoYXJndW1lbnRzLmxlbmd0aCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiVGhlIGNvbnN0cnVjdG9yIHdpdGggcGFyYW1ldGVycyBoYXMgYmVlbiByZW1vdmVkIGluIEpTWmlwIDMuMCwgcGxlYXNlIGNoZWNrIHRoZSB1cGdyYWRlIGd1aWRlLiIpOwogICAgfQoKICAgIC8vIG9iamVjdCBjb250YWluaW5nIHRoZSBmaWxlcyA6CiAgICAvLyB7CiAgICAvLyAgICJmb2xkZXIvIiA6IHsuLi59LAogICAgLy8gICAiZm9sZGVyL2RhdGEudHh0IiA6IHsuLi59CiAgICAvLyB9CiAgICAvLyBOT1RFOiB3ZSB1c2UgYSBudWxsIHByb3RvdHlwZSBiZWNhdXNlIHdlIGRvIG5vdAogICAgLy8gd2FudCBmaWxlbmFtZXMgbGlrZSAidG9TdHJpbmciIGNvbWluZyBmcm9tIGEgemlwIGZpbGUKICAgIC8vIHRvIG92ZXJ3cml0ZSBtZXRob2RzIGFuZCBhdHRyaWJ1dGVzIGluIGEgbm9ybWFsIE9iamVjdC4KICAgIHRoaXMuZmlsZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwoKICAgIHRoaXMuY29tbWVudCA9IG51bGw7CgogICAgLy8gV2hlcmUgd2UgYXJlIGluIHRoZSBoaWVyYXJjaHkKICAgIHRoaXMucm9vdCA9ICIiOwogICAgdGhpcy5jbG9uZSA9IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBuZXdPYmogPSBuZXcgSlNaaXAoKTsKICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMpIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzW2ldICE9PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgICBuZXdPYmpbaV0gPSB0aGlzW2ldOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXdPYmo7CiAgICB9Owp9CkpTWmlwLnByb3RvdHlwZSA9IHJlcXVpcmUoJy4vb2JqZWN0Jyk7CkpTWmlwLnByb3RvdHlwZS5sb2FkQXN5bmMgPSByZXF1aXJlKCcuL2xvYWQnKTsKSlNaaXAuc3VwcG9ydCA9IHJlcXVpcmUoJy4vc3VwcG9ydCcpOwpKU1ppcC5kZWZhdWx0cyA9IHJlcXVpcmUoJy4vZGVmYXVsdHMnKTsKCi8vIFRPRE8gZmluZCBhIGJldHRlciB3YXkgdG8gaGFuZGxlIHRoaXMgdmVyc2lvbiwKLy8gYSByZXF1aXJlKCdwYWNrYWdlLmpzb24nKS52ZXJzaW9uIGRvZXNuJ3Qgd29yayB3aXRoIHdlYnBhY2ssIHNlZSAjMzI3CkpTWmlwLnZlcnNpb24gPSAiMy43LjEiOwoKSlNaaXAubG9hZEFzeW5jID0gZnVuY3Rpb24gKGNvbnRlbnQsIG9wdGlvbnMpIHsKICAgIHJldHVybiBuZXcgSlNaaXAoKS5sb2FkQXN5bmMoY29udGVudCwgb3B0aW9ucyk7Cn07CgpKU1ppcC5leHRlcm5hbCA9IHJlcXVpcmUoIi4vZXh0ZXJuYWwiKTsKbW9kdWxlLmV4cG9ydHMgPSBKU1ppcDsKCn0seyIuL2RlZmF1bHRzIjo1LCIuL2V4dGVybmFsIjo2LCIuL2xvYWQiOjExLCIuL29iamVjdCI6MTUsIi4vc3VwcG9ydCI6MzB9XSwxMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpOwp2YXIgZXh0ZXJuYWwgPSByZXF1aXJlKCIuL2V4dGVybmFsIik7CnZhciB1dGY4ID0gcmVxdWlyZSgnLi91dGY4Jyk7CnZhciBaaXBFbnRyaWVzID0gcmVxdWlyZSgnLi96aXBFbnRyaWVzJyk7CnZhciBDcmMzMlByb2JlID0gcmVxdWlyZSgnLi9zdHJlYW0vQ3JjMzJQcm9iZScpOwp2YXIgbm9kZWpzVXRpbHMgPSByZXF1aXJlKCIuL25vZGVqc1V0aWxzIik7CgovKioKICogQ2hlY2sgdGhlIENSQzMyIG9mIGFuIGVudHJ5LgogKiBAcGFyYW0ge1ppcEVudHJ5fSB6aXBFbnRyeSB0aGUgemlwIGVudHJ5IHRvIGNoZWNrLgogKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgcmVzdWx0LgogKi8KZnVuY3Rpb24gY2hlY2tFbnRyeUNSQzMyKHppcEVudHJ5KSB7CiAgICByZXR1cm4gbmV3IGV4dGVybmFsLlByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciB3b3JrZXIgPSB6aXBFbnRyeS5kZWNvbXByZXNzZWQuZ2V0Q29udGVudFdvcmtlcigpLnBpcGUobmV3IENyYzMyUHJvYmUoKSk7CiAgICAgICAgd29ya2VyLm9uKCJlcnJvciIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICB9KQogICAgICAgICAgICAub24oImVuZCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmICh3b3JrZXIuc3RyZWFtSW5mby5jcmMzMiAhPT0gemlwRW50cnkuZGVjb21wcmVzc2VkLmNyYzMyKSB7CiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcigiQ29ycnVwdGVkIHppcCA6IENSQzMyIG1pc21hdGNoIikpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5yZXN1bWUoKTsKICAgIH0pOwp9Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkYXRhLCBvcHRpb25zKSB7CiAgICB2YXIgemlwID0gdGhpczsKICAgIG9wdGlvbnMgPSB1dGlscy5leHRlbmQob3B0aW9ucyB8fCB7fSwgewogICAgICAgIGJhc2U2NDogZmFsc2UsCiAgICAgICAgY2hlY2tDUkMzMjogZmFsc2UsCiAgICAgICAgb3B0aW1pemVkQmluYXJ5U3RyaW5nOiBmYWxzZSwKICAgICAgICBjcmVhdGVGb2xkZXJzOiBmYWxzZSwKICAgICAgICBkZWNvZGVGaWxlTmFtZTogdXRmOC51dGY4ZGVjb2RlCiAgICB9KTsKCiAgICBpZiAobm9kZWpzVXRpbHMuaXNOb2RlICYmIG5vZGVqc1V0aWxzLmlzU3RyZWFtKGRhdGEpKSB7CiAgICAgICAgcmV0dXJuIGV4dGVybmFsLlByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiSlNaaXAgY2FuJ3QgYWNjZXB0IGEgc3RyZWFtIHdoZW4gbG9hZGluZyBhIHppcCBmaWxlLiIpKTsKICAgIH0KCiAgICByZXR1cm4gdXRpbHMucHJlcGFyZUNvbnRlbnQoInRoZSBsb2FkZWQgemlwIGZpbGUiLCBkYXRhLCB0cnVlLCBvcHRpb25zLm9wdGltaXplZEJpbmFyeVN0cmluZywgb3B0aW9ucy5iYXNlNjQpCiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgdmFyIHppcEVudHJpZXMgPSBuZXcgWmlwRW50cmllcyhvcHRpb25zKTsKICAgICAgICAgICAgemlwRW50cmllcy5sb2FkKGRhdGEpOwogICAgICAgICAgICByZXR1cm4gemlwRW50cmllczsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIGNoZWNrQ1JDMzIoemlwRW50cmllcykgewogICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbZXh0ZXJuYWwuUHJvbWlzZS5yZXNvbHZlKHppcEVudHJpZXMpXTsKICAgICAgICAgICAgdmFyIGZpbGVzID0gemlwRW50cmllcy5maWxlczsKICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2hlY2tDUkMzMikgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goY2hlY2tFbnRyeUNSQzMyKGZpbGVzW2ldKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGV4dGVybmFsLlByb21pc2UuYWxsKHByb21pc2VzKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIGFkZEZpbGVzKHJlc3VsdHMpIHsKICAgICAgICAgICAgdmFyIHppcEVudHJpZXMgPSByZXN1bHRzLnNoaWZ0KCk7CiAgICAgICAgICAgIHZhciBmaWxlcyA9IHppcEVudHJpZXMuZmlsZXM7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IGZpbGVzW2ldOwogICAgICAgICAgICAgICAgemlwLmZpbGUoaW5wdXQuZmlsZU5hbWVTdHIsIGlucHV0LmRlY29tcHJlc3NlZCwgewogICAgICAgICAgICAgICAgICAgIGJpbmFyeTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBvcHRpbWl6ZWRCaW5hcnlTdHJpbmc6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgZGF0ZTogaW5wdXQuZGF0ZSwKICAgICAgICAgICAgICAgICAgICBkaXI6IGlucHV0LmRpciwKICAgICAgICAgICAgICAgICAgICBjb21tZW50OiBpbnB1dC5maWxlQ29tbWVudFN0ci5sZW5ndGggPyBpbnB1dC5maWxlQ29tbWVudFN0ciA6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgdW5peFBlcm1pc3Npb25zOiBpbnB1dC51bml4UGVybWlzc2lvbnMsCiAgICAgICAgICAgICAgICAgICAgZG9zUGVybWlzc2lvbnM6IGlucHV0LmRvc1Blcm1pc3Npb25zLAogICAgICAgICAgICAgICAgICAgIGNyZWF0ZUZvbGRlcnM6IG9wdGlvbnMuY3JlYXRlRm9sZGVycwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHppcEVudHJpZXMuemlwQ29tbWVudC5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHppcC5jb21tZW50ID0gemlwRW50cmllcy56aXBDb21tZW50OwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gemlwOwogICAgICAgIH0pOwp9OwoKfSx7Ii4vZXh0ZXJuYWwiOjYsIi4vbm9kZWpzVXRpbHMiOjE0LCIuL3N0cmVhbS9DcmMzMlByb2JlIjoyNSwiLi91dGY4IjozMSwiLi91dGlscyI6MzIsIi4vemlwRW50cmllcyI6MzN9XSwxMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKCnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7CnZhciBHZW5lcmljV29ya2VyID0gcmVxdWlyZSgnLi4vc3RyZWFtL0dlbmVyaWNXb3JrZXInKTsKCi8qKgogKiBBIHdvcmtlciB0aGF0IHVzZSBhIG5vZGVqcyBzdHJlYW0gYXMgc291cmNlLgogKiBAY29uc3RydWN0b3IKICogQHBhcmFtIHtTdHJpbmd9IGZpbGVuYW1lIHRoZSBuYW1lIG9mIHRoZSBmaWxlIGVudHJ5IGZvciB0aGlzIHN0cmVhbS4KICogQHBhcmFtIHtSZWFkYWJsZX0gc3RyZWFtIHRoZSBub2RlanMgc3RyZWFtLgogKi8KZnVuY3Rpb24gTm9kZWpzU3RyZWFtSW5wdXRBZGFwdGVyKGZpbGVuYW1lLCBzdHJlYW0pIHsKICAgIEdlbmVyaWNXb3JrZXIuY2FsbCh0aGlzLCAiTm9kZWpzIHN0cmVhbSBpbnB1dCBhZGFwdGVyIGZvciAiICsgZmlsZW5hbWUpOwogICAgdGhpcy5fdXBzdHJlYW1FbmRlZCA9IGZhbHNlOwogICAgdGhpcy5fYmluZFN0cmVhbShzdHJlYW0pOwp9Cgp1dGlscy5pbmhlcml0cyhOb2RlanNTdHJlYW1JbnB1dEFkYXB0ZXIsIEdlbmVyaWNXb3JrZXIpOwoKLyoqCiAqIFByZXBhcmUgdGhlIHN0cmVhbSBhbmQgYmluZCB0aGUgY2FsbGJhY2tzIG9uIGl0LgogKiBEbyB0aGlzIEFTQVAgb24gbm9kZSAwLjEwICEgQSBsYXp5IGJpbmRpbmcgZG9lc24ndCBhbHdheXMgd29yay4KICogQHBhcmFtIHtTdHJlYW19IHN0cmVhbSB0aGUgbm9kZWpzIHN0cmVhbSB0byB1c2UuCiAqLwpOb2RlanNTdHJlYW1JbnB1dEFkYXB0ZXIucHJvdG90eXBlLl9iaW5kU3RyZWFtID0gZnVuY3Rpb24gKHN0cmVhbSkgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdGhpcy5fc3RyZWFtID0gc3RyZWFtOwogICAgc3RyZWFtLnBhdXNlKCk7CiAgICBzdHJlYW0KICAgIC5vbigiZGF0YSIsIGZ1bmN0aW9uIChjaHVuaykgewogICAgICAgIHNlbGYucHVzaCh7CiAgICAgICAgICAgIGRhdGE6IGNodW5rLAogICAgICAgICAgICBtZXRhIDogewogICAgICAgICAgICAgICAgcGVyY2VudCA6IDAKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSkKICAgIC5vbigiZXJyb3IiLCBmdW5jdGlvbiAoZSkgewogICAgICAgIGlmKHNlbGYuaXNQYXVzZWQpIHsKICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZWRFcnJvciA9IGU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2VsZi5lcnJvcihlKTsKICAgICAgICB9CiAgICB9KQogICAgLm9uKCJlbmQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYoc2VsZi5pc1BhdXNlZCkgewogICAgICAgICAgICBzZWxmLl91cHN0cmVhbUVuZGVkID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzZWxmLmVuZCgpOwogICAgICAgIH0KICAgIH0pOwp9OwpOb2RlanNTdHJlYW1JbnB1dEFkYXB0ZXIucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKCkgewogICAgaWYoIUdlbmVyaWNXb3JrZXIucHJvdG90eXBlLnBhdXNlLmNhbGwodGhpcykpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICB0aGlzLl9zdHJlYW0ucGF1c2UoKTsKICAgIHJldHVybiB0cnVlOwp9OwpOb2RlanNTdHJlYW1JbnB1dEFkYXB0ZXIucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uICgpIHsKICAgIGlmKCFHZW5lcmljV29ya2VyLnByb3RvdHlwZS5yZXN1bWUuY2FsbCh0aGlzKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBpZih0aGlzLl91cHN0cmVhbUVuZGVkKSB7CiAgICAgICAgdGhpcy5lbmQoKTsKICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5fc3RyZWFtLnJlc3VtZSgpOwogICAgfQoKICAgIHJldHVybiB0cnVlOwp9OwoKbW9kdWxlLmV4cG9ydHMgPSBOb2RlanNTdHJlYW1JbnB1dEFkYXB0ZXI7Cgp9LHsiLi4vc3RyZWFtL0dlbmVyaWNXb3JrZXIiOjI4LCIuLi91dGlscyI6MzJ9XSwxMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBSZWFkYWJsZSA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbScpLlJlYWRhYmxlOwoKdmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTsKdXRpbHMuaW5oZXJpdHMoTm9kZWpzU3RyZWFtT3V0cHV0QWRhcHRlciwgUmVhZGFibGUpOwoKLyoqCiogQSBub2RlanMgc3RyZWFtIHVzaW5nIGEgd29ya2VyIGFzIHNvdXJjZS4KKiBAc2VlIHRoZSBTb3VyY2VXcmFwcGVyIGluIGh0dHA6Ly9ub2RlanMub3JnL2FwaS9zdHJlYW0uaHRtbAoqIEBjb25zdHJ1Y3RvcgoqIEBwYXJhbSB7U3RyZWFtSGVscGVyfSBoZWxwZXIgdGhlIGhlbHBlciB3cmFwcGluZyB0aGUgd29ya2VyCiogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdGhlIG5vZGVqcyBzdHJlYW0gb3B0aW9ucwoqIEBwYXJhbSB7RnVuY3Rpb259IHVwZGF0ZUNiIHRoZSB1cGRhdGUgY2FsbGJhY2suCiovCmZ1bmN0aW9uIE5vZGVqc1N0cmVhbU91dHB1dEFkYXB0ZXIoaGVscGVyLCBvcHRpb25zLCB1cGRhdGVDYikgewogICAgUmVhZGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTsKICAgIHRoaXMuX2hlbHBlciA9IGhlbHBlcjsKCiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICBoZWxwZXIub24oImRhdGEiLCBmdW5jdGlvbiAoZGF0YSwgbWV0YSkgewogICAgICAgIGlmICghc2VsZi5wdXNoKGRhdGEpKSB7CiAgICAgICAgICAgIHNlbGYuX2hlbHBlci5wYXVzZSgpOwogICAgICAgIH0KICAgICAgICBpZih1cGRhdGVDYikgewogICAgICAgICAgICB1cGRhdGVDYihtZXRhKTsKICAgICAgICB9CiAgICB9KQogICAgLm9uKCJlcnJvciIsIGZ1bmN0aW9uKGUpIHsKICAgICAgICBzZWxmLmVtaXQoJ2Vycm9yJywgZSk7CiAgICB9KQogICAgLm9uKCJlbmQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgc2VsZi5wdXNoKG51bGwpOwogICAgfSk7Cn0KCgpOb2RlanNTdHJlYW1PdXRwdXRBZGFwdGVyLnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uKCkgewogICAgdGhpcy5faGVscGVyLnJlc3VtZSgpOwp9OwoKbW9kdWxlLmV4cG9ydHMgPSBOb2RlanNTdHJlYW1PdXRwdXRBZGFwdGVyOwoKfSx7Ii4uL3V0aWxzIjozMiwicmVhZGFibGUtc3RyZWFtIjoxNn1dLDE0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAvKioKICAgICAqIFRydWUgaWYgdGhpcyBpcyBydW5uaW5nIGluIE5vZGVqcywgd2lsbCBiZSB1bmRlZmluZWQgaW4gYSBicm93c2VyLgogICAgICogSW4gYSBicm93c2VyLCBicm93c2VyaWZ5IHdvbid0IGluY2x1ZGUgdGhpcyBmaWxlIGFuZCB0aGUgd2hvbGUgbW9kdWxlCiAgICAgKiB3aWxsIGJlIHJlc29sdmVkIGFuIGVtcHR5IG9iamVjdC4KICAgICAqLwogICAgaXNOb2RlIDogdHlwZW9mIEJ1ZmZlciAhPT0gInVuZGVmaW5lZCIsCiAgICAvKioKICAgICAqIENyZWF0ZSBhIG5ldyBub2RlanMgQnVmZmVyIGZyb20gYW4gZXhpc3RpbmcgY29udGVudC4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIHRoZSBkYXRhIHRvIHBhc3MgdG8gdGhlIGNvbnN0cnVjdG9yLgogICAgICogQHBhcmFtIHtTdHJpbmd9IGVuY29kaW5nIHRoZSBlbmNvZGluZyB0byB1c2UuCiAgICAgKiBAcmV0dXJuIHtCdWZmZXJ9IGEgbmV3IEJ1ZmZlci4KICAgICAqLwogICAgbmV3QnVmZmVyRnJvbTogZnVuY3Rpb24oZGF0YSwgZW5jb2RpbmcpIHsKICAgICAgICBpZiAoQnVmZmVyLmZyb20gJiYgQnVmZmVyLmZyb20gIT09IFVpbnQ4QXJyYXkuZnJvbSkgewogICAgICAgICAgICByZXR1cm4gQnVmZmVyLmZyb20oZGF0YSwgZW5jb2RpbmcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gIm51bWJlciIpIHsKICAgICAgICAgICAgICAgIC8vIFNhZmVndWFyZCBmb3Igb2xkIE5vZGUuanMgdmVyc2lvbnMuIE9uIG5ld2VyIHZlcnNpb25zLAogICAgICAgICAgICAgICAgLy8gQnVmZmVyLmZyb20obnVtYmVyKSAvIEJ1ZmZlcihudW1iZXIsIGVuY29kaW5nKSBhbHJlYWR5IHRocm93LgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJUaGUgXCJkYXRhXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXIiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbmV3IEJ1ZmZlcihkYXRhLCBlbmNvZGluZyk7CiAgICAgICAgfQogICAgfSwKICAgIC8qKgogICAgICogQ3JlYXRlIGEgbmV3IG5vZGVqcyBCdWZmZXIgd2l0aCB0aGUgc3BlY2lmaWVkIHNpemUuCiAgICAgKiBAcGFyYW0ge0ludGVnZXJ9IHNpemUgdGhlIHNpemUgb2YgdGhlIGJ1ZmZlci4KICAgICAqIEByZXR1cm4ge0J1ZmZlcn0gYSBuZXcgQnVmZmVyLgogICAgICovCiAgICBhbGxvY0J1ZmZlcjogZnVuY3Rpb24gKHNpemUpIHsKICAgICAgICBpZiAoQnVmZmVyLmFsbG9jKSB7CiAgICAgICAgICAgIHJldHVybiBCdWZmZXIuYWxsb2Moc2l6ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIoc2l6ZSk7CiAgICAgICAgICAgIGJ1Zi5maWxsKDApOwogICAgICAgICAgICByZXR1cm4gYnVmOwogICAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIEZpbmQgb3V0IGlmIGFuIG9iamVjdCBpcyBhIEJ1ZmZlci4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBiIHRoZSBvYmplY3QgdG8gdGVzdC4KICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgdGhlIG9iamVjdCBpcyBhIEJ1ZmZlciwgZmFsc2Ugb3RoZXJ3aXNlLgogICAgICovCiAgICBpc0J1ZmZlciA6IGZ1bmN0aW9uKGIpewogICAgICAgIHJldHVybiBCdWZmZXIuaXNCdWZmZXIoYik7CiAgICB9LAoKICAgIGlzU3RyZWFtIDogZnVuY3Rpb24gKG9iaikgewogICAgICAgIHJldHVybiBvYmogJiYKICAgICAgICAgICAgdHlwZW9mIG9iai5vbiA9PT0gImZ1bmN0aW9uIiAmJgogICAgICAgICAgICB0eXBlb2Ygb2JqLnBhdXNlID09PSAiZnVuY3Rpb24iICYmCiAgICAgICAgICAgIHR5cGVvZiBvYmoucmVzdW1lID09PSAiZnVuY3Rpb24iOwogICAgfQp9OwoKfSx7fV0sMTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CnZhciB1dGY4ID0gcmVxdWlyZSgnLi91dGY4Jyk7CnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTsKdmFyIEdlbmVyaWNXb3JrZXIgPSByZXF1aXJlKCcuL3N0cmVhbS9HZW5lcmljV29ya2VyJyk7CnZhciBTdHJlYW1IZWxwZXIgPSByZXF1aXJlKCcuL3N0cmVhbS9TdHJlYW1IZWxwZXInKTsKdmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi9kZWZhdWx0cycpOwp2YXIgQ29tcHJlc3NlZE9iamVjdCA9IHJlcXVpcmUoJy4vY29tcHJlc3NlZE9iamVjdCcpOwp2YXIgWmlwT2JqZWN0ID0gcmVxdWlyZSgnLi96aXBPYmplY3QnKTsKdmFyIGdlbmVyYXRlID0gcmVxdWlyZSgiLi9nZW5lcmF0ZSIpOwp2YXIgbm9kZWpzVXRpbHMgPSByZXF1aXJlKCIuL25vZGVqc1V0aWxzIik7CnZhciBOb2RlanNTdHJlYW1JbnB1dEFkYXB0ZXIgPSByZXF1aXJlKCIuL25vZGVqcy9Ob2RlanNTdHJlYW1JbnB1dEFkYXB0ZXIiKTsKCgovKioKICogQWRkIGEgZmlsZSBpbiB0aGUgY3VycmVudCBmb2xkZXIuCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIHRoZSBuYW1lIG9mIHRoZSBmaWxlCiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5QnVmZmVyfFVpbnQ4QXJyYXl8QnVmZmVyfSBkYXRhIHRoZSBkYXRhIG9mIHRoZSBmaWxlCiAqIEBwYXJhbSB7T2JqZWN0fSBvcmlnaW5hbE9wdGlvbnMgdGhlIG9wdGlvbnMgb2YgdGhlIGZpbGUKICogQHJldHVybiB7T2JqZWN0fSB0aGUgbmV3IGZpbGUuCiAqLwp2YXIgZmlsZUFkZCA9IGZ1bmN0aW9uKG5hbWUsIGRhdGEsIG9yaWdpbmFsT3B0aW9ucykgewogICAgLy8gYmUgc3VyZSBzdWIgZm9sZGVycyBleGlzdAogICAgdmFyIGRhdGFUeXBlID0gdXRpbHMuZ2V0VHlwZU9mKGRhdGEpLAogICAgICAgIHBhcmVudDsKCgogICAgLyoKICAgICAqIENvcnJlY3Qgb3B0aW9ucy4KICAgICAqLwoKICAgIHZhciBvID0gdXRpbHMuZXh0ZW5kKG9yaWdpbmFsT3B0aW9ucyB8fCB7fSwgZGVmYXVsdHMpOwogICAgby5kYXRlID0gby5kYXRlIHx8IG5ldyBEYXRlKCk7CiAgICBpZiAoby5jb21wcmVzc2lvbiAhPT0gbnVsbCkgewogICAgICAgIG8uY29tcHJlc3Npb24gPSBvLmNvbXByZXNzaW9uLnRvVXBwZXJDYXNlKCk7CiAgICB9CgogICAgaWYgKHR5cGVvZiBvLnVuaXhQZXJtaXNzaW9ucyA9PT0gInN0cmluZyIpIHsKICAgICAgICBvLnVuaXhQZXJtaXNzaW9ucyA9IHBhcnNlSW50KG8udW5peFBlcm1pc3Npb25zLCA4KTsKICAgIH0KCiAgICAvLyBVTlhfSUZESVIgIDAwNDAwMDAgc2VlIHppcGluZm8uYwogICAgaWYgKG8udW5peFBlcm1pc3Npb25zICYmIChvLnVuaXhQZXJtaXNzaW9ucyAmIDB4NDAwMCkpIHsKICAgICAgICBvLmRpciA9IHRydWU7CiAgICB9CiAgICAvLyBCaXQgNCAgICBEaXJlY3RvcnkKICAgIGlmIChvLmRvc1Blcm1pc3Npb25zICYmIChvLmRvc1Blcm1pc3Npb25zICYgMHgwMDEwKSkgewogICAgICAgIG8uZGlyID0gdHJ1ZTsKICAgIH0KCiAgICBpZiAoby5kaXIpIHsKICAgICAgICBuYW1lID0gZm9yY2VUcmFpbGluZ1NsYXNoKG5hbWUpOwogICAgfQogICAgaWYgKG8uY3JlYXRlRm9sZGVycyAmJiAocGFyZW50ID0gcGFyZW50Rm9sZGVyKG5hbWUpKSkgewogICAgICAgIGZvbGRlckFkZC5jYWxsKHRoaXMsIHBhcmVudCwgdHJ1ZSk7CiAgICB9CgogICAgdmFyIGlzVW5pY29kZVN0cmluZyA9IGRhdGFUeXBlID09PSAic3RyaW5nIiAmJiBvLmJpbmFyeSA9PT0gZmFsc2UgJiYgby5iYXNlNjQgPT09IGZhbHNlOwogICAgaWYgKCFvcmlnaW5hbE9wdGlvbnMgfHwgdHlwZW9mIG9yaWdpbmFsT3B0aW9ucy5iaW5hcnkgPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgby5iaW5hcnkgPSAhaXNVbmljb2RlU3RyaW5nOwogICAgfQoKCiAgICB2YXIgaXNDb21wcmVzc2VkRW1wdHkgPSAoZGF0YSBpbnN0YW5jZW9mIENvbXByZXNzZWRPYmplY3QpICYmIGRhdGEudW5jb21wcmVzc2VkU2l6ZSA9PT0gMDsKCiAgICBpZiAoaXNDb21wcmVzc2VkRW1wdHkgfHwgby5kaXIgfHwgIWRhdGEgfHwgZGF0YS5sZW5ndGggPT09IDApIHsKICAgICAgICBvLmJhc2U2NCA9IGZhbHNlOwogICAgICAgIG8uYmluYXJ5ID0gdHJ1ZTsKICAgICAgICBkYXRhID0gIiI7CiAgICAgICAgby5jb21wcmVzc2lvbiA9ICJTVE9SRSI7CiAgICAgICAgZGF0YVR5cGUgPSAic3RyaW5nIjsKICAgIH0KCiAgICAvKgogICAgICogQ29udmVydCBjb250ZW50IHRvIGZpdC4KICAgICAqLwoKICAgIHZhciB6aXBPYmplY3RDb250ZW50ID0gbnVsbDsKICAgIGlmIChkYXRhIGluc3RhbmNlb2YgQ29tcHJlc3NlZE9iamVjdCB8fCBkYXRhIGluc3RhbmNlb2YgR2VuZXJpY1dvcmtlcikgewogICAgICAgIHppcE9iamVjdENvbnRlbnQgPSBkYXRhOwogICAgfSBlbHNlIGlmIChub2RlanNVdGlscy5pc05vZGUgJiYgbm9kZWpzVXRpbHMuaXNTdHJlYW0oZGF0YSkpIHsKICAgICAgICB6aXBPYmplY3RDb250ZW50ID0gbmV3IE5vZGVqc1N0cmVhbUlucHV0QWRhcHRlcihuYW1lLCBkYXRhKTsKICAgIH0gZWxzZSB7CiAgICAgICAgemlwT2JqZWN0Q29udGVudCA9IHV0aWxzLnByZXBhcmVDb250ZW50KG5hbWUsIGRhdGEsIG8uYmluYXJ5LCBvLm9wdGltaXplZEJpbmFyeVN0cmluZywgby5iYXNlNjQpOwogICAgfQoKICAgIHZhciBvYmplY3QgPSBuZXcgWmlwT2JqZWN0KG5hbWUsIHppcE9iamVjdENvbnRlbnQsIG8pOwogICAgdGhpcy5maWxlc1tuYW1lXSA9IG9iamVjdDsKICAgIC8qCiAgICBUT0RPOiB3ZSBjYW4ndCB0aHJvdyBhbiBleGNlcHRpb24gYmVjYXVzZSB3ZSBoYXZlIGFzeW5jIHByb21pc2VzCiAgICAod2UgY2FuIGhhdmUgYSBwcm9taXNlIG9mIGEgRGF0ZSgpIGZvciBleGFtcGxlKSBidXQgcmV0dXJuaW5nIGEKICAgIHByb21pc2UgaXMgdXNlbGVzcyBiZWNhdXNlIGZpbGUobmFtZSwgZGF0YSkgcmV0dXJucyB0aGUgSlNaaXAKICAgIG9iamVjdCBmb3IgY2hhaW5pbmcuIFNob3VsZCB3ZSBicmVhayB0aGF0IHRvIGFsbG93IHRoZSB1c2VyCiAgICB0byBjYXRjaCB0aGUgZXJyb3IgPwoKICAgIHJldHVybiBleHRlcm5hbC5Qcm9taXNlLnJlc29sdmUoemlwT2JqZWN0Q29udGVudCkKICAgIC50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gb2JqZWN0OwogICAgfSk7CiAgICAqLwp9OwoKLyoqCiAqIEZpbmQgdGhlIHBhcmVudCBmb2xkZXIgb2YgdGhlIHBhdGguCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIHRoZSBwYXRoIHRvIHVzZQogKiBAcmV0dXJuIHtzdHJpbmd9IHRoZSBwYXJlbnQgZm9sZGVyLCBvciAiIgogKi8KdmFyIHBhcmVudEZvbGRlciA9IGZ1bmN0aW9uIChwYXRoKSB7CiAgICBpZiAocGF0aC5zbGljZSgtMSkgPT09ICcvJykgewogICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cmluZygwLCBwYXRoLmxlbmd0aCAtIDEpOwogICAgfQogICAgdmFyIGxhc3RTbGFzaCA9IHBhdGgubGFzdEluZGV4T2YoJy8nKTsKICAgIHJldHVybiAobGFzdFNsYXNoID4gMCkgPyBwYXRoLnN1YnN0cmluZygwLCBsYXN0U2xhc2gpIDogIiI7Cn07CgovKioKICogUmV0dXJucyB0aGUgcGF0aCB3aXRoIGEgc2xhc2ggYXQgdGhlIGVuZC4KICogQHByaXZhdGUKICogQHBhcmFtIHtTdHJpbmd9IHBhdGggdGhlIHBhdGggdG8gY2hlY2suCiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIHBhdGggd2l0aCBhIHRyYWlsaW5nIHNsYXNoLgogKi8KdmFyIGZvcmNlVHJhaWxpbmdTbGFzaCA9IGZ1bmN0aW9uKHBhdGgpIHsKICAgIC8vIENoZWNrIHRoZSBuYW1lIGVuZHMgd2l0aCBhIC8KICAgIGlmIChwYXRoLnNsaWNlKC0xKSAhPT0gIi8iKSB7CiAgICAgICAgcGF0aCArPSAiLyI7IC8vIElFIGRvZXNuJ3QgbGlrZSBzdWJzdHIoLTEpCiAgICB9CiAgICByZXR1cm4gcGF0aDsKfTsKCi8qKgogKiBBZGQgYSAoc3ViKSBmb2xkZXIgaW4gdGhlIGN1cnJlbnQgZm9sZGVyLgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge3N0cmluZ30gbmFtZSB0aGUgZm9sZGVyJ3MgbmFtZQogKiBAcGFyYW0ge2Jvb2xlYW49fSBbY3JlYXRlRm9sZGVyc10gSWYgdHJ1ZSwgYXV0b21hdGljYWxseSBjcmVhdGUgc3ViCiAqICBmb2xkZXJzLiBEZWZhdWx0cyB0byBmYWxzZS4KICogQHJldHVybiB7T2JqZWN0fSB0aGUgbmV3IGZvbGRlci4KICovCnZhciBmb2xkZXJBZGQgPSBmdW5jdGlvbihuYW1lLCBjcmVhdGVGb2xkZXJzKSB7CiAgICBjcmVhdGVGb2xkZXJzID0gKHR5cGVvZiBjcmVhdGVGb2xkZXJzICE9PSAndW5kZWZpbmVkJykgPyBjcmVhdGVGb2xkZXJzIDogZGVmYXVsdHMuY3JlYXRlRm9sZGVyczsKCiAgICBuYW1lID0gZm9yY2VUcmFpbGluZ1NsYXNoKG5hbWUpOwoKICAgIC8vIERvZXMgdGhpcyBmb2xkZXIgYWxyZWFkeSBleGlzdD8KICAgIGlmICghdGhpcy5maWxlc1tuYW1lXSkgewogICAgICAgIGZpbGVBZGQuY2FsbCh0aGlzLCBuYW1lLCBudWxsLCB7CiAgICAgICAgICAgIGRpcjogdHJ1ZSwKICAgICAgICAgICAgY3JlYXRlRm9sZGVyczogY3JlYXRlRm9sZGVycwogICAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIHRoaXMuZmlsZXNbbmFtZV07Cn07CgovKioKKiBDcm9zcy13aW5kb3csIGNyb3NzLU5vZGUtY29udGV4dCByZWd1bGFyIGV4cHJlc3Npb24gZGV0ZWN0aW9uCiogQHBhcmFtICB7T2JqZWN0fSAgb2JqZWN0IEFueXRoaW5nCiogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiwKKiBmYWxzZSBvdGhlcndpc2UKKi8KZnVuY3Rpb24gaXNSZWdFeHAob2JqZWN0KSB7CiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCkgPT09ICJbb2JqZWN0IFJlZ0V4cF0iOwp9CgovLyByZXR1cm4gdGhlIGFjdHVhbCBwcm90b3R5cGUgb2YgSlNaaXAKdmFyIG91dCA9IHsKICAgIC8qKgogICAgICogQHNlZSBsb2FkQXN5bmMKICAgICAqLwogICAgbG9hZDogZnVuY3Rpb24oKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJUaGlzIG1ldGhvZCBoYXMgYmVlbiByZW1vdmVkIGluIEpTWmlwIDMuMCwgcGxlYXNlIGNoZWNrIHRoZSB1cGdyYWRlIGd1aWRlLiIpOwogICAgfSwKCgogICAgLyoqCiAgICAgKiBDYWxsIGEgY2FsbGJhY2sgZnVuY3Rpb24gZm9yIGVhY2ggZW50cnkgYXQgdGhpcyBmb2xkZXIgbGV2ZWwuCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiB0aGUgY2FsbGJhY2sgZnVuY3Rpb246CiAgICAgKiBmdW5jdGlvbiAocmVsYXRpdmVQYXRoLCBmaWxlKSB7Li4ufQogICAgICogSXQgdGFrZXMgMiBhcmd1bWVudHMgOiB0aGUgcmVsYXRpdmUgcGF0aCBhbmQgdGhlIGZpbGUuCiAgICAgKi8KICAgIGZvckVhY2g6IGZ1bmN0aW9uKGNiKSB7CiAgICAgICAgdmFyIGZpbGVuYW1lLCByZWxhdGl2ZVBhdGgsIGZpbGU7CiAgICAgICAgLyoganNoaW50IGlnbm9yZTpzdGFydCAqLwogICAgICAgIC8vIGlnbm9yZSB3YXJuaW5nIGFib3V0IHVud2FudGVkIHByb3BlcnRpZXMgYmVjYXVzZSB0aGlzLmZpbGVzIGlzIGEgbnVsbCBwcm90b3R5cGUgb2JqZWN0CiAgICAgICAgZm9yIChmaWxlbmFtZSBpbiB0aGlzLmZpbGVzKSB7CiAgICAgICAgICAgIGZpbGUgPSB0aGlzLmZpbGVzW2ZpbGVuYW1lXTsKICAgICAgICAgICAgcmVsYXRpdmVQYXRoID0gZmlsZW5hbWUuc2xpY2UodGhpcy5yb290Lmxlbmd0aCwgZmlsZW5hbWUubGVuZ3RoKTsKICAgICAgICAgICAgaWYgKHJlbGF0aXZlUGF0aCAmJiBmaWxlbmFtZS5zbGljZSgwLCB0aGlzLnJvb3QubGVuZ3RoKSA9PT0gdGhpcy5yb290KSB7IC8vIHRoZSBmaWxlIGlzIGluIHRoZSBjdXJyZW50IHJvb3QKICAgICAgICAgICAgICAgIGNiKHJlbGF0aXZlUGF0aCwgZmlsZSk7IC8vIFRPRE8gcmV2ZXJzZSB0aGUgcGFyYW1ldGVycyA/IG5lZWQgdG8gYmUgY2xlYW4gQU5EIGNvbnNpc3RlbnQgd2l0aCB0aGUgZmlsdGVyIHNlYXJjaCBmbi4uLgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qIGpzaGludCBpZ25vcmU6ZW5kICovCiAgICB9LAoKICAgIC8qKgogICAgICogRmlsdGVyIG5lc3RlZCBmaWxlcy9mb2xkZXJzIHdpdGggdGhlIHNwZWNpZmllZCBmdW5jdGlvbi4KICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHNlYXJjaCB0aGUgcHJlZGljYXRlIHRvIHVzZSA6CiAgICAgKiBmdW5jdGlvbiAocmVsYXRpdmVQYXRoLCBmaWxlKSB7Li4ufQogICAgICogSXQgdGFrZXMgMiBhcmd1bWVudHMgOiB0aGUgcmVsYXRpdmUgcGF0aCBhbmQgdGhlIGZpbGUuCiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQW4gYXJyYXkgb2YgbWF0Y2hpbmcgZWxlbWVudHMuCiAgICAgKi8KICAgIGZpbHRlcjogZnVuY3Rpb24oc2VhcmNoKSB7CiAgICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAocmVsYXRpdmVQYXRoLCBlbnRyeSkgewogICAgICAgICAgICBpZiAoc2VhcmNoKHJlbGF0aXZlUGF0aCwgZW50cnkpKSB7IC8vIHRoZSBmaWxlIG1hdGNoZXMgdGhlIGZ1bmN0aW9uCiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChlbnRyeSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCgogICAgLyoqCiAgICAgKiBBZGQgYSBmaWxlIHRvIHRoZSB6aXAgZmlsZSwgb3Igc2VhcmNoIGEgZmlsZS4KICAgICAqIEBwYXJhbSAgIHtzdHJpbmd8UmVnRXhwfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBmaWxlIHRvIGFkZCAoaWYgZGF0YSBpcyBkZWZpbmVkKSwKICAgICAqIHRoZSBuYW1lIG9mIHRoZSBmaWxlIHRvIGZpbmQgKGlmIG5vIGRhdGEpIG9yIGEgcmVnZXggdG8gbWF0Y2ggZmlsZXMuCiAgICAgKiBAcGFyYW0gICB7U3RyaW5nfEFycmF5QnVmZmVyfFVpbnQ4QXJyYXl8QnVmZmVyfSBkYXRhICBUaGUgZmlsZSBkYXRhLCBlaXRoZXIgcmF3IG9yIGJhc2U2NCBlbmNvZGVkCiAgICAgKiBAcGFyYW0gICB7T2JqZWN0fSBvICAgICBGaWxlIG9wdGlvbnMKICAgICAqIEByZXR1cm4gIHtKU1ppcHxPYmplY3R8QXJyYXl9IHRoaXMgSlNaaXAgb2JqZWN0ICh3aGVuIGFkZGluZyBhIGZpbGUpLAogICAgICogYSBmaWxlICh3aGVuIHNlYXJjaGluZyBieSBzdHJpbmcpIG9yIGFuIGFycmF5IG9mIGZpbGVzICh3aGVuIHNlYXJjaGluZyBieSByZWdleCkuCiAgICAgKi8KICAgIGZpbGU6IGZ1bmN0aW9uKG5hbWUsIGRhdGEsIG8pIHsKICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgICBpZiAoaXNSZWdFeHAobmFtZSkpIHsKICAgICAgICAgICAgICAgIHZhciByZWdleHAgPSBuYW1lOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKHJlbGF0aXZlUGF0aCwgZmlsZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhZmlsZS5kaXIgJiYgcmVnZXhwLnRlc3QocmVsYXRpdmVQYXRoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgeyAvLyB0ZXh0CiAgICAgICAgICAgICAgICB2YXIgb2JqID0gdGhpcy5maWxlc1t0aGlzLnJvb3QgKyBuYW1lXTsKICAgICAgICAgICAgICAgIGlmIChvYmogJiYgIW9iai5kaXIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsgLy8gbW9yZSB0aGFuIG9uZSBhcmd1bWVudCA6IHdlIGhhdmUgZGF0YSAhCiAgICAgICAgICAgIG5hbWUgPSB0aGlzLnJvb3QgKyBuYW1lOwogICAgICAgICAgICBmaWxlQWRkLmNhbGwodGhpcywgbmFtZSwgZGF0YSwgbyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzOwogICAgfSwKCiAgICAvKioKICAgICAqIEFkZCBhIGRpcmVjdG9yeSB0byB0aGUgemlwIGZpbGUsIG9yIHNlYXJjaC4KICAgICAqIEBwYXJhbSAgIHtTdHJpbmd8UmVnRXhwfSBhcmcgVGhlIG5hbWUgb2YgdGhlIGRpcmVjdG9yeSB0byBhZGQsIG9yIGEgcmVnZXggdG8gc2VhcmNoIGZvbGRlcnMuCiAgICAgKiBAcmV0dXJuICB7SlNaaXB9IGFuIG9iamVjdCB3aXRoIHRoZSBuZXcgZGlyZWN0b3J5IGFzIHRoZSByb290LCBvciBhbiBhcnJheSBjb250YWluaW5nIG1hdGNoaW5nIGZvbGRlcnMuCiAgICAgKi8KICAgIGZvbGRlcjogZnVuY3Rpb24oYXJnKSB7CiAgICAgICAgaWYgKCFhcmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQoKICAgICAgICBpZiAoaXNSZWdFeHAoYXJnKSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24ocmVsYXRpdmVQYXRoLCBmaWxlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZS5kaXIgJiYgYXJnLnRlc3QocmVsYXRpdmVQYXRoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvLyBlbHNlLCBuYW1lIGlzIGEgbmV3IGZvbGRlcgogICAgICAgIHZhciBuYW1lID0gdGhpcy5yb290ICsgYXJnOwogICAgICAgIHZhciBuZXdGb2xkZXIgPSBmb2xkZXJBZGQuY2FsbCh0aGlzLCBuYW1lKTsKCiAgICAgICAgLy8gQWxsb3cgY2hhaW5pbmcgYnkgcmV0dXJuaW5nIGEgbmV3IG9iamVjdCB3aXRoIHRoaXMgZm9sZGVyIGFzIHRoZSByb290CiAgICAgICAgdmFyIHJldCA9IHRoaXMuY2xvbmUoKTsKICAgICAgICByZXQucm9vdCA9IG5ld0ZvbGRlci5uYW1lOwogICAgICAgIHJldHVybiByZXQ7CiAgICB9LAoKICAgIC8qKgogICAgICogRGVsZXRlIGEgZmlsZSwgb3IgYSBkaXJlY3RvcnkgYW5kIGFsbCBzdWItZmlsZXMsIGZyb20gdGhlIHppcAogICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgdGhlIG5hbWUgb2YgdGhlIGZpbGUgdG8gZGVsZXRlCiAgICAgKiBAcmV0dXJuIHtKU1ppcH0gdGhpcyBKU1ppcCBvYmplY3QKICAgICAqLwogICAgcmVtb3ZlOiBmdW5jdGlvbihuYW1lKSB7CiAgICAgICAgbmFtZSA9IHRoaXMucm9vdCArIG5hbWU7CiAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzW25hbWVdOwogICAgICAgIGlmICghZmlsZSkgewogICAgICAgICAgICAvLyBMb29rIGZvciBhbnkgZm9sZGVycwogICAgICAgICAgICBpZiAobmFtZS5zbGljZSgtMSkgIT09ICIvIikgewogICAgICAgICAgICAgICAgbmFtZSArPSAiLyI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmlsZSA9IHRoaXMuZmlsZXNbbmFtZV07CiAgICAgICAgfQoKICAgICAgICBpZiAoZmlsZSAmJiAhZmlsZS5kaXIpIHsKICAgICAgICAgICAgLy8gZmlsZQogICAgICAgICAgICBkZWxldGUgdGhpcy5maWxlc1tuYW1lXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBtYXliZSBhIGZvbGRlciwgZGVsZXRlIHJlY3Vyc2l2ZWx5CiAgICAgICAgICAgIHZhciBraWRzID0gdGhpcy5maWx0ZXIoZnVuY3Rpb24ocmVsYXRpdmVQYXRoLCBmaWxlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZS5uYW1lLnNsaWNlKDAsIG5hbWUubGVuZ3RoKSA9PT0gbmFtZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2lkcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuZmlsZXNba2lkc1tpXS5uYW1lXTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAoKICAgIC8qKgogICAgICogR2VuZXJhdGUgdGhlIGNvbXBsZXRlIHppcCBmaWxlCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyB0aGUgb3B0aW9ucyB0byBnZW5lcmF0ZSB0aGUgemlwIGZpbGUgOgogICAgICogLSBjb21wcmVzc2lvbiwgIlNUT1JFIiBieSBkZWZhdWx0LgogICAgICogLSB0eXBlLCAiYmFzZTY0IiBieSBkZWZhdWx0LiBWYWx1ZXMgYXJlIDogc3RyaW5nLCBiYXNlNjQsIHVpbnQ4YXJyYXksIGFycmF5YnVmZmVyLCBibG9iLgogICAgICogQHJldHVybiB7U3RyaW5nfFVpbnQ4QXJyYXl8QXJyYXlCdWZmZXJ8QnVmZmVyfEJsb2J9IHRoZSB6aXAgZmlsZQogICAgICovCiAgICBnZW5lcmF0ZTogZnVuY3Rpb24ob3B0aW9ucykgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiVGhpcyBtZXRob2QgaGFzIGJlZW4gcmVtb3ZlZCBpbiBKU1ppcCAzLjAsIHBsZWFzZSBjaGVjayB0aGUgdXBncmFkZSBndWlkZS4iKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBHZW5lcmF0ZSB0aGUgY29tcGxldGUgemlwIGZpbGUgYXMgYW4gaW50ZXJuYWwgc3RyZWFtLgogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdGhlIG9wdGlvbnMgdG8gZ2VuZXJhdGUgdGhlIHppcCBmaWxlIDoKICAgICAqIC0gY29tcHJlc3Npb24sICJTVE9SRSIgYnkgZGVmYXVsdC4KICAgICAqIC0gdHlwZSwgImJhc2U2NCIgYnkgZGVmYXVsdC4gVmFsdWVzIGFyZSA6IHN0cmluZywgYmFzZTY0LCB1aW50OGFycmF5LCBhcnJheWJ1ZmZlciwgYmxvYi4KICAgICAqIEByZXR1cm4ge1N0cmVhbUhlbHBlcn0gdGhlIHN0cmVhbWVkIHppcCBmaWxlLgogICAgICovCiAgICBnZW5lcmF0ZUludGVybmFsU3RyZWFtOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICAgIHZhciB3b3JrZXIsIG9wdHMgPSB7fTsKICAgICAgdHJ5IHsKICAgICAgICAgIG9wdHMgPSB1dGlscy5leHRlbmQob3B0aW9ucyB8fCB7fSwgewogICAgICAgICAgICAgIHN0cmVhbUZpbGVzOiBmYWxzZSwKICAgICAgICAgICAgICBjb21wcmVzc2lvbjogIlNUT1JFIiwKICAgICAgICAgICAgICBjb21wcmVzc2lvbk9wdGlvbnMgOiBudWxsLAogICAgICAgICAgICAgIHR5cGU6ICIiLAogICAgICAgICAgICAgIHBsYXRmb3JtOiAiRE9TIiwKICAgICAgICAgICAgICBjb21tZW50OiBudWxsLAogICAgICAgICAgICAgIG1pbWVUeXBlOiAnYXBwbGljYXRpb24vemlwJywKICAgICAgICAgICAgICBlbmNvZGVGaWxlTmFtZTogdXRmOC51dGY4ZW5jb2RlCiAgICAgICAgICB9KTsKCiAgICAgICAgICBvcHRzLnR5cGUgPSBvcHRzLnR5cGUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgIG9wdHMuY29tcHJlc3Npb24gPSBvcHRzLmNvbXByZXNzaW9uLnRvVXBwZXJDYXNlKCk7CgogICAgICAgICAgLy8gImJpbmFyeXN0cmluZyIgaXMgcHJlZmVycmVkIGJ1dCB0aGUgaW50ZXJuYWxzIHVzZSAic3RyaW5nIi4KICAgICAgICAgIGlmKG9wdHMudHlwZSA9PT0gImJpbmFyeXN0cmluZyIpIHsKICAgICAgICAgICAgb3B0cy50eXBlID0gInN0cmluZyI7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCFvcHRzLnR5cGUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJObyBvdXRwdXQgdHlwZSBzcGVjaWZpZWQuIik7CiAgICAgICAgICB9CgogICAgICAgICAgdXRpbHMuY2hlY2tTdXBwb3J0KG9wdHMudHlwZSk7CgogICAgICAgICAgLy8gYWNjZXB0IG5vZGVqcyBgcHJvY2Vzcy5wbGF0Zm9ybWAKICAgICAgICAgIGlmKAogICAgICAgICAgICAgIG9wdHMucGxhdGZvcm0gPT09ICdkYXJ3aW4nIHx8CiAgICAgICAgICAgICAgb3B0cy5wbGF0Zm9ybSA9PT0gJ2ZyZWVic2QnIHx8CiAgICAgICAgICAgICAgb3B0cy5wbGF0Zm9ybSA9PT0gJ2xpbnV4JyB8fAogICAgICAgICAgICAgIG9wdHMucGxhdGZvcm0gPT09ICdzdW5vcycKICAgICAgICAgICkgewogICAgICAgICAgICAgIG9wdHMucGxhdGZvcm0gPSAiVU5JWCI7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAob3B0cy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJykgewogICAgICAgICAgICAgIG9wdHMucGxhdGZvcm0gPSAiRE9TIjsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgY29tbWVudCA9IG9wdHMuY29tbWVudCB8fCB0aGlzLmNvbW1lbnQgfHwgIiI7CiAgICAgICAgICB3b3JrZXIgPSBnZW5lcmF0ZS5nZW5lcmF0ZVdvcmtlcih0aGlzLCBvcHRzLCBjb21tZW50KTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHdvcmtlciA9IG5ldyBHZW5lcmljV29ya2VyKCJlcnJvciIpOwogICAgICAgIHdvcmtlci5lcnJvcihlKTsKICAgICAgfQogICAgICByZXR1cm4gbmV3IFN0cmVhbUhlbHBlcih3b3JrZXIsIG9wdHMudHlwZSB8fCAic3RyaW5nIiwgb3B0cy5taW1lVHlwZSk7CiAgICB9LAogICAgLyoqCiAgICAgKiBHZW5lcmF0ZSB0aGUgY29tcGxldGUgemlwIGZpbGUgYXN5bmNocm9ub3VzbHkuCiAgICAgKiBAc2VlIGdlbmVyYXRlSW50ZXJuYWxTdHJlYW0KICAgICAqLwogICAgZ2VuZXJhdGVBc3luYzogZnVuY3Rpb24ob3B0aW9ucywgb25VcGRhdGUpIHsKICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUludGVybmFsU3RyZWFtKG9wdGlvbnMpLmFjY3VtdWxhdGUob25VcGRhdGUpOwogICAgfSwKICAgIC8qKgogICAgICogR2VuZXJhdGUgdGhlIGNvbXBsZXRlIHppcCBmaWxlIGFzeW5jaHJvbm91c2x5LgogICAgICogQHNlZSBnZW5lcmF0ZUludGVybmFsU3RyZWFtCiAgICAgKi8KICAgIGdlbmVyYXRlTm9kZVN0cmVhbTogZnVuY3Rpb24ob3B0aW9ucywgb25VcGRhdGUpIHsKICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICAgICAgICBpZiAoIW9wdGlvbnMudHlwZSkgewogICAgICAgICAgICBvcHRpb25zLnR5cGUgPSAibm9kZWJ1ZmZlciI7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlSW50ZXJuYWxTdHJlYW0ob3B0aW9ucykudG9Ob2RlanNTdHJlYW0ob25VcGRhdGUpOwogICAgfQp9Owptb2R1bGUuZXhwb3J0cyA9IG91dDsKCn0seyIuL2NvbXByZXNzZWRPYmplY3QiOjIsIi4vZGVmYXVsdHMiOjUsIi4vZ2VuZXJhdGUiOjksIi4vbm9kZWpzL05vZGVqc1N0cmVhbUlucHV0QWRhcHRlciI6MTIsIi4vbm9kZWpzVXRpbHMiOjE0LCIuL3N0cmVhbS9HZW5lcmljV29ya2VyIjoyOCwiLi9zdHJlYW0vU3RyZWFtSGVscGVyIjoyOSwiLi91dGY4IjozMSwiLi91dGlscyI6MzIsIi4vemlwT2JqZWN0IjozNX1dLDE2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLyoKICogVGhpcyBmaWxlIGlzIHVzZWQgYnkgbW9kdWxlIGJ1bmRsZXJzIChicm93c2VyaWZ5L3dlYnBhY2svZXRjKSB3aGVuCiAqIGluY2x1ZGluZyBhIHN0cmVhbSBpbXBsZW1lbnRhdGlvbi4gV2UgdXNlICJyZWFkYWJsZS1zdHJlYW0iIHRvIGdldCBhCiAqIGNvbnNpc3RlbnQgYmVoYXZpb3IgYmV0d2VlbiBub2RlanMgdmVyc2lvbnMgYnV0IGJ1bmRsZXJzIG9mdGVuIGhhdmUgYSBzaGltCiAqIGZvciAic3RyZWFtIi4gVXNpbmcgdGhpcyBzaGltIGdyZWF0bHkgaW1wcm92ZSB0aGUgY29tcGF0aWJpbGl0eSBhbmQgZ3JlYXRseQogKiByZWR1Y2UgdGhlIGZpbmFsIHNpemUgb2YgdGhlIGJ1bmRsZSAob25seSBvbmUgc3RyZWFtIGltcGxlbWVudGF0aW9uLCBub3QKICogdHdvKS4KICovCm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgic3RyZWFtIik7Cgp9LHsic3RyZWFtIjp1bmRlZmluZWR9XSwxNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyIERhdGFSZWFkZXIgPSByZXF1aXJlKCcuL0RhdGFSZWFkZXInKTsKdmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTsKCmZ1bmN0aW9uIEFycmF5UmVhZGVyKGRhdGEpIHsKICAgIERhdGFSZWFkZXIuY2FsbCh0aGlzLCBkYXRhKTsKICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5kYXRhLmxlbmd0aDsgaSsrKSB7CiAgICBkYXRhW2ldID0gZGF0YVtpXSAmIDB4RkY7CiAgfQp9CnV0aWxzLmluaGVyaXRzKEFycmF5UmVhZGVyLCBEYXRhUmVhZGVyKTsKLyoqCiAqIEBzZWUgRGF0YVJlYWRlci5ieXRlQXQKICovCkFycmF5UmVhZGVyLnByb3RvdHlwZS5ieXRlQXQgPSBmdW5jdGlvbihpKSB7CiAgICByZXR1cm4gdGhpcy5kYXRhW3RoaXMuemVybyArIGldOwp9OwovKioKICogQHNlZSBEYXRhUmVhZGVyLmxhc3RJbmRleE9mU2lnbmF0dXJlCiAqLwpBcnJheVJlYWRlci5wcm90b3R5cGUubGFzdEluZGV4T2ZTaWduYXR1cmUgPSBmdW5jdGlvbihzaWcpIHsKICAgIHZhciBzaWcwID0gc2lnLmNoYXJDb2RlQXQoMCksCiAgICAgICAgc2lnMSA9IHNpZy5jaGFyQ29kZUF0KDEpLAogICAgICAgIHNpZzIgPSBzaWcuY2hhckNvZGVBdCgyKSwKICAgICAgICBzaWczID0gc2lnLmNoYXJDb2RlQXQoMyk7CiAgICBmb3IgKHZhciBpID0gdGhpcy5sZW5ndGggLSA0OyBpID49IDA7IC0taSkgewogICAgICAgIGlmICh0aGlzLmRhdGFbaV0gPT09IHNpZzAgJiYgdGhpcy5kYXRhW2kgKyAxXSA9PT0gc2lnMSAmJiB0aGlzLmRhdGFbaSArIDJdID09PSBzaWcyICYmIHRoaXMuZGF0YVtpICsgM10gPT09IHNpZzMpIHsKICAgICAgICAgICAgcmV0dXJuIGkgLSB0aGlzLnplcm87CiAgICAgICAgfQogICAgfQoKICAgIHJldHVybiAtMTsKfTsKLyoqCiAqIEBzZWUgRGF0YVJlYWRlci5yZWFkQW5kQ2hlY2tTaWduYXR1cmUKICovCkFycmF5UmVhZGVyLnByb3RvdHlwZS5yZWFkQW5kQ2hlY2tTaWduYXR1cmUgPSBmdW5jdGlvbiAoc2lnKSB7CiAgICB2YXIgc2lnMCA9IHNpZy5jaGFyQ29kZUF0KDApLAogICAgICAgIHNpZzEgPSBzaWcuY2hhckNvZGVBdCgxKSwKICAgICAgICBzaWcyID0gc2lnLmNoYXJDb2RlQXQoMiksCiAgICAgICAgc2lnMyA9IHNpZy5jaGFyQ29kZUF0KDMpLAogICAgICAgIGRhdGEgPSB0aGlzLnJlYWREYXRhKDQpOwogICAgcmV0dXJuIHNpZzAgPT09IGRhdGFbMF0gJiYgc2lnMSA9PT0gZGF0YVsxXSAmJiBzaWcyID09PSBkYXRhWzJdICYmIHNpZzMgPT09IGRhdGFbM107Cn07Ci8qKgogKiBAc2VlIERhdGFSZWFkZXIucmVhZERhdGEKICovCkFycmF5UmVhZGVyLnByb3RvdHlwZS5yZWFkRGF0YSA9IGZ1bmN0aW9uKHNpemUpIHsKICAgIHRoaXMuY2hlY2tPZmZzZXQoc2l6ZSk7CiAgICBpZihzaXplID09PSAwKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgfQogICAgdmFyIHJlc3VsdCA9IHRoaXMuZGF0YS5zbGljZSh0aGlzLnplcm8gKyB0aGlzLmluZGV4LCB0aGlzLnplcm8gKyB0aGlzLmluZGV4ICsgc2l6ZSk7CiAgICB0aGlzLmluZGV4ICs9IHNpemU7CiAgICByZXR1cm4gcmVzdWx0Owp9Owptb2R1bGUuZXhwb3J0cyA9IEFycmF5UmVhZGVyOwoKfSx7Ii4uL3V0aWxzIjozMiwiLi9EYXRhUmVhZGVyIjoxOH1dLDE4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwp2YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpOwoKZnVuY3Rpb24gRGF0YVJlYWRlcihkYXRhKSB7CiAgICB0aGlzLmRhdGEgPSBkYXRhOyAvLyB0eXBlIDogc2VlIGltcGxlbWVudGF0aW9uCiAgICB0aGlzLmxlbmd0aCA9IGRhdGEubGVuZ3RoOwogICAgdGhpcy5pbmRleCA9IDA7CiAgICB0aGlzLnplcm8gPSAwOwp9CkRhdGFSZWFkZXIucHJvdG90eXBlID0gewogICAgLyoqCiAgICAgKiBDaGVjayB0aGF0IHRoZSBvZmZzZXQgd2lsbCBub3QgZ28gdG9vIGZhci4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvZmZzZXQgdGhlIGFkZGl0aW9uYWwgb2Zmc2V0IHRvIGNoZWNrLgogICAgICogQHRocm93cyB7RXJyb3J9IGFuIEVycm9yIGlmIHRoZSBvZmZzZXQgaXMgb3V0IG9mIGJvdW5kcy4KICAgICAqLwogICAgY2hlY2tPZmZzZXQ6IGZ1bmN0aW9uKG9mZnNldCkgewogICAgICAgIHRoaXMuY2hlY2tJbmRleCh0aGlzLmluZGV4ICsgb2Zmc2V0KTsKICAgIH0sCiAgICAvKioKICAgICAqIENoZWNrIHRoYXQgdGhlIHNwZWNpZmllZCBpbmRleCB3aWxsIG5vdCBiZSB0b28gZmFyLgogICAgICogQHBhcmFtIHtzdHJpbmd9IG5ld0luZGV4IHRoZSBpbmRleCB0byBjaGVjay4KICAgICAqIEB0aHJvd3Mge0Vycm9yfSBhbiBFcnJvciBpZiB0aGUgaW5kZXggaXMgb3V0IG9mIGJvdW5kcy4KICAgICAqLwogICAgY2hlY2tJbmRleDogZnVuY3Rpb24obmV3SW5kZXgpIHsKICAgICAgICBpZiAodGhpcy5sZW5ndGggPCB0aGlzLnplcm8gKyBuZXdJbmRleCB8fCBuZXdJbmRleCA8IDApIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJFbmQgb2YgZGF0YSByZWFjaGVkIChkYXRhIGxlbmd0aCA9ICIgKyB0aGlzLmxlbmd0aCArICIsIGFza2VkIGluZGV4ID0gIiArIChuZXdJbmRleCkgKyAiKS4gQ29ycnVwdGVkIHppcCA/Iik7CiAgICAgICAgfQogICAgfSwKICAgIC8qKgogICAgICogQ2hhbmdlIHRoZSBpbmRleC4KICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuZXdJbmRleCBUaGUgbmV3IGluZGV4LgogICAgICogQHRocm93cyB7RXJyb3J9IGlmIHRoZSBuZXcgaW5kZXggaXMgb3V0IG9mIHRoZSBkYXRhLgogICAgICovCiAgICBzZXRJbmRleDogZnVuY3Rpb24obmV3SW5kZXgpIHsKICAgICAgICB0aGlzLmNoZWNrSW5kZXgobmV3SW5kZXgpOwogICAgICAgIHRoaXMuaW5kZXggPSBuZXdJbmRleDsKICAgIH0sCiAgICAvKioKICAgICAqIFNraXAgdGhlIG5leHQgbiBieXRlcy4KICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuIHRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gc2tpcC4KICAgICAqIEB0aHJvd3Mge0Vycm9yfSBpZiB0aGUgbmV3IGluZGV4IGlzIG91dCBvZiB0aGUgZGF0YS4KICAgICAqLwogICAgc2tpcDogZnVuY3Rpb24obikgewogICAgICAgIHRoaXMuc2V0SW5kZXgodGhpcy5pbmRleCArIG4pOwogICAgfSwKICAgIC8qKgogICAgICogR2V0IHRoZSBieXRlIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguCiAgICAgKiBAcGFyYW0ge251bWJlcn0gaSB0aGUgaW5kZXggdG8gdXNlLgogICAgICogQHJldHVybiB7bnVtYmVyfSBhIGJ5dGUuCiAgICAgKi8KICAgIGJ5dGVBdDogZnVuY3Rpb24oaSkgewogICAgICAgIC8vIHNlZSBpbXBsZW1lbnRhdGlvbnMKICAgIH0sCiAgICAvKioKICAgICAqIEdldCB0aGUgbmV4dCBudW1iZXIgd2l0aCBhIGdpdmVuIGJ5dGUgc2l6ZS4KICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzaXplIHRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gcmVhZC4KICAgICAqIEByZXR1cm4ge251bWJlcn0gdGhlIGNvcnJlc3BvbmRpbmcgbnVtYmVyLgogICAgICovCiAgICByZWFkSW50OiBmdW5jdGlvbihzaXplKSB7CiAgICAgICAgdmFyIHJlc3VsdCA9IDAsCiAgICAgICAgICAgIGk7CiAgICAgICAgdGhpcy5jaGVja09mZnNldChzaXplKTsKICAgICAgICBmb3IgKGkgPSB0aGlzLmluZGV4ICsgc2l6ZSAtIDE7IGkgPj0gdGhpcy5pbmRleDsgaS0tKSB7CiAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgKyB0aGlzLmJ5dGVBdChpKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5pbmRleCArPSBzaXplOwogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAogICAgLyoqCiAgICAgKiBHZXQgdGhlIG5leHQgc3RyaW5nIHdpdGggYSBnaXZlbiBieXRlIHNpemUuCiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZSB0aGUgbnVtYmVyIG9mIGJ5dGVzIHRvIHJlYWQuCiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IHRoZSBjb3JyZXNwb25kaW5nIHN0cmluZy4KICAgICAqLwogICAgcmVhZFN0cmluZzogZnVuY3Rpb24oc2l6ZSkgewogICAgICAgIHJldHVybiB1dGlscy50cmFuc2Zvcm1Ubygic3RyaW5nIiwgdGhpcy5yZWFkRGF0YShzaXplKSk7CiAgICB9LAogICAgLyoqCiAgICAgKiBHZXQgcmF3IGRhdGEgd2l0aG91dCBjb252ZXJzaW9uLCA8c2l6ZT4gYnl0ZXMuCiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZSB0aGUgbnVtYmVyIG9mIGJ5dGVzIHRvIHJlYWQuCiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHRoZSByYXcgZGF0YSwgaW1wbGVtZW50YXRpb24gc3BlY2lmaWMuCiAgICAgKi8KICAgIHJlYWREYXRhOiBmdW5jdGlvbihzaXplKSB7CiAgICAgICAgLy8gc2VlIGltcGxlbWVudGF0aW9ucwogICAgfSwKICAgIC8qKgogICAgICogRmluZCB0aGUgbGFzdCBvY2N1cnJlbmNlIG9mIGEgemlwIHNpZ25hdHVyZSAoNCBieXRlcykuCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2lnIHRoZSBzaWduYXR1cmUgdG8gZmluZC4KICAgICAqIEByZXR1cm4ge251bWJlcn0gdGhlIGluZGV4IG9mIHRoZSBsYXN0IG9jY3VycmVuY2UsIC0xIGlmIG5vdCBmb3VuZC4KICAgICAqLwogICAgbGFzdEluZGV4T2ZTaWduYXR1cmU6IGZ1bmN0aW9uKHNpZykgewogICAgICAgIC8vIHNlZSBpbXBsZW1lbnRhdGlvbnMKICAgIH0sCiAgICAvKioKICAgICAqIFJlYWQgdGhlIHNpZ25hdHVyZSAoNCBieXRlcykgYXQgdGhlIGN1cnJlbnQgcG9zaXRpb24gYW5kIGNvbXBhcmUgaXQgd2l0aCBzaWcuCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2lnIHRoZSBleHBlY3RlZCBzaWduYXR1cmUKICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgdGhlIHNpZ25hdHVyZSBtYXRjaGVzLCBmYWxzZSBvdGhlcndpc2UuCiAgICAgKi8KICAgIHJlYWRBbmRDaGVja1NpZ25hdHVyZTogZnVuY3Rpb24oc2lnKSB7CiAgICAgICAgLy8gc2VlIGltcGxlbWVudGF0aW9ucwogICAgfSwKICAgIC8qKgogICAgICogR2V0IHRoZSBuZXh0IGRhdGUuCiAgICAgKiBAcmV0dXJuIHtEYXRlfSB0aGUgZGF0ZS4KICAgICAqLwogICAgcmVhZERhdGU6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBkb3N0aW1lID0gdGhpcy5yZWFkSW50KDQpOwogICAgICAgIHJldHVybiBuZXcgRGF0ZShEYXRlLlVUQygKICAgICAgICAoKGRvc3RpbWUgPj4gMjUpICYgMHg3ZikgKyAxOTgwLCAvLyB5ZWFyCiAgICAgICAgKChkb3N0aW1lID4+IDIxKSAmIDB4MGYpIC0gMSwgLy8gbW9udGgKICAgICAgICAoZG9zdGltZSA+PiAxNikgJiAweDFmLCAvLyBkYXkKICAgICAgICAoZG9zdGltZSA+PiAxMSkgJiAweDFmLCAvLyBob3VyCiAgICAgICAgKGRvc3RpbWUgPj4gNSkgJiAweDNmLCAvLyBtaW51dGUKICAgICAgICAoZG9zdGltZSAmIDB4MWYpIDw8IDEpKTsgLy8gc2Vjb25kCiAgICB9Cn07Cm1vZHVsZS5leHBvcnRzID0gRGF0YVJlYWRlcjsKCn0seyIuLi91dGlscyI6MzJ9XSwxOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyIFVpbnQ4QXJyYXlSZWFkZXIgPSByZXF1aXJlKCcuL1VpbnQ4QXJyYXlSZWFkZXInKTsKdmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTsKCmZ1bmN0aW9uIE5vZGVCdWZmZXJSZWFkZXIoZGF0YSkgewogICAgVWludDhBcnJheVJlYWRlci5jYWxsKHRoaXMsIGRhdGEpOwp9CnV0aWxzLmluaGVyaXRzKE5vZGVCdWZmZXJSZWFkZXIsIFVpbnQ4QXJyYXlSZWFkZXIpOwoKLyoqCiAqIEBzZWUgRGF0YVJlYWRlci5yZWFkRGF0YQogKi8KTm9kZUJ1ZmZlclJlYWRlci5wcm90b3R5cGUucmVhZERhdGEgPSBmdW5jdGlvbihzaXplKSB7CiAgICB0aGlzLmNoZWNrT2Zmc2V0KHNpemUpOwogICAgdmFyIHJlc3VsdCA9IHRoaXMuZGF0YS5zbGljZSh0aGlzLnplcm8gKyB0aGlzLmluZGV4LCB0aGlzLnplcm8gKyB0aGlzLmluZGV4ICsgc2l6ZSk7CiAgICB0aGlzLmluZGV4ICs9IHNpemU7CiAgICByZXR1cm4gcmVzdWx0Owp9Owptb2R1bGUuZXhwb3J0cyA9IE5vZGVCdWZmZXJSZWFkZXI7Cgp9LHsiLi4vdXRpbHMiOjMyLCIuL1VpbnQ4QXJyYXlSZWFkZXIiOjIxfV0sMjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CnZhciBEYXRhUmVhZGVyID0gcmVxdWlyZSgnLi9EYXRhUmVhZGVyJyk7CnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7CgpmdW5jdGlvbiBTdHJpbmdSZWFkZXIoZGF0YSkgewogICAgRGF0YVJlYWRlci5jYWxsKHRoaXMsIGRhdGEpOwp9CnV0aWxzLmluaGVyaXRzKFN0cmluZ1JlYWRlciwgRGF0YVJlYWRlcik7Ci8qKgogKiBAc2VlIERhdGFSZWFkZXIuYnl0ZUF0CiAqLwpTdHJpbmdSZWFkZXIucHJvdG90eXBlLmJ5dGVBdCA9IGZ1bmN0aW9uKGkpIHsKICAgIHJldHVybiB0aGlzLmRhdGEuY2hhckNvZGVBdCh0aGlzLnplcm8gKyBpKTsKfTsKLyoqCiAqIEBzZWUgRGF0YVJlYWRlci5sYXN0SW5kZXhPZlNpZ25hdHVyZQogKi8KU3RyaW5nUmVhZGVyLnByb3RvdHlwZS5sYXN0SW5kZXhPZlNpZ25hdHVyZSA9IGZ1bmN0aW9uKHNpZykgewogICAgcmV0dXJuIHRoaXMuZGF0YS5sYXN0SW5kZXhPZihzaWcpIC0gdGhpcy56ZXJvOwp9OwovKioKICogQHNlZSBEYXRhUmVhZGVyLnJlYWRBbmRDaGVja1NpZ25hdHVyZQogKi8KU3RyaW5nUmVhZGVyLnByb3RvdHlwZS5yZWFkQW5kQ2hlY2tTaWduYXR1cmUgPSBmdW5jdGlvbiAoc2lnKSB7CiAgICB2YXIgZGF0YSA9IHRoaXMucmVhZERhdGEoNCk7CiAgICByZXR1cm4gc2lnID09PSBkYXRhOwp9OwovKioKICogQHNlZSBEYXRhUmVhZGVyLnJlYWREYXRhCiAqLwpTdHJpbmdSZWFkZXIucHJvdG90eXBlLnJlYWREYXRhID0gZnVuY3Rpb24oc2l6ZSkgewogICAgdGhpcy5jaGVja09mZnNldChzaXplKTsKICAgIC8vIHRoaXMgd2lsbCB3b3JrIGJlY2F1c2UgdGhlIGNvbnN0cnVjdG9yIGFwcGxpZWQgdGhlICImIDB4ZmYiIG1hc2suCiAgICB2YXIgcmVzdWx0ID0gdGhpcy5kYXRhLnNsaWNlKHRoaXMuemVybyArIHRoaXMuaW5kZXgsIHRoaXMuemVybyArIHRoaXMuaW5kZXggKyBzaXplKTsKICAgIHRoaXMuaW5kZXggKz0gc2l6ZTsKICAgIHJldHVybiByZXN1bHQ7Cn07Cm1vZHVsZS5leHBvcnRzID0gU3RyaW5nUmVhZGVyOwoKfSx7Ii4uL3V0aWxzIjozMiwiLi9EYXRhUmVhZGVyIjoxOH1dLDIxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwp2YXIgQXJyYXlSZWFkZXIgPSByZXF1aXJlKCcuL0FycmF5UmVhZGVyJyk7CnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7CgpmdW5jdGlvbiBVaW50OEFycmF5UmVhZGVyKGRhdGEpIHsKICAgIEFycmF5UmVhZGVyLmNhbGwodGhpcywgZGF0YSk7Cn0KdXRpbHMuaW5oZXJpdHMoVWludDhBcnJheVJlYWRlciwgQXJyYXlSZWFkZXIpOwovKioKICogQHNlZSBEYXRhUmVhZGVyLnJlYWREYXRhCiAqLwpVaW50OEFycmF5UmVhZGVyLnByb3RvdHlwZS5yZWFkRGF0YSA9IGZ1bmN0aW9uKHNpemUpIHsKICAgIHRoaXMuY2hlY2tPZmZzZXQoc2l6ZSk7CiAgICBpZihzaXplID09PSAwKSB7CiAgICAgICAgLy8gaW4gSUUxMCwgd2hlbiB1c2luZyBzdWJhcnJheShpZHgsIGlkeCksIHdlIGdldCB0aGUgYXJyYXkgWzB4MDBdIGluc3RlYWQgb2YgW10uCiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KDApOwogICAgfQogICAgdmFyIHJlc3VsdCA9IHRoaXMuZGF0YS5zdWJhcnJheSh0aGlzLnplcm8gKyB0aGlzLmluZGV4LCB0aGlzLnplcm8gKyB0aGlzLmluZGV4ICsgc2l6ZSk7CiAgICB0aGlzLmluZGV4ICs9IHNpemU7CiAgICByZXR1cm4gcmVzdWx0Owp9Owptb2R1bGUuZXhwb3J0cyA9IFVpbnQ4QXJyYXlSZWFkZXI7Cgp9LHsiLi4vdXRpbHMiOjMyLCIuL0FycmF5UmVhZGVyIjoxN31dLDIyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTsKdmFyIHN1cHBvcnQgPSByZXF1aXJlKCcuLi9zdXBwb3J0Jyk7CnZhciBBcnJheVJlYWRlciA9IHJlcXVpcmUoJy4vQXJyYXlSZWFkZXInKTsKdmFyIFN0cmluZ1JlYWRlciA9IHJlcXVpcmUoJy4vU3RyaW5nUmVhZGVyJyk7CnZhciBOb2RlQnVmZmVyUmVhZGVyID0gcmVxdWlyZSgnLi9Ob2RlQnVmZmVyUmVhZGVyJyk7CnZhciBVaW50OEFycmF5UmVhZGVyID0gcmVxdWlyZSgnLi9VaW50OEFycmF5UmVhZGVyJyk7CgovKioKICogQ3JlYXRlIGEgcmVhZGVyIGFkYXB0ZWQgdG8gdGhlIGRhdGEuCiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5QnVmZmVyfFVpbnQ4QXJyYXl8QnVmZmVyfSBkYXRhIHRoZSBkYXRhIHRvIHJlYWQuCiAqIEByZXR1cm4ge0RhdGFSZWFkZXJ9IHRoZSBkYXRhIHJlYWRlci4KICovCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRhdGEpIHsKICAgIHZhciB0eXBlID0gdXRpbHMuZ2V0VHlwZU9mKGRhdGEpOwogICAgdXRpbHMuY2hlY2tTdXBwb3J0KHR5cGUpOwogICAgaWYgKHR5cGUgPT09ICJzdHJpbmciICYmICFzdXBwb3J0LnVpbnQ4YXJyYXkpIHsKICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1JlYWRlcihkYXRhKTsKICAgIH0KICAgIGlmICh0eXBlID09PSAibm9kZWJ1ZmZlciIpIHsKICAgICAgICByZXR1cm4gbmV3IE5vZGVCdWZmZXJSZWFkZXIoZGF0YSk7CiAgICB9CiAgICBpZiAoc3VwcG9ydC51aW50OGFycmF5KSB7CiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5UmVhZGVyKHV0aWxzLnRyYW5zZm9ybVRvKCJ1aW50OGFycmF5IiwgZGF0YSkpOwogICAgfQogICAgcmV0dXJuIG5ldyBBcnJheVJlYWRlcih1dGlscy50cmFuc2Zvcm1UbygiYXJyYXkiLCBkYXRhKSk7Cn07Cgp9LHsiLi4vc3VwcG9ydCI6MzAsIi4uL3V0aWxzIjozMiwiLi9BcnJheVJlYWRlciI6MTcsIi4vTm9kZUJ1ZmZlclJlYWRlciI6MTksIi4vU3RyaW5nUmVhZGVyIjoyMCwiLi9VaW50OEFycmF5UmVhZGVyIjoyMX1dLDIzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwpleHBvcnRzLkxPQ0FMX0ZJTEVfSEVBREVSID0gIlBLXHgwM1x4MDQiOwpleHBvcnRzLkNFTlRSQUxfRklMRV9IRUFERVIgPSAiUEtceDAxXHgwMiI7CmV4cG9ydHMuQ0VOVFJBTF9ESVJFQ1RPUllfRU5EID0gIlBLXHgwNVx4MDYiOwpleHBvcnRzLlpJUDY0X0NFTlRSQUxfRElSRUNUT1JZX0xPQ0FUT1IgPSAiUEtceDA2XHgwNyI7CmV4cG9ydHMuWklQNjRfQ0VOVFJBTF9ESVJFQ1RPUllfRU5EID0gIlBLXHgwNlx4MDYiOwpleHBvcnRzLkRBVEFfREVTQ1JJUFRPUiA9ICJQS1x4MDdceDA4IjsKCn0se31dLDI0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIEdlbmVyaWNXb3JrZXIgPSByZXF1aXJlKCcuL0dlbmVyaWNXb3JrZXInKTsKdmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTsKCi8qKgogKiBBIHdvcmtlciB3aGljaCBjb252ZXJ0IGNodW5rcyB0byBhIHNwZWNpZmllZCB0eXBlLgogKiBAY29uc3RydWN0b3IKICogQHBhcmFtIHtTdHJpbmd9IGRlc3RUeXBlIHRoZSBkZXN0aW5hdGlvbiB0eXBlLgogKi8KZnVuY3Rpb24gQ29udmVydFdvcmtlcihkZXN0VHlwZSkgewogICAgR2VuZXJpY1dvcmtlci5jYWxsKHRoaXMsICJDb252ZXJ0V29ya2VyIHRvICIgKyBkZXN0VHlwZSk7CiAgICB0aGlzLmRlc3RUeXBlID0gZGVzdFR5cGU7Cn0KdXRpbHMuaW5oZXJpdHMoQ29udmVydFdvcmtlciwgR2VuZXJpY1dvcmtlcik7CgovKioKICogQHNlZSBHZW5lcmljV29ya2VyLnByb2Nlc3NDaHVuawogKi8KQ29udmVydFdvcmtlci5wcm90b3R5cGUucHJvY2Vzc0NodW5rID0gZnVuY3Rpb24gKGNodW5rKSB7CiAgICB0aGlzLnB1c2goewogICAgICAgIGRhdGEgOiB1dGlscy50cmFuc2Zvcm1Ubyh0aGlzLmRlc3RUeXBlLCBjaHVuay5kYXRhKSwKICAgICAgICBtZXRhIDogY2h1bmsubWV0YQogICAgfSk7Cn07Cm1vZHVsZS5leHBvcnRzID0gQ29udmVydFdvcmtlcjsKCn0seyIuLi91dGlscyI6MzIsIi4vR2VuZXJpY1dvcmtlciI6Mjh9XSwyNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBHZW5lcmljV29ya2VyID0gcmVxdWlyZSgnLi9HZW5lcmljV29ya2VyJyk7CnZhciBjcmMzMiA9IHJlcXVpcmUoJy4uL2NyYzMyJyk7CnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7CgovKioKICogQSB3b3JrZXIgd2hpY2ggY2FsY3VsYXRlIHRoZSBjcmMzMiBvZiB0aGUgZGF0YSBmbG93aW5nIHRocm91Z2guCiAqIEBjb25zdHJ1Y3RvcgogKi8KZnVuY3Rpb24gQ3JjMzJQcm9iZSgpIHsKICAgIEdlbmVyaWNXb3JrZXIuY2FsbCh0aGlzLCAiQ3JjMzJQcm9iZSIpOwogICAgdGhpcy53aXRoU3RyZWFtSW5mbygiY3JjMzIiLCAwKTsKfQp1dGlscy5pbmhlcml0cyhDcmMzMlByb2JlLCBHZW5lcmljV29ya2VyKTsKCi8qKgogKiBAc2VlIEdlbmVyaWNXb3JrZXIucHJvY2Vzc0NodW5rCiAqLwpDcmMzMlByb2JlLnByb3RvdHlwZS5wcm9jZXNzQ2h1bmsgPSBmdW5jdGlvbiAoY2h1bmspIHsKICAgIHRoaXMuc3RyZWFtSW5mby5jcmMzMiA9IGNyYzMyKGNodW5rLmRhdGEsIHRoaXMuc3RyZWFtSW5mby5jcmMzMiB8fCAwKTsKICAgIHRoaXMucHVzaChjaHVuayk7Cn07Cm1vZHVsZS5leHBvcnRzID0gQ3JjMzJQcm9iZTsKCn0seyIuLi9jcmMzMiI6NCwiLi4vdXRpbHMiOjMyLCIuL0dlbmVyaWNXb3JrZXIiOjI4fV0sMjY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpOwp2YXIgR2VuZXJpY1dvcmtlciA9IHJlcXVpcmUoJy4vR2VuZXJpY1dvcmtlcicpOwoKLyoqCiAqIEEgd29ya2VyIHdoaWNoIGNhbGN1bGF0ZSB0aGUgdG90YWwgbGVuZ3RoIG9mIHRoZSBkYXRhIGZsb3dpbmcgdGhyb3VnaC4KICogQGNvbnN0cnVjdG9yCiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wTmFtZSB0aGUgbmFtZSB1c2VkIHRvIGV4cG9zZSB0aGUgbGVuZ3RoCiAqLwpmdW5jdGlvbiBEYXRhTGVuZ3RoUHJvYmUocHJvcE5hbWUpIHsKICAgIEdlbmVyaWNXb3JrZXIuY2FsbCh0aGlzLCAiRGF0YUxlbmd0aFByb2JlIGZvciAiICsgcHJvcE5hbWUpOwogICAgdGhpcy5wcm9wTmFtZSA9IHByb3BOYW1lOwogICAgdGhpcy53aXRoU3RyZWFtSW5mbyhwcm9wTmFtZSwgMCk7Cn0KdXRpbHMuaW5oZXJpdHMoRGF0YUxlbmd0aFByb2JlLCBHZW5lcmljV29ya2VyKTsKCi8qKgogKiBAc2VlIEdlbmVyaWNXb3JrZXIucHJvY2Vzc0NodW5rCiAqLwpEYXRhTGVuZ3RoUHJvYmUucHJvdG90eXBlLnByb2Nlc3NDaHVuayA9IGZ1bmN0aW9uIChjaHVuaykgewogICAgaWYoY2h1bmspIHsKICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5zdHJlYW1JbmZvW3RoaXMucHJvcE5hbWVdIHx8IDA7CiAgICAgICAgdGhpcy5zdHJlYW1JbmZvW3RoaXMucHJvcE5hbWVdID0gbGVuZ3RoICsgY2h1bmsuZGF0YS5sZW5ndGg7CiAgICB9CiAgICBHZW5lcmljV29ya2VyLnByb3RvdHlwZS5wcm9jZXNzQ2h1bmsuY2FsbCh0aGlzLCBjaHVuayk7Cn07Cm1vZHVsZS5leHBvcnRzID0gRGF0YUxlbmd0aFByb2JlOwoKCn0seyIuLi91dGlscyI6MzIsIi4vR2VuZXJpY1dvcmtlciI6Mjh9XSwyNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7CnZhciBHZW5lcmljV29ya2VyID0gcmVxdWlyZSgnLi9HZW5lcmljV29ya2VyJyk7CgovLyB0aGUgc2l6ZSBvZiB0aGUgZ2VuZXJhdGVkIGNodW5rcwovLyBUT0RPIGV4cG9zZSB0aGlzIGFzIGEgcHVibGljIHZhcmlhYmxlCnZhciBERUZBVUxUX0JMT0NLX1NJWkUgPSAxNiAqIDEwMjQ7CgovKioKICogQSB3b3JrZXIgdGhhdCByZWFkcyBhIGNvbnRlbnQgYW5kIGVtaXRzIGNodW5rcy4KICogQGNvbnN0cnVjdG9yCiAqIEBwYXJhbSB7UHJvbWlzZX0gZGF0YVAgdGhlIHByb21pc2Ugb2YgdGhlIGRhdGEgdG8gc3BsaXQKICovCmZ1bmN0aW9uIERhdGFXb3JrZXIoZGF0YVApIHsKICAgIEdlbmVyaWNXb3JrZXIuY2FsbCh0aGlzLCAiRGF0YVdvcmtlciIpOwogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdGhpcy5kYXRhSXNSZWFkeSA9IGZhbHNlOwogICAgdGhpcy5pbmRleCA9IDA7CiAgICB0aGlzLm1heCA9IDA7CiAgICB0aGlzLmRhdGEgPSBudWxsOwogICAgdGhpcy50eXBlID0gIiI7CgogICAgdGhpcy5fdGlja1NjaGVkdWxlZCA9IGZhbHNlOwoKICAgIGRhdGFQLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBzZWxmLmRhdGFJc1JlYWR5ID0gdHJ1ZTsKICAgICAgICBzZWxmLmRhdGEgPSBkYXRhOwogICAgICAgIHNlbGYubWF4ID0gZGF0YSAmJiBkYXRhLmxlbmd0aCB8fCAwOwogICAgICAgIHNlbGYudHlwZSA9IHV0aWxzLmdldFR5cGVPZihkYXRhKTsKICAgICAgICBpZighc2VsZi5pc1BhdXNlZCkgewogICAgICAgICAgICBzZWxmLl90aWNrQW5kUmVwZWF0KCk7CiAgICAgICAgfQogICAgfSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICBzZWxmLmVycm9yKGUpOwogICAgfSk7Cn0KCnV0aWxzLmluaGVyaXRzKERhdGFXb3JrZXIsIEdlbmVyaWNXb3JrZXIpOwoKLyoqCiAqIEBzZWUgR2VuZXJpY1dvcmtlci5jbGVhblVwCiAqLwpEYXRhV29ya2VyLnByb3RvdHlwZS5jbGVhblVwID0gZnVuY3Rpb24gKCkgewogICAgR2VuZXJpY1dvcmtlci5wcm90b3R5cGUuY2xlYW5VcC5jYWxsKHRoaXMpOwogICAgdGhpcy5kYXRhID0gbnVsbDsKfTsKCi8qKgogKiBAc2VlIEdlbmVyaWNXb3JrZXIucmVzdW1lCiAqLwpEYXRhV29ya2VyLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7CiAgICBpZighR2VuZXJpY1dvcmtlci5wcm90b3R5cGUucmVzdW1lLmNhbGwodGhpcykpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgaWYgKCF0aGlzLl90aWNrU2NoZWR1bGVkICYmIHRoaXMuZGF0YUlzUmVhZHkpIHsKICAgICAgICB0aGlzLl90aWNrU2NoZWR1bGVkID0gdHJ1ZTsKICAgICAgICB1dGlscy5kZWxheSh0aGlzLl90aWNrQW5kUmVwZWF0LCBbXSwgdGhpcyk7CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKfTsKCi8qKgogKiBUcmlnZ2VyIGEgdGljayBhIHNjaGVkdWxlIGFuIG90aGVyIGNhbGwgdG8gdGhpcyBmdW5jdGlvbi4KICovCkRhdGFXb3JrZXIucHJvdG90eXBlLl90aWNrQW5kUmVwZWF0ID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLl90aWNrU2NoZWR1bGVkID0gZmFsc2U7CiAgICBpZih0aGlzLmlzUGF1c2VkIHx8IHRoaXMuaXNGaW5pc2hlZCkgewogICAgICAgIHJldHVybjsKICAgIH0KICAgIHRoaXMuX3RpY2soKTsKICAgIGlmKCF0aGlzLmlzRmluaXNoZWQpIHsKICAgICAgICB1dGlscy5kZWxheSh0aGlzLl90aWNrQW5kUmVwZWF0LCBbXSwgdGhpcyk7CiAgICAgICAgdGhpcy5fdGlja1NjaGVkdWxlZCA9IHRydWU7CiAgICB9Cn07CgovKioKICogUmVhZCBhbmQgcHVzaCBhIGNodW5rLgogKi8KRGF0YVdvcmtlci5wcm90b3R5cGUuX3RpY2sgPSBmdW5jdGlvbigpIHsKCiAgICBpZih0aGlzLmlzUGF1c2VkIHx8IHRoaXMuaXNGaW5pc2hlZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICB2YXIgc2l6ZSA9IERFRkFVTFRfQkxPQ0tfU0laRTsKICAgIHZhciBkYXRhID0gbnVsbCwgbmV4dEluZGV4ID0gTWF0aC5taW4odGhpcy5tYXgsIHRoaXMuaW5kZXggKyBzaXplKTsKICAgIGlmICh0aGlzLmluZGV4ID49IHRoaXMubWF4KSB7CiAgICAgICAgLy8gRU9GCiAgICAgICAgcmV0dXJuIHRoaXMuZW5kKCk7CiAgICB9IGVsc2UgewogICAgICAgIHN3aXRjaCh0aGlzLnR5cGUpIHsKICAgICAgICAgICAgY2FzZSAic3RyaW5nIjoKICAgICAgICAgICAgICAgIGRhdGEgPSB0aGlzLmRhdGEuc3Vic3RyaW5nKHRoaXMuaW5kZXgsIG5leHRJbmRleCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICJ1aW50OGFycmF5IjoKICAgICAgICAgICAgICAgIGRhdGEgPSB0aGlzLmRhdGEuc3ViYXJyYXkodGhpcy5pbmRleCwgbmV4dEluZGV4KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgImFycmF5IjoKICAgICAgICAgICAgY2FzZSAibm9kZWJ1ZmZlciI6CiAgICAgICAgICAgICAgICBkYXRhID0gdGhpcy5kYXRhLnNsaWNlKHRoaXMuaW5kZXgsIG5leHRJbmRleCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICB0aGlzLmluZGV4ID0gbmV4dEluZGV4OwogICAgICAgIHJldHVybiB0aGlzLnB1c2goewogICAgICAgICAgICBkYXRhIDogZGF0YSwKICAgICAgICAgICAgbWV0YSA6IHsKICAgICAgICAgICAgICAgIHBlcmNlbnQgOiB0aGlzLm1heCA/IHRoaXMuaW5kZXggLyB0aGlzLm1heCAqIDEwMCA6IDAKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQp9OwoKbW9kdWxlLmV4cG9ydHMgPSBEYXRhV29ya2VyOwoKfSx7Ii4uL3V0aWxzIjozMiwiLi9HZW5lcmljV29ya2VyIjoyOH1dLDI4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKLyoqCiAqIEEgd29ya2VyIHRoYXQgZG9lcyBub3RoaW5nIGJ1dCBwYXNzaW5nIGNodW5rcyB0byB0aGUgbmV4dCBvbmUuIFRoaXMgaXMgbGlrZQogKiBhIG5vZGVqcyBzdHJlYW0gYnV0IHdpdGggc29tZSBkaWZmZXJlbmNlcy4gT24gdGhlIGdvb2Qgc2lkZSA6CiAqIC0gaXQgd29ya3Mgb24gSUUgNi05IHdpdGhvdXQgYW55IGlzc3VlIC8gcG9seWZpbGwKICogLSBpdCB3ZWlnaHRzIGxlc3MgdGhhbiB0aGUgZnVsbCBkZXBlbmRlbmNpZXMgYnVuZGxlZCB3aXRoIGJyb3dzZXJpZnkKICogLSBpdCBmb3J3YXJkcyBlcnJvcnMgKG5vIG5lZWQgdG8gZGVjbGFyZSBhbiBlcnJvciBoYW5kbGVyIEVWRVJZV0hFUkUpCiAqCiAqIEEgY2h1bmsgaXMgYW4gb2JqZWN0IHdpdGggMiBhdHRyaWJ1dGVzIDogYG1ldGFgIGFuZCBgZGF0YWAuIFRoZSBmb3JtZXIgaXMgYW4KICogb2JqZWN0IGNvbnRhaW5pbmcgYW55dGhpbmcgKGBwZXJjZW50YCBmb3IgZXhhbXBsZSksIHNlZSBlYWNoIHdvcmtlciBmb3IgbW9yZQogKiBkZXRhaWxzLiBUaGUgbGF0dGVyIGlzIHRoZSByZWFsIGRhdGEgKFN0cmluZywgVWludDhBcnJheSwgZXRjKS4KICoKICogQGNvbnN0cnVjdG9yCiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSBuYW1lIG9mIHRoZSBzdHJlYW0gKG1haW5seSB1c2VkIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMpCiAqLwpmdW5jdGlvbiBHZW5lcmljV29ya2VyKG5hbWUpIHsKICAgIC8vIHRoZSBuYW1lIG9mIHRoZSB3b3JrZXIKICAgIHRoaXMubmFtZSA9IG5hbWUgfHwgImRlZmF1bHQiOwogICAgLy8gYW4gb2JqZWN0IGNvbnRhaW5pbmcgbWV0YWRhdGEgYWJvdXQgdGhlIHdvcmtlcnMgY2hhaW4KICAgIHRoaXMuc3RyZWFtSW5mbyA9IHt9OwogICAgLy8gYW4gZXJyb3Igd2hpY2ggaGFwcGVuZWQgd2hlbiB0aGUgd29ya2VyIHdhcyBwYXVzZWQKICAgIHRoaXMuZ2VuZXJhdGVkRXJyb3IgPSBudWxsOwogICAgLy8gYW4gb2JqZWN0IGNvbnRhaW5pbmcgbWV0YWRhdGEgdG8gYmUgbWVyZ2VkIGJ5IHRoaXMgd29ya2VyIGludG8gdGhlIGdlbmVyYWwgbWV0YWRhdGEKICAgIHRoaXMuZXh0cmFTdHJlYW1JbmZvID0ge307CiAgICAvLyB0cnVlIGlmIHRoZSBzdHJlYW0gaXMgcGF1c2VkIChhbmQgc2hvdWxkIG5vdCBkbyBhbnl0aGluZyksIGZhbHNlIG90aGVyd2lzZQogICAgdGhpcy5pc1BhdXNlZCA9IHRydWU7CiAgICAvLyB0cnVlIGlmIHRoZSBzdHJlYW0gaXMgZmluaXNoZWQgKGFuZCBzaG91bGQgbm90IGRvIGFueXRoaW5nKSwgZmFsc2Ugb3RoZXJ3aXNlCiAgICB0aGlzLmlzRmluaXNoZWQgPSBmYWxzZTsKICAgIC8vIHRydWUgaWYgdGhlIHN0cmVhbSBpcyBsb2NrZWQgdG8gcHJldmVudCBmdXJ0aGVyIHN0cnVjdHVyZSB1cGRhdGVzIChwaXBlKSwgZmFsc2Ugb3RoZXJ3aXNlCiAgICB0aGlzLmlzTG9ja2VkID0gZmFsc2U7CiAgICAvLyB0aGUgZXZlbnQgbGlzdGVuZXJzCiAgICB0aGlzLl9saXN0ZW5lcnMgPSB7CiAgICAgICAgJ2RhdGEnOltdLAogICAgICAgICdlbmQnOltdLAogICAgICAgICdlcnJvcic6W10KICAgIH07CiAgICAvLyB0aGUgcHJldmlvdXMgd29ya2VyLCBpZiBhbnkKICAgIHRoaXMucHJldmlvdXMgPSBudWxsOwp9CgpHZW5lcmljV29ya2VyLnByb3RvdHlwZSA9IHsKICAgIC8qKgogICAgICogUHVzaCBhIGNodW5rIHRvIHRoZSBuZXh0IHdvcmtlcnMuCiAgICAgKiBAcGFyYW0ge09iamVjdH0gY2h1bmsgdGhlIGNodW5rIHRvIHB1c2gKICAgICAqLwogICAgcHVzaCA6IGZ1bmN0aW9uIChjaHVuaykgewogICAgICAgIHRoaXMuZW1pdCgiZGF0YSIsIGNodW5rKTsKICAgIH0sCiAgICAvKioKICAgICAqIEVuZCB0aGUgc3RyZWFtLgogICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGlzIGNhbGwgZW5kZWQgdGhlIHdvcmtlciwgZmFsc2Ugb3RoZXJ3aXNlLgogICAgICovCiAgICBlbmQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHRoaXMuaXNGaW5pc2hlZCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmZsdXNoKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdGhpcy5lbWl0KCJlbmQiKTsKICAgICAgICAgICAgdGhpcy5jbGVhblVwKCk7CiAgICAgICAgICAgIHRoaXMuaXNGaW5pc2hlZCA9IHRydWU7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICB0aGlzLmVtaXQoImVycm9yIiwgZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIC8qKgogICAgICogRW5kIHRoZSBzdHJlYW0gd2l0aCBhbiBlcnJvci4KICAgICAqIEBwYXJhbSB7RXJyb3J9IGUgdGhlIGVycm9yIHdoaWNoIGNhdXNlZCB0aGUgcHJlbWF0dXJlIGVuZC4KICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgdGhpcyBjYWxsIGVuZGVkIHRoZSB3b3JrZXIgd2l0aCBhbiBlcnJvciwgZmFsc2Ugb3RoZXJ3aXNlLgogICAgICovCiAgICBlcnJvciA6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKHRoaXMuaXNGaW5pc2hlZCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZih0aGlzLmlzUGF1c2VkKSB7CiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVkRXJyb3IgPSBlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuaXNGaW5pc2hlZCA9IHRydWU7CgogICAgICAgICAgICB0aGlzLmVtaXQoImVycm9yIiwgZSk7CgogICAgICAgICAgICAvLyBpbiB0aGUgd29ya2VycyBjaGFpbiBleHBsb2RlZCBpbiB0aGUgbWlkZGxlIG9mIHRoZSBjaGFpbiwKICAgICAgICAgICAgLy8gdGhlIGVycm9yIGV2ZW50IHdpbGwgZ28gZG93bndhcmQgYnV0IHdlIGFsc28gbmVlZCB0byBub3RpZnkKICAgICAgICAgICAgLy8gd29ya2VycyB1cHdhcmQgdGhhdCB0aGVyZSBoYXMgYmVlbiBhbiBlcnJvci4KICAgICAgICAgICAgaWYodGhpcy5wcmV2aW91cykgewogICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91cy5lcnJvcihlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5jbGVhblVwKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIC8qKgogICAgICogQWRkIGEgY2FsbGJhY2sgb24gYW4gZXZlbnQuCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgZXZlbnQgKGRhdGEsIGVuZCwgZXJyb3IpCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciB0aGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBldmVudCBpcyB0cmlnZ2VyZWQKICAgICAqIEByZXR1cm4ge0dlbmVyaWNXb3JrZXJ9IHRoZSBjdXJyZW50IG9iamVjdCBmb3IgY2hhaW5hYmlsaXR5CiAgICAgKi8KICAgIG9uIDogZnVuY3Rpb24gKG5hbWUsIGxpc3RlbmVyKSB7CiAgICAgICAgdGhpcy5fbGlzdGVuZXJzW25hbWVdLnB1c2gobGlzdGVuZXIpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfSwKICAgIC8qKgogICAgICogQ2xlYW4gYW55IHJlZmVyZW5jZXMgd2hlbiBhIHdvcmtlciBpcyBlbmRpbmcuCiAgICAgKi8KICAgIGNsZWFuVXAgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5zdHJlYW1JbmZvID0gdGhpcy5nZW5lcmF0ZWRFcnJvciA9IHRoaXMuZXh0cmFTdHJlYW1JbmZvID0gbnVsbDsKICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSBbXTsKICAgIH0sCiAgICAvKioKICAgICAqIFRyaWdnZXIgYW4gZXZlbnQuIFRoaXMgd2lsbCBjYWxsIHJlZ2lzdGVyZWQgY2FsbGJhY2sgd2l0aCB0aGUgcHJvdmlkZWQgYXJnLgogICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgdGhlIG5hbWUgb2YgdGhlIGV2ZW50IChkYXRhLCBlbmQsIGVycm9yKQogICAgICogQHBhcmFtIHtPYmplY3R9IGFyZyB0aGUgYXJndW1lbnQgdG8gY2FsbCB0aGUgY2FsbGJhY2sgd2l0aC4KICAgICAqLwogICAgZW1pdCA6IGZ1bmN0aW9uIChuYW1lLCBhcmcpIHsKICAgICAgICBpZiAodGhpcy5fbGlzdGVuZXJzW25hbWVdKSB7CiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLl9saXN0ZW5lcnNbbmFtZV0ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVyc1tuYW1lXVtpXS5jYWxsKHRoaXMsIGFyZyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgLyoqCiAgICAgKiBDaGFpbiBhIHdvcmtlciB3aXRoIGFuIG90aGVyLgogICAgICogQHBhcmFtIHtXb3JrZXJ9IG5leHQgdGhlIHdvcmtlciByZWNlaXZpbmcgZXZlbnRzIGZyb20gdGhlIGN1cnJlbnQgb25lLgogICAgICogQHJldHVybiB7d29ya2VyfSB0aGUgbmV4dCB3b3JrZXIgZm9yIGNoYWluYWJpbGl0eQogICAgICovCiAgICBwaXBlIDogZnVuY3Rpb24gKG5leHQpIHsKICAgICAgICByZXR1cm4gbmV4dC5yZWdpc3RlclByZXZpb3VzKHRoaXMpOwogICAgfSwKICAgIC8qKgogICAgICogU2FtZSBhcyBgcGlwZWAgaW4gdGhlIG90aGVyIGRpcmVjdGlvbi4KICAgICAqIFVzaW5nIGFuIEFQSSB3aXRoIGBwaXBlKG5leHQpYCBpcyB2ZXJ5IGVhc3kuCiAgICAgKiBJbXBsZW1lbnRpbmcgdGhlIEFQSSB3aXRoIHRoZSBwb2ludCBvZiB2aWV3IG9mIHRoZSBuZXh0IG9uZSByZWdpc3RlcmluZwogICAgICogYSBzb3VyY2UgaXMgZWFzaWVyLCBzZWUgdGhlIFppcEZpbGVXb3JrZXIuCiAgICAgKiBAcGFyYW0ge1dvcmtlcn0gcHJldmlvdXMgdGhlIHByZXZpb3VzIHdvcmtlciwgc2VuZGluZyBldmVudHMgdG8gdGhpcyBvbmUKICAgICAqIEByZXR1cm4ge1dvcmtlcn0gdGhlIGN1cnJlbnQgd29ya2VyIGZvciBjaGFpbmFiaWxpdHkKICAgICAqLwogICAgcmVnaXN0ZXJQcmV2aW91cyA6IGZ1bmN0aW9uIChwcmV2aW91cykgewogICAgICAgIGlmICh0aGlzLmlzTG9ja2VkKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiVGhlIHN0cmVhbSAnIiArIHRoaXMgKyAiJyBoYXMgYWxyZWFkeSBiZWVuIHVzZWQuIik7CiAgICAgICAgfQoKICAgICAgICAvLyBzaGFyaW5nIHRoZSBzdHJlYW1JbmZvLi4uCiAgICAgICAgdGhpcy5zdHJlYW1JbmZvID0gcHJldmlvdXMuc3RyZWFtSW5mbzsKICAgICAgICAvLyAuLi4gYW5kIGFkZGluZyBvdXIgb3duIGJpdHMKICAgICAgICB0aGlzLm1lcmdlU3RyZWFtSW5mbygpOwogICAgICAgIHRoaXMucHJldmlvdXMgPSAgcHJldmlvdXM7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIHByZXZpb3VzLm9uKCdkYXRhJywgZnVuY3Rpb24gKGNodW5rKSB7CiAgICAgICAgICAgIHNlbGYucHJvY2Vzc0NodW5rKGNodW5rKTsKICAgICAgICB9KTsKICAgICAgICBwcmV2aW91cy5vbignZW5kJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBzZWxmLmVuZCgpOwogICAgICAgIH0pOwogICAgICAgIHByZXZpb3VzLm9uKCdlcnJvcicsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHNlbGYuZXJyb3IoZSk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgLyoqCiAgICAgKiBQYXVzZSB0aGUgc3RyZWFtIHNvIGl0IGRvZXNuJ3Qgc2VuZCBldmVudHMgYW55bW9yZS4KICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgdGhpcyBjYWxsIHBhdXNlZCB0aGUgd29ya2VyLCBmYWxzZSBvdGhlcndpc2UuCiAgICAgKi8KICAgIHBhdXNlIDogZnVuY3Rpb24gKCkgewogICAgICAgIGlmKHRoaXMuaXNQYXVzZWQgfHwgdGhpcy5pc0ZpbmlzaGVkKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgdGhpcy5pc1BhdXNlZCA9IHRydWU7CgogICAgICAgIGlmKHRoaXMucHJldmlvdXMpIHsKICAgICAgICAgICAgdGhpcy5wcmV2aW91cy5wYXVzZSgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICAvKioKICAgICAqIFJlc3VtZSBhIHBhdXNlZCBzdHJlYW0uCiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIHRoaXMgY2FsbCByZXN1bWVkIHRoZSB3b3JrZXIsIGZhbHNlIG90aGVyd2lzZS4KICAgICAqLwogICAgcmVzdW1lIDogZnVuY3Rpb24gKCkgewogICAgICAgIGlmKCF0aGlzLmlzUGF1c2VkIHx8IHRoaXMuaXNGaW5pc2hlZCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHRoaXMuaXNQYXVzZWQgPSBmYWxzZTsKCiAgICAgICAgLy8gaWYgdHJ1ZSwgdGhlIHdvcmtlciB0cmllZCB0byByZXN1bWUgYnV0IGZhaWxlZAogICAgICAgIHZhciB3aXRoRXJyb3IgPSBmYWxzZTsKICAgICAgICBpZih0aGlzLmdlbmVyYXRlZEVycm9yKSB7CiAgICAgICAgICAgIHRoaXMuZXJyb3IodGhpcy5nZW5lcmF0ZWRFcnJvcik7CiAgICAgICAgICAgIHdpdGhFcnJvciA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGlmKHRoaXMucHJldmlvdXMpIHsKICAgICAgICAgICAgdGhpcy5wcmV2aW91cy5yZXN1bWUoKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAhd2l0aEVycm9yOwogICAgfSwKICAgIC8qKgogICAgICogRmx1c2ggYW55IHJlbWFpbmluZyBieXRlcyBhcyB0aGUgc3RyZWFtIGlzIGVuZGluZy4KICAgICAqLwogICAgZmx1c2ggOiBmdW5jdGlvbiAoKSB7fSwKICAgIC8qKgogICAgICogUHJvY2VzcyBhIGNodW5rLiBUaGlzIGlzIHVzdWFsbHkgdGhlIG1ldGhvZCBvdmVycmlkZGVuLgogICAgICogQHBhcmFtIHtPYmplY3R9IGNodW5rIHRoZSBjaHVuayB0byBwcm9jZXNzLgogICAgICovCiAgICBwcm9jZXNzQ2h1bmsgOiBmdW5jdGlvbihjaHVuaykgewogICAgICAgIHRoaXMucHVzaChjaHVuayk7CiAgICB9LAogICAgLyoqCiAgICAgKiBBZGQgYSBrZXkvdmFsdWUgdG8gYmUgYWRkZWQgaW4gdGhlIHdvcmtlcnMgY2hhaW4gc3RyZWFtSW5mbyBvbmNlIGFjdGl2YXRlZC4KICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgdGhlIGtleSB0byB1c2UKICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZSB0aGUgYXNzb2NpYXRlZCB2YWx1ZQogICAgICogQHJldHVybiB7V29ya2VyfSB0aGUgY3VycmVudCB3b3JrZXIgZm9yIGNoYWluYWJpbGl0eQogICAgICovCiAgICB3aXRoU3RyZWFtSW5mbyA6IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7CiAgICAgICAgdGhpcy5leHRyYVN0cmVhbUluZm9ba2V5XSA9IHZhbHVlOwogICAgICAgIHRoaXMubWVyZ2VTdHJlYW1JbmZvKCk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgLyoqCiAgICAgKiBNZXJnZSB0aGlzIHdvcmtlcidzIHN0cmVhbUluZm8gaW50byB0aGUgY2hhaW4ncyBzdHJlYW1JbmZvLgogICAgICovCiAgICBtZXJnZVN0cmVhbUluZm8gOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgZm9yKHZhciBrZXkgaW4gdGhpcy5leHRyYVN0cmVhbUluZm8pIHsKICAgICAgICAgICAgaWYgKCF0aGlzLmV4dHJhU3RyZWFtSW5mby5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnN0cmVhbUluZm9ba2V5XSA9IHRoaXMuZXh0cmFTdHJlYW1JbmZvW2tleV07CiAgICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqIExvY2sgdGhlIHN0cmVhbSB0byBwcmV2ZW50IGZ1cnRoZXIgdXBkYXRlcyBvbiB0aGUgd29ya2VycyBjaGFpbi4KICAgICAqIEFmdGVyIGNhbGxpbmcgdGhpcyBtZXRob2QsIGFsbCBjYWxscyB0byBwaXBlIHdpbGwgZmFpbC4KICAgICAqLwogICAgbG9jazogZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh0aGlzLmlzTG9ja2VkKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiVGhlIHN0cmVhbSAnIiArIHRoaXMgKyAiJyBoYXMgYWxyZWFkeSBiZWVuIHVzZWQuIik7CiAgICAgICAgfQogICAgICAgIHRoaXMuaXNMb2NrZWQgPSB0cnVlOwogICAgICAgIGlmICh0aGlzLnByZXZpb3VzKSB7CiAgICAgICAgICAgIHRoaXMucHJldmlvdXMubG9jaygpOwogICAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKgogICAgICogUHJldHR5IHByaW50IHRoZSB3b3JrZXJzIGNoYWluLgogICAgICovCiAgICB0b1N0cmluZyA6IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgbWUgPSAiV29ya2VyICIgKyB0aGlzLm5hbWU7CiAgICAgICAgaWYgKHRoaXMucHJldmlvdXMpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJldmlvdXMgKyAiIC0+ICIgKyBtZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gbWU7CiAgICAgICAgfQogICAgfQp9OwoKbW9kdWxlLmV4cG9ydHMgPSBHZW5lcmljV29ya2VyOwoKfSx7fV0sMjk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpOwp2YXIgQ29udmVydFdvcmtlciA9IHJlcXVpcmUoJy4vQ29udmVydFdvcmtlcicpOwp2YXIgR2VuZXJpY1dvcmtlciA9IHJlcXVpcmUoJy4vR2VuZXJpY1dvcmtlcicpOwp2YXIgYmFzZTY0ID0gcmVxdWlyZSgnLi4vYmFzZTY0Jyk7CnZhciBzdXBwb3J0ID0gcmVxdWlyZSgiLi4vc3VwcG9ydCIpOwp2YXIgZXh0ZXJuYWwgPSByZXF1aXJlKCIuLi9leHRlcm5hbCIpOwoKdmFyIE5vZGVqc1N0cmVhbU91dHB1dEFkYXB0ZXIgPSBudWxsOwppZiAoc3VwcG9ydC5ub2Rlc3RyZWFtKSB7CiAgICB0cnkgewogICAgICAgIE5vZGVqc1N0cmVhbU91dHB1dEFkYXB0ZXIgPSByZXF1aXJlKCcuLi9ub2RlanMvTm9kZWpzU3RyZWFtT3V0cHV0QWRhcHRlcicpOwogICAgfSBjYXRjaChlKSB7fQp9CgovKioKICogQXBwbHkgdGhlIGZpbmFsIHRyYW5zZm9ybWF0aW9uIG9mIHRoZSBkYXRhLiBJZiB0aGUgdXNlciB3YW50cyBhIEJsb2IgZm9yCiAqIGV4YW1wbGUsIGl0J3MgZWFzaWVyIHRvIHdvcmsgd2l0aCBhbiBVOGludEFycmF5IGFuZCBmaW5hbGx5IGRvIHRoZQogKiBBcnJheUJ1ZmZlci9CbG9iIGNvbnZlcnNpb24uCiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIHRoZSBuYW1lIG9mIHRoZSBmaW5hbCB0eXBlCiAqIEBwYXJhbSB7U3RyaW5nfFVpbnQ4QXJyYXl8QnVmZmVyfSBjb250ZW50IHRoZSBjb250ZW50IHRvIHRyYW5zZm9ybQogKiBAcGFyYW0ge1N0cmluZ30gbWltZVR5cGUgdGhlIG1pbWUgdHlwZSBvZiB0aGUgY29udGVudCwgaWYgYXBwbGljYWJsZS4KICogQHJldHVybiB7U3RyaW5nfFVpbnQ4QXJyYXl8QXJyYXlCdWZmZXJ8QnVmZmVyfEJsb2J9IHRoZSBjb250ZW50IGluIHRoZSByaWdodCBmb3JtYXQuCiAqLwpmdW5jdGlvbiB0cmFuc2Zvcm1aaXBPdXRwdXQodHlwZSwgY29udGVudCwgbWltZVR5cGUpIHsKICAgIHN3aXRjaCh0eXBlKSB7CiAgICAgICAgY2FzZSAiYmxvYiIgOgogICAgICAgICAgICByZXR1cm4gdXRpbHMubmV3QmxvYih1dGlscy50cmFuc2Zvcm1UbygiYXJyYXlidWZmZXIiLCBjb250ZW50KSwgbWltZVR5cGUpOwogICAgICAgIGNhc2UgImJhc2U2NCIgOgogICAgICAgICAgICByZXR1cm4gYmFzZTY0LmVuY29kZShjb250ZW50KTsKICAgICAgICBkZWZhdWx0IDoKICAgICAgICAgICAgcmV0dXJuIHV0aWxzLnRyYW5zZm9ybVRvKHR5cGUsIGNvbnRlbnQpOwogICAgfQp9CgovKioKICogQ29uY2F0ZW5hdGUgYW4gYXJyYXkgb2YgZGF0YSBvZiB0aGUgZ2l2ZW4gdHlwZS4KICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgdGhlIHR5cGUgb2YgdGhlIGRhdGEgaW4gdGhlIGdpdmVuIGFycmF5LgogKiBAcGFyYW0ge0FycmF5fSBkYXRhQXJyYXkgdGhlIGFycmF5IGNvbnRhaW5pbmcgdGhlIGRhdGEgY2h1bmtzIHRvIGNvbmNhdGVuYXRlCiAqIEByZXR1cm4ge1N0cmluZ3xVaW50OEFycmF5fEJ1ZmZlcn0gdGhlIGNvbmNhdGVuYXRlZCBkYXRhCiAqIEB0aHJvd3MgRXJyb3IgaWYgdGhlIGFza2VkIHR5cGUgaXMgdW5zdXBwb3J0ZWQKICovCmZ1bmN0aW9uIGNvbmNhdCAodHlwZSwgZGF0YUFycmF5KSB7CiAgICB2YXIgaSwgaW5kZXggPSAwLCByZXMgPSBudWxsLCB0b3RhbExlbmd0aCA9IDA7CiAgICBmb3IoaSA9IDA7IGkgPCBkYXRhQXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICB0b3RhbExlbmd0aCArPSBkYXRhQXJyYXlbaV0ubGVuZ3RoOwogICAgfQogICAgc3dpdGNoKHR5cGUpIHsKICAgICAgICBjYXNlICJzdHJpbmciOgogICAgICAgICAgICByZXR1cm4gZGF0YUFycmF5LmpvaW4oIiIpOwogICAgICAgICAgY2FzZSAiYXJyYXkiOgogICAgICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgZGF0YUFycmF5KTsKICAgICAgICBjYXNlICJ1aW50OGFycmF5IjoKICAgICAgICAgICAgcmVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxMZW5ndGgpOwogICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBkYXRhQXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHJlcy5zZXQoZGF0YUFycmF5W2ldLCBpbmRleCk7CiAgICAgICAgICAgICAgICBpbmRleCArPSBkYXRhQXJyYXlbaV0ubGVuZ3RoOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgY2FzZSAibm9kZWJ1ZmZlciI6CiAgICAgICAgICAgIHJldHVybiBCdWZmZXIuY29uY2F0KGRhdGFBcnJheSk7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJjb25jYXQgOiB1bnN1cHBvcnRlZCB0eXBlICciICArIHR5cGUgKyAiJyIpOwogICAgfQp9CgovKioKICogTGlzdGVuIGEgU3RyZWFtSGVscGVyLCBhY2N1bXVsYXRlIGl0cyBjb250ZW50IGFuZCBjb25jYXRlbmF0ZSBpdCBpbnRvIGEKICogY29tcGxldGUgYmxvY2suCiAqIEBwYXJhbSB7U3RyZWFtSGVscGVyfSBoZWxwZXIgdGhlIGhlbHBlciB0byB1c2UuCiAqIEBwYXJhbSB7RnVuY3Rpb259IHVwZGF0ZUNhbGxiYWNrIGEgY2FsbGJhY2sgY2FsbGVkIG9uIGVhY2ggdXBkYXRlLiBDYWxsZWQKICogd2l0aCBvbmUgYXJnIDoKICogLSB0aGUgbWV0YWRhdGEgbGlua2VkIHRvIHRoZSB1cGRhdGUgcmVjZWl2ZWQuCiAqIEByZXR1cm4gUHJvbWlzZSB0aGUgcHJvbWlzZSBmb3IgdGhlIGFjY3VtdWxhdGlvbi4KICovCmZ1bmN0aW9uIGFjY3VtdWxhdGUoaGVscGVyLCB1cGRhdGVDYWxsYmFjaykgewogICAgcmV0dXJuIG5ldyBleHRlcm5hbC5Qcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpewogICAgICAgIHZhciBkYXRhQXJyYXkgPSBbXTsKICAgICAgICB2YXIgY2h1bmtUeXBlID0gaGVscGVyLl9pbnRlcm5hbFR5cGUsCiAgICAgICAgICAgIHJlc3VsdFR5cGUgPSBoZWxwZXIuX291dHB1dFR5cGUsCiAgICAgICAgICAgIG1pbWVUeXBlID0gaGVscGVyLl9taW1lVHlwZTsKICAgICAgICBoZWxwZXIKICAgICAgICAub24oJ2RhdGEnLCBmdW5jdGlvbiAoZGF0YSwgbWV0YSkgewogICAgICAgICAgICBkYXRhQXJyYXkucHVzaChkYXRhKTsKICAgICAgICAgICAgaWYodXBkYXRlQ2FsbGJhY2spIHsKICAgICAgICAgICAgICAgIHVwZGF0ZUNhbGxiYWNrKG1ldGEpOwogICAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAub24oJ2Vycm9yJywgZnVuY3Rpb24oZXJyKSB7CiAgICAgICAgICAgIGRhdGFBcnJheSA9IFtdOwogICAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICB9KQogICAgICAgIC5vbignZW5kJywgZnVuY3Rpb24gKCl7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJhbnNmb3JtWmlwT3V0cHV0KHJlc3VsdFR5cGUsIGNvbmNhdChjaHVua1R5cGUsIGRhdGFBcnJheSksIG1pbWVUeXBlKTsKICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGRhdGFBcnJheSA9IFtdOwogICAgICAgIH0pCiAgICAgICAgLnJlc3VtZSgpOwogICAgfSk7Cn0KCi8qKgogKiBBbiBoZWxwZXIgdG8gZWFzaWx5IHVzZSB3b3JrZXJzIG91dHNpZGUgb2YgSlNaaXAuCiAqIEBjb25zdHJ1Y3RvcgogKiBAcGFyYW0ge1dvcmtlcn0gd29ya2VyIHRoZSB3b3JrZXIgdG8gd3JhcAogKiBAcGFyYW0ge1N0cmluZ30gb3V0cHV0VHlwZSB0aGUgdHlwZSBvZiBkYXRhIGV4cGVjdGVkIGJ5IHRoZSB1c2UKICogQHBhcmFtIHtTdHJpbmd9IG1pbWVUeXBlIHRoZSBtaW1lIHR5cGUgb2YgdGhlIGNvbnRlbnQsIGlmIGFwcGxpY2FibGUuCiAqLwpmdW5jdGlvbiBTdHJlYW1IZWxwZXIod29ya2VyLCBvdXRwdXRUeXBlLCBtaW1lVHlwZSkgewogICAgdmFyIGludGVybmFsVHlwZSA9IG91dHB1dFR5cGU7CiAgICBzd2l0Y2gob3V0cHV0VHlwZSkgewogICAgICAgIGNhc2UgImJsb2IiOgogICAgICAgIGNhc2UgImFycmF5YnVmZmVyIjoKICAgICAgICAgICAgaW50ZXJuYWxUeXBlID0gInVpbnQ4YXJyYXkiOwogICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgImJhc2U2NCI6CiAgICAgICAgICAgIGludGVybmFsVHlwZSA9ICJzdHJpbmciOwogICAgICAgIGJyZWFrOwogICAgfQoKICAgIHRyeSB7CiAgICAgICAgLy8gdGhlIHR5cGUgdXNlZCBpbnRlcm5hbGx5CiAgICAgICAgdGhpcy5faW50ZXJuYWxUeXBlID0gaW50ZXJuYWxUeXBlOwogICAgICAgIC8vIHRoZSB0eXBlIHVzZWQgdG8gb3V0cHV0IHJlc3VsdHMKICAgICAgICB0aGlzLl9vdXRwdXRUeXBlID0gb3V0cHV0VHlwZTsKICAgICAgICAvLyB0aGUgbWltZSB0eXBlCiAgICAgICAgdGhpcy5fbWltZVR5cGUgPSBtaW1lVHlwZTsKICAgICAgICB1dGlscy5jaGVja1N1cHBvcnQoaW50ZXJuYWxUeXBlKTsKICAgICAgICB0aGlzLl93b3JrZXIgPSB3b3JrZXIucGlwZShuZXcgQ29udmVydFdvcmtlcihpbnRlcm5hbFR5cGUpKTsKICAgICAgICAvLyB0aGUgbGFzdCB3b3JrZXJzIGNhbiBiZSByZXdpcmVkIHdpdGhvdXQgaXNzdWVzIGJ1dCB3ZSBuZWVkIHRvCiAgICAgICAgLy8gcHJldmVudCBhbnkgdXBkYXRlcyBvbiBwcmV2aW91cyB3b3JrZXJzLgogICAgICAgIHdvcmtlci5sb2NrKCk7CiAgICB9IGNhdGNoKGUpIHsKICAgICAgICB0aGlzLl93b3JrZXIgPSBuZXcgR2VuZXJpY1dvcmtlcigiZXJyb3IiKTsKICAgICAgICB0aGlzLl93b3JrZXIuZXJyb3IoZSk7CiAgICB9Cn0KClN0cmVhbUhlbHBlci5wcm90b3R5cGUgPSB7CiAgICAvKioKICAgICAqIExpc3RlbiBhIFN0cmVhbUhlbHBlciwgYWNjdW11bGF0ZSBpdHMgY29udGVudCBhbmQgY29uY2F0ZW5hdGUgaXQgaW50byBhCiAgICAgKiBjb21wbGV0ZSBibG9jay4KICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHVwZGF0ZUNiIHRoZSB1cGRhdGUgY2FsbGJhY2suCiAgICAgKiBAcmV0dXJuIFByb21pc2UgdGhlIHByb21pc2UgZm9yIHRoZSBhY2N1bXVsYXRpb24uCiAgICAgKi8KICAgIGFjY3VtdWxhdGUgOiBmdW5jdGlvbiAodXBkYXRlQ2IpIHsKICAgICAgICByZXR1cm4gYWNjdW11bGF0ZSh0aGlzLCB1cGRhdGVDYik7CiAgICB9LAogICAgLyoqCiAgICAgKiBBZGQgYSBsaXN0ZW5lciBvbiBhbiBldmVudCB0cmlnZ2VyZWQgb24gYSBzdHJlYW0uCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZ0IHRoZSBuYW1lIG9mIHRoZSBldmVudAogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gdGhlIGxpc3RlbmVyCiAgICAgKiBAcmV0dXJuIHtTdHJlYW1IZWxwZXJ9IHRoZSBjdXJyZW50IGhlbHBlci4KICAgICAqLwogICAgb24gOiBmdW5jdGlvbiAoZXZ0LCBmbikgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYoZXZ0ID09PSAiZGF0YSIpIHsKICAgICAgICAgICAgdGhpcy5fd29ya2VyLm9uKGV2dCwgZnVuY3Rpb24gKGNodW5rKSB7CiAgICAgICAgICAgICAgICBmbi5jYWxsKHNlbGYsIGNodW5rLmRhdGEsIGNodW5rLm1ldGEpOwogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLl93b3JrZXIub24oZXZ0LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB1dGlscy5kZWxheShmbiwgYXJndW1lbnRzLCBzZWxmKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzOwogICAgfSwKICAgIC8qKgogICAgICogUmVzdW1lIHRoZSBmbG93IG9mIGNodW5rcy4KICAgICAqIEByZXR1cm4ge1N0cmVhbUhlbHBlcn0gdGhlIGN1cnJlbnQgaGVscGVyLgogICAgICovCiAgICByZXN1bWUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdXRpbHMuZGVsYXkodGhpcy5fd29ya2VyLnJlc3VtZSwgW10sIHRoaXMuX3dvcmtlcik7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgLyoqCiAgICAgKiBQYXVzZSB0aGUgZmxvdyBvZiBjaHVua3MuCiAgICAgKiBAcmV0dXJuIHtTdHJlYW1IZWxwZXJ9IHRoZSBjdXJyZW50IGhlbHBlci4KICAgICAqLwogICAgcGF1c2UgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5fd29ya2VyLnBhdXNlKCk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBub2RlanMgc3RyZWFtIGZvciB0aGlzIGhlbHBlci4KICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHVwZGF0ZUNiIHRoZSB1cGRhdGUgY2FsbGJhY2suCiAgICAgKiBAcmV0dXJuIHtOb2RlanNTdHJlYW1PdXRwdXRBZGFwdGVyfSB0aGUgbm9kZWpzIHN0cmVhbS4KICAgICAqLwogICAgdG9Ob2RlanNTdHJlYW0gOiBmdW5jdGlvbiAodXBkYXRlQ2IpIHsKICAgICAgICB1dGlscy5jaGVja1N1cHBvcnQoIm5vZGVzdHJlYW0iKTsKICAgICAgICBpZiAodGhpcy5fb3V0cHV0VHlwZSAhPT0gIm5vZGVidWZmZXIiKSB7CiAgICAgICAgICAgIC8vIGFuIG9iamVjdCBzdHJlYW0gY29udGFpbmluZyBibG9iL2FycmF5YnVmZmVyL3VpbnQ4YXJyYXkvc3RyaW5nCiAgICAgICAgICAgIC8vIGlzIHN0cmFuZ2UgYW5kIEkgZG9uJ3Qga25vdyBpZiBpdCB3b3VsZCBiZSB1c2VmdWwuCiAgICAgICAgICAgIC8vIEkgeW91IGZpbmQgdGhpcyBjb21tZW50IGFuZCBoYXZlIGEgZ29vZCB1c2VjYXNlLCBwbGVhc2Ugb3BlbiBhCiAgICAgICAgICAgIC8vIGJ1ZyByZXBvcnQgIQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy5fb3V0cHV0VHlwZSArICIgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIG1ldGhvZCIpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG5ldyBOb2RlanNTdHJlYW1PdXRwdXRBZGFwdGVyKHRoaXMsIHsKICAgICAgICAgICAgb2JqZWN0TW9kZSA6IHRoaXMuX291dHB1dFR5cGUgIT09ICJub2RlYnVmZmVyIgogICAgICAgIH0sIHVwZGF0ZUNiKTsKICAgIH0KfTsKCgptb2R1bGUuZXhwb3J0cyA9IFN0cmVhbUhlbHBlcjsKCn0seyIuLi9iYXNlNjQiOjEsIi4uL2V4dGVybmFsIjo2LCIuLi9ub2RlanMvTm9kZWpzU3RyZWFtT3V0cHV0QWRhcHRlciI6MTMsIi4uL3N1cHBvcnQiOjMwLCIuLi91dGlscyI6MzIsIi4vQ29udmVydFdvcmtlciI6MjQsIi4vR2VuZXJpY1dvcmtlciI6Mjh9XSwzMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCmV4cG9ydHMuYmFzZTY0ID0gdHJ1ZTsKZXhwb3J0cy5hcnJheSA9IHRydWU7CmV4cG9ydHMuc3RyaW5nID0gdHJ1ZTsKZXhwb3J0cy5hcnJheWJ1ZmZlciA9IHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gInVuZGVmaW5lZCIgJiYgdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICJ1bmRlZmluZWQiOwpleHBvcnRzLm5vZGVidWZmZXIgPSB0eXBlb2YgQnVmZmVyICE9PSAidW5kZWZpbmVkIjsKLy8gY29udGFpbnMgdHJ1ZSBpZiBKU1ppcCBjYW4gcmVhZC9nZW5lcmF0ZSBVaW50OEFycmF5LCBmYWxzZSBvdGhlcndpc2UuCmV4cG9ydHMudWludDhhcnJheSA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSAidW5kZWZpbmVkIjsKCmlmICh0eXBlb2YgQXJyYXlCdWZmZXIgPT09ICJ1bmRlZmluZWQiKSB7CiAgICBleHBvcnRzLmJsb2IgPSBmYWxzZTsKfQplbHNlIHsKICAgIHZhciBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoMCk7CiAgICB0cnkgewogICAgICAgIGV4cG9ydHMuYmxvYiA9IG5ldyBCbG9iKFtidWZmZXJdLCB7CiAgICAgICAgICAgIHR5cGU6ICJhcHBsaWNhdGlvbi96aXAiCiAgICAgICAgfSkuc2l6ZSA9PT0gMDsKICAgIH0KICAgIGNhdGNoIChlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIEJ1aWxkZXIgPSBzZWxmLkJsb2JCdWlsZGVyIHx8IHNlbGYuV2ViS2l0QmxvYkJ1aWxkZXIgfHwgc2VsZi5Nb3pCbG9iQnVpbGRlciB8fCBzZWxmLk1TQmxvYkJ1aWxkZXI7CiAgICAgICAgICAgIHZhciBidWlsZGVyID0gbmV3IEJ1aWxkZXIoKTsKICAgICAgICAgICAgYnVpbGRlci5hcHBlbmQoYnVmZmVyKTsKICAgICAgICAgICAgZXhwb3J0cy5ibG9iID0gYnVpbGRlci5nZXRCbG9iKCdhcHBsaWNhdGlvbi96aXAnKS5zaXplID09PSAwOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICBleHBvcnRzLmJsb2IgPSBmYWxzZTsKICAgICAgICB9CiAgICB9Cn0KCnRyeSB7CiAgICBleHBvcnRzLm5vZGVzdHJlYW0gPSAhIXJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbScpLlJlYWRhYmxlOwp9IGNhdGNoKGUpIHsKICAgIGV4cG9ydHMubm9kZXN0cmVhbSA9IGZhbHNlOwp9Cgp9LHsicmVhZGFibGUtc3RyZWFtIjoxNn1dLDMxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpOwp2YXIgc3VwcG9ydCA9IHJlcXVpcmUoJy4vc3VwcG9ydCcpOwp2YXIgbm9kZWpzVXRpbHMgPSByZXF1aXJlKCcuL25vZGVqc1V0aWxzJyk7CnZhciBHZW5lcmljV29ya2VyID0gcmVxdWlyZSgnLi9zdHJlYW0vR2VuZXJpY1dvcmtlcicpOwoKLyoqCiAqIFRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zIGNvbWUgZnJvbSBwYWtvLCBmcm9tIHBha28vbGliL3V0aWxzL3N0cmluZ3MKICogcmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLCBzZWUgcGFrbyBodHRwczovL2dpdGh1Yi5jb20vbm9kZWNhL3Bha28vCiAqLwoKLy8gVGFibGUgd2l0aCB1dGY4IGxlbmd0aHMgKGNhbGN1bGF0ZWQgYnkgZmlyc3QgYnl0ZSBvZiBzZXF1ZW5jZSkKLy8gTm90ZSwgdGhhdCA1ICYgNi1ieXRlIHZhbHVlcyBhbmQgc29tZSA0LWJ5dGUgdmFsdWVzIGNhbiBub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlMsCi8vIGJlY2F1c2UgbWF4IHBvc3NpYmxlIGNvZGVwb2ludCBpcyAweDEwZmZmZgp2YXIgX3V0ZjhsZW4gPSBuZXcgQXJyYXkoMjU2KTsKZm9yICh2YXIgaT0wOyBpPDI1NjsgaSsrKSB7CiAgX3V0ZjhsZW5baV0gPSAoaSA+PSAyNTIgPyA2IDogaSA+PSAyNDggPyA1IDogaSA+PSAyNDAgPyA0IDogaSA+PSAyMjQgPyAzIDogaSA+PSAxOTIgPyAyIDogMSk7Cn0KX3V0ZjhsZW5bMjU0XT1fdXRmOGxlblsyNTRdPTE7IC8vIEludmFsaWQgc2VxdWVuY2Ugc3RhcnQKCi8vIGNvbnZlcnQgc3RyaW5nIHRvIGFycmF5ICh0eXBlZCwgd2hlbiBwb3NzaWJsZSkKdmFyIHN0cmluZzJidWYgPSBmdW5jdGlvbiAoc3RyKSB7CiAgICB2YXIgYnVmLCBjLCBjMiwgbV9wb3MsIGksIHN0cl9sZW4gPSBzdHIubGVuZ3RoLCBidWZfbGVuID0gMDsKCiAgICAvLyBjb3VudCBiaW5hcnkgc2l6ZQogICAgZm9yIChtX3BvcyA9IDA7IG1fcG9zIDwgc3RyX2xlbjsgbV9wb3MrKykgewogICAgICAgIGMgPSBzdHIuY2hhckNvZGVBdChtX3Bvcyk7CiAgICAgICAgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmIChtX3BvcysxIDwgc3RyX2xlbikpIHsKICAgICAgICAgICAgYzIgPSBzdHIuY2hhckNvZGVBdChtX3BvcysxKTsKICAgICAgICAgICAgaWYgKChjMiAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkgewogICAgICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgLSAweGQ4MDApIDw8IDEwKSArIChjMiAtIDB4ZGMwMCk7CiAgICAgICAgICAgICAgICBtX3BvcysrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGJ1Zl9sZW4gKz0gYyA8IDB4ODAgPyAxIDogYyA8IDB4ODAwID8gMiA6IGMgPCAweDEwMDAwID8gMyA6IDQ7CiAgICB9CgogICAgLy8gYWxsb2NhdGUgYnVmZmVyCiAgICBpZiAoc3VwcG9ydC51aW50OGFycmF5KSB7CiAgICAgICAgYnVmID0gbmV3IFVpbnQ4QXJyYXkoYnVmX2xlbik7CiAgICB9IGVsc2UgewogICAgICAgIGJ1ZiA9IG5ldyBBcnJheShidWZfbGVuKTsKICAgIH0KCiAgICAvLyBjb252ZXJ0CiAgICBmb3IgKGk9MCwgbV9wb3MgPSAwOyBpIDwgYnVmX2xlbjsgbV9wb3MrKykgewogICAgICAgIGMgPSBzdHIuY2hhckNvZGVBdChtX3Bvcyk7CiAgICAgICAgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmIChtX3BvcysxIDwgc3RyX2xlbikpIHsKICAgICAgICAgICAgYzIgPSBzdHIuY2hhckNvZGVBdChtX3BvcysxKTsKICAgICAgICAgICAgaWYgKChjMiAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkgewogICAgICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgLSAweGQ4MDApIDw8IDEwKSArIChjMiAtIDB4ZGMwMCk7CiAgICAgICAgICAgICAgICBtX3BvcysrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChjIDwgMHg4MCkgewogICAgICAgICAgICAvKiBvbmUgYnl0ZSAqLwogICAgICAgICAgICBidWZbaSsrXSA9IGM7CiAgICAgICAgfSBlbHNlIGlmIChjIDwgMHg4MDApIHsKICAgICAgICAgICAgLyogdHdvIGJ5dGVzICovCiAgICAgICAgICAgIGJ1ZltpKytdID0gMHhDMCB8IChjID4+PiA2KTsKICAgICAgICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgJiAweDNmKTsKICAgICAgICB9IGVsc2UgaWYgKGMgPCAweDEwMDAwKSB7CiAgICAgICAgICAgIC8qIHRocmVlIGJ5dGVzICovCiAgICAgICAgICAgIGJ1ZltpKytdID0gMHhFMCB8IChjID4+PiAxMik7CiAgICAgICAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjID4+PiA2ICYgMHgzZik7CiAgICAgICAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjICYgMHgzZik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLyogZm91ciBieXRlcyAqLwogICAgICAgICAgICBidWZbaSsrXSA9IDB4ZjAgfCAoYyA+Pj4gMTgpOwogICAgICAgICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyA+Pj4gMTIgJiAweDNmKTsKICAgICAgICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgPj4+IDYgJiAweDNmKTsKICAgICAgICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgJiAweDNmKTsKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuIGJ1ZjsKfTsKCi8vIENhbGN1bGF0ZSBtYXggcG9zc2libGUgcG9zaXRpb24gaW4gdXRmOCBidWZmZXIsCi8vIHRoYXQgd2lsbCBub3QgYnJlYWsgc2VxdWVuY2UuIElmIHRoYXQncyBub3QgcG9zc2libGUKLy8gLSAodmVyeSBzbWFsbCBsaW1pdHMpIHJldHVybiBtYXggc2l6ZSBhcyBpcy4KLy8KLy8gYnVmW10gLSB1dGY4IGJ5dGVzIGFycmF5Ci8vIG1heCAgIC0gbGVuZ3RoIGxpbWl0IChtYW5kYXRvcnkpOwp2YXIgdXRmOGJvcmRlciA9IGZ1bmN0aW9uKGJ1ZiwgbWF4KSB7CiAgICB2YXIgcG9zOwoKICAgIG1heCA9IG1heCB8fCBidWYubGVuZ3RoOwogICAgaWYgKG1heCA+IGJ1Zi5sZW5ndGgpIHsgbWF4ID0gYnVmLmxlbmd0aDsgfQoKICAgIC8vIGdvIGJhY2sgZnJvbSBsYXN0IHBvc2l0aW9uLCB1bnRpbCBzdGFydCBvZiBzZXF1ZW5jZSBmb3VuZAogICAgcG9zID0gbWF4LTE7CiAgICB3aGlsZSAocG9zID49IDAgJiYgKGJ1Zltwb3NdICYgMHhDMCkgPT09IDB4ODApIHsgcG9zLS07IH0KCiAgICAvLyBGdWNrdXAgLSB2ZXJ5IHNtYWxsIGFuZCBicm9rZW4gc2VxdWVuY2UsCiAgICAvLyByZXR1cm4gbWF4LCBiZWNhdXNlIHdlIHNob3VsZCByZXR1cm4gc29tZXRoaW5nIGFueXdheS4KICAgIGlmIChwb3MgPCAwKSB7IHJldHVybiBtYXg7IH0KCiAgICAvLyBJZiB3ZSBjYW1lIHRvIHN0YXJ0IG9mIGJ1ZmZlciAtIHRoYXQgbWVhbnMgdnVmZmVyIGlzIHRvbyBzbWFsbCwKICAgIC8vIHJldHVybiBtYXggdG9vLgogICAgaWYgKHBvcyA9PT0gMCkgeyByZXR1cm4gbWF4OyB9CgogICAgcmV0dXJuIChwb3MgKyBfdXRmOGxlbltidWZbcG9zXV0gPiBtYXgpID8gcG9zIDogbWF4Owp9OwoKLy8gY29udmVydCBhcnJheSB0byBzdHJpbmcKdmFyIGJ1ZjJzdHJpbmcgPSBmdW5jdGlvbiAoYnVmKSB7CiAgICB2YXIgc3RyLCBpLCBvdXQsIGMsIGNfbGVuOwogICAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGg7CgogICAgLy8gUmVzZXJ2ZSBtYXggcG9zc2libGUgbGVuZ3RoICgyIHdvcmRzIHBlciBjaGFyKQogICAgLy8gTkI6IGJ5IHVua25vd24gcmVhc29ucywgQXJyYXkgaXMgc2lnbmlmaWNhbnRseSBmYXN0ZXIgZm9yCiAgICAvLyAgICAgU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseSB0aGFuIFVpbnQxNkFycmF5LgogICAgdmFyIHV0ZjE2YnVmID0gbmV3IEFycmF5KGxlbioyKTsKCiAgICBmb3IgKG91dD0wLCBpPTA7IGk8bGVuOykgewogICAgICAgIGMgPSBidWZbaSsrXTsKICAgICAgICAvLyBxdWljayBwcm9jZXNzIGFzY2lpCiAgICAgICAgaWYgKGMgPCAweDgwKSB7IHV0ZjE2YnVmW291dCsrXSA9IGM7IGNvbnRpbnVlOyB9CgogICAgICAgIGNfbGVuID0gX3V0ZjhsZW5bY107CiAgICAgICAgLy8gc2tpcCA1ICYgNiBieXRlIGNvZGVzCiAgICAgICAgaWYgKGNfbGVuID4gNCkgeyB1dGYxNmJ1ZltvdXQrK10gPSAweGZmZmQ7IGkgKz0gY19sZW4tMTsgY29udGludWU7IH0KCiAgICAgICAgLy8gYXBwbHkgbWFzayBvbiBmaXJzdCBieXRlCiAgICAgICAgYyAmPSBjX2xlbiA9PT0gMiA/IDB4MWYgOiBjX2xlbiA9PT0gMyA/IDB4MGYgOiAweDA3OwogICAgICAgIC8vIGpvaW4gdGhlIHJlc3QKICAgICAgICB3aGlsZSAoY19sZW4gPiAxICYmIGkgPCBsZW4pIHsKICAgICAgICAgICAgYyA9IChjIDw8IDYpIHwgKGJ1ZltpKytdICYgMHgzZik7CiAgICAgICAgICAgIGNfbGVuLS07CiAgICAgICAgfQoKICAgICAgICAvLyB0ZXJtaW5hdGVkIGJ5IGVuZCBvZiBzdHJpbmc/CiAgICAgICAgaWYgKGNfbGVuID4gMSkgeyB1dGYxNmJ1ZltvdXQrK10gPSAweGZmZmQ7IGNvbnRpbnVlOyB9CgogICAgICAgIGlmIChjIDwgMHgxMDAwMCkgewogICAgICAgICAgICB1dGYxNmJ1ZltvdXQrK10gPSBjOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGMgLT0gMHgxMDAwMDsKICAgICAgICAgICAgdXRmMTZidWZbb3V0KytdID0gMHhkODAwIHwgKChjID4+IDEwKSAmIDB4M2ZmKTsKICAgICAgICAgICAgdXRmMTZidWZbb3V0KytdID0gMHhkYzAwIHwgKGMgJiAweDNmZik7CiAgICAgICAgfQogICAgfQoKICAgIC8vIHNocmlua0J1Zih1dGYxNmJ1Ziwgb3V0KQogICAgaWYgKHV0ZjE2YnVmLmxlbmd0aCAhPT0gb3V0KSB7CiAgICAgICAgaWYodXRmMTZidWYuc3ViYXJyYXkpIHsKICAgICAgICAgICAgdXRmMTZidWYgPSB1dGYxNmJ1Zi5zdWJhcnJheSgwLCBvdXQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHV0ZjE2YnVmLmxlbmd0aCA9IG91dDsKICAgICAgICB9CiAgICB9CgogICAgLy8gcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgdXRmMTZidWYpOwogICAgcmV0dXJuIHV0aWxzLmFwcGx5RnJvbUNoYXJDb2RlKHV0ZjE2YnVmKTsKfTsKCgovLyBUaGF0J3MgYWxsIGZvciB0aGUgcGFrbyBmdW5jdGlvbnMuCgoKLyoqCiAqIFRyYW5zZm9ybSBhIGphdmFzY3JpcHQgc3RyaW5nIGludG8gYW4gYXJyYXkgKHR5cGVkIGlmIHBvc3NpYmxlKSBvZiBieXRlcywKICogVVRGLTggZW5jb2RlZC4KICogQHBhcmFtIHtTdHJpbmd9IHN0ciB0aGUgc3RyaW5nIHRvIGVuY29kZQogKiBAcmV0dXJuIHtBcnJheXxVaW50OEFycmF5fEJ1ZmZlcn0gdGhlIFVURi04IGVuY29kZWQgc3RyaW5nLgogKi8KZXhwb3J0cy51dGY4ZW5jb2RlID0gZnVuY3Rpb24gdXRmOGVuY29kZShzdHIpIHsKICAgIGlmIChzdXBwb3J0Lm5vZGVidWZmZXIpIHsKICAgICAgICByZXR1cm4gbm9kZWpzVXRpbHMubmV3QnVmZmVyRnJvbShzdHIsICJ1dGYtOCIpOwogICAgfQoKICAgIHJldHVybiBzdHJpbmcyYnVmKHN0cik7Cn07CgoKLyoqCiAqIFRyYW5zZm9ybSBhIGJ5dGVzIGFycmF5IChvciBhIHJlcHJlc2VudGF0aW9uKSByZXByZXNlbnRpbmcgYW4gVVRGLTggZW5jb2RlZAogKiBzdHJpbmcgaW50byBhIGphdmFzY3JpcHQgc3RyaW5nLgogKiBAcGFyYW0ge0FycmF5fFVpbnQ4QXJyYXl8QnVmZmVyfSBidWYgdGhlIGRhdGEgZGUgZGVjb2RlCiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIGRlY29kZWQgc3RyaW5nLgogKi8KZXhwb3J0cy51dGY4ZGVjb2RlID0gZnVuY3Rpb24gdXRmOGRlY29kZShidWYpIHsKICAgIGlmIChzdXBwb3J0Lm5vZGVidWZmZXIpIHsKICAgICAgICByZXR1cm4gdXRpbHMudHJhbnNmb3JtVG8oIm5vZGVidWZmZXIiLCBidWYpLnRvU3RyaW5nKCJ1dGYtOCIpOwogICAgfQoKICAgIGJ1ZiA9IHV0aWxzLnRyYW5zZm9ybVRvKHN1cHBvcnQudWludDhhcnJheSA/ICJ1aW50OGFycmF5IiA6ICJhcnJheSIsIGJ1Zik7CgogICAgcmV0dXJuIGJ1ZjJzdHJpbmcoYnVmKTsKfTsKCi8qKgogKiBBIHdvcmtlciB0byBkZWNvZGUgdXRmOCBlbmNvZGVkIGJpbmFyeSBjaHVua3MgaW50byBzdHJpbmcgY2h1bmtzLgogKiBAY29uc3RydWN0b3IKICovCmZ1bmN0aW9uIFV0ZjhEZWNvZGVXb3JrZXIoKSB7CiAgICBHZW5lcmljV29ya2VyLmNhbGwodGhpcywgInV0Zi04IGRlY29kZSIpOwogICAgLy8gdGhlIGxhc3QgYnl0ZXMgaWYgYSBjaHVuayBkaWRuJ3QgZW5kIHdpdGggYSBjb21wbGV0ZSBjb2RlcG9pbnQuCiAgICB0aGlzLmxlZnRPdmVyID0gbnVsbDsKfQp1dGlscy5pbmhlcml0cyhVdGY4RGVjb2RlV29ya2VyLCBHZW5lcmljV29ya2VyKTsKCi8qKgogKiBAc2VlIEdlbmVyaWNXb3JrZXIucHJvY2Vzc0NodW5rCiAqLwpVdGY4RGVjb2RlV29ya2VyLnByb3RvdHlwZS5wcm9jZXNzQ2h1bmsgPSBmdW5jdGlvbiAoY2h1bmspIHsKCiAgICB2YXIgZGF0YSA9IHV0aWxzLnRyYW5zZm9ybVRvKHN1cHBvcnQudWludDhhcnJheSA/ICJ1aW50OGFycmF5IiA6ICJhcnJheSIsIGNodW5rLmRhdGEpOwoKICAgIC8vIDFzdCBzdGVwLCByZS11c2Ugd2hhdCdzIGxlZnQgb2YgdGhlIHByZXZpb3VzIGNodW5rCiAgICBpZiAodGhpcy5sZWZ0T3ZlciAmJiB0aGlzLmxlZnRPdmVyLmxlbmd0aCkgewogICAgICAgIGlmKHN1cHBvcnQudWludDhhcnJheSkgewogICAgICAgICAgICB2YXIgcHJldmlvdXNEYXRhID0gZGF0YTsKICAgICAgICAgICAgZGF0YSA9IG5ldyBVaW50OEFycmF5KHByZXZpb3VzRGF0YS5sZW5ndGggKyB0aGlzLmxlZnRPdmVyLmxlbmd0aCk7CiAgICAgICAgICAgIGRhdGEuc2V0KHRoaXMubGVmdE92ZXIsIDApOwogICAgICAgICAgICBkYXRhLnNldChwcmV2aW91c0RhdGEsIHRoaXMubGVmdE92ZXIubGVuZ3RoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkYXRhID0gdGhpcy5sZWZ0T3Zlci5jb25jYXQoZGF0YSk7CiAgICAgICAgfQogICAgICAgIHRoaXMubGVmdE92ZXIgPSBudWxsOwogICAgfQoKICAgIHZhciBuZXh0Qm91bmRhcnkgPSB1dGY4Ym9yZGVyKGRhdGEpOwogICAgdmFyIHVzYWJsZURhdGEgPSBkYXRhOwogICAgaWYgKG5leHRCb3VuZGFyeSAhPT0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpZiAoc3VwcG9ydC51aW50OGFycmF5KSB7CiAgICAgICAgICAgIHVzYWJsZURhdGEgPSBkYXRhLnN1YmFycmF5KDAsIG5leHRCb3VuZGFyeSk7CiAgICAgICAgICAgIHRoaXMubGVmdE92ZXIgPSBkYXRhLnN1YmFycmF5KG5leHRCb3VuZGFyeSwgZGF0YS5sZW5ndGgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVzYWJsZURhdGEgPSBkYXRhLnNsaWNlKDAsIG5leHRCb3VuZGFyeSk7CiAgICAgICAgICAgIHRoaXMubGVmdE92ZXIgPSBkYXRhLnNsaWNlKG5leHRCb3VuZGFyeSwgZGF0YS5sZW5ndGgpOwogICAgICAgIH0KICAgIH0KCiAgICB0aGlzLnB1c2goewogICAgICAgIGRhdGEgOiBleHBvcnRzLnV0ZjhkZWNvZGUodXNhYmxlRGF0YSksCiAgICAgICAgbWV0YSA6IGNodW5rLm1ldGEKICAgIH0pOwp9OwoKLyoqCiAqIEBzZWUgR2VuZXJpY1dvcmtlci5mbHVzaAogKi8KVXRmOERlY29kZVdvcmtlci5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7CiAgICBpZih0aGlzLmxlZnRPdmVyICYmIHRoaXMubGVmdE92ZXIubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5wdXNoKHsKICAgICAgICAgICAgZGF0YSA6IGV4cG9ydHMudXRmOGRlY29kZSh0aGlzLmxlZnRPdmVyKSwKICAgICAgICAgICAgbWV0YSA6IHt9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5sZWZ0T3ZlciA9IG51bGw7CiAgICB9Cn07CmV4cG9ydHMuVXRmOERlY29kZVdvcmtlciA9IFV0ZjhEZWNvZGVXb3JrZXI7CgovKioKICogQSB3b3JrZXIgdG8gZW5kY29kZSBzdHJpbmcgY2h1bmtzIGludG8gdXRmOCBlbmNvZGVkIGJpbmFyeSBjaHVua3MuCiAqIEBjb25zdHJ1Y3RvcgogKi8KZnVuY3Rpb24gVXRmOEVuY29kZVdvcmtlcigpIHsKICAgIEdlbmVyaWNXb3JrZXIuY2FsbCh0aGlzLCAidXRmLTggZW5jb2RlIik7Cn0KdXRpbHMuaW5oZXJpdHMoVXRmOEVuY29kZVdvcmtlciwgR2VuZXJpY1dvcmtlcik7CgovKioKICogQHNlZSBHZW5lcmljV29ya2VyLnByb2Nlc3NDaHVuawogKi8KVXRmOEVuY29kZVdvcmtlci5wcm90b3R5cGUucHJvY2Vzc0NodW5rID0gZnVuY3Rpb24gKGNodW5rKSB7CiAgICB0aGlzLnB1c2goewogICAgICAgIGRhdGEgOiBleHBvcnRzLnV0ZjhlbmNvZGUoY2h1bmsuZGF0YSksCiAgICAgICAgbWV0YSA6IGNodW5rLm1ldGEKICAgIH0pOwp9OwpleHBvcnRzLlV0ZjhFbmNvZGVXb3JrZXIgPSBVdGY4RW5jb2RlV29ya2VyOwoKfSx7Ii4vbm9kZWpzVXRpbHMiOjE0LCIuL3N0cmVhbS9HZW5lcmljV29ya2VyIjoyOCwiLi9zdXBwb3J0IjozMCwiLi91dGlscyI6MzJ9XSwzMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBzdXBwb3J0ID0gcmVxdWlyZSgnLi9zdXBwb3J0Jyk7CnZhciBiYXNlNjQgPSByZXF1aXJlKCcuL2Jhc2U2NCcpOwp2YXIgbm9kZWpzVXRpbHMgPSByZXF1aXJlKCcuL25vZGVqc1V0aWxzJyk7CnZhciBzZXRJbW1lZGlhdGUgPSByZXF1aXJlKCdzZXQtaW1tZWRpYXRlLXNoaW0nKTsKdmFyIGV4dGVybmFsID0gcmVxdWlyZSgiLi9leHRlcm5hbCIpOwoKCi8qKgogKiBDb252ZXJ0IGEgc3RyaW5nIHRoYXQgcGFzcyBhcyBhICJiaW5hcnkgc3RyaW5nIjogaXQgc2hvdWxkIHJlcHJlc2VudCBhIGJ5dGUKICogYXJyYXkgYnV0IG1heSBoYXZlID4gMjU1IGNoYXIgY29kZXMuIEJlIHN1cmUgdG8gdGFrZSBvbmx5IHRoZSBmaXJzdCBieXRlCiAqIGFuZCByZXR1cm5zIHRoZSBieXRlIGFycmF5LgogKiBAcGFyYW0ge1N0cmluZ30gc3RyIHRoZSBzdHJpbmcgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHtBcnJheXxVaW50OEFycmF5fSB0aGUgc3RyaW5nIGluIGEgYmluYXJ5IGZvcm1hdC4KICovCmZ1bmN0aW9uIHN0cmluZzJiaW5hcnkoc3RyKSB7CiAgICB2YXIgcmVzdWx0ID0gbnVsbDsKICAgIGlmIChzdXBwb3J0LnVpbnQ4YXJyYXkpIHsKICAgICAgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkoc3RyLmxlbmd0aCk7CiAgICB9IGVsc2UgewogICAgICByZXN1bHQgPSBuZXcgQXJyYXkoc3RyLmxlbmd0aCk7CiAgICB9CiAgICByZXR1cm4gc3RyaW5nVG9BcnJheUxpa2Uoc3RyLCByZXN1bHQpOwp9CgovKioKICogQ3JlYXRlIGEgbmV3IGJsb2Igd2l0aCB0aGUgZ2l2ZW4gY29udGVudCBhbmQgdGhlIGdpdmVuIHR5cGUuCiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5QnVmZmVyfSBwYXJ0IHRoZSBjb250ZW50IHRvIHB1dCBpbiB0aGUgYmxvYi4gRE8gTk9UIHVzZQogKiBhbiBVaW50OEFycmF5IGJlY2F1c2UgdGhlIHN0b2NrIGJyb3dzZXIgb2YgYW5kcm9pZCA0IHdvbid0IGFjY2VwdCBpdCAoaXQKICogd2lsbCBiZSBzaWxlbnRseSBjb252ZXJ0ZWQgdG8gYSBzdHJpbmcsICJbb2JqZWN0IFVpbnQ4QXJyYXldIikuCiAqCiAqIFVzZSBvbmx5IE9ORSBwYXJ0IHRvIGJ1aWxkIHRoZSBibG9iIHRvIGF2b2lkIGEgbWVtb3J5IGxlYWsgaW4gSUUxMSAvIEVkZ2U6CiAqIHdoZW4gYSBsYXJnZSBhbW91bnQgb2YgQXJyYXkgaXMgdXNlZCB0byBjcmVhdGUgdGhlIEJsb2IsIHRoZSBhbW91bnQgb2YKICogbWVtb3J5IGNvbnN1bWVkIGlzIG5lYXJseSAxMDAgdGltZXMgdGhlIG9yaWdpbmFsIGRhdGEgYW1vdW50LgogKgogKiBAcGFyYW0ge1N0cmluZ30gdHlwZSB0aGUgbWltZSB0eXBlIG9mIHRoZSBibG9iLgogKiBAcmV0dXJuIHtCbG9ifSB0aGUgY3JlYXRlZCBibG9iLgogKi8KZXhwb3J0cy5uZXdCbG9iID0gZnVuY3Rpb24ocGFydCwgdHlwZSkgewogICAgZXhwb3J0cy5jaGVja1N1cHBvcnQoImJsb2IiKTsKCiAgICB0cnkgewogICAgICAgIC8vIEJsb2IgY29uc3RydWN0b3IKICAgICAgICByZXR1cm4gbmV3IEJsb2IoW3BhcnRdLCB7CiAgICAgICAgICAgIHR5cGU6IHR5cGUKICAgICAgICB9KTsKICAgIH0KICAgIGNhdGNoIChlKSB7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIGRlcHJlY2F0ZWQsIGJyb3dzZXIgb25seSwgb2xkIHdheQogICAgICAgICAgICB2YXIgQnVpbGRlciA9IHNlbGYuQmxvYkJ1aWxkZXIgfHwgc2VsZi5XZWJLaXRCbG9iQnVpbGRlciB8fCBzZWxmLk1vekJsb2JCdWlsZGVyIHx8IHNlbGYuTVNCbG9iQnVpbGRlcjsKICAgICAgICAgICAgdmFyIGJ1aWxkZXIgPSBuZXcgQnVpbGRlcigpOwogICAgICAgICAgICBidWlsZGVyLmFwcGVuZChwYXJ0KTsKICAgICAgICAgICAgcmV0dXJuIGJ1aWxkZXIuZ2V0QmxvYih0eXBlKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKCiAgICAgICAgICAgIC8vIHdlbGwsIGZ1Y2sgPyEKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJCdWcgOiBjYW4ndCBjb25zdHJ1Y3QgdGhlIEJsb2IuIik7CiAgICAgICAgfQogICAgfQoKCn07Ci8qKgogKiBUaGUgaWRlbnRpdHkgZnVuY3Rpb24uCiAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dCB0aGUgaW5wdXQuCiAqIEByZXR1cm4ge09iamVjdH0gdGhlIHNhbWUgaW5wdXQuCiAqLwpmdW5jdGlvbiBpZGVudGl0eShpbnB1dCkgewogICAgcmV0dXJuIGlucHV0Owp9CgovKioKICogRmlsbCBpbiBhbiBhcnJheSB3aXRoIGEgc3RyaW5nLgogKiBAcGFyYW0ge1N0cmluZ30gc3RyIHRoZSBzdHJpbmcgdG8gdXNlLgogKiBAcGFyYW0ge0FycmF5fEFycmF5QnVmZmVyfFVpbnQ4QXJyYXl8QnVmZmVyfSBhcnJheSB0aGUgYXJyYXkgdG8gZmlsbCBpbiAod2lsbCBiZSBtdXRhdGVkKS4KICogQHJldHVybiB7QXJyYXl8QXJyYXlCdWZmZXJ8VWludDhBcnJheXxCdWZmZXJ9IHRoZSB1cGRhdGVkIGFycmF5LgogKi8KZnVuY3Rpb24gc3RyaW5nVG9BcnJheUxpa2Uoc3RyLCBhcnJheSkgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHsKICAgICAgICBhcnJheVtpXSA9IHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRjsKICAgIH0KICAgIHJldHVybiBhcnJheTsKfQoKLyoqCiAqIEFuIGhlbHBlciBmb3IgdGhlIGZ1bmN0aW9uIGFycmF5TGlrZVRvU3RyaW5nLgogKiBUaGlzIGNvbnRhaW5zIHN0YXRpYyBpbmZvcm1hdGlvbiBhbmQgZnVuY3Rpb25zIHRoYXQKICogY2FuIGJlIG9wdGltaXplZCBieSB0aGUgYnJvd3NlciBKSVQgY29tcGlsZXIuCiAqLwp2YXIgYXJyYXlUb1N0cmluZ0hlbHBlciA9IHsKICAgIC8qKgogICAgICogVHJhbnNmb3JtIGFuIGFycmF5IG9mIGludCBpbnRvIGEgc3RyaW5nLCBjaHVuayBieSBjaHVuay4KICAgICAqIFNlZSB0aGUgcGVyZm9ybWFuY2VzIG5vdGVzIG9uIGFycmF5TGlrZVRvU3RyaW5nLgogICAgICogQHBhcmFtIHtBcnJheXxBcnJheUJ1ZmZlcnxVaW50OEFycmF5fEJ1ZmZlcn0gYXJyYXkgdGhlIGFycmF5IHRvIHRyYW5zZm9ybS4KICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIHRoZSB0eXBlIG9mIHRoZSBhcnJheS4KICAgICAqIEBwYXJhbSB7SW50ZWdlcn0gY2h1bmsgdGhlIGNodW5rIHNpemUuCiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSByZXN1bHRpbmcgc3RyaW5nLgogICAgICogQHRocm93cyBFcnJvciBpZiB0aGUgY2h1bmsgaXMgdG9vIGJpZyBmb3IgdGhlIHN0YWNrLgogICAgICovCiAgICBzdHJpbmdpZnlCeUNodW5rOiBmdW5jdGlvbihhcnJheSwgdHlwZSwgY2h1bmspIHsKICAgICAgICB2YXIgcmVzdWx0ID0gW10sIGsgPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7CiAgICAgICAgLy8gc2hvcnRjdXQKICAgICAgICBpZiAobGVuIDw9IGNodW5rKSB7CiAgICAgICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGFycmF5KTsKICAgICAgICB9CiAgICAgICAgd2hpbGUgKGsgPCBsZW4pIHsKICAgICAgICAgICAgaWYgKHR5cGUgPT09ICJhcnJheSIgfHwgdHlwZSA9PT0gIm5vZGVidWZmZXIiKSB7CiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGFycmF5LnNsaWNlKGssIE1hdGgubWluKGsgKyBjaHVuaywgbGVuKSkpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgYXJyYXkuc3ViYXJyYXkoaywgTWF0aC5taW4oayArIGNodW5rLCBsZW4pKSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGsgKz0gY2h1bms7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXN1bHQuam9pbigiIik7CiAgICB9LAogICAgLyoqCiAgICAgKiBDYWxsIFN0cmluZy5mcm9tQ2hhckNvZGUgb24gZXZlcnkgaXRlbSBpbiB0aGUgYXJyYXkuCiAgICAgKiBUaGlzIGlzIHRoZSBuYWl2ZSBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggZ2VuZXJhdGUgQSBMT1Qgb2YgaW50ZXJtZWRpYXRlIHN0cmluZy4KICAgICAqIFRoaXMgc2hvdWxkIGJlIHVzZWQgd2hlbiBldmVyeXRoaW5nIGVsc2UgZmFpbC4KICAgICAqIEBwYXJhbSB7QXJyYXl8QXJyYXlCdWZmZXJ8VWludDhBcnJheXxCdWZmZXJ9IGFycmF5IHRoZSBhcnJheSB0byB0cmFuc2Zvcm0uCiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSByZXN1bHQuCiAgICAgKi8KICAgIHN0cmluZ2lmeUJ5Q2hhcjogZnVuY3Rpb24oYXJyYXkpewogICAgICAgIHZhciByZXN1bHRTdHIgPSAiIjsKICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgcmVzdWx0U3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYXJyYXlbaV0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0U3RyOwogICAgfSwKICAgIGFwcGx5Q2FuQmVVc2VkIDogewogICAgICAgIC8qKgogICAgICAgICAqIHRydWUgaWYgdGhlIGJyb3dzZXIgYWNjZXB0cyB0byB1c2UgU3RyaW5nLmZyb21DaGFyQ29kZSBvbiBVaW50OEFycmF5CiAgICAgICAgICovCiAgICAgICAgdWludDhhcnJheSA6IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1cm4gc3VwcG9ydC51aW50OGFycmF5ICYmIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkoMSkpLmxlbmd0aCA9PT0gMTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfSkoKSwKICAgICAgICAvKioKICAgICAgICAgKiB0cnVlIGlmIHRoZSBicm93c2VyIGFjY2VwdHMgdG8gdXNlIFN0cmluZy5mcm9tQ2hhckNvZGUgb24gbm9kZWpzIEJ1ZmZlci4KICAgICAgICAgKi8KICAgICAgICBub2RlYnVmZmVyIDogKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiBzdXBwb3J0Lm5vZGVidWZmZXIgJiYgU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBub2RlanNVdGlscy5hbGxvY0J1ZmZlcigxKSkubGVuZ3RoID09PSAxOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9KSgpCiAgICB9Cn07CgovKioKICogVHJhbnNmb3JtIGFuIGFycmF5LWxpa2Ugb2JqZWN0IHRvIGEgc3RyaW5nLgogKiBAcGFyYW0ge0FycmF5fEFycmF5QnVmZmVyfFVpbnQ4QXJyYXl8QnVmZmVyfSBhcnJheSB0aGUgYXJyYXkgdG8gdHJhbnNmb3JtLgogKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSByZXN1bHQuCiAqLwpmdW5jdGlvbiBhcnJheUxpa2VUb1N0cmluZyhhcnJheSkgewogICAgLy8gUGVyZm9ybWFuY2VzIG5vdGVzIDoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGFycmF5KSBpcyB0aGUgZmFzdGVzdCwgc2VlCiAgICAvLyBzZWUgaHR0cDovL2pzcGVyZi5jb20vY29udmVydGluZy1hLXVpbnQ4YXJyYXktdG8tYS1zdHJpbmcvMgogICAgLy8gYnV0IHRoZSBzdGFjayBpcyBsaW1pdGVkIChhbmQgd2UgY2FuIGdldCBodWdlIGFycmF5cyAhKS4KICAgIC8vCiAgICAvLyByZXN1bHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShhcnJheVtpXSk7IGdlbmVyYXRlIHRvbyBtYW55IHN0cmluZ3MgIQogICAgLy8KICAgIC8vIFRoaXMgY29kZSBpcyBpbnNwaXJlZCBieSBodHRwOi8vanNwZXJmLmNvbS9hcnJheWJ1ZmZlci10by1zdHJpbmctYXBwbHktcGVyZm9ybWFuY2UvMgogICAgLy8gVE9ETyA6IHdlIG5vdyBoYXZlIHdvcmtlcnMgdGhhdCBzcGxpdCB0aGUgd29yay4gRG8gd2Ugc3RpbGwgbmVlZCB0aGF0ID8KICAgIHZhciBjaHVuayA9IDY1NTM2LAogICAgICAgIHR5cGUgPSBleHBvcnRzLmdldFR5cGVPZihhcnJheSksCiAgICAgICAgY2FuVXNlQXBwbHkgPSB0cnVlOwogICAgaWYgKHR5cGUgPT09ICJ1aW50OGFycmF5IikgewogICAgICAgIGNhblVzZUFwcGx5ID0gYXJyYXlUb1N0cmluZ0hlbHBlci5hcHBseUNhbkJlVXNlZC51aW50OGFycmF5OwogICAgfSBlbHNlIGlmICh0eXBlID09PSAibm9kZWJ1ZmZlciIpIHsKICAgICAgICBjYW5Vc2VBcHBseSA9IGFycmF5VG9TdHJpbmdIZWxwZXIuYXBwbHlDYW5CZVVzZWQubm9kZWJ1ZmZlcjsKICAgIH0KCiAgICBpZiAoY2FuVXNlQXBwbHkpIHsKICAgICAgICB3aGlsZSAoY2h1bmsgPiAxKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXlUb1N0cmluZ0hlbHBlci5zdHJpbmdpZnlCeUNodW5rKGFycmF5LCB0eXBlLCBjaHVuayk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIGNodW5rID0gTWF0aC5mbG9vcihjaHVuayAvIDIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8vIG5vIGFwcGx5IG9yIGNodW5rIGVycm9yIDogc2xvdyBhbmQgcGFpbmZ1bCBhbGdvcml0aG0KICAgIC8vIGRlZmF1bHQgYnJvd3NlciBvbiBhbmRyb2lkIDQuKgogICAgcmV0dXJuIGFycmF5VG9TdHJpbmdIZWxwZXIuc3RyaW5naWZ5QnlDaGFyKGFycmF5KTsKfQoKZXhwb3J0cy5hcHBseUZyb21DaGFyQ29kZSA9IGFycmF5TGlrZVRvU3RyaW5nOwoKCi8qKgogKiBDb3B5IHRoZSBkYXRhIGZyb20gYW4gYXJyYXktbGlrZSB0byBhbiBvdGhlciBhcnJheS1saWtlLgogKiBAcGFyYW0ge0FycmF5fEFycmF5QnVmZmVyfFVpbnQ4QXJyYXl8QnVmZmVyfSBhcnJheUZyb20gdGhlIG9yaWdpbiBhcnJheS4KICogQHBhcmFtIHtBcnJheXxBcnJheUJ1ZmZlcnxVaW50OEFycmF5fEJ1ZmZlcn0gYXJyYXlUbyB0aGUgZGVzdGluYXRpb24gYXJyYXkgd2hpY2ggd2lsbCBiZSBtdXRhdGVkLgogKiBAcmV0dXJuIHtBcnJheXxBcnJheUJ1ZmZlcnxVaW50OEFycmF5fEJ1ZmZlcn0gdGhlIHVwZGF0ZWQgZGVzdGluYXRpb24gYXJyYXkuCiAqLwpmdW5jdGlvbiBhcnJheUxpa2VUb0FycmF5TGlrZShhcnJheUZyb20sIGFycmF5VG8pIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXlGcm9tLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgYXJyYXlUb1tpXSA9IGFycmF5RnJvbVtpXTsKICAgIH0KICAgIHJldHVybiBhcnJheVRvOwp9CgovLyBhIG1hdHJpeCBjb250YWluaW5nIGZ1bmN0aW9ucyB0byB0cmFuc2Zvcm0gZXZlcnl0aGluZyBpbnRvIGV2ZXJ5dGhpbmcuCnZhciB0cmFuc2Zvcm0gPSB7fTsKCi8vIHN0cmluZyB0byA/CnRyYW5zZm9ybVsic3RyaW5nIl0gPSB7CiAgICAic3RyaW5nIjogaWRlbnRpdHksCiAgICAiYXJyYXkiOiBmdW5jdGlvbihpbnB1dCkgewogICAgICAgIHJldHVybiBzdHJpbmdUb0FycmF5TGlrZShpbnB1dCwgbmV3IEFycmF5KGlucHV0Lmxlbmd0aCkpOwogICAgfSwKICAgICJhcnJheWJ1ZmZlciI6IGZ1bmN0aW9uKGlucHV0KSB7CiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybVsic3RyaW5nIl1bInVpbnQ4YXJyYXkiXShpbnB1dCkuYnVmZmVyOwogICAgfSwKICAgICJ1aW50OGFycmF5IjogZnVuY3Rpb24oaW5wdXQpIHsKICAgICAgICByZXR1cm4gc3RyaW5nVG9BcnJheUxpa2UoaW5wdXQsIG5ldyBVaW50OEFycmF5KGlucHV0Lmxlbmd0aCkpOwogICAgfSwKICAgICJub2RlYnVmZmVyIjogZnVuY3Rpb24oaW5wdXQpIHsKICAgICAgICByZXR1cm4gc3RyaW5nVG9BcnJheUxpa2UoaW5wdXQsIG5vZGVqc1V0aWxzLmFsbG9jQnVmZmVyKGlucHV0Lmxlbmd0aCkpOwogICAgfQp9OwoKLy8gYXJyYXkgdG8gPwp0cmFuc2Zvcm1bImFycmF5Il0gPSB7CiAgICAic3RyaW5nIjogYXJyYXlMaWtlVG9TdHJpbmcsCiAgICAiYXJyYXkiOiBpZGVudGl0eSwKICAgICJhcnJheWJ1ZmZlciI6IGZ1bmN0aW9uKGlucHV0KSB7CiAgICAgICAgcmV0dXJuIChuZXcgVWludDhBcnJheShpbnB1dCkpLmJ1ZmZlcjsKICAgIH0sCiAgICAidWludDhhcnJheSI6IGZ1bmN0aW9uKGlucHV0KSB7CiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGlucHV0KTsKICAgIH0sCiAgICAibm9kZWJ1ZmZlciI6IGZ1bmN0aW9uKGlucHV0KSB7CiAgICAgICAgcmV0dXJuIG5vZGVqc1V0aWxzLm5ld0J1ZmZlckZyb20oaW5wdXQpOwogICAgfQp9OwoKLy8gYXJyYXlidWZmZXIgdG8gPwp0cmFuc2Zvcm1bImFycmF5YnVmZmVyIl0gPSB7CiAgICAic3RyaW5nIjogZnVuY3Rpb24oaW5wdXQpIHsKICAgICAgICByZXR1cm4gYXJyYXlMaWtlVG9TdHJpbmcobmV3IFVpbnQ4QXJyYXkoaW5wdXQpKTsKICAgIH0sCiAgICAiYXJyYXkiOiBmdW5jdGlvbihpbnB1dCkgewogICAgICAgIHJldHVybiBhcnJheUxpa2VUb0FycmF5TGlrZShuZXcgVWludDhBcnJheShpbnB1dCksIG5ldyBBcnJheShpbnB1dC5ieXRlTGVuZ3RoKSk7CiAgICB9LAogICAgImFycmF5YnVmZmVyIjogaWRlbnRpdHksCiAgICAidWludDhhcnJheSI6IGZ1bmN0aW9uKGlucHV0KSB7CiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGlucHV0KTsKICAgIH0sCiAgICAibm9kZWJ1ZmZlciI6IGZ1bmN0aW9uKGlucHV0KSB7CiAgICAgICAgcmV0dXJuIG5vZGVqc1V0aWxzLm5ld0J1ZmZlckZyb20obmV3IFVpbnQ4QXJyYXkoaW5wdXQpKTsKICAgIH0KfTsKCi8vIHVpbnQ4YXJyYXkgdG8gPwp0cmFuc2Zvcm1bInVpbnQ4YXJyYXkiXSA9IHsKICAgICJzdHJpbmciOiBhcnJheUxpa2VUb1N0cmluZywKICAgICJhcnJheSI6IGZ1bmN0aW9uKGlucHV0KSB7CiAgICAgICAgcmV0dXJuIGFycmF5TGlrZVRvQXJyYXlMaWtlKGlucHV0LCBuZXcgQXJyYXkoaW5wdXQubGVuZ3RoKSk7CiAgICB9LAogICAgImFycmF5YnVmZmVyIjogZnVuY3Rpb24oaW5wdXQpIHsKICAgICAgICByZXR1cm4gaW5wdXQuYnVmZmVyOwogICAgfSwKICAgICJ1aW50OGFycmF5IjogaWRlbnRpdHksCiAgICAibm9kZWJ1ZmZlciI6IGZ1bmN0aW9uKGlucHV0KSB7CiAgICAgICAgcmV0dXJuIG5vZGVqc1V0aWxzLm5ld0J1ZmZlckZyb20oaW5wdXQpOwogICAgfQp9OwoKLy8gbm9kZWJ1ZmZlciB0byA/CnRyYW5zZm9ybVsibm9kZWJ1ZmZlciJdID0gewogICAgInN0cmluZyI6IGFycmF5TGlrZVRvU3RyaW5nLAogICAgImFycmF5IjogZnVuY3Rpb24oaW5wdXQpIHsKICAgICAgICByZXR1cm4gYXJyYXlMaWtlVG9BcnJheUxpa2UoaW5wdXQsIG5ldyBBcnJheShpbnB1dC5sZW5ndGgpKTsKICAgIH0sCiAgICAiYXJyYXlidWZmZXIiOiBmdW5jdGlvbihpbnB1dCkgewogICAgICAgIHJldHVybiB0cmFuc2Zvcm1bIm5vZGVidWZmZXIiXVsidWludDhhcnJheSJdKGlucHV0KS5idWZmZXI7CiAgICB9LAogICAgInVpbnQ4YXJyYXkiOiBmdW5jdGlvbihpbnB1dCkgewogICAgICAgIHJldHVybiBhcnJheUxpa2VUb0FycmF5TGlrZShpbnB1dCwgbmV3IFVpbnQ4QXJyYXkoaW5wdXQubGVuZ3RoKSk7CiAgICB9LAogICAgIm5vZGVidWZmZXIiOiBpZGVudGl0eQp9OwoKLyoqCiAqIFRyYW5zZm9ybSBhbiBpbnB1dCBpbnRvIGFueSB0eXBlLgogKiBUaGUgc3VwcG9ydGVkIG91dHB1dCB0eXBlIGFyZSA6IHN0cmluZywgYXJyYXksIHVpbnQ4YXJyYXksIGFycmF5YnVmZmVyLCBub2RlYnVmZmVyLgogKiBJZiBubyBvdXRwdXQgdHlwZSBpcyBzcGVjaWZpZWQsIHRoZSB1bm1vZGlmaWVkIGlucHV0IHdpbGwgYmUgcmV0dXJuZWQuCiAqIEBwYXJhbSB7U3RyaW5nfSBvdXRwdXRUeXBlIHRoZSBvdXRwdXQgdHlwZS4KICogQHBhcmFtIHtTdHJpbmd8QXJyYXl8QXJyYXlCdWZmZXJ8VWludDhBcnJheXxCdWZmZXJ9IGlucHV0IHRoZSBpbnB1dCB0byBjb252ZXJ0LgogKiBAdGhyb3dzIHtFcnJvcn0gYW4gRXJyb3IgaWYgdGhlIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHRoZSByZXF1ZXN0ZWQgb3V0cHV0IHR5cGUuCiAqLwpleHBvcnRzLnRyYW5zZm9ybVRvID0gZnVuY3Rpb24ob3V0cHV0VHlwZSwgaW5wdXQpIHsKICAgIGlmICghaW5wdXQpIHsKICAgICAgICAvLyB1bmRlZmluZWQsIG51bGwsIGV0YwogICAgICAgIC8vIGFuIGVtcHR5IHN0cmluZyB3b24ndCBoYXJtLgogICAgICAgIGlucHV0ID0gIiI7CiAgICB9CiAgICBpZiAoIW91dHB1dFR5cGUpIHsKICAgICAgICByZXR1cm4gaW5wdXQ7CiAgICB9CiAgICBleHBvcnRzLmNoZWNrU3VwcG9ydChvdXRwdXRUeXBlKTsKICAgIHZhciBpbnB1dFR5cGUgPSBleHBvcnRzLmdldFR5cGVPZihpbnB1dCk7CiAgICB2YXIgcmVzdWx0ID0gdHJhbnNmb3JtW2lucHV0VHlwZV1bb3V0cHV0VHlwZV0oaW5wdXQpOwogICAgcmV0dXJuIHJlc3VsdDsKfTsKCi8qKgogKiBSZXR1cm4gdGhlIHR5cGUgb2YgdGhlIGlucHV0LgogKiBUaGUgdHlwZSB3aWxsIGJlIGluIGEgZm9ybWF0IHZhbGlkIGZvciBKU1ppcC51dGlscy50cmFuc2Zvcm1UbyA6IHN0cmluZywgYXJyYXksIHVpbnQ4YXJyYXksIGFycmF5YnVmZmVyLgogKiBAcGFyYW0ge09iamVjdH0gaW5wdXQgdGhlIGlucHV0IHRvIGlkZW50aWZ5LgogKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSAobG93ZXJjYXNlKSB0eXBlIG9mIHRoZSBpbnB1dC4KICovCmV4cG9ydHMuZ2V0VHlwZU9mID0gZnVuY3Rpb24oaW5wdXQpIHsKICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICJzdHJpbmciKSB7CiAgICAgICAgcmV0dXJuICJzdHJpbmciOwogICAgfQogICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbnB1dCkgPT09ICJbb2JqZWN0IEFycmF5XSIpIHsKICAgICAgICByZXR1cm4gImFycmF5IjsKICAgIH0KICAgIGlmIChzdXBwb3J0Lm5vZGVidWZmZXIgJiYgbm9kZWpzVXRpbHMuaXNCdWZmZXIoaW5wdXQpKSB7CiAgICAgICAgcmV0dXJuICJub2RlYnVmZmVyIjsKICAgIH0KICAgIGlmIChzdXBwb3J0LnVpbnQ4YXJyYXkgJiYgaW5wdXQgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7CiAgICAgICAgcmV0dXJuICJ1aW50OGFycmF5IjsKICAgIH0KICAgIGlmIChzdXBwb3J0LmFycmF5YnVmZmVyICYmIGlucHV0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHsKICAgICAgICByZXR1cm4gImFycmF5YnVmZmVyIjsKICAgIH0KfTsKCi8qKgogKiBUaHJvdyBhbiBleGNlcHRpb24gaWYgdGhlIHR5cGUgaXMgbm90IHN1cHBvcnRlZC4KICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgdGhlIHR5cGUgdG8gY2hlY2suCiAqIEB0aHJvd3Mge0Vycm9yfSBhbiBFcnJvciBpZiB0aGUgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgdGhlIHJlcXVlc3RlZCB0eXBlLgogKi8KZXhwb3J0cy5jaGVja1N1cHBvcnQgPSBmdW5jdGlvbih0eXBlKSB7CiAgICB2YXIgc3VwcG9ydGVkID0gc3VwcG9ydFt0eXBlLnRvTG93ZXJDYXNlKCldOwogICAgaWYgKCFzdXBwb3J0ZWQpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IodHlwZSArICIgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIHBsYXRmb3JtIik7CiAgICB9Cn07CgpleHBvcnRzLk1BWF9WQUxVRV8xNkJJVFMgPSA2NTUzNTsKZXhwb3J0cy5NQVhfVkFMVUVfMzJCSVRTID0gLTE7IC8vIHdlbGwsICJceEZGXHhGRlx4RkZceEZGXHhGRlx4RkZceEZGXHhGRiIgaXMgcGFyc2VkIGFzIC0xCgovKioKICogUHJldHRpZnkgYSBzdHJpbmcgcmVhZCBhcyBiaW5hcnkuCiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgdGhlIHN0cmluZyB0byBwcmV0dGlmeS4KICogQHJldHVybiB7c3RyaW5nfSBhIHByZXR0eSBzdHJpbmcuCiAqLwpleHBvcnRzLnByZXR0eSA9IGZ1bmN0aW9uKHN0cikgewogICAgdmFyIHJlcyA9ICcnLAogICAgICAgIGNvZGUsIGk7CiAgICBmb3IgKGkgPSAwOyBpIDwgKHN0ciB8fCAiIikubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7CiAgICAgICAgcmVzICs9ICdcXHgnICsgKGNvZGUgPCAxNiA/ICIwIiA6ICIiKSArIGNvZGUudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7CiAgICB9CiAgICByZXR1cm4gcmVzOwp9OwoKLyoqCiAqIERlZmVyIHRoZSBjYWxsIG9mIGEgZnVuY3Rpb24uCiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIHRoZSBmdW5jdGlvbiB0byBjYWxsIGFzeW5jaHJvbm91c2x5LgogKiBAcGFyYW0ge0FycmF5fSBhcmdzIHRoZSBhcmd1bWVudHMgdG8gZ2l2ZSB0byB0aGUgY2FsbGJhY2suCiAqLwpleHBvcnRzLmRlbGF5ID0gZnVuY3Rpb24oY2FsbGJhY2ssIGFyZ3MsIHNlbGYpIHsKICAgIHNldEltbWVkaWF0ZShmdW5jdGlvbiAoKSB7CiAgICAgICAgY2FsbGJhY2suYXBwbHkoc2VsZiB8fCBudWxsLCBhcmdzIHx8IFtdKTsKICAgIH0pOwp9OwoKLyoqCiAqIEV4dGVuZHMgYSBwcm90b3R5cGUgd2l0aCBhbiBvdGhlciwgd2l0aG91dCBjYWxsaW5nIGEgY29uc3RydWN0b3Igd2l0aAogKiBzaWRlIGVmZmVjdHMuIEluc3BpcmVkIGJ5IG5vZGVqcycgYHV0aWxzLmluaGVyaXRzYAogKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdG9yIHRoZSBjb25zdHJ1Y3RvciB0byBhdWdtZW50CiAqIEBwYXJhbSB7RnVuY3Rpb259IHN1cGVyQ3RvciB0aGUgcGFyZW50IGNvbnN0cnVjdG9yIHRvIHVzZQogKi8KZXhwb3J0cy5pbmhlcml0cyA9IGZ1bmN0aW9uIChjdG9yLCBzdXBlckN0b3IpIHsKICAgIHZhciBPYmogPSBmdW5jdGlvbigpIHt9OwogICAgT2JqLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGU7CiAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBPYmooKTsKfTsKCi8qKgogKiBNZXJnZSB0aGUgb2JqZWN0cyBwYXNzZWQgYXMgcGFyYW1ldGVycyBpbnRvIGEgbmV3IG9uZS4KICogQHByaXZhdGUKICogQHBhcmFtIHsuLi5PYmplY3R9IHZhcl9hcmdzIEFsbCBvYmplY3RzIHRvIG1lcmdlLgogKiBAcmV0dXJuIHtPYmplY3R9IGEgbmV3IG9iamVjdCB3aXRoIHRoZSBkYXRhIG9mIHRoZSBvdGhlcnMuCiAqLwpleHBvcnRzLmV4dGVuZCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIHJlc3VsdCA9IHt9LCBpLCBhdHRyOwogICAgZm9yIChpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyAvLyBhcmd1bWVudHMgaXMgbm90IGVudW1lcmFibGUgaW4gc29tZSBicm93c2VycwogICAgICAgIGZvciAoYXR0ciBpbiBhcmd1bWVudHNbaV0pIHsKICAgICAgICAgICAgaWYgKGFyZ3VtZW50c1tpXS5oYXNPd25Qcm9wZXJ0eShhdHRyKSAmJiB0eXBlb2YgcmVzdWx0W2F0dHJdID09PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgICAgcmVzdWx0W2F0dHJdID0gYXJndW1lbnRzW2ldW2F0dHJdOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKfTsKCi8qKgogKiBUcmFuc2Zvcm0gYXJiaXRyYXJ5IGNvbnRlbnQgaW50byBhIFByb21pc2UuCiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIGEgbmFtZSBmb3IgdGhlIGNvbnRlbnQgYmVpbmcgcHJvY2Vzc2VkLgogKiBAcGFyYW0ge09iamVjdH0gaW5wdXREYXRhIHRoZSBjb250ZW50IHRvIHByb2Nlc3MuCiAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNCaW5hcnkgdHJ1ZSBpZiB0aGUgY29udGVudCBpcyBub3QgYW4gdW5pY29kZSBzdHJpbmcKICogQHBhcmFtIHtCb29sZWFufSBpc09wdGltaXplZEJpbmFyeVN0cmluZyB0cnVlIGlmIHRoZSBzdHJpbmcgY29udGVudCBvbmx5IGhhcyBvbmUgYnl0ZSBwZXIgY2hhcmFjdGVyLgogKiBAcGFyYW0ge0Jvb2xlYW59IGlzQmFzZTY0IHRydWUgaWYgdGhlIHN0cmluZyBjb250ZW50IGlzIGVuY29kZWQgd2l0aCBiYXNlNjQuCiAqIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSBpbiBhIGZvcm1hdCB1c2FibGUgYnkgSlNaaXAuCiAqLwpleHBvcnRzLnByZXBhcmVDb250ZW50ID0gZnVuY3Rpb24obmFtZSwgaW5wdXREYXRhLCBpc0JpbmFyeSwgaXNPcHRpbWl6ZWRCaW5hcnlTdHJpbmcsIGlzQmFzZTY0KSB7CgogICAgLy8gaWYgaW5wdXREYXRhIGlzIGFscmVhZHkgYSBwcm9taXNlLCB0aGlzIGZsYXR0ZW4gaXQuCiAgICB2YXIgcHJvbWlzZSA9IGV4dGVybmFsLlByb21pc2UucmVzb2x2ZShpbnB1dERhdGEpLnRoZW4oZnVuY3Rpb24oZGF0YSkgewoKCiAgICAgICAgdmFyIGlzQmxvYiA9IHN1cHBvcnQuYmxvYiAmJiAoZGF0YSBpbnN0YW5jZW9mIEJsb2IgfHwgWydbb2JqZWN0IEZpbGVdJywgJ1tvYmplY3QgQmxvYl0nXS5pbmRleE9mKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChkYXRhKSkgIT09IC0xKTsKCiAgICAgICAgaWYgKGlzQmxvYiAmJiB0eXBlb2YgRmlsZVJlYWRlciAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBleHRlcm5hbC5Qcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShlLnRhcmdldC5yZXN1bHQpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIHJlamVjdChlLnRhcmdldC5lcnJvcik7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGRhdGEpOwogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICB2YXIgZGF0YVR5cGUgPSBleHBvcnRzLmdldFR5cGVPZihkYXRhKTsKCiAgICAgICAgaWYgKCFkYXRhVHlwZSkgewogICAgICAgICAgICByZXR1cm4gZXh0ZXJuYWwuUHJvbWlzZS5yZWplY3QoCiAgICAgICAgICAgICAgICBuZXcgRXJyb3IoIkNhbid0IHJlYWQgdGhlIGRhdGEgb2YgJyIgKyBuYW1lICsgIicuIElzIGl0ICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICJpbiBhIHN1cHBvcnRlZCBKYXZhU2NyaXB0IHR5cGUgKFN0cmluZywgQmxvYiwgQXJyYXlCdWZmZXIsIGV0YykgPyIpCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIC8vIHNwZWNpYWwgY2FzZSA6IGl0J3Mgd2F5IGVhc2llciB0byB3b3JrIHdpdGggVWludDhBcnJheSB0aGFuIHdpdGggQXJyYXlCdWZmZXIKICAgICAgICBpZiAoZGF0YVR5cGUgPT09ICJhcnJheWJ1ZmZlciIpIHsKICAgICAgICAgICAgZGF0YSA9IGV4cG9ydHMudHJhbnNmb3JtVG8oInVpbnQ4YXJyYXkiLCBkYXRhKTsKICAgICAgICB9IGVsc2UgaWYgKGRhdGFUeXBlID09PSAic3RyaW5nIikgewogICAgICAgICAgICBpZiAoaXNCYXNlNjQpIHsKICAgICAgICAgICAgICAgIGRhdGEgPSBiYXNlNjQuZGVjb2RlKGRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGlzQmluYXJ5KSB7CiAgICAgICAgICAgICAgICAvLyBvcHRpbWl6ZWRCaW5hcnlTdHJpbmcgPT09IHRydWUgbWVhbnMgdGhhdCB0aGUgZmlsZSBoYXMgYWxyZWFkeSBiZWVuIGZpbHRlcmVkIHdpdGggYSAweEZGIG1hc2sKICAgICAgICAgICAgICAgIGlmIChpc09wdGltaXplZEJpbmFyeVN0cmluZyAhPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgYSBzdHJpbmcsIG5vdCBpbiBhIGJhc2U2NCBmb3JtYXQuCiAgICAgICAgICAgICAgICAgICAgLy8gQmUgc3VyZSB0aGF0IHRoaXMgaXMgYSBjb3JyZWN0ICJiaW5hcnkgc3RyaW5nIgogICAgICAgICAgICAgICAgICAgIGRhdGEgPSBzdHJpbmcyYmluYXJ5KGRhdGEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBkYXRhOwogICAgfSk7Cn07Cgp9LHsiLi9iYXNlNjQiOjEsIi4vZXh0ZXJuYWwiOjYsIi4vbm9kZWpzVXRpbHMiOjE0LCIuL3N1cHBvcnQiOjMwLCJzZXQtaW1tZWRpYXRlLXNoaW0iOjU0fV0sMzM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CnZhciByZWFkZXJGb3IgPSByZXF1aXJlKCcuL3JlYWRlci9yZWFkZXJGb3InKTsKdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpOwp2YXIgc2lnID0gcmVxdWlyZSgnLi9zaWduYXR1cmUnKTsKdmFyIFppcEVudHJ5ID0gcmVxdWlyZSgnLi96aXBFbnRyeScpOwp2YXIgdXRmOCA9IHJlcXVpcmUoJy4vdXRmOCcpOwp2YXIgc3VwcG9ydCA9IHJlcXVpcmUoJy4vc3VwcG9ydCcpOwovLyAgY2xhc3MgWmlwRW50cmllcyB7e3sKLyoqCiAqIEFsbCB0aGUgZW50cmllcyBpbiB0aGUgemlwIGZpbGUuCiAqIEBjb25zdHJ1Y3RvcgogKiBAcGFyYW0ge09iamVjdH0gbG9hZE9wdGlvbnMgT3B0aW9ucyBmb3IgbG9hZGluZyB0aGUgc3RyZWFtLgogKi8KZnVuY3Rpb24gWmlwRW50cmllcyhsb2FkT3B0aW9ucykgewogICAgdGhpcy5maWxlcyA9IFtdOwogICAgdGhpcy5sb2FkT3B0aW9ucyA9IGxvYWRPcHRpb25zOwp9ClppcEVudHJpZXMucHJvdG90eXBlID0gewogICAgLyoqCiAgICAgKiBDaGVjayB0aGF0IHRoZSByZWFkZXIgaXMgb24gdGhlIHNwZWNpZmllZCBzaWduYXR1cmUuCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwZWN0ZWRTaWduYXR1cmUgdGhlIGV4cGVjdGVkIHNpZ25hdHVyZS4KICAgICAqIEB0aHJvd3Mge0Vycm9yfSBpZiBpdCBpcyBhbiBvdGhlciBzaWduYXR1cmUuCiAgICAgKi8KICAgIGNoZWNrU2lnbmF0dXJlOiBmdW5jdGlvbihleHBlY3RlZFNpZ25hdHVyZSkgewogICAgICAgIGlmICghdGhpcy5yZWFkZXIucmVhZEFuZENoZWNrU2lnbmF0dXJlKGV4cGVjdGVkU2lnbmF0dXJlKSkgewogICAgICAgICAgICB0aGlzLnJlYWRlci5pbmRleCAtPSA0OwogICAgICAgICAgICB2YXIgc2lnbmF0dXJlID0gdGhpcy5yZWFkZXIucmVhZFN0cmluZyg0KTsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDb3JydXB0ZWQgemlwIG9yIGJ1ZzogdW5leHBlY3RlZCBzaWduYXR1cmUgIiArICIoIiArIHV0aWxzLnByZXR0eShzaWduYXR1cmUpICsgIiwgZXhwZWN0ZWQgIiArIHV0aWxzLnByZXR0eShleHBlY3RlZFNpZ25hdHVyZSkgKyAiKSIpOwogICAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBnaXZlbiBzaWduYXR1cmUgaXMgYXQgdGhlIGdpdmVuIGluZGV4LgogICAgICogQHBhcmFtIHtudW1iZXJ9IGFza2VkSW5kZXggdGhlIGluZGV4IHRvIGNoZWNrLgogICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cGVjdGVkU2lnbmF0dXJlIHRoZSBzaWduYXR1cmUgdG8gZXhwZWN0LgogICAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgc2lnbmF0dXJlIGlzIGhlcmUsIGZhbHNlIG90aGVyd2lzZS4KICAgICAqLwogICAgaXNTaWduYXR1cmU6IGZ1bmN0aW9uKGFza2VkSW5kZXgsIGV4cGVjdGVkU2lnbmF0dXJlKSB7CiAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IHRoaXMucmVhZGVyLmluZGV4OwogICAgICAgIHRoaXMucmVhZGVyLnNldEluZGV4KGFza2VkSW5kZXgpOwogICAgICAgIHZhciBzaWduYXR1cmUgPSB0aGlzLnJlYWRlci5yZWFkU3RyaW5nKDQpOwogICAgICAgIHZhciByZXN1bHQgPSBzaWduYXR1cmUgPT09IGV4cGVjdGVkU2lnbmF0dXJlOwogICAgICAgIHRoaXMucmVhZGVyLnNldEluZGV4KGN1cnJlbnRJbmRleCk7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCiAgICAvKioKICAgICAqIFJlYWQgdGhlIGVuZCBvZiB0aGUgY2VudHJhbCBkaXJlY3RvcnkuCiAgICAgKi8KICAgIHJlYWRCbG9ja0VuZE9mQ2VudHJhbDogZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5kaXNrTnVtYmVyID0gdGhpcy5yZWFkZXIucmVhZEludCgyKTsKICAgICAgICB0aGlzLmRpc2tXaXRoQ2VudHJhbERpclN0YXJ0ID0gdGhpcy5yZWFkZXIucmVhZEludCgyKTsKICAgICAgICB0aGlzLmNlbnRyYWxEaXJSZWNvcmRzT25UaGlzRGlzayA9IHRoaXMucmVhZGVyLnJlYWRJbnQoMik7CiAgICAgICAgdGhpcy5jZW50cmFsRGlyUmVjb3JkcyA9IHRoaXMucmVhZGVyLnJlYWRJbnQoMik7CiAgICAgICAgdGhpcy5jZW50cmFsRGlyU2l6ZSA9IHRoaXMucmVhZGVyLnJlYWRJbnQoNCk7CiAgICAgICAgdGhpcy5jZW50cmFsRGlyT2Zmc2V0ID0gdGhpcy5yZWFkZXIucmVhZEludCg0KTsKCiAgICAgICAgdGhpcy56aXBDb21tZW50TGVuZ3RoID0gdGhpcy5yZWFkZXIucmVhZEludCgyKTsKICAgICAgICAvLyB3YXJuaW5nIDogdGhlIGVuY29kaW5nIGRlcGVuZHMgb2YgdGhlIHN5c3RlbSBsb2NhbGUKICAgICAgICAvLyBPbiBhIGxpbnV4IG1hY2hpbmUgd2l0aCBMQU5HPWVuX1VTLnV0ZjgsIHRoaXMgZmllbGQgaXMgdXRmOCBlbmNvZGVkLgogICAgICAgIC8vIE9uIGEgd2luZG93cyBtYWNoaW5lLCB0aGlzIGZpZWxkIGlzIGVuY29kZWQgd2l0aCB0aGUgbG9jYWxpemVkIHdpbmRvd3MgY29kZSBwYWdlLgogICAgICAgIHZhciB6aXBDb21tZW50ID0gdGhpcy5yZWFkZXIucmVhZERhdGEodGhpcy56aXBDb21tZW50TGVuZ3RoKTsKICAgICAgICB2YXIgZGVjb2RlUGFyYW1UeXBlID0gc3VwcG9ydC51aW50OGFycmF5ID8gInVpbnQ4YXJyYXkiIDogImFycmF5IjsKICAgICAgICAvLyBUbyBnZXQgY29uc2lzdGVudCBiZWhhdmlvciB3aXRoIHRoZSBnZW5lcmF0aW9uIHBhcnQsIHdlIHdpbGwgYXNzdW1lIHRoYXQKICAgICAgICAvLyB0aGlzIGlzIHV0ZjggZW5jb2RlZCB1bmxlc3Mgc3BlY2lmaWVkIG90aGVyd2lzZS4KICAgICAgICB2YXIgZGVjb2RlQ29udGVudCA9IHV0aWxzLnRyYW5zZm9ybVRvKGRlY29kZVBhcmFtVHlwZSwgemlwQ29tbWVudCk7CiAgICAgICAgdGhpcy56aXBDb21tZW50ID0gdGhpcy5sb2FkT3B0aW9ucy5kZWNvZGVGaWxlTmFtZShkZWNvZGVDb250ZW50KTsKICAgIH0sCiAgICAvKioKICAgICAqIFJlYWQgdGhlIGVuZCBvZiB0aGUgWmlwIDY0IGNlbnRyYWwgZGlyZWN0b3J5LgogICAgICogTm90IG1lcmdlZCB3aXRoIHRoZSBtZXRob2QgcmVhZEVuZE9mQ2VudHJhbCA6CiAgICAgKiBUaGUgZW5kIG9mIGNlbnRyYWwgY2FuIGNvZXhpc3Qgd2l0aCBpdHMgWmlwNjQgYnJvdGhlciwKICAgICAqIEkgZG9uJ3Qgd2FudCB0byByZWFkIHRoZSB3cm9uZyBudW1iZXIgb2YgYnl0ZXMgIQogICAgICovCiAgICByZWFkQmxvY2taaXA2NEVuZE9mQ2VudHJhbDogZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy56aXA2NEVuZE9mQ2VudHJhbFNpemUgPSB0aGlzLnJlYWRlci5yZWFkSW50KDgpOwogICAgICAgIHRoaXMucmVhZGVyLnNraXAoNCk7CiAgICAgICAgLy8gdGhpcy52ZXJzaW9uTWFkZUJ5ID0gdGhpcy5yZWFkZXIucmVhZFN0cmluZygyKTsKICAgICAgICAvLyB0aGlzLnZlcnNpb25OZWVkZWQgPSB0aGlzLnJlYWRlci5yZWFkSW50KDIpOwogICAgICAgIHRoaXMuZGlza051bWJlciA9IHRoaXMucmVhZGVyLnJlYWRJbnQoNCk7CiAgICAgICAgdGhpcy5kaXNrV2l0aENlbnRyYWxEaXJTdGFydCA9IHRoaXMucmVhZGVyLnJlYWRJbnQoNCk7CiAgICAgICAgdGhpcy5jZW50cmFsRGlyUmVjb3Jkc09uVGhpc0Rpc2sgPSB0aGlzLnJlYWRlci5yZWFkSW50KDgpOwogICAgICAgIHRoaXMuY2VudHJhbERpclJlY29yZHMgPSB0aGlzLnJlYWRlci5yZWFkSW50KDgpOwogICAgICAgIHRoaXMuY2VudHJhbERpclNpemUgPSB0aGlzLnJlYWRlci5yZWFkSW50KDgpOwogICAgICAgIHRoaXMuY2VudHJhbERpck9mZnNldCA9IHRoaXMucmVhZGVyLnJlYWRJbnQoOCk7CgogICAgICAgIHRoaXMuemlwNjRFeHRlbnNpYmxlRGF0YSA9IHt9OwogICAgICAgIHZhciBleHRyYURhdGFTaXplID0gdGhpcy56aXA2NEVuZE9mQ2VudHJhbFNpemUgLSA0NCwKICAgICAgICAgICAgaW5kZXggPSAwLAogICAgICAgICAgICBleHRyYUZpZWxkSWQsCiAgICAgICAgICAgIGV4dHJhRmllbGRMZW5ndGgsCiAgICAgICAgICAgIGV4dHJhRmllbGRWYWx1ZTsKICAgICAgICB3aGlsZSAoaW5kZXggPCBleHRyYURhdGFTaXplKSB7CiAgICAgICAgICAgIGV4dHJhRmllbGRJZCA9IHRoaXMucmVhZGVyLnJlYWRJbnQoMik7CiAgICAgICAgICAgIGV4dHJhRmllbGRMZW5ndGggPSB0aGlzLnJlYWRlci5yZWFkSW50KDQpOwogICAgICAgICAgICBleHRyYUZpZWxkVmFsdWUgPSB0aGlzLnJlYWRlci5yZWFkRGF0YShleHRyYUZpZWxkTGVuZ3RoKTsKICAgICAgICAgICAgdGhpcy56aXA2NEV4dGVuc2libGVEYXRhW2V4dHJhRmllbGRJZF0gPSB7CiAgICAgICAgICAgICAgICBpZDogZXh0cmFGaWVsZElkLAogICAgICAgICAgICAgICAgbGVuZ3RoOiBleHRyYUZpZWxkTGVuZ3RoLAogICAgICAgICAgICAgICAgdmFsdWU6IGV4dHJhRmllbGRWYWx1ZQogICAgICAgICAgICB9OwogICAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIFJlYWQgdGhlIGVuZCBvZiB0aGUgWmlwIDY0IGNlbnRyYWwgZGlyZWN0b3J5IGxvY2F0b3IuCiAgICAgKi8KICAgIHJlYWRCbG9ja1ppcDY0RW5kT2ZDZW50cmFsTG9jYXRvcjogZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5kaXNrV2l0aFppcDY0Q2VudHJhbERpclN0YXJ0ID0gdGhpcy5yZWFkZXIucmVhZEludCg0KTsKICAgICAgICB0aGlzLnJlbGF0aXZlT2Zmc2V0RW5kT2ZaaXA2NENlbnRyYWxEaXIgPSB0aGlzLnJlYWRlci5yZWFkSW50KDgpOwogICAgICAgIHRoaXMuZGlza3NDb3VudCA9IHRoaXMucmVhZGVyLnJlYWRJbnQoNCk7CiAgICAgICAgaWYgKHRoaXMuZGlza3NDb3VudCA+IDEpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJNdWx0aS12b2x1bWVzIHppcCBhcmUgbm90IHN1cHBvcnRlZCIpOwogICAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIFJlYWQgdGhlIGxvY2FsIGZpbGVzLCBiYXNlZCBvbiB0aGUgb2Zmc2V0IHJlYWQgaW4gdGhlIGNlbnRyYWwgcGFydC4KICAgICAqLwogICAgcmVhZExvY2FsRmlsZXM6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBpLCBmaWxlOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmZpbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGZpbGUgPSB0aGlzLmZpbGVzW2ldOwogICAgICAgICAgICB0aGlzLnJlYWRlci5zZXRJbmRleChmaWxlLmxvY2FsSGVhZGVyT2Zmc2V0KTsKICAgICAgICAgICAgdGhpcy5jaGVja1NpZ25hdHVyZShzaWcuTE9DQUxfRklMRV9IRUFERVIpOwogICAgICAgICAgICBmaWxlLnJlYWRMb2NhbFBhcnQodGhpcy5yZWFkZXIpOwogICAgICAgICAgICBmaWxlLmhhbmRsZVVURjgoKTsKICAgICAgICAgICAgZmlsZS5wcm9jZXNzQXR0cmlidXRlcygpOwogICAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIFJlYWQgdGhlIGNlbnRyYWwgZGlyZWN0b3J5LgogICAgICovCiAgICByZWFkQ2VudHJhbERpcjogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIGZpbGU7CgogICAgICAgIHRoaXMucmVhZGVyLnNldEluZGV4KHRoaXMuY2VudHJhbERpck9mZnNldCk7CiAgICAgICAgd2hpbGUgKHRoaXMucmVhZGVyLnJlYWRBbmRDaGVja1NpZ25hdHVyZShzaWcuQ0VOVFJBTF9GSUxFX0hFQURFUikpIHsKICAgICAgICAgICAgZmlsZSA9IG5ldyBaaXBFbnRyeSh7CiAgICAgICAgICAgICAgICB6aXA2NDogdGhpcy56aXA2NAogICAgICAgICAgICB9LCB0aGlzLmxvYWRPcHRpb25zKTsKICAgICAgICAgICAgZmlsZS5yZWFkQ2VudHJhbFBhcnQodGhpcy5yZWFkZXIpOwogICAgICAgICAgICB0aGlzLmZpbGVzLnB1c2goZmlsZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5jZW50cmFsRGlyUmVjb3JkcyAhPT0gdGhpcy5maWxlcy5sZW5ndGgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuY2VudHJhbERpclJlY29yZHMgIT09IDAgJiYgdGhpcy5maWxlcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIC8vIFdlIGV4cGVjdGVkIHNvbWUgcmVjb3JkcyBidXQgY291bGRuJ3QgZmluZCBBTlkuCiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHJlYWxseSBzdXNwaWNpb3VzLCBhcyBpZiBzb21ldGhpbmcgd2VudCB3cm9uZy4KICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQ29ycnVwdGVkIHppcCBvciBidWc6IGV4cGVjdGVkICIgKyB0aGlzLmNlbnRyYWxEaXJSZWNvcmRzICsgIiByZWNvcmRzIGluIGNlbnRyYWwgZGlyLCBnb3QgIiArIHRoaXMuZmlsZXMubGVuZ3RoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIFdlIGZvdW5kIHNvbWUgcmVjb3JkcyBidXQgbm90IGFsbC4KICAgICAgICAgICAgICAgIC8vIFNvbWV0aGluZyBpcyB3cm9uZyBidXQgd2UgZ290IHNvbWV0aGluZyBmb3IgdGhlIHVzZXI6IG5vIGVycm9yIGhlcmUuCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLndhcm4oImV4cGVjdGVkIiwgdGhpcy5jZW50cmFsRGlyUmVjb3JkcywgInJlY29yZHMgaW4gY2VudHJhbCBkaXIsIGdvdCIsIHRoaXMuZmlsZXMubGVuZ3RoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIFJlYWQgdGhlIGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeS4KICAgICAqLwogICAgcmVhZEVuZE9mQ2VudHJhbDogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIG9mZnNldCA9IHRoaXMucmVhZGVyLmxhc3RJbmRleE9mU2lnbmF0dXJlKHNpZy5DRU5UUkFMX0RJUkVDVE9SWV9FTkQpOwogICAgICAgIGlmIChvZmZzZXQgPCAwKSB7CiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBjb250ZW50IGlzIGEgdHJ1bmNhdGVkIHppcCBvciBjb21wbGV0ZSBnYXJiYWdlLgogICAgICAgICAgICAvLyBBICJMT0NBTF9GSUxFX0hFQURFUiIgaXMgbm90IHJlcXVpcmVkIGF0IHRoZSBiZWdpbm5pbmcgKGF1dG8KICAgICAgICAgICAgLy8gZXh0cmFjdGlibGUgemlwIGZvciBleGFtcGxlKSBidXQgaXQgY2FuIGdpdmUgYSBnb29kIGhpbnQuCiAgICAgICAgICAgIC8vIElmIGFuIGFqYXggcmVxdWVzdCB3YXMgdXNlZCB3aXRob3V0IHJlc3BvbnNlVHlwZSwgd2Ugd2lsbCBhbHNvCiAgICAgICAgICAgIC8vIGdldCB1bnJlYWRhYmxlIGRhdGEuCiAgICAgICAgICAgIHZhciBpc0dhcmJhZ2UgPSAhdGhpcy5pc1NpZ25hdHVyZSgwLCBzaWcuTE9DQUxfRklMRV9IRUFERVIpOwoKICAgICAgICAgICAgaWYgKGlzR2FyYmFnZSkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDYW4ndCBmaW5kIGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSA6IGlzIHRoaXMgYSB6aXAgZmlsZSA/ICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJJZiBpdCBpcywgc2VlIGh0dHBzOi8vc3R1ay5naXRodWIuaW8vanN6aXAvZG9jdW1lbnRhdGlvbi9ob3d0by9yZWFkX3ppcC5odG1sIik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkNvcnJ1cHRlZCB6aXA6IGNhbid0IGZpbmQgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5Iik7CiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICAgIHRoaXMucmVhZGVyLnNldEluZGV4KG9mZnNldCk7CiAgICAgICAgdmFyIGVuZE9mQ2VudHJhbERpck9mZnNldCA9IG9mZnNldDsKICAgICAgICB0aGlzLmNoZWNrU2lnbmF0dXJlKHNpZy5DRU5UUkFMX0RJUkVDVE9SWV9FTkQpOwogICAgICAgIHRoaXMucmVhZEJsb2NrRW5kT2ZDZW50cmFsKCk7CgoKICAgICAgICAvKiBleHRyYWN0IGZyb20gdGhlIHppcCBzcGVjIDoKICAgICAgICAgICAgNCkgIElmIG9uZSBvZiB0aGUgZmllbGRzIGluIHRoZSBlbmQgb2YgY2VudHJhbCBkaXJlY3RvcnkKICAgICAgICAgICAgICAgIHJlY29yZCBpcyB0b28gc21hbGwgdG8gaG9sZCByZXF1aXJlZCBkYXRhLCB0aGUgZmllbGQKICAgICAgICAgICAgICAgIHNob3VsZCBiZSBzZXQgdG8gLTEgKDB4RkZGRiBvciAweEZGRkZGRkZGKSBhbmQgdGhlCiAgICAgICAgICAgICAgICBaSVA2NCBmb3JtYXQgcmVjb3JkIHNob3VsZCBiZSBjcmVhdGVkLgogICAgICAgICAgICA1KSAgVGhlIGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSByZWNvcmQgYW5kIHRoZQogICAgICAgICAgICAgICAgWmlwNjQgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5IGxvY2F0b3IgcmVjb3JkIG11c3QKICAgICAgICAgICAgICAgIHJlc2lkZSBvbiB0aGUgc2FtZSBkaXNrIHdoZW4gc3BsaXR0aW5nIG9yIHNwYW5uaW5nCiAgICAgICAgICAgICAgICBhbiBhcmNoaXZlLgogICAgICAgICAqLwogICAgICAgIGlmICh0aGlzLmRpc2tOdW1iZXIgPT09IHV0aWxzLk1BWF9WQUxVRV8xNkJJVFMgfHwgdGhpcy5kaXNrV2l0aENlbnRyYWxEaXJTdGFydCA9PT0gdXRpbHMuTUFYX1ZBTFVFXzE2QklUUyB8fCB0aGlzLmNlbnRyYWxEaXJSZWNvcmRzT25UaGlzRGlzayA9PT0gdXRpbHMuTUFYX1ZBTFVFXzE2QklUUyB8fCB0aGlzLmNlbnRyYWxEaXJSZWNvcmRzID09PSB1dGlscy5NQVhfVkFMVUVfMTZCSVRTIHx8IHRoaXMuY2VudHJhbERpclNpemUgPT09IHV0aWxzLk1BWF9WQUxVRV8zMkJJVFMgfHwgdGhpcy5jZW50cmFsRGlyT2Zmc2V0ID09PSB1dGlscy5NQVhfVkFMVUVfMzJCSVRTKSB7CiAgICAgICAgICAgIHRoaXMuemlwNjQgPSB0cnVlOwoKICAgICAgICAgICAgLyoKICAgICAgICAgICAgV2FybmluZyA6IHRoZSB6aXA2NCBleHRlbnNpb24gaXMgc3VwcG9ydGVkLCBidXQgT05MWSBpZiB0aGUgNjRiaXRzIGludGVnZXIgcmVhZCBmcm9tCiAgICAgICAgICAgIHRoZSB6aXAgZmlsZSBjYW4gZml0IGludG8gYSAzMmJpdHMgaW50ZWdlci4gVGhpcyBjYW5ub3QgYmUgc29sdmVkIDogSmF2YVNjcmlwdCByZXByZXNlbnRzCiAgICAgICAgICAgIGFsbCBudW1iZXJzIGFzIDY0LWJpdCBkb3VibGUgcHJlY2lzaW9uIElFRUUgNzU0IGZsb2F0aW5nIHBvaW50IG51bWJlcnMuCiAgICAgICAgICAgIFNvLCB3ZSBoYXZlIDUzYml0cyBmb3IgaW50ZWdlcnMgYW5kIGJpdHdpc2Ugb3BlcmF0aW9ucyB0cmVhdCBldmVyeXRoaW5nIGFzIDMyYml0cy4KICAgICAgICAgICAgc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvSmF2YVNjcmlwdC9SZWZlcmVuY2UvT3BlcmF0b3JzL0JpdHdpc2VfT3BlcmF0b3JzCiAgICAgICAgICAgIGFuZCBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvcHVibGljYXRpb25zL2ZpbGVzL0VDTUEtU1QvRUNNQS0yNjIucGRmIHNlY3Rpb24gOC41CiAgICAgICAgICAgICovCgogICAgICAgICAgICAvLyBzaG91bGQgbG9vayBmb3IgYSB6aXA2NCBFT0NEIGxvY2F0b3IKICAgICAgICAgICAgb2Zmc2V0ID0gdGhpcy5yZWFkZXIubGFzdEluZGV4T2ZTaWduYXR1cmUoc2lnLlpJUDY0X0NFTlRSQUxfRElSRUNUT1JZX0xPQ0FUT1IpOwogICAgICAgICAgICBpZiAob2Zmc2V0IDwgMCkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDb3JydXB0ZWQgemlwOiBjYW4ndCBmaW5kIHRoZSBaSVA2NCBlbmQgb2YgY2VudHJhbCBkaXJlY3RvcnkgbG9jYXRvciIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMucmVhZGVyLnNldEluZGV4KG9mZnNldCk7CiAgICAgICAgICAgIHRoaXMuY2hlY2tTaWduYXR1cmUoc2lnLlpJUDY0X0NFTlRSQUxfRElSRUNUT1JZX0xPQ0FUT1IpOwogICAgICAgICAgICB0aGlzLnJlYWRCbG9ja1ppcDY0RW5kT2ZDZW50cmFsTG9jYXRvcigpOwoKICAgICAgICAgICAgLy8gbm93IHRoZSB6aXA2NCBFT0NEIHJlY29yZAogICAgICAgICAgICBpZiAoIXRoaXMuaXNTaWduYXR1cmUodGhpcy5yZWxhdGl2ZU9mZnNldEVuZE9mWmlwNjRDZW50cmFsRGlyLCBzaWcuWklQNjRfQ0VOVFJBTF9ESVJFQ1RPUllfRU5EKSkgewogICAgICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKCJaSVA2NCBlbmQgb2YgY2VudHJhbCBkaXJlY3Rvcnkgbm90IHdoZXJlIGV4cGVjdGVkLiIpOwogICAgICAgICAgICAgICAgdGhpcy5yZWxhdGl2ZU9mZnNldEVuZE9mWmlwNjRDZW50cmFsRGlyID0gdGhpcy5yZWFkZXIubGFzdEluZGV4T2ZTaWduYXR1cmUoc2lnLlpJUDY0X0NFTlRSQUxfRElSRUNUT1JZX0VORCk7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWxhdGl2ZU9mZnNldEVuZE9mWmlwNjRDZW50cmFsRGlyIDwgMCkgewogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQ29ycnVwdGVkIHppcDogY2FuJ3QgZmluZCB0aGUgWklQNjQgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5Iik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5yZWFkZXIuc2V0SW5kZXgodGhpcy5yZWxhdGl2ZU9mZnNldEVuZE9mWmlwNjRDZW50cmFsRGlyKTsKICAgICAgICAgICAgdGhpcy5jaGVja1NpZ25hdHVyZShzaWcuWklQNjRfQ0VOVFJBTF9ESVJFQ1RPUllfRU5EKTsKICAgICAgICAgICAgdGhpcy5yZWFkQmxvY2taaXA2NEVuZE9mQ2VudHJhbCgpOwogICAgICAgIH0KCiAgICAgICAgdmFyIGV4cGVjdGVkRW5kT2ZDZW50cmFsRGlyT2Zmc2V0ID0gdGhpcy5jZW50cmFsRGlyT2Zmc2V0ICsgdGhpcy5jZW50cmFsRGlyU2l6ZTsKICAgICAgICBpZiAodGhpcy56aXA2NCkgewogICAgICAgICAgICBleHBlY3RlZEVuZE9mQ2VudHJhbERpck9mZnNldCArPSAyMDsgLy8gZW5kIG9mIGNlbnRyYWwgZGlyIDY0IGxvY2F0b3IKICAgICAgICAgICAgZXhwZWN0ZWRFbmRPZkNlbnRyYWxEaXJPZmZzZXQgKz0gMTIgLyogc2hvdWxkIG5vdCBpbmNsdWRlIHRoZSBsZWFkaW5nIDEyIGJ5dGVzICovICsgdGhpcy56aXA2NEVuZE9mQ2VudHJhbFNpemU7CiAgICAgICAgfQoKICAgICAgICB2YXIgZXh0cmFCeXRlcyA9IGVuZE9mQ2VudHJhbERpck9mZnNldCAtIGV4cGVjdGVkRW5kT2ZDZW50cmFsRGlyT2Zmc2V0OwoKICAgICAgICBpZiAoZXh0cmFCeXRlcyA+IDApIHsKICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKGV4dHJhQnl0ZXMsICJleHRyYSBieXRlcyBhdCBiZWdpbm5pbmcgb3Igd2l0aGluIHppcGZpbGUiKTsKICAgICAgICAgICAgaWYgKHRoaXMuaXNTaWduYXR1cmUoZW5kT2ZDZW50cmFsRGlyT2Zmc2V0LCBzaWcuQ0VOVFJBTF9GSUxFX0hFQURFUikpIHsKICAgICAgICAgICAgICAgIC8vIFRoZSBvZmZzZXRzIHNlZW0gd3JvbmcsIGJ1dCB3ZSBoYXZlIHNvbWV0aGluZyBhdCB0aGUgc3BlY2lmaWVkIG9mZnNldC4KICAgICAgICAgICAgICAgIC8vIFNv4oCmIHdlIGtlZXAgaXQuCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyB0aGUgb2Zmc2V0IGlzIHdyb25nLCB1cGRhdGUgdGhlICJ6ZXJvIiBvZiB0aGUgcmVhZGVyCiAgICAgICAgICAgICAgICAvLyB0aGlzIGhhcHBlbnMgaWYgZGF0YSBoYXMgYmVlbiBwcmVwZW5kZWQgKGNyeCBmaWxlcyBmb3IgZXhhbXBsZSkKICAgICAgICAgICAgICAgIHRoaXMucmVhZGVyLnplcm8gPSBleHRyYUJ5dGVzOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChleHRyYUJ5dGVzIDwgMCkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkNvcnJ1cHRlZCB6aXA6IG1pc3NpbmcgIiArIE1hdGguYWJzKGV4dHJhQnl0ZXMpICsgIiBieXRlcy4iKTsKICAgICAgICB9CiAgICB9LAogICAgcHJlcGFyZVJlYWRlcjogZnVuY3Rpb24oZGF0YSkgewogICAgICAgIHRoaXMucmVhZGVyID0gcmVhZGVyRm9yKGRhdGEpOwogICAgfSwKICAgIC8qKgogICAgICogUmVhZCBhIHppcCBmaWxlIGFuZCBjcmVhdGUgWmlwRW50cmllcy4KICAgICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5QnVmZmVyfFVpbnQ4QXJyYXl8QnVmZmVyfSBkYXRhIHRoZSBiaW5hcnkgc3RyaW5nIHJlcHJlc2VudGluZyBhIHppcCBmaWxlLgogICAgICovCiAgICBsb2FkOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgdGhpcy5wcmVwYXJlUmVhZGVyKGRhdGEpOwogICAgICAgIHRoaXMucmVhZEVuZE9mQ2VudHJhbCgpOwogICAgICAgIHRoaXMucmVhZENlbnRyYWxEaXIoKTsKICAgICAgICB0aGlzLnJlYWRMb2NhbEZpbGVzKCk7CiAgICB9Cn07Ci8vIH19fSBlbmQgb2YgWmlwRW50cmllcwptb2R1bGUuZXhwb3J0cyA9IFppcEVudHJpZXM7Cgp9LHsiLi9yZWFkZXIvcmVhZGVyRm9yIjoyMiwiLi9zaWduYXR1cmUiOjIzLCIuL3N1cHBvcnQiOjMwLCIuL3V0ZjgiOjMxLCIuL3V0aWxzIjozMiwiLi96aXBFbnRyeSI6MzR9XSwzNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyIHJlYWRlckZvciA9IHJlcXVpcmUoJy4vcmVhZGVyL3JlYWRlckZvcicpOwp2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7CnZhciBDb21wcmVzc2VkT2JqZWN0ID0gcmVxdWlyZSgnLi9jb21wcmVzc2VkT2JqZWN0Jyk7CnZhciBjcmMzMmZuID0gcmVxdWlyZSgnLi9jcmMzMicpOwp2YXIgdXRmOCA9IHJlcXVpcmUoJy4vdXRmOCcpOwp2YXIgY29tcHJlc3Npb25zID0gcmVxdWlyZSgnLi9jb21wcmVzc2lvbnMnKTsKdmFyIHN1cHBvcnQgPSByZXF1aXJlKCcuL3N1cHBvcnQnKTsKCnZhciBNQURFX0JZX0RPUyA9IDB4MDA7CnZhciBNQURFX0JZX1VOSVggPSAweDAzOwoKLyoqCiAqIEZpbmQgYSBjb21wcmVzc2lvbiByZWdpc3RlcmVkIGluIEpTWmlwLgogKiBAcGFyYW0ge3N0cmluZ30gY29tcHJlc3Npb25NZXRob2QgdGhlIG1ldGhvZCBtYWdpYyB0byBmaW5kLgogKiBAcmV0dXJuIHtPYmplY3R8bnVsbH0gdGhlIEpTWmlwIGNvbXByZXNzaW9uIG9iamVjdCwgbnVsbCBpZiBub25lIGZvdW5kLgogKi8KdmFyIGZpbmRDb21wcmVzc2lvbiA9IGZ1bmN0aW9uKGNvbXByZXNzaW9uTWV0aG9kKSB7CiAgICBmb3IgKHZhciBtZXRob2QgaW4gY29tcHJlc3Npb25zKSB7CiAgICAgICAgaWYgKCFjb21wcmVzc2lvbnMuaGFzT3duUHJvcGVydHkobWV0aG9kKSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgaWYgKGNvbXByZXNzaW9uc1ttZXRob2RdLm1hZ2ljID09PSBjb21wcmVzc2lvbk1ldGhvZCkgewogICAgICAgICAgICByZXR1cm4gY29tcHJlc3Npb25zW21ldGhvZF07CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIG51bGw7Cn07CgovLyBjbGFzcyBaaXBFbnRyeSB7e3sKLyoqCiAqIEFuIGVudHJ5IGluIHRoZSB6aXAgZmlsZS4KICogQGNvbnN0cnVjdG9yCiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9wdGlvbnMgb2YgdGhlIGN1cnJlbnQgZmlsZS4KICogQHBhcmFtIHtPYmplY3R9IGxvYWRPcHRpb25zIE9wdGlvbnMgZm9yIGxvYWRpbmcgdGhlIHN0cmVhbS4KICovCmZ1bmN0aW9uIFppcEVudHJ5KG9wdGlvbnMsIGxvYWRPcHRpb25zKSB7CiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwogICAgdGhpcy5sb2FkT3B0aW9ucyA9IGxvYWRPcHRpb25zOwp9ClppcEVudHJ5LnByb3RvdHlwZSA9IHsKICAgIC8qKgogICAgICogc2F5IGlmIHRoZSBmaWxlIGlzIGVuY3J5cHRlZC4KICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgdGhlIGZpbGUgaXMgZW5jcnlwdGVkLCBmYWxzZSBvdGhlcndpc2UuCiAgICAgKi8KICAgIGlzRW5jcnlwdGVkOiBmdW5jdGlvbigpIHsKICAgICAgICAvLyBiaXQgMSBpcyBzZXQKICAgICAgICByZXR1cm4gKHRoaXMuYml0RmxhZyAmIDB4MDAwMSkgPT09IDB4MDAwMTsKICAgIH0sCiAgICAvKioKICAgICAqIHNheSBpZiB0aGUgZmlsZSBoYXMgdXRmLTggZmlsZW5hbWUvY29tbWVudC4KICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgdGhlIGZpbGVuYW1lL2NvbW1lbnQgaXMgaW4gdXRmLTgsIGZhbHNlIG90aGVyd2lzZS4KICAgICAqLwogICAgdXNlVVRGODogZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gYml0IDExIGlzIHNldAogICAgICAgIHJldHVybiAodGhpcy5iaXRGbGFnICYgMHgwODAwKSA9PT0gMHgwODAwOwogICAgfSwKICAgIC8qKgogICAgICogUmVhZCB0aGUgbG9jYWwgcGFydCBvZiBhIHppcCBmaWxlIGFuZCBhZGQgdGhlIGluZm8gaW4gdGhpcyBvYmplY3QuCiAgICAgKiBAcGFyYW0ge0RhdGFSZWFkZXJ9IHJlYWRlciB0aGUgcmVhZGVyIHRvIHVzZS4KICAgICAqLwogICAgcmVhZExvY2FsUGFydDogZnVuY3Rpb24ocmVhZGVyKSB7CiAgICAgICAgdmFyIGNvbXByZXNzaW9uLCBsb2NhbEV4dHJhRmllbGRzTGVuZ3RoOwoKICAgICAgICAvLyB3ZSBhbHJlYWR5IGtub3cgZXZlcnl0aGluZyBmcm9tIHRoZSBjZW50cmFsIGRpciAhCiAgICAgICAgLy8gSWYgdGhlIGNlbnRyYWwgZGlyIGRhdGEgYXJlIGZhbHNlLCB3ZSBhcmUgZG9vbWVkLgogICAgICAgIC8vIE9uIHRoZSBicmlnaHQgc2lkZSwgdGhlIGxvY2FsIHBhcnQgaXMgc2NhcnkgIDogemlwNjQsIGRhdGEgZGVzY3JpcHRvcnMsIGJvdGgsIGV0Yy4KICAgICAgICAvLyBUaGUgbGVzcyBkYXRhIHdlIGdldCBoZXJlLCB0aGUgbW9yZSByZWxpYWJsZSB0aGlzIHNob3VsZCBiZS4KICAgICAgICAvLyBMZXQncyBza2lwIHRoZSB3aG9sZSBoZWFkZXIgYW5kIGRhc2ggdG8gdGhlIGRhdGEgIQogICAgICAgIHJlYWRlci5za2lwKDIyKTsKICAgICAgICAvLyBpbiBzb21lIHppcCBjcmVhdGVkIG9uIHdpbmRvd3MsIHRoZSBmaWxlbmFtZSBzdG9yZWQgaW4gdGhlIGNlbnRyYWwgZGlyIGNvbnRhaW5zIFwgaW5zdGVhZCBvZiAvLgogICAgICAgIC8vIFN0cmFuZ2VseSwgdGhlIGZpbGVuYW1lIGhlcmUgaXMgT0suCiAgICAgICAgLy8gSSB3b3VsZCBsb3ZlIHRvIHRyZWF0IHRoZXNlIHppcCBmaWxlcyBhcyBjb3JydXB0ZWQgKHNlZSBodHRwOi8vd3d3LmluZm8temlwLm9yZy9GQVEuaHRtbCNiYWNrc2xhc2hlcwogICAgICAgIC8vIG9yIEFQUE5PVEUjNC40LjE3LjEsICJBbGwgc2xhc2hlcyBNVVNUIGJlIGZvcndhcmQgc2xhc2hlcyAnLyciKSBidXQgdGhlcmUgYXJlIGEgbG90IG9mIGJhZCB6aXAgZ2VuZXJhdG9ycy4uLgogICAgICAgIC8vIFNlYXJjaCAidW56aXAgbWlzbWF0Y2hpbmcgImxvY2FsIiBmaWxlbmFtZSBjb250aW51aW5nIHdpdGggImNlbnRyYWwiIGZpbGVuYW1lIHZlcnNpb24iIG9uCiAgICAgICAgLy8gdGhlIGludGVybmV0LgogICAgICAgIC8vCiAgICAgICAgLy8gSSB0aGluayBJIHNlZSB0aGUgbG9naWMgaGVyZSA6IHRoZSBjZW50cmFsIGRpcmVjdG9yeSBpcyB1c2VkIHRvIGRpc3BsYXkKICAgICAgICAvLyBjb250ZW50IGFuZCB0aGUgbG9jYWwgZGlyZWN0b3J5IGlzIHVzZWQgdG8gZXh0cmFjdCB0aGUgZmlsZXMuIE1peGluZyAvIGFuZCBcCiAgICAgICAgLy8gbWF5IGJlIHVzZWQgdG8gZGlzcGxheSBcIHRvIHdpbmRvd3MgdXNlcnMgYW5kIHVzZSAvIHdoZW4gZXh0cmFjdGluZyB0aGUgZmlsZXMuCiAgICAgICAgLy8gVW5mb3J0dW5hdGVseSwgdGhpcyBsZWFkIGFsc28gdG8gc29tZSBpc3N1ZXMgOiBodHRwOi8vc2VjbGlzdHMub3JnL2Z1bGxkaXNjbG9zdXJlLzIwMDkvU2VwLzM5NAogICAgICAgIHRoaXMuZmlsZU5hbWVMZW5ndGggPSByZWFkZXIucmVhZEludCgyKTsKICAgICAgICBsb2NhbEV4dHJhRmllbGRzTGVuZ3RoID0gcmVhZGVyLnJlYWRJbnQoMik7IC8vIGNhbid0IGJlIHN1cmUgdGhpcyB3aWxsIGJlIHRoZSBzYW1lIGFzIHRoZSBjZW50cmFsIGRpcgogICAgICAgIC8vIHRoZSBmaWxlTmFtZSBpcyBzdG9yZWQgYXMgYmluYXJ5IGRhdGEsIHRoZSBoYW5kbGVVVEY4IG1ldGhvZCB3aWxsIHRha2UgY2FyZSBvZiB0aGUgZW5jb2RpbmcuCiAgICAgICAgdGhpcy5maWxlTmFtZSA9IHJlYWRlci5yZWFkRGF0YSh0aGlzLmZpbGVOYW1lTGVuZ3RoKTsKICAgICAgICByZWFkZXIuc2tpcChsb2NhbEV4dHJhRmllbGRzTGVuZ3RoKTsKCiAgICAgICAgaWYgKHRoaXMuY29tcHJlc3NlZFNpemUgPT09IC0xIHx8IHRoaXMudW5jb21wcmVzc2VkU2l6ZSA9PT0gLTEpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJCdWcgb3IgY29ycnVwdGVkIHppcCA6IGRpZG4ndCBnZXQgZW5vdWdoIGluZm9ybWF0aW9uIGZyb20gdGhlIGNlbnRyYWwgZGlyZWN0b3J5ICIgKyAiKGNvbXByZXNzZWRTaXplID09PSAtMSB8fCB1bmNvbXByZXNzZWRTaXplID09PSAtMSkiKTsKICAgICAgICB9CgogICAgICAgIGNvbXByZXNzaW9uID0gZmluZENvbXByZXNzaW9uKHRoaXMuY29tcHJlc3Npb25NZXRob2QpOwogICAgICAgIGlmIChjb21wcmVzc2lvbiA9PT0gbnVsbCkgeyAvLyBubyBjb21wcmVzc2lvbiBmb3VuZAogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkNvcnJ1cHRlZCB6aXAgOiBjb21wcmVzc2lvbiAiICsgdXRpbHMucHJldHR5KHRoaXMuY29tcHJlc3Npb25NZXRob2QpICsgIiB1bmtub3duIChpbm5lciBmaWxlIDogIiArIHV0aWxzLnRyYW5zZm9ybVRvKCJzdHJpbmciLCB0aGlzLmZpbGVOYW1lKSArICIpIik7CiAgICAgICAgfQogICAgICAgIHRoaXMuZGVjb21wcmVzc2VkID0gbmV3IENvbXByZXNzZWRPYmplY3QodGhpcy5jb21wcmVzc2VkU2l6ZSwgdGhpcy51bmNvbXByZXNzZWRTaXplLCB0aGlzLmNyYzMyLCBjb21wcmVzc2lvbiwgcmVhZGVyLnJlYWREYXRhKHRoaXMuY29tcHJlc3NlZFNpemUpKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBSZWFkIHRoZSBjZW50cmFsIHBhcnQgb2YgYSB6aXAgZmlsZSBhbmQgYWRkIHRoZSBpbmZvIGluIHRoaXMgb2JqZWN0LgogICAgICogQHBhcmFtIHtEYXRhUmVhZGVyfSByZWFkZXIgdGhlIHJlYWRlciB0byB1c2UuCiAgICAgKi8KICAgIHJlYWRDZW50cmFsUGFydDogZnVuY3Rpb24ocmVhZGVyKSB7CiAgICAgICAgdGhpcy52ZXJzaW9uTWFkZUJ5ID0gcmVhZGVyLnJlYWRJbnQoMik7CiAgICAgICAgcmVhZGVyLnNraXAoMik7CiAgICAgICAgLy8gdGhpcy52ZXJzaW9uTmVlZGVkID0gcmVhZGVyLnJlYWRJbnQoMik7CiAgICAgICAgdGhpcy5iaXRGbGFnID0gcmVhZGVyLnJlYWRJbnQoMik7CiAgICAgICAgdGhpcy5jb21wcmVzc2lvbk1ldGhvZCA9IHJlYWRlci5yZWFkU3RyaW5nKDIpOwogICAgICAgIHRoaXMuZGF0ZSA9IHJlYWRlci5yZWFkRGF0ZSgpOwogICAgICAgIHRoaXMuY3JjMzIgPSByZWFkZXIucmVhZEludCg0KTsKICAgICAgICB0aGlzLmNvbXByZXNzZWRTaXplID0gcmVhZGVyLnJlYWRJbnQoNCk7CiAgICAgICAgdGhpcy51bmNvbXByZXNzZWRTaXplID0gcmVhZGVyLnJlYWRJbnQoNCk7CiAgICAgICAgdmFyIGZpbGVOYW1lTGVuZ3RoID0gcmVhZGVyLnJlYWRJbnQoMik7CiAgICAgICAgdGhpcy5leHRyYUZpZWxkc0xlbmd0aCA9IHJlYWRlci5yZWFkSW50KDIpOwogICAgICAgIHRoaXMuZmlsZUNvbW1lbnRMZW5ndGggPSByZWFkZXIucmVhZEludCgyKTsKICAgICAgICB0aGlzLmRpc2tOdW1iZXJTdGFydCA9IHJlYWRlci5yZWFkSW50KDIpOwogICAgICAgIHRoaXMuaW50ZXJuYWxGaWxlQXR0cmlidXRlcyA9IHJlYWRlci5yZWFkSW50KDIpOwogICAgICAgIHRoaXMuZXh0ZXJuYWxGaWxlQXR0cmlidXRlcyA9IHJlYWRlci5yZWFkSW50KDQpOwogICAgICAgIHRoaXMubG9jYWxIZWFkZXJPZmZzZXQgPSByZWFkZXIucmVhZEludCg0KTsKCiAgICAgICAgaWYgKHRoaXMuaXNFbmNyeXB0ZWQoKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkVuY3J5cHRlZCB6aXAgYXJlIG5vdCBzdXBwb3J0ZWQiKTsKICAgICAgICB9CgogICAgICAgIC8vIHdpbGwgYmUgcmVhZCBpbiB0aGUgbG9jYWwgcGFydCwgc2VlIHRoZSBjb21tZW50cyB0aGVyZQogICAgICAgIHJlYWRlci5za2lwKGZpbGVOYW1lTGVuZ3RoKTsKICAgICAgICB0aGlzLnJlYWRFeHRyYUZpZWxkcyhyZWFkZXIpOwogICAgICAgIHRoaXMucGFyc2VaSVA2NEV4dHJhRmllbGQocmVhZGVyKTsKICAgICAgICB0aGlzLmZpbGVDb21tZW50ID0gcmVhZGVyLnJlYWREYXRhKHRoaXMuZmlsZUNvbW1lbnRMZW5ndGgpOwogICAgfSwKCiAgICAvKioKICAgICAqIFBhcnNlIHRoZSBleHRlcm5hbCBmaWxlIGF0dHJpYnV0ZXMgYW5kIGdldCB0aGUgdW5peC9kb3MgcGVybWlzc2lvbnMuCiAgICAgKi8KICAgIHByb2Nlc3NBdHRyaWJ1dGVzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy51bml4UGVybWlzc2lvbnMgPSBudWxsOwogICAgICAgIHRoaXMuZG9zUGVybWlzc2lvbnMgPSBudWxsOwogICAgICAgIHZhciBtYWRlQnkgPSB0aGlzLnZlcnNpb25NYWRlQnkgPj4gODsKCiAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSB0aGUgRE9TIGRpcmVjdG9yeSBmbGFnIHNldC4KICAgICAgICAvLyBXZSBsb29rIGZvciBpdCBpbiB0aGUgRE9TIGFuZCBVTklYIHBlcm1pc3Npb25zCiAgICAgICAgLy8gYnV0IHNvbWUgdW5rbm93biBwbGF0Zm9ybSBjb3VsZCBzZXQgaXQgYXMgYSBjb21wYXRpYmlsaXR5IGZsYWcuCiAgICAgICAgdGhpcy5kaXIgPSB0aGlzLmV4dGVybmFsRmlsZUF0dHJpYnV0ZXMgJiAweDAwMTAgPyB0cnVlIDogZmFsc2U7CgogICAgICAgIGlmKG1hZGVCeSA9PT0gTUFERV9CWV9ET1MpIHsKICAgICAgICAgICAgLy8gZmlyc3QgNiBiaXRzICgwIHRvIDUpCiAgICAgICAgICAgIHRoaXMuZG9zUGVybWlzc2lvbnMgPSB0aGlzLmV4dGVybmFsRmlsZUF0dHJpYnV0ZXMgJiAweDNGOwogICAgICAgIH0KCiAgICAgICAgaWYobWFkZUJ5ID09PSBNQURFX0JZX1VOSVgpIHsKICAgICAgICAgICAgdGhpcy51bml4UGVybWlzc2lvbnMgPSAodGhpcy5leHRlcm5hbEZpbGVBdHRyaWJ1dGVzID4+IDE2KSAmIDB4RkZGRjsKICAgICAgICAgICAgLy8gdGhlIG9jdGFsIHBlcm1pc3Npb25zIGFyZSBpbiAodGhpcy51bml4UGVybWlzc2lvbnMgJiAweDAxRkYpLnRvU3RyaW5nKDgpOwogICAgICAgIH0KCiAgICAgICAgLy8gZmFpbCBzYWZlIDogaWYgdGhlIG5hbWUgZW5kcyB3aXRoIGEgLyBpdCBwcm9iYWJseSBtZWFucyBhIGZvbGRlcgogICAgICAgIGlmICghdGhpcy5kaXIgJiYgdGhpcy5maWxlTmFtZVN0ci5zbGljZSgtMSkgPT09ICcvJykgewogICAgICAgICAgICB0aGlzLmRpciA9IHRydWU7CiAgICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqIFBhcnNlIHRoZSBaSVA2NCBleHRyYSBmaWVsZCBhbmQgbWVyZ2UgdGhlIGluZm8gaW4gdGhlIGN1cnJlbnQgWmlwRW50cnkuCiAgICAgKiBAcGFyYW0ge0RhdGFSZWFkZXJ9IHJlYWRlciB0aGUgcmVhZGVyIHRvIHVzZS4KICAgICAqLwogICAgcGFyc2VaSVA2NEV4dHJhRmllbGQ6IGZ1bmN0aW9uKHJlYWRlcikgewoKICAgICAgICBpZiAoIXRoaXMuZXh0cmFGaWVsZHNbMHgwMDAxXSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvLyBzaG91bGQgYmUgc29tZXRoaW5nLCBwcmVwYXJpbmcgdGhlIGV4dHJhIHJlYWRlcgogICAgICAgIHZhciBleHRyYVJlYWRlciA9IHJlYWRlckZvcih0aGlzLmV4dHJhRmllbGRzWzB4MDAwMV0udmFsdWUpOwoKICAgICAgICAvLyBJIHJlYWxseSBob3BlIHRoYXQgdGhlc2UgNjRiaXRzIGludGVnZXIgY2FuIGZpdCBpbiAzMiBiaXRzIGludGVnZXIsIGJlY2F1c2UganMKICAgICAgICAvLyB3b24ndCBsZXQgdXMgaGF2ZSBtb3JlLgogICAgICAgIGlmICh0aGlzLnVuY29tcHJlc3NlZFNpemUgPT09IHV0aWxzLk1BWF9WQUxVRV8zMkJJVFMpIHsKICAgICAgICAgICAgdGhpcy51bmNvbXByZXNzZWRTaXplID0gZXh0cmFSZWFkZXIucmVhZEludCg4KTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuY29tcHJlc3NlZFNpemUgPT09IHV0aWxzLk1BWF9WQUxVRV8zMkJJVFMpIHsKICAgICAgICAgICAgdGhpcy5jb21wcmVzc2VkU2l6ZSA9IGV4dHJhUmVhZGVyLnJlYWRJbnQoOCk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmxvY2FsSGVhZGVyT2Zmc2V0ID09PSB1dGlscy5NQVhfVkFMVUVfMzJCSVRTKSB7CiAgICAgICAgICAgIHRoaXMubG9jYWxIZWFkZXJPZmZzZXQgPSBleHRyYVJlYWRlci5yZWFkSW50KDgpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5kaXNrTnVtYmVyU3RhcnQgPT09IHV0aWxzLk1BWF9WQUxVRV8zMkJJVFMpIHsKICAgICAgICAgICAgdGhpcy5kaXNrTnVtYmVyU3RhcnQgPSBleHRyYVJlYWRlci5yZWFkSW50KDQpOwogICAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIFJlYWQgdGhlIGNlbnRyYWwgcGFydCBvZiBhIHppcCBmaWxlIGFuZCBhZGQgdGhlIGluZm8gaW4gdGhpcyBvYmplY3QuCiAgICAgKiBAcGFyYW0ge0RhdGFSZWFkZXJ9IHJlYWRlciB0aGUgcmVhZGVyIHRvIHVzZS4KICAgICAqLwogICAgcmVhZEV4dHJhRmllbGRzOiBmdW5jdGlvbihyZWFkZXIpIHsKICAgICAgICB2YXIgZW5kID0gcmVhZGVyLmluZGV4ICsgdGhpcy5leHRyYUZpZWxkc0xlbmd0aCwKICAgICAgICAgICAgZXh0cmFGaWVsZElkLAogICAgICAgICAgICBleHRyYUZpZWxkTGVuZ3RoLAogICAgICAgICAgICBleHRyYUZpZWxkVmFsdWU7CgogICAgICAgIGlmICghdGhpcy5leHRyYUZpZWxkcykgewogICAgICAgICAgICB0aGlzLmV4dHJhRmllbGRzID0ge307CiAgICAgICAgfQoKICAgICAgICB3aGlsZSAocmVhZGVyLmluZGV4ICsgNCA8IGVuZCkgewogICAgICAgICAgICBleHRyYUZpZWxkSWQgPSByZWFkZXIucmVhZEludCgyKTsKICAgICAgICAgICAgZXh0cmFGaWVsZExlbmd0aCA9IHJlYWRlci5yZWFkSW50KDIpOwogICAgICAgICAgICBleHRyYUZpZWxkVmFsdWUgPSByZWFkZXIucmVhZERhdGEoZXh0cmFGaWVsZExlbmd0aCk7CgogICAgICAgICAgICB0aGlzLmV4dHJhRmllbGRzW2V4dHJhRmllbGRJZF0gPSB7CiAgICAgICAgICAgICAgICBpZDogZXh0cmFGaWVsZElkLAogICAgICAgICAgICAgICAgbGVuZ3RoOiBleHRyYUZpZWxkTGVuZ3RoLAogICAgICAgICAgICAgICAgdmFsdWU6IGV4dHJhRmllbGRWYWx1ZQogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgcmVhZGVyLnNldEluZGV4KGVuZCk7CiAgICB9LAogICAgLyoqCiAgICAgKiBBcHBseSBhbiBVVEY4IHRyYW5zZm9ybWF0aW9uIGlmIG5lZWRlZC4KICAgICAqLwogICAgaGFuZGxlVVRGODogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIGRlY29kZVBhcmFtVHlwZSA9IHN1cHBvcnQudWludDhhcnJheSA/ICJ1aW50OGFycmF5IiA6ICJhcnJheSI7CiAgICAgICAgaWYgKHRoaXMudXNlVVRGOCgpKSB7CiAgICAgICAgICAgIHRoaXMuZmlsZU5hbWVTdHIgPSB1dGY4LnV0ZjhkZWNvZGUodGhpcy5maWxlTmFtZSk7CiAgICAgICAgICAgIHRoaXMuZmlsZUNvbW1lbnRTdHIgPSB1dGY4LnV0ZjhkZWNvZGUodGhpcy5maWxlQ29tbWVudCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIHVwYXRoID0gdGhpcy5maW5kRXh0cmFGaWVsZFVuaWNvZGVQYXRoKCk7CiAgICAgICAgICAgIGlmICh1cGF0aCAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgdGhpcy5maWxlTmFtZVN0ciA9IHVwYXRoOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gQVNDSUkgdGV4dCBvciB1bnN1cHBvcnRlZCBjb2RlIHBhZ2UKICAgICAgICAgICAgICAgIHZhciBmaWxlTmFtZUJ5dGVBcnJheSA9ICB1dGlscy50cmFuc2Zvcm1UbyhkZWNvZGVQYXJhbVR5cGUsIHRoaXMuZmlsZU5hbWUpOwogICAgICAgICAgICAgICAgdGhpcy5maWxlTmFtZVN0ciA9IHRoaXMubG9hZE9wdGlvbnMuZGVjb2RlRmlsZU5hbWUoZmlsZU5hbWVCeXRlQXJyYXkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgdWNvbW1lbnQgPSB0aGlzLmZpbmRFeHRyYUZpZWxkVW5pY29kZUNvbW1lbnQoKTsKICAgICAgICAgICAgaWYgKHVjb21tZW50ICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICB0aGlzLmZpbGVDb21tZW50U3RyID0gdWNvbW1lbnQ7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBBU0NJSSB0ZXh0IG9yIHVuc3VwcG9ydGVkIGNvZGUgcGFnZQogICAgICAgICAgICAgICAgdmFyIGNvbW1lbnRCeXRlQXJyYXkgPSAgdXRpbHMudHJhbnNmb3JtVG8oZGVjb2RlUGFyYW1UeXBlLCB0aGlzLmZpbGVDb21tZW50KTsKICAgICAgICAgICAgICAgIHRoaXMuZmlsZUNvbW1lbnRTdHIgPSB0aGlzLmxvYWRPcHRpb25zLmRlY29kZUZpbGVOYW1lKGNvbW1lbnRCeXRlQXJyYXkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqIEZpbmQgdGhlIHVuaWNvZGUgcGF0aCBkZWNsYXJlZCBpbiB0aGUgZXh0cmEgZmllbGQsIGlmIGFueS4KICAgICAqIEByZXR1cm4ge1N0cmluZ30gdGhlIHVuaWNvZGUgcGF0aCwgbnVsbCBvdGhlcndpc2UuCiAgICAgKi8KICAgIGZpbmRFeHRyYUZpZWxkVW5pY29kZVBhdGg6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciB1cGF0aEZpZWxkID0gdGhpcy5leHRyYUZpZWxkc1sweDcwNzVdOwogICAgICAgIGlmICh1cGF0aEZpZWxkKSB7CiAgICAgICAgICAgIHZhciBleHRyYVJlYWRlciA9IHJlYWRlckZvcih1cGF0aEZpZWxkLnZhbHVlKTsKCiAgICAgICAgICAgIC8vIHdyb25nIHZlcnNpb24KICAgICAgICAgICAgaWYgKGV4dHJhUmVhZGVyLnJlYWRJbnQoMSkgIT09IDEpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyB0aGUgY3JjIG9mIHRoZSBmaWxlbmFtZSBjaGFuZ2VkLCB0aGlzIGZpZWxkIGlzIG91dCBvZiBkYXRlLgogICAgICAgICAgICBpZiAoY3JjMzJmbih0aGlzLmZpbGVOYW1lKSAhPT0gZXh0cmFSZWFkZXIucmVhZEludCg0KSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB1dGY4LnV0ZjhkZWNvZGUoZXh0cmFSZWFkZXIucmVhZERhdGEodXBhdGhGaWVsZC5sZW5ndGggLSA1KSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgfSwKCiAgICAvKioKICAgICAqIEZpbmQgdGhlIHVuaWNvZGUgY29tbWVudCBkZWNsYXJlZCBpbiB0aGUgZXh0cmEgZmllbGQsIGlmIGFueS4KICAgICAqIEByZXR1cm4ge1N0cmluZ30gdGhlIHVuaWNvZGUgY29tbWVudCwgbnVsbCBvdGhlcndpc2UuCiAgICAgKi8KICAgIGZpbmRFeHRyYUZpZWxkVW5pY29kZUNvbW1lbnQ6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciB1Y29tbWVudEZpZWxkID0gdGhpcy5leHRyYUZpZWxkc1sweDYzNzVdOwogICAgICAgIGlmICh1Y29tbWVudEZpZWxkKSB7CiAgICAgICAgICAgIHZhciBleHRyYVJlYWRlciA9IHJlYWRlckZvcih1Y29tbWVudEZpZWxkLnZhbHVlKTsKCiAgICAgICAgICAgIC8vIHdyb25nIHZlcnNpb24KICAgICAgICAgICAgaWYgKGV4dHJhUmVhZGVyLnJlYWRJbnQoMSkgIT09IDEpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyB0aGUgY3JjIG9mIHRoZSBjb21tZW50IGNoYW5nZWQsIHRoaXMgZmllbGQgaXMgb3V0IG9mIGRhdGUuCiAgICAgICAgICAgIGlmIChjcmMzMmZuKHRoaXMuZmlsZUNvbW1lbnQpICE9PSBleHRyYVJlYWRlci5yZWFkSW50KDQpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHV0ZjgudXRmOGRlY29kZShleHRyYVJlYWRlci5yZWFkRGF0YSh1Y29tbWVudEZpZWxkLmxlbmd0aCAtIDUpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9Cn07Cm1vZHVsZS5leHBvcnRzID0gWmlwRW50cnk7Cgp9LHsiLi9jb21wcmVzc2VkT2JqZWN0IjoyLCIuL2NvbXByZXNzaW9ucyI6MywiLi9jcmMzMiI6NCwiLi9yZWFkZXIvcmVhZGVyRm9yIjoyMiwiLi9zdXBwb3J0IjozMCwiLi91dGY4IjozMSwiLi91dGlscyI6MzJ9XSwzNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBTdHJlYW1IZWxwZXIgPSByZXF1aXJlKCcuL3N0cmVhbS9TdHJlYW1IZWxwZXInKTsKdmFyIERhdGFXb3JrZXIgPSByZXF1aXJlKCcuL3N0cmVhbS9EYXRhV29ya2VyJyk7CnZhciB1dGY4ID0gcmVxdWlyZSgnLi91dGY4Jyk7CnZhciBDb21wcmVzc2VkT2JqZWN0ID0gcmVxdWlyZSgnLi9jb21wcmVzc2VkT2JqZWN0Jyk7CnZhciBHZW5lcmljV29ya2VyID0gcmVxdWlyZSgnLi9zdHJlYW0vR2VuZXJpY1dvcmtlcicpOwoKLyoqCiAqIEEgc2ltcGxlIG9iamVjdCByZXByZXNlbnRpbmcgYSBmaWxlIGluIHRoZSB6aXAgZmlsZS4KICogQGNvbnN0cnVjdG9yCiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIHRoZSBuYW1lIG9mIHRoZSBmaWxlCiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5QnVmZmVyfFVpbnQ4QXJyYXl8QnVmZmVyfSBkYXRhIHRoZSBkYXRhCiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHRoZSBvcHRpb25zIG9mIHRoZSBmaWxlCiAqLwp2YXIgWmlwT2JqZWN0ID0gZnVuY3Rpb24obmFtZSwgZGF0YSwgb3B0aW9ucykgewogICAgdGhpcy5uYW1lID0gbmFtZTsKICAgIHRoaXMuZGlyID0gb3B0aW9ucy5kaXI7CiAgICB0aGlzLmRhdGUgPSBvcHRpb25zLmRhdGU7CiAgICB0aGlzLmNvbW1lbnQgPSBvcHRpb25zLmNvbW1lbnQ7CiAgICB0aGlzLnVuaXhQZXJtaXNzaW9ucyA9IG9wdGlvbnMudW5peFBlcm1pc3Npb25zOwogICAgdGhpcy5kb3NQZXJtaXNzaW9ucyA9IG9wdGlvbnMuZG9zUGVybWlzc2lvbnM7CgogICAgdGhpcy5fZGF0YSA9IGRhdGE7CiAgICB0aGlzLl9kYXRhQmluYXJ5ID0gb3B0aW9ucy5iaW5hcnk7CiAgICAvLyBrZWVwIG9ubHkgdGhlIGNvbXByZXNzaW9uCiAgICB0aGlzLm9wdGlvbnMgPSB7CiAgICAgICAgY29tcHJlc3Npb24gOiBvcHRpb25zLmNvbXByZXNzaW9uLAogICAgICAgIGNvbXByZXNzaW9uT3B0aW9ucyA6IG9wdGlvbnMuY29tcHJlc3Npb25PcHRpb25zCiAgICB9Owp9OwoKWmlwT2JqZWN0LnByb3RvdHlwZSA9IHsKICAgIC8qKgogICAgICogQ3JlYXRlIGFuIGludGVybmFsIHN0cmVhbSBmb3IgdGhlIGNvbnRlbnQgb2YgdGhpcyBvYmplY3QuCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSB0aGUgdHlwZSBvZiBlYWNoIGNodW5rLgogICAgICogQHJldHVybiBTdHJlYW1IZWxwZXIgdGhlIHN0cmVhbS4KICAgICAqLwogICAgaW50ZXJuYWxTdHJlYW06IGZ1bmN0aW9uICh0eXBlKSB7CiAgICAgICAgdmFyIHJlc3VsdCA9IG51bGwsIG91dHB1dFR5cGUgPSAic3RyaW5nIjsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoIXR5cGUpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiTm8gb3V0cHV0IHR5cGUgc3BlY2lmaWVkLiIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG91dHB1dFR5cGUgPSB0eXBlLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIHZhciBhc2tVbmljb2RlU3RyaW5nID0gb3V0cHV0VHlwZSA9PT0gInN0cmluZyIgfHwgb3V0cHV0VHlwZSA9PT0gInRleHQiOwogICAgICAgICAgICBpZiAob3V0cHV0VHlwZSA9PT0gImJpbmFyeXN0cmluZyIgfHwgb3V0cHV0VHlwZSA9PT0gInRleHQiKSB7CiAgICAgICAgICAgICAgICBvdXRwdXRUeXBlID0gInN0cmluZyI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fZGVjb21wcmVzc1dvcmtlcigpOwoKICAgICAgICAgICAgdmFyIGlzVW5pY29kZVN0cmluZyA9ICF0aGlzLl9kYXRhQmluYXJ5OwoKICAgICAgICAgICAgaWYgKGlzVW5pY29kZVN0cmluZyAmJiAhYXNrVW5pY29kZVN0cmluZykgewogICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnBpcGUobmV3IHV0ZjguVXRmOEVuY29kZVdvcmtlcigpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWlzVW5pY29kZVN0cmluZyAmJiBhc2tVbmljb2RlU3RyaW5nKSB7CiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQucGlwZShuZXcgdXRmOC5VdGY4RGVjb2RlV29ya2VyKCkpOwogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICByZXN1bHQgPSBuZXcgR2VuZXJpY1dvcmtlcigiZXJyb3IiKTsKICAgICAgICAgICAgcmVzdWx0LmVycm9yKGUpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG5ldyBTdHJlYW1IZWxwZXIocmVzdWx0LCBvdXRwdXRUeXBlLCAiIik7CiAgICB9LAoKICAgIC8qKgogICAgICogUHJlcGFyZSB0aGUgY29udGVudCBpbiB0aGUgYXNrZWQgdHlwZS4KICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIHRoZSB0eXBlIG9mIHRoZSByZXN1bHQuCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvblVwZGF0ZSBhIGZ1bmN0aW9uIHRvIGNhbGwgb24gZWFjaCBpbnRlcm5hbCB1cGRhdGUuCiAgICAgKiBAcmV0dXJuIFByb21pc2UgdGhlIHByb21pc2Ugb2YgdGhlIHJlc3VsdC4KICAgICAqLwogICAgYXN5bmM6IGZ1bmN0aW9uICh0eXBlLCBvblVwZGF0ZSkgewogICAgICAgIHJldHVybiB0aGlzLmludGVybmFsU3RyZWFtKHR5cGUpLmFjY3VtdWxhdGUob25VcGRhdGUpOwogICAgfSwKCiAgICAvKioKICAgICAqIFByZXBhcmUgdGhlIGNvbnRlbnQgYXMgYSBub2RlanMgc3RyZWFtLgogICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgdGhlIHR5cGUgb2YgZWFjaCBjaHVuay4KICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uVXBkYXRlIGEgZnVuY3Rpb24gdG8gY2FsbCBvbiBlYWNoIGludGVybmFsIHVwZGF0ZS4KICAgICAqIEByZXR1cm4gU3RyZWFtIHRoZSBzdHJlYW0uCiAgICAgKi8KICAgIG5vZGVTdHJlYW06IGZ1bmN0aW9uICh0eXBlLCBvblVwZGF0ZSkgewogICAgICAgIHJldHVybiB0aGlzLmludGVybmFsU3RyZWFtKHR5cGUgfHwgIm5vZGVidWZmZXIiKS50b05vZGVqc1N0cmVhbShvblVwZGF0ZSk7CiAgICB9LAoKICAgIC8qKgogICAgICogUmV0dXJuIGEgd29ya2VyIGZvciB0aGUgY29tcHJlc3NlZCBjb250ZW50LgogICAgICogQHByaXZhdGUKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb21wcmVzc2lvbiB0aGUgY29tcHJlc3Npb24gb2JqZWN0IHRvIHVzZS4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb21wcmVzc2lvbk9wdGlvbnMgdGhlIG9wdGlvbnMgdG8gdXNlIHdoZW4gY29tcHJlc3NpbmcuCiAgICAgKiBAcmV0dXJuIFdvcmtlciB0aGUgd29ya2VyLgogICAgICovCiAgICBfY29tcHJlc3NXb3JrZXI6IGZ1bmN0aW9uIChjb21wcmVzc2lvbiwgY29tcHJlc3Npb25PcHRpb25zKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgICB0aGlzLl9kYXRhIGluc3RhbmNlb2YgQ29tcHJlc3NlZE9iamVjdCAmJgogICAgICAgICAgICB0aGlzLl9kYXRhLmNvbXByZXNzaW9uLm1hZ2ljID09PSBjb21wcmVzc2lvbi5tYWdpYwogICAgICAgICkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fZGF0YS5nZXRDb21wcmVzc2VkV29ya2VyKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX2RlY29tcHJlc3NXb3JrZXIoKTsKICAgICAgICAgICAgaWYoIXRoaXMuX2RhdGFCaW5hcnkpIHsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5waXBlKG5ldyB1dGY4LlV0ZjhFbmNvZGVXb3JrZXIoKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIENvbXByZXNzZWRPYmplY3QuY3JlYXRlV29ya2VyRnJvbShyZXN1bHQsIGNvbXByZXNzaW9uLCBjb21wcmVzc2lvbk9wdGlvbnMpOwogICAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIFJldHVybiBhIHdvcmtlciBmb3IgdGhlIGRlY29tcHJlc3NlZCBjb250ZW50LgogICAgICogQHByaXZhdGUKICAgICAqIEByZXR1cm4gV29ya2VyIHRoZSB3b3JrZXIuCiAgICAgKi8KICAgIF9kZWNvbXByZXNzV29ya2VyIDogZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh0aGlzLl9kYXRhIGluc3RhbmNlb2YgQ29tcHJlc3NlZE9iamVjdCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fZGF0YS5nZXRDb250ZW50V29ya2VyKCk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9kYXRhIGluc3RhbmNlb2YgR2VuZXJpY1dvcmtlcikgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fZGF0YTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gbmV3IERhdGFXb3JrZXIodGhpcy5fZGF0YSk7CiAgICAgICAgfQogICAgfQp9OwoKdmFyIHJlbW92ZWRNZXRob2RzID0gWyJhc1RleHQiLCAiYXNCaW5hcnkiLCAiYXNOb2RlQnVmZmVyIiwgImFzVWludDhBcnJheSIsICJhc0FycmF5QnVmZmVyIl07CnZhciByZW1vdmVkRm4gPSBmdW5jdGlvbiAoKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIlRoaXMgbWV0aG9kIGhhcyBiZWVuIHJlbW92ZWQgaW4gSlNaaXAgMy4wLCBwbGVhc2UgY2hlY2sgdGhlIHVwZ3JhZGUgZ3VpZGUuIik7Cn07Cgpmb3IodmFyIGkgPSAwOyBpIDwgcmVtb3ZlZE1ldGhvZHMubGVuZ3RoOyBpKyspIHsKICAgIFppcE9iamVjdC5wcm90b3R5cGVbcmVtb3ZlZE1ldGhvZHNbaV1dID0gcmVtb3ZlZEZuOwp9Cm1vZHVsZS5leHBvcnRzID0gWmlwT2JqZWN0OwoKfSx7Ii4vY29tcHJlc3NlZE9iamVjdCI6MiwiLi9zdHJlYW0vRGF0YVdvcmtlciI6MjcsIi4vc3RyZWFtL0dlbmVyaWNXb3JrZXIiOjI4LCIuL3N0cmVhbS9TdHJlYW1IZWxwZXIiOjI5LCIuL3V0ZjgiOjMxfV0sMzY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKGdsb2JhbCl7Cid1c2Ugc3RyaWN0JzsKdmFyIE11dGF0aW9uID0gZ2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgZ2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7Cgp2YXIgc2NoZWR1bGVEcmFpbjsKCnsKICBpZiAoTXV0YXRpb24pIHsKICAgIHZhciBjYWxsZWQgPSAwOwogICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uKG5leHRUaWNrKTsKICAgIHZhciBlbGVtZW50ID0gZ2xvYmFsLmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTsKICAgIG9ic2VydmVyLm9ic2VydmUoZWxlbWVudCwgewogICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlCiAgICB9KTsKICAgIHNjaGVkdWxlRHJhaW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgIGVsZW1lbnQuZGF0YSA9IChjYWxsZWQgPSArK2NhbGxlZCAlIDIpOwogICAgfTsKICB9IGVsc2UgaWYgKCFnbG9iYWwuc2V0SW1tZWRpYXRlICYmIHR5cGVvZiBnbG9iYWwuTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnKSB7CiAgICB2YXIgY2hhbm5lbCA9IG5ldyBnbG9iYWwuTWVzc2FnZUNoYW5uZWwoKTsKICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gbmV4dFRpY2s7CiAgICBzY2hlZHVsZURyYWluID0gZnVuY3Rpb24gKCkgewogICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApOwogICAgfTsKICB9IGVsc2UgaWYgKCdkb2N1bWVudCcgaW4gZ2xvYmFsICYmICdvbnJlYWR5c3RhdGVjaGFuZ2UnIGluIGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSkgewogICAgc2NoZWR1bGVEcmFpbiA9IGZ1bmN0aW9uICgpIHsKCiAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZAogICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLgogICAgICB2YXIgc2NyaXB0RWwgPSBnbG9iYWwuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgICAgIHNjcmlwdEVsLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBuZXh0VGljaygpOwoKICAgICAgICBzY3JpcHRFbC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsOwogICAgICAgIHNjcmlwdEVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0RWwpOwogICAgICAgIHNjcmlwdEVsID0gbnVsbDsKICAgICAgfTsKICAgICAgZ2xvYmFsLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChzY3JpcHRFbCk7CiAgICB9OwogIH0gZWxzZSB7CiAgICBzY2hlZHVsZURyYWluID0gZnVuY3Rpb24gKCkgewogICAgICBzZXRUaW1lb3V0KG5leHRUaWNrLCAwKTsKICAgIH07CiAgfQp9Cgp2YXIgZHJhaW5pbmc7CnZhciBxdWV1ZSA9IFtdOwovL25hbWVkIG5leHRUaWNrIGZvciBsZXNzIGNvbmZ1c2luZyBzdGFjayB0cmFjZXMKZnVuY3Rpb24gbmV4dFRpY2soKSB7CiAgZHJhaW5pbmcgPSB0cnVlOwogIHZhciBpLCBvbGRRdWV1ZTsKICB2YXIgbGVuID0gcXVldWUubGVuZ3RoOwogIHdoaWxlIChsZW4pIHsKICAgIG9sZFF1ZXVlID0gcXVldWU7CiAgICBxdWV1ZSA9IFtdOwogICAgaSA9IC0xOwogICAgd2hpbGUgKCsraSA8IGxlbikgewogICAgICBvbGRRdWV1ZVtpXSgpOwogICAgfQogICAgbGVuID0gcXVldWUubGVuZ3RoOwogIH0KICBkcmFpbmluZyA9IGZhbHNlOwp9Cgptb2R1bGUuZXhwb3J0cyA9IGltbWVkaWF0ZTsKZnVuY3Rpb24gaW1tZWRpYXRlKHRhc2spIHsKICBpZiAocXVldWUucHVzaCh0YXNrKSA9PT0gMSAmJiAhZHJhaW5pbmcpIHsKICAgIHNjaGVkdWxlRHJhaW4oKTsKICB9Cn0KCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSwzNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyIGltbWVkaWF0ZSA9IHJlcXVpcmUoJ2ltbWVkaWF0ZScpOwoKLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KZnVuY3Rpb24gSU5URVJOQUwoKSB7fQoKdmFyIGhhbmRsZXJzID0ge307Cgp2YXIgUkVKRUNURUQgPSBbJ1JFSkVDVEVEJ107CnZhciBGVUxGSUxMRUQgPSBbJ0ZVTEZJTExFRCddOwp2YXIgUEVORElORyA9IFsnUEVORElORyddOwoKbW9kdWxlLmV4cG9ydHMgPSBQcm9taXNlOwoKZnVuY3Rpb24gUHJvbWlzZShyZXNvbHZlcikgewogIGlmICh0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3Jlc29sdmVyIG11c3QgYmUgYSBmdW5jdGlvbicpOwogIH0KICB0aGlzLnN0YXRlID0gUEVORElORzsKICB0aGlzLnF1ZXVlID0gW107CiAgdGhpcy5vdXRjb21lID0gdm9pZCAwOwogIGlmIChyZXNvbHZlciAhPT0gSU5URVJOQUwpIHsKICAgIHNhZmVseVJlc29sdmVUaGVuYWJsZSh0aGlzLCByZXNvbHZlcik7CiAgfQp9CgpQcm9taXNlLnByb3RvdHlwZVsiZmluYWxseSJdID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykgewogICAgcmV0dXJuIHRoaXM7CiAgfQogIHZhciBwID0gdGhpcy5jb25zdHJ1Y3RvcjsKICByZXR1cm4gdGhpcy50aGVuKHJlc29sdmUsIHJlamVjdCk7CgogIGZ1bmN0aW9uIHJlc29sdmUodmFsdWUpIHsKICAgIGZ1bmN0aW9uIHllcyAoKSB7CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICAgIHJldHVybiBwLnJlc29sdmUoY2FsbGJhY2soKSkudGhlbih5ZXMpOwogIH0KICBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7CiAgICBmdW5jdGlvbiBubyAoKSB7CiAgICAgIHRocm93IHJlYXNvbjsKICAgIH0KICAgIHJldHVybiBwLnJlc29sdmUoY2FsbGJhY2soKSkudGhlbihubyk7CiAgfQp9OwpQcm9taXNlLnByb3RvdHlwZVsiY2F0Y2giXSA9IGZ1bmN0aW9uIChvblJlamVjdGVkKSB7CiAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGVkKTsKfTsKUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uIChvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkgewogIGlmICh0eXBlb2Ygb25GdWxmaWxsZWQgIT09ICdmdW5jdGlvbicgJiYgdGhpcy5zdGF0ZSA9PT0gRlVMRklMTEVEIHx8CiAgICB0eXBlb2Ygb25SZWplY3RlZCAhPT0gJ2Z1bmN0aW9uJyAmJiB0aGlzLnN0YXRlID09PSBSRUpFQ1RFRCkgewogICAgcmV0dXJuIHRoaXM7CiAgfQogIHZhciBwcm9taXNlID0gbmV3IHRoaXMuY29uc3RydWN0b3IoSU5URVJOQUwpOwogIGlmICh0aGlzLnN0YXRlICE9PSBQRU5ESU5HKSB7CiAgICB2YXIgcmVzb2x2ZXIgPSB0aGlzLnN0YXRlID09PSBGVUxGSUxMRUQgPyBvbkZ1bGZpbGxlZCA6IG9uUmVqZWN0ZWQ7CiAgICB1bndyYXAocHJvbWlzZSwgcmVzb2x2ZXIsIHRoaXMub3V0Y29tZSk7CiAgfSBlbHNlIHsKICAgIHRoaXMucXVldWUucHVzaChuZXcgUXVldWVJdGVtKHByb21pc2UsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSk7CiAgfQoKICByZXR1cm4gcHJvbWlzZTsKfTsKZnVuY3Rpb24gUXVldWVJdGVtKHByb21pc2UsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7CiAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTsKICBpZiAodHlwZW9mIG9uRnVsZmlsbGVkID09PSAnZnVuY3Rpb24nKSB7CiAgICB0aGlzLm9uRnVsZmlsbGVkID0gb25GdWxmaWxsZWQ7CiAgICB0aGlzLmNhbGxGdWxmaWxsZWQgPSB0aGlzLm90aGVyQ2FsbEZ1bGZpbGxlZDsKICB9CiAgaWYgKHR5cGVvZiBvblJlamVjdGVkID09PSAnZnVuY3Rpb24nKSB7CiAgICB0aGlzLm9uUmVqZWN0ZWQgPSBvblJlamVjdGVkOwogICAgdGhpcy5jYWxsUmVqZWN0ZWQgPSB0aGlzLm90aGVyQ2FsbFJlamVjdGVkOwogIH0KfQpRdWV1ZUl0ZW0ucHJvdG90eXBlLmNhbGxGdWxmaWxsZWQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICBoYW5kbGVycy5yZXNvbHZlKHRoaXMucHJvbWlzZSwgdmFsdWUpOwp9OwpRdWV1ZUl0ZW0ucHJvdG90eXBlLm90aGVyQ2FsbEZ1bGZpbGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHVud3JhcCh0aGlzLnByb21pc2UsIHRoaXMub25GdWxmaWxsZWQsIHZhbHVlKTsKfTsKUXVldWVJdGVtLnByb3RvdHlwZS5jYWxsUmVqZWN0ZWQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICBoYW5kbGVycy5yZWplY3QodGhpcy5wcm9taXNlLCB2YWx1ZSk7Cn07ClF1ZXVlSXRlbS5wcm90b3R5cGUub3RoZXJDYWxsUmVqZWN0ZWQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICB1bndyYXAodGhpcy5wcm9taXNlLCB0aGlzLm9uUmVqZWN0ZWQsIHZhbHVlKTsKfTsKCmZ1bmN0aW9uIHVud3JhcChwcm9taXNlLCBmdW5jLCB2YWx1ZSkgewogIGltbWVkaWF0ZShmdW5jdGlvbiAoKSB7CiAgICB2YXIgcmV0dXJuVmFsdWU7CiAgICB0cnkgewogICAgICByZXR1cm5WYWx1ZSA9IGZ1bmModmFsdWUpOwogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gaGFuZGxlcnMucmVqZWN0KHByb21pc2UsIGUpOwogICAgfQogICAgaWYgKHJldHVyblZhbHVlID09PSBwcm9taXNlKSB7CiAgICAgIGhhbmRsZXJzLnJlamVjdChwcm9taXNlLCBuZXcgVHlwZUVycm9yKCdDYW5ub3QgcmVzb2x2ZSBwcm9taXNlIHdpdGggaXRzZWxmJykpOwogICAgfSBlbHNlIHsKICAgICAgaGFuZGxlcnMucmVzb2x2ZShwcm9taXNlLCByZXR1cm5WYWx1ZSk7CiAgICB9CiAgfSk7Cn0KCmhhbmRsZXJzLnJlc29sdmUgPSBmdW5jdGlvbiAoc2VsZiwgdmFsdWUpIHsKICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2goZ2V0VGhlbiwgdmFsdWUpOwogIGlmIChyZXN1bHQuc3RhdHVzID09PSAnZXJyb3InKSB7CiAgICByZXR1cm4gaGFuZGxlcnMucmVqZWN0KHNlbGYsIHJlc3VsdC52YWx1ZSk7CiAgfQogIHZhciB0aGVuYWJsZSA9IHJlc3VsdC52YWx1ZTsKCiAgaWYgKHRoZW5hYmxlKSB7CiAgICBzYWZlbHlSZXNvbHZlVGhlbmFibGUoc2VsZiwgdGhlbmFibGUpOwogIH0gZWxzZSB7CiAgICBzZWxmLnN0YXRlID0gRlVMRklMTEVEOwogICAgc2VsZi5vdXRjb21lID0gdmFsdWU7CiAgICB2YXIgaSA9IC0xOwogICAgdmFyIGxlbiA9IHNlbGYucXVldWUubGVuZ3RoOwogICAgd2hpbGUgKCsraSA8IGxlbikgewogICAgICBzZWxmLnF1ZXVlW2ldLmNhbGxGdWxmaWxsZWQodmFsdWUpOwogICAgfQogIH0KICByZXR1cm4gc2VsZjsKfTsKaGFuZGxlcnMucmVqZWN0ID0gZnVuY3Rpb24gKHNlbGYsIGVycm9yKSB7CiAgc2VsZi5zdGF0ZSA9IFJFSkVDVEVEOwogIHNlbGYub3V0Y29tZSA9IGVycm9yOwogIHZhciBpID0gLTE7CiAgdmFyIGxlbiA9IHNlbGYucXVldWUubGVuZ3RoOwogIHdoaWxlICgrK2kgPCBsZW4pIHsKICAgIHNlbGYucXVldWVbaV0uY2FsbFJlamVjdGVkKGVycm9yKTsKICB9CiAgcmV0dXJuIHNlbGY7Cn07CgpmdW5jdGlvbiBnZXRUaGVuKG9iaikgewogIC8vIE1ha2Ugc3VyZSB3ZSBvbmx5IGFjY2VzcyB0aGUgYWNjZXNzb3Igb25jZSBhcyByZXF1aXJlZCBieSB0aGUgc3BlYwogIHZhciB0aGVuID0gb2JqICYmIG9iai50aGVuOwogIGlmIChvYmogJiYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnIHx8IHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicpICYmIHR5cGVvZiB0aGVuID09PSAnZnVuY3Rpb24nKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gYXBweVRoZW4oKSB7CiAgICAgIHRoZW4uYXBwbHkob2JqLCBhcmd1bWVudHMpOwogICAgfTsKICB9Cn0KCmZ1bmN0aW9uIHNhZmVseVJlc29sdmVUaGVuYWJsZShzZWxmLCB0aGVuYWJsZSkgewogIC8vIEVpdGhlciBmdWxmaWxsLCByZWplY3Qgb3IgcmVqZWN0IHdpdGggZXJyb3IKICB2YXIgY2FsbGVkID0gZmFsc2U7CiAgZnVuY3Rpb24gb25FcnJvcih2YWx1ZSkgewogICAgaWYgKGNhbGxlZCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBjYWxsZWQgPSB0cnVlOwogICAgaGFuZGxlcnMucmVqZWN0KHNlbGYsIHZhbHVlKTsKICB9CgogIGZ1bmN0aW9uIG9uU3VjY2Vzcyh2YWx1ZSkgewogICAgaWYgKGNhbGxlZCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBjYWxsZWQgPSB0cnVlOwogICAgaGFuZGxlcnMucmVzb2x2ZShzZWxmLCB2YWx1ZSk7CiAgfQoKICBmdW5jdGlvbiB0cnlUb1Vud3JhcCgpIHsKICAgIHRoZW5hYmxlKG9uU3VjY2Vzcywgb25FcnJvcik7CiAgfQoKICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godHJ5VG9VbndyYXApOwogIGlmIChyZXN1bHQuc3RhdHVzID09PSAnZXJyb3InKSB7CiAgICBvbkVycm9yKHJlc3VsdC52YWx1ZSk7CiAgfQp9CgpmdW5jdGlvbiB0cnlDYXRjaChmdW5jLCB2YWx1ZSkgewogIHZhciBvdXQgPSB7fTsKICB0cnkgewogICAgb3V0LnZhbHVlID0gZnVuYyh2YWx1ZSk7CiAgICBvdXQuc3RhdHVzID0gJ3N1Y2Nlc3MnOwogIH0gY2F0Y2ggKGUpIHsKICAgIG91dC5zdGF0dXMgPSAnZXJyb3InOwogICAgb3V0LnZhbHVlID0gZTsKICB9CiAgcmV0dXJuIG91dDsKfQoKUHJvbWlzZS5yZXNvbHZlID0gcmVzb2x2ZTsKZnVuY3Rpb24gcmVzb2x2ZSh2YWx1ZSkgewogIGlmICh2YWx1ZSBpbnN0YW5jZW9mIHRoaXMpIHsKICAgIHJldHVybiB2YWx1ZTsKICB9CiAgcmV0dXJuIGhhbmRsZXJzLnJlc29sdmUobmV3IHRoaXMoSU5URVJOQUwpLCB2YWx1ZSk7Cn0KClByb21pc2UucmVqZWN0ID0gcmVqZWN0OwpmdW5jdGlvbiByZWplY3QocmVhc29uKSB7CiAgdmFyIHByb21pc2UgPSBuZXcgdGhpcyhJTlRFUk5BTCk7CiAgcmV0dXJuIGhhbmRsZXJzLnJlamVjdChwcm9taXNlLCByZWFzb24pOwp9CgpQcm9taXNlLmFsbCA9IGFsbDsKZnVuY3Rpb24gYWxsKGl0ZXJhYmxlKSB7CiAgdmFyIHNlbGYgPSB0aGlzOwogIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcmFibGUpICE9PSAnW29iamVjdCBBcnJheV0nKSB7CiAgICByZXR1cm4gdGhpcy5yZWplY3QobmV3IFR5cGVFcnJvcignbXVzdCBiZSBhbiBhcnJheScpKTsKICB9CgogIHZhciBsZW4gPSBpdGVyYWJsZS5sZW5ndGg7CiAgdmFyIGNhbGxlZCA9IGZhbHNlOwogIGlmICghbGVuKSB7CiAgICByZXR1cm4gdGhpcy5yZXNvbHZlKFtdKTsKICB9CgogIHZhciB2YWx1ZXMgPSBuZXcgQXJyYXkobGVuKTsKICB2YXIgcmVzb2x2ZWQgPSAwOwogIHZhciBpID0gLTE7CiAgdmFyIHByb21pc2UgPSBuZXcgdGhpcyhJTlRFUk5BTCk7CgogIHdoaWxlICgrK2kgPCBsZW4pIHsKICAgIGFsbFJlc29sdmVyKGl0ZXJhYmxlW2ldLCBpKTsKICB9CiAgcmV0dXJuIHByb21pc2U7CiAgZnVuY3Rpb24gYWxsUmVzb2x2ZXIodmFsdWUsIGkpIHsKICAgIHNlbGYucmVzb2x2ZSh2YWx1ZSkudGhlbihyZXNvbHZlRnJvbUFsbCwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIGlmICghY2FsbGVkKSB7CiAgICAgICAgY2FsbGVkID0gdHJ1ZTsKICAgICAgICBoYW5kbGVycy5yZWplY3QocHJvbWlzZSwgZXJyb3IpOwogICAgICB9CiAgICB9KTsKICAgIGZ1bmN0aW9uIHJlc29sdmVGcm9tQWxsKG91dFZhbHVlKSB7CiAgICAgIHZhbHVlc1tpXSA9IG91dFZhbHVlOwogICAgICBpZiAoKytyZXNvbHZlZCA9PT0gbGVuICYmICFjYWxsZWQpIHsKICAgICAgICBjYWxsZWQgPSB0cnVlOwogICAgICAgIGhhbmRsZXJzLnJlc29sdmUocHJvbWlzZSwgdmFsdWVzKTsKICAgICAgfQogICAgfQogIH0KfQoKUHJvbWlzZS5yYWNlID0gcmFjZTsKZnVuY3Rpb24gcmFjZShpdGVyYWJsZSkgewogIHZhciBzZWxmID0gdGhpczsKICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXJhYmxlKSAhPT0gJ1tvYmplY3QgQXJyYXldJykgewogICAgcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ211c3QgYmUgYW4gYXJyYXknKSk7CiAgfQoKICB2YXIgbGVuID0gaXRlcmFibGUubGVuZ3RoOwogIHZhciBjYWxsZWQgPSBmYWxzZTsKICBpZiAoIWxlbikgewogICAgcmV0dXJuIHRoaXMucmVzb2x2ZShbXSk7CiAgfQoKICB2YXIgaSA9IC0xOwogIHZhciBwcm9taXNlID0gbmV3IHRoaXMoSU5URVJOQUwpOwoKICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICByZXNvbHZlcihpdGVyYWJsZVtpXSk7CiAgfQogIHJldHVybiBwcm9taXNlOwogIGZ1bmN0aW9uIHJlc29sdmVyKHZhbHVlKSB7CiAgICBzZWxmLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIGlmICghY2FsbGVkKSB7CiAgICAgICAgY2FsbGVkID0gdHJ1ZTsKICAgICAgICBoYW5kbGVycy5yZXNvbHZlKHByb21pc2UsIHJlc3BvbnNlKTsKICAgICAgfQogICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIGlmICghY2FsbGVkKSB7CiAgICAgICAgY2FsbGVkID0gdHJ1ZTsKICAgICAgICBoYW5kbGVycy5yZWplY3QocHJvbWlzZSwgZXJyb3IpOwogICAgICB9CiAgICB9KTsKICB9Cn0KCn0seyJpbW1lZGlhdGUiOjM2fV0sMzg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBUb3AgbGV2ZWwgZmlsZSBpcyBqdXN0IGEgbWl4aW4gb2Ygc3VibW9kdWxlcyAmIGNvbnN0YW50cwondXNlIHN0cmljdCc7Cgp2YXIgYXNzaWduICAgID0gcmVxdWlyZSgnLi9saWIvdXRpbHMvY29tbW9uJykuYXNzaWduOwoKdmFyIGRlZmxhdGUgICA9IHJlcXVpcmUoJy4vbGliL2RlZmxhdGUnKTsKdmFyIGluZmxhdGUgICA9IHJlcXVpcmUoJy4vbGliL2luZmxhdGUnKTsKdmFyIGNvbnN0YW50cyA9IHJlcXVpcmUoJy4vbGliL3psaWIvY29uc3RhbnRzJyk7Cgp2YXIgcGFrbyA9IHt9OwoKYXNzaWduKHBha28sIGRlZmxhdGUsIGluZmxhdGUsIGNvbnN0YW50cyk7Cgptb2R1bGUuZXhwb3J0cyA9IHBha287Cgp9LHsiLi9saWIvZGVmbGF0ZSI6MzksIi4vbGliL2luZmxhdGUiOjQwLCIuL2xpYi91dGlscy9jb21tb24iOjQxLCIuL2xpYi96bGliL2NvbnN0YW50cyI6NDR9XSwzOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCgp2YXIgemxpYl9kZWZsYXRlID0gcmVxdWlyZSgnLi96bGliL2RlZmxhdGUnKTsKdmFyIHV0aWxzICAgICAgICA9IHJlcXVpcmUoJy4vdXRpbHMvY29tbW9uJyk7CnZhciBzdHJpbmdzICAgICAgPSByZXF1aXJlKCcuL3V0aWxzL3N0cmluZ3MnKTsKdmFyIG1zZyAgICAgICAgICA9IHJlcXVpcmUoJy4vemxpYi9tZXNzYWdlcycpOwp2YXIgWlN0cmVhbSAgICAgID0gcmVxdWlyZSgnLi96bGliL3pzdHJlYW0nKTsKCnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CgovKiBQdWJsaWMgY29uc3RhbnRzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKdmFyIFpfTk9fRkxVU0ggICAgICA9IDA7CnZhciBaX0ZJTklTSCAgICAgICAgPSA0OwoKdmFyIFpfT0sgICAgICAgICAgICA9IDA7CnZhciBaX1NUUkVBTV9FTkQgICAgPSAxOwp2YXIgWl9TWU5DX0ZMVVNIICAgID0gMjsKCnZhciBaX0RFRkFVTFRfQ09NUFJFU1NJT04gPSAtMTsKCnZhciBaX0RFRkFVTFRfU1RSQVRFR1kgICAgPSAwOwoKdmFyIFpfREVGTEFURUQgID0gODsKCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCgoKLyoqCiAqIGNsYXNzIERlZmxhdGUKICoKICogR2VuZXJpYyBKUy1zdHlsZSB3cmFwcGVyIGZvciB6bGliIGNhbGxzLiBJZiB5b3UgZG9uJ3QgbmVlZAogKiBzdHJlYW1pbmcgYmVoYXZpb3VyIC0gdXNlIG1vcmUgc2ltcGxlIGZ1bmN0aW9uczogW1tkZWZsYXRlXV0sCiAqIFtbZGVmbGF0ZVJhd11dIGFuZCBbW2d6aXBdXS4KICoqLwoKLyogaW50ZXJuYWwKICogRGVmbGF0ZS5jaHVua3MgLT4gQXJyYXkKICoKICogQ2h1bmtzIG9mIG91dHB1dCBkYXRhLCBpZiBbW0RlZmxhdGUjb25EYXRhXV0gbm90IG92ZXJyaWRlbi4KICoqLwoKLyoqCiAqIERlZmxhdGUucmVzdWx0IC0+IFVpbnQ4QXJyYXl8QXJyYXkKICoKICogQ29tcHJlc3NlZCByZXN1bHQsIGdlbmVyYXRlZCBieSBkZWZhdWx0IFtbRGVmbGF0ZSNvbkRhdGFdXQogKiBhbmQgW1tEZWZsYXRlI29uRW5kXV0gaGFuZGxlcnMuIEZpbGxlZCBhZnRlciB5b3UgcHVzaCBsYXN0IGNodW5rCiAqIChjYWxsIFtbRGVmbGF0ZSNwdXNoXV0gd2l0aCBgWl9GSU5JU0hgIC8gYHRydWVgIHBhcmFtKSAgb3IgaWYgeW91CiAqIHB1c2ggYSBjaHVuayB3aXRoIGV4cGxpY2l0IGZsdXNoIChjYWxsIFtbRGVmbGF0ZSNwdXNoXV0gd2l0aAogKiBgWl9TWU5DX0ZMVVNIYCBwYXJhbSkuCiAqKi8KCi8qKgogKiBEZWZsYXRlLmVyciAtPiBOdW1iZXIKICoKICogRXJyb3IgY29kZSBhZnRlciBkZWZsYXRlIGZpbmlzaGVkLiAwIChaX09LKSBvbiBzdWNjZXNzLgogKiBZb3Ugd2lsbCBub3QgbmVlZCBpdCBpbiByZWFsIGxpZmUsIGJlY2F1c2UgZGVmbGF0ZSBlcnJvcnMKICogYXJlIHBvc3NpYmxlIG9ubHkgb24gd3Jvbmcgb3B0aW9ucyBvciBiYWQgYG9uRGF0YWAgLyBgb25FbmRgCiAqIGN1c3RvbSBoYW5kbGVycy4KICoqLwoKLyoqCiAqIERlZmxhdGUubXNnIC0+IFN0cmluZwogKgogKiBFcnJvciBtZXNzYWdlLCBpZiBbW0RlZmxhdGUuZXJyXV0gIT0gMAogKiovCgoKLyoqCiAqIG5ldyBEZWZsYXRlKG9wdGlvbnMpCiAqIC0gb3B0aW9ucyAoT2JqZWN0KTogemxpYiBkZWZsYXRlIG9wdGlvbnMuCiAqCiAqIENyZWF0ZXMgbmV3IGRlZmxhdG9yIGluc3RhbmNlIHdpdGggc3BlY2lmaWVkIHBhcmFtcy4gVGhyb3dzIGV4Y2VwdGlvbgogKiBvbiBiYWQgcGFyYW1zLiBTdXBwb3J0ZWQgb3B0aW9uczoKICoKICogLSBgbGV2ZWxgCiAqIC0gYHdpbmRvd0JpdHNgCiAqIC0gYG1lbUxldmVsYAogKiAtIGBzdHJhdGVneWAKICogLSBgZGljdGlvbmFyeWAKICoKICogW2h0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZF0oaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkKQogKiBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiB0aGVzZS4KICoKICogQWRkaXRpb25hbCBvcHRpb25zLCBmb3IgaW50ZXJuYWwgbmVlZHM6CiAqCiAqIC0gYGNodW5rU2l6ZWAgLSBzaXplIG9mIGdlbmVyYXRlZCBkYXRhIGNodW5rcyAoMTZLIGJ5IGRlZmF1bHQpCiAqIC0gYHJhd2AgKEJvb2xlYW4pIC0gZG8gcmF3IGRlZmxhdGUKICogLSBgZ3ppcGAgKEJvb2xlYW4pIC0gY3JlYXRlIGd6aXAgd3JhcHBlcgogKiAtIGB0b2AgKFN0cmluZykgLSBpZiBlcXVhbCB0byAnc3RyaW5nJywgdGhlbiByZXN1bHQgd2lsbCBiZSAiYmluYXJ5IHN0cmluZyIKICogICAgKGVhY2ggY2hhciBjb2RlIFswLi4yNTVdKQogKiAtIGBoZWFkZXJgIChPYmplY3QpIC0gY3VzdG9tIGhlYWRlciBmb3IgZ3ppcAogKiAgIC0gYHRleHRgIChCb29sZWFuKSAtIHRydWUgaWYgY29tcHJlc3NlZCBkYXRhIGJlbGlldmVkIHRvIGJlIHRleHQKICogICAtIGB0aW1lYCAoTnVtYmVyKSAtIG1vZGlmaWNhdGlvbiB0aW1lLCB1bml4IHRpbWVzdGFtcAogKiAgIC0gYG9zYCAoTnVtYmVyKSAtIG9wZXJhdGlvbiBzeXN0ZW0gY29kZQogKiAgIC0gYGV4dHJhYCAoQXJyYXkpIC0gYXJyYXkgb2YgYnl0ZXMgd2l0aCBleHRyYSBkYXRhIChtYXggNjU1MzYpCiAqICAgLSBgbmFtZWAgKFN0cmluZykgLSBmaWxlIG5hbWUgKGJpbmFyeSBzdHJpbmcpCiAqICAgLSBgY29tbWVudGAgKFN0cmluZykgLSBjb21tZW50IChiaW5hcnkgc3RyaW5nKQogKiAgIC0gYGhjcmNgIChCb29sZWFuKSAtIHRydWUgaWYgaGVhZGVyIGNyYyBzaG91bGQgYmUgYWRkZWQKICoKICogIyMjIyMgRXhhbXBsZToKICoKICogYGBgamF2YXNjcmlwdAogKiB2YXIgcGFrbyA9IHJlcXVpcmUoJ3Bha28nKQogKiAgICwgY2h1bmsxID0gVWludDhBcnJheShbMSwyLDMsNCw1LDYsNyw4LDldKQogKiAgICwgY2h1bmsyID0gVWludDhBcnJheShbMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTldKTsKICoKICogdmFyIGRlZmxhdGUgPSBuZXcgcGFrby5EZWZsYXRlKHsgbGV2ZWw6IDN9KTsKICoKICogZGVmbGF0ZS5wdXNoKGNodW5rMSwgZmFsc2UpOwogKiBkZWZsYXRlLnB1c2goY2h1bmsyLCB0cnVlKTsgIC8vIHRydWUgLT4gbGFzdCBjaHVuawogKgogKiBpZiAoZGVmbGF0ZS5lcnIpIHsgdGhyb3cgbmV3IEVycm9yKGRlZmxhdGUuZXJyKTsgfQogKgogKiBjb25zb2xlLmxvZyhkZWZsYXRlLnJlc3VsdCk7CiAqIGBgYAogKiovCmZ1bmN0aW9uIERlZmxhdGUob3B0aW9ucykgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBEZWZsYXRlKSkgcmV0dXJuIG5ldyBEZWZsYXRlKG9wdGlvbnMpOwoKICB0aGlzLm9wdGlvbnMgPSB1dGlscy5hc3NpZ24oewogICAgbGV2ZWw6IFpfREVGQVVMVF9DT01QUkVTU0lPTiwKICAgIG1ldGhvZDogWl9ERUZMQVRFRCwKICAgIGNodW5rU2l6ZTogMTYzODQsCiAgICB3aW5kb3dCaXRzOiAxNSwKICAgIG1lbUxldmVsOiA4LAogICAgc3RyYXRlZ3k6IFpfREVGQVVMVF9TVFJBVEVHWSwKICAgIHRvOiAnJwogIH0sIG9wdGlvbnMgfHwge30pOwoKICB2YXIgb3B0ID0gdGhpcy5vcHRpb25zOwoKICBpZiAob3B0LnJhdyAmJiAob3B0LndpbmRvd0JpdHMgPiAwKSkgewogICAgb3B0LndpbmRvd0JpdHMgPSAtb3B0LndpbmRvd0JpdHM7CiAgfQoKICBlbHNlIGlmIChvcHQuZ3ppcCAmJiAob3B0LndpbmRvd0JpdHMgPiAwKSAmJiAob3B0LndpbmRvd0JpdHMgPCAxNikpIHsKICAgIG9wdC53aW5kb3dCaXRzICs9IDE2OwogIH0KCiAgdGhpcy5lcnIgICAgPSAwOyAgICAgIC8vIGVycm9yIGNvZGUsIGlmIGhhcHBlbnMgKDAgPSBaX09LKQogIHRoaXMubXNnICAgID0gJyc7ICAgICAvLyBlcnJvciBtZXNzYWdlCiAgdGhpcy5lbmRlZCAgPSBmYWxzZTsgIC8vIHVzZWQgdG8gYXZvaWQgbXVsdGlwbGUgb25FbmQoKSBjYWxscwogIHRoaXMuY2h1bmtzID0gW107ICAgICAvLyBjaHVua3Mgb2YgY29tcHJlc3NlZCBkYXRhCgogIHRoaXMuc3RybSA9IG5ldyBaU3RyZWFtKCk7CiAgdGhpcy5zdHJtLmF2YWlsX291dCA9IDA7CgogIHZhciBzdGF0dXMgPSB6bGliX2RlZmxhdGUuZGVmbGF0ZUluaXQyKAogICAgdGhpcy5zdHJtLAogICAgb3B0LmxldmVsLAogICAgb3B0Lm1ldGhvZCwKICAgIG9wdC53aW5kb3dCaXRzLAogICAgb3B0Lm1lbUxldmVsLAogICAgb3B0LnN0cmF0ZWd5CiAgKTsKCiAgaWYgKHN0YXR1cyAhPT0gWl9PSykgewogICAgdGhyb3cgbmV3IEVycm9yKG1zZ1tzdGF0dXNdKTsKICB9CgogIGlmIChvcHQuaGVhZGVyKSB7CiAgICB6bGliX2RlZmxhdGUuZGVmbGF0ZVNldEhlYWRlcih0aGlzLnN0cm0sIG9wdC5oZWFkZXIpOwogIH0KCiAgaWYgKG9wdC5kaWN0aW9uYXJ5KSB7CiAgICB2YXIgZGljdDsKICAgIC8vIENvbnZlcnQgZGF0YSBpZiBuZWVkZWQKICAgIGlmICh0eXBlb2Ygb3B0LmRpY3Rpb25hcnkgPT09ICdzdHJpbmcnKSB7CiAgICAgIC8vIElmIHdlIG5lZWQgdG8gY29tcHJlc3MgdGV4dCwgY2hhbmdlIGVuY29kaW5nIHRvIHV0ZjguCiAgICAgIGRpY3QgPSBzdHJpbmdzLnN0cmluZzJidWYob3B0LmRpY3Rpb25hcnkpOwogICAgfSBlbHNlIGlmICh0b1N0cmluZy5jYWxsKG9wdC5kaWN0aW9uYXJ5KSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJykgewogICAgICBkaWN0ID0gbmV3IFVpbnQ4QXJyYXkob3B0LmRpY3Rpb25hcnkpOwogICAgfSBlbHNlIHsKICAgICAgZGljdCA9IG9wdC5kaWN0aW9uYXJ5OwogICAgfQoKICAgIHN0YXR1cyA9IHpsaWJfZGVmbGF0ZS5kZWZsYXRlU2V0RGljdGlvbmFyeSh0aGlzLnN0cm0sIGRpY3QpOwoKICAgIGlmIChzdGF0dXMgIT09IFpfT0spIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZ1tzdGF0dXNdKTsKICAgIH0KCiAgICB0aGlzLl9kaWN0X3NldCA9IHRydWU7CiAgfQp9CgovKioKICogRGVmbGF0ZSNwdXNoKGRhdGFbLCBtb2RlXSkgLT4gQm9vbGVhbgogKiAtIGRhdGEgKFVpbnQ4QXJyYXl8QXJyYXl8QXJyYXlCdWZmZXJ8U3RyaW5nKTogaW5wdXQgZGF0YS4gU3RyaW5ncyB3aWxsIGJlCiAqICAgY29udmVydGVkIHRvIHV0ZjggYnl0ZSBzZXF1ZW5jZS4KICogLSBtb2RlIChOdW1iZXJ8Qm9vbGVhbik6IDAuLjYgZm9yIGNvcnJlc3BvbmRpbmcgWl9OT19GTFVTSC4uWl9UUkVFIG1vZGVzLgogKiAgIFNlZSBjb25zdGFudHMuIFNraXBwZWQgb3IgYGZhbHNlYCBtZWFucyBaX05PX0ZMVVNILCBgdHJ1ZWAgbWVhbnNoIFpfRklOSVNILgogKgogKiBTZW5kcyBpbnB1dCBkYXRhIHRvIGRlZmxhdGUgcGlwZSwgZ2VuZXJhdGluZyBbW0RlZmxhdGUjb25EYXRhXV0gY2FsbHMgd2l0aAogKiBuZXcgY29tcHJlc3NlZCBjaHVua3MuIFJldHVybnMgYHRydWVgIG9uIHN1Y2Nlc3MuIFRoZSBsYXN0IGRhdGEgYmxvY2sgbXVzdCBoYXZlCiAqIG1vZGUgWl9GSU5JU0ggKG9yIGB0cnVlYCkuIFRoYXQgd2lsbCBmbHVzaCBpbnRlcm5hbCBwZW5kaW5nIGJ1ZmZlcnMgYW5kIGNhbGwKICogW1tEZWZsYXRlI29uRW5kXV0uIEZvciBpbnRlcmltIGV4cGxpY2l0IGZsdXNoZXMgKHdpdGhvdXQgZW5kaW5nIHRoZSBzdHJlYW0pIHlvdQogKiBjYW4gdXNlIG1vZGUgWl9TWU5DX0ZMVVNILCBrZWVwaW5nIHRoZSBjb21wcmVzc2lvbiBjb250ZXh0LgogKgogKiBPbiBmYWlsIGNhbGwgW1tEZWZsYXRlI29uRW5kXV0gd2l0aCBlcnJvciBjb2RlIGFuZCByZXR1cm4gZmFsc2UuCiAqCiAqIFdlIHN0cm9uZ2x5IHJlY29tbWVuZCB0byB1c2UgYFVpbnQ4QXJyYXlgIG9uIGlucHV0IGZvciBiZXN0IHNwZWVkIChvdXRwdXQKICogYXJyYXkgZm9ybWF0IGlzIGRldGVjdGVkIGF1dG9tYXRpY2FsbHkpLiBBbHNvLCBkb24ndCBza2lwIGxhc3QgcGFyYW0gYW5kIGFsd2F5cwogKiB1c2UgdGhlIHNhbWUgdHlwZSBpbiB5b3VyIGNvZGUgKGJvb2xlYW4gb3IgbnVtYmVyKS4gVGhhdCB3aWxsIGltcHJvdmUgSlMgc3BlZWQuCiAqCiAqIEZvciByZWd1bGFyIGBBcnJheWAtcyBtYWtlIHN1cmUgYWxsIGVsZW1lbnRzIGFyZSBbMC4uMjU1XS4KICoKICogIyMjIyMgRXhhbXBsZQogKgogKiBgYGBqYXZhc2NyaXB0CiAqIHB1c2goY2h1bmssIGZhbHNlKTsgLy8gcHVzaCBvbmUgb2YgZGF0YSBjaHVua3MKICogLi4uCiAqIHB1c2goY2h1bmssIHRydWUpOyAgLy8gcHVzaCBsYXN0IGNodW5rCiAqIGBgYAogKiovCkRlZmxhdGUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoZGF0YSwgbW9kZSkgewogIHZhciBzdHJtID0gdGhpcy5zdHJtOwogIHZhciBjaHVua1NpemUgPSB0aGlzLm9wdGlvbnMuY2h1bmtTaXplOwogIHZhciBzdGF0dXMsIF9tb2RlOwoKICBpZiAodGhpcy5lbmRlZCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgX21vZGUgPSAobW9kZSA9PT0gfn5tb2RlKSA/IG1vZGUgOiAoKG1vZGUgPT09IHRydWUpID8gWl9GSU5JU0ggOiBaX05PX0ZMVVNIKTsKCiAgLy8gQ29udmVydCBkYXRhIGlmIG5lZWRlZAogIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHsKICAgIC8vIElmIHdlIG5lZWQgdG8gY29tcHJlc3MgdGV4dCwgY2hhbmdlIGVuY29kaW5nIHRvIHV0ZjguCiAgICBzdHJtLmlucHV0ID0gc3RyaW5ncy5zdHJpbmcyYnVmKGRhdGEpOwogIH0gZWxzZSBpZiAodG9TdHJpbmcuY2FsbChkYXRhKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJykgewogICAgc3RybS5pbnB1dCA9IG5ldyBVaW50OEFycmF5KGRhdGEpOwogIH0gZWxzZSB7CiAgICBzdHJtLmlucHV0ID0gZGF0YTsKICB9CgogIHN0cm0ubmV4dF9pbiA9IDA7CiAgc3RybS5hdmFpbF9pbiA9IHN0cm0uaW5wdXQubGVuZ3RoOwoKICBkbyB7CiAgICBpZiAoc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgc3RybS5vdXRwdXQgPSBuZXcgdXRpbHMuQnVmOChjaHVua1NpemUpOwogICAgICBzdHJtLm5leHRfb3V0ID0gMDsKICAgICAgc3RybS5hdmFpbF9vdXQgPSBjaHVua1NpemU7CiAgICB9CiAgICBzdGF0dXMgPSB6bGliX2RlZmxhdGUuZGVmbGF0ZShzdHJtLCBfbW9kZSk7ICAgIC8qIG5vIGJhZCByZXR1cm4gdmFsdWUgKi8KCiAgICBpZiAoc3RhdHVzICE9PSBaX1NUUkVBTV9FTkQgJiYgc3RhdHVzICE9PSBaX09LKSB7CiAgICAgIHRoaXMub25FbmQoc3RhdHVzKTsKICAgICAgdGhpcy5lbmRlZCA9IHRydWU7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCB8fCAoc3RybS5hdmFpbF9pbiA9PT0gMCAmJiAoX21vZGUgPT09IFpfRklOSVNIIHx8IF9tb2RlID09PSBaX1NZTkNfRkxVU0gpKSkgewogICAgICBpZiAodGhpcy5vcHRpb25zLnRvID09PSAnc3RyaW5nJykgewogICAgICAgIHRoaXMub25EYXRhKHN0cmluZ3MuYnVmMmJpbnN0cmluZyh1dGlscy5zaHJpbmtCdWYoc3RybS5vdXRwdXQsIHN0cm0ubmV4dF9vdXQpKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5vbkRhdGEodXRpbHMuc2hyaW5rQnVmKHN0cm0ub3V0cHV0LCBzdHJtLm5leHRfb3V0KSk7CiAgICAgIH0KICAgIH0KICB9IHdoaWxlICgoc3RybS5hdmFpbF9pbiA+IDAgfHwgc3RybS5hdmFpbF9vdXQgPT09IDApICYmIHN0YXR1cyAhPT0gWl9TVFJFQU1fRU5EKTsKCiAgLy8gRmluYWxpemUgb24gdGhlIGxhc3QgY2h1bmsuCiAgaWYgKF9tb2RlID09PSBaX0ZJTklTSCkgewogICAgc3RhdHVzID0gemxpYl9kZWZsYXRlLmRlZmxhdGVFbmQodGhpcy5zdHJtKTsKICAgIHRoaXMub25FbmQoc3RhdHVzKTsKICAgIHRoaXMuZW5kZWQgPSB0cnVlOwogICAgcmV0dXJuIHN0YXR1cyA9PT0gWl9PSzsKICB9CgogIC8vIGNhbGxiYWNrIGludGVyaW0gcmVzdWx0cyBpZiBaX1NZTkNfRkxVU0guCiAgaWYgKF9tb2RlID09PSBaX1NZTkNfRkxVU0gpIHsKICAgIHRoaXMub25FbmQoWl9PSyk7CiAgICBzdHJtLmF2YWlsX291dCA9IDA7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIHJldHVybiB0cnVlOwp9OwoKCi8qKgogKiBEZWZsYXRlI29uRGF0YShjaHVuaykgLT4gVm9pZAogKiAtIGNodW5rIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IG91cHV0IGRhdGEuIFR5cGUgb2YgYXJyYXkgZGVwZW5kcwogKiAgIG9uIGpzIGVuZ2luZSBzdXBwb3J0LiBXaGVuIHN0cmluZyBvdXRwdXQgcmVxdWVzdGVkLCBlYWNoIGNodW5rCiAqICAgd2lsbCBiZSBzdHJpbmcuCiAqCiAqIEJ5IGRlZmF1bHQsIHN0b3JlcyBkYXRhIGJsb2NrcyBpbiBgY2h1bmtzW11gIHByb3BlcnR5IGFuZCBnbHVlCiAqIHRob3NlIGluIGBvbkVuZGAuIE92ZXJyaWRlIHRoaXMgaGFuZGxlciwgaWYgeW91IG5lZWQgYW5vdGhlciBiZWhhdmlvdXIuCiAqKi8KRGVmbGF0ZS5wcm90b3R5cGUub25EYXRhID0gZnVuY3Rpb24gKGNodW5rKSB7CiAgdGhpcy5jaHVua3MucHVzaChjaHVuayk7Cn07CgoKLyoqCiAqIERlZmxhdGUjb25FbmQoc3RhdHVzKSAtPiBWb2lkCiAqIC0gc3RhdHVzIChOdW1iZXIpOiBkZWZsYXRlIHN0YXR1cy4gMCAoWl9PSykgb24gc3VjY2VzcywKICogICBvdGhlciBpZiBub3QuCiAqCiAqIENhbGxlZCBvbmNlIGFmdGVyIHlvdSB0ZWxsIGRlZmxhdGUgdGhhdCB0aGUgaW5wdXQgc3RyZWFtIGlzCiAqIGNvbXBsZXRlIChaX0ZJTklTSCkgb3Igc2hvdWxkIGJlIGZsdXNoZWQgKFpfU1lOQ19GTFVTSCkKICogb3IgaWYgYW4gZXJyb3IgaGFwcGVuZWQuIEJ5IGRlZmF1bHQgLSBqb2luIGNvbGxlY3RlZCBjaHVua3MsCiAqIGZyZWUgbWVtb3J5IGFuZCBmaWxsIGByZXN1bHRzYCAvIGBlcnJgIHByb3BlcnRpZXMuCiAqKi8KRGVmbGF0ZS5wcm90b3R5cGUub25FbmQgPSBmdW5jdGlvbiAoc3RhdHVzKSB7CiAgLy8gT24gc3VjY2VzcyAtIGpvaW4KICBpZiAoc3RhdHVzID09PSBaX09LKSB7CiAgICBpZiAodGhpcy5vcHRpb25zLnRvID09PSAnc3RyaW5nJykgewogICAgICB0aGlzLnJlc3VsdCA9IHRoaXMuY2h1bmtzLmpvaW4oJycpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5yZXN1bHQgPSB1dGlscy5mbGF0dGVuQ2h1bmtzKHRoaXMuY2h1bmtzKTsKICAgIH0KICB9CiAgdGhpcy5jaHVua3MgPSBbXTsKICB0aGlzLmVyciA9IHN0YXR1czsKICB0aGlzLm1zZyA9IHRoaXMuc3RybS5tc2c7Cn07CgoKLyoqCiAqIGRlZmxhdGUoZGF0YVssIG9wdGlvbnNdKSAtPiBVaW50OEFycmF5fEFycmF5fFN0cmluZwogKiAtIGRhdGEgKFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nKTogaW5wdXQgZGF0YSB0byBjb21wcmVzcy4KICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGRlZmxhdGUgb3B0aW9ucy4KICoKICogQ29tcHJlc3MgYGRhdGFgIHdpdGggZGVmbGF0ZSBhbGdvcml0aG0gYW5kIGBvcHRpb25zYC4KICoKICogU3VwcG9ydGVkIG9wdGlvbnMgYXJlOgogKgogKiAtIGxldmVsCiAqIC0gd2luZG93Qml0cwogKiAtIG1lbUxldmVsCiAqIC0gc3RyYXRlZ3kKICogLSBkaWN0aW9uYXJ5CiAqCiAqIFtodHRwOi8vemxpYi5uZXQvbWFudWFsLmh0bWwjQWR2YW5jZWRdKGh0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZCkKICogZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhlc2UuCiAqCiAqIFN1Z2FyIChvcHRpb25zKToKICoKICogLSBgcmF3YCAoQm9vbGVhbikgLSBzYXkgdGhhdCB3ZSB3b3JrIHdpdGggcmF3IHN0cmVhbSwgaWYgeW91IGRvbid0IHdpc2ggdG8gc3BlY2lmeQogKiAgIG5lZ2F0aXZlIHdpbmRvd0JpdHMgaW1wbGljaXRseS4KICogLSBgdG9gIChTdHJpbmcpIC0gaWYgZXF1YWwgdG8gJ3N0cmluZycsIHRoZW4gcmVzdWx0IHdpbGwgYmUgImJpbmFyeSBzdHJpbmciCiAqICAgIChlYWNoIGNoYXIgY29kZSBbMC4uMjU1XSkKICoKICogIyMjIyMgRXhhbXBsZToKICoKICogYGBgamF2YXNjcmlwdAogKiB2YXIgcGFrbyA9IHJlcXVpcmUoJ3Bha28nKQogKiAgICwgZGF0YSA9IFVpbnQ4QXJyYXkoWzEsMiwzLDQsNSw2LDcsOCw5XSk7CiAqCiAqIGNvbnNvbGUubG9nKHBha28uZGVmbGF0ZShkYXRhKSk7CiAqIGBgYAogKiovCmZ1bmN0aW9uIGRlZmxhdGUoaW5wdXQsIG9wdGlvbnMpIHsKICB2YXIgZGVmbGF0b3IgPSBuZXcgRGVmbGF0ZShvcHRpb25zKTsKCiAgZGVmbGF0b3IucHVzaChpbnB1dCwgdHJ1ZSk7CgogIC8vIFRoYXQgd2lsbCBuZXZlciBoYXBwZW5zLCBpZiB5b3UgZG9uJ3QgY2hlYXQgd2l0aCBvcHRpb25zIDopCiAgaWYgKGRlZmxhdG9yLmVycikgeyB0aHJvdyBkZWZsYXRvci5tc2cgfHwgbXNnW2RlZmxhdG9yLmVycl07IH0KCiAgcmV0dXJuIGRlZmxhdG9yLnJlc3VsdDsKfQoKCi8qKgogKiBkZWZsYXRlUmF3KGRhdGFbLCBvcHRpb25zXSkgLT4gVWludDhBcnJheXxBcnJheXxTdHJpbmcKICogLSBkYXRhIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IGlucHV0IGRhdGEgdG8gY29tcHJlc3MuCiAqIC0gb3B0aW9ucyAoT2JqZWN0KTogemxpYiBkZWZsYXRlIG9wdGlvbnMuCiAqCiAqIFRoZSBzYW1lIGFzIFtbZGVmbGF0ZV1dLCBidXQgY3JlYXRlcyByYXcgZGF0YSwgd2l0aG91dCB3cmFwcGVyCiAqIChoZWFkZXIgYW5kIGFkbGVyMzIgY3JjKS4KICoqLwpmdW5jdGlvbiBkZWZsYXRlUmF3KGlucHV0LCBvcHRpb25zKSB7CiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgb3B0aW9ucy5yYXcgPSB0cnVlOwogIHJldHVybiBkZWZsYXRlKGlucHV0LCBvcHRpb25zKTsKfQoKCi8qKgogKiBnemlwKGRhdGFbLCBvcHRpb25zXSkgLT4gVWludDhBcnJheXxBcnJheXxTdHJpbmcKICogLSBkYXRhIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IGlucHV0IGRhdGEgdG8gY29tcHJlc3MuCiAqIC0gb3B0aW9ucyAoT2JqZWN0KTogemxpYiBkZWZsYXRlIG9wdGlvbnMuCiAqCiAqIFRoZSBzYW1lIGFzIFtbZGVmbGF0ZV1dLCBidXQgY3JlYXRlIGd6aXAgd3JhcHBlciBpbnN0ZWFkIG9mCiAqIGRlZmxhdGUgb25lLgogKiovCmZ1bmN0aW9uIGd6aXAoaW5wdXQsIG9wdGlvbnMpIHsKICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICBvcHRpb25zLmd6aXAgPSB0cnVlOwogIHJldHVybiBkZWZsYXRlKGlucHV0LCBvcHRpb25zKTsKfQoKCmV4cG9ydHMuRGVmbGF0ZSA9IERlZmxhdGU7CmV4cG9ydHMuZGVmbGF0ZSA9IGRlZmxhdGU7CmV4cG9ydHMuZGVmbGF0ZVJhdyA9IGRlZmxhdGVSYXc7CmV4cG9ydHMuZ3ppcCA9IGd6aXA7Cgp9LHsiLi91dGlscy9jb21tb24iOjQxLCIuL3V0aWxzL3N0cmluZ3MiOjQyLCIuL3psaWIvZGVmbGF0ZSI6NDYsIi4vemxpYi9tZXNzYWdlcyI6NTEsIi4vemxpYi96c3RyZWFtIjo1M31dLDQwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKCnZhciB6bGliX2luZmxhdGUgPSByZXF1aXJlKCcuL3psaWIvaW5mbGF0ZScpOwp2YXIgdXRpbHMgICAgICAgID0gcmVxdWlyZSgnLi91dGlscy9jb21tb24nKTsKdmFyIHN0cmluZ3MgICAgICA9IHJlcXVpcmUoJy4vdXRpbHMvc3RyaW5ncycpOwp2YXIgYyAgICAgICAgICAgID0gcmVxdWlyZSgnLi96bGliL2NvbnN0YW50cycpOwp2YXIgbXNnICAgICAgICAgID0gcmVxdWlyZSgnLi96bGliL21lc3NhZ2VzJyk7CnZhciBaU3RyZWFtICAgICAgPSByZXF1aXJlKCcuL3psaWIvenN0cmVhbScpOwp2YXIgR1poZWFkZXIgICAgID0gcmVxdWlyZSgnLi96bGliL2d6aGVhZGVyJyk7Cgp2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOwoKLyoqCiAqIGNsYXNzIEluZmxhdGUKICoKICogR2VuZXJpYyBKUy1zdHlsZSB3cmFwcGVyIGZvciB6bGliIGNhbGxzLiBJZiB5b3UgZG9uJ3QgbmVlZAogKiBzdHJlYW1pbmcgYmVoYXZpb3VyIC0gdXNlIG1vcmUgc2ltcGxlIGZ1bmN0aW9uczogW1tpbmZsYXRlXV0KICogYW5kIFtbaW5mbGF0ZVJhd11dLgogKiovCgovKiBpbnRlcm5hbAogKiBpbmZsYXRlLmNodW5rcyAtPiBBcnJheQogKgogKiBDaHVua3Mgb2Ygb3V0cHV0IGRhdGEsIGlmIFtbSW5mbGF0ZSNvbkRhdGFdXSBub3Qgb3ZlcnJpZGVuLgogKiovCgovKioKICogSW5mbGF0ZS5yZXN1bHQgLT4gVWludDhBcnJheXxBcnJheXxTdHJpbmcKICoKICogVW5jb21wcmVzc2VkIHJlc3VsdCwgZ2VuZXJhdGVkIGJ5IGRlZmF1bHQgW1tJbmZsYXRlI29uRGF0YV1dCiAqIGFuZCBbW0luZmxhdGUjb25FbmRdXSBoYW5kbGVycy4gRmlsbGVkIGFmdGVyIHlvdSBwdXNoIGxhc3QgY2h1bmsKICogKGNhbGwgW1tJbmZsYXRlI3B1c2hdXSB3aXRoIGBaX0ZJTklTSGAgLyBgdHJ1ZWAgcGFyYW0pIG9yIGlmIHlvdQogKiBwdXNoIGEgY2h1bmsgd2l0aCBleHBsaWNpdCBmbHVzaCAoY2FsbCBbW0luZmxhdGUjcHVzaF1dIHdpdGgKICogYFpfU1lOQ19GTFVTSGAgcGFyYW0pLgogKiovCgovKioKICogSW5mbGF0ZS5lcnIgLT4gTnVtYmVyCiAqCiAqIEVycm9yIGNvZGUgYWZ0ZXIgaW5mbGF0ZSBmaW5pc2hlZC4gMCAoWl9PSykgb24gc3VjY2Vzcy4KICogU2hvdWxkIGJlIGNoZWNrZWQgaWYgYnJva2VuIGRhdGEgcG9zc2libGUuCiAqKi8KCi8qKgogKiBJbmZsYXRlLm1zZyAtPiBTdHJpbmcKICoKICogRXJyb3IgbWVzc2FnZSwgaWYgW1tJbmZsYXRlLmVycl1dICE9IDAKICoqLwoKCi8qKgogKiBuZXcgSW5mbGF0ZShvcHRpb25zKQogKiAtIG9wdGlvbnMgKE9iamVjdCk6IHpsaWIgaW5mbGF0ZSBvcHRpb25zLgogKgogKiBDcmVhdGVzIG5ldyBpbmZsYXRvciBpbnN0YW5jZSB3aXRoIHNwZWNpZmllZCBwYXJhbXMuIFRocm93cyBleGNlcHRpb24KICogb24gYmFkIHBhcmFtcy4gU3VwcG9ydGVkIG9wdGlvbnM6CiAqCiAqIC0gYHdpbmRvd0JpdHNgCiAqIC0gYGRpY3Rpb25hcnlgCiAqCiAqIFtodHRwOi8vemxpYi5uZXQvbWFudWFsLmh0bWwjQWR2YW5jZWRdKGh0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZCkKICogZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhlc2UuCiAqCiAqIEFkZGl0aW9uYWwgb3B0aW9ucywgZm9yIGludGVybmFsIG5lZWRzOgogKgogKiAtIGBjaHVua1NpemVgIC0gc2l6ZSBvZiBnZW5lcmF0ZWQgZGF0YSBjaHVua3MgKDE2SyBieSBkZWZhdWx0KQogKiAtIGByYXdgIChCb29sZWFuKSAtIGRvIHJhdyBpbmZsYXRlCiAqIC0gYHRvYCAoU3RyaW5nKSAtIGlmIGVxdWFsIHRvICdzdHJpbmcnLCB0aGVuIHJlc3VsdCB3aWxsIGJlIGNvbnZlcnRlZAogKiAgIGZyb20gdXRmOCB0byB1dGYxNiAoamF2YXNjcmlwdCkgc3RyaW5nLiBXaGVuIHN0cmluZyBvdXRwdXQgcmVxdWVzdGVkLAogKiAgIGNodW5rIGxlbmd0aCBjYW4gZGlmZmVyIGZyb20gYGNodW5rU2l6ZWAsIGRlcGVuZGluZyBvbiBjb250ZW50LgogKgogKiBCeSBkZWZhdWx0LCB3aGVuIG5vIG9wdGlvbnMgc2V0LCBhdXRvZGV0ZWN0IGRlZmxhdGUvZ3ppcCBkYXRhIGZvcm1hdCB2aWEKICogd3JhcHBlciBoZWFkZXIuCiAqCiAqICMjIyMjIEV4YW1wbGU6CiAqCiAqIGBgYGphdmFzY3JpcHQKICogdmFyIHBha28gPSByZXF1aXJlKCdwYWtvJykKICogICAsIGNodW5rMSA9IFVpbnQ4QXJyYXkoWzEsMiwzLDQsNSw2LDcsOCw5XSkKICogICAsIGNodW5rMiA9IFVpbnQ4QXJyYXkoWzEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5XSk7CiAqCiAqIHZhciBpbmZsYXRlID0gbmV3IHBha28uSW5mbGF0ZSh7IGxldmVsOiAzfSk7CiAqCiAqIGluZmxhdGUucHVzaChjaHVuazEsIGZhbHNlKTsKICogaW5mbGF0ZS5wdXNoKGNodW5rMiwgdHJ1ZSk7ICAvLyB0cnVlIC0+IGxhc3QgY2h1bmsKICoKICogaWYgKGluZmxhdGUuZXJyKSB7IHRocm93IG5ldyBFcnJvcihpbmZsYXRlLmVycik7IH0KICoKICogY29uc29sZS5sb2coaW5mbGF0ZS5yZXN1bHQpOwogKiBgYGAKICoqLwpmdW5jdGlvbiBJbmZsYXRlKG9wdGlvbnMpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgSW5mbGF0ZSkpIHJldHVybiBuZXcgSW5mbGF0ZShvcHRpb25zKTsKCiAgdGhpcy5vcHRpb25zID0gdXRpbHMuYXNzaWduKHsKICAgIGNodW5rU2l6ZTogMTYzODQsCiAgICB3aW5kb3dCaXRzOiAwLAogICAgdG86ICcnCiAgfSwgb3B0aW9ucyB8fCB7fSk7CgogIHZhciBvcHQgPSB0aGlzLm9wdGlvbnM7CgogIC8vIEZvcmNlIHdpbmRvdyBzaXplIGZvciBgcmF3YCBkYXRhLCBpZiBub3Qgc2V0IGRpcmVjdGx5LAogIC8vIGJlY2F1c2Ugd2UgaGF2ZSBubyBoZWFkZXIgZm9yIGF1dG9kZXRlY3QuCiAgaWYgKG9wdC5yYXcgJiYgKG9wdC53aW5kb3dCaXRzID49IDApICYmIChvcHQud2luZG93Qml0cyA8IDE2KSkgewogICAgb3B0LndpbmRvd0JpdHMgPSAtb3B0LndpbmRvd0JpdHM7CiAgICBpZiAob3B0LndpbmRvd0JpdHMgPT09IDApIHsgb3B0LndpbmRvd0JpdHMgPSAtMTU7IH0KICB9CgogIC8vIElmIGB3aW5kb3dCaXRzYCBub3QgZGVmaW5lZCAoYW5kIG1vZGUgbm90IHJhdykgLSBzZXQgYXV0b2RldGVjdCBmbGFnIGZvciBnemlwL2RlZmxhdGUKICBpZiAoKG9wdC53aW5kb3dCaXRzID49IDApICYmIChvcHQud2luZG93Qml0cyA8IDE2KSAmJgogICAgICAhKG9wdGlvbnMgJiYgb3B0aW9ucy53aW5kb3dCaXRzKSkgewogICAgb3B0LndpbmRvd0JpdHMgKz0gMzI7CiAgfQoKICAvLyBHemlwIGhlYWRlciBoYXMgbm8gaW5mbyBhYm91dCB3aW5kb3dzIHNpemUsIHdlIGNhbiBkbyBhdXRvZGV0ZWN0IG9ubHkKICAvLyBmb3IgZGVmbGF0ZS4gU28sIGlmIHdpbmRvdyBzaXplIG5vdCBzZXQsIGZvcmNlIGl0IHRvIG1heCB3aGVuIGd6aXAgcG9zc2libGUKICBpZiAoKG9wdC53aW5kb3dCaXRzID4gMTUpICYmIChvcHQud2luZG93Qml0cyA8IDQ4KSkgewogICAgLy8gYml0IDMgKDE2KSAtPiBnemlwcGVkIGRhdGEKICAgIC8vIGJpdCA0ICgzMikgLT4gYXV0b2RldGVjdCBnemlwL2RlZmxhdGUKICAgIGlmICgob3B0LndpbmRvd0JpdHMgJiAxNSkgPT09IDApIHsKICAgICAgb3B0LndpbmRvd0JpdHMgfD0gMTU7CiAgICB9CiAgfQoKICB0aGlzLmVyciAgICA9IDA7ICAgICAgLy8gZXJyb3IgY29kZSwgaWYgaGFwcGVucyAoMCA9IFpfT0spCiAgdGhpcy5tc2cgICAgPSAnJzsgICAgIC8vIGVycm9yIG1lc3NhZ2UKICB0aGlzLmVuZGVkICA9IGZhbHNlOyAgLy8gdXNlZCB0byBhdm9pZCBtdWx0aXBsZSBvbkVuZCgpIGNhbGxzCiAgdGhpcy5jaHVua3MgPSBbXTsgICAgIC8vIGNodW5rcyBvZiBjb21wcmVzc2VkIGRhdGEKCiAgdGhpcy5zdHJtICAgPSBuZXcgWlN0cmVhbSgpOwogIHRoaXMuc3RybS5hdmFpbF9vdXQgPSAwOwoKICB2YXIgc3RhdHVzICA9IHpsaWJfaW5mbGF0ZS5pbmZsYXRlSW5pdDIoCiAgICB0aGlzLnN0cm0sCiAgICBvcHQud2luZG93Qml0cwogICk7CgogIGlmIChzdGF0dXMgIT09IGMuWl9PSykgewogICAgdGhyb3cgbmV3IEVycm9yKG1zZ1tzdGF0dXNdKTsKICB9CgogIHRoaXMuaGVhZGVyID0gbmV3IEdaaGVhZGVyKCk7CgogIHpsaWJfaW5mbGF0ZS5pbmZsYXRlR2V0SGVhZGVyKHRoaXMuc3RybSwgdGhpcy5oZWFkZXIpOwp9CgovKioKICogSW5mbGF0ZSNwdXNoKGRhdGFbLCBtb2RlXSkgLT4gQm9vbGVhbgogKiAtIGRhdGEgKFVpbnQ4QXJyYXl8QXJyYXl8QXJyYXlCdWZmZXJ8U3RyaW5nKTogaW5wdXQgZGF0YQogKiAtIG1vZGUgKE51bWJlcnxCb29sZWFuKTogMC4uNiBmb3IgY29ycmVzcG9uZGluZyBaX05PX0ZMVVNILi5aX1RSRUUgbW9kZXMuCiAqICAgU2VlIGNvbnN0YW50cy4gU2tpcHBlZCBvciBgZmFsc2VgIG1lYW5zIFpfTk9fRkxVU0gsIGB0cnVlYCBtZWFuc2ggWl9GSU5JU0guCiAqCiAqIFNlbmRzIGlucHV0IGRhdGEgdG8gaW5mbGF0ZSBwaXBlLCBnZW5lcmF0aW5nIFtbSW5mbGF0ZSNvbkRhdGFdXSBjYWxscyB3aXRoCiAqIG5ldyBvdXRwdXQgY2h1bmtzLiBSZXR1cm5zIGB0cnVlYCBvbiBzdWNjZXNzLiBUaGUgbGFzdCBkYXRhIGJsb2NrIG11c3QgaGF2ZQogKiBtb2RlIFpfRklOSVNIIChvciBgdHJ1ZWApLiBUaGF0IHdpbGwgZmx1c2ggaW50ZXJuYWwgcGVuZGluZyBidWZmZXJzIGFuZCBjYWxsCiAqIFtbSW5mbGF0ZSNvbkVuZF1dLiBGb3IgaW50ZXJpbSBleHBsaWNpdCBmbHVzaGVzICh3aXRob3V0IGVuZGluZyB0aGUgc3RyZWFtKSB5b3UKICogY2FuIHVzZSBtb2RlIFpfU1lOQ19GTFVTSCwga2VlcGluZyB0aGUgZGVjb21wcmVzc2lvbiBjb250ZXh0LgogKgogKiBPbiBmYWlsIGNhbGwgW1tJbmZsYXRlI29uRW5kXV0gd2l0aCBlcnJvciBjb2RlIGFuZCByZXR1cm4gZmFsc2UuCiAqCiAqIFdlIHN0cm9uZ2x5IHJlY29tbWVuZCB0byB1c2UgYFVpbnQ4QXJyYXlgIG9uIGlucHV0IGZvciBiZXN0IHNwZWVkIChvdXRwdXQKICogZm9ybWF0IGlzIGRldGVjdGVkIGF1dG9tYXRpY2FsbHkpLiBBbHNvLCBkb24ndCBza2lwIGxhc3QgcGFyYW0gYW5kIGFsd2F5cwogKiB1c2UgdGhlIHNhbWUgdHlwZSBpbiB5b3VyIGNvZGUgKGJvb2xlYW4gb3IgbnVtYmVyKS4gVGhhdCB3aWxsIGltcHJvdmUgSlMgc3BlZWQuCiAqCiAqIEZvciByZWd1bGFyIGBBcnJheWAtcyBtYWtlIHN1cmUgYWxsIGVsZW1lbnRzIGFyZSBbMC4uMjU1XS4KICoKICogIyMjIyMgRXhhbXBsZQogKgogKiBgYGBqYXZhc2NyaXB0CiAqIHB1c2goY2h1bmssIGZhbHNlKTsgLy8gcHVzaCBvbmUgb2YgZGF0YSBjaHVua3MKICogLi4uCiAqIHB1c2goY2h1bmssIHRydWUpOyAgLy8gcHVzaCBsYXN0IGNodW5rCiAqIGBgYAogKiovCkluZmxhdGUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoZGF0YSwgbW9kZSkgewogIHZhciBzdHJtID0gdGhpcy5zdHJtOwogIHZhciBjaHVua1NpemUgPSB0aGlzLm9wdGlvbnMuY2h1bmtTaXplOwogIHZhciBkaWN0aW9uYXJ5ID0gdGhpcy5vcHRpb25zLmRpY3Rpb25hcnk7CiAgdmFyIHN0YXR1cywgX21vZGU7CiAgdmFyIG5leHRfb3V0X3V0ZjgsIHRhaWwsIHV0ZjhzdHI7CiAgdmFyIGRpY3Q7CgogIC8vIEZsYWcgdG8gcHJvcGVybHkgcHJvY2VzcyBaX0JVRl9FUlJPUiBvbiB0ZXN0aW5nIGluZmxhdGUgY2FsbAogIC8vIHdoZW4gd2UgY2hlY2sgdGhhdCBhbGwgb3V0cHV0IGRhdGEgd2FzIGZsdXNoZWQuCiAgdmFyIGFsbG93QnVmRXJyb3IgPSBmYWxzZTsKCiAgaWYgKHRoaXMuZW5kZWQpIHsgcmV0dXJuIGZhbHNlOyB9CiAgX21vZGUgPSAobW9kZSA9PT0gfn5tb2RlKSA/IG1vZGUgOiAoKG1vZGUgPT09IHRydWUpID8gYy5aX0ZJTklTSCA6IGMuWl9OT19GTFVTSCk7CgogIC8vIENvbnZlcnQgZGF0YSBpZiBuZWVkZWQKICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7CiAgICAvLyBPbmx5IGJpbmFyeSBzdHJpbmdzIGNhbiBiZSBkZWNvbXByZXNzZWQgb24gcHJhY3RpY2UKICAgIHN0cm0uaW5wdXQgPSBzdHJpbmdzLmJpbnN0cmluZzJidWYoZGF0YSk7CiAgfSBlbHNlIGlmICh0b1N0cmluZy5jYWxsKGRhdGEpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nKSB7CiAgICBzdHJtLmlucHV0ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7CiAgfSBlbHNlIHsKICAgIHN0cm0uaW5wdXQgPSBkYXRhOwogIH0KCiAgc3RybS5uZXh0X2luID0gMDsKICBzdHJtLmF2YWlsX2luID0gc3RybS5pbnB1dC5sZW5ndGg7CgogIGRvIHsKICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICBzdHJtLm91dHB1dCA9IG5ldyB1dGlscy5CdWY4KGNodW5rU2l6ZSk7CiAgICAgIHN0cm0ubmV4dF9vdXQgPSAwOwogICAgICBzdHJtLmF2YWlsX291dCA9IGNodW5rU2l6ZTsKICAgIH0KCiAgICBzdGF0dXMgPSB6bGliX2luZmxhdGUuaW5mbGF0ZShzdHJtLCBjLlpfTk9fRkxVU0gpOyAgICAvKiBubyBiYWQgcmV0dXJuIHZhbHVlICovCgogICAgaWYgKHN0YXR1cyA9PT0gYy5aX05FRURfRElDVCAmJiBkaWN0aW9uYXJ5KSB7CiAgICAgIC8vIENvbnZlcnQgZGF0YSBpZiBuZWVkZWQKICAgICAgaWYgKHR5cGVvZiBkaWN0aW9uYXJ5ID09PSAnc3RyaW5nJykgewogICAgICAgIGRpY3QgPSBzdHJpbmdzLnN0cmluZzJidWYoZGljdGlvbmFyeSk7CiAgICAgIH0gZWxzZSBpZiAodG9TdHJpbmcuY2FsbChkaWN0aW9uYXJ5KSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJykgewogICAgICAgIGRpY3QgPSBuZXcgVWludDhBcnJheShkaWN0aW9uYXJ5KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkaWN0ID0gZGljdGlvbmFyeTsKICAgICAgfQoKICAgICAgc3RhdHVzID0gemxpYl9pbmZsYXRlLmluZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSwgZGljdCk7CgogICAgfQoKICAgIGlmIChzdGF0dXMgPT09IGMuWl9CVUZfRVJST1IgJiYgYWxsb3dCdWZFcnJvciA9PT0gdHJ1ZSkgewogICAgICBzdGF0dXMgPSBjLlpfT0s7CiAgICAgIGFsbG93QnVmRXJyb3IgPSBmYWxzZTsKICAgIH0KCiAgICBpZiAoc3RhdHVzICE9PSBjLlpfU1RSRUFNX0VORCAmJiBzdGF0dXMgIT09IGMuWl9PSykgewogICAgICB0aGlzLm9uRW5kKHN0YXR1cyk7CiAgICAgIHRoaXMuZW5kZWQgPSB0cnVlOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgaWYgKHN0cm0ubmV4dF9vdXQpIHsKICAgICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwIHx8IHN0YXR1cyA9PT0gYy5aX1NUUkVBTV9FTkQgfHwgKHN0cm0uYXZhaWxfaW4gPT09IDAgJiYgKF9tb2RlID09PSBjLlpfRklOSVNIIHx8IF9tb2RlID09PSBjLlpfU1lOQ19GTFVTSCkpKSB7CgogICAgICAgIGlmICh0aGlzLm9wdGlvbnMudG8gPT09ICdzdHJpbmcnKSB7CgogICAgICAgICAgbmV4dF9vdXRfdXRmOCA9IHN0cmluZ3MudXRmOGJvcmRlcihzdHJtLm91dHB1dCwgc3RybS5uZXh0X291dCk7CgogICAgICAgICAgdGFpbCA9IHN0cm0ubmV4dF9vdXQgLSBuZXh0X291dF91dGY4OwogICAgICAgICAgdXRmOHN0ciA9IHN0cmluZ3MuYnVmMnN0cmluZyhzdHJtLm91dHB1dCwgbmV4dF9vdXRfdXRmOCk7CgogICAgICAgICAgLy8gbW92ZSB0YWlsCiAgICAgICAgICBzdHJtLm5leHRfb3V0ID0gdGFpbDsKICAgICAgICAgIHN0cm0uYXZhaWxfb3V0ID0gY2h1bmtTaXplIC0gdGFpbDsKICAgICAgICAgIGlmICh0YWlsKSB7IHV0aWxzLmFycmF5U2V0KHN0cm0ub3V0cHV0LCBzdHJtLm91dHB1dCwgbmV4dF9vdXRfdXRmOCwgdGFpbCwgMCk7IH0KCiAgICAgICAgICB0aGlzLm9uRGF0YSh1dGY4c3RyKTsKCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMub25EYXRhKHV0aWxzLnNocmlua0J1ZihzdHJtLm91dHB1dCwgc3RybS5uZXh0X291dCkpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC8vIFdoZW4gbm8gbW9yZSBpbnB1dCBkYXRhLCB3ZSBzaG91bGQgY2hlY2sgdGhhdCBpbnRlcm5hbCBpbmZsYXRlIGJ1ZmZlcnMKICAgIC8vIGFyZSBmbHVzaGVkLiBUaGUgb25seSB3YXkgdG8gZG8gaXQgd2hlbiBhdmFpbF9vdXQgPSAwIC0gcnVuIG9uZSBtb3JlCiAgICAvLyBpbmZsYXRlIHBhc3MuIEJ1dCBpZiBvdXRwdXQgZGF0YSBub3QgZXhpc3RzLCBpbmZsYXRlIHJldHVybiBaX0JVRl9FUlJPUi4KICAgIC8vIEhlcmUgd2Ugc2V0IGZsYWcgdG8gcHJvY2VzcyB0aGlzIGVycm9yIHByb3Blcmx5LgogICAgLy8KICAgIC8vIE5PVEUuIERlZmxhdGUgZG9lcyBub3QgcmV0dXJuIGVycm9yIGluIHRoaXMgY2FzZSBhbmQgZG9lcyBub3QgbmVlZHMgc3VjaAogICAgLy8gbG9naWMuCiAgICBpZiAoc3RybS5hdmFpbF9pbiA9PT0gMCAmJiBzdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICBhbGxvd0J1ZkVycm9yID0gdHJ1ZTsKICAgIH0KCiAgfSB3aGlsZSAoKHN0cm0uYXZhaWxfaW4gPiAwIHx8IHN0cm0uYXZhaWxfb3V0ID09PSAwKSAmJiBzdGF0dXMgIT09IGMuWl9TVFJFQU1fRU5EKTsKCiAgaWYgKHN0YXR1cyA9PT0gYy5aX1NUUkVBTV9FTkQpIHsKICAgIF9tb2RlID0gYy5aX0ZJTklTSDsKICB9CgogIC8vIEZpbmFsaXplIG9uIHRoZSBsYXN0IGNodW5rLgogIGlmIChfbW9kZSA9PT0gYy5aX0ZJTklTSCkgewogICAgc3RhdHVzID0gemxpYl9pbmZsYXRlLmluZmxhdGVFbmQodGhpcy5zdHJtKTsKICAgIHRoaXMub25FbmQoc3RhdHVzKTsKICAgIHRoaXMuZW5kZWQgPSB0cnVlOwogICAgcmV0dXJuIHN0YXR1cyA9PT0gYy5aX09LOwogIH0KCiAgLy8gY2FsbGJhY2sgaW50ZXJpbSByZXN1bHRzIGlmIFpfU1lOQ19GTFVTSC4KICBpZiAoX21vZGUgPT09IGMuWl9TWU5DX0ZMVVNIKSB7CiAgICB0aGlzLm9uRW5kKGMuWl9PSyk7CiAgICBzdHJtLmF2YWlsX291dCA9IDA7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIHJldHVybiB0cnVlOwp9OwoKCi8qKgogKiBJbmZsYXRlI29uRGF0YShjaHVuaykgLT4gVm9pZAogKiAtIGNodW5rIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IG91cHV0IGRhdGEuIFR5cGUgb2YgYXJyYXkgZGVwZW5kcwogKiAgIG9uIGpzIGVuZ2luZSBzdXBwb3J0LiBXaGVuIHN0cmluZyBvdXRwdXQgcmVxdWVzdGVkLCBlYWNoIGNodW5rCiAqICAgd2lsbCBiZSBzdHJpbmcuCiAqCiAqIEJ5IGRlZmF1bHQsIHN0b3JlcyBkYXRhIGJsb2NrcyBpbiBgY2h1bmtzW11gIHByb3BlcnR5IGFuZCBnbHVlCiAqIHRob3NlIGluIGBvbkVuZGAuIE92ZXJyaWRlIHRoaXMgaGFuZGxlciwgaWYgeW91IG5lZWQgYW5vdGhlciBiZWhhdmlvdXIuCiAqKi8KSW5mbGF0ZS5wcm90b3R5cGUub25EYXRhID0gZnVuY3Rpb24gKGNodW5rKSB7CiAgdGhpcy5jaHVua3MucHVzaChjaHVuayk7Cn07CgoKLyoqCiAqIEluZmxhdGUjb25FbmQoc3RhdHVzKSAtPiBWb2lkCiAqIC0gc3RhdHVzIChOdW1iZXIpOiBpbmZsYXRlIHN0YXR1cy4gMCAoWl9PSykgb24gc3VjY2VzcywKICogICBvdGhlciBpZiBub3QuCiAqCiAqIENhbGxlZCBlaXRoZXIgYWZ0ZXIgeW91IHRlbGwgaW5mbGF0ZSB0aGF0IHRoZSBpbnB1dCBzdHJlYW0gaXMKICogY29tcGxldGUgKFpfRklOSVNIKSBvciBzaG91bGQgYmUgZmx1c2hlZCAoWl9TWU5DX0ZMVVNIKQogKiBvciBpZiBhbiBlcnJvciBoYXBwZW5lZC4gQnkgZGVmYXVsdCAtIGpvaW4gY29sbGVjdGVkIGNodW5rcywKICogZnJlZSBtZW1vcnkgYW5kIGZpbGwgYHJlc3VsdHNgIC8gYGVycmAgcHJvcGVydGllcy4KICoqLwpJbmZsYXRlLnByb3RvdHlwZS5vbkVuZCA9IGZ1bmN0aW9uIChzdGF0dXMpIHsKICAvLyBPbiBzdWNjZXNzIC0gam9pbgogIGlmIChzdGF0dXMgPT09IGMuWl9PSykgewogICAgaWYgKHRoaXMub3B0aW9ucy50byA9PT0gJ3N0cmluZycpIHsKICAgICAgLy8gR2x1ZSAmIGNvbnZlcnQgaGVyZSwgdW50aWwgd2UgdGVhY2ggcGFrbyB0byBzZW5kCiAgICAgIC8vIHV0ZjggYWxsaWduZWQgc3RyaW5ncyB0byBvbkRhdGEKICAgICAgdGhpcy5yZXN1bHQgPSB0aGlzLmNodW5rcy5qb2luKCcnKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMucmVzdWx0ID0gdXRpbHMuZmxhdHRlbkNodW5rcyh0aGlzLmNodW5rcyk7CiAgICB9CiAgfQogIHRoaXMuY2h1bmtzID0gW107CiAgdGhpcy5lcnIgPSBzdGF0dXM7CiAgdGhpcy5tc2cgPSB0aGlzLnN0cm0ubXNnOwp9OwoKCi8qKgogKiBpbmZsYXRlKGRhdGFbLCBvcHRpb25zXSkgLT4gVWludDhBcnJheXxBcnJheXxTdHJpbmcKICogLSBkYXRhIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IGlucHV0IGRhdGEgdG8gZGVjb21wcmVzcy4KICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGluZmxhdGUgb3B0aW9ucy4KICoKICogRGVjb21wcmVzcyBgZGF0YWAgd2l0aCBpbmZsYXRlL3VuZ3ppcCBhbmQgYG9wdGlvbnNgLiBBdXRvZGV0ZWN0CiAqIGZvcm1hdCB2aWEgd3JhcHBlciBoZWFkZXIgYnkgZGVmYXVsdC4gVGhhdCdzIHdoeSB3ZSBkb24ndCBwcm92aWRlCiAqIHNlcGFyYXRlIGB1bmd6aXBgIG1ldGhvZC4KICoKICogU3VwcG9ydGVkIG9wdGlvbnMgYXJlOgogKgogKiAtIHdpbmRvd0JpdHMKICoKICogW2h0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZF0oaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkKQogKiBmb3IgbW9yZSBpbmZvcm1hdGlvbi4KICoKICogU3VnYXIgKG9wdGlvbnMpOgogKgogKiAtIGByYXdgIChCb29sZWFuKSAtIHNheSB0aGF0IHdlIHdvcmsgd2l0aCByYXcgc3RyZWFtLCBpZiB5b3UgZG9uJ3Qgd2lzaCB0byBzcGVjaWZ5CiAqICAgbmVnYXRpdmUgd2luZG93Qml0cyBpbXBsaWNpdGx5LgogKiAtIGB0b2AgKFN0cmluZykgLSBpZiBlcXVhbCB0byAnc3RyaW5nJywgdGhlbiByZXN1bHQgd2lsbCBiZSBjb252ZXJ0ZWQKICogICBmcm9tIHV0ZjggdG8gdXRmMTYgKGphdmFzY3JpcHQpIHN0cmluZy4gV2hlbiBzdHJpbmcgb3V0cHV0IHJlcXVlc3RlZCwKICogICBjaHVuayBsZW5ndGggY2FuIGRpZmZlciBmcm9tIGBjaHVua1NpemVgLCBkZXBlbmRpbmcgb24gY29udGVudC4KICoKICoKICogIyMjIyMgRXhhbXBsZToKICoKICogYGBgamF2YXNjcmlwdAogKiB2YXIgcGFrbyA9IHJlcXVpcmUoJ3Bha28nKQogKiAgICwgaW5wdXQgPSBwYWtvLmRlZmxhdGUoWzEsMiwzLDQsNSw2LDcsOCw5XSkKICogICAsIG91dHB1dDsKICoKICogdHJ5IHsKICogICBvdXRwdXQgPSBwYWtvLmluZmxhdGUoaW5wdXQpOwogKiB9IGNhdGNoIChlcnIpCiAqICAgY29uc29sZS5sb2coZXJyKTsKICogfQogKiBgYGAKICoqLwpmdW5jdGlvbiBpbmZsYXRlKGlucHV0LCBvcHRpb25zKSB7CiAgdmFyIGluZmxhdG9yID0gbmV3IEluZmxhdGUob3B0aW9ucyk7CgogIGluZmxhdG9yLnB1c2goaW5wdXQsIHRydWUpOwoKICAvLyBUaGF0IHdpbGwgbmV2ZXIgaGFwcGVucywgaWYgeW91IGRvbid0IGNoZWF0IHdpdGggb3B0aW9ucyA6KQogIGlmIChpbmZsYXRvci5lcnIpIHsgdGhyb3cgaW5mbGF0b3IubXNnIHx8IG1zZ1tpbmZsYXRvci5lcnJdOyB9CgogIHJldHVybiBpbmZsYXRvci5yZXN1bHQ7Cn0KCgovKioKICogaW5mbGF0ZVJhdyhkYXRhWywgb3B0aW9uc10pIC0+IFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nCiAqIC0gZGF0YSAoVWludDhBcnJheXxBcnJheXxTdHJpbmcpOiBpbnB1dCBkYXRhIHRvIGRlY29tcHJlc3MuCiAqIC0gb3B0aW9ucyAoT2JqZWN0KTogemxpYiBpbmZsYXRlIG9wdGlvbnMuCiAqCiAqIFRoZSBzYW1lIGFzIFtbaW5mbGF0ZV1dLCBidXQgY3JlYXRlcyByYXcgZGF0YSwgd2l0aG91dCB3cmFwcGVyCiAqIChoZWFkZXIgYW5kIGFkbGVyMzIgY3JjKS4KICoqLwpmdW5jdGlvbiBpbmZsYXRlUmF3KGlucHV0LCBvcHRpb25zKSB7CiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgb3B0aW9ucy5yYXcgPSB0cnVlOwogIHJldHVybiBpbmZsYXRlKGlucHV0LCBvcHRpb25zKTsKfQoKCi8qKgogKiB1bmd6aXAoZGF0YVssIG9wdGlvbnNdKSAtPiBVaW50OEFycmF5fEFycmF5fFN0cmluZwogKiAtIGRhdGEgKFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nKTogaW5wdXQgZGF0YSB0byBkZWNvbXByZXNzLgogKiAtIG9wdGlvbnMgKE9iamVjdCk6IHpsaWIgaW5mbGF0ZSBvcHRpb25zLgogKgogKiBKdXN0IHNob3J0Y3V0IHRvIFtbaW5mbGF0ZV1dLCBiZWNhdXNlIGl0IGF1dG9kZXRlY3RzIGZvcm1hdAogKiBieSBoZWFkZXIuY29udGVudC4gRG9uZSBmb3IgY29udmVuaWVuY2UuCiAqKi8KCgpleHBvcnRzLkluZmxhdGUgPSBJbmZsYXRlOwpleHBvcnRzLmluZmxhdGUgPSBpbmZsYXRlOwpleHBvcnRzLmluZmxhdGVSYXcgPSBpbmZsYXRlUmF3OwpleHBvcnRzLnVuZ3ppcCAgPSBpbmZsYXRlOwoKfSx7Ii4vdXRpbHMvY29tbW9uIjo0MSwiLi91dGlscy9zdHJpbmdzIjo0MiwiLi96bGliL2NvbnN0YW50cyI6NDQsIi4vemxpYi9nemhlYWRlciI6NDcsIi4vemxpYi9pbmZsYXRlIjo0OSwiLi96bGliL21lc3NhZ2VzIjo1MSwiLi96bGliL3pzdHJlYW0iOjUzfV0sNDE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgoKdmFyIFRZUEVEX09LID0gICh0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcpICYmCiAgICAgICAgICAgICAgICAodHlwZW9mIFVpbnQxNkFycmF5ICE9PSAndW5kZWZpbmVkJykgJiYKICAgICAgICAgICAgICAgICh0eXBlb2YgSW50MzJBcnJheSAhPT0gJ3VuZGVmaW5lZCcpOwoKCmV4cG9ydHMuYXNzaWduID0gZnVuY3Rpb24gKG9iaiAvKmZyb20xLCBmcm9tMiwgZnJvbTMsIC4uLiovKSB7CiAgdmFyIHNvdXJjZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwogIHdoaWxlIChzb3VyY2VzLmxlbmd0aCkgewogICAgdmFyIHNvdXJjZSA9IHNvdXJjZXMuc2hpZnQoKTsKICAgIGlmICghc291cmNlKSB7IGNvbnRpbnVlOyB9CgogICAgaWYgKHR5cGVvZiBzb3VyY2UgIT09ICdvYmplY3QnKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3Ioc291cmNlICsgJ211c3QgYmUgbm9uLW9iamVjdCcpOwogICAgfQoKICAgIGZvciAodmFyIHAgaW4gc291cmNlKSB7CiAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkocCkpIHsKICAgICAgICBvYmpbcF0gPSBzb3VyY2VbcF07CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiBvYmo7Cn07CgoKLy8gcmVkdWNlIGJ1ZmZlciBzaXplLCBhdm9pZGluZyBtZW0gY29weQpleHBvcnRzLnNocmlua0J1ZiA9IGZ1bmN0aW9uIChidWYsIHNpemUpIHsKICBpZiAoYnVmLmxlbmd0aCA9PT0gc2l6ZSkgeyByZXR1cm4gYnVmOyB9CiAgaWYgKGJ1Zi5zdWJhcnJheSkgeyByZXR1cm4gYnVmLnN1YmFycmF5KDAsIHNpemUpOyB9CiAgYnVmLmxlbmd0aCA9IHNpemU7CiAgcmV0dXJuIGJ1ZjsKfTsKCgp2YXIgZm5UeXBlZCA9IHsKICBhcnJheVNldDogZnVuY3Rpb24gKGRlc3QsIHNyYywgc3JjX29mZnMsIGxlbiwgZGVzdF9vZmZzKSB7CiAgICBpZiAoc3JjLnN1YmFycmF5ICYmIGRlc3Quc3ViYXJyYXkpIHsKICAgICAgZGVzdC5zZXQoc3JjLnN1YmFycmF5KHNyY19vZmZzLCBzcmNfb2ZmcyArIGxlbiksIGRlc3Rfb2Zmcyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIC8vIEZhbGxiYWNrIHRvIG9yZGluYXJ5IGFycmF5CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIGRlc3RbZGVzdF9vZmZzICsgaV0gPSBzcmNbc3JjX29mZnMgKyBpXTsKICAgIH0KICB9LAogIC8vIEpvaW4gYXJyYXkgb2YgY2h1bmtzIHRvIHNpbmdsZSBhcnJheS4KICBmbGF0dGVuQ2h1bmtzOiBmdW5jdGlvbiAoY2h1bmtzKSB7CiAgICB2YXIgaSwgbCwgbGVuLCBwb3MsIGNodW5rLCByZXN1bHQ7CgogICAgLy8gY2FsY3VsYXRlIGRhdGEgbGVuZ3RoCiAgICBsZW4gPSAwOwogICAgZm9yIChpID0gMCwgbCA9IGNodW5rcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgbGVuICs9IGNodW5rc1tpXS5sZW5ndGg7CiAgICB9CgogICAgLy8gam9pbiBjaHVua3MKICAgIHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KGxlbik7CiAgICBwb3MgPSAwOwogICAgZm9yIChpID0gMCwgbCA9IGNodW5rcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgY2h1bmsgPSBjaHVua3NbaV07CiAgICAgIHJlc3VsdC5zZXQoY2h1bmssIHBvcyk7CiAgICAgIHBvcyArPSBjaHVuay5sZW5ndGg7CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdDsKICB9Cn07Cgp2YXIgZm5VbnR5cGVkID0gewogIGFycmF5U2V0OiBmdW5jdGlvbiAoZGVzdCwgc3JjLCBzcmNfb2ZmcywgbGVuLCBkZXN0X29mZnMpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgZGVzdFtkZXN0X29mZnMgKyBpXSA9IHNyY1tzcmNfb2ZmcyArIGldOwogICAgfQogIH0sCiAgLy8gSm9pbiBhcnJheSBvZiBjaHVua3MgdG8gc2luZ2xlIGFycmF5LgogIGZsYXR0ZW5DaHVua3M6IGZ1bmN0aW9uIChjaHVua3MpIHsKICAgIHJldHVybiBbXS5jb25jYXQuYXBwbHkoW10sIGNodW5rcyk7CiAgfQp9OwoKCi8vIEVuYWJsZS9EaXNhYmxlIHR5cGVkIGFycmF5cyB1c2UsIGZvciB0ZXN0aW5nCi8vCmV4cG9ydHMuc2V0VHlwZWQgPSBmdW5jdGlvbiAob24pIHsKICBpZiAob24pIHsKICAgIGV4cG9ydHMuQnVmOCAgPSBVaW50OEFycmF5OwogICAgZXhwb3J0cy5CdWYxNiA9IFVpbnQxNkFycmF5OwogICAgZXhwb3J0cy5CdWYzMiA9IEludDMyQXJyYXk7CiAgICBleHBvcnRzLmFzc2lnbihleHBvcnRzLCBmblR5cGVkKTsKICB9IGVsc2UgewogICAgZXhwb3J0cy5CdWY4ICA9IEFycmF5OwogICAgZXhwb3J0cy5CdWYxNiA9IEFycmF5OwogICAgZXhwb3J0cy5CdWYzMiA9IEFycmF5OwogICAgZXhwb3J0cy5hc3NpZ24oZXhwb3J0cywgZm5VbnR5cGVkKTsKICB9Cn07CgpleHBvcnRzLnNldFR5cGVkKFRZUEVEX09LKTsKCn0se31dLDQyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gU3RyaW5nIGVuY29kZS9kZWNvZGUgaGVscGVycwondXNlIHN0cmljdCc7CgoKdmFyIHV0aWxzID0gcmVxdWlyZSgnLi9jb21tb24nKTsKCgovLyBRdWljayBjaGVjayBpZiB3ZSBjYW4gdXNlIGZhc3QgYXJyYXkgdG8gYmluIHN0cmluZyBjb252ZXJzaW9uCi8vCi8vIC0gYXBwbHkoQXJyYXkpIGNhbiBmYWlsIG9uIEFuZHJvaWQgMi4yCi8vIC0gYXBwbHkoVWludDhBcnJheSkgY2FuIGZhaWwgb24gaU9TIDUuMSBTYWZhcnkKLy8KdmFyIFNUUl9BUFBMWV9PSyA9IHRydWU7CnZhciBTVFJfQVBQTFlfVUlBX09LID0gdHJ1ZTsKCnRyeSB7IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgWyAwIF0pOyB9IGNhdGNoIChfXykgeyBTVFJfQVBQTFlfT0sgPSBmYWxzZTsgfQp0cnkgeyBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50OEFycmF5KDEpKTsgfSBjYXRjaCAoX18pIHsgU1RSX0FQUExZX1VJQV9PSyA9IGZhbHNlOyB9CgoKLy8gVGFibGUgd2l0aCB1dGY4IGxlbmd0aHMgKGNhbGN1bGF0ZWQgYnkgZmlyc3QgYnl0ZSBvZiBzZXF1ZW5jZSkKLy8gTm90ZSwgdGhhdCA1ICYgNi1ieXRlIHZhbHVlcyBhbmQgc29tZSA0LWJ5dGUgdmFsdWVzIGNhbiBub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlMsCi8vIGJlY2F1c2UgbWF4IHBvc3NpYmxlIGNvZGVwb2ludCBpcyAweDEwZmZmZgp2YXIgX3V0ZjhsZW4gPSBuZXcgdXRpbHMuQnVmOCgyNTYpOwpmb3IgKHZhciBxID0gMDsgcSA8IDI1NjsgcSsrKSB7CiAgX3V0ZjhsZW5bcV0gPSAocSA+PSAyNTIgPyA2IDogcSA+PSAyNDggPyA1IDogcSA+PSAyNDAgPyA0IDogcSA+PSAyMjQgPyAzIDogcSA+PSAxOTIgPyAyIDogMSk7Cn0KX3V0ZjhsZW5bMjU0XSA9IF91dGY4bGVuWzI1NF0gPSAxOyAvLyBJbnZhbGlkIHNlcXVlbmNlIHN0YXJ0CgoKLy8gY29udmVydCBzdHJpbmcgdG8gYXJyYXkgKHR5cGVkLCB3aGVuIHBvc3NpYmxlKQpleHBvcnRzLnN0cmluZzJidWYgPSBmdW5jdGlvbiAoc3RyKSB7CiAgdmFyIGJ1ZiwgYywgYzIsIG1fcG9zLCBpLCBzdHJfbGVuID0gc3RyLmxlbmd0aCwgYnVmX2xlbiA9IDA7CgogIC8vIGNvdW50IGJpbmFyeSBzaXplCiAgZm9yIChtX3BvcyA9IDA7IG1fcG9zIDwgc3RyX2xlbjsgbV9wb3MrKykgewogICAgYyA9IHN0ci5jaGFyQ29kZUF0KG1fcG9zKTsKICAgIGlmICgoYyAmIDB4ZmMwMCkgPT09IDB4ZDgwMCAmJiAobV9wb3MgKyAxIDwgc3RyX2xlbikpIHsKICAgICAgYzIgPSBzdHIuY2hhckNvZGVBdChtX3BvcyArIDEpOwogICAgICBpZiAoKGMyICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7CiAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgLSAweGQ4MDApIDw8IDEwKSArIChjMiAtIDB4ZGMwMCk7CiAgICAgICAgbV9wb3MrKzsKICAgICAgfQogICAgfQogICAgYnVmX2xlbiArPSBjIDwgMHg4MCA/IDEgOiBjIDwgMHg4MDAgPyAyIDogYyA8IDB4MTAwMDAgPyAzIDogNDsKICB9CgogIC8vIGFsbG9jYXRlIGJ1ZmZlcgogIGJ1ZiA9IG5ldyB1dGlscy5CdWY4KGJ1Zl9sZW4pOwoKICAvLyBjb252ZXJ0CiAgZm9yIChpID0gMCwgbV9wb3MgPSAwOyBpIDwgYnVmX2xlbjsgbV9wb3MrKykgewogICAgYyA9IHN0ci5jaGFyQ29kZUF0KG1fcG9zKTsKICAgIGlmICgoYyAmIDB4ZmMwMCkgPT09IDB4ZDgwMCAmJiAobV9wb3MgKyAxIDwgc3RyX2xlbikpIHsKICAgICAgYzIgPSBzdHIuY2hhckNvZGVBdChtX3BvcyArIDEpOwogICAgICBpZiAoKGMyICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7CiAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgLSAweGQ4MDApIDw8IDEwKSArIChjMiAtIDB4ZGMwMCk7CiAgICAgICAgbV9wb3MrKzsKICAgICAgfQogICAgfQogICAgaWYgKGMgPCAweDgwKSB7CiAgICAgIC8qIG9uZSBieXRlICovCiAgICAgIGJ1ZltpKytdID0gYzsKICAgIH0gZWxzZSBpZiAoYyA8IDB4ODAwKSB7CiAgICAgIC8qIHR3byBieXRlcyAqLwogICAgICBidWZbaSsrXSA9IDB4QzAgfCAoYyA+Pj4gNik7CiAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjICYgMHgzZik7CiAgICB9IGVsc2UgaWYgKGMgPCAweDEwMDAwKSB7CiAgICAgIC8qIHRocmVlIGJ5dGVzICovCiAgICAgIGJ1ZltpKytdID0gMHhFMCB8IChjID4+PiAxMik7CiAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjID4+PiA2ICYgMHgzZik7CiAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjICYgMHgzZik7CiAgICB9IGVsc2UgewogICAgICAvKiBmb3VyIGJ5dGVzICovCiAgICAgIGJ1ZltpKytdID0gMHhmMCB8IChjID4+PiAxOCk7CiAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjID4+PiAxMiAmIDB4M2YpOwogICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyA+Pj4gNiAmIDB4M2YpOwogICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyAmIDB4M2YpOwogICAgfQogIH0KCiAgcmV0dXJuIGJ1ZjsKfTsKCi8vIEhlbHBlciAodXNlZCBpbiAyIHBsYWNlcykKZnVuY3Rpb24gYnVmMmJpbnN0cmluZyhidWYsIGxlbikgewogIC8vIHVzZSBmYWxsYmFjayBmb3IgYmlnIGFycmF5cyB0byBhdm9pZCBzdGFjayBvdmVyZmxvdwogIGlmIChsZW4gPCA2NTUzNykgewogICAgaWYgKChidWYuc3ViYXJyYXkgJiYgU1RSX0FQUExZX1VJQV9PSykgfHwgKCFidWYuc3ViYXJyYXkgJiYgU1RSX0FQUExZX09LKSkgewogICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCB1dGlscy5zaHJpbmtCdWYoYnVmLCBsZW4pKTsKICAgIH0KICB9CgogIHZhciByZXN1bHQgPSAnJzsKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICByZXN1bHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pOwogIH0KICByZXR1cm4gcmVzdWx0Owp9CgoKLy8gQ29udmVydCBieXRlIGFycmF5IHRvIGJpbmFyeSBzdHJpbmcKZXhwb3J0cy5idWYyYmluc3RyaW5nID0gZnVuY3Rpb24gKGJ1ZikgewogIHJldHVybiBidWYyYmluc3RyaW5nKGJ1ZiwgYnVmLmxlbmd0aCk7Cn07CgoKLy8gQ29udmVydCBiaW5hcnkgc3RyaW5nICh0eXBlZCwgd2hlbiBwb3NzaWJsZSkKZXhwb3J0cy5iaW5zdHJpbmcyYnVmID0gZnVuY3Rpb24gKHN0cikgewogIHZhciBidWYgPSBuZXcgdXRpbHMuQnVmOChzdHIubGVuZ3RoKTsKICBmb3IgKHZhciBpID0gMCwgbGVuID0gYnVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICBidWZbaV0gPSBzdHIuY2hhckNvZGVBdChpKTsKICB9CiAgcmV0dXJuIGJ1ZjsKfTsKCgovLyBjb252ZXJ0IGFycmF5IHRvIHN0cmluZwpleHBvcnRzLmJ1ZjJzdHJpbmcgPSBmdW5jdGlvbiAoYnVmLCBtYXgpIHsKICB2YXIgaSwgb3V0LCBjLCBjX2xlbjsKICB2YXIgbGVuID0gbWF4IHx8IGJ1Zi5sZW5ndGg7CgogIC8vIFJlc2VydmUgbWF4IHBvc3NpYmxlIGxlbmd0aCAoMiB3b3JkcyBwZXIgY2hhcikKICAvLyBOQjogYnkgdW5rbm93biByZWFzb25zLCBBcnJheSBpcyBzaWduaWZpY2FudGx5IGZhc3RlciBmb3IKICAvLyAgICAgU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseSB0aGFuIFVpbnQxNkFycmF5LgogIHZhciB1dGYxNmJ1ZiA9IG5ldyBBcnJheShsZW4gKiAyKTsKCiAgZm9yIChvdXQgPSAwLCBpID0gMDsgaSA8IGxlbjspIHsKICAgIGMgPSBidWZbaSsrXTsKICAgIC8vIHF1aWNrIHByb2Nlc3MgYXNjaWkKICAgIGlmIChjIDwgMHg4MCkgeyB1dGYxNmJ1ZltvdXQrK10gPSBjOyBjb250aW51ZTsgfQoKICAgIGNfbGVuID0gX3V0ZjhsZW5bY107CiAgICAvLyBza2lwIDUgJiA2IGJ5dGUgY29kZXMKICAgIGlmIChjX2xlbiA+IDQpIHsgdXRmMTZidWZbb3V0KytdID0gMHhmZmZkOyBpICs9IGNfbGVuIC0gMTsgY29udGludWU7IH0KCiAgICAvLyBhcHBseSBtYXNrIG9uIGZpcnN0IGJ5dGUKICAgIGMgJj0gY19sZW4gPT09IDIgPyAweDFmIDogY19sZW4gPT09IDMgPyAweDBmIDogMHgwNzsKICAgIC8vIGpvaW4gdGhlIHJlc3QKICAgIHdoaWxlIChjX2xlbiA+IDEgJiYgaSA8IGxlbikgewogICAgICBjID0gKGMgPDwgNikgfCAoYnVmW2krK10gJiAweDNmKTsKICAgICAgY19sZW4tLTsKICAgIH0KCiAgICAvLyB0ZXJtaW5hdGVkIGJ5IGVuZCBvZiBzdHJpbmc/CiAgICBpZiAoY19sZW4gPiAxKSB7IHV0ZjE2YnVmW291dCsrXSA9IDB4ZmZmZDsgY29udGludWU7IH0KCiAgICBpZiAoYyA8IDB4MTAwMDApIHsKICAgICAgdXRmMTZidWZbb3V0KytdID0gYzsKICAgIH0gZWxzZSB7CiAgICAgIGMgLT0gMHgxMDAwMDsKICAgICAgdXRmMTZidWZbb3V0KytdID0gMHhkODAwIHwgKChjID4+IDEwKSAmIDB4M2ZmKTsKICAgICAgdXRmMTZidWZbb3V0KytdID0gMHhkYzAwIHwgKGMgJiAweDNmZik7CiAgICB9CiAgfQoKICByZXR1cm4gYnVmMmJpbnN0cmluZyh1dGYxNmJ1Ziwgb3V0KTsKfTsKCgovLyBDYWxjdWxhdGUgbWF4IHBvc3NpYmxlIHBvc2l0aW9uIGluIHV0ZjggYnVmZmVyLAovLyB0aGF0IHdpbGwgbm90IGJyZWFrIHNlcXVlbmNlLiBJZiB0aGF0J3Mgbm90IHBvc3NpYmxlCi8vIC0gKHZlcnkgc21hbGwgbGltaXRzKSByZXR1cm4gbWF4IHNpemUgYXMgaXMuCi8vCi8vIGJ1ZltdIC0gdXRmOCBieXRlcyBhcnJheQovLyBtYXggICAtIGxlbmd0aCBsaW1pdCAobWFuZGF0b3J5KTsKZXhwb3J0cy51dGY4Ym9yZGVyID0gZnVuY3Rpb24gKGJ1ZiwgbWF4KSB7CiAgdmFyIHBvczsKCiAgbWF4ID0gbWF4IHx8IGJ1Zi5sZW5ndGg7CiAgaWYgKG1heCA+IGJ1Zi5sZW5ndGgpIHsgbWF4ID0gYnVmLmxlbmd0aDsgfQoKICAvLyBnbyBiYWNrIGZyb20gbGFzdCBwb3NpdGlvbiwgdW50aWwgc3RhcnQgb2Ygc2VxdWVuY2UgZm91bmQKICBwb3MgPSBtYXggLSAxOwogIHdoaWxlIChwb3MgPj0gMCAmJiAoYnVmW3Bvc10gJiAweEMwKSA9PT0gMHg4MCkgeyBwb3MtLTsgfQoKICAvLyBGdWNrdXAgLSB2ZXJ5IHNtYWxsIGFuZCBicm9rZW4gc2VxdWVuY2UsCiAgLy8gcmV0dXJuIG1heCwgYmVjYXVzZSB3ZSBzaG91bGQgcmV0dXJuIHNvbWV0aGluZyBhbnl3YXkuCiAgaWYgKHBvcyA8IDApIHsgcmV0dXJuIG1heDsgfQoKICAvLyBJZiB3ZSBjYW1lIHRvIHN0YXJ0IG9mIGJ1ZmZlciAtIHRoYXQgbWVhbnMgdnVmZmVyIGlzIHRvbyBzbWFsbCwKICAvLyByZXR1cm4gbWF4IHRvby4KICBpZiAocG9zID09PSAwKSB7IHJldHVybiBtYXg7IH0KCiAgcmV0dXJuIChwb3MgKyBfdXRmOGxlbltidWZbcG9zXV0gPiBtYXgpID8gcG9zIDogbWF4Owp9OwoKfSx7Ii4vY29tbW9uIjo0MX1dLDQzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKLy8gTm90ZTogYWRsZXIzMiB0YWtlcyAxMiUgZm9yIGxldmVsIDAgYW5kIDIlIGZvciBsZXZlbCA2LgovLyBJdCBkb2Vzbid0IHdvcnRoIHRvIG1ha2UgYWRkaXRpb25hbCBvcHRpbWl6YXRpb25hIGFzIGluIG9yaWdpbmFsLgovLyBTbWFsbCBzaXplIGlzIHByZWZlcmFibGUuCgovLyAoQykgMTk5NS0yMDEzIEplYW4tbG91cCBHYWlsbHkgYW5kIE1hcmsgQWRsZXIKLy8gKEMpIDIwMTQtMjAxNyBWaXRhbHkgUHV6cmluIGFuZCBBbmRyZXkgVHVwaXRzaW4KLy8KLy8gVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQKLy8gd2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzCi8vIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuCi8vCi8vIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLAovLyBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0Ci8vIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoKLy8KLy8gMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKLy8gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQovLyAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQovLyAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuCi8vIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCi8vICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgovLyAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKZnVuY3Rpb24gYWRsZXIzMihhZGxlciwgYnVmLCBsZW4sIHBvcykgewogIHZhciBzMSA9IChhZGxlciAmIDB4ZmZmZikgfDAsCiAgICAgIHMyID0gKChhZGxlciA+Pj4gMTYpICYgMHhmZmZmKSB8MCwKICAgICAgbiA9IDA7CgogIHdoaWxlIChsZW4gIT09IDApIHsKICAgIC8vIFNldCBsaW1pdCB+IHR3aWNlIGxlc3MgdGhhbiA1NTUyLCB0byBrZWVwCiAgICAvLyBzMiBpbiAzMS1iaXRzLCBiZWNhdXNlIHdlIGZvcmNlIHNpZ25lZCBpbnRzLgogICAgLy8gaW4gb3RoZXIgY2FzZSAlPSB3aWxsIGZhaWwuCiAgICBuID0gbGVuID4gMjAwMCA/IDIwMDAgOiBsZW47CiAgICBsZW4gLT0gbjsKCiAgICBkbyB7CiAgICAgIHMxID0gKHMxICsgYnVmW3BvcysrXSkgfDA7CiAgICAgIHMyID0gKHMyICsgczEpIHwwOwogICAgfSB3aGlsZSAoLS1uKTsKCiAgICBzMSAlPSA2NTUyMTsKICAgIHMyICU9IDY1NTIxOwogIH0KCiAgcmV0dXJuIChzMSB8IChzMiA8PCAxNikpIHwwOwp9CgoKbW9kdWxlLmV4cG9ydHMgPSBhZGxlcjMyOwoKfSx7fV0sNDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgovLyAoQykgMTk5NS0yMDEzIEplYW4tbG91cCBHYWlsbHkgYW5kIE1hcmsgQWRsZXIKLy8gKEMpIDIwMTQtMjAxNyBWaXRhbHkgUHV6cmluIGFuZCBBbmRyZXkgVHVwaXRzaW4KLy8KLy8gVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQKLy8gd2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzCi8vIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuCi8vCi8vIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLAovLyBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0Ci8vIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoKLy8KLy8gMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKLy8gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQovLyAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQovLyAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuCi8vIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCi8vICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgovLyAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKbW9kdWxlLmV4cG9ydHMgPSB7CgogIC8qIEFsbG93ZWQgZmx1c2ggdmFsdWVzOyBzZWUgZGVmbGF0ZSgpIGFuZCBpbmZsYXRlKCkgYmVsb3cgZm9yIGRldGFpbHMgKi8KICBaX05PX0ZMVVNIOiAgICAgICAgIDAsCiAgWl9QQVJUSUFMX0ZMVVNIOiAgICAxLAogIFpfU1lOQ19GTFVTSDogICAgICAgMiwKICBaX0ZVTExfRkxVU0g6ICAgICAgIDMsCiAgWl9GSU5JU0g6ICAgICAgICAgICA0LAogIFpfQkxPQ0s6ICAgICAgICAgICAgNSwKICBaX1RSRUVTOiAgICAgICAgICAgIDYsCgogIC8qIFJldHVybiBjb2RlcyBmb3IgdGhlIGNvbXByZXNzaW9uL2RlY29tcHJlc3Npb24gZnVuY3Rpb25zLiBOZWdhdGl2ZSB2YWx1ZXMKICAqIGFyZSBlcnJvcnMsIHBvc2l0aXZlIHZhbHVlcyBhcmUgdXNlZCBmb3Igc3BlY2lhbCBidXQgbm9ybWFsIGV2ZW50cy4KICAqLwogIFpfT0s6ICAgICAgICAgICAgICAgMCwKICBaX1NUUkVBTV9FTkQ6ICAgICAgIDEsCiAgWl9ORUVEX0RJQ1Q6ICAgICAgICAyLAogIFpfRVJSTk86ICAgICAgICAgICAtMSwKICBaX1NUUkVBTV9FUlJPUjogICAgLTIsCiAgWl9EQVRBX0VSUk9SOiAgICAgIC0zLAogIC8vWl9NRU1fRVJST1I6ICAgICAtNCwKICBaX0JVRl9FUlJPUjogICAgICAgLTUsCiAgLy9aX1ZFUlNJT05fRVJST1I6IC02LAoKICAvKiBjb21wcmVzc2lvbiBsZXZlbHMgKi8KICBaX05PX0NPTVBSRVNTSU9OOiAgICAgICAgIDAsCiAgWl9CRVNUX1NQRUVEOiAgICAgICAgICAgICAxLAogIFpfQkVTVF9DT01QUkVTU0lPTjogICAgICAgOSwKICBaX0RFRkFVTFRfQ09NUFJFU1NJT046ICAgLTEsCgoKICBaX0ZJTFRFUkVEOiAgICAgICAgICAgICAgIDEsCiAgWl9IVUZGTUFOX09OTFk6ICAgICAgICAgICAyLAogIFpfUkxFOiAgICAgICAgICAgICAgICAgICAgMywKICBaX0ZJWEVEOiAgICAgICAgICAgICAgICAgIDQsCiAgWl9ERUZBVUxUX1NUUkFURUdZOiAgICAgICAwLAoKICAvKiBQb3NzaWJsZSB2YWx1ZXMgb2YgdGhlIGRhdGFfdHlwZSBmaWVsZCAodGhvdWdoIHNlZSBpbmZsYXRlKCkpICovCiAgWl9CSU5BUlk6ICAgICAgICAgICAgICAgICAwLAogIFpfVEVYVDogICAgICAgICAgICAgICAgICAgMSwKICAvL1pfQVNDSUk6ICAgICAgICAgICAgICAgIDEsIC8vID0gWl9URVhUIChkZXByZWNhdGVkKQogIFpfVU5LTk9XTjogICAgICAgICAgICAgICAgMiwKCiAgLyogVGhlIGRlZmxhdGUgY29tcHJlc3Npb24gbWV0aG9kICovCiAgWl9ERUZMQVRFRDogICAgICAgICAgICAgICA4CiAgLy9aX05VTEw6ICAgICAgICAgICAgICAgICBudWxsIC8vIFVzZSAtMSBvciBudWxsIGlubGluZSwgZGVwZW5kaW5nIG9uIHZhciB0eXBlCn07Cgp9LHt9XSw0NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCi8vIE5vdGU6IHdlIGNhbid0IGdldCBzaWduaWZpY2FudCBzcGVlZCBib29zdCBoZXJlLgovLyBTbyB3cml0ZSBjb2RlIHRvIG1pbmltaXplIHNpemUgLSBubyBwcmVnZW5lcmF0ZWQgdGFibGVzCi8vIGFuZCBhcnJheSB0b29scyBkZXBlbmRlbmNpZXMuCgovLyAoQykgMTk5NS0yMDEzIEplYW4tbG91cCBHYWlsbHkgYW5kIE1hcmsgQWRsZXIKLy8gKEMpIDIwMTQtMjAxNyBWaXRhbHkgUHV6cmluIGFuZCBBbmRyZXkgVHVwaXRzaW4KLy8KLy8gVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQKLy8gd2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzCi8vIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuCi8vCi8vIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLAovLyBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0Ci8vIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoKLy8KLy8gMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKLy8gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQovLyAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQovLyAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuCi8vIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCi8vICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgovLyAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKLy8gVXNlIG9yZGluYXJ5IGFycmF5LCBzaW5jZSB1bnR5cGVkIG1ha2VzIG5vIGJvb3N0IGhlcmUKZnVuY3Rpb24gbWFrZVRhYmxlKCkgewogIHZhciBjLCB0YWJsZSA9IFtdOwoKICBmb3IgKHZhciBuID0gMDsgbiA8IDI1NjsgbisrKSB7CiAgICBjID0gbjsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgODsgaysrKSB7CiAgICAgIGMgPSAoKGMgJiAxKSA/ICgweEVEQjg4MzIwIF4gKGMgPj4+IDEpKSA6IChjID4+PiAxKSk7CiAgICB9CiAgICB0YWJsZVtuXSA9IGM7CiAgfQoKICByZXR1cm4gdGFibGU7Cn0KCi8vIENyZWF0ZSB0YWJsZSBvbiBsb2FkLiBKdXN0IDI1NSBzaWduZWQgbG9uZ3MuIE5vdCBhIHByb2JsZW0uCnZhciBjcmNUYWJsZSA9IG1ha2VUYWJsZSgpOwoKCmZ1bmN0aW9uIGNyYzMyKGNyYywgYnVmLCBsZW4sIHBvcykgewogIHZhciB0ID0gY3JjVGFibGUsCiAgICAgIGVuZCA9IHBvcyArIGxlbjsKCiAgY3JjIF49IC0xOwoKICBmb3IgKHZhciBpID0gcG9zOyBpIDwgZW5kOyBpKyspIHsKICAgIGNyYyA9IChjcmMgPj4+IDgpIF4gdFsoY3JjIF4gYnVmW2ldKSAmIDB4RkZdOwogIH0KCiAgcmV0dXJuIChjcmMgXiAoLTEpKTsgLy8gPj4+IDA7Cn0KCgptb2R1bGUuZXhwb3J0cyA9IGNyYzMyOwoKfSx7fV0sNDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgovLyAoQykgMTk5NS0yMDEzIEplYW4tbG91cCBHYWlsbHkgYW5kIE1hcmsgQWRsZXIKLy8gKEMpIDIwMTQtMjAxNyBWaXRhbHkgUHV6cmluIGFuZCBBbmRyZXkgVHVwaXRzaW4KLy8KLy8gVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQKLy8gd2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzCi8vIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuCi8vCi8vIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLAovLyBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0Ci8vIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoKLy8KLy8gMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKLy8gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQovLyAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQovLyAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuCi8vIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCi8vICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgovLyAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKdmFyIHV0aWxzICAgPSByZXF1aXJlKCcuLi91dGlscy9jb21tb24nKTsKdmFyIHRyZWVzICAgPSByZXF1aXJlKCcuL3RyZWVzJyk7CnZhciBhZGxlcjMyID0gcmVxdWlyZSgnLi9hZGxlcjMyJyk7CnZhciBjcmMzMiAgID0gcmVxdWlyZSgnLi9jcmMzMicpOwp2YXIgbXNnICAgICA9IHJlcXVpcmUoJy4vbWVzc2FnZXMnKTsKCi8qIFB1YmxpYyBjb25zdGFudHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCgoKLyogQWxsb3dlZCBmbHVzaCB2YWx1ZXM7IHNlZSBkZWZsYXRlKCkgYW5kIGluZmxhdGUoKSBiZWxvdyBmb3IgZGV0YWlscyAqLwp2YXIgWl9OT19GTFVTSCAgICAgID0gMDsKdmFyIFpfUEFSVElBTF9GTFVTSCA9IDE7Ci8vdmFyIFpfU1lOQ19GTFVTSCAgICA9IDI7CnZhciBaX0ZVTExfRkxVU0ggICAgPSAzOwp2YXIgWl9GSU5JU0ggICAgICAgID0gNDsKdmFyIFpfQkxPQ0sgICAgICAgICA9IDU7Ci8vdmFyIFpfVFJFRVMgICAgICAgICA9IDY7CgoKLyogUmV0dXJuIGNvZGVzIGZvciB0aGUgY29tcHJlc3Npb24vZGVjb21wcmVzc2lvbiBmdW5jdGlvbnMuIE5lZ2F0aXZlIHZhbHVlcwogKiBhcmUgZXJyb3JzLCBwb3NpdGl2ZSB2YWx1ZXMgYXJlIHVzZWQgZm9yIHNwZWNpYWwgYnV0IG5vcm1hbCBldmVudHMuCiAqLwp2YXIgWl9PSyAgICAgICAgICAgID0gMDsKdmFyIFpfU1RSRUFNX0VORCAgICA9IDE7Ci8vdmFyIFpfTkVFRF9ESUNUICAgICA9IDI7Ci8vdmFyIFpfRVJSTk8gICAgICAgICA9IC0xOwp2YXIgWl9TVFJFQU1fRVJST1IgID0gLTI7CnZhciBaX0RBVEFfRVJST1IgICAgPSAtMzsKLy92YXIgWl9NRU1fRVJST1IgICAgID0gLTQ7CnZhciBaX0JVRl9FUlJPUiAgICAgPSAtNTsKLy92YXIgWl9WRVJTSU9OX0VSUk9SID0gLTY7CgoKLyogY29tcHJlc3Npb24gbGV2ZWxzICovCi8vdmFyIFpfTk9fQ09NUFJFU1NJT04gICAgICA9IDA7Ci8vdmFyIFpfQkVTVF9TUEVFRCAgICAgICAgICA9IDE7Ci8vdmFyIFpfQkVTVF9DT01QUkVTU0lPTiAgICA9IDk7CnZhciBaX0RFRkFVTFRfQ09NUFJFU1NJT04gPSAtMTsKCgp2YXIgWl9GSUxURVJFRCAgICAgICAgICAgID0gMTsKdmFyIFpfSFVGRk1BTl9PTkxZICAgICAgICA9IDI7CnZhciBaX1JMRSAgICAgICAgICAgICAgICAgPSAzOwp2YXIgWl9GSVhFRCAgICAgICAgICAgICAgID0gNDsKdmFyIFpfREVGQVVMVF9TVFJBVEVHWSAgICA9IDA7CgovKiBQb3NzaWJsZSB2YWx1ZXMgb2YgdGhlIGRhdGFfdHlwZSBmaWVsZCAodGhvdWdoIHNlZSBpbmZsYXRlKCkpICovCi8vdmFyIFpfQklOQVJZICAgICAgICAgICAgICA9IDA7Ci8vdmFyIFpfVEVYVCAgICAgICAgICAgICAgICA9IDE7Ci8vdmFyIFpfQVNDSUkgICAgICAgICAgICAgICA9IDE7IC8vID0gWl9URVhUCnZhciBaX1VOS05PV04gICAgICAgICAgICAgPSAyOwoKCi8qIFRoZSBkZWZsYXRlIGNvbXByZXNzaW9uIG1ldGhvZCAqLwp2YXIgWl9ERUZMQVRFRCAgPSA4OwoKLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8KCgp2YXIgTUFYX01FTV9MRVZFTCA9IDk7Ci8qIE1heGltdW0gdmFsdWUgZm9yIG1lbUxldmVsIGluIGRlZmxhdGVJbml0MiAqLwp2YXIgTUFYX1dCSVRTID0gMTU7Ci8qIDMySyBMWjc3IHdpbmRvdyAqLwp2YXIgREVGX01FTV9MRVZFTCA9IDg7CgoKdmFyIExFTkdUSF9DT0RFUyAgPSAyOTsKLyogbnVtYmVyIG9mIGxlbmd0aCBjb2Rlcywgbm90IGNvdW50aW5nIHRoZSBzcGVjaWFsIEVORF9CTE9DSyBjb2RlICovCnZhciBMSVRFUkFMUyAgICAgID0gMjU2OwovKiBudW1iZXIgb2YgbGl0ZXJhbCBieXRlcyAwLi4yNTUgKi8KdmFyIExfQ09ERVMgICAgICAgPSBMSVRFUkFMUyArIDEgKyBMRU5HVEhfQ09ERVM7Ci8qIG51bWJlciBvZiBMaXRlcmFsIG9yIExlbmd0aCBjb2RlcywgaW5jbHVkaW5nIHRoZSBFTkRfQkxPQ0sgY29kZSAqLwp2YXIgRF9DT0RFUyAgICAgICA9IDMwOwovKiBudW1iZXIgb2YgZGlzdGFuY2UgY29kZXMgKi8KdmFyIEJMX0NPREVTICAgICAgPSAxOTsKLyogbnVtYmVyIG9mIGNvZGVzIHVzZWQgdG8gdHJhbnNmZXIgdGhlIGJpdCBsZW5ndGhzICovCnZhciBIRUFQX1NJWkUgICAgID0gMiAqIExfQ09ERVMgKyAxOwovKiBtYXhpbXVtIGhlYXAgc2l6ZSAqLwp2YXIgTUFYX0JJVFMgID0gMTU7Ci8qIEFsbCBjb2RlcyBtdXN0IG5vdCBleGNlZWQgTUFYX0JJVFMgYml0cyAqLwoKdmFyIE1JTl9NQVRDSCA9IDM7CnZhciBNQVhfTUFUQ0ggPSAyNTg7CnZhciBNSU5fTE9PS0FIRUFEID0gKE1BWF9NQVRDSCArIE1JTl9NQVRDSCArIDEpOwoKdmFyIFBSRVNFVF9ESUNUID0gMHgyMDsKCnZhciBJTklUX1NUQVRFID0gNDI7CnZhciBFWFRSQV9TVEFURSA9IDY5Owp2YXIgTkFNRV9TVEFURSA9IDczOwp2YXIgQ09NTUVOVF9TVEFURSA9IDkxOwp2YXIgSENSQ19TVEFURSA9IDEwMzsKdmFyIEJVU1lfU1RBVEUgPSAxMTM7CnZhciBGSU5JU0hfU1RBVEUgPSA2NjY7Cgp2YXIgQlNfTkVFRF9NT1JFICAgICAgPSAxOyAvKiBibG9jayBub3QgY29tcGxldGVkLCBuZWVkIG1vcmUgaW5wdXQgb3IgbW9yZSBvdXRwdXQgKi8KdmFyIEJTX0JMT0NLX0RPTkUgICAgID0gMjsgLyogYmxvY2sgZmx1c2ggcGVyZm9ybWVkICovCnZhciBCU19GSU5JU0hfU1RBUlRFRCA9IDM7IC8qIGZpbmlzaCBzdGFydGVkLCBuZWVkIG9ubHkgbW9yZSBvdXRwdXQgYXQgbmV4dCBkZWZsYXRlICovCnZhciBCU19GSU5JU0hfRE9ORSAgICA9IDQ7IC8qIGZpbmlzaCBkb25lLCBhY2NlcHQgbm8gbW9yZSBpbnB1dCBvciBvdXRwdXQgKi8KCnZhciBPU19DT0RFID0gMHgwMzsgLy8gVW5peCA6KSAuIERvbid0IGRldGVjdCwgdXNlIHRoaXMgZGVmYXVsdC4KCmZ1bmN0aW9uIGVycihzdHJtLCBlcnJvckNvZGUpIHsKICBzdHJtLm1zZyA9IG1zZ1tlcnJvckNvZGVdOwogIHJldHVybiBlcnJvckNvZGU7Cn0KCmZ1bmN0aW9uIHJhbmsoZikgewogIHJldHVybiAoKGYpIDw8IDEpIC0gKChmKSA+IDQgPyA5IDogMCk7Cn0KCmZ1bmN0aW9uIHplcm8oYnVmKSB7IHZhciBsZW4gPSBidWYubGVuZ3RoOyB3aGlsZSAoLS1sZW4gPj0gMCkgeyBidWZbbGVuXSA9IDA7IH0gfQoKCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogRmx1c2ggYXMgbXVjaCBwZW5kaW5nIG91dHB1dCBhcyBwb3NzaWJsZS4gQWxsIGRlZmxhdGUoKSBvdXRwdXQgZ29lcwogKiB0aHJvdWdoIHRoaXMgZnVuY3Rpb24gc28gc29tZSBhcHBsaWNhdGlvbnMgbWF5IHdpc2ggdG8gbW9kaWZ5IGl0CiAqIHRvIGF2b2lkIGFsbG9jYXRpbmcgYSBsYXJnZSBzdHJtLT5vdXRwdXQgYnVmZmVyIGFuZCBjb3B5aW5nIGludG8gaXQuCiAqIChTZWUgYWxzbyByZWFkX2J1ZigpKS4KICovCmZ1bmN0aW9uIGZsdXNoX3BlbmRpbmcoc3RybSkgewogIHZhciBzID0gc3RybS5zdGF0ZTsKCiAgLy9fdHJfZmx1c2hfYml0cyhzKTsKICB2YXIgbGVuID0gcy5wZW5kaW5nOwogIGlmIChsZW4gPiBzdHJtLmF2YWlsX291dCkgewogICAgbGVuID0gc3RybS5hdmFpbF9vdXQ7CiAgfQogIGlmIChsZW4gPT09IDApIHsgcmV0dXJuOyB9CgogIHV0aWxzLmFycmF5U2V0KHN0cm0ub3V0cHV0LCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmdfb3V0LCBsZW4sIHN0cm0ubmV4dF9vdXQpOwogIHN0cm0ubmV4dF9vdXQgKz0gbGVuOwogIHMucGVuZGluZ19vdXQgKz0gbGVuOwogIHN0cm0udG90YWxfb3V0ICs9IGxlbjsKICBzdHJtLmF2YWlsX291dCAtPSBsZW47CiAgcy5wZW5kaW5nIC09IGxlbjsKICBpZiAocy5wZW5kaW5nID09PSAwKSB7CiAgICBzLnBlbmRpbmdfb3V0ID0gMDsKICB9Cn0KCgpmdW5jdGlvbiBmbHVzaF9ibG9ja19vbmx5KHMsIGxhc3QpIHsKICB0cmVlcy5fdHJfZmx1c2hfYmxvY2socywgKHMuYmxvY2tfc3RhcnQgPj0gMCA/IHMuYmxvY2tfc3RhcnQgOiAtMSksIHMuc3Ryc3RhcnQgLSBzLmJsb2NrX3N0YXJ0LCBsYXN0KTsKICBzLmJsb2NrX3N0YXJ0ID0gcy5zdHJzdGFydDsKICBmbHVzaF9wZW5kaW5nKHMuc3RybSk7Cn0KCgpmdW5jdGlvbiBwdXRfYnl0ZShzLCBiKSB7CiAgcy5wZW5kaW5nX2J1ZltzLnBlbmRpbmcrK10gPSBiOwp9CgoKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBQdXQgYSBzaG9ydCBpbiB0aGUgcGVuZGluZyBidWZmZXIuIFRoZSAxNi1iaXQgdmFsdWUgaXMgcHV0IGluIE1TQiBvcmRlci4KICogSU4gYXNzZXJ0aW9uOiB0aGUgc3RyZWFtIHN0YXRlIGlzIGNvcnJlY3QgYW5kIHRoZXJlIGlzIGVub3VnaCByb29tIGluCiAqIHBlbmRpbmdfYnVmLgogKi8KZnVuY3Rpb24gcHV0U2hvcnRNU0IocywgYikgewovLyAgcHV0X2J5dGUocywgKEJ5dGUpKGIgPj4gOCkpOwovLyAgcHV0X2J5dGUocywgKEJ5dGUpKGIgJiAweGZmKSk7CiAgcy5wZW5kaW5nX2J1ZltzLnBlbmRpbmcrK10gPSAoYiA+Pj4gOCkgJiAweGZmOwogIHMucGVuZGluZ19idWZbcy5wZW5kaW5nKytdID0gYiAmIDB4ZmY7Cn0KCgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogUmVhZCBhIG5ldyBidWZmZXIgZnJvbSB0aGUgY3VycmVudCBpbnB1dCBzdHJlYW0sIHVwZGF0ZSB0aGUgYWRsZXIzMgogKiBhbmQgdG90YWwgbnVtYmVyIG9mIGJ5dGVzIHJlYWQuICBBbGwgZGVmbGF0ZSgpIGlucHV0IGdvZXMgdGhyb3VnaAogKiB0aGlzIGZ1bmN0aW9uIHNvIHNvbWUgYXBwbGljYXRpb25zIG1heSB3aXNoIHRvIG1vZGlmeSBpdCB0byBhdm9pZAogKiBhbGxvY2F0aW5nIGEgbGFyZ2Ugc3RybS0+aW5wdXQgYnVmZmVyIGFuZCBjb3B5aW5nIGZyb20gaXQuCiAqIChTZWUgYWxzbyBmbHVzaF9wZW5kaW5nKCkpLgogKi8KZnVuY3Rpb24gcmVhZF9idWYoc3RybSwgYnVmLCBzdGFydCwgc2l6ZSkgewogIHZhciBsZW4gPSBzdHJtLmF2YWlsX2luOwoKICBpZiAobGVuID4gc2l6ZSkgeyBsZW4gPSBzaXplOyB9CiAgaWYgKGxlbiA9PT0gMCkgeyByZXR1cm4gMDsgfQoKICBzdHJtLmF2YWlsX2luIC09IGxlbjsKCiAgLy8gem1lbWNweShidWYsIHN0cm0tPm5leHRfaW4sIGxlbik7CiAgdXRpbHMuYXJyYXlTZXQoYnVmLCBzdHJtLmlucHV0LCBzdHJtLm5leHRfaW4sIGxlbiwgc3RhcnQpOwogIGlmIChzdHJtLnN0YXRlLndyYXAgPT09IDEpIHsKICAgIHN0cm0uYWRsZXIgPSBhZGxlcjMyKHN0cm0uYWRsZXIsIGJ1ZiwgbGVuLCBzdGFydCk7CiAgfQoKICBlbHNlIGlmIChzdHJtLnN0YXRlLndyYXAgPT09IDIpIHsKICAgIHN0cm0uYWRsZXIgPSBjcmMzMihzdHJtLmFkbGVyLCBidWYsIGxlbiwgc3RhcnQpOwogIH0KCiAgc3RybS5uZXh0X2luICs9IGxlbjsKICBzdHJtLnRvdGFsX2luICs9IGxlbjsKCiAgcmV0dXJuIGxlbjsKfQoKCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBTZXQgbWF0Y2hfc3RhcnQgdG8gdGhlIGxvbmdlc3QgbWF0Y2ggc3RhcnRpbmcgYXQgdGhlIGdpdmVuIHN0cmluZyBhbmQKICogcmV0dXJuIGl0cyBsZW5ndGguIE1hdGNoZXMgc2hvcnRlciBvciBlcXVhbCB0byBwcmV2X2xlbmd0aCBhcmUgZGlzY2FyZGVkLAogKiBpbiB3aGljaCBjYXNlIHRoZSByZXN1bHQgaXMgZXF1YWwgdG8gcHJldl9sZW5ndGggYW5kIG1hdGNoX3N0YXJ0IGlzCiAqIGdhcmJhZ2UuCiAqIElOIGFzc2VydGlvbnM6IGN1cl9tYXRjaCBpcyB0aGUgaGVhZCBvZiB0aGUgaGFzaCBjaGFpbiBmb3IgdGhlIGN1cnJlbnQKICogICBzdHJpbmcgKHN0cnN0YXJ0KSBhbmQgaXRzIGRpc3RhbmNlIGlzIDw9IE1BWF9ESVNULCBhbmQgcHJldl9sZW5ndGggPj0gMQogKiBPVVQgYXNzZXJ0aW9uOiB0aGUgbWF0Y2ggbGVuZ3RoIGlzIG5vdCBncmVhdGVyIHRoYW4gcy0+bG9va2FoZWFkLgogKi8KZnVuY3Rpb24gbG9uZ2VzdF9tYXRjaChzLCBjdXJfbWF0Y2gpIHsKICB2YXIgY2hhaW5fbGVuZ3RoID0gcy5tYXhfY2hhaW5fbGVuZ3RoOyAgICAgIC8qIG1heCBoYXNoIGNoYWluIGxlbmd0aCAqLwogIHZhciBzY2FuID0gcy5zdHJzdGFydDsgLyogY3VycmVudCBzdHJpbmcgKi8KICB2YXIgbWF0Y2g7ICAgICAgICAgICAgICAgICAgICAgICAvKiBtYXRjaGVkIHN0cmluZyAqLwogIHZhciBsZW47ICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogbGVuZ3RoIG9mIGN1cnJlbnQgbWF0Y2ggKi8KICB2YXIgYmVzdF9sZW4gPSBzLnByZXZfbGVuZ3RoOyAgICAgICAgICAgICAgLyogYmVzdCBtYXRjaCBsZW5ndGggc28gZmFyICovCiAgdmFyIG5pY2VfbWF0Y2ggPSBzLm5pY2VfbWF0Y2g7ICAgICAgICAgICAgIC8qIHN0b3AgaWYgbWF0Y2ggbG9uZyBlbm91Z2ggKi8KICB2YXIgbGltaXQgPSAocy5zdHJzdGFydCA+IChzLndfc2l6ZSAtIE1JTl9MT09LQUhFQUQpKSA/CiAgICAgIHMuc3Ryc3RhcnQgLSAocy53X3NpemUgLSBNSU5fTE9PS0FIRUFEKSA6IDAvKk5JTCovOwoKICB2YXIgX3dpbiA9IHMud2luZG93OyAvLyBzaG9ydGN1dAoKICB2YXIgd21hc2sgPSBzLndfbWFzazsKICB2YXIgcHJldiAgPSBzLnByZXY7CgogIC8qIFN0b3Agd2hlbiBjdXJfbWF0Y2ggYmVjb21lcyA8PSBsaW1pdC4gVG8gc2ltcGxpZnkgdGhlIGNvZGUsCiAgICogd2UgcHJldmVudCBtYXRjaGVzIHdpdGggdGhlIHN0cmluZyBvZiB3aW5kb3cgaW5kZXggMC4KICAgKi8KCiAgdmFyIHN0cmVuZCA9IHMuc3Ryc3RhcnQgKyBNQVhfTUFUQ0g7CiAgdmFyIHNjYW5fZW5kMSAgPSBfd2luW3NjYW4gKyBiZXN0X2xlbiAtIDFdOwogIHZhciBzY2FuX2VuZCAgID0gX3dpbltzY2FuICsgYmVzdF9sZW5dOwoKICAvKiBUaGUgY29kZSBpcyBvcHRpbWl6ZWQgZm9yIEhBU0hfQklUUyA+PSA4IGFuZCBNQVhfTUFUQ0gtMiBtdWx0aXBsZSBvZiAxNi4KICAgKiBJdCBpcyBlYXN5IHRvIGdldCByaWQgb2YgdGhpcyBvcHRpbWl6YXRpb24gaWYgbmVjZXNzYXJ5LgogICAqLwogIC8vIEFzc2VydChzLT5oYXNoX2JpdHMgPj0gOCAmJiBNQVhfTUFUQ0ggPT0gMjU4LCAiQ29kZSB0b28gY2xldmVyIik7CgogIC8qIERvIG5vdCB3YXN0ZSB0b28gbXVjaCB0aW1lIGlmIHdlIGFscmVhZHkgaGF2ZSBhIGdvb2QgbWF0Y2g6ICovCiAgaWYgKHMucHJldl9sZW5ndGggPj0gcy5nb29kX21hdGNoKSB7CiAgICBjaGFpbl9sZW5ndGggPj49IDI7CiAgfQogIC8qIERvIG5vdCBsb29rIGZvciBtYXRjaGVzIGJleW9uZCB0aGUgZW5kIG9mIHRoZSBpbnB1dC4gVGhpcyBpcyBuZWNlc3NhcnkKICAgKiB0byBtYWtlIGRlZmxhdGUgZGV0ZXJtaW5pc3RpYy4KICAgKi8KICBpZiAobmljZV9tYXRjaCA+IHMubG9va2FoZWFkKSB7IG5pY2VfbWF0Y2ggPSBzLmxvb2thaGVhZDsgfQoKICAvLyBBc3NlcnQoKHVsZylzLT5zdHJzdGFydCA8PSBzLT53aW5kb3dfc2l6ZS1NSU5fTE9PS0FIRUFELCAibmVlZCBsb29rYWhlYWQiKTsKCiAgZG8gewogICAgLy8gQXNzZXJ0KGN1cl9tYXRjaCA8IHMtPnN0cnN0YXJ0LCAibm8gZnV0dXJlIik7CiAgICBtYXRjaCA9IGN1cl9tYXRjaDsKCiAgICAvKiBTa2lwIHRvIG5leHQgbWF0Y2ggaWYgdGhlIG1hdGNoIGxlbmd0aCBjYW5ub3QgaW5jcmVhc2UKICAgICAqIG9yIGlmIHRoZSBtYXRjaCBsZW5ndGggaXMgbGVzcyB0aGFuIDIuICBOb3RlIHRoYXQgdGhlIGNoZWNrcyBiZWxvdwogICAgICogZm9yIGluc3VmZmljaWVudCBsb29rYWhlYWQgb25seSBvY2N1ciBvY2Nhc2lvbmFsbHkgZm9yIHBlcmZvcm1hbmNlCiAgICAgKiByZWFzb25zLiAgVGhlcmVmb3JlIHVuaW5pdGlhbGl6ZWQgbWVtb3J5IHdpbGwgYmUgYWNjZXNzZWQsIGFuZAogICAgICogY29uZGl0aW9uYWwganVtcHMgd2lsbCBiZSBtYWRlIHRoYXQgZGVwZW5kIG9uIHRob3NlIHZhbHVlcy4KICAgICAqIEhvd2V2ZXIgdGhlIGxlbmd0aCBvZiB0aGUgbWF0Y2ggaXMgbGltaXRlZCB0byB0aGUgbG9va2FoZWFkLCBzbwogICAgICogdGhlIG91dHB1dCBvZiBkZWZsYXRlIGlzIG5vdCBhZmZlY3RlZCBieSB0aGUgdW5pbml0aWFsaXplZCB2YWx1ZXMuCiAgICAgKi8KCiAgICBpZiAoX3dpblttYXRjaCArIGJlc3RfbGVuXSAgICAgIT09IHNjYW5fZW5kICB8fAogICAgICAgIF93aW5bbWF0Y2ggKyBiZXN0X2xlbiAtIDFdICE9PSBzY2FuX2VuZDEgfHwKICAgICAgICBfd2luW21hdGNoXSAgICAgICAgICAgICAgICAhPT0gX3dpbltzY2FuXSB8fAogICAgICAgIF93aW5bKyttYXRjaF0gICAgICAgICAgICAgICE9PSBfd2luW3NjYW4gKyAxXSkgewogICAgICBjb250aW51ZTsKICAgIH0KCiAgICAvKiBUaGUgY2hlY2sgYXQgYmVzdF9sZW4tMSBjYW4gYmUgcmVtb3ZlZCBiZWNhdXNlIGl0IHdpbGwgYmUgbWFkZQogICAgICogYWdhaW4gbGF0ZXIuIChUaGlzIGhldXJpc3RpYyBpcyBub3QgYWx3YXlzIGEgd2luLikKICAgICAqIEl0IGlzIG5vdCBuZWNlc3NhcnkgdG8gY29tcGFyZSBzY2FuWzJdIGFuZCBtYXRjaFsyXSBzaW5jZSB0aGV5CiAgICAgKiBhcmUgYWx3YXlzIGVxdWFsIHdoZW4gdGhlIG90aGVyIGJ5dGVzIG1hdGNoLCBnaXZlbiB0aGF0CiAgICAgKiB0aGUgaGFzaCBrZXlzIGFyZSBlcXVhbCBhbmQgdGhhdCBIQVNIX0JJVFMgPj0gOC4KICAgICAqLwogICAgc2NhbiArPSAyOwogICAgbWF0Y2grKzsKICAgIC8vIEFzc2VydCgqc2NhbiA9PSAqbWF0Y2gsICJtYXRjaFsyXT8iKTsKCiAgICAvKiBXZSBjaGVjayBmb3IgaW5zdWZmaWNpZW50IGxvb2thaGVhZCBvbmx5IGV2ZXJ5IDh0aCBjb21wYXJpc29uOwogICAgICogdGhlIDI1NnRoIGNoZWNrIHdpbGwgYmUgbWFkZSBhdCBzdHJzdGFydCsyNTguCiAgICAgKi8KICAgIGRvIHsKICAgICAgLypqc2hpbnQgbm9lbXB0eTpmYWxzZSovCiAgICB9IHdoaWxlIChfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaF0gJiYgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmCiAgICAgICAgICAgICBfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaF0gJiYgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmCiAgICAgICAgICAgICBfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaF0gJiYgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmCiAgICAgICAgICAgICBfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaF0gJiYgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmCiAgICAgICAgICAgICBzY2FuIDwgc3RyZW5kKTsKCiAgICAvLyBBc3NlcnQoc2NhbiA8PSBzLT53aW5kb3crKHVuc2lnbmVkKShzLT53aW5kb3dfc2l6ZS0xKSwgIndpbGQgc2NhbiIpOwoKICAgIGxlbiA9IE1BWF9NQVRDSCAtIChzdHJlbmQgLSBzY2FuKTsKICAgIHNjYW4gPSBzdHJlbmQgLSBNQVhfTUFUQ0g7CgogICAgaWYgKGxlbiA+IGJlc3RfbGVuKSB7CiAgICAgIHMubWF0Y2hfc3RhcnQgPSBjdXJfbWF0Y2g7CiAgICAgIGJlc3RfbGVuID0gbGVuOwogICAgICBpZiAobGVuID49IG5pY2VfbWF0Y2gpIHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBzY2FuX2VuZDEgID0gX3dpbltzY2FuICsgYmVzdF9sZW4gLSAxXTsKICAgICAgc2Nhbl9lbmQgICA9IF93aW5bc2NhbiArIGJlc3RfbGVuXTsKICAgIH0KICB9IHdoaWxlICgoY3VyX21hdGNoID0gcHJldltjdXJfbWF0Y2ggJiB3bWFza10pID4gbGltaXQgJiYgLS1jaGFpbl9sZW5ndGggIT09IDApOwoKICBpZiAoYmVzdF9sZW4gPD0gcy5sb29rYWhlYWQpIHsKICAgIHJldHVybiBiZXN0X2xlbjsKICB9CiAgcmV0dXJuIHMubG9va2FoZWFkOwp9CgoKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIEZpbGwgdGhlIHdpbmRvdyB3aGVuIHRoZSBsb29rYWhlYWQgYmVjb21lcyBpbnN1ZmZpY2llbnQuCiAqIFVwZGF0ZXMgc3Ryc3RhcnQgYW5kIGxvb2thaGVhZC4KICoKICogSU4gYXNzZXJ0aW9uOiBsb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFECiAqIE9VVCBhc3NlcnRpb25zOiBzdHJzdGFydCA8PSB3aW5kb3dfc2l6ZS1NSU5fTE9PS0FIRUFECiAqICAgIEF0IGxlYXN0IG9uZSBieXRlIGhhcyBiZWVuIHJlYWQsIG9yIGF2YWlsX2luID09IDA7IHJlYWRzIGFyZQogKiAgICBwZXJmb3JtZWQgZm9yIGF0IGxlYXN0IHR3byBieXRlcyAocmVxdWlyZWQgZm9yIHRoZSB6aXAgdHJhbnNsYXRlX2VvbAogKiAgICBvcHRpb24gLS0gbm90IHN1cHBvcnRlZCBoZXJlKS4KICovCmZ1bmN0aW9uIGZpbGxfd2luZG93KHMpIHsKICB2YXIgX3dfc2l6ZSA9IHMud19zaXplOwogIHZhciBwLCBuLCBtLCBtb3JlLCBzdHI7CgogIC8vQXNzZXJ0KHMtPmxvb2thaGVhZCA8IE1JTl9MT09LQUhFQUQsICJhbHJlYWR5IGVub3VnaCBsb29rYWhlYWQiKTsKCiAgZG8gewogICAgbW9yZSA9IHMud2luZG93X3NpemUgLSBzLmxvb2thaGVhZCAtIHMuc3Ryc3RhcnQ7CgogICAgLy8gSlMgaW50cyBoYXZlIDMyIGJpdCwgYmxvY2sgYmVsb3cgbm90IG5lZWRlZAogICAgLyogRGVhbCB3aXRoICFAIyQlIDY0SyBsaW1pdDogKi8KICAgIC8vaWYgKHNpemVvZihpbnQpIDw9IDIpIHsKICAgIC8vICAgIGlmIChtb3JlID09IDAgJiYgcy0+c3Ryc3RhcnQgPT0gMCAmJiBzLT5sb29rYWhlYWQgPT0gMCkgewogICAgLy8gICAgICAgIG1vcmUgPSB3c2l6ZTsKICAgIC8vCiAgICAvLyAgfSBlbHNlIGlmIChtb3JlID09ICh1bnNpZ25lZCkoLTEpKSB7CiAgICAvLyAgICAgICAgLyogVmVyeSB1bmxpa2VseSwgYnV0IHBvc3NpYmxlIG9uIDE2IGJpdCBtYWNoaW5lIGlmCiAgICAvLyAgICAgICAgICogc3Ryc3RhcnQgPT0gMCAmJiBsb29rYWhlYWQgPT0gMSAoaW5wdXQgZG9uZSBhIGJ5dGUgYXQgdGltZSkKICAgIC8vICAgICAgICAgKi8KICAgIC8vICAgICAgICBtb3JlLS07CiAgICAvLyAgICB9CiAgICAvL30KCgogICAgLyogSWYgdGhlIHdpbmRvdyBpcyBhbG1vc3QgZnVsbCBhbmQgdGhlcmUgaXMgaW5zdWZmaWNpZW50IGxvb2thaGVhZCwKICAgICAqIG1vdmUgdGhlIHVwcGVyIGhhbGYgdG8gdGhlIGxvd2VyIG9uZSB0byBtYWtlIHJvb20gaW4gdGhlIHVwcGVyIGhhbGYuCiAgICAgKi8KICAgIGlmIChzLnN0cnN0YXJ0ID49IF93X3NpemUgKyAoX3dfc2l6ZSAtIE1JTl9MT09LQUhFQUQpKSB7CgogICAgICB1dGlscy5hcnJheVNldChzLndpbmRvdywgcy53aW5kb3csIF93X3NpemUsIF93X3NpemUsIDApOwogICAgICBzLm1hdGNoX3N0YXJ0IC09IF93X3NpemU7CiAgICAgIHMuc3Ryc3RhcnQgLT0gX3dfc2l6ZTsKICAgICAgLyogd2Ugbm93IGhhdmUgc3Ryc3RhcnQgPj0gTUFYX0RJU1QgKi8KICAgICAgcy5ibG9ja19zdGFydCAtPSBfd19zaXplOwoKICAgICAgLyogU2xpZGUgdGhlIGhhc2ggdGFibGUgKGNvdWxkIGJlIGF2b2lkZWQgd2l0aCAzMiBiaXQgdmFsdWVzCiAgICAgICBhdCB0aGUgZXhwZW5zZSBvZiBtZW1vcnkgdXNhZ2UpLiBXZSBzbGlkZSBldmVuIHdoZW4gbGV2ZWwgPT0gMAogICAgICAgdG8ga2VlcCB0aGUgaGFzaCB0YWJsZSBjb25zaXN0ZW50IGlmIHdlIHN3aXRjaCBiYWNrIHRvIGxldmVsID4gMAogICAgICAgbGF0ZXIuIChVc2luZyBsZXZlbCAwIHBlcm1hbmVudGx5IGlzIG5vdCBhbiBvcHRpbWFsIHVzYWdlIG9mCiAgICAgICB6bGliLCBzbyB3ZSBkb24ndCBjYXJlIGFib3V0IHRoaXMgcGF0aG9sb2dpY2FsIGNhc2UuKQogICAgICAgKi8KCiAgICAgIG4gPSBzLmhhc2hfc2l6ZTsKICAgICAgcCA9IG47CiAgICAgIGRvIHsKICAgICAgICBtID0gcy5oZWFkWy0tcF07CiAgICAgICAgcy5oZWFkW3BdID0gKG0gPj0gX3dfc2l6ZSA/IG0gLSBfd19zaXplIDogMCk7CiAgICAgIH0gd2hpbGUgKC0tbik7CgogICAgICBuID0gX3dfc2l6ZTsKICAgICAgcCA9IG47CiAgICAgIGRvIHsKICAgICAgICBtID0gcy5wcmV2Wy0tcF07CiAgICAgICAgcy5wcmV2W3BdID0gKG0gPj0gX3dfc2l6ZSA/IG0gLSBfd19zaXplIDogMCk7CiAgICAgICAgLyogSWYgbiBpcyBub3Qgb24gYW55IGhhc2ggY2hhaW4sIHByZXZbbl0gaXMgZ2FyYmFnZSBidXQKICAgICAgICAgKiBpdHMgdmFsdWUgd2lsbCBuZXZlciBiZSB1c2VkLgogICAgICAgICAqLwogICAgICB9IHdoaWxlICgtLW4pOwoKICAgICAgbW9yZSArPSBfd19zaXplOwogICAgfQogICAgaWYgKHMuc3RybS5hdmFpbF9pbiA9PT0gMCkgewogICAgICBicmVhazsKICAgIH0KCiAgICAvKiBJZiB0aGVyZSB3YXMgbm8gc2xpZGluZzoKICAgICAqICAgIHN0cnN0YXJ0IDw9IFdTSVpFK01BWF9ESVNULTEgJiYgbG9va2FoZWFkIDw9IE1JTl9MT09LQUhFQUQgLSAxICYmCiAgICAgKiAgICBtb3JlID09IHdpbmRvd19zaXplIC0gbG9va2FoZWFkIC0gc3Ryc3RhcnQKICAgICAqID0+IG1vcmUgPj0gd2luZG93X3NpemUgLSAoTUlOX0xPT0tBSEVBRC0xICsgV1NJWkUgKyBNQVhfRElTVC0xKQogICAgICogPT4gbW9yZSA+PSB3aW5kb3dfc2l6ZSAtIDIqV1NJWkUgKyAyCiAgICAgKiBJbiB0aGUgQklHX01FTSBvciBNTUFQIGNhc2UgKG5vdCB5ZXQgc3VwcG9ydGVkKSwKICAgICAqICAgd2luZG93X3NpemUgPT0gaW5wdXRfc2l6ZSArIE1JTl9MT09LQUhFQUQgICYmCiAgICAgKiAgIHN0cnN0YXJ0ICsgcy0+bG9va2FoZWFkIDw9IGlucHV0X3NpemUgPT4gbW9yZSA+PSBNSU5fTE9PS0FIRUFELgogICAgICogT3RoZXJ3aXNlLCB3aW5kb3dfc2l6ZSA9PSAyKldTSVpFIHNvIG1vcmUgPj0gMi4KICAgICAqIElmIHRoZXJlIHdhcyBzbGlkaW5nLCBtb3JlID49IFdTSVpFLiBTbyBpbiBhbGwgY2FzZXMsIG1vcmUgPj0gMi4KICAgICAqLwogICAgLy9Bc3NlcnQobW9yZSA+PSAyLCAibW9yZSA8IDIiKTsKICAgIG4gPSByZWFkX2J1ZihzLnN0cm0sIHMud2luZG93LCBzLnN0cnN0YXJ0ICsgcy5sb29rYWhlYWQsIG1vcmUpOwogICAgcy5sb29rYWhlYWQgKz0gbjsKCiAgICAvKiBJbml0aWFsaXplIHRoZSBoYXNoIHZhbHVlIG5vdyB0aGF0IHdlIGhhdmUgc29tZSBpbnB1dDogKi8KICAgIGlmIChzLmxvb2thaGVhZCArIHMuaW5zZXJ0ID49IE1JTl9NQVRDSCkgewogICAgICBzdHIgPSBzLnN0cnN0YXJ0IC0gcy5pbnNlcnQ7CiAgICAgIHMuaW5zX2ggPSBzLndpbmRvd1tzdHJdOwoKICAgICAgLyogVVBEQVRFX0hBU0gocywgcy0+aW5zX2gsIHMtPndpbmRvd1tzdHIgKyAxXSk7ICovCiAgICAgIHMuaW5zX2ggPSAoKHMuaW5zX2ggPDwgcy5oYXNoX3NoaWZ0KSBeIHMud2luZG93W3N0ciArIDFdKSAmIHMuaGFzaF9tYXNrOwovLyNpZiBNSU5fTUFUQ0ggIT0gMwovLyAgICAgICAgQ2FsbCB1cGRhdGVfaGFzaCgpIE1JTl9NQVRDSC0zIG1vcmUgdGltZXMKLy8jZW5kaWYKICAgICAgd2hpbGUgKHMuaW5zZXJ0KSB7CiAgICAgICAgLyogVVBEQVRFX0hBU0gocywgcy0+aW5zX2gsIHMtPndpbmRvd1tzdHIgKyBNSU5fTUFUQ0gtMV0pOyAqLwogICAgICAgIHMuaW5zX2ggPSAoKHMuaW5zX2ggPDwgcy5oYXNoX3NoaWZ0KSBeIHMud2luZG93W3N0ciArIE1JTl9NQVRDSCAtIDFdKSAmIHMuaGFzaF9tYXNrOwoKICAgICAgICBzLnByZXZbc3RyICYgcy53X21hc2tdID0gcy5oZWFkW3MuaW5zX2hdOwogICAgICAgIHMuaGVhZFtzLmluc19oXSA9IHN0cjsKICAgICAgICBzdHIrKzsKICAgICAgICBzLmluc2VydC0tOwogICAgICAgIGlmIChzLmxvb2thaGVhZCArIHMuaW5zZXJ0IDwgTUlOX01BVENIKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qIElmIHRoZSB3aG9sZSBpbnB1dCBoYXMgbGVzcyB0aGFuIE1JTl9NQVRDSCBieXRlcywgaW5zX2ggaXMgZ2FyYmFnZSwKICAgICAqIGJ1dCB0aGlzIGlzIG5vdCBpbXBvcnRhbnQgc2luY2Ugb25seSBsaXRlcmFsIGJ5dGVzIHdpbGwgYmUgZW1pdHRlZC4KICAgICAqLwoKICB9IHdoaWxlIChzLmxvb2thaGVhZCA8IE1JTl9MT09LQUhFQUQgJiYgcy5zdHJtLmF2YWlsX2luICE9PSAwKTsKCiAgLyogSWYgdGhlIFdJTl9JTklUIGJ5dGVzIGFmdGVyIHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgZGF0YSBoYXZlIG5ldmVyIGJlZW4KICAgKiB3cml0dGVuLCB0aGVuIHplcm8gdGhvc2UgYnl0ZXMgaW4gb3JkZXIgdG8gYXZvaWQgbWVtb3J5IGNoZWNrIHJlcG9ydHMgb2YKICAgKiB0aGUgdXNlIG9mIHVuaW5pdGlhbGl6ZWQgKG9yIHVuaW5pdGlhbGlzZWQgYXMgSnVsaWFuIHdyaXRlcykgYnl0ZXMgYnkKICAgKiB0aGUgbG9uZ2VzdCBtYXRjaCByb3V0aW5lcy4gIFVwZGF0ZSB0aGUgaGlnaCB3YXRlciBtYXJrIGZvciB0aGUgbmV4dAogICAqIHRpbWUgdGhyb3VnaCBoZXJlLiAgV0lOX0lOSVQgaXMgc2V0IHRvIE1BWF9NQVRDSCBzaW5jZSB0aGUgbG9uZ2VzdCBtYXRjaAogICAqIHJvdXRpbmVzIGFsbG93IHNjYW5uaW5nIHRvIHN0cnN0YXJ0ICsgTUFYX01BVENILCBpZ25vcmluZyBsb29rYWhlYWQuCiAgICovCi8vICBpZiAocy5oaWdoX3dhdGVyIDwgcy53aW5kb3dfc2l6ZSkgewovLyAgICB2YXIgY3VyciA9IHMuc3Ryc3RhcnQgKyBzLmxvb2thaGVhZDsKLy8gICAgdmFyIGluaXQgPSAwOwovLwovLyAgICBpZiAocy5oaWdoX3dhdGVyIDwgY3VycikgewovLyAgICAgIC8qIFByZXZpb3VzIGhpZ2ggd2F0ZXIgbWFyayBiZWxvdyBjdXJyZW50IGRhdGEgLS0gemVybyBXSU5fSU5JVAovLyAgICAgICAqIGJ5dGVzIG9yIHVwIHRvIGVuZCBvZiB3aW5kb3csIHdoaWNoZXZlciBpcyBsZXNzLgovLyAgICAgICAqLwovLyAgICAgIGluaXQgPSBzLndpbmRvd19zaXplIC0gY3VycjsKLy8gICAgICBpZiAoaW5pdCA+IFdJTl9JTklUKQovLyAgICAgICAgaW5pdCA9IFdJTl9JTklUOwovLyAgICAgIHptZW16ZXJvKHMtPndpbmRvdyArIGN1cnIsICh1bnNpZ25lZClpbml0KTsKLy8gICAgICBzLT5oaWdoX3dhdGVyID0gY3VyciArIGluaXQ7Ci8vICAgIH0KLy8gICAgZWxzZSBpZiAocy0+aGlnaF93YXRlciA8ICh1bGcpY3VyciArIFdJTl9JTklUKSB7Ci8vICAgICAgLyogSGlnaCB3YXRlciBtYXJrIGF0IG9yIGFib3ZlIGN1cnJlbnQgZGF0YSwgYnV0IGJlbG93IGN1cnJlbnQgZGF0YQovLyAgICAgICAqIHBsdXMgV0lOX0lOSVQgLS0gemVybyBvdXQgdG8gY3VycmVudCBkYXRhIHBsdXMgV0lOX0lOSVQsIG9yIHVwCi8vICAgICAgICogdG8gZW5kIG9mIHdpbmRvdywgd2hpY2hldmVyIGlzIGxlc3MuCi8vICAgICAgICovCi8vICAgICAgaW5pdCA9ICh1bGcpY3VyciArIFdJTl9JTklUIC0gcy0+aGlnaF93YXRlcjsKLy8gICAgICBpZiAoaW5pdCA+IHMtPndpbmRvd19zaXplIC0gcy0+aGlnaF93YXRlcikKLy8gICAgICAgIGluaXQgPSBzLT53aW5kb3dfc2l6ZSAtIHMtPmhpZ2hfd2F0ZXI7Ci8vICAgICAgem1lbXplcm8ocy0+d2luZG93ICsgcy0+aGlnaF93YXRlciwgKHVuc2lnbmVkKWluaXQpOwovLyAgICAgIHMtPmhpZ2hfd2F0ZXIgKz0gaW5pdDsKLy8gICAgfQovLyAgfQovLwovLyAgQXNzZXJ0KCh1bGcpcy0+c3Ryc3RhcnQgPD0gcy0+d2luZG93X3NpemUgLSBNSU5fTE9PS0FIRUFELAovLyAgICAibm90IGVub3VnaCByb29tIGZvciBzZWFyY2giKTsKfQoKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIENvcHkgd2l0aG91dCBjb21wcmVzc2lvbiBhcyBtdWNoIGFzIHBvc3NpYmxlIGZyb20gdGhlIGlucHV0IHN0cmVhbSwgcmV0dXJuCiAqIHRoZSBjdXJyZW50IGJsb2NrIHN0YXRlLgogKiBUaGlzIGZ1bmN0aW9uIGRvZXMgbm90IGluc2VydCBuZXcgc3RyaW5ncyBpbiB0aGUgZGljdGlvbmFyeSBzaW5jZQogKiB1bmNvbXByZXNzaWJsZSBkYXRhIGlzIHByb2JhYmx5IG5vdCB1c2VmdWwuIFRoaXMgZnVuY3Rpb24gaXMgdXNlZAogKiBvbmx5IGZvciB0aGUgbGV2ZWw9MCBjb21wcmVzc2lvbiBvcHRpb24uCiAqIE5PVEU6IHRoaXMgZnVuY3Rpb24gc2hvdWxkIGJlIG9wdGltaXplZCB0byBhdm9pZCBleHRyYSBjb3B5aW5nIGZyb20KICogd2luZG93IHRvIHBlbmRpbmdfYnVmLgogKi8KZnVuY3Rpb24gZGVmbGF0ZV9zdG9yZWQocywgZmx1c2gpIHsKICAvKiBTdG9yZWQgYmxvY2tzIGFyZSBsaW1pdGVkIHRvIDB4ZmZmZiBieXRlcywgcGVuZGluZ19idWYgaXMgbGltaXRlZAogICAqIHRvIHBlbmRpbmdfYnVmX3NpemUsIGFuZCBlYWNoIHN0b3JlZCBibG9jayBoYXMgYSA1IGJ5dGUgaGVhZGVyOgogICAqLwogIHZhciBtYXhfYmxvY2tfc2l6ZSA9IDB4ZmZmZjsKCiAgaWYgKG1heF9ibG9ja19zaXplID4gcy5wZW5kaW5nX2J1Zl9zaXplIC0gNSkgewogICAgbWF4X2Jsb2NrX3NpemUgPSBzLnBlbmRpbmdfYnVmX3NpemUgLSA1OwogIH0KCiAgLyogQ29weSBhcyBtdWNoIGFzIHBvc3NpYmxlIGZyb20gaW5wdXQgdG8gb3V0cHV0OiAqLwogIGZvciAoOzspIHsKICAgIC8qIEZpbGwgdGhlIHdpbmRvdyBhcyBtdWNoIGFzIHBvc3NpYmxlOiAqLwogICAgaWYgKHMubG9va2FoZWFkIDw9IDEpIHsKCiAgICAgIC8vQXNzZXJ0KHMtPnN0cnN0YXJ0IDwgcy0+d19zaXplK01BWF9ESVNUKHMpIHx8CiAgICAgIC8vICBzLT5ibG9ja19zdGFydCA+PSAobG9uZylzLT53X3NpemUsICJzbGlkZSB0b28gbGF0ZSIpOwovLyAgICAgIGlmICghKHMuc3Ryc3RhcnQgPCBzLndfc2l6ZSArIChzLndfc2l6ZSAtIE1JTl9MT09LQUhFQUQpIHx8Ci8vICAgICAgICBzLmJsb2NrX3N0YXJ0ID49IHMud19zaXplKSkgewovLyAgICAgICAgdGhyb3cgIG5ldyBFcnJvcigic2xpZGUgdG9vIGxhdGUiKTsKLy8gICAgICB9CgogICAgICBmaWxsX3dpbmRvdyhzKTsKICAgICAgaWYgKHMubG9va2FoZWFkID09PSAwICYmIGZsdXNoID09PSBaX05PX0ZMVVNIKSB7CiAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgfQoKICAgICAgaWYgKHMubG9va2FoZWFkID09PSAwKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgLyogZmx1c2ggdGhlIGN1cnJlbnQgYmxvY2sgKi8KICAgIH0KICAgIC8vQXNzZXJ0KHMtPmJsb2NrX3N0YXJ0ID49IDBMLCAiYmxvY2sgZ29uZSIpOwovLyAgICBpZiAocy5ibG9ja19zdGFydCA8IDApIHRocm93IG5ldyBFcnJvcigiYmxvY2sgZ29uZSIpOwoKICAgIHMuc3Ryc3RhcnQgKz0gcy5sb29rYWhlYWQ7CiAgICBzLmxvb2thaGVhZCA9IDA7CgogICAgLyogRW1pdCBhIHN0b3JlZCBibG9jayBpZiBwZW5kaW5nX2J1ZiB3aWxsIGJlIGZ1bGw6ICovCiAgICB2YXIgbWF4X3N0YXJ0ID0gcy5ibG9ja19zdGFydCArIG1heF9ibG9ja19zaXplOwoKICAgIGlmIChzLnN0cnN0YXJ0ID09PSAwIHx8IHMuc3Ryc3RhcnQgPj0gbWF4X3N0YXJ0KSB7CiAgICAgIC8qIHN0cnN0YXJ0ID09IDAgaXMgcG9zc2libGUgd2hlbiB3cmFwYXJvdW5kIG9uIDE2LWJpdCBtYWNoaW5lICovCiAgICAgIHMubG9va2FoZWFkID0gcy5zdHJzdGFydCAtIG1heF9zdGFydDsKICAgICAgcy5zdHJzdGFydCA9IG1heF9zdGFydDsKICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqLwogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICB9CiAgICAgIC8qKiovCgoKICAgIH0KICAgIC8qIEZsdXNoIGlmIHdlIG1heSBoYXZlIHRvIHNsaWRlLCBvdGhlcndpc2UgYmxvY2tfc3RhcnQgbWF5IGJlY29tZQogICAgICogbmVnYXRpdmUgYW5kIHRoZSBkYXRhIHdpbGwgYmUgZ29uZToKICAgICAqLwogICAgaWYgKHMuc3Ryc3RhcnQgLSBzLmJsb2NrX3N0YXJ0ID49IChzLndfc2l6ZSAtIE1JTl9MT09LQUhFQUQpKSB7CiAgICAgIC8qKiogRkxVU0hfQkxPQ0socywgMCk7ICoqKi8KICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7CiAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgfQogICAgICAvKioqLwogICAgfQogIH0KCiAgcy5pbnNlcnQgPSAwOwoKICBpZiAoZmx1c2ggPT09IFpfRklOSVNIKSB7CiAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDEpOyAqKiovCiAgICBmbHVzaF9ibG9ja19vbmx5KHMsIHRydWUpOwogICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgcmV0dXJuIEJTX0ZJTklTSF9TVEFSVEVEOwogICAgfQogICAgLyoqKi8KICAgIHJldHVybiBCU19GSU5JU0hfRE9ORTsKICB9CgogIGlmIChzLnN0cnN0YXJ0ID4gcy5ibG9ja19zdGFydCkgewogICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqLwogICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7CiAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgfQogICAgLyoqKi8KICB9CgogIHJldHVybiBCU19ORUVEX01PUkU7Cn0KCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBDb21wcmVzcyBhcyBtdWNoIGFzIHBvc3NpYmxlIGZyb20gdGhlIGlucHV0IHN0cmVhbSwgcmV0dXJuIHRoZSBjdXJyZW50CiAqIGJsb2NrIHN0YXRlLgogKiBUaGlzIGZ1bmN0aW9uIGRvZXMgbm90IHBlcmZvcm0gbGF6eSBldmFsdWF0aW9uIG9mIG1hdGNoZXMgYW5kIGluc2VydHMKICogbmV3IHN0cmluZ3MgaW4gdGhlIGRpY3Rpb25hcnkgb25seSBmb3IgdW5tYXRjaGVkIHN0cmluZ3Mgb3IgZm9yIHNob3J0CiAqIG1hdGNoZXMuIEl0IGlzIHVzZWQgb25seSBmb3IgdGhlIGZhc3QgY29tcHJlc3Npb24gb3B0aW9ucy4KICovCmZ1bmN0aW9uIGRlZmxhdGVfZmFzdChzLCBmbHVzaCkgewogIHZhciBoYXNoX2hlYWQ7ICAgICAgICAvKiBoZWFkIG9mIHRoZSBoYXNoIGNoYWluICovCiAgdmFyIGJmbHVzaDsgICAgICAgICAgIC8qIHNldCBpZiBjdXJyZW50IGJsb2NrIG11c3QgYmUgZmx1c2hlZCAqLwoKICBmb3IgKDs7KSB7CiAgICAvKiBNYWtlIHN1cmUgdGhhdCB3ZSBhbHdheXMgaGF2ZSBlbm91Z2ggbG9va2FoZWFkLCBleGNlcHQKICAgICAqIGF0IHRoZSBlbmQgb2YgdGhlIGlucHV0IGZpbGUuIFdlIG5lZWQgTUFYX01BVENIIGJ5dGVzCiAgICAgKiBmb3IgdGhlIG5leHQgbWF0Y2gsIHBsdXMgTUlOX01BVENIIGJ5dGVzIHRvIGluc2VydCB0aGUKICAgICAqIHN0cmluZyBmb2xsb3dpbmcgdGhlIG5leHQgbWF0Y2guCiAgICAgKi8KICAgIGlmIChzLmxvb2thaGVhZCA8IE1JTl9MT09LQUhFQUQpIHsKICAgICAgZmlsbF93aW5kb3cocyk7CiAgICAgIGlmIChzLmxvb2thaGVhZCA8IE1JTl9MT09LQUhFQUQgJiYgZmx1c2ggPT09IFpfTk9fRkxVU0gpIHsKICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICB9CiAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkgewogICAgICAgIGJyZWFrOyAvKiBmbHVzaCB0aGUgY3VycmVudCBibG9jayAqLwogICAgICB9CiAgICB9CgogICAgLyogSW5zZXJ0IHRoZSBzdHJpbmcgd2luZG93W3N0cnN0YXJ0IC4uIHN0cnN0YXJ0KzJdIGluIHRoZQogICAgICogZGljdGlvbmFyeSwgYW5kIHNldCBoYXNoX2hlYWQgdG8gdGhlIGhlYWQgb2YgdGhlIGhhc2ggY2hhaW46CiAgICAgKi8KICAgIGhhc2hfaGVhZCA9IDAvKk5JTCovOwogICAgaWYgKHMubG9va2FoZWFkID49IE1JTl9NQVRDSCkgewogICAgICAvKioqIElOU0VSVF9TVFJJTkcocywgcy5zdHJzdGFydCwgaGFzaF9oZWFkKTsgKioqLwogICAgICBzLmluc19oID0gKChzLmluc19oIDw8IHMuaGFzaF9zaGlmdCkgXiBzLndpbmRvd1tzLnN0cnN0YXJ0ICsgTUlOX01BVENIIC0gMV0pICYgcy5oYXNoX21hc2s7CiAgICAgIGhhc2hfaGVhZCA9IHMucHJldltzLnN0cnN0YXJ0ICYgcy53X21hc2tdID0gcy5oZWFkW3MuaW5zX2hdOwogICAgICBzLmhlYWRbcy5pbnNfaF0gPSBzLnN0cnN0YXJ0OwogICAgICAvKioqLwogICAgfQoKICAgIC8qIEZpbmQgdGhlIGxvbmdlc3QgbWF0Y2gsIGRpc2NhcmRpbmcgdGhvc2UgPD0gcHJldl9sZW5ndGguCiAgICAgKiBBdCB0aGlzIHBvaW50IHdlIGhhdmUgYWx3YXlzIG1hdGNoX2xlbmd0aCA8IE1JTl9NQVRDSAogICAgICovCiAgICBpZiAoaGFzaF9oZWFkICE9PSAwLypOSUwqLyAmJiAoKHMuc3Ryc3RhcnQgLSBoYXNoX2hlYWQpIDw9IChzLndfc2l6ZSAtIE1JTl9MT09LQUhFQUQpKSkgewogICAgICAvKiBUbyBzaW1wbGlmeSB0aGUgY29kZSwgd2UgcHJldmVudCBtYXRjaGVzIHdpdGggdGhlIHN0cmluZwogICAgICAgKiBvZiB3aW5kb3cgaW5kZXggMCAoaW4gcGFydGljdWxhciB3ZSBoYXZlIHRvIGF2b2lkIGEgbWF0Y2gKICAgICAgICogb2YgdGhlIHN0cmluZyB3aXRoIGl0c2VsZiBhdCB0aGUgc3RhcnQgb2YgdGhlIGlucHV0IGZpbGUpLgogICAgICAgKi8KICAgICAgcy5tYXRjaF9sZW5ndGggPSBsb25nZXN0X21hdGNoKHMsIGhhc2hfaGVhZCk7CiAgICAgIC8qIGxvbmdlc3RfbWF0Y2goKSBzZXRzIG1hdGNoX3N0YXJ0ICovCiAgICB9CiAgICBpZiAocy5tYXRjaF9sZW5ndGggPj0gTUlOX01BVENIKSB7CiAgICAgIC8vIGNoZWNrX21hdGNoKHMsIHMuc3Ryc3RhcnQsIHMubWF0Y2hfc3RhcnQsIHMubWF0Y2hfbGVuZ3RoKTsgLy8gZm9yIGRlYnVnIG9ubHkKCiAgICAgIC8qKiogX3RyX3RhbGx5X2Rpc3Qocywgcy5zdHJzdGFydCAtIHMubWF0Y2hfc3RhcnQsCiAgICAgICAgICAgICAgICAgICAgIHMubWF0Y2hfbGVuZ3RoIC0gTUlOX01BVENILCBiZmx1c2gpOyAqKiovCiAgICAgIGJmbHVzaCA9IHRyZWVzLl90cl90YWxseShzLCBzLnN0cnN0YXJ0IC0gcy5tYXRjaF9zdGFydCwgcy5tYXRjaF9sZW5ndGggLSBNSU5fTUFUQ0gpOwoKICAgICAgcy5sb29rYWhlYWQgLT0gcy5tYXRjaF9sZW5ndGg7CgogICAgICAvKiBJbnNlcnQgbmV3IHN0cmluZ3MgaW4gdGhlIGhhc2ggdGFibGUgb25seSBpZiB0aGUgbWF0Y2ggbGVuZ3RoCiAgICAgICAqIGlzIG5vdCB0b28gbGFyZ2UuIFRoaXMgc2F2ZXMgdGltZSBidXQgZGVncmFkZXMgY29tcHJlc3Npb24uCiAgICAgICAqLwogICAgICBpZiAocy5tYXRjaF9sZW5ndGggPD0gcy5tYXhfbGF6eV9tYXRjaC8qbWF4X2luc2VydF9sZW5ndGgqLyAmJiBzLmxvb2thaGVhZCA+PSBNSU5fTUFUQ0gpIHsKICAgICAgICBzLm1hdGNoX2xlbmd0aC0tOyAvKiBzdHJpbmcgYXQgc3Ryc3RhcnQgYWxyZWFkeSBpbiB0YWJsZSAqLwogICAgICAgIGRvIHsKICAgICAgICAgIHMuc3Ryc3RhcnQrKzsKICAgICAgICAgIC8qKiogSU5TRVJUX1NUUklORyhzLCBzLnN0cnN0YXJ0LCBoYXNoX2hlYWQpOyAqKiovCiAgICAgICAgICBzLmluc19oID0gKChzLmluc19oIDw8IHMuaGFzaF9zaGlmdCkgXiBzLndpbmRvd1tzLnN0cnN0YXJ0ICsgTUlOX01BVENIIC0gMV0pICYgcy5oYXNoX21hc2s7CiAgICAgICAgICBoYXNoX2hlYWQgPSBzLnByZXZbcy5zdHJzdGFydCAmIHMud19tYXNrXSA9IHMuaGVhZFtzLmluc19oXTsKICAgICAgICAgIHMuaGVhZFtzLmluc19oXSA9IHMuc3Ryc3RhcnQ7CiAgICAgICAgICAvKioqLwogICAgICAgICAgLyogc3Ryc3RhcnQgbmV2ZXIgZXhjZWVkcyBXU0laRS1NQVhfTUFUQ0gsIHNvIHRoZXJlIGFyZQogICAgICAgICAgICogYWx3YXlzIE1JTl9NQVRDSCBieXRlcyBhaGVhZC4KICAgICAgICAgICAqLwogICAgICAgIH0gd2hpbGUgKC0tcy5tYXRjaF9sZW5ndGggIT09IDApOwogICAgICAgIHMuc3Ryc3RhcnQrKzsKICAgICAgfSBlbHNlCiAgICAgIHsKICAgICAgICBzLnN0cnN0YXJ0ICs9IHMubWF0Y2hfbGVuZ3RoOwogICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gMDsKICAgICAgICBzLmluc19oID0gcy53aW5kb3dbcy5zdHJzdGFydF07CiAgICAgICAgLyogVVBEQVRFX0hBU0gocywgcy5pbnNfaCwgcy53aW5kb3dbcy5zdHJzdGFydCsxXSk7ICovCiAgICAgICAgcy5pbnNfaCA9ICgocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQpIF4gcy53aW5kb3dbcy5zdHJzdGFydCArIDFdKSAmIHMuaGFzaF9tYXNrOwoKLy8jaWYgTUlOX01BVENIICE9IDMKLy8gICAgICAgICAgICAgICAgQ2FsbCBVUERBVEVfSEFTSCgpIE1JTl9NQVRDSC0zIG1vcmUgdGltZXMKLy8jZW5kaWYKICAgICAgICAvKiBJZiBsb29rYWhlYWQgPCBNSU5fTUFUQ0gsIGluc19oIGlzIGdhcmJhZ2UsIGJ1dCBpdCBkb2VzIG5vdAogICAgICAgICAqIG1hdHRlciBzaW5jZSBpdCB3aWxsIGJlIHJlY29tcHV0ZWQgYXQgbmV4dCBkZWZsYXRlIGNhbGwuCiAgICAgICAgICovCiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIC8qIE5vIG1hdGNoLCBvdXRwdXQgYSBsaXRlcmFsIGJ5dGUgKi8KICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIiVjIiwgcy53aW5kb3dbcy5zdHJzdGFydF0pKTsKICAgICAgLyoqKiBfdHJfdGFsbHlfbGl0KHMsIHMud2luZG93W3Muc3Ryc3RhcnRdLCBiZmx1c2gpOyAqKiovCiAgICAgIGJmbHVzaCA9IHRyZWVzLl90cl90YWxseShzLCAwLCBzLndpbmRvd1tzLnN0cnN0YXJ0XSk7CgogICAgICBzLmxvb2thaGVhZC0tOwogICAgICBzLnN0cnN0YXJ0Kys7CiAgICB9CiAgICBpZiAoYmZsdXNoKSB7CiAgICAgIC8qKiogRkxVU0hfQkxPQ0socywgMCk7ICoqKi8KICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7CiAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgfQogICAgICAvKioqLwogICAgfQogIH0KICBzLmluc2VydCA9ICgocy5zdHJzdGFydCA8IChNSU5fTUFUQ0ggLSAxKSkgPyBzLnN0cnN0YXJ0IDogTUlOX01BVENIIC0gMSk7CiAgaWYgKGZsdXNoID09PSBaX0ZJTklTSCkgewogICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAxKTsgKioqLwogICAgZmx1c2hfYmxvY2tfb25seShzLCB0cnVlKTsKICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDsKICAgIH0KICAgIC8qKiovCiAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7CiAgfQogIGlmIChzLmxhc3RfbGl0KSB7CiAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovCiAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICB9CiAgICAvKioqLwogIH0KICByZXR1cm4gQlNfQkxPQ0tfRE9ORTsKfQoKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIFNhbWUgYXMgYWJvdmUsIGJ1dCBhY2hpZXZlcyBiZXR0ZXIgY29tcHJlc3Npb24uIFdlIHVzZSBhIGxhenkKICogZXZhbHVhdGlvbiBmb3IgbWF0Y2hlczogYSBtYXRjaCBpcyBmaW5hbGx5IGFkb3B0ZWQgb25seSBpZiB0aGVyZSBpcwogKiBubyBiZXR0ZXIgbWF0Y2ggYXQgdGhlIG5leHQgd2luZG93IHBvc2l0aW9uLgogKi8KZnVuY3Rpb24gZGVmbGF0ZV9zbG93KHMsIGZsdXNoKSB7CiAgdmFyIGhhc2hfaGVhZDsgICAgICAgICAgLyogaGVhZCBvZiBoYXNoIGNoYWluICovCiAgdmFyIGJmbHVzaDsgICAgICAgICAgICAgIC8qIHNldCBpZiBjdXJyZW50IGJsb2NrIG11c3QgYmUgZmx1c2hlZCAqLwoKICB2YXIgbWF4X2luc2VydDsKCiAgLyogUHJvY2VzcyB0aGUgaW5wdXQgYmxvY2suICovCiAgZm9yICg7OykgewogICAgLyogTWFrZSBzdXJlIHRoYXQgd2UgYWx3YXlzIGhhdmUgZW5vdWdoIGxvb2thaGVhZCwgZXhjZXB0CiAgICAgKiBhdCB0aGUgZW5kIG9mIHRoZSBpbnB1dCBmaWxlLiBXZSBuZWVkIE1BWF9NQVRDSCBieXRlcwogICAgICogZm9yIHRoZSBuZXh0IG1hdGNoLCBwbHVzIE1JTl9NQVRDSCBieXRlcyB0byBpbnNlcnQgdGhlCiAgICAgKiBzdHJpbmcgZm9sbG93aW5nIHRoZSBuZXh0IG1hdGNoLgogICAgICovCiAgICBpZiAocy5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFEKSB7CiAgICAgIGZpbGxfd2luZG93KHMpOwogICAgICBpZiAocy5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFEICYmIGZsdXNoID09PSBaX05PX0ZMVVNIKSB7CiAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgfQogICAgICBpZiAocy5sb29rYWhlYWQgPT09IDApIHsgYnJlYWs7IH0gLyogZmx1c2ggdGhlIGN1cnJlbnQgYmxvY2sgKi8KICAgIH0KCiAgICAvKiBJbnNlcnQgdGhlIHN0cmluZyB3aW5kb3dbc3Ryc3RhcnQgLi4gc3Ryc3RhcnQrMl0gaW4gdGhlCiAgICAgKiBkaWN0aW9uYXJ5LCBhbmQgc2V0IGhhc2hfaGVhZCB0byB0aGUgaGVhZCBvZiB0aGUgaGFzaCBjaGFpbjoKICAgICAqLwogICAgaGFzaF9oZWFkID0gMC8qTklMKi87CiAgICBpZiAocy5sb29rYWhlYWQgPj0gTUlOX01BVENIKSB7CiAgICAgIC8qKiogSU5TRVJUX1NUUklORyhzLCBzLnN0cnN0YXJ0LCBoYXNoX2hlYWQpOyAqKiovCiAgICAgIHMuaW5zX2ggPSAoKHMuaW5zX2ggPDwgcy5oYXNoX3NoaWZ0KSBeIHMud2luZG93W3Muc3Ryc3RhcnQgKyBNSU5fTUFUQ0ggLSAxXSkgJiBzLmhhc2hfbWFzazsKICAgICAgaGFzaF9oZWFkID0gcy5wcmV2W3Muc3Ryc3RhcnQgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07CiAgICAgIHMuaGVhZFtzLmluc19oXSA9IHMuc3Ryc3RhcnQ7CiAgICAgIC8qKiovCiAgICB9CgogICAgLyogRmluZCB0aGUgbG9uZ2VzdCBtYXRjaCwgZGlzY2FyZGluZyB0aG9zZSA8PSBwcmV2X2xlbmd0aC4KICAgICAqLwogICAgcy5wcmV2X2xlbmd0aCA9IHMubWF0Y2hfbGVuZ3RoOwogICAgcy5wcmV2X21hdGNoID0gcy5tYXRjaF9zdGFydDsKICAgIHMubWF0Y2hfbGVuZ3RoID0gTUlOX01BVENIIC0gMTsKCiAgICBpZiAoaGFzaF9oZWFkICE9PSAwLypOSUwqLyAmJiBzLnByZXZfbGVuZ3RoIDwgcy5tYXhfbGF6eV9tYXRjaCAmJgogICAgICAgIHMuc3Ryc3RhcnQgLSBoYXNoX2hlYWQgPD0gKHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkvKk1BWF9ESVNUKHMpKi8pIHsKICAgICAgLyogVG8gc2ltcGxpZnkgdGhlIGNvZGUsIHdlIHByZXZlbnQgbWF0Y2hlcyB3aXRoIHRoZSBzdHJpbmcKICAgICAgICogb2Ygd2luZG93IGluZGV4IDAgKGluIHBhcnRpY3VsYXIgd2UgaGF2ZSB0byBhdm9pZCBhIG1hdGNoCiAgICAgICAqIG9mIHRoZSBzdHJpbmcgd2l0aCBpdHNlbGYgYXQgdGhlIHN0YXJ0IG9mIHRoZSBpbnB1dCBmaWxlKS4KICAgICAgICovCiAgICAgIHMubWF0Y2hfbGVuZ3RoID0gbG9uZ2VzdF9tYXRjaChzLCBoYXNoX2hlYWQpOwogICAgICAvKiBsb25nZXN0X21hdGNoKCkgc2V0cyBtYXRjaF9zdGFydCAqLwoKICAgICAgaWYgKHMubWF0Y2hfbGVuZ3RoIDw9IDUgJiYKICAgICAgICAgKHMuc3RyYXRlZ3kgPT09IFpfRklMVEVSRUQgfHwgKHMubWF0Y2hfbGVuZ3RoID09PSBNSU5fTUFUQ0ggJiYgcy5zdHJzdGFydCAtIHMubWF0Y2hfc3RhcnQgPiA0MDk2LypUT09fRkFSKi8pKSkgewoKICAgICAgICAvKiBJZiBwcmV2X21hdGNoIGlzIGFsc28gTUlOX01BVENILCBtYXRjaF9zdGFydCBpcyBnYXJiYWdlCiAgICAgICAgICogYnV0IHdlIHdpbGwgaWdub3JlIHRoZSBjdXJyZW50IG1hdGNoIGFueXdheS4KICAgICAgICAgKi8KICAgICAgICBzLm1hdGNoX2xlbmd0aCA9IE1JTl9NQVRDSCAtIDE7CiAgICAgIH0KICAgIH0KICAgIC8qIElmIHRoZXJlIHdhcyBhIG1hdGNoIGF0IHRoZSBwcmV2aW91cyBzdGVwIGFuZCB0aGUgY3VycmVudAogICAgICogbWF0Y2ggaXMgbm90IGJldHRlciwgb3V0cHV0IHRoZSBwcmV2aW91cyBtYXRjaDoKICAgICAqLwogICAgaWYgKHMucHJldl9sZW5ndGggPj0gTUlOX01BVENIICYmIHMubWF0Y2hfbGVuZ3RoIDw9IHMucHJldl9sZW5ndGgpIHsKICAgICAgbWF4X2luc2VydCA9IHMuc3Ryc3RhcnQgKyBzLmxvb2thaGVhZCAtIE1JTl9NQVRDSDsKICAgICAgLyogRG8gbm90IGluc2VydCBzdHJpbmdzIGluIGhhc2ggdGFibGUgYmV5b25kIHRoaXMuICovCgogICAgICAvL2NoZWNrX21hdGNoKHMsIHMuc3Ryc3RhcnQtMSwgcy5wcmV2X21hdGNoLCBzLnByZXZfbGVuZ3RoKTsKCiAgICAgIC8qKipfdHJfdGFsbHlfZGlzdChzLCBzLnN0cnN0YXJ0IC0gMSAtIHMucHJldl9tYXRjaCwKICAgICAgICAgICAgICAgICAgICAgcy5wcmV2X2xlbmd0aCAtIE1JTl9NQVRDSCwgYmZsdXNoKTsqKiovCiAgICAgIGJmbHVzaCA9IHRyZWVzLl90cl90YWxseShzLCBzLnN0cnN0YXJ0IC0gMSAtIHMucHJldl9tYXRjaCwgcy5wcmV2X2xlbmd0aCAtIE1JTl9NQVRDSCk7CiAgICAgIC8qIEluc2VydCBpbiBoYXNoIHRhYmxlIGFsbCBzdHJpbmdzIHVwIHRvIHRoZSBlbmQgb2YgdGhlIG1hdGNoLgogICAgICAgKiBzdHJzdGFydC0xIGFuZCBzdHJzdGFydCBhcmUgYWxyZWFkeSBpbnNlcnRlZC4gSWYgdGhlcmUgaXMgbm90CiAgICAgICAqIGVub3VnaCBsb29rYWhlYWQsIHRoZSBsYXN0IHR3byBzdHJpbmdzIGFyZSBub3QgaW5zZXJ0ZWQgaW4KICAgICAgICogdGhlIGhhc2ggdGFibGUuCiAgICAgICAqLwogICAgICBzLmxvb2thaGVhZCAtPSBzLnByZXZfbGVuZ3RoIC0gMTsKICAgICAgcy5wcmV2X2xlbmd0aCAtPSAyOwogICAgICBkbyB7CiAgICAgICAgaWYgKCsrcy5zdHJzdGFydCA8PSBtYXhfaW5zZXJ0KSB7CiAgICAgICAgICAvKioqIElOU0VSVF9TVFJJTkcocywgcy5zdHJzdGFydCwgaGFzaF9oZWFkKTsgKioqLwogICAgICAgICAgcy5pbnNfaCA9ICgocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQpIF4gcy53aW5kb3dbcy5zdHJzdGFydCArIE1JTl9NQVRDSCAtIDFdKSAmIHMuaGFzaF9tYXNrOwogICAgICAgICAgaGFzaF9oZWFkID0gcy5wcmV2W3Muc3Ryc3RhcnQgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07CiAgICAgICAgICBzLmhlYWRbcy5pbnNfaF0gPSBzLnN0cnN0YXJ0OwogICAgICAgICAgLyoqKi8KICAgICAgICB9CiAgICAgIH0gd2hpbGUgKC0tcy5wcmV2X2xlbmd0aCAhPT0gMCk7CiAgICAgIHMubWF0Y2hfYXZhaWxhYmxlID0gMDsKICAgICAgcy5tYXRjaF9sZW5ndGggPSBNSU5fTUFUQ0ggLSAxOwogICAgICBzLnN0cnN0YXJ0Kys7CgogICAgICBpZiAoYmZsdXNoKSB7CiAgICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqLwogICAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICAgIH0KICAgICAgICAvKioqLwogICAgICB9CgogICAgfSBlbHNlIGlmIChzLm1hdGNoX2F2YWlsYWJsZSkgewogICAgICAvKiBJZiB0aGVyZSB3YXMgbm8gbWF0Y2ggYXQgdGhlIHByZXZpb3VzIHBvc2l0aW9uLCBvdXRwdXQgYQogICAgICAgKiBzaW5nbGUgbGl0ZXJhbC4gSWYgdGhlcmUgd2FzIGEgbWF0Y2ggYnV0IHRoZSBjdXJyZW50IG1hdGNoCiAgICAgICAqIGlzIGxvbmdlciwgdHJ1bmNhdGUgdGhlIHByZXZpb3VzIG1hdGNoIHRvIGEgc2luZ2xlIGxpdGVyYWwuCiAgICAgICAqLwogICAgICAvL1RyYWNldnYoKHN0ZGVyciwiJWMiLCBzLT53aW5kb3dbcy0+c3Ryc3RhcnQtMV0pKTsKICAgICAgLyoqKiBfdHJfdGFsbHlfbGl0KHMsIHMud2luZG93W3Muc3Ryc3RhcnQtMV0sIGJmbHVzaCk7ICoqKi8KICAgICAgYmZsdXNoID0gdHJlZXMuX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnQgLSAxXSk7CgogICAgICBpZiAoYmZsdXNoKSB7CiAgICAgICAgLyoqKiBGTFVTSF9CTE9DS19PTkxZKHMsIDApICoqKi8KICAgICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgICAvKioqLwogICAgICB9CiAgICAgIHMuc3Ryc3RhcnQrKzsKICAgICAgcy5sb29rYWhlYWQtLTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICAvKiBUaGVyZSBpcyBubyBwcmV2aW91cyBtYXRjaCB0byBjb21wYXJlIHdpdGgsIHdhaXQgZm9yCiAgICAgICAqIHRoZSBuZXh0IHN0ZXAgdG8gZGVjaWRlLgogICAgICAgKi8KICAgICAgcy5tYXRjaF9hdmFpbGFibGUgPSAxOwogICAgICBzLnN0cnN0YXJ0Kys7CiAgICAgIHMubG9va2FoZWFkLS07CiAgICB9CiAgfQogIC8vQXNzZXJ0IChmbHVzaCAhPSBaX05PX0ZMVVNILCAibm8gZmx1c2g/Iik7CiAgaWYgKHMubWF0Y2hfYXZhaWxhYmxlKSB7CiAgICAvL1RyYWNldnYoKHN0ZGVyciwiJWMiLCBzLT53aW5kb3dbcy0+c3Ryc3RhcnQtMV0pKTsKICAgIC8qKiogX3RyX3RhbGx5X2xpdChzLCBzLndpbmRvd1tzLnN0cnN0YXJ0LTFdLCBiZmx1c2gpOyAqKiovCiAgICBiZmx1c2ggPSB0cmVlcy5fdHJfdGFsbHkocywgMCwgcy53aW5kb3dbcy5zdHJzdGFydCAtIDFdKTsKCiAgICBzLm1hdGNoX2F2YWlsYWJsZSA9IDA7CiAgfQogIHMuaW5zZXJ0ID0gcy5zdHJzdGFydCA8IE1JTl9NQVRDSCAtIDEgPyBzLnN0cnN0YXJ0IDogTUlOX01BVENIIC0gMTsKICBpZiAoZmx1c2ggPT09IFpfRklOSVNIKSB7CiAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDEpOyAqKiovCiAgICBmbHVzaF9ibG9ja19vbmx5KHMsIHRydWUpOwogICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgcmV0dXJuIEJTX0ZJTklTSF9TVEFSVEVEOwogICAgfQogICAgLyoqKi8KICAgIHJldHVybiBCU19GSU5JU0hfRE9ORTsKICB9CiAgaWYgKHMubGFzdF9saXQpIHsKICAgIC8qKiogRkxVU0hfQkxPQ0socywgMCk7ICoqKi8KICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgIH0KICAgIC8qKiovCiAgfQoKICByZXR1cm4gQlNfQkxPQ0tfRE9ORTsKfQoKCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBGb3IgWl9STEUsIHNpbXBseSBsb29rIGZvciBydW5zIG9mIGJ5dGVzLCBnZW5lcmF0ZSBtYXRjaGVzIG9ubHkgb2YgZGlzdGFuY2UKICogb25lLiAgRG8gbm90IG1haW50YWluIGEgaGFzaCB0YWJsZS4gIChJdCB3aWxsIGJlIHJlZ2VuZXJhdGVkIGlmIHRoaXMgcnVuIG9mCiAqIGRlZmxhdGUgc3dpdGNoZXMgYXdheSBmcm9tIFpfUkxFLikKICovCmZ1bmN0aW9uIGRlZmxhdGVfcmxlKHMsIGZsdXNoKSB7CiAgdmFyIGJmbHVzaDsgICAgICAgICAgICAvKiBzZXQgaWYgY3VycmVudCBibG9jayBtdXN0IGJlIGZsdXNoZWQgKi8KICB2YXIgcHJldjsgICAgICAgICAgICAgIC8qIGJ5dGUgYXQgZGlzdGFuY2Ugb25lIHRvIG1hdGNoICovCiAgdmFyIHNjYW4sIHN0cmVuZDsgICAgICAvKiBzY2FuIGdvZXMgdXAgdG8gc3RyZW5kIGZvciBsZW5ndGggb2YgcnVuICovCgogIHZhciBfd2luID0gcy53aW5kb3c7CgogIGZvciAoOzspIHsKICAgIC8qIE1ha2Ugc3VyZSB0aGF0IHdlIGFsd2F5cyBoYXZlIGVub3VnaCBsb29rYWhlYWQsIGV4Y2VwdAogICAgICogYXQgdGhlIGVuZCBvZiB0aGUgaW5wdXQgZmlsZS4gV2UgbmVlZCBNQVhfTUFUQ0ggYnl0ZXMKICAgICAqIGZvciB0aGUgbG9uZ2VzdCBydW4sIHBsdXMgb25lIGZvciB0aGUgdW5yb2xsZWQgbG9vcC4KICAgICAqLwogICAgaWYgKHMubG9va2FoZWFkIDw9IE1BWF9NQVRDSCkgewogICAgICBmaWxsX3dpbmRvdyhzKTsKICAgICAgaWYgKHMubG9va2FoZWFkIDw9IE1BWF9NQVRDSCAmJiBmbHVzaCA9PT0gWl9OT19GTFVTSCkgewogICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgIH0KICAgICAgaWYgKHMubG9va2FoZWFkID09PSAwKSB7IGJyZWFrOyB9IC8qIGZsdXNoIHRoZSBjdXJyZW50IGJsb2NrICovCiAgICB9CgogICAgLyogU2VlIGhvdyBtYW55IHRpbWVzIHRoZSBwcmV2aW91cyBieXRlIHJlcGVhdHMgKi8KICAgIHMubWF0Y2hfbGVuZ3RoID0gMDsKICAgIGlmIChzLmxvb2thaGVhZCA+PSBNSU5fTUFUQ0ggJiYgcy5zdHJzdGFydCA+IDApIHsKICAgICAgc2NhbiA9IHMuc3Ryc3RhcnQgLSAxOwogICAgICBwcmV2ID0gX3dpbltzY2FuXTsKICAgICAgaWYgKHByZXYgPT09IF93aW5bKytzY2FuXSAmJiBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dKSB7CiAgICAgICAgc3RyZW5kID0gcy5zdHJzdGFydCArIE1BWF9NQVRDSDsKICAgICAgICBkbyB7CiAgICAgICAgICAvKmpzaGludCBub2VtcHR5OmZhbHNlKi8KICAgICAgICB9IHdoaWxlIChwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmCiAgICAgICAgICAgICAgICAgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmIHByZXYgPT09IF93aW5bKytzY2FuXSAmJgogICAgICAgICAgICAgICAgIHByZXYgPT09IF93aW5bKytzY2FuXSAmJiBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYKICAgICAgICAgICAgICAgICBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmCiAgICAgICAgICAgICAgICAgc2NhbiA8IHN0cmVuZCk7CiAgICAgICAgcy5tYXRjaF9sZW5ndGggPSBNQVhfTUFUQ0ggLSAoc3RyZW5kIC0gc2Nhbik7CiAgICAgICAgaWYgKHMubWF0Y2hfbGVuZ3RoID4gcy5sb29rYWhlYWQpIHsKICAgICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gcy5sb29rYWhlYWQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vQXNzZXJ0KHNjYW4gPD0gcy0+d2luZG93Kyh1SW50KShzLT53aW5kb3dfc2l6ZS0xKSwgIndpbGQgc2NhbiIpOwogICAgfQoKICAgIC8qIEVtaXQgbWF0Y2ggaWYgaGF2ZSBydW4gb2YgTUlOX01BVENIIG9yIGxvbmdlciwgZWxzZSBlbWl0IGxpdGVyYWwgKi8KICAgIGlmIChzLm1hdGNoX2xlbmd0aCA+PSBNSU5fTUFUQ0gpIHsKICAgICAgLy9jaGVja19tYXRjaChzLCBzLnN0cnN0YXJ0LCBzLnN0cnN0YXJ0IC0gMSwgcy5tYXRjaF9sZW5ndGgpOwoKICAgICAgLyoqKiBfdHJfdGFsbHlfZGlzdChzLCAxLCBzLm1hdGNoX2xlbmd0aCAtIE1JTl9NQVRDSCwgYmZsdXNoKTsgKioqLwogICAgICBiZmx1c2ggPSB0cmVlcy5fdHJfdGFsbHkocywgMSwgcy5tYXRjaF9sZW5ndGggLSBNSU5fTUFUQ0gpOwoKICAgICAgcy5sb29rYWhlYWQgLT0gcy5tYXRjaF9sZW5ndGg7CiAgICAgIHMuc3Ryc3RhcnQgKz0gcy5tYXRjaF9sZW5ndGg7CiAgICAgIHMubWF0Y2hfbGVuZ3RoID0gMDsKICAgIH0gZWxzZSB7CiAgICAgIC8qIE5vIG1hdGNoLCBvdXRwdXQgYSBsaXRlcmFsIGJ5dGUgKi8KICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIiVjIiwgcy0+d2luZG93W3MtPnN0cnN0YXJ0XSkpOwogICAgICAvKioqIF90cl90YWxseV9saXQocywgcy53aW5kb3dbcy5zdHJzdGFydF0sIGJmbHVzaCk7ICoqKi8KICAgICAgYmZsdXNoID0gdHJlZXMuX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnRdKTsKCiAgICAgIHMubG9va2FoZWFkLS07CiAgICAgIHMuc3Ryc3RhcnQrKzsKICAgIH0KICAgIGlmIChiZmx1c2gpIHsKICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqLwogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICB9CiAgICAgIC8qKiovCiAgICB9CiAgfQogIHMuaW5zZXJ0ID0gMDsKICBpZiAoZmx1c2ggPT09IFpfRklOSVNIKSB7CiAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDEpOyAqKiovCiAgICBmbHVzaF9ibG9ja19vbmx5KHMsIHRydWUpOwogICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgcmV0dXJuIEJTX0ZJTklTSF9TVEFSVEVEOwogICAgfQogICAgLyoqKi8KICAgIHJldHVybiBCU19GSU5JU0hfRE9ORTsKICB9CiAgaWYgKHMubGFzdF9saXQpIHsKICAgIC8qKiogRkxVU0hfQkxPQ0socywgMCk7ICoqKi8KICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgIH0KICAgIC8qKiovCiAgfQogIHJldHVybiBCU19CTE9DS19ET05FOwp9CgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogRm9yIFpfSFVGRk1BTl9PTkxZLCBkbyBub3QgbG9vayBmb3IgbWF0Y2hlcy4gIERvIG5vdCBtYWludGFpbiBhIGhhc2ggdGFibGUuCiAqIChJdCB3aWxsIGJlIHJlZ2VuZXJhdGVkIGlmIHRoaXMgcnVuIG9mIGRlZmxhdGUgc3dpdGNoZXMgYXdheSBmcm9tIEh1ZmZtYW4uKQogKi8KZnVuY3Rpb24gZGVmbGF0ZV9odWZmKHMsIGZsdXNoKSB7CiAgdmFyIGJmbHVzaDsgICAgICAgICAgICAgLyogc2V0IGlmIGN1cnJlbnQgYmxvY2sgbXVzdCBiZSBmbHVzaGVkICovCgogIGZvciAoOzspIHsKICAgIC8qIE1ha2Ugc3VyZSB0aGF0IHdlIGhhdmUgYSBsaXRlcmFsIHRvIHdyaXRlLiAqLwogICAgaWYgKHMubG9va2FoZWFkID09PSAwKSB7CiAgICAgIGZpbGxfd2luZG93KHMpOwogICAgICBpZiAocy5sb29rYWhlYWQgPT09IDApIHsKICAgICAgICBpZiAoZmx1c2ggPT09IFpfTk9fRkxVU0gpIHsKICAgICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgICAgfQogICAgICAgIGJyZWFrOyAgICAgIC8qIGZsdXNoIHRoZSBjdXJyZW50IGJsb2NrICovCiAgICAgIH0KICAgIH0KCiAgICAvKiBPdXRwdXQgYSBsaXRlcmFsIGJ5dGUgKi8KICAgIHMubWF0Y2hfbGVuZ3RoID0gMDsKICAgIC8vVHJhY2V2digoc3RkZXJyLCIlYyIsIHMtPndpbmRvd1tzLT5zdHJzdGFydF0pKTsKICAgIC8qKiogX3RyX3RhbGx5X2xpdChzLCBzLndpbmRvd1tzLnN0cnN0YXJ0XSwgYmZsdXNoKTsgKioqLwogICAgYmZsdXNoID0gdHJlZXMuX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnRdKTsKICAgIHMubG9va2FoZWFkLS07CiAgICBzLnN0cnN0YXJ0Kys7CiAgICBpZiAoYmZsdXNoKSB7CiAgICAgIC8qKiogRkxVU0hfQkxPQ0socywgMCk7ICoqKi8KICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7CiAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgfQogICAgICAvKioqLwogICAgfQogIH0KICBzLmluc2VydCA9IDA7CiAgaWYgKGZsdXNoID09PSBaX0ZJTklTSCkgewogICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAxKTsgKioqLwogICAgZmx1c2hfYmxvY2tfb25seShzLCB0cnVlKTsKICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDsKICAgIH0KICAgIC8qKiovCiAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7CiAgfQogIGlmIChzLmxhc3RfbGl0KSB7CiAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovCiAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICB9CiAgICAvKioqLwogIH0KICByZXR1cm4gQlNfQkxPQ0tfRE9ORTsKfQoKLyogVmFsdWVzIGZvciBtYXhfbGF6eV9tYXRjaCwgZ29vZF9tYXRjaCBhbmQgbWF4X2NoYWluX2xlbmd0aCwgZGVwZW5kaW5nIG9uCiAqIHRoZSBkZXNpcmVkIHBhY2sgbGV2ZWwgKDAuLjkpLiBUaGUgdmFsdWVzIGdpdmVuIGJlbG93IGhhdmUgYmVlbiB0dW5lZCB0bwogKiBleGNsdWRlIHdvcnN0IGNhc2UgcGVyZm9ybWFuY2UgZm9yIHBhdGhvbG9naWNhbCBmaWxlcy4gQmV0dGVyIHZhbHVlcyBtYXkgYmUKICogZm91bmQgZm9yIHNwZWNpZmljIGZpbGVzLgogKi8KZnVuY3Rpb24gQ29uZmlnKGdvb2RfbGVuZ3RoLCBtYXhfbGF6eSwgbmljZV9sZW5ndGgsIG1heF9jaGFpbiwgZnVuYykgewogIHRoaXMuZ29vZF9sZW5ndGggPSBnb29kX2xlbmd0aDsKICB0aGlzLm1heF9sYXp5ID0gbWF4X2xhenk7CiAgdGhpcy5uaWNlX2xlbmd0aCA9IG5pY2VfbGVuZ3RoOwogIHRoaXMubWF4X2NoYWluID0gbWF4X2NoYWluOwogIHRoaXMuZnVuYyA9IGZ1bmM7Cn0KCnZhciBjb25maWd1cmF0aW9uX3RhYmxlOwoKY29uZmlndXJhdGlvbl90YWJsZSA9IFsKICAvKiAgICAgIGdvb2QgbGF6eSBuaWNlIGNoYWluICovCiAgbmV3IENvbmZpZygwLCAwLCAwLCAwLCBkZWZsYXRlX3N0b3JlZCksICAgICAgICAgIC8qIDAgc3RvcmUgb25seSAqLwogIG5ldyBDb25maWcoNCwgNCwgOCwgNCwgZGVmbGF0ZV9mYXN0KSwgICAgICAgICAgICAvKiAxIG1heCBzcGVlZCwgbm8gbGF6eSBtYXRjaGVzICovCiAgbmV3IENvbmZpZyg0LCA1LCAxNiwgOCwgZGVmbGF0ZV9mYXN0KSwgICAgICAgICAgIC8qIDIgKi8KICBuZXcgQ29uZmlnKDQsIDYsIDMyLCAzMiwgZGVmbGF0ZV9mYXN0KSwgICAgICAgICAgLyogMyAqLwoKICBuZXcgQ29uZmlnKDQsIDQsIDE2LCAxNiwgZGVmbGF0ZV9zbG93KSwgICAgICAgICAgLyogNCBsYXp5IG1hdGNoZXMgKi8KICBuZXcgQ29uZmlnKDgsIDE2LCAzMiwgMzIsIGRlZmxhdGVfc2xvdyksICAgICAgICAgLyogNSAqLwogIG5ldyBDb25maWcoOCwgMTYsIDEyOCwgMTI4LCBkZWZsYXRlX3Nsb3cpLCAgICAgICAvKiA2ICovCiAgbmV3IENvbmZpZyg4LCAzMiwgMTI4LCAyNTYsIGRlZmxhdGVfc2xvdyksICAgICAgIC8qIDcgKi8KICBuZXcgQ29uZmlnKDMyLCAxMjgsIDI1OCwgMTAyNCwgZGVmbGF0ZV9zbG93KSwgICAgLyogOCAqLwogIG5ldyBDb25maWcoMzIsIDI1OCwgMjU4LCA0MDk2LCBkZWZsYXRlX3Nsb3cpICAgICAvKiA5IG1heCBjb21wcmVzc2lvbiAqLwpdOwoKCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBJbml0aWFsaXplIHRoZSAibG9uZ2VzdCBtYXRjaCIgcm91dGluZXMgZm9yIGEgbmV3IHpsaWIgc3RyZWFtCiAqLwpmdW5jdGlvbiBsbV9pbml0KHMpIHsKICBzLndpbmRvd19zaXplID0gMiAqIHMud19zaXplOwoKICAvKioqIENMRUFSX0hBU0gocyk7ICoqKi8KICB6ZXJvKHMuaGVhZCk7IC8vIEZpbGwgd2l0aCBOSUwgKD0gMCk7CgogIC8qIFNldCB0aGUgZGVmYXVsdCBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnM6CiAgICovCiAgcy5tYXhfbGF6eV9tYXRjaCA9IGNvbmZpZ3VyYXRpb25fdGFibGVbcy5sZXZlbF0ubWF4X2xhenk7CiAgcy5nb29kX21hdGNoID0gY29uZmlndXJhdGlvbl90YWJsZVtzLmxldmVsXS5nb29kX2xlbmd0aDsKICBzLm5pY2VfbWF0Y2ggPSBjb25maWd1cmF0aW9uX3RhYmxlW3MubGV2ZWxdLm5pY2VfbGVuZ3RoOwogIHMubWF4X2NoYWluX2xlbmd0aCA9IGNvbmZpZ3VyYXRpb25fdGFibGVbcy5sZXZlbF0ubWF4X2NoYWluOwoKICBzLnN0cnN0YXJ0ID0gMDsKICBzLmJsb2NrX3N0YXJ0ID0gMDsKICBzLmxvb2thaGVhZCA9IDA7CiAgcy5pbnNlcnQgPSAwOwogIHMubWF0Y2hfbGVuZ3RoID0gcy5wcmV2X2xlbmd0aCA9IE1JTl9NQVRDSCAtIDE7CiAgcy5tYXRjaF9hdmFpbGFibGUgPSAwOwogIHMuaW5zX2ggPSAwOwp9CgoKZnVuY3Rpb24gRGVmbGF0ZVN0YXRlKCkgewogIHRoaXMuc3RybSA9IG51bGw7ICAgICAgICAgICAgLyogcG9pbnRlciBiYWNrIHRvIHRoaXMgemxpYiBzdHJlYW0gKi8KICB0aGlzLnN0YXR1cyA9IDA7ICAgICAgICAgICAgLyogYXMgdGhlIG5hbWUgaW1wbGllcyAqLwogIHRoaXMucGVuZGluZ19idWYgPSBudWxsOyAgICAgIC8qIG91dHB1dCBzdGlsbCBwZW5kaW5nICovCiAgdGhpcy5wZW5kaW5nX2J1Zl9zaXplID0gMDsgIC8qIHNpemUgb2YgcGVuZGluZ19idWYgKi8KICB0aGlzLnBlbmRpbmdfb3V0ID0gMDsgICAgICAgLyogbmV4dCBwZW5kaW5nIGJ5dGUgdG8gb3V0cHV0IHRvIHRoZSBzdHJlYW0gKi8KICB0aGlzLnBlbmRpbmcgPSAwOyAgICAgICAgICAgLyogbmIgb2YgYnl0ZXMgaW4gdGhlIHBlbmRpbmcgYnVmZmVyICovCiAgdGhpcy53cmFwID0gMDsgICAgICAgICAgICAgIC8qIGJpdCAwIHRydWUgZm9yIHpsaWIsIGJpdCAxIHRydWUgZm9yIGd6aXAgKi8KICB0aGlzLmd6aGVhZCA9IG51bGw7ICAgICAgICAgLyogZ3ppcCBoZWFkZXIgaW5mb3JtYXRpb24gdG8gd3JpdGUgKi8KICB0aGlzLmd6aW5kZXggPSAwOyAgICAgICAgICAgLyogd2hlcmUgaW4gZXh0cmEsIG5hbWUsIG9yIGNvbW1lbnQgKi8KICB0aGlzLm1ldGhvZCA9IFpfREVGTEFURUQ7IC8qIGNhbiBvbmx5IGJlIERFRkxBVEVEICovCiAgdGhpcy5sYXN0X2ZsdXNoID0gLTE7ICAgLyogdmFsdWUgb2YgZmx1c2ggcGFyYW0gZm9yIHByZXZpb3VzIGRlZmxhdGUgY2FsbCAqLwoKICB0aGlzLndfc2l6ZSA9IDA7ICAvKiBMWjc3IHdpbmRvdyBzaXplICgzMksgYnkgZGVmYXVsdCkgKi8KICB0aGlzLndfYml0cyA9IDA7ICAvKiBsb2cyKHdfc2l6ZSkgICg4Li4xNikgKi8KICB0aGlzLndfbWFzayA9IDA7ICAvKiB3X3NpemUgLSAxICovCgogIHRoaXMud2luZG93ID0gbnVsbDsKICAvKiBTbGlkaW5nIHdpbmRvdy4gSW5wdXQgYnl0ZXMgYXJlIHJlYWQgaW50byB0aGUgc2Vjb25kIGhhbGYgb2YgdGhlIHdpbmRvdywKICAgKiBhbmQgbW92ZSB0byB0aGUgZmlyc3QgaGFsZiBsYXRlciB0byBrZWVwIGEgZGljdGlvbmFyeSBvZiBhdCBsZWFzdCB3U2l6ZQogICAqIGJ5dGVzLiBXaXRoIHRoaXMgb3JnYW5pemF0aW9uLCBtYXRjaGVzIGFyZSBsaW1pdGVkIHRvIGEgZGlzdGFuY2Ugb2YKICAgKiB3U2l6ZS1NQVhfTUFUQ0ggYnl0ZXMsIGJ1dCB0aGlzIGVuc3VyZXMgdGhhdCBJTyBpcyBhbHdheXMKICAgKiBwZXJmb3JtZWQgd2l0aCBhIGxlbmd0aCBtdWx0aXBsZSBvZiB0aGUgYmxvY2sgc2l6ZS4KICAgKi8KCiAgdGhpcy53aW5kb3dfc2l6ZSA9IDA7CiAgLyogQWN0dWFsIHNpemUgb2Ygd2luZG93OiAyKndTaXplLCBleGNlcHQgd2hlbiB0aGUgdXNlciBpbnB1dCBidWZmZXIKICAgKiBpcyBkaXJlY3RseSB1c2VkIGFzIHNsaWRpbmcgd2luZG93LgogICAqLwoKICB0aGlzLnByZXYgPSBudWxsOwogIC8qIExpbmsgdG8gb2xkZXIgc3RyaW5nIHdpdGggc2FtZSBoYXNoIGluZGV4LiBUbyBsaW1pdCB0aGUgc2l6ZSBvZiB0aGlzCiAgICogYXJyYXkgdG8gNjRLLCB0aGlzIGxpbmsgaXMgbWFpbnRhaW5lZCBvbmx5IGZvciB0aGUgbGFzdCAzMksgc3RyaW5ncy4KICAgKiBBbiBpbmRleCBpbiB0aGlzIGFycmF5IGlzIHRodXMgYSB3aW5kb3cgaW5kZXggbW9kdWxvIDMySy4KICAgKi8KCiAgdGhpcy5oZWFkID0gbnVsbDsgICAvKiBIZWFkcyBvZiB0aGUgaGFzaCBjaGFpbnMgb3IgTklMLiAqLwoKICB0aGlzLmluc19oID0gMDsgICAgICAgLyogaGFzaCBpbmRleCBvZiBzdHJpbmcgdG8gYmUgaW5zZXJ0ZWQgKi8KICB0aGlzLmhhc2hfc2l6ZSA9IDA7ICAgLyogbnVtYmVyIG9mIGVsZW1lbnRzIGluIGhhc2ggdGFibGUgKi8KICB0aGlzLmhhc2hfYml0cyA9IDA7ICAgLyogbG9nMihoYXNoX3NpemUpICovCiAgdGhpcy5oYXNoX21hc2sgPSAwOyAgIC8qIGhhc2hfc2l6ZS0xICovCgogIHRoaXMuaGFzaF9zaGlmdCA9IDA7CiAgLyogTnVtYmVyIG9mIGJpdHMgYnkgd2hpY2ggaW5zX2ggbXVzdCBiZSBzaGlmdGVkIGF0IGVhY2ggaW5wdXQKICAgKiBzdGVwLiBJdCBtdXN0IGJlIHN1Y2ggdGhhdCBhZnRlciBNSU5fTUFUQ0ggc3RlcHMsIHRoZSBvbGRlc3QKICAgKiBieXRlIG5vIGxvbmdlciB0YWtlcyBwYXJ0IGluIHRoZSBoYXNoIGtleSwgdGhhdCBpczoKICAgKiAgIGhhc2hfc2hpZnQgKiBNSU5fTUFUQ0ggPj0gaGFzaF9iaXRzCiAgICovCgogIHRoaXMuYmxvY2tfc3RhcnQgPSAwOwogIC8qIFdpbmRvdyBwb3NpdGlvbiBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjdXJyZW50IG91dHB1dCBibG9jay4gR2V0cwogICAqIG5lZ2F0aXZlIHdoZW4gdGhlIHdpbmRvdyBpcyBtb3ZlZCBiYWNrd2FyZHMuCiAgICovCgogIHRoaXMubWF0Y2hfbGVuZ3RoID0gMDsgICAgICAvKiBsZW5ndGggb2YgYmVzdCBtYXRjaCAqLwogIHRoaXMucHJldl9tYXRjaCA9IDA7ICAgICAgICAvKiBwcmV2aW91cyBtYXRjaCAqLwogIHRoaXMubWF0Y2hfYXZhaWxhYmxlID0gMDsgICAvKiBzZXQgaWYgcHJldmlvdXMgbWF0Y2ggZXhpc3RzICovCiAgdGhpcy5zdHJzdGFydCA9IDA7ICAgICAgICAgIC8qIHN0YXJ0IG9mIHN0cmluZyB0byBpbnNlcnQgKi8KICB0aGlzLm1hdGNoX3N0YXJ0ID0gMDsgICAgICAgLyogc3RhcnQgb2YgbWF0Y2hpbmcgc3RyaW5nICovCiAgdGhpcy5sb29rYWhlYWQgPSAwOyAgICAgICAgIC8qIG51bWJlciBvZiB2YWxpZCBieXRlcyBhaGVhZCBpbiB3aW5kb3cgKi8KCiAgdGhpcy5wcmV2X2xlbmd0aCA9IDA7CiAgLyogTGVuZ3RoIG9mIHRoZSBiZXN0IG1hdGNoIGF0IHByZXZpb3VzIHN0ZXAuIE1hdGNoZXMgbm90IGdyZWF0ZXIgdGhhbiB0aGlzCiAgICogYXJlIGRpc2NhcmRlZC4gVGhpcyBpcyB1c2VkIGluIHRoZSBsYXp5IG1hdGNoIGV2YWx1YXRpb24uCiAgICovCgogIHRoaXMubWF4X2NoYWluX2xlbmd0aCA9IDA7CiAgLyogVG8gc3BlZWQgdXAgZGVmbGF0aW9uLCBoYXNoIGNoYWlucyBhcmUgbmV2ZXIgc2VhcmNoZWQgYmV5b25kIHRoaXMKICAgKiBsZW5ndGguICBBIGhpZ2hlciBsaW1pdCBpbXByb3ZlcyBjb21wcmVzc2lvbiByYXRpbyBidXQgZGVncmFkZXMgdGhlCiAgICogc3BlZWQuCiAgICovCgogIHRoaXMubWF4X2xhenlfbWF0Y2ggPSAwOwogIC8qIEF0dGVtcHQgdG8gZmluZCBhIGJldHRlciBtYXRjaCBvbmx5IHdoZW4gdGhlIGN1cnJlbnQgbWF0Y2ggaXMgc3RyaWN0bHkKICAgKiBzbWFsbGVyIHRoYW4gdGhpcyB2YWx1ZS4gVGhpcyBtZWNoYW5pc20gaXMgdXNlZCBvbmx5IGZvciBjb21wcmVzc2lvbgogICAqIGxldmVscyA+PSA0LgogICAqLwogIC8vIFRoYXQncyBhbGlhcyB0byBtYXhfbGF6eV9tYXRjaCwgZG9uJ3QgdXNlIGRpcmVjdGx5CiAgLy90aGlzLm1heF9pbnNlcnRfbGVuZ3RoID0gMDsKICAvKiBJbnNlcnQgbmV3IHN0cmluZ3MgaW4gdGhlIGhhc2ggdGFibGUgb25seSBpZiB0aGUgbWF0Y2ggbGVuZ3RoIGlzIG5vdAogICAqIGdyZWF0ZXIgdGhhbiB0aGlzIGxlbmd0aC4gVGhpcyBzYXZlcyB0aW1lIGJ1dCBkZWdyYWRlcyBjb21wcmVzc2lvbi4KICAgKiBtYXhfaW5zZXJ0X2xlbmd0aCBpcyB1c2VkIG9ubHkgZm9yIGNvbXByZXNzaW9uIGxldmVscyA8PSAzLgogICAqLwoKICB0aGlzLmxldmVsID0gMDsgICAgIC8qIGNvbXByZXNzaW9uIGxldmVsICgxLi45KSAqLwogIHRoaXMuc3RyYXRlZ3kgPSAwOyAgLyogZmF2b3Igb3IgZm9yY2UgSHVmZm1hbiBjb2RpbmcqLwoKICB0aGlzLmdvb2RfbWF0Y2ggPSAwOwogIC8qIFVzZSBhIGZhc3RlciBzZWFyY2ggd2hlbiB0aGUgcHJldmlvdXMgbWF0Y2ggaXMgbG9uZ2VyIHRoYW4gdGhpcyAqLwoKICB0aGlzLm5pY2VfbWF0Y2ggPSAwOyAvKiBTdG9wIHNlYXJjaGluZyB3aGVuIGN1cnJlbnQgbWF0Y2ggZXhjZWVkcyB0aGlzICovCgogICAgICAgICAgICAgIC8qIHVzZWQgYnkgdHJlZXMuYzogKi8KCiAgLyogRGlkbid0IHVzZSBjdF9kYXRhIHR5cGVkZWYgYmVsb3cgdG8gc3VwcHJlc3MgY29tcGlsZXIgd2FybmluZyAqLwoKICAvLyBzdHJ1Y3QgY3RfZGF0YV9zIGR5bl9sdHJlZVtIRUFQX1NJWkVdOyAgIC8qIGxpdGVyYWwgYW5kIGxlbmd0aCB0cmVlICovCiAgLy8gc3RydWN0IGN0X2RhdGFfcyBkeW5fZHRyZWVbMipEX0NPREVTKzFdOyAvKiBkaXN0YW5jZSB0cmVlICovCiAgLy8gc3RydWN0IGN0X2RhdGFfcyBibF90cmVlWzIqQkxfQ09ERVMrMV07ICAvKiBIdWZmbWFuIHRyZWUgZm9yIGJpdCBsZW5ndGhzICovCgogIC8vIFVzZSBmbGF0IGFycmF5IG9mIERPVUJMRSBzaXplLCB3aXRoIGludGVybGVhdmVkIGZhdGEsCiAgLy8gYmVjYXVzZSBKUyBkb2VzIG5vdCBzdXBwb3J0IGVmZmVjdGl2ZQogIHRoaXMuZHluX2x0cmVlICA9IG5ldyB1dGlscy5CdWYxNihIRUFQX1NJWkUgKiAyKTsKICB0aGlzLmR5bl9kdHJlZSAgPSBuZXcgdXRpbHMuQnVmMTYoKDIgKiBEX0NPREVTICsgMSkgKiAyKTsKICB0aGlzLmJsX3RyZWUgICAgPSBuZXcgdXRpbHMuQnVmMTYoKDIgKiBCTF9DT0RFUyArIDEpICogMik7CiAgemVybyh0aGlzLmR5bl9sdHJlZSk7CiAgemVybyh0aGlzLmR5bl9kdHJlZSk7CiAgemVybyh0aGlzLmJsX3RyZWUpOwoKICB0aGlzLmxfZGVzYyAgID0gbnVsbDsgICAgICAgICAvKiBkZXNjLiBmb3IgbGl0ZXJhbCB0cmVlICovCiAgdGhpcy5kX2Rlc2MgICA9IG51bGw7ICAgICAgICAgLyogZGVzYy4gZm9yIGRpc3RhbmNlIHRyZWUgKi8KICB0aGlzLmJsX2Rlc2MgID0gbnVsbDsgICAgICAgICAvKiBkZXNjLiBmb3IgYml0IGxlbmd0aCB0cmVlICovCgogIC8vdXNoIGJsX2NvdW50W01BWF9CSVRTKzFdOwogIHRoaXMuYmxfY291bnQgPSBuZXcgdXRpbHMuQnVmMTYoTUFYX0JJVFMgKyAxKTsKICAvKiBudW1iZXIgb2YgY29kZXMgYXQgZWFjaCBiaXQgbGVuZ3RoIGZvciBhbiBvcHRpbWFsIHRyZWUgKi8KCiAgLy9pbnQgaGVhcFsyKkxfQ09ERVMrMV07ICAgICAgLyogaGVhcCB1c2VkIHRvIGJ1aWxkIHRoZSBIdWZmbWFuIHRyZWVzICovCiAgdGhpcy5oZWFwID0gbmV3IHV0aWxzLkJ1ZjE2KDIgKiBMX0NPREVTICsgMSk7ICAvKiBoZWFwIHVzZWQgdG8gYnVpbGQgdGhlIEh1ZmZtYW4gdHJlZXMgKi8KICB6ZXJvKHRoaXMuaGVhcCk7CgogIHRoaXMuaGVhcF9sZW4gPSAwOyAgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgaGVhcCAqLwogIHRoaXMuaGVhcF9tYXggPSAwOyAgICAgICAgICAgICAgIC8qIGVsZW1lbnQgb2YgbGFyZ2VzdCBmcmVxdWVuY3kgKi8KICAvKiBUaGUgc29ucyBvZiBoZWFwW25dIGFyZSBoZWFwWzIqbl0gYW5kIGhlYXBbMipuKzFdLiBoZWFwWzBdIGlzIG5vdCB1c2VkLgogICAqIFRoZSBzYW1lIGhlYXAgYXJyYXkgaXMgdXNlZCB0byBidWlsZCBhbGwgdHJlZXMuCiAgICovCgogIHRoaXMuZGVwdGggPSBuZXcgdXRpbHMuQnVmMTYoMiAqIExfQ09ERVMgKyAxKTsgLy91Y2ggZGVwdGhbMipMX0NPREVTKzFdOwogIHplcm8odGhpcy5kZXB0aCk7CiAgLyogRGVwdGggb2YgZWFjaCBzdWJ0cmVlIHVzZWQgYXMgdGllIGJyZWFrZXIgZm9yIHRyZWVzIG9mIGVxdWFsIGZyZXF1ZW5jeQogICAqLwoKICB0aGlzLmxfYnVmID0gMDsgICAgICAgICAgLyogYnVmZmVyIGluZGV4IGZvciBsaXRlcmFscyBvciBsZW5ndGhzICovCgogIHRoaXMubGl0X2J1ZnNpemUgPSAwOwogIC8qIFNpemUgb2YgbWF0Y2ggYnVmZmVyIGZvciBsaXRlcmFscy9sZW5ndGhzLiAgVGhlcmUgYXJlIDQgcmVhc29ucyBmb3IKICAgKiBsaW1pdGluZyBsaXRfYnVmc2l6ZSB0byA2NEs6CiAgICogICAtIGZyZXF1ZW5jaWVzIGNhbiBiZSBrZXB0IGluIDE2IGJpdCBjb3VudGVycwogICAqICAgLSBpZiBjb21wcmVzc2lvbiBpcyBub3Qgc3VjY2Vzc2Z1bCBmb3IgdGhlIGZpcnN0IGJsb2NrLCBhbGwgaW5wdXQKICAgKiAgICAgZGF0YSBpcyBzdGlsbCBpbiB0aGUgd2luZG93IHNvIHdlIGNhbiBzdGlsbCBlbWl0IGEgc3RvcmVkIGJsb2NrIGV2ZW4KICAgKiAgICAgd2hlbiBpbnB1dCBjb21lcyBmcm9tIHN0YW5kYXJkIGlucHV0LiAgKFRoaXMgY2FuIGFsc28gYmUgZG9uZSBmb3IKICAgKiAgICAgYWxsIGJsb2NrcyBpZiBsaXRfYnVmc2l6ZSBpcyBub3QgZ3JlYXRlciB0aGFuIDMySy4pCiAgICogICAtIGlmIGNvbXByZXNzaW9uIGlzIG5vdCBzdWNjZXNzZnVsIGZvciBhIGZpbGUgc21hbGxlciB0aGFuIDY0Sywgd2UgY2FuCiAgICogICAgIGV2ZW4gZW1pdCBhIHN0b3JlZCBmaWxlIGluc3RlYWQgb2YgYSBzdG9yZWQgYmxvY2sgKHNhdmluZyA1IGJ5dGVzKS4KICAgKiAgICAgVGhpcyBpcyBhcHBsaWNhYmxlIG9ubHkgZm9yIHppcCAobm90IGd6aXAgb3IgemxpYikuCiAgICogICAtIGNyZWF0aW5nIG5ldyBIdWZmbWFuIHRyZWVzIGxlc3MgZnJlcXVlbnRseSBtYXkgbm90IHByb3ZpZGUgZmFzdAogICAqICAgICBhZGFwdGF0aW9uIHRvIGNoYW5nZXMgaW4gdGhlIGlucHV0IGRhdGEgc3RhdGlzdGljcy4gKFRha2UgZm9yCiAgICogICAgIGV4YW1wbGUgYSBiaW5hcnkgZmlsZSB3aXRoIHBvb3JseSBjb21wcmVzc2libGUgY29kZSBmb2xsb3dlZCBieQogICAqICAgICBhIGhpZ2hseSBjb21wcmVzc2libGUgc3RyaW5nIHRhYmxlLikgU21hbGxlciBidWZmZXIgc2l6ZXMgZ2l2ZQogICAqICAgICBmYXN0IGFkYXB0YXRpb24gYnV0IGhhdmUgb2YgY291cnNlIHRoZSBvdmVyaGVhZCBvZiB0cmFuc21pdHRpbmcKICAgKiAgICAgdHJlZXMgbW9yZSBmcmVxdWVudGx5LgogICAqICAgLSBJIGNhbid0IGNvdW50IGFib3ZlIDQKICAgKi8KCiAgdGhpcy5sYXN0X2xpdCA9IDA7ICAgICAgLyogcnVubmluZyBpbmRleCBpbiBsX2J1ZiAqLwoKICB0aGlzLmRfYnVmID0gMDsKICAvKiBCdWZmZXIgaW5kZXggZm9yIGRpc3RhbmNlcy4gVG8gc2ltcGxpZnkgdGhlIGNvZGUsIGRfYnVmIGFuZCBsX2J1ZiBoYXZlCiAgICogdGhlIHNhbWUgbnVtYmVyIG9mIGVsZW1lbnRzLiBUbyB1c2UgZGlmZmVyZW50IGxlbmd0aHMsIGFuIGV4dHJhIGZsYWcKICAgKiBhcnJheSB3b3VsZCBiZSBuZWNlc3NhcnkuCiAgICovCgogIHRoaXMub3B0X2xlbiA9IDA7ICAgICAgIC8qIGJpdCBsZW5ndGggb2YgY3VycmVudCBibG9jayB3aXRoIG9wdGltYWwgdHJlZXMgKi8KICB0aGlzLnN0YXRpY19sZW4gPSAwOyAgICAvKiBiaXQgbGVuZ3RoIG9mIGN1cnJlbnQgYmxvY2sgd2l0aCBzdGF0aWMgdHJlZXMgKi8KICB0aGlzLm1hdGNoZXMgPSAwOyAgICAgICAvKiBudW1iZXIgb2Ygc3RyaW5nIG1hdGNoZXMgaW4gY3VycmVudCBibG9jayAqLwogIHRoaXMuaW5zZXJ0ID0gMDsgICAgICAgIC8qIGJ5dGVzIGF0IGVuZCBvZiB3aW5kb3cgbGVmdCB0byBpbnNlcnQgKi8KCgogIHRoaXMuYmlfYnVmID0gMDsKICAvKiBPdXRwdXQgYnVmZmVyLiBiaXRzIGFyZSBpbnNlcnRlZCBzdGFydGluZyBhdCB0aGUgYm90dG9tIChsZWFzdAogICAqIHNpZ25pZmljYW50IGJpdHMpLgogICAqLwogIHRoaXMuYmlfdmFsaWQgPSAwOwogIC8qIE51bWJlciBvZiB2YWxpZCBiaXRzIGluIGJpX2J1Zi4gIEFsbCBiaXRzIGFib3ZlIHRoZSBsYXN0IHZhbGlkIGJpdAogICAqIGFyZSBhbHdheXMgemVyby4KICAgKi8KCiAgLy8gVXNlZCBmb3Igd2luZG93IG1lbW9yeSBpbml0LiBXZSBzYWZlbHkgaWdub3JlIGl0IGZvciBKUy4gVGhhdCBtYWtlcwogIC8vIHNlbnNlIG9ubHkgZm9yIHBvaW50ZXJzIGFuZCBtZW1vcnkgY2hlY2sgdG9vbHMuCiAgLy90aGlzLmhpZ2hfd2F0ZXIgPSAwOwogIC8qIEhpZ2ggd2F0ZXIgbWFyayBvZmZzZXQgaW4gd2luZG93IGZvciBpbml0aWFsaXplZCBieXRlcyAtLSBieXRlcyBhYm92ZQogICAqIHRoaXMgYXJlIHNldCB0byB6ZXJvIGluIG9yZGVyIHRvIGF2b2lkIG1lbW9yeSBjaGVjayB3YXJuaW5ncyB3aGVuCiAgICogbG9uZ2VzdCBtYXRjaCByb3V0aW5lcyBhY2Nlc3MgYnl0ZXMgcGFzdCB0aGUgaW5wdXQuICBUaGlzIGlzIHRoZW4KICAgKiB1cGRhdGVkIHRvIHRoZSBuZXcgaGlnaCB3YXRlciBtYXJrLgogICAqLwp9CgoKZnVuY3Rpb24gZGVmbGF0ZVJlc2V0S2VlcChzdHJtKSB7CiAgdmFyIHM7CgogIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgewogICAgcmV0dXJuIGVycihzdHJtLCBaX1NUUkVBTV9FUlJPUik7CiAgfQoKICBzdHJtLnRvdGFsX2luID0gc3RybS50b3RhbF9vdXQgPSAwOwogIHN0cm0uZGF0YV90eXBlID0gWl9VTktOT1dOOwoKICBzID0gc3RybS5zdGF0ZTsKICBzLnBlbmRpbmcgPSAwOwogIHMucGVuZGluZ19vdXQgPSAwOwoKICBpZiAocy53cmFwIDwgMCkgewogICAgcy53cmFwID0gLXMud3JhcDsKICAgIC8qIHdhcyBtYWRlIG5lZ2F0aXZlIGJ5IGRlZmxhdGUoLi4uLCBaX0ZJTklTSCk7ICovCiAgfQogIHMuc3RhdHVzID0gKHMud3JhcCA/IElOSVRfU1RBVEUgOiBCVVNZX1NUQVRFKTsKICBzdHJtLmFkbGVyID0gKHMud3JhcCA9PT0gMikgPwogICAgMCAgLy8gY3JjMzIoMCwgWl9OVUxMLCAwKQogIDoKICAgIDE7IC8vIGFkbGVyMzIoMCwgWl9OVUxMLCAwKQogIHMubGFzdF9mbHVzaCA9IFpfTk9fRkxVU0g7CiAgdHJlZXMuX3RyX2luaXQocyk7CiAgcmV0dXJuIFpfT0s7Cn0KCgpmdW5jdGlvbiBkZWZsYXRlUmVzZXQoc3RybSkgewogIHZhciByZXQgPSBkZWZsYXRlUmVzZXRLZWVwKHN0cm0pOwogIGlmIChyZXQgPT09IFpfT0spIHsKICAgIGxtX2luaXQoc3RybS5zdGF0ZSk7CiAgfQogIHJldHVybiByZXQ7Cn0KCgpmdW5jdGlvbiBkZWZsYXRlU2V0SGVhZGVyKHN0cm0sIGhlYWQpIHsKICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOyB9CiAgaWYgKHN0cm0uc3RhdGUud3JhcCAhPT0gMikgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH0KICBzdHJtLnN0YXRlLmd6aGVhZCA9IGhlYWQ7CiAgcmV0dXJuIFpfT0s7Cn0KCgpmdW5jdGlvbiBkZWZsYXRlSW5pdDIoc3RybSwgbGV2ZWwsIG1ldGhvZCwgd2luZG93Qml0cywgbWVtTGV2ZWwsIHN0cmF0ZWd5KSB7CiAgaWYgKCFzdHJtKSB7IC8vID09PSBaX05VTEwKICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjsKICB9CiAgdmFyIHdyYXAgPSAxOwoKICBpZiAobGV2ZWwgPT09IFpfREVGQVVMVF9DT01QUkVTU0lPTikgewogICAgbGV2ZWwgPSA2OwogIH0KCiAgaWYgKHdpbmRvd0JpdHMgPCAwKSB7IC8qIHN1cHByZXNzIHpsaWIgd3JhcHBlciAqLwogICAgd3JhcCA9IDA7CiAgICB3aW5kb3dCaXRzID0gLXdpbmRvd0JpdHM7CiAgfQoKICBlbHNlIGlmICh3aW5kb3dCaXRzID4gMTUpIHsKICAgIHdyYXAgPSAyOyAgICAgICAgICAgLyogd3JpdGUgZ3ppcCB3cmFwcGVyIGluc3RlYWQgKi8KICAgIHdpbmRvd0JpdHMgLT0gMTY7CiAgfQoKCiAgaWYgKG1lbUxldmVsIDwgMSB8fCBtZW1MZXZlbCA+IE1BWF9NRU1fTEVWRUwgfHwgbWV0aG9kICE9PSBaX0RFRkxBVEVEIHx8CiAgICB3aW5kb3dCaXRzIDwgOCB8fCB3aW5kb3dCaXRzID4gMTUgfHwgbGV2ZWwgPCAwIHx8IGxldmVsID4gOSB8fAogICAgc3RyYXRlZ3kgPCAwIHx8IHN0cmF0ZWd5ID4gWl9GSVhFRCkgewogICAgcmV0dXJuIGVycihzdHJtLCBaX1NUUkVBTV9FUlJPUik7CiAgfQoKCiAgaWYgKHdpbmRvd0JpdHMgPT09IDgpIHsKICAgIHdpbmRvd0JpdHMgPSA5OwogIH0KICAvKiB1bnRpbCAyNTYtYnl0ZSB3aW5kb3cgYnVnIGZpeGVkICovCgogIHZhciBzID0gbmV3IERlZmxhdGVTdGF0ZSgpOwoKICBzdHJtLnN0YXRlID0gczsKICBzLnN0cm0gPSBzdHJtOwoKICBzLndyYXAgPSB3cmFwOwogIHMuZ3poZWFkID0gbnVsbDsKICBzLndfYml0cyA9IHdpbmRvd0JpdHM7CiAgcy53X3NpemUgPSAxIDw8IHMud19iaXRzOwogIHMud19tYXNrID0gcy53X3NpemUgLSAxOwoKICBzLmhhc2hfYml0cyA9IG1lbUxldmVsICsgNzsKICBzLmhhc2hfc2l6ZSA9IDEgPDwgcy5oYXNoX2JpdHM7CiAgcy5oYXNoX21hc2sgPSBzLmhhc2hfc2l6ZSAtIDE7CiAgcy5oYXNoX3NoaWZ0ID0gfn4oKHMuaGFzaF9iaXRzICsgTUlOX01BVENIIC0gMSkgLyBNSU5fTUFUQ0gpOwoKICBzLndpbmRvdyA9IG5ldyB1dGlscy5CdWY4KHMud19zaXplICogMik7CiAgcy5oZWFkID0gbmV3IHV0aWxzLkJ1ZjE2KHMuaGFzaF9zaXplKTsKICBzLnByZXYgPSBuZXcgdXRpbHMuQnVmMTYocy53X3NpemUpOwoKICAvLyBEb24ndCBuZWVkIG1lbSBpbml0IG1hZ2ljIGZvciBKUy4KICAvL3MuaGlnaF93YXRlciA9IDA7ICAvKiBub3RoaW5nIHdyaXR0ZW4gdG8gcy0+d2luZG93IHlldCAqLwoKICBzLmxpdF9idWZzaXplID0gMSA8PCAobWVtTGV2ZWwgKyA2KTsgLyogMTZLIGVsZW1lbnRzIGJ5IGRlZmF1bHQgKi8KCiAgcy5wZW5kaW5nX2J1Zl9zaXplID0gcy5saXRfYnVmc2l6ZSAqIDQ7CgogIC8vb3ZlcmxheSA9ICh1c2hmICopIFpBTExPQyhzdHJtLCBzLT5saXRfYnVmc2l6ZSwgc2l6ZW9mKHVzaCkrMik7CiAgLy9zLT5wZW5kaW5nX2J1ZiA9ICh1Y2hmICopIG92ZXJsYXk7CiAgcy5wZW5kaW5nX2J1ZiA9IG5ldyB1dGlscy5CdWY4KHMucGVuZGluZ19idWZfc2l6ZSk7CgogIC8vIEl0IGlzIG9mZnNldCBmcm9tIGBzLnBlbmRpbmdfYnVmYCAoc2l6ZSBpcyBgcy5saXRfYnVmc2l6ZSAqIDJgKQogIC8vcy0+ZF9idWYgPSBvdmVybGF5ICsgcy0+bGl0X2J1ZnNpemUvc2l6ZW9mKHVzaCk7CiAgcy5kX2J1ZiA9IDEgKiBzLmxpdF9idWZzaXplOwoKICAvL3MtPmxfYnVmID0gcy0+cGVuZGluZ19idWYgKyAoMStzaXplb2YodXNoKSkqcy0+bGl0X2J1ZnNpemU7CiAgcy5sX2J1ZiA9ICgxICsgMikgKiBzLmxpdF9idWZzaXplOwoKICBzLmxldmVsID0gbGV2ZWw7CiAgcy5zdHJhdGVneSA9IHN0cmF0ZWd5OwogIHMubWV0aG9kID0gbWV0aG9kOwoKICByZXR1cm4gZGVmbGF0ZVJlc2V0KHN0cm0pOwp9CgpmdW5jdGlvbiBkZWZsYXRlSW5pdChzdHJtLCBsZXZlbCkgewogIHJldHVybiBkZWZsYXRlSW5pdDIoc3RybSwgbGV2ZWwsIFpfREVGTEFURUQsIE1BWF9XQklUUywgREVGX01FTV9MRVZFTCwgWl9ERUZBVUxUX1NUUkFURUdZKTsKfQoKCmZ1bmN0aW9uIGRlZmxhdGUoc3RybSwgZmx1c2gpIHsKICB2YXIgb2xkX2ZsdXNoLCBzOwogIHZhciBiZWcsIHZhbDsgLy8gZm9yIGd6aXAgaGVhZGVyIHdyaXRlIG9ubHkKCiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlIHx8CiAgICBmbHVzaCA+IFpfQkxPQ0sgfHwgZmx1c2ggPCAwKSB7CiAgICByZXR1cm4gc3RybSA/IGVycihzdHJtLCBaX1NUUkVBTV9FUlJPUikgOiBaX1NUUkVBTV9FUlJPUjsKICB9CgogIHMgPSBzdHJtLnN0YXRlOwoKICBpZiAoIXN0cm0ub3V0cHV0IHx8CiAgICAgICghc3RybS5pbnB1dCAmJiBzdHJtLmF2YWlsX2luICE9PSAwKSB8fAogICAgICAocy5zdGF0dXMgPT09IEZJTklTSF9TVEFURSAmJiBmbHVzaCAhPT0gWl9GSU5JU0gpKSB7CiAgICByZXR1cm4gZXJyKHN0cm0sIChzdHJtLmF2YWlsX291dCA9PT0gMCkgPyBaX0JVRl9FUlJPUiA6IFpfU1RSRUFNX0VSUk9SKTsKICB9CgogIHMuc3RybSA9IHN0cm07IC8qIGp1c3QgaW4gY2FzZSAqLwogIG9sZF9mbHVzaCA9IHMubGFzdF9mbHVzaDsKICBzLmxhc3RfZmx1c2ggPSBmbHVzaDsKCiAgLyogV3JpdGUgdGhlIGhlYWRlciAqLwogIGlmIChzLnN0YXR1cyA9PT0gSU5JVF9TVEFURSkgewoKICAgIGlmIChzLndyYXAgPT09IDIpIHsgLy8gR1pJUCBoZWFkZXIKICAgICAgc3RybS5hZGxlciA9IDA7ICAvL2NyYzMyKDBMLCBaX05VTEwsIDApOwogICAgICBwdXRfYnl0ZShzLCAzMSk7CiAgICAgIHB1dF9ieXRlKHMsIDEzOSk7CiAgICAgIHB1dF9ieXRlKHMsIDgpOwogICAgICBpZiAoIXMuZ3poZWFkKSB7IC8vIHMtPmd6aGVhZCA9PSBaX05VTEwKICAgICAgICBwdXRfYnl0ZShzLCAwKTsKICAgICAgICBwdXRfYnl0ZShzLCAwKTsKICAgICAgICBwdXRfYnl0ZShzLCAwKTsKICAgICAgICBwdXRfYnl0ZShzLCAwKTsKICAgICAgICBwdXRfYnl0ZShzLCAwKTsKICAgICAgICBwdXRfYnl0ZShzLCBzLmxldmVsID09PSA5ID8gMiA6CiAgICAgICAgICAgICAgICAgICAgKHMuc3RyYXRlZ3kgPj0gWl9IVUZGTUFOX09OTFkgfHwgcy5sZXZlbCA8IDIgPwogICAgICAgICAgICAgICAgICAgICA0IDogMCkpOwogICAgICAgIHB1dF9ieXRlKHMsIE9TX0NPREUpOwogICAgICAgIHMuc3RhdHVzID0gQlVTWV9TVEFURTsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBwdXRfYnl0ZShzLCAocy5nemhlYWQudGV4dCA/IDEgOiAwKSArCiAgICAgICAgICAgICAgICAgICAgKHMuZ3poZWFkLmhjcmMgPyAyIDogMCkgKwogICAgICAgICAgICAgICAgICAgICghcy5nemhlYWQuZXh0cmEgPyAwIDogNCkgKwogICAgICAgICAgICAgICAgICAgICghcy5nemhlYWQubmFtZSA/IDAgOiA4KSArCiAgICAgICAgICAgICAgICAgICAgKCFzLmd6aGVhZC5jb21tZW50ID8gMCA6IDE2KQogICAgICAgICAgICAgICAgKTsKICAgICAgICBwdXRfYnl0ZShzLCBzLmd6aGVhZC50aW1lICYgMHhmZik7CiAgICAgICAgcHV0X2J5dGUocywgKHMuZ3poZWFkLnRpbWUgPj4gOCkgJiAweGZmKTsKICAgICAgICBwdXRfYnl0ZShzLCAocy5nemhlYWQudGltZSA+PiAxNikgJiAweGZmKTsKICAgICAgICBwdXRfYnl0ZShzLCAocy5nemhlYWQudGltZSA+PiAyNCkgJiAweGZmKTsKICAgICAgICBwdXRfYnl0ZShzLCBzLmxldmVsID09PSA5ID8gMiA6CiAgICAgICAgICAgICAgICAgICAgKHMuc3RyYXRlZ3kgPj0gWl9IVUZGTUFOX09OTFkgfHwgcy5sZXZlbCA8IDIgPwogICAgICAgICAgICAgICAgICAgICA0IDogMCkpOwogICAgICAgIHB1dF9ieXRlKHMsIHMuZ3poZWFkLm9zICYgMHhmZik7CiAgICAgICAgaWYgKHMuZ3poZWFkLmV4dHJhICYmIHMuZ3poZWFkLmV4dHJhLmxlbmd0aCkgewogICAgICAgICAgcHV0X2J5dGUocywgcy5nemhlYWQuZXh0cmEubGVuZ3RoICYgMHhmZik7CiAgICAgICAgICBwdXRfYnl0ZShzLCAocy5nemhlYWQuZXh0cmEubGVuZ3RoID4+IDgpICYgMHhmZik7CiAgICAgICAgfQogICAgICAgIGlmIChzLmd6aGVhZC5oY3JjKSB7CiAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzIoc3RybS5hZGxlciwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nLCAwKTsKICAgICAgICB9CiAgICAgICAgcy5nemluZGV4ID0gMDsKICAgICAgICBzLnN0YXR1cyA9IEVYVFJBX1NUQVRFOwogICAgICB9CiAgICB9CiAgICBlbHNlIC8vIERFRkxBVEUgaGVhZGVyCiAgICB7CiAgICAgIHZhciBoZWFkZXIgPSAoWl9ERUZMQVRFRCArICgocy53X2JpdHMgLSA4KSA8PCA0KSkgPDwgODsKICAgICAgdmFyIGxldmVsX2ZsYWdzID0gLTE7CgogICAgICBpZiAocy5zdHJhdGVneSA+PSBaX0hVRkZNQU5fT05MWSB8fCBzLmxldmVsIDwgMikgewogICAgICAgIGxldmVsX2ZsYWdzID0gMDsKICAgICAgfSBlbHNlIGlmIChzLmxldmVsIDwgNikgewogICAgICAgIGxldmVsX2ZsYWdzID0gMTsKICAgICAgfSBlbHNlIGlmIChzLmxldmVsID09PSA2KSB7CiAgICAgICAgbGV2ZWxfZmxhZ3MgPSAyOwogICAgICB9IGVsc2UgewogICAgICAgIGxldmVsX2ZsYWdzID0gMzsKICAgICAgfQogICAgICBoZWFkZXIgfD0gKGxldmVsX2ZsYWdzIDw8IDYpOwogICAgICBpZiAocy5zdHJzdGFydCAhPT0gMCkgeyBoZWFkZXIgfD0gUFJFU0VUX0RJQ1Q7IH0KICAgICAgaGVhZGVyICs9IDMxIC0gKGhlYWRlciAlIDMxKTsKCiAgICAgIHMuc3RhdHVzID0gQlVTWV9TVEFURTsKICAgICAgcHV0U2hvcnRNU0IocywgaGVhZGVyKTsKCiAgICAgIC8qIFNhdmUgdGhlIGFkbGVyMzIgb2YgdGhlIHByZXNldCBkaWN0aW9uYXJ5OiAqLwogICAgICBpZiAocy5zdHJzdGFydCAhPT0gMCkgewogICAgICAgIHB1dFNob3J0TVNCKHMsIHN0cm0uYWRsZXIgPj4+IDE2KTsKICAgICAgICBwdXRTaG9ydE1TQihzLCBzdHJtLmFkbGVyICYgMHhmZmZmKTsKICAgICAgfQogICAgICBzdHJtLmFkbGVyID0gMTsgLy8gYWRsZXIzMigwTCwgWl9OVUxMLCAwKTsKICAgIH0KICB9CgovLyNpZmRlZiBHWklQCiAgaWYgKHMuc3RhdHVzID09PSBFWFRSQV9TVEFURSkgewogICAgaWYgKHMuZ3poZWFkLmV4dHJhLyogIT0gWl9OVUxMKi8pIHsKICAgICAgYmVnID0gcy5wZW5kaW5nOyAgLyogc3RhcnQgb2YgYnl0ZXMgdG8gdXBkYXRlIGNyYyAqLwoKICAgICAgd2hpbGUgKHMuZ3ppbmRleCA8IChzLmd6aGVhZC5leHRyYS5sZW5ndGggJiAweGZmZmYpKSB7CiAgICAgICAgaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7CiAgICAgICAgICBpZiAocy5nemhlYWQuaGNyYyAmJiBzLnBlbmRpbmcgPiBiZWcpIHsKICAgICAgICAgICAgc3RybS5hZGxlciA9IGNyYzMyKHN0cm0uYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGJlZywgYmVnKTsKICAgICAgICAgIH0KICAgICAgICAgIGZsdXNoX3BlbmRpbmcoc3RybSk7CiAgICAgICAgICBiZWcgPSBzLnBlbmRpbmc7CiAgICAgICAgICBpZiAocy5wZW5kaW5nID09PSBzLnBlbmRpbmdfYnVmX3NpemUpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHB1dF9ieXRlKHMsIHMuZ3poZWFkLmV4dHJhW3MuZ3ppbmRleF0gJiAweGZmKTsKICAgICAgICBzLmd6aW5kZXgrKzsKICAgICAgfQogICAgICBpZiAocy5nemhlYWQuaGNyYyAmJiBzLnBlbmRpbmcgPiBiZWcpIHsKICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzIoc3RybS5hZGxlciwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nIC0gYmVnLCBiZWcpOwogICAgICB9CiAgICAgIGlmIChzLmd6aW5kZXggPT09IHMuZ3poZWFkLmV4dHJhLmxlbmd0aCkgewogICAgICAgIHMuZ3ppbmRleCA9IDA7CiAgICAgICAgcy5zdGF0dXMgPSBOQU1FX1NUQVRFOwogICAgICB9CiAgICB9CiAgICBlbHNlIHsKICAgICAgcy5zdGF0dXMgPSBOQU1FX1NUQVRFOwogICAgfQogIH0KICBpZiAocy5zdGF0dXMgPT09IE5BTUVfU1RBVEUpIHsKICAgIGlmIChzLmd6aGVhZC5uYW1lLyogIT0gWl9OVUxMKi8pIHsKICAgICAgYmVnID0gcy5wZW5kaW5nOyAgLyogc3RhcnQgb2YgYnl0ZXMgdG8gdXBkYXRlIGNyYyAqLwogICAgICAvL2ludCB2YWw7CgogICAgICBkbyB7CiAgICAgICAgaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7CiAgICAgICAgICBpZiAocy5nemhlYWQuaGNyYyAmJiBzLnBlbmRpbmcgPiBiZWcpIHsKICAgICAgICAgICAgc3RybS5hZGxlciA9IGNyYzMyKHN0cm0uYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGJlZywgYmVnKTsKICAgICAgICAgIH0KICAgICAgICAgIGZsdXNoX3BlbmRpbmcoc3RybSk7CiAgICAgICAgICBiZWcgPSBzLnBlbmRpbmc7CiAgICAgICAgICBpZiAocy5wZW5kaW5nID09PSBzLnBlbmRpbmdfYnVmX3NpemUpIHsKICAgICAgICAgICAgdmFsID0gMTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIEpTIHNwZWNpZmljOiBsaXR0bGUgbWFnaWMgdG8gYWRkIHplcm8gdGVybWluYXRvciB0byBlbmQgb2Ygc3RyaW5nCiAgICAgICAgaWYgKHMuZ3ppbmRleCA8IHMuZ3poZWFkLm5hbWUubGVuZ3RoKSB7CiAgICAgICAgICB2YWwgPSBzLmd6aGVhZC5uYW1lLmNoYXJDb2RlQXQocy5nemluZGV4KyspICYgMHhmZjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFsID0gMDsKICAgICAgICB9CiAgICAgICAgcHV0X2J5dGUocywgdmFsKTsKICAgICAgfSB3aGlsZSAodmFsICE9PSAwKTsKCiAgICAgIGlmIChzLmd6aGVhZC5oY3JjICYmIHMucGVuZGluZyA+IGJlZykgewogICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMihzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7CiAgICAgIH0KICAgICAgaWYgKHZhbCA9PT0gMCkgewogICAgICAgIHMuZ3ppbmRleCA9IDA7CiAgICAgICAgcy5zdGF0dXMgPSBDT01NRU5UX1NUQVRFOwogICAgICB9CiAgICB9CiAgICBlbHNlIHsKICAgICAgcy5zdGF0dXMgPSBDT01NRU5UX1NUQVRFOwogICAgfQogIH0KICBpZiAocy5zdGF0dXMgPT09IENPTU1FTlRfU1RBVEUpIHsKICAgIGlmIChzLmd6aGVhZC5jb21tZW50LyogIT0gWl9OVUxMKi8pIHsKICAgICAgYmVnID0gcy5wZW5kaW5nOyAgLyogc3RhcnQgb2YgYnl0ZXMgdG8gdXBkYXRlIGNyYyAqLwogICAgICAvL2ludCB2YWw7CgogICAgICBkbyB7CiAgICAgICAgaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7CiAgICAgICAgICBpZiAocy5nemhlYWQuaGNyYyAmJiBzLnBlbmRpbmcgPiBiZWcpIHsKICAgICAgICAgICAgc3RybS5hZGxlciA9IGNyYzMyKHN0cm0uYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGJlZywgYmVnKTsKICAgICAgICAgIH0KICAgICAgICAgIGZsdXNoX3BlbmRpbmcoc3RybSk7CiAgICAgICAgICBiZWcgPSBzLnBlbmRpbmc7CiAgICAgICAgICBpZiAocy5wZW5kaW5nID09PSBzLnBlbmRpbmdfYnVmX3NpemUpIHsKICAgICAgICAgICAgdmFsID0gMTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIEpTIHNwZWNpZmljOiBsaXR0bGUgbWFnaWMgdG8gYWRkIHplcm8gdGVybWluYXRvciB0byBlbmQgb2Ygc3RyaW5nCiAgICAgICAgaWYgKHMuZ3ppbmRleCA8IHMuZ3poZWFkLmNvbW1lbnQubGVuZ3RoKSB7CiAgICAgICAgICB2YWwgPSBzLmd6aGVhZC5jb21tZW50LmNoYXJDb2RlQXQocy5nemluZGV4KyspICYgMHhmZjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFsID0gMDsKICAgICAgICB9CiAgICAgICAgcHV0X2J5dGUocywgdmFsKTsKICAgICAgfSB3aGlsZSAodmFsICE9PSAwKTsKCiAgICAgIGlmIChzLmd6aGVhZC5oY3JjICYmIHMucGVuZGluZyA+IGJlZykgewogICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMihzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7CiAgICAgIH0KICAgICAgaWYgKHZhbCA9PT0gMCkgewogICAgICAgIHMuc3RhdHVzID0gSENSQ19TVEFURTsKICAgICAgfQogICAgfQogICAgZWxzZSB7CiAgICAgIHMuc3RhdHVzID0gSENSQ19TVEFURTsKICAgIH0KICB9CiAgaWYgKHMuc3RhdHVzID09PSBIQ1JDX1NUQVRFKSB7CiAgICBpZiAocy5nemhlYWQuaGNyYykgewogICAgICBpZiAocy5wZW5kaW5nICsgMiA+IHMucGVuZGluZ19idWZfc2l6ZSkgewogICAgICAgIGZsdXNoX3BlbmRpbmcoc3RybSk7CiAgICAgIH0KICAgICAgaWYgKHMucGVuZGluZyArIDIgPD0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7CiAgICAgICAgcHV0X2J5dGUocywgc3RybS5hZGxlciAmIDB4ZmYpOwogICAgICAgIHB1dF9ieXRlKHMsIChzdHJtLmFkbGVyID4+IDgpICYgMHhmZik7CiAgICAgICAgc3RybS5hZGxlciA9IDA7IC8vY3JjMzIoMEwsIFpfTlVMTCwgMCk7CiAgICAgICAgcy5zdGF0dXMgPSBCVVNZX1NUQVRFOwogICAgICB9CiAgICB9CiAgICBlbHNlIHsKICAgICAgcy5zdGF0dXMgPSBCVVNZX1NUQVRFOwogICAgfQogIH0KLy8jZW5kaWYKCiAgLyogRmx1c2ggYXMgbXVjaCBwZW5kaW5nIG91dHB1dCBhcyBwb3NzaWJsZSAqLwogIGlmIChzLnBlbmRpbmcgIT09IDApIHsKICAgIGZsdXNoX3BlbmRpbmcoc3RybSk7CiAgICBpZiAoc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgLyogU2luY2UgYXZhaWxfb3V0IGlzIDAsIGRlZmxhdGUgd2lsbCBiZSBjYWxsZWQgYWdhaW4gd2l0aAogICAgICAgKiBtb3JlIG91dHB1dCBzcGFjZSwgYnV0IHBvc3NpYmx5IHdpdGggYm90aCBwZW5kaW5nIGFuZAogICAgICAgKiBhdmFpbF9pbiBlcXVhbCB0byB6ZXJvLiBUaGVyZSB3b24ndCBiZSBhbnl0aGluZyB0byBkbywKICAgICAgICogYnV0IHRoaXMgaXMgbm90IGFuIGVycm9yIHNpdHVhdGlvbiBzbyBtYWtlIHN1cmUgd2UKICAgICAgICogcmV0dXJuIE9LIGluc3RlYWQgb2YgQlVGX0VSUk9SIGF0IG5leHQgY2FsbCBvZiBkZWZsYXRlOgogICAgICAgKi8KICAgICAgcy5sYXN0X2ZsdXNoID0gLTE7CiAgICAgIHJldHVybiBaX09LOwogICAgfQoKICAgIC8qIE1ha2Ugc3VyZSB0aGVyZSBpcyBzb21ldGhpbmcgdG8gZG8gYW5kIGF2b2lkIGR1cGxpY2F0ZSBjb25zZWN1dGl2ZQogICAgICogZmx1c2hlcy4gRm9yIHJlcGVhdGVkIGFuZCB1c2VsZXNzIGNhbGxzIHdpdGggWl9GSU5JU0gsIHdlIGtlZXAKICAgICAqIHJldHVybmluZyBaX1NUUkVBTV9FTkQgaW5zdGVhZCBvZiBaX0JVRl9FUlJPUi4KICAgICAqLwogIH0gZWxzZSBpZiAoc3RybS5hdmFpbF9pbiA9PT0gMCAmJiByYW5rKGZsdXNoKSA8PSByYW5rKG9sZF9mbHVzaCkgJiYKICAgIGZsdXNoICE9PSBaX0ZJTklTSCkgewogICAgcmV0dXJuIGVycihzdHJtLCBaX0JVRl9FUlJPUik7CiAgfQoKICAvKiBVc2VyIG11c3Qgbm90IHByb3ZpZGUgbW9yZSBpbnB1dCBhZnRlciB0aGUgZmlyc3QgRklOSVNIOiAqLwogIGlmIChzLnN0YXR1cyA9PT0gRklOSVNIX1NUQVRFICYmIHN0cm0uYXZhaWxfaW4gIT09IDApIHsKICAgIHJldHVybiBlcnIoc3RybSwgWl9CVUZfRVJST1IpOwogIH0KCiAgLyogU3RhcnQgYSBuZXcgYmxvY2sgb3IgY29udGludWUgdGhlIGN1cnJlbnQgb25lLgogICAqLwogIGlmIChzdHJtLmF2YWlsX2luICE9PSAwIHx8IHMubG9va2FoZWFkICE9PSAwIHx8CiAgICAoZmx1c2ggIT09IFpfTk9fRkxVU0ggJiYgcy5zdGF0dXMgIT09IEZJTklTSF9TVEFURSkpIHsKICAgIHZhciBic3RhdGUgPSAocy5zdHJhdGVneSA9PT0gWl9IVUZGTUFOX09OTFkpID8gZGVmbGF0ZV9odWZmKHMsIGZsdXNoKSA6CiAgICAgIChzLnN0cmF0ZWd5ID09PSBaX1JMRSA/IGRlZmxhdGVfcmxlKHMsIGZsdXNoKSA6CiAgICAgICAgY29uZmlndXJhdGlvbl90YWJsZVtzLmxldmVsXS5mdW5jKHMsIGZsdXNoKSk7CgogICAgaWYgKGJzdGF0ZSA9PT0gQlNfRklOSVNIX1NUQVJURUQgfHwgYnN0YXRlID09PSBCU19GSU5JU0hfRE9ORSkgewogICAgICBzLnN0YXR1cyA9IEZJTklTSF9TVEFURTsKICAgIH0KICAgIGlmIChic3RhdGUgPT09IEJTX05FRURfTU9SRSB8fCBic3RhdGUgPT09IEJTX0ZJTklTSF9TVEFSVEVEKSB7CiAgICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHMubGFzdF9mbHVzaCA9IC0xOwogICAgICAgIC8qIGF2b2lkIEJVRl9FUlJPUiBuZXh0IGNhbGwsIHNlZSBhYm92ZSAqLwogICAgICB9CiAgICAgIHJldHVybiBaX09LOwogICAgICAvKiBJZiBmbHVzaCAhPSBaX05PX0ZMVVNIICYmIGF2YWlsX291dCA9PSAwLCB0aGUgbmV4dCBjYWxsCiAgICAgICAqIG9mIGRlZmxhdGUgc2hvdWxkIHVzZSB0aGUgc2FtZSBmbHVzaCBwYXJhbWV0ZXIgdG8gbWFrZSBzdXJlCiAgICAgICAqIHRoYXQgdGhlIGZsdXNoIGlzIGNvbXBsZXRlLiBTbyB3ZSBkb24ndCBoYXZlIHRvIG91dHB1dCBhbgogICAgICAgKiBlbXB0eSBibG9jayBoZXJlLCB0aGlzIHdpbGwgYmUgZG9uZSBhdCBuZXh0IGNhbGwuIFRoaXMgYWxzbwogICAgICAgKiBlbnN1cmVzIHRoYXQgZm9yIGEgdmVyeSBzbWFsbCBvdXRwdXQgYnVmZmVyLCB3ZSBlbWl0IGF0IG1vc3QKICAgICAgICogb25lIGVtcHR5IGJsb2NrLgogICAgICAgKi8KICAgIH0KICAgIGlmIChic3RhdGUgPT09IEJTX0JMT0NLX0RPTkUpIHsKICAgICAgaWYgKGZsdXNoID09PSBaX1BBUlRJQUxfRkxVU0gpIHsKICAgICAgICB0cmVlcy5fdHJfYWxpZ24ocyk7CiAgICAgIH0KICAgICAgZWxzZSBpZiAoZmx1c2ggIT09IFpfQkxPQ0spIHsgLyogRlVMTF9GTFVTSCBvciBTWU5DX0ZMVVNIICovCgogICAgICAgIHRyZWVzLl90cl9zdG9yZWRfYmxvY2socywgMCwgMCwgZmFsc2UpOwogICAgICAgIC8qIEZvciBhIGZ1bGwgZmx1c2gsIHRoaXMgZW1wdHkgYmxvY2sgd2lsbCBiZSByZWNvZ25pemVkCiAgICAgICAgICogYXMgYSBzcGVjaWFsIG1hcmtlciBieSBpbmZsYXRlX3N5bmMoKS4KICAgICAgICAgKi8KICAgICAgICBpZiAoZmx1c2ggPT09IFpfRlVMTF9GTFVTSCkgewogICAgICAgICAgLyoqKiBDTEVBUl9IQVNIKHMpOyAqKiovICAgICAgICAgICAgIC8qIGZvcmdldCBoaXN0b3J5ICovCiAgICAgICAgICB6ZXJvKHMuaGVhZCk7IC8vIEZpbGwgd2l0aCBOSUwgKD0gMCk7CgogICAgICAgICAgaWYgKHMubG9va2FoZWFkID09PSAwKSB7CiAgICAgICAgICAgIHMuc3Ryc3RhcnQgPSAwOwogICAgICAgICAgICBzLmJsb2NrX3N0YXJ0ID0gMDsKICAgICAgICAgICAgcy5pbnNlcnQgPSAwOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pOwogICAgICBpZiAoc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICBzLmxhc3RfZmx1c2ggPSAtMTsgLyogYXZvaWQgQlVGX0VSUk9SIGF0IG5leHQgY2FsbCwgc2VlIGFib3ZlICovCiAgICAgICAgcmV0dXJuIFpfT0s7CiAgICAgIH0KICAgIH0KICB9CiAgLy9Bc3NlcnQoc3RybS0+YXZhaWxfb3V0ID4gMCwgImJ1ZzIiKTsKICAvL2lmIChzdHJtLmF2YWlsX291dCA8PSAwKSB7IHRocm93IG5ldyBFcnJvcigiYnVnMiIpO30KCiAgaWYgKGZsdXNoICE9PSBaX0ZJTklTSCkgeyByZXR1cm4gWl9PSzsgfQogIGlmIChzLndyYXAgPD0gMCkgeyByZXR1cm4gWl9TVFJFQU1fRU5EOyB9CgogIC8qIFdyaXRlIHRoZSB0cmFpbGVyICovCiAgaWYgKHMud3JhcCA9PT0gMikgewogICAgcHV0X2J5dGUocywgc3RybS5hZGxlciAmIDB4ZmYpOwogICAgcHV0X2J5dGUocywgKHN0cm0uYWRsZXIgPj4gOCkgJiAweGZmKTsKICAgIHB1dF9ieXRlKHMsIChzdHJtLmFkbGVyID4+IDE2KSAmIDB4ZmYpOwogICAgcHV0X2J5dGUocywgKHN0cm0uYWRsZXIgPj4gMjQpICYgMHhmZik7CiAgICBwdXRfYnl0ZShzLCBzdHJtLnRvdGFsX2luICYgMHhmZik7CiAgICBwdXRfYnl0ZShzLCAoc3RybS50b3RhbF9pbiA+PiA4KSAmIDB4ZmYpOwogICAgcHV0X2J5dGUocywgKHN0cm0udG90YWxfaW4gPj4gMTYpICYgMHhmZik7CiAgICBwdXRfYnl0ZShzLCAoc3RybS50b3RhbF9pbiA+PiAyNCkgJiAweGZmKTsKICB9CiAgZWxzZQogIHsKICAgIHB1dFNob3J0TVNCKHMsIHN0cm0uYWRsZXIgPj4+IDE2KTsKICAgIHB1dFNob3J0TVNCKHMsIHN0cm0uYWRsZXIgJiAweGZmZmYpOwogIH0KCiAgZmx1c2hfcGVuZGluZyhzdHJtKTsKICAvKiBJZiBhdmFpbF9vdXQgaXMgemVybywgdGhlIGFwcGxpY2F0aW9uIHdpbGwgY2FsbCBkZWZsYXRlIGFnYWluCiAgICogdG8gZmx1c2ggdGhlIHJlc3QuCiAgICovCiAgaWYgKHMud3JhcCA+IDApIHsgcy53cmFwID0gLXMud3JhcDsgfQogIC8qIHdyaXRlIHRoZSB0cmFpbGVyIG9ubHkgb25jZSEgKi8KICByZXR1cm4gcy5wZW5kaW5nICE9PSAwID8gWl9PSyA6IFpfU1RSRUFNX0VORDsKfQoKZnVuY3Rpb24gZGVmbGF0ZUVuZChzdHJtKSB7CiAgdmFyIHN0YXR1czsKCiAgaWYgKCFzdHJtLyo9PSBaX05VTEwqLyB8fCAhc3RybS5zdGF0ZS8qPT0gWl9OVUxMKi8pIHsKICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjsKICB9CgogIHN0YXR1cyA9IHN0cm0uc3RhdGUuc3RhdHVzOwogIGlmIChzdGF0dXMgIT09IElOSVRfU1RBVEUgJiYKICAgIHN0YXR1cyAhPT0gRVhUUkFfU1RBVEUgJiYKICAgIHN0YXR1cyAhPT0gTkFNRV9TVEFURSAmJgogICAgc3RhdHVzICE9PSBDT01NRU5UX1NUQVRFICYmCiAgICBzdGF0dXMgIT09IEhDUkNfU1RBVEUgJiYKICAgIHN0YXR1cyAhPT0gQlVTWV9TVEFURSAmJgogICAgc3RhdHVzICE9PSBGSU5JU0hfU1RBVEUKICApIHsKICAgIHJldHVybiBlcnIoc3RybSwgWl9TVFJFQU1fRVJST1IpOwogIH0KCiAgc3RybS5zdGF0ZSA9IG51bGw7CgogIHJldHVybiBzdGF0dXMgPT09IEJVU1lfU1RBVEUgPyBlcnIoc3RybSwgWl9EQVRBX0VSUk9SKSA6IFpfT0s7Cn0KCgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIEluaXRpYWxpemVzIHRoZSBjb21wcmVzc2lvbiBkaWN0aW9uYXJ5IGZyb20gdGhlIGdpdmVuIGJ5dGUKICogc2VxdWVuY2Ugd2l0aG91dCBwcm9kdWNpbmcgYW55IGNvbXByZXNzZWQgb3V0cHV0LgogKi8KZnVuY3Rpb24gZGVmbGF0ZVNldERpY3Rpb25hcnkoc3RybSwgZGljdGlvbmFyeSkgewogIHZhciBkaWN0TGVuZ3RoID0gZGljdGlvbmFyeS5sZW5ndGg7CgogIHZhciBzOwogIHZhciBzdHIsIG47CiAgdmFyIHdyYXA7CiAgdmFyIGF2YWlsOwogIHZhciBuZXh0OwogIHZhciBpbnB1dDsKICB2YXIgdG1wRGljdDsKCiAgaWYgKCFzdHJtLyo9PSBaX05VTEwqLyB8fCAhc3RybS5zdGF0ZS8qPT0gWl9OVUxMKi8pIHsKICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjsKICB9CgogIHMgPSBzdHJtLnN0YXRlOwogIHdyYXAgPSBzLndyYXA7CgogIGlmICh3cmFwID09PSAyIHx8ICh3cmFwID09PSAxICYmIHMuc3RhdHVzICE9PSBJTklUX1NUQVRFKSB8fCBzLmxvb2thaGVhZCkgewogICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOwogIH0KCiAgLyogd2hlbiB1c2luZyB6bGliIHdyYXBwZXJzLCBjb21wdXRlIEFkbGVyLTMyIGZvciBwcm92aWRlZCBkaWN0aW9uYXJ5ICovCiAgaWYgKHdyYXAgPT09IDEpIHsKICAgIC8qIGFkbGVyMzIoc3RybS0+YWRsZXIsIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgpOyAqLwogICAgc3RybS5hZGxlciA9IGFkbGVyMzIoc3RybS5hZGxlciwgZGljdGlvbmFyeSwgZGljdExlbmd0aCwgMCk7CiAgfQoKICBzLndyYXAgPSAwOyAgIC8qIGF2b2lkIGNvbXB1dGluZyBBZGxlci0zMiBpbiByZWFkX2J1ZiAqLwoKICAvKiBpZiBkaWN0aW9uYXJ5IHdvdWxkIGZpbGwgd2luZG93LCBqdXN0IHJlcGxhY2UgdGhlIGhpc3RvcnkgKi8KICBpZiAoZGljdExlbmd0aCA+PSBzLndfc2l6ZSkgewogICAgaWYgKHdyYXAgPT09IDApIHsgICAgICAgICAgICAvKiBhbHJlYWR5IGVtcHR5IG90aGVyd2lzZSAqLwogICAgICAvKioqIENMRUFSX0hBU0gocyk7ICoqKi8KICAgICAgemVybyhzLmhlYWQpOyAvLyBGaWxsIHdpdGggTklMICg9IDApOwogICAgICBzLnN0cnN0YXJ0ID0gMDsKICAgICAgcy5ibG9ja19zdGFydCA9IDA7CiAgICAgIHMuaW5zZXJ0ID0gMDsKICAgIH0KICAgIC8qIHVzZSB0aGUgdGFpbCAqLwogICAgLy8gZGljdGlvbmFyeSA9IGRpY3Rpb25hcnkuc2xpY2UoZGljdExlbmd0aCAtIHMud19zaXplKTsKICAgIHRtcERpY3QgPSBuZXcgdXRpbHMuQnVmOChzLndfc2l6ZSk7CiAgICB1dGlscy5hcnJheVNldCh0bXBEaWN0LCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoIC0gcy53X3NpemUsIHMud19zaXplLCAwKTsKICAgIGRpY3Rpb25hcnkgPSB0bXBEaWN0OwogICAgZGljdExlbmd0aCA9IHMud19zaXplOwogIH0KICAvKiBpbnNlcnQgZGljdGlvbmFyeSBpbnRvIHdpbmRvdyBhbmQgaGFzaCAqLwogIGF2YWlsID0gc3RybS5hdmFpbF9pbjsKICBuZXh0ID0gc3RybS5uZXh0X2luOwogIGlucHV0ID0gc3RybS5pbnB1dDsKICBzdHJtLmF2YWlsX2luID0gZGljdExlbmd0aDsKICBzdHJtLm5leHRfaW4gPSAwOwogIHN0cm0uaW5wdXQgPSBkaWN0aW9uYXJ5OwogIGZpbGxfd2luZG93KHMpOwogIHdoaWxlIChzLmxvb2thaGVhZCA+PSBNSU5fTUFUQ0gpIHsKICAgIHN0ciA9IHMuc3Ryc3RhcnQ7CiAgICBuID0gcy5sb29rYWhlYWQgLSAoTUlOX01BVENIIC0gMSk7CiAgICBkbyB7CiAgICAgIC8qIFVQREFURV9IQVNIKHMsIHMtPmluc19oLCBzLT53aW5kb3dbc3RyICsgTUlOX01BVENILTFdKTsgKi8KICAgICAgcy5pbnNfaCA9ICgocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQpIF4gcy53aW5kb3dbc3RyICsgTUlOX01BVENIIC0gMV0pICYgcy5oYXNoX21hc2s7CgogICAgICBzLnByZXZbc3RyICYgcy53X21hc2tdID0gcy5oZWFkW3MuaW5zX2hdOwoKICAgICAgcy5oZWFkW3MuaW5zX2hdID0gc3RyOwogICAgICBzdHIrKzsKICAgIH0gd2hpbGUgKC0tbik7CiAgICBzLnN0cnN0YXJ0ID0gc3RyOwogICAgcy5sb29rYWhlYWQgPSBNSU5fTUFUQ0ggLSAxOwogICAgZmlsbF93aW5kb3cocyk7CiAgfQogIHMuc3Ryc3RhcnQgKz0gcy5sb29rYWhlYWQ7CiAgcy5ibG9ja19zdGFydCA9IHMuc3Ryc3RhcnQ7CiAgcy5pbnNlcnQgPSBzLmxvb2thaGVhZDsKICBzLmxvb2thaGVhZCA9IDA7CiAgcy5tYXRjaF9sZW5ndGggPSBzLnByZXZfbGVuZ3RoID0gTUlOX01BVENIIC0gMTsKICBzLm1hdGNoX2F2YWlsYWJsZSA9IDA7CiAgc3RybS5uZXh0X2luID0gbmV4dDsKICBzdHJtLmlucHV0ID0gaW5wdXQ7CiAgc3RybS5hdmFpbF9pbiA9IGF2YWlsOwogIHMud3JhcCA9IHdyYXA7CiAgcmV0dXJuIFpfT0s7Cn0KCgpleHBvcnRzLmRlZmxhdGVJbml0ID0gZGVmbGF0ZUluaXQ7CmV4cG9ydHMuZGVmbGF0ZUluaXQyID0gZGVmbGF0ZUluaXQyOwpleHBvcnRzLmRlZmxhdGVSZXNldCA9IGRlZmxhdGVSZXNldDsKZXhwb3J0cy5kZWZsYXRlUmVzZXRLZWVwID0gZGVmbGF0ZVJlc2V0S2VlcDsKZXhwb3J0cy5kZWZsYXRlU2V0SGVhZGVyID0gZGVmbGF0ZVNldEhlYWRlcjsKZXhwb3J0cy5kZWZsYXRlID0gZGVmbGF0ZTsKZXhwb3J0cy5kZWZsYXRlRW5kID0gZGVmbGF0ZUVuZDsKZXhwb3J0cy5kZWZsYXRlU2V0RGljdGlvbmFyeSA9IGRlZmxhdGVTZXREaWN0aW9uYXJ5OwpleHBvcnRzLmRlZmxhdGVJbmZvID0gJ3Bha28gZGVmbGF0ZSAoZnJvbSBOb2RlY2EgcHJvamVjdCknOwoKLyogTm90IGltcGxlbWVudGVkCmV4cG9ydHMuZGVmbGF0ZUJvdW5kID0gZGVmbGF0ZUJvdW5kOwpleHBvcnRzLmRlZmxhdGVDb3B5ID0gZGVmbGF0ZUNvcHk7CmV4cG9ydHMuZGVmbGF0ZVBhcmFtcyA9IGRlZmxhdGVQYXJhbXM7CmV4cG9ydHMuZGVmbGF0ZVBlbmRpbmcgPSBkZWZsYXRlUGVuZGluZzsKZXhwb3J0cy5kZWZsYXRlUHJpbWUgPSBkZWZsYXRlUHJpbWU7CmV4cG9ydHMuZGVmbGF0ZVR1bmUgPSBkZWZsYXRlVHVuZTsKKi8KCn0seyIuLi91dGlscy9jb21tb24iOjQxLCIuL2FkbGVyMzIiOjQzLCIuL2NyYzMyIjo0NSwiLi9tZXNzYWdlcyI6NTEsIi4vdHJlZXMiOjUyfV0sNDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgovLyAoQykgMTk5NS0yMDEzIEplYW4tbG91cCBHYWlsbHkgYW5kIE1hcmsgQWRsZXIKLy8gKEMpIDIwMTQtMjAxNyBWaXRhbHkgUHV6cmluIGFuZCBBbmRyZXkgVHVwaXRzaW4KLy8KLy8gVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQKLy8gd2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzCi8vIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuCi8vCi8vIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLAovLyBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0Ci8vIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoKLy8KLy8gMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKLy8gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQovLyAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQovLyAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuCi8vIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCi8vICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgovLyAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKZnVuY3Rpb24gR1poZWFkZXIoKSB7CiAgLyogdHJ1ZSBpZiBjb21wcmVzc2VkIGRhdGEgYmVsaWV2ZWQgdG8gYmUgdGV4dCAqLwogIHRoaXMudGV4dCAgICAgICA9IDA7CiAgLyogbW9kaWZpY2F0aW9uIHRpbWUgKi8KICB0aGlzLnRpbWUgICAgICAgPSAwOwogIC8qIGV4dHJhIGZsYWdzIChub3QgdXNlZCB3aGVuIHdyaXRpbmcgYSBnemlwIGZpbGUpICovCiAgdGhpcy54ZmxhZ3MgICAgID0gMDsKICAvKiBvcGVyYXRpbmcgc3lzdGVtICovCiAgdGhpcy5vcyAgICAgICAgID0gMDsKICAvKiBwb2ludGVyIHRvIGV4dHJhIGZpZWxkIG9yIFpfTlVMTCBpZiBub25lICovCiAgdGhpcy5leHRyYSAgICAgID0gbnVsbDsKICAvKiBleHRyYSBmaWVsZCBsZW5ndGggKHZhbGlkIGlmIGV4dHJhICE9IFpfTlVMTCkgKi8KICB0aGlzLmV4dHJhX2xlbiAgPSAwOyAvLyBBY3R1YWxseSwgd2UgZG9uJ3QgbmVlZCBpdCBpbiBKUywKICAgICAgICAgICAgICAgICAgICAgICAvLyBidXQgbGVhdmUgZm9yIGZldyBjb2RlIG1vZGlmaWNhdGlvbnMKCiAgLy8KICAvLyBTZXR1cCBsaW1pdHMgaXMgbm90IG5lY2Vzc2FyeSBiZWNhdXNlIGluIGpzIHdlIHNob3VsZCBub3QgcHJlYWxsb2NhdGUgbWVtb3J5CiAgLy8gZm9yIGluZmxhdGUgdXNlIGNvbnN0YW50IGxpbWl0IGluIDY1NTM2IGJ5dGVzCiAgLy8KCiAgLyogc3BhY2UgYXQgZXh0cmEgKG9ubHkgd2hlbiByZWFkaW5nIGhlYWRlcikgKi8KICAvLyB0aGlzLmV4dHJhX21heCAgPSAwOwogIC8qIHBvaW50ZXIgdG8gemVyby10ZXJtaW5hdGVkIGZpbGUgbmFtZSBvciBaX05VTEwgKi8KICB0aGlzLm5hbWUgICAgICAgPSAnJzsKICAvKiBzcGFjZSBhdCBuYW1lIChvbmx5IHdoZW4gcmVhZGluZyBoZWFkZXIpICovCiAgLy8gdGhpcy5uYW1lX21heCAgID0gMDsKICAvKiBwb2ludGVyIHRvIHplcm8tdGVybWluYXRlZCBjb21tZW50IG9yIFpfTlVMTCAqLwogIHRoaXMuY29tbWVudCAgICA9ICcnOwogIC8qIHNwYWNlIGF0IGNvbW1lbnQgKG9ubHkgd2hlbiByZWFkaW5nIGhlYWRlcikgKi8KICAvLyB0aGlzLmNvbW1fbWF4ICAgPSAwOwogIC8qIHRydWUgaWYgdGhlcmUgd2FzIG9yIHdpbGwgYmUgYSBoZWFkZXIgY3JjICovCiAgdGhpcy5oY3JjICAgICAgID0gMDsKICAvKiB0cnVlIHdoZW4gZG9uZSByZWFkaW5nIGd6aXAgaGVhZGVyIChub3QgdXNlZCB3aGVuIHdyaXRpbmcgYSBnemlwIGZpbGUpICovCiAgdGhpcy5kb25lICAgICAgID0gZmFsc2U7Cn0KCm1vZHVsZS5leHBvcnRzID0gR1poZWFkZXI7Cgp9LHt9XSw0ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCi8vIChDKSAxOTk1LTIwMTMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlcgovLyAoQykgMjAxNC0yMDE3IFZpdGFseSBQdXpyaW4gYW5kIEFuZHJleSBUdXBpdHNpbgovLwovLyBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZAovLyB3YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMKLy8gYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4KLy8KLy8gUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsCi8vIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQKLy8gZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOgovLwovLyAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdAovLyAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlCi8vICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlCi8vICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4KLy8gMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKLy8gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCi8vIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uCgovLyBTZWUgc3RhdGUgZGVmcyBmcm9tIGluZmxhdGUuanMKdmFyIEJBRCA9IDMwOyAgICAgICAvKiBnb3QgYSBkYXRhIGVycm9yIC0tIHJlbWFpbiBoZXJlIHVudGlsIHJlc2V0ICovCnZhciBUWVBFID0gMTI7ICAgICAgLyogaTogd2FpdGluZyBmb3IgdHlwZSBiaXRzLCBpbmNsdWRpbmcgbGFzdC1mbGFnIGJpdCAqLwoKLyoKICAgRGVjb2RlIGxpdGVyYWwsIGxlbmd0aCwgYW5kIGRpc3RhbmNlIGNvZGVzIGFuZCB3cml0ZSBvdXQgdGhlIHJlc3VsdGluZwogICBsaXRlcmFsIGFuZCBtYXRjaCBieXRlcyB1bnRpbCBlaXRoZXIgbm90IGVub3VnaCBpbnB1dCBvciBvdXRwdXQgaXMKICAgYXZhaWxhYmxlLCBhbiBlbmQtb2YtYmxvY2sgaXMgZW5jb3VudGVyZWQsIG9yIGEgZGF0YSBlcnJvciBpcyBlbmNvdW50ZXJlZC4KICAgV2hlbiBsYXJnZSBlbm91Z2ggaW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIGFyZSBzdXBwbGllZCB0byBpbmZsYXRlKCksIGZvcgogICBleGFtcGxlLCBhIDE2SyBpbnB1dCBidWZmZXIgYW5kIGEgNjRLIG91dHB1dCBidWZmZXIsIG1vcmUgdGhhbiA5NSUgb2YgdGhlCiAgIGluZmxhdGUgZXhlY3V0aW9uIHRpbWUgaXMgc3BlbnQgaW4gdGhpcyByb3V0aW5lLgoKICAgRW50cnkgYXNzdW1wdGlvbnM6CgogICAgICAgIHN0YXRlLm1vZGUgPT09IExFTgogICAgICAgIHN0cm0uYXZhaWxfaW4gPj0gNgogICAgICAgIHN0cm0uYXZhaWxfb3V0ID49IDI1OAogICAgICAgIHN0YXJ0ID49IHN0cm0uYXZhaWxfb3V0CiAgICAgICAgc3RhdGUuYml0cyA8IDgKCiAgIE9uIHJldHVybiwgc3RhdGUubW9kZSBpcyBvbmUgb2Y6CgogICAgICAgIExFTiAtLSByYW4gb3V0IG9mIGVub3VnaCBvdXRwdXQgc3BhY2Ugb3IgZW5vdWdoIGF2YWlsYWJsZSBpbnB1dAogICAgICAgIFRZUEUgLS0gcmVhY2hlZCBlbmQgb2YgYmxvY2sgY29kZSwgaW5mbGF0ZSgpIHRvIGludGVycHJldCBuZXh0IGJsb2NrCiAgICAgICAgQkFEIC0tIGVycm9yIGluIGJsb2NrIGRhdGEKCiAgIE5vdGVzOgoKICAgIC0gVGhlIG1heGltdW0gaW5wdXQgYml0cyB1c2VkIGJ5IGEgbGVuZ3RoL2Rpc3RhbmNlIHBhaXIgaXMgMTUgYml0cyBmb3IgdGhlCiAgICAgIGxlbmd0aCBjb2RlLCA1IGJpdHMgZm9yIHRoZSBsZW5ndGggZXh0cmEsIDE1IGJpdHMgZm9yIHRoZSBkaXN0YW5jZSBjb2RlLAogICAgICBhbmQgMTMgYml0cyBmb3IgdGhlIGRpc3RhbmNlIGV4dHJhLiAgVGhpcyB0b3RhbHMgNDggYml0cywgb3Igc2l4IGJ5dGVzLgogICAgICBUaGVyZWZvcmUgaWYgc3RybS5hdmFpbF9pbiA+PSA2LCB0aGVuIHRoZXJlIGlzIGVub3VnaCBpbnB1dCB0byBhdm9pZAogICAgICBjaGVja2luZyBmb3IgYXZhaWxhYmxlIGlucHV0IHdoaWxlIGRlY29kaW5nLgoKICAgIC0gVGhlIG1heGltdW0gYnl0ZXMgdGhhdCBhIHNpbmdsZSBsZW5ndGgvZGlzdGFuY2UgcGFpciBjYW4gb3V0cHV0IGlzIDI1OAogICAgICBieXRlcywgd2hpY2ggaXMgdGhlIG1heGltdW0gbGVuZ3RoIHRoYXQgY2FuIGJlIGNvZGVkLiAgaW5mbGF0ZV9mYXN0KCkKICAgICAgcmVxdWlyZXMgc3RybS5hdmFpbF9vdXQgPj0gMjU4IGZvciBlYWNoIGxvb3AgdG8gYXZvaWQgY2hlY2tpbmcgZm9yCiAgICAgIG91dHB1dCBzcGFjZS4KICovCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5mbGF0ZV9mYXN0KHN0cm0sIHN0YXJ0KSB7CiAgdmFyIHN0YXRlOwogIHZhciBfaW47ICAgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLmlucHV0ICovCiAgdmFyIGxhc3Q7ICAgICAgICAgICAgICAgICAgIC8qIGhhdmUgZW5vdWdoIGlucHV0IHdoaWxlIGluIDwgbGFzdCAqLwogIHZhciBfb3V0OyAgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLm91dHB1dCAqLwogIHZhciBiZWc7ICAgICAgICAgICAgICAgICAgICAvKiBpbmZsYXRlKCkncyBpbml0aWFsIHN0cm0ub3V0cHV0ICovCiAgdmFyIGVuZDsgICAgICAgICAgICAgICAgICAgIC8qIHdoaWxlIG91dCA8IGVuZCwgZW5vdWdoIHNwYWNlIGF2YWlsYWJsZSAqLwovLyNpZmRlZiBJTkZMQVRFX1NUUklDVAogIHZhciBkbWF4OyAgICAgICAgICAgICAgICAgICAvKiBtYXhpbXVtIGRpc3RhbmNlIGZyb20gemxpYiBoZWFkZXIgKi8KLy8jZW5kaWYKICB2YXIgd3NpemU7ICAgICAgICAgICAgICAgICAgLyogd2luZG93IHNpemUgb3IgemVybyBpZiBub3QgdXNpbmcgd2luZG93ICovCiAgdmFyIHdoYXZlOyAgICAgICAgICAgICAgICAgIC8qIHZhbGlkIGJ5dGVzIGluIHRoZSB3aW5kb3cgKi8KICB2YXIgd25leHQ7ICAgICAgICAgICAgICAgICAgLyogd2luZG93IHdyaXRlIGluZGV4ICovCiAgLy8gVXNlIGBzX3dpbmRvd2AgaW5zdGVhZCBgd2luZG93YCwgYXZvaWQgY29uZmxpY3Qgd2l0aCBpbnN0cnVtZW50YXRpb24gdG9vbHMKICB2YXIgc193aW5kb3c7ICAgICAgICAgICAgICAgLyogYWxsb2NhdGVkIHNsaWRpbmcgd2luZG93LCBpZiB3c2l6ZSAhPSAwICovCiAgdmFyIGhvbGQ7ICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0uaG9sZCAqLwogIHZhciBiaXRzOyAgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLmJpdHMgKi8KICB2YXIgbGNvZGU7ICAgICAgICAgICAgICAgICAgLyogbG9jYWwgc3RybS5sZW5jb2RlICovCiAgdmFyIGRjb2RlOyAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0uZGlzdGNvZGUgKi8KICB2YXIgbG1hc2s7ICAgICAgICAgICAgICAgICAgLyogbWFzayBmb3IgZmlyc3QgbGV2ZWwgb2YgbGVuZ3RoIGNvZGVzICovCiAgdmFyIGRtYXNrOyAgICAgICAgICAgICAgICAgIC8qIG1hc2sgZm9yIGZpcnN0IGxldmVsIG9mIGRpc3RhbmNlIGNvZGVzICovCiAgdmFyIGhlcmU7ICAgICAgICAgICAgICAgICAgIC8qIHJldHJpZXZlZCB0YWJsZSBlbnRyeSAqLwogIHZhciBvcDsgICAgICAgICAgICAgICAgICAgICAvKiBjb2RlIGJpdHMsIG9wZXJhdGlvbiwgZXh0cmEgYml0cywgb3IgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIHdpbmRvdyBwb3NpdGlvbiwgd2luZG93IGJ5dGVzIHRvIGNvcHkgKi8KICB2YXIgbGVuOyAgICAgICAgICAgICAgICAgICAgLyogbWF0Y2ggbGVuZ3RoLCB1bnVzZWQgYnl0ZXMgKi8KICB2YXIgZGlzdDsgICAgICAgICAgICAgICAgICAgLyogbWF0Y2ggZGlzdGFuY2UgKi8KICB2YXIgZnJvbTsgICAgICAgICAgICAgICAgICAgLyogd2hlcmUgdG8gY29weSBtYXRjaCBmcm9tICovCiAgdmFyIGZyb21fc291cmNlOwoKCiAgdmFyIGlucHV0LCBvdXRwdXQ7IC8vIEpTIHNwZWNpZmljLCBiZWNhdXNlIHdlIGhhdmUgbm8gcG9pbnRlcnMKCiAgLyogY29weSBzdGF0ZSB0byBsb2NhbCB2YXJpYWJsZXMgKi8KICBzdGF0ZSA9IHN0cm0uc3RhdGU7CiAgLy9oZXJlID0gc3RhdGUuaGVyZTsKICBfaW4gPSBzdHJtLm5leHRfaW47CiAgaW5wdXQgPSBzdHJtLmlucHV0OwogIGxhc3QgPSBfaW4gKyAoc3RybS5hdmFpbF9pbiAtIDUpOwogIF9vdXQgPSBzdHJtLm5leHRfb3V0OwogIG91dHB1dCA9IHN0cm0ub3V0cHV0OwogIGJlZyA9IF9vdXQgLSAoc3RhcnQgLSBzdHJtLmF2YWlsX291dCk7CiAgZW5kID0gX291dCArIChzdHJtLmF2YWlsX291dCAtIDI1Nyk7Ci8vI2lmZGVmIElORkxBVEVfU1RSSUNUCiAgZG1heCA9IHN0YXRlLmRtYXg7Ci8vI2VuZGlmCiAgd3NpemUgPSBzdGF0ZS53c2l6ZTsKICB3aGF2ZSA9IHN0YXRlLndoYXZlOwogIHduZXh0ID0gc3RhdGUud25leHQ7CiAgc193aW5kb3cgPSBzdGF0ZS53aW5kb3c7CiAgaG9sZCA9IHN0YXRlLmhvbGQ7CiAgYml0cyA9IHN0YXRlLmJpdHM7CiAgbGNvZGUgPSBzdGF0ZS5sZW5jb2RlOwogIGRjb2RlID0gc3RhdGUuZGlzdGNvZGU7CiAgbG1hc2sgPSAoMSA8PCBzdGF0ZS5sZW5iaXRzKSAtIDE7CiAgZG1hc2sgPSAoMSA8PCBzdGF0ZS5kaXN0Yml0cykgLSAxOwoKCiAgLyogZGVjb2RlIGxpdGVyYWxzIGFuZCBsZW5ndGgvZGlzdGFuY2VzIHVudGlsIGVuZC1vZi1ibG9jayBvciBub3QgZW5vdWdoCiAgICAgaW5wdXQgZGF0YSBvciBvdXRwdXQgc3BhY2UgKi8KCiAgdG9wOgogIGRvIHsKICAgIGlmIChiaXRzIDwgMTUpIHsKICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0czsKICAgICAgYml0cyArPSA4OwogICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzOwogICAgICBiaXRzICs9IDg7CiAgICB9CgogICAgaGVyZSA9IGxjb2RlW2hvbGQgJiBsbWFza107CgogICAgZG9sZW46CiAgICBmb3IgKDs7KSB7IC8vIEdvdG8gZW11bGF0aW9uCiAgICAgIG9wID0gaGVyZSA+Pj4gMjQvKmhlcmUuYml0cyovOwogICAgICBob2xkID4+Pj0gb3A7CiAgICAgIGJpdHMgLT0gb3A7CiAgICAgIG9wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmYvKmhlcmUub3AqLzsKICAgICAgaWYgKG9wID09PSAwKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBsaXRlcmFsICovCiAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIGhlcmUudmFsID49IDB4MjAgJiYgaGVyZS52YWwgPCAweDdmID8KICAgICAgICAvLyAgICAgICAgImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAnJWMnXG4iIDoKICAgICAgICAvLyAgICAgICAgImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAweCUwMnhcbiIsIGhlcmUudmFsKSk7CiAgICAgICAgb3V0cHV0W19vdXQrK10gPSBoZXJlICYgMHhmZmZmLypoZXJlLnZhbCovOwogICAgICB9CiAgICAgIGVsc2UgaWYgKG9wICYgMTYpIHsgICAgICAgICAgICAgICAgICAgICAvKiBsZW5ndGggYmFzZSAqLwogICAgICAgIGxlbiA9IGhlcmUgJiAweGZmZmYvKmhlcmUudmFsKi87CiAgICAgICAgb3AgJj0gMTU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGV4dHJhIGJpdHMgKi8KICAgICAgICBpZiAob3ApIHsKICAgICAgICAgIGlmIChiaXRzIDwgb3ApIHsKICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0czsKICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgfQogICAgICAgICAgbGVuICs9IGhvbGQgJiAoKDEgPDwgb3ApIC0gMSk7CiAgICAgICAgICBob2xkID4+Pj0gb3A7CiAgICAgICAgICBiaXRzIC09IG9wOwogICAgICAgIH0KICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgImluZmxhdGU6ICAgICAgICAgbGVuZ3RoICV1XG4iLCBsZW4pKTsKICAgICAgICBpZiAoYml0cyA8IDE1KSB7CiAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzOwogICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0czsKICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICB9CiAgICAgICAgaGVyZSA9IGRjb2RlW2hvbGQgJiBkbWFza107CgogICAgICAgIGRvZGlzdDoKICAgICAgICBmb3IgKDs7KSB7IC8vIGdvdG8gZW11bGF0aW9uCiAgICAgICAgICBvcCA9IGhlcmUgPj4+IDI0LypoZXJlLmJpdHMqLzsKICAgICAgICAgIGhvbGQgPj4+PSBvcDsKICAgICAgICAgIGJpdHMgLT0gb3A7CiAgICAgICAgICBvcCA9IChoZXJlID4+PiAxNikgJiAweGZmLypoZXJlLm9wKi87CgogICAgICAgICAgaWYgKG9wICYgMTYpIHsgICAgICAgICAgICAgICAgICAgICAgLyogZGlzdGFuY2UgYmFzZSAqLwogICAgICAgICAgICBkaXN0ID0gaGVyZSAmIDB4ZmZmZi8qaGVyZS52YWwqLzsKICAgICAgICAgICAgb3AgJj0gMTU7ICAgICAgICAgICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgZXh0cmEgYml0cyAqLwogICAgICAgICAgICBpZiAoYml0cyA8IG9wKSB7CiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0czsKICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgaWYgKGJpdHMgPCBvcCkgewogICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0czsKICAgICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGlzdCArPSBob2xkICYgKCgxIDw8IG9wKSAtIDEpOwovLyNpZmRlZiBJTkZMQVRFX1NUUklDVAogICAgICAgICAgICBpZiAoZGlzdCA+IGRtYXgpIHsKICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayc7CiAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgICBicmVhayB0b3A7CiAgICAgICAgICAgIH0KLy8jZW5kaWYKICAgICAgICAgICAgaG9sZCA+Pj49IG9wOwogICAgICAgICAgICBiaXRzIC09IG9wOwogICAgICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgImluZmxhdGU6ICAgICAgICAgZGlzdGFuY2UgJXVcbiIsIGRpc3QpKTsKICAgICAgICAgICAgb3AgPSBfb3V0IC0gYmVnOyAgICAgICAgICAgICAgICAvKiBtYXggZGlzdGFuY2UgaW4gb3V0cHV0ICovCiAgICAgICAgICAgIGlmIChkaXN0ID4gb3ApIHsgICAgICAgICAgICAgICAgLyogc2VlIGlmIGNvcHkgZnJvbSB3aW5kb3cgKi8KICAgICAgICAgICAgICBvcCA9IGRpc3QgLSBvcDsgICAgICAgICAgICAgICAvKiBkaXN0YW5jZSBiYWNrIGluIHdpbmRvdyAqLwogICAgICAgICAgICAgIGlmIChvcCA+IHdoYXZlKSB7CiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuc2FuZSkgewogICAgICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayc7CiAgICAgICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrIHRvcDsKICAgICAgICAgICAgICAgIH0KCi8vICghKSBUaGlzIGJsb2NrIGlzIGRpc2FibGVkIGluIHpsaWIgZGVmYWlsdHMsCi8vIGRvbid0IGVuYWJsZSBpdCBmb3IgYmluYXJ5IGNvbXBhdGliaWxpdHkKLy8jaWZkZWYgSU5GTEFURV9BTExPV19JTlZBTElEX0RJU1RBTkNFX1RPT0ZBUl9BUlJSCi8vICAgICAgICAgICAgICAgIGlmIChsZW4gPD0gb3AgLSB3aGF2ZSkgewovLyAgICAgICAgICAgICAgICAgIGRvIHsKLy8gICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gMDsKLy8gICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLWxlbik7Ci8vICAgICAgICAgICAgICAgICAgY29udGludWUgdG9wOwovLyAgICAgICAgICAgICAgICB9Ci8vICAgICAgICAgICAgICAgIGxlbiAtPSBvcCAtIHdoYXZlOwovLyAgICAgICAgICAgICAgICBkbyB7Ci8vICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSAwOwovLyAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wID4gd2hhdmUpOwovLyAgICAgICAgICAgICAgICBpZiAob3AgPT09IDApIHsKLy8gICAgICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7Ci8vICAgICAgICAgICAgICAgICAgZG8gewovLyAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTsKLy8gICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLWxlbik7Ci8vICAgICAgICAgICAgICAgICAgY29udGludWUgdG9wOwovLyAgICAgICAgICAgICAgICB9Ci8vI2VuZGlmCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGZyb20gPSAwOyAvLyB3aW5kb3cgaW5kZXgKICAgICAgICAgICAgICBmcm9tX3NvdXJjZSA9IHNfd2luZG93OwogICAgICAgICAgICAgIGlmICh3bmV4dCA9PT0gMCkgeyAgICAgICAgICAgLyogdmVyeSBjb21tb24gY2FzZSAqLwogICAgICAgICAgICAgICAgZnJvbSArPSB3c2l6ZSAtIG9wOwogICAgICAgICAgICAgICAgaWYgKG9wIDwgbGVuKSB7ICAgICAgICAgLyogc29tZSBmcm9tIHdpbmRvdyAqLwogICAgICAgICAgICAgICAgICBsZW4gLT0gb3A7CiAgICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107CiAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3ApOwogICAgICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7ICAvKiByZXN0IGZyb20gb3V0cHV0ICovCiAgICAgICAgICAgICAgICAgIGZyb21fc291cmNlID0gb3V0cHV0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIGlmICh3bmV4dCA8IG9wKSB7ICAgICAgLyogd3JhcCBhcm91bmQgd2luZG93ICovCiAgICAgICAgICAgICAgICBmcm9tICs9IHdzaXplICsgd25leHQgLSBvcDsKICAgICAgICAgICAgICAgIG9wIC09IHduZXh0OwogICAgICAgICAgICAgICAgaWYgKG9wIDwgbGVuKSB7ICAgICAgICAgLyogc29tZSBmcm9tIGVuZCBvZiB3aW5kb3cgKi8KICAgICAgICAgICAgICAgICAgbGVuIC09IG9wOwogICAgICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBzX3dpbmRvd1tmcm9tKytdOwogICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTsKICAgICAgICAgICAgICAgICAgZnJvbSA9IDA7CiAgICAgICAgICAgICAgICAgIGlmICh3bmV4dCA8IGxlbikgeyAgLyogc29tZSBmcm9tIHN0YXJ0IG9mIHdpbmRvdyAqLwogICAgICAgICAgICAgICAgICAgIG9wID0gd25leHQ7CiAgICAgICAgICAgICAgICAgICAgbGVuIC09IG9wOwogICAgICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTsKICAgICAgICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7ICAgICAgLyogcmVzdCBmcm9tIG91dHB1dCAqLwogICAgICAgICAgICAgICAgICAgIGZyb21fc291cmNlID0gb3V0cHV0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAvKiBjb250aWd1b3VzIGluIHdpbmRvdyAqLwogICAgICAgICAgICAgICAgZnJvbSArPSB3bmV4dCAtIG9wOwogICAgICAgICAgICAgICAgaWYgKG9wIDwgbGVuKSB7ICAgICAgICAgLyogc29tZSBmcm9tIHdpbmRvdyAqLwogICAgICAgICAgICAgICAgICBsZW4gLT0gb3A7CiAgICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107CiAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3ApOwogICAgICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7ICAvKiByZXN0IGZyb20gb3V0cHV0ICovCiAgICAgICAgICAgICAgICAgIGZyb21fc291cmNlID0gb3V0cHV0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB3aGlsZSAobGVuID4gMikgewogICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdOwogICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdOwogICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdOwogICAgICAgICAgICAgICAgbGVuIC09IDM7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChsZW4pIHsKICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTsKICAgICAgICAgICAgICAgIGlmIChsZW4gPiAxKSB7CiAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgZnJvbSA9IF9vdXQgLSBkaXN0OyAgICAgICAgICAvKiBjb3B5IGRpcmVjdCBmcm9tIG91dHB1dCAqLwogICAgICAgICAgICAgIGRvIHsgICAgICAgICAgICAgICAgICAgICAgICAvKiBtaW5pbXVtIGxlbmd0aCBpcyB0aHJlZSAqLwogICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTsKICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107CiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tKytdOwogICAgICAgICAgICAgICAgbGVuIC09IDM7CiAgICAgICAgICAgICAgfSB3aGlsZSAobGVuID4gMik7CiAgICAgICAgICAgICAgaWYgKGxlbikgewogICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTsKICAgICAgICAgICAgICAgIGlmIChsZW4gPiAxKSB7CiAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmICgob3AgJiA2NCkgPT09IDApIHsgICAgICAgICAgLyogMm5kIGxldmVsIGRpc3RhbmNlIGNvZGUgKi8KICAgICAgICAgICAgaGVyZSA9IGRjb2RlWyhoZXJlICYgMHhmZmZmKS8qaGVyZS52YWwqLyArIChob2xkICYgKCgxIDw8IG9wKSAtIDEpKV07CiAgICAgICAgICAgIGNvbnRpbnVlIGRvZGlzdDsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIGNvZGUnOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICBicmVhayB0b3A7CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7IC8vIG5lZWQgdG8gZW11bGF0ZSBnb3RvIHZpYSAiY29udGludWUiCiAgICAgICAgfQogICAgICB9CiAgICAgIGVsc2UgaWYgKChvcCAmIDY0KSA9PT0gMCkgeyAgICAgICAgICAgICAgLyogMm5kIGxldmVsIGxlbmd0aCBjb2RlICovCiAgICAgICAgaGVyZSA9IGxjb2RlWyhoZXJlICYgMHhmZmZmKS8qaGVyZS52YWwqLyArIChob2xkICYgKCgxIDw8IG9wKSAtIDEpKV07CiAgICAgICAgY29udGludWUgZG9sZW47CiAgICAgIH0KICAgICAgZWxzZSBpZiAob3AgJiAzMikgeyAgICAgICAgICAgICAgICAgICAgIC8qIGVuZC1vZi1ibG9jayAqLwogICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCAiaW5mbGF0ZTogICAgICAgICBlbmQgb2YgYmxvY2tcbiIpKTsKICAgICAgICBzdGF0ZS5tb2RlID0gVFlQRTsKICAgICAgICBicmVhayB0b3A7CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlJzsKICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgIGJyZWFrIHRvcDsKICAgICAgfQoKICAgICAgYnJlYWs7IC8vIG5lZWQgdG8gZW11bGF0ZSBnb3RvIHZpYSAiY29udGludWUiCiAgICB9CiAgfSB3aGlsZSAoX2luIDwgbGFzdCAmJiBfb3V0IDwgZW5kKTsKCiAgLyogcmV0dXJuIHVudXNlZCBieXRlcyAob24gZW50cnksIGJpdHMgPCA4LCBzbyBpbiB3b24ndCBnbyB0b28gZmFyIGJhY2spICovCiAgbGVuID0gYml0cyA+PiAzOwogIF9pbiAtPSBsZW47CiAgYml0cyAtPSBsZW4gPDwgMzsKICBob2xkICY9ICgxIDw8IGJpdHMpIC0gMTsKCiAgLyogdXBkYXRlIHN0YXRlIGFuZCByZXR1cm4gKi8KICBzdHJtLm5leHRfaW4gPSBfaW47CiAgc3RybS5uZXh0X291dCA9IF9vdXQ7CiAgc3RybS5hdmFpbF9pbiA9IChfaW4gPCBsYXN0ID8gNSArIChsYXN0IC0gX2luKSA6IDUgLSAoX2luIC0gbGFzdCkpOwogIHN0cm0uYXZhaWxfb3V0ID0gKF9vdXQgPCBlbmQgPyAyNTcgKyAoZW5kIC0gX291dCkgOiAyNTcgLSAoX291dCAtIGVuZCkpOwogIHN0YXRlLmhvbGQgPSBob2xkOwogIHN0YXRlLmJpdHMgPSBiaXRzOwogIHJldHVybjsKfTsKCn0se31dLDQ5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKLy8gKEMpIDE5OTUtMjAxMyBKZWFuLWxvdXAgR2FpbGx5IGFuZCBNYXJrIEFkbGVyCi8vIChDKSAyMDE0LTIwMTcgVml0YWx5IFB1enJpbiBhbmQgQW5kcmV5IFR1cGl0c2luCi8vCi8vIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkCi8vIHdhcnJhbnR5LiBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcwovLyBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLgovLwovLyBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwKLy8gaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdAovLyBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6Ci8vCi8vIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90Ci8vICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUKLy8gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUKLy8gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLgovLyAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQovLyAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KLy8gMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4KCnZhciB1dGlscyAgICAgICAgID0gcmVxdWlyZSgnLi4vdXRpbHMvY29tbW9uJyk7CnZhciBhZGxlcjMyICAgICAgID0gcmVxdWlyZSgnLi9hZGxlcjMyJyk7CnZhciBjcmMzMiAgICAgICAgID0gcmVxdWlyZSgnLi9jcmMzMicpOwp2YXIgaW5mbGF0ZV9mYXN0ICA9IHJlcXVpcmUoJy4vaW5mZmFzdCcpOwp2YXIgaW5mbGF0ZV90YWJsZSA9IHJlcXVpcmUoJy4vaW5mdHJlZXMnKTsKCnZhciBDT0RFUyA9IDA7CnZhciBMRU5TID0gMTsKdmFyIERJU1RTID0gMjsKCi8qIFB1YmxpYyBjb25zdGFudHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCgoKLyogQWxsb3dlZCBmbHVzaCB2YWx1ZXM7IHNlZSBkZWZsYXRlKCkgYW5kIGluZmxhdGUoKSBiZWxvdyBmb3IgZGV0YWlscyAqLwovL3ZhciBaX05PX0ZMVVNIICAgICAgPSAwOwovL3ZhciBaX1BBUlRJQUxfRkxVU0ggPSAxOwovL3ZhciBaX1NZTkNfRkxVU0ggICAgPSAyOwovL3ZhciBaX0ZVTExfRkxVU0ggICAgPSAzOwp2YXIgWl9GSU5JU0ggICAgICAgID0gNDsKdmFyIFpfQkxPQ0sgICAgICAgICA9IDU7CnZhciBaX1RSRUVTICAgICAgICAgPSA2OwoKCi8qIFJldHVybiBjb2RlcyBmb3IgdGhlIGNvbXByZXNzaW9uL2RlY29tcHJlc3Npb24gZnVuY3Rpb25zLiBOZWdhdGl2ZSB2YWx1ZXMKICogYXJlIGVycm9ycywgcG9zaXRpdmUgdmFsdWVzIGFyZSB1c2VkIGZvciBzcGVjaWFsIGJ1dCBub3JtYWwgZXZlbnRzLgogKi8KdmFyIFpfT0sgICAgICAgICAgICA9IDA7CnZhciBaX1NUUkVBTV9FTkQgICAgPSAxOwp2YXIgWl9ORUVEX0RJQ1QgICAgID0gMjsKLy92YXIgWl9FUlJOTyAgICAgICAgID0gLTE7CnZhciBaX1NUUkVBTV9FUlJPUiAgPSAtMjsKdmFyIFpfREFUQV9FUlJPUiAgICA9IC0zOwp2YXIgWl9NRU1fRVJST1IgICAgID0gLTQ7CnZhciBaX0JVRl9FUlJPUiAgICAgPSAtNTsKLy92YXIgWl9WRVJTSU9OX0VSUk9SID0gLTY7CgovKiBUaGUgZGVmbGF0ZSBjb21wcmVzc2lvbiBtZXRob2QgKi8KdmFyIFpfREVGTEFURUQgID0gODsKCgovKiBTVEFURVMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKCnZhciAgICBIRUFEID0gMTsgICAgICAgLyogaTogd2FpdGluZyBmb3IgbWFnaWMgaGVhZGVyICovCnZhciAgICBGTEFHUyA9IDI7ICAgICAgLyogaTogd2FpdGluZyBmb3IgbWV0aG9kIGFuZCBmbGFncyAoZ3ppcCkgKi8KdmFyICAgIFRJTUUgPSAzOyAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBtb2RpZmljYXRpb24gdGltZSAoZ3ppcCkgKi8KdmFyICAgIE9TID0gNDsgICAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBleHRyYSBmbGFncyBhbmQgb3BlcmF0aW5nIHN5c3RlbSAoZ3ppcCkgKi8KdmFyICAgIEVYTEVOID0gNTsgICAgICAvKiBpOiB3YWl0aW5nIGZvciBleHRyYSBsZW5ndGggKGd6aXApICovCnZhciAgICBFWFRSQSA9IDY7ICAgICAgLyogaTogd2FpdGluZyBmb3IgZXh0cmEgYnl0ZXMgKGd6aXApICovCnZhciAgICBOQU1FID0gNzsgICAgICAgLyogaTogd2FpdGluZyBmb3IgZW5kIG9mIGZpbGUgbmFtZSAoZ3ppcCkgKi8KdmFyICAgIENPTU1FTlQgPSA4OyAgICAvKiBpOiB3YWl0aW5nIGZvciBlbmQgb2YgY29tbWVudCAoZ3ppcCkgKi8KdmFyICAgIEhDUkMgPSA5OyAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBoZWFkZXIgY3JjIChnemlwKSAqLwp2YXIgICAgRElDVElEID0gMTA7ICAgIC8qIGk6IHdhaXRpbmcgZm9yIGRpY3Rpb25hcnkgY2hlY2sgdmFsdWUgKi8KdmFyICAgIERJQ1QgPSAxMTsgICAgICAvKiB3YWl0aW5nIGZvciBpbmZsYXRlU2V0RGljdGlvbmFyeSgpIGNhbGwgKi8KdmFyICAgICAgICBUWVBFID0gMTI7ICAgICAgLyogaTogd2FpdGluZyBmb3IgdHlwZSBiaXRzLCBpbmNsdWRpbmcgbGFzdC1mbGFnIGJpdCAqLwp2YXIgICAgICAgIFRZUEVETyA9IDEzOyAgICAvKiBpOiBzYW1lLCBidXQgc2tpcCBjaGVjayB0byBleGl0IGluZmxhdGUgb24gbmV3IGJsb2NrICovCnZhciAgICAgICAgU1RPUkVEID0gMTQ7ICAgIC8qIGk6IHdhaXRpbmcgZm9yIHN0b3JlZCBzaXplIChsZW5ndGggYW5kIGNvbXBsZW1lbnQpICovCnZhciAgICAgICAgQ09QWV8gPSAxNTsgICAgIC8qIGkvbzogc2FtZSBhcyBDT1BZIGJlbG93LCBidXQgb25seSBmaXJzdCB0aW1lIGluICovCnZhciAgICAgICAgQ09QWSA9IDE2OyAgICAgIC8qIGkvbzogd2FpdGluZyBmb3IgaW5wdXQgb3Igb3V0cHV0IHRvIGNvcHkgc3RvcmVkIGJsb2NrICovCnZhciAgICAgICAgVEFCTEUgPSAxNzsgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGR5bmFtaWMgYmxvY2sgdGFibGUgbGVuZ3RocyAqLwp2YXIgICAgICAgIExFTkxFTlMgPSAxODsgICAvKiBpOiB3YWl0aW5nIGZvciBjb2RlIGxlbmd0aCBjb2RlIGxlbmd0aHMgKi8KdmFyICAgICAgICBDT0RFTEVOUyA9IDE5OyAgLyogaTogd2FpdGluZyBmb3IgbGVuZ3RoL2xpdCBhbmQgZGlzdGFuY2UgY29kZSBsZW5ndGhzICovCnZhciAgICAgICAgICAgIExFTl8gPSAyMDsgICAgICAvKiBpOiBzYW1lIGFzIExFTiBiZWxvdywgYnV0IG9ubHkgZmlyc3QgdGltZSBpbiAqLwp2YXIgICAgICAgICAgICBMRU4gPSAyMTsgICAgICAgLyogaTogd2FpdGluZyBmb3IgbGVuZ3RoL2xpdC9lb2IgY29kZSAqLwp2YXIgICAgICAgICAgICBMRU5FWFQgPSAyMjsgICAgLyogaTogd2FpdGluZyBmb3IgbGVuZ3RoIGV4dHJhIGJpdHMgKi8KdmFyICAgICAgICAgICAgRElTVCA9IDIzOyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGRpc3RhbmNlIGNvZGUgKi8KdmFyICAgICAgICAgICAgRElTVEVYVCA9IDI0OyAgIC8qIGk6IHdhaXRpbmcgZm9yIGRpc3RhbmNlIGV4dHJhIGJpdHMgKi8KdmFyICAgICAgICAgICAgTUFUQ0ggPSAyNTsgICAgIC8qIG86IHdhaXRpbmcgZm9yIG91dHB1dCBzcGFjZSB0byBjb3B5IHN0cmluZyAqLwp2YXIgICAgICAgICAgICBMSVQgPSAyNjsgICAgICAgLyogbzogd2FpdGluZyBmb3Igb3V0cHV0IHNwYWNlIHRvIHdyaXRlIGxpdGVyYWwgKi8KdmFyICAgIENIRUNLID0gMjc7ICAgICAvKiBpOiB3YWl0aW5nIGZvciAzMi1iaXQgY2hlY2sgdmFsdWUgKi8KdmFyICAgIExFTkdUSCA9IDI4OyAgICAvKiBpOiB3YWl0aW5nIGZvciAzMi1iaXQgbGVuZ3RoIChnemlwKSAqLwp2YXIgICAgRE9ORSA9IDI5OyAgICAgIC8qIGZpbmlzaGVkIGNoZWNrLCBkb25lIC0tIHJlbWFpbiBoZXJlIHVudGlsIHJlc2V0ICovCnZhciAgICBCQUQgPSAzMDsgICAgICAgLyogZ290IGEgZGF0YSBlcnJvciAtLSByZW1haW4gaGVyZSB1bnRpbCByZXNldCAqLwp2YXIgICAgTUVNID0gMzE7ICAgICAgIC8qIGdvdCBhbiBpbmZsYXRlKCkgbWVtb3J5IGVycm9yIC0tIHJlbWFpbiBoZXJlIHVudGlsIHJlc2V0ICovCnZhciAgICBTWU5DID0gMzI7ICAgICAgLyogbG9va2luZyBmb3Igc3luY2hyb25pemF0aW9uIGJ5dGVzIHRvIHJlc3RhcnQgaW5mbGF0ZSgpICovCgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLwoKCgp2YXIgRU5PVUdIX0xFTlMgPSA4NTI7CnZhciBFTk9VR0hfRElTVFMgPSA1OTI7Ci8vdmFyIEVOT1VHSCA9ICAoRU5PVUdIX0xFTlMrRU5PVUdIX0RJU1RTKTsKCnZhciBNQVhfV0JJVFMgPSAxNTsKLyogMzJLIExaNzcgd2luZG93ICovCnZhciBERUZfV0JJVFMgPSBNQVhfV0JJVFM7CgoKZnVuY3Rpb24genN3YXAzMihxKSB7CiAgcmV0dXJuICAoKChxID4+PiAyNCkgJiAweGZmKSArCiAgICAgICAgICAoKHEgPj4+IDgpICYgMHhmZjAwKSArCiAgICAgICAgICAoKHEgJiAweGZmMDApIDw8IDgpICsKICAgICAgICAgICgocSAmIDB4ZmYpIDw8IDI0KSk7Cn0KCgpmdW5jdGlvbiBJbmZsYXRlU3RhdGUoKSB7CiAgdGhpcy5tb2RlID0gMDsgICAgICAgICAgICAgLyogY3VycmVudCBpbmZsYXRlIG1vZGUgKi8KICB0aGlzLmxhc3QgPSBmYWxzZTsgICAgICAgICAgLyogdHJ1ZSBpZiBwcm9jZXNzaW5nIGxhc3QgYmxvY2sgKi8KICB0aGlzLndyYXAgPSAwOyAgICAgICAgICAgICAgLyogYml0IDAgdHJ1ZSBmb3IgemxpYiwgYml0IDEgdHJ1ZSBmb3IgZ3ppcCAqLwogIHRoaXMuaGF2ZWRpY3QgPSBmYWxzZTsgICAgICAvKiB0cnVlIGlmIGRpY3Rpb25hcnkgcHJvdmlkZWQgKi8KICB0aGlzLmZsYWdzID0gMDsgICAgICAgICAgICAgLyogZ3ppcCBoZWFkZXIgbWV0aG9kIGFuZCBmbGFncyAoMCBpZiB6bGliKSAqLwogIHRoaXMuZG1heCA9IDA7ICAgICAgICAgICAgICAvKiB6bGliIGhlYWRlciBtYXggZGlzdGFuY2UgKElORkxBVEVfU1RSSUNUKSAqLwogIHRoaXMuY2hlY2sgPSAwOyAgICAgICAgICAgICAvKiBwcm90ZWN0ZWQgY29weSBvZiBjaGVjayB2YWx1ZSAqLwogIHRoaXMudG90YWwgPSAwOyAgICAgICAgICAgICAvKiBwcm90ZWN0ZWQgY29weSBvZiBvdXRwdXQgY291bnQgKi8KICAvLyBUT0RPOiBtYXkgYmUge30KICB0aGlzLmhlYWQgPSBudWxsOyAgICAgICAgICAgLyogd2hlcmUgdG8gc2F2ZSBnemlwIGhlYWRlciBpbmZvcm1hdGlvbiAqLwoKICAvKiBzbGlkaW5nIHdpbmRvdyAqLwogIHRoaXMud2JpdHMgPSAwOyAgICAgICAgICAgICAvKiBsb2cgYmFzZSAyIG9mIHJlcXVlc3RlZCB3aW5kb3cgc2l6ZSAqLwogIHRoaXMud3NpemUgPSAwOyAgICAgICAgICAgICAvKiB3aW5kb3cgc2l6ZSBvciB6ZXJvIGlmIG5vdCB1c2luZyB3aW5kb3cgKi8KICB0aGlzLndoYXZlID0gMDsgICAgICAgICAgICAgLyogdmFsaWQgYnl0ZXMgaW4gdGhlIHdpbmRvdyAqLwogIHRoaXMud25leHQgPSAwOyAgICAgICAgICAgICAvKiB3aW5kb3cgd3JpdGUgaW5kZXggKi8KICB0aGlzLndpbmRvdyA9IG51bGw7ICAgICAgICAgLyogYWxsb2NhdGVkIHNsaWRpbmcgd2luZG93LCBpZiBuZWVkZWQgKi8KCiAgLyogYml0IGFjY3VtdWxhdG9yICovCiAgdGhpcy5ob2xkID0gMDsgICAgICAgICAgICAgIC8qIGlucHV0IGJpdCBhY2N1bXVsYXRvciAqLwogIHRoaXMuYml0cyA9IDA7ICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgYml0cyBpbiAiaW4iICovCgogIC8qIGZvciBzdHJpbmcgYW5kIHN0b3JlZCBibG9jayBjb3B5aW5nICovCiAgdGhpcy5sZW5ndGggPSAwOyAgICAgICAgICAgIC8qIGxpdGVyYWwgb3IgbGVuZ3RoIG9mIGRhdGEgdG8gY29weSAqLwogIHRoaXMub2Zmc2V0ID0gMDsgICAgICAgICAgICAvKiBkaXN0YW5jZSBiYWNrIHRvIGNvcHkgc3RyaW5nIGZyb20gKi8KCiAgLyogZm9yIHRhYmxlIGFuZCBjb2RlIGRlY29kaW5nICovCiAgdGhpcy5leHRyYSA9IDA7ICAgICAgICAgICAgIC8qIGV4dHJhIGJpdHMgbmVlZGVkICovCgogIC8qIGZpeGVkIGFuZCBkeW5hbWljIGNvZGUgdGFibGVzICovCiAgdGhpcy5sZW5jb2RlID0gbnVsbDsgICAgICAgICAgLyogc3RhcnRpbmcgdGFibGUgZm9yIGxlbmd0aC9saXRlcmFsIGNvZGVzICovCiAgdGhpcy5kaXN0Y29kZSA9IG51bGw7ICAgICAgICAgLyogc3RhcnRpbmcgdGFibGUgZm9yIGRpc3RhbmNlIGNvZGVzICovCiAgdGhpcy5sZW5iaXRzID0gMDsgICAgICAgICAgIC8qIGluZGV4IGJpdHMgZm9yIGxlbmNvZGUgKi8KICB0aGlzLmRpc3RiaXRzID0gMDsgICAgICAgICAgLyogaW5kZXggYml0cyBmb3IgZGlzdGNvZGUgKi8KCiAgLyogZHluYW1pYyB0YWJsZSBidWlsZGluZyAqLwogIHRoaXMubmNvZGUgPSAwOyAgICAgICAgICAgICAvKiBudW1iZXIgb2YgY29kZSBsZW5ndGggY29kZSBsZW5ndGhzICovCiAgdGhpcy5ubGVuID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBsZW5ndGggY29kZSBsZW5ndGhzICovCiAgdGhpcy5uZGlzdCA9IDA7ICAgICAgICAgICAgIC8qIG51bWJlciBvZiBkaXN0YW5jZSBjb2RlIGxlbmd0aHMgKi8KICB0aGlzLmhhdmUgPSAwOyAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGNvZGUgbGVuZ3RocyBpbiBsZW5zW10gKi8KICB0aGlzLm5leHQgPSBudWxsOyAgICAgICAgICAgICAgLyogbmV4dCBhdmFpbGFibGUgc3BhY2UgaW4gY29kZXNbXSAqLwoKICB0aGlzLmxlbnMgPSBuZXcgdXRpbHMuQnVmMTYoMzIwKTsgLyogdGVtcG9yYXJ5IHN0b3JhZ2UgZm9yIGNvZGUgbGVuZ3RocyAqLwogIHRoaXMud29yayA9IG5ldyB1dGlscy5CdWYxNigyODgpOyAvKiB3b3JrIGFyZWEgZm9yIGNvZGUgdGFibGUgYnVpbGRpbmcgKi8KCiAgLyoKICAgYmVjYXVzZSB3ZSBkb24ndCBoYXZlIHBvaW50ZXJzIGluIGpzLCB3ZSB1c2UgbGVuY29kZSBhbmQgZGlzdGNvZGUgZGlyZWN0bHkKICAgYXMgYnVmZmVycyBzbyB3ZSBkb24ndCBuZWVkIGNvZGVzCiAgKi8KICAvL3RoaXMuY29kZXMgPSBuZXcgdXRpbHMuQnVmMzIoRU5PVUdIKTsgICAgICAgLyogc3BhY2UgZm9yIGNvZGUgdGFibGVzICovCiAgdGhpcy5sZW5keW4gPSBudWxsOyAgICAgICAgICAgICAgLyogZHluYW1pYyB0YWJsZSBmb3IgbGVuZ3RoL2xpdGVyYWwgY29kZXMgKEpTIHNwZWNpZmljKSAqLwogIHRoaXMuZGlzdGR5biA9IG51bGw7ICAgICAgICAgICAgIC8qIGR5bmFtaWMgdGFibGUgZm9yIGRpc3RhbmNlIGNvZGVzIChKUyBzcGVjaWZpYykgKi8KICB0aGlzLnNhbmUgPSAwOyAgICAgICAgICAgICAgICAgICAvKiBpZiBmYWxzZSwgYWxsb3cgaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyICovCiAgdGhpcy5iYWNrID0gMDsgICAgICAgICAgICAgICAgICAgLyogYml0cyBiYWNrIG9mIGxhc3QgdW5wcm9jZXNzZWQgbGVuZ3RoL2xpdCAqLwogIHRoaXMud2FzID0gMDsgICAgICAgICAgICAgICAgICAgIC8qIGluaXRpYWwgbGVuZ3RoIG9mIG1hdGNoICovCn0KCmZ1bmN0aW9uIGluZmxhdGVSZXNldEtlZXAoc3RybSkgewogIHZhciBzdGF0ZTsKCiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfQogIHN0YXRlID0gc3RybS5zdGF0ZTsKICBzdHJtLnRvdGFsX2luID0gc3RybS50b3RhbF9vdXQgPSBzdGF0ZS50b3RhbCA9IDA7CiAgc3RybS5tc2cgPSAnJzsgLypaX05VTEwqLwogIGlmIChzdGF0ZS53cmFwKSB7ICAgICAgIC8qIHRvIHN1cHBvcnQgaWxsLWNvbmNlaXZlZCBKYXZhIHRlc3Qgc3VpdGUgKi8KICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS53cmFwICYgMTsKICB9CiAgc3RhdGUubW9kZSA9IEhFQUQ7CiAgc3RhdGUubGFzdCA9IDA7CiAgc3RhdGUuaGF2ZWRpY3QgPSAwOwogIHN0YXRlLmRtYXggPSAzMjc2ODsKICBzdGF0ZS5oZWFkID0gbnVsbC8qWl9OVUxMKi87CiAgc3RhdGUuaG9sZCA9IDA7CiAgc3RhdGUuYml0cyA9IDA7CiAgLy9zdGF0ZS5sZW5jb2RlID0gc3RhdGUuZGlzdGNvZGUgPSBzdGF0ZS5uZXh0ID0gc3RhdGUuY29kZXM7CiAgc3RhdGUubGVuY29kZSA9IHN0YXRlLmxlbmR5biA9IG5ldyB1dGlscy5CdWYzMihFTk9VR0hfTEVOUyk7CiAgc3RhdGUuZGlzdGNvZGUgPSBzdGF0ZS5kaXN0ZHluID0gbmV3IHV0aWxzLkJ1ZjMyKEVOT1VHSF9ESVNUUyk7CgogIHN0YXRlLnNhbmUgPSAxOwogIHN0YXRlLmJhY2sgPSAtMTsKICAvL1RyYWNldigoc3RkZXJyLCAiaW5mbGF0ZTogcmVzZXRcbiIpKTsKICByZXR1cm4gWl9PSzsKfQoKZnVuY3Rpb24gaW5mbGF0ZVJlc2V0KHN0cm0pIHsKICB2YXIgc3RhdGU7CgogIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH0KICBzdGF0ZSA9IHN0cm0uc3RhdGU7CiAgc3RhdGUud3NpemUgPSAwOwogIHN0YXRlLndoYXZlID0gMDsKICBzdGF0ZS53bmV4dCA9IDA7CiAgcmV0dXJuIGluZmxhdGVSZXNldEtlZXAoc3RybSk7Cgp9CgpmdW5jdGlvbiBpbmZsYXRlUmVzZXQyKHN0cm0sIHdpbmRvd0JpdHMpIHsKICB2YXIgd3JhcDsKICB2YXIgc3RhdGU7CgogIC8qIGdldCB0aGUgc3RhdGUgKi8KICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOyB9CiAgc3RhdGUgPSBzdHJtLnN0YXRlOwoKICAvKiBleHRyYWN0IHdyYXAgcmVxdWVzdCBmcm9tIHdpbmRvd0JpdHMgcGFyYW1ldGVyICovCiAgaWYgKHdpbmRvd0JpdHMgPCAwKSB7CiAgICB3cmFwID0gMDsKICAgIHdpbmRvd0JpdHMgPSAtd2luZG93Qml0czsKICB9CiAgZWxzZSB7CiAgICB3cmFwID0gKHdpbmRvd0JpdHMgPj4gNCkgKyAxOwogICAgaWYgKHdpbmRvd0JpdHMgPCA0OCkgewogICAgICB3aW5kb3dCaXRzICY9IDE1OwogICAgfQogIH0KCiAgLyogc2V0IG51bWJlciBvZiB3aW5kb3cgYml0cywgZnJlZSB3aW5kb3cgaWYgZGlmZmVyZW50ICovCiAgaWYgKHdpbmRvd0JpdHMgJiYgKHdpbmRvd0JpdHMgPCA4IHx8IHdpbmRvd0JpdHMgPiAxNSkpIHsKICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjsKICB9CiAgaWYgKHN0YXRlLndpbmRvdyAhPT0gbnVsbCAmJiBzdGF0ZS53Yml0cyAhPT0gd2luZG93Qml0cykgewogICAgc3RhdGUud2luZG93ID0gbnVsbDsKICB9CgogIC8qIHVwZGF0ZSBzdGF0ZSBhbmQgcmVzZXQgdGhlIHJlc3Qgb2YgaXQgKi8KICBzdGF0ZS53cmFwID0gd3JhcDsKICBzdGF0ZS53Yml0cyA9IHdpbmRvd0JpdHM7CiAgcmV0dXJuIGluZmxhdGVSZXNldChzdHJtKTsKfQoKZnVuY3Rpb24gaW5mbGF0ZUluaXQyKHN0cm0sIHdpbmRvd0JpdHMpIHsKICB2YXIgcmV0OwogIHZhciBzdGF0ZTsKCiAgaWYgKCFzdHJtKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfQogIC8vc3RybS5tc2cgPSBaX05VTEw7ICAgICAgICAgICAgICAgICAvKiBpbiBjYXNlIHdlIHJldHVybiBhbiBlcnJvciAqLwoKICBzdGF0ZSA9IG5ldyBJbmZsYXRlU3RhdGUoKTsKCiAgLy9pZiAoc3RhdGUgPT09IFpfTlVMTCkgcmV0dXJuIFpfTUVNX0VSUk9SOwogIC8vVHJhY2V2KChzdGRlcnIsICJpbmZsYXRlOiBhbGxvY2F0ZWRcbiIpKTsKICBzdHJtLnN0YXRlID0gc3RhdGU7CiAgc3RhdGUud2luZG93ID0gbnVsbC8qWl9OVUxMKi87CiAgcmV0ID0gaW5mbGF0ZVJlc2V0MihzdHJtLCB3aW5kb3dCaXRzKTsKICBpZiAocmV0ICE9PSBaX09LKSB7CiAgICBzdHJtLnN0YXRlID0gbnVsbC8qWl9OVUxMKi87CiAgfQogIHJldHVybiByZXQ7Cn0KCmZ1bmN0aW9uIGluZmxhdGVJbml0KHN0cm0pIHsKICByZXR1cm4gaW5mbGF0ZUluaXQyKHN0cm0sIERFRl9XQklUUyk7Cn0KCgovKgogUmV0dXJuIHN0YXRlIHdpdGggbGVuZ3RoIGFuZCBkaXN0YW5jZSBkZWNvZGluZyB0YWJsZXMgYW5kIGluZGV4IHNpemVzIHNldCB0bwogZml4ZWQgY29kZSBkZWNvZGluZy4gIE5vcm1hbGx5IHRoaXMgcmV0dXJucyBmaXhlZCB0YWJsZXMgZnJvbSBpbmZmaXhlZC5oLgogSWYgQlVJTERGSVhFRCBpcyBkZWZpbmVkLCB0aGVuIGluc3RlYWQgdGhpcyByb3V0aW5lIGJ1aWxkcyB0aGUgdGFibGVzIHRoZQogZmlyc3QgdGltZSBpdCdzIGNhbGxlZCwgYW5kIHJldHVybnMgdGhvc2UgdGFibGVzIHRoZSBmaXJzdCB0aW1lIGFuZAogdGhlcmVhZnRlci4gIFRoaXMgcmVkdWNlcyB0aGUgc2l6ZSBvZiB0aGUgY29kZSBieSBhYm91dCAySyBieXRlcywgaW4KIGV4Y2hhbmdlIGZvciBhIGxpdHRsZSBleGVjdXRpb24gdGltZS4gIEhvd2V2ZXIsIEJVSUxERklYRUQgc2hvdWxkIG5vdCBiZQogdXNlZCBmb3IgdGhyZWFkZWQgYXBwbGljYXRpb25zLCBzaW5jZSB0aGUgcmV3cml0aW5nIG9mIHRoZSB0YWJsZXMgYW5kIHZpcmdpbgogbWF5IG5vdCBiZSB0aHJlYWQtc2FmZS4KICovCnZhciB2aXJnaW4gPSB0cnVlOwoKdmFyIGxlbmZpeCwgZGlzdGZpeDsgLy8gV2UgaGF2ZSBubyBwb2ludGVycyBpbiBKUywgc28ga2VlcCB0YWJsZXMgc2VwYXJhdGUKCmZ1bmN0aW9uIGZpeGVkdGFibGVzKHN0YXRlKSB7CiAgLyogYnVpbGQgZml4ZWQgaHVmZm1hbiB0YWJsZXMgaWYgZmlyc3QgY2FsbCAobWF5IG5vdCBiZSB0aHJlYWQgc2FmZSkgKi8KICBpZiAodmlyZ2luKSB7CiAgICB2YXIgc3ltOwoKICAgIGxlbmZpeCA9IG5ldyB1dGlscy5CdWYzMig1MTIpOwogICAgZGlzdGZpeCA9IG5ldyB1dGlscy5CdWYzMigzMik7CgogICAgLyogbGl0ZXJhbC9sZW5ndGggdGFibGUgKi8KICAgIHN5bSA9IDA7CiAgICB3aGlsZSAoc3ltIDwgMTQ0KSB7IHN0YXRlLmxlbnNbc3ltKytdID0gODsgfQogICAgd2hpbGUgKHN5bSA8IDI1NikgeyBzdGF0ZS5sZW5zW3N5bSsrXSA9IDk7IH0KICAgIHdoaWxlIChzeW0gPCAyODApIHsgc3RhdGUubGVuc1tzeW0rK10gPSA3OyB9CiAgICB3aGlsZSAoc3ltIDwgMjg4KSB7IHN0YXRlLmxlbnNbc3ltKytdID0gODsgfQoKICAgIGluZmxhdGVfdGFibGUoTEVOUywgIHN0YXRlLmxlbnMsIDAsIDI4OCwgbGVuZml4LCAgIDAsIHN0YXRlLndvcmssIHsgYml0czogOSB9KTsKCiAgICAvKiBkaXN0YW5jZSB0YWJsZSAqLwogICAgc3ltID0gMDsKICAgIHdoaWxlIChzeW0gPCAzMikgeyBzdGF0ZS5sZW5zW3N5bSsrXSA9IDU7IH0KCiAgICBpbmZsYXRlX3RhYmxlKERJU1RTLCBzdGF0ZS5sZW5zLCAwLCAzMiwgICBkaXN0Zml4LCAwLCBzdGF0ZS53b3JrLCB7IGJpdHM6IDUgfSk7CgogICAgLyogZG8gdGhpcyBqdXN0IG9uY2UgKi8KICAgIHZpcmdpbiA9IGZhbHNlOwogIH0KCiAgc3RhdGUubGVuY29kZSA9IGxlbmZpeDsKICBzdGF0ZS5sZW5iaXRzID0gOTsKICBzdGF0ZS5kaXN0Y29kZSA9IGRpc3RmaXg7CiAgc3RhdGUuZGlzdGJpdHMgPSA1Owp9CgoKLyoKIFVwZGF0ZSB0aGUgd2luZG93IHdpdGggdGhlIGxhc3Qgd3NpemUgKG5vcm1hbGx5IDMySykgYnl0ZXMgd3JpdHRlbiBiZWZvcmUKIHJldHVybmluZy4gIElmIHdpbmRvdyBkb2VzIG5vdCBleGlzdCB5ZXQsIGNyZWF0ZSBpdC4gIFRoaXMgaXMgb25seSBjYWxsZWQKIHdoZW4gYSB3aW5kb3cgaXMgYWxyZWFkeSBpbiB1c2UsIG9yIHdoZW4gb3V0cHV0IGhhcyBiZWVuIHdyaXR0ZW4gZHVyaW5nIHRoaXMKIGluZmxhdGUgY2FsbCwgYnV0IHRoZSBlbmQgb2YgdGhlIGRlZmxhdGUgc3RyZWFtIGhhcyBub3QgYmVlbiByZWFjaGVkIHlldC4KIEl0IGlzIGFsc28gY2FsbGVkIHRvIGNyZWF0ZSBhIHdpbmRvdyBmb3IgZGljdGlvbmFyeSBkYXRhIHdoZW4gYSBkaWN0aW9uYXJ5CiBpcyBsb2FkZWQuCgogUHJvdmlkaW5nIG91dHB1dCBidWZmZXJzIGxhcmdlciB0aGFuIDMySyB0byBpbmZsYXRlKCkgc2hvdWxkIHByb3ZpZGUgYSBzcGVlZAogYWR2YW50YWdlLCBzaW5jZSBvbmx5IHRoZSBsYXN0IDMySyBvZiBvdXRwdXQgaXMgY29waWVkIHRvIHRoZSBzbGlkaW5nIHdpbmRvdwogdXBvbiByZXR1cm4gZnJvbSBpbmZsYXRlKCksIGFuZCBzaW5jZSBhbGwgZGlzdGFuY2VzIGFmdGVyIHRoZSBmaXJzdCAzMksgb2YKIG91dHB1dCB3aWxsIGZhbGwgaW4gdGhlIG91dHB1dCBkYXRhLCBtYWtpbmcgbWF0Y2ggY29waWVzIHNpbXBsZXIgYW5kIGZhc3Rlci4KIFRoZSBhZHZhbnRhZ2UgbWF5IGJlIGRlcGVuZGVudCBvbiB0aGUgc2l6ZSBvZiB0aGUgcHJvY2Vzc29yJ3MgZGF0YSBjYWNoZXMuCiAqLwpmdW5jdGlvbiB1cGRhdGV3aW5kb3coc3RybSwgc3JjLCBlbmQsIGNvcHkpIHsKICB2YXIgZGlzdDsKICB2YXIgc3RhdGUgPSBzdHJtLnN0YXRlOwoKICAvKiBpZiBpdCBoYXNuJ3QgYmVlbiBkb25lIGFscmVhZHksIGFsbG9jYXRlIHNwYWNlIGZvciB0aGUgd2luZG93ICovCiAgaWYgKHN0YXRlLndpbmRvdyA9PT0gbnVsbCkgewogICAgc3RhdGUud3NpemUgPSAxIDw8IHN0YXRlLndiaXRzOwogICAgc3RhdGUud25leHQgPSAwOwogICAgc3RhdGUud2hhdmUgPSAwOwoKICAgIHN0YXRlLndpbmRvdyA9IG5ldyB1dGlscy5CdWY4KHN0YXRlLndzaXplKTsKICB9CgogIC8qIGNvcHkgc3RhdGUtPndzaXplIG9yIGxlc3Mgb3V0cHV0IGJ5dGVzIGludG8gdGhlIGNpcmN1bGFyIHdpbmRvdyAqLwogIGlmIChjb3B5ID49IHN0YXRlLndzaXplKSB7CiAgICB1dGlscy5hcnJheVNldChzdGF0ZS53aW5kb3csIHNyYywgZW5kIC0gc3RhdGUud3NpemUsIHN0YXRlLndzaXplLCAwKTsKICAgIHN0YXRlLnduZXh0ID0gMDsKICAgIHN0YXRlLndoYXZlID0gc3RhdGUud3NpemU7CiAgfQogIGVsc2UgewogICAgZGlzdCA9IHN0YXRlLndzaXplIC0gc3RhdGUud25leHQ7CiAgICBpZiAoZGlzdCA+IGNvcHkpIHsKICAgICAgZGlzdCA9IGNvcHk7CiAgICB9CiAgICAvL3ptZW1jcHkoc3RhdGUtPndpbmRvdyArIHN0YXRlLT53bmV4dCwgZW5kIC0gY29weSwgZGlzdCk7CiAgICB1dGlscy5hcnJheVNldChzdGF0ZS53aW5kb3csIHNyYywgZW5kIC0gY29weSwgZGlzdCwgc3RhdGUud25leHQpOwogICAgY29weSAtPSBkaXN0OwogICAgaWYgKGNvcHkpIHsKICAgICAgLy96bWVtY3B5KHN0YXRlLT53aW5kb3csIGVuZCAtIGNvcHksIGNvcHkpOwogICAgICB1dGlscy5hcnJheVNldChzdGF0ZS53aW5kb3csIHNyYywgZW5kIC0gY29weSwgY29weSwgMCk7CiAgICAgIHN0YXRlLnduZXh0ID0gY29weTsKICAgICAgc3RhdGUud2hhdmUgPSBzdGF0ZS53c2l6ZTsKICAgIH0KICAgIGVsc2UgewogICAgICBzdGF0ZS53bmV4dCArPSBkaXN0OwogICAgICBpZiAoc3RhdGUud25leHQgPT09IHN0YXRlLndzaXplKSB7IHN0YXRlLnduZXh0ID0gMDsgfQogICAgICBpZiAoc3RhdGUud2hhdmUgPCBzdGF0ZS53c2l6ZSkgeyBzdGF0ZS53aGF2ZSArPSBkaXN0OyB9CiAgICB9CiAgfQogIHJldHVybiAwOwp9CgpmdW5jdGlvbiBpbmZsYXRlKHN0cm0sIGZsdXNoKSB7CiAgdmFyIHN0YXRlOwogIHZhciBpbnB1dCwgb3V0cHV0OyAgICAgICAgICAvLyBpbnB1dC9vdXRwdXQgYnVmZmVycwogIHZhciBuZXh0OyAgICAgICAgICAgICAgICAgICAvKiBuZXh0IGlucHV0IElOREVYICovCiAgdmFyIHB1dDsgICAgICAgICAgICAgICAgICAgIC8qIG5leHQgb3V0cHV0IElOREVYICovCiAgdmFyIGhhdmUsIGxlZnQ7ICAgICAgICAgICAgIC8qIGF2YWlsYWJsZSBpbnB1dCBhbmQgb3V0cHV0ICovCiAgdmFyIGhvbGQ7ICAgICAgICAgICAgICAgICAgIC8qIGJpdCBidWZmZXIgKi8KICB2YXIgYml0czsgICAgICAgICAgICAgICAgICAgLyogYml0cyBpbiBiaXQgYnVmZmVyICovCiAgdmFyIF9pbiwgX291dDsgICAgICAgICAgICAgIC8qIHNhdmUgc3RhcnRpbmcgYXZhaWxhYmxlIGlucHV0IGFuZCBvdXRwdXQgKi8KICB2YXIgY29weTsgICAgICAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIHN0b3JlZCBvciBtYXRjaCBieXRlcyB0byBjb3B5ICovCiAgdmFyIGZyb207ICAgICAgICAgICAgICAgICAgIC8qIHdoZXJlIHRvIGNvcHkgbWF0Y2ggYnl0ZXMgZnJvbSAqLwogIHZhciBmcm9tX3NvdXJjZTsKICB2YXIgaGVyZSA9IDA7ICAgICAgICAgICAgICAgLyogY3VycmVudCBkZWNvZGluZyB0YWJsZSBlbnRyeSAqLwogIHZhciBoZXJlX2JpdHMsIGhlcmVfb3AsIGhlcmVfdmFsOyAvLyBwYWtlZCAiaGVyZSIgZGVub3JtYWxpemVkIChKUyBzcGVjaWZpYykKICAvL3ZhciBsYXN0OyAgICAgICAgICAgICAgICAgICAvKiBwYXJlbnQgdGFibGUgZW50cnkgKi8KICB2YXIgbGFzdF9iaXRzLCBsYXN0X29wLCBsYXN0X3ZhbDsgLy8gcGFrZWQgImxhc3QiIGRlbm9ybWFsaXplZCAoSlMgc3BlY2lmaWMpCiAgdmFyIGxlbjsgICAgICAgICAgICAgICAgICAgIC8qIGxlbmd0aCB0byBjb3B5IGZvciByZXBlYXRzLCBiaXRzIHRvIGRyb3AgKi8KICB2YXIgcmV0OyAgICAgICAgICAgICAgICAgICAgLyogcmV0dXJuIGNvZGUgKi8KICB2YXIgaGJ1ZiA9IG5ldyB1dGlscy5CdWY4KDQpOyAgICAvKiBidWZmZXIgZm9yIGd6aXAgaGVhZGVyIGNyYyBjYWxjdWxhdGlvbiAqLwogIHZhciBvcHRzOwoKICB2YXIgbjsgLy8gdGVtcG9yYXJ5IHZhciBmb3IgTkVFRF9CSVRTCgogIHZhciBvcmRlciA9IC8qIHBlcm11dGF0aW9uIG9mIGNvZGUgbGVuZ3RocyAqLwogICAgWyAxNiwgMTcsIDE4LCAwLCA4LCA3LCA5LCA2LCAxMCwgNSwgMTEsIDQsIDEyLCAzLCAxMywgMiwgMTQsIDEsIDE1IF07CgoKICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUgfHwgIXN0cm0ub3V0cHV0IHx8CiAgICAgICghc3RybS5pbnB1dCAmJiBzdHJtLmF2YWlsX2luICE9PSAwKSkgewogICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOwogIH0KCiAgc3RhdGUgPSBzdHJtLnN0YXRlOwogIGlmIChzdGF0ZS5tb2RlID09PSBUWVBFKSB7IHN0YXRlLm1vZGUgPSBUWVBFRE87IH0gICAgLyogc2tpcCBjaGVjayAqLwoKCiAgLy8tLS0gTE9BRCgpIC0tLQogIHB1dCA9IHN0cm0ubmV4dF9vdXQ7CiAgb3V0cHV0ID0gc3RybS5vdXRwdXQ7CiAgbGVmdCA9IHN0cm0uYXZhaWxfb3V0OwogIG5leHQgPSBzdHJtLm5leHRfaW47CiAgaW5wdXQgPSBzdHJtLmlucHV0OwogIGhhdmUgPSBzdHJtLmF2YWlsX2luOwogIGhvbGQgPSBzdGF0ZS5ob2xkOwogIGJpdHMgPSBzdGF0ZS5iaXRzOwogIC8vLS0tCgogIF9pbiA9IGhhdmU7CiAgX291dCA9IGxlZnQ7CiAgcmV0ID0gWl9PSzsKCiAgaW5mX2xlYXZlOiAvLyBnb3RvIGVtdWxhdGlvbgogIGZvciAoOzspIHsKICAgIHN3aXRjaCAoc3RhdGUubW9kZSkgewogICAgY2FzZSBIRUFEOgogICAgICBpZiAoc3RhdGUud3JhcCA9PT0gMCkgewogICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFRE87CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgLy89PT0gTkVFREJJVFMoMTYpOwogICAgICB3aGlsZSAoYml0cyA8IDE2KSB7CiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgaGF2ZS0tOwogICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgIGJpdHMgKz0gODsKICAgICAgfQogICAgICAvLz09PS8vCiAgICAgIGlmICgoc3RhdGUud3JhcCAmIDIpICYmIGhvbGQgPT09IDB4OGIxZikgeyAgLyogZ3ppcCBoZWFkZXIgKi8KICAgICAgICBzdGF0ZS5jaGVjayA9IDAvKmNyYzMyKDBMLCBaX05VTEwsIDApKi87CiAgICAgICAgLy89PT0gQ1JDMihzdGF0ZS5jaGVjaywgaG9sZCk7CiAgICAgICAgaGJ1ZlswXSA9IGhvbGQgJiAweGZmOwogICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmOwogICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGhidWYsIDIsIDApOwogICAgICAgIC8vPT09Ly8KCiAgICAgICAgLy89PT0gSU5JVEJJVFMoKTsKICAgICAgICBob2xkID0gMDsKICAgICAgICBiaXRzID0gMDsKICAgICAgICAvLz09PS8vCiAgICAgICAgc3RhdGUubW9kZSA9IEZMQUdTOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIHN0YXRlLmZsYWdzID0gMDsgICAgICAgICAgIC8qIGV4cGVjdCB6bGliIGhlYWRlciAqLwogICAgICBpZiAoc3RhdGUuaGVhZCkgewogICAgICAgIHN0YXRlLmhlYWQuZG9uZSA9IGZhbHNlOwogICAgICB9CiAgICAgIGlmICghKHN0YXRlLndyYXAgJiAxKSB8fCAgIC8qIGNoZWNrIGlmIHpsaWIgaGVhZGVyIGFsbG93ZWQgKi8KICAgICAgICAoKChob2xkICYgMHhmZikvKkJJVFMoOCkqLyA8PCA4KSArIChob2xkID4+IDgpKSAlIDMxKSB7CiAgICAgICAgc3RybS5tc2cgPSAnaW5jb3JyZWN0IGhlYWRlciBjaGVjayc7CiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBpZiAoKGhvbGQgJiAweDBmKS8qQklUUyg0KSovICE9PSBaX0RFRkxBVEVEKSB7CiAgICAgICAgc3RybS5tc2cgPSAndW5rbm93biBjb21wcmVzc2lvbiBtZXRob2QnOwogICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgLy8tLS0gRFJPUEJJVFMoNCkgLS0tLy8KICAgICAgaG9sZCA+Pj49IDQ7CiAgICAgIGJpdHMgLT0gNDsKICAgICAgLy8tLS0vLwogICAgICBsZW4gPSAoaG9sZCAmIDB4MGYpLypCSVRTKDQpKi8gKyA4OwogICAgICBpZiAoc3RhdGUud2JpdHMgPT09IDApIHsKICAgICAgICBzdGF0ZS53Yml0cyA9IGxlbjsKICAgICAgfQogICAgICBlbHNlIGlmIChsZW4gPiBzdGF0ZS53Yml0cykgewogICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgd2luZG93IHNpemUnOwogICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgc3RhdGUuZG1heCA9IDEgPDwgbGVuOwogICAgICAvL1RyYWNldigoc3RkZXJyLCAiaW5mbGF0ZTogICB6bGliIGhlYWRlciBva1xuIikpOwogICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSAxLyphZGxlcjMyKDBMLCBaX05VTEwsIDApKi87CiAgICAgIHN0YXRlLm1vZGUgPSBob2xkICYgMHgyMDAgPyBESUNUSUQgOiBUWVBFOwogICAgICAvLz09PSBJTklUQklUUygpOwogICAgICBob2xkID0gMDsKICAgICAgYml0cyA9IDA7CiAgICAgIC8vPT09Ly8KICAgICAgYnJlYWs7CiAgICBjYXNlIEZMQUdTOgogICAgICAvLz09PSBORUVEQklUUygxNik7ICovCiAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHsKICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICBoYXZlLS07CiAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgYml0cyArPSA4OwogICAgICB9CiAgICAgIC8vPT09Ly8KICAgICAgc3RhdGUuZmxhZ3MgPSBob2xkOwogICAgICBpZiAoKHN0YXRlLmZsYWdzICYgMHhmZikgIT09IFpfREVGTEFURUQpIHsKICAgICAgICBzdHJtLm1zZyA9ICd1bmtub3duIGNvbXByZXNzaW9uIG1ldGhvZCc7CiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweGUwMDApIHsKICAgICAgICBzdHJtLm1zZyA9ICd1bmtub3duIGhlYWRlciBmbGFncyBzZXQnOwogICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICBzdGF0ZS5oZWFkLnRleHQgPSAoKGhvbGQgPj4gOCkgJiAxKTsKICAgICAgfQogICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHsKICAgICAgICAvLz09PSBDUkMyKHN0YXRlLmNoZWNrLCBob2xkKTsKICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7CiAgICAgICAgaGJ1ZlsxXSA9IChob2xkID4+PiA4KSAmIDB4ZmY7CiAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7CiAgICAgICAgLy89PT0vLwogICAgICB9CiAgICAgIC8vPT09IElOSVRCSVRTKCk7CiAgICAgIGhvbGQgPSAwOwogICAgICBiaXRzID0gMDsKICAgICAgLy89PT0vLwogICAgICBzdGF0ZS5tb2RlID0gVElNRTsKICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgY2FzZSBUSU1FOgogICAgICAvLz09PSBORUVEQklUUygzMik7ICovCiAgICAgIHdoaWxlIChiaXRzIDwgMzIpIHsKICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICBoYXZlLS07CiAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgYml0cyArPSA4OwogICAgICB9CiAgICAgIC8vPT09Ly8KICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICBzdGF0ZS5oZWFkLnRpbWUgPSBob2xkOwogICAgICB9CiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkgewogICAgICAgIC8vPT09IENSQzQoc3RhdGUuY2hlY2ssIGhvbGQpCiAgICAgICAgaGJ1ZlswXSA9IGhvbGQgJiAweGZmOwogICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmOwogICAgICAgIGhidWZbMl0gPSAoaG9sZCA+Pj4gMTYpICYgMHhmZjsKICAgICAgICBoYnVmWzNdID0gKGhvbGQgPj4+IDI0KSAmIDB4ZmY7CiAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgNCwgMCk7CiAgICAgICAgLy89PT0KICAgICAgfQogICAgICAvLz09PSBJTklUQklUUygpOwogICAgICBob2xkID0gMDsKICAgICAgYml0cyA9IDA7CiAgICAgIC8vPT09Ly8KICAgICAgc3RhdGUubW9kZSA9IE9TOwogICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICBjYXNlIE9TOgogICAgICAvLz09PSBORUVEQklUUygxNik7ICovCiAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHsKICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICBoYXZlLS07CiAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgYml0cyArPSA4OwogICAgICB9CiAgICAgIC8vPT09Ly8KICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICBzdGF0ZS5oZWFkLnhmbGFncyA9IChob2xkICYgMHhmZik7CiAgICAgICAgc3RhdGUuaGVhZC5vcyA9IChob2xkID4+IDgpOwogICAgICB9CiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkgewogICAgICAgIC8vPT09IENSQzIoc3RhdGUuY2hlY2ssIGhvbGQpOwogICAgICAgIGhidWZbMF0gPSBob2xkICYgMHhmZjsKICAgICAgICBoYnVmWzFdID0gKGhvbGQgPj4+IDgpICYgMHhmZjsKICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBoYnVmLCAyLCAwKTsKICAgICAgICAvLz09PS8vCiAgICAgIH0KICAgICAgLy89PT0gSU5JVEJJVFMoKTsKICAgICAgaG9sZCA9IDA7CiAgICAgIGJpdHMgPSAwOwogICAgICAvLz09PS8vCiAgICAgIHN0YXRlLm1vZGUgPSBFWExFTjsKICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgY2FzZSBFWExFTjoKICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwNDAwKSB7CiAgICAgICAgLy89PT0gTkVFREJJVFMoMTYpOyAqLwogICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHsKICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgfQogICAgICAgIC8vPT09Ly8KICAgICAgICBzdGF0ZS5sZW5ndGggPSBob2xkOwogICAgICAgIGlmIChzdGF0ZS5oZWFkKSB7CiAgICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhX2xlbiA9IGhvbGQ7CiAgICAgICAgfQogICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkgewogICAgICAgICAgLy89PT0gQ1JDMihzdGF0ZS5jaGVjaywgaG9sZCk7CiAgICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7CiAgICAgICAgICBoYnVmWzFdID0gKGhvbGQgPj4+IDgpICYgMHhmZjsKICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGhidWYsIDIsIDApOwogICAgICAgICAgLy89PT0vLwogICAgICAgIH0KICAgICAgICAvLz09PSBJTklUQklUUygpOwogICAgICAgIGhvbGQgPSAwOwogICAgICAgIGJpdHMgPSAwOwogICAgICAgIC8vPT09Ly8KICAgICAgfQogICAgICBlbHNlIGlmIChzdGF0ZS5oZWFkKSB7CiAgICAgICAgc3RhdGUuaGVhZC5leHRyYSA9IG51bGwvKlpfTlVMTCovOwogICAgICB9CiAgICAgIHN0YXRlLm1vZGUgPSBFWFRSQTsKICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgY2FzZSBFWFRSQToKICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwNDAwKSB7CiAgICAgICAgY29weSA9IHN0YXRlLmxlbmd0aDsKICAgICAgICBpZiAoY29weSA+IGhhdmUpIHsgY29weSA9IGhhdmU7IH0KICAgICAgICBpZiAoY29weSkgewogICAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICAgICAgbGVuID0gc3RhdGUuaGVhZC5leHRyYV9sZW4gLSBzdGF0ZS5sZW5ndGg7CiAgICAgICAgICAgIGlmICghc3RhdGUuaGVhZC5leHRyYSkgewogICAgICAgICAgICAgIC8vIFVzZSB1bnR5cGVkIGFycmF5IGZvciBtb3JlIGNvbnZlbmllbmQgcHJvY2Vzc2luZyBsYXRlcgogICAgICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmEgPSBuZXcgQXJyYXkoc3RhdGUuaGVhZC5leHRyYV9sZW4pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHV0aWxzLmFycmF5U2V0KAogICAgICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmEsCiAgICAgICAgICAgICAgaW5wdXQsCiAgICAgICAgICAgICAgbmV4dCwKICAgICAgICAgICAgICAvLyBleHRyYSBmaWVsZCBpcyBsaW1pdGVkIHRvIDY1NTM2IGJ5dGVzCiAgICAgICAgICAgICAgLy8gLSBubyBuZWVkIGZvciBhZGRpdGlvbmFsIHNpemUgY2hlY2sKICAgICAgICAgICAgICBjb3B5LAogICAgICAgICAgICAgIC8qbGVuICsgY29weSA+IHN0YXRlLmhlYWQuZXh0cmFfbWF4IC0gbGVuID8gc3RhdGUuaGVhZC5leHRyYV9tYXggOiBjb3B5LCovCiAgICAgICAgICAgICAgbGVuCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIC8vem1lbWNweShzdGF0ZS5oZWFkLmV4dHJhICsgbGVuLCBuZXh0LAogICAgICAgICAgICAvLyAgICAgICAgbGVuICsgY29weSA+IHN0YXRlLmhlYWQuZXh0cmFfbWF4ID8KICAgICAgICAgICAgLy8gICAgICAgIHN0YXRlLmhlYWQuZXh0cmFfbWF4IC0gbGVuIDogY29weSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHsKICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaW5wdXQsIGNvcHksIG5leHQpOwogICAgICAgICAgfQogICAgICAgICAgaGF2ZSAtPSBjb3B5OwogICAgICAgICAgbmV4dCArPSBjb3B5OwogICAgICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7CiAgICAgICAgfQogICAgICAgIGlmIChzdGF0ZS5sZW5ndGgpIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgIH0KICAgICAgc3RhdGUubGVuZ3RoID0gMDsKICAgICAgc3RhdGUubW9kZSA9IE5BTUU7CiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgIGNhc2UgTkFNRToKICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwODAwKSB7CiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgY29weSA9IDA7CiAgICAgICAgZG8gewogICAgICAgICAgLy8gVE9ETzogMiBvciAxIGJ5dGVzPwogICAgICAgICAgbGVuID0gaW5wdXRbbmV4dCArIGNvcHkrK107CiAgICAgICAgICAvKiB1c2UgY29uc3RhbnQgbGltaXQgYmVjYXVzZSBpbiBqcyB3ZSBzaG91bGQgbm90IHByZWFsbG9jYXRlIG1lbW9yeSAqLwogICAgICAgICAgaWYgKHN0YXRlLmhlYWQgJiYgbGVuICYmCiAgICAgICAgICAgICAgKHN0YXRlLmxlbmd0aCA8IDY1NTM2IC8qc3RhdGUuaGVhZC5uYW1lX21heCovKSkgewogICAgICAgICAgICBzdGF0ZS5oZWFkLm5hbWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShsZW4pOwogICAgICAgICAgfQogICAgICAgIH0gd2hpbGUgKGxlbiAmJiBjb3B5IDwgaGF2ZSk7CgogICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkgewogICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaW5wdXQsIGNvcHksIG5leHQpOwogICAgICAgIH0KICAgICAgICBoYXZlIC09IGNvcHk7CiAgICAgICAgbmV4dCArPSBjb3B5OwogICAgICAgIGlmIChsZW4pIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgIH0KICAgICAgZWxzZSBpZiAoc3RhdGUuaGVhZCkgewogICAgICAgIHN0YXRlLmhlYWQubmFtZSA9IG51bGw7CiAgICAgIH0KICAgICAgc3RhdGUubGVuZ3RoID0gMDsKICAgICAgc3RhdGUubW9kZSA9IENPTU1FTlQ7CiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgIGNhc2UgQ09NTUVOVDoKICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgxMDAwKSB7CiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgY29weSA9IDA7CiAgICAgICAgZG8gewogICAgICAgICAgbGVuID0gaW5wdXRbbmV4dCArIGNvcHkrK107CiAgICAgICAgICAvKiB1c2UgY29uc3RhbnQgbGltaXQgYmVjYXVzZSBpbiBqcyB3ZSBzaG91bGQgbm90IHByZWFsbG9jYXRlIG1lbW9yeSAqLwogICAgICAgICAgaWYgKHN0YXRlLmhlYWQgJiYgbGVuICYmCiAgICAgICAgICAgICAgKHN0YXRlLmxlbmd0aCA8IDY1NTM2IC8qc3RhdGUuaGVhZC5jb21tX21heCovKSkgewogICAgICAgICAgICBzdGF0ZS5oZWFkLmNvbW1lbnQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShsZW4pOwogICAgICAgICAgfQogICAgICAgIH0gd2hpbGUgKGxlbiAmJiBjb3B5IDwgaGF2ZSk7CiAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7CiAgICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBpbnB1dCwgY29weSwgbmV4dCk7CiAgICAgICAgfQogICAgICAgIGhhdmUgLT0gY29weTsKICAgICAgICBuZXh0ICs9IGNvcHk7CiAgICAgICAgaWYgKGxlbikgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgfQogICAgICBlbHNlIGlmIChzdGF0ZS5oZWFkKSB7CiAgICAgICAgc3RhdGUuaGVhZC5jb21tZW50ID0gbnVsbDsKICAgICAgfQogICAgICBzdGF0ZS5tb2RlID0gSENSQzsKICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgY2FzZSBIQ1JDOgogICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHsKICAgICAgICAvLz09PSBORUVEQklUUygxNik7ICovCiAgICAgICAgd2hpbGUgKGJpdHMgPCAxNikgewogICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICBoYXZlLS07CiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICB9CiAgICAgICAgLy89PT0vLwogICAgICAgIGlmIChob2xkICE9PSAoc3RhdGUuY2hlY2sgJiAweGZmZmYpKSB7CiAgICAgICAgICBzdHJtLm1zZyA9ICdoZWFkZXIgY3JjIG1pc21hdGNoJzsKICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgLy89PT0gSU5JVEJJVFMoKTsKICAgICAgICBob2xkID0gMDsKICAgICAgICBiaXRzID0gMDsKICAgICAgICAvLz09PS8vCiAgICAgIH0KICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICBzdGF0ZS5oZWFkLmhjcmMgPSAoKHN0YXRlLmZsYWdzID4+IDkpICYgMSk7CiAgICAgICAgc3RhdGUuaGVhZC5kb25lID0gdHJ1ZTsKICAgICAgfQogICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSAwOwogICAgICBzdGF0ZS5tb2RlID0gVFlQRTsKICAgICAgYnJlYWs7CiAgICBjYXNlIERJQ1RJRDoKICAgICAgLy89PT0gTkVFREJJVFMoMzIpOyAqLwogICAgICB3aGlsZSAoYml0cyA8IDMyKSB7CiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgaGF2ZS0tOwogICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgIGJpdHMgKz0gODsKICAgICAgfQogICAgICAvLz09PS8vCiAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IHpzd2FwMzIoaG9sZCk7CiAgICAgIC8vPT09IElOSVRCSVRTKCk7CiAgICAgIGhvbGQgPSAwOwogICAgICBiaXRzID0gMDsKICAgICAgLy89PT0vLwogICAgICBzdGF0ZS5tb2RlID0gRElDVDsKICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgY2FzZSBESUNUOgogICAgICBpZiAoc3RhdGUuaGF2ZWRpY3QgPT09IDApIHsKICAgICAgICAvLy0tLSBSRVNUT1JFKCkgLS0tCiAgICAgICAgc3RybS5uZXh0X291dCA9IHB1dDsKICAgICAgICBzdHJtLmF2YWlsX291dCA9IGxlZnQ7CiAgICAgICAgc3RybS5uZXh0X2luID0gbmV4dDsKICAgICAgICBzdHJtLmF2YWlsX2luID0gaGF2ZTsKICAgICAgICBzdGF0ZS5ob2xkID0gaG9sZDsKICAgICAgICBzdGF0ZS5iaXRzID0gYml0czsKICAgICAgICAvLy0tLQogICAgICAgIHJldHVybiBaX05FRURfRElDVDsKICAgICAgfQogICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSAxLyphZGxlcjMyKDBMLCBaX05VTEwsIDApKi87CiAgICAgIHN0YXRlLm1vZGUgPSBUWVBFOwogICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICBjYXNlIFRZUEU6CiAgICAgIGlmIChmbHVzaCA9PT0gWl9CTE9DSyB8fCBmbHVzaCA9PT0gWl9UUkVFUykgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgY2FzZSBUWVBFRE86CiAgICAgIGlmIChzdGF0ZS5sYXN0KSB7CiAgICAgICAgLy8tLS0gQllURUJJVFMoKSAtLS0vLwogICAgICAgIGhvbGQgPj4+PSBiaXRzICYgNzsKICAgICAgICBiaXRzIC09IGJpdHMgJiA3OwogICAgICAgIC8vLS0tLy8KICAgICAgICBzdGF0ZS5tb2RlID0gQ0hFQ0s7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgLy89PT0gTkVFREJJVFMoMyk7ICovCiAgICAgIHdoaWxlIChiaXRzIDwgMykgewogICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgIGhhdmUtLTsKICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICBiaXRzICs9IDg7CiAgICAgIH0KICAgICAgLy89PT0vLwogICAgICBzdGF0ZS5sYXN0ID0gKGhvbGQgJiAweDAxKS8qQklUUygxKSovOwogICAgICAvLy0tLSBEUk9QQklUUygxKSAtLS0vLwogICAgICBob2xkID4+Pj0gMTsKICAgICAgYml0cyAtPSAxOwogICAgICAvLy0tLS8vCgogICAgICBzd2l0Y2ggKChob2xkICYgMHgwMykvKkJJVFMoMikqLykgewogICAgICBjYXNlIDA6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBzdG9yZWQgYmxvY2sgKi8KICAgICAgICAvL1RyYWNldigoc3RkZXJyLCAiaW5mbGF0ZTogICAgIHN0b3JlZCBibG9jayVzXG4iLAogICAgICAgIC8vICAgICAgICBzdGF0ZS5sYXN0ID8gIiAobGFzdCkiIDogIiIpKTsKICAgICAgICBzdGF0ZS5tb2RlID0gU1RPUkVEOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBmaXhlZCBibG9jayAqLwogICAgICAgIGZpeGVkdGFibGVzKHN0YXRlKTsKICAgICAgICAvL1RyYWNldigoc3RkZXJyLCAiaW5mbGF0ZTogICAgIGZpeGVkIGNvZGVzIGJsb2NrJXNcbiIsCiAgICAgICAgLy8gICAgICAgIHN0YXRlLmxhc3QgPyAiIChsYXN0KSIgOiAiIikpOwogICAgICAgIHN0YXRlLm1vZGUgPSBMRU5fOyAgICAgICAgICAgICAvKiBkZWNvZGUgY29kZXMgKi8KICAgICAgICBpZiAoZmx1c2ggPT09IFpfVFJFRVMpIHsKICAgICAgICAgIC8vLS0tIERST1BCSVRTKDIpIC0tLS8vCiAgICAgICAgICBob2xkID4+Pj0gMjsKICAgICAgICAgIGJpdHMgLT0gMjsKICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgMjogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGR5bmFtaWMgYmxvY2sgKi8KICAgICAgICAvL1RyYWNldigoc3RkZXJyLCAiaW5mbGF0ZTogICAgIGR5bmFtaWMgY29kZXMgYmxvY2slc1xuIiwKICAgICAgICAvLyAgICAgICAgc3RhdGUubGFzdCA/ICIgKGxhc3QpIiA6ICIiKSk7CiAgICAgICAgc3RhdGUubW9kZSA9IFRBQkxFOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDM6CiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBibG9jayB0eXBlJzsKICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICB9CiAgICAgIC8vLS0tIERST1BCSVRTKDIpIC0tLS8vCiAgICAgIGhvbGQgPj4+PSAyOwogICAgICBiaXRzIC09IDI7CiAgICAgIC8vLS0tLy8KICAgICAgYnJlYWs7CiAgICBjYXNlIFNUT1JFRDoKICAgICAgLy8tLS0gQllURUJJVFMoKSAtLS0vLyAvKiBnbyB0byBieXRlIGJvdW5kYXJ5ICovCiAgICAgIGhvbGQgPj4+PSBiaXRzICYgNzsKICAgICAgYml0cyAtPSBiaXRzICYgNzsKICAgICAgLy8tLS0vLwogICAgICAvLz09PSBORUVEQklUUygzMik7ICovCiAgICAgIHdoaWxlIChiaXRzIDwgMzIpIHsKICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICBoYXZlLS07CiAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgYml0cyArPSA4OwogICAgICB9CiAgICAgIC8vPT09Ly8KICAgICAgaWYgKChob2xkICYgMHhmZmZmKSAhPT0gKChob2xkID4+PiAxNikgXiAweGZmZmYpKSB7CiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBzdG9yZWQgYmxvY2sgbGVuZ3Rocyc7CiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBzdGF0ZS5sZW5ndGggPSBob2xkICYgMHhmZmZmOwogICAgICAvL1RyYWNldigoc3RkZXJyLCAiaW5mbGF0ZTogICAgICAgc3RvcmVkIGxlbmd0aCAldVxuIiwKICAgICAgLy8gICAgICAgIHN0YXRlLmxlbmd0aCkpOwogICAgICAvLz09PSBJTklUQklUUygpOwogICAgICBob2xkID0gMDsKICAgICAgYml0cyA9IDA7CiAgICAgIC8vPT09Ly8KICAgICAgc3RhdGUubW9kZSA9IENPUFlfOwogICAgICBpZiAoZmx1c2ggPT09IFpfVFJFRVMpIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgIGNhc2UgQ09QWV86CiAgICAgIHN0YXRlLm1vZGUgPSBDT1BZOwogICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICBjYXNlIENPUFk6CiAgICAgIGNvcHkgPSBzdGF0ZS5sZW5ndGg7CiAgICAgIGlmIChjb3B5KSB7CiAgICAgICAgaWYgKGNvcHkgPiBoYXZlKSB7IGNvcHkgPSBoYXZlOyB9CiAgICAgICAgaWYgKGNvcHkgPiBsZWZ0KSB7IGNvcHkgPSBsZWZ0OyB9CiAgICAgICAgaWYgKGNvcHkgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgLy8tLS0gem1lbWNweShwdXQsIG5leHQsIGNvcHkpOyAtLS0KICAgICAgICB1dGlscy5hcnJheVNldChvdXRwdXQsIGlucHV0LCBuZXh0LCBjb3B5LCBwdXQpOwogICAgICAgIC8vLS0tLy8KICAgICAgICBoYXZlIC09IGNvcHk7CiAgICAgICAgbmV4dCArPSBjb3B5OwogICAgICAgIGxlZnQgLT0gY29weTsKICAgICAgICBwdXQgKz0gY29weTsKICAgICAgICBzdGF0ZS5sZW5ndGggLT0gY29weTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICAvL1RyYWNldigoc3RkZXJyLCAiaW5mbGF0ZTogICAgICAgc3RvcmVkIGVuZFxuIikpOwogICAgICBzdGF0ZS5tb2RlID0gVFlQRTsKICAgICAgYnJlYWs7CiAgICBjYXNlIFRBQkxFOgogICAgICAvLz09PSBORUVEQklUUygxNCk7ICovCiAgICAgIHdoaWxlIChiaXRzIDwgMTQpIHsKICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICBoYXZlLS07CiAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgYml0cyArPSA4OwogICAgICB9CiAgICAgIC8vPT09Ly8KICAgICAgc3RhdGUubmxlbiA9IChob2xkICYgMHgxZikvKkJJVFMoNSkqLyArIDI1NzsKICAgICAgLy8tLS0gRFJPUEJJVFMoNSkgLS0tLy8KICAgICAgaG9sZCA+Pj49IDU7CiAgICAgIGJpdHMgLT0gNTsKICAgICAgLy8tLS0vLwogICAgICBzdGF0ZS5uZGlzdCA9IChob2xkICYgMHgxZikvKkJJVFMoNSkqLyArIDE7CiAgICAgIC8vLS0tIERST1BCSVRTKDUpIC0tLS8vCiAgICAgIGhvbGQgPj4+PSA1OwogICAgICBiaXRzIC09IDU7CiAgICAgIC8vLS0tLy8KICAgICAgc3RhdGUubmNvZGUgPSAoaG9sZCAmIDB4MGYpLypCSVRTKDQpKi8gKyA0OwogICAgICAvLy0tLSBEUk9QQklUUyg0KSAtLS0vLwogICAgICBob2xkID4+Pj0gNDsKICAgICAgYml0cyAtPSA0OwogICAgICAvLy0tLS8vCi8vI2lmbmRlZiBQS1pJUF9CVUdfV09SS0FST1VORAogICAgICBpZiAoc3RhdGUubmxlbiA+IDI4NiB8fCBzdGF0ZS5uZGlzdCA+IDMwKSB7CiAgICAgICAgc3RybS5tc2cgPSAndG9vIG1hbnkgbGVuZ3RoIG9yIGRpc3RhbmNlIHN5bWJvbHMnOwogICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KLy8jZW5kaWYKICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgImluZmxhdGU6ICAgICAgIHRhYmxlIHNpemVzIG9rXG4iKSk7CiAgICAgIHN0YXRlLmhhdmUgPSAwOwogICAgICBzdGF0ZS5tb2RlID0gTEVOTEVOUzsKICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgY2FzZSBMRU5MRU5TOgogICAgICB3aGlsZSAoc3RhdGUuaGF2ZSA8IHN0YXRlLm5jb2RlKSB7CiAgICAgICAgLy89PT0gTkVFREJJVFMoMyk7CiAgICAgICAgd2hpbGUgKGJpdHMgPCAzKSB7CiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgYml0cyArPSA4OwogICAgICAgIH0KICAgICAgICAvLz09PS8vCiAgICAgICAgc3RhdGUubGVuc1tvcmRlcltzdGF0ZS5oYXZlKytdXSA9IChob2xkICYgMHgwNyk7Ly9CSVRTKDMpOwogICAgICAgIC8vLS0tIERST1BCSVRTKDMpIC0tLS8vCiAgICAgICAgaG9sZCA+Pj49IDM7CiAgICAgICAgYml0cyAtPSAzOwogICAgICAgIC8vLS0tLy8KICAgICAgfQogICAgICB3aGlsZSAoc3RhdGUuaGF2ZSA8IDE5KSB7CiAgICAgICAgc3RhdGUubGVuc1tvcmRlcltzdGF0ZS5oYXZlKytdXSA9IDA7CiAgICAgIH0KICAgICAgLy8gV2UgaGF2ZSBzZXBhcmF0ZSB0YWJsZXMgJiBubyBwb2ludGVycy4gMiBjb21tZW50ZWQgbGluZXMgYmVsb3cgbm90IG5lZWRlZC4KICAgICAgLy9zdGF0ZS5uZXh0ID0gc3RhdGUuY29kZXM7CiAgICAgIC8vc3RhdGUubGVuY29kZSA9IHN0YXRlLm5leHQ7CiAgICAgIC8vIFN3aXRjaCB0byB1c2UgZHluYW1pYyB0YWJsZQogICAgICBzdGF0ZS5sZW5jb2RlID0gc3RhdGUubGVuZHluOwogICAgICBzdGF0ZS5sZW5iaXRzID0gNzsKCiAgICAgIG9wdHMgPSB7IGJpdHM6IHN0YXRlLmxlbmJpdHMgfTsKICAgICAgcmV0ID0gaW5mbGF0ZV90YWJsZShDT0RFUywgc3RhdGUubGVucywgMCwgMTksIHN0YXRlLmxlbmNvZGUsIDAsIHN0YXRlLndvcmssIG9wdHMpOwogICAgICBzdGF0ZS5sZW5iaXRzID0gb3B0cy5iaXRzOwoKICAgICAgaWYgKHJldCkgewogICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgY29kZSBsZW5ndGhzIHNldCc7CiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICAvL1RyYWNldigoc3RkZXJyLCAiaW5mbGF0ZTogICAgICAgY29kZSBsZW5ndGhzIG9rXG4iKSk7CiAgICAgIHN0YXRlLmhhdmUgPSAwOwogICAgICBzdGF0ZS5tb2RlID0gQ09ERUxFTlM7CiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgIGNhc2UgQ09ERUxFTlM6CiAgICAgIHdoaWxlIChzdGF0ZS5oYXZlIDwgc3RhdGUubmxlbiArIHN0YXRlLm5kaXN0KSB7CiAgICAgICAgZm9yICg7OykgewogICAgICAgICAgaGVyZSA9IHN0YXRlLmxlbmNvZGVbaG9sZCAmICgoMSA8PCBzdGF0ZS5sZW5iaXRzKSAtIDEpXTsvKkJJVFMoc3RhdGUubGVuYml0cykqLwogICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7CiAgICAgICAgICBoZXJlX29wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmY7CiAgICAgICAgICBoZXJlX3ZhbCA9IGhlcmUgJiAweGZmZmY7CgogICAgICAgICAgaWYgKChoZXJlX2JpdHMpIDw9IGJpdHMpIHsgYnJlYWs7IH0KICAgICAgICAgIC8vLS0tIFBVTExCWVRFKCkgLS0tLy8KICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAvLy0tLS8vCiAgICAgICAgfQogICAgICAgIGlmIChoZXJlX3ZhbCA8IDE2KSB7CiAgICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vCiAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzOwogICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7CiAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICBzdGF0ZS5sZW5zW3N0YXRlLmhhdmUrK10gPSBoZXJlX3ZhbDsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICBpZiAoaGVyZV92YWwgPT09IDE2KSB7CiAgICAgICAgICAgIC8vPT09IE5FRURCSVRTKGhlcmUuYml0cyArIDIpOwogICAgICAgICAgICBuID0gaGVyZV9iaXRzICsgMjsKICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7CiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLz09PS8vCiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy8KICAgICAgICAgICAgaG9sZCA+Pj49IGhlcmVfYml0czsKICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7CiAgICAgICAgICAgIC8vLS0tLy8KICAgICAgICAgICAgaWYgKHN0YXRlLmhhdmUgPT09IDApIHsKICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGJpdCBsZW5ndGggcmVwZWF0JzsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxlbiA9IHN0YXRlLmxlbnNbc3RhdGUuaGF2ZSAtIDFdOwogICAgICAgICAgICBjb3B5ID0gMyArIChob2xkICYgMHgwMyk7Ly9CSVRTKDIpOwogICAgICAgICAgICAvLy0tLSBEUk9QQklUUygyKSAtLS0vLwogICAgICAgICAgICBob2xkID4+Pj0gMjsKICAgICAgICAgICAgYml0cyAtPSAyOwogICAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmIChoZXJlX3ZhbCA9PT0gMTcpIHsKICAgICAgICAgICAgLy89PT0gTkVFREJJVFMoaGVyZS5iaXRzICsgMyk7CiAgICAgICAgICAgIG4gPSBoZXJlX2JpdHMgKyAzOwogICAgICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoaGVyZS5iaXRzKSAtLS0vLwogICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzOwogICAgICAgICAgICBiaXRzIC09IGhlcmVfYml0czsKICAgICAgICAgICAgLy8tLS0vLwogICAgICAgICAgICBsZW4gPSAwOwogICAgICAgICAgICBjb3B5ID0gMyArIChob2xkICYgMHgwNyk7Ly9CSVRTKDMpOwogICAgICAgICAgICAvLy0tLSBEUk9QQklUUygzKSAtLS0vLwogICAgICAgICAgICBob2xkID4+Pj0gMzsKICAgICAgICAgICAgYml0cyAtPSAzOwogICAgICAgICAgICAvLy0tLS8vCiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgLy89PT0gTkVFREJJVFMoaGVyZS5iaXRzICsgNyk7CiAgICAgICAgICAgIG4gPSBoZXJlX2JpdHMgKyA3OwogICAgICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vPT09Ly8KICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoaGVyZS5iaXRzKSAtLS0vLwogICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzOwogICAgICAgICAgICBiaXRzIC09IGhlcmVfYml0czsKICAgICAgICAgICAgLy8tLS0vLwogICAgICAgICAgICBsZW4gPSAwOwogICAgICAgICAgICBjb3B5ID0gMTEgKyAoaG9sZCAmIDB4N2YpOy8vQklUUyg3KTsKICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoNykgLS0tLy8KICAgICAgICAgICAgaG9sZCA+Pj49IDc7CiAgICAgICAgICAgIGJpdHMgLT0gNzsKICAgICAgICAgICAgLy8tLS0vLwogICAgICAgICAgfQogICAgICAgICAgaWYgKHN0YXRlLmhhdmUgKyBjb3B5ID4gc3RhdGUubmxlbiArIHN0YXRlLm5kaXN0KSB7CiAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgYml0IGxlbmd0aCByZXBlYXQnOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIHdoaWxlIChjb3B5LS0pIHsKICAgICAgICAgICAgc3RhdGUubGVuc1tzdGF0ZS5oYXZlKytdID0gbGVuOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgLyogaGFuZGxlIGVycm9yIGJyZWFrcyBpbiB3aGlsZSAqLwogICAgICBpZiAoc3RhdGUubW9kZSA9PT0gQkFEKSB7IGJyZWFrOyB9CgogICAgICAvKiBjaGVjayBmb3IgZW5kLW9mLWJsb2NrIGNvZGUgKGJldHRlciBoYXZlIG9uZSkgKi8KICAgICAgaWYgKHN0YXRlLmxlbnNbMjU2XSA9PT0gMCkgewogICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgY29kZSAtLSBtaXNzaW5nIGVuZC1vZi1ibG9jayc7CiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgLyogYnVpbGQgY29kZSB0YWJsZXMgLS0gbm90ZTogZG8gbm90IGNoYW5nZSB0aGUgbGVuYml0cyBvciBkaXN0Yml0cwogICAgICAgICB2YWx1ZXMgaGVyZSAoOSBhbmQgNikgd2l0aG91dCByZWFkaW5nIHRoZSBjb21tZW50cyBpbiBpbmZ0cmVlcy5oCiAgICAgICAgIGNvbmNlcm5pbmcgdGhlIEVOT1VHSCBjb25zdGFudHMsIHdoaWNoIGRlcGVuZCBvbiB0aG9zZSB2YWx1ZXMgKi8KICAgICAgc3RhdGUubGVuYml0cyA9IDk7CgogICAgICBvcHRzID0geyBiaXRzOiBzdGF0ZS5sZW5iaXRzIH07CiAgICAgIHJldCA9IGluZmxhdGVfdGFibGUoTEVOUywgc3RhdGUubGVucywgMCwgc3RhdGUubmxlbiwgc3RhdGUubGVuY29kZSwgMCwgc3RhdGUud29yaywgb3B0cyk7CiAgICAgIC8vIFdlIGhhdmUgc2VwYXJhdGUgdGFibGVzICYgbm8gcG9pbnRlcnMuIDIgY29tbWVudGVkIGxpbmVzIGJlbG93IG5vdCBuZWVkZWQuCiAgICAgIC8vIHN0YXRlLm5leHRfaW5kZXggPSBvcHRzLnRhYmxlX2luZGV4OwogICAgICBzdGF0ZS5sZW5iaXRzID0gb3B0cy5iaXRzOwogICAgICAvLyBzdGF0ZS5sZW5jb2RlID0gc3RhdGUubmV4dDsKCiAgICAgIGlmIChyZXQpIHsKICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGxpdGVyYWwvbGVuZ3RocyBzZXQnOwogICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIHN0YXRlLmRpc3RiaXRzID0gNjsKICAgICAgLy9zdGF0ZS5kaXN0Y29kZS5jb3B5KHN0YXRlLmNvZGVzKTsKICAgICAgLy8gU3dpdGNoIHRvIHVzZSBkeW5hbWljIHRhYmxlCiAgICAgIHN0YXRlLmRpc3Rjb2RlID0gc3RhdGUuZGlzdGR5bjsKICAgICAgb3B0cyA9IHsgYml0czogc3RhdGUuZGlzdGJpdHMgfTsKICAgICAgcmV0ID0gaW5mbGF0ZV90YWJsZShESVNUUywgc3RhdGUubGVucywgc3RhdGUubmxlbiwgc3RhdGUubmRpc3QsIHN0YXRlLmRpc3Rjb2RlLCAwLCBzdGF0ZS53b3JrLCBvcHRzKTsKICAgICAgLy8gV2UgaGF2ZSBzZXBhcmF0ZSB0YWJsZXMgJiBubyBwb2ludGVycy4gMiBjb21tZW50ZWQgbGluZXMgYmVsb3cgbm90IG5lZWRlZC4KICAgICAgLy8gc3RhdGUubmV4dF9pbmRleCA9IG9wdHMudGFibGVfaW5kZXg7CiAgICAgIHN0YXRlLmRpc3RiaXRzID0gb3B0cy5iaXRzOwogICAgICAvLyBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLm5leHQ7CgogICAgICBpZiAocmV0KSB7CiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZXMgc2V0JzsKICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIC8vVHJhY2V2KChzdGRlcnIsICdpbmZsYXRlOiAgICAgICBjb2RlcyBva1xuJykpOwogICAgICBzdGF0ZS5tb2RlID0gTEVOXzsKICAgICAgaWYgKGZsdXNoID09PSBaX1RSRUVTKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICBjYXNlIExFTl86CiAgICAgIHN0YXRlLm1vZGUgPSBMRU47CiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgIGNhc2UgTEVOOgogICAgICBpZiAoaGF2ZSA+PSA2ICYmIGxlZnQgPj0gMjU4KSB7CiAgICAgICAgLy8tLS0gUkVTVE9SRSgpIC0tLQogICAgICAgIHN0cm0ubmV4dF9vdXQgPSBwdXQ7CiAgICAgICAgc3RybS5hdmFpbF9vdXQgPSBsZWZ0OwogICAgICAgIHN0cm0ubmV4dF9pbiA9IG5leHQ7CiAgICAgICAgc3RybS5hdmFpbF9pbiA9IGhhdmU7CiAgICAgICAgc3RhdGUuaG9sZCA9IGhvbGQ7CiAgICAgICAgc3RhdGUuYml0cyA9IGJpdHM7CiAgICAgICAgLy8tLS0KICAgICAgICBpbmZsYXRlX2Zhc3Qoc3RybSwgX291dCk7CiAgICAgICAgLy8tLS0gTE9BRCgpIC0tLQogICAgICAgIHB1dCA9IHN0cm0ubmV4dF9vdXQ7CiAgICAgICAgb3V0cHV0ID0gc3RybS5vdXRwdXQ7CiAgICAgICAgbGVmdCA9IHN0cm0uYXZhaWxfb3V0OwogICAgICAgIG5leHQgPSBzdHJtLm5leHRfaW47CiAgICAgICAgaW5wdXQgPSBzdHJtLmlucHV0OwogICAgICAgIGhhdmUgPSBzdHJtLmF2YWlsX2luOwogICAgICAgIGhvbGQgPSBzdGF0ZS5ob2xkOwogICAgICAgIGJpdHMgPSBzdGF0ZS5iaXRzOwogICAgICAgIC8vLS0tCgogICAgICAgIGlmIChzdGF0ZS5tb2RlID09PSBUWVBFKSB7CiAgICAgICAgICBzdGF0ZS5iYWNrID0gLTE7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIHN0YXRlLmJhY2sgPSAwOwogICAgICBmb3IgKDs7KSB7CiAgICAgICAgaGVyZSA9IHN0YXRlLmxlbmNvZGVbaG9sZCAmICgoMSA8PCBzdGF0ZS5sZW5iaXRzKSAtIDEpXTsgIC8qQklUUyhzdGF0ZS5sZW5iaXRzKSovCiAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7CiAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmOwogICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjsKCiAgICAgICAgaWYgKGhlcmVfYml0cyA8PSBiaXRzKSB7IGJyZWFrOyB9CiAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vLwogICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICAgIGhhdmUtLTsKICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgLy8tLS0vLwogICAgICB9CiAgICAgIGlmIChoZXJlX29wICYmIChoZXJlX29wICYgMHhmMCkgPT09IDApIHsKICAgICAgICBsYXN0X2JpdHMgPSBoZXJlX2JpdHM7CiAgICAgICAgbGFzdF9vcCA9IGhlcmVfb3A7CiAgICAgICAgbGFzdF92YWwgPSBoZXJlX3ZhbDsKICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICBoZXJlID0gc3RhdGUubGVuY29kZVtsYXN0X3ZhbCArCiAgICAgICAgICAgICAgICAgICgoaG9sZCAmICgoMSA8PCAobGFzdF9iaXRzICsgbGFzdF9vcCkpIC0gMSkpLypCSVRTKGxhc3QuYml0cyArIGxhc3Qub3ApKi8gPj4gbGFzdF9iaXRzKV07CiAgICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDsKICAgICAgICAgIGhlcmVfb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZjsKICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjsKCiAgICAgICAgICBpZiAoKGxhc3RfYml0cyArIGhlcmVfYml0cykgPD0gYml0cykgeyBicmVhazsgfQogICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vLwogICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICBoYXZlLS07CiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgIC8vLS0tLy8KICAgICAgICB9CiAgICAgICAgLy8tLS0gRFJPUEJJVFMobGFzdC5iaXRzKSAtLS0vLwogICAgICAgIGhvbGQgPj4+PSBsYXN0X2JpdHM7CiAgICAgICAgYml0cyAtPSBsYXN0X2JpdHM7CiAgICAgICAgLy8tLS0vLwogICAgICAgIHN0YXRlLmJhY2sgKz0gbGFzdF9iaXRzOwogICAgICB9CiAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy8KICAgICAgaG9sZCA+Pj49IGhlcmVfYml0czsKICAgICAgYml0cyAtPSBoZXJlX2JpdHM7CiAgICAgIC8vLS0tLy8KICAgICAgc3RhdGUuYmFjayArPSBoZXJlX2JpdHM7CiAgICAgIHN0YXRlLmxlbmd0aCA9IGhlcmVfdmFsOwogICAgICBpZiAoaGVyZV9vcCA9PT0gMCkgewogICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBoZXJlLnZhbCA+PSAweDIwICYmIGhlcmUudmFsIDwgMHg3ZiA/CiAgICAgICAgLy8gICAgICAgICJpbmZsYXRlOiAgICAgICAgIGxpdGVyYWwgJyVjJ1xuIiA6CiAgICAgICAgLy8gICAgICAgICJpbmZsYXRlOiAgICAgICAgIGxpdGVyYWwgMHglMDJ4XG4iLCBoZXJlLnZhbCkpOwogICAgICAgIHN0YXRlLm1vZGUgPSBMSVQ7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYgKGhlcmVfb3AgJiAzMikgewogICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCAiaW5mbGF0ZTogICAgICAgICBlbmQgb2YgYmxvY2tcbiIpKTsKICAgICAgICBzdGF0ZS5iYWNrID0gLTE7CiAgICAgICAgc3RhdGUubW9kZSA9IFRZUEU7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYgKGhlcmVfb3AgJiA2NCkgewogICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgbGl0ZXJhbC9sZW5ndGggY29kZSc7CiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBzdGF0ZS5leHRyYSA9IGhlcmVfb3AgJiAxNTsKICAgICAgc3RhdGUubW9kZSA9IExFTkVYVDsKICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgY2FzZSBMRU5FWFQ6CiAgICAgIGlmIChzdGF0ZS5leHRyYSkgewogICAgICAgIC8vPT09IE5FRURCSVRTKHN0YXRlLmV4dHJhKTsKICAgICAgICBuID0gc3RhdGUuZXh0cmE7CiAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7CiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgYml0cyArPSA4OwogICAgICAgIH0KICAgICAgICAvLz09PS8vCiAgICAgICAgc3RhdGUubGVuZ3RoICs9IGhvbGQgJiAoKDEgPDwgc3RhdGUuZXh0cmEpIC0gMSkvKkJJVFMoc3RhdGUuZXh0cmEpKi87CiAgICAgICAgLy8tLS0gRFJPUEJJVFMoc3RhdGUuZXh0cmEpIC0tLS8vCiAgICAgICAgaG9sZCA+Pj49IHN0YXRlLmV4dHJhOwogICAgICAgIGJpdHMgLT0gc3RhdGUuZXh0cmE7CiAgICAgICAgLy8tLS0vLwogICAgICAgIHN0YXRlLmJhY2sgKz0gc3RhdGUuZXh0cmE7CiAgICAgIH0KICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsICJpbmZsYXRlOiAgICAgICAgIGxlbmd0aCAldVxuIiwgc3RhdGUubGVuZ3RoKSk7CiAgICAgIHN0YXRlLndhcyA9IHN0YXRlLmxlbmd0aDsKICAgICAgc3RhdGUubW9kZSA9IERJU1Q7CiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgIGNhc2UgRElTVDoKICAgICAgZm9yICg7OykgewogICAgICAgIGhlcmUgPSBzdGF0ZS5kaXN0Y29kZVtob2xkICYgKCgxIDw8IHN0YXRlLmRpc3RiaXRzKSAtIDEpXTsvKkJJVFMoc3RhdGUuZGlzdGJpdHMpKi8KICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDsKICAgICAgICBoZXJlX29wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmY7CiAgICAgICAgaGVyZV92YWwgPSBoZXJlICYgMHhmZmZmOwoKICAgICAgICBpZiAoKGhlcmVfYml0cykgPD0gYml0cykgeyBicmVhazsgfQogICAgICAgIC8vLS0tIFBVTExCWVRFKCkgLS0tLy8KICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICBoYXZlLS07CiAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgYml0cyArPSA4OwogICAgICAgIC8vLS0tLy8KICAgICAgfQogICAgICBpZiAoKGhlcmVfb3AgJiAweGYwKSA9PT0gMCkgewogICAgICAgIGxhc3RfYml0cyA9IGhlcmVfYml0czsKICAgICAgICBsYXN0X29wID0gaGVyZV9vcDsKICAgICAgICBsYXN0X3ZhbCA9IGhlcmVfdmFsOwogICAgICAgIGZvciAoOzspIHsKICAgICAgICAgIGhlcmUgPSBzdGF0ZS5kaXN0Y29kZVtsYXN0X3ZhbCArCiAgICAgICAgICAgICAgICAgICgoaG9sZCAmICgoMSA8PCAobGFzdF9iaXRzICsgbGFzdF9vcCkpIC0gMSkpLypCSVRTKGxhc3QuYml0cyArIGxhc3Qub3ApKi8gPj4gbGFzdF9iaXRzKV07CiAgICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDsKICAgICAgICAgIGhlcmVfb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZjsKICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjsKCiAgICAgICAgICBpZiAoKGxhc3RfYml0cyArIGhlcmVfYml0cykgPD0gYml0cykgeyBicmVhazsgfQogICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vLwogICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICBoYXZlLS07CiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgIC8vLS0tLy8KICAgICAgICB9CiAgICAgICAgLy8tLS0gRFJPUEJJVFMobGFzdC5iaXRzKSAtLS0vLwogICAgICAgIGhvbGQgPj4+PSBsYXN0X2JpdHM7CiAgICAgICAgYml0cyAtPSBsYXN0X2JpdHM7CiAgICAgICAgLy8tLS0vLwogICAgICAgIHN0YXRlLmJhY2sgKz0gbGFzdF9iaXRzOwogICAgICB9CiAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy8KICAgICAgaG9sZCA+Pj49IGhlcmVfYml0czsKICAgICAgYml0cyAtPSBoZXJlX2JpdHM7CiAgICAgIC8vLS0tLy8KICAgICAgc3RhdGUuYmFjayArPSBoZXJlX2JpdHM7CiAgICAgIGlmIChoZXJlX29wICYgNjQpIHsKICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIGNvZGUnOwogICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgc3RhdGUub2Zmc2V0ID0gaGVyZV92YWw7CiAgICAgIHN0YXRlLmV4dHJhID0gKGhlcmVfb3ApICYgMTU7CiAgICAgIHN0YXRlLm1vZGUgPSBESVNURVhUOwogICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICBjYXNlIERJU1RFWFQ6CiAgICAgIGlmIChzdGF0ZS5leHRyYSkgewogICAgICAgIC8vPT09IE5FRURCSVRTKHN0YXRlLmV4dHJhKTsKICAgICAgICBuID0gc3RhdGUuZXh0cmE7CiAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7CiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH0KICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgYml0cyArPSA4OwogICAgICAgIH0KICAgICAgICAvLz09PS8vCiAgICAgICAgc3RhdGUub2Zmc2V0ICs9IGhvbGQgJiAoKDEgPDwgc3RhdGUuZXh0cmEpIC0gMSkvKkJJVFMoc3RhdGUuZXh0cmEpKi87CiAgICAgICAgLy8tLS0gRFJPUEJJVFMoc3RhdGUuZXh0cmEpIC0tLS8vCiAgICAgICAgaG9sZCA+Pj49IHN0YXRlLmV4dHJhOwogICAgICAgIGJpdHMgLT0gc3RhdGUuZXh0cmE7CiAgICAgICAgLy8tLS0vLwogICAgICAgIHN0YXRlLmJhY2sgKz0gc3RhdGUuZXh0cmE7CiAgICAgIH0KLy8jaWZkZWYgSU5GTEFURV9TVFJJQ1QKICAgICAgaWYgKHN0YXRlLm9mZnNldCA+IHN0YXRlLmRtYXgpIHsKICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayc7CiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICBicmVhazsKICAgICAgfQovLyNlbmRpZgogICAgICAvL1RyYWNldnYoKHN0ZGVyciwgImluZmxhdGU6ICAgICAgICAgZGlzdGFuY2UgJXVcbiIsIHN0YXRlLm9mZnNldCkpOwogICAgICBzdGF0ZS5tb2RlID0gTUFUQ0g7CiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgIGNhc2UgTUFUQ0g6CiAgICAgIGlmIChsZWZ0ID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICBjb3B5ID0gX291dCAtIGxlZnQ7CiAgICAgIGlmIChzdGF0ZS5vZmZzZXQgPiBjb3B5KSB7ICAgICAgICAgLyogY29weSBmcm9tIHdpbmRvdyAqLwogICAgICAgIGNvcHkgPSBzdGF0ZS5vZmZzZXQgLSBjb3B5OwogICAgICAgIGlmIChjb3B5ID4gc3RhdGUud2hhdmUpIHsKICAgICAgICAgIGlmIChzdGF0ZS5zYW5lKSB7CiAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrJzsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9Ci8vICghKSBUaGlzIGJsb2NrIGlzIGRpc2FibGVkIGluIHpsaWIgZGVmYWlsdHMsCi8vIGRvbid0IGVuYWJsZSBpdCBmb3IgYmluYXJ5IGNvbXBhdGliaWxpdHkKLy8jaWZkZWYgSU5GTEFURV9BTExPV19JTlZBTElEX0RJU1RBTkNFX1RPT0ZBUl9BUlJSCi8vICAgICAgICAgIFRyYWNlKChzdGRlcnIsICJpbmZsYXRlLmMgdG9vIGZhclxuIikpOwovLyAgICAgICAgICBjb3B5IC09IHN0YXRlLndoYXZlOwovLyAgICAgICAgICBpZiAoY29weSA+IHN0YXRlLmxlbmd0aCkgeyBjb3B5ID0gc3RhdGUubGVuZ3RoOyB9Ci8vICAgICAgICAgIGlmIChjb3B5ID4gbGVmdCkgeyBjb3B5ID0gbGVmdDsgfQovLyAgICAgICAgICBsZWZ0IC09IGNvcHk7Ci8vICAgICAgICAgIHN0YXRlLmxlbmd0aCAtPSBjb3B5OwovLyAgICAgICAgICBkbyB7Ci8vICAgICAgICAgICAgb3V0cHV0W3B1dCsrXSA9IDA7Ci8vICAgICAgICAgIH0gd2hpbGUgKC0tY29weSk7Ci8vICAgICAgICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIHsgc3RhdGUubW9kZSA9IExFTjsgfQovLyAgICAgICAgICBicmVhazsKLy8jZW5kaWYKICAgICAgICB9CiAgICAgICAgaWYgKGNvcHkgPiBzdGF0ZS53bmV4dCkgewogICAgICAgICAgY29weSAtPSBzdGF0ZS53bmV4dDsKICAgICAgICAgIGZyb20gPSBzdGF0ZS53c2l6ZSAtIGNvcHk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgZnJvbSA9IHN0YXRlLnduZXh0IC0gY29weTsKICAgICAgICB9CiAgICAgICAgaWYgKGNvcHkgPiBzdGF0ZS5sZW5ndGgpIHsgY29weSA9IHN0YXRlLmxlbmd0aDsgfQogICAgICAgIGZyb21fc291cmNlID0gc3RhdGUud2luZG93OwogICAgICB9CiAgICAgIGVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGNvcHkgZnJvbSBvdXRwdXQgKi8KICAgICAgICBmcm9tX3NvdXJjZSA9IG91dHB1dDsKICAgICAgICBmcm9tID0gcHV0IC0gc3RhdGUub2Zmc2V0OwogICAgICAgIGNvcHkgPSBzdGF0ZS5sZW5ndGg7CiAgICAgIH0KICAgICAgaWYgKGNvcHkgPiBsZWZ0KSB7IGNvcHkgPSBsZWZ0OyB9CiAgICAgIGxlZnQgLT0gY29weTsKICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7CiAgICAgIGRvIHsKICAgICAgICBvdXRwdXRbcHV0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTsKICAgICAgfSB3aGlsZSAoLS1jb3B5KTsKICAgICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgeyBzdGF0ZS5tb2RlID0gTEVOOyB9CiAgICAgIGJyZWFrOwogICAgY2FzZSBMSVQ6CiAgICAgIGlmIChsZWZ0ID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfQogICAgICBvdXRwdXRbcHV0KytdID0gc3RhdGUubGVuZ3RoOwogICAgICBsZWZ0LS07CiAgICAgIHN0YXRlLm1vZGUgPSBMRU47CiAgICAgIGJyZWFrOwogICAgY2FzZSBDSEVDSzoKICAgICAgaWYgKHN0YXRlLndyYXApIHsKICAgICAgICAvLz09PSBORUVEQklUUygzMik7CiAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikgewogICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAvLyBVc2UgJ3wnIGluc2RlYWQgb2YgJysnIHRvIG1ha2Ugc3VyZSB0aGF0IHJlc3VsdCBpcyBzaWduZWQKICAgICAgICAgIGhvbGQgfD0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgYml0cyArPSA4OwogICAgICAgIH0KICAgICAgICAvLz09PS8vCiAgICAgICAgX291dCAtPSBsZWZ0OwogICAgICAgIHN0cm0udG90YWxfb3V0ICs9IF9vdXQ7CiAgICAgICAgc3RhdGUudG90YWwgKz0gX291dDsKICAgICAgICBpZiAoX291dCkgewogICAgICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0KICAgICAgICAgICAgICAvKlVQREFURShzdGF0ZS5jaGVjaywgcHV0IC0gX291dCwgX291dCk7Ki8KICAgICAgICAgICAgICAoc3RhdGUuZmxhZ3MgPyBjcmMzMihzdGF0ZS5jaGVjaywgb3V0cHV0LCBfb3V0LCBwdXQgLSBfb3V0KSA6IGFkbGVyMzIoc3RhdGUuY2hlY2ssIG91dHB1dCwgX291dCwgcHV0IC0gX291dCkpOwoKICAgICAgICB9CiAgICAgICAgX291dCA9IGxlZnQ7CiAgICAgICAgLy8gTkI6IGNyYzMyIHN0b3JlZCBhcyBzaWduZWQgMzItYml0IGludCwgenN3YXAzMiByZXR1cm5zIHNpZ25lZCB0b28KICAgICAgICBpZiAoKHN0YXRlLmZsYWdzID8gaG9sZCA6IHpzd2FwMzIoaG9sZCkpICE9PSBzdGF0ZS5jaGVjaykgewogICAgICAgICAgc3RybS5tc2cgPSAnaW5jb3JyZWN0IGRhdGEgY2hlY2snOwogICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICAvLz09PSBJTklUQklUUygpOwogICAgICAgIGhvbGQgPSAwOwogICAgICAgIGJpdHMgPSAwOwogICAgICAgIC8vPT09Ly8KICAgICAgICAvL1RyYWNldigoc3RkZXJyLCAiaW5mbGF0ZTogICBjaGVjayBtYXRjaGVzIHRyYWlsZXJcbiIpKTsKICAgICAgfQogICAgICBzdGF0ZS5tb2RlID0gTEVOR1RIOwogICAgICAvKiBmYWxscyB0aHJvdWdoICovCiAgICBjYXNlIExFTkdUSDoKICAgICAgaWYgKHN0YXRlLndyYXAgJiYgc3RhdGUuZmxhZ3MpIHsKICAgICAgICAvLz09PSBORUVEQklUUygzMik7CiAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikgewogICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9CiAgICAgICAgICBoYXZlLS07CiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICB9CiAgICAgICAgLy89PT0vLwogICAgICAgIGlmIChob2xkICE9PSAoc3RhdGUudG90YWwgJiAweGZmZmZmZmZmKSkgewogICAgICAgICAgc3RybS5tc2cgPSAnaW5jb3JyZWN0IGxlbmd0aCBjaGVjayc7CiAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIC8vPT09IElOSVRCSVRTKCk7CiAgICAgICAgaG9sZCA9IDA7CiAgICAgICAgYml0cyA9IDA7CiAgICAgICAgLy89PT0vLwogICAgICAgIC8vVHJhY2V2KChzdGRlcnIsICJpbmZsYXRlOiAgIGxlbmd0aCBtYXRjaGVzIHRyYWlsZXJcbiIpKTsKICAgICAgfQogICAgICBzdGF0ZS5tb2RlID0gRE9ORTsKICAgICAgLyogZmFsbHMgdGhyb3VnaCAqLwogICAgY2FzZSBET05FOgogICAgICByZXQgPSBaX1NUUkVBTV9FTkQ7CiAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgIGNhc2UgQkFEOgogICAgICByZXQgPSBaX0RBVEFfRVJST1I7CiAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgIGNhc2UgTUVNOgogICAgICByZXR1cm4gWl9NRU1fRVJST1I7CiAgICBjYXNlIFNZTkM6CiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjsKICAgIH0KICB9CgogIC8vIGluZl9sZWF2ZSA8LSBoZXJlIGlzIHJlYWwgcGxhY2UgZm9yICJnb3RvIGluZl9sZWF2ZSIsIGVtdWxhdGVkIHZpYSAiYnJlYWsgaW5mX2xlYXZlIgoKICAvKgogICAgIFJldHVybiBmcm9tIGluZmxhdGUoKSwgdXBkYXRpbmcgdGhlIHRvdGFsIGNvdW50cyBhbmQgdGhlIGNoZWNrIHZhbHVlLgogICAgIElmIHRoZXJlIHdhcyBubyBwcm9ncmVzcyBkdXJpbmcgdGhlIGluZmxhdGUoKSBjYWxsLCByZXR1cm4gYSBidWZmZXIKICAgICBlcnJvci4gIENhbGwgdXBkYXRld2luZG93KCkgdG8gY3JlYXRlIGFuZC9vciB1cGRhdGUgdGhlIHdpbmRvdyBzdGF0ZS4KICAgICBOb3RlOiBhIG1lbW9yeSBlcnJvciBmcm9tIGluZmxhdGUoKSBpcyBub24tcmVjb3ZlcmFibGUuCiAgICovCgogIC8vLS0tIFJFU1RPUkUoKSAtLS0KICBzdHJtLm5leHRfb3V0ID0gcHV0OwogIHN0cm0uYXZhaWxfb3V0ID0gbGVmdDsKICBzdHJtLm5leHRfaW4gPSBuZXh0OwogIHN0cm0uYXZhaWxfaW4gPSBoYXZlOwogIHN0YXRlLmhvbGQgPSBob2xkOwogIHN0YXRlLmJpdHMgPSBiaXRzOwogIC8vLS0tCgogIGlmIChzdGF0ZS53c2l6ZSB8fCAoX291dCAhPT0gc3RybS5hdmFpbF9vdXQgJiYgc3RhdGUubW9kZSA8IEJBRCAmJgogICAgICAgICAgICAgICAgICAgICAgKHN0YXRlLm1vZGUgPCBDSEVDSyB8fCBmbHVzaCAhPT0gWl9GSU5JU0gpKSkgewogICAgaWYgKHVwZGF0ZXdpbmRvdyhzdHJtLCBzdHJtLm91dHB1dCwgc3RybS5uZXh0X291dCwgX291dCAtIHN0cm0uYXZhaWxfb3V0KSkgewogICAgICBzdGF0ZS5tb2RlID0gTUVNOwogICAgICByZXR1cm4gWl9NRU1fRVJST1I7CiAgICB9CiAgfQogIF9pbiAtPSBzdHJtLmF2YWlsX2luOwogIF9vdXQgLT0gc3RybS5hdmFpbF9vdXQ7CiAgc3RybS50b3RhbF9pbiArPSBfaW47CiAgc3RybS50b3RhbF9vdXQgKz0gX291dDsKICBzdGF0ZS50b3RhbCArPSBfb3V0OwogIGlmIChzdGF0ZS53cmFwICYmIF9vdXQpIHsKICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IC8qVVBEQVRFKHN0YXRlLmNoZWNrLCBzdHJtLm5leHRfb3V0IC0gX291dCwgX291dCk7Ki8KICAgICAgKHN0YXRlLmZsYWdzID8gY3JjMzIoc3RhdGUuY2hlY2ssIG91dHB1dCwgX291dCwgc3RybS5uZXh0X291dCAtIF9vdXQpIDogYWRsZXIzMihzdGF0ZS5jaGVjaywgb3V0cHV0LCBfb3V0LCBzdHJtLm5leHRfb3V0IC0gX291dCkpOwogIH0KICBzdHJtLmRhdGFfdHlwZSA9IHN0YXRlLmJpdHMgKyAoc3RhdGUubGFzdCA/IDY0IDogMCkgKwogICAgICAgICAgICAgICAgICAgIChzdGF0ZS5tb2RlID09PSBUWVBFID8gMTI4IDogMCkgKwogICAgICAgICAgICAgICAgICAgIChzdGF0ZS5tb2RlID09PSBMRU5fIHx8IHN0YXRlLm1vZGUgPT09IENPUFlfID8gMjU2IDogMCk7CiAgaWYgKCgoX2luID09PSAwICYmIF9vdXQgPT09IDApIHx8IGZsdXNoID09PSBaX0ZJTklTSCkgJiYgcmV0ID09PSBaX09LKSB7CiAgICByZXQgPSBaX0JVRl9FUlJPUjsKICB9CiAgcmV0dXJuIHJldDsKfQoKZnVuY3Rpb24gaW5mbGF0ZUVuZChzdHJtKSB7CgogIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSAvKnx8IHN0cm0tPnpmcmVlID09IChmcmVlX2Z1bmMpMCovKSB7CiAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7CiAgfQoKICB2YXIgc3RhdGUgPSBzdHJtLnN0YXRlOwogIGlmIChzdGF0ZS53aW5kb3cpIHsKICAgIHN0YXRlLndpbmRvdyA9IG51bGw7CiAgfQogIHN0cm0uc3RhdGUgPSBudWxsOwogIHJldHVybiBaX09LOwp9CgpmdW5jdGlvbiBpbmZsYXRlR2V0SGVhZGVyKHN0cm0sIGhlYWQpIHsKICB2YXIgc3RhdGU7CgogIC8qIGNoZWNrIHN0YXRlICovCiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfQogIHN0YXRlID0gc3RybS5zdGF0ZTsKICBpZiAoKHN0YXRlLndyYXAgJiAyKSA9PT0gMCkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH0KCiAgLyogc2F2ZSBoZWFkZXIgc3RydWN0dXJlICovCiAgc3RhdGUuaGVhZCA9IGhlYWQ7CiAgaGVhZC5kb25lID0gZmFsc2U7CiAgcmV0dXJuIFpfT0s7Cn0KCmZ1bmN0aW9uIGluZmxhdGVTZXREaWN0aW9uYXJ5KHN0cm0sIGRpY3Rpb25hcnkpIHsKICB2YXIgZGljdExlbmd0aCA9IGRpY3Rpb25hcnkubGVuZ3RoOwoKICB2YXIgc3RhdGU7CiAgdmFyIGRpY3RpZDsKICB2YXIgcmV0OwoKICAvKiBjaGVjayBzdGF0ZSAqLwogIGlmICghc3RybSAvKiA9PSBaX05VTEwgKi8gfHwgIXN0cm0uc3RhdGUgLyogPT0gWl9OVUxMICovKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfQogIHN0YXRlID0gc3RybS5zdGF0ZTsKCiAgaWYgKHN0YXRlLndyYXAgIT09IDAgJiYgc3RhdGUubW9kZSAhPT0gRElDVCkgewogICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOwogIH0KCiAgLyogY2hlY2sgZm9yIGNvcnJlY3QgZGljdGlvbmFyeSBpZGVudGlmaWVyICovCiAgaWYgKHN0YXRlLm1vZGUgPT09IERJQ1QpIHsKICAgIGRpY3RpZCA9IDE7IC8qIGFkbGVyMzIoMCwgbnVsbCwgMCkqLwogICAgLyogZGljdGlkID0gYWRsZXIzMihkaWN0aWQsIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgpOyAqLwogICAgZGljdGlkID0gYWRsZXIzMihkaWN0aWQsIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgsIDApOwogICAgaWYgKGRpY3RpZCAhPT0gc3RhdGUuY2hlY2spIHsKICAgICAgcmV0dXJuIFpfREFUQV9FUlJPUjsKICAgIH0KICB9CiAgLyogY29weSBkaWN0aW9uYXJ5IHRvIHdpbmRvdyB1c2luZyB1cGRhdGV3aW5kb3coKSwgd2hpY2ggd2lsbCBhbWVuZCB0aGUKICAgZXhpc3RpbmcgZGljdGlvbmFyeSBpZiBhcHByb3ByaWF0ZSAqLwogIHJldCA9IHVwZGF0ZXdpbmRvdyhzdHJtLCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoLCBkaWN0TGVuZ3RoKTsKICBpZiAocmV0KSB7CiAgICBzdGF0ZS5tb2RlID0gTUVNOwogICAgcmV0dXJuIFpfTUVNX0VSUk9SOwogIH0KICBzdGF0ZS5oYXZlZGljdCA9IDE7CiAgLy8gVHJhY2V2KChzdGRlcnIsICJpbmZsYXRlOiAgIGRpY3Rpb25hcnkgc2V0XG4iKSk7CiAgcmV0dXJuIFpfT0s7Cn0KCmV4cG9ydHMuaW5mbGF0ZVJlc2V0ID0gaW5mbGF0ZVJlc2V0OwpleHBvcnRzLmluZmxhdGVSZXNldDIgPSBpbmZsYXRlUmVzZXQyOwpleHBvcnRzLmluZmxhdGVSZXNldEtlZXAgPSBpbmZsYXRlUmVzZXRLZWVwOwpleHBvcnRzLmluZmxhdGVJbml0ID0gaW5mbGF0ZUluaXQ7CmV4cG9ydHMuaW5mbGF0ZUluaXQyID0gaW5mbGF0ZUluaXQyOwpleHBvcnRzLmluZmxhdGUgPSBpbmZsYXRlOwpleHBvcnRzLmluZmxhdGVFbmQgPSBpbmZsYXRlRW5kOwpleHBvcnRzLmluZmxhdGVHZXRIZWFkZXIgPSBpbmZsYXRlR2V0SGVhZGVyOwpleHBvcnRzLmluZmxhdGVTZXREaWN0aW9uYXJ5ID0gaW5mbGF0ZVNldERpY3Rpb25hcnk7CmV4cG9ydHMuaW5mbGF0ZUluZm8gPSAncGFrbyBpbmZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KSc7CgovKiBOb3QgaW1wbGVtZW50ZWQKZXhwb3J0cy5pbmZsYXRlQ29weSA9IGluZmxhdGVDb3B5OwpleHBvcnRzLmluZmxhdGVHZXREaWN0aW9uYXJ5ID0gaW5mbGF0ZUdldERpY3Rpb25hcnk7CmV4cG9ydHMuaW5mbGF0ZU1hcmsgPSBpbmZsYXRlTWFyazsKZXhwb3J0cy5pbmZsYXRlUHJpbWUgPSBpbmZsYXRlUHJpbWU7CmV4cG9ydHMuaW5mbGF0ZVN5bmMgPSBpbmZsYXRlU3luYzsKZXhwb3J0cy5pbmZsYXRlU3luY1BvaW50ID0gaW5mbGF0ZVN5bmNQb2ludDsKZXhwb3J0cy5pbmZsYXRlVW5kZXJtaW5lID0gaW5mbGF0ZVVuZGVybWluZTsKKi8KCn0seyIuLi91dGlscy9jb21tb24iOjQxLCIuL2FkbGVyMzIiOjQzLCIuL2NyYzMyIjo0NSwiLi9pbmZmYXN0Ijo0OCwiLi9pbmZ0cmVlcyI6NTB9XSw1MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCi8vIChDKSAxOTk1LTIwMTMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlcgovLyAoQykgMjAxNC0yMDE3IFZpdGFseSBQdXpyaW4gYW5kIEFuZHJleSBUdXBpdHNpbgovLwovLyBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZAovLyB3YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMKLy8gYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4KLy8KLy8gUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsCi8vIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQKLy8gZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOgovLwovLyAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdAovLyAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlCi8vICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlCi8vICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4KLy8gMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKLy8gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCi8vIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uCgp2YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy9jb21tb24nKTsKCnZhciBNQVhCSVRTID0gMTU7CnZhciBFTk9VR0hfTEVOUyA9IDg1MjsKdmFyIEVOT1VHSF9ESVNUUyA9IDU5MjsKLy92YXIgRU5PVUdIID0gKEVOT1VHSF9MRU5TK0VOT1VHSF9ESVNUUyk7Cgp2YXIgQ09ERVMgPSAwOwp2YXIgTEVOUyA9IDE7CnZhciBESVNUUyA9IDI7Cgp2YXIgbGJhc2UgPSBbIC8qIExlbmd0aCBjb2RlcyAyNTcuLjI4NSBiYXNlICovCiAgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMywgMTUsIDE3LCAxOSwgMjMsIDI3LCAzMSwKICAzNSwgNDMsIDUxLCA1OSwgNjcsIDgzLCA5OSwgMTE1LCAxMzEsIDE2MywgMTk1LCAyMjcsIDI1OCwgMCwgMApdOwoKdmFyIGxleHQgPSBbIC8qIExlbmd0aCBjb2RlcyAyNTcuLjI4NSBleHRyYSAqLwogIDE2LCAxNiwgMTYsIDE2LCAxNiwgMTYsIDE2LCAxNiwgMTcsIDE3LCAxNywgMTcsIDE4LCAxOCwgMTgsIDE4LAogIDE5LCAxOSwgMTksIDE5LCAyMCwgMjAsIDIwLCAyMCwgMjEsIDIxLCAyMSwgMjEsIDE2LCA3MiwgNzgKXTsKCnZhciBkYmFzZSA9IFsgLyogRGlzdGFuY2UgY29kZXMgMC4uMjkgYmFzZSAqLwogIDEsIDIsIDMsIDQsIDUsIDcsIDksIDEzLCAxNywgMjUsIDMzLCA0OSwgNjUsIDk3LCAxMjksIDE5MywKICAyNTcsIDM4NSwgNTEzLCA3NjksIDEwMjUsIDE1MzcsIDIwNDksIDMwNzMsIDQwOTcsIDYxNDUsCiAgODE5MywgMTIyODksIDE2Mzg1LCAyNDU3NywgMCwgMApdOwoKdmFyIGRleHQgPSBbIC8qIERpc3RhbmNlIGNvZGVzIDAuLjI5IGV4dHJhICovCiAgMTYsIDE2LCAxNiwgMTYsIDE3LCAxNywgMTgsIDE4LCAxOSwgMTksIDIwLCAyMCwgMjEsIDIxLCAyMiwgMjIsCiAgMjMsIDIzLCAyNCwgMjQsIDI1LCAyNSwgMjYsIDI2LCAyNywgMjcsCiAgMjgsIDI4LCAyOSwgMjksIDY0LCA2NApdOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmZsYXRlX3RhYmxlKHR5cGUsIGxlbnMsIGxlbnNfaW5kZXgsIGNvZGVzLCB0YWJsZSwgdGFibGVfaW5kZXgsIHdvcmssIG9wdHMpCnsKICB2YXIgYml0cyA9IG9wdHMuYml0czsKICAgICAgLy9oZXJlID0gb3B0cy5oZXJlOyAvKiB0YWJsZSBlbnRyeSBmb3IgZHVwbGljYXRpb24gKi8KCiAgdmFyIGxlbiA9IDA7ICAgICAgICAgICAgICAgLyogYSBjb2RlJ3MgbGVuZ3RoIGluIGJpdHMgKi8KICB2YXIgc3ltID0gMDsgICAgICAgICAgICAgICAvKiBpbmRleCBvZiBjb2RlIHN5bWJvbHMgKi8KICB2YXIgbWluID0gMCwgbWF4ID0gMDsgICAgICAgICAgLyogbWluaW11bSBhbmQgbWF4aW11bSBjb2RlIGxlbmd0aHMgKi8KICB2YXIgcm9vdCA9IDA7ICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgaW5kZXggYml0cyBmb3Igcm9vdCB0YWJsZSAqLwogIHZhciBjdXJyID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBpbmRleCBiaXRzIGZvciBjdXJyZW50IHRhYmxlICovCiAgdmFyIGRyb3AgPSAwOyAgICAgICAgICAgICAgLyogY29kZSBiaXRzIHRvIGRyb3AgZm9yIHN1Yi10YWJsZSAqLwogIHZhciBsZWZ0ID0gMDsgICAgICAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIHByZWZpeCBjb2RlcyBhdmFpbGFibGUgKi8KICB2YXIgdXNlZCA9IDA7ICAgICAgICAgICAgICAvKiBjb2RlIGVudHJpZXMgaW4gdGFibGUgdXNlZCAqLwogIHZhciBodWZmID0gMDsgICAgICAgICAgICAgIC8qIEh1ZmZtYW4gY29kZSAqLwogIHZhciBpbmNyOyAgICAgICAgICAgICAgLyogZm9yIGluY3JlbWVudGluZyBjb2RlLCBpbmRleCAqLwogIHZhciBmaWxsOyAgICAgICAgICAgICAgLyogaW5kZXggZm9yIHJlcGxpY2F0aW5nIGVudHJpZXMgKi8KICB2YXIgbG93OyAgICAgICAgICAgICAgIC8qIGxvdyBiaXRzIGZvciBjdXJyZW50IHJvb3QgZW50cnkgKi8KICB2YXIgbWFzazsgICAgICAgICAgICAgIC8qIG1hc2sgZm9yIGxvdyByb290IGJpdHMgKi8KICB2YXIgbmV4dDsgICAgICAgICAgICAgLyogbmV4dCBhdmFpbGFibGUgc3BhY2UgaW4gdGFibGUgKi8KICB2YXIgYmFzZSA9IG51bGw7ICAgICAvKiBiYXNlIHZhbHVlIHRhYmxlIHRvIHVzZSAqLwogIHZhciBiYXNlX2luZGV4ID0gMDsKLy8gIHZhciBzaG9leHRyYTsgICAgLyogZXh0cmEgYml0cyB0YWJsZSB0byB1c2UgKi8KICB2YXIgZW5kOyAgICAgICAgICAgICAgICAgICAgLyogdXNlIGJhc2UgYW5kIGV4dHJhIGZvciBzeW1ib2wgPiBlbmQgKi8KICB2YXIgY291bnQgPSBuZXcgdXRpbHMuQnVmMTYoTUFYQklUUyArIDEpOyAvL1tNQVhCSVRTKzFdOyAgICAvKiBudW1iZXIgb2YgY29kZXMgb2YgZWFjaCBsZW5ndGggKi8KICB2YXIgb2ZmcyA9IG5ldyB1dGlscy5CdWYxNihNQVhCSVRTICsgMSk7IC8vW01BWEJJVFMrMV07ICAgICAvKiBvZmZzZXRzIGluIHRhYmxlIGZvciBlYWNoIGxlbmd0aCAqLwogIHZhciBleHRyYSA9IG51bGw7CiAgdmFyIGV4dHJhX2luZGV4ID0gMDsKCiAgdmFyIGhlcmVfYml0cywgaGVyZV9vcCwgaGVyZV92YWw7CgogIC8qCiAgIFByb2Nlc3MgYSBzZXQgb2YgY29kZSBsZW5ndGhzIHRvIGNyZWF0ZSBhIGNhbm9uaWNhbCBIdWZmbWFuIGNvZGUuICBUaGUKICAgY29kZSBsZW5ndGhzIGFyZSBsZW5zWzAuLmNvZGVzLTFdLiAgRWFjaCBsZW5ndGggY29ycmVzcG9uZHMgdG8gdGhlCiAgIHN5bWJvbHMgMC4uY29kZXMtMS4gIFRoZSBIdWZmbWFuIGNvZGUgaXMgZ2VuZXJhdGVkIGJ5IGZpcnN0IHNvcnRpbmcgdGhlCiAgIHN5bWJvbHMgYnkgbGVuZ3RoIGZyb20gc2hvcnQgdG8gbG9uZywgYW5kIHJldGFpbmluZyB0aGUgc3ltYm9sIG9yZGVyCiAgIGZvciBjb2RlcyB3aXRoIGVxdWFsIGxlbmd0aHMuICBUaGVuIHRoZSBjb2RlIHN0YXJ0cyB3aXRoIGFsbCB6ZXJvIGJpdHMKICAgZm9yIHRoZSBmaXJzdCBjb2RlIG9mIHRoZSBzaG9ydGVzdCBsZW5ndGgsIGFuZCB0aGUgY29kZXMgYXJlIGludGVnZXIKICAgaW5jcmVtZW50cyBmb3IgdGhlIHNhbWUgbGVuZ3RoLCBhbmQgemVyb3MgYXJlIGFwcGVuZGVkIGFzIHRoZSBsZW5ndGgKICAgaW5jcmVhc2VzLiAgRm9yIHRoZSBkZWZsYXRlIGZvcm1hdCwgdGhlc2UgYml0cyBhcmUgc3RvcmVkIGJhY2t3YXJkcwogICBmcm9tIHRoZWlyIG1vcmUgbmF0dXJhbCBpbnRlZ2VyIGluY3JlbWVudCBvcmRlcmluZywgYW5kIHNvIHdoZW4gdGhlCiAgIGRlY29kaW5nIHRhYmxlcyBhcmUgYnVpbHQgaW4gdGhlIGxhcmdlIGxvb3AgYmVsb3csIHRoZSBpbnRlZ2VyIGNvZGVzCiAgIGFyZSBpbmNyZW1lbnRlZCBiYWNrd2FyZHMuCgogICBUaGlzIHJvdXRpbmUgYXNzdW1lcywgYnV0IGRvZXMgbm90IGNoZWNrLCB0aGF0IGFsbCBvZiB0aGUgZW50cmllcyBpbgogICBsZW5zW10gYXJlIGluIHRoZSByYW5nZSAwLi5NQVhCSVRTLiAgVGhlIGNhbGxlciBtdXN0IGFzc3VyZSB0aGlzLgogICAxLi5NQVhCSVRTIGlzIGludGVycHJldGVkIGFzIHRoYXQgY29kZSBsZW5ndGguICB6ZXJvIG1lYW5zIHRoYXQgdGhhdAogICBzeW1ib2wgZG9lcyBub3Qgb2NjdXIgaW4gdGhpcyBjb2RlLgoKICAgVGhlIGNvZGVzIGFyZSBzb3J0ZWQgYnkgY29tcHV0aW5nIGEgY291bnQgb2YgY29kZXMgZm9yIGVhY2ggbGVuZ3RoLAogICBjcmVhdGluZyBmcm9tIHRoYXQgYSB0YWJsZSBvZiBzdGFydGluZyBpbmRpY2VzIGZvciBlYWNoIGxlbmd0aCBpbiB0aGUKICAgc29ydGVkIHRhYmxlLCBhbmQgdGhlbiBlbnRlcmluZyB0aGUgc3ltYm9scyBpbiBvcmRlciBpbiB0aGUgc29ydGVkCiAgIHRhYmxlLiAgVGhlIHNvcnRlZCB0YWJsZSBpcyB3b3JrW10sIHdpdGggdGhhdCBzcGFjZSBiZWluZyBwcm92aWRlZCBieQogICB0aGUgY2FsbGVyLgoKICAgVGhlIGxlbmd0aCBjb3VudHMgYXJlIHVzZWQgZm9yIG90aGVyIHB1cnBvc2VzIGFzIHdlbGwsIGkuZS4gZmluZGluZwogICB0aGUgbWluaW11bSBhbmQgbWF4aW11bSBsZW5ndGggY29kZXMsIGRldGVybWluaW5nIGlmIHRoZXJlIGFyZSBhbnkKICAgY29kZXMgYXQgYWxsLCBjaGVja2luZyBmb3IgYSB2YWxpZCBzZXQgb2YgbGVuZ3RocywgYW5kIGxvb2tpbmcgYWhlYWQKICAgYXQgbGVuZ3RoIGNvdW50cyB0byBkZXRlcm1pbmUgc3ViLXRhYmxlIHNpemVzIHdoZW4gYnVpbGRpbmcgdGhlCiAgIGRlY29kaW5nIHRhYmxlcy4KICAgKi8KCiAgLyogYWNjdW11bGF0ZSBsZW5ndGhzIGZvciBjb2RlcyAoYXNzdW1lcyBsZW5zW10gYWxsIGluIDAuLk1BWEJJVFMpICovCiAgZm9yIChsZW4gPSAwOyBsZW4gPD0gTUFYQklUUzsgbGVuKyspIHsKICAgIGNvdW50W2xlbl0gPSAwOwogIH0KICBmb3IgKHN5bSA9IDA7IHN5bSA8IGNvZGVzOyBzeW0rKykgewogICAgY291bnRbbGVuc1tsZW5zX2luZGV4ICsgc3ltXV0rKzsKICB9CgogIC8qIGJvdW5kIGNvZGUgbGVuZ3RocywgZm9yY2Ugcm9vdCB0byBiZSB3aXRoaW4gY29kZSBsZW5ndGhzICovCiAgcm9vdCA9IGJpdHM7CiAgZm9yIChtYXggPSBNQVhCSVRTOyBtYXggPj0gMTsgbWF4LS0pIHsKICAgIGlmIChjb3VudFttYXhdICE9PSAwKSB7IGJyZWFrOyB9CiAgfQogIGlmIChyb290ID4gbWF4KSB7CiAgICByb290ID0gbWF4OwogIH0KICBpZiAobWF4ID09PSAwKSB7ICAgICAgICAgICAgICAgICAgICAgLyogbm8gc3ltYm9scyB0byBjb2RlIGF0IGFsbCAqLwogICAgLy90YWJsZS5vcFtvcHRzLnRhYmxlX2luZGV4XSA9IDY0OyAgLy9oZXJlLm9wID0gKHZhciBjaGFyKTY0OyAgICAvKiBpbnZhbGlkIGNvZGUgbWFya2VyICovCiAgICAvL3RhYmxlLmJpdHNbb3B0cy50YWJsZV9pbmRleF0gPSAxOyAgIC8vaGVyZS5iaXRzID0gKHZhciBjaGFyKTE7CiAgICAvL3RhYmxlLnZhbFtvcHRzLnRhYmxlX2luZGV4KytdID0gMDsgICAvL2hlcmUudmFsID0gKHZhciBzaG9ydCkwOwogICAgdGFibGVbdGFibGVfaW5kZXgrK10gPSAoMSA8PCAyNCkgfCAoNjQgPDwgMTYpIHwgMDsKCgogICAgLy90YWJsZS5vcFtvcHRzLnRhYmxlX2luZGV4XSA9IDY0OwogICAgLy90YWJsZS5iaXRzW29wdHMudGFibGVfaW5kZXhdID0gMTsKICAgIC8vdGFibGUudmFsW29wdHMudGFibGVfaW5kZXgrK10gPSAwOwogICAgdGFibGVbdGFibGVfaW5kZXgrK10gPSAoMSA8PCAyNCkgfCAoNjQgPDwgMTYpIHwgMDsKCiAgICBvcHRzLmJpdHMgPSAxOwogICAgcmV0dXJuIDA7ICAgICAvKiBubyBzeW1ib2xzLCBidXQgd2FpdCBmb3IgZGVjb2RpbmcgdG8gcmVwb3J0IGVycm9yICovCiAgfQogIGZvciAobWluID0gMTsgbWluIDwgbWF4OyBtaW4rKykgewogICAgaWYgKGNvdW50W21pbl0gIT09IDApIHsgYnJlYWs7IH0KICB9CiAgaWYgKHJvb3QgPCBtaW4pIHsKICAgIHJvb3QgPSBtaW47CiAgfQoKICAvKiBjaGVjayBmb3IgYW4gb3Zlci1zdWJzY3JpYmVkIG9yIGluY29tcGxldGUgc2V0IG9mIGxlbmd0aHMgKi8KICBsZWZ0ID0gMTsKICBmb3IgKGxlbiA9IDE7IGxlbiA8PSBNQVhCSVRTOyBsZW4rKykgewogICAgbGVmdCA8PD0gMTsKICAgIGxlZnQgLT0gY291bnRbbGVuXTsKICAgIGlmIChsZWZ0IDwgMCkgewogICAgICByZXR1cm4gLTE7CiAgICB9ICAgICAgICAvKiBvdmVyLXN1YnNjcmliZWQgKi8KICB9CiAgaWYgKGxlZnQgPiAwICYmICh0eXBlID09PSBDT0RFUyB8fCBtYXggIT09IDEpKSB7CiAgICByZXR1cm4gLTE7ICAgICAgICAgICAgICAgICAgICAgIC8qIGluY29tcGxldGUgc2V0ICovCiAgfQoKICAvKiBnZW5lcmF0ZSBvZmZzZXRzIGludG8gc3ltYm9sIHRhYmxlIGZvciBlYWNoIGxlbmd0aCBmb3Igc29ydGluZyAqLwogIG9mZnNbMV0gPSAwOwogIGZvciAobGVuID0gMTsgbGVuIDwgTUFYQklUUzsgbGVuKyspIHsKICAgIG9mZnNbbGVuICsgMV0gPSBvZmZzW2xlbl0gKyBjb3VudFtsZW5dOwogIH0KCiAgLyogc29ydCBzeW1ib2xzIGJ5IGxlbmd0aCwgYnkgc3ltYm9sIG9yZGVyIHdpdGhpbiBlYWNoIGxlbmd0aCAqLwogIGZvciAoc3ltID0gMDsgc3ltIDwgY29kZXM7IHN5bSsrKSB7CiAgICBpZiAobGVuc1tsZW5zX2luZGV4ICsgc3ltXSAhPT0gMCkgewogICAgICB3b3JrW29mZnNbbGVuc1tsZW5zX2luZGV4ICsgc3ltXV0rK10gPSBzeW07CiAgICB9CiAgfQoKICAvKgogICBDcmVhdGUgYW5kIGZpbGwgaW4gZGVjb2RpbmcgdGFibGVzLiAgSW4gdGhpcyBsb29wLCB0aGUgdGFibGUgYmVpbmcKICAgZmlsbGVkIGlzIGF0IG5leHQgYW5kIGhhcyBjdXJyIGluZGV4IGJpdHMuICBUaGUgY29kZSBiZWluZyB1c2VkIGlzIGh1ZmYKICAgd2l0aCBsZW5ndGggbGVuLiAgVGhhdCBjb2RlIGlzIGNvbnZlcnRlZCB0byBhbiBpbmRleCBieSBkcm9wcGluZyBkcm9wCiAgIGJpdHMgb2ZmIG9mIHRoZSBib3R0b20uICBGb3IgY29kZXMgd2hlcmUgbGVuIGlzIGxlc3MgdGhhbiBkcm9wICsgY3VyciwKICAgdGhvc2UgdG9wIGRyb3AgKyBjdXJyIC0gbGVuIGJpdHMgYXJlIGluY3JlbWVudGVkIHRocm91Z2ggYWxsIHZhbHVlcyB0bwogICBmaWxsIHRoZSB0YWJsZSB3aXRoIHJlcGxpY2F0ZWQgZW50cmllcy4KCiAgIHJvb3QgaXMgdGhlIG51bWJlciBvZiBpbmRleCBiaXRzIGZvciB0aGUgcm9vdCB0YWJsZS4gIFdoZW4gbGVuIGV4Y2VlZHMKICAgcm9vdCwgc3ViLXRhYmxlcyBhcmUgY3JlYXRlZCBwb2ludGVkIHRvIGJ5IHRoZSByb290IGVudHJ5IHdpdGggYW4gaW5kZXgKICAgb2YgdGhlIGxvdyByb290IGJpdHMgb2YgaHVmZi4gIFRoaXMgaXMgc2F2ZWQgaW4gbG93IHRvIGNoZWNrIGZvciB3aGVuIGEKICAgbmV3IHN1Yi10YWJsZSBzaG91bGQgYmUgc3RhcnRlZC4gIGRyb3AgaXMgemVybyB3aGVuIHRoZSByb290IHRhYmxlIGlzCiAgIGJlaW5nIGZpbGxlZCwgYW5kIGRyb3AgaXMgcm9vdCB3aGVuIHN1Yi10YWJsZXMgYXJlIGJlaW5nIGZpbGxlZC4KCiAgIFdoZW4gYSBuZXcgc3ViLXRhYmxlIGlzIG5lZWRlZCwgaXQgaXMgbmVjZXNzYXJ5IHRvIGxvb2sgYWhlYWQgaW4gdGhlCiAgIGNvZGUgbGVuZ3RocyB0byBkZXRlcm1pbmUgd2hhdCBzaXplIHN1Yi10YWJsZSBpcyBuZWVkZWQuICBUaGUgbGVuZ3RoCiAgIGNvdW50cyBhcmUgdXNlZCBmb3IgdGhpcywgYW5kIHNvIGNvdW50W10gaXMgZGVjcmVtZW50ZWQgYXMgY29kZXMgYXJlCiAgIGVudGVyZWQgaW4gdGhlIHRhYmxlcy4KCiAgIHVzZWQga2VlcHMgdHJhY2sgb2YgaG93IG1hbnkgdGFibGUgZW50cmllcyBoYXZlIGJlZW4gYWxsb2NhdGVkIGZyb20gdGhlCiAgIHByb3ZpZGVkICp0YWJsZSBzcGFjZS4gIEl0IGlzIGNoZWNrZWQgZm9yIExFTlMgYW5kIERJU1QgdGFibGVzIGFnYWluc3QKICAgdGhlIGNvbnN0YW50cyBFTk9VR0hfTEVOUyBhbmQgRU5PVUdIX0RJU1RTIHRvIGd1YXJkIGFnYWluc3QgY2hhbmdlcyBpbgogICB0aGUgaW5pdGlhbCByb290IHRhYmxlIHNpemUgY29uc3RhbnRzLiAgU2VlIHRoZSBjb21tZW50cyBpbiBpbmZ0cmVlcy5oCiAgIGZvciBtb3JlIGluZm9ybWF0aW9uLgoKICAgc3ltIGluY3JlbWVudHMgdGhyb3VnaCBhbGwgc3ltYm9scywgYW5kIHRoZSBsb29wIHRlcm1pbmF0ZXMgd2hlbgogICBhbGwgY29kZXMgb2YgbGVuZ3RoIG1heCwgaS5lLiBhbGwgY29kZXMsIGhhdmUgYmVlbiBwcm9jZXNzZWQuICBUaGlzCiAgIHJvdXRpbmUgcGVybWl0cyBpbmNvbXBsZXRlIGNvZGVzLCBzbyBhbm90aGVyIGxvb3AgYWZ0ZXIgdGhpcyBvbmUgZmlsbHMKICAgaW4gdGhlIHJlc3Qgb2YgdGhlIGRlY29kaW5nIHRhYmxlcyB3aXRoIGludmFsaWQgY29kZSBtYXJrZXJzLgogICAqLwoKICAvKiBzZXQgdXAgZm9yIGNvZGUgdHlwZSAqLwogIC8vIHBvb3IgbWFuIG9wdGltaXphdGlvbiAtIHVzZSBpZi1lbHNlIGluc3RlYWQgb2Ygc3dpdGNoLAogIC8vIHRvIGF2b2lkIGRlb3B0cyBpbiBvbGQgdjgKICBpZiAodHlwZSA9PT0gQ09ERVMpIHsKICAgIGJhc2UgPSBleHRyYSA9IHdvcms7ICAgIC8qIGR1bW15IHZhbHVlLS1ub3QgdXNlZCAqLwogICAgZW5kID0gMTk7CgogIH0gZWxzZSBpZiAodHlwZSA9PT0gTEVOUykgewogICAgYmFzZSA9IGxiYXNlOwogICAgYmFzZV9pbmRleCAtPSAyNTc7CiAgICBleHRyYSA9IGxleHQ7CiAgICBleHRyYV9pbmRleCAtPSAyNTc7CiAgICBlbmQgPSAyNTY7CgogIH0gZWxzZSB7ICAgICAgICAgICAgICAgICAgICAvKiBESVNUUyAqLwogICAgYmFzZSA9IGRiYXNlOwogICAgZXh0cmEgPSBkZXh0OwogICAgZW5kID0gLTE7CiAgfQoKICAvKiBpbml0aWFsaXplIG9wdHMgZm9yIGxvb3AgKi8KICBodWZmID0gMDsgICAgICAgICAgICAgICAgICAgLyogc3RhcnRpbmcgY29kZSAqLwogIHN5bSA9IDA7ICAgICAgICAgICAgICAgICAgICAvKiBzdGFydGluZyBjb2RlIHN5bWJvbCAqLwogIGxlbiA9IG1pbjsgICAgICAgICAgICAgICAgICAvKiBzdGFydGluZyBjb2RlIGxlbmd0aCAqLwogIG5leHQgPSB0YWJsZV9pbmRleDsgICAgICAgICAgICAgIC8qIGN1cnJlbnQgdGFibGUgdG8gZmlsbCBpbiAqLwogIGN1cnIgPSByb290OyAgICAgICAgICAgICAgICAvKiBjdXJyZW50IHRhYmxlIGluZGV4IGJpdHMgKi8KICBkcm9wID0gMDsgICAgICAgICAgICAgICAgICAgLyogY3VycmVudCBiaXRzIHRvIGRyb3AgZnJvbSBjb2RlIGZvciBpbmRleCAqLwogIGxvdyA9IC0xOyAgICAgICAgICAgICAgICAgICAvKiB0cmlnZ2VyIG5ldyBzdWItdGFibGUgd2hlbiBsZW4gPiByb290ICovCiAgdXNlZCA9IDEgPDwgcm9vdDsgICAgICAgICAgLyogdXNlIHJvb3QgdGFibGUgZW50cmllcyAqLwogIG1hc2sgPSB1c2VkIC0gMTsgICAgICAgICAgICAvKiBtYXNrIGZvciBjb21wYXJpbmcgbG93ICovCgogIC8qIGNoZWNrIGF2YWlsYWJsZSB0YWJsZSBzcGFjZSAqLwogIGlmICgodHlwZSA9PT0gTEVOUyAmJiB1c2VkID4gRU5PVUdIX0xFTlMpIHx8CiAgICAodHlwZSA9PT0gRElTVFMgJiYgdXNlZCA+IEVOT1VHSF9ESVNUUykpIHsKICAgIHJldHVybiAxOwogIH0KCiAgLyogcHJvY2VzcyBhbGwgY29kZXMgYW5kIG1ha2UgdGFibGUgZW50cmllcyAqLwogIGZvciAoOzspIHsKICAgIC8qIGNyZWF0ZSB0YWJsZSBlbnRyeSAqLwogICAgaGVyZV9iaXRzID0gbGVuIC0gZHJvcDsKICAgIGlmICh3b3JrW3N5bV0gPCBlbmQpIHsKICAgICAgaGVyZV9vcCA9IDA7CiAgICAgIGhlcmVfdmFsID0gd29ya1tzeW1dOwogICAgfQogICAgZWxzZSBpZiAod29ya1tzeW1dID4gZW5kKSB7CiAgICAgIGhlcmVfb3AgPSBleHRyYVtleHRyYV9pbmRleCArIHdvcmtbc3ltXV07CiAgICAgIGhlcmVfdmFsID0gYmFzZVtiYXNlX2luZGV4ICsgd29ya1tzeW1dXTsKICAgIH0KICAgIGVsc2UgewogICAgICBoZXJlX29wID0gMzIgKyA2NDsgICAgICAgICAvKiBlbmQgb2YgYmxvY2sgKi8KICAgICAgaGVyZV92YWwgPSAwOwogICAgfQoKICAgIC8qIHJlcGxpY2F0ZSBmb3IgdGhvc2UgaW5kaWNlcyB3aXRoIGxvdyBsZW4gYml0cyBlcXVhbCB0byBodWZmICovCiAgICBpbmNyID0gMSA8PCAobGVuIC0gZHJvcCk7CiAgICBmaWxsID0gMSA8PCBjdXJyOwogICAgbWluID0gZmlsbDsgICAgICAgICAgICAgICAgIC8qIHNhdmUgb2Zmc2V0IHRvIG5leHQgdGFibGUgKi8KICAgIGRvIHsKICAgICAgZmlsbCAtPSBpbmNyOwogICAgICB0YWJsZVtuZXh0ICsgKGh1ZmYgPj4gZHJvcCkgKyBmaWxsXSA9IChoZXJlX2JpdHMgPDwgMjQpIHwgKGhlcmVfb3AgPDwgMTYpIHwgaGVyZV92YWwgfDA7CiAgICB9IHdoaWxlIChmaWxsICE9PSAwKTsKCiAgICAvKiBiYWNrd2FyZHMgaW5jcmVtZW50IHRoZSBsZW4tYml0IGNvZGUgaHVmZiAqLwogICAgaW5jciA9IDEgPDwgKGxlbiAtIDEpOwogICAgd2hpbGUgKGh1ZmYgJiBpbmNyKSB7CiAgICAgIGluY3IgPj49IDE7CiAgICB9CiAgICBpZiAoaW5jciAhPT0gMCkgewogICAgICBodWZmICY9IGluY3IgLSAxOwogICAgICBodWZmICs9IGluY3I7CiAgICB9IGVsc2UgewogICAgICBodWZmID0gMDsKICAgIH0KCiAgICAvKiBnbyB0byBuZXh0IHN5bWJvbCwgdXBkYXRlIGNvdW50LCBsZW4gKi8KICAgIHN5bSsrOwogICAgaWYgKC0tY291bnRbbGVuXSA9PT0gMCkgewogICAgICBpZiAobGVuID09PSBtYXgpIHsgYnJlYWs7IH0KICAgICAgbGVuID0gbGVuc1tsZW5zX2luZGV4ICsgd29ya1tzeW1dXTsKICAgIH0KCiAgICAvKiBjcmVhdGUgbmV3IHN1Yi10YWJsZSBpZiBuZWVkZWQgKi8KICAgIGlmIChsZW4gPiByb290ICYmIChodWZmICYgbWFzaykgIT09IGxvdykgewogICAgICAvKiBpZiBmaXJzdCB0aW1lLCB0cmFuc2l0aW9uIHRvIHN1Yi10YWJsZXMgKi8KICAgICAgaWYgKGRyb3AgPT09IDApIHsKICAgICAgICBkcm9wID0gcm9vdDsKICAgICAgfQoKICAgICAgLyogaW5jcmVtZW50IHBhc3QgbGFzdCB0YWJsZSAqLwogICAgICBuZXh0ICs9IG1pbjsgICAgICAgICAgICAvKiBoZXJlIG1pbiBpcyAxIDw8IGN1cnIgKi8KCiAgICAgIC8qIGRldGVybWluZSBsZW5ndGggb2YgbmV4dCB0YWJsZSAqLwogICAgICBjdXJyID0gbGVuIC0gZHJvcDsKICAgICAgbGVmdCA9IDEgPDwgY3VycjsKICAgICAgd2hpbGUgKGN1cnIgKyBkcm9wIDwgbWF4KSB7CiAgICAgICAgbGVmdCAtPSBjb3VudFtjdXJyICsgZHJvcF07CiAgICAgICAgaWYgKGxlZnQgPD0gMCkgeyBicmVhazsgfQogICAgICAgIGN1cnIrKzsKICAgICAgICBsZWZ0IDw8PSAxOwogICAgICB9CgogICAgICAvKiBjaGVjayBmb3IgZW5vdWdoIHNwYWNlICovCiAgICAgIHVzZWQgKz0gMSA8PCBjdXJyOwogICAgICBpZiAoKHR5cGUgPT09IExFTlMgJiYgdXNlZCA+IEVOT1VHSF9MRU5TKSB8fAogICAgICAgICh0eXBlID09PSBESVNUUyAmJiB1c2VkID4gRU5PVUdIX0RJU1RTKSkgewogICAgICAgIHJldHVybiAxOwogICAgICB9CgogICAgICAvKiBwb2ludCBlbnRyeSBpbiByb290IHRhYmxlIHRvIHN1Yi10YWJsZSAqLwogICAgICBsb3cgPSBodWZmICYgbWFzazsKICAgICAgLyp0YWJsZS5vcFtsb3ddID0gY3VycjsKICAgICAgdGFibGUuYml0c1tsb3ddID0gcm9vdDsKICAgICAgdGFibGUudmFsW2xvd10gPSBuZXh0IC0gb3B0cy50YWJsZV9pbmRleDsqLwogICAgICB0YWJsZVtsb3ddID0gKHJvb3QgPDwgMjQpIHwgKGN1cnIgPDwgMTYpIHwgKG5leHQgLSB0YWJsZV9pbmRleCkgfDA7CiAgICB9CiAgfQoKICAvKiBmaWxsIGluIHJlbWFpbmluZyB0YWJsZSBlbnRyeSBpZiBjb2RlIGlzIGluY29tcGxldGUgKGd1YXJhbnRlZWQgdG8gaGF2ZQogICBhdCBtb3N0IG9uZSByZW1haW5pbmcgZW50cnksIHNpbmNlIGlmIHRoZSBjb2RlIGlzIGluY29tcGxldGUsIHRoZQogICBtYXhpbXVtIGNvZGUgbGVuZ3RoIHRoYXQgd2FzIGFsbG93ZWQgdG8gZ2V0IHRoaXMgZmFyIGlzIG9uZSBiaXQpICovCiAgaWYgKGh1ZmYgIT09IDApIHsKICAgIC8vdGFibGUub3BbbmV4dCArIGh1ZmZdID0gNjQ7ICAgICAgICAgICAgLyogaW52YWxpZCBjb2RlIG1hcmtlciAqLwogICAgLy90YWJsZS5iaXRzW25leHQgKyBodWZmXSA9IGxlbiAtIGRyb3A7CiAgICAvL3RhYmxlLnZhbFtuZXh0ICsgaHVmZl0gPSAwOwogICAgdGFibGVbbmV4dCArIGh1ZmZdID0gKChsZW4gLSBkcm9wKSA8PCAyNCkgfCAoNjQgPDwgMTYpIHwwOwogIH0KCiAgLyogc2V0IHJldHVybiBwYXJhbWV0ZXJzICovCiAgLy9vcHRzLnRhYmxlX2luZGV4ICs9IHVzZWQ7CiAgb3B0cy5iaXRzID0gcm9vdDsKICByZXR1cm4gMDsKfTsKCn0seyIuLi91dGlscy9jb21tb24iOjQxfV0sNTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgovLyAoQykgMTk5NS0yMDEzIEplYW4tbG91cCBHYWlsbHkgYW5kIE1hcmsgQWRsZXIKLy8gKEMpIDIwMTQtMjAxNyBWaXRhbHkgUHV6cmluIGFuZCBBbmRyZXkgVHVwaXRzaW4KLy8KLy8gVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQKLy8gd2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzCi8vIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuCi8vCi8vIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLAovLyBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0Ci8vIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoKLy8KLy8gMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKLy8gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQovLyAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQovLyAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuCi8vIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCi8vICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgovLyAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgMjogICAgICAnbmVlZCBkaWN0aW9uYXJ5JywgICAgIC8qIFpfTkVFRF9ESUNUICAgICAgIDIgICovCiAgMTogICAgICAnc3RyZWFtIGVuZCcsICAgICAgICAgIC8qIFpfU1RSRUFNX0VORCAgICAgIDEgICovCiAgMDogICAgICAnJywgICAgICAgICAgICAgICAgICAgIC8qIFpfT0sgICAgICAgICAgICAgIDAgICovCiAgJy0xJzogICAnZmlsZSBlcnJvcicsICAgICAgICAgIC8qIFpfRVJSTk8gICAgICAgICAoLTEpICovCiAgJy0yJzogICAnc3RyZWFtIGVycm9yJywgICAgICAgIC8qIFpfU1RSRUFNX0VSUk9SICAoLTIpICovCiAgJy0zJzogICAnZGF0YSBlcnJvcicsICAgICAgICAgIC8qIFpfREFUQV9FUlJPUiAgICAoLTMpICovCiAgJy00JzogICAnaW5zdWZmaWNpZW50IG1lbW9yeScsIC8qIFpfTUVNX0VSUk9SICAgICAoLTQpICovCiAgJy01JzogICAnYnVmZmVyIGVycm9yJywgICAgICAgIC8qIFpfQlVGX0VSUk9SICAgICAoLTUpICovCiAgJy02JzogICAnaW5jb21wYXRpYmxlIHZlcnNpb24nIC8qIFpfVkVSU0lPTl9FUlJPUiAoLTYpICovCn07Cgp9LHt9XSw1MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCi8vIChDKSAxOTk1LTIwMTMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlcgovLyAoQykgMjAxNC0yMDE3IFZpdGFseSBQdXpyaW4gYW5kIEFuZHJleSBUdXBpdHNpbgovLwovLyBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZAovLyB3YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMKLy8gYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4KLy8KLy8gUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsCi8vIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQKLy8gZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOgovLwovLyAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdAovLyAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlCi8vICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlCi8vICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4KLy8gMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKLy8gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCi8vIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uCgp2YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy9jb21tb24nKTsKCi8qIFB1YmxpYyBjb25zdGFudHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCgoKLy92YXIgWl9GSUxURVJFRCAgICAgICAgICA9IDE7Ci8vdmFyIFpfSFVGRk1BTl9PTkxZICAgICAgPSAyOwovL3ZhciBaX1JMRSAgICAgICAgICAgICAgID0gMzsKdmFyIFpfRklYRUQgICAgICAgICAgICAgICA9IDQ7Ci8vdmFyIFpfREVGQVVMVF9TVFJBVEVHWSAgPSAwOwoKLyogUG9zc2libGUgdmFsdWVzIG9mIHRoZSBkYXRhX3R5cGUgZmllbGQgKHRob3VnaCBzZWUgaW5mbGF0ZSgpKSAqLwp2YXIgWl9CSU5BUlkgICAgICAgICAgICAgID0gMDsKdmFyIFpfVEVYVCAgICAgICAgICAgICAgICA9IDE7Ci8vdmFyIFpfQVNDSUkgICAgICAgICAgICAgPSAxOyAvLyA9IFpfVEVYVAp2YXIgWl9VTktOT1dOICAgICAgICAgICAgID0gMjsKCi8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovCgoKZnVuY3Rpb24gemVybyhidWYpIHsgdmFyIGxlbiA9IGJ1Zi5sZW5ndGg7IHdoaWxlICgtLWxlbiA+PSAwKSB7IGJ1ZltsZW5dID0gMDsgfSB9CgovLyBGcm9tIHp1dGlsLmgKCnZhciBTVE9SRURfQkxPQ0sgPSAwOwp2YXIgU1RBVElDX1RSRUVTID0gMTsKdmFyIERZTl9UUkVFUyAgICA9IDI7Ci8qIFRoZSB0aHJlZSBraW5kcyBvZiBibG9jayB0eXBlICovCgp2YXIgTUlOX01BVENIICAgID0gMzsKdmFyIE1BWF9NQVRDSCAgICA9IDI1ODsKLyogVGhlIG1pbmltdW0gYW5kIG1heGltdW0gbWF0Y2ggbGVuZ3RocyAqLwoKLy8gRnJvbSBkZWZsYXRlLmgKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIEludGVybmFsIGNvbXByZXNzaW9uIHN0YXRlLgogKi8KCnZhciBMRU5HVEhfQ09ERVMgID0gMjk7Ci8qIG51bWJlciBvZiBsZW5ndGggY29kZXMsIG5vdCBjb3VudGluZyB0aGUgc3BlY2lhbCBFTkRfQkxPQ0sgY29kZSAqLwoKdmFyIExJVEVSQUxTICAgICAgPSAyNTY7Ci8qIG51bWJlciBvZiBsaXRlcmFsIGJ5dGVzIDAuLjI1NSAqLwoKdmFyIExfQ09ERVMgICAgICAgPSBMSVRFUkFMUyArIDEgKyBMRU5HVEhfQ09ERVM7Ci8qIG51bWJlciBvZiBMaXRlcmFsIG9yIExlbmd0aCBjb2RlcywgaW5jbHVkaW5nIHRoZSBFTkRfQkxPQ0sgY29kZSAqLwoKdmFyIERfQ09ERVMgICAgICAgPSAzMDsKLyogbnVtYmVyIG9mIGRpc3RhbmNlIGNvZGVzICovCgp2YXIgQkxfQ09ERVMgICAgICA9IDE5OwovKiBudW1iZXIgb2YgY29kZXMgdXNlZCB0byB0cmFuc2ZlciB0aGUgYml0IGxlbmd0aHMgKi8KCnZhciBIRUFQX1NJWkUgICAgID0gMiAqIExfQ09ERVMgKyAxOwovKiBtYXhpbXVtIGhlYXAgc2l6ZSAqLwoKdmFyIE1BWF9CSVRTICAgICAgPSAxNTsKLyogQWxsIGNvZGVzIG11c3Qgbm90IGV4Y2VlZCBNQVhfQklUUyBiaXRzICovCgp2YXIgQnVmX3NpemUgICAgICA9IDE2OwovKiBzaXplIG9mIGJpdCBidWZmZXIgaW4gYmlfYnVmICovCgoKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIENvbnN0YW50cwogKi8KCnZhciBNQVhfQkxfQklUUyA9IDc7Ci8qIEJpdCBsZW5ndGggY29kZXMgbXVzdCBub3QgZXhjZWVkIE1BWF9CTF9CSVRTIGJpdHMgKi8KCnZhciBFTkRfQkxPQ0sgICA9IDI1NjsKLyogZW5kIG9mIGJsb2NrIGxpdGVyYWwgY29kZSAqLwoKdmFyIFJFUF8zXzYgICAgID0gMTY7Ci8qIHJlcGVhdCBwcmV2aW91cyBiaXQgbGVuZ3RoIDMtNiB0aW1lcyAoMiBiaXRzIG9mIHJlcGVhdCBjb3VudCkgKi8KCnZhciBSRVBaXzNfMTAgICA9IDE3OwovKiByZXBlYXQgYSB6ZXJvIGxlbmd0aCAzLTEwIHRpbWVzICAoMyBiaXRzIG9mIHJlcGVhdCBjb3VudCkgKi8KCnZhciBSRVBaXzExXzEzOCA9IDE4OwovKiByZXBlYXQgYSB6ZXJvIGxlbmd0aCAxMS0xMzggdGltZXMgICg3IGJpdHMgb2YgcmVwZWF0IGNvdW50KSAqLwoKLyogZXNsaW50LWRpc2FibGUgY29tbWEtc3BhY2luZyxhcnJheS1icmFja2V0LXNwYWNpbmcgKi8KdmFyIGV4dHJhX2xiaXRzID0gICAvKiBleHRyYSBiaXRzIGZvciBlYWNoIGxlbmd0aCBjb2RlICovCiAgWzAsMCwwLDAsMCwwLDAsMCwxLDEsMSwxLDIsMiwyLDIsMywzLDMsMyw0LDQsNCw0LDUsNSw1LDUsMF07Cgp2YXIgZXh0cmFfZGJpdHMgPSAgIC8qIGV4dHJhIGJpdHMgZm9yIGVhY2ggZGlzdGFuY2UgY29kZSAqLwogIFswLDAsMCwwLDEsMSwyLDIsMywzLDQsNCw1LDUsNiw2LDcsNyw4LDgsOSw5LDEwLDEwLDExLDExLDEyLDEyLDEzLDEzXTsKCnZhciBleHRyYV9ibGJpdHMgPSAgLyogZXh0cmEgYml0cyBmb3IgZWFjaCBiaXQgbGVuZ3RoIGNvZGUgKi8KICBbMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwyLDMsN107Cgp2YXIgYmxfb3JkZXIgPQogIFsxNiwxNywxOCwwLDgsNyw5LDYsMTAsNSwxMSw0LDEyLDMsMTMsMiwxNCwxLDE1XTsKLyogZXNsaW50LWVuYWJsZSBjb21tYS1zcGFjaW5nLGFycmF5LWJyYWNrZXQtc3BhY2luZyAqLwoKLyogVGhlIGxlbmd0aHMgb2YgdGhlIGJpdCBsZW5ndGggY29kZXMgYXJlIHNlbnQgaW4gb3JkZXIgb2YgZGVjcmVhc2luZwogKiBwcm9iYWJpbGl0eSwgdG8gYXZvaWQgdHJhbnNtaXR0aW5nIHRoZSBsZW5ndGhzIGZvciB1bnVzZWQgYml0IGxlbmd0aCBjb2Rlcy4KICovCgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogTG9jYWwgZGF0YS4gVGhlc2UgYXJlIGluaXRpYWxpemVkIG9ubHkgb25jZS4KICovCgovLyBXZSBwcmUtZmlsbCBhcnJheXMgd2l0aCAwIHRvIGF2b2lkIHVuaW5pdGlhbGl6ZWQgZ2FwcwoKdmFyIERJU1RfQ09ERV9MRU4gPSA1MTI7IC8qIHNlZSBkZWZpbml0aW9uIG9mIGFycmF5IGRpc3RfY29kZSBiZWxvdyAqLwoKLy8gISEhISBVc2UgZmxhdCBhcnJheSBpbnNkZWFkIG9mIHN0cnVjdHVyZSwgRnJlcSA9IGkqMiwgTGVuID0gaSoyKzEKdmFyIHN0YXRpY19sdHJlZSAgPSBuZXcgQXJyYXkoKExfQ09ERVMgKyAyKSAqIDIpOwp6ZXJvKHN0YXRpY19sdHJlZSk7Ci8qIFRoZSBzdGF0aWMgbGl0ZXJhbCB0cmVlLiBTaW5jZSB0aGUgYml0IGxlbmd0aHMgYXJlIGltcG9zZWQsIHRoZXJlIGlzIG5vCiAqIG5lZWQgZm9yIHRoZSBMX0NPREVTIGV4dHJhIGNvZGVzIHVzZWQgZHVyaW5nIGhlYXAgY29uc3RydWN0aW9uLiBIb3dldmVyCiAqIFRoZSBjb2RlcyAyODYgYW5kIDI4NyBhcmUgbmVlZGVkIHRvIGJ1aWxkIGEgY2Fub25pY2FsIHRyZWUgKHNlZSBfdHJfaW5pdAogKiBiZWxvdykuCiAqLwoKdmFyIHN0YXRpY19kdHJlZSAgPSBuZXcgQXJyYXkoRF9DT0RFUyAqIDIpOwp6ZXJvKHN0YXRpY19kdHJlZSk7Ci8qIFRoZSBzdGF0aWMgZGlzdGFuY2UgdHJlZS4gKEFjdHVhbGx5IGEgdHJpdmlhbCB0cmVlIHNpbmNlIGFsbCBjb2RlcyB1c2UKICogNSBiaXRzLikKICovCgp2YXIgX2Rpc3RfY29kZSAgICA9IG5ldyBBcnJheShESVNUX0NPREVfTEVOKTsKemVybyhfZGlzdF9jb2RlKTsKLyogRGlzdGFuY2UgY29kZXMuIFRoZSBmaXJzdCAyNTYgdmFsdWVzIGNvcnJlc3BvbmQgdG8gdGhlIGRpc3RhbmNlcwogKiAzIC4uIDI1OCwgdGhlIGxhc3QgMjU2IHZhbHVlcyBjb3JyZXNwb25kIHRvIHRoZSB0b3AgOCBiaXRzIG9mCiAqIHRoZSAxNSBiaXQgZGlzdGFuY2VzLgogKi8KCnZhciBfbGVuZ3RoX2NvZGUgID0gbmV3IEFycmF5KE1BWF9NQVRDSCAtIE1JTl9NQVRDSCArIDEpOwp6ZXJvKF9sZW5ndGhfY29kZSk7Ci8qIGxlbmd0aCBjb2RlIGZvciBlYWNoIG5vcm1hbGl6ZWQgbWF0Y2ggbGVuZ3RoICgwID09IE1JTl9NQVRDSCkgKi8KCnZhciBiYXNlX2xlbmd0aCAgID0gbmV3IEFycmF5KExFTkdUSF9DT0RFUyk7Cnplcm8oYmFzZV9sZW5ndGgpOwovKiBGaXJzdCBub3JtYWxpemVkIGxlbmd0aCBmb3IgZWFjaCBjb2RlICgwID0gTUlOX01BVENIKSAqLwoKdmFyIGJhc2VfZGlzdCAgICAgPSBuZXcgQXJyYXkoRF9DT0RFUyk7Cnplcm8oYmFzZV9kaXN0KTsKLyogRmlyc3Qgbm9ybWFsaXplZCBkaXN0YW5jZSBmb3IgZWFjaCBjb2RlICgwID0gZGlzdGFuY2Ugb2YgMSkgKi8KCgpmdW5jdGlvbiBTdGF0aWNUcmVlRGVzYyhzdGF0aWNfdHJlZSwgZXh0cmFfYml0cywgZXh0cmFfYmFzZSwgZWxlbXMsIG1heF9sZW5ndGgpIHsKCiAgdGhpcy5zdGF0aWNfdHJlZSAgPSBzdGF0aWNfdHJlZTsgIC8qIHN0YXRpYyB0cmVlIG9yIE5VTEwgKi8KICB0aGlzLmV4dHJhX2JpdHMgICA9IGV4dHJhX2JpdHM7ICAgLyogZXh0cmEgYml0cyBmb3IgZWFjaCBjb2RlIG9yIE5VTEwgKi8KICB0aGlzLmV4dHJhX2Jhc2UgICA9IGV4dHJhX2Jhc2U7ICAgLyogYmFzZSBpbmRleCBmb3IgZXh0cmFfYml0cyAqLwogIHRoaXMuZWxlbXMgICAgICAgID0gZWxlbXM7ICAgICAgICAvKiBtYXggbnVtYmVyIG9mIGVsZW1lbnRzIGluIHRoZSB0cmVlICovCiAgdGhpcy5tYXhfbGVuZ3RoICAgPSBtYXhfbGVuZ3RoOyAgIC8qIG1heCBiaXQgbGVuZ3RoIGZvciB0aGUgY29kZXMgKi8KCiAgLy8gc2hvdyBpZiBgc3RhdGljX3RyZWVgIGhhcyBkYXRhIG9yIGR1bW15IC0gbmVlZGVkIGZvciBtb25vbW9ycGhpYyBvYmplY3RzCiAgdGhpcy5oYXNfc3RyZWUgICAgPSBzdGF0aWNfdHJlZSAmJiBzdGF0aWNfdHJlZS5sZW5ndGg7Cn0KCgp2YXIgc3RhdGljX2xfZGVzYzsKdmFyIHN0YXRpY19kX2Rlc2M7CnZhciBzdGF0aWNfYmxfZGVzYzsKCgpmdW5jdGlvbiBUcmVlRGVzYyhkeW5fdHJlZSwgc3RhdF9kZXNjKSB7CiAgdGhpcy5keW5fdHJlZSA9IGR5bl90cmVlOyAgICAgLyogdGhlIGR5bmFtaWMgdHJlZSAqLwogIHRoaXMubWF4X2NvZGUgPSAwOyAgICAgICAgICAgIC8qIGxhcmdlc3QgY29kZSB3aXRoIG5vbiB6ZXJvIGZyZXF1ZW5jeSAqLwogIHRoaXMuc3RhdF9kZXNjID0gc3RhdF9kZXNjOyAgIC8qIHRoZSBjb3JyZXNwb25kaW5nIHN0YXRpYyB0cmVlICovCn0KCgoKZnVuY3Rpb24gZF9jb2RlKGRpc3QpIHsKICByZXR1cm4gZGlzdCA8IDI1NiA/IF9kaXN0X2NvZGVbZGlzdF0gOiBfZGlzdF9jb2RlWzI1NiArIChkaXN0ID4+PiA3KV07Cn0KCgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogT3V0cHV0IGEgc2hvcnQgTFNCIGZpcnN0IG9uIHRoZSBzdHJlYW0uCiAqIElOIGFzc2VydGlvbjogdGhlcmUgaXMgZW5vdWdoIHJvb20gaW4gcGVuZGluZ0J1Zi4KICovCmZ1bmN0aW9uIHB1dF9zaG9ydChzLCB3KSB7Ci8vICAgIHB1dF9ieXRlKHMsICh1Y2gpKCh3KSAmIDB4ZmYpKTsKLy8gICAgcHV0X2J5dGUocywgKHVjaCkoKHVzaCkodykgPj4gOCkpOwogIHMucGVuZGluZ19idWZbcy5wZW5kaW5nKytdID0gKHcpICYgMHhmZjsKICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9ICh3ID4+PiA4KSAmIDB4ZmY7Cn0KCgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogU2VuZCBhIHZhbHVlIG9uIGEgZ2l2ZW4gbnVtYmVyIG9mIGJpdHMuCiAqIElOIGFzc2VydGlvbjogbGVuZ3RoIDw9IDE2IGFuZCB2YWx1ZSBmaXRzIGluIGxlbmd0aCBiaXRzLgogKi8KZnVuY3Rpb24gc2VuZF9iaXRzKHMsIHZhbHVlLCBsZW5ndGgpIHsKICBpZiAocy5iaV92YWxpZCA+IChCdWZfc2l6ZSAtIGxlbmd0aCkpIHsKICAgIHMuYmlfYnVmIHw9ICh2YWx1ZSA8PCBzLmJpX3ZhbGlkKSAmIDB4ZmZmZjsKICAgIHB1dF9zaG9ydChzLCBzLmJpX2J1Zik7CiAgICBzLmJpX2J1ZiA9IHZhbHVlID4+IChCdWZfc2l6ZSAtIHMuYmlfdmFsaWQpOwogICAgcy5iaV92YWxpZCArPSBsZW5ndGggLSBCdWZfc2l6ZTsKICB9IGVsc2UgewogICAgcy5iaV9idWYgfD0gKHZhbHVlIDw8IHMuYmlfdmFsaWQpICYgMHhmZmZmOwogICAgcy5iaV92YWxpZCArPSBsZW5ndGg7CiAgfQp9CgoKZnVuY3Rpb24gc2VuZF9jb2RlKHMsIGMsIHRyZWUpIHsKICBzZW5kX2JpdHMocywgdHJlZVtjICogMl0vKi5Db2RlKi8sIHRyZWVbYyAqIDIgKyAxXS8qLkxlbiovKTsKfQoKCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBSZXZlcnNlIHRoZSBmaXJzdCBsZW4gYml0cyBvZiBhIGNvZGUsIHVzaW5nIHN0cmFpZ2h0Zm9yd2FyZCBjb2RlIChhIGZhc3RlcgogKiBtZXRob2Qgd291bGQgdXNlIGEgdGFibGUpCiAqIElOIGFzc2VydGlvbjogMSA8PSBsZW4gPD0gMTUKICovCmZ1bmN0aW9uIGJpX3JldmVyc2UoY29kZSwgbGVuKSB7CiAgdmFyIHJlcyA9IDA7CiAgZG8gewogICAgcmVzIHw9IGNvZGUgJiAxOwogICAgY29kZSA+Pj49IDE7CiAgICByZXMgPDw9IDE7CiAgfSB3aGlsZSAoLS1sZW4gPiAwKTsKICByZXR1cm4gcmVzID4+PiAxOwp9CgoKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIEZsdXNoIHRoZSBiaXQgYnVmZmVyLCBrZWVwaW5nIGF0IG1vc3QgNyBiaXRzIGluIGl0LgogKi8KZnVuY3Rpb24gYmlfZmx1c2gocykgewogIGlmIChzLmJpX3ZhbGlkID09PSAxNikgewogICAgcHV0X3Nob3J0KHMsIHMuYmlfYnVmKTsKICAgIHMuYmlfYnVmID0gMDsKICAgIHMuYmlfdmFsaWQgPSAwOwoKICB9IGVsc2UgaWYgKHMuYmlfdmFsaWQgPj0gOCkgewogICAgcy5wZW5kaW5nX2J1ZltzLnBlbmRpbmcrK10gPSBzLmJpX2J1ZiAmIDB4ZmY7CiAgICBzLmJpX2J1ZiA+Pj0gODsKICAgIHMuYmlfdmFsaWQgLT0gODsKICB9Cn0KCgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogQ29tcHV0ZSB0aGUgb3B0aW1hbCBiaXQgbGVuZ3RocyBmb3IgYSB0cmVlIGFuZCB1cGRhdGUgdGhlIHRvdGFsIGJpdCBsZW5ndGgKICogZm9yIHRoZSBjdXJyZW50IGJsb2NrLgogKiBJTiBhc3NlcnRpb246IHRoZSBmaWVsZHMgZnJlcSBhbmQgZGFkIGFyZSBzZXQsIGhlYXBbaGVhcF9tYXhdIGFuZAogKiAgICBhYm92ZSBhcmUgdGhlIHRyZWUgbm9kZXMgc29ydGVkIGJ5IGluY3JlYXNpbmcgZnJlcXVlbmN5LgogKiBPVVQgYXNzZXJ0aW9uczogdGhlIGZpZWxkIGxlbiBpcyBzZXQgdG8gdGhlIG9wdGltYWwgYml0IGxlbmd0aCwgdGhlCiAqICAgICBhcnJheSBibF9jb3VudCBjb250YWlucyB0aGUgZnJlcXVlbmNpZXMgZm9yIGVhY2ggYml0IGxlbmd0aC4KICogICAgIFRoZSBsZW5ndGggb3B0X2xlbiBpcyB1cGRhdGVkOyBzdGF0aWNfbGVuIGlzIGFsc28gdXBkYXRlZCBpZiBzdHJlZSBpcwogKiAgICAgbm90IG51bGwuCiAqLwpmdW5jdGlvbiBnZW5fYml0bGVuKHMsIGRlc2MpCi8vICAgIGRlZmxhdGVfc3RhdGUgKnM7Ci8vICAgIHRyZWVfZGVzYyAqZGVzYzsgICAgLyogdGhlIHRyZWUgZGVzY3JpcHRvciAqLwp7CiAgdmFyIHRyZWUgICAgICAgICAgICA9IGRlc2MuZHluX3RyZWU7CiAgdmFyIG1heF9jb2RlICAgICAgICA9IGRlc2MubWF4X2NvZGU7CiAgdmFyIHN0cmVlICAgICAgICAgICA9IGRlc2Muc3RhdF9kZXNjLnN0YXRpY190cmVlOwogIHZhciBoYXNfc3RyZWUgICAgICAgPSBkZXNjLnN0YXRfZGVzYy5oYXNfc3RyZWU7CiAgdmFyIGV4dHJhICAgICAgICAgICA9IGRlc2Muc3RhdF9kZXNjLmV4dHJhX2JpdHM7CiAgdmFyIGJhc2UgICAgICAgICAgICA9IGRlc2Muc3RhdF9kZXNjLmV4dHJhX2Jhc2U7CiAgdmFyIG1heF9sZW5ndGggICAgICA9IGRlc2Muc3RhdF9kZXNjLm1heF9sZW5ndGg7CiAgdmFyIGg7ICAgICAgICAgICAgICAvKiBoZWFwIGluZGV4ICovCiAgdmFyIG4sIG07ICAgICAgICAgICAvKiBpdGVyYXRlIG92ZXIgdGhlIHRyZWUgZWxlbWVudHMgKi8KICB2YXIgYml0czsgICAgICAgICAgIC8qIGJpdCBsZW5ndGggKi8KICB2YXIgeGJpdHM7ICAgICAgICAgIC8qIGV4dHJhIGJpdHMgKi8KICB2YXIgZjsgICAgICAgICAgICAgIC8qIGZyZXF1ZW5jeSAqLwogIHZhciBvdmVyZmxvdyA9IDA7ICAgLyogbnVtYmVyIG9mIGVsZW1lbnRzIHdpdGggYml0IGxlbmd0aCB0b28gbGFyZ2UgKi8KCiAgZm9yIChiaXRzID0gMDsgYml0cyA8PSBNQVhfQklUUzsgYml0cysrKSB7CiAgICBzLmJsX2NvdW50W2JpdHNdID0gMDsKICB9CgogIC8qIEluIGEgZmlyc3QgcGFzcywgY29tcHV0ZSB0aGUgb3B0aW1hbCBiaXQgbGVuZ3RocyAod2hpY2ggbWF5CiAgICogb3ZlcmZsb3cgaW4gdGhlIGNhc2Ugb2YgdGhlIGJpdCBsZW5ndGggdHJlZSkuCiAgICovCiAgdHJlZVtzLmhlYXBbcy5oZWFwX21heF0gKiAyICsgMV0vKi5MZW4qLyA9IDA7IC8qIHJvb3Qgb2YgdGhlIGhlYXAgKi8KCiAgZm9yIChoID0gcy5oZWFwX21heCArIDE7IGggPCBIRUFQX1NJWkU7IGgrKykgewogICAgbiA9IHMuaGVhcFtoXTsKICAgIGJpdHMgPSB0cmVlW3RyZWVbbiAqIDIgKyAxXS8qLkRhZCovICogMiArIDFdLyouTGVuKi8gKyAxOwogICAgaWYgKGJpdHMgPiBtYXhfbGVuZ3RoKSB7CiAgICAgIGJpdHMgPSBtYXhfbGVuZ3RoOwogICAgICBvdmVyZmxvdysrOwogICAgfQogICAgdHJlZVtuICogMiArIDFdLyouTGVuKi8gPSBiaXRzOwogICAgLyogV2Ugb3ZlcndyaXRlIHRyZWVbbl0uRGFkIHdoaWNoIGlzIG5vIGxvbmdlciBuZWVkZWQgKi8KCiAgICBpZiAobiA+IG1heF9jb2RlKSB7IGNvbnRpbnVlOyB9IC8qIG5vdCBhIGxlYWYgbm9kZSAqLwoKICAgIHMuYmxfY291bnRbYml0c10rKzsKICAgIHhiaXRzID0gMDsKICAgIGlmIChuID49IGJhc2UpIHsKICAgICAgeGJpdHMgPSBleHRyYVtuIC0gYmFzZV07CiAgICB9CiAgICBmID0gdHJlZVtuICogMl0vKi5GcmVxKi87CiAgICBzLm9wdF9sZW4gKz0gZiAqIChiaXRzICsgeGJpdHMpOwogICAgaWYgKGhhc19zdHJlZSkgewogICAgICBzLnN0YXRpY19sZW4gKz0gZiAqIChzdHJlZVtuICogMiArIDFdLyouTGVuKi8gKyB4Yml0cyk7CiAgICB9CiAgfQogIGlmIChvdmVyZmxvdyA9PT0gMCkgeyByZXR1cm47IH0KCiAgLy8gVHJhY2UoKHN0ZGVyciwiXG5iaXQgbGVuZ3RoIG92ZXJmbG93XG4iKSk7CiAgLyogVGhpcyBoYXBwZW5zIGZvciBleGFtcGxlIG9uIG9iajIgYW5kIHBpYyBvZiB0aGUgQ2FsZ2FyeSBjb3JwdXMgKi8KCiAgLyogRmluZCB0aGUgZmlyc3QgYml0IGxlbmd0aCB3aGljaCBjb3VsZCBpbmNyZWFzZTogKi8KICBkbyB7CiAgICBiaXRzID0gbWF4X2xlbmd0aCAtIDE7CiAgICB3aGlsZSAocy5ibF9jb3VudFtiaXRzXSA9PT0gMCkgeyBiaXRzLS07IH0KICAgIHMuYmxfY291bnRbYml0c10tLTsgICAgICAvKiBtb3ZlIG9uZSBsZWFmIGRvd24gdGhlIHRyZWUgKi8KICAgIHMuYmxfY291bnRbYml0cyArIDFdICs9IDI7IC8qIG1vdmUgb25lIG92ZXJmbG93IGl0ZW0gYXMgaXRzIGJyb3RoZXIgKi8KICAgIHMuYmxfY291bnRbbWF4X2xlbmd0aF0tLTsKICAgIC8qIFRoZSBicm90aGVyIG9mIHRoZSBvdmVyZmxvdyBpdGVtIGFsc28gbW92ZXMgb25lIHN0ZXAgdXAsCiAgICAgKiBidXQgdGhpcyBkb2VzIG5vdCBhZmZlY3QgYmxfY291bnRbbWF4X2xlbmd0aF0KICAgICAqLwogICAgb3ZlcmZsb3cgLT0gMjsKICB9IHdoaWxlIChvdmVyZmxvdyA+IDApOwoKICAvKiBOb3cgcmVjb21wdXRlIGFsbCBiaXQgbGVuZ3Rocywgc2Nhbm5pbmcgaW4gaW5jcmVhc2luZyBmcmVxdWVuY3kuCiAgICogaCBpcyBzdGlsbCBlcXVhbCB0byBIRUFQX1NJWkUuIChJdCBpcyBzaW1wbGVyIHRvIHJlY29uc3RydWN0IGFsbAogICAqIGxlbmd0aHMgaW5zdGVhZCBvZiBmaXhpbmcgb25seSB0aGUgd3Jvbmcgb25lcy4gVGhpcyBpZGVhIGlzIHRha2VuCiAgICogZnJvbSAnYXInIHdyaXR0ZW4gYnkgSGFydWhpa28gT2t1bXVyYS4pCiAgICovCiAgZm9yIChiaXRzID0gbWF4X2xlbmd0aDsgYml0cyAhPT0gMDsgYml0cy0tKSB7CiAgICBuID0gcy5ibF9jb3VudFtiaXRzXTsKICAgIHdoaWxlIChuICE9PSAwKSB7CiAgICAgIG0gPSBzLmhlYXBbLS1oXTsKICAgICAgaWYgKG0gPiBtYXhfY29kZSkgeyBjb250aW51ZTsgfQogICAgICBpZiAodHJlZVttICogMiArIDFdLyouTGVuKi8gIT09IGJpdHMpIHsKICAgICAgICAvLyBUcmFjZSgoc3RkZXJyLCJjb2RlICVkIGJpdHMgJWQtPiVkXG4iLCBtLCB0cmVlW21dLkxlbiwgYml0cykpOwogICAgICAgIHMub3B0X2xlbiArPSAoYml0cyAtIHRyZWVbbSAqIDIgKyAxXS8qLkxlbiovKSAqIHRyZWVbbSAqIDJdLyouRnJlcSovOwogICAgICAgIHRyZWVbbSAqIDIgKyAxXS8qLkxlbiovID0gYml0czsKICAgICAgfQogICAgICBuLS07CiAgICB9CiAgfQp9CgoKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIEdlbmVyYXRlIHRoZSBjb2RlcyBmb3IgYSBnaXZlbiB0cmVlIGFuZCBiaXQgY291bnRzICh3aGljaCBuZWVkIG5vdCBiZQogKiBvcHRpbWFsKS4KICogSU4gYXNzZXJ0aW9uOiB0aGUgYXJyYXkgYmxfY291bnQgY29udGFpbnMgdGhlIGJpdCBsZW5ndGggc3RhdGlzdGljcyBmb3IKICogdGhlIGdpdmVuIHRyZWUgYW5kIHRoZSBmaWVsZCBsZW4gaXMgc2V0IGZvciBhbGwgdHJlZSBlbGVtZW50cy4KICogT1VUIGFzc2VydGlvbjogdGhlIGZpZWxkIGNvZGUgaXMgc2V0IGZvciBhbGwgdHJlZSBlbGVtZW50cyBvZiBub24KICogICAgIHplcm8gY29kZSBsZW5ndGguCiAqLwpmdW5jdGlvbiBnZW5fY29kZXModHJlZSwgbWF4X2NvZGUsIGJsX2NvdW50KQovLyAgICBjdF9kYXRhICp0cmVlOyAgICAgICAgICAgICAvKiB0aGUgdHJlZSB0byBkZWNvcmF0ZSAqLwovLyAgICBpbnQgbWF4X2NvZGU7ICAgICAgICAgICAgICAvKiBsYXJnZXN0IGNvZGUgd2l0aCBub24gemVybyBmcmVxdWVuY3kgKi8KLy8gICAgdXNoZiAqYmxfY291bnQ7ICAgICAgICAgICAgLyogbnVtYmVyIG9mIGNvZGVzIGF0IGVhY2ggYml0IGxlbmd0aCAqLwp7CiAgdmFyIG5leHRfY29kZSA9IG5ldyBBcnJheShNQVhfQklUUyArIDEpOyAvKiBuZXh0IGNvZGUgdmFsdWUgZm9yIGVhY2ggYml0IGxlbmd0aCAqLwogIHZhciBjb2RlID0gMDsgICAgICAgICAgICAgIC8qIHJ1bm5pbmcgY29kZSB2YWx1ZSAqLwogIHZhciBiaXRzOyAgICAgICAgICAgICAgICAgIC8qIGJpdCBpbmRleCAqLwogIHZhciBuOyAgICAgICAgICAgICAgICAgICAgIC8qIGNvZGUgaW5kZXggKi8KCiAgLyogVGhlIGRpc3RyaWJ1dGlvbiBjb3VudHMgYXJlIGZpcnN0IHVzZWQgdG8gZ2VuZXJhdGUgdGhlIGNvZGUgdmFsdWVzCiAgICogd2l0aG91dCBiaXQgcmV2ZXJzYWwuCiAgICovCiAgZm9yIChiaXRzID0gMTsgYml0cyA8PSBNQVhfQklUUzsgYml0cysrKSB7CiAgICBuZXh0X2NvZGVbYml0c10gPSBjb2RlID0gKGNvZGUgKyBibF9jb3VudFtiaXRzIC0gMV0pIDw8IDE7CiAgfQogIC8qIENoZWNrIHRoYXQgdGhlIGJpdCBjb3VudHMgaW4gYmxfY291bnQgYXJlIGNvbnNpc3RlbnQuIFRoZSBsYXN0IGNvZGUKICAgKiBtdXN0IGJlIGFsbCBvbmVzLgogICAqLwogIC8vQXNzZXJ0IChjb2RlICsgYmxfY291bnRbTUFYX0JJVFNdLTEgPT0gKDE8PE1BWF9CSVRTKS0xLAogIC8vICAgICAgICAiaW5jb25zaXN0ZW50IGJpdCBjb3VudHMiKTsKICAvL1RyYWNldigoc3RkZXJyLCJcbmdlbl9jb2RlczogbWF4X2NvZGUgJWQgIiwgbWF4X2NvZGUpKTsKCiAgZm9yIChuID0gMDsgIG4gPD0gbWF4X2NvZGU7IG4rKykgewogICAgdmFyIGxlbiA9IHRyZWVbbiAqIDIgKyAxXS8qLkxlbiovOwogICAgaWYgKGxlbiA9PT0gMCkgeyBjb250aW51ZTsgfQogICAgLyogTm93IHJldmVyc2UgdGhlIGJpdHMgKi8KICAgIHRyZWVbbiAqIDJdLyouQ29kZSovID0gYmlfcmV2ZXJzZShuZXh0X2NvZGVbbGVuXSsrLCBsZW4pOwoKICAgIC8vVHJhY2Vjdih0cmVlICE9IHN0YXRpY19sdHJlZSwgKHN0ZGVyciwiXG5uICUzZCAlYyBsICUyZCBjICU0eCAoJXgpICIsCiAgICAvLyAgICAgbiwgKGlzZ3JhcGgobikgPyBuIDogJyAnKSwgbGVuLCB0cmVlW25dLkNvZGUsIG5leHRfY29kZVtsZW5dLTEpKTsKICB9Cn0KCgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogSW5pdGlhbGl6ZSB0aGUgdmFyaW91cyAnY29uc3RhbnQnIHRhYmxlcy4KICovCmZ1bmN0aW9uIHRyX3N0YXRpY19pbml0KCkgewogIHZhciBuOyAgICAgICAgLyogaXRlcmF0ZXMgb3ZlciB0cmVlIGVsZW1lbnRzICovCiAgdmFyIGJpdHM7ICAgICAvKiBiaXQgY291bnRlciAqLwogIHZhciBsZW5ndGg7ICAgLyogbGVuZ3RoIHZhbHVlICovCiAgdmFyIGNvZGU7ICAgICAvKiBjb2RlIHZhbHVlICovCiAgdmFyIGRpc3Q7ICAgICAvKiBkaXN0YW5jZSBpbmRleCAqLwogIHZhciBibF9jb3VudCA9IG5ldyBBcnJheShNQVhfQklUUyArIDEpOwogIC8qIG51bWJlciBvZiBjb2RlcyBhdCBlYWNoIGJpdCBsZW5ndGggZm9yIGFuIG9wdGltYWwgdHJlZSAqLwoKICAvLyBkbyBjaGVjayBpbiBfdHJfaW5pdCgpCiAgLy9pZiAoc3RhdGljX2luaXRfZG9uZSkgcmV0dXJuOwoKICAvKiBGb3Igc29tZSBlbWJlZGRlZCB0YXJnZXRzLCBnbG9iYWwgdmFyaWFibGVzIGFyZSBub3QgaW5pdGlhbGl6ZWQ6ICovCi8qI2lmZGVmIE5PX0lOSVRfR0xPQkFMX1BPSU5URVJTCiAgc3RhdGljX2xfZGVzYy5zdGF0aWNfdHJlZSA9IHN0YXRpY19sdHJlZTsKICBzdGF0aWNfbF9kZXNjLmV4dHJhX2JpdHMgPSBleHRyYV9sYml0czsKICBzdGF0aWNfZF9kZXNjLnN0YXRpY190cmVlID0gc3RhdGljX2R0cmVlOwogIHN0YXRpY19kX2Rlc2MuZXh0cmFfYml0cyA9IGV4dHJhX2RiaXRzOwogIHN0YXRpY19ibF9kZXNjLmV4dHJhX2JpdHMgPSBleHRyYV9ibGJpdHM7CiNlbmRpZiovCgogIC8qIEluaXRpYWxpemUgdGhlIG1hcHBpbmcgbGVuZ3RoICgwLi4yNTUpIC0+IGxlbmd0aCBjb2RlICgwLi4yOCkgKi8KICBsZW5ndGggPSAwOwogIGZvciAoY29kZSA9IDA7IGNvZGUgPCBMRU5HVEhfQ09ERVMgLSAxOyBjb2RlKyspIHsKICAgIGJhc2VfbGVuZ3RoW2NvZGVdID0gbGVuZ3RoOwogICAgZm9yIChuID0gMDsgbiA8ICgxIDw8IGV4dHJhX2xiaXRzW2NvZGVdKTsgbisrKSB7CiAgICAgIF9sZW5ndGhfY29kZVtsZW5ndGgrK10gPSBjb2RlOwogICAgfQogIH0KICAvL0Fzc2VydCAobGVuZ3RoID09IDI1NiwgInRyX3N0YXRpY19pbml0OiBsZW5ndGggIT0gMjU2Iik7CiAgLyogTm90ZSB0aGF0IHRoZSBsZW5ndGggMjU1IChtYXRjaCBsZW5ndGggMjU4KSBjYW4gYmUgcmVwcmVzZW50ZWQKICAgKiBpbiB0d28gZGlmZmVyZW50IHdheXM6IGNvZGUgMjg0ICsgNSBiaXRzIG9yIGNvZGUgMjg1LCBzbyB3ZQogICAqIG92ZXJ3cml0ZSBsZW5ndGhfY29kZVsyNTVdIHRvIHVzZSB0aGUgYmVzdCBlbmNvZGluZzoKICAgKi8KICBfbGVuZ3RoX2NvZGVbbGVuZ3RoIC0gMV0gPSBjb2RlOwoKICAvKiBJbml0aWFsaXplIHRoZSBtYXBwaW5nIGRpc3QgKDAuLjMySykgLT4gZGlzdCBjb2RlICgwLi4yOSkgKi8KICBkaXN0ID0gMDsKICBmb3IgKGNvZGUgPSAwOyBjb2RlIDwgMTY7IGNvZGUrKykgewogICAgYmFzZV9kaXN0W2NvZGVdID0gZGlzdDsKICAgIGZvciAobiA9IDA7IG4gPCAoMSA8PCBleHRyYV9kYml0c1tjb2RlXSk7IG4rKykgewogICAgICBfZGlzdF9jb2RlW2Rpc3QrK10gPSBjb2RlOwogICAgfQogIH0KICAvL0Fzc2VydCAoZGlzdCA9PSAyNTYsICJ0cl9zdGF0aWNfaW5pdDogZGlzdCAhPSAyNTYiKTsKICBkaXN0ID4+PSA3OyAvKiBmcm9tIG5vdyBvbiwgYWxsIGRpc3RhbmNlcyBhcmUgZGl2aWRlZCBieSAxMjggKi8KICBmb3IgKDsgY29kZSA8IERfQ09ERVM7IGNvZGUrKykgewogICAgYmFzZV9kaXN0W2NvZGVdID0gZGlzdCA8PCA3OwogICAgZm9yIChuID0gMDsgbiA8ICgxIDw8IChleHRyYV9kYml0c1tjb2RlXSAtIDcpKTsgbisrKSB7CiAgICAgIF9kaXN0X2NvZGVbMjU2ICsgZGlzdCsrXSA9IGNvZGU7CiAgICB9CiAgfQogIC8vQXNzZXJ0IChkaXN0ID09IDI1NiwgInRyX3N0YXRpY19pbml0OiAyNTYrZGlzdCAhPSA1MTIiKTsKCiAgLyogQ29uc3RydWN0IHRoZSBjb2RlcyBvZiB0aGUgc3RhdGljIGxpdGVyYWwgdHJlZSAqLwogIGZvciAoYml0cyA9IDA7IGJpdHMgPD0gTUFYX0JJVFM7IGJpdHMrKykgewogICAgYmxfY291bnRbYml0c10gPSAwOwogIH0KCiAgbiA9IDA7CiAgd2hpbGUgKG4gPD0gMTQzKSB7CiAgICBzdGF0aWNfbHRyZWVbbiAqIDIgKyAxXS8qLkxlbiovID0gODsKICAgIG4rKzsKICAgIGJsX2NvdW50WzhdKys7CiAgfQogIHdoaWxlIChuIDw9IDI1NSkgewogICAgc3RhdGljX2x0cmVlW24gKiAyICsgMV0vKi5MZW4qLyA9IDk7CiAgICBuKys7CiAgICBibF9jb3VudFs5XSsrOwogIH0KICB3aGlsZSAobiA8PSAyNzkpIHsKICAgIHN0YXRpY19sdHJlZVtuICogMiArIDFdLyouTGVuKi8gPSA3OwogICAgbisrOwogICAgYmxfY291bnRbN10rKzsKICB9CiAgd2hpbGUgKG4gPD0gMjg3KSB7CiAgICBzdGF0aWNfbHRyZWVbbiAqIDIgKyAxXS8qLkxlbiovID0gODsKICAgIG4rKzsKICAgIGJsX2NvdW50WzhdKys7CiAgfQogIC8qIENvZGVzIDI4NiBhbmQgMjg3IGRvIG5vdCBleGlzdCwgYnV0IHdlIG11c3QgaW5jbHVkZSB0aGVtIGluIHRoZQogICAqIHRyZWUgY29uc3RydWN0aW9uIHRvIGdldCBhIGNhbm9uaWNhbCBIdWZmbWFuIHRyZWUgKGxvbmdlc3QgY29kZQogICAqIGFsbCBvbmVzKQogICAqLwogIGdlbl9jb2RlcyhzdGF0aWNfbHRyZWUsIExfQ09ERVMgKyAxLCBibF9jb3VudCk7CgogIC8qIFRoZSBzdGF0aWMgZGlzdGFuY2UgdHJlZSBpcyB0cml2aWFsOiAqLwogIGZvciAobiA9IDA7IG4gPCBEX0NPREVTOyBuKyspIHsKICAgIHN0YXRpY19kdHJlZVtuICogMiArIDFdLyouTGVuKi8gPSA1OwogICAgc3RhdGljX2R0cmVlW24gKiAyXS8qLkNvZGUqLyA9IGJpX3JldmVyc2UobiwgNSk7CiAgfQoKICAvLyBOb3cgZGF0YSByZWFkeSBhbmQgd2UgY2FuIGluaXQgc3RhdGljIHRyZWVzCiAgc3RhdGljX2xfZGVzYyA9IG5ldyBTdGF0aWNUcmVlRGVzYyhzdGF0aWNfbHRyZWUsIGV4dHJhX2xiaXRzLCBMSVRFUkFMUyArIDEsIExfQ09ERVMsIE1BWF9CSVRTKTsKICBzdGF0aWNfZF9kZXNjID0gbmV3IFN0YXRpY1RyZWVEZXNjKHN0YXRpY19kdHJlZSwgZXh0cmFfZGJpdHMsIDAsICAgICAgICAgIERfQ09ERVMsIE1BWF9CSVRTKTsKICBzdGF0aWNfYmxfZGVzYyA9IG5ldyBTdGF0aWNUcmVlRGVzYyhuZXcgQXJyYXkoMCksIGV4dHJhX2JsYml0cywgMCwgICAgICAgICBCTF9DT0RFUywgTUFYX0JMX0JJVFMpOwoKICAvL3N0YXRpY19pbml0X2RvbmUgPSB0cnVlOwp9CgoKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIEluaXRpYWxpemUgYSBuZXcgYmxvY2suCiAqLwpmdW5jdGlvbiBpbml0X2Jsb2NrKHMpIHsKICB2YXIgbjsgLyogaXRlcmF0ZXMgb3ZlciB0cmVlIGVsZW1lbnRzICovCgogIC8qIEluaXRpYWxpemUgdGhlIHRyZWVzLiAqLwogIGZvciAobiA9IDA7IG4gPCBMX0NPREVTOyAgbisrKSB7IHMuZHluX2x0cmVlW24gKiAyXS8qLkZyZXEqLyA9IDA7IH0KICBmb3IgKG4gPSAwOyBuIDwgRF9DT0RFUzsgIG4rKykgeyBzLmR5bl9kdHJlZVtuICogMl0vKi5GcmVxKi8gPSAwOyB9CiAgZm9yIChuID0gMDsgbiA8IEJMX0NPREVTOyBuKyspIHsgcy5ibF90cmVlW24gKiAyXS8qLkZyZXEqLyA9IDA7IH0KCiAgcy5keW5fbHRyZWVbRU5EX0JMT0NLICogMl0vKi5GcmVxKi8gPSAxOwogIHMub3B0X2xlbiA9IHMuc3RhdGljX2xlbiA9IDA7CiAgcy5sYXN0X2xpdCA9IHMubWF0Y2hlcyA9IDA7Cn0KCgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogRmx1c2ggdGhlIGJpdCBidWZmZXIgYW5kIGFsaWduIHRoZSBvdXRwdXQgb24gYSBieXRlIGJvdW5kYXJ5CiAqLwpmdW5jdGlvbiBiaV93aW5kdXAocykKewogIGlmIChzLmJpX3ZhbGlkID4gOCkgewogICAgcHV0X3Nob3J0KHMsIHMuYmlfYnVmKTsKICB9IGVsc2UgaWYgKHMuYmlfdmFsaWQgPiAwKSB7CiAgICAvL3B1dF9ieXRlKHMsIChCeXRlKXMtPmJpX2J1Zik7CiAgICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9IHMuYmlfYnVmOwogIH0KICBzLmJpX2J1ZiA9IDA7CiAgcy5iaV92YWxpZCA9IDA7Cn0KCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBDb3B5IGEgc3RvcmVkIGJsb2NrLCBzdG9yaW5nIGZpcnN0IHRoZSBsZW5ndGggYW5kIGl0cwogKiBvbmUncyBjb21wbGVtZW50IGlmIHJlcXVlc3RlZC4KICovCmZ1bmN0aW9uIGNvcHlfYmxvY2socywgYnVmLCBsZW4sIGhlYWRlcikKLy9EZWZsYXRlU3RhdGUgKnM7Ci8vY2hhcmYgICAgKmJ1ZjsgICAgLyogdGhlIGlucHV0IGRhdGEgKi8KLy91bnNpZ25lZCBsZW47ICAgICAvKiBpdHMgbGVuZ3RoICovCi8vaW50ICAgICAgaGVhZGVyOyAgLyogdHJ1ZSBpZiBibG9jayBoZWFkZXIgbXVzdCBiZSB3cml0dGVuICovCnsKICBiaV93aW5kdXAocyk7ICAgICAgICAvKiBhbGlnbiBvbiBieXRlIGJvdW5kYXJ5ICovCgogIGlmIChoZWFkZXIpIHsKICAgIHB1dF9zaG9ydChzLCBsZW4pOwogICAgcHV0X3Nob3J0KHMsIH5sZW4pOwogIH0KLy8gIHdoaWxlIChsZW4tLSkgewovLyAgICBwdXRfYnl0ZShzLCAqYnVmKyspOwovLyAgfQogIHV0aWxzLmFycmF5U2V0KHMucGVuZGluZ19idWYsIHMud2luZG93LCBidWYsIGxlbiwgcy5wZW5kaW5nKTsKICBzLnBlbmRpbmcgKz0gbGVuOwp9CgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogQ29tcGFyZXMgdG8gc3VidHJlZXMsIHVzaW5nIHRoZSB0cmVlIGRlcHRoIGFzIHRpZSBicmVha2VyIHdoZW4KICogdGhlIHN1YnRyZWVzIGhhdmUgZXF1YWwgZnJlcXVlbmN5LiBUaGlzIG1pbmltaXplcyB0aGUgd29yc3QgY2FzZSBsZW5ndGguCiAqLwpmdW5jdGlvbiBzbWFsbGVyKHRyZWUsIG4sIG0sIGRlcHRoKSB7CiAgdmFyIF9uMiA9IG4gKiAyOwogIHZhciBfbTIgPSBtICogMjsKICByZXR1cm4gKHRyZWVbX24yXS8qLkZyZXEqLyA8IHRyZWVbX20yXS8qLkZyZXEqLyB8fAogICAgICAgICAodHJlZVtfbjJdLyouRnJlcSovID09PSB0cmVlW19tMl0vKi5GcmVxKi8gJiYgZGVwdGhbbl0gPD0gZGVwdGhbbV0pKTsKfQoKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIFJlc3RvcmUgdGhlIGhlYXAgcHJvcGVydHkgYnkgbW92aW5nIGRvd24gdGhlIHRyZWUgc3RhcnRpbmcgYXQgbm9kZSBrLAogKiBleGNoYW5naW5nIGEgbm9kZSB3aXRoIHRoZSBzbWFsbGVzdCBvZiBpdHMgdHdvIHNvbnMgaWYgbmVjZXNzYXJ5LCBzdG9wcGluZwogKiB3aGVuIHRoZSBoZWFwIHByb3BlcnR5IGlzIHJlLWVzdGFibGlzaGVkIChlYWNoIGZhdGhlciBzbWFsbGVyIHRoYW4gaXRzCiAqIHR3byBzb25zKS4KICovCmZ1bmN0aW9uIHBxZG93bmhlYXAocywgdHJlZSwgaykKLy8gICAgZGVmbGF0ZV9zdGF0ZSAqczsKLy8gICAgY3RfZGF0YSAqdHJlZTsgIC8qIHRoZSB0cmVlIHRvIHJlc3RvcmUgKi8KLy8gICAgaW50IGs7ICAgICAgICAgICAgICAgLyogbm9kZSB0byBtb3ZlIGRvd24gKi8KewogIHZhciB2ID0gcy5oZWFwW2tdOwogIHZhciBqID0gayA8PCAxOyAgLyogbGVmdCBzb24gb2YgayAqLwogIHdoaWxlIChqIDw9IHMuaGVhcF9sZW4pIHsKICAgIC8qIFNldCBqIHRvIHRoZSBzbWFsbGVzdCBvZiB0aGUgdHdvIHNvbnM6ICovCiAgICBpZiAoaiA8IHMuaGVhcF9sZW4gJiYKICAgICAgc21hbGxlcih0cmVlLCBzLmhlYXBbaiArIDFdLCBzLmhlYXBbal0sIHMuZGVwdGgpKSB7CiAgICAgIGorKzsKICAgIH0KICAgIC8qIEV4aXQgaWYgdiBpcyBzbWFsbGVyIHRoYW4gYm90aCBzb25zICovCiAgICBpZiAoc21hbGxlcih0cmVlLCB2LCBzLmhlYXBbal0sIHMuZGVwdGgpKSB7IGJyZWFrOyB9CgogICAgLyogRXhjaGFuZ2UgdiB3aXRoIHRoZSBzbWFsbGVzdCBzb24gKi8KICAgIHMuaGVhcFtrXSA9IHMuaGVhcFtqXTsKICAgIGsgPSBqOwoKICAgIC8qIEFuZCBjb250aW51ZSBkb3duIHRoZSB0cmVlLCBzZXR0aW5nIGogdG8gdGhlIGxlZnQgc29uIG9mIGsgKi8KICAgIGogPDw9IDE7CiAgfQogIHMuaGVhcFtrXSA9IHY7Cn0KCgovLyBpbmxpbmVkIG1hbnVhbGx5Ci8vIHZhciBTTUFMTEVTVCA9IDE7CgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogU2VuZCB0aGUgYmxvY2sgZGF0YSBjb21wcmVzc2VkIHVzaW5nIHRoZSBnaXZlbiBIdWZmbWFuIHRyZWVzCiAqLwpmdW5jdGlvbiBjb21wcmVzc19ibG9jayhzLCBsdHJlZSwgZHRyZWUpCi8vICAgIGRlZmxhdGVfc3RhdGUgKnM7Ci8vICAgIGNvbnN0IGN0X2RhdGEgKmx0cmVlOyAvKiBsaXRlcmFsIHRyZWUgKi8KLy8gICAgY29uc3QgY3RfZGF0YSAqZHRyZWU7IC8qIGRpc3RhbmNlIHRyZWUgKi8KewogIHZhciBkaXN0OyAgICAgICAgICAgLyogZGlzdGFuY2Ugb2YgbWF0Y2hlZCBzdHJpbmcgKi8KICB2YXIgbGM7ICAgICAgICAgICAgIC8qIG1hdGNoIGxlbmd0aCBvciB1bm1hdGNoZWQgY2hhciAoaWYgZGlzdCA9PSAwKSAqLwogIHZhciBseCA9IDA7ICAgICAgICAgLyogcnVubmluZyBpbmRleCBpbiBsX2J1ZiAqLwogIHZhciBjb2RlOyAgICAgICAgICAgLyogdGhlIGNvZGUgdG8gc2VuZCAqLwogIHZhciBleHRyYTsgICAgICAgICAgLyogbnVtYmVyIG9mIGV4dHJhIGJpdHMgdG8gc2VuZCAqLwoKICBpZiAocy5sYXN0X2xpdCAhPT0gMCkgewogICAgZG8gewogICAgICBkaXN0ID0gKHMucGVuZGluZ19idWZbcy5kX2J1ZiArIGx4ICogMl0gPDwgOCkgfCAocy5wZW5kaW5nX2J1ZltzLmRfYnVmICsgbHggKiAyICsgMV0pOwogICAgICBsYyA9IHMucGVuZGluZ19idWZbcy5sX2J1ZiArIGx4XTsKICAgICAgbHgrKzsKCiAgICAgIGlmIChkaXN0ID09PSAwKSB7CiAgICAgICAgc2VuZF9jb2RlKHMsIGxjLCBsdHJlZSk7IC8qIHNlbmQgYSBsaXRlcmFsIGJ5dGUgKi8KICAgICAgICAvL1RyYWNlY3YoaXNncmFwaChsYyksIChzdGRlcnIsIiAnJWMnICIsIGxjKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLyogSGVyZSwgbGMgaXMgdGhlIG1hdGNoIGxlbmd0aCAtIE1JTl9NQVRDSCAqLwogICAgICAgIGNvZGUgPSBfbGVuZ3RoX2NvZGVbbGNdOwogICAgICAgIHNlbmRfY29kZShzLCBjb2RlICsgTElURVJBTFMgKyAxLCBsdHJlZSk7IC8qIHNlbmQgdGhlIGxlbmd0aCBjb2RlICovCiAgICAgICAgZXh0cmEgPSBleHRyYV9sYml0c1tjb2RlXTsKICAgICAgICBpZiAoZXh0cmEgIT09IDApIHsKICAgICAgICAgIGxjIC09IGJhc2VfbGVuZ3RoW2NvZGVdOwogICAgICAgICAgc2VuZF9iaXRzKHMsIGxjLCBleHRyYSk7ICAgICAgIC8qIHNlbmQgdGhlIGV4dHJhIGxlbmd0aCBiaXRzICovCiAgICAgICAgfQogICAgICAgIGRpc3QtLTsgLyogZGlzdCBpcyBub3cgdGhlIG1hdGNoIGRpc3RhbmNlIC0gMSAqLwogICAgICAgIGNvZGUgPSBkX2NvZGUoZGlzdCk7CiAgICAgICAgLy9Bc3NlcnQgKGNvZGUgPCBEX0NPREVTLCAiYmFkIGRfY29kZSIpOwoKICAgICAgICBzZW5kX2NvZGUocywgY29kZSwgZHRyZWUpOyAgICAgICAvKiBzZW5kIHRoZSBkaXN0YW5jZSBjb2RlICovCiAgICAgICAgZXh0cmEgPSBleHRyYV9kYml0c1tjb2RlXTsKICAgICAgICBpZiAoZXh0cmEgIT09IDApIHsKICAgICAgICAgIGRpc3QgLT0gYmFzZV9kaXN0W2NvZGVdOwogICAgICAgICAgc2VuZF9iaXRzKHMsIGRpc3QsIGV4dHJhKTsgICAvKiBzZW5kIHRoZSBleHRyYSBkaXN0YW5jZSBiaXRzICovCiAgICAgICAgfQogICAgICB9IC8qIGxpdGVyYWwgb3IgbWF0Y2ggcGFpciA/ICovCgogICAgICAvKiBDaGVjayB0aGF0IHRoZSBvdmVybGF5IGJldHdlZW4gcGVuZGluZ19idWYgYW5kIGRfYnVmK2xfYnVmIGlzIG9rOiAqLwogICAgICAvL0Fzc2VydCgodUludCkocy0+cGVuZGluZykgPCBzLT5saXRfYnVmc2l6ZSArIDIqbHgsCiAgICAgIC8vICAgICAgICJwZW5kaW5nQnVmIG92ZXJmbG93Iik7CgogICAgfSB3aGlsZSAobHggPCBzLmxhc3RfbGl0KTsKICB9CgogIHNlbmRfY29kZShzLCBFTkRfQkxPQ0ssIGx0cmVlKTsKfQoKCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBDb25zdHJ1Y3Qgb25lIEh1ZmZtYW4gdHJlZSBhbmQgYXNzaWducyB0aGUgY29kZSBiaXQgc3RyaW5ncyBhbmQgbGVuZ3Rocy4KICogVXBkYXRlIHRoZSB0b3RhbCBiaXQgbGVuZ3RoIGZvciB0aGUgY3VycmVudCBibG9jay4KICogSU4gYXNzZXJ0aW9uOiB0aGUgZmllbGQgZnJlcSBpcyBzZXQgZm9yIGFsbCB0cmVlIGVsZW1lbnRzLgogKiBPVVQgYXNzZXJ0aW9uczogdGhlIGZpZWxkcyBsZW4gYW5kIGNvZGUgYXJlIHNldCB0byB0aGUgb3B0aW1hbCBiaXQgbGVuZ3RoCiAqICAgICBhbmQgY29ycmVzcG9uZGluZyBjb2RlLiBUaGUgbGVuZ3RoIG9wdF9sZW4gaXMgdXBkYXRlZDsgc3RhdGljX2xlbiBpcwogKiAgICAgYWxzbyB1cGRhdGVkIGlmIHN0cmVlIGlzIG5vdCBudWxsLiBUaGUgZmllbGQgbWF4X2NvZGUgaXMgc2V0LgogKi8KZnVuY3Rpb24gYnVpbGRfdHJlZShzLCBkZXNjKQovLyAgICBkZWZsYXRlX3N0YXRlICpzOwovLyAgICB0cmVlX2Rlc2MgKmRlc2M7IC8qIHRoZSB0cmVlIGRlc2NyaXB0b3IgKi8KewogIHZhciB0cmVlICAgICA9IGRlc2MuZHluX3RyZWU7CiAgdmFyIHN0cmVlICAgID0gZGVzYy5zdGF0X2Rlc2Muc3RhdGljX3RyZWU7CiAgdmFyIGhhc19zdHJlZSA9IGRlc2Muc3RhdF9kZXNjLmhhc19zdHJlZTsKICB2YXIgZWxlbXMgICAgPSBkZXNjLnN0YXRfZGVzYy5lbGVtczsKICB2YXIgbiwgbTsgICAgICAgICAgLyogaXRlcmF0ZSBvdmVyIGhlYXAgZWxlbWVudHMgKi8KICB2YXIgbWF4X2NvZGUgPSAtMTsgLyogbGFyZ2VzdCBjb2RlIHdpdGggbm9uIHplcm8gZnJlcXVlbmN5ICovCiAgdmFyIG5vZGU7ICAgICAgICAgIC8qIG5ldyBub2RlIGJlaW5nIGNyZWF0ZWQgKi8KCiAgLyogQ29uc3RydWN0IHRoZSBpbml0aWFsIGhlYXAsIHdpdGggbGVhc3QgZnJlcXVlbnQgZWxlbWVudCBpbgogICAqIGhlYXBbU01BTExFU1RdLiBUaGUgc29ucyBvZiBoZWFwW25dIGFyZSBoZWFwWzIqbl0gYW5kIGhlYXBbMipuKzFdLgogICAqIGhlYXBbMF0gaXMgbm90IHVzZWQuCiAgICovCiAgcy5oZWFwX2xlbiA9IDA7CiAgcy5oZWFwX21heCA9IEhFQVBfU0laRTsKCiAgZm9yIChuID0gMDsgbiA8IGVsZW1zOyBuKyspIHsKICAgIGlmICh0cmVlW24gKiAyXS8qLkZyZXEqLyAhPT0gMCkgewogICAgICBzLmhlYXBbKytzLmhlYXBfbGVuXSA9IG1heF9jb2RlID0gbjsKICAgICAgcy5kZXB0aFtuXSA9IDA7CgogICAgfSBlbHNlIHsKICAgICAgdHJlZVtuICogMiArIDFdLyouTGVuKi8gPSAwOwogICAgfQogIH0KCiAgLyogVGhlIHBremlwIGZvcm1hdCByZXF1aXJlcyB0aGF0IGF0IGxlYXN0IG9uZSBkaXN0YW5jZSBjb2RlIGV4aXN0cywKICAgKiBhbmQgdGhhdCBhdCBsZWFzdCBvbmUgYml0IHNob3VsZCBiZSBzZW50IGV2ZW4gaWYgdGhlcmUgaXMgb25seSBvbmUKICAgKiBwb3NzaWJsZSBjb2RlLiBTbyB0byBhdm9pZCBzcGVjaWFsIGNoZWNrcyBsYXRlciBvbiB3ZSBmb3JjZSBhdCBsZWFzdAogICAqIHR3byBjb2RlcyBvZiBub24gemVybyBmcmVxdWVuY3kuCiAgICovCiAgd2hpbGUgKHMuaGVhcF9sZW4gPCAyKSB7CiAgICBub2RlID0gcy5oZWFwWysrcy5oZWFwX2xlbl0gPSAobWF4X2NvZGUgPCAyID8gKyttYXhfY29kZSA6IDApOwogICAgdHJlZVtub2RlICogMl0vKi5GcmVxKi8gPSAxOwogICAgcy5kZXB0aFtub2RlXSA9IDA7CiAgICBzLm9wdF9sZW4tLTsKCiAgICBpZiAoaGFzX3N0cmVlKSB7CiAgICAgIHMuc3RhdGljX2xlbiAtPSBzdHJlZVtub2RlICogMiArIDFdLyouTGVuKi87CiAgICB9CiAgICAvKiBub2RlIGlzIDAgb3IgMSBzbyBpdCBkb2VzIG5vdCBoYXZlIGV4dHJhIGJpdHMgKi8KICB9CiAgZGVzYy5tYXhfY29kZSA9IG1heF9jb2RlOwoKICAvKiBUaGUgZWxlbWVudHMgaGVhcFtoZWFwX2xlbi8yKzEgLi4gaGVhcF9sZW5dIGFyZSBsZWF2ZXMgb2YgdGhlIHRyZWUsCiAgICogZXN0YWJsaXNoIHN1Yi1oZWFwcyBvZiBpbmNyZWFzaW5nIGxlbmd0aHM6CiAgICovCiAgZm9yIChuID0gKHMuaGVhcF9sZW4gPj4gMS8qaW50IC8yKi8pOyBuID49IDE7IG4tLSkgeyBwcWRvd25oZWFwKHMsIHRyZWUsIG4pOyB9CgogIC8qIENvbnN0cnVjdCB0aGUgSHVmZm1hbiB0cmVlIGJ5IHJlcGVhdGVkbHkgY29tYmluaW5nIHRoZSBsZWFzdCB0d28KICAgKiBmcmVxdWVudCBub2Rlcy4KICAgKi8KICBub2RlID0gZWxlbXM7ICAgICAgICAgICAgICAvKiBuZXh0IGludGVybmFsIG5vZGUgb2YgdGhlIHRyZWUgKi8KICBkbyB7CiAgICAvL3BxcmVtb3ZlKHMsIHRyZWUsIG4pOyAgLyogbiA9IG5vZGUgb2YgbGVhc3QgZnJlcXVlbmN5ICovCiAgICAvKioqIHBxcmVtb3ZlICoqKi8KICAgIG4gPSBzLmhlYXBbMS8qU01BTExFU1QqL107CiAgICBzLmhlYXBbMS8qU01BTExFU1QqL10gPSBzLmhlYXBbcy5oZWFwX2xlbi0tXTsKICAgIHBxZG93bmhlYXAocywgdHJlZSwgMS8qU01BTExFU1QqLyk7CiAgICAvKioqLwoKICAgIG0gPSBzLmhlYXBbMS8qU01BTExFU1QqL107IC8qIG0gPSBub2RlIG9mIG5leHQgbGVhc3QgZnJlcXVlbmN5ICovCgogICAgcy5oZWFwWy0tcy5oZWFwX21heF0gPSBuOyAvKiBrZWVwIHRoZSBub2RlcyBzb3J0ZWQgYnkgZnJlcXVlbmN5ICovCiAgICBzLmhlYXBbLS1zLmhlYXBfbWF4XSA9IG07CgogICAgLyogQ3JlYXRlIGEgbmV3IG5vZGUgZmF0aGVyIG9mIG4gYW5kIG0gKi8KICAgIHRyZWVbbm9kZSAqIDJdLyouRnJlcSovID0gdHJlZVtuICogMl0vKi5GcmVxKi8gKyB0cmVlW20gKiAyXS8qLkZyZXEqLzsKICAgIHMuZGVwdGhbbm9kZV0gPSAocy5kZXB0aFtuXSA+PSBzLmRlcHRoW21dID8gcy5kZXB0aFtuXSA6IHMuZGVwdGhbbV0pICsgMTsKICAgIHRyZWVbbiAqIDIgKyAxXS8qLkRhZCovID0gdHJlZVttICogMiArIDFdLyouRGFkKi8gPSBub2RlOwoKICAgIC8qIGFuZCBpbnNlcnQgdGhlIG5ldyBub2RlIGluIHRoZSBoZWFwICovCiAgICBzLmhlYXBbMS8qU01BTExFU1QqL10gPSBub2RlKys7CiAgICBwcWRvd25oZWFwKHMsIHRyZWUsIDEvKlNNQUxMRVNUKi8pOwoKICB9IHdoaWxlIChzLmhlYXBfbGVuID49IDIpOwoKICBzLmhlYXBbLS1zLmhlYXBfbWF4XSA9IHMuaGVhcFsxLypTTUFMTEVTVCovXTsKCiAgLyogQXQgdGhpcyBwb2ludCwgdGhlIGZpZWxkcyBmcmVxIGFuZCBkYWQgYXJlIHNldC4gV2UgY2FuIG5vdwogICAqIGdlbmVyYXRlIHRoZSBiaXQgbGVuZ3Rocy4KICAgKi8KICBnZW5fYml0bGVuKHMsIGRlc2MpOwoKICAvKiBUaGUgZmllbGQgbGVuIGlzIG5vdyBzZXQsIHdlIGNhbiBnZW5lcmF0ZSB0aGUgYml0IGNvZGVzICovCiAgZ2VuX2NvZGVzKHRyZWUsIG1heF9jb2RlLCBzLmJsX2NvdW50KTsKfQoKCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBTY2FuIGEgbGl0ZXJhbCBvciBkaXN0YW5jZSB0cmVlIHRvIGRldGVybWluZSB0aGUgZnJlcXVlbmNpZXMgb2YgdGhlIGNvZGVzCiAqIGluIHRoZSBiaXQgbGVuZ3RoIHRyZWUuCiAqLwpmdW5jdGlvbiBzY2FuX3RyZWUocywgdHJlZSwgbWF4X2NvZGUpCi8vICAgIGRlZmxhdGVfc3RhdGUgKnM7Ci8vICAgIGN0X2RhdGEgKnRyZWU7ICAgLyogdGhlIHRyZWUgdG8gYmUgc2Nhbm5lZCAqLwovLyAgICBpbnQgbWF4X2NvZGU7ICAgIC8qIGFuZCBpdHMgbGFyZ2VzdCBjb2RlIG9mIG5vbiB6ZXJvIGZyZXF1ZW5jeSAqLwp7CiAgdmFyIG47ICAgICAgICAgICAgICAgICAgICAgLyogaXRlcmF0ZXMgb3ZlciBhbGwgdHJlZSBlbGVtZW50cyAqLwogIHZhciBwcmV2bGVuID0gLTE7ICAgICAgICAgIC8qIGxhc3QgZW1pdHRlZCBsZW5ndGggKi8KICB2YXIgY3VybGVuOyAgICAgICAgICAgICAgICAvKiBsZW5ndGggb2YgY3VycmVudCBjb2RlICovCgogIHZhciBuZXh0bGVuID0gdHJlZVswICogMiArIDFdLyouTGVuKi87IC8qIGxlbmd0aCBvZiBuZXh0IGNvZGUgKi8KCiAgdmFyIGNvdW50ID0gMDsgICAgICAgICAgICAgLyogcmVwZWF0IGNvdW50IG9mIHRoZSBjdXJyZW50IGNvZGUgKi8KICB2YXIgbWF4X2NvdW50ID0gNzsgICAgICAgICAvKiBtYXggcmVwZWF0IGNvdW50ICovCiAgdmFyIG1pbl9jb3VudCA9IDQ7ICAgICAgICAgLyogbWluIHJlcGVhdCBjb3VudCAqLwoKICBpZiAobmV4dGxlbiA9PT0gMCkgewogICAgbWF4X2NvdW50ID0gMTM4OwogICAgbWluX2NvdW50ID0gMzsKICB9CiAgdHJlZVsobWF4X2NvZGUgKyAxKSAqIDIgKyAxXS8qLkxlbiovID0gMHhmZmZmOyAvKiBndWFyZCAqLwoKICBmb3IgKG4gPSAwOyBuIDw9IG1heF9jb2RlOyBuKyspIHsKICAgIGN1cmxlbiA9IG5leHRsZW47CiAgICBuZXh0bGVuID0gdHJlZVsobiArIDEpICogMiArIDFdLyouTGVuKi87CgogICAgaWYgKCsrY291bnQgPCBtYXhfY291bnQgJiYgY3VybGVuID09PSBuZXh0bGVuKSB7CiAgICAgIGNvbnRpbnVlOwoKICAgIH0gZWxzZSBpZiAoY291bnQgPCBtaW5fY291bnQpIHsKICAgICAgcy5ibF90cmVlW2N1cmxlbiAqIDJdLyouRnJlcSovICs9IGNvdW50OwoKICAgIH0gZWxzZSBpZiAoY3VybGVuICE9PSAwKSB7CgogICAgICBpZiAoY3VybGVuICE9PSBwcmV2bGVuKSB7IHMuYmxfdHJlZVtjdXJsZW4gKiAyXS8qLkZyZXEqLysrOyB9CiAgICAgIHMuYmxfdHJlZVtSRVBfM182ICogMl0vKi5GcmVxKi8rKzsKCiAgICB9IGVsc2UgaWYgKGNvdW50IDw9IDEwKSB7CiAgICAgIHMuYmxfdHJlZVtSRVBaXzNfMTAgKiAyXS8qLkZyZXEqLysrOwoKICAgIH0gZWxzZSB7CiAgICAgIHMuYmxfdHJlZVtSRVBaXzExXzEzOCAqIDJdLyouRnJlcSovKys7CiAgICB9CgogICAgY291bnQgPSAwOwogICAgcHJldmxlbiA9IGN1cmxlbjsKCiAgICBpZiAobmV4dGxlbiA9PT0gMCkgewogICAgICBtYXhfY291bnQgPSAxMzg7CiAgICAgIG1pbl9jb3VudCA9IDM7CgogICAgfSBlbHNlIGlmIChjdXJsZW4gPT09IG5leHRsZW4pIHsKICAgICAgbWF4X2NvdW50ID0gNjsKICAgICAgbWluX2NvdW50ID0gMzsKCiAgICB9IGVsc2UgewogICAgICBtYXhfY291bnQgPSA3OwogICAgICBtaW5fY291bnQgPSA0OwogICAgfQogIH0KfQoKCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBTZW5kIGEgbGl0ZXJhbCBvciBkaXN0YW5jZSB0cmVlIGluIGNvbXByZXNzZWQgZm9ybSwgdXNpbmcgdGhlIGNvZGVzIGluCiAqIGJsX3RyZWUuCiAqLwpmdW5jdGlvbiBzZW5kX3RyZWUocywgdHJlZSwgbWF4X2NvZGUpCi8vICAgIGRlZmxhdGVfc3RhdGUgKnM7Ci8vICAgIGN0X2RhdGEgKnRyZWU7IC8qIHRoZSB0cmVlIHRvIGJlIHNjYW5uZWQgKi8KLy8gICAgaW50IG1heF9jb2RlOyAgICAgICAvKiBhbmQgaXRzIGxhcmdlc3QgY29kZSBvZiBub24gemVybyBmcmVxdWVuY3kgKi8KewogIHZhciBuOyAgICAgICAgICAgICAgICAgICAgIC8qIGl0ZXJhdGVzIG92ZXIgYWxsIHRyZWUgZWxlbWVudHMgKi8KICB2YXIgcHJldmxlbiA9IC0xOyAgICAgICAgICAvKiBsYXN0IGVtaXR0ZWQgbGVuZ3RoICovCiAgdmFyIGN1cmxlbjsgICAgICAgICAgICAgICAgLyogbGVuZ3RoIG9mIGN1cnJlbnQgY29kZSAqLwoKICB2YXIgbmV4dGxlbiA9IHRyZWVbMCAqIDIgKyAxXS8qLkxlbiovOyAvKiBsZW5ndGggb2YgbmV4dCBjb2RlICovCgogIHZhciBjb3VudCA9IDA7ICAgICAgICAgICAgIC8qIHJlcGVhdCBjb3VudCBvZiB0aGUgY3VycmVudCBjb2RlICovCiAgdmFyIG1heF9jb3VudCA9IDc7ICAgICAgICAgLyogbWF4IHJlcGVhdCBjb3VudCAqLwogIHZhciBtaW5fY291bnQgPSA0OyAgICAgICAgIC8qIG1pbiByZXBlYXQgY291bnQgKi8KCiAgLyogdHJlZVttYXhfY29kZSsxXS5MZW4gPSAtMTsgKi8gIC8qIGd1YXJkIGFscmVhZHkgc2V0ICovCiAgaWYgKG5leHRsZW4gPT09IDApIHsKICAgIG1heF9jb3VudCA9IDEzODsKICAgIG1pbl9jb3VudCA9IDM7CiAgfQoKICBmb3IgKG4gPSAwOyBuIDw9IG1heF9jb2RlOyBuKyspIHsKICAgIGN1cmxlbiA9IG5leHRsZW47CiAgICBuZXh0bGVuID0gdHJlZVsobiArIDEpICogMiArIDFdLyouTGVuKi87CgogICAgaWYgKCsrY291bnQgPCBtYXhfY291bnQgJiYgY3VybGVuID09PSBuZXh0bGVuKSB7CiAgICAgIGNvbnRpbnVlOwoKICAgIH0gZWxzZSBpZiAoY291bnQgPCBtaW5fY291bnQpIHsKICAgICAgZG8geyBzZW5kX2NvZGUocywgY3VybGVuLCBzLmJsX3RyZWUpOyB9IHdoaWxlICgtLWNvdW50ICE9PSAwKTsKCiAgICB9IGVsc2UgaWYgKGN1cmxlbiAhPT0gMCkgewogICAgICBpZiAoY3VybGVuICE9PSBwcmV2bGVuKSB7CiAgICAgICAgc2VuZF9jb2RlKHMsIGN1cmxlbiwgcy5ibF90cmVlKTsKICAgICAgICBjb3VudC0tOwogICAgICB9CiAgICAgIC8vQXNzZXJ0KGNvdW50ID49IDMgJiYgY291bnQgPD0gNiwgIiAzXzY/Iik7CiAgICAgIHNlbmRfY29kZShzLCBSRVBfM182LCBzLmJsX3RyZWUpOwogICAgICBzZW5kX2JpdHMocywgY291bnQgLSAzLCAyKTsKCiAgICB9IGVsc2UgaWYgKGNvdW50IDw9IDEwKSB7CiAgICAgIHNlbmRfY29kZShzLCBSRVBaXzNfMTAsIHMuYmxfdHJlZSk7CiAgICAgIHNlbmRfYml0cyhzLCBjb3VudCAtIDMsIDMpOwoKICAgIH0gZWxzZSB7CiAgICAgIHNlbmRfY29kZShzLCBSRVBaXzExXzEzOCwgcy5ibF90cmVlKTsKICAgICAgc2VuZF9iaXRzKHMsIGNvdW50IC0gMTEsIDcpOwogICAgfQoKICAgIGNvdW50ID0gMDsKICAgIHByZXZsZW4gPSBjdXJsZW47CiAgICBpZiAobmV4dGxlbiA9PT0gMCkgewogICAgICBtYXhfY291bnQgPSAxMzg7CiAgICAgIG1pbl9jb3VudCA9IDM7CgogICAgfSBlbHNlIGlmIChjdXJsZW4gPT09IG5leHRsZW4pIHsKICAgICAgbWF4X2NvdW50ID0gNjsKICAgICAgbWluX2NvdW50ID0gMzsKCiAgICB9IGVsc2UgewogICAgICBtYXhfY291bnQgPSA3OwogICAgICBtaW5fY291bnQgPSA0OwogICAgfQogIH0KfQoKCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBDb25zdHJ1Y3QgdGhlIEh1ZmZtYW4gdHJlZSBmb3IgdGhlIGJpdCBsZW5ndGhzIGFuZCByZXR1cm4gdGhlIGluZGV4IGluCiAqIGJsX29yZGVyIG9mIHRoZSBsYXN0IGJpdCBsZW5ndGggY29kZSB0byBzZW5kLgogKi8KZnVuY3Rpb24gYnVpbGRfYmxfdHJlZShzKSB7CiAgdmFyIG1heF9ibGluZGV4OyAgLyogaW5kZXggb2YgbGFzdCBiaXQgbGVuZ3RoIGNvZGUgb2Ygbm9uIHplcm8gZnJlcSAqLwoKICAvKiBEZXRlcm1pbmUgdGhlIGJpdCBsZW5ndGggZnJlcXVlbmNpZXMgZm9yIGxpdGVyYWwgYW5kIGRpc3RhbmNlIHRyZWVzICovCiAgc2Nhbl90cmVlKHMsIHMuZHluX2x0cmVlLCBzLmxfZGVzYy5tYXhfY29kZSk7CiAgc2Nhbl90cmVlKHMsIHMuZHluX2R0cmVlLCBzLmRfZGVzYy5tYXhfY29kZSk7CgogIC8qIEJ1aWxkIHRoZSBiaXQgbGVuZ3RoIHRyZWU6ICovCiAgYnVpbGRfdHJlZShzLCBzLmJsX2Rlc2MpOwogIC8qIG9wdF9sZW4gbm93IGluY2x1ZGVzIHRoZSBsZW5ndGggb2YgdGhlIHRyZWUgcmVwcmVzZW50YXRpb25zLCBleGNlcHQKICAgKiB0aGUgbGVuZ3RocyBvZiB0aGUgYml0IGxlbmd0aHMgY29kZXMgYW5kIHRoZSA1KzUrNCBiaXRzIGZvciB0aGUgY291bnRzLgogICAqLwoKICAvKiBEZXRlcm1pbmUgdGhlIG51bWJlciBvZiBiaXQgbGVuZ3RoIGNvZGVzIHRvIHNlbmQuIFRoZSBwa3ppcCBmb3JtYXQKICAgKiByZXF1aXJlcyB0aGF0IGF0IGxlYXN0IDQgYml0IGxlbmd0aCBjb2RlcyBiZSBzZW50LiAoYXBwbm90ZS50eHQgc2F5cwogICAqIDMgYnV0IHRoZSBhY3R1YWwgdmFsdWUgdXNlZCBpcyA0LikKICAgKi8KICBmb3IgKG1heF9ibGluZGV4ID0gQkxfQ09ERVMgLSAxOyBtYXhfYmxpbmRleCA+PSAzOyBtYXhfYmxpbmRleC0tKSB7CiAgICBpZiAocy5ibF90cmVlW2JsX29yZGVyW21heF9ibGluZGV4XSAqIDIgKyAxXS8qLkxlbiovICE9PSAwKSB7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICAvKiBVcGRhdGUgb3B0X2xlbiB0byBpbmNsdWRlIHRoZSBiaXQgbGVuZ3RoIHRyZWUgYW5kIGNvdW50cyAqLwogIHMub3B0X2xlbiArPSAzICogKG1heF9ibGluZGV4ICsgMSkgKyA1ICsgNSArIDQ7CiAgLy9UcmFjZXYoKHN0ZGVyciwgIlxuZHluIHRyZWVzOiBkeW4gJWxkLCBzdGF0ICVsZCIsCiAgLy8gICAgICAgIHMtPm9wdF9sZW4sIHMtPnN0YXRpY19sZW4pKTsKCiAgcmV0dXJuIG1heF9ibGluZGV4Owp9CgoKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIFNlbmQgdGhlIGhlYWRlciBmb3IgYSBibG9jayB1c2luZyBkeW5hbWljIEh1ZmZtYW4gdHJlZXM6IHRoZSBjb3VudHMsIHRoZQogKiBsZW5ndGhzIG9mIHRoZSBiaXQgbGVuZ3RoIGNvZGVzLCB0aGUgbGl0ZXJhbCB0cmVlIGFuZCB0aGUgZGlzdGFuY2UgdHJlZS4KICogSU4gYXNzZXJ0aW9uOiBsY29kZXMgPj0gMjU3LCBkY29kZXMgPj0gMSwgYmxjb2RlcyA+PSA0LgogKi8KZnVuY3Rpb24gc2VuZF9hbGxfdHJlZXMocywgbGNvZGVzLCBkY29kZXMsIGJsY29kZXMpCi8vICAgIGRlZmxhdGVfc3RhdGUgKnM7Ci8vICAgIGludCBsY29kZXMsIGRjb2RlcywgYmxjb2RlczsgLyogbnVtYmVyIG9mIGNvZGVzIGZvciBlYWNoIHRyZWUgKi8KewogIHZhciByYW5rOyAgICAgICAgICAgICAgICAgICAgLyogaW5kZXggaW4gYmxfb3JkZXIgKi8KCiAgLy9Bc3NlcnQgKGxjb2RlcyA+PSAyNTcgJiYgZGNvZGVzID49IDEgJiYgYmxjb2RlcyA+PSA0LCAibm90IGVub3VnaCBjb2RlcyIpOwogIC8vQXNzZXJ0IChsY29kZXMgPD0gTF9DT0RFUyAmJiBkY29kZXMgPD0gRF9DT0RFUyAmJiBibGNvZGVzIDw9IEJMX0NPREVTLAogIC8vICAgICAgICAidG9vIG1hbnkgY29kZXMiKTsKICAvL1RyYWNldigoc3RkZXJyLCAiXG5ibCBjb3VudHM6ICIpKTsKICBzZW5kX2JpdHMocywgbGNvZGVzIC0gMjU3LCA1KTsgLyogbm90ICsyNTUgYXMgc3RhdGVkIGluIGFwcG5vdGUudHh0ICovCiAgc2VuZF9iaXRzKHMsIGRjb2RlcyAtIDEsICAgNSk7CiAgc2VuZF9iaXRzKHMsIGJsY29kZXMgLSA0LCAgNCk7IC8qIG5vdCAtMyBhcyBzdGF0ZWQgaW4gYXBwbm90ZS50eHQgKi8KICBmb3IgKHJhbmsgPSAwOyByYW5rIDwgYmxjb2RlczsgcmFuaysrKSB7CiAgICAvL1RyYWNldigoc3RkZXJyLCAiXG5ibCBjb2RlICUyZCAiLCBibF9vcmRlcltyYW5rXSkpOwogICAgc2VuZF9iaXRzKHMsIHMuYmxfdHJlZVtibF9vcmRlcltyYW5rXSAqIDIgKyAxXS8qLkxlbiovLCAzKTsKICB9CiAgLy9UcmFjZXYoKHN0ZGVyciwgIlxuYmwgdHJlZTogc2VudCAlbGQiLCBzLT5iaXRzX3NlbnQpKTsKCiAgc2VuZF90cmVlKHMsIHMuZHluX2x0cmVlLCBsY29kZXMgLSAxKTsgLyogbGl0ZXJhbCB0cmVlICovCiAgLy9UcmFjZXYoKHN0ZGVyciwgIlxubGl0IHRyZWU6IHNlbnQgJWxkIiwgcy0+Yml0c19zZW50KSk7CgogIHNlbmRfdHJlZShzLCBzLmR5bl9kdHJlZSwgZGNvZGVzIC0gMSk7IC8qIGRpc3RhbmNlIHRyZWUgKi8KICAvL1RyYWNldigoc3RkZXJyLCAiXG5kaXN0IHRyZWU6IHNlbnQgJWxkIiwgcy0+Yml0c19zZW50KSk7Cn0KCgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogQ2hlY2sgaWYgdGhlIGRhdGEgdHlwZSBpcyBURVhUIG9yIEJJTkFSWSwgdXNpbmcgdGhlIGZvbGxvd2luZyBhbGdvcml0aG06CiAqIC0gVEVYVCBpZiB0aGUgdHdvIGNvbmRpdGlvbnMgYmVsb3cgYXJlIHNhdGlzZmllZDoKICogICAgYSkgVGhlcmUgYXJlIG5vIG5vbi1wb3J0YWJsZSBjb250cm9sIGNoYXJhY3RlcnMgYmVsb25naW5nIHRvIHRoZQogKiAgICAgICAiYmxhY2sgbGlzdCIgKDAuLjYsIDE0Li4yNSwgMjguLjMxKS4KICogICAgYikgVGhlcmUgaXMgYXQgbGVhc3Qgb25lIHByaW50YWJsZSBjaGFyYWN0ZXIgYmVsb25naW5nIHRvIHRoZQogKiAgICAgICAid2hpdGUgbGlzdCIgKDkge1RBQn0sIDEwIHtMRn0sIDEzIHtDUn0sIDMyLi4yNTUpLgogKiAtIEJJTkFSWSBvdGhlcndpc2UuCiAqIC0gVGhlIGZvbGxvd2luZyBwYXJ0aWFsbHktcG9ydGFibGUgY29udHJvbCBjaGFyYWN0ZXJzIGZvcm0gYQogKiAgICJncmF5IGxpc3QiIHRoYXQgaXMgaWdub3JlZCBpbiB0aGlzIGRldGVjdGlvbiBhbGdvcml0aG06CiAqICAgKDcge0JFTH0sIDgge0JTfSwgMTEge1ZUfSwgMTIge0ZGfSwgMjYge1NVQn0sIDI3IHtFU0N9KS4KICogSU4gYXNzZXJ0aW9uOiB0aGUgZmllbGRzIEZyZXEgb2YgZHluX2x0cmVlIGFyZSBzZXQuCiAqLwpmdW5jdGlvbiBkZXRlY3RfZGF0YV90eXBlKHMpIHsKICAvKiBibGFja19tYXNrIGlzIHRoZSBiaXQgbWFzayBvZiBibGFjay1saXN0ZWQgYnl0ZXMKICAgKiBzZXQgYml0cyAwLi42LCAxNC4uMjUsIGFuZCAyOC4uMzEKICAgKiAweGYzZmZjMDdmID0gYmluYXJ5IDExMTEwMDExMTExMTExMTExMTAwMDAwMDAxMTExMTExCiAgICovCiAgdmFyIGJsYWNrX21hc2sgPSAweGYzZmZjMDdmOwogIHZhciBuOwoKICAvKiBDaGVjayBmb3Igbm9uLXRleHR1YWwgKCJibGFjay1saXN0ZWQiKSBieXRlcy4gKi8KICBmb3IgKG4gPSAwOyBuIDw9IDMxOyBuKyssIGJsYWNrX21hc2sgPj4+PSAxKSB7CiAgICBpZiAoKGJsYWNrX21hc2sgJiAxKSAmJiAocy5keW5fbHRyZWVbbiAqIDJdLyouRnJlcSovICE9PSAwKSkgewogICAgICByZXR1cm4gWl9CSU5BUlk7CiAgICB9CiAgfQoKICAvKiBDaGVjayBmb3IgdGV4dHVhbCAoIndoaXRlLWxpc3RlZCIpIGJ5dGVzLiAqLwogIGlmIChzLmR5bl9sdHJlZVs5ICogMl0vKi5GcmVxKi8gIT09IDAgfHwgcy5keW5fbHRyZWVbMTAgKiAyXS8qLkZyZXEqLyAhPT0gMCB8fAogICAgICBzLmR5bl9sdHJlZVsxMyAqIDJdLyouRnJlcSovICE9PSAwKSB7CiAgICByZXR1cm4gWl9URVhUOwogIH0KICBmb3IgKG4gPSAzMjsgbiA8IExJVEVSQUxTOyBuKyspIHsKICAgIGlmIChzLmR5bl9sdHJlZVtuICogMl0vKi5GcmVxKi8gIT09IDApIHsKICAgICAgcmV0dXJuIFpfVEVYVDsKICAgIH0KICB9CgogIC8qIFRoZXJlIGFyZSBubyAiYmxhY2stbGlzdGVkIiBvciAid2hpdGUtbGlzdGVkIiBieXRlczoKICAgKiB0aGlzIHN0cmVhbSBlaXRoZXIgaXMgZW1wdHkgb3IgaGFzIHRvbGVyYXRlZCAoImdyYXktbGlzdGVkIikgYnl0ZXMgb25seS4KICAgKi8KICByZXR1cm4gWl9CSU5BUlk7Cn0KCgp2YXIgc3RhdGljX2luaXRfZG9uZSA9IGZhbHNlOwoKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIEluaXRpYWxpemUgdGhlIHRyZWUgZGF0YSBzdHJ1Y3R1cmVzIGZvciBhIG5ldyB6bGliIHN0cmVhbS4KICovCmZ1bmN0aW9uIF90cl9pbml0KHMpCnsKCiAgaWYgKCFzdGF0aWNfaW5pdF9kb25lKSB7CiAgICB0cl9zdGF0aWNfaW5pdCgpOwogICAgc3RhdGljX2luaXRfZG9uZSA9IHRydWU7CiAgfQoKICBzLmxfZGVzYyAgPSBuZXcgVHJlZURlc2Mocy5keW5fbHRyZWUsIHN0YXRpY19sX2Rlc2MpOwogIHMuZF9kZXNjICA9IG5ldyBUcmVlRGVzYyhzLmR5bl9kdHJlZSwgc3RhdGljX2RfZGVzYyk7CiAgcy5ibF9kZXNjID0gbmV3IFRyZWVEZXNjKHMuYmxfdHJlZSwgc3RhdGljX2JsX2Rlc2MpOwoKICBzLmJpX2J1ZiA9IDA7CiAgcy5iaV92YWxpZCA9IDA7CgogIC8qIEluaXRpYWxpemUgdGhlIGZpcnN0IGJsb2NrIG9mIHRoZSBmaXJzdCBmaWxlOiAqLwogIGluaXRfYmxvY2socyk7Cn0KCgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogU2VuZCBhIHN0b3JlZCBibG9jawogKi8KZnVuY3Rpb24gX3RyX3N0b3JlZF9ibG9jayhzLCBidWYsIHN0b3JlZF9sZW4sIGxhc3QpCi8vRGVmbGF0ZVN0YXRlICpzOwovL2NoYXJmICpidWY7ICAgICAgIC8qIGlucHV0IGJsb2NrICovCi8vdWxnIHN0b3JlZF9sZW47ICAgLyogbGVuZ3RoIG9mIGlucHV0IGJsb2NrICovCi8vaW50IGxhc3Q7ICAgICAgICAgLyogb25lIGlmIHRoaXMgaXMgdGhlIGxhc3QgYmxvY2sgZm9yIGEgZmlsZSAqLwp7CiAgc2VuZF9iaXRzKHMsIChTVE9SRURfQkxPQ0sgPDwgMSkgKyAobGFzdCA/IDEgOiAwKSwgMyk7ICAgIC8qIHNlbmQgYmxvY2sgdHlwZSAqLwogIGNvcHlfYmxvY2socywgYnVmLCBzdG9yZWRfbGVuLCB0cnVlKTsgLyogd2l0aCBoZWFkZXIgKi8KfQoKCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBTZW5kIG9uZSBlbXB0eSBzdGF0aWMgYmxvY2sgdG8gZ2l2ZSBlbm91Z2ggbG9va2FoZWFkIGZvciBpbmZsYXRlLgogKiBUaGlzIHRha2VzIDEwIGJpdHMsIG9mIHdoaWNoIDcgbWF5IHJlbWFpbiBpbiB0aGUgYml0IGJ1ZmZlci4KICovCmZ1bmN0aW9uIF90cl9hbGlnbihzKSB7CiAgc2VuZF9iaXRzKHMsIFNUQVRJQ19UUkVFUyA8PCAxLCAzKTsKICBzZW5kX2NvZGUocywgRU5EX0JMT0NLLCBzdGF0aWNfbHRyZWUpOwogIGJpX2ZsdXNoKHMpOwp9CgoKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIERldGVybWluZSB0aGUgYmVzdCBlbmNvZGluZyBmb3IgdGhlIGN1cnJlbnQgYmxvY2s6IGR5bmFtaWMgdHJlZXMsIHN0YXRpYwogKiB0cmVlcyBvciBzdG9yZSwgYW5kIG91dHB1dCB0aGUgZW5jb2RlZCBibG9jayB0byB0aGUgemlwIGZpbGUuCiAqLwpmdW5jdGlvbiBfdHJfZmx1c2hfYmxvY2socywgYnVmLCBzdG9yZWRfbGVuLCBsYXN0KQovL0RlZmxhdGVTdGF0ZSAqczsKLy9jaGFyZiAqYnVmOyAgICAgICAvKiBpbnB1dCBibG9jaywgb3IgTlVMTCBpZiB0b28gb2xkICovCi8vdWxnIHN0b3JlZF9sZW47ICAgLyogbGVuZ3RoIG9mIGlucHV0IGJsb2NrICovCi8vaW50IGxhc3Q7ICAgICAgICAgLyogb25lIGlmIHRoaXMgaXMgdGhlIGxhc3QgYmxvY2sgZm9yIGEgZmlsZSAqLwp7CiAgdmFyIG9wdF9sZW5iLCBzdGF0aWNfbGVuYjsgIC8qIG9wdF9sZW4gYW5kIHN0YXRpY19sZW4gaW4gYnl0ZXMgKi8KICB2YXIgbWF4X2JsaW5kZXggPSAwOyAgICAgICAgLyogaW5kZXggb2YgbGFzdCBiaXQgbGVuZ3RoIGNvZGUgb2Ygbm9uIHplcm8gZnJlcSAqLwoKICAvKiBCdWlsZCB0aGUgSHVmZm1hbiB0cmVlcyB1bmxlc3MgYSBzdG9yZWQgYmxvY2sgaXMgZm9yY2VkICovCiAgaWYgKHMubGV2ZWwgPiAwKSB7CgogICAgLyogQ2hlY2sgaWYgdGhlIGZpbGUgaXMgYmluYXJ5IG9yIHRleHQgKi8KICAgIGlmIChzLnN0cm0uZGF0YV90eXBlID09PSBaX1VOS05PV04pIHsKICAgICAgcy5zdHJtLmRhdGFfdHlwZSA9IGRldGVjdF9kYXRhX3R5cGUocyk7CiAgICB9CgogICAgLyogQ29uc3RydWN0IHRoZSBsaXRlcmFsIGFuZCBkaXN0YW5jZSB0cmVlcyAqLwogICAgYnVpbGRfdHJlZShzLCBzLmxfZGVzYyk7CiAgICAvLyBUcmFjZXYoKHN0ZGVyciwgIlxubGl0IGRhdGE6IGR5biAlbGQsIHN0YXQgJWxkIiwgcy0+b3B0X2xlbiwKICAgIC8vICAgICAgICBzLT5zdGF0aWNfbGVuKSk7CgogICAgYnVpbGRfdHJlZShzLCBzLmRfZGVzYyk7CiAgICAvLyBUcmFjZXYoKHN0ZGVyciwgIlxuZGlzdCBkYXRhOiBkeW4gJWxkLCBzdGF0ICVsZCIsIHMtPm9wdF9sZW4sCiAgICAvLyAgICAgICAgcy0+c3RhdGljX2xlbikpOwogICAgLyogQXQgdGhpcyBwb2ludCwgb3B0X2xlbiBhbmQgc3RhdGljX2xlbiBhcmUgdGhlIHRvdGFsIGJpdCBsZW5ndGhzIG9mCiAgICAgKiB0aGUgY29tcHJlc3NlZCBibG9jayBkYXRhLCBleGNsdWRpbmcgdGhlIHRyZWUgcmVwcmVzZW50YXRpb25zLgogICAgICovCgogICAgLyogQnVpbGQgdGhlIGJpdCBsZW5ndGggdHJlZSBmb3IgdGhlIGFib3ZlIHR3byB0cmVlcywgYW5kIGdldCB0aGUgaW5kZXgKICAgICAqIGluIGJsX29yZGVyIG9mIHRoZSBsYXN0IGJpdCBsZW5ndGggY29kZSB0byBzZW5kLgogICAgICovCiAgICBtYXhfYmxpbmRleCA9IGJ1aWxkX2JsX3RyZWUocyk7CgogICAgLyogRGV0ZXJtaW5lIHRoZSBiZXN0IGVuY29kaW5nLiBDb21wdXRlIHRoZSBibG9jayBsZW5ndGhzIGluIGJ5dGVzLiAqLwogICAgb3B0X2xlbmIgPSAocy5vcHRfbGVuICsgMyArIDcpID4+PiAzOwogICAgc3RhdGljX2xlbmIgPSAocy5zdGF0aWNfbGVuICsgMyArIDcpID4+PiAzOwoKICAgIC8vIFRyYWNldigoc3RkZXJyLCAiXG5vcHQgJWx1KCVsdSkgc3RhdCAlbHUoJWx1KSBzdG9yZWQgJWx1IGxpdCAldSAiLAogICAgLy8gICAgICAgIG9wdF9sZW5iLCBzLT5vcHRfbGVuLCBzdGF0aWNfbGVuYiwgcy0+c3RhdGljX2xlbiwgc3RvcmVkX2xlbiwKICAgIC8vICAgICAgICBzLT5sYXN0X2xpdCkpOwoKICAgIGlmIChzdGF0aWNfbGVuYiA8PSBvcHRfbGVuYikgeyBvcHRfbGVuYiA9IHN0YXRpY19sZW5iOyB9CgogIH0gZWxzZSB7CiAgICAvLyBBc3NlcnQoYnVmICE9IChjaGFyKikwLCAibG9zdCBidWYiKTsKICAgIG9wdF9sZW5iID0gc3RhdGljX2xlbmIgPSBzdG9yZWRfbGVuICsgNTsgLyogZm9yY2UgYSBzdG9yZWQgYmxvY2sgKi8KICB9CgogIGlmICgoc3RvcmVkX2xlbiArIDQgPD0gb3B0X2xlbmIpICYmIChidWYgIT09IC0xKSkgewogICAgLyogNDogdHdvIHdvcmRzIGZvciB0aGUgbGVuZ3RocyAqLwoKICAgIC8qIFRoZSB0ZXN0IGJ1ZiAhPSBOVUxMIGlzIG9ubHkgbmVjZXNzYXJ5IGlmIExJVF9CVUZTSVpFID4gV1NJWkUuCiAgICAgKiBPdGhlcndpc2Ugd2UgY2FuJ3QgaGF2ZSBwcm9jZXNzZWQgbW9yZSB0aGFuIFdTSVpFIGlucHV0IGJ5dGVzIHNpbmNlCiAgICAgKiB0aGUgbGFzdCBibG9jayBmbHVzaCwgYmVjYXVzZSBjb21wcmVzc2lvbiB3b3VsZCBoYXZlIGJlZW4KICAgICAqIHN1Y2Nlc3NmdWwuIElmIExJVF9CVUZTSVpFIDw9IFdTSVpFLCBpdCBpcyBuZXZlciB0b28gbGF0ZSB0bwogICAgICogdHJhbnNmb3JtIGEgYmxvY2sgaW50byBhIHN0b3JlZCBibG9jay4KICAgICAqLwogICAgX3RyX3N0b3JlZF9ibG9jayhzLCBidWYsIHN0b3JlZF9sZW4sIGxhc3QpOwoKICB9IGVsc2UgaWYgKHMuc3RyYXRlZ3kgPT09IFpfRklYRUQgfHwgc3RhdGljX2xlbmIgPT09IG9wdF9sZW5iKSB7CgogICAgc2VuZF9iaXRzKHMsIChTVEFUSUNfVFJFRVMgPDwgMSkgKyAobGFzdCA/IDEgOiAwKSwgMyk7CiAgICBjb21wcmVzc19ibG9jayhzLCBzdGF0aWNfbHRyZWUsIHN0YXRpY19kdHJlZSk7CgogIH0gZWxzZSB7CiAgICBzZW5kX2JpdHMocywgKERZTl9UUkVFUyA8PCAxKSArIChsYXN0ID8gMSA6IDApLCAzKTsKICAgIHNlbmRfYWxsX3RyZWVzKHMsIHMubF9kZXNjLm1heF9jb2RlICsgMSwgcy5kX2Rlc2MubWF4X2NvZGUgKyAxLCBtYXhfYmxpbmRleCArIDEpOwogICAgY29tcHJlc3NfYmxvY2socywgcy5keW5fbHRyZWUsIHMuZHluX2R0cmVlKTsKICB9CiAgLy8gQXNzZXJ0IChzLT5jb21wcmVzc2VkX2xlbiA9PSBzLT5iaXRzX3NlbnQsICJiYWQgY29tcHJlc3NlZCBzaXplIik7CiAgLyogVGhlIGFib3ZlIGNoZWNrIGlzIG1hZGUgbW9kIDJeMzIsIGZvciBmaWxlcyBsYXJnZXIgdGhhbiA1MTIgTUIKICAgKiBhbmQgdUxvbmcgaW1wbGVtZW50ZWQgb24gMzIgYml0cy4KICAgKi8KICBpbml0X2Jsb2NrKHMpOwoKICBpZiAobGFzdCkgewogICAgYmlfd2luZHVwKHMpOwogIH0KICAvLyBUcmFjZXYoKHN0ZGVyciwiXG5jb21wcmxlbiAlbHUoJWx1KSAiLCBzLT5jb21wcmVzc2VkX2xlbj4+MywKICAvLyAgICAgICBzLT5jb21wcmVzc2VkX2xlbi03Kmxhc3QpKTsKfQoKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIFNhdmUgdGhlIG1hdGNoIGluZm8gYW5kIHRhbGx5IHRoZSBmcmVxdWVuY3kgY291bnRzLiBSZXR1cm4gdHJ1ZSBpZgogKiB0aGUgY3VycmVudCBibG9jayBtdXN0IGJlIGZsdXNoZWQuCiAqLwpmdW5jdGlvbiBfdHJfdGFsbHkocywgZGlzdCwgbGMpCi8vICAgIGRlZmxhdGVfc3RhdGUgKnM7Ci8vICAgIHVuc2lnbmVkIGRpc3Q7ICAvKiBkaXN0YW5jZSBvZiBtYXRjaGVkIHN0cmluZyAqLwovLyAgICB1bnNpZ25lZCBsYzsgICAgLyogbWF0Y2ggbGVuZ3RoLU1JTl9NQVRDSCBvciB1bm1hdGNoZWQgY2hhciAoaWYgZGlzdD09MCkgKi8KewogIC8vdmFyIG91dF9sZW5ndGgsIGluX2xlbmd0aCwgZGNvZGU7CgogIHMucGVuZGluZ19idWZbcy5kX2J1ZiArIHMubGFzdF9saXQgKiAyXSAgICAgPSAoZGlzdCA+Pj4gOCkgJiAweGZmOwogIHMucGVuZGluZ19idWZbcy5kX2J1ZiArIHMubGFzdF9saXQgKiAyICsgMV0gPSBkaXN0ICYgMHhmZjsKCiAgcy5wZW5kaW5nX2J1ZltzLmxfYnVmICsgcy5sYXN0X2xpdF0gPSBsYyAmIDB4ZmY7CiAgcy5sYXN0X2xpdCsrOwoKICBpZiAoZGlzdCA9PT0gMCkgewogICAgLyogbGMgaXMgdGhlIHVubWF0Y2hlZCBjaGFyICovCiAgICBzLmR5bl9sdHJlZVtsYyAqIDJdLyouRnJlcSovKys7CiAgfSBlbHNlIHsKICAgIHMubWF0Y2hlcysrOwogICAgLyogSGVyZSwgbGMgaXMgdGhlIG1hdGNoIGxlbmd0aCAtIE1JTl9NQVRDSCAqLwogICAgZGlzdC0tOyAgICAgICAgICAgICAvKiBkaXN0ID0gbWF0Y2ggZGlzdGFuY2UgLSAxICovCiAgICAvL0Fzc2VydCgodXNoKWRpc3QgPCAodXNoKU1BWF9ESVNUKHMpICYmCiAgICAvLyAgICAgICAodXNoKWxjIDw9ICh1c2gpKE1BWF9NQVRDSC1NSU5fTUFUQ0gpICYmCiAgICAvLyAgICAgICAodXNoKWRfY29kZShkaXN0KSA8ICh1c2gpRF9DT0RFUywgICJfdHJfdGFsbHk6IGJhZCBtYXRjaCIpOwoKICAgIHMuZHluX2x0cmVlWyhfbGVuZ3RoX2NvZGVbbGNdICsgTElURVJBTFMgKyAxKSAqIDJdLyouRnJlcSovKys7CiAgICBzLmR5bl9kdHJlZVtkX2NvZGUoZGlzdCkgKiAyXS8qLkZyZXEqLysrOwogIH0KCi8vICghKSBUaGlzIGJsb2NrIGlzIGRpc2FibGVkIGluIHpsaWIgZGVmYWlsdHMsCi8vIGRvbid0IGVuYWJsZSBpdCBmb3IgYmluYXJ5IGNvbXBhdGliaWxpdHkKCi8vI2lmZGVmIFRSVU5DQVRFX0JMT0NLCi8vICAvKiBUcnkgdG8gZ3Vlc3MgaWYgaXQgaXMgcHJvZml0YWJsZSB0byBzdG9wIHRoZSBjdXJyZW50IGJsb2NrIGhlcmUgKi8KLy8gIGlmICgocy5sYXN0X2xpdCAmIDB4MWZmZikgPT09IDAgJiYgcy5sZXZlbCA+IDIpIHsKLy8gICAgLyogQ29tcHV0ZSBhbiB1cHBlciBib3VuZCBmb3IgdGhlIGNvbXByZXNzZWQgbGVuZ3RoICovCi8vICAgIG91dF9sZW5ndGggPSBzLmxhc3RfbGl0Kjg7Ci8vICAgIGluX2xlbmd0aCA9IHMuc3Ryc3RhcnQgLSBzLmJsb2NrX3N0YXJ0OwovLwovLyAgICBmb3IgKGRjb2RlID0gMDsgZGNvZGUgPCBEX0NPREVTOyBkY29kZSsrKSB7Ci8vICAgICAgb3V0X2xlbmd0aCArPSBzLmR5bl9kdHJlZVtkY29kZSoyXS8qLkZyZXEqLyAqICg1ICsgZXh0cmFfZGJpdHNbZGNvZGVdKTsKLy8gICAgfQovLyAgICBvdXRfbGVuZ3RoID4+Pj0gMzsKLy8gICAgLy9UcmFjZXYoKHN0ZGVyciwiXG5sYXN0X2xpdCAldSwgaW4gJWxkLCBvdXQgfiVsZCglbGQlJSkgIiwKLy8gICAgLy8gICAgICAgcy0+bGFzdF9saXQsIGluX2xlbmd0aCwgb3V0X2xlbmd0aCwKLy8gICAgLy8gICAgICAgMTAwTCAtIG91dF9sZW5ndGgqMTAwTC9pbl9sZW5ndGgpKTsKLy8gICAgaWYgKHMubWF0Y2hlcyA8IChzLmxhc3RfbGl0Pj4xKS8qaW50IC8yKi8gJiYgb3V0X2xlbmd0aCA8IChpbl9sZW5ndGg+PjEpLyppbnQgLzIqLykgewovLyAgICAgIHJldHVybiB0cnVlOwovLyAgICB9Ci8vICB9Ci8vI2VuZGlmCgogIHJldHVybiAocy5sYXN0X2xpdCA9PT0gcy5saXRfYnVmc2l6ZSAtIDEpOwogIC8qIFdlIGF2b2lkIGVxdWFsaXR5IHdpdGggbGl0X2J1ZnNpemUgYmVjYXVzZSBvZiB3cmFwYXJvdW5kIGF0IDY0SwogICAqIG9uIDE2IGJpdCBtYWNoaW5lcyBhbmQgYmVjYXVzZSBzdG9yZWQgYmxvY2tzIGFyZSByZXN0cmljdGVkIHRvCiAgICogNjRLLTEgYnl0ZXMuCiAgICovCn0KCmV4cG9ydHMuX3RyX2luaXQgID0gX3RyX2luaXQ7CmV4cG9ydHMuX3RyX3N0b3JlZF9ibG9jayA9IF90cl9zdG9yZWRfYmxvY2s7CmV4cG9ydHMuX3RyX2ZsdXNoX2Jsb2NrICA9IF90cl9mbHVzaF9ibG9jazsKZXhwb3J0cy5fdHJfdGFsbHkgPSBfdHJfdGFsbHk7CmV4cG9ydHMuX3RyX2FsaWduID0gX3RyX2FsaWduOwoKfSx7Ii4uL3V0aWxzL2NvbW1vbiI6NDF9XSw1MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCi8vIChDKSAxOTk1LTIwMTMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlcgovLyAoQykgMjAxNC0yMDE3IFZpdGFseSBQdXpyaW4gYW5kIEFuZHJleSBUdXBpdHNpbgovLwovLyBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZAovLyB3YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMKLy8gYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4KLy8KLy8gUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsCi8vIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQKLy8gZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOgovLwovLyAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdAovLyAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlCi8vICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlCi8vICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4KLy8gMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKLy8gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCi8vIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uCgpmdW5jdGlvbiBaU3RyZWFtKCkgewogIC8qIG5leHQgaW5wdXQgYnl0ZSAqLwogIHRoaXMuaW5wdXQgPSBudWxsOyAvLyBKUyBzcGVjaWZpYywgYmVjYXVzZSB3ZSBoYXZlIG5vIHBvaW50ZXJzCiAgdGhpcy5uZXh0X2luID0gMDsKICAvKiBudW1iZXIgb2YgYnl0ZXMgYXZhaWxhYmxlIGF0IGlucHV0ICovCiAgdGhpcy5hdmFpbF9pbiA9IDA7CiAgLyogdG90YWwgbnVtYmVyIG9mIGlucHV0IGJ5dGVzIHJlYWQgc28gZmFyICovCiAgdGhpcy50b3RhbF9pbiA9IDA7CiAgLyogbmV4dCBvdXRwdXQgYnl0ZSBzaG91bGQgYmUgcHV0IHRoZXJlICovCiAgdGhpcy5vdXRwdXQgPSBudWxsOyAvLyBKUyBzcGVjaWZpYywgYmVjYXVzZSB3ZSBoYXZlIG5vIHBvaW50ZXJzCiAgdGhpcy5uZXh0X291dCA9IDA7CiAgLyogcmVtYWluaW5nIGZyZWUgc3BhY2UgYXQgb3V0cHV0ICovCiAgdGhpcy5hdmFpbF9vdXQgPSAwOwogIC8qIHRvdGFsIG51bWJlciBvZiBieXRlcyBvdXRwdXQgc28gZmFyICovCiAgdGhpcy50b3RhbF9vdXQgPSAwOwogIC8qIGxhc3QgZXJyb3IgbWVzc2FnZSwgTlVMTCBpZiBubyBlcnJvciAqLwogIHRoaXMubXNnID0gJycvKlpfTlVMTCovOwogIC8qIG5vdCB2aXNpYmxlIGJ5IGFwcGxpY2F0aW9ucyAqLwogIHRoaXMuc3RhdGUgPSBudWxsOwogIC8qIGJlc3QgZ3Vlc3MgYWJvdXQgdGhlIGRhdGEgdHlwZTogYmluYXJ5IG9yIHRleHQgKi8KICB0aGlzLmRhdGFfdHlwZSA9IDIvKlpfVU5LTk9XTiovOwogIC8qIGFkbGVyMzIgdmFsdWUgb2YgdGhlIHVuY29tcHJlc3NlZCBkYXRhICovCiAgdGhpcy5hZGxlciA9IDA7Cn0KCm1vZHVsZS5leHBvcnRzID0gWlN0cmVhbTsKCn0se31dLDU0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwptb2R1bGUuZXhwb3J0cyA9IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09ICdmdW5jdGlvbicgPyBzZXRJbW1lZGlhdGUgOgogIGZ1bmN0aW9uIHNldEltbWVkaWF0ZSgpIHsKICAgIHZhciBhcmdzID0gW10uc2xpY2UuYXBwbHkoYXJndW1lbnRzKTsKICAgIGFyZ3Muc3BsaWNlKDEsIDAsIDApOwogICAgc2V0VGltZW91dC5hcHBseShudWxsLCBhcmdzKTsKICB9OwoKfSx7fV19LHt9LFsxMF0pKDEwKQp9KTsKCi8vQnJpY2tzLmpzIE1JVC4gwqkgMjAxNyBNaWNoYWVsIENhdmFsZWEKKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHsKICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6CiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDoKICAoZ2xvYmFsLkJyaWNrcyA9IGZhY3RvcnkoKSk7Cn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnOwoKdmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07CgogICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgewogICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgewogICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn07Cgp2YXIga25vdCA9IGZ1bmN0aW9uIGtub3QoKSB7CiAgdmFyIGV4dGVuZGVkID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKCiAgdmFyIGV2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CgogIGZ1bmN0aW9uIG9uKG5hbWUsIGhhbmRsZXIpIHsKICAgIGV2ZW50c1tuYW1lXSA9IGV2ZW50c1tuYW1lXSB8fCBbXTsKICAgIGV2ZW50c1tuYW1lXS5wdXNoKGhhbmRsZXIpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBmdW5jdGlvbiBvbmNlKG5hbWUsIGhhbmRsZXIpIHsKICAgIGhhbmRsZXIuX29uY2UgPSB0cnVlOwogICAgb24obmFtZSwgaGFuZGxlcik7CiAgICByZXR1cm4gdGhpczsKICB9CgogIGZ1bmN0aW9uIG9mZihuYW1lKSB7CiAgICB2YXIgaGFuZGxlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CgogICAgaGFuZGxlciA/IGV2ZW50c1tuYW1lXS5zcGxpY2UoZXZlbnRzW25hbWVdLmluZGV4T2YoaGFuZGxlciksIDEpIDogZGVsZXRlIGV2ZW50c1tuYW1lXTsKCiAgICByZXR1cm4gdGhpczsKICB9CgogIGZ1bmN0aW9uIGVtaXQobmFtZSkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07CiAgICB9CgogICAgLy8gY2FjaGUgdGhlIGV2ZW50cywgdG8gYXZvaWQgY29uc2VxdWVuY2VzIG9mIG11dGF0aW9uCiAgICB2YXIgY2FjaGUgPSBldmVudHNbbmFtZV0gJiYgZXZlbnRzW25hbWVdLnNsaWNlKCk7CgogICAgLy8gb25seSBmaXJlIGhhbmRsZXJzIGlmIHRoZXkgZXhpc3QKICAgIGNhY2hlICYmIGNhY2hlLmZvckVhY2goZnVuY3Rpb24gKGhhbmRsZXIpIHsKICAgICAgLy8gcmVtb3ZlIGhhbmRsZXJzIGFkZGVkIHdpdGggJ29uY2UnCiAgICAgIGhhbmRsZXIuX29uY2UgJiYgb2ZmKG5hbWUsIGhhbmRsZXIpOwoKICAgICAgLy8gc2V0ICd0aGlzJyBjb250ZXh0LCBwYXNzIGFyZ3MgdG8gaGFuZGxlcnMKICAgICAgaGFuZGxlci5hcHBseShfdGhpcywgYXJncyk7CiAgICB9KTsKCiAgICByZXR1cm4gdGhpczsKICB9CgogIHJldHVybiBfZXh0ZW5kcyh7fSwgZXh0ZW5kZWQsIHsKCiAgICBvbjogb24sCiAgICBvbmNlOiBvbmNlLAogICAgb2ZmOiBvZmYsCiAgICBlbWl0OiBlbWl0CiAgfSk7Cn07Cgp2YXIgYnJpY2tzID0gZnVuY3Rpb24gYnJpY2tzKCkgewogIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKCiAgLy8gcHJpdmF0ZXMKCiAgdmFyIHBlcnNpc3QgPSB2b2lkIDA7IC8vIHBhY2tpbmcgbmV3IGVsZW1lbnRzLCBvciBhbGwgZWxlbWVudHM/CiAgdmFyIHRpY2tpbmcgPSB2b2lkIDA7IC8vIGZvciBkZWJvdW5jZWQgcmVzaXplCgogIHZhciBzaXplSW5kZXggPSB2b2lkIDA7CiAgdmFyIHNpemVEZXRhaWwgPSB2b2lkIDA7CgogIHZhciBjb2x1bW5UYXJnZXQgPSB2b2lkIDA7CiAgdmFyIGNvbHVtbkhlaWdodHMgPSB2b2lkIDA7CgogIHZhciBub2RlVG9wID0gdm9pZCAwOwogIHZhciBub2RlTGVmdCA9IHZvaWQgMDsKICB2YXIgbm9kZVdpZHRoID0gdm9pZCAwOwogIHZhciBub2RlSGVpZ2h0ID0gdm9pZCAwOwoKICB2YXIgbm9kZXMgPSB2b2lkIDA7CiAgdmFyIG5vZGVzV2lkdGhzID0gdm9pZCAwOwogIHZhciBub2Rlc0hlaWdodHMgPSB2b2lkIDA7CgogIC8vIHJlc29sdmUgb3B0aW9ucwoKICB2YXIgcGFja2VkID0gb3B0aW9ucy5wYWNrZWQuaW5kZXhPZignZGF0YS0nKSA9PT0gMCA/IG9wdGlvbnMucGFja2VkIDogJ2RhdGEtJyArIG9wdGlvbnMucGFja2VkOwogIHZhciBzaXplcyA9IG9wdGlvbnMuc2l6ZXMuc2xpY2UoKS5yZXZlcnNlKCk7CiAgdmFyIHBvc2l0aW9uID0gb3B0aW9ucy5wb3NpdGlvbiAhPT0gZmFsc2U7CgogIHZhciBjb250YWluZXIgPSBvcHRpb25zLmNvbnRhaW5lci5ub2RlVHlwZSA/IG9wdGlvbnMuY29udGFpbmVyIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLmNvbnRhaW5lcik7CgogIHZhciBzZWxlY3RvcnMgPSB7CiAgICBhbGw6IGZ1bmN0aW9uIGFsbCgpIHsKICAgICAgcmV0dXJuIHRvQXJyYXkoY29udGFpbmVyLmNoaWxkcmVuKTsKICAgIH0sCiAgICBuZXc6IGZ1bmN0aW9uIF9uZXcoKSB7CiAgICAgIHJldHVybiB0b0FycmF5KGNvbnRhaW5lci5jaGlsZHJlbikuZmlsdGVyKGZ1bmN0aW9uIChub2RlKSB7CiAgICAgICAgcmV0dXJuICFub2RlLmhhc0F0dHJpYnV0ZSgnJyArIHBhY2tlZCk7CiAgICAgIH0pOwogICAgfQogIH07CgogIC8vIHNlcmllcwoKICB2YXIgc2V0dXAgPSBbc2V0U2l6ZUluZGV4LCBzZXRTaXplRGV0YWlsLCBzZXRDb2x1bW5zXTsKCiAgdmFyIHJ1biA9IFtzZXROb2Rlcywgc2V0Tm9kZXNEaW1lbnNpb25zLCBzZXROb2Rlc1N0eWxlcywgc2V0Q29udGFpbmVyU3R5bGVzXTsKCiAgLy8gaW5zdGFuY2UKCiAgdmFyIGluc3RhbmNlID0ga25vdCh7CiAgICBwYWNrOiBwYWNrLAogICAgdXBkYXRlOiB1cGRhdGUsCiAgICByZXNpemU6IHJlc2l6ZQogIH0pOwoKICByZXR1cm4gaW5zdGFuY2U7CgogIC8vIGdlbmVyYWwgaGVscGVycwoKICBmdW5jdGlvbiBydW5TZXJpZXMoZnVuY3Rpb25zKSB7CiAgICBmdW5jdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZnVuYykgewogICAgICByZXR1cm4gZnVuYygpOwogICAgfSk7CiAgfQoKICAvLyBhcnJheSBoZWxwZXJzCgogIGZ1bmN0aW9uIHRvQXJyYXkoaW5wdXQpIHsKICAgIHZhciBzY29wZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZG9jdW1lbnQ7CgogICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGlucHV0KTsKICB9CgogIGZ1bmN0aW9uIGZpbGxBcnJheShsZW5ndGgpIHsKICAgIHJldHVybiBBcnJheS5hcHBseShudWxsLCBBcnJheShsZW5ndGgpKS5tYXAoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gMDsKICAgIH0pOwogIH0KCiAgLy8gc2l6ZSBoZWxwZXJzCgogIGZ1bmN0aW9uIGdldFNpemVJbmRleCgpIHsKICAgIC8vIGZpbmQgaW5kZXggb2Ygd2lkZXN0IG1hdGNoaW5nIG1lZGlhIHF1ZXJ5CiAgICByZXR1cm4gc2l6ZXMubWFwKGZ1bmN0aW9uIChzaXplKSB7CiAgICAgIHJldHVybiBzaXplLm1xICYmIHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiAnICsgc2l6ZS5tcSArICcpJykubWF0Y2hlczsKICAgIH0pLmluZGV4T2YodHJ1ZSk7CiAgfQoKICBmdW5jdGlvbiBzZXRTaXplSW5kZXgoKSB7CiAgICBzaXplSW5kZXggPSBnZXRTaXplSW5kZXgoKTsKICB9CgogIGZ1bmN0aW9uIHNldFNpemVEZXRhaWwoKSB7CiAgICAvLyBpZiBubyBtZWRpYSBxdWVyaWVzIG1hdGNoZWQsIHVzZSB0aGUgYmFzZSBjYXNlCiAgICBzaXplRGV0YWlsID0gc2l6ZUluZGV4ID09PSAtMSA/IHNpemVzW3NpemVzLmxlbmd0aCAtIDFdIDogc2l6ZXNbc2l6ZUluZGV4XTsKICB9CgogIC8vIGNvbHVtbiBoZWxwZXJzCgogIGZ1bmN0aW9uIHNldENvbHVtbnMoKSB7CiAgICBjb2x1bW5IZWlnaHRzID0gZmlsbEFycmF5KHNpemVEZXRhaWwuY29sdW1ucyk7CiAgfQoKICAvLyBub2RlIGhlbHBlcnMKCiAgZnVuY3Rpb24gc2V0Tm9kZXMoKSB7CiAgICBub2RlcyA9IHNlbGVjdG9yc1twZXJzaXN0ID8gJ25ldycgOiAnYWxsJ10oKTsKICB9CgogIGZ1bmN0aW9uIHNldE5vZGVzRGltZW5zaW9ucygpIHsKICAgIC8vIGV4aXQgaWYgZW1wdHkgY29udGFpbmVyCiAgICBpZiAobm9kZXMubGVuZ3RoID09PSAwKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBub2Rlc1dpZHRocyA9IG5vZGVzLm1hcChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICByZXR1cm4gZWxlbWVudC5jbGllbnRXaWR0aDsKICAgIH0pOwogICAgbm9kZXNIZWlnaHRzID0gbm9kZXMubWFwKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgIHJldHVybiBlbGVtZW50LmNsaWVudEhlaWdodDsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gc2V0Tm9kZXNTdHlsZXMoKSB7CiAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCkgewogICAgICBjb2x1bW5UYXJnZXQgPSBjb2x1bW5IZWlnaHRzLmluZGV4T2YoTWF0aC5taW4uYXBwbHkoTWF0aCwgY29sdW1uSGVpZ2h0cykpOwoKICAgICAgZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7CgogICAgICBub2RlVG9wID0gY29sdW1uSGVpZ2h0c1tjb2x1bW5UYXJnZXRdICsgJ3B4JzsKICAgICAgbm9kZUxlZnQgPSBjb2x1bW5UYXJnZXQgKiBub2Rlc1dpZHRoc1tpbmRleF0gKyBjb2x1bW5UYXJnZXQgKiBzaXplRGV0YWlsLmd1dHRlciArICdweCc7CgogICAgICAvLyBzdXBwb3J0IHBvc2l0aW9uZWQgZWxlbWVudHMgKGRlZmF1bHQpIG9yIHRyYW5zZm9ybWVkIGVsZW1lbnRzCiAgICAgIGlmIChwb3NpdGlvbikgewogICAgICAgIGVsZW1lbnQuc3R5bGUudG9wID0gbm9kZVRvcDsKICAgICAgICBlbGVtZW50LnN0eWxlLmxlZnQgPSBub2RlTGVmdDsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgnICsgbm9kZUxlZnQgKyAnLCAnICsgbm9kZVRvcCArICcsIDApJzsKICAgICAgfQoKICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUocGFja2VkLCAnJyk7CgogICAgICAvLyBpZ25vcmUgbm9kZXMgd2l0aCBubyB3aWR0aCBhbmQvb3IgaGVpZ2h0CiAgICAgIG5vZGVXaWR0aCA9IG5vZGVzV2lkdGhzW2luZGV4XTsKICAgICAgbm9kZUhlaWdodCA9IG5vZGVzSGVpZ2h0c1tpbmRleF07CgogICAgICBpZiAobm9kZVdpZHRoICYmIG5vZGVIZWlnaHQpIHsKICAgICAgICBjb2x1bW5IZWlnaHRzW2NvbHVtblRhcmdldF0gKz0gbm9kZUhlaWdodCArIHNpemVEZXRhaWwuZ3V0dGVyOwogICAgICB9CiAgICB9KTsKICB9CgogIC8vIGNvbnRhaW5lciBoZWxwZXJzCgogIGZ1bmN0aW9uIHNldENvbnRhaW5lclN0eWxlcygpIHsKICAgIGNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7CiAgICBjb250YWluZXIuc3R5bGUud2lkdGggPSBzaXplRGV0YWlsLmNvbHVtbnMgKiBub2RlV2lkdGggKyAoc2l6ZURldGFpbC5jb2x1bW5zIC0gMSkgKiBzaXplRGV0YWlsLmd1dHRlciArICdweCc7CiAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgY29sdW1uSGVpZ2h0cykgLSBzaXplRGV0YWlsLmd1dHRlciArICdweCc7CiAgfQoKICAvLyByZXNpemUgaGVscGVycwoKICBmdW5jdGlvbiByZXNpemVGcmFtZSgpIHsKICAgIGlmICghdGlja2luZykgewogICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlc2l6ZUhhbmRsZXIpOwogICAgICB0aWNraW5nID0gdHJ1ZTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHJlc2l6ZUhhbmRsZXIoKSB7CiAgICBpZiAoc2l6ZUluZGV4ICE9PSBnZXRTaXplSW5kZXgoKSkgewogICAgICBwYWNrKCk7CiAgICAgIGluc3RhbmNlLmVtaXQoJ3Jlc2l6ZScsIHNpemVEZXRhaWwpOwogICAgfQoKICAgIHRpY2tpbmcgPSBmYWxzZTsKICB9CgogIC8vIEFQSQoKICBmdW5jdGlvbiBwYWNrKCkgewogICAgcGVyc2lzdCA9IGZhbHNlOwogICAgcnVuU2VyaWVzKHNldHVwLmNvbmNhdChydW4pKTsKCiAgICByZXR1cm4gaW5zdGFuY2UuZW1pdCgncGFjaycpOwogIH0KCiAgZnVuY3Rpb24gdXBkYXRlKCkgewogICAgcGVyc2lzdCA9IHRydWU7CiAgICBydW5TZXJpZXMocnVuKTsKCiAgICByZXR1cm4gaW5zdGFuY2UuZW1pdCgndXBkYXRlJyk7CiAgfQoKICBmdW5jdGlvbiByZXNpemUoKSB7CiAgICB2YXIgZmxhZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdHJ1ZTsKCiAgICB2YXIgYWN0aW9uID0gZmxhZyA/ICdhZGRFdmVudExpc3RlbmVyJyA6ICdyZW1vdmVFdmVudExpc3RlbmVyJzsKCiAgICB3aW5kb3dbYWN0aW9uXSgncmVzaXplJywgcmVzaXplRnJhbWUpOwoKICAgIHJldHVybiBpbnN0YW5jZTsKICB9Cn07CgpyZXR1cm4gYnJpY2tzOwoKfSkpKTsKCnZhciBmbG9hdEJhcjsKOyhmdW5jdGlvbih0b3BPYmplY3Qsd2luZG93LGRvY3VtZW50LHVuc2FmZVdpbmRvdyl7CiAgICAndXNlIHN0cmljdCc7CgogICAgLy92YXIgc2l0ZUluZm8gPSBbe31dOwogICAgdmFyIGRlYnVnOwogICAgdmFyIGxhbmc7CiAgICBmdW5jdGlvbiBpbml0TGFuZygpewogICAgICAgIGxldCBjdXN0b21MYW5nPXN0b3JhZ2UuZ2V0SXRlbSgiY3VzdG9tTGFuZyIpfHwnYXV0byc7CiAgICAgICAgaWYoY3VzdG9tTGFuZz09ImF1dG8iKWxhbmcgPSBuYXZpZ2F0b3IuYXBwTmFtZT09Ik5ldHNjYXBlIj9uYXZpZ2F0b3IubGFuZ3VhZ2U6bmF2aWdhdG9yLnVzZXJMYW5ndWFnZTsKICAgICAgICBlbHNlIGxhbmc9Y3VzdG9tTGFuZzsKICAgICAgICBzZXRMYW5nKGxhbmcpOwogICAgfQogICAgZnVuY3Rpb24gaTE4bihrZXksaW5zZXJ0cyl7CiAgICAgICAgdmFyIHJlc3VsdD1pMThuRGF0YVtrZXldLGk7CiAgICAgICAgaWYoaW5zZXJ0cyl7CiAgICAgICAgICAgIGlmKHR5cGVvZiBpbnNlcnRzIT0ib2JqZWN0IilpbnNlcnRzPVtpbnNlcnRzXTsKICAgICAgICAgICAgZm9yKGk9MDtpPGluc2VydHMubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICByZXN1bHQ9cmVzdWx0LnJlcGxhY2UoIiN0IyIsaW5zZXJ0c1tpXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdD9yZXN1bHQ6a2V5OwogICAgfQogICAgdmFyIGRlZmF1bHRTZWFyY2hEYXRhPWBHb29nbGUgfCBodHRwczovL3d3dy5nb29nbGUuY29tL3NlYXJjaGJ5aW1hZ2U/c2FmZT1vZmYmc2Jpc3JjPTEmaW1hZ2VfdXJsPSN0IwpZYW5kZXggfCBodHRwczovL3lhbmRleC5jb20vaW1hZ2VzL3NlYXJjaD9zb3VyY2U9Y29sbGVjdGlvbnMmcnB0PWltYWdldmlldyZ1cmw9I3QjClNhdWNlTkFPIHwgaHR0cHM6Ly9zYXVjZW5hby5jb20vc2VhcmNoLnBocD9kYj05OTkmdXJsPSN0IwpJUURCIHwgaHR0cHM6Ly9pcWRiLm9yZy8/dXJsPSN0IwozRCBJUURCIHwgaHR0cHM6Ly8zZC5pcWRiLm9yZy8/dXJsPSN0IwpCYWlkdSB8IGh0dHBzOi8vZ3JhcGguYmFpZHUuY29tL2RldGFpbHM/aXNmcm9tdHVzb3VwYz0xJnRuPXBjJmNhcm91c2VsPTAmcHJvbW90aW9uX25hbWU9cGNfaW1hZ2Vfc2hpdHVpbmRleCZleHRVaURhdGElNWJpc0xvZ29TaG93JTVkPTEmaW1hZ2U9I3QjCkJpbmcgfCBodHRwczovL3d3dy5iaW5nLmNvbS9pbWFnZXMvc2VhcmNoP3ZpZXc9ZGV0YWlsdjImaXNzPXNiaSZmb3JtPVNCSVZTUCZzYmlzcmM9VXJsUGFzdGUmcT1pbWd1cmw6I3QjClRpbkV5ZSB8IGh0dHBzOi8vd3d3LnRpbmV5ZS5jb20vc2VhcmNoP3VybD0jdCMKU29nb3UgfCBodHRwczovL3BpYy5zb2dvdS5jb20vcmlzP3F1ZXJ5PSN0IwozNjAgfCBodHRwOi8vc3Quc28uY29tL3N0dT9pbWd1cmw9I3QjCkFzY2lpMkQgfCBodHRwczovL2FzY2lpMmQubmV0L3NlYXJjaC91cmwvI3QjClRyYWNlIE1vZSB8IGh0dHBzOi8vdHJhY2UubW9lLz91cmw9I3QjCkthcm1hRGVjYXkgfCBodHRwOi8va2FybWFkZWNheS5jb20vI3QjClFSQ29kZSB8IGh0dHBzOi8vaG9vdGhpbi5jb20vcXJjb2RlLyMjdCMKUVJkZWNvZGUxIHwgaHR0cHM6Ly96eGluZy5vcmcvdy9kZWNvZGU/ZnVsbD10cnVlJnU9I3QjClFSZGVjb2RlMiB8IGh0dHBzOi8vaG9vdGhpbi5jb20vcXJkZWNvZGUvIyN0IwpJbWdPcHMgfCBodHRwczovL2ltZ29wcy5jb20vI2IjYDsKCiAgICB2YXIgX0dNX29wZW5JblRhYixfR01fc2V0Q2xpcGJvYXJkLF9HTV94bWxodHRwUmVxdWVzdCxfR01fcmVnaXN0ZXJNZW51Q29tbWFuZCxfR01fbm90aWZpY2F0aW9uLEdNX2ZldGNoLF9HTV9hZGRTdHlsZTsKICAgIGlmKHR5cGVvZiBHTV9vcGVuSW5UYWIhPSd1bmRlZmluZWQnKXsKICAgICAgICBfR01fb3BlbkluVGFiPUdNX29wZW5JblRhYjsKICAgIH1lbHNlIGlmKHR5cGVvZiBHTSE9J3VuZGVmaW5lZCcgJiYgdHlwZW9mIEdNLm9wZW5JblRhYiE9J3VuZGVmaW5lZCcpewogICAgICAgIF9HTV9vcGVuSW5UYWI9R00ub3BlbkluVGFiOwogICAgfWVsc2V7CiAgICAgICAgX0dNX29wZW5JblRhYj0ocyx0KT0+e3dpbmRvdy5vcGVuKHMpfTsKICAgIH0KICAgIGlmKHR5cGVvZiBHTV9zZXRDbGlwYm9hcmQhPSd1bmRlZmluZWQnKXsKICAgICAgICBfR01fc2V0Q2xpcGJvYXJkPUdNX3NldENsaXBib2FyZDsKICAgIH1lbHNlIGlmKHR5cGVvZiBHTSE9J3VuZGVmaW5lZCcgJiYgdHlwZW9mIEdNLnNldENsaXBib2FyZCE9J3VuZGVmaW5lZCcpewogICAgICAgIF9HTV9zZXRDbGlwYm9hcmQ9R00uc2V0Q2xpcGJvYXJkOwogICAgfWVsc2V7CiAgICAgICAgX0dNX3NldENsaXBib2FyZD0ocyk9Pnt9OwogICAgfQogICAgaWYodHlwZW9mIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQhPSd1bmRlZmluZWQnKXsKICAgICAgICBfR01fcmVnaXN0ZXJNZW51Q29tbWFuZD1HTV9yZWdpc3Rlck1lbnVDb21tYW5kOwogICAgfWVsc2UgaWYodHlwZW9mIEdNIT0ndW5kZWZpbmVkJyAmJiB0eXBlb2YgR00ucmVnaXN0ZXJNZW51Q29tbWFuZCE9J3VuZGVmaW5lZCcpewogICAgICAgIF9HTV9yZWdpc3Rlck1lbnVDb21tYW5kPUdNLnJlZ2lzdGVyTWVudUNvbW1hbmQ7CiAgICB9ZWxzZXsKICAgICAgICBfR01fcmVnaXN0ZXJNZW51Q29tbWFuZD0ocyxmKT0+e307CiAgICB9CiAgICBpZih0eXBlb2YgR01fbm90aWZpY2F0aW9uIT0ndW5kZWZpbmVkJyl7CiAgICAgICAgX0dNX25vdGlmaWNhdGlvbj1HTV9ub3RpZmljYXRpb247CiAgICB9ZWxzZSBpZih0eXBlb2YgR00hPSd1bmRlZmluZWQnICYmIHR5cGVvZiBHTS5ub3RpZmljYXRpb24hPSd1bmRlZmluZWQnKXsKICAgICAgICBfR01fbm90aWZpY2F0aW9uPUdNLm5vdGlmaWNhdGlvbjsKICAgIH1lbHNlewogICAgICAgIF9HTV9ub3RpZmljYXRpb249KHMpPT57YWxlcnQocyl9OwogICAgfQogICAgaWYgKHR5cGVvZiBHTV94bWxodHRwUmVxdWVzdCAhPSAndW5kZWZpbmVkJykgewogICAgICAgIF9HTV94bWxodHRwUmVxdWVzdCA9IEdNX3htbGh0dHBSZXF1ZXN0OwogICAgICAgIEdNX2ZldGNoID0gdHJ1ZTsKICAgIH0gZWxzZSBpZiAodHlwZW9mIEdNICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiBHTS54bWxIdHRwUmVxdWVzdCAhPSAndW5kZWZpbmVkJykgewogICAgICAgIF9HTV94bWxodHRwUmVxdWVzdCA9IEdNLnhtbEh0dHBSZXF1ZXN0OwogICAgICAgIEdNX2ZldGNoID0gdHJ1ZTsKICAgIH0gZWxzZSB7CiAgICAgICAgX0dNX3htbGh0dHBSZXF1ZXN0ID0gKGYpID0+IHtmZXRjaChmLnVybCwgKGYubWV0aG9kICYmIGYubWV0aG9kICE9PSAnR0VUJyA/IHttZXRob2Q6IGYubWV0aG9kIHx8ICdHRVQnLCBib2R5OiBmLmRhdGEgfHwgJycsIGhlYWRlcnM6IGYuaGVhZGVyc30gOiB7bWV0aG9kOiAnR0VUJywgaGVhZGVyczogZi5oZWFkZXJzfSkpLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKS50aGVuKGRhdGEgPT4ge2Yub25sb2FkKHtyZXNwb25zZTogZGF0YX0pfSkuY2F0Y2goZSA9PiBmLm9uZXJyb3IoKSl9OwogICAgfQogICAgaWYgKHR5cGVvZiBHTV9hZGRTdHlsZSAhPSAndW5kZWZpbmVkJykgewogICAgICAgIF9HTV9hZGRTdHlsZSA9IEdNX2FkZFN0eWxlOwogICAgfSBlbHNlIGlmICh0eXBlb2YgR00gIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEdNLmFkZFN0eWxlICE9ICd1bmRlZmluZWQnKSB7CiAgICAgICAgX0dNX2FkZFN0eWxlID0gR00uYWRkU3R5bGU7CiAgICB9IGVsc2UgewogICAgICAgIF9HTV9hZGRTdHlsZSA9IGNzc1N0ciA9PiB7CiAgICAgICAgICAgIGxldCBzdHlsZUVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7CiAgICAgICAgICAgIHN0eWxlRWxlLmlubmVySFRNTCA9IGNzc1N0cjsKICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZSk7CiAgICAgICAgICAgIHJldHVybiBzdHlsZUVsZTsKICAgICAgICB9OwogICAgfQogICAgaWYgKEdNX2ZldGNoKSB7CiAgICAgICAgR01fZmV0Y2ggPSBhc3luYyAodXJsLCBvcHRpb24pID0+IHsKICAgICAgICAgICAgaWYgKCF1cmwpIHJldHVybiBudWxsOwogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgICAgICAgICAgbGV0IGlzUG9zdCA9IG9wdGlvbiAmJiAvXnBvc3QkL2kudGVzdChvcHRpb24ubWV0aG9kKTsKICAgICAgICAgICAgICAgIF9HTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAob3B0aW9uICYmIG9wdGlvbi5tZXRob2QpIHx8ICdHRVQnLAogICAgICAgICAgICAgICAgICAgIHVybDogdXJsLnRyaW0oKSwKICAgICAgICAgICAgICAgICAgICBkYXRhOiAob3B0aW9uICYmIG9wdGlvbi5ib2R5KSB8fCAnJywKICAgICAgICAgICAgICAgICAgICBjb29raWU6IGNvb2tpZSwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiAob3B0aW9uICYmIG9wdGlvbi5oZWFkZXJzKSB8fCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZXI6IHVybCwKICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiB1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAoaXNQb3N0ID8gImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIgOiAidGV4dC9odG1sIiksCiAgICAgICAgICAgICAgICAgICAgICAgICdYLVJlcXVlc3RlZC1XaXRoJzogKGlzUG9zdCA/ICdYTUxIdHRwUmVxdWVzdCcgOiAnJykKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBkLnJlc3BvbnNlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZC5zdGF0dXMgPj0gNDAwIHx8ICFyZXNwb25zZSkgcmVzcG9uc2UgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRleHQgPSAoKSA9PiBuZXcgUHJvbWlzZSgocikgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcihyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQganNvbiA9ICgpID0+IG5ldyBQcm9taXNlKChyKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIoSlNPTi5wYXJzZShyZXNwb25zZSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIobnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHt0ZXh0OiB0ZXh0LCBqc29uOiBqc29uLCBmaW5hbFVybDogKGQuZmluYWxVcmwgfHwgdXJsKX0pOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgb25lcnJvcjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgb250aW1lb3V0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKGUpOwogICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0gZWxzZSBHTV9mZXRjaCA9IGZldGNoOwoKICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdDQU5WQVMnKTsKICAgIGlmIChkb2N1bWVudC5ib2R5KSB7CiAgICAgICAgaWYgKGNhbnZhcy5zdHlsZSkgY2FudmFzLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpOwogICAgICAgIGlmICh0eXBlb2YgY2FudmFzLmdldENvbnRleHQgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoY2FudmFzKTsKICAgICAgICAgICAgY2FudmFzID0gbnVsbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGNhbnZhcyk7CiAgICAgICAgfQogICAgfQogICAgdmFyIGZvcm1hdERpY3QgPSBuZXcgTWFwKCk7CiAgICBmdW5jdGlvbiBpY29uMkJhc2U2NChpY29uLCBjb250ZW50LCBpY29uU3R5bGUpIHsKICAgICAgICBpZiAoIWNvbnRlbnQgfHwgIWNhbnZhcykgcmV0dXJuIGZhbHNlOwogICAgICAgIGxldCBzaXplID0gTWF0aC5taW4oKGljb24uY2xpZW50V2lkdGggfHwgaWNvbi5vZmZzZXRXaWR0aCksIChpY29uLmNsaWVudEhlaWdodCB8fCBpY29uLm9mZnNldEhlaWdodCkpOwogICAgICAgIGlmICghc2l6ZSkgcmV0dXJuIGZhbHNlOwogICAgICAgIGNhbnZhcy53aWR0aCA9IHNpemU7CiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemU7CiAgICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwogICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICBjdHguZm9udCA9IGljb25TdHlsZS5mb250IHx8IChpY29uU3R5bGUuZm9udFNpemUgKyAiICIgKyBpY29uU3R5bGUuZm9udEZhbWlseSk7CiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gaWNvblN0eWxlLmNvbG9yIHx8ICJibGFjayI7CiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGljb25TdHlsZS5jb2xvciB8fCAiYmxhY2siOwogICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAidG9wIjsKICAgICAgICBsZXQgbWV0cmljcyA9IGN0eC5tZWFzdXJlVGV4dChjb250ZW50KTsKICAgICAgICBjdHguZmlsbFRleHQoY29udGVudCwgKGNhbnZhcy53aWR0aCAtIG1ldHJpY3Mud2lkdGgpIC8gMiwgKGNhbnZhcy5oZWlnaHQgLSBwYXJzZUludChpY29uU3R5bGUuZm9udFNpemUpKSAvIDIpOwogICAgICAgIHJldHVybiBjYW52YXMudG9EYXRhVVJMKCJpbWFnZS9wbmciKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRSaWdodFNhdmVOYW1lKHVybCwgbmFtZSwgdHlwZSwgX2V4dCkgewogICAgICAgIC8qCiAgICAgICAgIDA6IGkxOG4oImRlZmF1bHQiKSwKICAgICAgICAgMTogaTE4bigidGV4dEZpcnN0IiksCiAgICAgICAgIDI6IGkxOG4oIm9ubHlVcmwiKSwKICAgICAgICAgMzogaTE4bigidXJsQW5kVGV4dCIpCiAgICAgICAgKi8KICAgICAgICB0eXBlID0gcGFyc2VJbnQodHlwZSB8fCAwKTsKICAgICAgICBpZiAobmFtZSkgbmFtZSA9IG5hbWUuc3BsaXQoIlxuIilbMF0ucmVwbGFjZSgvLio/XC9cL1teXC9dK1wvLywgIiIpLnJlcGxhY2UoL1w/LiovLCAiIikucmVwbGFjZSgvXmRhdGE6LiovLCAiIik7CiAgICAgICAgaWYgKCF1cmwucmVwbGFjZSB8fCB1cmwuaW5kZXhPZigiZGF0YToiKSA9PT0gMCkgdXJsID0gIiI7CiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoLy4qP1wvXC9bXlwvXStcLy8sICIiKTsKICAgICAgICBsZXQgbmFtZUZyb21VcmwgPSB1cmwubWF0Y2goLy4qPyhbXlwvXD9cPVwmXSspXC5cd3syLDV9KFw/fEB8JCkuKi8sICIkMSIpOwogICAgICAgIG5hbWVGcm9tVXJsID0gbmFtZUZyb21VcmwgPyBuYW1lRnJvbVVybFsxXSA6ICIiOwogICAgICAgIGlmICgvXD0mLy50ZXN0KG5hbWVGcm9tVXJsKSkgewogICAgICAgICAgICBuYW1lRnJvbVVybCA9ICIiOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBuYW1lRnJvbVVybCA9IGRlY29kZVVSSUNvbXBvbmVudChuYW1lRnJvbVVybCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgfQogICAgICAgIGxldCBleHQ7CiAgICAgICAgaWYgKF9leHQgJiYgL15cd3syLDV9JC8udGVzdChfZXh0KSkgewogICAgICAgICAgICBleHQgPSAiLiIgKyBfZXh0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGV4dCA9IHVybC5tYXRjaCgvKFwuXHd7Miw1fSkoXD98QHwkKS8pOwogICAgICAgICAgICBpZiAoZXh0KSB7CiAgICAgICAgICAgICAgICBleHQgPSBleHRbMV07CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgIG5hbWUgPSAobmFtZSB8fCBuYW1lRnJvbVVybCB8fCAiaW1hZ2UiKS5zdWJzdHIoLTIwMCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgbmFtZSA9IChuYW1lRnJvbVVybCB8fCB1cmwgfHwgImltYWdlIikuc3Vic3RyKC0yMDApOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGlmIChuYW1lRnJvbVVybCAmJiAhbmFtZSkgewogICAgICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lRnJvbVVybC5zdWJzdHIoLTIwMCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5hbWVGcm9tVXJsICYmIG5hbWUpIHsKICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZUZyb21Vcmwuc3Vic3RyKC0yMDApICsgIiAtICIgKyBuYW1lLnN1YnN0cigtMjAwKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIW5hbWVGcm9tVXJsICYmICFuYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgbmFtZSA9ICJpbWFnZSI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIG5hbWUgPSAobmFtZUZyb21VcmwgfHwgbmFtZSB8fCAiaW1hZ2UiKS5zdWJzdHIoLTIwMCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5hbWUucmVwbGFjZSgvLio/XC8oW15cL1w/XSs/KShcP3xAfCQpLiovLCAiJDEiKS5yZXBsYWNlKC9bXCpcLzo8Plw/XFxcfF0vZywgIiIpLnJlcGxhY2UoL1wuXHd7Miw1fSQvLCAiIikudHJpbSgpICsgKGV4dCB8fCAiLnBuZyIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNhbm9uaWNhbFVyaShzcmMsIGhyZWYsIGJhc2VQYXRoKSB7CiAgICAgICAgaWYgKCFzcmMpIHsKICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIH0KICAgICAgICBpZiAoIWhyZWYpIGhyZWYgPSBsb2NhdGlvbi5ocmVmOwogICAgICAgIGxldCBwcm90b2NvbCA9IGhyZWYubWF0Y2goL15odHRwcz86Lyk7CiAgICAgICAgcHJvdG9jb2wgPSBwcm90b2NvbCA/IHByb3RvY29sWzBdIDogbG9jYXRpb24ucHJvdG9jb2w7CiAgICAgICAgbGV0IGhvc3QgPSBocmVmLm1hdGNoKC9eaHR0cHM/OlwvXC8oW15cL10rKS8pOwogICAgICAgIGhvc3QgPSBob3N0ID8gaG9zdFsxXSA6IGxvY2F0aW9uLmhvc3Q7CiAgICAgICAgaWYgKHNyYy5jaGFyQXQoMCkgPT09ICIjIikgcmV0dXJuIGhyZWYgKyBzcmM7CiAgICAgICAgaWYgKHNyYy5jaGFyQXQoMCkgPT09ICI/IikgcmV0dXJuIGhyZWYucmVwbGFjZSgvXihbXlw/I10rKS4qLywgIiQxIiArIHNyYyk7CiAgICAgICAgbGV0IG9yaWdpbiA9IHByb3RvY29sICsgJy8vJyArIGhvc3Q7CiAgICAgICAgbGV0IHVybCA9IGJhc2VQYXRoIHx8IGhyZWY7CiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoLyhcP3wjKS4qLywgIiIpOwogICAgICAgIGlmICgvaHR0cHM/OlwvXC9bXlwvXSskLy50ZXN0KHVybCkpIHVybCA9IHVybCArICcvJzsKICAgICAgICBpZiAodXJsLmluZGV4T2YoImh0dHAiKSAhPT0gMCkgdXJsID0gb3JpZ2luICsgdXJsOwogICAgICAgIHZhciByb290X3BhZ2UgPSAvXlteXD8jXSpcLy8uZXhlYyh1cmwpWzBdLAogICAgICAgICAgICByb290X2RvbWFpbiA9IC9eXHcrXDpcL1wvXC8/W15cL10rLy5leGVjKHJvb3RfcGFnZSlbMF0sCiAgICAgICAgICAgIGFic29sdXRlX3JlZ2V4ID0gL15cdytcOlwvXC8vOwogICAgICAgIHdoaWxlIChzcmMuaW5kZXhPZigiLi4vIikgPT09IDApIHsKICAgICAgICAgICAgc3JjID0gc3JjLnN1YnN0cigzKTsKICAgICAgICAgICAgcm9vdF9wYWdlID0gcm9vdF9wYWdlLnJlcGxhY2UoL1wvW15cL10rXC8kLywgIi8iKTsKICAgICAgICB9CiAgICAgICAgc3JjID0gc3JjLnJlcGxhY2UoL1wuXC8vLCAiIik7CiAgICAgICAgaWYgKC9eXC9cL1wvPy8udGVzdChzcmMpKSB7CiAgICAgICAgICAgIHNyYyA9IHByb3RvY29sICsgc3JjOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKGFic29sdXRlX3JlZ2V4LnRlc3Qoc3JjKSA/IHNyYyA6ICgoc3JjLmNoYXJBdCgwKSA9PT0gIi8iID8gcm9vdF9kb21haW4gOiByb290X3BhZ2UpICsgc3JjKSk7CiAgICB9CgogICAgdmFyIF9HTV9kb3dubG9hZCA9ICh0eXBlb2YgR01fZG93bmxvYWQgPT0gJ3VuZGVmaW5lZCcpID8gKHVybCwgbmFtZSwgdHlwZSkgPT4gewogICAgICAgIHVybCA9IGNhbm9uaWNhbFVyaSh1cmwpOwogICAgICAgIHVybFRvQmxvYih1cmwsIChibG9iLCBleHQpID0+IHsKICAgICAgICAgICAgaWYoYmxvYil7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHNhdmVBcyhibG9iLCBkb2N1bWVudC50aXRsZS5yZXBsYWNlKC9bXCpcLzo8Plw/XFxcfF0vZywgIiIpICsgIiAtICIgKyBnZXRSaWdodFNhdmVOYW1lKHVybCwgbmFtZSwgdHlwZSwgZXh0KSk7CiAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSA6ICh1cmwsIG5hbWUsIHR5cGUpID0+IHsKICAgICAgICB1cmwgPSBjYW5vbmljYWxVcmkodXJsKTsKICAgICAgICBuYW1lID0gZG9jdW1lbnQudGl0bGUucmVwbGFjZSgvW1wqXC86PD5cP1xcXHxdL2csICIiKSArICIgLSAiICsgZ2V0UmlnaHRTYXZlTmFtZSh1cmwsIG5hbWUsIHR5cGUpOwogICAgICAgIGxldCB1cmxTcGxpdCA9IFsiIiwgIiJdOwogICAgICAgIGlmICh1cmwuc3BsaXQpIHsKICAgICAgICAgICAgdXJsU3BsaXQgPSB1cmwuc3BsaXQoIi8iKTsKICAgICAgICB9CiAgICAgICAgR01fZG93bmxvYWQoewogICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgICAgaGVhZGVyczogW3sKICAgICAgICAgICAgICAgIG9yaWdpbjogdXJsU3BsaXRbMF0rIi8vIit1cmxTcGxpdFsyXSwKICAgICAgICAgICAgICAgIHJlZmVyZXI6IHVybCwKICAgICAgICAgICAgICAgIGFjY2VwdDogIiovKiIKICAgICAgICAgICAgfV0sCiAgICAgICAgICAgIG9uZXJyb3I6IGUgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9udGltZW91dDogZSA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgfQogICAgICAgIH0pCiAgICB9OwogICAgZnVuY3Rpb24gZGF0YVVSTFRvQ2FudmFzKGRhdGF1cmwsIGNiKXsKICAgICAgICBpZighZGF0YXVybClyZXR1cm4gY2IobnVsbCk7CiAgICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTsKICAgICAgICBpbWcuc2V0QXR0cmlidXRlKCJjcm9zc09yaWdpbiIsImFub255bW91cyIpOwogICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpewogICAgICAgICAgICBjYW52YXMud2lkdGggPSBpbWcud2lkdGg7CiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWcuaGVpZ2h0OwogICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTsKICAgICAgICAgICAgY2IoY2FudmFzKTsKICAgICAgICB9OwogICAgICAgIGltZy5vbmVycm9yID0gZnVuY3Rpb24oKXsKICAgICAgICAgICAgY2IobnVsbCk7CiAgICAgICAgfTsKICAgICAgICBpbWcuc3JjID0gZGF0YXVybDsKICAgIH0KICAgIGZ1bmN0aW9uIHVybFRvQmxvYldpdGhGZXRjaCh1cmxTdHJpbmcsIGNiKXsKICAgICAgICBmZXRjaCh1cmxTdHJpbmcpLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuYmxvYigpKS50aGVuKGJsb2IgPT4gewogICAgICAgICAgICBsZXQgZXh0ID0gYmxvYi50eXBlLnJlcGxhY2UoLy4qaW1hZ2VcLyhbXHdcLV0rKS4qLywgIiQxIik7CiAgICAgICAgICAgIGlmIChleHQgPT09ICJ0ZXh0L2h0bWwiICYmIChibG9iLnNpemUgfHwgMCkgPCAxMDAwKSByZXR1cm4gY2IobnVsbCwgJycpOwogICAgICAgICAgICBpZiAoZXh0ID09PSAibm9uZSIpIGV4dCA9ICJ3ZWJwIjsKICAgICAgICAgICAgbGV0IGNvbnZlcnNpb24gPSBmb3JtYXREaWN0LmdldChleHQpOwogICAgICAgICAgICBpZiAoY2FudmFzICYmIGNvbnZlcnNpb24pIHsKICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAgICAgICAgIHZhciBhID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgICAgIGEucmVhZEFzRGF0YVVSTChibG9iKTsKICAgICAgICAgICAgICAgIGEub25sb2FkID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICBkYXRhVVJMVG9DYW52YXMoZS50YXJnZXQucmVzdWx0LCBjYW52YXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMudG9CbG9iKG5ibG9iID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmJsb2IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYihibG9iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IobmJsb2IsIGNvbnZlcnNpb24gfHwgInBuZyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LCAiaW1hZ2UvIiArIChjb252ZXJzaW9uIHx8ICJwbmciKSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgYS5vbmVycm9yID0gZnVuY3Rpb24gKGUpewogICAgICAgICAgICAgICAgICAgIGNiKGJsb2IpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY2IoYmxvYik7CiAgICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgIGNiKG51bGwpOwogICAgICAgIH0pOwogICAgfQogICAgZnVuY3Rpb24gbG9hZFZpZGVvSnNMaWJyYXJ5KCkgewogICAgICAgIGlmICghd2luZG93LnZpZGVvSnNTdGF0dXMpIHsKICAgICAgICAgICAgd2luZG93LnZpZGVvSnNTdGF0dXMgPSAnbm9uZSc7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgICAgICBpZiAod2luZG93LnZpZGVvSnNTdGF0dXMgPT09ICdsb2FkZWQnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAod2luZG93LnZpZGVvSnNTdGF0dXMgPT09ICdsb2FkaW5nJykgewogICAgICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy52aWRlb0pzU3RhdHVzID09PSAnbG9hZGVkJykgewogICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAod2luZG93LnZpZGVvSnNTdGF0dXMgPT09ICdmYWlsZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdQcmV2aW91cyBWaWRlby5qcyBsb2FkaW5nIGF0dGVtcHQgZmFpbGVkLicpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB3aW5kb3cudmlkZW9Kc1N0YXR1cyA9ICdsb2FkaW5nJzsKCiAgICAgICAgICAgIGNvbnN0IGNzc1NvdXJjZXMgPSBbCiAgICAgICAgICAgICAgICAiaHR0cHM6Ly92anMuemVuY2RuLm5ldC84LjIzLjMvdmlkZW8tanMubWluLmNzcyIsCiAgICAgICAgICAgICAgICAiaHR0cHM6Ly91bnBrZy5jb20vdmlkZW8uanMvZGlzdC92aWRlby1qcy5taW4uY3NzIiwKICAgICAgICAgICAgICAgICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL3ZpZGVvLmpzQDguMjMuMy9kaXN0L3ZpZGVvLWpzLm1pbi5jc3MiCiAgICAgICAgICAgIF07CiAgICAgICAgICAgIGNvbnN0IGpzU291cmNlcyA9IFsKICAgICAgICAgICAgICAgICJodHRwczovL3Zqcy56ZW5jZG4ubmV0LzguMjMuMy92aWRlby5taW4uanMiLAogICAgICAgICAgICAgICAgImh0dHBzOi8vdW5wa2cuY29tL3ZpZGVvLmpzL2Rpc3QvdmlkZW8ubWluLmpzIiwKICAgICAgICAgICAgICAgICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL3ZpZGVvLmpzQDguMjMuMy9kaXN0L3ZpZGVvLm1pbi5qcyIKICAgICAgICAgICAgXTsKICAgICAgICAgICAgY29uc3QgZmV0Y2hXaXRoRmFsbGJhY2sgPSAodXJscykgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdEVycm9yID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICBjb25zdCB1cmxzVG9UcnkgPSBbLi4udXJsc107CgogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyeU5leHQgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cmxzVG9UcnkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCByZXNvdXJjZSBhZnRlciB0cnlpbmcgYWxsIHNvdXJjZXMuIExhc3QgZXJyb3I6ICR7bGFzdEVycm9yfWApKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXJsID0gdXJsc1RvVHJ5LnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB4aHIub3BlbignR0VUJywgdXJsKTsKICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm9ubG9hZCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHhoci5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0RXJyb3IgPSBgU3RhdHVzICR7eGhyLnN0YXR1c30gZnJvbSAke3VybH1gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGxvYWQgJHt1cmx9LCB0cnlpbmcgbmV4dCBzb3VyY2UuLi5gKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnlOZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHhoci5vbmVycm9yID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEVycm9yID0gYE5ldHdvcmsgZXJyb3IgZnJvbSAke3VybH1gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gbG9hZCAke3VybH0sIHRyeWluZyBuZXh0IHNvdXJjZS4uLmApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5TmV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZCgpOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHRyeU5leHQoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwogICAgICAgICAgICBjb25zdCBwQ1NTID0gZmV0Y2hXaXRoRmFsbGJhY2soY3NzU291cmNlcykudGhlbihjc3NDb250ZW50ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgICAgICAgICAgICBzdHlsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBjc3NDb250ZW50OwogICAgICAgICAgICAgICAgc3R5bGVFbGVtZW50LmlkID0gJ2ltYWd1cy12aWRlb2pzLXN0eWxlcyc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zdCBwSlMgPSBmZXRjaFdpdGhGYWxsYmFjayhqc1NvdXJjZXMpLnRoZW4oanNDb250ZW50ID0+IHsKICAgICAgICAgICAgICAgIEZ1bmN0aW9uKGpzQ29udGVudCkoKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBQcm9taXNlLmFsbChbcENTUywgcEpTXSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICB3aW5kb3cudmlkZW9Kc1N0YXR1cyA9ICdsb2FkZWQnOwogICAgICAgICAgICAgICAgY29uc29sZS50aW1lRW5kKCdMb2FkIFZpZGVvLmpzJyk7CiAgICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgIHdpbmRvdy52aWRlb0pzU3RhdHVzID0gJ2ZhaWxlZCc7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBWaWRlby5qcyBmcm9tIGFsbCBhdmFpbGFibGUgc291cmNlcy4nLCBlcnJvcik7CiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0KICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRWaWRlb2pzKG1lZGlhLCBpbWdTcmMpIHsKICAgICAgICBhd2FpdCBsb2FkVmlkZW9Kc0xpYnJhcnkoKTsKICAgICAgICBjb25zdCB2aWRlb09wdGlvbnMgPSB7CiAgICAgICAgICAgIGF1dG9wbGF5OiB0cnVlCiAgICAgICAgfTsKICAgICAgICBtZWRpYS5jbGFzc05hbWUgPSAidmlkZW8tanMgdmpzLWRlZmF1bHQtc2tpbiB2anMtZmx1aWQiOwogICAgICAgIG1lZGlhLndpZHRoID0gMTkyMDsKICAgICAgICBtZWRpYS5oZWlnaHQgPSAxMDgwOwogICAgICAgIGNvbnN0IHBsYXllciA9IHZpZGVvanMobWVkaWEsIHZpZGVvT3B0aW9ucyk7CiAgICAgICAgcGxheWVyLm9uKCdsb2FkZWRtZXRhZGF0YScsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICBjb25zdCB2aHMgPSBwbGF5ZXIudGVjaCh7IElXaWxsTm90VXNlVGhpc0luUGx1Z2luczogdHJ1ZSB9KS52aHM7CiAgICAgICAgICAgIGlmICghdmhzKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1ZIUyBlbmdpbmUgbm90IGZvdW5kLicpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IHJlcHJlc2VudGF0aW9ucyA9IHZocy5yZXByZXNlbnRhdGlvbnMoKTsKICAgICAgICAgICAgaWYgKCFyZXByZXNlbnRhdGlvbnMgfHwgcmVwcmVzZW50YXRpb25zLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBoaWdoZXN0QmFuZHdpZHRoID0gMDsKICAgICAgICAgICAgbGV0IGhpZ2hlc3RSZXByZXNlbnRhdGlvbiA9IG51bGw7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVwcmVzZW50YXRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCByZXByZXNlbnRhdGlvbiA9IHJlcHJlc2VudGF0aW9uc1tpXTsKICAgICAgICAgICAgICAgIGlmIChyZXByZXNlbnRhdGlvbi5iYW5kd2lkdGggPiBoaWdoZXN0QmFuZHdpZHRoKSB7CiAgICAgICAgICAgICAgICAgICAgaGlnaGVzdEJhbmR3aWR0aCA9IHJlcHJlc2VudGF0aW9uLmJhbmR3aWR0aDsKICAgICAgICAgICAgICAgICAgICBoaWdoZXN0UmVwcmVzZW50YXRpb24gPSByZXByZXNlbnRhdGlvbjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaGlnaGVzdFJlcHJlc2VudGF0aW9uKSB7CiAgICAgICAgICAgICAgICByZXByZXNlbnRhdGlvbnMuZm9yRWFjaChyZXByZXNlbnRhdGlvbiA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVwcmVzZW50YXRpb24uZW5hYmxlZChyZXByZXNlbnRhdGlvbi5pZCA9PT0gaGlnaGVzdFJlcHJlc2VudGF0aW9uLmlkKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsV2lkdGggPSBoaWdoZXN0UmVwcmVzZW50YXRpb24gPyBoaWdoZXN0UmVwcmVzZW50YXRpb24ud2lkdGggOiBwbGF5ZXIudmlkZW9XaWR0aCgpOwogICAgICAgICAgICBjb25zdCBvcmlnaW5hbEhlaWdodCA9IGhpZ2hlc3RSZXByZXNlbnRhdGlvbiA/IGhpZ2hlc3RSZXByZXNlbnRhdGlvbi5oZWlnaHQgOiBwbGF5ZXIudmlkZW9IZWlnaHQoKTsKICAgICAgICAgICAgdGhpcy5hZGRDbGFzcygndmpzLWhhcy1zdGFydGVkJyk7CiAgICAgICAgICAgIG1lZGlhLm5hdHVyYWxXaWR0aCA9IG9yaWdpbmFsV2lkdGg7CiAgICAgICAgICAgIG1lZGlhLm5hdHVyYWxIZWlnaHQgPSBvcmlnaW5hbEhlaWdodDsKICAgICAgICAgICAgbWVkaWEub25sb2FkKCk7CiAgICAgICAgfSk7CiAgICAgICAgcGxheWVyLnNyYyh7CiAgICAgICAgICAgIHNyYzogaW1nU3JjLAogICAgICAgICAgICBmbHVpZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ2FwcGxpY2F0aW9uL3gtbXBlZ1VSTCcKICAgICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIGdldENvb2tpZShjbmFtZSkgewogICAgICAgIGxldCBuYW1lID0gY25hbWUgKyAiPSI7CiAgICAgICAgdmFyIGNhID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7CiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGNhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGxldCBjID0gY2FbaV07CiAgICAgICAgICAgIHdoaWxlIChjLmNoYXJBdCgwKT09JyAnKSBjID0gYy5zdWJzdHJpbmcoMSk7CiAgICAgICAgICAgIGlmIChjLmluZGV4T2YobmFtZSkgPT0gMCkKICAgICAgICAgICAgICAgIHJldHVybiBjLnN1YnN0cmluZyhuYW1lLmxlbmd0aCxjLmxlbmd0aCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAiIjsKICAgIH0KICAgIHZhciBjb29raWU7CiAgICBmdW5jdGlvbiB1cmxUb0Jsb2IodXJsLCBjYiwgZm9yY2VQbmcsIHRyeVRpbWVzID0gMCkgewogICAgICAgIHRyeVRpbWVzKys7CiAgICAgICAgaWYgKHRyeVRpbWVzID4gMykgewogICAgICAgICAgICByZXR1cm4gY2IobnVsbCwgJycpOwogICAgICAgIH0KICAgICAgICBfR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICB1cmw6IHVybC50cmltKCksCiAgICAgICAgICAgIHJlc3BvbnNlVHlwZTonYmxvYicsCiAgICAgICAgICAgIHRpbWVvdXQ6MjAwMDAsCiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIG9yaWdpbjogbG9jYXRpb24ub3JpZ2luLAogICAgICAgICAgICAgICAgcmVmZXJlcjogbG9jYXRpb24uaHJlZiwKICAgICAgICAgICAgICAgIGFjY2VwdDogIiovKiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29va2llOiBjb29raWUsCiAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgICAgbGV0IGJsb2IgPSBkLnJlc3BvbnNlOwogICAgICAgICAgICAgICAgaWYgKCFibG9iLnR5cGUpIHJldHVybiB1cmxUb0Jsb2IodXJsLCBjYiwgZm9yY2VQbmcsIHRyeVRpbWVzKTsKICAgICAgICAgICAgICAgIGxldCBleHQgPSBibG9iLnR5cGUucmVwbGFjZSgvLippbWFnZVwvKFtcd1wtXSspLiovLCAiJDEiKTsKICAgICAgICAgICAgICAgIGlmIChleHQgPT09ICJ0ZXh0L2h0bWwiICYmIChibG9iLnNpemUgfHwgMCkgPCAxMDAwKSByZXR1cm4gY2IobnVsbCwgJycpOwogICAgICAgICAgICAgICAgaWYgKGV4dCA9PT0gIm5vbmUiKSBleHQgPSAid2VicCI7CiAgICAgICAgICAgICAgICBsZXQgY29udmVyc2lvbiA9IGZvcm1hdERpY3QuZ2V0KGV4dCk7CiAgICAgICAgICAgICAgICBpZiAoY2FudmFzICYmIChjb252ZXJzaW9uIHx8IGZvcmNlUG5nKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgYS5yZWFkQXNEYXRhVVJMKGJsb2IpOwogICAgICAgICAgICAgICAgICAgIGEub25sb2FkID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVVSTFRvQ2FudmFzKGUudGFyZ2V0LnJlc3VsdCwgY2FudmFzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy50b0Jsb2IobmJsb2IgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmJsb2IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IoYmxvYiwgZXh0IHx8ICJwbmciKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYihuYmxvYiwgY29udmVyc2lvbiB8fCAicG5nIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgImltYWdlLyIgKyAoY29udmVyc2lvbiB8fCAicG5nIikpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGEub25lcnJvciA9IGZ1bmN0aW9uIChlKXsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsVG9CbG9iKHVybCwgY2IsIGZvcmNlUG5nLCB0cnlUaW1lcyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICghYmxvYiB8fCAhYmxvYi5zaXplKSB7CiAgICAgICAgICAgICAgICAgICAgdXJsVG9CbG9iKHVybCwgY2IsIGZvcmNlUG5nLCB0cnlUaW1lcyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNiKGJsb2IsIGV4dCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB1cmxUb0Jsb2IodXJsLCBjYiwgZm9yY2VQbmcsIHRyeVRpbWVzKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb250aW1lb3V0OiBmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdXJsVG9CbG9iKHVybCwgY2IsIGZvcmNlUG5nLCB0cnlUaW1lcyk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KICAgIHZhciBwcmVmczsKICAgIHZhciBlc2NhcGVIVE1MUG9saWN5OwogICAgaWYgKHVuc2FmZVdpbmRvdy50cnVzdGVkVHlwZXMgJiYgdW5zYWZlV2luZG93LnRydXN0ZWRUeXBlcy5jcmVhdGVQb2xpY3kpIHsKICAgICAgICBlc2NhcGVIVE1MUG9saWN5PXVuc2FmZVdpbmRvdy50cnVzdGVkVHlwZXMuY3JlYXRlUG9saWN5KCdwdmNlcF9kZWZhdWx0JywgewogICAgICAgICAgICBjcmVhdGVIVE1MOiAoc3RyaW5nLCBzaW5rKSA9PiBzdHJpbmcsCiAgICAgICAgICAgIGNyZWF0ZVNjcmlwdFVSTDogc3RyaW5nID0+IHN0cmluZywKICAgICAgICAgICAgY3JlYXRlU2NyaXB0OiBzdHJpbmcgPT4gc3RyaW5nCiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Qm9keShkb2MpewogICAgICAgIHJldHVybiBkb2MuYm9keSB8fCBkb2MucXVlcnlTZWxlY3RvcignYm9keScpIHx8IGRvYzsKICAgIH0KICAgIGZ1bmN0aW9uIGNyZWF0ZUhUTUwoaHRtbCl7CiAgICAgICAgcmV0dXJuIGVzY2FwZUhUTUxQb2xpY3k/ZXNjYXBlSFRNTFBvbGljeS5jcmVhdGVIVE1MKGh0bWwpOmh0bWw7CiAgICB9CiAgICBmdW5jdGlvbiBjcmVhdGVTY3JpcHRVUkwoaHRtbCl7CiAgICAgICAgcmV0dXJuIGVzY2FwZUhUTUxQb2xpY3k/ZXNjYXBlSFRNTFBvbGljeS5jcmVhdGVTY3JpcHRVUkwoaHRtbCk6aHRtbDsKICAgIH0KICAgIGZ1bmN0aW9uIGNyZWF0ZVNjcmlwdChodG1sKXsKICAgICAgICByZXR1cm4gZXNjYXBlSFRNTFBvbGljeT9lc2NhcGVIVE1MUG9saWN5LmNyZWF0ZVNjcmlwdChodG1sKTpodG1sOwogICAgfQogICAgYXN5bmMgZnVuY3Rpb24gaW5pdCh0b3BPYmplY3Qsd2luZG93LGRvY3VtZW50LGFycmF5Rm4sZW52aXIsc3RvcmFnZSx1bnNhZmVXaW5kb3cpewogICAgICAgIC8vIOm7mOiupOiuvue9ru+8jOivt+WIsOiuvue9rueVjOmdouS/ruaUuQogICAgICAgIHByZWZzPXsKICAgICAgICAgICAgZmxvYXRCYXI6ey8v5rWu5Yqo5bel5YW35qCP55u45YWz6K6+572uLgogICAgICAgICAgICAgICAgYnV0b25PcmRlcjpbJ2FjdHVhbCcsJ2N1cnJlbnQnLCdnYWxsZXJ5JywnbWFnbmlmaWVyJywnZG93bmxvYWQnXSwvL+aMiemSruaOkuWIl+mhuuW6jydhY3R1YWwnKOWunumZheeahOWbvueJhyksJ2N1cnJlbnQnKOW9k+WJjeaYvuekuueahOWbvueJhyksJ21hZ25pZmllcico5pS+5aSn6ZWc6KeC5a+fKSwnZ2FsbGVyeSco5Zu+6ZuGKSwnc2VhcmNoJyjmkJzntKLljp/lm74pCiAgICAgICAgICAgICAgICBhZGRpdGlvbmFsRmVhdHVyZTogJ29wZW4nLAogICAgICAgICAgICAgICAgaW52ZXJ0QWRkaXRpb25hbEZlYXR1cmU6IGZhbHNlLAogICAgICAgICAgICAgICAgbGlzdGVuQmc6dHJ1ZSwvL+ebkeWQrOiDjOaZr+WbvgogICAgICAgICAgICAgICAgc2hvd0RlbGF5OjEwMCwvL+a1ruWKqOW3peWFt+agj+aYvuekuuW7tuaXti7ljZXkvY0o5q+r56eSKQogICAgICAgICAgICAgICAgaGlkZURlbGF5OjU2NiwvL+a1ruWKqOW3peWFt+agj+makOiXj+W7tuaXti7ljZXkvY0o5q+r56eSKQogICAgICAgICAgICAgICAgcG9zaXRpb246J3RvcCBsZWZ0JywvLyDlj5blgLzkuLo6ICd0b3AgbGVmdCco5Zu+54mH5bem5LiK6KeSKSDmiJbogIUgJ3RvcCByaWdodCco5Zu+54mH5Y+z5LiK6KeSKSAnYm90dG9tIHJpZ2h0Jyjlm77niYflj7PkuIvop5IpICdib3R0b20gbGVmdCco5Zu+54mH5bem5LiL6KeSKTsKICAgICAgICAgICAgICAgIHN0YXlPdXQ6ZmFsc2UsCiAgICAgICAgICAgICAgICBzdGF5T3V0T2Zmc2V0WDowLAogICAgICAgICAgICAgICAgc3RheU91dE9mZnNldFk6MCwKICAgICAgICAgICAgICAgIGRvd25sb2FkMmNvcHk6ZmFsc2UsLy/lup/lvIMKICAgICAgICAgICAgICAgIG9mZnNldDp7Ly/mta7liqjlt6XlhbfmoI/lgY/np7su5Y2V5L2NKOWDj+e0oCkKICAgICAgICAgICAgICAgICAgICB4Oi0xNSwvL3jovbTlgY/np7so5q2j5YC8LOWQkeWPs+WBj+enuyzotJ/lgLzlkJHlt6YpCiAgICAgICAgICAgICAgICAgICAgeTotMTUsLy956L205YGP56e7KOato+WAvCzlkJHkuIss6LSf5YC85ZCR5LiKKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGZvcmNlU2hvdzp7Ly/lnKjmsqHmnInooqvnvKnmlL7nmoTlm77niYfkuIos5L2G5piv5aSn5bCP6LaF6L+H5LiL6Z2i6K6+5a6a55qE5bC65a+45pe2LOW8uuWItuaYvuekuua1ruWKqOahhi4KICAgICAgICAgICAgICAgICAgICBlbmFibGVkOnRydWUsLy/lkK/nlKjlvLrliLbmmL7npLouCiAgICAgICAgICAgICAgICAgICAgc2l6ZTp7Ly/lm77niYflsLrlr7gu5Y2V5L2NKOWDj+e0oCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHc6MTAwLAogICAgICAgICAgICAgICAgICAgICAgICBoOjEwMCwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNob3dXaXRoUnVsZXM6dHJ1ZSwKICAgICAgICAgICAgICAgIG1pblNpemVMaW1pdDp7Ly/lsLHnrpfmmK/lm77niYfooqvnvKnmlL7kuoYo55yL5Yiw55qE5Zu+54mH6KKr6K6+5a6a5LqGd2lkdGjmiJbogIVoZWlnaHTpmZDlrprkuoblpKflsI8s6L+Z56eN5oOF5Ya15LiLKSzlpoLmnpzlm77niYfmmL7npLrlpKflsI/lsI/kuo7orr7lrprlgLws6YKj5LmI5Lmf5LiN5pi+56S65rWu5Yqo5bel5YW35qCPLgogICAgICAgICAgICAgICAgICAgIHc6NTAsCiAgICAgICAgICAgICAgICAgICAgaDo1MCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzaXplTGltaXRPcjpmYWxzZSwKCiAgICAgICAgICAgICAgICBrZXlzOiB7CiAgICAgICAgICAgICAgICAgICAgZW5hYmxlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBhY3R1YWw6ICdhJywgLy8gIOW9k+WHuueOsOaCrOa1ruadoeaXtuaMieS4iyBgYWAg5omT5byA5Y6f5Zu+CiAgICAgICAgICAgICAgICAgICAgc2VhcmNoOiAncycsCiAgICAgICAgICAgICAgICAgICAgY3VycmVudDogJ2MnLAogICAgICAgICAgICAgICAgICAgIG1hZ25pZmllcjogJ20nLAogICAgICAgICAgICAgICAgICAgIGdhbGxlcnk6ICdnJywKICAgICAgICAgICAgICAgICAgICBkb3dubG9hZDogJ2QnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZ2xvYmFsa2V5czogewogICAgICAgICAgICAgICAgICAgIGludmVydEluaXRTaG93OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBjdHJsOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGFsdDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgc2hpZnQ6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJob2xkIiwKICAgICAgICAgICAgICAgICAgICBjbG9zZUFmdGVyUHJldmlldzogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBwcmV2aWV3Rm9sbG93TW91c2U6IHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIG1hZ25pZmllcjp7Ly/mlL7lpKfplZznmoTorr7nva4uCiAgICAgICAgICAgICAgICByYWRpdXM6IDc3LC8v6buY6K6k5Y2K5b6ELuWNleS9jSjlg4/ntKApLgogICAgICAgICAgICAgICAgd2hlZWxab29tOnsvL+a7mui9rue8qeaUvi4KICAgICAgICAgICAgICAgICAgICBlbmFibGVkOnRydWUsCiAgICAgICAgICAgICAgICAgICAgcGF1c2VGaXJzdDp0cnVlLC8v6ZyA6KaB5pqC5YGcKOWNleWHu+aaguWBnCnlkI4s5omN6IO957yp5pS+LijmjqjojZAs5ZCm5YiZ5Zug5Li65pS+5aSn6ZWc5Lya6Lef552A6byg5qCHLOWmguaenOaUvuWkp+mVnOi/h+WkpyzpgqPkuYjkvJrlvbHlk43mu5rliqguKS4uCiAgICAgICAgICAgICAgICAgICAgc2NhbGVJbWFnZTp0cnVlLAogICAgICAgICAgICAgICAgICAgIGN0cmw6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGFsdDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgc2hpZnQ6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIG1ldGE6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIHJhbmdlOlswLjEsMC4yLDAuMywwLjQsMC41LDAuNiwwLjcsMC44LDAuOSwxLDEuMSwxLjIsMS4zLDEuNCwxLjUsMS43LDEuOSwyLDIuNSwzLjAsNC4wLDUuMCw2LjAsNy4wLDguMCw5LjBdLC8v57yp5pS+55qE6IyD5Zu0CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAoKICAgICAgICAgICAgZ2FsbGVyeTp7Ly/lm77lupPnm7jlhbPorr7lrpoKICAgICAgICAgICAgICAgIGxvYWRNb3JlOmZhbHNlLAogICAgICAgICAgICAgICAgbG9hZEFsbDp0cnVlLC8v5Yqg6L295pu05aSa5pe25piv5ZCm5Yqg6L295YWo6YOo6aG16Z2iCiAgICAgICAgICAgICAgICB2aWV3bW9yZUVuZGxlc3M6dHJ1ZSwKICAgICAgICAgICAgICAgIGZpdFRvU2NyZWVuOnRydWUsLy/lm77niYfpgILlupTlsY/luZUo6YCC5bqU5pa55byP5Li6Y29udGFpbu+8jOmdnmNvdmVyKS4KICAgICAgICAgICAgICAgIGZpdFRvU2NyZWVuU21hbGw6ZmFsc2UsCiAgICAgICAgICAgICAgICBzY3JvbGxFbmRUb0NoYW5nZTp0cnVlLAogICAgICAgICAgICAgICAgZXhwb3J0VHlwZTonZ3JpZCcsCiAgICAgICAgICAgICAgICBzaWRlYmFyUG9zaXRpb246ICdib3R0b20nLC8vJ3RvcCcgJ3JpZ2h0JyAnYm90dG9tJyAnbGVmdCcgIOWbm+S4quWPr+iDveWAvAogICAgICAgICAgICAgICAgc2lkZWJhclNpemU6IDEyMCwvL+S+p+agj+eahOmrmO+8iOWmguaenOaYr+awtOW5s+aUvue9ru+8ieaIluiAheWuve+8iOWmguaenOaYr+WeguebtOaUvue9ru+8iQogICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgyMCwyMCwyMCwwLjc1KScsCiAgICAgICAgICAgICAgICBmb3JtYXRDb252ZXJzaW9uOiAid2VicD5wbmciLAogICAgICAgICAgICAgICAgYXJpYTJIb3N0OiAiaHR0cDovL2xvY2FsaG9zdDo2ODAwIiwKICAgICAgICAgICAgICAgIGFyaWEyVG9rZW46ICIiLAogICAgICAgICAgICAgICAgc2lkZWJhclRvZ2dsZTogdHJ1ZSwgLy8g5piv5ZCm5pi+56S66ZqQ6JeP5oyJ6ZKuCiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOnRydWUsLy/lpKflm77niYfljLrnmoTliqjnlLvjgIIKICAgICAgICAgICAgICAgIHByZWxvYWQ6dHJ1ZSwvL+WvuemZhOi/keeahOWbvueJh+i/m+ihjOmihOivu+OAggogICAgICAgICAgICAgICAgbWF4OjMsLy/mnIDlpJrpooTor7vlpJrlsJHlvKDvvIjliY3lkI7lkITlpJrlsJHlvKDvvIkKCiAgICAgICAgICAgICAgICB6b29tcmVzaXplZDogMjUsIC8vIOWbvueJh+WwuuWvuOacgOWwkeebuOW3ruavlOS+i++8jOWNleS9je+8miUKICAgICAgICAgICAgICAgIHNjYWxlU21hbGxTaXplOiAyNTAsIC8vIOWbvuW6k+eahOaWsOexu+WIq++8jOe8qeaUvueahOWbvueJh++8jOWwuuWvuOeahOmrmOaIluWuvemDveWwj+S6juivpeWAvAogICAgICAgICAgICAgICAgc2hvd1NtYWxsU2l6ZTp0cnVlLC8v5piv5ZCm6buY6K6k5pi+56S65bCP5bC65a+45Zu+54mHCiAgICAgICAgICAgICAgICBkaXNhYmxlQXJyb3c6ZmFsc2UsCgogICAgICAgICAgICAgICAgc2Nyb2xsRW5kQW5kTG9hZDogdHJ1ZSwgLy8g5rua5Yqo5Li756qX5Y+j5Yiw5pyA5bqV6YOo77yM54S25ZCO6Ieq5Yqo6YeN6L295bqT55qE5Zu+54mH44CCCiAgICAgICAgICAgICAgICBzY3JvbGxFbmRBbmRMb2FkX251bTogNSwgLy8g5pyA5ZCO5Yeg5byg5Zu+54mH5omn6KGMCgogICAgICAgICAgICAgICAgYXV0b1pvb206IGZhbHNlLCAvLyDlpoLmnpzmnInmlL7lpKfvvIzliJnmiorlm77niYflj4ogc2lkZWJhciDpg6jliIbnmoTnvKnmlL7mlLnlm54gMTAwJe+8jOWinuWkp+WPr+inhumdouenr++8iOS7heWcqCBjaHJvbWUg5LiL5pyJ5pWI77yJCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbkxlbmd0aDogMzIsIC8vIOazqOmHiueahOacgOWkp+WuveW6pgogICAgICAgICAgICAgICAgZWRpdFNpdGU6ICIiLAogICAgICAgICAgICAgICAgZGVmYXVsdFNpemVMaW1pdDp7CiAgICAgICAgICAgICAgICAgICAgdzo4MCwKICAgICAgICAgICAgICAgICAgICBoOjgwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2VhcmNoRGF0YTpkZWZhdWx0U2VhcmNoRGF0YSwKICAgICAgICAgICAgICAgIGRvd25sb2FkV2l0aFppcDp0cnVlLAogICAgICAgICAgICAgICAgYXV0b09wZW5WaWV3bW9yZTpmYWxzZSwKICAgICAgICAgICAgICAgIGRvd25sb2FkR2FwOjEwMAogICAgICAgICAgICB9LAoKICAgICAgICAgICAgaW1nV2luZG93OnsvLyDlm77niYfnqpfnm7jlhbPorr7nva4KICAgICAgICAgICAgICAgIHN1aXRMb25nSW1nOiB0cnVlLAogICAgICAgICAgICAgICAgZml0VG9TY3JlZW46IHRydWUsLy/pgILlupTlsY/luZUs5bm25LiU5rC05bmz5Z6C55u05bGF5LitKOmAguW6lOaWueW8j+S4umNvbnRhaW7vvIzpnZ5jb3ZlcikuCiAgICAgICAgICAgICAgICBmaXRUb1NjcmVlblNtYWxsOiBmYWxzZSwKICAgICAgICAgICAgICAgIHN5bmNTZWxlY3RlZFRvb2w6dHJ1ZSwvL+WQjOatpeW9k+WJjemAieaLqeeahOW3peWFt++8jOWmguaenOW8gOS6huWkmuS4quWbvueJh+eql+WPo++8jOWFtuS4reS/ruaUueS4gOS4quS8muWPjeaYoOWIsOWFtuS7lueahOS4iumdouOAggogICAgICAgICAgICAgICAgZGVmYXVsdFRvb2w6J2hhbmQnLC8vImhhbmQiLCJyb3RhdGUiLCJ6b29tIjvmiZPlvIDnqpflj6PnmoTml7blgJnpu5jorqTpgInmi6nnmoTlt6XlhbcKICAgICAgICAgICAgICAgIGNsb3NlOnsvL+WFs+mXreeahOaWueW8jwogICAgICAgICAgICAgICAgICAgIGVzY0tleTp0cnVlLC8v5oyJZXNj6ZSuCiAgICAgICAgICAgICAgICAgICAgZGJsQ2xpY2tJbWdXaW5kb3c6IHRydWUsLy/lj4zlh7vlm77niYfnqpflj6MKICAgICAgICAgICAgICAgICAgICBjbGlja091dHNpZGU6JycsIC8vIOeCueWHu+WbvueJh+WklumDqOWFs+mXreOAguWAvOS4uicnfCdjbGljayd8J2RibGNsaWNrJ++8m+aXoOaIlueCueWHu+aIluWPjOWHuwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG92ZXJsYXllcjp7Ly8g6KaG55uW5bGCLgogICAgICAgICAgICAgICAgICAgIHNob3duOmZhbHNlLC8v5pi+56S6CiAgICAgICAgICAgICAgICAgICAgY29sb3I6J3JnYmEoMjAwLDIwMCwyMDAsMC4zKScsLy/popzoibLlkozkuI3pgI/mmI7luqborr7nva4uCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc3dpdGNoU3RvcmVMb2M6ZmFsc2UsCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6J3JnYmEoNDAsNDAsNDAsMC44KScsCiAgICAgICAgICAgICAgICBzaGlmdFJvdGF0ZVN0ZXA6MTUsLy8g5peL6L2s55qE5pe25YCZ77yM5oyJ5L2Pc2hpZnTplK7ml7Ys5peL6L2s55qE5q2l6L+bLuWNleS9jTrluqYuCiAgICAgICAgICAgICAgICB6b29tOnsvL+a7mui9rue8qeaUvgogICAgICAgICAgICAgICAgICAgIHJhbmdlOlswLjEsMC4yLDAuMywwLjQsMC41LDAuNiwwLjcsMC44LDAuOSwxLDEuMSwxLjIsMS4zLDEuNCwxLjUsMS43LDEuOSwyLDIuNSwzLjAsNC4wLDUuMCw2LjAsNy4wLDguMCw5LjBdLC8v57yp5pS+5q+U5L6LLijkuI3opoHlh7rnjrDotJ/mlbAs6LCi6LCiLV8tIX4pCiAgICAgICAgICAgICAgICAgICAgbW91c2VXaGVlbFpvb206dHJ1ZSwvL+aYr+WQpuWFgeiuuOS9v+eUqOa7mui9rue8qeaUvuOAggogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHpJbmRleDogMjE0NzQ4MzY0NiwKICAgICAgICAgICAgICAgIGZpeGVkOiBmYWxzZQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy/nrYnlm77niYflrozlhajovb3lhaXlkI4s5omN5byA5aeL5omn6KGM5by55Ye6LOaUvuWkp+etieetieaTjeS9nCwKICAgICAgICAgICAgLy/mjInkvY9jdHJs6ZSu55qE5pe25YCZLOWPr+S7peS4tOaXtuaJp+ihjOWSjOi/meS4quiuvuWumuebuOWPjeeahOiuvuWumi4KICAgICAgICAgICAgd2FpdEltZ0xvYWQ6IGZhbHNlLAoKICAgICAgICAgICAgLy/moYbmnrbph4zpnaLnmoTlm77niYflnKjpobblsYLnqpflj6PlsZXnpLrlh7rmnaXvvIzkvYbmmK/lvZNmcmFtZeS4jumhtuWxgueql+WPo2RvbWFpbuS4jeS4gOagt+eahOaXtuWAme+8jOWPr+iDveWvvOiHtOWbvueJh+iiq+WPjeebl+mTvuaLpuaIqu+8jAogICAgICAgICAgICAvL+aMieS9j3NoaWZ06ZSu77yM5Y+v5Lul5Li05pe25omn6KGM5ZKM6L+Z5Liq6K6+5a6a55u45Y+N55qE6K6+5a6aCiAgICAgICAgICAgIGZyYW1lc1BpY09wZW5JblRvcFdpbmRvdzogdHJ1ZSwKCiAgICAgICAgICAgIGRlYnVnOiBmYWxzZSwKICAgICAgICAgICAgY3VzdG9tTGFuZzonYXV0bycsCiAgICAgICAgICAgIGN1c3RvbVJ1bGVzOmBbCiAgICB7CiAgICAgICAgIm5hbWUiOiAiRXhhbXBsZSwgY2FuIGJlIGRlbGV0ZWQgc2FmZWx5IiwKICAgICAgICAidXJsIjogIl5odHRwczovL3h4eFxcXFwuY29tIiwKICAgICAgICAic3JjIjogIi9hdmF0YXIvaSIsCiAgICAgICAgInIiOiAiL1xcXFw/LiokL2kiLAogICAgICAgICJzIjogIiIKICAgIH0KXWAsCiAgICAgICAgICAgIGZpcnN0RW5naW5lOiJUaW5leWUiCiAgICAgICAgfTsKCiAgICAgICAgdmFyIG1hdGNoZWRSdWxlLAogICAgICAgICAgICBfVVJMPWxvY2F0aW9uLmhyZWYubGVuZ3RoID4gNTEwID8gbG9jYXRpb24uaHJlZi5zbGljZSgwLCA1MDApICsgbG9jYXRpb24uaHJlZi5zbGljZSgtMTApIDogbG9jYXRpb24uaHJlZi5zbGljZSgwLCA1MDApOwogICAgICAgIGNvbnN0IGxhenlJbWdBdHRyID0gWyJkYXRhLWxhenktc3JjIiwgIm9yZ19zcmMiLCAiZGF0YS1sYXp5IiwgImRhdGEtdXJsIiwgImRhdGEtb3JpZy1maWxlIiwgInpvb21maWxlIiwgImZpbGUiLCAib3JpZ2luYWwiLCAibG9hZC1zcmMiLCAiaW1nc3JjIiwgInJlYWxfc3JjIiwgInNyYzIiLCAib3JpZ2luLXNyYyIsICJkYXRhLWxhenlsb2FkIiwgImRhdGEtbGF6eWxvYWQtc3JjIiwgImRhdGEtbGF6eS1sb2FkLXNyYyIsICJkYXRhLWtzLWxhenlsb2FkIiwgImRhdGEta3MtbGF6eWxvYWQtY3VzdG9tIiwgImRhdGEtZGVmZXItc3JjIiwgImRhdGEtYWN0dWFsc3JjIiwgImRhdGEtb3JpZ2luYWwiLCAiZGF0YS1vcmlnaW4tc3JjIiwgImRhdGEtaW1hZ2V1cmwiLCAibGF6eXNyYyIsICJkYXRhLXNyYyIsICJkYXRhLXByZXZpZXciLCAiZGF0YS1jb3ZlciIsICJkYXRhLXBhZ2UtaW1hZ2UtdXJsIiwgImRhdGEtdGh1bWIiLCAiZGF0YS1wbGFjZWhvbGRlciJdOwogICAgICAgIHZhciB0cHJ1bGVzID0gWwogICAgICAgICAgICBmdW5jdGlvbihhKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50U3JjICYmICF0aGlzLnNyYykgdGhpcy5zcmMgPSB0aGlzLmN1cnJlbnRTcmM7CiAgICAgICAgICAgICAgICB2YXIgb2xkc3JjID0gdGhpcy5jdXJyZW50U3JjIHx8IHRoaXMuc3JjOwogICAgICAgICAgICAgICAgdmFyIG5ld3NyYyA9IG51bGw7CgogICAgICAgICAgICAgICAgaWYgKG1hdGNoZWRSdWxlLmxhenlBdHRyKSB7CiAgICAgICAgICAgICAgICAgICAgbmV3c3JjID0gdGhpcy5nZXRBdHRyaWJ1dGUobWF0Y2hlZFJ1bGUubGF6eUF0dHIpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdldEF0dHJpYnV0ZSgiX3NyYyIpICYmICF0aGlzLnNyYykgewogICAgICAgICAgICAgICAgICAgIG5ld3NyYyA9IHRoaXMuZ2V0QXR0cmlidXRlKCJfc3JjIik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgaW4gbGF6eUltZ0F0dHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGF0dHJOYW1lID0gbGF6eUltZ0F0dHJbaV07CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhdHRyVmFsdWUgPSB0aGlzLmdldEF0dHJpYnV0ZShhdHRyTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvXGJpbWFnZWNvdmVyXC5cdyskL2kudGVzdChhdHRyVmFsdWUpKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJWYWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3c3JjID0gYXR0clZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoIW5ld3NyYyAmJiB0aGlzLl9sYXp5cmlhcyAmJiB0aGlzLl9sYXp5cmlhcy5zcmNzZXQpIHsKICAgICAgICAgICAgICAgICAgICBuZXdzcmMgPSB0aGlzLl9sYXp5cmlhcy5zcmNzZXRbdGhpcy5fbGF6eXJpYXMuc3Jjc2V0Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG5ld3NyYykgewogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNyY3NldCkgewogICAgICAgICAgICAgICAgICAgIHZhciBzcmNzID0gdGhpcy5zcmNzZXQuc3BsaXQoL1t4d10sXHMqL2kpLCBsYXJnZVNpemUgPSAtMTsKICAgICAgICAgICAgICAgICAgICBzcmNzLmZvckVhY2goc3JjaSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcmNJbmZvID0gc3JjaS50cmltKCkuc3BsaXQoL1xzKy8pLCBjdXJTaXplID0gcGFyc2VJbnQoc3JjSW5mb1sxXSB8fCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChzcmNJbmZvWzFdIHx8ICFvbGRzcmMpICYmIGN1clNpemUgPiBsYXJnZVNpemUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhcmdlU2l6ZSA9IGN1clNpemU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdzcmMgPSBzcmNJbmZvWzBdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIG9sZHNyYyAhPSBjYW5vbmljYWxVcmkobmV3c3JjKSA/IG5ld3NyYyA6IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICBdOwoKICAgICAgICBjb25zdCBpbWFnZVJlZyA9IC9eXHMqKGh0dHBzP3xmdHApOlwvXC8uKj9cL1teXC5dKlwuKGF2aXxhdmlmfGF2aWZzfGJtcHxnaWZ8Z2lmdnxpY298amZpZnxqcGV8anBlZ3xqcGd8amlmfGpmaXxhP3BuZ3xzdmd6P3x3ZWJwfHhibXxkaWJ8ZGl2eHwzZ3BwfG0zdXxtNHZ8bWt2fG1wNHxtcGU/Z3xvZ3Z8d2VibXxmbHZ8ZmxhY3xtNGF8bTRifG1wYXxtcDN8YWFjfGNkYXxvZ2F8b2dnfG9wdXN8d21hfHdhdikoJnxcP3wjfFwvPyR8XHMpL2k7CgogICAgICAgIGNvbnN0IHJ1bGVJbXBvcnRIb3N0ID0gWyJncmVhc3lmb3JrLm9yZyIsICJnaXRodWIuY29tIiwgInJlZGRpdC5jb20iXTsKICAgICAgICBjb25zdCBydWxlSW1wb3J0VXJsUmVnID0gL2dyZWFzeWZvcmtcLm9yZ1wvLipzY3JpcHRzXC8yNDIwNChcLVteXC9dKik/KFwvZGlzY3Vzc2lvbnN8XC8/JHxcL2ZlZWRiYWNrKXxnaXRodWJcLmNvbVwvaG9vdGhpblwvVXNlclNjcmlwdHNcLyh0cmVlXC9tYXN0ZXJcL1BpY3ZpZXdlciUyMENFJTJCfGlzc3Vlc3xkaXNjdXNzaW9ucyl8XC5yZWRkaXRcLmNvbVwvclwvUGljdmlld2VyQ0UvaTsKCiAgICAgICAgLy/lm77moIcKICAgICAgICBwcmVmcy5pY29ucz17CiAgICAgICAgICAgIGFjdHVhbDonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FNQUFBRFhxYzNLQUFBQVYxQk1WRVVBQUFELy8vLzI5dmJLeXNvcUtpb2lJaUt5c3JLaG9hR1RrNU45ZlgzejgvUHY3Ky9yNit2azVPVGIyOXZPenM2T2pvNVVWRlF6TXpNWkdSa1JFUkVNREF5NHVMaXNyS3lscGFWNGVIaGtaR1JQVDA4L1B6L0lmeGpRQUFBQWdrbEVRVlFvejUzUlJ3N0RJQkJBVWI1cHhyMm0zLytja2ZESW13eUpsTDlERHpRZ0RJVU1SdTF2V094VEJkZU0rb25BcEVORjBxSGpwa09rMlZUd0xWRUY0MEtiZmoxd0s4QVZ1MnBRQTFhQkJZREhKMXd5OUNmNGNYRDVjaHpOQXZzQW5jOFRqb0xBaEl6c0Jhbzl3MXJsVlRJdmtPWU1kOW5tNnhQaTE2OHQ5QVlrYkFOZGFqcGpjd0FBQUFCSlJVNUVya0pnZ2c9PScsCiAgICAgICAgICAgIGN1cnJlbnQ6J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBTUFBQURYcWMzS0FBQUFRbEJNVkVVQUFBRC8vLytUazVQMzkvZno4L1BPenM1VVZGUXBLU25iMjl2SnljbXhzYkd3c0xDbXBxYWZuNStOalkxK2ZuNThmSHg0ZUhnL1B6OGhJU0VaR1JrTkRRMWt1bUFJQUFBQVkwbEVRVlFvejYzUld3cUFJQkJBVVcrbDluNjMvNjJXVkdEaVJFWDN4NCtESWpNS0lZV0s5aFVJT2lHODlRd3lMUUN0QkxVRW1RQzI3Tjc5NmlpQklnb0FBZWg4T3kyQXVjQUNrM3NKcUh5WVU2QWZ3V1U4R0FEU1pJZUd1N0gvdTFxaEZiYWVBY0pYY3A1eUFBQUFBRWxGVGtTdVFtQ0MnLAogICAgICAgICAgICBtYWduaWZpZXI6J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBTUFBQURYcWMzS0FBQUFVVkJNVkVVQUFBRC8vLzg2T2pvaElTR2NuSnhZV0ZpbnA2ZGpZMlBjM055d3NMQlBUMDlEUTBNVkZSVzh2THo4L1B5b3FLaDVlWG0ydHJiMzkvZnc4UERaMmRuVjFkWEt5c3FUazVNTEN3dmw1ZVVwS1NrazZZcWhBQUFBc0VsRVFWUW96NFhRMXc3RElBeEFVWnNaVnZacS8vOURDeVRJcEczYSt4QXBQa0lNd0pzQTRXc25lSzJhdGxIYXY0RXpRbkxnVWhoM0FSZnMrV3VEcThBYnkwcjlNbUhzQUMyQVFVbm8rRGxCeVF4ZEJxa0lHcDZBRFJsNFE5QkNoQzRNWFY3VC9sbEJlN0JBZTF4T3RUODVuWXJ1QVdmV2VBSndvUy96ZGNhVkFOeFMzbXBPMXlhQVNhdEhlbDJHTVZrQndvN0lBYllFcGdZL3hrblBNR2NyNk5OZzNBNFFGVndyOE5sdnVPa0ZwYnNGYnJJYUlMSUFBQUFBU1VWT1JLNUNZSUk9JywKICAgICAgICAgICAgZ2FsbGVyeTonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FNQUFBRFhxYzNLQUFBQVAxQk1WRVVBQUFELy8vOTRlSGdaR1JuMzkvZno4L1BPenM2eHNiR1NrcEo5ZlgxVVZGUXBLU25iMjl2SnljbW1wcWFmbjUrVWxKU05qWTAvUHo4aElTRU5EUTJmV3BFTUFBQUFjVWxFUVZRb3o0M1NXUXJFSUJSRTBYZTdNOC9UL3RjYU5TS0NLVWg5NW5DRGlJYVlZYTl6VURRUmlpYUNhbEFOcWtFMG42QnVCTEFyV0JUVUFzYTIvM3lxZndZZHpBbCtHZUNXQU45WU03bnZvNGNoZ29YbWdqUDhDZG9FdnFtQS9vQ1FSSGdhdDJwN1lNMmd2SGI5R01SdTdhY0NHTG1seU5vQUFBQUFTVVZPUks1Q1lJST0nLAogICAgICAgICAgICBzZWFyY2g6J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBTUFBQURYcWMzS0FBQUFYVkJNVkVVQUFBRC8vLytNakl3bUppYk56YzJVbEpUZDNkMmxwYVVLQ2dyVDA5Ty92NzhZR0JqajQrTXZMeThQRHcvSXlNaDVlWG41K2ZuMjl2Ynk4dkxvNk9qRHc4Tzd1N3UzdDdld3NMQ2NuSngxZFhWdWJtNCtQajQzTnpka1pHU3RjL0pTQUFBQTRFbEVRVlFvejUyUldXN0RNQXhFOWJSNjM1ZlljWHIvWTVhVzdUWUlHcURJL0VqVUF6UkRVdkZHQ3ZXbi9nSE1Pbm1mTmVZRkpMb25xblBWTThocklBM0I3b2Y1QlhrSzQ3YlhXd2JlL0FDcDNPV3F3U1luYUk3Myt6U3RTU1Q2QUtZakUvc2JRQ1prcGkwajBIU2xVbC9nUGR3bGVNOFNnU2ZJUnpkOGxhUmtjbDBvSWloWUlraVZxaG5sNmhnaWNQUkdyTUhXMEVqNGdYQ1l0OHhpUG9JdzZUdEFOTDhDVnRwYW5TdTF4dkFSSkhZbnB4cElxNnR6VThEOFVLSXl3SENOWkNjcFVEdVh0ZURMNTdIbmdWTWhmMW5VUTl1aXNHNDd5NDkyL2tiZnlKUUhaNXl1MUFNQUFBQUFTVVZPUks1Q1lJST0nLAogICAgICAgICAgICBkb3dubG9hZDonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FNQUFBRFhxYzNLQUFBQVNGQk1WRVVBQUFELy8vODZPanE4dkx4WFYxY2lJaUtjbkp5bXBxWmpZMk14TVRIYzNOeXdzTEJEUTBOUFQwOFZGUlY1ZVhuMzkvZnc4UERaMmRuVjFkWEt5c3FVbEpUbDVlVU5EUTFFblRRaEFBQUF0VWxFUVZRb3ozM1FXUktESUJBRTBHbDJBWEZQN24vVERLSUVrNWord0twK1pRMEQ0U1lFK3BrRGtyTWUzcnIwQVRFWXBVa3JFK0lGb3V5cHBKZXhnUlI2SVFRQVBvZGxBcWVBTXlSb0J5SXlqbzhEckdwQTJUZDQzWUQyRmZKSG9rUjJoT3NmOHV5MXY4N29aT25yakhvckZ1N3JyZW9leEtMemhpRmxxSnNQeEpMN2RjWmFnV1U1MzJvRzBBQk56ajd5Nndwd1ZBT2dKOEF6dGd5aGhUUnlNMFRzVVEwTXVSaTNBcWFCYXlwODVUL2M1QVZNS3dVdjZtblhUUUFBQUFCSlJVNUVya0pnZ2c9PScsCiAgICAgICAgICAgIGRvd25sb2FkU3ZnQnRuOic8c3ZnIGNsYXNzPSJwdi1pY29uIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHRpdGxlPkRvd25sb2FkPC90aXRsZT48cGF0aCBkPSJNNzY4IDc2OHEwLTE0Ljg1NzE0My0xMC44NTcxNDMtMjUuNzE0Mjg2dC0yNS43MTQyODYtMTAuODU3MTQzLTI1LjcxNDI4NSAxMC44NTcxNDMtMTAuODU3MTQzIDI1LjcxNDI4NiAxMC44NTcxNDMgMjUuNzE0Mjg2IDI1LjcxNDI4NSAxMC44NTcxNDMgMjUuNzE0Mjg2LTEwLjg1NzE0MyAxMC44NTcxNDMtMjUuNzE0Mjg2eiBtMTQ2LjI4NTcxNCAwcTAtMTQuODU3MTQzLTEwLjg1NzE0My0yNS43MTQyODZ0LTI1LjcxNDI4NS0xMC44NTcxNDMtMjUuNzE0Mjg2IDEwLjg1NzE0My0xMC44NTcxNDMgMjUuNzE0Mjg2IDEwLjg1NzE0MyAyNS43MTQyODYgMjUuNzE0Mjg2IDEwLjg1NzE0MyAyNS43MTQyODUtMTAuODU3MTQzIDEwLjg1NzE0My0yNS43MTQyODZ6IG03My4xNDI4NTctMTI4djE4Mi44NTcxNDNxMCAyMi44NTcxNDMtMTYgMzguODU3MTQzdC0zOC44NTcxNDIgMTZIOTEuNDI4NTcxcS0yMi44NTcxNDMgMC0zOC44NTcxNDItMTZ0LTE2LTM4Ljg1NzE0M3YtMTgyLjg1NzE0M3EwLTIyLjg1NzE0MyAxNi0zOC44NTcxNDN0MzguODU3MTQyLTE2aDI2NS43MTQyODZsNzcuMTQyODU3IDc3LjcxNDI4NnEzMy4xNDI4NTcgMzIgNzcuNzE0Mjg2IDMydDc3LjcxNDI4Ni0zMmw3Ny43MTQyODUtNzcuNzE0Mjg2aDI2NS4xNDI4NThxMjIuODU3MTQzIDAgMzguODU3MTQyIDE2dDE2IDM4Ljg1NzE0M3ogbS0xODUuNzE0Mjg1LTMyNS4xNDI4NTdxOS43MTQyODYgMjMuNDI4NTcxLTggNDBsLTI1NiAyNTZxLTEwLjI4NTcxNCAxMC44NTcxNDMtMjUuNzE0Mjg2IDEwLjg1NzE0M3QtMjUuNzE0Mjg2LTEwLjg1NzE0M0wyMzAuMjg1NzE0IDM1NC44NTcxNDNxLTE3LjcxNDI4Ni0xNi41NzE0MjktOC00MCA5LjcxNDI4Ni0yMi4yODU3MTQgMzMuNzE0Mjg2LTIyLjI4NTcxNGgxNDYuMjg1NzE0VjM2LjU3MTQyOXEwLTE0Ljg1NzE0MyAxMC44NTcxNDMtMjUuNzE0Mjg2dDI1LjcxNDI4Ni0xMC44NTcxNDNoMTQ2LjI4NTcxNHExNC44NTcxNDMgMCAyNS43MTQyODYgMTAuODU3MTQzdDEwLjg1NzE0MyAyNS43MTQyODZ2MjU2aDE0Ni4yODU3MTRxMjQgMCAzMy43MTQyODYgMjIuMjg1NzE0eiI+PC9wYXRoPjwvc3ZnPicsCiAgICAgICAgICAgIHZpZGVvOidkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSFpwWlhkQ2IzZzlJakFnTUNBeE1ESTBJREV3TWpRaUlIWmxjbk5wYjI0OUlqRXVNU0krUEhCaGRHZ2daRDBpVFRVeE1pQTJORU15TmpVdU5pQTJOQ0EyTkNBeU5qVXVOaUEyTkNBMU1USnpNakF4TGpZZ05EUTRJRFEwT0NBME5EZ2dORFE0TFRJd01TNDJJRFEwT0MwME5EaFROelU0TGpRZ05qUWdOVEV5SURZMGVrMDJPVEV1TWlBMU5EUnNMVEkxTmlBeE5UWXVPRU0wTWpndU9DQTNNRFFnTkRJeUxqUWdOekEwSURReE5pQTNNRFJqTFRZdU5DQXdMVGt1TmlBd0xURTJMVE11TWtNek9UQXVOQ0EyT1RRdU5DQXpPRFFnTmpnMExqZ2dNemcwSURZM01rd3pPRFFnTXpVeVl6QXRNVEl1T0NBMkxqUXRNakl1TkNBeE5pMHlPQzQ0SURrdU5pMDJMalFnTWpJdU5DMDJMalFnTXpJZ01Hd3lOVFlnTVRZMkxqUmpPUzQySURZdU5DQXhOaUF4TmlBeE5pQXlPQzQ0UXpjd05DQTFNamdnTnpBd0xqZ2dOVFF3TGpnZ05qa3hMaklnTlRRMGVpSWdabWxzYkQwaWQyaHBkR1VpTHo0OEwzTjJaejQ9JywKICAgICAgICAgICAgYXVkaW86J2RhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjJhV1YzUW05NFBTSXdJREFnTVRBeU5DQXhNREkwSWlCMlpYSnphVzl1UFNJeExqRWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SStQSEJoZEdnZ1pEMGlUVGMyT0NBNU16Z3VOalkyTmpZM1NESTFObUU0TlM0ek16TXpNek1nT0RVdU16TXpNek16SURBZ01DQXhMVGcxTGpNek16TXpNeTA0TlM0ek16TXpNelJXTVRjd0xqWTJOalkyTjJFNE5TNHpNek16TXpNZ09EVXVNek16TXpNeklEQWdNQ0F4SURnMUxqTXpNek16TXkwNE5TNHpNek16TXpSb05ESXVOalkyTmpZM2RqSTVPQzQyTmpZMk5qZHNNVEEyTGpZMk5qWTJOaTAyTkV3MU1USWdNemcwVmpnMUxqTXpNek16TTJneU5UWmhPRFV1TXpNek16TXpJRGcxTGpNek16TXpNeUF3SURBZ01TQTROUzR6TXpNek16TWdPRFV1TXpNek16TTBkalk0TWk0Mk5qWTJOalpoT0RVdU16TXpNek16SURnMUxqTXpNek16TXlBd0lEQWdNUzA0TlM0ek16TXpNek1nT0RVdU16TXpNek0wYlMweU1UTXVNek16TXpNekxUSTVPQzQyTmpZMk5qZGhPRFV1TXpNek16TXpJRGcxTGpNek16TXpNeUF3SURBZ01DMDROUzR6TXpNek16UWdPRFV1TXpNek16TXpJRGcxTGpNek16TXpNeUE0TlM0ek16TXpNek1nTUNBd0lEQWdPRFV1TXpNek16TTBJRGcxTGpNek16TXpOQ0E0TlM0ek16TXpNek1nT0RVdU16TXpNek16SURBZ01DQXdJRGcxTGpNek16TXpNeTA0TlM0ek16TXpNelIyTFRJeE15NHpNek16TXpOb01USTRkaTA0TlM0ek16TXpNek5vTFRFM01DNDJOalkyTmpkMk1qSTBMamcxTXpNek0yTXRNVEl1TXpjek16TXpMVGN1TWpVek16TXpMVEkzTGpNd05qWTJOeTB4TVM0MU1pMDBNaTQyTmpZMk5qWXRNVEV1TlRKNklpQm1hV3hzUFNKM2FHbDBaU0l2UGp3dmMzWm5QZz09JywKCiAgICAgICAgICAgIHJldHJ5OidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZNekl5TWpoQlFUVXpOamRETVRGRk1rSTNRVGhCTlRBd1FVTXhSREpHUkVNaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNk16SXlNamhCUVRZek5qZERNVEZGTWtJM1FUaEJOVEF3UVVNeFJESkdSRU1pUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRvek1qSXlPRUZCTXpNMk4wTXhNVVV5UWpkQk9FRTFNREJCUXpGRU1rWkVReUlnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRG96TWpJeU9FRkJORE0yTjBNeE1VVXlRamRCT0VFMU1EQkJRekZFTWtaRVF5SXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9QajltVE1zQUFBTENTVVJCVkhqYWRGSkxTRlJoRkQ3M3Y0KzVkKzRkbWdra0VjeEZPT280T1E5MEZnVkoybGhpaEZrNW96V0tHeGVCQkVXRm1BL0d6RlZGdTF4RlJyVnJIYmlKYUdWcUNEVVpFZEtBaTFta1FqV3YrK3I4MTdrWFcvaGZ6djFmNTN6Zk9mOTNtTnJhV2pob01JUUJRc2lpYVpqWERjUDRzLzh1bTgxYU16SGg0SS9uZUpCbE9TVXI4bWVXWTl0cGdIMW5EMkt0YmNQQkVqWW1DTUliU1pSK3U5MXUwK1B4QUZxZG9panZlSUYveURDTXNDOGVPTk0wN1hRRlpKeVMzTks0eStVaUNBSWN4d0hQODN2QUxFdjNOL04vODEzRllqR0JSeGtIQU9zRVVSU2ZTcEkwSXJ0bFFDWXJBTmtjSmdwSTk2RndxTzVLLzJXUGs0SDE0N2dPVEhsRWtSWGdlQTdDa1RBa0J4TGdiL0JEMzRWTFFGaXNGSW1TQTBsSURpYmVZOGlHQTBCUmEycHFac3RxMlhKc2FtcUVxWm5KdDNnM2ZlcEUrN0xpVVV6ZllSL2N1bjBMb3RISWRGc2tsaTZYeTdDMXRWVUJRS2xVWFcybFphaXFDcjE5dmF0dDBWaDNxVlN5MGc0RUF6Q1RudG10cmo3U0gybUpMbW1xQnZhNzJSbXd4VUpSd1BvdEFKL1BkNmRVTElHdTY2QVJEUjQvZWZRSjczcGJta05aZXJaZkFVdkd0ZlZWUUlrQUd3VTBUWU1IYy9NNTZraFpLQ0FHbnd3MkhzL3FtaTRoMlNobU9vcHp3Z0VJQmNONnZiOWVwY0VVWkhOemM5WnFGUVF3ZEFPYTZnTUZlbzROZFZkMGlRdWlKQzZnLzVnRFFObk9kWjlkb3pOOTBFSytjQkZWV1FBR0RsVnFGVkRTQ1dTK2h6MUM1WWF4RzJQNS93RGlYZkhKTS9GT1IyK1VkQlNiYVJmWFB3V1hVRUxXKzlnYkxPMk5udk05ME5GNU91MDhJazJ6dVNHNHRMcStzbGhWVlRYMDZ1VnJ3Q0RBM3FkbEhLVlowVUJxVjY4TlFtbzQ5UXo5UCtSeXViME85dnE4UUJnQzMzNXNDTGlmeW56SmpDOCtmMEZXUHE0QTFadG0xTnJXQ2tQREtTUFFISmhIbjdUL1dFTjUrOWQyQmNEcjNWdFVtTDUrejhSd080RVdSNVBRQ21oTGFIUDRvTXUyUWpzN08xYmNQd0VHQUVyS0Vja3BCNUtpQUFBQUFFbEZUa1N1UW1DQycsCiAgICAgICAgICAgIGxvYWRpbmc6J2RhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEdBQVlBTE1QQUNnb0tPbnA2Y25KeWFhbXBwbVptVmhZV0dkblozZDNkNGFHaGdFQkFkbloyVU5EUS9iMjlyMjl2Ykd4c2YvLy95SC9DMDVGVkZORFFWQkZNaTR3QXdFQUFBQWgvd3RZVFZBZ1JHRjBZVmhOVUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZRVVU1TVRaR05ETXhRMEU0TVRGRk1rRTFRME5FTVRGR09EVTBNa1V6TnpVaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNlFVVTVNVFpHTkRReFEwRTRNVEZGTWtFMVEwTkVNVEZHT0RVME1rVXpOelVpUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRwQlJUa3hOa1kwTVRGRFFUZ3hNVVV5UVRWRFEwUXhNVVk0TlRReVJUTTNOU0lnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRHBCUlRreE5rWTBNakZEUVRneE1VVXlRVFZEUTBReE1VWTROVFF5UlRNM05TSXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9QZ0gvL3YzOCsvcjUrUGYyOWZUejh2SHc3Kzd0N092cTZlam41dVhrNCtMaDROL2UzZHpiMnRuWTE5YlYxTlBTMGREUHpzM015OHJKeU1mR3hjVER3c0hBdjc2OXZMdTZ1YmkzdHJXMHM3S3hzSyt1cmF5cnFxbW9wNmFscEtPaW9hQ2ZucDJjbTVxWm1KZVdsWlNUa3BHUWo0Nk5qSXVLaVlpSGhvV0VnNEtCZ0g5K2ZYeDdlbmw0ZDNaMWRITnljWEJ2Ym0xc2EycHBhR2RtWldSalltRmdYMTVkWEZ0YVdWaFhWbFZVVTFKUlVFOU9UVXhMU2tsSVIwWkZSRU5DUVVBL1BqMDhPem81T0RjMk5UUXpNakV3THk0dExDc3FLU2duSmlVa0l5SWhJQjhlSFJ3Ykdoa1lGeFlWRkJNU0VSQVBEZzBNQ3dvSkNBY0dCUVFEQWdFQUFDSDVCQVVGQUE4QUxBQUFBQUFZQUJnQUFBVE1NTWxKcTcxMEdRUUFNZ0JtTFlNU0tNdWlyTVFpU29jWm5PbHFINjhoMDZxdEZKaFBvbUFTRURvRXdRcFlNRlFXTTJmaEVKb0FEa3lCd0RWeE1CZ0JwNmlnVkJBbTBDOEQ4WXF0QkZXRFdsSEZBQm8yTVFMTUdMd2tDRm9DYkFrQUtRdDFJb2FMRWgyT2Y0V09WUVVEQkFOaUw0RU5BamdKSkFPVmlSWUFEb0pBaFphZ3B4Z0dnZzExQnFBdEx3V2JneFFBQkxNYWlRQUdMclVOWEdndUpBNEVWQjRERFE3QW1FOEREdElESFE0TjE4MjAwZElPMWRmTXEzWUkwZFNrRFFNY2tJMU5IYitpNnZBUkFDSDVCQVVGQUE4QUxBQUFBQUFCQUFFQUFBUUM4RVVBSWZrRUJRVUFEd0FzQVFBQkFCWUFGZ0FBQkpid3lTa1BvWXRxNmdJTEV6aHNtc2Q4WVFDUzRZbEs2cm9WbWVFcFkwZ2RFMEFRTlFSTG9sQk1Eb01CY0VpVWpIekpRWUZKVVN3VzBRdFZRQ2tvQndicWcxQTBQZ0JvOFNTajNtUnFqamhQTFZBSTQ0NGNzMUVPRC9CaFF3ZGxYQThIY1hwRGRRcGFEMGxNY3c4Q2hSSlRFZzROaVE0Q0RaWXNtQTBORGhJTms1eWVHNkFORTZXVHEwTVptS01QcGE5dGN3ZW9GQkVBSWZrRUJRVUFEd0FzQUFBQUFBRUFBUUFBQkFMd1JRQWgrUVFGQlFBUEFDd0JBQUVBRlFBVkFBQUVndkRKK2NBeWtoektKempFUUFCUHdBUk9OeFhoSUpJbWM2clAwcjZsZkdLcUxmSUR4ZTdCazdna2kwSUhnU2xLSEk0QmpSTUlHS0dwcWFScWZXQzFGSzRCdXdHYnorZ09xZkZnbXdrS2hhUkJQd3M0ZFBkWjNtNWt0WHdVV1VvcWhIRWRCUTBDRGdnWkRZR0ZpZ0lDYmdKeENuY3FCcEtVRXBaeEFrNGRpcFdZSFJFQUlma0VCUVVBRHdBc0FBQUFBQUVBQVFBQUJBTHdSUUFoK1FRRkJRQVBBQ3dCQUFFQUZnQVdBQUFFbi9ESktjczBDOUE5RnhyTzhBREVRQnpjQmpyaFdBNm1sVDVyUzhMbXdoa3krS0FQUTRtZ2V5QTZMRm1xVUF3RVpJaEd3NkZNR1FJTUJrWGFNTXdraUt6MlVlQ0t2aEtGR05VQW95VURCcGJ3cmt1SzlvWHVJR2dJam5ZVEJRS0VEblpPQVJKK2hFQXpDSWdQT2dpRURWVXpUbWNQVWpLTkU0QXpNZ0lLYlJNQ0R3b1NCcDJsQ3EybUM2aHBhS0t1a2JGMkJLSUNlckZFZFFzR2dKOGNFUUFoK1FRRkJRQVBBQ3dBQUFBQUFRQUJBQUFFQXZCRkFDSDVCQVVGQUE4QUxBRUFBUUFXQUJZQUFBU1U4TWs1enl3MGE5ZWNITTZBQUJyRk5kM25yRU1wRldmNmdLejdlcTEwZ1BtQ1RhaUp3YllnRUVnU2dhQmhreFFIQTh1am9SUTBId1VvbEZUMVhBbmFnb1Y2bFJnRzRHRTVBMmhUa0d1S1F2RWdsQWVNQU1NK1Z6Q3ZDZ3lDVW4xbGdua1RjMVpOQm5vTVhnOUtWME9OQVJScUR3b0JBbllTbWcrWUpYUUJBWFFTcEphaEdaK2xFNmltVFhRS1NLMXJjR1l1RVFBaCtRUUZCUUFQQUN3QUFBQUFBUUFCQUFBRUF2QkZBQ0g1QkFVRkFBOEFMQUVBQVFBV0FCWUFBQVNWOE1sSjVhbVlraWFhZEkzekxKbGtjRUwzTmF4WVBxajZnTzByY1E1Q2hVV1dTajJNWVRJWWtCNEVoVUpna3d3Y09ZbEFxYmpZb0s0SDFkT2NRYVZNUXZmZ2VFcEl4MjVsd1ZZL0FQQ0hUcXMyREFpRDRZVFp4QmRKZkhJMkJVVjNBRWdTQ2swTGZsWWtpaEp6R1l3RWh4VjZGQU1QREFGblFSUkRuV2NQQVF5bW9obFdvaVNscGc5V0pacWRyQXdQbWwxcFRSRUFJZmtFQlFVQUR3QXNBQUFBQUFFQUFRQUFCQUx3UlFBaCtRUUZCUUFQQUN3QkFBRUFGZ0FXQUFBRWkvREpLUTJpT0ZPaGhHeENvMkdjMG4xQzJoampVNTRQcUJiWk1YR2loRGpoeEU2bWxvVDJjRGdBR0lWUTRtamtIc3BseGRsd1BINVN5WUFxTVVXelZwc0VtUzJieXdmSHdHb0l1TDlDbzRPbWNBZWs4c0hFblYxYmdWZUJHUVVMV25vVVB3RU1Db2NHQkFNRWhTMktEQXgzQUk4RGtKSWFsSllQbUpxYmNZcVhqd1FHWkVzSEJFT2NHQkVBSWZrRUJRVUFEd0FzQUFBQUFBRUFBUUFBQkFMd1JRQWgrUVFGQlFBUEFDd0JBQUVBRmdBV0FBQUVrL0RKU1NVeU5jK2hubHFQb0FpRU5oMmRsSXJLYUtyVEY3YXVobmxoS1RWMVlVdUhUUEJSYURSQWowRWc4Sm9VQlFMS2t0a01RUnVTYWJUcWdFWVIxS3BGME5oS2tPSzBtaEZnRE5TT1I1QkJUdytNV0FtZFVUWGdOM1FCTnk4T1JnaFNaejRWZ3c1eEoyY0VBd1EzQndNT2J5OExrUU9TQUVtTmx5OEZtNXllbG8wRGlob0FCNUVFcHBkRFZRQUxONE1aRVFBaCtRUUZCUUFQQUN3QUFBQUFBUUFCQUFBRUF2QkZBRHM9JywKICAgICAgICAgICAgbG9hZGluZ0NhbmNsZTonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FZQUFBRGdkejM0QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUF5SnBWRmgwV0UxTU9tTnZiUzVoWkc5aVpTNTRiWEFBQUFBQUFEdy9lSEJoWTJ0bGRDQmlaV2RwYmowaTc3dS9JaUJwWkQwaVZ6Vk5NRTF3UTJWb2FVaDZjbVZUZWs1VVkzcHJZemxrSWo4K0lEeDRPbmh0Y0cxbGRHRWdlRzFzYm5NNmVEMGlZV1J2WW1VNmJuTTZiV1YwWVM4aUlIZzZlRzF3ZEdzOUlrRmtiMkpsSUZoTlVDQkRiM0psSURVdU15MWpNREV4SURZMkxqRTBOVFkyTVN3Z01qQXhNaTh3TWk4d05pMHhORG8xTmpveU55QWdJQ0FnSUNBZ0lqNGdQSEprWmpwU1JFWWdlRzFzYm5NNmNtUm1QU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUx6QXlMekl5TFhKa1ppMXplVzUwWVhndGJuTWpJajRnUEhKa1pqcEVaWE5qY21sd2RHbHZiaUJ5WkdZNllXSnZkWFE5SWlJZ2VHMXNibk02ZUcxd1BTSm9kSFJ3T2k4dmJuTXVZV1J2WW1VdVkyOXRMM2hoY0M4eExqQXZJaUI0Yld4dWN6cDRiWEJOVFQwaWFIUjBjRG92TDI1ekxtRmtiMkpsTG1OdmJTOTRZWEF2TVM0d0wyMXRMeUlnZUcxc2JuTTZjM1JTWldZOUltaDBkSEE2THk5dWN5NWhaRzlpWlM1amIyMHZlR0Z3THpFdU1DOXpWSGx3WlM5U1pYTnZkWEpqWlZKbFppTWlJSGh0Y0RwRGNtVmhkRzl5Vkc5dmJEMGlRV1J2WW1VZ1VHaHZkRzl6YUc5d0lFTlROaUFvVjJsdVpHOTNjeWtpSUhodGNFMU5Pa2x1YzNSaGJtTmxTVVE5SW5odGNDNXBhV1E2TXpCRk1qWXpSVFV4UTBJd01URkZNa0U1UmtSRE1ERkdOVVkzTlRBMk9UWWlJSGh0Y0UxTk9rUnZZM1Z0Wlc1MFNVUTlJbmh0Y0M1a2FXUTZNekJGTWpZelJUWXhRMEl3TVRGRk1rRTVSa1JETURGR05VWTNOVEEyT1RZaVBpQThlRzF3VFUwNlJHVnlhWFpsWkVaeWIyMGdjM1JTWldZNmFXNXpkR0Z1WTJWSlJEMGllRzF3TG1scFpEb3pNRVV5TmpORk16RkRRakF4TVVVeVFUbEdSRU13TVVZMVJqYzFNRFk1TmlJZ2MzUlNaV1k2Wkc5amRXMWxiblJKUkQwaWVHMXdMbVJwWkRvek1FVXlOak5GTkRGRFFqQXhNVVV5UVRsR1JFTXdNVVkxUmpjMU1EWTVOaUl2UGlBOEwzSmtaanBFWlhOamNtbHdkR2x2Ymo0Z1BDOXlaR1k2VWtSR1BpQThMM2c2ZUcxd2JXVjBZVDRnUEQ5NGNHRmphMlYwSUdWdVpEMGljaUkvUG1JMlhmc0FBQURxU1VSQlZIamE3RlRMRFlNd0RJMXB1d1FyNU1DSktaQ3lCM2NrbHNnOUd6QUFFakFFZXpCRmhSdEhJU3IvVDlWRDFWZ3lKUDY4WnpzQlFFVDJUUUZQOE1jRWFab0dKN0Y2cGRUTWVOOUthTnYyblIzaU9EWUxiYWVYODJrN25PNmc2N29SaUJDQzZWZ0RCQUJZbHVVSWh4NWhHTTV3OXNiZ0tyT0FSTGdJZnJXRFFYQ3ZnTFVPVmdtaUtHSjJIRWFycWhvRkprbGljb2Q4emprcml1TDBpTFk2T0hTL2p4Q2dybjVtdERiOGxBRHJ1bmFiUE04ZnBNUGUrdkFTQWMyMGFacnBnVDZ0dXNPbEdJcGRrNjBQTGNpeTdFWUxLV1cvZElPMFA1Z1UydnUvcVNmNFFZS1hBQU1BSjVxQkUrNVBQYVVBQUFBQVNVVk9SSzVDWUlJPScsCgogICAgICAgICAgICBoYW5kOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQVlDQUlBQUFCdkZhcXZBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZRakkzT0VKRVFrWXhRMFUzTVRGRk1qZzVORFpGTnpKQk1UYzVSVEJCTXpNaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNlFqSTNPRUpFUXpBeFEwVTNNVEZGTWpnNU5EWkZOekpCTVRjNVJUQkJNek1pUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRwQ01qYzRRa1JDUkRGRFJUY3hNVVV5T0RrME5rVTNNa0V4TnpsRk1FRXpNeUlnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRHBDTWpjNFFrUkNSVEZEUlRjeE1VVXlPRGswTmtVM01rRXhOemxGTUVFek15SXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9QakVMNUtRQUFBSEJTVVJCVkhqYTVGUk55d0ZoRkdWbWtNOUVFYVdRRWlrMUZxd3MvQVdKbjJEbC84aGFLVHNXL0FObGphUXNsTEx3a2E5OE5qTk9wdlRrZmVhZFVYbzM3MWs4M2JuZE9YUHV1ZmNaZlQ2ZjEzMERqTzVMK0VPaTBXZzBHQXhVeXpocWRqNmZYNi9YWURESXNteXRWbHNzRm8xRzQzdyt6Mll6aDhQaDkvdTFLc3BrTXNWaVVSUkYrZEhuOCtHMFdDelZhclZRS0h5Z3FGUXFDWUl3SG8rUHgrTXJHWTFHY1RxZHpnODgybXcyT01QaE1PaGVTYnZkVHZZK25VN1ZpV0NLSkVteFdPeDBPa2xQck5kcnRDYkh0OXN0blU2WHkyVjFvdDF1QjRPOFhxL2I3UmFmUUVmSlpCTEIvWDQvSEE1WVk3UFpUTDdDeHVOeE9kcHV0NWcwSk5oc05xUFJHSWxFOFBGVUtpV3JnQVE1UU5jZWp5Y1FDR0NzcUtjUThUeGZxVlNzVm11LzMwZDFOcHVWYUhDNVhHQXhtVXl0Vmd0ZnBVeHR1Vnh5SElmQkp4S0plcjIrMys5aGl0TDZZYUZRVDI4TjlBekRoRUloR0FGMWw4dkZZREJRUldGTHU5MHVLZWQ5ajNxOUhrd0ZGNHJnSlRsN0VoQzdXcTFVOXFqVDZVQXpMQkNWSVcrWitrSTJtMDFNRUlHZ0FLMUVRTHZkRnBUeFp2TnZSUEJvT0J4Uys4SVFjRCswWGxwZ01wbmtjcm1mZWZJYWs5RC81MysyUmp3RUdBQWxrSGhXSGV2OS9RQUFBQUJKUlU1RXJrSmdnZz09JywKICAgICAgICAgICAgcm90YXRlOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQVlDQUlBQUFCdkZhcXZBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZSak0yTTBVeVJUY3hRMFUzTVRGRk1qZ3hSRE5FUWtNNE4wUTNOVGcyUWtNaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNlJqTTJNMFV5UlRneFEwVTNNVEZGTWpneFJETkVRa000TjBRM05UZzJRa01pUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRwR016WXpSVEpGTlRGRFJUY3hNVVV5T0RGRU0wUkNRemczUkRjMU9EWkNReUlnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRHBHTXpZelJUSkZOakZEUlRjeE1VVXlPREZFTTBSQ1F6ZzNSRGMxT0RaQ1F5SXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9QbFg3NzlnQUFBSlhTVVJCVkhqYTNKUTVhNnBSRUlienFiaWdvcUJlTnlJMnBnaEVBblppSlpaMi9nTUxRWkJnb1lVRVhJSmdZeUQrZ1loWXhjSkd0REtRSDZDSUltS2h1SUFHRkhIZmw5eVh5UFY2RFpvVUtTNlpZamhIenp4bjVwMDVIMkV3R002K3cwaG4zMlQvSDRoeTdJL1JhTlRwZENhVENZVkNXYTFXNi9YNjE3dlZhalY0Qm9QeE9RZ3gxV3BWb1ZDWXpXYTVYRDZmejJrMEduNThmSHhNSnBNbWsrbjUrUmxiTXBtOEgwVWNkQTBuNnZYNjdlMnRRQ0NJeCtPbFVxbFFLRnhlWGw1ZlgrdDBPdVFva1VpQXR0dnRmRDUvbjNXbzBYQTQ5SHE5cjYrdmdVQUFGS1NHTFh3Nm5RYWR5K1dpV0Z4MmMzT0QrMDVscE5mclo3TVpTc0FhOFI2UGgwcWxMaFlMdjk5L2QzZkg0WEIySi92OVBpNDdDdHBaTHBmVGFyVmlzVmlsVWtFanNGd3VGeVQ3YXZzem1VeXIxY0xDYXJVdWw4dHNObnQvZjQ4dDhrSjJ5UEdySUlmRGdSZ3NOQm9OMnV4MnU1VktaVDZmaDNhUTF1bDBIbU1kZ2xnc2xzVmkyU2ExTlFqODlQUVVpVVF3VFNRU0NaSlhLcFhQUWVnRmhDQUlZclBaTkp0TmVPVGk4L2w0UE43NjNjQkMxaDlacEgxMUdvMEdXbzZiVVFLODBXaUVQejgvWjdQWjBHdjl4OEI2ZUhnNENyTFpiRXdtOCtYbEJZOEFCU0tBVHFmRHE5VnFlSXpmRGlRVUNrT2gwTkVuZ212UmwwUWkwVzYzUlNMUndibHV0d3NFRmxLcE5CZ005bnE5Z3dOa2pQOTJoWGJJWkxLcnF5czhqczIvVml3VzM5N2VvRG9veUFXamVFcHNESFEwR3NVTFdIMHc1SWhST0VFNTdCcFlzVmpzSXdqdHU3aTRDSWZEZzhIZzJFRCtMVzFyNC9FWWc0ZG03K3BLcFZMbGNoa2pQcDFPVDN6WWlKLzc4Zjh0d0FCRlQ1RzVZZithNVFBQUFBQkpSVTVFcmtKZ2dnPT0nLAogICAgICAgICAgICB6b29tOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQVlDQUlBQUFCdkZhcXZBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZNekkyTkRGRU56RXhRME5CTVRGRk1qaERPVU5HUTBORE9UWXpPREk0UkVVaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNk16STJOREZFTnpJeFEwTkJNVEZGTWpoRE9VTkdRME5ET1RZek9ESTRSRVVpUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRvek1qWTBNVVEyUmpGRFEwRXhNVVV5T0VNNVEwWkRRME01TmpNNE1qaEVSU0lnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRG96TWpZME1VUTNNREZEUTBFeE1VVXlPRU01UTBaRFEwTTVOak00TWpoRVJTSXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9QalVYdHNVQUFBSFRTVVJCVkhqYXpKVEhha0pSRUlaemM2M1lTMnhZc0t4MDVjWVhFSHdCZlFiM1BwZ2J3UmR3NjBvWHRvV29XQkFMOWk3bVF5R0VSTU5OV2VSZlhBNHpuTy9NL0dmdUVaTEo1Tk5mNlBucGovVC9RTEs3MGNQaE1CZ01sc3NsQzRWQ29kUHBuRTRuaSsrQlZxc1ZpRlFxRlFnRWpFYmpiRFpyTnB1NVhBNmNWcXQ5QkJMRDRmQ0hXdVJ5ZVNhVDRmeE9wMU92MTdmYnJkdnRUaVFTcFZMcGREcUpvaWpKby8xK24wNm5RVFFhamN2bFFrWG44N2xhcmJaYUxlSmtwWm9kajhmcHBkL3YwNFVnQ0ZENDZ2WDZYcTgzblU3SlNnWDUvWDRvYXJXYXd5Rk9KcFA1Zkw3YjdUUWFEWEd5VXMybUY3eWdLVGFmcnlLSVRTcVZpdEtpMGFqVWlxakNaREpoNm9mNDhYZ2tUbFlxYURRYWNVY2MvbnlWZU5WdDdmVjZ5K1V5bFVvQ0ZZdEZzOW5NQk1FUzN5a1lETnBzTnBmTDFlMTI3N0x1ek5Gd09JekZZbGFyRllQb2tVVWtFZ21GUXV2MSt1V3FRcUhBbmNwa3NxOUFhTEZZTUVSczhIZzhaTm5EM2RHYXdXRGdHSWZEWWJmYlA3TUU2ZThSUHczMHpXYkRHck95MmF6UDUzc2I5RHNWUFZLbFV1RWUrT1B3aUg2eGtnano5VzBRcXRWcXNHanF4cnJONmcvZkk1NkI4WGhzc1ZnWTNiZHlIcjVIWHl1ZnorT09VcW5rQi93VkNMWGI3WC8vWnI4S01BRFNCdTZzQVppek93QUFBQUJKUlU1RXJrSmdnZz09JywKICAgICAgICAgICAgZmxpcFZlcnRpY2FsOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQVlDQUlBQUFCdkZhcXZBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZNemM1UmtNM056WXhRMFkwTVRGRk1rRkdRems0TnpGRE16YzRNVFZCTVRJaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNk16YzVSa00zTnpjeFEwWTBNVEZGTWtGR1F6azROekZETXpjNE1UVkJNVElpUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRvek56bEdRemMzTkRGRFJqUXhNVVV5UVVaRE9UZzNNVU16TnpneE5VRXhNaUlnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRG96TnpsR1F6YzNOVEZEUmpReE1VVXlRVVpET1RnM01VTXpOemd4TlVFeE1pSXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9Qb1dHZy9NQUFBRkNTVVJCVkhqYTNKVE5ib013RE1mdGFWeUtWbHJZQ1U2OEFlL0NpL01RRTFKUkN1b2sxZ05DbnVNRXhnUUVKbkdhVWFJQThTOS9md0RtZVE1SDJBc2NaSWVCWHFjM1hkZTFiY3Z6cHB2bmViN3Y4N3dNU3BJa2p1T2RFc3F5cktwcUdjU1VvaWdRa1BRZ1F1UVprTjhna0t6MEpVdUFMTXRXUVd4QkVPeVJRKzRjc1lYWFVDVG92WVI2SUdvM2xIc1lGUkp0Z0tMM1NQYm9vU01EOFRQQm9EeEdPWWVvNzNzbktBckZHYTJ6NEF4SnBPRW83WGFyWEtBcmh6YWM3VEtFRGREYitRdy85VEd4MkFGRGVzQUc3TXlSZnpxdFZBbi8wTmxzWDg4bjZCekloTk5pR3lHbXMrWkZtNEUrSDQ5NU9yWVN0Z1NxNjhZMHI5UUt4OHNDTGRIMGxoTjByNVhlUnhZQ1EzYnBsN2dGa1RPUXVvTnRPclFsSTNIVGVabDhiUUNYNE9JQ05VMno4K3QzZ1pSU2FacnVCUEhtVmRDSDJILzVaeDhHK2haZ0FKY2FtcUIzRzBON0FBQUFBRWxGVGtTdVFtQ0MnLAogICAgICAgICAgICBmbGlwSG9yaXpvbnRhbDonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FJQUFBQnZGYXF2QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUF5SnBWRmgwV0UxTU9tTnZiUzVoWkc5aVpTNTRiWEFBQUFBQUFEdy9lSEJoWTJ0bGRDQmlaV2RwYmowaTc3dS9JaUJwWkQwaVZ6Vk5NRTF3UTJWb2FVaDZjbVZUZWs1VVkzcHJZemxrSWo4K0lEeDRPbmh0Y0cxbGRHRWdlRzFzYm5NNmVEMGlZV1J2WW1VNmJuTTZiV1YwWVM4aUlIZzZlRzF3ZEdzOUlrRmtiMkpsSUZoTlVDQkRiM0psSURVdU15MWpNREV4SURZMkxqRTBOVFkyTVN3Z01qQXhNaTh3TWk4d05pMHhORG8xTmpveU55QWdJQ0FnSUNBZ0lqNGdQSEprWmpwU1JFWWdlRzFzYm5NNmNtUm1QU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUx6QXlMekl5TFhKa1ppMXplVzUwWVhndGJuTWpJajRnUEhKa1pqcEVaWE5qY21sd2RHbHZiaUJ5WkdZNllXSnZkWFE5SWlJZ2VHMXNibk02ZUcxd1BTSm9kSFJ3T2k4dmJuTXVZV1J2WW1VdVkyOXRMM2hoY0M4eExqQXZJaUI0Yld4dWN6cDRiWEJOVFQwaWFIUjBjRG92TDI1ekxtRmtiMkpsTG1OdmJTOTRZWEF2TVM0d0wyMXRMeUlnZUcxc2JuTTZjM1JTWldZOUltaDBkSEE2THk5dWN5NWhaRzlpWlM1amIyMHZlR0Z3THpFdU1DOXpWSGx3WlM5U1pYTnZkWEpqWlZKbFppTWlJSGh0Y0RwRGNtVmhkRzl5Vkc5dmJEMGlRV1J2WW1VZ1VHaHZkRzl6YUc5d0lFTlROaUFvVjJsdVpHOTNjeWtpSUhodGNFMU5Pa2x1YzNSaGJtTmxTVVE5SW5odGNDNXBhV1E2TlVWQlJEUkRPVGt4UTBZME1URkZNa0kwT1VVNU5UaEVRekk0TlRGR05ETWlJSGh0Y0UxTk9rUnZZM1Z0Wlc1MFNVUTlJbmh0Y0M1a2FXUTZOVVZCUkRSRE9VRXhRMFkwTVRGRk1rSTBPVVU1TlRoRVF6STROVEZHTkRNaVBpQThlRzF3VFUwNlJHVnlhWFpsWkVaeWIyMGdjM1JTWldZNmFXNXpkR0Z1WTJWSlJEMGllRzF3TG1scFpEbzFSVUZFTkVNNU56RkRSalF4TVVVeVFqUTVSVGsxT0VSRE1qZzFNVVkwTXlJZ2MzUlNaV1k2Wkc5amRXMWxiblJKUkQwaWVHMXdMbVJwWkRvMVJVRkVORU01T0RGRFJqUXhNVVV5UWpRNVJUazFPRVJETWpnMU1VWTBNeUl2UGlBOEwzSmtaanBFWlhOamNtbHdkR2x2Ymo0Z1BDOXlaR1k2VWtSR1BpQThMM2c2ZUcxd2JXVjBZVDRnUEQ5NGNHRmphMlYwSUdWdVpEMGljaUkvUG5sOTJzd0FBQUZLU1VSQlZIamEzSlRKam9Nd0RJYnhxQnc2U0tWQVQzRGlEWGdYM2w5Y1JraEZMS0lqZWtISWs5Z0pvWFFoQjA3aklMUEZYMzdiQWNqejNObkR2cHlkYkRmUVlYa3pqdU13RE1KdmhybXU2M21lOEs5QlNaTEVjV3dwb1N6THFxcGVnd1NsS0lvZ0NLSkxGSVdYTUF4T3Z2OTlQQTczKysvdDFuVnQwN1JOM2JSZDIvZDlsbVZMMExzYWdSaGtTQTc1U3A3aDRmVW5FSWhaS2toUHB6aHlxUEJnMVRWQU1jQkVNSm5SakFKRUN4QktrbG9VbG8rRldMa0c4UzFTVThzRFBqRG1NMnUwVXdTY25KRkRVQ0VIcUlJcnBSOXFoSElBZVoyVGZqNHJzVXB0bFpXNlJXU2syUkFiSUZ3MkhvMm54RlNOMEU0UnpVZTlxVXhpWVBUWjFBZ2NrNXJxRGhkYm9vQzFnR05aYk43SldwRk9FRmJwYjlWSUJabk5yTEN5ajZLWlQ0em5yNyt1NnpSTnhjVTBUZGVxdWk0Kzd0bjg4MWtjUFBrdDZJZnN2L3l6ZHdQOUNUQUF6RGVkV3pzczRTZ0FBQUFBU1VWT1JLNUNZSUk9JywKICAgICAgICAgICAgY29tcGFyZTonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FNQUFBRFhxYzNLQUFBQVlGQk1WRVZUVTFPNnVycXJxNnRtWm1hd3NMQ3pzN054Y1hGd2NIQ3ZyNitvcUtpYW1wcGNYRnhYVjFkVlZWVnpjM090cmExcWFtcDRlSGhmWDErMXRiV2xwYVdpb3FLZG5aMlZsWldRa0pDS2lvcUVoSVJ0YlcxaVltSlpXVmwrZm41NWVYbHYwTWlmQUFBQW8wbEVRVlFvejdYUXlRNkNNQkNBNFE3ZGdVSmI5azNmL3kwZGhCU3hlakNHLzlLa1grWXdRLzVwMEZuMGwxR3NBVzhvNWtuSWFZNkJ5aWxnYWd5ZzRWbVp6eG9ERmlEWlFHVkdGRkltbjBDS2FZZDRRdndFUkg2QnBSQWlnbHJ6M0hZeW1tRDN0aklXZWl2ZllLUU54ODJybXowQkg2aHRLZ1JJbkg2RnRuQ3U1aXRBcmNvQUpUQjJIQkVPYVBjam1nMTBnTGxQTWNZWHY3N2RSTTZsNE1rbFBRQUFaQWZaYW5KemZ3QUFBQUJKUlU1RXJrSmdnZz09JywKICAgICAgICAgICAgY2xvc2U6J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQzRBQUFBUkNBSUFBQUF0OXdrWUFBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBeUpwVkZoMFdFMU1PbU52YlM1aFpHOWlaUzU0YlhBQUFBQUFBRHcvZUhCaFkydGxkQ0JpWldkcGJqMGk3N3UvSWlCcFpEMGlWelZOTUUxd1EyVm9hVWg2Y21WVGVrNVVZM3ByWXpsa0lqOCtJRHg0T25odGNHMWxkR0VnZUcxc2JuTTZlRDBpWVdSdlltVTZibk02YldWMFlTOGlJSGc2ZUcxd2RHczlJa0ZrYjJKbElGaE5VQ0JEYjNKbElEVXVNeTFqTURFeElEWTJMakUwTlRZMk1Td2dNakF4TWk4d01pOHdOaTB4TkRvMU5qb3lOeUFnSUNBZ0lDQWdJajRnUEhKa1pqcFNSRVlnZUcxc2JuTTZjbVJtUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMekF5THpJeUxYSmtaaTF6ZVc1MFlYZ3Ribk1qSWo0Z1BISmtaanBFWlhOamNtbHdkR2x2YmlCeVpHWTZZV0p2ZFhROUlpSWdlRzFzYm5NNmVHMXdQU0pvZEhSd09pOHZibk11WVdSdlltVXVZMjl0TDNoaGNDOHhMakF2SWlCNGJXeHVjenA0YlhCTlRUMGlhSFIwY0RvdkwyNXpMbUZrYjJKbExtTnZiUzk0WVhBdk1TNHdMMjF0THlJZ2VHMXNibk02YzNSU1pXWTlJbWgwZEhBNkx5OXVjeTVoWkc5aVpTNWpiMjB2ZUdGd0x6RXVNQzl6Vkhsd1pTOVNaWE52ZFhKalpWSmxaaU1pSUhodGNEcERjbVZoZEc5eVZHOXZiRDBpUVdSdlltVWdVR2h2ZEc5emFHOXdJRU5UTmlBb1YybHVaRzkzY3lraUlIaHRjRTFOT2tsdWMzUmhibU5sU1VROUluaHRjQzVwYVdRNlEwSTNOekExUkRBeFEwWTNNVEZGTWtKR01UVTRNVGM0T0VRMk4wTXpRamtpSUhodGNFMU5Pa1J2WTNWdFpXNTBTVVE5SW5odGNDNWthV1E2UTBJM056QTFSREV4UTBZM01URkZNa0pHTVRVNE1UYzRPRVEyTjBNelFqa2lQaUE4ZUcxd1RVMDZSR1Z5YVhabFpFWnliMjBnYzNSU1pXWTZhVzV6ZEdGdVkyVkpSRDBpZUcxd0xtbHBaRHBEUWpjM01EVkRSVEZEUmpjeE1VVXlRa1l4TlRneE56ZzRSRFkzUXpOQ09TSWdjM1JTWldZNlpHOWpkVzFsYm5SSlJEMGllRzF3TG1ScFpEcERRamMzTURWRFJqRkRSamN4TVVVeVFrWXhOVGd4TnpnNFJEWTNRek5DT1NJdlBpQThMM0prWmpwRVpYTmpjbWx3ZEdsdmJqNGdQQzl5WkdZNlVrUkdQaUE4TDNnNmVHMXdiV1YwWVQ0Z1BEOTRjR0ZqYTJWMElHVnVaRDBpY2lJL1BtVVcxb3dBQUFEcVNVUkJWSGphNUZXeENvUXdETDJXK3g0WC9RbUh1anZYelYwWGFkSE4zMUhVbjJnUi9LRDJBZ1dSQXl0RVRwVExFRjVlU2ZxYWFFdnlQSC9kdzk3VzJydElNY1k4dXl0S0tRZWlLUEtUUDVmU2RaMERTWktFWVFoQWE3MlNkVjBqYXBJc3kzRDlYUGRqaklIdis5NkZVa3BQRnFWMFZ3cm5IRDNkcG1tK0dDSEV3ZEVKMlZWcFRsaFZWZHRhRUI2bTJIMmo5b1ROODd5VkF1Rmhpa2Nsdml1dzhUQU1XeWtRQW9udUN2SmVXWlpsbWlhSHk3SUUzN1l0K0hFYzR6Z09nZ0JSRXptZ1ZVZFJGSTRCNEJoWXdnMklwR2w2NVpYcStabXZmb004MzhNZlA0ZlBHTkJIZ0FFQWk3Z3l1dkh1aFpjQUFBQUFTVVZPUks1Q1lJST0nLAogICAgICAgICAgICBzZWFyY2hCdG46J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQzRBQUFBUkJBTUFBQUJRdTROOEFBQUFHRkJNVkVWbloyZFlXRmhmWDE5cWFtcFVWRlRsNWVWalkyTmJXMXVhMEQ5d0FBQUFhVWxFUVZRWTAzV0t3UTJBSUJBRS9WaUFEeHNnc1FKYnNBQTBHYWdBT3lDMjd6ME8xd2ZNSlp2czdFMTduNkVYTTFIbHIra09SSnRVYjZkZ1FXcFZQaFZTa1E4T1llT3lkT1Q5bk9ILzQ5UmN5VFczS284RjhrdURjMW41bXZ3S05zbHJNQzEvOUJuNUZ4cXBVVGhZUUxFdUFBQUFBRWxGVGtTdVFtQ0MnLAogICAgICAgICAgICByb3RhdGVJbmRpY2F0b3JCRzonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFMb0FBQUM1Q0FNQUFBQ29STlZ0QUFBQlgxQk1WRVVBQUFDUGo0OEFBQUFBQUFBQUFBQ01qSXlQajQ4QkFRRUFBQUFBQUFBQUFBQUFBQUFBQUFCZFhWMkVoSVJ2YjIrT2pvNlBqNCtQajQ4QUFBQWNIQndBQUFCRVJFU1BqNDhBQUFDUGo0OTdlM3VQajQ4Mk5qYVBqNDhJQ0FpUGo0OWFXbHFNakl5UGo0OFFFQkFBQUFDUGo0K1BqNDl5Y25LT2pvNVVWRlFEQXdPUGo0K1BqNCtPam82UGo0K1BqNCtHaG9aNmVucVBqNCtQajQrUGo0K0RnNE9QajQ5a1pHUWhJU0dNakl3QUFBQXhNVEdKaVltQmdZR0xpNHVQajQ5bFpXV09qbzZQajQrUGo0K1BqNDhJQ0FpUGo0K0xpNHQ4Zkh4M2QzZVBqNCtQajQrUGo0OCtQajZPam82T2pvNEFBQUNLaW9xT2pvNlBqNCtLaW9xS2lvcU9qbzZPam80QUFBQ01qSXlBZ0lCcmEydEFRRUNIaDRlSmlZbUxpNHQrZm42TWpJd3BLU2tqSXlOTFMwdHVibTZGaFlWVFUxTmhZV0dPam80Nk9qb0FBQUFBQUFDRWhJUnJhMnRvYUdoYlcxdC9mMzlMUzB0T1RrNXNiR3pBYzBrRUFBQUFkWFJTVGxNQXpENFdCTUxJTVRrT1BDY2djYTZFeGcxSEJrYzBYQ1lTQnBteFZDSU1DVzRTbjBJcXZwU0tYa2tacXFWdFVrR3ltV2c1dzZ1YVowb3ZMU202cDV4NmVXUStMQjhlR3hhZGs0dUVmMWxOTkFxK3U3ZUZmblJaQ2JhamdURzFxcUtka1UxS1lYdHlaMTFXSGhRSWpuTnRVbEZQUGx2c28vbC9BQUFIMlVsRVFWUjQydFdkK1ZjU1VSVEg3L2VKSTJJTGd4RVFJWUtCRkpzSkxiUlJZRkJxbWxuYVhyYnYrLzkvbXFCNjV1QXMyQ3ozODZzZXpudjN2UG5NZmZmZG1TSG5VRlVLQklnbHNUWk5qUk5McWhHS2p4QkxDdk4wOVNxeFpHT0pKaWFJSlZ0Wk9qWkdMQ25tS0Jva2xvU2hoZ1JMTzJhQWhoQXM3ZGdBdmdyQjBvNFI0SlVRKzRnaFY0Q1BRckMwNHpMd1dBaVdkc3dEbzBLd3RHTVN3Q0hCMG80S2dNTXM3ZGlCeG42V2RseUZ4a0dXZGx5QnhoR1dkcHlIeGdHV2Rsd0N1Tm94QzNDMTR6ckExSTRKZ0tzZFV3QlhPOVlBcm5aOEMzQzFZeG5nYXNkRmdLc2RTd0JYTytiQTFZNHF3TldPTVlDckhhc0FWenNXQUs1MjNBQzQybkVMNEdySElzRFZqbUZ3dFdNRzRHckhCc0RWamhHQXF4MnZBRnp0dUF4d3RXTWU4SnNkcXlyRkE5WUsxTGJ0cUxZb0VDZkh5SlJxZ1RFTHY2L0F0aDFiV1RVK0ZpRG5hS0g1em53a0hjQ21IZFZsWlhVaTVPdzFzWXprY1JFZE55MVEyN05qYlIydm9rN2ZkZFYxS0xNem9YMW1CV283ZGt3MzNUa3hxd0dZdXlIR3Bvd0wxRGJzdUpvRXdrZEY4QzQ1VFJPQThrQ0VyaG9XcUMzYk1iR2g5UC9uQkRsT3VtZStVMGZGMkYyREFyVlZPN2FMMEhncXhERnlHSGtSaGkrTDBBbURBclVsT3liS0NqVFdEb21nZzE3VTc5N3VQeGZuSmcwSzFPWjJqQlhSNDRVUWNYS0ZSUEszOXFaRmNHUndnZHFTSGE4bzZESHI0bTZrb2Z4WkM0ZkVSR0NnaE16dG1DcWh6OXlNbXhsOUdiOVpleTJDOFFFRmFuTTdGc0xvbzNreGRKTmNJeUczemRkbnhJUitZbVoyWEpBU3VpeTk2QW94bVdCZE9Md3pNVmdFVE95NFdjY2Y3anZvUmZNYjVzN0VvQVFZMnJGekduOVpleTZDaytRcWNuejZ4Q0FIUXp0VzZwQzhsbDUwalZRWWt1MkpRWGNSTUxCak40OXRYUGVrMUZHQVJDWUdNcWJiZURUN0lycXZIOXlWM0Q5L21CRlI4Z0FwQ1prWUpKWXdtTFhabzhGOWR6T0wySTV5UTRTbXlBTVd3cEQwRTRPeExIYm42ZUhwSFA3aGdSQlh5Uk0yZDY3cDZXdXd3MFVoenBGSG5NWXVuRG80L2UzaHU2bXBiaXhTdmhUR1lFYWZTUys2VHFjK01KajdaODZOQk9ndjZVaGV3UUNtaFhoUG5sR0JqcE5IUXhPNmxHUmh1VDk0Nzcwb2taS1dqaHpvak5UT3hYVkI4MktBUEtTYjB3dHlGeXJoSGVsa2FKdzhaV1Y3SUcrSXFJR21ZMGxmZUhGUW1qaW5lWDNTdU93bkY1WWZEZ3d5dVQ4alB5VE1hb1pxY1pzWFA1RG5SSDZ2bHJNV0xydE0wbGVGNjVhZGRDUVdscW11OXhSdGJkTXEvWXhSaUNoNVRzUm1PcUw1M2NsQ25mM1UxL3F1UHFWQVk4NEhZVS8xNy80MmJ1ck5mc0hMKzhPeGVSbDBpeXdvMExqdS9mbDcwWDdpbmUrNTFNTVZvN1lqVjI0L3lVbE4yN3l3UncrY1BIam0rUG1SOFFDNVJqcFcxY1o4NjkraVlpaGc0d2NVU055WlFTSldMZHk1Sk1jOGRFSWk4MS9IWjVCSXRiUXgzNE9lNFlyTTg1QTROWVBFUW10VEc3TUNBK1JTdDkyMzRjZ01FcW1xWVp6MVJlaGhtaUQvN3d6U01UbG15endYWW5LWUhxWC9OQU0xRnBIZXNNbU1FUFljQmNtd001Qit2b1U5SUd3T25TRFp5d3pVWDB0azYzRVlQWHdjOVQ3aFIvZXZ2M3h6L1B6N3FZQmNnTzFmcXp6Wm40S3YxbnFmQ3hldnZ6eHovT0hJK09UdXY5dlFGcEFVb2tlR2theWRPbkx3ODVlSEorTFc5N0xkeHNyOGJla2FsN3d1R1oxN092dnB6ZmVyOFpzMExKM1ZsYkoyR1N1QU0zZFQ4OFc4OXh0cnJWS1dKdHA3RG1OL01lODluNm05ZmJYMU9JZTlaNDc2eGV3TzZWUnJjMlByOGVndyticHVNWHREZG9oZGtrOTZmVmVIMkp2NnBRQ1d0OXZwM2Z4ZFh2ZSttdEdwMjZ6RCtDYm9SSnMycTE4K1dlazl5dlpyanYzZVFPK0o5QVpqdGRMcm4rWHk5emhwemNvcGFEZUpIdFArR0hyZXpxbUdIMDU3QjV5Mnp6MFRVYXRuU2ZmbFplMFpxZkJ3SjNpWFBTK3dKMHJZaG1MbDNGVDIyWG5ybUxMTjAyci9QSy9VVU96MENQaWxHVVkyVlZ2dnpQQkhDMUtQWmV6Q3FkbjlXai9NZUtiYlhpbGZVakNZT1E4enNDcUdSdTVwUFNGelM5ZEE5Y0J3cE5PaitKY1hYblZuYk9GZnJwMFZ4ellWN0lZbXpvZjVIVHZwUTk3MHhGUWdrYzNzclRvRzhxamYrVnVwKzZBVGFhR3VDL2xrVCtCRjZKSFBBM1d5a0hqVUxKRFZoN3hQV3UrZCswZkZ1Yiszem9JQ3lkcFpFWFI3eWN6clEvNlhIQXlmZUlpVklIbnFlZzk0VzlHRlhGSXl1ZWNueW9wM3ozU21rN3FRRzdUZTYrc0ZqYVJualpyTkFTR1hiSmcrTlVEcHBrZnRzVFdEa0d1OHRWTEVycTE3a2JxcjZ3WWgxMmhaT2pwUWx6eEkzUmNOUWk1N1pNeWYyb3prM0U3ZFZ3eERycEVlN0VZOTNieTdxWHVuYmhCeW5kaE5nbHFwdTVtNm41WWhONy9UbXRaU08xbjNVdmVDV2NnMWxnemNxS09ndUpTNnh4U3prR3VVYlIzd3hVcXVwTzZKSXZEVU9PUWFGWE0zN2t3TTdqbmV6cjZCV3o5TVFxNVJNM2VqTGpHNEUzVTJkVi9GNGp1emtHdWt6TjJvU3d5VTFrUW9UbzZobGlLQnNSRXlKVEZFcmFoV2N2VEZFOVVNdmJlVTVhM3IzR2lPV3FXQUQ5cXJzd0RYOXpndCtlLzlNRmFaNS90V25ncmZkeUhWK0w2QmFzRS9kWFM3SkJTMmIxdWpkYTV1SkRyTjFZMmEyTG02VVJNN1Z6Y1NyWEIxSTlFcVZ6Y1NkZGk2a1VqaDZrYWlKRmMzYW1MbjZrYWlaYTV1SkxyQzFZMUVFYTV1Skdxd2RTTjEyYnFSeUVkTnBIWkpjblVqVVo2ckc0bWFYTjJvaVoyckc0a2lYTjFJMUdiclJzcXdkU05SbUtzYmlZcGMzY2o2UzV0TnZ0ODNMZkQ5cWl6amIvbTIrWDVCV2VYNzNXcXFRdzJ5ZEdQdkcrMWpMTjFJdE1qM3kvZ2JTN1NQcFJ1Sk51ZnBCRXMzRWxVakZHZnBScUpZbTZaNHVwRlVsUUpPdXZFbmdwNzIwOG5pOVp3QUFBQUFTVVZPUks1Q1lJST0nLAogICAgICAgICAgICByb3RhdGVJbmRpY2F0b3JQb2ludGVyOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQURRQUFBRHhDQVlBQUFDRVhaVHNBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZPVFEwUmpNMk4wWXlOREpGTVRGRk1qazFRa0ZCUkRJd1JUVTRPVGRCUkRnaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNk9UUTBSak0yT0RBeU5ESkZNVEZGTWprMVFrRkJSREl3UlRVNE9UZEJSRGdpUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRvNU5EUkdNelkzUkRJME1rVXhNVVV5T1RWQ1FVRkVNakJGTlRnNU4wRkVPQ0lnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRG81TkRSR016WTNSVEkwTWtVeE1VVXlPVFZDUVVGRU1qQkZOVGc1TjBGRU9DSXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9Qc2Z5cjZZQUFBclpTVVJCVkhqYTNKMWJieU5KRmNmTDdjVDI1RDZKYzJFbXppWVpWcUJoR0ZaQ0NCQURnbjBjSHVZRmFTVWVrR2JlUWJ2d2xza0gyQmV5Q0FrZWVFRDdBVUJvUVB1T2hCQkNnb1daWllVeXVWOG1rL2lTeEhaOHljVnVUc1Z0dVRmRWRsWFhPZFhWWFZKUE9uSDc4dlAvMUw5T25hN3VpZGkyemNMVUxCYXlGanFnSHBHRGZoT0pxTDdQMERMOHM4UlltZi95VThZdVpKNjhkT1gzVHQya1I5TVg5d1pzL0Z2WmRINHYrS29RUXB0MmdQYkRBalRqL1B6VWlENkVDSFFqYkVCOVlRTktoR0VjR29XdG4yOHB4bTd5THhGc09CWmtvSlRMNnNhb2xiSTBoaHVuR2FjMkI2MUFnNHhOaEFvSUxDNUo3WFphZ1JLdGtBdDBIN3JkM0ltMUZBcHN5RTI0d3d1U3VkZ3NZOE93RzZXeWJtcWc2V3ZrSWxXSkdtajI2aCtTclg3VUZ3cUZCZ0t1MEJ0WC93Q3lURkk2blhhRllxMzBKM0FLV2U0OHpnMFVkWUNXR3JQWXdBQk5zbXVzR1FoNjV4cFp0OFVJckpzU2FLYkRTRXZtZEw0QTNTVE11aTJkaHVDeWJyS2N6aGVGYmhDT1JiNEF4UU1JRkhWbjJWZGJMd0RGR3UrZHdMWnVLcUJickVORkNRaXMrVWJ4eE1MdVIxUkFxVzRIZkk3STZhaUFwcnNkTU5McVI0RlFhTGJiQVFOaFU0akt1bjFUS040cWFmV1pEZ1N1ektZRURocEpOT3c5dm9UNE9TaUFiZ3UrcnZWbUkrd2ltTVpBQVpRU1BYQ0N3T2tvZ0daRUR4d2hjRHBmZ1FZSVNzTytBaVhDcGxDY1lGNkVEY1JyQk9PaUIwUDJPanpZc1BrRWxuVmpBNlVrWHpNeWgzeFd6L0lyM0pwdEVya2YrUTQwZ2x3QjhoMm8zM0NGVXJKUFNCZ09OQzM3aEJoeStvTUoxTWRhVXdMaEJ0WTlOTkt3ZTU1MVIwMENtdmI2eERuRUFSWVRhTmJyRXljUm5jNEloWVlRcCtPWVFETmVuOWlQdU1JRUV5amw5WWtKeFBUSENJVmlCdlloU0pvdno4cDVhdURWQStNTmRYcVhGQmNsV242cjQ3SnVsSDVrREZBU0tRWENBcHBXZlFFczZ6WkdvYjZ3QVNVTUN6bGxvSmhCUURjZDIxWWRQMjdjdWl6VlhTNkQ3dlVUS0lXa01sL3BwTnlQTUlDbXNZQkdFU1o3R0VDeldFQkRDQ21RVVFyMUdSSnlhQW9sRU5JZm94VHFSWmlLcXdJbEdlNnBrT1l5YU05WHNLZ0NvVmwyczkxU25PeXBBczFnQTQwcE9wMXhRSU9LS1pCeFFLcldiVndmaXZ1b1VBVFRzbDFaZHpMaUU5QUVJMWd6Nml5REh1R2ZiZWxTTUgxQTZQMm4yVlN1WURFU2FGUWhCVElTYU5BbmhWSlVRRGQ4VW1pYUNpaXVjQVdMVnlDTFVpRytETHJIV1hZbXV3emFLOUFVVXloa0NGaDNkTDUxQlV0Y0I5QXNJMjYzUFM3aHRFenJQODNtZFJtMFY2QVVOZENBUjZmekNqUkREWlJvWEVvUUtpQnRDdlUwWnNxMERTeDBOTjY2Mk1PaUJPTExtS09NdmxtZmJ3eXdVc3VnTFJNTndUWFlTWmUxakFieXNnemFNdEVRbXEzZlE5WnRORkFpYkFvbE5DakV5N09UdW9CZ2ZMalozeGdtNHFLZlZSWm9tdW05YTJEa2p1UVZMRjZBdExZSnliQ1RCWnJWRFNScjNjWXIxQjgyaFdRTEpzWXJGQ05VaUx2TXVHNGdmZ1hMc0xNTVd1VHp5Z0NsR01FOVJFVGFuRVJaU3dab2h2blVKaVg2VVNDQWhpV3UxZXVoQUxJWnEyVVplN0hPMkNkcmpIME1QOWVoOHhXL0NaOE5Pc05YNFBIdndUZjViZEdKWXIvRXZLaEhzZzkxYlFEeS9IZU0vZkZmakwyRVh6ZHMyNjY2SGk3Q3RndmJSeitMUlBnWDlCNXJnS0ZsM1JZV0VIenI5VThaKzhOVHhqNEVtSDhBeUgrdndIeW0vZHkydDlubGZaRFpyeHRQeDdGdVVTQitXOCt4VGdlOFlPejN2MlRzTDdDN0NpQ3ZSRjRVb0d6WWZndTd2K3AwSE1UbDRHZ2ozR0xkd3RUQzZEOXB4djRKWC9QZitDNTh4dGV5blI2Z1BvUWZmKzFpM1VJcUtRTkJySnhEbi9rSWR1dTh6eWlZMlM5Z3EzWEl1b1VXWkNnRGdUclBuek4yRExzWlVPZlVLdzJvdE5GSnBTRkJwN05VRFdHVnNmODR1em1FSWVmUEF0YU5vbERicFBUdnJURER1Q240aTNZUHhBVVhOWWtDdFpzMjJNdU5zWVhmUi80TUFTamJBVWpvZkpIUXdGcis0SVAyZnI2NEdDMlZTclZJSkdJQlZGMnB5ck93MEhhTlhMME9MLzMrKzJqVGg2MTJSWXo1K2ZraFp4L2pGR1d5M1FPbnA2ZE45U29ZUUx2dEhyaDc5MjZ6ZncwaUFIMngzUVBWYWpXRENiVGQ3b0U3ZCs3Y2MzYkhFSUMrMis2Qms1T1RKbENaRkNpWlRMNTE3OTQ5dnRob0hQcFIzQ3ZKMDZkUElSbGczMnIzZUtGUWFBNExWZEtRQTRqZVI0OGVmZDk1clRrRmRYN1NLVTlMcDlONlFzNVI2YXRQbmp6NUJzOVFBSERLZ3pvLzZqYU5XRnRiUzJNQzhiSG1xTk1CRUhZL2VQejQ4ZGRoOTAwWktJRDVJZno0Y2FkamFyVmFHUlRpb1hiT3V2eS9LeklUdkIzVzRVcElQZzdkdjMvL25jWEZ4Uzg4ZS9ic1QvQTduK0N0dDh2dkFJVG5oKy9DOXAxdWJ3eVdMYVNPTEJEdlIvZTdIVFEyTnZZV0tQWGxUQ2J6OGZyNitpY1BIano0OS9MeTh1clUxRlRwNGNPSHc5Rm85RXNBK2JabFdXK0xUc0hCc3JNVVFKdWlCNEk2MFltSmlhL3hyZmszQUhRL0x0WEhYSmJkRmNpU1ZNaVhCcGFkRmJGc1dhQWR2NEFPRGc2RUJsVlpvRzIvZ01DeXN4UWhWNEx0VURjTVdQWkpOcHZsb1hiV2FZcnVCY2lYc0FQTEZqWUVMMERhdzY1U3FZUUxDQ2FQd2c3bkJlaVZicUI4UHArbFZHaFROOUQrL3I2d1pYc0IwajY0cnE2dVppaERydHlwTWtOZzJZV2pvNk16VWN2MkFxVFZ1bVdTVWhVZ2JVNG5hOW5HSzFRdWw2VXMyM2lnNCtQanJJekRHUjl5WU5ucFVJVWNXSFpPQnhDUDV6UTF6TVhGUlI1Q2p0czFyMG5VS1lHMERMQ2l0V3dzSVBJVUNDdzdMZXR3S2tEa1NTcGsyVG1kQ3BFN0hhUThVa21wOFVDdUxGdUxRdHdVS1AvTGQ5dGwyVnI2MENtbGRaK2ZuK2NMaFFLdlkxY1hGaGJxT29CSXcrN3M3Q3pqUlIxamdWeEphVVVuRUpsMXV3b2pXb0hJQmxldzdMUWZRR1RwRDFoMnppK2dPZ0dQdmJLeWtuV0dCYTJtd0RQaEF3TExQam81T2VHbkhVOWxMVnNWaU1UcHZHYlpXRURva3ozSXNxWHJDRVlEUWJoSjF4R01Ecm5EdzhOMHFFTHU0T0FnNTJmSXZVSzI3dnJ5OHJKbnk4WUE0aG54UHFKbEg0TXAxTHhhTmdZUWFnb2tlL3FSQ2dndFNWWEpzakdCMEp3T0xEc2RLaURJc28xUUNNMjZYNzkrclpRbFlBSHRNY0d6YTkwcysrWExsemtWeThZQ3VuQ2dWT3NJUjlWcXRlNmxNSUlOaEJKMkdKYU5DYVE4ZTNWbDJVWUFLUSt1eFdJeEhTcUZJTXRXZGppait0RGUzcDVSSWJmSHVpdy83bGdWc2UzNnlzcktvWk81RzZGUVRTV25neXc3QzdaZGQ3SnMyd1FncFg2a1doaWhBdktjMDdteTdISW9nTUN5UFo5dE1ETGtJTXZPbVFpMDVkbnpkM2JTSm9iY3ZsTmprTFhzMnRyYTJwRmoyYWNtQWRXOWhCMVlkZzQyMjhteWJaT0FQUFVqTDR2OGRBSkpPeDFZZGpwVVFLNWFkdFZFSU9tUXkrVnk0UW81c0d4UFMyQjBBZkV6ZXNJWHVZTmxYN2dzKzh4RUlDbnJoZ3c3VjZ0ZEZvd3FHSlpOQVNUVmp6Q3piRW9nNGZwQ3FWUTZ3SFE0M3hVQ3l6NE1na0xDOVFXdzdIUVFnSVN0ZTN0N094QjlLQzNTSjhDeXo4R3krZTF6NnVCd3B5WUQyU0lGRTdEc0xFQ2hxa01GSkJSMm9yZmtDQXdReHVsSG5VQmRyYnRZTEtKbTJkUkFYZXNMMld3V05TbjFYU0VLeTZZRVNuZjZvUHkyVXhzYkczbllyWUZsbndVQnFLTktQQ21sc0d4cW9HMEJ5NjZHQXFoU3FlUW8rbzl2SVZjb0ZESkJCR3FyVUtaMXg1VnlLSUIyZG5heVFleER1ZXNVcU5mcjNMTDU3UTh2c0MyYkd1amFmcVJ5NVlrSlFKdTZzbXpmRklJc094ZGtvUCtyTCtUeitYU1FnYlk3Wk5uaFVBaXk3RnlRVFlIWDNVb3V5NjV1YlcwVnFTeGJCOUJud283YXNyVUR1ZGJFbFlNTTlPcWF3a2lnRmRwMFdYWW1EQXJ0dXJMc2JLajZFRGdjU1dIRTNYbzBBUEg2OWVVOXVYZDNkL2srQThzK0R6S1FXNlVLOVJ2cEF1SVpReVJzUUtGU0tMUWhWdzJiUW1YcU40bzRKZG5RTkl1RnJJVU82SDhDREFEdEtPNVNvWkFBU2dBQUFBQkpSVTVFcmtKZ2dnPT0nLAoKICAgICAgICAgICAgYXJyb3dUb3A6J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBREFBQUFBZENBWUFBQURzTU85dkFBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBeUpwVkZoMFdFMU1PbU52YlM1aFpHOWlaUzU0YlhBQUFBQUFBRHcvZUhCaFkydGxkQ0JpWldkcGJqMGk3N3UvSWlCcFpEMGlWelZOTUUxd1EyVm9hVWg2Y21WVGVrNVVZM3ByWXpsa0lqOCtJRHg0T25odGNHMWxkR0VnZUcxc2JuTTZlRDBpWVdSdlltVTZibk02YldWMFlTOGlJSGc2ZUcxd2RHczlJa0ZrYjJKbElGaE5VQ0JEYjNKbElEVXVNeTFqTURFeElEWTJMakUwTlRZMk1Td2dNakF4TWk4d01pOHdOaTB4TkRvMU5qb3lOeUFnSUNBZ0lDQWdJajRnUEhKa1pqcFNSRVlnZUcxc2JuTTZjbVJtUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMekF5THpJeUxYSmtaaTF6ZVc1MFlYZ3Ribk1qSWo0Z1BISmtaanBFWlhOamNtbHdkR2x2YmlCeVpHWTZZV0p2ZFhROUlpSWdlRzFzYm5NNmVHMXdQU0pvZEhSd09pOHZibk11WVdSdlltVXVZMjl0TDNoaGNDOHhMakF2SWlCNGJXeHVjenA0YlhCTlRUMGlhSFIwY0RvdkwyNXpMbUZrYjJKbExtTnZiUzk0WVhBdk1TNHdMMjF0THlJZ2VHMXNibk02YzNSU1pXWTlJbWgwZEhBNkx5OXVjeTVoWkc5aVpTNWpiMjB2ZUdGd0x6RXVNQzl6Vkhsd1pTOVNaWE52ZFhKalpWSmxaaU1pSUhodGNEcERjbVZoZEc5eVZHOXZiRDBpUVdSdlltVWdVR2h2ZEc5emFHOXdJRU5UTmlBb1YybHVaRzkzY3lraUlIaHRjRTFOT2tsdWMzUmhibU5sU1VROUluaHRjQzVwYVdRNlFqTkZNa1ZHTURFeVF6STBNVEZGTWpnM1F6UkZNekE0UlVNek5VVTFNMFVpSUhodGNFMU5Pa1J2WTNWdFpXNTBTVVE5SW5odGNDNWthV1E2UWpORk1rVkdNREl5UXpJME1URkZNamczUXpSRk16QTRSVU16TlVVMU0wVWlQaUE4ZUcxd1RVMDZSR1Z5YVhabFpFWnliMjBnYzNSU1pXWTZhVzV6ZEdGdVkyVkpSRDBpZUcxd0xtbHBaRHBDTTBVeVJVVkdSakpETWpReE1VVXlPRGRETkVVek1EaEZRek0xUlRVelJTSWdjM1JTWldZNlpHOWpkVzFsYm5SSlJEMGllRzF3TG1ScFpEcENNMFV5UlVZd01ESkRNalF4TVVVeU9EZERORVV6TURoRlF6TTFSVFV6UlNJdlBpQThMM0prWmpwRVpYTmpjbWx3ZEdsdmJqNGdQQzl5WkdZNlVrUkdQaUE4TDNnNmVHMXdiV1YwWVQ0Z1BEOTRjR0ZqYTJWMElHVnVaRDBpY2lJL1BsdkNqVkFBQUFEL1NVUkJWSGphMUpqUkRZUWdESWJaZ0JFWXdSRWNnUkVZeFJFY29TTXh3bzNnQ0hjKzBNUVFQQ2dVS0NUL0c4cjNHVzBScGZvTmZjZUhhTFhZUVBodnlGSVNKb0ovU2hqcDhOdWRLd0dQdWNLY0plRkZTOWhDK0tlRWxRTHZDT0J4M01ydzB5Vk9CbmpNT1JvZUdPRXhJQkVlS3VZUDY2NFVHSXBFbDY3ZEFqOWR3akRBMTBvMGJ6MUt1eXVsbWxDcVYxUFhwc0s3VHYyalNzSjJoSytWc0QxdTNOcEoyZGNhQ2MrK0p2WGoyaG5MOU41YUxHQlVaV0FzR2lBSnZrbkNDNEd2a2ZDNFRjaGQ4Qm44RzdpRk5YTVBWSmRZenpvUytiZi9TcjROVGhCOFR1SzFsQjRDRDZOaWlhUGtoMFhhU1JwS1FPbGtpY2VBU2E2ZkFBTUFEZ0hSZHZIalNaMEFBQUFBU1VWT1JLNUNZSUk9JywKICAgICAgICAgICAgYXJyb3dCb3R0b206J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBREFBQUFBZENBWUFBQURzTU85dkFBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBeUpwVkZoMFdFMU1PbU52YlM1aFpHOWlaUzU0YlhBQUFBQUFBRHcvZUhCaFkydGxkQ0JpWldkcGJqMGk3N3UvSWlCcFpEMGlWelZOTUUxd1EyVm9hVWg2Y21WVGVrNVVZM3ByWXpsa0lqOCtJRHg0T25odGNHMWxkR0VnZUcxc2JuTTZlRDBpWVdSdlltVTZibk02YldWMFlTOGlJSGc2ZUcxd2RHczlJa0ZrYjJKbElGaE5VQ0JEYjNKbElEVXVNeTFqTURFeElEWTJMakUwTlRZMk1Td2dNakF4TWk4d01pOHdOaTB4TkRvMU5qb3lOeUFnSUNBZ0lDQWdJajRnUEhKa1pqcFNSRVlnZUcxc2JuTTZjbVJtUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMekF5THpJeUxYSmtaaTF6ZVc1MFlYZ3Ribk1qSWo0Z1BISmtaanBFWlhOamNtbHdkR2x2YmlCeVpHWTZZV0p2ZFhROUlpSWdlRzFzYm5NNmVHMXdQU0pvZEhSd09pOHZibk11WVdSdlltVXVZMjl0TDNoaGNDOHhMakF2SWlCNGJXeHVjenA0YlhCTlRUMGlhSFIwY0RvdkwyNXpMbUZrYjJKbExtTnZiUzk0WVhBdk1TNHdMMjF0THlJZ2VHMXNibk02YzNSU1pXWTlJbWgwZEhBNkx5OXVjeTVoWkc5aVpTNWpiMjB2ZUdGd0x6RXVNQzl6Vkhsd1pTOVNaWE52ZFhKalpWSmxaaU1pSUhodGNEcERjbVZoZEc5eVZHOXZiRDBpUVdSdlltVWdVR2h2ZEc5emFHOXdJRU5UTmlBb1YybHVaRzkzY3lraUlIaHRjRTFOT2tsdWMzUmhibU5sU1VROUluaHRjQzVwYVdRNlF6ZzRSVUZFUkVReVF6STBNVEZGTWtKR1JUVkVOVE0xUlVGRVJVRXlOak1pSUhodGNFMU5Pa1J2WTNWdFpXNTBTVVE5SW5odGNDNWthV1E2UXpnNFJVRkVSRVV5UXpJME1URkZNa0pHUlRWRU5UTTFSVUZFUlVFeU5qTWlQaUE4ZUcxd1RVMDZSR1Z5YVhabFpFWnliMjBnYzNSU1pXWTZhVzV6ZEdGdVkyVkpSRDBpZUcxd0xtbHBaRHBET0RoRlFVUkVRakpETWpReE1VVXlRa1pGTlVRMU16VkZRVVJGUVRJMk15SWdjM1JTWldZNlpHOWpkVzFsYm5SSlJEMGllRzF3TG1ScFpEcERPRGhGUVVSRVF6SkRNalF4TVVVeVFrWkZOVVExTXpWRlFVUkZRVEkyTXlJdlBpQThMM0prWmpwRVpYTmpjbWx3ZEdsdmJqNGdQQzl5WkdZNlVrUkdQaUE4TDNnNmVHMXdiV1YwWVQ0Z1BEOTRjR0ZqYTJWMElHVnVaRDBpY2lJL1BsN3RLemtBQUFFVlNVUkJWSGphMUpqUkVZUWdERVM1Q2l6aFNxQUVTN2dTVW9vbFVBSWxVY0tWUUFtUkQ1aGhQQlhEa1Jnems3OVYzdUs0Um96NUxaODZwSjZNbnBveWsyOEpsOVNZVzR1SkFsKzRsaU1oVkNJdEpyYndwV0VydEtuamp2Qk9FMGZ3bUZsdExUeUNMLzJ0THhBb205YzhZNHBsWTBORHVPdWFHVDVlWkFvbGRWQ0pDUW84MXFta3dVUTNmQ2xITkRFUGhKK0o4STRTcFdjTkErQ0hyeWxwZ20ydEQvR1JBak44ekV5c0x4VXd3bHVwWkhBWDd1bWtFKzlOK05oaFkyS2t4SFhJYTdQUEpWZE5VT0dIejEvL21MZ2R2bmNuZllkZXBEd3h2MVhCOTZUSmlQUmlLUmdBRCtibWdpZkQ5NDRlWGFPQmxqOHBxVDg3RmhPcTRWdWp4OURSUVBwSVJOdEpIOGtFSy93TEVjMlRheFZnQUJoWDFEaWVmOHdGQUFBQUFFbEZUa1N1UW1DQycsCiAgICAgICAgICAgIGFycm93TGVmdDonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCMEFBQUF3Q0FZQUFBRHRvWEhuQUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUF5SnBWRmgwV0UxTU9tTnZiUzVoWkc5aVpTNTRiWEFBQUFBQUFEdy9lSEJoWTJ0bGRDQmlaV2RwYmowaTc3dS9JaUJwWkQwaVZ6Vk5NRTF3UTJWb2FVaDZjbVZUZWs1VVkzcHJZemxrSWo4K0lEeDRPbmh0Y0cxbGRHRWdlRzFzYm5NNmVEMGlZV1J2WW1VNmJuTTZiV1YwWVM4aUlIZzZlRzF3ZEdzOUlrRmtiMkpsSUZoTlVDQkRiM0psSURVdU15MWpNREV4SURZMkxqRTBOVFkyTVN3Z01qQXhNaTh3TWk4d05pMHhORG8xTmpveU55QWdJQ0FnSUNBZ0lqNGdQSEprWmpwU1JFWWdlRzFzYm5NNmNtUm1QU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUx6QXlMekl5TFhKa1ppMXplVzUwWVhndGJuTWpJajRnUEhKa1pqcEVaWE5qY21sd2RHbHZiaUJ5WkdZNllXSnZkWFE5SWlJZ2VHMXNibk02ZUcxd1BTSm9kSFJ3T2k4dmJuTXVZV1J2WW1VdVkyOXRMM2hoY0M4eExqQXZJaUI0Yld4dWN6cDRiWEJOVFQwaWFIUjBjRG92TDI1ekxtRmtiMkpsTG1OdmJTOTRZWEF2TVM0d0wyMXRMeUlnZUcxc2JuTTZjM1JTWldZOUltaDBkSEE2THk5dWN5NWhaRzlpWlM1amIyMHZlR0Z3THpFdU1DOXpWSGx3WlM5U1pYTnZkWEpqWlZKbFppTWlJSGh0Y0RwRGNtVmhkRzl5Vkc5dmJEMGlRV1J2WW1VZ1VHaHZkRzl6YUc5d0lFTlROaUFvVjJsdVpHOTNjeWtpSUhodGNFMU5Pa2x1YzNSaGJtTmxTVVE5SW5odGNDNXBhV1E2TlRrd05qSkROVGt5UXpJME1URkZNa0kwTnpaRk0wTkVNVFJDUVVVNE56QWlJSGh0Y0UxTk9rUnZZM1Z0Wlc1MFNVUTlJbmh0Y0M1a2FXUTZOVGt3TmpKRE5VRXlRekkwTVRGRk1rSTBOelpGTTBORU1UUkNRVVU0TnpBaVBpQThlRzF3VFUwNlJHVnlhWFpsWkVaeWIyMGdjM1JTWldZNmFXNXpkR0Z1WTJWSlJEMGllRzF3TG1scFpEbzFPVEEyTWtNMU56SkRNalF4TVVVeVFqUTNOa1V6UTBReE5FSkJSVGczTUNJZ2MzUlNaV1k2Wkc5amRXMWxiblJKUkQwaWVHMXdMbVJwWkRvMU9UQTJNa00xT0RKRE1qUXhNVVV5UWpRM05rVXpRMFF4TkVKQlJUZzNNQ0l2UGlBOEwzSmtaanBFWlhOamNtbHdkR2x2Ymo0Z1BDOXlaR1k2VWtSR1BpQThMM2c2ZUcxd2JXVjBZVDRnUEQ5NGNHRmphMlYwSUdWdVpEMGljaUkvUHMzbW0wc0FBQUVIU1VSQlZIamF4TmhoRGNNZ0VJWmhNZ09WTUFtVk1BbVZnSlJKUUFLU0ptRVNKb0hSaFNWa05JTTdvQy9KL1dyU0oybmhBODZFRU15azRXTTlZaTNGazBub0RvWlVyMWpyYk5SbFlBN2JXYWc5QVBPNmowWnI0TGY4S0hSckJNTm5jZzFBMS9UUDJzQjlObmVpY3JEem4xNVZZQWU2cEJlMWdNOGlJQlNvQkN5RFFZbjJnUXJVZDROQ2RBd29RSjFnOGQrcWIydEFyUUMwVGQrc2dvNEhLK2cyQmZ5RFN1TE5pcVBsQUpXQVRoV2dQNmdrVDcxNm04aFFTYnpwd1F3OUQ4elE4OEE0TG9ZWTVPZEZKaEsyWkxCd3dHSVFDM3hzYThNMmNleTRnaDNNc0NNb2R0akdyaFhJQlFxN0ttS1hZdXo2anpVNnNKWU8xcnpDMm5SWVE3TGFlbjBMTUFDYkVsTlpWWDRlcFFBQUFBQkpSVTVFcmtKZ2dnPT0nLAogICAgICAgICAgICBhcnJvd1JpZ2h0OidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUIwQUFBQXdDQVlBQUFEdG9YSG5BQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZOME01TWtVeU1FSXlRekkwTVRGRk1rSkVSRUU0TXpGRE5ERTJPREUwT1RBaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNk4wTTVNa1V5TUVNeVF6STBNVEZGTWtKRVJFRTRNekZETkRFMk9ERTBPVEFpUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRvM1F6a3lSVEl3T1RKRE1qUXhNVVV5UWtSRVFUZ3pNVU0wTVRZNE1UUTVNQ0lnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRG8zUXpreVJUSXdRVEpETWpReE1VVXlRa1JFUVRnek1VTTBNVFk0TVRRNU1DSXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9QcnF0VHpvQUFBRFZTVVJCVkhqYTVOamhDWU13RUFYZ293czRnaU4wQkVkd2hCdkZFVHBDUnNvSWp1QUlOc0lKcGZnam9aZjNZaE40LzRRUGdqNlRFN2xlUTBwTUNRSmF6NVF0WmJkVWgvVUxQUE9xQlM0WDJHZlVFeHRzQy9lTXFDY2FNOUVqTXdQZTdHWHJDeDQ5NFRVVGp2WjhsWUpvRmhZR0hQNENuZ3JLdzdXbnRRRFc3dUNaQWJ2V3BkZ0xRNEVEbzZkTFlOZTZ2QWY4a0JzditQWTJDN3A5TXZCeTBGWkJ0OEtILzlyZ0lQeTRBaitZTlExR0J2aHp2Y0V2VVBDckl2eFNUTG1Gd3djZGxKRU9aWGhGSGRQUkJwS1EwZXRiZ0FFQTVUWEhCS2J2MUlrQUFBQUFTVVZPUks1Q1lJST0nLAoKICAgICAgICAgICAgZml2ZVBvaW50ZWRTdGFyOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUR3QUFBQVVDQVlBQUFEUkExNHBBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZRVVk0UlVRM01EUXpSVEExTVRGRk1qazBORVk0UmtaRFFqaEVPRE00UVRVaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNlFVWTRSVVEzTURVelJUQTFNVEZGTWprME5FWTRSa1pEUWpoRU9ETTRRVFVpUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRwQlJqaEZSRGN3TWpORk1EVXhNVVV5T1RRMFJqaEdSa05DT0VRNE16aEJOU0lnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRHBCUmpoRlJEY3dNek5GTURVeE1VVXlPVFEwUmpoR1JrTkNPRVE0TXpoQk5TSXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9Qa3BSckY0QUFBR09TVVJCVkhqYVl2ei8vei9EU0FJc0lLS3NySXlRT20wb2ZSV2ZvcTZ1TGpCOTl1eFpxcGhuYkd3TXBxZE1ZYVNLZVRrNS95RWVKZ0tFRW1NZ0NXREF6R01pMHNCd0tLWVdHRER6aVBHd0hoQnJRTEVlRlJ3M29PWXhrWkJjME5tVUpyOEJNWStKeU9RQ0EyRlVTbjREWmg2czBGSUFZZzRnNW9ieStZQ1lHWWhsZ1ZnVlNiMGFFQ2NDOFdNZy9ndkVuNkRpWDRINEJ4QS9HT3ptd1R5c0M4UkxvQVlSQXZPd2lJRU1qa0Z5NEtBMUQ1YWtOd094T1JEZkpDTkpnZlNZUWMxZ0dPem1JZWZoRzFCRHQ1QmdHRDZIREVyejBBdXRqMERzRDhRdFFJeXZ6ZmtmcWlZQXFnY1hHSFRtWVN1bC93RnhMUkFmeFdQZ1lhaWFmMFNFOHFBeUQxZTF4QVBFcG5nTU5JZXFJUllNR3ZOd2VkZ0JpTm54R0FpU3N5ZkJnWVBHUEZ3ZTlrTExONUZBSElHV0g3eEpjT0NnTVE5WGI4a05TaDhENG1payt2QWtFQzhGWWlza05jU0FRV01ldGhoV2g3WnNtcUhKNGdHUzNBT29XRE5ValJvUmpodFU1bUdMWVUwZ2RnTGlRemdzL0FQRWRVQzhCNGkxZ1BnV0FRY09Ldk1ZUjlvUUQwQ0FBUUFLdktIbEVScWRnd0FBQUFCSlJVNUVya0pnZ2c9PScsCiAgICAgICAgICAgIGxvY2s6J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQlFBQUFBVUNBTUFBQUM2ViswL0FBQUFPVkJNVkVVQUFBQjJkblozZDNkM2QzZDVlWGw4Zkh4emMzTjBkSFI1ZVhsNWVYbCtmbjUzZDNkemMzTnhjWEYyZG5aMGRIUjlmWDEzZDNkOWZYMnBEV0ZSQUFBQUUzUlNUbE1BcVhDWkp5NnZ2bGxMTldYWm9veUNGWHNab3NwQlpRQUFBRzlKUkVGVUdOTjl6MHNPZ0NBTUJGQUVXcWw4OWY2SE5kS0F4U0N6WUpLM1lFQXQ0MUp5SHlvWW5ZdFlCb3o1T1hPVUJzaU5JSkFTZHlLNWtybXoyUEloN0RVaCtHYmFBQncxQUVZcmVmMDRxVGI3b3QwR0pKcmdxV2ZvSjNnVnh1V1FmRkpEajdvSCs1Zkk5SkQ2eXczWml3TWVGTmFmSGdBQUFBQkpSVTVFcmtKZ2dnPT0nLAoKIGZpbHRlcjonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCUUFBQUFVQ0FNQUFBQzZWKzAvQUFBQW1WQk1WRVVBQUFCd2NIQkRRME40ZUhoNWVYbDZlbnBPVGs1c2JHeGdZR0JzYkd4Z1lHQlBUMDk4Zkh4emMzTmxaV1ZqWTJOUFQwOUpTVWxmWDE5L2YzOXNiR3h2YjI5cWFtcG1abVpqWTJOa1pHUmdZR0JvYUdoY1hGeHdjSEJyYTJ0U1VsSS9Qejl4Y1hGNGVIaHZiMjl2YjI5M2QzZG5aMmR1Ym01eGNYRmVYbDVoWVdGWldWbGxaV1ZWVlZWZlgxOVVWRlJRVUZCR1JrWjhmSHlseU16NUFBQUFNM1JTVGxNQXVSblJ0aDRib1pGNFVqVFJ5SXBoT1JjUDBhYVltSldHaEgxdGFWOWVKZ2pSd0xxcXA2S1lnWUIzY0dsWFNVTTVJeFJqR2FUUUFBQUFsRWxFUVZRWTA1WFAyUTZDTUJDRjRTTkYxQmFRWFJGWjNQZjEvUi9PTVUxYjBqdSttNW44RjVNTUJuaHNSMGJteU1oRTdDamRiaTlqc0liQmJuSisvSlZLbnI5VXE4TkN1YlRVdElRdFFFUjZSVThYVUgweGVkd0lPTkk3TEZVRmwwWTRJYUdLc3puY01SQjdKTGFpZUVkUkpLeFk1a1Z4S25WOC9xUGxmRXdPRkM5VG9oOXNzdzFMQUY0M1RjMmg4ZnlMNFg1QTF3Z2pkRGRWV3dBQUFBQkpSVTVFcmtKZ2dnPT0nLAogICAgICAgICAgICBicm9rZW5JbWc6J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBREFBQUFBd0NBWUFBQUJYQXZtSEFBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBeUpwVkZoMFdFMU1PbU52YlM1aFpHOWlaUzU0YlhBQUFBQUFBRHcvZUhCaFkydGxkQ0JpWldkcGJqMGk3N3UvSWlCcFpEMGlWelZOTUUxd1EyVm9hVWg2Y21WVGVrNVVZM3ByWXpsa0lqOCtJRHg0T25odGNHMWxkR0VnZUcxc2JuTTZlRDBpWVdSdlltVTZibk02YldWMFlTOGlJSGc2ZUcxd2RHczlJa0ZrYjJKbElGaE5VQ0JEYjNKbElEVXVNeTFqTURFeElEWTJMakUwTlRZMk1Td2dNakF4TWk4d01pOHdOaTB4TkRvMU5qb3lOeUFnSUNBZ0lDQWdJajRnUEhKa1pqcFNSRVlnZUcxc2JuTTZjbVJtUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMekF5THpJeUxYSmtaaTF6ZVc1MFlYZ3Ribk1qSWo0Z1BISmtaanBFWlhOamNtbHdkR2x2YmlCeVpHWTZZV0p2ZFhROUlpSWdlRzFzYm5NNmVHMXdQU0pvZEhSd09pOHZibk11WVdSdlltVXVZMjl0TDNoaGNDOHhMakF2SWlCNGJXeHVjenA0YlhCTlRUMGlhSFIwY0RvdkwyNXpMbUZrYjJKbExtTnZiUzk0WVhBdk1TNHdMMjF0THlJZ2VHMXNibk02YzNSU1pXWTlJbWgwZEhBNkx5OXVjeTVoWkc5aVpTNWpiMjB2ZUdGd0x6RXVNQzl6Vkhsd1pTOVNaWE52ZFhKalpWSmxaaU1pSUhodGNEcERjbVZoZEc5eVZHOXZiRDBpUVdSdlltVWdVR2h2ZEc5emFHOXdJRU5UTmlBb1YybHVaRzkzY3lraUlIaHRjRTFOT2tsdWMzUmhibU5sU1VROUluaHRjQzVwYVdRNk1rWkNNME0wTWtNME9UZzJNVEZGTWpreVJVSkRNemszT0RjeU0wTXdPRVVpSUhodGNFMU5Pa1J2WTNWdFpXNTBTVVE5SW5odGNDNWthV1E2TWtaQ00wTTBNa1EwT1RnMk1URkZNamt5UlVKRE16azNPRGN5TTBNd09FVWlQaUE4ZUcxd1RVMDZSR1Z5YVhabFpFWnliMjBnYzNSU1pXWTZhVzV6ZEdGdVkyVkpSRDBpZUcxd0xtbHBaRG95UmtJelF6UXlRVFE1T0RZeE1VVXlPVEpGUWtNek9UYzROekl6UXpBNFJTSWdjM1JTWldZNlpHOWpkVzFsYm5SSlJEMGllRzF3TG1ScFpEb3lSa0l6UXpReVFqUTVPRFl4TVVVeU9USkZRa016T1RjNE56SXpRekE0UlNJdlBpQThMM0prWmpwRVpYTmpjbWx3ZEdsdmJqNGdQQzl5WkdZNlVrUkdQaUE4TDNnNmVHMXdiV1YwWVQ0Z1BEOTRjR0ZqYTJWMElHVnVaRDBpY2lJL1BuZSsvdDhBQUEvNFNVUkJWSGphekZwNVhGWFYybjdPekF3eUNDSVlLR2dPT0lKU2FtbGYxeFJNc3pKa1VMTlFCaldIbkg2MzdwaWZEWGJUTUJFMXphNURwam5rbUhOYVYwVXh4UUVFUlFFUkVVRlFPT2R3T01PKzcxcnNjenhIT1hDc1A3NXYrWHQvZTdIMjNtcy96M3JmOVE3cktNR1Q3VG1TYVB6ZnROc2tPMGowamp3c0NBS2srUC9WMnBPTUlWRTQrb0xjM2cwdkx5L1htcHFhVVEwTkRTMnVnTWxrWWxjSjZ4dU5Sdk80aFBYRk1YN1BTaXgvUXlKQmcxcWpNQmdhNVBYMTJ0b0J6ejIzUlNUeHVxaUp4dDlOUUtsVXF1Z1M1ZVRrOU5UTGFEQVlPREZyWVlTc3I1d0FROWpZZ0FmMzY5RWhPQmdGQllXK1hicDB6cVRoUUZFVHJaS3dTMENyMWRwYzdUVUpyYUo1OWMzQW1pUFFuTEIzVFFZVHREb041QW81NUhwRFdGNWUzdFJ1M2JvdGQ1U0UzSkVWVmNxbGtDbFV2OE9ramFLWWJLOENDUkVBTXptWkRLNlNoMmpyNVFxSmZ3Q3VYUy9xZE9YS2xhbmR1M2QzaUlSREJHUzBPaGVMS2pGdTBWRUUrYm8xbzRaSGU0S3RxbGtyRW5hRDkwMlB4c1Q3SmhQckExS3BES1hsRmZqaGcwQjBEZk5FKy9idFVWWlcxaWsvUDM5cTE2NWR6U1RZbnRqZUhBbTVJNjZLUG9QU3lucmtYeTVCUTRnM0gyY0E5S1IrbmQ2SWhrWWpHZzFHTWgzUnRnWCtvaWdXVzJzaWFxU0JSZ05ERHFqa2NITnpRbjE1TGFvZXFQbGpMaTR1Q0FvSzRpUklFOU5JRTEvUmNEdDdKT1F0QU9mcjJyU0pKWkRMSkpBNksrSHQ0UUtOVG84NmpRNSszcTRJQ2ZCQXAwQXZoTFgzUWhzUFp6aXJaRkRJcEZBcFpDUnlxSlF5Ym9JTkJGcXQxYVBpdmhvRHVyVkRKM3IrZzYvL2czcDFJMDdsMzRXTGM1UG4xT2wwMWlRNmtpYW1reWFXMlNNaGFTR1ErUktKUDl0WVNzUkN0QS8zZzVOS2dRWHhVZWdSNWtPZ0RLUUZBOWVFd1dqaW1qRUpvb3ZsN2hKY0MzcTZWMXVuUTJUM0lMelF3OTh5NThwZHVXalFDNWowcDA3dzhIQWxwNkVqNWRBQ3FGVFFhRFNNQk52d04wVVNyRldRYkdNa1dncGt6RmZIc3M3Z3dZT1I4ZVhTcG84dEhvZXFlajArR044ZlVxVVUyVmZ2NHNLTmU4aS9WWU1iRlE5UmVxOGVaZFZxbE5NcTM2blI0RzZ0RnBVUHRDaWp2NitVM0Vkb0IxOE8vdlRKWCtEZjFvL1BtVEtxRjA1Y0trZDVUWU80eWNFOWxMVW1pRkJvUVVIQmRCRmJBTWtiSkNwN0doaEk0SmV3R0pDZW5vNFZLMWJ3d1QwN2YwRHM2RGV3NlhnSlR1V1d3SjFVenN5a3RkWkkrK0l1a2ZtZnlJNklIeHFDNHFKQ2hJWjE0ZmY2UjBVaSs4eFoxT2lBNnpmTEVmVnNvTjE1N3R3cHB6MW1MTzdRb1VPR1dST0U4enZKWTNZdkpSKytXeTZYeDZTbXBXRmxWcGJOSkR1M2JjSG8xOGZpNk9WcVpHdzlnL1krcnR6bTdUV2Qzb1E3OXpVWUh0MEp5Y1BDY1BONkFUcUdQMnZ6VEdSa1A1dzltOFA3MncvbXdFVXA0WXRqWW10THRtZ2dHMm5ucVlKU0prQm5FRkJSVVpIOTBrc3ZmUy9pWFNLM0JrK1hkUXo4dThuSldMdG1EUjgvTjJvVUxwV1c0dTBMRi9EYUcyOWgyNWJ2OFByWWNiUXBvN0I0Y3phQy9keWFKY0hBMzY1UzQ3WEI0Ung4Y2RFajhQTkNRakQzK2VmaHQya1RjbkxPb1cvZlB2anR0L040Y1dnaytyN3pIZG9vRzZFd1BrQmpneFpWdGZVWUdxYkFnSTRxTkJpbENBNE85bnJDQzRuZ3Z5VkptakJoQXRhdlg4OXY3aG82RkdHaG9lalNxUlB1cXRXWWYrMGEzbmdySHR1M1NqRG16VGd5ajM3NDUvclRDUGExMVFRRFgxNnR3ZGloWFRBMWhxMzhWUUxmbGQ5TDl2ZkgzOGVNZ1k3c1BPZlZWeEc1ZXpmT243K0FmbjE3NDl4dkYxQ3lQaDVSTS9lZ25XOG8zRjNrcUtoOGlJRjk1T2p0YjBCVm5SNEtoY0pvVFVCSzRObVgvODNBSjQwZmJ3TytmOWV1dUZwVnhXWHlpQkg0TkR5YzMyTWFZSnA0clg4QS9qZDVNR28wUmtobGNyZzZxeUNYSy9Dd3dZaUp3eU13WjNRWDNDak1zd0gvUlZ3Y0NxcXJVWER2SHZ3cGFERVNyUDEyUGhkOSt2VGkvYk5MUitKK25acnlKQU9jM2QxcEl6K0RuajE3MHYwK0xOQVpiQWlJSzU4WUh4K1BqUnMyMklBdmVVQnFwTHhHMjlpSUd6VTFOaVRlakV2QTFzMGJNYUtYRHo1TUdvQktXaDBOWmZIVmFnUGloanlMOU9HaEhIeW5MdDF0d0JmVjFxS2VQSXllMG9peWh3OXRTRnk0Y0JHOWUwWHcvcStmanNCOWloRnFIZUUxTlVKSFdUR3RQc3VTalk4VFNJeU9qc2Jtelp1YkpoazlHa043OWJLQXR5UjN6WkI0S3o0SjMyOWFqMkVSYlRCM2JCOWNMcTNGcTlHaG1QS25aM0Q5Nm1VTCtIZjgvR3pBVzdKV2tVUUk3WWtLV2tEV2NpOWVock9Ua3ZlUGZQUXlqR1JxU3ZKMkpqRjdOV2V4MWdTRUdUTm1XQWEyNU9YUmpwZHhlU0pEdFNiUnVUTWZHNWM0Z1pONEpjSWJ1ejZLUmZvcklTak11NGp3cmhFVzhFc0ozT1BnelUwaGZtdC9ZYUZsYk42YzJmejZTOTQ5eWtCWVZKZlNWV2JKb3g0bmtFem1JL3o4ODg5OFlCRnQxUGUrL3g1aGJkckFUYVd5VDJMNGNId2FGdmFJeE9aTkNQVUVpc2hWZHVuZVpNdHYrL3EyQ041WnFVUkhMeStzT25RSWs4NmQ0Mk1ybG1mZ0h3cy93Wkg4T255eVBSOXVMa3FlbWtpa0VoNmhueUJBQTJzWmlSZGZmRkU0Y2VKRVU4U2w4RDFuMjdiV1NjVEVQQ0lSbjRqNTgrY2pUSFNWREh4R1FnSnV0QUorN2RHam1IUGxDaC9MeWx5RzFQVHBPRjVZajFYN0xpRTgwQjIrSGlwS1haUmNFeklaMTRMd3VBWmdKa0Zwd3g4aThkbG5ueldCOS9aR1JtSWlCMS9YRXZqRGh5M2dWNjFZanBTMGFUaFZwTUczQi9NUUZ1QUdiemNsWEZseUtLWFVtMWEvV1ExWVZWWVdFdWRFZFRJU3M3ZHVkWWpFd280ZCtWaUNweWN5eUIwN0JENC92K2s3Szc3QzVOUjA1SlEyWU9PeHF3ajFkNE9ucXhKT2xNazZVOHJOVWpZckRUUlB3RXhpNTg2ZEgvZnQyMWU0ZE9rU0gxdGRYbzczZi9paFZSSlRpTVMzNUwyK1RFcHFBdC9NWVVCejRGZGxaV0pLNmxSY3ZLM0RscDhMOFF3RlJVOFhCWnpJOHpCeEpSSXN4a2hiMDRDNWpSa3paczhXYWoxNjlFQnVibTdUUjI3ZmRrZ1RYZWlkb3FjQXYzcFZGaWFucENHdndvRHR2MXhEQng5bkFpOG40RktMdUZEV0s1RFptd21RRm9RV0NiQVdGeGVYZmV6WXNUMHMrcDArZmRxaWlka3RhRUpQTWNNczlzQi9mZkNnQmZ5YTFTdVJQRGtGaGZjTTJIWDZPdHI3dXNEZFZjRUxJR3R4VXNrNVRIc2FzRnVSVWNaM2tZTEd5QUVEQnVETW1UUG8zNzgvVnBNbUpLU0pMNW1OVTdHaE1abGFUYWRWOU1GbktLOWZUVG5QdklJQ1ByWmgzUVlrVGt6a3gyK1hDcVdJQ0FyaGgzRUdrNDVxQVNPdmt4VXlKNm80bmVIdVpFQWJWemxWZFZwK0FPQXdBVmRYVjBzL0tpcUttMU12c3ZGVnBJbUhLMWRpQVlFcXA2alkwaGtnQzRWQjlNRlA5SHA4VExrUGE1czNia1pjUWh5V0h2MGNIKzljaVFuUk14SGVOZ0srYnUzaDc5RVIvdTRTMUJEVzY1WDVLS25NeGE5RmgrRWttNHBneWxnRnFlQTRBWE9ycjYrbnd0dU5KMVBMbGkzRDlPblRzWm5zM0o5a1FDdW5Ub3pBZjBnK0Z2OU9KTmZLd045dXZJMVpzK2NDRkRLV0haNEdsdTdZbk1DWW1rb3R1UTkxM1lHT040TVJFOVdIbjNJOHZnZGFKY0RBczNieDRrVU9ualdXZXJITXBkUlNCTm9uRUVueUhna3Jvelp1M0lqWTRiR0lUNHJIemwwN2tiQXFBZjRTZi9JMExqUVBiVlNURkFiNjUrSHRBYTgybmhTRlBhRVFKRkFaWlRZSGFRNFJVS3ZWbHY2cFU2ZndQQlVnRUk4RlBpQXBjZURnMGloVzRBbmlhZTIvV0g5OEF2UTZQU2E4T3dFL1Rmc0owN1pPUXdqbC9xNWs3eWIyajFiRVErR0dOclQ4ek1QYzAxWkNhMnF3UzhEdTZUVGxScjNaOWVUSms4MkMxemg0TnNjK1hVWXlsdVI5Y1d4aThrU3NXYmtHZ3dNRzQvT1JpM0d6N0NZMGRUcklHMVZRR0pSUWE3UW9xUzBobDN3VFJUWEZDUEJRUFowR2R1ellFVTI1VWN6NTgrY3hjT0JBaDhCYm40ZnJXeUFCVVJQSnFja1FxT1pOVGt2R1gwWStRUEsva3hIdUcwWXUydDIybUs4cmh5WlFhMDJnNVQyd2I5KyswU05HakJqTDBvbkl5TWltNEViQ0RvaUs3WUIzRWMvLzlwQ01JaWxubS8veFlFZHlpeFZDVmlRbXAwL21oOElwMDFJZ2pCZVF0Q1lKNFg3aGNMY2lvV25Vd0toL1ZNT3dXR0NYQVBuOUtTd2RKNXVYbU0zR0RMNlVYbXdrMXlvM0Z4UXNzRkNGcE5KcUVVZ3hnWjJKcnlNNVJzSU9OTXVjbmFHaDV3V0swb0lZTDVpenVVUDUwZXZrVnRrc1g1Q2tUay9sUlFxL1RoS1F1Q29SbmYwN1cwZ0lCbkxWZ3I1MUU2SkpVbGc2ZnVqUUljbXdZY01zNEJld2plamhBWG03ZHBCUmxPV25ZUlJRWkFRUWxaWHdwZnAycFFpZTd4bVNXUXdjRVN0M2NvSWtOQlJHNnB2b1hWNlEwTHZWbEhhTUVlTUNJNUgyWGhyWHhOU1pVMGt0bEpwbmptc2k0ZVRPVjk5Z010amRZMUlSZkNvRGYrREFBUXY0MTVncVNPNVR6YXFpWWxwSktZVFN4d2ZPQVFGd3BjeFRUbDdLdTZJQ3ExaGFJRTYyY09IQ0pnY2drbWhIUUdWVlZYQ2o1NTFwQWRqN1NrcTFuYWplVmxORk4xcDhqclZwczZaaDJSZGZJUzRpRHB0U042R3dyQkMxOWJXdEVpQ0xFTktZMXZmdjN5K0pvWXlTTlRieFhHYkg5Q0UzaXI0R0FpdlFDakdUVVZKTzAwQXh3YTJvQ0t2cG1iWGlSRC90K1FtdnhMNkNLZTlNUWR2QXRqaE9ZNnd3L0p6U2oxclNoUHNMTDZDUkNKbklwRmh1TDZPRk1OQmNveWhOWWViRURpL2ZlMzg2YWNLQW1YTm53ampWaVBGTHgwT2lrclNxZ2N6VnExZGJ3TDlMOGpkbWF5Ky9ETy9ZV01ncFpXQ3I3eHdZQ0E4aVpDZ3Vob0s4MHhvcjhBZjJIT0RnOTEzYkI3OTJmcWk2WGNYSGo0dXUwNFBJNm5KeTRObXRHMXlDZ3JnVzVMUS9QR2lmdVk0ZGk3ZVk5c1M1WnMyYmhUa3o1aUNwVHhKK25Qa2poQnFoZFJNeW4waEFQSlptVzg2VGtqZG5aajVVR3JyUTFZdFM1Y2JMbHlFY1A4NkJtOEh2M2JVWHcyS0hJV1Y5Q21KSHhhTC93djd3Q2ZUQnJadTMrUDBUb2phZHFMNVFIenNHcjRnSXVBUUg4M25aL0Y3OSt2SG5lbG1CV3JlaGFVZjFET3BKdTU0Y1NIVnBpd1RXSGpseUJGT21UT0VEdElld20vMWd1MmdScEpUdnRDRlg2azJpenM2R2RzOGV2bG0vRVYvZVJpVm56S3N4K0NiN0cvNlJTZk1tSWNBekFJc09MRUpRU0JDdVhidG1JY0gyazRRaWV1MnVYWHcrYndLdWxNdHhjOEVDNUlycENUL3dwZXkzcXJvS1pkb3lwR3hNUWR6YmNjZ2NsOW5pTHpEc0tIMk53SFp5YXFwNG1nL2hyeVFIU1NxMmJoVUtQdnhRT0VMOXQ4VjdUTFp2M3k0NDBvcUtpaXp2RENiNWhTUjN3Z1NoK3RneFlULzFNNjNtSEJBZGJYY2VTai80VmF2Vm5oSDMvaXpMR1pGSTRtdjJRRnA2dW1YQ3Y1Q2NJcUdTUnBobzlhRzllL2NLVDlOdTNicGxlWGNReVZtU2s0K0JIemhva0tQVDJSQ1FtOE16TldZOVF1Ynk1Y2xLcXFDK1hMb1VIN0Y4bnVTNmVQN0lUOHZJM0tqWVlkMnI1TGxLMkM4cFZzRkZzUDV0VFU4QmE5Q2dRZjVCUVVHOXE2dXJKVDdrUm4rbGUvOGtTUmVGdFNGRGhvQXFRTmE5ZS9qdzRmTUtoY0wwUk5JbWxRb3NNNmFzK0U0enZ5OCswa1JkWGQwT2QzZjMwZlBtejhkaThaakUzQ2pJNFdYeVRpZE9uTmhKdWRJSlIzOXNYYng0Y2E4NWMrYU1yNnFxa3ZyNStkbmNHMHFMY1pRV2hkb1ZBcjFPVEdJZGF1ejNnZVorb2VtVGs1UHpSYjkrL1liTW5qMGJTNVlzNFlPN3FTUWNPWElrTWpJeXZwc3hZOGJCcC8zRk9DRWhJWkxxZ2JUaTRtSnBLRVZuMWw2ZzJIQ2N2RnBOVGMxNWIyL3ZUREhid0ZNUVdOZlN4bDdCN0lyaWc1Q1ZsV1cydjVsLzVIOXkwUHR2c3YyWW5aMHRoSVNFbU9mOGtVVDVPK2RyMVR0bFdXMmVQd1RlYXQ2eEpJWS9DdDVNNEw4Q0RBRGQ1bjlTTDBsTk13QUFBQUJKUlU1RXJrSmdnZz09JywKICAgICAgICAgICAgYnJva2VuSW1nX3NtYWxsOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJZQUFBQVdDQVlBQUFERXRHdzdBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQXlKcFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3UFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUlNaV1k5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVkpsWmlNaUlIaHRjRHBEY21WaGRHOXlWRzl2YkQwaVFXUnZZbVVnVUdodmRHOXphRzl3SUVOVE5pQW9WMmx1Wkc5M2N5a2lJSGh0Y0UxTk9rbHVjM1JoYm1ObFNVUTlJbmh0Y0M1cGFXUTZOVVpGTWpVMk9VTTBRakk0TVRGRk1rSkRNa1U0UlVSRU1qZzNPRVZDTWpJaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNk5VWkZNalUyT1VRMFFqSTRNVEZGTWtKRE1rVTRSVVJFTWpnM09FVkNNaklpUGlBOGVHMXdUVTA2UkdWeWFYWmxaRVp5YjIwZ2MzUlNaV1k2YVc1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRvMVJrVXlOVFk1UVRSQ01qZ3hNVVV5UWtNeVJUaEZSRVF5T0RjNFJVSXlNaUlnYzNSU1pXWTZaRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRG8xUmtVeU5UWTVRalJDTWpneE1VVXlRa015UlRoRlJFUXlPRGM0UlVJeU1pSXZQaUE4TDNKa1pqcEVaWE5qY21sd2RHbHZiajRnUEM5eVpHWTZVa1JHUGlBOEwzZzZlRzF3YldWMFlUNGdQRDk0Y0dGamEyVjBJR1Z1WkQwaWNpSS9QdXFWQm5JQUFBVHBTVVJCVkhqYXJGVjlUTlJsSFAvODd2MDR6dU1FaERzUUVBVGl0aE5FalJjbklxU0hwcnhvMDlWVUVDM3pqNXpOTEcyMTFscHVEVnR6T1d2V3JPWmNtNnRwQmt2STBIYUtwRmx3SmNJaGQ4RHhLbDJIeDh1OWNmZjAvUjFZSHFOV1c4LzIrVDNQOC8wOXorZjdmYjdQNS92N2NmaXI3U2NJOGQrYW4xQkg2SHJVeUJnTFdiU2ZERTZDNzkvQTU1cVlHdXpyZnFCVWhyOUplMU5uRTR0bVJTQjJlOXlpV3gyL1F5RVhnM2ZzOW5qaDkvdmg4VTczWHA4UHpCL0F1TXVMTFlYcDg2d1d5NUc0K0lWQ2o4ZHpodlozUENTYVRjejllTStCZ3VjL1I0UmFCbFc0RlBQa0VpZ1YwdUJZTEJEQTRackNLbjBjUHFxN2czQ0ZFbVdyMDhWV3EvVVZuVTRuR2gwZC9ZdzQ3b1lRYTdUYVdMZmJKVm1pNGJDK1NJL3lYQzNVQ2pFQ0ZIWWd3Q2pTQVB3Q0Nhb01xYWkvY0JZdm5hdUdaOXd6dlZlakVmWDIyZzVtTDgwVTNPdXk4T1IzdUptYzZGdk41dWFzOVBRd2ZtNGJHY1lYelpQb3RQUkJLdUl3UlVmM1FZSWp1M093L1luSFlieHhDM2s1eTFIYmRBdGZYMnpDQThkdjBFWXBrTFJBUHJZaWQrVWJ4UGVlZ0I1WnphMnQxM2pTN3cwRzFCY1dZbUYwRE1xeU9Nam5SOEUwTUk0T3V4OEhLM093clNnYnN2Wk9ERlpWUVdtK2h3MzV5NUcxS2g5bjIrUzQwakVCajN0UyttZFNqVWFqa3crNnlXQmc3YnQyc1Y4cUs5bkZ3a0plTDZ6VGFtWTFEWFkyT01YWTBzd01abENyMk4wZE81aHA1MDVtcTY1bTY2Uml0bnFaanBsSEdEdCt3VVF4TWpmdGU1RlhoU0FqSStNbTcrQ2kyY3puQks2cEtTUWxKS0N1YUExU0Y2Vmg3YUlSRk9uVEVOODNoT09ieWpBZUNBVHozbi8vUGhvOFByejI5bEZjYWhtRVRCS3FBa0ZrWk9TVDVLSCtuZjUrbkxoOEdVcVJDRzZTVlh6OFFsd3FMa1pXNm1OSWQ0eWhabU1weHNnZVZBYVI1dGJXNHFxeEVZNll0YkFPT0tCUmhZVVNjeHpIWDIycHJhK3Y3UnhGVTFOZkh5VDNFb2ttTGc3R2lnb2NMU25CR0oxRVFxVDI0V0dzb1RYR3BtdndMbGlKL3Y0aHhLbkZrTXJFSWNSQnVSRzVsN3FQS2ZLYWlNaElvYit4RWErdVh3OG54MEVpazJHTVhzb2tFdGdIQmxEYzBJQzJ0aTVJWXBKaDZ3ZXlFNUxoOWpKRWhydURBcHVyUVBpNjk0M2E3VUp5Qk0ycFU4aVlNZkpOUWRoR2VPdjlEM0JkL0IyZVBaZ0NtV0Q2NnlKVkNsR2N2aDFmcG4yS3VZajVzMGhFS2hYS2FWQkE0T1VTZUdUaEo0UmRMK3pEalJzbW5EejhJYTZhR2lFWGhrRXVrRk94K0VOelBGTWdZWU1PeDc2d3FDaEJ1ZE9KM1dRYko4Z0pmQnJtelRoUUVVNFQ4dktXWUhHM0RvczFhYmhwL1FIWHU0eXdUdzZGRWhNcGY4cHZOV3AxeWlhN0hjK0ZoNE9MajBlRVZodjhvdXpsaGNtVHl1V1FrUXhqWTJPRGthOHJLVUN1ZlRVcXNyZkE0WHlBQ2M5RUtIRlBUODhWeW1sK05VME81ZWREUlFxSXpjekVUM1JSTC9NUmsyWjFaVnV4MStXQ2dsUVJYVkFBL2ViTitFb29SR241V2l6clhvcXQyVnN4NGh3SkpSNGFHa3JrQjNwQ0FrbExxOWZqbTdvNkhLYjVyellMVnJ5cnc3WmpUeUc1WkFNMmQzZUQyV3hJMnJnUktUazVVUE9wT1VPWEhKZUJ0T2kwMEFxaFZDUzM5L1FNOHNQamhHUFRrbUZ6dGFlcGxLUG9YYk5HdytaVC8weFYxZXdscm9jbExhSTBXR2lRWitycy9IbEphbW9FNzR6SzFwR1FtSGpDMXR2cmVEUUlzOFZpa0loRWh0elRwMUc5WncvMkh6aFFTL3NiLy9IblpUS1pVbHBhV25xb3Q5eStmVHVKVE5LNTRISzVYajkvL2p5Ym5Kdzg5SGRyK0lpNTJUKysvNnY5SWNBQUNIeGpHckNaSnFzQUFBQUFTVVZPUks1Q1lJST0nLAogICAgICAgICAgICBtYXhCdG46J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQzRBQUFBUkJBTUFBQUJRdTROOEFBQUFIbEJNVkVWWVdGaG1abVpwYVdsaVltSlVWRlJiVzF0ZlgxL2w1ZVZyYTJzek16T1VFcDdtQUFBQWFFbEVRVlFZMDJQb3dBNFlsTEFEbk9LQ01DQTVFd2dtd25nSThYSVFRSWdiUTRFaFdId3lpQVVXTjRRQzQzS1Fuc2tnRmdqQTFVUEZRU3hoSUdCSWd3R3crRFFnSXhra2h5RU9CUXloTUFDMmR5cVFFWVpGSE01andBU3NZSEZTZ1FzR2NFQ0lZd0lBQ1p0WHBmeXdYRFVBQUFBQVNVVk9SSzVDWUlJPScKICAgICAgICB9OwoKICAgICAgICBwcmVmcy5zaGFyZT17CiAgICAgICAgICAgIHdlaWJvOnsKICAgICAgICAgICAgICAgIGRpc2FibGVkOmZhbHNlLAogICAgICAgICAgICAgICAgbmFtZTon5paw5rWq5b6u5Y2aJywKICAgICAgICAgICAgICAgIGxpbWl0TGFuZzonemgtQ04semgtVFcnLAogICAgICAgICAgICAgICAgaWNvbjonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUNYQklXWE1BQUFzU0FBQUxFZ0hTM1g3OEFBQUNma2xFUVZRNGphMlNUMmlUQnhqR2YrK1hyMHZhMnFxdDAybnRFa3hvMDI1RHFVcGpkZUFPZGowWXhJUGd4WU9LZVBIbXdhZzc3YkRMMElsTUtnb2VlcWdJUXJhcFNPdEZwRk9jNEdXYjFuK2tOcUxXS05xbVNaczAzL2ZzNENwbFhqYmNjM29QNy92amZaLzNnUStVL2R2R1owZjVQT2pTQmVTR24zT2w2enNtL3hOZzRnUS9TR3d5WTVtRUIreWN2NCtMN3dGK1doNE9yZzVWYndmV0FwZWFIdzVmQnJoeENPZXpKcnFBeDhBdUlGV3UwT25PSFI2SnRuNFZNRHNqS1d4bUpxa0hpQUZVbmxRM2FjbjBjUUphQVd3MlkwMVZnUDN2TnNqRzRydUJrOEJjNkovQU1lQnJIQzEwR2txbmFyZG1JODQ4YnlYd0s3RFhCUmlOdG00RFRra3lNME4vRjVMYXpleTBKSmx2NXVXQ2k3eVh3WlRWRmt0bUxKQ1l0TnVSV1BoajEvMGRxTE41dGRRa054UHM3Q1R3eVJJME5VWDV6aDJLNTlOVU1obUFhMDdqZExMcDVzakVpMk9zK2NpbDNyS3grR2xKdTBQcnU2emh5UGZLdXdIcjcrOVhMcGV6WkRLcGpvNE8wOHlNWGgvNnhncnBuMlZtcjN4cFMvalJ2ZXV6dDc5OHVtR2p2RUpCWTJOamlrUWlBdVE0amx6WDFkRFFrQ1RKeTA4cTIvYUZzckc0c3JINDFWbVRIS0F1dUg2ZG5Kb2ErdnI2MU56Y1RHOXZyM3A2ZXFoVUtob1lHSGpyU1NpSVZWVUpRRko1TG1CZzV1Nnd5ZmRwYkd5MFJDSkJQQjYzd2NGQkhNZXg3dTV1ek13S1o4K2hZdEVBWDNEazNaOStpMFNiUnFPdDkxNGRQS3p5bTNFL2xVcXBwYVhGVHlRU1NxZlR2bGNvYXZ6NGozNjJwVjJqMGRaU05oYmZNemM3Qm5CaGViaHVWYWo2Z05YWDd3bDl1V0d4Ry80VWZKOUtab1RwNnpkUVBsOENmc2w3M3JmdG1RZC92QWVZMWRIRlN3TXJnNkZWRFlGQUcxQUxWTXBTNW42NWRHdkhzeWY1ZjhiK2Y5RmZrc0FURUY1TERaZ0FBQUFBU1VWT1JLNUNZSUk9JywKICAgICAgICAgICAgICAgIGFwaTpmdW5jdGlvbihhcmdzKXsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJsPSdodHRwOi8vc2VydmljZS53ZWliby5jb20vc2hhcmUvc2hhcmUucGhwPycrCiAgICAgICAgICAgICAgICAgICAgICAgICd0aXRsZT0nK2FyZ3MudGl0bGUrCiAgICAgICAgICAgICAgICAgICAgICAgICcmdXJsPScrYXJncy51cmwrCiAgICAgICAgICAgICAgICAgICAgICAgICcmcGljPScrYXJncy5waWM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgd1NpemU6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaDo1MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OjYyMCwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdDp7CiAgICAgICAgICAgICAgICBuYW1lOifohb7orq/lvq7ljZonLAogICAgICAgICAgICAgICAgbGltaXRMYW5nOid6aC1DTicsCiAgICAgICAgICAgICAgICBpY29uOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBQ1hCSVdYTUFBQXNTQUFBTEVnSFMzWDc4QUFBREwwbEVRVlE0alhXVFMyaGNWUUNHdjNQdXVmZk9USkp4RXNsa05FbFJtNWhvUlpPS2p5S0tTRVd3cU5XRldMc1FxUmJjMVVmVkxMb1JYYmdxaUNoMElZb1BhQ25XV3FsUU42bXBJUFhSYXFrazlaR09KUytTbVF6alpPN2ozSE9PaTRqRmhSLzhtMy81LzN4QytINFlQTGh6WC8vOWorenE2UzFYZkNsQkFJNy84aytucldWMWFYRnVidkxMVDVKakgreFR3VU5QdmJIeDhXZGVmUGFXNitqMFBTd09iUnlac1docjBOYVJPa2RxSVRhT3lCaFdLMzM5WWJsLzcrOGd4WWEzUGx0OVlldVcwb201T2xGbWNjNHlXQWpZTmRMSDdiMWQ1RDFKdFpWd3RGcmpTTFdPRUFJcEJUNkNYeTc4V2xlRnJ1NlNkTkJvcFRnYzJ3YTdlV2xzZ0ttRkptLytlSW1sZHNxTlBRVjJESlc1dTYvSXhMZXp0QkpMSWlBZjVQTEtHRXNyMWNSeHdtaDNnWW5OZzd4MmVwYlBaMnYvVG5GNm9jSEI2VVgyM3pQTXhQZ0F6MC85aGhDQ3pEb2hFMjFvUnBwMm9ubjZoZ3BmVmVzY25GNGtTelE3aDh1OE9qN0FwbEtlMmxyQzNza1o3cWhjd1dCZTBZNVNra3hJcWJXaEVTVkVVY0xtM2lLSHArZUo0cFFuUi9yWU16N0lZME5sM3JsdmxOQlpMamJXK0c2aHdkaVZuVVJ4U3BabFFxYmEwbWdseExHbUsvQllhRVRFN1pUaFlvaXg2dzkyK0I3bFVCSEhtbm83eFhPT09OYm9EQ25yYXluenpUWXJyWWlaV290cmlqbWFVY0p3VHhlcE1YaFNNdlZublpOL0xMUFNqTmhZS2pDOS9CZTFWa1E5MWtJNTYxaHRKeGpqK1BqblN4aHJlUDNlVVU1V1Yzamd3eG42aTNsK21HK0FFRHg4ZllXcnUzSWNuMW5BR0FmT0NpVTh3Wm8yZUw3aTdlOHYwdGNSOE1wZEk0d2RtS1NWR1phWFczaSt4NDVOQTd5NzdXWjJmL0VUTGV2d2xNUTRuQklDSXVOUXlrTTd4NTQ3aHpod3RvcTJqbysyMzRvbjRiYXJTaFJEbitlT24rUFRDMHNvWHdIZzB0UXBxUVNwQkJVb3NKYXQxL2J5eExHemRIYUduS2l1VUF3Vjc1K2Y0OHhTazJacVVEbC9YUTBIUmlkV1NhdmJUbm9GUC9ESWVkQ1Q5Nm11cGVBcGpzeldMb3NsUFB5Y2Qxa3k1NUJ0azBoMzd0UWhiVE55b1dKRHFZT2x0cWF6RUZESSsrVHlBVUhvRStaOHdsQVJCb293VkhpK3hEaURPLy9OWVlFZjVQeEhkKytYTjIzWkxycEtGWndESWRielA3aG1iYzZjK2ZwUWR2UzlsLzhHRWZPRlhWdjdBRVFBQUFBQVNVVk9SSzVDWUlJPScsCiAgICAgICAgICAgICAgICBhcGk6ZnVuY3Rpb24oYXJncyl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVybD0naHR0cDovL3YudC5xcS5jb20vc2hhcmUvc2hhcmUucGhwPycrCiAgICAgICAgICAgICAgICAgICAgICAgICd0aXRsZT0nK2FyZ3MudGl0bGUrCiAgICAgICAgICAgICAgICAgICAgICAgICcmdXJsPScrYXJncy51cmwrCiAgICAgICAgICAgICAgICAgICAgICAgICcmcGljPScrYXJncy5waWM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgd1NpemU6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaDo1MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OjYyMCwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcVpvbmU6ewogICAgICAgICAgICAgICAgbmFtZTonUVHnqbrpl7QnLAogICAgICAgICAgICAgICAgbGltaXRMYW5nOid6aC1DTicsCiAgICAgICAgICAgICAgICBpY29uOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBQ1hCSVdYTUFBQXNTQUFBTEVnSFMzWDc4QUFBQ0QwbEVRVlE0amJXUXZXc1RjUnlIbjd2ZjViVkoya2FTcGxYUUtMNVFVVVB6QnpoVVhCUWNGUnc2Q0FGQnB6b29GS1JRa0NJQnhhM1NvU0NvT0hYSUluUVNGQkVMUlNoQzFiN1ExcVRCTkpkTFRPNXlkejhIMjlCZ0RUajQyYjd3ZlI0K2ZPQi94c2pGczBZdW51MzBvM1NBbzhEcXpuazRmR21ydE4rZjJrRitTMFRDSVJFSmg0Q2IvOVRBeU1VRHdLcm5ZQ0lHa3VaR29ialRvdDVSb00vR3pnQXg0S3JXSGNwNCtrOGpyWFhzSHpxMlhwMENYZ0xGN2l2RlR5MUI0ZFdBcXlBZFFFUDk3Vk5VbGVqNXh6amxITEkyRDBCMXBZUzBiYVFFWEJlZ0Fhd3B4ZWNIa3NCYzhPU0ZwTGZ2TEdyZ0ZMVm5UN0VXUGxDdE9WaVd4R3BJams4ZWJUVTF0M1RNcmNveU1Ld0E1R2VpQ1dET240Z01CZ1o2QUJEeDY2Q3FmQjRaYjRQcm0yVWErY29pTUp3WUtlVmJHNnhQOVVTQjE4R0I3dlN1NU92WU1zY21rbTN3ejAzOUkzRHhVS1pjK21QRWxTZVJoT29SMy9zdVQ3S1V1WVBYcitEektYUUZCU0lWd3ZCVWNKdE8vNUhibGZ3dW8rMFYyS2FiMUlRSE0vK0dFek96QUxobUVkbmNwcjcwQ1BkTEZkdHNKb0cvQ1dSS0JBWDF0ZmZVdnIzRjNLNEI0T3Z0UXRVRUVvRnR5aFR3Ym4rQjVhYTlyc0JZSzlQWU5xckFROENwYnVwMy9iM2hrS29KYk10TjcyWGFCSTdscG95TmtnTk1BL2ZQUFREekFBdjNmTk8xZ2o0TzNBQlNlNW5XaVBPalhpL3dBaGdieWxxTDdKUDVVZThnTUFGY0c4cGFGc0F2ZXRuVEdDbDJZbjBBQUFBQVNVVk9SSzVDWUlJPScsCiAgICAgICAgICAgICAgICBhcGk6ZnVuY3Rpb24oYXJncyl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVybD0naHR0cDovL3Nucy5xem9uZS5xcS5jb20vY2dpLWJpbi9xenNoYXJlL2NnaV9xenNoYXJlX29uZWtleT8nKwogICAgICAgICAgICAgICAgICAgICAgICAndGl0bGU9JythcmdzLnRpdGxlKwogICAgICAgICAgICAgICAgICAgICAgICAnJnBpY3M9JythcmdzLnBpYysKICAgICAgICAgICAgICAgICAgICAgICAgJyZ1cmw9JythcmdzLnVybDsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICB1cmw6dXJsLAogICAgICAgICAgICAgICAgICAgICAgICB3U2l6ZTp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOjY1MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6NjIwLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICBmYW5mb3U6ewogICAgICAgICAgICAgICAgbmFtZTon6aWt5ZCmJywKICAgICAgICAgICAgICAgIGxpbWl0TGFuZzonemgtQ04nLAogICAgICAgICAgICAgICAgaWNvbjonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUNYQklXWE1BQUFzU0FBQUxFZ0hTM1g3OEFBQUJiMGxFUVZRNGphV1RYeTREVVJUR2Y5T09Da2xqVEJOQ2lFa3NnQjNvRWxpQkxtRjJvSFl3Vm1DNkF1eWczcHNZUEpHSUlxbTBhWFZrcEkzU0hBL0htREt0Qjc3azVweDdjKzUzL2h2cmx5TGRJWC9DZkJiTTFqdEVud1MrQTM0SHFsSGEyTXBDTWE4SHdIMkFOd0Z6eWtnTWRndko1ODFaOEZiQU1tRmo1anRacGFOeXlnREREa1NlM3FGVWdFTW43Ym55R1ZGOUFFRVB3cEYwYlJQTStPSXVxanlOWUNzUHowT1l5MDVPS1dFSlJJcFhJaUlpWGxPa2RLdTYzNWFKS0RkRXFJbllnVWdtenIvU2djMFpUZVUwVXM4eDdnYXcvNmpuSnpJQXh5R1U2aHA2OVFXSzE0bkJlVjlsdVFGZVUvV2c5NFBnTi9odFdNdUJrNE50Nnc4RVhrc0xXbDdXUXAvM3RTTXh6SEdmU29YRVcweXl0NlQ2enMxMzJ4U0J1NkR0QXpnSlZkWmZKMGM0Tm9XRGxzcHFCTjZxRHRoSnFPRWZyZXZiRit4QWUwcE5aOEM1U005QTNIZnJUT1M0cTIvdXZjNkJrVDhUaWNac281TURaMXJESHkwYWFIMnFFUXdCNDcvci9BRXVxOS9sUlpVeXNBQUFBQUJKUlU1RXJrSmdnZz09JywKICAgICAgICAgICAgICAgIGFwaTpmdW5jdGlvbihhcmdzKXsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJsPSdodHRwOi8vZmFuZm91LmNvbS9zaGFyZXIvaW1hZ2U/JysKICAgICAgICAgICAgICAgICAgICAgICAgJ3U9JythcmdzLnVybCsKICAgICAgICAgICAgICAgICAgICAgICAgJyZ0PScrYXJncy50aXRsZSsKICAgICAgICAgICAgICAgICAgICAgICAgJyZpbWdfc3JjPScrYXJncy5waWM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuewogICAgICAgICAgICAgICAgICAgICAgICB1cmw6dXJsLAogICAgICAgICAgICAgICAgICAgICAgICB3U2l6ZTp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOjU1MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6NjUwLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICB0aWViYTp7CiAgICAgICAgICAgICAgICBuYW1lOifnmb7luqbotLTlkKcnLAogICAgICAgICAgICAgICAgbGltaXRMYW5nOid6aC1DTicsCiAgICAgICAgICAgICAgICBpY29uOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBQ1hCSVdYTUFBQXNTQUFBTEVnSFMzWDc4QUFBQjZFbEVRVlE0amFXVHkyc1RVUlRHZnpPZFNiRk5wUVJiWDFEall5UEZsWXl1b2d0RkVjRnRCU2xkRmhjMUlNRkZRWXBkK0NqWWhXNFVYQWtpUlBTUFVFRXFpTkttUGhLU1NVSWJ6WU0wYlJhWlYzSmNoTVJFNDZiOU52ZHd6ejAvUHU1M3J4SXlUR0VIMGdEZWZneHVhL2pNcVRScXIwWWlibk52dmtoc3hRTEFURG1ZS2FjbnBDZmcyWk5OWGo2djh2QitHVFBsTUhVMVIvaDZ2aWVrQzFEWnFMZnI0VUN6VlNvMjl4eFgybldudEZhUnpiak16UmJ4KzFVZVA5M0g0a0tKaTVlR0dEL1JUemdTb1BQYzJDSDlEeUZrbUNJaUVuMVJrV01IRWhJeVRJa3RXeUlpVXF2VnBhVlUwcGJKaVRXWm5GaVRUTm9SRVpHUVlVcmJRZkNvai8wSE5mYU9hbVRTTGdPRENvc1B5dlRwRUw0WjRIVzB5cmVZUTJXalR2NlgxM2JSQmhpbmR4R09CQ2prUFk2UCs1aVp6cE9NMitpNlNybFU1ODdkRVpiZTF5Q29zMmVrNzk4N0FMaDh4Yy9Qbk1ldEd3VitmTFVCc0t3R0g5N1ZtSTBVV0hnMFNqYnRjdmlJcjNjS3lZVEx6SFNlTDUrYitYc2VhRnB6WFYxeG1MOWRZaXlvZDQ1MEE5NUV0MWhkdHZHOHY2TFNvTHJWNE5PU1JUYnQ5bzRSUU5QQnRob29xb0xqZ0RRRUcxQlVCWUJhclVGdTNmcy80TnJVTUxuMU92SHZEcnVIVk02ZUgyZzZlMVdsdXRuZ3BOSFB1UXVEM2ZaYTcyQTdDaG1tS0R2OXpyOEJySHNjTmZHUjNiUUFBQUFBU1VWT1JLNUNZSUk9JywKICAgICAgICAgICAgICAgIGFwaTpmdW5jdGlvbihhcmdzKXsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gJ2h0dHA6Ly90aWViYS5iYWlkdS5jb20vZi9jb21taXQvc2hhcmUvb3BlblNoYXJlQXBpPycrCiAgICAgICAgICAgICAgICAgICAgICAgICd0aXRsZT0nK2FyZ3MudGl0bGUrCiAgICAgICAgICAgICAgICAgICAgICAgICcmdXJsPScrYXJncy51cmwrCiAgICAgICAgICAgICAgICAgICAgICAgICcmcGljPScrYXJncy5waWM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgd1NpemU6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaDo2MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OjYzMCwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVucmVuOnsKICAgICAgICAgICAgICAgIG5hbWU6J+S6uuS6uue9kScsCiAgICAgICAgICAgICAgICBsaW1pdExhbmc6J3poLUNOJywKICAgICAgICAgICAgICAgIGljb246J2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQkFBQUFBUUNBWUFBQUFmOC85aEFBQUFDWEJJV1hNQUFBc1NBQUFMRWdIUzNYNzhBQUFDMTBsRVFWUTRqWFdUVFdoVVZ4VEhmL00rblNUalRDYXgrZEFreGs1bEdvMnR0TVVHQkp0MEZFRlVzSmEwaTBKWFFwRnU3S0xGZ0lzS1VncGRsUllNRkFwWkt0Uk5yWWtMS1lVS0ZpV1F0Z3ExblVBbWtHZ01pWk41TSsrOWUrL3BJdlVSSXYzRFdkeHo3djkzdVBkd1VteVNuZGs1Nk8wNGVzYkpGWWVjM0V1dmlZNGpYWjJkVVUrbWJ6Ym1maHFYK21KNXMyZGRLY3YyZDQyTzVZNWNDLzNQWjJUOFZrVkVSTUpZeS9pdGlteTVNQzNadzFlcTNvNmpaemJhSElDVTdhVmJYcjg0cFlmZlB2aTAySVpaMVpobUd3RFBzVEROTm8zMkRQSHAvUzMrM3hjdk96ZGZQUnhNZi9rZVlyUUZrQjQ0KzYxNmErUmdVR2pEUEFwaHZrWmxOVTY2VkZaam1GOURWelZCY1J1VTNqbnQ3eG9kQTdEc1hISEkzbi95dzNwM0h1WUNXSW9nVURTVVNRQU5aYUNtNEhFSWN3R05yaXpwRjBmSHJQUzJYc2Z2T2ZaUjJMMFZsZ0tvS3hEQUdDSWpDU0F5QXNhQTBsQTFHR01JWCs3eTNJY2pIMWhPMjc0UlpibFEwNkFBRFNpaFZNZ21nRkloQzBxU0dsVkY3UHU0TDd4eHpMTDgxazRUR1ZBR2pJQVJPdHNkanU5dVRRREhkN2ZTMmU0a2RaUkJhN0NidXdwV3luWnNRZ1hhckVlb0tSM0lQemZsMG9FOGhIckRQUVdBcFlQSDgxYW8vaU1MZmR0ZEprNzBQUWVZT05GSDMzWjMvUWxHc0JzeE9sZ3NXM3A1NW1lbkZvSVNlcm85N3B3YlNFem5yODl5L3Zwc2NyNXpib0NlYmcrVTRLNDFpQi85OWlOMnJqaVVPVGtwZzEvZmw0VmFKTSswVUkwa2YycFM4cWNtWmFHNklWK0xaTTlYdjB2dXlMVXdsZTdvdC9US2c5djZuNm1KZldGRVI1T2JkQnUrZEkvbE1NVnltR0w0MHIwazM5SGtzamVPYVpTdmZDSDF4YklOb0o3Y3ZWRmU2VDMwNi95VzNqMzlHZDc4OURZUEg2eEJ0Z2w4aDZYeVU3Ny9wY0lyT3pPYy9lWVBwbjY0ZXJYKzUrV1BRU1NWb0ZPVzdmZS8rMW02OFA2RnV1VjVxaVdOVG5zQTJFR0VXNnZqNjlwYS9mNTNuMFNWRytPSmJmTnZQMXRuTjcvM2tMMjFmeEJBcmZ4MTkvL1crVjlvUm15N3lpK1o3Z0FBQUFCSlJVNUVya0pnZ2c9PScsCiAgICAgICAgICAgICAgICBhcGk6ZnVuY3Rpb24oYXJncyl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVybD0naHR0cDovL3dpZGdldC5yZW5yZW4uY29tL2RpYWxvZy9zaGFyZT8nKwogICAgICAgICAgICAgICAgICAgICAgICAnbGluaz0nK2FyZ3MudXJsKwogICAgICAgICAgICAgICAgICAgICAgICAnJnRpdGxlPScrYXJncy50aXRsZSsKICAgICAgICAgICAgICAgICAgICAgICAgJyZwaWM9JythcmdzLnBpYzsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICB1cmw6dXJsLAogICAgICAgICAgICAgICAgICAgICAgICB3U2l6ZTp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOjYwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6NjUwLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICBkb3ViYW46ewogICAgICAgICAgICAgICAgbmFtZTon6LGG55OjJywKICAgICAgICAgICAgICAgIGxpbWl0TGFuZzonemgtQ04nLAogICAgICAgICAgICAgICAgaWNvbjonZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQUNYQklXWE1BQUFzU0FBQUxFZ0hTM1g3OEFBQUJqMGxFUVZRNGpaMlR6U3VFVVJUR2YvZWRVVDQyWGlKRk1ZMm8yUkExaW9YVUtEdHNzYUVzL0FITXpsWlpUbGxNRm5ZMkZzeE96QUl4b1JUSjEvaVlLUG1lbld5OGN5enVlTTFGd2xtZFRzOTVlczV6bjZ1YUl4MnljNzNMZjZxNXNoRkYySlovYmJzVnRpVTAzU04vcmRCMGp4QzJ4UXR3ZEo5a2ZHa0NCRUFRK1Y2VVVzcnRqMjZUSU9TY0lCQW9yd2NCRVRIQVlNNE83MDVBQVFxODc0RFdtaUFiSTR1L3VycHRxb3ZFMWJaSjRHUWNBTTZmVW5UUDlIMjdHQnVjeFYvcXczRWNmVzR1Z1dnRGVIeCs0dURtR0N5bFplYlU0M01hZjZuUDhNZ2xVRm0wWFZCTW9LSWVQSisyQWJ1dzJNQWFCRjVMdDNWbHRSeU1idjdvZ2RmamNYc2pTQ0YvTzh2RDh3QUVKbHZJejh0SG9YaDVmZUZ3ZEF1QXptZ3Y4ZE1WZmFLVm93QWdmclpLS24ySnI2U2EwNGNMWG5HMFVWbDFxZlFsOGVTSzRZOWxhRk13dHg4RFlDZzRvRUVXREFYN0FaamJXM0JuSHphRWJZbHNSUDhjNWNoNlZCakxSbmt0bGFDOHFBeEV5SWo4bUVRck8xODdUK2dvdTk4NWd3NkhDS2l2VC9pSkRaU2lxYXFCTnlTSzhycnc2YWQxQUFBQUFFbEZUa1N1UW1DQycsCiAgICAgICAgICAgICAgICBhcGk6ZnVuY3Rpb24oYXJncyl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVybD0naHR0cDovL3NodW8uZG91YmFuLmNvbS8lMjFzZXJ2aWNlL3NoYXJlPycrCiAgICAgICAgICAgICAgICAgICAgICAgICdocmVmPScrYXJncy51cmwrCiAgICAgICAgICAgICAgICAgICAgICAgICcmbmFtZT0nK2FyZ3MudGl0bGUrCiAgICAgICAgICAgICAgICAgICAgICAgICcmaW1hZ2U9JythcmdzLnBpYzsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICB1cmw6dXJsLAogICAgICAgICAgICAgICAgICAgICAgICB3U2l6ZTp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOjM1MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6NjAwLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICBmYWNlYm9vazp7CiAgICAgICAgICAgICAgICBuYW1lOidGYWNlYm9vaycsCiAgICAgICAgICAgICAgICBpY29uOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQU1BQUFBb0xROVRBQUFBdlZCTVZFVUFBQUQvLy84T2tQTVBsUFFNaXZFS2hmQUhmdXdGZCtvRWN1Z0NiT1VWcC8wVG8vc1JtZllYcS83aDhmMElnZTM2L1A3czlmM0c1LzNiNnZzU252Z1NuZmgwcmZBZGZ1Z2RxUHNZcHZzWm8vWktxdlZtci9NaHBmTkVvdk1xbWZOMXN2SVhrUElXbC9BSmdlNGVoKzBNZXVVSWJ1SHkrZjdZNi95bDJ2emI2L3U1My92YjZmcFR1ZnFaMFBsdHdQbENzZm13MWZpS3h2Z1Vudmgzd1BkZXQvY3RwUFovdS9WdnMvUmRydlEwb2ZRdmt1NGNrZXNYaGVjY2R1U2NrTUZrQUFBQUFYUlNUbE1BUU9iWVpnQUFBS0JKUkVGVUdOTkZ5RmNXZ2tBUVJORnF3eWlLSk1Fc0djdzV4LzB2eXg3bXFQZW5YamNLNHhZYjQyZlFLQXkrZDFQcTkzcjlwcnBkei9NTzI1bmpyRndYTE5iWjJTR2lqYTdId0xNc25TYldZajNrQUVxRm8yWGNWYUhDb21CUGhoOUVzbEZsTjhNbXk1Z09aY00waFJpUlpQdG1rcGg0Q1NFZTF4M1psMUhLQ1NDcnNaRG1xZHdNck01Q2FuZmxvcUJwV29jZlBJQ1NxMGVPdnc0dDM2bytHSEFOR1F5Z25EY0FBQUFBU1VWT1JLNUNZSUk9JywKICAgICAgICAgICAgICAgIGFwaTpmdW5jdGlvbihhcmdzKXsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJsPSdodHRwczovL3d3dy5mYWNlYm9vay5jb20vc2hhcmVyL3NoYXJlci5waHA/JysKICAgICAgICAgICAgICAgICAgICAgICAgJ3U9JytlbmNvZGVVUklDb21wb25lbnQoYXJncy51cmwpKwogICAgICAgICAgICAgICAgICAgICAgICAnJnQ9JythcmdzLnRpdGxlOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVybDp1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgIHdTaXplOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6NDM2LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdzo2MjYsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHR3aXR0ZXI6ewogICAgICAgICAgICAgICAgbmFtZTonVHdpdHRlcicsCiAgICAgICAgICAgICAgICBpY29uOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQU1BQUFBb0xROVRBQUFBbGxCTVZFVUFBQUFjbXU5OGdJTWRtZTU4Z0lOR2pzQmdoNk1VblBjZW1lMWdoNkpraHA1cGhwZ1NuZm9YblBVUm5mc1htL1FobWVramwrY2hsK2hnaUtOZWlLUnRnNUpsaHB0M2dvZ1VuUGdjbXZBVW5QZ1luUE1SblBzZW1ld1ZuUFVtbHVJMWs5STdrY3NwbHQ4eGxOZzBrdEpGajhFMWtkRlNpN0ZoaDZKRmo4RTlrTWhXaXEwZG11NGNtdkFYbS9VU25mb2JtL0VObnY4S08xS2JBQUFBTEhSU1RsTUEvUVA2QlZJbC92aEFIQS8zOGUzaXdweVJVRElWQ1FqeTcrVFp6OHkwcDVLRWUzTnNYMDVKUnprc0lHRDA5WTBBQUFDY1NVUkJWQmpUWlk0SERzTXdDRVZ4YkdmdjJiMTNzWjNlLzNJbFNkdEU2cE9RSGg4SmdCK2lFUit6cUVZYnNZc1NvTzdrUkNNQjUxQ0gyL3hCZ2ZmYVZRQkJoQzZxeFIxSWx6clpleGVOakxlSGJvMi9jVkdiQ0pYaVd2WkJqSndqS3NiUUtTa1FJQlBPQ0VyV29yOWRyMXFtbEdMY1NCaTRwaHdaYzNVMnRFSGxIK2NjbGNtYTRkTm5IaHZIbWFWeThyUlgzR3o0dzVvNjhmVTNSQzRMSTVMMHdjZ0FBQUFBU1VWT1JLNUNZSUk9JywKICAgICAgICAgICAgICAgIGFwaTpmdW5jdGlvbihhcmdzKXsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJsPSdodHRwczovL3R3aXR0ZXIuY29tL2ludGVudC90d2VldD8nKwogICAgICAgICAgICAgICAgICAgICAgICAndXJsPScrYXJncy51cmwrCiAgICAgICAgICAgICAgICAgICAgICAgICcmdGV4dD0nK2FyZ3MudGl0bGU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgd1NpemU6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaDozNTAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OjYwMCwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGludGVyZXN0OnsKICAgICAgICAgICAgICAgIG5hbWU6J1BpbnRlcmVzdCcsCiAgICAgICAgICAgICAgICBpY29uOidkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQU1BQUFBb0xROVRBQUFBcTFCTVZFVUFBQURrQUJmbUFTUGtBQjcvLy8va0FCVG1CQ2JtQVNEa0FCdjk3Ty9uR2pubkR5L2xBUnY2MXR2NjBOZnVVMnJzTkZIcEh6M3RGemZuQ0NydkFpVHdBU1BpQVNINzN1UDV4czczdWNMcVBsanFLa2ZvRmpUbUN5eis5ZmYycHJIMGs2THprSnp4YzRmdlozenNSRjdtQUI3akFBdisrZnYrK2ZyOTcvSDg2T3o4Nk92NzR1ZjYyZDcycnJuMnFiVDFucXowbTZqeWdKUHlmWTd4ZTR6dFRHWHRTbUxyUEZmc0xVdWNsWXExQUFBQUFYUlNUbE1BUU9iWVpnQUFBTDFKUkVGVUdOTTlqdGV5d2pBUVE3M0ZMWFk2YVNTaHcrMjkvditYNFVtQTg3U2FrVllTRTh1OExQT2x1QkVwREtqb3FoY0U0RDBBTFdaZDFlWnYzVHgzcWE2cnlVL21tNVB0TnVZUE5FWDRwK0RBbjFLZS9JYjNvSVhJRWJvWDJDVTlPSnNRWldKRTg3VFJLLzRGYkcxSlRpaUUrQTBmVmdPcHBrSHRRa1R1T0hyc1FQYjhEaUdTb1M2L2ZqZ1poL2ErTjhlcFZwMzJITnM3bTNvcTVtRitiVjJhRHFhdUx0TWhmcFZTVXBoK29XZ1BVdWxqOE4vNEgxMDJYMmVBYUF5STlTNWU5Z0FBQUFCSlJVNUVya0pnZ2c9PScsCiAgICAgICAgICAgICAgICBhcGk6ZnVuY3Rpb24oYXJncyl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVybD0naHR0cHM6Ly9waW50ZXJlc3QuY29tL3Bpbi9jcmVhdGUvYnV0dG9uLz8nKwogICAgICAgICAgICAgICAgICAgICAgICAndXJsPScrYXJncy51cmwrCiAgICAgICAgICAgICAgICAgICAgICAgICcmbWVkaWE9JytlbmNvZGVVUklDb21wb25lbnQoYXJncy5waWMpKwogICAgICAgICAgICAgICAgICAgICAgICAnJmRlc2NyaXB0aW9uPScrZW5jb2RlVVJJQ29tcG9uZW50KGFyZ3MudGl0bGUpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVybDp1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgIHdTaXplOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6MzUwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdzo2MDAsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBpZiAodHlwZW9mIFN0cmluZy5wcm90b3R5cGUuc3RhcnRzV2l0aCAhPSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIFN0cmluZy5wcm90b3R5cGUuc3RhcnRzV2l0aCA9IGZ1bmN0aW9uKHN0cikgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2xpY2UoMCwgc3RyLmxlbmd0aCkgPT0gc3RyOwogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgY29uc3QgYmxvYlVybE1hcCA9IG5ldyBNYXAoKTsKICAgICAgICBpZiAoIWVudmlyLmZpcmVmb3gpIHsKICAgICAgICAgICAgY29uc3QgZHJhd0ltYWdlUHJveHkgPSBuZXcgUHJveHkodW5zYWZlV2luZG93LkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5wcm90b3R5cGUuZHJhd0ltYWdlLCB7CiAgICAgICAgICAgICAgICBhcHBseTogZnVuY3Rpb24gKHRhcmdldCwgdGhpc0FyZywgYXJndW1lbnRzTGlzdCkgewogICAgICAgICAgICAgICAgICAgIGxldCBpbWFnZSA9IGFyZ3VtZW50c0xpc3RbMF07CiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlICYmIGltYWdlLnNyYykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzQXJnLmNhbnZhcy5kYXRhc2V0LnNyYyA9IGltYWdlLnNyYzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGFyZ2V0LmFwcGx5KHRoaXNBcmcsIGFyZ3VtZW50c0xpc3QpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB1bnNhZmVXaW5kb3cuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZS5kcmF3SW1hZ2UgPSBkcmF3SW1hZ2VQcm94eTsKCiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZU9iamVjdFVSTFByb3h5ID0gbmV3IFByb3h5KHVuc2FmZVdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMLCB7CiAgICAgICAgICAgICAgICBhcHBseTogZnVuY3Rpb24gKHRhcmdldCwgdGhpc0FyZywgYXJndW1lbnRzTGlzdCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhcmd1bWVudHNMaXN0WzBdOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2JVcmwgPSB0YXJnZXQuYXBwbHkodGhpc0FyZywgYXJndW1lbnRzTGlzdCk7CiAgICAgICAgICAgICAgICAgICAgYmxvYlVybE1hcC5zZXQoYmxvYlVybCwgYmxvYik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJsb2JVcmw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB1bnNhZmVXaW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTCA9IGNyZWF0ZU9iamVjdFVSTFByb3h5OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZG93bmxvYWRJbWcodXJsLCBuYW1lLCB0eXBlLCBlcnJDYikgewogICAgICAgICAgICB1cmxUb0Jsb2IodXJsLCAoYmxvYiwgZXh0KSA9PiB7CiAgICAgICAgICAgICAgICBpZihibG9iKXsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBzYXZlQXMoYmxvYiwgKHByZWZzLnNhdmVOYW1lQWRkVGl0bGUgPyBkb2N1bWVudC50aXRsZS5yZXBsYWNlKC9bXCpcLzo8Plw/XFxcfF0vZywgIiIpICsgIiAtICIgOiAiIikgKyBnZXRSaWdodFNhdmVOYW1lKHVybCwgbmFtZSwgdHlwZSwgZXh0KSk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9HTV9kb3dubG9hZCh1cmwsIG5hbWUsIHR5cGUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyQ2IpIGVyckNiKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgX0dNX2Rvd25sb2FkKHVybCwgbmFtZSwgdHlwZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVyckNiKSBlcnJDYigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldEJsb2IodXJsKSB7CiAgICAgICAgICAgIHJldHVybiBibG9iVXJsTWFwLmdldCh1cmwpIHx8IG51bGw7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBibG9iVG9EYXRhVVJMKGJsb2IsIGNiKSB7CiAgICAgICAgICAgIHZhciBhID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgYS5yZWFkQXNEYXRhVVJMKGJsb2IpOwogICAgICAgICAgICBhLm9ubG9hZCA9IGZ1bmN0aW9uIChlKXsKICAgICAgICAgICAgICAgIGNiKGUudGFyZ2V0LnJlc3VsdCk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGEub25lcnJvciA9IGZ1bmN0aW9uIChlKXsKICAgICAgICAgICAgICAgIGNiKG51bGwpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBhc3luYyBmdW5jdGlvbiBnZXRCYXNlNjRGcm9tQmxvYlVybChibG9iVXJsKSB7CiAgICAgICAgICAgIGxldCBibG9iID0gZ2V0QmxvYihibG9iVXJsKTsKICAgICAgICAgICAgaWYgKCFibG9iKSByZXR1cm4gIiI7CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIGJsb2JUb0RhdGFVUkwoYmxvYiwgYmFzZTY0ID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGJhc2U2NCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgcnVsZXJFbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICAgICAgaWYgKHJ1bGVyRWxlLnN0eWxlKSB7CiAgICAgICAgICAgIHJ1bGVyRWxlLnN0eWxlLnZpc2liaWxpdHkgPSAiaGlkZGVuIjsKICAgICAgICAgICAgcnVsZXJFbGUuc3R5bGUud2hpdGVTcGFjZSA9ICJub3dyYXAiOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB2aXN1YWxMZW5ndGgoc3RyLHNpemUsZmFtaWx5KSB7CiAgICAgICAgICAgIGlmICghcnVsZXJFbGUuc3R5bGUpIHJldHVybiAyMzA7CiAgICAgICAgICAgIHJ1bGVyRWxlLnN0eWxlLmZvbnRTaXplID0gc2l6ZSB8fCAiaW5oZXJpdCI7CiAgICAgICAgICAgIHJ1bGVyRWxlLnN0eWxlLmZvbnRGYW1pbHkgPSBmYW1pbHkgfHwgImluaGVyaXQiOwogICAgICAgICAgICBydWxlckVsZS5pbm5lclRleHQgPSBzdHI7CiAgICAgICAgICAgIGdldEJvZHkoZG9jdW1lbnQpLmFwcGVuZENoaWxkKHJ1bGVyRWxlKTsKICAgICAgICAgICAgbGV0IHcgPSBydWxlckVsZS5vZmZzZXRXaWR0aDsKICAgICAgICAgICAgZ2V0Qm9keShkb2N1bWVudCkucmVtb3ZlQ2hpbGQocnVsZXJFbGUpOwogICAgICAgICAgICByZXR1cm4gdzsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldE1TdHIoZnVuYykgewogICAgICAgICAgICB2YXIgbGluZXMgPSBmdW5jLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIGxpbmVzID0gbGluZXMuc3Vic3RyaW5nKGxpbmVzLmluZGV4T2YoIi8qIikgKyAzLCBsaW5lcy5sYXN0SW5kZXhPZigiKi8iKSk7CiAgICAgICAgICAgIHJldHVybiBsaW5lczsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHRvUkUob2JqLCBmbGFnKSB7CiAgICAgICAgICAgIGlmICghb2JqKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gb2JqOwogICAgICAgICAgICB9IGVsc2UgaWYgKG9iaiBpbnN0YW5jZW9mIFJlZ0V4cCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICAgICAgfSBlbHNlIGlmIChmbGFnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChvYmosIGZsYWcpOwogICAgICAgICAgICB9IGVsc2UgaWYgKG9iaiBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChvYmpbMF0sIG9ialsxXSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgIGlmIChvYmouaW5kZXhPZignKicpICE9IC0xICYmIG9iai5pbmRleE9mKCcuKicpID09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqID0gd2lsZGNhcmRUb1JlZ0V4cFN0cihvYmopOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAob2JqKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gd2lsZGNhcmRUb1JlZ0V4cFN0cih1cmxzdHIpIHsKICAgICAgICAgICAgaWYgKHVybHN0ci5zb3VyY2UpIHJldHVybiB1cmxzdHIuc291cmNlOwogICAgICAgICAgICB2YXIgcmVnID0gdXJsc3RyLnJlcGxhY2UoL1soKVxbXF17fXwrLixeJD9cXF0vZywgIlxcJCYiKS5yZXBsYWNlKC9cKisvZywgZnVuY3Rpb24oc3RyKXsKICAgICAgICAgICAgICAgIHJldHVybiBzdHIgPT09ICIqIiA/ICIuKiIgOiAiW14vXSoiOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuICJeIiArIHJlZyArICIkIjsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGlzWFBhdGgoeHBhdGgpIHsKICAgICAgICAgICAgcmV0dXJuIHhwYXRoLnN0YXJ0c1dpdGgoJy4vJykgfHwgeHBhdGguc3RhcnRzV2l0aCgnLy8nKSB8fCB4cGF0aC5zdGFydHNXaXRoKCdpZCgnKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldEVsZW1lbnRNaXgoc2VsZWN0b3IsIGNvbnRleHROb2RlLCBkb2MpIHsKICAgICAgICAgICAgdmFyIHJldDsKICAgICAgICAgICAgaWYgKCFzZWxlY3RvciB8fCAhY29udGV4dE5vZGUpIHJldHVybiByZXQ7CiAgICAgICAgICAgIGRvYyA9IGRvYyB8fCBkb2N1bWVudDsKCiAgICAgICAgICAgIHZhciB0eXBlID0gdHlwZW9mIHNlbGVjdG9yOwogICAgICAgICAgICBpZiAodHlwZSA9PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgaWYgKGlzWFBhdGgoc2VsZWN0b3IpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0ID0gZ2V0RWxlbWVudEJ5WHBhdGgoc2VsZWN0b3IsIGNvbnRleHROb2RlLCBkb2MpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXQgPSBjb250ZXh0Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgcmV0ID0gc2VsZWN0b3IoY29udGV4dE5vZGUsIGRvYyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGxhdW5jaEZ1bGxTY3JlZW4oZWxlbWVudCkgewogICAgICAgICAgICBpZiAoZWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbikgewogICAgICAgICAgICAgICAgZWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbigpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQubXNSZXF1ZXN0RnVsbHNjcmVlbikgewogICAgICAgICAgICAgICAgZWxlbWVudC5tc1JlcXVlc3RGdWxsc2NyZWVuKCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbikgewogICAgICAgICAgICAgICAgZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4pIHsKICAgICAgICAgICAgICAgIGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4oRWxlbWVudC5BTExPV19LRVlCT0FSRF9JTlBVVCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNhbmNlbEZ1bGxTY3JlZW4oKSB7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5leGl0RnVsbHNjcmVlbikgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbikgewogICAgICAgICAgICAgICAgZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbigpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbigpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyDmo4DmtYvnvKnmlL4KICAgICAgICBmdW5jdGlvbiBkZXRlY3Rab29tICgpewogICAgICAgICAgICB2YXIgcmF0aW8gPSAwLAogICAgICAgICAgICAgICAgc2NyZWVuID0gd2luZG93LnNjcmVlbiwKICAgICAgICAgICAgICAgIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpOwoKICAgICAgICAgICAgaWYgKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIHJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAofnVhLmluZGV4T2YoJ21zaWUnKSkgewogICAgICAgICAgICAgICAgaWYgKHNjcmVlbi5kZXZpY2VYRFBJICYmIHNjcmVlbi5sb2dpY2FsWERQSSkgewogICAgICAgICAgICAgICAgICAgIHJhdGlvID0gc2NyZWVuLmRldmljZVhEUEkgLyBzY3JlZW4ubG9naWNhbFhEUEk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAod2luZG93Lm91dGVyV2lkdGggIT09IHVuZGVmaW5lZCAmJiB3aW5kb3cuaW5uZXJXaWR0aCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICByYXRpbyA9IHdpbmRvdy5vdXRlcldpZHRoIC8gd2luZG93LmlubmVyV2lkdGg7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChyYXRpbyl7CiAgICAgICAgICAgICAgICByYXRpbyA9IE1hdGgucm91bmQocmF0aW8gKiAxMDApOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gcmF0aW87CiAgICAgICAgfQoKICAgICAgICAvL+iOt+WPluS9jee9rgogICAgICAgIGZ1bmN0aW9uIGdldENvbnRlbnRDbGllbnRSZWN0KHRhcmdldCl7CiAgICAgICAgICAgIHZhciByZWN0PXRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgdmFyIGNvbXBTdHlsZT11bnNhZmVXaW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpOwogICAgICAgICAgICB2YXIgcEZsb2F0PXBhcnNlRmxvYXQ7CiAgICAgICAgICAgIHZhciB0b3A9cmVjdC50b3AgKyBwRmxvYXQoY29tcFN0eWxlLmJvcmRlclRvcFdpZHRoKTsKICAgICAgICAgICAgdmFyIHJpZ2h0PXJlY3QucmlnaHQgLSBwRmxvYXQoY29tcFN0eWxlLmJvcmRlclJpZ2h0V2lkdGgpOwogICAgICAgICAgICB2YXIgYm90dG9tPXJlY3QuYm90dG9tIC0gcEZsb2F0KGNvbXBTdHlsZS5ib3JkZXJCb3R0b21XaWR0aCk7CiAgICAgICAgICAgIHZhciBsZWZ0PXJlY3QubGVmdCArIHBGbG9hdChjb21wU3R5bGUuYm9yZGVyTGVmdFdpZHRoKTsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHRvcDp0b3AsCiAgICAgICAgICAgICAgICByaWdodDpyaWdodCwKICAgICAgICAgICAgICAgIGJvdHRvbTpib3R0b20sCiAgICAgICAgICAgICAgICBsZWZ0OmxlZnQsCiAgICAgICAgICAgICAgICB3aWR0aDpyaWdodC1sZWZ0LAogICAgICAgICAgICAgICAgaGVpZ2h0OmJvdHRvbS10b3AsCiAgICAgICAgICAgIH07CiAgICAgICAgfTsKCiAgICAgICAgLy/ojrflj5bnqpflj6PlpKflsI8uCiAgICAgICAgZnVuY3Rpb24gZ2V0V2luZG93U2l6ZSgpewogICAgICAgICAgICAvKgogICAgICAgICAgICAvL+WMheWQq+a7muWKqOadoQogICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICBoOndpbmRvdy5pbm5lckhlaWdodCwKICAgICAgICAgICAgICAgICB3OndpbmRvdy5pbm5lcldpZHRoLAogICAgICAgICAgICAgfTsKICAgICAgICAgICAgKi8KCiAgICAgICAgICAgIC8v5Y676Zmk5rua5Yqo5p2h55qE56qX5Y+j5aSn5bCPCiAgICAgICAgICAgIHZhciBkZT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CiAgICAgICAgICAgIHZhciBib2R5PWdldEJvZHkoZG9jdW1lbnQpOwogICAgICAgICAgICB2YXIgYmFja0NvbXBhdD1kb2N1bWVudC5jb21wYXRNb2RlPT0nQmFja0NvbXBhdCc7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBoOmJhY2tDb21wYXQ/IGJvZHkuY2xpZW50SGVpZ2h0IDogZGUuY2xpZW50SGVpZ2h0LAogICAgICAgICAgICAgICAgdzpiYWNrQ29tcGF0PyBib2R5LmNsaWVudFdpZHRoIDogZGUuY2xpZW50V2lkdGgsCiAgICAgICAgICAgIH07CgogICAgICAgIH0KCiAgICAgICAgLy/ojrflj5blt7Lmu5rliqjnmoTot53nprsKICAgICAgICBmdW5jdGlvbiBnZXRTY3JvbGxlZChjb250YWluZXIpewogICAgICAgICAgICBpZihjb250YWluZXIpewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICB4OmNvbnRhaW5lci5zY3JvbGxMZWZ0LAogICAgICAgICAgICAgICAgICAgIHk6Y29udGFpbmVyLnNjcm9sbFRvcCwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHg6J3Njcm9sbFgnIGluIHdpbmRvdyA/IHdpbmRvdy5zY3JvbGxYIDogKCdwYWdlWE9mZnNldCcgaW4gd2luZG93ID8gd2luZG93LnBhZ2VYT2Zmc2V0IDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZ2V0Qm9keShkb2N1bWVudCkuc2Nyb2xsTGVmdCksCiAgICAgICAgICAgICAgICB5OidzY3JvbGxZJyBpbiB3aW5kb3cgPyB3aW5kb3cuc2Nyb2xsWSA6ICgncGFnZVlPZmZzZXQnIGluIHdpbmRvdyA/IHdpbmRvdy5wYWdlWU9mZnNldCA6ICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGdldEJvZHkoZG9jdW1lbnQpLnNjcm9sbFRvcCksCiAgICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICAvL3hwYXRoIOiOt+WPluWNleS4quWFg+e0oAogICAgICAgIGZ1bmN0aW9uIGdldEVsZW1lbnRCeVhwYXRoKHhwYXRoLGNvbnRleHROb2RlLGRvYyl7CiAgICAgICAgICAgIGRvYz1kb2MgfHwgZG9jdW1lbnQ7CiAgICAgICAgICAgIGNvbnRleHROb2RlPWNvbnRleHROb2RlIHx8IGRvYzsKICAgICAgICAgICAgcmV0dXJuIGRvYy5ldmFsdWF0ZSh4cGF0aCxjb250ZXh0Tm9kZSxudWxsLDksbnVsbCkuc2luZ2xlTm9kZVZhbHVlOwogICAgICAgIH0KCgogICAgICAgIC8v5LqL5Lu25pSv5oyB5qOA5rWLLgogICAgICAgIGZ1bmN0aW9uIGV2ZW50U3VwcG9ydGVkKCBldmVudE5hbWUsZWxlbSApewogICAgICAgICAgICBlbGVtID0gZWxlbSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgZXZlbnROYW1lID0gIm9uIiArIGV2ZW50TmFtZTsKICAgICAgICAgICAgdmFyIGlzU3VwcG9ydGVkID0gKGV2ZW50TmFtZSBpbiBlbGVtKTsKICAgICAgICAgICAgaWYgKCFpc1N1cHBvcnRlZCl7CiAgICAgICAgICAgICAgICBpZighZWxlbS5zZXRBdHRyaWJ1dGUpey8vc2V0QXR0cmlidXRl5piv5YWD57Sg6IqC54K555qE5pa55rOVCiAgICAgICAgICAgICAgICAgICAgZWxlbT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgc2V0QXR0cjsKICAgICAgICAgICAgICAgIGlmKCFlbGVtLmhhc0F0dHJpYnV0ZShldmVudE5hbWUpKXsKICAgICAgICAgICAgICAgICAgICBzZXRBdHRyPXRydWU7CiAgICAgICAgICAgICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoZXZlbnROYW1lLCAicmV0dXJuOyIpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGlzU3VwcG9ydGVkID0gdHlwZW9mIGVsZW1bZXZlbnROYW1lXSA9PSAiZnVuY3Rpb24iOwogICAgICAgICAgICAgICAgaWYoc2V0QXR0cillbGVtLnJlbW92ZUF0dHJpYnV0ZShldmVudE5hbWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBpc1N1cHBvcnRlZDsKICAgICAgICB9CgoKICAgICAgICAvL+ajgOa1i+WxnuaAp+aUr+aMgS5kb23lsZ7mgKcKICAgICAgICAvL+i/lOWbnuW4puWJjee8gOeahOWPr+S7peebtOaOpeaJp+ihjOaYr+WxnuaApwogICAgICAgIGZ1bmN0aW9uIHByb1N1cHBvcnRlZChwcm9OYW1lLGVsZW0pewogICAgICAgICAgICAvL+WIpOaWreesrOS4gOS4quWtl+avjeaYr+WQpuWkp+WGme+8jOWmguaenOaYr+eahOivne+8jOS4uuaehOmAoOWHveaVsO+8jOWJjee8gOS5n+imgeWkp+WGmQogICAgICAgICAgICB2YXIgcHJlZml4PS9eW0EtWl0vLnRlc3QocHJvTmFtZSk/IFsnJywnV2ViS2l0LScsJ08tJywnTW96LScsJ01TLSddIDogWycnLCd3ZWJraXQtJywnby0nLCdtb3otJywnbXMtJ107CiAgICAgICAgICAgIHZhciBpPTA7CiAgICAgICAgICAgIHZhciBwX2k7CiAgICAgICAgICAgIHZhciBzUHJvTmFtZTsKICAgICAgICAgICAgZWxlbSA9IGVsZW0gfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICAgIHdoaWxlKHR5cGVvZiAocF9pPXByZWZpeFtpKytdKSE9J3VuZGVmaW5lZCcpewogICAgICAgICAgICAgICAgc1Byb05hbWU9KHBfaStwcm9OYW1lKS5yZXBsYWNlKC8tKFtBLXpdKS9nLGZ1bmN0aW9uKGEsYil7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIudG9VcHBlckNhc2UoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYoc1Byb05hbWUgaW4gZWxlbSlyZXR1cm4gc1Byb05hbWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CgoKICAgICAgICAvL2Nzc+WxnuaAp+aUr+aMgQogICAgICAgIC8v5bim5YmN57yA55qE6buY6K6k5Li65aSn5YaZ77yI5omA5pyJ5rWP6KeI5Zmo5pSv5oyB77yJCiAgICAgICAgLy/mr5TlpoJXZWJraXRUcmFuc2Zvcm0sTW96VHJhbnNmb3JtLE9UcmFuc2ZvbXIKICAgICAgICAvL2Nocm9tZea1j+iniOWZqOWkp+Wwj+WGmeWJjee8gOmDveihjOOAggogICAgICAgIC8vZmlyZWZveCxvcGVyYeWPquiDveWkp+WGmQogICAgICAgIC8vaWUgOSvlj6rog73lsI/lhpkKICAgICAgICBmdW5jdGlvbiBjc3NQcm9TdXBwb3J0ZWQocHJvTmFtZSxlbGVtLGNhcGl0YWxpemUpewogICAgICAgICAgICBpZihjYXBpdGFsaXplIT09ZmFsc2UpY2FwaXRhbGl6ZT10cnVlOwogICAgICAgICAgICBwcm9OYW1lPXByb05hbWUudG9Mb3dlckNhc2UoKTsKCiAgICAgICAgICAgIHZhciBwcmVmaXg9WycnLCctd2Via2l0LScsJy1vLScsJy1tb3otJywnLW1zLSddOwogICAgICAgICAgICBlbGVtPWVsZW0gfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHZhciBzdHlsZT1lbGVtLnN0eWxlOwogICAgICAgICAgICB2YXIgY2FtZWxQcm87CgogICAgICAgICAgICAvLyDkvJrmnInkuKrplJnor68gaW52YWxpZCAnaW4nIG9wZXJhbmQgc3R5bGUKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wLGlpPXByZWZpeC5sZW5ndGg7aTxpaTtpKyspewogICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdD10cnVlOwogICAgICAgICAgICAgICAgICAgIGNhbWVsUHJvPShwcmVmaXhbaV0rcHJvTmFtZSkucmVwbGFjZSgvLShbYS16XSkvZyxmdW5jdGlvbihhLGIpewogICAgICAgICAgICAgICAgICAgICAgICBiPWIudG9VcHBlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZmlyc3QpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3Q9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighY2FwaXRhbGl6ZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYj1iLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYjsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBpZihjYW1lbFBybyBpbiBzdHlsZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYW1lbFBybzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2goZXgpIHt9CgogICAgICAgICAgICBpZighY2FwaXRhbGl6ZSlyZXR1cm47CiAgICAgICAgICAgIHJldHVybiBjc3NQcm9TdXBwb3J0ZWQocHJvTmFtZSxlbGVtLGZhbHNlKTsKCiAgICAgICAgfQoKICAgICAgICAvL2Nzc+WxnuaAp+WAvOaUr+aMgQogICAgICAgIGZ1bmN0aW9uIGNzc1ZhbHVlU3VwcG9ydGVkKHByb05hbWUsdmFsdWUsZWxlbSl7CiAgICAgICAgICAgIHZhciBwcmVmaXg9WycnLCctd2Via2l0LScsJy1vLScsJy1tb3otJywnLW1zLSddOwogICAgICAgICAgICBlbGVtPWVsZW0gfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHZhciBzdHlsZT1lbGVtLnN0eWxlOwogICAgICAgICAgICBpZighc3R5bGUpcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB2YXIgcHJlZml4ZWRWYWx1ZTsKICAgICAgICAgICAgZm9yKHZhciBpPTAsaWk9cHJlZml4Lmxlbmd0aDtpPGlpO2krKyl7CiAgICAgICAgICAgICAgICBwcmVmaXhlZFZhbHVlPXByZWZpeFtpXSArIHZhbHVlOwogICAgICAgICAgICAgICAgc3R5bGVbcHJvTmFtZV09cHJlZml4ZWRWYWx1ZTsKICAgICAgICAgICAgICAgIGlmKHN0eWxlW3Byb05hbWVdPT1wcmVmaXhlZFZhbHVlKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJlZml4ZWRWYWx1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCgogICAgICAgIC8vZWxlbS5kYXRhc2V055qE5YW85a655a6e546wCiAgICAgICAgLy9pZeS4jeaUr+aMge+8m2ZpcmVmb3hHTeWCqOWtmOS4jeiDveWPjeaYoOWIsOWFg+e0oOWxnuaAp+S4iuOAggogICAgICAgIGZ1bmN0aW9uIGRhdGFzZXQoZWxlbSxwcm8sdmFsdWUpewoKICAgICAgICAgICAgZnVuY3Rpb24gZ2V0RGF0YVByZWZpeCgpewogICAgICAgICAgICAgICAgcmV0dXJuICdkYXRhLScgKyBwcm8ucmVwbGFjZSgvW0EtWl0vZyxmdW5jdGlvbihtKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJy0nICsgbS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBpZih0eXBlb2YgdmFsdWU9PSd1bmRlZmluZWQnKXsvL+WPluWAvAogICAgICAgICAgICAgICAgaWYoZWxlbS5kYXRhc2V0KXsKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGVsZW0uZGF0YXNldFtwcm9dOwogICAgICAgICAgICAgICAgfWVsc2V7Ly/msqHmnInlj5bliLDlgLzvvIzov5Tlm551bmRlZmluZWTvvIxnZXRBdHRyaWJ1dGXpu5jorqTmmK/ov5Tlm55udWxs77yM5omA5Lul5Yik5pat5LiA5LiL44CCCiAgICAgICAgICAgICAgICAgICAgdmFyIHByZWZpeGVkUHJvPWdldERhdGFQcmVmaXgoKTsKICAgICAgICAgICAgICAgICAgICBpZihlbGVtLmhhc0F0dHJpYnV0ZShwcmVmaXhlZFBybykpewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT1lbGVtLmdldEF0dHJpYnV0ZShwcmVmaXhlZFBybyk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoZ2V0RGF0YVByZWZpeCgpLHZhbHVlKTsKICAgICAgICAgICAgfTsKICAgICAgICB9OwoKCiAgICAgICAgLy/ph43mlrDmo4Dmn6Xmgqzmta7lm77niYcKICAgICAgICBmdW5jdGlvbiBpbWdSZUhvdmVyKGltZyl7CiAgICAgICAgICAgIC8v6KaB5qOA5p+l55qE5Zu+54mH77yM5piv5b2T5YmN5oKs5rWu55qE44CCCiAgICAgICAgICAgIGlmKCFmbG9hdEJhci5zaG93biB8fCBmbG9hdEJhci5kYXRhLmltZyAhPSBpbWcpcmV0dXJuOwoKICAgICAgICAgICAgdmFyIG1Ib3Zlcj1kb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudCcpOwogICAgICAgICAgICB2YXIgY3I9aW1nLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICBtSG92ZXIuaW5pdE1vdXNlRXZlbnQoJ21vdXNlb3ZlcicsdHJ1ZSx0cnVlLHdpbmRvdywwLCBjci5sZWZ0ICsgMTAsIGNyLnRvcCArIDEwLCBjci5sZWZ0ICsgMTAsIGNyLnRvcCArIDEwLCBmYWxzZSxmYWxzZSxmYWxzZSxmYWxzZSwgMCxudWxsKTsKICAgICAgICAgICAgaW1nLmRpc3BhdGNoRXZlbnQobUhvdmVyKTsKICAgICAgICB9OwoKICAgICAgICAvLyDojrflj5bnnJ/mraPnmoR1bnNhZmVXaW5kb3csY2hyb21l6YeM6Z2i5Lmf6IO96K6/6Zeu5Yiw55yf5a6e546v5aKD55qE5Y+Y6YePCiAgICAgICAgLy8g5ZyoIGNocm9tZSAzNyDmtYvor5Xml6DmlYgKICAgICAgICBpZighZW52aXIuZmlyZWZveCAmJiAhZW52aXIub3BlcmEgJiYgIWVudmlyLmllICYmICFzdG9yYWdlLnN1cHBvcnRHTSl7CiAgICAgICAgICAgIDsoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BpY1ZpZXdlci1yZXR1cm4tdW5zYWZlV2luZG93JyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICB1bnNhZmVXaW5kb3cgPSBlLmRldGFpbDsKICAgICAgICAgICAgICAgICAgICAvLyBhbGVydCh1bnNhZmVXaW5kb3cuJCk7CiAgICAgICAgICAgICAgICB9LHRydWUpOwoKICAgICAgICAgICAgICAgIC8v6aG16Z2i6ISa5pysCiAgICAgICAgICAgICAgICB2YXIgcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICAgICAgICAgICAgIHMudGV4dENvbnRlbnQ9JygnICsgKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgdmFyIGN1c0V2ZW50PWRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpOwogICAgICAgICAgICAgICAgICAgIGN1c0V2ZW50LmluaXRDdXN0b21FdmVudCgncGljVmlld2VyLXJldHVybi11bnNhZmVXaW5kb3cnLGZhbHNlLGZhbHNlLHdpbmRvdyk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjdXNFdmVudCk7CiAgICAgICAgICAgICAgICB9KS50b1N0cmluZygpICsnKSgpJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQocyk7CiAgICAgICAgICAgIH0pKCk7CiAgICAgICAgfQoKCiAgICAgICAgLy/mipvlh7rplJnor6/liLDplJnor6/mjqfliLblj7AKICAgICAgICBmdW5jdGlvbiB0aHJvd0Vycm9ySW5mbyhlcnIpewogICAgICAgICAgICBpZihjb25zb2xlICYmIGNvbnNvbGUuZXJyb3IpewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSArICdcblxuJyArIChlcnIuc3RhY2t0cmFjZT8gZXJyLnN0YWNrdHJhY2UgOiAnJykgKyAnXG5cbicgLCBlcnIpOwogICAgICAgICAgICB9OwogICAgICAgIH07CgogICAgICAgIC8v5a+56LGh5YWL6ZqGCiAgICAgICAgZnVuY3Rpb24gY2xvbmVPYmplY3Qob2JqLGRlZXApewogICAgICAgICAgICB2YXIgb2JqX2k7CiAgICAgICAgICAgIHZhciByZXQ9QXJyYXkuaXNBcnJheShvYmopPyBbXSA6IHt9OwogICAgICAgICAgICBmb3IodmFyIGkgaW4gb2JqKXsKICAgICAgICAgICAgICAgIGlmKCFvYmouaGFzT3duUHJvcGVydHkoaSkpY29udGludWU7CiAgICAgICAgICAgICAgICBvYmpfaT1vYmpbaV07CiAgICAgICAgICAgICAgICBpZighZGVlcCB8fCB0eXBlb2Ygb2JqX2khPSdvYmplY3QnIHx8IG9ial9pPT09bnVsbCB8fCBvYmpfaS5ub2RlVHlwZSl7CiAgICAgICAgICAgICAgICAgICAgcmV0W2ldPW9ial9pOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgcmV0W2ldPWNsb25lT2JqZWN0KG9ial9pLGRlZXApOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICB9OwoKICAgICAgICAvL+mXqueDgeWFg+e0oOOAggogICAgICAgIGZ1bmN0aW9uIGZsYXNoRWxlKGVsZSxkdXJhdGlvbil7CiAgICAgICAgICAgIGlmKGRhdGFzZXQoZWxlLCdwdkZsYXNoaW5nJykpcmV0dXJuOwogICAgICAgICAgICBpZihlbGUub2Zmc2V0SGVpZ2h0PT0wKXJldHVybjsKICAgICAgICAgICAgZGF0YXNldChlbGUsJ3B2Rmxhc2hpbmcnLCcxJyk7CgogICAgICAgICAgICB2YXIgb091dGxpbmU9ZWxlLnN0eWxlLm91dGxpbmU7CiAgICAgICAgICAgIHZhciBvT3V0bGluZU9mZnNldD1lbGUuc3R5bGUub3V0bGluZU9mZnNldDsKICAgICAgICAgICAgdmFyIG9PcGFjaXR5PWVsZS5zdHlsZS5vcGFjaXR5OwogICAgICAgICAgICB2YXIgb1RyYW5zZm9ybT1lbGUuc3R5bGVbc3VwcG9ydC5jc3NUcmFuc2Zvcm1dOwoKICAgICAgICAgICAgdmFyIGNvdW50PTA7CiAgICAgICAgICAgIHZhciBzdGFydFRpbWU9RGF0ZS5ub3coKTsKICAgICAgICAgICAgZHVyYXRpb249ZHVyYXRpb24/IGR1cmF0aW9uIDogMTIwMDsKCiAgICAgICAgICAgIHZhciBmbGFzaEludGVydmFsPXNldEludGVydmFsKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB2YXIgb3V0bGluZT0nbm9uZScsCiAgICAgICAgICAgICAgICAgICAgb3V0bGluZU9mZnNldD0wLAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk9MC4zLAogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybT0nJzsKCiAgICAgICAgICAgICAgICBpZihjb3VudCAlIDIgPT0gMCl7CiAgICAgICAgICAgICAgICAgICAgb3V0bGluZT0nNXB4IGRhc2hlZCByZ2JhKDI1NSwwLDAsMC45NSknOwogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk9MC45NTsKICAgICAgICAgICAgICAgICAgICBvdXRsaW5lT2Zmc2V0PScxcHgnOwogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybT0nc2NhbGUoMS4xKSc7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBpZigoRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSkgPiBkdXJhdGlvbil7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoZmxhc2hJbnRlcnZhbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dGxpbmU9b091dGxpbmU7CiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk9b09wYWNpdHk7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dGxpbmVPZmZzZXQ9b091dGxpbmVPZmZzZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybT1vVHJhbnNmb3JtOwogICAgICAgICAgICAgICAgICAgICAgICBlbGUucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXB2LWZsYXNoaW5nJyk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgZWxlLnN0eWxlLm91dGxpbmU9b3V0bGluZTsKICAgICAgICAgICAgICAgIGVsZS5zdHlsZS5vdXRsaW5lT2Zmc2V0PW91dGxpbmVPZmZzZXQ7CiAgICAgICAgICAgICAgICBlbGUuc3R5bGUub3BhY2l0eT1vcGFjaXR5OwogICAgICAgICAgICAgICAgZWxlLnN0eWxlW3N1cHBvcnQuY3NzVHJhbnNmb3JtXT10cmFuc2Zvcm07CgogICAgICAgICAgICAgICAgY291bnQrKzsKICAgICAgICAgICAgfSw4MCk7CiAgICAgICAgfQoKICAgICAgICAvL+aUr+aMgeaDheWGtS4KICAgICAgICB2YXIgc3VwcG9ydD17CiAgICAgICAgICAgIGNzc1RyYW5zZm9ybTpjc3NQcm9TdXBwb3J0ZWQoJ3RyYW5zZm9ybScpLAogICAgICAgICAgICBjc3NDdXJzb3JWYWx1ZTp7CiAgICAgICAgICAgICAgICB6b29tSW46Y3NzVmFsdWVTdXBwb3J0ZWQoJ2N1cnNvcicsJ3pvb20taW4nKSwKICAgICAgICAgICAgICAgIHpvb21PdXQ6Y3NzVmFsdWVTdXBwb3J0ZWQoJ2N1cnNvcicsJ3pvb20tb3V0JyksCiAgICAgICAgICAgICAgICBncmFiOmNzc1ZhbHVlU3VwcG9ydGVkKCdjdXJzb3InLCdncmFiJyksCiAgICAgICAgICAgICAgICBncmFiYmluZzpjc3NWYWx1ZVN1cHBvcnRlZCgnY3Vyc29yJywnZ3JhYmJpbmcnKSwKICAgICAgICAgICAgfSwKICAgICAgICB9OwoKCgogICAgICAgIC8v5Yqo55S7566X5rOVCiAgICAgICAgLyoKICAgICAgICAgdDogY3VycmVudCB0aW1l77yI5b2T5YmN5pe26Ze077yJ77ybCiAgICAgICAgIGI6IGJlZ2lubmluZyB2YWx1Ze+8iOWIneWni+WAvO+8ie+8mwogICAgICAgICBjOiBjaGFuZ2UgaW4gdmFsdWXvvIjlj5jljJbph4/vvInvvJsKICAgICAgICAgZDogZHVyYXRpb27vvIjmjIHnu63ml7bpl7TvvInjgIIKICAgICAgICAqLwoKICAgICAgICB2YXIgVHdlZW4gPSB7CiAgICAgICAgICAgIEN1YmljOiB7CiAgICAgICAgICAgICAgICBlYXNlSW5PdXQ6ZnVuY3Rpb24odCxiLGMsZCl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1jLzIqKE1hdGguY29zKE1hdGguUEkqdC9kKS0xKStiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgfTsKCiAgICAgICAgLy9pbWdSZWFkeQogICAgICAgIHZhciBpbWdSZWFkeT0oZnVuY3Rpb24oKXsKICAgICAgICAgICAgdmFyIGlSSW50ZXJ2YWwsCiAgICAgICAgICAgICAgICBpUlJlYWR5Rm49W10sCiAgICAgICAgICAgICAgICBpc3Jjcz1bXQogICAgICAgICAgICA7CgogICAgICAgICAgICB2YXIgdGltZUxpbWl0PTMgKiA2MCAqIDEwMDA7Ly8z5YiG6ZKfCgogICAgICAgICAgICBmdW5jdGlvbiBjaGVja1JlYWR5KCl7CiAgICAgICAgICAgICAgICB2YXIgbm93PSBEYXRlLm5vdygpOwogICAgICAgICAgICAgICAgZm9yKHZhciBpPTAsaWk9aVJSZWFkeUZuLmxlbmd0aCxpUlJlYWR5Rm5faTtpPGlpO2krKyl7CiAgICAgICAgICAgICAgICAgICAgaVJSZWFkeUZuX2k9aVJSZWFkeUZuW2ldOwogICAgICAgICAgICAgICAgICAgIC8vbm93IC0gaVJSZWFkeUZuX2kuc3RhcnRUaW1lID49IHRpbWVMaW1pdCB8fAogICAgICAgICAgICAgICAgICAgIGlmKGlSUmVhZHlGbl9pKCkpewogICAgICAgICAgICAgICAgICAgICAgICBpUlJlYWR5Rm4uc3BsaWNlKGksMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzcmNzLnNwbGljZShpLDEpOwogICAgICAgICAgICAgICAgICAgICAgICBpLS07CiAgICAgICAgICAgICAgICAgICAgICAgIGlpLS07CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBpZihpUlJlYWR5Rm4ubGVuZ3RoPT0wKXsKICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGlSSW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgICAgIGlSSW50ZXJ2YWw9bnVsbDsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH07CgoKCiAgICAgICAgICAgIHZhciBpbWdSZWFkeT1mdW5jdGlvbihpbWcsb3B0cyl7CgogICAgICAgICAgICAgICAgaWYoL05vZGVMaXN0fEhUTUxDb2xsZWN0aW9uLy50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbWcpKSAgfHwgQXJyYXkuaXNBcnJheShpbWcpKXsKICAgICAgICAgICAgICAgICAgICBhcnJheUZuLmZvckVhY2guY2FsbChpbWcsZnVuY3Rpb24oaW1nLGluZGV4LGFycmF5KXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW1nIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdSZWFkeShpbWcsb3B0cyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpZighKGltZyBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQpKXsKICAgICAgICAgICAgICAgICAgICB2YXIgdF9pbWc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7CiAgICAgICAgICAgICAgICAgICAgdF9pbWcuc3JjPWltZzsKICAgICAgICAgICAgICAgICAgICBpbWc9dF9pbWc7CiAgICAgICAgICAgICAgICAgICAgdF9pbWc9bnVsbDsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIHJlYWR5LGxvYWQsZXJyb3IsbG9hZEVuZCxhYm9ydCx0aW1lb3V0LHRpbWU7CiAgICAgICAgICAgICAgICByZWFkeT1vcHRzLnJlYWR5OwogICAgICAgICAgICAgICAgbG9hZD1vcHRzLmxvYWQ7CiAgICAgICAgICAgICAgICBlcnJvcj1vcHRzLmVycm9yOwogICAgICAgICAgICAgICAgbG9hZEVuZD1vcHRzLmxvYWRFbmQ7CiAgICAgICAgICAgICAgICBhYm9ydD1vcHRzLmFib3J0OwogICAgICAgICAgICAgICAgdGltZW91dD1vcHRzLnRpbWVvdXQ7CiAgICAgICAgICAgICAgICB0aW1lPXR5cGVvZiBvcHRzLnRpbWU9PSdudW1iZXInPyBvcHRzLnRpbWUgOiAwOwoKICAgICAgICAgICAgICAgIGlmKHRpbWUpewogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWxvYWRFbmREb25lKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0ZWQ9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUxpc3RlbmVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3JjPSBwcmVmcy5pY29ucy5icm9rZW5JbWdfc21hbGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aW1lb3V0KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0LmNhbGwoaW1nLHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OmltZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTondGltZW91dCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZEVuZERvbmU9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxvYWRFbmQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRFbmQuY2FsbChpbWcsewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6aW1nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOid0aW1lb3V0JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0sdGltZSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBzcmM9aW1nLnNyYzsKICAgICAgICAgICAgICAgIHZhciBsb2FkRW5kRG9uZTsKCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnbyh0eXBlLGUpewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCh0eXBlKXsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbG9hZCc6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTGlzdGVuZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvKCdyZWFkeScpOy8v5aaC5p6c55u05o6l6Kem5Y+RbG9hZO+8jOmCo+S5iOWFiOinpuWPkXJlYWR5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihsb2FkKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkLmNhbGwoaW1nLGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighbG9hZEVuZERvbmUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRFbmREb25lPXRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobG9hZEVuZCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRFbmQuY2FsbChpbWcsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpUlJlYWR5Rm4gPSBpUlJlYWR5Rm4uZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbSAhPT0gcmVhZHlIYW5kbGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzcmNzID0gaXNyY3MuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbSAhPT0gc3JjCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyZWFkeSc6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXJlYWR5IHx8IHJlYWR5SGFuZGxlci5kb25lKXJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWR5SGFuZGxlci5kb25lPXRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkeS5jYWxsKGltZyx7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OmltZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOidyZWFkeScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdlcnJvcic6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTGlzdGVuZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVycm9yKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvci5jYWxsKGltZyxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighbG9hZEVuZERvbmUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRFbmREb25lPXRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobG9hZEVuZCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRFbmQuY2FsbChpbWcsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgYWJvcnRlZDsKICAgICAgICAgICAgICAgIHZhciByZXQ9ewogICAgICAgICAgICAgICAgICAgIGltZzppbWcsCiAgICAgICAgICAgICAgICAgICAgYWJvcnQ6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWxvYWRFbmREb25lKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlSUmVhZHlGbiA9IGlSUmVhZHlGbi5maWx0ZXIoZnVuY3Rpb24oaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtICE9PSByZWFkeUhhbmRsZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNyY3MgPSBpc3Jjcy5maWx0ZXIoZnVuY3Rpb24oaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtICE9PSBzcmMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnRlZD10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTGlzdGVuZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZy5zcmM9IHByZWZzLmljb25zLmJyb2tlbkltZ19zbWFsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFib3J0KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydC5jYWxsKGltZyx7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDppbWcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6J2Fib3J0JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkRW5kRG9uZT10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobG9hZEVuZCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZEVuZC5jYWxsKGltZyx7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDppbWcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6J2Fib3J0JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVhZHlIYW5kbGVyKCl7Ly/lsL3lv6vnmoTmo4DmtYvlm77niYflpKflsI8uCiAgICAgICAgICAgICAgICAgICAgaWYobG9hZEVuZERvbmUgfHwgYWJvcnRlZClyZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBpZihpbWcubmF0dXJhbFdpZHRoPT0wIHx8IGltZy5uYXR1cmFsSGVpZ2h0PT0wKXJldHVybjsKICAgICAgICAgICAgICAgICAgICBnbygncmVhZHknKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH07CgoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGxvYWRIYW5kbGVyKGUpewogICAgICAgICAgICAgICAgICAgIGlmKGFib3J0ZWQpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGdvKCdsb2FkJyxlKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3JIYW5kbGVyKGUpewogICAgICAgICAgICAgICAgICAgIGlmKGFib3J0ZWQpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGdvKCdlcnJvcicsZSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKCl7CiAgICAgICAgICAgICAgICAgICAgaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWQnLGxvYWRIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgICAgIGltZy5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsZXJyb3JIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvL3JlYWR55b+F6aG75ZyobG9hZOS5i+WJjeinpuWPkeOAggoKICAgICAgICAgICAgICAgIGlmKGltZy5jb21wbGV0ZSl7Ly/lm77niYflt7Lnu4/liqDovb3lrozmiJAuCiAgICAgICAgICAgICAgICAgICAgaWYoL15kYXRhLy50ZXN0KGltZy5zcmMpIHx8ICh0eXBlb2YgaW1nLndpZHRoPT0nbnVtYmVyJyAmJiBpbWcud2lkdGggJiYgaW1nLmhlaWdodCkpey8v5Zu+54mHCiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFib3J0ZWQpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ28oJ2xvYWQnLHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOidsb2FkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6aW1nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sMCk7CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7Ly/ov5nkuI3mmK/lm77niYcub3BlcmHkvJror4bliKvplJnor68uCiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFib3J0ZWQpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ28oJ2Vycm9yJyx7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTonZXJyb3InLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDppbWcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwwKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgICAgICAgICB9OwoKCiAgICAgICAgICAgICAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLGVycm9ySGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJyxsb2FkSGFuZGxlcix0cnVlKTsKCgogICAgICAgICAgICAgICAgaWYocmVhZHkpewogICAgICAgICAgICAgICAgICAgIHZhciBpbmRleD1pc3Jjcy5pbmRleE9mKHNyYyk7CiAgICAgICAgICAgICAgICAgICAgaWYoaW5kZXg9PS0xKXsKICAgICAgICAgICAgICAgICAgICAgICAgaXNyY3MucHVzaChzcmMpOwogICAgICAgICAgICAgICAgICAgICAgICByZWFkeUhhbmRsZXIuc3RhcnRUaW1lPSBEYXRlLm5vdygpOwogICAgICAgICAgICAgICAgICAgICAgICBpUlJlYWR5Rm4ucHVzaChyZWFkeUhhbmRsZXIpOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBpUlJlYWR5Rm5baW5kZXhdLnN0YXJ0VGltZT0gRGF0ZS5ub3coKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBpZighaVJJbnRlcnZhbCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlSSW50ZXJ2YWw9c2V0SW50ZXJ2YWwoY2hlY2tSZWFkeSw2Nik7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHJldHVybiBpbWdSZWFkeTsKICAgICAgICB9KSgpOwoKCiAgICAgICAgdmFyIGFkZFdoZWVsRXZlbnQ9KGZ1bmN0aW9uKCl7CgogICAgICAgICAgICBmdW5jdGlvbiBnZXRTdXBwb3J0RXZlbnROYW1lKCl7CiAgICAgICAgICAgICAgICB2YXIgcmV0PSdET01Nb3VzZVNjcm9sbCc7CiAgICAgICAgICAgICAgICBpZihldmVudFN1cHBvcnRlZCgnd2hlZWwnKSl7Ly93M2MgRkY+PTE3IGllPj05CiAgICAgICAgICAgICAgICAgICAgcmV0PSd3aGVlbCc7CiAgICAgICAgICAgICAgICB9ZWxzZSBpZihldmVudFN1cHBvcnRlZCgnbW91c2V3aGVlbCcpKXsvL29wZXJhLGNocm9tZQogICAgICAgICAgICAgICAgICAgIHJldD0nbW91c2V3aGVlbCc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIGV2ZW50TmFtZTsKCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlbGUsY2FsbGJhY2ssdXNlQ2FwdHVyZSl7CiAgICAgICAgICAgICAgICBpZighZXZlbnROYW1lKXsKICAgICAgICAgICAgICAgICAgICBldmVudE5hbWU9Z2V0U3VwcG9ydEV2ZW50TmFtZSgpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBlbGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGU9ZS50eXBlOwogICAgICAgICAgICAgICAgICAgIHZhciBuZTsKICAgICAgICAgICAgICAgICAgICBpZih0eXBlIT0nd2hlZWwnKXsKICAgICAgICAgICAgICAgICAgICAgICAgbmU9e307CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSBpbiBlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lW2ldPWVbaV07CiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICBuZS50eXBlPSd3aGVlbCc7CiAgICAgICAgICAgICAgICAgICAgICAgIG5lLmRlbHRhWD0wOwogICAgICAgICAgICAgICAgICAgICAgICBuZS5kZWx0YVk9MDsKICAgICAgICAgICAgICAgICAgICAgICAgbmUuZGVsdGFaPTA7CiAgICAgICAgICAgICAgICAgICAgICAgIG5lLmRlbHRhTW9kZT0xOy8vbGluZQogICAgICAgICAgICAgICAgICAgICAgICBuZS5wcmV2ZW50RGVmYXVsdD1lLnByZXZlbnREZWZhdWx0LmJpbmQoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG5lLnN0b3BQcm9wYWdhdGlvbj1lLnN0b3BQcm9wYWdhdGlvbi5iaW5kKGUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHg9MCx5PTA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBlLmF4aXM9PSdudW1iZXInKXsvL0RPTU1vdXNlU2Nyb2xsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlLmF4aXM9PTIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk9ZS5kZXRhaWw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4PWUuZGV0YWlsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL29wZXJh5pep6LW354mI5pys55qEbW91c2V3aGVlbOWPquaUr+aMgXnovbTnmoTmu5rliqgsZS53aGVlbERlbHRhWSB1bmRlZmluZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBlLndoZWVsRGVsdGFZPT0ndW5kZWZpbmVkJyB8fCAgZS53aGVlbERlbHRhWSE9MCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeT0tZS53aGVlbERlbHRhLzQwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeD0tZS53aGVlbERlbHRhLzQwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgbmUuZGVsdGFZID15OwogICAgICAgICAgICAgICAgICAgICAgICBuZS5kZWx0YVggPXg7CgogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpcyxuZT8gbmUgOiBlKTsKICAgICAgICAgICAgICAgIH0seyBwYXNzaXZlOiBmYWxzZSwgY2FwdHVyZTogdXNlQ2FwdHVyZSB8fCBmYWxzZSB9KTsKICAgICAgICAgICAgfTsKICAgICAgICB9KSgpOwoKCiAgICAgICAgdmFyIGFkZEN1c01vdXNlRXZlbnQ9KGZ1bmN0aW9uKCl7CgogICAgICAgICAgICBmdW5jdGlvbiBnZXRTdXBwb3J0ZWQoKXsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgbW91c2VsZWF2ZTpldmVudFN1cHBvcnRlZCgnbW91c2VsZWF2ZScpLAogICAgICAgICAgICAgICAgICAgIG1vdXNlZW50ZXI6ZXZlbnRTdXBwb3J0ZWQoJ21vdXNlZW50ZXInKSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB2YXIgc3VwcG9ydDsKICAgICAgICAgICAgdmFyIG1hcD17CiAgICAgICAgICAgICAgICBtb3VzZWxlYXZlOidtb3VzZW91dCcsCiAgICAgICAgICAgICAgICBtb3VzZWVudGVyOidtb3VzZW92ZXInLAogICAgICAgICAgICB9OwoKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHR5cGUsIGVsZSwgZm4pey8v5LqL5Lu257G75Z6L77yM5YWD57Sg77yM55uR5ZCs5Ye95pWwCiAgICAgICAgICAgICAgICBpZighc3VwcG9ydCl7CiAgICAgICAgICAgICAgICAgICAgc3VwcG9ydD1nZXRTdXBwb3J0ZWQoKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy8gY2hyb21lIDMwKyDomb3nhLbmlK/mjIEgbW91c2VlbnRlcu+8jOS9huaYr+WtmOWcqOmXrumimAogICAgICAgICAgICAgICAgaWYoc3VwcG9ydFt0eXBlXSAmJiAhKHR5cGUgPT0gJ21vdXNlZW50ZXInICYmIHdpbmRvdy5jaHJvbWUpKXsKICAgICAgICAgICAgICAgICAgICBlbGUuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLGZuLGZhbHNlKTsvL21vdXNlbGVhdmUsZW50ZXLkuI3lhpLms6EKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIGVsZS5hZGRFdmVudExpc3RlbmVyKG1hcFt0eXBlXSxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlbGF0ZWRUYXJnZXQ9ZS5yZWxhdGVkVGFyZ2V0Oy8vbW91c2VvdXTvvIzljrvlvoDnmoTlhYPntKDvvJttb3VzZW92ZXLvvIzmnaXoh6rnmoTlhYPntKAKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMuY29udGFpbnMocmVsYXRlZFRhcmdldCkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4uY2FsbCh0aGlzLGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0sdHJ1ZSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9OwoKICAgICAgICB9KSgpOwoKCiAgICAgICAgLy/lupMKICAgICAgICBmdW5jdGlvbiBHYWxsZXJ5QygpewogICAgICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICB9OwoKICAgICAgICB2YXIgZ2FsbGVyeTsKICAgICAgICB2YXIgZ2FsbGVyeU1vZGU7CgogICAgICAgIEdhbGxlcnlDLnByb3RvdHlwZT17CiAgICAgICAgICAgIGluaXQ6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHRoaXMuYWRkU3R5bGUoKTsKICAgICAgICAgICAgICAgIHZhciBjb250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwoKICAgICAgICAgICAgICAgIHRoaXMuZ2FsbGVyeT1jb250YWluZXI7CiAgICAgICAgICAgICAgICBjb250YWluZXIuY2xhc3NOYW1lPSdwdi1nYWxsZXJ5LWNvbnRhaW5lcic7CiAgICAgICAgICAgICAgICBjb250YWluZXIudGFiSW5kZXg9MTsvL+S4uuS6huiOt+WPlueEpueCue+8jOadpeaIquiOt+mUruebmOS6i+S7tgogICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTD1jcmVhdGVIVE1MKAogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWZsb2F0LWxlZnQiPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIHRpdGxlPSInK2kxOG4oInBpY0luZm8iKSsnIiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWxlZnQtaW1nLWluZm8iPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtbGVmdC1pbWctaW5mby1yZXNvbHV0aW9uIiB0aXRsZT0iJytpMThuKCJyZXNvbHV0aW9uIikrJyI+MCB4IDA8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1sZWZ0LWltZy1pbmZvLWNvdW50IiB0aXRsZT0iJytpMThuKCJwaWNOdW0iKSsnIj7vvIgxIC8gMe+8iTwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWxlZnQtaW1nLWluZm8tc2NhbGluZyIgdGl0bGU9IicraTE4bigic2NhbGVSYXRpbyIpKyciPu+8iDEwMCXvvIk8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktdmVydGljYWwtYWxpZ24taGVscGVyIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1sZWZ0LWltZy1pbmZvLWRlc2NyaXB0aW9uIiB0aXRsZT0iJytpMThuKCJwaWNOb3RlIikrJyI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9InB2LWdhbGxlcnktcmFuZ2UtYm94Ij48aW5wdXQgdHlwZT0icmFuZ2UiIGlkPSJtaW5zaXplVyIgbWluPSIwIiBtYXg9IjEwMCIgdmFsdWU9IjAiIHRpdGxlPSJXaWR0aCIgLz4gPHNwYW4gaWQ9Im1pbnNpemVXU3BhbiI+MHB4PC9zcGFuPiAnKwogICAgICAgICAgICAgICAgICAgICc8aW5wdXQgdHlwZT0icmFuZ2UiIGlkPSJtaW5zaXplSCIgbWluPSIwIiBtYXg9IjEwMCIgdmFsdWU9IjAiIHRpdGxlPSJIZWlnaHQiIC8+IDxzcGFuIGlkPSJtaW5zaXplSFNwYW4iPjBweDwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c2VsZWN0IGlkPSJwaW5TaXplIj4nKwogICAgICAgICAgICAgICAgICAgICc8b3B0aW9uIHZhbHVlPSIiIGRpc2FibGVkIHNlbGVjdGVkPicraTE4bigic2l6ZSIpKyc8L29wdGlvbj4nKwogICAgICAgICAgICAgICAgICAgICc8b3B0aW9uIHZhbHVlPSIwIj4nK2kxOG4oImFsbCIpKyc8L29wdGlvbj4nKwogICAgICAgICAgICAgICAgICAgICc8b3B0aW9uIHZhbHVlPSI1MTJ4NTEyIj4nK2kxOG4oImJpZ1NpemUiKSsnPC9vcHRpb24+JysKICAgICAgICAgICAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT0iMC0yNTZ4MC0yNTYiPicraTE4bigiaWNvblNpemUiKSsnPC9vcHRpb24+JysKICAgICAgICAgICAgICAgICAgICAnPC9zZWxlY3Q+JysKICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1sZWZ0LWxvY2staWNvbiIgdGl0bGU9IicraTE4bigibG9ja1NpemVUaXAiKSsnIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1sZWZ0LWZpbHRlci1pY29uIiB0aXRsZT0iJytpMThuKCJ1cmxGaWx0ZXJUaXAiKSsnIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwoKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gdGl0bGU9IicraTE4bigiZXhpdENvbGxlY3Rpb25UaXAiKSsnIiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQgcHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZXhpdC1jb2xsZWN0aW9uIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQiPjxzcGFuPicraTE4bigiZXhpdENvbGxlY3Rpb24iKSsnPC9zcGFuPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS12ZXJ0aWNhbC1hbGlnbi1oZWxwZXIiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIHRpdGxlPSInK2kxOG4oImxvYWRBbGxUaXAiKSsnIiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQgcHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtbmV4dFBhZ2UiPicrCiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kIj48c3Bhbj4nK2kxOG4oImxvYWRBbGwiKSsnPC9zcGFuPjwvZGl2PicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXZlcnRpY2FsLWFsaWduLWhlbHBlciI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwoKICAgICAgICAgICAgICAgICAgICAvKic8c3BhbiB0aXRsZT0iJytpMThuKCJ1cmxGaWx0ZXJUaXAiKSsnIiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQgcHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtdXJsRmlsdGVyIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3Bhbj4nK2kxOG4oInVybEZpbHRlciIpKyc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktdmVydGljYWwtYWxpZ24taGVscGVyIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCgogICAgICAgICAgICAgICAgICAgICc8c3BhbiB0aXRsZT0iJytpMThuKCJmaWRkbGVUaXAiKSsnIiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQgcHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtb3BlcmF0ZSI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4+JytpMThuKCJmaWRkbGUiKSsnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXZlcnRpY2FsLWFsaWduLWhlbHBlciI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKyovCgogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29udGFpbmVyIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQgcHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29sbGVjdCI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWNvbGxlY3QtaWNvbiI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb2xsZWN0LXRleHQiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS12ZXJ0aWNhbC1hbGlnbi1oZWxwZXIiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdCBwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtY29sbGVjdCI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gdGl0bGU9IicraTE4bigiY29sbGVjdERldGFpbFRpcCIpKyciIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbSBwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbS1jb2xsZWN0LWRlc2NyaXB0aW9uIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3Bhbj4nK2kxOG4oImNvbGxlY3REZXRhaWwiKSsn77yaPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzx0ZXh0YXJlYSBkYXRhLXByZWZzPSJkZXNjcmlwdGlvbiIgY29scz0iMjUiIHJvd3M9IjUiPjwvdGV4dGFyZWE+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb250YWluZXIiPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIHRpdGxlPSInK2kxOG4oInBsYXlTbGlkZSIpKyciIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZCBwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1zbGlkZS1zaG93Ij4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmRfb3ZlcmxheWVyIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLXNsaWRlLXNob3ctYnV0dG9uIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtc2xpZGUtc2hvdy1idXR0b24taW5uZXIiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS12ZXJ0aWNhbC1hbGlnbi1oZWxwZXIiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLXNsaWRlLXNob3ctY291bnRkb3duIiB0aXRsZT0iJytpMThuKCJjb3VudERvd24iKSsnIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktdmVydGljYWwtYWxpZ24taGVscGVyIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QgcHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LXNsaWRlLXNob3ciPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbSIgdGl0bGU9IicraTE4bigic2xpZGVHYXBUaXAiKSsnIj4nKwogICAgICAgICAgICAgICAgICAgICc8aW5wdXQgY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1zbGlkZS1zaG93LWludGVydmFsIiBkYXRhLXByZWZzPSJpbnRlcnZhbCIgc3RlcD0iMSIgbWluPSIxIiB0eXBlPSJudW1iZXIiIHZhbHVlPSI1IiAvPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuPicraTE4bigic2xpZGVHYXAiKSsnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0iICB0aXRsZT0iJytpMThuKCJzbGlkZUJhY2tUaXAiKSsnIj4nKwogICAgICAgICAgICAgICAgICAgICc8aW5wdXQgaWQ9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtLXNsaWRlLXNob3ctYmFja3dhcmQiIGRhdGEtcHJlZnM9ImJhY2t3YXJkIiB0eXBlPSJjaGVja2JveCIgLz4nKwogICAgICAgICAgICAgICAgICAgICc8bGFiZWwgZm9yPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbS1zbGlkZS1zaG93LWJhY2t3YXJkIj4nK2kxOG4oInNsaWRlQmFjayIpKyfjgIDjgIDjgIA8L2xhYmVsPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0iPicrCiAgICAgICAgICAgICAgICAgICAgJzxpbnB1dCBpZD0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0tc2xpZGUtc2hvdy1yYW5kb20iIGRhdGEtcHJlZnM9InJhbmRvbSIgdHlwZT0iY2hlY2tib3giIC8+JysKICAgICAgICAgICAgICAgICAgICAnPGxhYmVsIGZvcj0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0tc2xpZGUtc2hvdy1yYW5kb20iPicraTE4bigic2xpZGVSYW5kb20iKSsn44CA44CA44CAPC9sYWJlbD4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIiAgdGl0bGU9IicraTE4bigic2xpZGVXYWl0VGlwIikrJyI+JysKICAgICAgICAgICAgICAgICAgICAnPGlucHV0IGlkPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbS1zbGlkZS1zaG93LXdhaXQiIGRhdGEtcHJlZnM9IndhaXQiIHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPSJjaGVja2VkIiAvPicrCiAgICAgICAgICAgICAgICAgICAgJzxsYWJlbCBmb3I9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtLXNsaWRlLXNob3ctd2FpdCI+JytpMThuKCJzbGlkZVdhaXQiKSsnPC9sYWJlbD4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIiAgdGl0bGU9IicraTE4bigic2xpZGVTa2lwRXJyb3JUaXAiKSsnIj4nKwogICAgICAgICAgICAgICAgICAgICc8aW5wdXQgaWQ9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtLXNsaWRlLXNob3ctc2tpcEVycm9ySW1nIiBkYXRhLXByZWZzPSJza2lwRXJyb3JJbWciIHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPSJjaGVja2VkIiAvPicrCiAgICAgICAgICAgICAgICAgICAgJzxsYWJlbCBmb3I9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtLXNsaWRlLXNob3ctc2tpcEVycm9ySW1nIj4nK2kxOG4oInNsaWRlU2tpcEVycm9yIikrJzwvbGFiZWw+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb250YWluZXIiPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIHRpdGxlPSInK2kxOG4oInR5cGVUaXAiKSsnIiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQgcHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY2F0ZWdvcnkiPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuPicraTE4bigidHlwZSIpKyc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktdmVydGljYWwtYWxpZ24taGVscGVyIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QgcHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWNhdGVnb3J5Ij4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCgogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29udGFpbmVyIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiB0aXRsZT0iJytpMThuKCJjb21tYW5kVGlwIikrJyIgY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kIHB2LWdhbGxlcnktaGVhZC1jb21tYW5kLW90aGVycyI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4+JytpMThuKCJjb21tYW5kIikrJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS12ZXJ0aWNhbC1hbGlnbi1oZWxwZXIiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdCBwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3Qtb3RoZXJzIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0iIGRhdGEtY29tbWFuZD0iZW50ZXJDb2xsZWN0aW9uIiB0aXRsZT0iJytpMThuKCJ2aWV3Q29sbGVjdGlvblRpcCIpKyciPicraTE4bigidmlld0NvbGxlY3Rpb24iKSsnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbSIgZGF0YS1jb21tYW5kPSJwc0ltYWdlIiB0aXRsZT0iJytpMThuKCJvbmxpbmVFZGl0VGlwIiwiICIgKyBwcmVmcy5nYWxsZXJ5LmVkaXRTaXRlICsgIiAiKSsnIj4nK2kxOG4oIm9ubGluZUVkaXQiKSsnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbSIgZGF0YS1jb21tYW5kPSJkb3dubG9hZEltYWdlIiB0aXRsZT0iJytpMThuKCJkb3dubG9hZEltYWdlVGlwIikrJyI+JytpMThuKCJkb3dubG9hZEltYWdlIikrJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0iIGRhdGEtY29tbWFuZD0icG9zdEltYWdlc1RvQXJpYTIiIHRpdGxlPSInK2kxOG4oInBvc3QyQXJpYTIiKSsnIj4nK2kxOG4oInBvc3QyQXJpYTIiKSsnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbSIgZGF0YS1jb21tYW5kPSJleHBvcnRJbWFnZXMiIHRpdGxlPSInK2kxOG4oImV4cG9ydEltYWdlc1RpcCIpKyciPicraTE4bigiZXhwb3J0SW1hZ2VzIikrJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0iIGRhdGEtY29tbWFuZD0iY29weUltYWdlcyIgdGl0bGU9IicraTE4bigiY29weUltYWdlc1VybFRpcCIpKyciPicraTE4bigiY29weUltYWdlc1VybCIpKyc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIiBkYXRhLWNvbW1hbmQ9ImNvb2tpZSI+Q29va2llPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbSIgZGF0YS1jb21tYW5kPSJzY3JvbGxJbnRvVmlldyIgdGl0bGU9IicraTE4bigiZmluZEluUGFnZVRpcCIpKyciPicraTE4bigiZmluZEluUGFnZSIpKyc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIiBkYXRhLWNvbW1hbmQ9Im9wZW5Jbk5ld1dpbmRvdyIgdGl0bGU9IicraTE4bigib3BlbkluTmV3V2luZG93VGlwIikrJyI+JytpMThuKCJvcGVuSW5OZXdXaW5kb3ciKSsnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbSI+JysKICAgICAgICAgICAgICAgICAgICBpMThuKCJyb3RhdGUiKSsnIDxzZWxlY3QgaWQ9ImdhbGxlcnlSb3RhdGUiPicrCiAgICAgICAgICAgICAgICAgICAgJzxvcHRpb24gdmFsdWU9IjAiPjDCsDwvb3B0aW9uPicrCiAgICAgICAgICAgICAgICAgICAgJzxvcHRpb24gdmFsdWU9IjkwIj45MMKwPC9vcHRpb24+JysKICAgICAgICAgICAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT0iMTgwIj4xODDCsDwvb3B0aW9uPicrCiAgICAgICAgICAgICAgICAgICAgJzxvcHRpb24gdmFsdWU9IjI3MCI+MjcwwrA8L29wdGlvbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NlbGVjdD4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIiB0aXRsZT0iJytpMThuKCJhdXRvUmVmcmVzaFRpcCIpKyciPicrCiAgICAgICAgICAgICAgICAgICAgJzxsYWJlbCBkYXRhLWNvbW1hbmQ9InNjcm9sbFRvRW5kQW5kUmVsb2FkIj4nK2kxOG4oImF1dG9SZWZyZXNoIikrJzwvbGFiZWw+JysKICAgICAgICAgICAgICAgICAgICAnPGlucHV0IHR5cGU9ImNoZWNrYm94IiAgZGF0YS1jb21tYW5kPSJzY3JvbGxUb0VuZEFuZFJlbG9hZCIvPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0iIGRhdGEtY29tbWFuZD0idXJsRmlsdGVyIiB0aXRsZT0iJytpMThuKCJ1cmxGaWx0ZXJUaXAiKSsnIj4nK2kxOG4oInVybEZpbHRlciIpKyc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIiBkYXRhLWNvbW1hbmQ9ImFkZEltYWdlVXJscyIgdGl0bGU9IicraTE4bigiYWRkSW1hZ2VVcmxzVGlwcyIpKyciPicraTE4bigiYWRkSW1hZ2VVcmxzIikrJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0iIGRhdGEtY29tbWFuZD0ib3BlbkltYWdlcyIgdGl0bGU9IicraTE4bigib3BlbkltYWdlc1RpcHMiKSsnIj4nK2kxOG4oIm9wZW5JbWFnZXMiKSsnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbSIgZGF0YS1jb21tYW5kPSJvcGVyYXRlIiB0aXRsZT0iJytpMThuKCJmaWRkbGVUaXAiKSsnIj4nK2kxOG4oImZpZGRsZSIpKyc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIiBkYXRhLWNvbW1hbmQ9InZpZXdtb3JlIj4nK2kxOG4oInZpZXdtb3JlIikrJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBpZD0icHYtZ2FsbGVyeS1mdWxsc2NyZWVuYnRuIiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0iIGRhdGEtY29tbWFuZD0iZnVsbFNjcmVlbiI+JytpMThuKCJlbnRlckZ1bGxzYyIpKyc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIiBkYXRhLWNvbW1hbmQ9Im9wZW5QcmVmcyI+JytpMThuKCJvcGVuQ29uZmlnIikrJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCgogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29udGFpbmVyIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiB0aXRsZT0iJytpMThuKCJoZWFkU2VhcmNoVGlwIikrJyIgY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kIHB2LWdhbGxlcnktaGVhZC1jb21tYW5kLXNlYXJjaCI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4+JytpMThuKCJoZWFkU2VhcmNoVGlwIikrJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS12ZXJ0aWNhbC1hbGlnbi1oZWxwZXIiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdCBwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3Qtc2VhcmNoIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0iIGlkPSJoZWFkU2VhcmNoQWxsIiBkYXRhLWNvbW1hbmQ9ImhlYWRTZWFyY2hBbGwiPicraTE4bigiaGVhZFNlYXJjaEFsbCIpKyc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwoKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWNvbnRhaW5lciI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gdGl0bGU9IicraTE4bigic2hhcmUiKSsnIiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQgcHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtc2hhcmUiPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuPicraTE4bigic2hhcmUiKSsnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXZlcnRpY2FsLWFsaWduLWhlbHBlciI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0IHB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1zaGFyZSI+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwoKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gdGl0bGU9IicraTE4bigiY2xvc2VHYWxsZXJ5IikrJyIgY2xhc3M9InB2LWdhbGxlcnktaGVhZC1jb21tYW5kIHB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWNsb3NlIj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwoKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktYm9keSI+JysKCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWltZy1jb250YWluZXIiPicrCgogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1pbWctY29udGVudCI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktaW1nLXBhcmVudCI+JysKICAgICAgICAgICAgICAgICAgICAnPGltZyB0aXRsZT0iJytpMThuKCJyZWZyZXNoV2hlbkVycm9yIikrJyIgY2xhc3M9InB2LWdhbGxlcnktaW1nX2Jyb2tlbiIgc3JjPSInK3ByZWZzLmljb25zLmJyb2tlbkltZysnIiAvPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS12ZXJ0aWNhbC1hbGlnbi1oZWxwZXIiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWltZy1jb250cm9sZXIgcHYtZ2FsbGVyeS1pbWctY29udHJvbGVyLXByZSI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWltZy1jb250cm9sZXIgcHYtZ2FsbGVyeS1pbWctY29udHJvbGVyLW5leHQiPjwvc3Bhbj4nKwoKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktc2Nyb2xsYmFyLWggcHYtZ2FsbGVyeS1pbWctc2Nyb2xsYmFyLWgiPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNjcm9sbGJhci1oLXRyYWNrIHB2LWdhbGxlcnktaW1nLXNjcm9sbGJhci1oLXRyYWNrIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1zY3JvbGxiYXItaC1oYW5kbGUgcHYtZ2FsbGVyeS1pbWctc2Nyb2xsYmFyLWgtaGFuZGxlIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwoKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktc2Nyb2xsYmFyLXYgcHYtZ2FsbGVyeS1pbWctc2Nyb2xsYmFyLXYiPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNjcm9sbGJhci12LXRyYWNrIHB2LWdhbGxlcnktaW1nLXNjcm9sbGJhci12LXRyYWNrIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1zY3JvbGxiYXItdi1oYW5kbGUgcHYtZ2FsbGVyeS1pbWctc2Nyb2xsYmFyLXYtaGFuZGxlIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwoKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUiIHRpdGxlPSInK2kxOG4oInN3aXRjaFNsaWRlIikrJyI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtY29udGVudCI+4pa8PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXZlcnRpY2FsLWFsaWduLWhlbHBlciI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwoKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktc2lkZWJhci12aWV3bW9yZSIgdGl0bGU9IicraTE4bigidmlld21vcmUiKSsnIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1zaWRlYmFyLXZpZXdtb3JlLWNvbnRlbnQiPuKcmjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS12ZXJ0aWNhbC1hbGlnbi1oZWxwZXIiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwoKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktc2lkZWJhci1jb250YWluZXIiIHVuc2VsZWN0YWJsZT0ib24iPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXZlcnRpY2FsLWFsaWduLWhlbHBlciI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNpZGViYXItY29udGVudCIgPicrCgogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1zaWRlYmFyLWNvbnRyb2xlciBwdi1nYWxsZXJ5LXNpZGViYXItY29udHJvbGVyLXByZSI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNpZGViYXItY29udHJvbGVyIHB2LWdhbGxlcnktc2lkZWJhci1jb250cm9sZXItbmV4dCI+PC9zcGFuPicrCgogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyIj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNjcm9sbGJhci1oIHB2LWdhbGxlcnktdGh1bWItc2Nyb2xsYmFyLWgiPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNjcm9sbGJhci1oLXRyYWNrIHB2LWdhbGxlcnktdGh1bWItc2Nyb2xsYmFyLWgtdHJhY2siPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNjcm9sbGJhci1oLWhhbmRsZSBwdi1nYWxsZXJ5LXRodW1iLXNjcm9sbGJhci1oLWhhbmRsZSI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktc2Nyb2xsYmFyLXYgcHYtZ2FsbGVyeS10aHVtYi1zY3JvbGxiYXItdiI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktc2Nyb2xsYmFyLXYtdHJhY2sgcHYtZ2FsbGVyeS10aHVtYi1zY3JvbGxiYXItdi10cmFjayI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktc2Nyb2xsYmFyLXYtaGFuZGxlIHB2LWdhbGxlcnktdGh1bWItc2Nyb2xsYmFyLXYtaGFuZGxlIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwoKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1tYXhpbWl6ZS1zY3JvbGwiPjxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LW1heGltaXplLWNvbnRhaW5lciI+PC9zcGFuPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS10aXBzV29yZHMiPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS11cmxzLXRleHRhcmVhIj48dGV4dGFyZWE+PC90ZXh0YXJlYT48c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS11cmxzLXRleHRhcmVhLWNsb3NlIj48L3NwYW4+PHNwYW4gY2xhc3M9InB2LWdhbGxlcnktdXJscy10ZXh0YXJlYS1kb3dubG9hZCI+JytwcmVmcy5pY29ucy5kb3dubG9hZFN2Z0J0bisnPC9zcGFuPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+Jyk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTsKCiAgICAgICAgICAgICAgICBsZXQgYnJpY2tzSW5zdGFuY2UgPSBCcmlja3MoewogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogIi5wdi1nYWxsZXJ5LW1heGltaXplLWNvbnRhaW5lciIsCiAgICAgICAgICAgICAgICAgICAgcGFja2VkOiAiZGF0YS1wYWNrZWQiLAogICAgICAgICAgICAgICAgICAgIHNpemVzOiBbewogICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiAyLAogICAgICAgICAgICAgICAgICAgICAgICBndXR0ZXI6IDEwCiAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICBtcTogIjYwMHB4IiwKICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uczogMywKICAgICAgICAgICAgICAgICAgICAgICAgZ3V0dGVyOiAxMAogICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgbXE6ICI4MDBweCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnM6IDQsCiAgICAgICAgICAgICAgICAgICAgICAgIGd1dHRlcjogMTAKICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1xOiAiMTAwMHB4IiwKICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uczogNSwKICAgICAgICAgICAgICAgICAgICAgICAgZ3V0dGVyOiAxMAogICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgbXE6ICIxMTMwcHgiLAogICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiA2LAogICAgICAgICAgICAgICAgICAgICAgICBndXR0ZXI6IDEyCiAgICAgICAgICAgICAgICAgICAgfV0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5icmlja3NJbnN0YW5jZSA9IGJyaWNrc0luc3RhbmNlOwogICAgICAgICAgICAgICAgdW5zYWZlV2luZG93LmJyaWNrc0luc3RhbmNlID0gdGhpcy5icmlja3NJbnN0YW5jZTsKCiAgICAgICAgICAgICAgICB0aGlzLmhpZGVTY3JvbGxTdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7CiAgICAgICAgICAgICAgICB0aGlzLmhpZGVTY3JvbGxTdHlsZS50ZXh0Q29udGVudCA9ICJodG1sIHstbXMtb3ZlcmZsb3ctc3R5bGU6IG5vbmU7IHNjcm9sbGJhci13aWR0aDogbm9uZTt9aHRtbDo6LXdlYmtpdC1zY3JvbGxiYXIgeyB3aWR0aDogMCAhaW1wb3J0YW50OyBoZWlnaHQ6IDAgIWltcG9ydGFudDsgfSI7CiAgICAgICAgICAgICAgICB0aGlzLmhpZGVTY3JvbGxTdHlsZS50eXBlID0gJ3RleHQvY3NzJzsKCiAgICAgICAgICAgICAgICB2YXIgc2VsZj10aGlzOwoKICAgICAgICAgICAgICAgIHZhciBoaWRlQm9keVN0eWxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgICAgICAgICAgICB0aGlzLmhpZGVCb2R5U3R5bGU9aGlkZUJvZHlTdHlsZTsKICAgICAgICAgICAgICAgIGhpZGVCb2R5U3R5bGUudGV4dENvbnRlbnQ9YGJvZHk+Kjpub3QoW2NsYXNzXj0icHYtIl0pIGltZyxib2R5PmltZ3tkaXNwbGF5Om5vbmV9YDsKCiAgICAgICAgICAgICAgICB2YXIgc2l6ZUlucHV0SCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCIjbWluc2l6ZUgiKTsKICAgICAgICAgICAgICAgIHZhciBzaXplSW5wdXRXID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoIiNtaW5zaXplVyIpOwogICAgICAgICAgICAgICAgdGhpcy5zaXplSW5wdXRIID0gc2l6ZUlucHV0SDsKICAgICAgICAgICAgICAgIHRoaXMuc2l6ZUlucHV0VyA9IHNpemVJbnB1dFc7CiAgICAgICAgICAgICAgICBzaXplSW5wdXRXLm9uaW5wdXQgPSBmdW5jdGlvbigpe3NlbGYuY2hhbmdlTWluVmlldygpO307CiAgICAgICAgICAgICAgICBzaXplSW5wdXRILm9uaW5wdXQgPSBmdW5jdGlvbigpe3NlbGYuY2hhbmdlTWluVmlldygpO307CiAgICAgICAgICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvcigiI21pbnNpemVXU3BhbiIpLm9uY2xpY2sgPSBmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIHZhciBtaW5zaXplVyA9IHdpbmRvdy5wcm9tcHQoIldpZHRoOiIsc2l6ZUlucHV0Vy52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFtaW5zaXplVykgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIHNpemVJbnB1dFcudmFsdWUgPSBtaW5zaXplVzsKICAgICAgICAgICAgICAgICAgICBzZWxmLmNoYW5nZU1pblZpZXcoKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvcigiI21pbnNpemVIU3BhbiIpLm9uY2xpY2sgPSBmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIHZhciBtaW5zaXplSCA9IHdpbmRvdy5wcm9tcHQoIkhlaWdodDoiLHNpemVJbnB1dEgudmFsdWUpOwogICAgICAgICAgICAgICAgICAgIGlmICghbWluc2l6ZUgpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBzaXplSW5wdXRILnZhbHVlID0gbWluc2l6ZUg7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5jaGFuZ2VNaW5WaWV3KCk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIHBpblNpemUgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcigiI3BpblNpemUiKTsKICAgICAgICAgICAgICAgIHBpblNpemUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIGxldCBhcnIgPSBlLnRhcmdldC52YWx1ZS5zcGxpdCgieCIpOwogICAgICAgICAgICAgICAgICAgIGlmIChhcnIubGVuZ3RoICE9PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9ja01heFNpemUgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBzaXplSW5wdXRILnZhbHVlID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZUlucHV0Vy52YWx1ZSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2hhbmdlTWluVmlldygpOwogICAgICAgICAgICAgICAgICAgICAgICBoZWFkTWF4TG9jay5zdHlsZS5maWx0ZXIgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZE1heExvY2sudGl0bGUgPSBpMThuKCJsb2NrU2l6ZVRpcCIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGxldCB3QXJyID0gYXJyWzBdLnNwbGl0KCItIik7CiAgICAgICAgICAgICAgICAgICAgbGV0IGhBcnIgPSBhcnJbMV0uc3BsaXQoIi0iKTsKICAgICAgICAgICAgICAgICAgICBsZXQgbWluVyA9IHBhcnNlSW50KHdBcnJbMF0pOwogICAgICAgICAgICAgICAgICAgIGxldCBtYXhXID0gcGFyc2VJbnQod0FyclsxXSB8fCAwKTsKICAgICAgICAgICAgICAgICAgICBsZXQgbWluSCA9IHBhcnNlSW50KGhBcnJbMF0pOwogICAgICAgICAgICAgICAgICAgIGxldCBtYXhIID0gcGFyc2VJbnQoaEFyclsxXSB8fCAwKTsKICAgICAgICAgICAgICAgICAgICBzaXplSW5wdXRILnZhbHVlID0gbWluSDsKICAgICAgICAgICAgICAgICAgICBzaXplSW5wdXRXLnZhbHVlID0gbWluVzsKICAgICAgICAgICAgICAgICAgICBpZiAobWF4VyAmJiBtYXhIKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9ja01heFNpemUgPSB7dzogbWF4VywgaDogbWF4SH07CiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRNYXhMb2NrLnN0eWxlLmZpbHRlciA9ICJicmlnaHRuZXNzKDUpIjsKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZE1heExvY2sudGl0bGUgPSBtYXhXICsgIiB4ICIgKyBtYXhIOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9ja01heFNpemUgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBoZWFkTWF4TG9jay5zdHlsZS5maWx0ZXIgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZE1heExvY2sudGl0bGUgPSBpMThuKCJsb2NrU2l6ZVRpcCIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBzZWxmLmNoYW5nZU1pblZpZXcoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5waW5TaXplID0gcGluU2l6ZTsKICAgICAgICAgICAgICAgIHRoaXMuc2l6ZU1hcCA9IHt9OwogICAgICAgICAgICAgICAgdmFyIGhlYWRNYXhMb2NrID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoIi5wdi1nYWxsZXJ5LWhlYWQtbGVmdC1sb2NrLWljb24iKTsKICAgICAgICAgICAgICAgIGhlYWRNYXhMb2NrLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5sb2NrTWF4U2l6ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvY2tNYXhTaXplID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jaGFuZ2VNaW5WaWV3KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRNYXhMb2NrLnN0eWxlLmZpbHRlciA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICBoZWFkTWF4TG9jay50aXRsZSA9IGkxOG4oImxvY2tTaXplVGlwIik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1heHNpemVXLCBtYXhzaXplSDsKICAgICAgICAgICAgICAgICAgICAgICAgbWF4c2l6ZVcgPSB3aW5kb3cucHJvbXB0KCJNYXggV2lkdGg6Iiwgc2l6ZUlucHV0Vy5tYXgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihtYXhzaXplVykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4c2l6ZUggPSB3aW5kb3cucHJvbXB0KCJNYXggSGVpZ2h0OiIsIHNpemVJbnB1dEgubWF4KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF4c2l6ZUgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9ja01heFNpemU9e3c6bWF4c2l6ZVcsaDptYXhzaXplSH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNoYW5nZU1pblZpZXcoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRNYXhMb2NrLnN0eWxlLmZpbHRlcj0iYnJpZ2h0bmVzcyg1KSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkTWF4TG9jay50aXRsZT1tYXhzaXplVysiIHggIittYXhzaXplSDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5sb2NrTWF4U2l6ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnNldExpc3RJdGVtKCJtYXhTaXplIiwgbG9jYXRpb24uaG9zdG5hbWUsIHNlbGYubG9ja01heFNpemUpOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmN1ckRlZmF1bHRTaXplID0ge2g6IHNpemVJbnB1dEgudmFsdWUsIHc6IHNpemVJbnB1dFcudmFsdWV9OwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2Uuc2V0TGlzdEl0ZW0oIm1heFNpemUiLCBsb2NhdGlvbi5ob3N0bmFtZSwgIiIpOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmN1ckRlZmF1bHRTaXplID0gIiI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHN0b3JhZ2Uuc2V0TGlzdEl0ZW0oIm1pblNpemUiLCBsb2NhdGlvbi5ob3N0bmFtZSwgc2VsZi5jdXJEZWZhdWx0U2l6ZSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBtYXhpbWl6ZVRyaWdnZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgICAgICAgdGhpcy5tYXhpbWl6ZVRyaWdnZXI9bWF4aW1pemVUcmlnZ2VyOwogICAgICAgICAgICAgICAgbWF4aW1pemVUcmlnZ2VyLmlubmVySFRNTD1jcmVhdGVIVE1MKCctJytpMThuKCJyZXR1cm5Ub0dhbGxlcnkiKSsnLTxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LW1heGltaXplLXRyaWdnZXItY2xvc2UiIHRpdGxlPSInK2kxOG4oImNsb3NlR2FsbGVyeSIpKyciPjwvc3Bhbj4nKTsKICAgICAgICAgICAgICAgIG1heGltaXplVHJpZ2dlci5jbGFzc05hbWU9J3B2LWdhbGxlcnktbWF4aW1pemUtdHJpZ2dlcic7CgogICAgICAgICAgICAgICAgZ2V0Qm9keShkb2N1bWVudCkuYXBwZW5kQ2hpbGQobWF4aW1pemVUcmlnZ2VyKTsKCiAgICAgICAgICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvcigiI2dhbGxlcnlSb3RhdGUiKS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIGVsZU1hcHNbJ2hlYWQtY29tbWFuZC1kcm9wLWxpc3Qtb3RoZXJzJ10uY2xhc3NMaXN0LmFkZCgiZm9jdXMiKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoIiNnYWxsZXJ5Um90YXRlIikuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgZWxlTWFwc1snaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1vdGhlcnMnXS5jbGFzc0xpc3QucmVtb3ZlKCJmb2N1cyIpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvcigiI2dhbGxlcnlSb3RhdGUiKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLmdhbGxlcnlSb3RhdGUgPSBlLnRhcmdldC52YWx1ZTsKICAgICAgICAgICAgICAgICAgICBzZWxmLmZpdFRvU2NyZWVuKCk7CiAgICAgICAgICAgICAgICB9KTsKCgogICAgICAgICAgICAgICAgdmFyIHZhbGlkUG9zPVsndG9wJywncmlnaHQnLCdib3R0b20nLCdsZWZ0J107CiAgICAgICAgICAgICAgICB2YXIgc0JhclBvc2l0aW9uPXByZWZzLmdhbGxlcnkuc2lkZWJhclBvc2l0aW9uOwogICAgICAgICAgICAgICAgaWYodmFsaWRQb3MuaW5kZXhPZihzQmFyUG9zaXRpb24pPT0tMSl7CiAgICAgICAgICAgICAgICAgICAgc0JhclBvc2l0aW9uPSdib3R0b20nOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB0aGlzLnNCYXJQb3NpdGlvbj1zQmFyUG9zaXRpb247CiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2xhc3NOYW1lPSdwdi1nYWxsZXJ5LXNpZGViYXItdGh1bWJfc2VsZWN0ZWQtJyArIHNCYXJQb3NpdGlvbjsKCgogICAgICAgICAgICAgICAgdmFyIHNCYXJEaXJlY3Rpb249J3YnOy8v5Z6C55u05pS+572uCiAgICAgICAgICAgICAgICB2YXIgaXNIb3Jpem9udGFsPWZhbHNlOwogICAgICAgICAgICAgICAgaWYoc0JhclBvc2l0aW9uPT0ndG9wJyB8fCBzQmFyUG9zaXRpb249PSdib3R0b20nKXsKICAgICAgICAgICAgICAgICAgICBzQmFyRGlyZWN0aW9uPSdoJzsvL+awtOW5s+aUvue9rgogICAgICAgICAgICAgICAgICAgIGlzSG9yaXpvbnRhbD10cnVlOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMuc0JhckRpcmVjdGlvbj1zQmFyRGlyZWN0aW9uOwogICAgICAgICAgICAgICAgdGhpcy5pc0hvcml6b250YWw9aXNIb3Jpem9udGFsOwoKICAgICAgICAgICAgICAgIHZhciBjbGFzc1ByZWZpeD0ncHYtZ2FsbGVyeS0nOwogICAgICAgICAgICAgICAgdmFyIHZhbGlkQ2xhc3M9WwogICAgICAgICAgICAgICAgICAgICdoZWFkJywKCiAgICAgICAgICAgICAgICAgICAgJ2hlYWQtbGVmdC1pbWctaW5mbycsCiAgICAgICAgICAgICAgICAgICAgJ2hlYWQtbGVmdC1pbWctaW5mby1kZXNjcmlwdGlvbicsCiAgICAgICAgICAgICAgICAgICAgJ2hlYWQtbGVmdC1pbWctaW5mby1yZXNvbHV0aW9uJywKICAgICAgICAgICAgICAgICAgICAnaGVhZC1sZWZ0LWltZy1pbmZvLWNvdW50JywKICAgICAgICAgICAgICAgICAgICAnaGVhZC1sZWZ0LWltZy1pbmZvLXNjYWxpbmcnLAoKICAgICAgICAgICAgICAgICAgICAnaGVhZC1jb21tYW5kLWNsb3NlJywKICAgICAgICAgICAgICAgICAgICAnaGVhZC1jb21tYW5kLW5leHRQYWdlJywKICAgICAgICAgICAgICAgICAgICAnaGVhZC1jb21tYW5kLXNsaWRlLXNob3cnLAogICAgICAgICAgICAgICAgICAgICdoZWFkLWNvbW1hbmQtc2xpZGUtc2hvdy1idXR0b24taW5uZXInLAogICAgICAgICAgICAgICAgICAgICdoZWFkLWNvbW1hbmQtc2xpZGUtc2hvdy1jb3VudGRvd24nLAogICAgICAgICAgICAgICAgICAgICdoZWFkLWNvbW1hbmQtY29sbGVjdCcsCiAgICAgICAgICAgICAgICAgICAgJ2hlYWQtY29tbWFuZC1leGl0LWNvbGxlY3Rpb24nLAogICAgICAgICAgICAgICAgICAgICdoZWFkLWNvbW1hbmQtdXJsRmlsdGVyJywKCiAgICAgICAgICAgICAgICAgICAgJ2hlYWQtY29tbWFuZC1kcm9wLWxpc3QtY2F0ZWdvcnknLAogICAgICAgICAgICAgICAgICAgICdoZWFkLWNvbW1hbmQtZHJvcC1saXN0LW90aGVycycsCiAgICAgICAgICAgICAgICAgICAgJ2hlYWQtY29tbWFuZC1kcm9wLWxpc3Qtc2hhcmUnLAogICAgICAgICAgICAgICAgICAgICdoZWFkLWNvbW1hbmQtZHJvcC1saXN0LXNsaWRlLXNob3cnLAogICAgICAgICAgICAgICAgICAgICdoZWFkLWNvbW1hbmQtZHJvcC1saXN0LXNsaWRlLXNob3ctaW50ZXJ2YWwnLAogICAgICAgICAgICAgICAgICAgICdoZWFkLWNvbW1hbmQtZHJvcC1saXN0LWNvbGxlY3QnLAogICAgICAgICAgICAgICAgICAgICdoZWFkLWNvbW1hbmQtZHJvcC1saXN0LXNlYXJjaCcsCgogICAgICAgICAgICAgICAgICAgICdib2R5JywKCiAgICAgICAgICAgICAgICAgICAgJ2ltZy1jb250YWluZXInLAoKICAgICAgICAgICAgICAgICAgICAnaW1nLXNjcm9sbGJhci1oJywKICAgICAgICAgICAgICAgICAgICAnaW1nLXNjcm9sbGJhci1oLWhhbmRsZScsCiAgICAgICAgICAgICAgICAgICAgJ2ltZy1zY3JvbGxiYXItaC10cmFjaycsCgogICAgICAgICAgICAgICAgICAgICdpbWctc2Nyb2xsYmFyLXYnLAogICAgICAgICAgICAgICAgICAgICdpbWctc2Nyb2xsYmFyLXYtaGFuZGxlJywKICAgICAgICAgICAgICAgICAgICAnaW1nLXNjcm9sbGJhci12LXRyYWNrJywKCiAgICAgICAgICAgICAgICAgICAgJ3RodW1iLXNjcm9sbGJhci1oJywKICAgICAgICAgICAgICAgICAgICAndGh1bWItc2Nyb2xsYmFyLWgtaGFuZGxlJywKICAgICAgICAgICAgICAgICAgICAndGh1bWItc2Nyb2xsYmFyLWgtdHJhY2snLAoKICAgICAgICAgICAgICAgICAgICAndGh1bWItc2Nyb2xsYmFyLXYnLAogICAgICAgICAgICAgICAgICAgICd0aHVtYi1zY3JvbGxiYXItdi1oYW5kbGUnLAogICAgICAgICAgICAgICAgICAgICd0aHVtYi1zY3JvbGxiYXItdi10cmFjaycsCgogICAgICAgICAgICAgICAgICAgICdpbWctY29udGVudCcsCiAgICAgICAgICAgICAgICAgICAgJ2ltZy1wYXJlbnQnLAogICAgICAgICAgICAgICAgICAgICdpbWdfYnJva2VuJywKCiAgICAgICAgICAgICAgICAgICAgJ2ltZy1jb250cm9sZXItcHJlJywKICAgICAgICAgICAgICAgICAgICAnaW1nLWNvbnRyb2xlci1uZXh0JywKCiAgICAgICAgICAgICAgICAgICAgJ3NpZGViYXItdG9nZ2xlJywKICAgICAgICAgICAgICAgICAgICAnc2lkZWJhci10b2dnbGUtY29udGVudCcsCiAgICAgICAgICAgICAgICAgICAgJ3NpZGViYXItdmlld21vcmUnLAogICAgICAgICAgICAgICAgICAgICdzaWRlYmFyLXZpZXdtb3JlLWNvbnRlbnQnLAogICAgICAgICAgICAgICAgICAgICdtYXhpbWl6ZS1jb250YWluZXInLAogICAgICAgICAgICAgICAgICAgICd0aXBzV29yZHMnLAoKICAgICAgICAgICAgICAgICAgICAnc2lkZWJhci1jb250YWluZXInLAogICAgICAgICAgICAgICAgICAgICdzaWRlYmFyLWNvbnRlbnQnLAoKICAgICAgICAgICAgICAgICAgICAnc2lkZWJhci1jb250cm9sZXItcHJlJywKICAgICAgICAgICAgICAgICAgICAnc2lkZWJhci1jb250cm9sZXItbmV4dCcsCgogICAgICAgICAgICAgICAgICAgICdzaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyJywKICAgICAgICAgICAgICAgIF07CgogICAgICAgICAgICAgICAgdmFyIGVsZU1hcHM9e307CiAgICAgICAgICAgICAgICB0aGlzLmVsZU1hcHM9ZWxlTWFwczsKCiAgICAgICAgICAgICAgICB2YWxpZENsYXNzLmZvckVhY2goZnVuY3Rpb24oYyl7CiAgICAgICAgICAgICAgICAgICAgZWxlTWFwc1tjXT1jb250YWluZXIucXVlcnlTZWxlY3RvcignLicrIGNsYXNzUHJlZml4ICsgYyk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB2YXIgcG9zQ2xhc3M9Wy8v6ZyA6KaB5re75YqgJ3RvcCBib3R0b20gbGVmdCByaWdodCdjbGFzc+eahOWFg+e0oAogICAgICAgICAgICAgICAgICAgICdpbWctY29udGFpbmVyJywKICAgICAgICAgICAgICAgICAgICAnc2lkZWJhci10b2dnbGUnLAogICAgICAgICAgICAgICAgICAgICdzaWRlYmFyLXZpZXdtb3JlJywKICAgICAgICAgICAgICAgICAgICAnc2lkZWJhci1jb250YWluZXInLAogICAgICAgICAgICAgICAgICAgICdzaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyJywKICAgICAgICAgICAgICAgIF07CiAgICAgICAgICAgICAgICBwb3NDbGFzcy5mb3JFYWNoKGZ1bmN0aW9uKGMpewogICAgICAgICAgICAgICAgICAgIGVsZU1hcHNbY10uY2xhc3NMaXN0LmFkZChjbGFzc1ByZWZpeCArIGMgKyAnLScgK3NCYXJQb3NpdGlvbik7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB2YXIgaHZDbGFzcz1bLy/pnIDopoHmt7vliqAndiBoJ2NsYXNz55qE5YWD57SgCiAgICAgICAgICAgICAgICAgICAgJ3NpZGViYXItdG9nZ2xlJywKICAgICAgICAgICAgICAgICAgICAnc2lkZWJhci10b2dnbGUtY29udGVudCcsCiAgICAgICAgICAgICAgICAgICAgJ3NpZGViYXItdmlld21vcmUnLAogICAgICAgICAgICAgICAgICAgICdzaWRlYmFyLXZpZXdtb3JlLWNvbnRlbnQnLAogICAgICAgICAgICAgICAgICAgICdzaWRlYmFyLWNvbnRhaW5lcicsCiAgICAgICAgICAgICAgICAgICAgJ3NpZGViYXItY29udGVudCcsCiAgICAgICAgICAgICAgICAgICAgJ3NpZGViYXItY29udHJvbGVyLXByZScsCiAgICAgICAgICAgICAgICAgICAgJ3NpZGViYXItY29udHJvbGVyLW5leHQnLAogICAgICAgICAgICAgICAgICAgICdzaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyJywKICAgICAgICAgICAgICAgIF07CiAgICAgICAgICAgICAgICBodkNsYXNzLmZvckVhY2goZnVuY3Rpb24oYyl7CiAgICAgICAgICAgICAgICAgICAgZWxlTWFwc1tjXS5jbGFzc0xpc3QuYWRkKGNsYXNzUHJlZml4ICsgYyArICctJyArIHNCYXJEaXJlY3Rpb24pOwogICAgICAgICAgICAgICAgfSk7CgoKCiAgICAgICAgICAgICAgICAvL+WbvueJh+WMuuWfn+awtOW5s+aWueWQkeeahOa7muWKqOadoQogICAgICAgICAgICAgICAgdmFyIGltZ1Njcm9sbGJhckg9bmV3IHRoaXMuU2Nyb2xsYmFyKHsKICAgICAgICAgICAgICAgICAgICBiYXI6ZWxlTWFwc1snaW1nLXNjcm9sbGJhci1oJ10sCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlOmVsZU1hcHNbJ2ltZy1zY3JvbGxiYXItaC1oYW5kbGUnXSwKICAgICAgICAgICAgICAgICAgICB0cmFjazplbGVNYXBzWydpbWctc2Nyb2xsYmFyLWgtdHJhY2snXSwKICAgICAgICAgICAgICAgIH0sZWxlTWFwc1snaW1nLWNvbnRlbnQnXSx0cnVlKTsKICAgICAgICAgICAgICAgIHRoaXMuaW1nU2Nyb2xsYmFySD1pbWdTY3JvbGxiYXJIOwoKICAgICAgICAgICAgICAgIC8v5Zu+54mH5Yy65Z+f5Z6C55u05pa55ZCR55qE5rua5Yqo5p2hCiAgICAgICAgICAgICAgICB2YXIgaW1nU2Nyb2xsYmFyVj1uZXcgdGhpcy5TY3JvbGxiYXIoewogICAgICAgICAgICAgICAgICAgIGJhcjplbGVNYXBzWydpbWctc2Nyb2xsYmFyLXYnXSwKICAgICAgICAgICAgICAgICAgICBoYW5kbGU6ZWxlTWFwc1snaW1nLXNjcm9sbGJhci12LWhhbmRsZSddLAogICAgICAgICAgICAgICAgICAgIHRyYWNrOmVsZU1hcHNbJ2ltZy1zY3JvbGxiYXItdi10cmFjayddLAogICAgICAgICAgICAgICAgfSxlbGVNYXBzWydpbWctY29udGVudCddLGZhbHNlKTsKICAgICAgICAgICAgICAgIHRoaXMuaW1nU2Nyb2xsYmFyVj1pbWdTY3JvbGxiYXJWOwoKICAgICAgICAgICAgICAgIC8v57yp55Wl5Zu+5Yy65Z+f55qE5rua5Yqo5p2hCiAgICAgICAgICAgICAgICB2YXIgdGh1bWJTY3JvbGxiYXI7CiAgICAgICAgICAgICAgICBpZihpc0hvcml6b250YWwpewogICAgICAgICAgICAgICAgICAgIHRodW1iU2Nyb2xsYmFyPW5ldyB0aGlzLlNjcm9sbGJhcih7CiAgICAgICAgICAgICAgICAgICAgICAgIGJhcjplbGVNYXBzWyd0aHVtYi1zY3JvbGxiYXItaCddLAogICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGU6ZWxlTWFwc1sndGh1bWItc2Nyb2xsYmFyLWgtaGFuZGxlJ10sCiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrOmVsZU1hcHNbJ3RodW1iLXNjcm9sbGJhci1oLXRyYWNrJ10sCiAgICAgICAgICAgICAgICAgICAgfSxlbGVNYXBzWydzaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyJ10sdHJ1ZSk7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICB0aHVtYlNjcm9sbGJhcj1uZXcgdGhpcy5TY3JvbGxiYXIoewogICAgICAgICAgICAgICAgICAgICAgICBiYXI6ZWxlTWFwc1sndGh1bWItc2Nyb2xsYmFyLXYnXSwKICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlOmVsZU1hcHNbJ3RodW1iLXNjcm9sbGJhci12LWhhbmRsZSddLAogICAgICAgICAgICAgICAgICAgICAgICB0cmFjazplbGVNYXBzWyd0aHVtYi1zY3JvbGxiYXItdi10cmFjayddLAogICAgICAgICAgICAgICAgICAgIH0sZWxlTWFwc1snc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lciddLGZhbHNlKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLnRodW1iU2Nyb2xsYmFyPXRodW1iU2Nyb2xsYmFyOwoKICAgICAgICAgICAgICAgIHNlbGY9dGhpczsKCiAgICAgICAgICAgICAgICB2YXIgaW1nU3RhdGlzdGljcz17Ly/lm77niYfnmoTmgLvnsbvvvIznu5/orqEs5Yid5aeL5YyW5YC8CiAgICAgICAgICAgICAgICAgICAgcnVsZTp7CiAgICAgICAgICAgICAgICAgICAgICAgIHNob3duOnRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OjAsCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOmkxOG4oImFkdmFuY2VkUnVsZXNUaXAiKSwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTppMThuKCJhZHZhbmNlZFJ1bGVzIiksCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB0cFJ1bGU6ewogICAgICAgICAgICAgICAgICAgICAgICBzaG93bjp0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICBjb3VudDowLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjppMThuKCJ0cFJ1bGVzVGlwIiksCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6aTE4bigidHBSdWxlcyIpLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2NhbGU6ewogICAgICAgICAgICAgICAgICAgICAgICBzaG93bjp0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICBjb3VudDowLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjppMThuKCJzY2FsZVJ1bGVzVGlwIiksCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6aTE4bigic2NhbGVSdWxlcyIpLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZm9yY2U6ewogICAgICAgICAgICAgICAgICAgICAgICBzaG93bjp0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICBjb3VudDowLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjppMThuKCJub1NjYWxlUnVsZXNUaXAiKSwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTppMThuKCJub1NjYWxlUnVsZXMiKSwKICAgICAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgICAgICAvLyBuZXcKICAgICAgICAgICAgICAgICAgICAvLyBzY2FsZVpvb21SZXNpemVkOiB7CiAgICAgICAgICAgICAgICAgICAgLy8gIHNob3duOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAvLyAgY291bnQ6IDAsCiAgICAgICAgICAgICAgICAgICAgLy8gIGRlc2NyaXB0aW9uOiAn57yp5pS+55qE5Zu+54mH77yM5Zu+54mH5bC65a+45pyA5bCR55u45beu5q+U5L6LICcgKyBwcmVmcy5nYWxsZXJ5Lnpvb21yZXNpemVkICsgJyUnLAogICAgICAgICAgICAgICAgICAgIC8vICBuYW1lOiAn5bCP57yp5pS+JwogICAgICAgICAgICAgICAgICAgIC8vIH0sCiAgICAgICAgICAgICAgICAgICAgc2NhbGVTbWFsbDogewogICAgICAgICAgICAgICAgICAgICAgICBzaG93bjogcHJlZnMuZ2FsbGVyeS5zaG93U21hbGxTaXplLAogICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGkxOG4oInNtYWxsUnVsZXNUaXAiLHByZWZzLmdhbGxlcnkuc2NhbGVTbWFsbFNpemUpLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBpMThuKCJzbWFsbFJ1bGVzIikKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMuaW1nU3RhdGlzdGljcz1pbWdTdGF0aXN0aWNzOwoKICAgICAgICAgICAgICAgIC8v55Sf5oiQ5YiG57G75LiL5ouJ5YiX6KGoCiAgICAgICAgICAgICAgICB2YXIgdHlwZU1hcms9Jyc7CiAgICAgICAgICAgICAgICB2YXIgaW1nU3RhdGlzdGljc19pOwogICAgICAgICAgICAgICAgZm9yKHZhciBpIGluIGltZ1N0YXRpc3RpY3MpewogICAgICAgICAgICAgICAgICAgIGlmKCFpbWdTdGF0aXN0aWNzLmhhc093blByb3BlcnR5KGkpKWNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIGltZ1N0YXRpc3RpY3NfaT1pbWdTdGF0aXN0aWNzW2ldOwogICAgICAgICAgICAgICAgICAgIHR5cGVNYXJrKz0KICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbSIgdGl0bGU9IicraW1nU3RhdGlzdGljc19pLmRlc2NyaXB0aW9uKyciPicrCiAgICAgICAgICAgICAgICAgICAgICAgICc8aW5wdXQgdHlwZT0iY2hlY2tib3giIGRhdGEtdHlwZT0iJytpKyciIGlkPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbS1jYXRlZ29yeS0nK2krJyIgLz4nKwogICAgICAgICAgICAgICAgICAgICAgICAnPGxhYmVsIGZvcj0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0tY2F0ZWdvcnktJytpKyciPicraW1nU3RhdGlzdGljc19pLm5hbWUrJzwvbGFiZWw+JysKICAgICAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGVsZU1hcHNbJ2hlYWQtY29tbWFuZC1kcm9wLWxpc3QtY2F0ZWdvcnknXS5pbm5lckhUTUw9Y3JlYXRlSFRNTCh0eXBlTWFyayk7CgoKICAgICAgICAgICAgICAgIC8v5pS26JeP55u45YWzCiAgICAgICAgICAgICAgICB2YXIgY29sbGVjdGlvbj17CiAgICAgICAgICAgICAgICAgICAgZ2V0TWF0Y2hlZDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYWxsPXRoaXMuYWxsIHx8IHRoaXMuZ2V0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wO2k8YWxsLmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHY9YWxsW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodi5zcmM9PXNlbGYuc3JjKSByZXR1cm4gW3YsIGldOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgY2hlY2s6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgLy/ku47nvJPlrZjmlbDmja7kuK3mo4Dmn6XjgIIKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoZWQ9dGhpcy5nZXRNYXRjaGVkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmF2b3JpdGU9bWF0Y2hlZD8gbWF0Y2hlZFswXSA6IG51bGw7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRBcmVhVmFsdWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWdoTGlnaHQoKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHRBcmVhVmFsdWU6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0QXJlYS52YWx1ZT10aGlzLmZhdm9yaXRlPyB0aGlzLmZhdm9yaXRlLmRlc2NyaXB0aW9uIDogc2VsZi5lbGVNYXBzWydoZWFkLWxlZnQtaW1nLWluZm8tZGVzY3JpcHRpb24nXS50ZXh0Q29udGVudDsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGhpZ2hMaWdodDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICBlbGVNYXBzWydoZWFkLWNvbW1hbmQtY29sbGVjdCddLmNsYXNzTGlzdFt0aGlzLmZhdm9yaXRlPyAnYWRkJyA6ICdyZW1vdmUnXSgncHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29sbGVjdC1mYXZvcml0ZScpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYWRkOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmF2b3JpdGU9ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjOnNlbGYuc3JjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGh1bWJTcmM6ZGF0YXNldChzZWxmLnJlbGF0ZWRUaHVtYiwndGh1bWJTcmMnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdHVyYWxTaXplOnNlbGYuaW1nTmF0dXJhbFNpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjp0aGlzLnRleHRBcmVhLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgLy/kuLrkuobpmLLmraLlpJrkuKrpobXpnaLlkIzml7bnmoTlgqjlrZjvvIzmt7vliqDliY3vvIzlhYjovb3lhaXmnIDmlrDnmoTmlbDmja7jgIIKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy/mo4Dmn6XmmK/lkKblt7Lnu4/lnKjph4zpnaLkuoYKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoZWQ9dGhpcy5nZXRNYXRjaGVkKCk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZihtYXRjaGVkKXsvL+WmguaenOW3sue7j+WtmOWcqO+8jOWIoOmZpOaXp+eahOOAggogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGwuc3BsaWNlKG1hdGNoZWRbMV0sMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsLnVuc2hpZnQodGhpcy5mYXZvcml0ZSk7Ly/mt7vliqDliLDmnIDliY3pnaLjgIIKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWdoTGlnaHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByZW1vdmU6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgLy/ojrflvpfmnIDmlrDmlbDmja4KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy/mo4Dmn6XmmK/lkKblt7Lnu4/lnKjph4zpnaLkuoYKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoZWQ9dGhpcy5nZXRNYXRjaGVkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hdGNoZWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGwuc3BsaWNlKG1hdGNoZWRbMV0sMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mYXZvcml0ZT1udWxsOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZ2hMaWdodCgpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2F2ZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnNldEl0ZW0oJ3B2X2NvbGxlY3Rpb24nLGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeSh0aGlzLmFsbCkpKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGdldDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmV0PXN0b3JhZ2UuZ2V0SXRlbSgncHZfY29sbGVjdGlvbicpIHx8ICdbXSc7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldD1KU09OLnBhcnNlKGRlY29kZVVSSUNvbXBvbmVudChyZXQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWNhdGNoKGUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0PVtdOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbD1yZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBlbnRlcjpmdW5jdGlvbigpewoKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5hbGwubGVuZ3RoPT0wKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd1RpcHMoaTE4bigibm9Db2xsZWN0aW9uWWV0IikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tTW9kZT10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnV0dG9uPXRoaXMuZHJvcExpc3RCdXR0b247CiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudD1pMThuKCJleGl0Q29sbGVjdGlvbiIpOwogICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0KGJ1dHRvbiwnY29tbWFuZCcsJ2V4aXRDb2xsZWN0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhZEJ1dHRvbi5zdHlsZS5kaXNwbGF5PSdpbmxpbmUtYmxvY2snOwogICAgICAgICAgICAgICAgICAgICAgICBlbGVNYXBzWydzaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyJ10uY2xhc3NMaXN0LmFkZCgncHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1ibmFpbHNfaGlkZS1zcGFuJyk7CgogICAgICAgICAgICAgICAgICAgICAgICAvL+eUn+aIkGRvbQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyPWNvbnRhaW5lcjsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhX2k7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFuTWFyaz0nJzsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGk9MDsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUoZGF0YV9pPXRoaXMuYWxsW2krK10pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbk1hcmsgKz0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktc2lkZWJhci10aHVtYi1jb250YWluZXIiICcrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEtZGVzY3JpcHRpb249IicgKyBkYXRhX2kuZGVzY3JpcHRpb24gKyAnIicgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgZGF0YS1uYXR1cmFsLXNpemU9IicgKyBKU09OLnN0cmluZ2lmeShkYXRhX2kubmF0dXJhbFNpemUpLnJlcGxhY2UoLyIvZywnJnF1b3Q7JykgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICciIGRhdGEtc3JjPSInICsgZGF0YV9pLnNyYyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyIgZGF0YS10aHVtYi1zcmM9IicgKyBkYXRhX2kudGh1bWJTcmMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICciPicrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXZlcnRpY2FsLWFsaWduLWhlbHBlciI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNpZGViYXItdGh1bWItbG9hZGluZyIgdGl0bGU9IicraTE4bigibG9hZGluZyIpKycuLi4uLi4iPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JzsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTD1jcmVhdGVIVE1MKHNwYW5NYXJrKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlTWFwc1snc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lciddLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7CgoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZD1zZWxmLnNlbGVjdGVkOy8v5aSH5Lu9CgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdChjb250YWluZXIuY2hpbGRyZW5bMF0pOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRodW1iU2Nyb2xsYmFyLnJlc2V0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZFRodW1iKCk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBleGl0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLm1Nb2RlKXJldHVybjsKCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubU1vZGU9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidXR0b249dGhpcy5kcm9wTGlzdEJ1dHRvbjsKICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50PWkxOG4oInZpZXdDb2xsZWN0aW9uIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXQoYnV0dG9uLCdjb21tYW5kJywnZW50ZXJDb2xsZWN0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhZEJ1dHRvbi5zdHlsZS5kaXNwbGF5PSdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlTWFwc1snc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lciddLnJlbW92ZUNoaWxkKHRoaXMuY29udGFpbmVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlTWFwc1snc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lciddLmNsYXNzTGlzdC5yZW1vdmUoJ3B2LWdhbGxlcnktc2lkZWJhci10aHVtYm5haWxzX2hpZGUtc3BhbicpOwoKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3QodGhpcy5zZWxlY3RlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGh1bWJTY3JvbGxiYXIucmVzZXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkVGh1bWIoKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHRleHRBcmVhOmVsZU1hcHNbJ2hlYWQtY29tbWFuZC1kcm9wLWxpc3QtY29sbGVjdCddLnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyksCiAgICAgICAgICAgICAgICAgICAgZHJvcExpc3RCdXR0b246ZWxlTWFwc1snaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1vdGhlcnMnXS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jb21tYW5kJD0iQ29sbGVjdGlvbiJdJyksCiAgICAgICAgICAgICAgICAgICAgaGVhZEJ1dHRvbjplbGVNYXBzWydoZWFkLWNvbW1hbmQtZXhpdC1jb2xsZWN0aW9uJ10sCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbj1jb2xsZWN0aW9uOwogICAgICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9uLnRleHRBcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBlbGVNYXBzWydoZWFkLWNvbW1hbmQtZHJvcC1saXN0LWNvbGxlY3QnXS5jbGFzc0xpc3QuYWRkKCJmb2N1cyIpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLmNvbGxlY3Rpb24udGV4dEFyZWEuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgZWxlTWFwc1snaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1jb2xsZWN0J10uY2xhc3NMaXN0LnJlbW92ZSgiZm9jdXMiKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGVsZU1hcHNbJ2hlYWQtY29tbWFuZC1kcm9wLWxpc3QtY29sbGVjdCddLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0PWUudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIGlmKCFjb2xsZWN0aW9uLmZhdm9yaXRlKXJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLmZhdm9yaXRlW2RhdGFzZXQodGFyZ2V0LCdwcmVmcycpXT10YXJnZXQudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNvbGxlY3Rpb24uc2F2ZVRpbWVyKTsKICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLnNhdmVUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24uc2F2ZSgpOwogICAgICAgICAgICAgICAgICAgIH0sNTAwKTsKICAgICAgICAgICAgICAgIH0sdHJ1ZSk7CiAgICAgICAgICAgICAgICBlbGVNYXBzWydoZWFkLWNvbW1hbmQtZHJvcC1saXN0LWNvbGxlY3QnXS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgfSx0cnVlKTsKICAgICAgICAgICAgICAgIGxldCB1cmxzVGV4dGFyZWFDb24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnB2LWdhbGxlcnktdXJscy10ZXh0YXJlYScpOwogICAgICAgICAgICAgICAgdGhpcy51cmxzVGV4dGFyZWFDb24gPSB1cmxzVGV4dGFyZWFDb247CiAgICAgICAgICAgICAgICB0aGlzLnVybHNUZXh0YXJlYSA9IHVybHNUZXh0YXJlYUNvbi5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpOwogICAgICAgICAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1nYWxsZXJ5LXVybHMtdGV4dGFyZWEtY2xvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIHVybHNUZXh0YXJlYUNvbi5zdHlsZS5kaXNwbGF5ID0gIiI7CiAgICAgICAgICAgICAgICB9LCB0cnVlKTsKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucHYtZ2FsbGVyeS11cmxzLXRleHRhcmVhLWRvd25sb2FkJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGYudXJsc1RleHRhcmVhLnZhbHVlKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgbGV0IGJsb2IgPSBuZXcgQmxvYihbc2VsZi51cmxzVGV4dGFyZWEudmFsdWVdLCB7IHR5cGU6ICJ0ZXh0L3BsYWluIiB9KTsKICAgICAgICAgICAgICAgICAgICBzYXZlQXMoYmxvYiwgKGRvY3VtZW50LnRpdGxlIHx8ICJQaWN2aWV3ZXJDRVBsdXMiKSArICIudHh0Iik7CiAgICAgICAgICAgICAgICB9LCB0cnVlKTsKCgogICAgICAgICAgICAgICAgbGV0IGRlZmF1bHRTbGlkZVNob3dJbnRlcnZhbCA9IHN0b3JhZ2UuZ2V0SXRlbSgnc2xpZGVTaG93SW50ZXJ2YWwnKSB8fCA1MDAwOwogICAgICAgICAgICAgICAgdmFyIHNsaWRlU2hvdz17CiAgICAgICAgICAgICAgICAgICAgb3B0czp7CiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmFsOmRlZmF1bHRTbGlkZVNob3dJbnRlcnZhbCwKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdDp0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICBiYWNrd2FyZDpmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgc2tpcEVycm9ySW1nOnRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bjpmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgcmFuZG9tOmZhbHNlCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAvL3RpbWluZzoKICAgICAgICAgICAgICAgICAgICAvL3NlbGVjdCjpgInkuK3kuIvkuIDkuKrlm77niYflkI7vvIjnvKnnlaXlm77moI/pgInkuK3kuobvvInvvIzov5jmsqHlvIDlp4vor7vlj5blpKflm77vvIjkuIDoiKzpgInkuK3lkI7vvIzlu7bml7YyMDBtc+W8gOWni+ivu+WPluWkp+Wbvu+8iSksCiAgICAgICAgICAgICAgICAgICAgLy9sb2FkRW5kKOW9k+WJjeaYvuekuuWbvueJh+W3sue7j+ivu+WPluWujOaIkOWQjiksCiAgICAgICAgICAgICAgICAgICAgLy9jbGljayjngrnlh7vmjInpkq4pLAogICAgICAgICAgICAgICAgICAgIC8vY2hhbmdlKOaUueWPmOiuvue9rikKICAgICAgICAgICAgICAgICAgICBydW46ZnVuY3Rpb24odGltaW5nKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMub3B0cy5ydW4pcmV0dXJuOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGltaW5nIT0nbG9hZEVuZCcpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICBpZih0aW1pbmc9PSdjbGljaycgfHwgdGltaW5nPT0nc2VsZWN0Jyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighdGhpcy5nZXRFbGUoKSl7Ly/msqHmnInopoHliIfmjaLliLDnmoTlm77niYfkuobvvIzlgZzmraIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4aXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5vcHRzLnNraXBFcnJvckltZyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzZWxmLmltZ0Vycm9yICYmICFzZWxmLmlzTG9hZGluZyl7Ly/noa7kv53mmK/lvZPliY3lm77niYflkozpgInkuK3nvKnnlaXlm77kuIDoh7TnmoTml7blgJkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdCh0aGlzLmdldEVsZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9OwoKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMub3B0cy53YWl0KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRpbWluZyE9J3NlbGVjdCcgJiYgKHRpbWluZz09J2xvYWRFbmQnICB8fCAoIXNlbGYuaXNMb2FkaW5nICYmIChzZWxmLmltZy5jb21wbGV0ZSB8fCBzZWxmLmltZ0Vycm9yKSkpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdvKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRpbWluZyE9J2xvYWRFbmQnKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdvKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGdldEVsZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5nZXRUaHVtU3Bhbih0aGlzLm9wdHMuYmFja3dhcmQsIG51bGwsIHRydWUsIHRoaXMub3B0cy5yYW5kb20pOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZ286ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9wKCk7Ly/lgZzmraLkuIrmrKHnmoTjgIIKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGludGVydmFsPXRoaXMub3B0cy5pbnRlcnZhbDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9zZWxmPXRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGYuc2V0Q291bnRkb3duKDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChfc2VsZi5jb3VudGRvd25UaW1lcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdChfc2VsZi5nZXRFbGUoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0saW50ZXJ2YWwpOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0VGltZT1EYXRlLm5vdygpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvdW50ZG93blRpbWVyPXNldEludGVydmFsKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2VsZi5zZXRDb3VudGRvd24oaW50ZXJ2YWwgLSAoRGF0ZS5ub3coKS1zdGFydFRpbWUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwxMDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludGVydmFsICYmIGludGVydmFsICE9PSBkZWZhdWx0U2xpZGVTaG93SW50ZXJ2YWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRTbGlkZVNob3dJbnRlcnZhbCA9IGludGVydmFsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZS5zZXRJdGVtKCdzbGlkZVNob3dJbnRlcnZhbCcsIGludGVydmFsKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc3RvcDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENvdW50ZG93bih0aGlzLm9wdHMuaW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5jb3VudGRvd25UaW1lcik7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBleGl0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5ydW49dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hTdGF0dXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzZXRDb3VudGRvd246ZnVuY3Rpb24odmFsdWUpewogICAgICAgICAgICAgICAgICAgICAgICBlbGVNYXBzWydoZWFkLWNvbW1hbmQtc2xpZGUtc2hvdy1jb3VudGRvd24nXS50ZXh0Q29udGVudD0odmFsdWUvMTAwMCkudG9GaXhlZCgyKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHN3aXRjaFN0YXR1czpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdHMucnVuPSF0aGlzLm9wdHMucnVuOwogICAgICAgICAgICAgICAgICAgICAgICBlbGVNYXBzWydoZWFkLWNvbW1hbmQtc2xpZGUtc2hvdy1idXR0b24taW5uZXInXS5jbGFzc0xpc3RbdGhpcy5vcHRzLnJ1bj8gJ2FkZCcgOiAncmVtb3ZlJ10oJ3B2LWdhbGxlcnktaGVhZC1jb21tYW5kLXNsaWRlLXNob3ctYnV0dG9uLWlubmVyX3N0b3AnKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGNoZWNrOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5ydW4/ICB0aGlzLnJ1bignY2xpY2snKSA6IHRoaXMuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHNsaWRlU2hvdy5zZXRDb3VudGRvd24oc2xpZGVTaG93Lm9wdHMuaW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgdGhpcy5zbGlkZVNob3c9c2xpZGVTaG93OwogICAgICAgICAgICAgICAgZWxlTWFwc1snaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1zbGlkZS1zaG93LWludGVydmFsJ10udmFsdWUgPSBwYXJzZUludChzbGlkZVNob3cub3B0cy5pbnRlcnZhbCAvIDEwMDApIHx8IDU7CgogICAgICAgICAgICAgICAgbGV0IGZpbHRlckljb24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcigiLnB2LWdhbGxlcnktaGVhZC1sZWZ0LWZpbHRlci1pY29uIik7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmaWx0ZXJVcmwoKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlclN0ciA9IHByb21wdChpMThuKCJ1cmxGaWx0ZXJUaXAiKSwgc2VsZi51cmxGaWx0ZXIgfHwgbG9jYXRpb24uaG9zdG5hbWUpIHx8ICIiOwogICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJTdHIgIT0gc2VsZi51cmxGaWx0ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi51cmxGaWx0ZXIgPSBmaWx0ZXJTdHI7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2Uuc2V0TGlzdEl0ZW0oInVybEZpbHRlciIsIGxvY2F0aW9uLmhvc3RuYW1lLCBmaWx0ZXJTdHIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi51cmxGaWx0ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlckljb24udGl0bGUgPSAiRmlsdGVyOiAiICsgc2VsZi51cmxGaWx0ZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJJY29uLnN0eWxlLmZpbHRlciA9ICJicmlnaHRuZXNzKDUpIjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlckljb24udGl0bGUgPSBpMThuKCJ1cmxGaWx0ZXJUaXAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlckljb24uc3R5bGUuZmlsdGVyID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi51cmxGaWx0ZXJSZWcgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNoYW5nZU1pblZpZXcoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmaWx0ZXJJY29uLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBmaWx0ZXJVcmwoKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdGhpcy51cmxGaWx0ZXIgPSAiIjsKICAgICAgICAgICAgICAgIHRoaXMubG9ja01heFNpemUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHZhciB1cmxGaWx0ZXIgPSBzdG9yYWdlLmdldExpc3RJdGVtKCJ1cmxGaWx0ZXIiLCBsb2NhdGlvbi5ob3N0bmFtZSkgfHwgZmFsc2U7CiAgICAgICAgICAgICAgICB2YXIgbG9ja01heFNpemUgPSBzdG9yYWdlLmdldExpc3RJdGVtKCJtYXhTaXplIiwgbG9jYXRpb24uaG9zdG5hbWUpIHx8IGZhbHNlOwogICAgICAgICAgICAgICAgaWYgKHVybEZpbHRlcikgewogICAgICAgICAgICAgICAgICAgIHNlbGYudXJsRmlsdGVyID0gdXJsRmlsdGVyOwogICAgICAgICAgICAgICAgICAgIGZpbHRlckljb24udGl0bGUgPSBzZWxmLnVybEZpbHRlcjsKICAgICAgICAgICAgICAgICAgICBmaWx0ZXJJY29uLnN0eWxlLmZpbHRlciA9ICJicmlnaHRuZXNzKDUpIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChsb2NrTWF4U2l6ZSkgewogICAgICAgICAgICAgICAgICAgIHNlbGYubG9ja01heFNpemU9bG9ja01heFNpemU7CiAgICAgICAgICAgICAgICAgICAgaGVhZE1heExvY2suc3R5bGUuZmlsdGVyPSJicmlnaHRuZXNzKDUpIjsKICAgICAgICAgICAgICAgICAgICBoZWFkTWF4TG9jay50aXRsZT1sb2NrTWF4U2l6ZS53KyIgeCAiK2xvY2tNYXhTaXplLmg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzZWxmLmN1ckRlZmF1bHRTaXplID0gc3RvcmFnZS5nZXRMaXN0SXRlbSgibWluU2l6ZSIsIGxvY2F0aW9uLmhvc3RuYW1lKSB8fCBmYWxzZTsKCiAgICAgICAgICAgICAgICAvL+W5u+eBr+eJh+aSreaUvuS4i+aLieWIl+ihqGNoYW5nZeS6i+S7tueahOWkhOeQhgogICAgICAgICAgICAgICAgZWxlTWFwc1snaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1zbGlkZS1zaG93J10uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0PWUudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgcHJlZnM9ZGF0YXNldCh0YXJnZXQsJ3ByZWZzJyk7CiAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0LnR5cGU9PSdjaGVja2JveCcpewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT10YXJnZXQuY2hlY2tlZDsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9cGFyc2VGbG9hdCh0YXJnZXQudmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihpc05hTih2YWx1ZSkpey8v5peg5pWICiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT1zbGlkZVNob3cub3B0c1twcmVmc10gLyAxMDAwOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT12YWx1ZT4wID8gdmFsdWUgOiAxOwogICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQudmFsdWU9dmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICo9IDEwMDA7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzbGlkZVNob3cub3B0c1twcmVmc109dmFsdWU7CiAgICAgICAgICAgICAgICAgICAgc2xpZGVTaG93LnJ1bignY2hhbmdlJyk7CiAgICAgICAgICAgICAgICB9LHRydWUpOwoKCiAgICAgICAgICAgICAgICAvL+WIhuexu+S4i+aLieWIl+ihqOeahOeCueWHu+WPkeeUn2NoYW5nZeS6i+S7tueahOWkhOeQhgogICAgICAgICAgICAgICAgZWxlTWFwc1snaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1jYXRlZ29yeSddLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldD1lLnRhcmdldDsKICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZT1kYXRhc2V0KHRhcmdldCwndHlwZScpOwogICAgICAgICAgICAgICAgICAgIHNlbGYuaVN0YXRpc0NvcHlbdHlwZV0uc2hvd249dGFyZ2V0LmNoZWNrZWQ7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5zd2l0Y2hUaHVtYlZpc2libGUoKTsvL+WIh+aNouWbvueJh+exu+WIq+aYvumakDsKICAgICAgICAgICAgICAgIH0sdHJ1ZSk7CgogICAgICAgICAgICAgICAgbGV0IHNjcm9sbEVuZEFuZExvYWQgPSBzdG9yYWdlLmdldExpc3RJdGVtKCJzY3JvbGxFbmRBbmRMb2FkIiwgbG9jYXRpb24uaG9zdG5hbWUpOwogICAgICAgICAgICAgICAgaWYgKHNjcm9sbEVuZEFuZExvYWQgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICBwcmVmcy5nYWxsZXJ5LnNjcm9sbEVuZEFuZExvYWQgPSB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzY3JvbGxFbmRBbmRMb2FkID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgIHByZWZzLmdhbGxlcnkuc2Nyb2xsRW5kQW5kTG9hZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGVsZU1hcHNbJ2hlYWQtY29tbWFuZC1kcm9wLWxpc3Qtb3RoZXJzJ10ucXVlcnlTZWxlY3RvcignaW5wdXRbZGF0YS1jb21tYW5kPSJzY3JvbGxUb0VuZEFuZFJlbG9hZCJdJykuY2hlY2tlZCA9IHByZWZzLmdhbGxlcnkuc2Nyb2xsRW5kQW5kTG9hZDsKICAgICAgICAgICAgICAgIGxldCBzcmNTcGxpdCwgZG93bmxvYWRpbmc9ZmFsc2UsIHNhdmVQYXJhbXM7CiAgICAgICAgICAgICAgICBhc3luYyBmdW5jdGlvbiBnZXRTYXZlUGFyYW1zKCkgewogICAgICAgICAgICAgICAgICAgIGxldCBub2RlcyA9IHNlbGYuZWxlTWFwc1snc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lciddLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWItY29udGFpbmVyW2RhdGEtc3JjXTpub3QoLmlnbm9yZSknKTsKICAgICAgICAgICAgICAgICAgICBsZXQgc2F2ZVBhcmFtcyA9IFtdLHNhdmVJbmRleD0wOwogICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBub2RlcykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodW5zYWZlV2luZG93LmdldENvbXB1dGVkU3R5bGUobm9kZSkuZGlzcGxheSAhPT0gIm5vbmUiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXZlSW5kZXgrKzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeGhyID0gZGF0YXNldChub2RlLCAneGhyJykgIT09ICdzdG9wJyAmJiBzZWxmLmdldFByb3BCeVNwYW5NYXJrKG5vZGUsICJ4aHIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4aHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dUaXBzKCJTZW5kaW5nIHJlcXVlc3QuLi4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeGhyRXJyb3IgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0KG5vZGUsICd4aHInLCAnc3RvcCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXQobm9kZSwgJ3NyYycsIGRhdGFzZXQobm9kZSwgJ3RodW1iU3JjJykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHJMb2FkLmxvYWQoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogbm9kZS5kYXRhc2V0LnNyYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHI6IHhociwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYjogZnVuY3Rpb24oaW1nU3JjLCBpbWdTcmNzLCBjYXB0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWdTcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXQobm9kZSwgJ3NyYycsIGltZ1NyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0KG5vZGUsICd4aHInLCAnc3RvcCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhcHRpb24pIGRhdGFzZXQobm9kZSwgJ2Rlc2NyaXB0aW9uJywgY2FwdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHJFcnJvcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmVycm9yOiB4aHJFcnJvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHByZWZzLmdhbGxlcnkuZG93bmxvYWRHYXAgfHwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlLmRhdGFzZXQuc3JjLmluZGV4T2YoJ2RhdGEnKSA9PT0gMCkgc3JjU3BsaXQgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY1NwbGl0ID0gbm9kZS5kYXRhc2V0LnNyYyB8fCAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aXRsZSA9IG5vZGUudGl0bGUuaW5kZXhPZignXG4nKSAhPT0gLTEgPyBub2RlLnRpdGxlLnNwbGl0KCdcbicpWzBdIDogbm9kZS50aXRsZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlID0gdGl0bGUuaW5kZXhPZignaHR0cCcpID09PSAwIHx8IHRpdGxlLmluZGV4T2YoJ2RhdGEnKSA9PT0gMCA/ICcnIDogdGl0bGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZSA9IGdldFJpZ2h0U2F2ZU5hbWUoc3JjU3BsaXQsIHRpdGxlLCBwcmVmcy5zYXZlTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGljTmFtZSA9IChzYXZlSW5kZXggPCAxMCA/ICIwMCIgKyBzYXZlSW5kZXggOiAoc2F2ZUluZGV4IDwgMTAwID8gIjAiICsgc2F2ZUluZGV4IDogc2F2ZUluZGV4KSkgKyAodGl0bGUgPyAiLSIgKyB0aXRsZSA6ICIiKSwgaG9zdEFyciA9IGxvY2F0aW9uLmhvc3Quc3BsaXQoIi4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBob3N0ID0gaG9zdEFycltob3N0QXJyLmxlbmd0aC0yXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVQYXJhbXMucHVzaChbbm9kZS5kYXRhc2V0LnNyYywgcGljTmFtZV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuZGF0YXNldC5zcmNzICYmIG5vZGUuZGF0YXNldC5zcmNzICE9IG5vZGUuZGF0YXNldC5zcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLmRhdGFzZXQuc3Jjcy5zcGxpdCgiLCIpLmZvckVhY2goc3JjID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZVBhcmFtcy5wdXNoKFtzcmMsIHBpY05hbWVdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2F2ZUFzKG5vZGUuZGF0YXNldC5zcmMsIGxvY2F0aW9uLmhvc3QrIi0iK3NyY1NwbGl0W3NyY1NwbGl0Lmxlbmd0aC0xXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNhdmVQYXJhbXM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzZWxmLm9wZW5JbWFnZXMgPSAoZSkgPT4gewogICAgICAgICAgICAgICAgICAgIGxldCBmaWxlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwogICAgICAgICAgICAgICAgICAgIGZpbGVJbnB1dC50eXBlID0gImZpbGUiOwogICAgICAgICAgICAgICAgICAgIGZpbGVJbnB1dC5hY2NlcHQgPSAiaW1hZ2UvKix2aWRlby8qLGF1ZGlvLyoiOwogICAgICAgICAgICAgICAgICAgIGZpbGVJbnB1dC5zZXRBdHRyaWJ1dGUoIm11bHRpcGxlIiwgIiIpOwogICAgICAgICAgICAgICAgICAgIGlmIChlICYmIChlLmN0cmxLZXkgfHwgZS5hbHRLZXkgfHwgZS5zaGlmdEtleSB8fCBlLm1ldGFLZXkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVJbnB1dC5zZXRBdHRyaWJ1dGUoImRpcmVjdG9yeSIsICIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUlucHV0LnNldEF0dHJpYnV0ZSgid2Via2l0ZGlyZWN0b3J5IiwgIiIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBmaWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gZS50YXJnZXQuZmlsZXM7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmlsZSA9IGZpbGVzLml0ZW0oaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZSA9IGZpbGVzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZWRpYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZS50eXBlLmluZGV4T2YoImltYWdlIikgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGUudHlwZS5pbmRleE9mKCJhdWRpbyIpID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gImF1ZGlvOiIgKyBzcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmaWxlLnR5cGUuaW5kZXhPZigidmlkZW8iKSA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYSA9IGNyZWF0ZVZpZGVvKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA9ICJ2aWRlbzoiICsgc3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS50aXRsZSA9IGZpbGUubmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM6IHNyYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZvcmNlJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3JjOiBzcmMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vQWN0dWFsOnRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBmaWxlLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZzogbWVkaWEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGF0YS5wdXNoKHJlc3VsdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fYXBwZW5kVGh1bWJTcGFucyhbcmVzdWx0XSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRUaHVtYigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jaGFuZ2VTaXplSW5wdXRSZXNldCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIGZpbGVJbnB1dC5jbGljaygpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIC8v5ZG95Luk5LiL5ouJ5YiX6KGo55qE54K55Ye75aSE55CGCiAgICAgICAgICAgICAgICBlbGVNYXBzWydoZWFkLWNvbW1hbmQtZHJvcC1saXN0LW90aGVycyddLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxhc3luYyBmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBpZihlLmJ1dHRvbiE9MClyZXR1cm47Ly/lt6bplK4KICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0PWUudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIGxldCBjb21tYW5kPWRhdGFzZXQodGFyZ2V0LCdjb21tYW5kJyk7CiAgICAgICAgICAgICAgICAgICAgaWYoIWNvbW1hbmQpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIHN3aXRjaChjb21tYW5kKXsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnb3BlbkluTmV3V2luZG93Jzp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfR01fb3BlbkluVGFiKHNlbGYuc3JjLCB7YWN0aXZlOnRydWV9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vd2luZG93Lm9wZW4oc2VsZi5zcmMsJ19ibGFuaycpOwogICAgICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BzSW1hZ2UnOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlZGl0RnVuYz1lZGl0U2l0ZXNGdW5jW3ByZWZzLmdhbGxlcnkuZWRpdFNpdGVdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWVkaXRGdW5jKWVkaXRGdW5jPWVkaXRTaXRlc0Z1bmNbT2JqZWN0LmtleXMoZWRpdFNpdGVzRnVuYylbMF1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWRpdEZ1bmMpZWRpdEZ1bmMoc2VsZi5zcmMsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Njcm9sbEludG9WaWV3Jzp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb2xsZWN0aW9uLm1Nb2RlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dUaXBzKGkxOG4oImluQ29sbGVjdGlvbiIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlbGF0ZWRUaHVtYj1zZWxmLnJlbGF0ZWRUaHVtYjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleD1hcnJheUZuLmluZGV4T2YuY2FsbChzZWxmLmltZ1NwYW5zLHJlbGF0ZWRUaHVtYik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0SW1nPXNlbGYuZGF0YVtpbmRleF0uaW1nOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldEltZyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyh0YXJnZXRJbWcpIHx8IHVuc2FmZVdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldEltZykuZGlzcGxheT09J25vbmUnKXsvL+WbvueJh+S4jeWtmOWcqOaWh+aho+S4re+8jOaIluiAhemakOiXj+S6huOAggogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dUaXBzKGkxOG4oImNhbnRGaW5kIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1pbmltaXplKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm5hdmlnYXRlVG9JbWcodGFyZ2V0SW1nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhc2hFbGUodGFyZ2V0SW1nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNley8vZnJhbWXlj5HpgIHov4fmnaXnmoTml7blgJnliKDpmaTkuobkuI3og73kvKDpgIHnmoTlm77niYcKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncHYtbmF2aWdhdGVUb0ltZycsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFlLmRldGFpbCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dUaXBzKGkxOG4oImNhbnRGaW5kIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1pbmltaXplKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsvL+WwhmZyYW1l5rua5Yqo5Yiw5Lit6Ze05L2N572uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzZWxmLmlmcmFtZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5uYXZpZ2F0ZVRvSW1nKHNlbGYuaWZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSx0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2Uoey8v6Zeu6ZeuZnJhbWXjgILjgIIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUlEOm1lc3NhZ2VJRCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZDonbmF2aWdhdGVUb0ltZycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OmluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bzpzZWxmLmZyb20sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwnKicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXhwb3J0SW1hZ2VzJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZXhwb3J0SW1hZ2VzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncG9zdEltYWdlc1RvQXJpYTInOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmVmcy5nYWxsZXJ5LmFyaWEySG9zdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd1RpcHMoIkNvbmZpZ3VyZSBhcmlhMiBmaXJzdCEiLCAxMDAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXZlUGFyYW1zID0gYXdhaXQgZ2V0U2F2ZVBhcmFtcygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKHNhdmVQYXJhbXMsIGZ1bmN0aW9uKHBhcmFtKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBwcmVmcy5nYWxsZXJ5LmFyaWEySG9zdCArICIvanNvbnJwYyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0b2tlbjoiICsgKHByZWZzLmdhbGxlcnkuYXJpYTJUb2tlbiB8fCAiIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3BhcmFtWzBdXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Im91dCI6IHBhcmFtWzFdfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb25ycGM6ICIyLjAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiYXJpYTIuYWRkVXJpIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBNYXRoLnJhbmRvbSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25lcnJvcjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93VGlwcygiRXJyb3IhIENoZWNrIGFyaWEyIHNldHRpbmchIiwgMTAwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93VGlwcygiQ29tcGxldGVkISIsIDEwMDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Rvd25sb2FkSW1hZ2UnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZG93bmxvYWRpbmcpYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZGluZz10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZVBhcmFtcyA9IGF3YWl0IGdldFNhdmVQYXJhbXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYmF0Y2hEb3dubG9hZChzYXZlUGFyYW1zLCAoKT0+ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkaW5nPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd1RpcHMoIkNvbXBsZXRlZCEiLCAxMDAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvcHlJbWFnZXMnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb3B5SW1hZ2VzKHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Nvb2tpZSc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29raWUgPSBwcm9tcHQoIlNldCBDb29raWUiLCBjb29raWUgfHwgIiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Njcm9sbFRvRW5kQW5kUmVsb2FkJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGVja2JveCA9IHRhcmdldC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoImlucHV0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0YXJnZXQubm9kZU5hbWUudG9VcHBlckNhc2UoKT09IkxBQkVMIil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9ICFjaGVja2JveC5jaGVja2VkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWZzLmdhbGxlcnkuc2Nyb2xsRW5kQW5kTG9hZCA9IGNoZWNrYm94LmNoZWNrZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnNldExpc3RJdGVtKCJzY3JvbGxFbmRBbmRMb2FkIiwgbG9jYXRpb24uaG9zdG5hbWUsIGNoZWNrYm94LmNoZWNrZWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Z1bGxTY3JlZW4nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Z1bGxzY3JlZW5idG4nKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYW5jZWxGdWxsU2NyZWVuKCkpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQudGV4dENvbnRlbnQgPSBpMThuKCJlbnRlckZ1bGxzYyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdmdWxsc2NyZWVuYnRuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXVuY2hGdWxsU2NyZWVuKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdmdWxsc2NyZWVuYnRuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQudGV4dENvbnRlbnQgPSBpMThuKCJleGl0RnVsbHNjIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZnVsbHNjcmVlbmJ0bicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNpZGViYXJDb250YWluZXIgPSBzZWxmLmVsZU1hcHNbJ3NpZGViYXItY29udGFpbmVyJ10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNIaWRkZW4gPSBzaWRlYmFyQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPT0gJ2hpZGRlbic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzSGlkZGVuKSBzZWxmLnNob3dIaWRlQm90dG9tKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnb3BlblByZWZzJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5QcmVmcygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3ZpZXdtb3JlJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWF4aW1pemVTaWRlYmFyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnb3BlbkltYWdlcyc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9wZW5JbWFnZXMoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWRkSW1hZ2VVcmxzJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1cmxzID0gd2luZG93LnByb21wdChpMThuKCdhZGRJbWFnZVVybHMnKSArICI6IFdoaXRlIHNwYWNlIHRvIHNwbGl0IG11bHRpLWltYWdlLCAnWzAxLTA5XScgdG8gZ2VuZXJhdGUgbmluZSB1cmxzIGZyb20gMDEgdG8gMDksICckaHR0cDovL3h4eCcgdG8gZmV0Y2ggaW1hZ2VzIGZyb20gcGFnZSIsImh0dHBzOi8veHh4Lnh4eC9waWMtWzIwLTk5XS5qcGcgaHR0cHM6Ly94eHgueHh4L3BpYy1bMDEtMTBdLnBuZyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1cmxzKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZEltYWdlVXJscyh1cmxzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdvcGVyYXRlJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLmltZyA9PT0gbnVsbCB8fCBzZWxmLmltZy5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWRkbGVXaW5kb3c7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoL2ltZy9pLnRlc3Qoc2VsZi5pbWcubm9kZU5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nUmVhZHkoc2VsZi5zcmMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHk6ZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmltZy5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlkZGxlV2luZG93ID0gbmV3IEltZ1dpbmRvd0ModGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0U3JjID0gc2VsZi5zcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWRkbGVXaW5kb3cuaW1nV2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInB2LXJlbW92ZUltZ1dpbmRvdyIsIGUgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLmltZy5zdHlsZS5kaXNwbGF5ID09PSAibm9uZSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWcuc3R5bGUuZGlzcGxheSA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0ID0gc2VsZi5pbWc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNsYXNzTmFtZUJhayA9IHRhcmdldC5jbGFzc05hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlkZGxlV2luZG93ID0gbmV3IEltZ1dpbmRvd0ModGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmltZyA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldFNyYyA9IHNlbGYuc3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZGRsZVdpbmRvdy5pbWdXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicHYtcmVtb3ZlSW1nV2luZG93IiwgZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLmltZyA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLndpZHRoID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUuaGVpZ2h0ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUub3BhY2l0eSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVNYXBzWydpbWctcGFyZW50J10uYXBwZW5kQ2hpbGQodGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaW1nID0gdGFyZ2V0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWcuY2xhc3NOYW1lID0gY2xhc3NOYW1lQmFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndXJsRmlsdGVyJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlclVybCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VudGVyQ29sbGVjdGlvbic6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+i/m+WFpeeuoeeQhuaooeW8jwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbi5lbnRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2V4aXRDb2xsZWN0aW9uJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6YCA5Ye6566h55CG5qih5byPCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLmV4aXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LHRydWUpOwoKICAgICAgICAgICAgICAgIC8vIOebkeinhuWFqOWxj+eahOWPmOWMlgogICAgICAgICAgICAgICAgZnVuY3Rpb24gZnVsbFNjcmVlbkNoYW5nZWQoKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCAmJiAvLyBhbHRlcm5hdGl2ZSBzdGFuZGFyZCBtZXRob2QKICAgICAgICAgICAgICAgICAgICAgICAgIWRvY3VtZW50Lm1vekZ1bGxTY3JlZW5FbGVtZW50ICYmCiAgICAgICAgICAgICAgICAgICAgICAgICFkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudCAmJgogICAgICAgICAgICAgICAgICAgICAgICAhZG9jdW1lbnQubXNGdWxsc2NyZWVuRWxlbWVudCkgewoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwdi1nYWxsZXJ5LWZ1bGxzY3JlZW5idG4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ0bikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gaTE4bigiZW50ZXJGdWxsc2MiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdmdWxsc2NyZWVuYnRuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJywgZnVsbFNjcmVlbkNoYW5nZWQsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vemZ1bGxzY3JlZW5jaGFuZ2UnLCBmdWxsU2NyZWVuQ2hhbmdlZCwgZmFsc2UpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZnVsbHNjcmVlbmNoYW5nZScsIGZ1bGxTY3JlZW5DaGFuZ2VkLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgLy/nlJ/miJDliIbkuqvnmoTkuIvmi4nliJfooagKICAgICAgICAgICAgICAgIHZhciBzaGFyZU1hcms9Jyc7CiAgICAgICAgICAgICAgICB2YXIgc2hhcmVJdGVtOwogICAgICAgICAgICAgICAgZm9yKGxldCBpIGluIHByZWZzLnNoYXJlKXsKICAgICAgICAgICAgICAgICAgICBpZighcHJlZnMuc2hhcmUuaGFzT3duUHJvcGVydHkoaSkpY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgc2hhcmVJdGVtPXByZWZzLnNoYXJlW2ldOwogICAgICAgICAgICAgICAgICAgIGlmKHNoYXJlSXRlbS5saW1pdExhbmcgJiYgc2hhcmVJdGVtLmxpbWl0TGFuZy5pbmRleE9mKGxhbmcpPT0tMSljb250aW51ZTsKICAgICAgICAgICAgICAgICAgICBpZihzaGFyZUl0ZW0uZGlzYWJsZWQpY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgc2hhcmVNYXJrKz0oCiAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0iIGRhdGEtc2l0ZT0iJytpKyciIHN0eWxlPSJcCiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6dXJsKFwnJysgc2hhcmVJdGVtLmljb24gKydcJyk7XAogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOjRweCBjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7XAogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLWxlZnQ6MjRweDsiPicrc2hhcmVJdGVtLm5hbWUrJzwvc3Bhbj4nKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgZWxlTWFwc1snaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1zaGFyZSddLmlubmVySFRNTD1jcmVhdGVIVE1MKHNoYXJlTWFyayk7CgogICAgICAgICAgICAgICAgLy/liIbkuqvkuIvmi4nliJfooajnmoTngrnlh7vlpITnkIYKICAgICAgICAgICAgICAgIGVsZU1hcHNbJ2hlYWQtY29tbWFuZC1kcm9wLWxpc3Qtc2hhcmUnXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgaWYoZS5idXR0b24hPTApcmV0dXJuOy8v5bem6ZSuCiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldD1lLnRhcmdldDsKICAgICAgICAgICAgICAgICAgICB2YXIgc2l0ZT1kYXRhc2V0KHRhcmdldCwnc2l0ZScpOwogICAgICAgICAgICAgICAgICAgIGlmKCFzaXRlKXJldHVybjsKICAgICAgICAgICAgICAgICAgICB2YXIgc2l0ZV9pbmZvPXByZWZzLnNoYXJlW3NpdGVdOwogICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbT1zaXRlX2luZm8uYXBpLmNhbGwoc2VsZi5pbWcsewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTplbmNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQudGl0bGUpLAogICAgICAgICAgICAgICAgICAgICAgICBwaWM6ZW5jb2RlVVJJQ29tcG9uZW50KHNlbGYuc3JjKSwKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOmVuY29kZVVSSUNvbXBvbmVudChsb2NhdGlvbi5ocmVmKSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBpZighcGFyYW0pcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKHBhcmFtLnVybCwnX2JsYW5rJywnaGVpZ2h0PScrcGFyYW0ud1NpemUuaCsnLHdpZHRoPScrcGFyYW0ud1NpemUudysnLGxlZnQ9MzAsdG9wPTMwLGxvY2F0aW9uPW5vLHN0YXR1cz1ubyx0b29sYmFyPW5vLG1lbnViYXI9bm8sc2Nyb2xsYmFycz15ZXMnKTsKICAgICAgICAgICAgICAgIH0sdHJ1ZSk7CgogICAgICAgICAgICAgICAgLyplbGVNYXBzWydoZWFkJ10uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIGlmKGUudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKCdwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZCcpIT0tMSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VWaWV3TW9yZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOyovCgogICAgICAgICAgICAgICAgaWYoIXByZWZzLmdhbGxlcnkuc2VhcmNoRGF0YSB8fCBkZWZhdWx0U2VhcmNoRGF0YS5pbmRleE9mKHByZWZzLmdhbGxlcnkuc2VhcmNoRGF0YSkhPS0xKXByZWZzLmdhbGxlcnkuc2VhcmNoRGF0YT1kZWZhdWx0U2VhcmNoRGF0YTsKICAgICAgICAgICAgICAgIHZhciBzZWFyY2hSdWxlcz1wcmVmcy5nYWxsZXJ5LnNlYXJjaERhdGEuc3BsaXQoIlxuIiksc2VhcmNoVXBsb2FkVXJsLHNlYXJjaEl0ZW1zPVtdOwogICAgICAgICAgICAgICAgdmFyIHNlYXJjaEFsbD1lbGVNYXBzWydoZWFkLWNvbW1hbmQtZHJvcC1saXN0LXNlYXJjaCddLnF1ZXJ5U2VsZWN0b3IoIiNoZWFkU2VhcmNoQWxsIik7CiAgICAgICAgICAgICAgICBzZWFyY2hSdWxlcy5mb3JFYWNoKHJ1bGU9PnsKICAgICAgICAgICAgICAgICAgICBpZighc2VhcmNoVXBsb2FkVXJsKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVwbG9hZE1hdGNoPXJ1bGUubWF0Y2goL1xzKnsoLiopfVxzKi8pOy8vdG9kbzogdXBsb2FkIDIgc2VhcmNoLCBuZWVkIGEgTG9uZy1UZXJtIFNlcnZpY2luZyBzZXJ2ZXIgZm9yIGJhc2U2NCB0byB1cmwgbGlrZSBhaW5vb2IuY29tL2FwaS91cGxvYWRJbWFnZS8KICAgICAgICAgICAgICAgICAgICAgICAgaWYodXBsb2FkTWF0Y2gpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoVXBsb2FkVXJsPXVwbG9hZE1hdGNoWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGxldCBydWxlQXJyPXJ1bGUudHJpbSgpLnNwbGl0KCJ8Iik7CiAgICAgICAgICAgICAgICAgICAgaWYocnVsZUFyci5sZW5ndGg9PTIpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NOYW1lPSJwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbSI7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uaW5uZXJIVE1MPWNyZWF0ZUhUTUwocnVsZUFyclswXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVybD1lbmNvZGVVUklDb21wb25lbnQoc2VsZi5zcmMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVybGI9c2VsZi5zcmMucmVwbGFjZSgvaHR0cHM/OlwvXC8vaSwiIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihydWxlQXJyWzFdLnJlcGxhY2UoIiNiIyIsIHVybGIpLnJlcGxhY2UoIiN0IyIsIHVybCksICJfYmxhbmsiLCAid2lkdGg9MTAyNCwgaGVpZ2h0PTc2OCwgdG9vbGJhcj0xIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hJdGVtcy5wdXNoKGl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgICBlbGVNYXBzWydoZWFkLWNvbW1hbmQtZHJvcC1saXN0LXNlYXJjaCddLmluc2VydEJlZm9yZShpdGVtLCBzZWFyY2hBbGwpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgc2VhcmNoQWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBzZWFyY2hJdGVtcy5mb3JFYWNoKGl0ZW09PntpdGVtLmNsaWNrKCl9KTsKICAgICAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgICAgICBsZXQgbG9hZGluZ1RodW1icyA9IGZhbHNlOwogICAgICAgICAgICAgICAgZWxlTWFwc1snc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lciddLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsZnVuY3Rpb24oZSl7Ly/lj5HnlJ9zY3JvbGzkuovku7bml7bliqDovb3nvKnnlaXlm74KICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGluZ1RodW1icykgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGxvYWRpbmdUaHVtYnMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ1RodW1icyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRUaHVtYigpOwogICAgICAgICAgICAgICAgICAgIH0sMjAwKTsKICAgICAgICAgICAgICAgIH0sZmFsc2UpOwoKICAgICAgICAgICAgICAgIHRoaXMuY2FuU2Nyb2xsPXRydWU7CiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9DaGFuZ2U9ZnVuY3Rpb24obmV4dCl7CiAgICAgICAgICAgICAgICAgICAgaWYoc2VsZi5jYW5TY3JvbGwpewogICAgICAgICAgICAgICAgICAgICAgICBpZihwcmVmcy5nYWxsZXJ5LnRyYW5zaXRpb24pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYW5TY3JvbGw9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYW5TY3JvbGw9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sMjAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBuZXh0ID8gc2VsZi5zZWxlY3ROZXh0KCkgOiBzZWxmLnNlbGVjdFByZXZpb3VzKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYWRkV2hlZWxFdmVudChlbGVNYXBzWydib2R5J10sZnVuY3Rpb24oZSl7Ly93aGVlbOS6i+S7tgogICAgICAgICAgICAgICAgICAgIGlmKGUuZGVsdGFaIT0wIHx8IGUudGFyZ2V0Lm5vZGVOYW1lPT0iVEVYVEFSRUEiKXJldHVybjsvL3rovbQKICAgICAgICAgICAgICAgICAgICBpZihlbGVNYXBzWydzaWRlYmFyLXRvZ2dsZSddLnN0eWxlLnZpc2liaWxpdHkgPT0gJ2hpZGRlbicpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQ9ZS50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgLy9lLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgaWYoZWxlTWFwc1snc2lkZWJhci1jb250YWluZXInXS5jb250YWlucyh0YXJnZXQpKXsvL+e8qeeVpeWbvuWMuua7muWKqOa7mui9rue/u+WbvueJhwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5kZWx0YVggPT09IDAgJiYgZS5kZWx0YVkgPT09IDApIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRpc3RhbmNlPXNlbGYudGh1bWJTcGFuT3V0ZXJTaXplOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZS5kZWx0YVk8MCB8fCBlLmRlbHRhWDwwKXsvL+WQkeS4iua7mgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2U9LWRpc3RhbmNlOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB0aHVtYlNjcm9sbGJhci5zY3JvbGxCeShkaXN0YW5jZSkKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsvL+WbvueJh+WMuuWfn+a7muWKqAogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlzdGFuY2U9MTAwOwogICAgICAgICAgICAgICAgICAgICAgICBpZihlLmRlbHRhWSE9MCl7Ly956L20CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzZWxmLmltZyAmJiBzZWxmLmltZy5jbGFzc0xpc3QuY29udGFpbnMoJ3B2LWdhbGxlcnktaW1nX3pvb20tb3V0Jykpey8v5Zu+54mH5Y+v5Lul57yp5bCP5pe277yM5rua5Yqo5Zu+54mH77yM5ZCm5YiZ5YiH5o2i5Zu+54mH44CCCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZS5kZWx0YVkgPCAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2U9LU1hdGgubWF4KGRpc3RhbmNlLCAtZS5kZWx0YVkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGRpc3RhbmNlPU1hdGgubWF4KGRpc3RhbmNlLCBlLmRlbHRhWSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlTWFwc1snaW1nLXNjcm9sbGJhci1oJ10uY29udGFpbnModGFyZ2V0KSl7Ly/lpoLmnpzlnKjmqKrlkJHmu5rliqjmnaHkuIrjgIIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nU2Nyb2xsYmFySC5zY3JvbGxCeShkaXN0YW5jZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGltZ1Njcm9sbGJhclYuc2Nyb2xsQnkoZGlzdGFuY2UpICYmIHByZWZzLmdhbGxlcnkuc2Nyb2xsRW5kVG9DaGFuZ2UpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9DaGFuZ2UoZS5kZWx0YVkgPiAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb0NoYW5nZShlLmRlbHRhWSA+IDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7Ly946L20CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlLmRlbHRhWCA8IDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlPS1NYXRoLm1heChkaXN0YW5jZSwgLWUuZGVsdGFYKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGRpc3RhbmNlPU1hdGgubWF4KGRpc3RhbmNlLCBlLmRlbHRhWCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTY3JvbGxiYXJILnNjcm9sbEJ5KGRpc3RhbmNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sdHJ1ZSk7CiAgICAgICAgICAgICAgICB2YXIgaGVhZFNjcm9sbFN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKICAgICAgICAgICAgICAgIGhlYWRTY3JvbGxTdHlsZS50eXBlID0gJ3RleHQvY3NzJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoaGVhZFNjcm9sbFN0eWxlKTsKICAgICAgICAgICAgICAgIGxldCBnYWxsZXJ5SGVhZCA9IGVsZU1hcHNbJ2hlYWQnXTsKICAgICAgICAgICAgICAgIGFkZFdoZWVsRXZlbnQoZ2FsbGVyeUhlYWQsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBnYWxsZXJ5SGVhZC5zY3JvbGxMZWZ0ICs9IGUuZGVsdGFZOwogICAgICAgICAgICAgICAgICAgIGhlYWRTY3JvbGxTdHlsZS50ZXh0Q29udGVudCA9ICcnOwogICAgICAgICAgICAgICAgICAgIGxldCBzY3JvbGxMZWZ0ID0gZ2FsbGVyeUhlYWQuc2Nyb2xsTGVmdDsKICAgICAgICAgICAgICAgICAgICBpZiAoIXNjcm9sbExlZnQpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBoZWFkU2Nyb2xsU3R5bGUudGV4dENvbnRlbnQgPSBgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdHttYXJnaW4tbGVmdDokey1zY3JvbGxMZWZ0fXB4fWA7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWFkU2Nyb2xsU3R5bGUucGFyZW50Tm9kZSkgewogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGhlYWRTY3JvbGxTdHlsZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgdHJ1ZSk7CgoKICAgICAgICAgICAgICAgIC8vZm9jdXMsYmx1cjsKICAgICAgICAgICAgICAgIGFkZEN1c01vdXNlRXZlbnQoJ21vdXNlZW50ZXInLGNvbnRhaW5lcixmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXMoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgYWRkQ3VzTW91c2VFdmVudCgnbW91c2VsZWF2ZScsY29udGFpbmVyLGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ibHVyKCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB2YXIgbGFzdFgsbGFzdFk7CiAgICAgICAgICAgICAgICBjb25zdCBtaW5MZW5ndGg9MTAwMDAsdGc9MC41OwogICAgICAgICAgICAgICAgZnVuY3Rpb24gdHJhY2VyKGUpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgY3VyWD1lLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7CiAgICAgICAgICAgICAgICAgICAgbGV0IGN1clk9ZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZOwogICAgICAgICAgICAgICAgICAgIGxldCBkaXN0YW5jZVg9Y3VyWC1sYXN0WCxkaXN0YW5jZVk9Y3VyWS1sYXN0WTsKICAgICAgICAgICAgICAgICAgICBsZXQgZGlzdGFuY2U9ZGlzdGFuY2VYKmRpc3RhbmNlWCtkaXN0YW5jZVkqZGlzdGFuY2VZOwogICAgICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZT5taW5MZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFg9Y3VyWDsKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFk9Y3VyWTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRpcmVjdGlvbj0iIjsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNsb3BlPU1hdGguYWJzKGRpc3RhbmNlWS9kaXN0YW5jZVgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihzbG9wZT50Zyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkaXN0YW5jZVk+MCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbj0i4oaTIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbj0i4oaRIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoc2xvcGU8PTEvdGcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRpc3RhbmNlWD4wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uPSLihpIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uPSLihpAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaChkaXJlY3Rpb24pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAi4oaQIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdE5leHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIuKGkiI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RQcmV2aW91cygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAi4oaRIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzZWxmLmVsZU1hcHNbJ3NpZGViYXItdG9nZ2xlJ10uc3R5bGUudmlzaWJpbGl0eSAhPSAnaGlkZGVuJyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWF4aW1pemVTaWRlYmFyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNlbGYuZWxlTWFwc1snaW1nLWNvbnRlbnQnXS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBsYXN0WD1lLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7CiAgICAgICAgICAgICAgICAgICAgbGFzdFk9ZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZOwogICAgICAgICAgICAgICAgICAgIHNlbGYuZWxlTWFwc1snaW1nLWNvbnRlbnQnXS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLHRyYWNlcik7CiAgICAgICAgICAgICAgICB9LHsgcGFzc2l2ZTogZmFsc2UsIGNhcHR1cmU6IGZhbHNlIH0pOwogICAgICAgICAgICAgICAgc2VsZi5lbGVNYXBzWydpbWctY29udGVudCddLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBzZWxmLmVsZU1hcHNbJ2ltZy1jb250ZW50J10ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJyx0cmFjZXIpOwogICAgICAgICAgICAgICAgfSx7IHBhc3NpdmU6IGZhbHNlLCBjYXB0dXJlOiBmYWxzZSB9KTsKCiAgICAgICAgICAgICAgICAvL+S4iuS4i+W3puWPs+WIh+aNouWbvueJhyznqbrmoLzplK7mqKHmi5/mu5rliqjkuIDpobUKCiAgICAgICAgICAgICAgICB2YXIgdmFsaWRLZXlDb2RlPVszOCwzOSw0MCwzNywzMiw5XS8v5LiK5Y+z5LiL5bemLDMy56m65qC8LHRhYuemgeatoueEpueCueWIh+aNouOAggogICAgICAgICAgICAgICAgdmFyIGtleURvd247CgogICAgICAgICAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIGlmKHByZWZzLmdhbGxlcnkuZGlzYWJsZUFycm93KXJldHVybjsKICAgICAgICAgICAgICAgICAgICB2YXIga2V5Q29kZT1lLmtleUNvZGU7CiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4PXZhbGlkS2V5Q29kZS5pbmRleE9mKGtleUNvZGUpOwogICAgICAgICAgICAgICAgICAgIGlmKGluZGV4PT0tMSlyZXR1cm47CgogICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQ9ZS50YXJnZXQ7CgogICAgICAgICAgICAgICAgICAgIGlmKCFjb250YWluZXIuY29udGFpbnModGFyZ2V0KSlyZXR1cm47Ly/op6blj5HnhKbngrnkuI3lho1nYWxsZXJ56YeM6Z2i44CCCiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CgogICAgICAgICAgICAgICAgICAgIGlmKGtleUNvZGU9PTkpcmV0dXJuOy8vdGFi6ZSuCiAgICAgICAgICAgICAgICAgICAgaWYoa2V5Q29kZT09MzIpey8vMzLnqbrmoLzvvIzmqKHmi5/mu5rliqjkuIDpobUKICAgICAgICAgICAgICAgICAgICAgICAgaW1nU2Nyb2xsYmFyVi5zY3JvbGxCeVBhZ2VzKDEpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgaWYoa2V5RG93bilyZXR1cm47Ly/lt7LmjInkuIvjgIIKICAgICAgICAgICAgICAgICAgICBrZXlEb3duPXRydWU7CgogICAgICAgICAgICAgICAgICAgIHZhciBzdG9wOwogICAgICAgICAgICAgICAgICAgIHN3aXRjaChpbmRleCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDo7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdFByZXZpb3VzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9wPXNlbGYuc2ltcGxlU2xpZGVTaG93KHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTo7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdE5leHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3A9c2VsZi5zaW1wbGVTbGlkZVNob3coKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGtleVVwSGFuZGxlcihlKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZS5rZXlDb2RlIT12YWxpZEtleUNvZGVbaW5kZXhdKXJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJyxrZXlVcEhhbmRsZXIsZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICBrZXlEb3duPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBzdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLGtleVVwSGFuZGxlcixmYWxzZSk7CgogICAgICAgICAgICAgICAgfSk7CgoKICAgICAgICAgICAgICAgIHZhciBpbWdEcmFnZWQ7CiAgICAgICAgICAgICAgICBlbGVNYXBzWydpbWctcGFyZW50J10uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJyxmdW5jdGlvbihlKXsvL+WmguaenOWbvueJh+WwuuWvuOWkp+S6juWxj+W5leeahOaXtuWAmeaMieS9j+WbvueJh+i/m+ihjOaLluenuwogICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQ9ZS50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgaWYoZS5idXR0b24hPTAgfHwgdGFyZ2V0Lm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkhPSdJTUcnKXJldHVybjsKICAgICAgICAgICAgICAgICAgICB2YXIgYmlnZ2VyPXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3B2LWdhbGxlcnktaW1nX3pvb20tb3V0JykgfHwgc2VsZi5zY2FsZUJ5U2NyZWVuOy8v5aaC5p6c5piv5aSn5LqO5bGP5bmVCgogICAgICAgICAgICAgICAgICAgIHZhciBvQ2xpZW50PXsKICAgICAgICAgICAgICAgICAgICAgICAgeDplLmNsaWVudFgsCiAgICAgICAgICAgICAgICAgICAgICAgIHk6ZS5jbGllbnRZLAogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHZhciBvU2Nyb2xsPXsKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDpzZWxmLmltZ1Njcm9sbGJhckguZ2V0U2Nyb2xsZWQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgdG9wOnNlbGYuaW1nU2Nyb2xsYmFyVi5nZXRTY3JvbGxlZCgpLAogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHZhciBtb3ZlRmlyZWRDb3VudD0wOwogICAgICAgICAgICAgICAgICAgIHZhciBtb3ZlSGFuZGxlcj1mdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgICAgICBtb3ZlRmlyZWRDb3VudCsrOwogICAgICAgICAgICAgICAgICAgICAgICBpZihtb3ZlRmlyZWRDb3VudDwyKXsvL+e7meS4que8k+WGsuOAguOAggogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBpbWdEcmFnZWQ9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoYmlnZ2VyKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5zdHlsZS5jdXJzb3I9IHN1cHBvcnQuY3NzQ3Vyc29yVmFsdWUuZ3JhYmJpbmcgfHwgJ3BvaW50ZXInOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWdTY3JvbGxiYXJWLnNjcm9sbChvU2Nyb2xsLnRvcC0oZS5jbGllbnRZLW9DbGllbnQueSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWdTY3JvbGxiYXJILnNjcm9sbChvU2Nyb2xsLmxlZnQtKGUuY2xpZW50WC1vQ2xpZW50LngpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICB2YXIgdXBIYW5kbGVyPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5zdHlsZS5jdXJzb3I9Jyc7CgogICAgICAgICAgICAgICAgICAgICAgICAvL+aLluabs+S5i+WQjumYu+atoumaj+WQjuWPr+iDveS6p+eUn2NsaWNr5LqL5Lu25Lqn55Sf55qE5aSn5bCP5YiH5o2i44CCCiAgICAgICAgICAgICAgICAgICAgICAgIC8v56Gu5L+d5Zyo6ZqP5ZCO55qEY2xpY2vkuovku7blj5HnlJ/lkI7miafooYwKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nRHJhZ2VkPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9LDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJyxtb3ZlSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsdXBIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsbW92ZUhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsdXBIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgfSx0cnVlKTsKCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBwb3B1cEZpZGRsZVdpbmRvdyh0YXJnZXQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5pbWcgPT09IG51bGwgfHwgc2VsZi5pbWcuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgaWYgKC9edmlkZW8kL2kudGVzdCh0YXJnZXQubm9kZU5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjbGFzc05hbWVCYWsgPSB0YXJnZXQuY2xhc3NOYW1lOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmlkZGxlV2luZG93ID0gbmV3IEltZ1dpbmRvd0ModGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWcgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBmaWRkbGVXaW5kb3cuaW1nV2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInB2LXJlbW92ZUltZ1dpbmRvdyIsIGUgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuaW1nID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUud2lkdGggPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUuaGVpZ2h0ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLm9wYWNpdHkgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZU1hcHNbJ2ltZy1wYXJlbnQnXS5hcHBlbmRDaGlsZCh0YXJnZXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaW1nID0gdGFyZ2V0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaW1nLmNsYXNzTmFtZSA9IGNsYXNzTmFtZUJhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGxldCBsaXN0ZW5SZW1vdmUgPSAoaW1nKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWRkbGVXaW5kb3cgPSBuZXcgSW1nV2luZG93QyhpbWcpOwogICAgICAgICAgICAgICAgICAgICAgICBmaWRkbGVXaW5kb3cuaW1nV2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInB2LXJlbW92ZUltZ1dpbmRvdyIsIGUgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuaW1nLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaW1nLnN0eWxlLmRpc3BsYXkgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRhcmdldC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICAgICAgICAgIGltZ1JlYWR5KHNlbGYuc3JjLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWR5OmZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuUmVtb3ZlKHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjpmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdF9pbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRfaW1nLnNyYyA9IHNlbGYuaW1nLnNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlblJlbW92ZSh0X2ltZyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsZU1hcHNbJ2ltZy1wYXJlbnQnXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgfSx0cnVlKTsKICAgICAgICAgICAgICAgIGVsZU1hcHNbJ2ltZy1wYXJlbnQnXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIH0sdHJ1ZSk7CiAgICAgICAgICAgICAgICBlbGVNYXBzWydpbWctcGFyZW50J10uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIH0sdHJ1ZSk7CiAgICAgICAgICAgICAgICBlbGVNYXBzWydpbWctcGFyZW50J10uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGUpey8v54K55Ye75Zu+54mH5pys6Lqr5bCx6KGM5Zu+54mH57yp5pS+5aSE55CGCiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldD1lLnRhcmdldDsKICAgICAgICAgICAgICAgICAgICBpZihlLmJ1dHRvbiE9MCB8fCAhL14odmlkZW98aW1nKSQvaS50ZXN0KHRhcmdldC5ub2RlTmFtZSkpcmV0dXJuOwoKICAgICAgICAgICAgICAgICAgICBpZihpbWdEcmFnZWQpey8v5Zyo5ouW5Yqo5ZCO6Kem5Y+R55qEY2xpY2vkuovku7bvvIzlj5bmtojmjonjgILlhY3lvpfkuIDmi5bliqjlrozlsLHnq4vljbPov5vooYznmoTnvKnmlL7jgILjgILjgIIKICAgICAgICAgICAgICAgICAgICAgICAgaW1nRHJhZ2VkPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHYtZ2FsbGVyeS1pbWdfem9vbS1pbicpKXsvL+aUvuWkpwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZpdENvbnRhaW5zPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgem9vbVggPSB0eXBlb2YgZS5vZmZzZXRYPT0ndW5kZWZpbmVkJyA/IGUubGF5ZXJYIDogZS5vZmZzZXRYOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgem9vbVkgPSB0eXBlb2YgZS5vZmZzZXRZPT0ndW5kZWZpbmVkJyA/IGUubGF5ZXJZIDogZS5vZmZzZXRZOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2NhbGVYPXpvb21YL3RhcmdldC5vZmZzZXRXaWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjYWxlWT16b29tWS90YXJnZXQub2Zmc2V0SGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZpdFRvU2NyZWVuKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6c2NhbGVYLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeTpzY2FsZVksCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3B2LWdhbGxlcnktaW1nX3pvb20tb3V0JykpewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZpdENvbnRhaW5zPXRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZml0VG9TY3JlZW4oKTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBGaWRkbGVXaW5kb3codGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LHRydWUpOwogICAgICAgICAgICAgICAgZWxlTWFwc1snaW1nLXBhcmVudCddLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0PWUudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIGlmKGUuYnV0dG9uIT0wIHx8ICEvXih2aWRlb3xpbWcpJC9pLnRlc3QodGFyZ2V0Lm5vZGVOYW1lKSlyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwdi1nYWxsZXJ5LWltZ196b29tLWluJykgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3B2LWdhbGxlcnktaW1nX3pvb20tb3V0JykpIHJldHVybjsKCiAgICAgICAgICAgICAgICAgICAgaWYoaW1nRHJhZ2VkKXsKICAgICAgICAgICAgICAgICAgICAgICAgaW1nRHJhZ2VkPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBwb3B1cEZpZGRsZVdpbmRvdyh0YXJnZXQpOwogICAgICAgICAgICAgICAgfSx0cnVlKTsKCgogICAgICAgICAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsZnVuY3Rpb24oZSl7Ly/pvKDmoIfmjInlnKjlr7zoiKrkuIrvvIzliIfmjaLlm77niYcKICAgICAgICAgICAgICAgICAgICBpZihlLmJ1dHRvbiE9MClyZXR1cm47Ly/lt6bplK4KICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0PWUudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpPT0nSU1HJyllLnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaGVkPXRydWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3A7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoKHRhcmdldCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgZWxlTWFwc1snaW1nLWNvbnRyb2xlci1wcmUnXTo7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgZWxlTWFwc1snc2lkZWJhci1jb250cm9sZXItcHJlJ106ey8v5LiK5LiA5LiqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdFByZXZpb3VzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9wPXNlbGYuc2ltcGxlU2xpZGVTaG93KHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgZWxlTWFwc1snaW1nLWNvbnRyb2xlci1uZXh0J106OwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGVsZU1hcHNbJ3NpZGViYXItY29udHJvbGVyLW5leHQnXTp7Ly/kuIvkuIDkuKoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0TmV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcD1zZWxmLnNpbXBsZVNsaWRlU2hvdygpOwogICAgICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1vdXNlVXBIYW5kbGVyKGUpewogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJyxtb3VzZVVwSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGlmKG1hdGNoZWQpewogICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLG1vdXNlVXBIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LGZhbHNlKTsKCiAgICAgICAgICAgICAgICBlbGVNYXBzWydzaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyJ10uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGUpey8v54K55Ye757yp55Wl5Zu+5YiH5o2iCiAgICAgICAgICAgICAgICAgICAgaWYoZS5idXR0b24hPTApcmV0dXJuOy8v5bem6ZSuCiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldD1lLnRhcmdldDsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0UDsKICAgICAgICAgICAgICAgICAgICBpZighZGF0YXNldCh0YXJnZXQsJ3NyYycpICYmICh0YXJnZXRQPXRhcmdldC5wYXJlbnROb2RlKSAmJiAhZGF0YXNldCh0YXJnZXRQLCdzcmMnKSlyZXR1cm47CgogICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0KHRhcmdldFAgfHwgdGFyZ2V0LCBmYWxzZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9LGZhbHNlKTsKCiAgICAgICAgICAgICAgICAvL+eCueWHu+ivu+WPlumUmeivr+eahOWbvueJh+WNoOS9jeespumHjeaWsOivu+WPlgogICAgICAgICAgICAgICAgZWxlTWFwc1snaW1nX2Jyb2tlbiddLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBpZihzZWxmLmlzTG9hZGluZyl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0KHNlbGYuZXJyb3JTcGFuKTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5nZXRJbWcoc2VsZi5lcnJvclNwYW4pOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LGZhbHNlKTsKCiAgICAgICAgICAgICAgICBpZihwcmVmcy5nYWxsZXJ5LnZpZXdtb3JlRW5kbGVzcyB8fCBwcmVmcy5nYWxsZXJ5LnNjcm9sbEVuZEFuZExvYWQpewogICAgICAgICAgICAgICAgICAgIHZhciBpc1Njcm9sbGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGFkZFdoZWVsRXZlbnQoZWxlTWFwc1snbWF4aW1pemUtY29udGFpbmVyJ10sZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1Njcm9sbGluZykgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBpc1Njcm9sbGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTY3JvbGxpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzY3JvbGxDb249c2VsZi5lbGVNYXBzWydtYXhpbWl6ZS1jb250YWluZXInXS5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNjcm9sbFBlcmNlbnQ9c2Nyb2xsQ29uLnNjcm9sbFRvcCAvIChzY3JvbGxDb24uc2Nyb2xsSGVpZ2h0IC0gc2Nyb2xsQ29uLmNsaWVudEhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzY3JvbGxQZXJjZW50PjAuOCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZWZzLmdhbGxlcnkuc2Nyb2xsRW5kQW5kTG9hZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNjcm9sbFRvRW5kQW5kUmVsb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFzZWxmLmhhdmVNb3JlUGFnZSlyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRleHRTcGFuPXNlbGYuZWxlTWFwc1snaGVhZC1jb21tYW5kLW5leHRQYWdlJ10ucXVlcnlTZWxlY3Rvcigic3BhbiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRleHRTcGFuLmlubmVySFRNTD09aTE4bigibG9hZGluZyIpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0U3Bhbi5pbm5lckhUTUw9Y3JlYXRlSFRNTChpMThuKCJsb2FkaW5nIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY29tcGxldGVQYWdlcz1bXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2VBbGxSZWFkeT1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2VBY3Rpb24odHJ1ZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KCgogICAgICAgICAgICAgICAgc2VsZi5iYXRjaERsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTsKICAgICAgICAgICAgICAgIGxldCBiYXRjaERsQnRuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgICAgICAgICAgICBsZXQgY2FuY2VsQnRuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0QWxsQnRuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgICAgICAgICAgICBsZXQgaW52ZXJ0QnRuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgICAgICAgICAgICBsZXQgY29tcGFyZUJ0bj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICAgICAgICAgICAgbGV0IGNoZWNrQm94czsKICAgICAgICAgICAgICAgIGxldCBtYXhpbWl6ZUNvbnRhaW5lciA9IGVsZU1hcHNbJ21heGltaXplLWNvbnRhaW5lciddOwogICAgICAgICAgICAgICAgYmF0Y2hEbEJ0bi52YWx1ZT1pMThuKCJkb3dubG9hZCIpOwogICAgICAgICAgICAgICAgY2FuY2VsQnRuLnZhbHVlPWkxOG4oImNsb3NlQnRuIik7CiAgICAgICAgICAgICAgICBzZWxlY3RBbGxCdG4udmFsdWU9aTE4bigic2VsZWN0QWxsQnRuIik7CiAgICAgICAgICAgICAgICBpbnZlcnRCdG4udmFsdWU9aTE4bigiaW52ZXJ0QnRuIik7CiAgICAgICAgICAgICAgICBjb21wYXJlQnRuLnZhbHVlPWkxOG4oImNvbXBhcmVCdG4iKTsKICAgICAgICAgICAgICAgIGJhdGNoRGxCdG4udHlwZT0iYnV0dG9uIjsKICAgICAgICAgICAgICAgIGNhbmNlbEJ0bi50eXBlPSJidXR0b24iOwogICAgICAgICAgICAgICAgY2FuY2VsQnRuLmNsYXNzTmFtZT0ibmVlZC1jaGVja2VkIjsKICAgICAgICAgICAgICAgIHNlbGVjdEFsbEJ0bi50eXBlPSJidXR0b24iOwogICAgICAgICAgICAgICAgaW52ZXJ0QnRuLnR5cGU9ImJ1dHRvbiI7CiAgICAgICAgICAgICAgICBpbnZlcnRCdG4uY2xhc3NOYW1lPSJuZWVkLWNoZWNrZWQiOwogICAgICAgICAgICAgICAgY29tcGFyZUJ0bi50eXBlPSJidXR0b24iOwogICAgICAgICAgICAgICAgY29tcGFyZUJ0bi5jbGFzc05hbWUgPSAiY29tcGFyZUJ0biI7CiAgICAgICAgICAgICAgICBjb21wYXJlQnRuLm9uY2xpY2s9ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgY2hlY2tCb3hzPW1heGltaXplQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoIi5tYXhpbWl6ZUNoaWxkPmlucHV0OmNoZWNrZWQiKTsKICAgICAgICAgICAgICAgICAgICBpZihjaGVja0JveHMubGVuZ3RoPDIpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGxldCBpbWdTcmNzPVtdOwogICAgICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChjaGVja0JveHMsIGZ1bmN0aW9uKG5vZGUpewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29uSXRlbT1ub2RlLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbkl0ZW0uc3R5bGUuZGlzcGxheT09Im5vbmUiKXJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltZ1NyYz1jb25JdGVtLnF1ZXJ5U2VsZWN0b3IoImltZyIpLnNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3Jjcy5wdXNoKGltZ1NyYyk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgaWYoaW1nU3Jjcy5sZW5ndGg8MilyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgbGV0IG1haW5JbWc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICAgICAgICAgICAgICAgICAgbWFpbkltZy5zcmM9aW1nU3Jjcy5zaGlmdCgpOwogICAgICAgICAgICAgICAgICAgIGxldCBtYWluSW1nV2luPW5ldyBJbWdXaW5kb3dDKG1haW5JbWcpOwogICAgICAgICAgICAgICAgICAgIG1haW5JbWdXaW4uY29tcGFyZShpbWdTcmNzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBiYXRjaERsQnRuLm9uY2xpY2s9YXN5bmMgZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgY2hlY2tCb3hzPW1heGltaXplQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoIi5tYXhpbWl6ZUNoaWxkPmlucHV0OmNoZWNrZWQiKTsKICAgICAgICAgICAgICAgICAgICBpZihjaGVja0JveHMubGVuZ3RoPDEpY2hlY2tCb3hzPW1heGltaXplQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoIi5tYXhpbWl6ZUNoaWxkPmlucHV0Iik7CgogICAgICAgICAgICAgICAgICAgIHZhciBzYXZlUGFyYW1zID0gW10sc2F2ZUluZGV4PTA7CiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIGNoZWNrQm94cykgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29uSXRlbT1ub2RlLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbkl0ZW0uc3R5bGUuZGlzcGxheT09Im5vbmUiKXJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUluZGV4Kys7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uSXRlbS5kYXRhc2V0LnhocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZ2V0eGhyb3ZlckhhbmRsZXIgPSBlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uSXRlbS5yZW1vdmVFdmVudExpc3RlbmVyKCdnZXR4aHJvdmVyJywgZ2V0eGhyb3ZlckhhbmRsZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25JdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2dldHhocm92ZXInLCBnZXR4aHJvdmVySGFuZGxlcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uSXRlbS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnZ2V0eGhyJykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWdTcmM9Y29uSXRlbS5xdWVyeVNlbGVjdG9yKCJpbWciKS5kYXRhc2V0LnNyYyB8fCBjb25JdGVtLnF1ZXJ5U2VsZWN0b3IoImltZyIpLnNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpdGxlPW5vZGUubmV4dEVsZW1lbnRTaWJsaW5nLnRpdGxlOwogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZSA9IHRpdGxlLmluZGV4T2YoJ1xuJykgIT09IC0xID8gdGl0bGUuc3BsaXQoJ1xuJylbMF0gOiB0aXRsZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSB0aXRsZS5pbmRleE9mKCdodHRwJykgPT09IDAgfHwgdGl0bGUuaW5kZXhPZignZGF0YScpID09PSAwID8gJycgOiB0aXRsZTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNyY1NwbGl0OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1nU3JjLmluZGV4T2YoJ2RhdGEnKSA9PT0gMCkgc3JjU3BsaXQgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNTcGxpdD1pbWdTcmMgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSBnZXRSaWdodFNhdmVOYW1lKHNyY1NwbGl0LCB0aXRsZSwgcHJlZnMuc2F2ZU5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGljTmFtZSA9IChzYXZlSW5kZXggPCAxMCA/ICIwMCIgKyBzYXZlSW5kZXggOiAoc2F2ZUluZGV4IDwgMTAwID8gIjAiICsgc2F2ZUluZGV4IDogc2F2ZUluZGV4KSkgKyAoIXRpdGxlIHx8IHRpdGxlID09IGRvY3VtZW50LnRpdGxlID8gIiIgOiAiLSIgKyB0aXRsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVQYXJhbXMucHVzaChbaW1nU3JjLCBwaWNOYW1lXSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHNlbGYuYmF0Y2hEb3dubG9hZChzYXZlUGFyYW1zLCAoKT0+ewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dUaXBzKCJDb21wbGV0ZWQhIiwgMTAwMCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgY2FuY2VsQnRuLm9uY2xpY2s9ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgY2hlY2tCb3hzPW1heGltaXplQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoIi5tYXhpbWl6ZUNoaWxkPmlucHV0OmNoZWNrZWQiKTsKICAgICAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoY2hlY2tCb3hzLCBpPT57CiAgICAgICAgICAgICAgICAgICAgICAgIGkuY2hlY2tlZD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBtYXhpbWl6ZUNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCJjaGVja2VkIik7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgaW52ZXJ0QnRuLm9uY2xpY2s9ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgY2hlY2tCb3hzPW1heGltaXplQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoIi5tYXhpbWl6ZUNoaWxkPmlucHV0Iik7CiAgICAgICAgICAgICAgICAgICAgaWYoY2hlY2tCb3hzLmxlbmd0aDwxKXJldHVybjsKICAgICAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoY2hlY2tCb3hzLCBpPT57CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb25JdGVtPWkucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29uSXRlbS5zdHlsZS5kaXNwbGF5PT0ibm9uZSIpaS5jaGVja2VkPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGkuY2hlY2tlZD0haS5jaGVja2VkOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGNoZWNrQm94cz1tYXhpbWl6ZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCIubWF4aW1pemVDaGlsZD5pbnB1dDpjaGVja2VkIik7CiAgICAgICAgICAgICAgICAgICAgaWYoY2hlY2tCb3hzLmxlbmd0aD09MCl7CiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltaXplQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoImNoZWNrZWQiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgc2VsZWN0QWxsQnRuLm9uY2xpY2s9ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgY2hlY2tCb3hzPW1heGltaXplQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoIi5tYXhpbWl6ZUNoaWxkPmlucHV0Iik7CiAgICAgICAgICAgICAgICAgICAgaWYoY2hlY2tCb3hzLmxlbmd0aDwxKXJldHVybjsKICAgICAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoY2hlY2tCb3hzLCBpPT57CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb25JdGVtPWkucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29uSXRlbS5zdHlsZS5kaXNwbGF5PT0ibm9uZSIpaS5jaGVja2VkPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGkuY2hlY2tlZD10cnVlOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIG1heGltaXplQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoImNoZWNrZWQiKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBzZWxmLmJhdGNoRGwuYXBwZW5kQ2hpbGQoYmF0Y2hEbEJ0bik7CiAgICAgICAgICAgICAgICBzZWxmLmJhdGNoRGwuYXBwZW5kQ2hpbGQoY2FuY2VsQnRuKTsKICAgICAgICAgICAgICAgIHNlbGYuYmF0Y2hEbC5hcHBlbmRDaGlsZChzZWxlY3RBbGxCdG4pOwogICAgICAgICAgICAgICAgc2VsZi5iYXRjaERsLmFwcGVuZENoaWxkKGludmVydEJ0bik7CiAgICAgICAgICAgICAgICBzZWxmLmJhdGNoRGwuYXBwZW5kQ2hpbGQoY29tcGFyZUJ0bik7CiAgICAgICAgICAgICAgICBtYXhpbWl6ZUNvbnRhaW5lci5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHNlbGYuYmF0Y2hEbCk7CgogICAgICAgICAgICAgICAgZWxlTWFwc1snaGVhZCddLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbihlKXsvL+mhtuagj+S4iumdoueahOWRveS7pAogICAgICAgICAgICAgICAgICAgIGlmKGUuYnV0dG9uIT0wKXJldHVybjsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0PWUudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIGlmKGVsZU1hcHNbJ2hlYWQtY29tbWFuZC1jbG9zZSddPT10YXJnZXQpewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoZWxlTWFwc1snaGVhZC1jb21tYW5kLW5leHRQYWdlJ10uY29udGFpbnModGFyZ2V0KSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0U3Bhbj1lbGVNYXBzWydoZWFkLWNvbW1hbmQtbmV4dFBhZ2UnXS5xdWVyeVNlbGVjdG9yKCJzcGFuIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRleHRTcGFuLmlubmVySFRNTD09aTE4bigibG9hZGluZyIpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRTcGFuLmlubmVySFRNTD1jcmVhdGVIVE1MKGkxOG4oImxvYWRBbGwiKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFNwYW4uaW5uZXJIVE1MPWNyZWF0ZUhUTUwoaTE4bigibG9hZGluZyIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb21wbGV0ZVBhZ2VzPVtdOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2VBbGxSZWFkeT1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlQWN0aW9uKHRydWUpOwogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGVsZU1hcHNbJ2hlYWQtY29tbWFuZC1jb2xsZWN0J10uY29udGFpbnModGFyZ2V0KSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbGxlY3Rpb24uZmF2b3JpdGUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbi5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLmFkZCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGVsZU1hcHNbJ2hlYWQtY29tbWFuZC1leGl0LWNvbGxlY3Rpb24nXS5jb250YWlucyh0YXJnZXQpKXsKICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbi5leGl0KCk7CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoZWxlTWFwc1snaGVhZC1jb21tYW5kLXNsaWRlLXNob3cnXS5jb250YWlucyh0YXJnZXQpKXsKICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVTaG93LnN3aXRjaFN0YXR1cygpOwogICAgICAgICAgICAgICAgICAgICAgICBzbGlkZVNob3cuY2hlY2soKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIH0sZmFsc2UpOwoKCiAgICAgICAgICAgICAgICAvL+eCueWHu+i/mOWOn+OAggogICAgICAgICAgICAgICAgbWF4aW1pemVUcmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0PWUudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0PT10aGlzKXsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVzaXplSGFuZGxlcigpOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1pbmltaXplZD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSx0cnVlKTsKCgogICAgICAgICAgICAgICAgdGhpcy5fcmVzaXplSGFuZGxlcj10aGlzLnJlc2l6ZUhhbmRsZXIuYmluZCh0aGlzKTsKICAgICAgICAgICAgICAgIHRoaXMuX2tleURvd25MaXN0ZW5lcj10aGlzLmtleURvd25MaXN0ZW5lci5iaW5kKHRoaXMpOwogICAgICAgICAgICAgICAgdGhpcy5fa2V5VXBMaXN0ZW5lcj10aGlzLmtleVVwTGlzdGVuZXIuYmluZCh0aGlzKTsKCiAgICAgICAgICAgICAgICAvL+aPkuWFpeWKqOaAgeeUn+aIkOeahGNzc+aVsOaNruOAggogICAgICAgICAgICAgICAgX0dNX2FkZFN0eWxlKCcucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1iLWNvbnRhaW5lcnsnKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGlzSG9yaXpvbnRhbCA/ICd3aWR0aCcgOiAnaGVpZ2h0JykgKyAnOicgICsgKGlzSG9yaXpvbnRhbCA/ICB1bnNhZmVXaW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVNYXBzWydzaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyJ10pLmhlaWdodCA6IHVuc2FmZVdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZU1hcHNbJ3NpZGViYXItdGh1bWJuYWlscy1jb250YWluZXInXSkud2lkdGgpKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd9Jyk7CgogICAgICAgICAgICAgICAgdGhpcy5mb3JjZVJlcGFpbnRUaW1lcz0wOwoKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5PSdub25lJzsKCiAgICAgICAgICAgICAgICBsZXQgYWxsRGF0YSA9IG5ldyBNYXAoKTsKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCJkcm9wIiwgYXN5bmMgZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIHNlbGYuZWxlTWFwc1snaW1nLXBhcmVudCddLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAiIjsKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuc3R5bGUuZmlsdGVyID0gIiI7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVzID0gWy4uLmUuZGF0YVRyYW5zZmVyLml0ZW1zXS5tYXAoCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPT4gaXRlbS5nZXRBc0ZpbGVTeXN0ZW1IYW5kbGUoKQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBhc3luYyBmdW5jdGlvbiBoYW5kbGUoaXRlbXMsIGRpciA9ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGxldCBpdGVtIG9mIGl0ZW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5hbWUgPSBpdGVtLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhdGggPSBkaXIgKyAiLyIgKyBuYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbGxEYXRhLmhhcyhwYXRoKSkgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0ua2luZCA9PT0gImRpcmVjdG9yeSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsRGF0YS5zZXQocGF0aCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZShpdGVtLnZhbHVlcygpLCBwYXRoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0ua2luZCA9PT0gImZpbGUiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWxlID0gYXdhaXQgaXRlbS5nZXRGaWxlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbERhdGEuc2V0KHBhdGgsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lZGlhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZS50eXBlLmluZGV4T2YoImltYWdlIikgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZS50eXBlLmluZGV4T2YoImF1ZGlvIikgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA9ICJhdWRpbzoiICsgc3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGUudHlwZS5pbmRleE9mKCJ2aWRlbyIpID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYSA9IGNyZWF0ZVZpZGVvKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmMgPSAidmlkZW86IiArIHNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5zcmMgPSBzcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhLnRpdGxlID0gcGF0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogc3JjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZvcmNlJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1NyYzogc3JjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9BY3R1YWw6dHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBwYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nOiBtZWRpYQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRhdGEucHVzaChyZXN1bHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9hcHBlbmRUaHVtYlNwYW5zKFtyZXN1bHRdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlKGZpbGVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkVGh1bWIoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigiZHJhZ292ZXIiLCBlID0+IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigiZHJhZ2VudGVyIiwgZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5lbGVNYXBzWydpbWctcGFyZW50J10uc3R5bGUucG9pbnRlckV2ZW50cyA9ICJub25lIjsKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuc3R5bGUuZmlsdGVyID0gImNvbnRyYXN0KDAuNSkiOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigiZHJhZ2xlYXZlIiwgZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5lbGVNYXBzWydpbWctcGFyZW50J10uc3R5bGUucG9pbnRlckV2ZW50cyA9ICIiOwogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5maWx0ZXIgPSAiIjsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHRoaXMuc2hvd249ZmFsc2U7CgogICAgICAgICAgICAgICAgLy8g5oiR5re75Yqg55qE6YOo5YiGCiAgICAgICAgICAgICAgICB0aGlzLmluaXRUb2dnbGVCYXIoKTsKICAgICAgICAgICAgICAgIHRoaXMuaW5pdFpvb20oKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYWRkSW1hZ2VVcmxzOiBmdW5jdGlvbih1cmxzKSB7CiAgICAgICAgICAgICAgICBsZXQgaW1ncyA9IFtdLCBzZWxmID0gdGhpczsKICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbCh1cmxzLnNwbGl0KC9ccysvKSwgZnVuY3Rpb24oaSkgewogICAgICAgICAgICAgICAgICAgIHZhciB2YXJOdW0gPSAvXFtcZCtcLVxkK1xdLy5leGVjKGkpOwogICAgICAgICAgICAgICAgICAgIGlmICh2YXJOdW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyTnVtID0gdmFyTnVtWzBdLnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpbWdzLnB1c2goaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIG51bTEgPSAvXFsoXGQrKS8uZXhlYyh2YXJOdW0pWzFdLnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICB2YXIgbnVtMiA9IC8oXGQrKVxdLy5leGVjKHZhck51bSlbMV0udHJpbSgpOwogICAgICAgICAgICAgICAgICAgIHZhciBudW0xSW50ID0gcGFyc2VJbnQobnVtMSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG51bTJJbnQgPSBwYXJzZUludChudW0yKTsKICAgICAgICAgICAgICAgICAgICB2YXIgbnVtTGVuID0gbnVtMS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5lZWRBZGQgPSBudW0xLmNoYXJBdCgwKSA9PSAiMCI7CiAgICAgICAgICAgICAgICAgICAgaWYgKG51bTFJbnQgPj0gbnVtMkludCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSBudW0xSW50OyBqIDw9IG51bTJJbnQ7IGorKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsSW5kZXggPSBqLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZWVkQWRkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAodXJsSW5kZXgubGVuZ3RoIDwgbnVtTGVuKSB1cmxJbmRleCA9ICIwIiArIHVybEluZGV4OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJVcmwgPSBpLnJlcGxhY2UoL1xbXGQrXC1cZCtcXS8sIHVybEluZGV4KS50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGltZ3MucHVzaChjdXJVcmwpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaW1ncy5mb3JFYWNoKGltZ1NyYyA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGltZ1NyYy5pbmRleE9mKCIkIikgPT09IDAgfHwgaW1nU3JjLmluZGV4T2YoIu+/pSIpID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYWRkUGFnZUltYWdlcyhpbWdTcmMuc2xpY2UoMSkpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGxldCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gaW1nU3JjOwogICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogaW1nLnNyYywKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZvcmNlJywKICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3JjOiBpbWcuc3JjLAoKICAgICAgICAgICAgICAgICAgICAgICAgbm9BY3R1YWw6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJywKCiAgICAgICAgICAgICAgICAgICAgICAgIGltZzogaW1nCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzZWxmLmRhdGEucHVzaChyZXN1bHQpOwogICAgICAgICAgICAgICAgICAgIHNlbGYuX2FwcGVuZFRodW1iU3BhbnMoW3Jlc3VsdF0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBzZWxmLmxvYWRUaHVtYigpOwogICAgICAgICAgICAgICAgc2VsZi5jaGFuZ2VTaXplSW5wdXRSZXNldCgpOwogICAgICAgICAgICB9LAogICAgICAgICAgICByb3RhdGVCaWdJbWc6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmltZykgdGhpcy5pbWcuc3R5bGVbc3VwcG9ydC5jc3NUcmFuc2Zvcm1dID0gJ3JvdGF0ZSgnICsgKHRoaXMuZ2FsbGVyeVJvdGF0ZSB8fCAwKSArICdkZWcpJzsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2hvd1RpcHM6ZnVuY3Rpb24oY29udGVudCwgdGltZSl7CiAgICAgICAgICAgICAgICB2YXIgdGlwc1dvcmRzPXRoaXMuZWxlTWFwc1sidGlwc1dvcmRzIl07CiAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnQpIHsKICAgICAgICAgICAgICAgICAgICB0aXBzV29yZHMuc3R5bGUub3BhY2l0eSA9IDA7CiAgICAgICAgICAgICAgICAgICAgdGlwc1dvcmRzLmlubmVyVGV4dCA9ICIiOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRpcHNXb3Jkcy5zdHlsZS5vcGFjaXR5PTAuODsKICAgICAgICAgICAgICAgIHRpcHNXb3Jkcy5pbm5lclRleHQ9Y29udGVudDsKICAgICAgICAgICAgICAgIHRpcHNXb3Jkcy5zdHlsZS5tYXJnaW5MZWZ0PS10aXBzV29yZHMub2Zmc2V0V2lkdGgvMisicHgiOwogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGlwc1RpbWVvdXQpOwogICAgICAgICAgICAgICAgdGhpcy50aXBzVGltZW91dD1zZXRUaW1lb3V0KCgpPT57dGlwc1dvcmRzLnN0eWxlLm9wYWNpdHk9MH0sKHRpbWV8fDE1MDApKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2hvd0NvbXByZXNzUHJvZ3Jlc3M6ZnVuY3Rpb24obWV0YSl7CiAgICAgICAgICAgICAgICAvL2NvbnNvbGUuZGVidWcobWV0YSk7CiAgICAgICAgICAgICAgICB0aGlzLnNob3dUaXBzKHBhcnNlSW50KG1ldGEucGVyY2VudCkrIiUgQ29tcHJlc3MgIisobWV0YS5jdXJyZW50RmlsZXx8IiIpLCAxMDAwMDApOwogICAgICAgICAgICB9LAogICAgICAgICAgICBiYXRjaERvd25sb2FkOiBmdW5jdGlvbihzYXZlUGFyYW1zLCBjYWxsYmFjaykgewogICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICAgICAgaWYgKHByZWZzLmdhbGxlcnkuZG93bmxvYWRXaXRoWmlwKSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93VGlwcyhpMThuKCJnYWxsZXJ5RG93bmxvYWRXaXRoWmlwQWxlcnQiKSwgMTAwMDAwKTsKICAgICAgICAgICAgICAgICAgICB2YXIgemlwLCBkb3dubG9hZGVkID0gMCwgZXh0LCBwYWNrTmFtZSA9IGRvY3VtZW50LnRpdGxlOwogICAgICAgICAgICAgICAgICAgIGlmICh1bnNhZmVXaW5kb3cucHZjZXBQYWNrQWRkb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGFja05hbWUgKz0gIi4iICsgdW5zYWZlV2luZG93LnB2Y2VwUGFja0FkZG9uLmV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgemlwID0gbmV3IHVuc2FmZVdpbmRvdy5wdmNlcFBhY2tBZGRvbi5wYWNrKHBhY2tOYW1lKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCEhdW5zYWZlV2luZG93LnB2Y2VwaW1nMnBkZikgewogICAgICAgICAgICAgICAgICAgICAgICBwYWNrTmFtZSArPSAiLnBkZiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHppcCA9IG5ldyB1bnNhZmVXaW5kb3cucHZjZXBpbWcycGRmKHBhY2tOYW1lKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBwYWNrTmFtZSArPSAiLnppcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHppcCA9IG5ldyBKU1ppcCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgbGVuID0gc2F2ZVBhcmFtcy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZG93bmxvYWRPbmUoaW1nU3JjLCBpbWdOYW1lLCBvdmVyKXsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNyb3NIYW5kbGVyID0gaW1nU3JjID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybFRvQmxvYihpbWdTcmMsIChibG9iLCBleHQpPT57CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2IgJiYgYmxvYi5zaXplPjU4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWxlTmFtZSA9IGltZ05hbWUucmVwbGFjZSgvXC8vZywgIiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXh0KSBmaWxlTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1wuXHcrJC8sICIiKSArICIuIiArIGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemlwLmZpbGUoZmlsZU5hbWUsIGJsb2IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBjb25zb2xlLmRlYnVnKCJlcnJvcjogIitpbWdTcmMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkZWQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyICYmIG92ZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dUaXBzKCJEb3dubG9hZGluZyAiK2Rvd25sb2FkZWQrIi8iK2xlbiwgMTAwMDAwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZG93bmxvYWRlZCA9PSBsZW4pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dUaXBzKGBCZWdpbiBjb21wcmVzcyB0byAke3BhY2tOYW1lfS4uLmAsIDEwMDAwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHppcC5nZW5lcmF0ZUFzeW5jKHt0eXBlOiJibG9iIn0sIG1ldGE9PntzZWxmLnNob3dDb21wcmVzc1Byb2dyZXNzKG1ldGEpfSkudGhlbihmdW5jdGlvbihjb250ZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUFzKGNvbnRlbnQsIHBhY2tOYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2FudmFzICYmICgvXmRhdGE6Ly50ZXN0KGltZ1NyYykgfHwgaW1nU3JjLnNwbGl0KCIvIilbMl0gPT0gZG9jdW1lbnQuZG9tYWluKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxUb0Jsb2JXaXRoRmV0Y2goaW1nU3JjLCAoYmxvYiwgZXh0KT0+ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFibG9iKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Jvc0hhbmRsZXIoaW1nU3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dUaXBzKCJEb3dubG9hZGluZyAiKyhkb3dubG9hZGVkKzEpKyIvIitsZW4sIDEwMDAwMDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWxlTmFtZSA9IGltZ05hbWUucmVwbGFjZSgvXmRhdGE6LiovLCAiaW1nIikucmVwbGFjZSgvXC8vZywiIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4dCkgZmlsZU5hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKC9cLlx3KyQvLCAiIikgKyAiLiIgKyBleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemlwLmZpbGUoZmlsZU5hbWUsIGJsb2IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkZWQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyICYmIG92ZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkb3dubG9hZGVkID09IGxlbil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd1RpcHMoYEJlZ2luIGNvbXByZXNzIHRvICR7cGFja05hbWV9Li4uYCwgMTAwMDAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemlwLmdlbmVyYXRlQXN5bmMoe3R5cGU6ImJsb2IifSwgbWV0YT0+e3NlbGYuc2hvd0NvbXByZXNzUHJvZ3Jlc3MobWV0YSl9KS50aGVuKGZ1bmN0aW9uKGNvbnRlbnQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXZlQXMoY29udGVudCwgcGFja05hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcm9zSGFuZGxlcihpbWdTcmMpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKHByZWZzLmdhbGxlcnkuZG93bmxvYWRHYXAgPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdhaXRUb0Rvd25sb2FkT25lID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNhdmVQYXJhbSA9IHNhdmVQYXJhbXMgJiYgc2F2ZVBhcmFtcy5zaGlmdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2F2ZVBhcmFtKSBjbGVhckludGVydmFsKGRvd25JbnR2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGRvd25sb2FkT25lKHNhdmVQYXJhbVswXSwgc2F2ZVBhcmFtWzFdLCB3YWl0VG9Eb3dubG9hZE9uZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBwcmVmcy5nYWxsZXJ5LmRvd25sb2FkR2FwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRocmVhZE51bSA9IDEwOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZG93bkludHYgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhyZWFkTnVtLS0gPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGRvd25JbnR2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2F2ZVBhcmFtID0gc2F2ZVBhcmFtcyAmJiBzYXZlUGFyYW1zLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNhdmVQYXJhbSkgY2xlYXJJbnRlcnZhbChkb3duSW50dik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGRvd25sb2FkT25lKHNhdmVQYXJhbVswXSwgc2F2ZVBhcmFtWzFdLCB3YWl0VG9Eb3dubG9hZE9uZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHByZWZzLmdhbGxlcnkuZG93bmxvYWRHYXApOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTxsZW47IGkrKyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZE9uZShzYXZlUGFyYW1zW2ldWzBdLCBzYXZlUGFyYW1zW2ldWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbGV0IGRvd25sb2FkNVRpbWVzPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7aTw1O2krKyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzYXZlUGFyYW09c2F2ZVBhcmFtcy5zaGlmdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihzYXZlUGFyYW0pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRJbWcoc2F2ZVBhcmFtWzBdLCBzYXZlUGFyYW1bMV0sIHByZWZzLnNhdmVOYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYoc2F2ZVBhcmFtcy5sZW5ndGg+MCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkNVRpbWVzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sMTAwMCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGRvd25sb2FkNVRpbWVzKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNoYW5nZU1pblZpZXc6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHZhciBzaXplSW5wdXRIPXRoaXMuc2l6ZUlucHV0SDsKICAgICAgICAgICAgICAgIHZhciBzaXplSW5wdXRXPXRoaXMuc2l6ZUlucHV0VzsKICAgICAgICAgICAgICAgIHZhciBzaXplSW5wdXRIU3Bhbj10aGlzLmdhbGxlcnkucXVlcnlTZWxlY3RvcigiI21pbnNpemVIU3BhbiIpOwogICAgICAgICAgICAgICAgdmFyIHNpemVJbnB1dFdTcGFuPXRoaXMuZ2FsbGVyeS5xdWVyeVNlbGVjdG9yKCIjbWluc2l6ZVdTcGFuIik7CiAgICAgICAgICAgICAgICBzaXplSW5wdXRILnRpdGxlPSJtaW4gaGVpZ2h0OiAiK3NpemVJbnB1dEgudmFsdWUrInB4IjsKICAgICAgICAgICAgICAgIHNpemVJbnB1dEhTcGFuLmlubmVySFRNTD1jcmVhdGVIVE1MKCJIOiAiK01hdGguZmxvb3Ioc2l6ZUlucHV0SC52YWx1ZSkrInB4Iik7CiAgICAgICAgICAgICAgICBzaXplSW5wdXRXLnRpdGxlPSJtaW4gd2lkdGg6ICIrc2l6ZUlucHV0Vy52YWx1ZSsicHgiOwogICAgICAgICAgICAgICAgc2l6ZUlucHV0V1NwYW4uaW5uZXJIVE1MPWNyZWF0ZUhUTUwoIlc6ICIrTWF0aC5mbG9vcihzaXplSW5wdXRXLnZhbHVlKSsicHgiKTsKICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNhdmVEZWZhdWx0U2l6ZSk7CiAgICAgICAgICAgICAgICB2YXIgc2VsZj10aGlzOwogICAgICAgICAgICAgICAgdGhpcy5zYXZlRGVmYXVsdFNpemUgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBzZWxmLmN1ckRlZmF1bHRTaXplID0ge2g6IHNpemVJbnB1dEgudmFsdWUsIHc6IHNpemVJbnB1dFcudmFsdWV9OwogICAgICAgICAgICAgICAgICAgIHN0b3JhZ2Uuc2V0TGlzdEl0ZW0oIm1pblNpemUiLCBsb2NhdGlvbi5ob3N0bmFtZSwgc2VsZi5jdXJEZWZhdWx0U2l6ZSk7CiAgICAgICAgICAgICAgICB9LCAxMDAwKTsKCiAgICAgICAgICAgICAgICB2YXIgdmlld21vcmVTaG93ID0gdGhpcy5lbGVNYXBzWydzaWRlYmFyLXRvZ2dsZSddLnN0eWxlLnZpc2liaWxpdHkgPT0gJ2hpZGRlbic7CiAgICAgICAgICAgICAgICBpZih2aWV3bW9yZVNob3cpewogICAgICAgICAgICAgICAgICAgIHZhciBtYXhTaXplSD0wLG1pblNpemVIPTAsbWF4U2l6ZVc9MCxtaW5TaXplVz0wOwogICAgICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIubWF4aW1pemVDaGlsZD5pbWciKSxmdW5jdGlvbihpdGVtKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwYW5NYXJrPXNlbGYuX3NwYW5NYXJrUG9vbFtpdGVtLnNyY107CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNwYW5NYXJrICYmICFzcGFuTWFyay5kYXRhc2V0Lm5hdHVyYWxTaXplICYmIGl0ZW0ubmF0dXJhbFdpZHRoICYmIGl0ZW0ubmF0dXJhbEhlaWdodCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuTWFyay5kYXRhc2V0Lm5hdHVyYWxTaXplPUpTT04uc3RyaW5naWZ5KHt3Oml0ZW0ubmF0dXJhbFdpZHRoLGg6aXRlbS5uYXR1cmFsSGVpZ2h0fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQga2V5ID0gaXRlbS5uYXR1cmFsV2lkdGggKyAieCIgKyBpdGVtLm5hdHVyYWxIZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNpemVNYXBba2V5XSA9IChzZWxmLnNpemVNYXBba2V5XSB8fCAwKSArIDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5zaXplTWFwW2tleV0gPT09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmlubmVyVGV4dCA9IGtleTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSBpdGVtLm5hdHVyYWxXaWR0aCArICItIiArIGl0ZW0ubmF0dXJhbFdpZHRoICsgIngiICsgaXRlbS5uYXR1cmFsSGVpZ2h0ICsgIi0iICsgaXRlbS5uYXR1cmFsSGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGluU2l6ZS5hcHBlbmRDaGlsZChvcHRpb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFzZWxmLmZpbHRlckltYWdlKGl0ZW0ubmF0dXJhbFdpZHRoIHx8IGl0ZW0uc2l6ZVcsIGl0ZW0ubmF0dXJhbEhlaWdodCB8fCBpdGVtLnNpemVILCBpdGVtLnNyYykpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5wYXJlbnROb2RlLnN0eWxlLmRpc3BsYXk9Im5vbmUiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3Bhbk1hcmspc3Bhbk1hcmsuc3R5bGUuZGlzcGxheT0ibm9uZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5wYXJlbnROb2RlLnN0eWxlLmRpc3BsYXk9IiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzcGFuTWFyaylzcGFuTWFyay5zdHlsZS5kaXNwbGF5PSIiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLm5hdHVyYWxIZWlnaHQgJiYgaXRlbS5uYXR1cmFsV2lkdGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0ubmF0dXJhbEhlaWdodD5tYXhTaXplSCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTaXplSD1pdGVtLm5hdHVyYWxIZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpdGVtLm5hdHVyYWxIZWlnaHQ8bWluU2l6ZUggfHwgbWluU2l6ZUg9PTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluU2l6ZUg9aXRlbS5uYXR1cmFsSGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXRlbS5uYXR1cmFsV2lkdGg+bWF4U2l6ZVcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4U2l6ZVc9aXRlbS5uYXR1cmFsV2lkdGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpdGVtLm5hdHVyYWxXaWR0aDxtaW5TaXplVyB8fCBtaW5TaXplVz09MCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5TaXplVz1pdGVtLm5hdHVyYWxXaWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHNpemVJbnB1dEgubWF4PW1heFNpemVIOwogICAgICAgICAgICAgICAgICAgIHNpemVJbnB1dEgubWluPW1pblNpemVIOwogICAgICAgICAgICAgICAgICAgIHNpemVJbnB1dEgudGl0bGU9Im1pbiBoZWlnaHQ6ICIrc2l6ZUlucHV0SC52YWx1ZSsicHgiOwogICAgICAgICAgICAgICAgICAgIHNpemVJbnB1dEhTcGFuLmlubmVySFRNTD1jcmVhdGVIVE1MKCJIOiAiK01hdGguZmxvb3Ioc2l6ZUlucHV0SC52YWx1ZSkrInB4Iik7CgogICAgICAgICAgICAgICAgICAgIHNpemVJbnB1dFcubWF4PW1heFNpemVXOwogICAgICAgICAgICAgICAgICAgIHNpemVJbnB1dFcubWluPW1pblNpemVXOwogICAgICAgICAgICAgICAgICAgIHNpemVJbnB1dFcudGl0bGU9Im1pbiB3aWR0aDogIitzaXplSW5wdXRXLnZhbHVlKyJweCI7CiAgICAgICAgICAgICAgICAgICAgc2l6ZUlucHV0V1NwYW4uaW5uZXJIVE1MPWNyZWF0ZUhUTUwoIlc6ICIrTWF0aC5mbG9vcihzaXplSW5wdXRXLnZhbHVlKSsicHgiKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJyaWNrc0luc3RhbmNlLnBhY2soKTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWl0ZW0pcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3Bhbk1hcms9c2VsZi5fc3Bhbk1hcmtQb29sW2l0ZW0uc3JjXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3Bhbk1hcmspewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hdHVyYWxTaXplPXNwYW5NYXJrLmRhdGFzZXQubmF0dXJhbFNpemUsaXRlbVc9aXRlbS5zaXplVyxpdGVtSD1pdGVtLnNpemVIOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobmF0dXJhbFNpemUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdHVyYWxTaXplPUpTT04ucGFyc2UobmF0dXJhbFNpemUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1XPW5hdHVyYWxTaXplLnc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUg9bmF0dXJhbFNpemUuaDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpdGVtVz5zaXplSW5wdXRXLm1heClzaXplSW5wdXRXLm1heD1pdGVtVzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpdGVtSD5zaXplSW5wdXRILm1heClzaXplSW5wdXRILm1heD1pdGVtSDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKCFpdGVtLm5vQWN0dWFsKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2l0ZW1XPTk5OTk5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaXRlbUg9OTk5OTk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighc2VsZi5maWx0ZXJJbWFnZShpdGVtVywgaXRlbUgsIGl0ZW0uc3JjKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbk1hcmsuc3R5bGUuZGlzcGxheT0ibm9uZSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuTWFyay5zdHlsZS5kaXNwbGF5PSIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hUaHVtYlZpc2libGUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2hhbmdlU2l6ZUlucHV0UmVzZXQ6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHZhciBtYXhTaXplSD0wLG1pblNpemVIPTAsbWF4U2l6ZVc9MCxtaW5TaXplVz0wOwogICAgICAgICAgICAgICAgdmFyIHNpemVJbnB1dEg9dGhpcy5zaXplSW5wdXRIOwogICAgICAgICAgICAgICAgdmFyIHNpemVJbnB1dFc9dGhpcy5zaXplSW5wdXRXOwogICAgICAgICAgICAgICAgbGV0IHNlbGY9dGhpczsKICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICBpZighaXRlbSlyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1XPWl0ZW0uc2l6ZVcsaXRlbUg9aXRlbS5zaXplSDsKICAgICAgICAgICAgICAgICAgICB2YXIgc3Bhbk1hcms9c2VsZi5fc3Bhbk1hcmtQb29sW2l0ZW0uc3JjXTsKICAgICAgICAgICAgICAgICAgICBpZihzcGFuTWFyayl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYXR1cmFsU2l6ZT1zcGFuTWFyay5kYXRhc2V0Lm5hdHVyYWxTaXplOwogICAgICAgICAgICAgICAgICAgICAgICBpZihuYXR1cmFsU2l6ZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXR1cmFsU2l6ZT1KU09OLnBhcnNlKG5hdHVyYWxTaXplKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1XPW5hdHVyYWxTaXplLnc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtSD1uYXR1cmFsU2l6ZS5oOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKGl0ZW1IPm1heFNpemVIKQogICAgICAgICAgICAgICAgICAgICAgICBtYXhTaXplSD1pdGVtSDsKICAgICAgICAgICAgICAgICAgICBpZigoaXRlbUggPiAwICYmIGl0ZW1IIDwgbWluU2l6ZUgpIHx8IG1pblNpemVIPT0wKQogICAgICAgICAgICAgICAgICAgICAgICBtaW5TaXplSD1pdGVtSDsKICAgICAgICAgICAgICAgICAgICBpZihpdGVtVz5tYXhTaXplVykKICAgICAgICAgICAgICAgICAgICAgICAgbWF4U2l6ZVc9aXRlbVc7CiAgICAgICAgICAgICAgICAgICAgaWYoKGl0ZW1XID4gMCAmJiBpdGVtVyA8IG1pblNpemVXKSB8fCBtaW5TaXplVz09MCkKICAgICAgICAgICAgICAgICAgICAgICAgbWluU2l6ZVc9aXRlbVc7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHNpemVJbnB1dEgubWF4PW1heFNpemVIOwogICAgICAgICAgICAgICAgc2l6ZUlucHV0SC5taW49bWluU2l6ZUg7CiAgICAgICAgICAgICAgICBzaXplSW5wdXRXLm1heD1tYXhTaXplVzsKICAgICAgICAgICAgICAgIHNpemVJbnB1dFcubWluPW1pblNpemVXOwogICAgICAgICAgICAgICAgaWYgKHNlbGYuY3VyRGVmYXVsdFNpemUpIHsKICAgICAgICAgICAgICAgICAgICBzaXplSW5wdXRILnZhbHVlID0gc2VsZi5jdXJEZWZhdWx0U2l6ZS5oOwogICAgICAgICAgICAgICAgICAgIHNpemVJbnB1dFcudmFsdWUgPSBzZWxmLmN1ckRlZmF1bHRTaXplLnc7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHNpemVJbnB1dEgudmFsdWUgPSBwcmVmcy5nYWxsZXJ5LmRlZmF1bHRTaXplTGltaXQuaDsKICAgICAgICAgICAgICAgICAgICBzaXplSW5wdXRXLnZhbHVlID0gcHJlZnMuZ2FsbGVyeS5kZWZhdWx0U2l6ZUxpbWl0Lnc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzaXplSW5wdXRILnRpdGxlPSJtaW4gaGVpZ2h0OiAiK3NpemVJbnB1dEgudmFsdWUrInB4IjsKICAgICAgICAgICAgICAgIHZhciBzaXplSW5wdXRIU3Bhbj10aGlzLmdhbGxlcnkucXVlcnlTZWxlY3RvcigiI21pbnNpemVIU3BhbiIpOwogICAgICAgICAgICAgICAgc2l6ZUlucHV0SFNwYW4uaW5uZXJIVE1MPWNyZWF0ZUhUTUwoIkg6ICIrTWF0aC5mbG9vcihzaXplSW5wdXRILnZhbHVlKSsicHgiKTsKCiAgICAgICAgICAgICAgICBzaXplSW5wdXRXLnRpdGxlPSJtaW4gd2lkdGg6ICIrc2l6ZUlucHV0Vy52YWx1ZSsicHgiOwogICAgICAgICAgICAgICAgdmFyIHNpemVJbnB1dFdTcGFuPXRoaXMuZ2FsbGVyeS5xdWVyeVNlbGVjdG9yKCIjbWluc2l6ZVdTcGFuIik7CiAgICAgICAgICAgICAgICBzaXplSW5wdXRXU3Bhbi5pbm5lckhUTUw9Y3JlYXRlSFRNTCgiVzogIitNYXRoLmZsb29yKHNpemVJbnB1dFcudmFsdWUpKyJweCIpOwogICAgICAgICAgICAgICAgc2VsZi5sb2FkVGh1bWIoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaW5pdFRvZ2dsZUJhcjogZnVuY3Rpb24oKSB7ICAvLyDmmK/lkKbmmL7npLrliIfmjaIgc2lkZWJhciDmjInpkq4KICAgICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAgKiBUT0RP77ya5Lu/6YCg5LiL6Z2i55qE6ZO+5o6l6YeN5paw5pS56YCg6L+H77yfCiAgICAgICAgICAgICAgICAqIGh0dHA6Ly9pbWFnZS5iYWlkdS5jb20vZGV0YWlsL25ld2luZGV4P2NvbD0lRTglQjUlODQlRTglQUUlQUYmdGFnPSVFNCVCRCU5MyVFOCU4MiVCMiZwbj0wJnBpZD01MTIzNjYyODIxNjg4MTQyNDc4JmFpZD0mdXNlcl9pZD0xMDA4NiZzZXRpZD0tMSZzb3J0PTAmbmV3c1BuPTQmc3Rhcj0mZnI9aG90d29yZCZmcm9tPTEKICAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgICBpZiAocHJlZnMuZ2FsbGVyeS5zaWRlYmFyVG9nZ2xlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRvZ2dsZUJhciA9IHRoaXMuZWxlTWFwc1snc2lkZWJhci10b2dnbGUnXTsKICAgICAgICAgICAgICAgICAgICB0b2dnbGVCYXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgICAgICAgICAgICAgICAgICB0b2dnbGVCYXIuc3R5bGUuaGVpZ2h0ID0gJzEycHgnOwogICAgICAgICAgICAgICAgICAgIHRvZ2dsZUJhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuc2hvd0hpZGVCb3R0b20uYmluZCh0aGlzKSwgZmFsc2UpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgdmlld21vcmVCYXIgPSB0aGlzLmVsZU1hcHNbJ3NpZGViYXItdmlld21vcmUnXTsKICAgICAgICAgICAgICAgICAgICB2aWV3bW9yZUJhci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgICAgICB2aWV3bW9yZUJhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMubWF4aW1pemVTaWRlYmFyLmJpbmQodGhpcyksIGZhbHNlKTsKCiAgICAgICAgICAgICAgICAgICAgLy8g6aG26YOo5ZyG6KeSCiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwcmVmcy5nYWxsZXJ5LnNpZGViYXJQb3NpdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdib3R0b20nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQmFyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc4cHggOHB4IDAgMCc7ICAvLyDlt6bkuIrjgIHlj7PkuIrjgIHlj7PkuIvjgIHlt6bkuIsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0b3AnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQmFyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICcwIDAgOHB4IDhweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVCYXIuc3R5bGUuaGVpZ2h0ID0gJzYwcHgnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQmFyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICcwIDhweCA4cHggMCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQmFyLnN0eWxlLmhlaWdodCA9ICc2MHB4JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUJhci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnOHB4IDAgMCA4cHgnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBjbG9zZVZpZXdNb3JlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciB0b2dnbGVCYXIgPSB0aGlzLmVsZU1hcHNbJ3NpZGViYXItdG9nZ2xlJ10sCiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQmFyQ29udGVudCA9IHRoaXMuZWxlTWFwc1snc2lkZWJhci10b2dnbGUtY29udGVudCddLAogICAgICAgICAgICAgICAgICAgIGltZ0NvbiA9IHRoaXMuZWxlTWFwc1snaW1nLWNvbnRhaW5lciddLAogICAgICAgICAgICAgICAgICAgIHZpZXdtb3JlQmFyID0gdGhpcy5lbGVNYXBzWydzaWRlYmFyLXZpZXdtb3JlLWNvbnRlbnQnXSwKICAgICAgICAgICAgICAgICAgICBpbWdQcmUgPSB0aGlzLmVsZU1hcHNbJ2ltZy1jb250cm9sZXItcHJlJ10sCiAgICAgICAgICAgICAgICAgICAgaW1nTmV4dCA9IHRoaXMuZWxlTWFwc1snaW1nLWNvbnRyb2xlci1uZXh0J10sCiAgICAgICAgICAgICAgICAgICAgYWxyZWFkeVNob3cgPSB0b2dnbGVCYXIuc3R5bGUudmlzaWJpbGl0eSA9PSAnaGlkZGVuJzsKICAgICAgICAgICAgICAgIGlmKCFhbHJlYWR5U2hvdykgcmV0dXJuOwogICAgICAgICAgICAgICAgdmFyIHNpZGViYXJDb250YWluZXIgPSB0aGlzLmVsZU1hcHNbJ3NpZGViYXItY29udGFpbmVyJ107CiAgICAgICAgICAgICAgICB2YXIgbWF4aW1pemVDb250YWluZXIgPSB0aGlzLmVsZU1hcHNbJ21heGltaXplLWNvbnRhaW5lciddOwogICAgICAgICAgICAgICAgdmFyIHNpZGViYXJQb3NpdGlvbiA9IHByZWZzLmdhbGxlcnkuc2lkZWJhclBvc2l0aW9uLAogICAgICAgICAgICAgICAgICAgIGNhcGl0YWxpemUgPSBmdW5jdGlvbihzdHJpbmcpIHsgLy8g5bCG5a2X56ym5Liy5Lit5q+P5Liq5Y2V6K+N6aaW5a2X5q+N5aSn5YaZCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3b3JkcyA9IHN0cmluZy5zcGxpdCgiICIpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdvcmRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3Jkc1tpXSA9IHdvcmRzW2ldLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgd29yZHNbaV0uc2xpY2UoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmRzLmpvaW4oIiAiKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgbWF4aW1pemVDb250YWluZXIuc3R5bGUubWluSGVpZ2h0ID0gMDsKICAgICAgICAgICAgICAgIG1heGltaXplQ29udGFpbmVyLnBhcmVudE5vZGUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgICAgICAgIGlmKHRoaXMuaGlkZUJvZHlTdHlsZS5wYXJlbnROb2RlKQogICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZUJvZHlTdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuaGlkZUJvZHlTdHlsZSk7CiAgICAgICAgICAgICAgICBpbWdQcmUuc3R5bGUudmlzaWJpbGl0eSA9IGltZ05leHQuc3R5bGUudmlzaWJpbGl0eSA9IHRvZ2dsZUJhci5zdHlsZS52aXNpYmlsaXR5ID0gc2lkZWJhckNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnOwogICAgICAgICAgICAgICAgaW1nQ29uLnN0eWxlWydib3JkZXInICsgY2FwaXRhbGl6ZShzaWRlYmFyUG9zaXRpb24pXSA9IHByZWZzLmdhbGxlcnkuc2lkZWJhclNpemUgKyAncHggc29saWQgdHJhbnNwYXJlbnQnOwogICAgICAgICAgICAgICAgdG9nZ2xlQmFyLnN0eWxlW3NpZGViYXJQb3NpdGlvbl0gPSAnLTNweCc7CiAgICAgICAgICAgICAgICB3aGlsZSAobWF4aW1pemVDb250YWluZXIuZmlyc3RDaGlsZCkgewogICAgICAgICAgICAgICAgICAgIG1heGltaXplQ29udGFpbmVyLnJlbW92ZUNoaWxkKG1heGltaXplQ29udGFpbmVyLmZpcnN0Q2hpbGQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmlld21vcmVCYXIuaW5uZXJIVE1MID0gY3JlYXRlSFRNTCgn4pyaJyk7CiAgICAgICAgICAgICAgICB2aWV3bW9yZUJhci5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoInNob3dtb3JlIik7CiAgICAgICAgICAgICAgICAvL3ZpZXdtb3JlQmFyLnBhcmVudE5vZGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiMwMDAwMDAiOwoKICAgICAgICAgICAgICAgIHRvZ2dsZUJhckNvbnRlbnQuaW5uZXJIVE1MID0gY3JlYXRlSFRNTCgn4pa8Jyk7CiAgICAgICAgICAgICAgICAvL3RoaXMuY2hhbmdlU2l6ZUlucHV0UmVzZXQoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2VsZWN0Vmlld21vcmU6IGZ1bmN0aW9uKGltZ1NwYW4sIHNyYykgewogICAgICAgICAgICAgICAgaWYodGhpcy5jdXJJbWdTcGFuKXRoaXMuY3VySW1nU3Bhbi5jbGFzc0xpc3QucmVtb3ZlKCJzZWxlY3RlZCIpOwogICAgICAgICAgICAgICAgaW1nU3Bhbi5jbGFzc0xpc3QuYWRkKCJzZWxlY3RlZCIpOwogICAgICAgICAgICAgICAgdGhpcy5jdXJJbWdTcGFuPWltZ1NwYW47CiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMuX3NwYW5NYXJrUG9vbFtzcmNdOwogICAgICAgICAgICAgICAgaWYobm9kZSl0aGlzLnNlbGVjdChub2RlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYWRkRGxTcGFuOiBmdW5jdGlvbihpbWcsIGltZ1NwYW4sIGN1ck5vZGUsIGNsaWNrQ2IpIHsKICAgICAgICAgICAgICAgIHZhciBtYXhpbWl6ZUNvbnRhaW5lciA9IHRoaXMuZWxlTWFwc1snbWF4aW1pemUtY29udGFpbmVyJ107CiAgICAgICAgICAgICAgICB2YXIgZGxTcGFuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTsKICAgICAgICAgICAgICAgIGRsU3Bhbi5jbGFzc05hbWU9InB2LWJvdHRvbS1iYW5uZXIiOwogICAgICAgICAgICAgICAgZGxTcGFuLmlubmVySFRNTD1jcmVhdGVIVE1MKHByZWZzLmljb25zLmRvd25sb2FkU3ZnQnRuKycgJytpMThuKCJkb3dubG9hZCIpKTsKICAgICAgICAgICAgICAgIGRsU3Bhbi5zcmM9Y3VyTm9kZS5kYXRhc2V0LnNyYzsKICAgICAgICAgICAgICAgIGRsU3Bhbi50aXRsZT1jdXJOb2RlLnRpdGxlfHxkb2N1bWVudC50aXRsZTsKICAgICAgICAgICAgICAgIGRsU3Bhbi5vbmNsaWNrPWNsaWNrQ2I7CiAgICAgICAgICAgICAgICB2YXIgdG9wUD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7CiAgICAgICAgICAgICAgICB0b3BQLmNsYXNzTmFtZT0icHYtdG9wLWJhbm5lciI7CiAgICAgICAgICAgICAgICB0b3BQLmlubmVySFRNTD1jcmVhdGVIVE1MKGltZy5uYXR1cmFsV2lkdGgrJyB4ICcraW1nLm5hdHVyYWxIZWlnaHQpOwogICAgICAgICAgICAgICAgdG9wUC50aXRsZT1kbFNwYW4udGl0bGU7CiAgICAgICAgICAgICAgICB2YXIgY2hlY2tCb3g9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgICAgICAgICAgIGNoZWNrQm94LnR5cGU9ImNoZWNrYm94IjsKICAgICAgICAgICAgICAgIGxldCBzZWxmPXRoaXM7CiAgICAgICAgICAgICAgICBjaGVja0JveC5vbmNsaWNrPWZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIGxldCBjaGVja0JveHM9bWF4aW1pemVDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgiLm1heGltaXplQ2hpbGQ+aW5wdXQ6Y2hlY2tlZCIpOwogICAgICAgICAgICAgICAgICAgIG1heGltaXplQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoImNhbkNvbXBhcmUiKTsKICAgICAgICAgICAgICAgICAgICBpZihjaGVja0JveHMubGVuZ3RoPjApewogICAgICAgICAgICAgICAgICAgICAgICBtYXhpbWl6ZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJjaGVja2VkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja0JveHMubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW1pemVDb250YWluZXIuY2xhc3NMaXN0LmFkZCgiY2FuQ29tcGFyZSIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltaXplQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoImNoZWNrZWQiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0b3BQLm9uY2xpY2s9ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICBjaGVja0JveC5jbGljaygpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGltZ1NwYW4uYXBwZW5kQ2hpbGQodG9wUCk7CiAgICAgICAgICAgICAgICBpbWdTcGFuLmluc2VydEJlZm9yZShjaGVja0JveCwgaW1nU3Bhbi5maXJzdENoaWxkKTsKICAgICAgICAgICAgICAgIGltZ1NwYW4uYXBwZW5kQ2hpbGQoZGxTcGFuKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYWRkVmlld21vcmVJdGVtOiBmdW5jdGlvbihub2RlcykgewogICAgICAgICAgICAgICAgdmFyIGFscmVhZHlTaG93ID0gdGhpcy5lbGVNYXBzWydzaWRlYmFyLXRvZ2dsZSddLnN0eWxlLnZpc2liaWxpdHkgPT0gJ2hpZGRlbic7CiAgICAgICAgICAgICAgICBpZighYWxyZWFkeVNob3cpcmV0dXJuOwogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgIHZhciBtYXhpbWl6ZUNvbnRhaW5lciA9IHRoaXMuZWxlTWFwc1snbWF4aW1pemUtY29udGFpbmVyJ107CiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwobm9kZXMsIGZ1bmN0aW9uKG5vZGUpewogICAgICAgICAgICAgICAgICAgIHZhciBub2RlU3R5bGUgPSB1bnNhZmVXaW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTsKICAgICAgICAgICAgICAgICAgICBsZXQgY3VyTm9kZSA9IG5vZGU7CiAgICAgICAgICAgICAgICAgICAgbGV0IGltZ1NwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGVTdHlsZS5kaXNwbGF5ID09ICJub25lIikgaW1nU3Bhbi5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICAgICAgICAgIGxldCBwb3B1cEltZ1dpbiA9IChpKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWd3aW49bmV3IEltZ1dpbmRvd0MoaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHByZWZzLmltZ1dpbmRvdy5vdmVybGF5ZXIuc2hvd24pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nd2luLmJsdXIodHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmN1ckltZ1dpbj1pbWd3aW47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmN1ckltZ1NwYW49aW1nU3BhbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFzZWxmLnNjcm9sbEluaXQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2Nyb2xsSW5pdD10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3aGVlbEhhbmRsZXI9ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlbGYuY2FuU2Nyb2xsICYmIHNlbGYuY3VySW1nV2luICYmICFzZWxmLmN1ckltZ1dpbi5yZW1vdmVkICYmICFzZWxmLmN1ckltZ1dpbi5mb2N1c2VkKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2FuU2Nyb2xsPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldEltZ1NwYW49c2VsZi5jdXJJbWdTcGFuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUodGFyZ2V0SW1nU3Bhbil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SW1nU3Bhbj1lLmRlbHRhWTwwP3RhcmdldEltZ1NwYW4ucHJldmlvdXNFbGVtZW50U2libGluZzp0YXJnZXRJbWdTcGFuLm5leHRFbGVtZW50U2libGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0YXJnZXRJbWdTcGFuICYmIHRhcmdldEltZ1NwYW4uc3R5bGUuZGlzcGxheSE9Im5vbmUiICYmIHRhcmdldEltZ1NwYW4uY2xpZW50V2lkdGg+MSlicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldEltZ1NwYW4pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWdOb2RlPXRhcmdldEltZ1NwYW4ucXVlcnlTZWxlY3RvcigiaW1nIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jdXJJbWdXaW4ucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1ckltZ0VsZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJbWdFbGUuc3JjPWltZ05vZGUuZGF0YXNldC5zcmN8fGltZ05vZGUuc3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWd3aW49bmV3IEltZ1dpbmRvd0MoY3VySW1nRWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWd3aW4uYmx1cih0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmN1ckltZ1dpbj1pbWd3aW47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RWaWV3bW9yZSh0YXJnZXRJbWdTcGFuLCBpbWdOb2RlLnNyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SW1nU3Bhbi5zY3JvbGxJbnRvVmlldyh7YmVoYXZpb3I6ICJzbW9vdGgiLCBibG9jazogImNlbnRlciIsIGlubGluZTogIm5lYXJlc3QifSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7dGFyZ2V0SW1nU3Bhbi5zY3JvbGxJbnRvVmlldyh7YmxvY2s6ICJjZW50ZXIiLCBpbmxpbmU6ICJuZWFyZXN0In0pfSwgMzAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhblNjcm9sbD10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYW5TY3JvbGw9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkV2hlZWxFdmVudChnZXRCb2R5KGRvY3VtZW50KSx3aGVlbEhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGltZ1NwYW4uY2xhc3NOYW1lID0gIm1heGltaXplQ2hpbGQiOwogICAgICAgICAgICAgICAgICAgIGxldCBpbm5lckhUTUwgPSAiIjsKICAgICAgICAgICAgICAgICAgICBsZXQgdGh1bWJTcmMgPSBkYXRhc2V0KG5vZGUsICd0aHVtYlNyYycpOwogICAgICAgICAgICAgICAgICAgIGxldCBtb2RlID0gbWF0Y2hlZFJ1bGUuZ2V0TW9kZSh0aHVtYlNyYyk7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInZpZGVvIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleHRyYSA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRodW1iU3JjLmluZGV4T2YoJy5ta3YnKSAhPT0gLTEpIGV4dHJhID0gJ3R5cGU9InZpZGVvL21wNCInOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGh1bWJTcmMuaW5kZXhPZignLm0zdTgnKSAhPT0gLTEpIGV4dHJhID0gJ3R5cGU9ImFwcGxpY2F0aW9uL3ZuZC5hcHBsZS5tcGVndXJsIic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbm5lckhUTUwgPSAnPHZpZGVvIGRhdGEtc3JjPSInICsgZGF0YXNldChub2RlLCAnc3JjJykgKyAnIiBtdXRlZCBjb250cm9scyBsb29wIHNyYz0iJyArIHRodW1iU3JjLnJlcGxhY2UoL152aWRlbzovLCAiIikgKyAnIiAnICsgZXh0cmEgKyAnID48L3ZpZGVvPic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiYXVkaW8iOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJIVE1MID0gJzxpbWcgZGF0YS1zcmM9IicgKyBkYXRhc2V0KG5vZGUsICdzcmMnKSArICciIHNyYz0iJyArIHByZWZzLmljb25zLnZpZGVvICsgJyIgLz4nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbm5lckhUTUwgPSAnPGltZyBkYXRhLXNyYz0iJyArIGRhdGFzZXQobm9kZSwgJ3NyYycpICsgJyIgc3JjPSInICsgdGh1bWJTcmMgKyAnIiAvPic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaW1nU3Bhbi5pbm5lckhUTUwgPSBjcmVhdGVIVE1MKGlubmVySFRNTCk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGltZz1pbWdTcGFuLnF1ZXJ5U2VsZWN0b3IoImltZyx2aWRlbyIpOwogICAgICAgICAgICAgICAgICAgIGxldCB4aHIgPSBkYXRhc2V0KG5vZGUsICd4aHInKSAhPT0gJ3N0b3AnICYmIHNlbGYuZ2V0UHJvcEJ5U3Bhbk1hcmsobm9kZSwgInhociIpOwogICAgICAgICAgICAgICAgICAgIGxldCBnZXRYaHIgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHhockVycm9yID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNldChub2RlLCAneGhyJywgJ3N0b3AnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0KG5vZGUsICdzcmMnLCBkYXRhc2V0KG5vZGUsICd0aHVtYlNyYycpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhockxvYWQubG9hZCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBjdXJOb2RlLmRhdGFzZXQuc3JjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhocjogeGhyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiOiBmdW5jdGlvbihpbWdTcmMsIGltZ1NyY3MsIGNhcHRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltZ1NyYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNldChub2RlLCAnc3JjJywgaW1nU3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXQobm9kZSwgJ3hocicsICdzdG9wJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FwdGlvbikgZGF0YXNldChub2RlLCAnZGVzY3JpcHRpb24nLCBjYXB0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZy5kYXRhc2V0LnNyYyA9IGltZ1NyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoaW1nU3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhockVycm9yKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uZXJyb3I6IHhockVycm9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGltZ1NwYW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignZ2V0eGhyJywgZ2V0WGhySGFuZGxlcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBpbWdTcGFuLmRhdGFzZXQueGhyOwogICAgICAgICAgICAgICAgICAgICAgICBpbWdTcGFuLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdnZXR4aHJvdmVyJykpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgbGV0IGdldFhockhhbmRsZXIgPSBlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0WGhyKCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBpZiAoeGhyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGltZ1NwYW4uZGF0YXNldC54aHIgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBpbWdTcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2dldHhocicsIGdldFhockhhbmRsZXIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpbWdTcGFuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgYXN5bmMgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0Vmlld21vcmUoaW1nU3BhbiwgY3VyTm9kZS5kYXRhc2V0LnNyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsb2FkRXJyb3IgPSBlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvXmJsb2I6Ly50ZXN0KG1lZGlhLnNyYykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuc3JjID0gY3VyTm9kZS5kYXRhc2V0LnRodW1iU3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ck5vZGUuZGF0YXNldC5zcmMgPSBjdXJOb2RlLmRhdGFzZXQudGh1bWJTcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBJbWdXaW4oaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9HTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogZGF0YXNldChub2RlLCAnc3JjJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChyZXNwb25zZS5yZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5zcmMgPSBibG9iVXJsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyTm9kZS5kYXRhc2V0LnNyYyA9IGN1ck5vZGUuZGF0YXNldC50aHVtYlNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwSW1nV2luKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVsZWFzZUJsb2IgPSAoKSA9PiBVUkwucmV2b2tlT2JqZWN0VVJMKGJsb2JVcmwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHJlbGVhc2VCbG9iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25lcnJvcjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5zcmMgPSBjdXJOb2RlLmRhdGFzZXQudGh1bWJTcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLmRhdGFzZXQuc3JjID0gY3VyTm9kZS5kYXRhc2V0LnRodW1iU3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBJbWdXaW4oaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxvYWRJbWcgPSBhc3luYygpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd1RpcHMoIkxvYWRpbmcgaW1hZ2UuLi4iKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1nU3JjID0gZGF0YXNldChub2RlLCAnc3JjJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbW9kZSA9IG1hdGNoZWRSdWxlLmdldE1vZGUoaW1nU3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZWRpYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsb2FkZWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5wbGF5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93VGlwcygiIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBJbWdXaW4odGhpcyB8fCBtZWRpYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWEucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZGVkZGF0YScsIGxvYWRlZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJ2aWRlbyI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhID0gY3JlYXRlVmlkZW8oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWEuc3R5bGUud2lkdGggPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5zdHlsZS5oZWlnaHQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5jb250cm9scyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhLmxvb3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5hdXRvcGxheSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhLnZvbHVtZSA9IG1hdGNoZWRSdWxlLm11dGUgPyAwIDogMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3JjID0gaW1nU3JjLnJlcGxhY2UoL152aWRlbzovLCAiIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWdTcmMuaW5kZXhPZignLm1rdicpICE9PSAtMSkgbWVkaWEudHlwZSA9ICd2aWRlby9tcDQnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpbWdTcmMuaW5kZXhPZignLm0zdTgnKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgaW5pdFZpZGVvanMobWVkaWEsIGltZ1NyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3JjID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIG9yIGluaXRpYWxpemUgVmlkZW8uanMgcGxheWVyOicsIGVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJhdWRpbyI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWEuY29udHJvbHMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5hdXRvcGxheSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhLnZvbHVtZSA9IG1hdGNoZWRSdWxlLm11dGUgPyAwIDogMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3JjID0gaW1nU3JjLnJlcGxhY2UoL15hdWRpbzovLCAiIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lZGlhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltZ1NyYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5zcmMgPSBpbWdTcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZGRhdGEnLCBsb2FkZWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5sb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdSZWFkeShpbWdTcmMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHk6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93VGlwcygiIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cEltZ1dpbih0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoL15ibG9iOi8udGVzdChpbWdTcmMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93VGlwcygiIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZEVycm9yKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vZGUgPT0gImltYWdlIiB8fCBtb2RlID09ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX0dNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBpbWdTcmMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UucmVzcG9uc2UgJiYgcmVzcG9uc2UucmVzcG9uc2UudHlwZSA9PSAidGV4dC9odG1sIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd1RpcHMoIiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRFcnJvcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2JVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHJlc3BvbnNlLnJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd1RpcHMoIiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBJbWdXaW4oaW1nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbGVhc2VCbG9iID0gKCkgPT4gVVJMLnJldm9rZU9iamVjdFVSTChibG9iVXJsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCByZWxlYXNlQmxvYik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93VGlwcygiIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkRXJyb3IoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dUaXBzKCIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkRXJyb3IoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgeGhyID0gZGF0YXNldChub2RlLCAneGhyJykgIT09ICdzdG9wJyAmJiBzZWxmLmdldFByb3BCeVNwYW5NYXJrKG5vZGUsICJ4aHIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHhocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93VGlwcygiU2VuZGluZyByZXF1ZXN0Li4uIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1nU3JjID0gYXdhaXQgZ2V0WGhyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1nU3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZEltZygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkRXJyb3IoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1NwYW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignZ2V0eGhyJywgZ2V0WGhySGFuZGxlcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgaW1nU3Bhbi5kYXRhc2V0LnhocjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBsb2FkSW1nKCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGN1clNyYz1jdXJOb2RlLmRhdGFzZXQuc3JjOwogICAgICAgICAgICAgICAgICAgIGxldCBkZWZhdWx0RGw9KCk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGREbFNwYW4oaW1nLCBpbWdTcGFuLCBjdXJOb2RlLCBlPT57CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRJbWcoY3VyTm9kZS5kYXRhc2V0LnNyYywgY3VyTm9kZS50aXRsZSwgcHJlZnMuc2F2ZU5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgaWYoY3VyU3JjLmluZGV4T2YoImRhdGEiKT09PTApewogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0RGwoKTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5lZWRQYWNrID0gIWltZy5jb21wbGV0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgaW1nUmVhZHkoaW1nLHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWR5OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVlZFBhY2sgJiYgc2VsZi5icmlja3NJbnN0YW5jZS5wYWNrKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW1nLndpZHRoPj04OCAmJiBpbWcuaGVpZ2h0Pj04OCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYWRkRGxTcGFuKGltZywgaW1nU3BhbiwgY3VyTm9kZSwgZT0+ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkSW1nKGN1ck5vZGUuZGF0YXNldC5zcmMsIGN1ck5vZGUudGl0bGUsIHByZWZzLnNhdmVOYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBtYXhpbWl6ZUNvbnRhaW5lci5hcHBlbmRDaGlsZChpbWdTcGFuKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICBtYXhpbWl6ZVNpZGViYXI6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIHRvZ2dsZUJhciA9IHRoaXMuZWxlTWFwc1snc2lkZWJhci10b2dnbGUnXSwKICAgICAgICAgICAgICAgICAgICBpbWdDb24gPSB0aGlzLmVsZU1hcHNbJ2ltZy1jb250YWluZXInXSwKICAgICAgICAgICAgICAgICAgICB2aWV3bW9yZUJhciA9IHRoaXMuZWxlTWFwc1snc2lkZWJhci12aWV3bW9yZS1jb250ZW50J10sCiAgICAgICAgICAgICAgICAgICAgaW1nUHJlID0gdGhpcy5lbGVNYXBzWydpbWctY29udHJvbGVyLXByZSddLAogICAgICAgICAgICAgICAgICAgIGltZ05leHQgPSB0aGlzLmVsZU1hcHNbJ2ltZy1jb250cm9sZXItbmV4dCddLAogICAgICAgICAgICAgICAgICAgIGFscmVhZHlTaG93ID0gdG9nZ2xlQmFyLnN0eWxlLnZpc2liaWxpdHkgPT0gJ2hpZGRlbic7CgogICAgICAgICAgICAgICAgdmFyIHNpZGViYXJDb250YWluZXIgPSB0aGlzLmVsZU1hcHNbJ3NpZGViYXItY29udGFpbmVyJ10sCiAgICAgICAgICAgICAgICAgICAgaXNIaWRkZW4gPSBzaWRlYmFyQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPT0gJ2hpZGRlbic7CiAgICAgICAgICAgICAgICBpZiAoaXNIaWRkZW4pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dIaWRlQm90dG9tKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgbWF4aW1pemVDb250YWluZXIgPSB0aGlzLmVsZU1hcHNbJ21heGltaXplLWNvbnRhaW5lciddOwogICAgICAgICAgICAgICAgdmFyIHNpZGViYXJQb3NpdGlvbiA9IHByZWZzLmdhbGxlcnkuc2lkZWJhclBvc2l0aW9uLAogICAgICAgICAgICAgICAgICAgIGNhcGl0YWxpemUgPSBmdW5jdGlvbihzdHJpbmcpIHsgLy8g5bCG5a2X56ym5Liy5Lit5q+P5Liq5Y2V6K+N6aaW5a2X5q+N5aSn5YaZCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3b3JkcyA9IHN0cmluZy5zcGxpdCgiICIpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdvcmRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3Jkc1tpXSA9IHdvcmRzW2ldLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgd29yZHNbaV0uc2xpY2UoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmRzLmpvaW4oIiAiKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgaWYoYWxyZWFkeVNob3cpewogICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VWaWV3TW9yZSgpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYnJpY2tzSW5zdGFuY2UucmVzaXplKGZhbHNlKTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmltZyAmJiB0aGlzLmltZy5wYXVzZSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltZy5wYXVzZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBtYXhpbWl6ZUNvbnRhaW5lci5zdHlsZS5taW5IZWlnaHQgPSAiMTAwJSI7CiAgICAgICAgICAgICAgICAgICAgbWF4aW1pemVDb250YWluZXIucGFyZW50Tm9kZS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRoaXMuaGlkZUJvZHlTdHlsZSk7CiAgICAgICAgICAgICAgICAgICAgaW1nUHJlLnN0eWxlLnZpc2liaWxpdHkgPSBpbWdOZXh0LnN0eWxlLnZpc2liaWxpdHkgPSB0b2dnbGVCYXIuc3R5bGUudmlzaWJpbGl0eSA9IHNpZGViYXJDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nOwogICAgICAgICAgICAgICAgICAgIGltZ0Nvbi5zdHlsZVsnYm9yZGVyJyArIGNhcGl0YWxpemUoc2lkZWJhclBvc2l0aW9uKV0gPSAnMCc7CiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQmFyLnN0eWxlW3NpZGViYXJQb3NpdGlvbl0gPSAnMCc7CiAgICAgICAgICAgICAgICAgICAgbWF4aW1pemVDb250YWluZXIuaW5uZXJIVE1MID0gY3JlYXRlSFRNTCgiIik7CiAgICAgICAgICAgICAgICAgICAgdmlld21vcmVCYXIuaW5uZXJIVE1MID0gY3JlYXRlSFRNTCgn4pyWJyk7CiAgICAgICAgICAgICAgICAgICAgdmlld21vcmVCYXIucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCJzaG93bW9yZSIpOy8vLmJhY2tncm91bmRDb2xvciA9ICIjMmEyYTJhIjsKCiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVzID0gdGhpcy5lbGVNYXBzWydzaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyJ10ucXVlcnlTZWxlY3RvckFsbCgnLnB2LWdhbGxlcnktc2lkZWJhci10aHVtYi1jb250YWluZXJbZGF0YS1zcmNdOm5vdCguaWdub3JlKScpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVmlld21vcmVJdGVtKG5vZGVzKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJyaWNrc0luc3RhbmNlLnBhY2soKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJyaWNrc0luc3RhbmNlLnJlc2l6ZSh0cnVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2hvd0hpZGVCb3R0b206IGZ1bmN0aW9uKCkgeyAgLy8g5pi+56S66ZqQ6JePIHNpZGViYXItY29udGFpbmVyCiAgICAgICAgICAgICAgICB2YXIgc2lkZWJhckNvbnRhaW5lciA9IHRoaXMuZWxlTWFwc1snc2lkZWJhci1jb250YWluZXInXSwKICAgICAgICAgICAgICAgICAgICBpc0hpZGRlbiA9IHNpZGViYXJDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9PSAnaGlkZGVuJzsKCiAgICAgICAgICAgICAgICBzaWRlYmFyQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBpc0hpZGRlbiA/ICd2aXNpYmxlJyA6ICdoaWRkZW4nOwoKICAgICAgICAgICAgICAgIHZhciBzaWRlYmFyUG9zaXRpb24gPSBwcmVmcy5nYWxsZXJ5LnNpZGViYXJQb3NpdGlvbiwKICAgICAgICAgICAgICAgICAgICBjYXBpdGFsaXplID0gZnVuY3Rpb24oc3RyaW5nKSB7IC8vIOWwhuWtl+espuS4suS4reavj+S4quWNleivjemmluWtl+avjeWkp+WGmQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgd29yZHMgPSBzdHJpbmcuc3BsaXQoIiAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3b3Jkcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZHNbaV0gPSB3b3Jkc1tpXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmRzW2ldLnNsaWNlKDEpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3b3Jkcy5qb2luKCIgIik7CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvLyDkv67mraPkuIvlm77niYflupXpg6jnmoTpq5jluqYKICAgICAgICAgICAgICAgIHRoaXMuZWxlTWFwc1snaW1nLWNvbnRhaW5lciddLnN0eWxlWydib3JkZXInICsgY2FwaXRhbGl6ZShzaWRlYmFyUG9zaXRpb24pXSA9IGlzSGlkZGVuID8KICAgICAgICAgICAgICAgICAgICBwcmVmcy5nYWxsZXJ5LnNpZGViYXJTaXplICsgJ3B4IHNvbGlkIHRyYW5zcGFyZW50JyA6CiAgICAgICAgICAgICAgICAnMCc7CiAgICAgICAgICAgICAgICAvLyDkv67mraPlupXpg6jot53nprsKICAgICAgICAgICAgICAgIHRoaXMuZWxlTWFwc1snc2lkZWJhci10b2dnbGUnXS5zdHlsZVtzaWRlYmFyUG9zaXRpb25dID0gaXNIaWRkZW4gPyAnLTNweCcgOiAnMCc7CiAgICAgICAgICAgICAgICBpZihpc0hpZGRlbil7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYWxsZXJ5LmNsYXNzTGlzdC5yZW1vdmUoInB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtaGlkZSIpOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYWxsZXJ5LmNsYXNzTGlzdC5hZGQoInB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtaGlkZSIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5lbGVNYXBzWydzaWRlYmFyLXRvZ2dsZS1jb250ZW50J10uaW5uZXJIVE1MID0gY3JlYXRlSFRNTChpc0hpZGRlbiA/ICfilrwnIDogJ+KWsicpOwogICAgICAgICAgICAgICAgdGhpcy5lbGVNYXBzWydzaWRlYmFyLXZpZXdtb3JlJ10uc3R5bGUudmlzaWJpbGl0eSA9IGlzSGlkZGVuID8gJ3Zpc2libGUnIDogJ2hpZGRlbic7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGluaXRab29tOiBmdW5jdGlvbigpIHsgIC8vIOWmguaenOacieaUvuWkp++8jOWImeaKiuWbvueJh+WPiiBzaWRlYmFyIOmDqOWIhue8qeaUvuavlOeOh+aUueS4uiAxCiAgICAgICAgICAgICAgICBpZiAocHJlZnMuZ2FsbGVyeS5hdXRvWm9vbSAmJiBnZXRCb2R5KGRvY3VtZW50KS5zdHlsZS56b29tICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHZhciBvWm9vbSA9IGRldGVjdFpvb20oKTsKICAgICAgICAgICAgICAgICAgICBpZiAob1pvb20gPiAxMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVNYXBzWydib2R5J10uc3R5bGUuem9vbSA9IDEwMCAvIG9ab29tOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGdldFRodW1TcGFuOmZ1bmN0aW9uKHByZXZpb3VzLCByZWxhdGVkVGFyZ2V0LCBsb29wLCByYW5kb20pewogICAgICAgICAgICAgICAgdmFyIHJldDsKICAgICAgICAgICAgICAgIHZhciBydCA9IHJlbGF0ZWRUYXJnZXQgfHwgdGhpcy5zZWxlY3RlZDsKICAgICAgICAgICAgICAgIGlmKCFydClyZXR1cm47CiAgICAgICAgICAgICAgICBpZiAocmFuZG9tKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJ0LmNsaWVudFdpZHRoID09PSAwKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgbGV0IHNpYmxpbmcgPSBydC5wYXJlbnROb2RlLmNoaWxkcmVuOwogICAgICAgICAgICAgICAgICAgIHdoaWxlIChydCA9IHNpYmxpbmdbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2libGluZy5sZW5ndGgpXSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocnQuY2xpZW50V2lkdGggIT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IHJ0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHdoaWxlKChydD1wcmV2aW91cyA/IHJ0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcgOiBydC5uZXh0RWxlbWVudFNpYmxpbmcpKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocnQuY2xpZW50V2lkdGghPTApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0PXJ0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGxvb3AgJiYgIXJldCkgewogICAgICAgICAgICAgICAgICAgICAgICBydCA9IChyZWxhdGVkVGFyZ2V0IHx8IHRoaXMuc2VsZWN0ZWQpLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIHJ0ID0gcHJldmlvdXMgPyBydC5sYXN0RWxlbWVudENoaWxkIDogcnQuZmlyc3RFbGVtZW50Q2hpbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgocnQgPSBwcmV2aW91cyA/IHJ0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcgOiBydC5uZXh0RWxlbWVudFNpYmxpbmcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocnQuY2xpZW50V2lkdGggIT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IHJ0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcHJldmlvdXM6ZmFsc2UsCiAgICAgICAgICAgIHNlbGVjdFByZXZpb3VzOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzPXRydWU7CiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLmdldFRodW1TcGFuKHRydWUpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2VsZWN0TmV4dDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QodGhpcy5nZXRUaHVtU3BhbigpLCBmYWxzZSwgdHJ1ZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlbGVjdDpmdW5jdGlvbihlbGUsIG5vVHJhbnNpdGlvbiwgY2hlY2tFbmQpewogICAgICAgICAgICAgICAgaWYoIWVsZSB8fCB0aGlzLnNlbGVjdGVkPT1lbGUpcmV0dXJuOwogICAgICAgICAgICAgICAgaWYodGhpcy5zZWxlY3RlZCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuc2VsZWN0ZWRDbGFzc05hbWUpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQuY2xhc3NMaXN0LnJlbW92ZSgncHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1iX3NlbGVjdGVkJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbGUuY2xhc3NMaXN0LmFkZCh0aGlzLnNlbGVjdGVkQ2xhc3NOYW1lKTsKICAgICAgICAgICAgICAgIGVsZS5jbGFzc0xpc3QuYWRkKCdwdi1nYWxsZXJ5LXNpZGViYXItdGh1bWJfc2VsZWN0ZWQnKTsKCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkPWVsZTsKICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dWaXNpYihjaGVja0VuZCk7CgogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmxvYWRJbWdUaW1lcik7CiAgICAgICAgICAgICAgICBpZihwcmVmcy5nYWxsZXJ5LnRyYW5zaXRpb24pewogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZEltZ1RpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXsvL+W/q+mAn+i3s+i9rOeahOaXtuWAmeS4jeimgeWwneivleivu+WPluWbvueJh+OAggogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRJbWcoZWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZEludG9WaWV3KG5vVHJhbnNpdGlvbik7CiAgICAgICAgICAgICAgICAgICAgfSwyMDApOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRJbWcoZWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZEludG9WaWV3KG5vVHJhbnNpdGlvbik7CiAgICAgICAgICAgICAgICAgICAgfSwxKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW50b1ZpZXcobm9UcmFuc2l0aW9uKTsKICAgICAgICAgICAgICAgIHRoaXMuZm9yY2VSZXBhaW50KCk7CiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlU2hvdy5ydW4oJ3NlbGVjdCcpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBsb2FkVGh1bWI6ZnVuY3Rpb24oKXsvL+ivu+WPluWPr+inhuiMg+WbtOmHjOmdoueahOe8qeeVpeWbvgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkKSByZXR1cm47CiAgICAgICAgICAgICAgICB2YXIgc2VsZj10aGlzOwogICAgICAgICAgICAgICAgdmFyIHBybz1zZWxmLmlzSG9yaXpvbnRhbCA/IFsnc2Nyb2xsTGVmdCcsJ2NsaWVudFdpZHRoJywnb2Zmc2V0TGVmdCcsJ29mZnNldFdpZHRoJ10gOiBbJ3Njcm9sbFRvcCcsJ2NsaWVudEhlaWdodCcsJ29mZnNldFRvcCcsJ29mZnNldEhlaWdodCddOwogICAgICAgICAgICAgICAgdmFyIHRodW1iQz1zZWxmLmVsZU1hcHNbJ3NpZGViYXItdGh1bWJuYWlscy1jb250YWluZXInXTsKCiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsZWQ9dGh1bWJDW3Byb1swXV07CgogICAgICAgICAgICAgICAgdmFyIGxvYWRTdG9wRGlzPXNjcm9sbGVkICsgdGh1bWJDW3Byb1sxXV07CgogICAgICAgICAgICAgICAgdmFyIGltZ1NwYW5zPXNlbGYuc2VsZWN0ZWQucGFyZW50Tm9kZS5jaGlsZHJlbjsKICAgICAgICAgICAgICAgIHZhciBzcGFuX2k7CiAgICAgICAgICAgICAgICB2YXIgc3Bhbk9mZnNldDsKICAgICAgICAgICAgICAgIHZhciB0aHVtYjsKCiAgICAgICAgICAgICAgICB2YXIgaT0wCiAgICAgICAgICAgICAgICB3aGlsZShzcGFuX2k9aW1nU3BhbnNbaSsrXSl7CiAgICAgICAgICAgICAgICAgICAgaWYoc3Bhbl9pLmNsaWVudFdpZHRoPT0wKWNvbnRpbnVlOy8v6ZqQ6JeP55qECgogICAgICAgICAgICAgICAgICAgIHNwYW5PZmZzZXQ9c3Bhbl9pW3Byb1syXV07CiAgICAgICAgICAgICAgICAgICAgaWYoc3Bhbk9mZnNldCArIHNwYW5faVtwcm9bM11dIDw9IHNjcm9sbGVkKWNvbnRpbnVlOy8v5Zyo5rua5Yqo5p2h5LiK6Z2i5LqGCiAgICAgICAgICAgICAgICAgICAgaWYoc3Bhbk9mZnNldCA+PSBsb2FkU3RvcERpcylicmVhazsvL+WcqOa7muWKqOadoeS4i+mdouS6hgoKICAgICAgICAgICAgICAgICAgICBpZihkYXRhc2V0KHNwYW5faSwndGh1bWJMb2FkZWQnKSljb250aW51ZTsvL+W3sue7j+WKoOi9veS6hue8qeeVpeWbvgoKICAgICAgICAgICAgICAgICAgICB0aHVtYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICAgICAgICAgICAgICAgICAgICBsZXQgaW1nU3JjID0gZGF0YXNldChzcGFuX2ksJ3RodW1iU3JjJykgfHwgZGF0YXNldChzcGFuX2ksJ3NyYycpIHx8IHByZWZzLmljb25zLmJyb2tlbkltZ19zbWFsbDsKICAgICAgICAgICAgICAgICAgICBsZXQgbW9kZSA9IG1hdGNoZWRSdWxlLmdldE1vZGUoaW1nU3JjKTsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAidmlkZW8iOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGh1bWIuc3JjID0gcHJlZnMuaWNvbnMudmlkZW87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiYXVkaW8iOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGh1bWIuc3JjID0gcHJlZnMuaWNvbnMuYXVkaW87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRodW1iLnNyYyA9IGltZ1NyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aHVtYi5jbGFzc05hbWU9J3B2LWdhbGxlcnktc2lkZWJhci10aHVtYic7CgogICAgICAgICAgICAgICAgICAgIGRhdGFzZXQoc3Bhbl9pLCd0aHVtYkxvYWRlZCcsJ3RydWUnKTsKICAgICAgICAgICAgICAgICAgICBzcGFuX2kuYXBwZW5kQ2hpbGQodGh1bWIpOwoKICAgICAgICAgICAgICAgICAgICBpbWdSZWFkeSh0aHVtYix7CiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOmZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcmM9cHJlZnMuaWNvbnMuYnJva2VuSW1nX3NtYWxsOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2VsZWN0ZWRJbnRvVmlldzpmdW5jdGlvbihub1RyYW5zaXRpb24pewogICAgICAgICAgICAgICAgdmFyIHRodW1CQz10aGlzLmVsZU1hcHNbJ3NpZGViYXItdGh1bWJuYWlscy1jb250YWluZXInXTsKICAgICAgICAgICAgICAgIHZhciBwcm89dGhpcy5pc0hvcml6b250YWwgPyBbJ29mZnNldExlZnQnLCdjbGllbnRXaWR0aCcsJ29mZnNldFdpZHRoJ10gOiBbJ29mZnNldFRvcCcsJ2NsaWVudEhlaWdodCcsJ29mZnNldEhlaWdodCddIDsKICAgICAgICAgICAgICAgIC8v6ZyA6KaB5rua5Yqo55qE6Led56a744CCCiAgICAgICAgICAgICAgICB2YXIgbmVlZFNjcm9sbERpcz0gdGhpcy5zZWxlY3RlZFtwcm9bMF1dOwogICAgICAgICAgICAgICAgLy/lsL3lj6/og73nmoTlsYXkuK3mmL7npLoKICAgICAgICAgICAgICAgIHZhciB0aHVtQkNDbGllbnQ9dGh1bUJDW3Byb1sxXV07CiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsQ2VudGVyPU1hdGgubWF4KCh0aHVtQkNDbGllbnQgLSB0aGlzLnNlbGVjdGVkW3Byb1syXV0pLzIsMCk7CgogICAgICAgICAgICAgICAgbGV0IHRodW1iU2Nyb2xsYmFyPXRoaXMudGh1bWJTY3JvbGxiYXI7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRodW1iU2Nyb2xsYmFyLnNjcm9sbChuZWVkU2Nyb2xsRGlzIC0gc2Nyb2xsQ2VudGVyLGZhbHNlLCFub1RyYW5zaXRpb24pOwogICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldEltZzphc3luYyBmdW5jdGlvbihlbGUpewogICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICAgICAgICAgIHZhciBzcmMgPSBkYXRhc2V0KGVsZSwnc3JjJyk7CgogICAgICAgICAgICAgICAgdGhpcy5sYXN0TG9hZGluZz1zcmM7Ly/orrDkvY/mnIDlkI7or7vlj5bnmoTlm77niYcKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nPXRydWU7Ly/ooajnpLrpgInmi6nnmoTlm77niYfmraPlnKjor7vlj5YKCiAgICAgICAgICAgICAgICAvL+aYvuekuuivu+WPluaMh+ekuuWZqOOAggogICAgICAgICAgICAgICAgdmFyIGxvYWRpbmdJbmRpY2F0b3I9ZWxlLnF1ZXJ5U2VsZWN0b3IoJy5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWItbG9hZGluZycpOwogICAgICAgICAgICAgICAgaWYgKGxvYWRpbmdJbmRpY2F0b3IgJiYgbG9hZGluZ0luZGljYXRvci5zdHlsZSkgbG9hZGluZ0luZGljYXRvci5zdHlsZS5kaXNwbGF5PSdibG9jayc7CgoKICAgICAgICAgICAgICAgIC8vIOeJueauiueahCB4aHIg5pa55byP6I635Y+WCiAgICAgICAgICAgICAgICB2YXIgeGhyID0gZGF0YXNldChlbGUsICd4aHInKSAhPT0gJ3N0b3AnICYmIHRoaXMuZ2V0UHJvcEJ5U3Bhbk1hcmsoZWxlLCAneGhyJyk7CiAgICAgICAgICAgICAgICBpZiAoeGhyKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHhockVycm9yID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXQoZWxlLCAneGhyJywgJ3N0b3AnKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNldChlbGUsICdzcmMnLCBkYXRhc2V0KGVsZSwgJ3RodW1iU3JjJykpOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmdldEltZyhlbGUpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgeGhyTG9hZC5sb2FkKHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBzcmMsCiAgICAgICAgICAgICAgICAgICAgICAgIHhocjogeGhyLAogICAgICAgICAgICAgICAgICAgICAgICBjYjogZnVuY3Rpb24oaW1nU3JjLCBpbWdTcmNzLCBjYXB0aW9uLCBjYXB0aW9ucykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltZ1NyYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXQoZWxlLCAnc3JjJywgaW1nU3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0KGVsZSwgJ3hocicsICdzdG9wJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhcHRpb24pIGRhdGFzZXQoZWxlLCAnZGVzY3JpcHRpb24nLCBjYXB0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmdldEltZyhlbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWdTcmNzICYmIGltZ1NyY3MubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3Jjcy5mb3JFYWNoKHNyYyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3JjID09IGltZ1NyYykgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9IHNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYXAgPSBjYXB0aW9ucyAmJiBjYXB0aW9uc1tpXSA/IGNhcHRpb25zW2ldIDogY2FwdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1JlYWR5KGltZyx7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHk6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGZpbmRQaWMoaW1nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhcCkgcmVzdWx0LmRlc2NyaXB0aW9uID0gY2FwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRhdGEucHVzaChyZXN1bHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9hcHBlbmRUaHVtYlNwYW5zKFtyZXN1bHRdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkVGh1bWIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhockVycm9yKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIG9uZXJyb3I6IHhockVycm9yCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBhbGxMb2FkaW5nPXRoaXMuYWxsTG9hZGluZzsKICAgICAgICAgICAgICAgIGlmKGFsbExvYWRpbmcuaW5kZXhPZihzcmMpIT0tMSl7Ly/lnKjor7vlj5bpmJ/liJfkuK3jgIIKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgYWxsTG9hZGluZy5wdXNoKHNyYyk7CgogICAgICAgICAgICAgICAgLy/kuIrkuIDkuKror7vlj5bkuK3nmoTlm77niYfvvIzkuI3mmK/lvZPliY3mmL7npLrnmoTjgILpgqPkuYjnm7TmjqXnu4jmraIKICAgICAgICAgICAgICAgIHZhciBwcmVJbWdSPXRoaXMuaW1nUmVhZHk7CiAgICAgICAgICAgICAgICBpZihwcmVJbWdSICYmIHRoaXMuaW1nKXsKICAgICAgICAgICAgICAgICAgICBpZihwcmVJbWdSLmltZy5zcmMhPXRoaXMuc3JjKXsKICAgICAgICAgICAgICAgICAgICAgICAgcHJlSW1nUi5hYm9ydCgpOwogICAgICAgICAgICAgICAgICAgICAgICBwcmVJbWdSLnJlbW92ZUxJKCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH07CgoKCgogICAgICAgICAgICAgICAgaWYgKCFzcmMpIHJldHVybjsKICAgICAgICAgICAgICAgIGxldCBtZWRpYSwgbWVkaWFTcmMgPSBzcmM7CiAgICAgICAgICAgICAgICBsZXQgbG9hZGVkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gYWxsTG9hZGluZy5pbmRleE9mKHNyYyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsbExvYWRpbmcuc3BsaWNlKGluZGV4LDEpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHNyYyAhPSBzZWxmLmxhc3RMb2FkaW5nKSByZXR1cm47CgogICAgICAgICAgICAgICAgICAgIGlmIChsb2FkaW5nSW5kaWNhdG9yICYmIGxvYWRpbmdJbmRpY2F0b3Iuc3R5bGUpIGxvYWRpbmdJbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9ICcnOwogICAgICAgICAgICAgICAgICAgIGlmIChwcmVJbWdSKSBwcmVJbWdSLmFib3J0KCk7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkSW1nKG1lZGlhLCBlbGUpOwogICAgICAgICAgICAgICAgICAgIG1lZGlhLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWRlZGRhdGEnLCBsb2FkZWQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGlzVmlkZW9MaW5rKHNyYykpIHsKICAgICAgICAgICAgICAgICAgICBtZWRpYSA9IGNyZWF0ZVZpZGVvKCk7CiAgICAgICAgICAgICAgICAgICAgbWVkaWEuc3R5bGUud2lkdGggPSAwOwogICAgICAgICAgICAgICAgICAgIG1lZGlhLnN0eWxlLmhlaWdodCA9IDA7CiAgICAgICAgICAgICAgICAgICAgbWVkaWEuY29udHJvbHMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIG1lZGlhLmxvb3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIG1lZGlhLmF1dG9wbGF5ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBtZWRpYS52b2x1bWUgPSBtYXRjaGVkUnVsZS5tdXRlID8gMCA6IDE7CiAgICAgICAgICAgICAgICAgICAgbWVkaWFTcmMgPSBtZWRpYVNyYy5yZXBsYWNlKC9edmlkZW86LywgIiIpOwogICAgICAgICAgICAgICAgICAgIGlmIChzcmMuaW5kZXhPZignLm1rdicpICE9PSAtMSkgbWVkaWEudHlwZSA9ICd2aWRlby9tcDQnOwogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNyYy5pbmRleE9mKCcubTN1OCcpICE9PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBpbml0VmlkZW9qcyhtZWRpYSwgbWVkaWFTcmMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWEub25sb2FkID0gZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWdOYXR1cmFsU2l6ZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDptZWRpYS5uYXR1cmFsSGVpZ2h0IHx8IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzptZWRpYS5uYXR1cmFsV2lkdGggfHwgMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5maXRUb1NjcmVlbih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTowLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhU3JjID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBvciBpbml0aWFsaXplIFZpZGVvLmpzIHBsYXllcjonLCBlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzQXVkaW9MaW5rKHNyYykpIHsKICAgICAgICAgICAgICAgICAgICBtZWRpYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7CiAgICAgICAgICAgICAgICAgICAgbWVkaWEuY29udHJvbHMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIG1lZGlhLmF1dG9wbGF5ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBtZWRpYS52b2x1bWUgPSBtYXRjaGVkUnVsZS5tdXRlID8gMCA6IDE7CiAgICAgICAgICAgICAgICAgICAgbWVkaWFTcmMgPSBtZWRpYVNyYy5yZXBsYWNlKC9eYXVkaW86LywgIiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG1lZGlhKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlTWFwc1snc2lkZWJhci10b2dnbGUnXS5zdHlsZS52aXNpYmlsaXR5ID09ICdoaWRkZW4nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhLmF1dG9wbGF5ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChtZWRpYVNyYykgewogICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5zcmMgPSBtZWRpYVNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgY3VyTG9hZGluZ01lZGlhID0gbWVkaWE7CiAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZGRhdGEnLCBsb2FkZWQpOwogICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5sb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuaW1nUmVhZHk9aW1nUmVhZHkoc3JjLCB7CiAgICAgICAgICAgICAgICAgICAgcmVhZHk6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgLy/ku47or7vlj5bpmJ/liJfkuK3liKDpmaToh6rlt7EKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4PWFsbExvYWRpbmcuaW5kZXhPZihzcmMpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihpbmRleCE9LTEpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsTG9hZGluZy5zcGxpY2UoaW5kZXgsMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICBpZihzcmMhPXNlbGYubGFzdExvYWRpbmcpcmV0dXJuOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvYWRpbmdJbmRpY2F0b3IgJiYgbG9hZGluZ0luZGljYXRvci5zdHlsZSkgbG9hZGluZ0luZGljYXRvci5zdHlsZS5kaXNwbGF5PScnOwogICAgICAgICAgICAgICAgICAgICAgICBpZihwcmVJbWdSKXByZUltZ1IuYWJvcnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkSW1nKHRoaXMsIGVsZSk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBsb2FkRW5kOmZ1bmN0aW9uKGUpey8v5ZyobG9hZGVuZOWQjuW8gOWni+mihOivu+OAggogICAgICAgICAgICAgICAgICAgICAgICAvL+S7juivu+WPlumYn+WIl+S4reWIoOmZpOiHquW3sQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXg9YWxsTG9hZGluZy5pbmRleE9mKHNyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGluZGV4IT0tMSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxMb2FkaW5nLnNwbGljZShpbmRleCwxKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNyYyE9c2VsZi5sYXN0TG9hZGluZylyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWcgPSB0aGlzOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZS50eXBlPT0nZXJyb3InKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2FkaW5nSW5kaWNhdG9yICYmIGxvYWRpbmdJbmRpY2F0b3Iuc3R5bGUpIGxvYWRpbmdJbmRpY2F0b3Iuc3R5bGUuZGlzcGxheT0nJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvXmJsb2I6Ly50ZXN0KHNyYykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmVycm9yU3Bhbj1lbGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocHJlSW1nUilwcmVJbWdSLmFib3J0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkSW1nKGltZywgZWxlLHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHNyYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5yZXNwb25zZSAmJiByZXNwb25zZS5yZXNwb25zZS50eXBlID09ICJ0ZXh0L2h0bWwiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5lcnJvclNwYW49ZWxlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHByZUltZ1IpcHJlSW1nUi5hYm9ydCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEltZyhpbWcsIGVsZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYlVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwocmVzcG9uc2UucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zbGlkZVNob3cucnVuKCdsb2FkRW5kJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gYmxvYlVybDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1JlYWR5KGJsb2JVcmwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkeTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRJbWcoaW1nLCBlbGUsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zbGlkZVNob3cucnVuKCdsb2FkRW5kJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWxlYXNlQmxvYiA9ICgpID0+IFVSTC5yZXZva2VPYmplY3RVUkwoYmxvYlVybCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgcmVsZWFzZUJsb2IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmVycm9yOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZXJyb3JTcGFuPWVsZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHByZUltZ1IpcHJlSW1nUi5hYm9ydCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkSW1nKGltZywgZWxlLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zbGlkZVNob3cucnVuKCdsb2FkRW5kJyk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZihwcmVmcy5nYWxsZXJ5LnByZWxvYWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2VsZi5wcmVsb2FkaW5nKXsvL+e7k+adn+S4iuasoeeahOmihOivu+OAggogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJlbG9hZGluZy5hYm9ydCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJlbG9hZGluZz1uZXcgc2VsZi5QcmVsb2FkKGVsZSxzZWxmKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJlbG9hZGluZy5wcmVsb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHRoaXMuaW1nUmVhZHkucmVtb3ZlTEk9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGluZ0luZGljYXRvciAmJiBsb2FkaW5nSW5kaWNhdG9yLnN0eWxlKSBsb2FkaW5nSW5kaWNhdG9yLnN0eWxlLmRpc3BsYXk9Jyc7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbG9hZEltZzpmdW5jdGlvbihpbWcscmVsYXRlZFRodW1iLGVycm9yKXsKICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbCh0aGlzLmVsZU1hcHNbJ2ltZy1wYXJlbnQnXS5xdWVyeVNlbGVjdG9yQWxsKCJbaWRePXZqc192aWRlb10iKSwgdmlkZW8gPT4gewogICAgICAgICAgICAgICAgICAgIHZpZGVvLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodmlkZW8pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZighL14oaW1nfHZpZGVvfGF1ZGlvKSQvaS50ZXN0KGltZy5ub2RlTmFtZSkpey8v5YWI6K+75Y+W44CCCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbWcoaW1nKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYodGhpcy5pbWcgJiYgdGhpcy5pbWcucGFyZW50Tm9kZSl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWcucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmltZyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIGltZ05hdHVyYWxTaXplOwogICAgICAgICAgICAgICAgaWYgKC9edmlkZW8kL2kudGVzdChpbWcubm9kZU5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgaW1nTmF0dXJhbFNpemUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGg6aW1nLnZpZGVvSGVpZ2h0IHx8IDEwODAsCiAgICAgICAgICAgICAgICAgICAgICAgIHc6aW1nLnZpZGVvV2lkdGggfHwgMTkyMCwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvXmF1ZGlvJC9pLnRlc3QoaW1nLm5vZGVOYW1lKSkgewogICAgICAgICAgICAgICAgICAgIGltZ05hdHVyYWxTaXplID0gewogICAgICAgICAgICAgICAgICAgICAgICBoOjUwLAogICAgICAgICAgICAgICAgICAgICAgICB3OjM1MCwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpbWdOYXR1cmFsU2l6ZT17CiAgICAgICAgICAgICAgICAgICAgICAgIGg6aW1nLm5hdHVyYWxIZWlnaHQgfHwgMTAwLAogICAgICAgICAgICAgICAgICAgICAgICB3OmltZy5uYXR1cmFsV2lkdGggfHwgMTAwLAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmltZ05hdHVyYWxTaXplPWltZ05hdHVyYWxTaXplOwoKICAgICAgICAgICAgICAgIHRoaXMuZWxlTWFwc1snaGVhZC1sZWZ0LWltZy1pbmZvLXJlc29sdXRpb24nXS50ZXh0Q29udGVudD1pbWdOYXR1cmFsU2l6ZS53ICsgJyB4ICcgKyBpbWdOYXR1cmFsU2l6ZS5oOwogICAgICAgICAgICAgICAgdmFyIHRodW1ibmFpbHM9dGhpcy5lbGVNYXBzWydzaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyJ10uY2hpbGROb2RlcyxpPTA7CiAgICAgICAgICAgICAgICB0aHVtYm5haWxzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRodW1ibmFpbHMpLmZpbHRlcihmdW5jdGlvbih0aHVtYm5haWwpewogICAgICAgICAgICAgICAgICAgIGlmKHRodW1ibmFpbC5zdHlsZS5kaXNwbGF5PT0ibm9uZSIpewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB3aGlsZSh0aHVtYm5haWxzW2ldIT1yZWxhdGVkVGh1bWIgJiYgaTx0aHVtYm5haWxzLmxlbmd0aClpKys7CiAgICAgICAgICAgICAgICBpZihpPHRodW1ibmFpbHMubGVuZ3RoKXRoaXMuZWxlTWFwc1snaGVhZC1sZWZ0LWltZy1pbmZvLWNvdW50J10udGV4dENvbnRlbnQ9Iu+8iCIrKGkrMSkrIiAvICIrdGh1bWJuYWlscy5sZW5ndGgrIu+8iSI7CiAgICAgICAgICAgICAgICAvLyDliqDkuIrlm77niYfnmoTms6jph4oKICAgICAgICAgICAgICAgIHZhciBkZXNjcmlwdGlvbiA9IGRlY29kZVVSSUNvbXBvbmVudChkYXRhc2V0KHJlbGF0ZWRUaHVtYiwgJ2Rlc2NyaXB0aW9uJykpLAogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRMZW5ndGggPSBwcmVmcy5nYWxsZXJ5LmRlc2NyaXB0aW9uTGVuZ3RoOwogICAgICAgICAgICAgICAgdGhpcy5lbGVNYXBzWydoZWFkLWxlZnQtaW1nLWluZm8tZGVzY3JpcHRpb24nXS50aXRsZSA9IGRlc2NyaXB0aW9uOwogICAgICAgICAgICAgICAgdGhpcy5lbGVNYXBzWydoZWFkLWxlZnQtaW1nLWluZm8tZGVzY3JpcHRpb24nXS50ZXh0Q29udGVudD0gZGVzY3JpcHRpb24ubGVuZ3RoID4gZGVmYXVsdExlbmd0aCA/CiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24uc2xpY2UoMCwgZGVmYXVsdExlbmd0aCkgKyAnLi4uJyA6CiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjsKCiAgICAgICAgICAgICAgICB0aGlzLmltZz1pbWc7CiAgICAgICAgICAgICAgICAvL3RoaXMuaW1nLnRpdGxlPWRlc2NyaXB0aW9uOwogICAgICAgICAgICAgICAgdGhpcy5zcmM9aW1nLnNyYzsKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nPWZhbHNlOwoKICAgICAgICAgICAgICAgIHRoaXMucmVsYXRlZFRodW1iPXJlbGF0ZWRUaHVtYjsKICAgICAgICAgICAgICAgIGltZy5jbGFzc05hbWU9J3B2LWdhbGxlcnktaW1nJzsKICAgICAgICAgICAgICAgIHZhciB0aHVtYiA9IGRhdGFzZXQocmVsYXRlZFRodW1iLCAndGh1bWJTcmMnKTsKICAgICAgICAgICAgICAgIGlmICh0aHVtYikgewogICAgICAgICAgICAgICAgICAgIGltZy5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dGh1bWJ9KWA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgIGlmKGVycm9yKXsKICAgICAgICAgICAgICAgICAgICBsZXQgcmVsYXRlZEltZz1yZWxhdGVkVGh1bWIucXVlcnlTZWxlY3RvcigiaW1nIik7CiAgICAgICAgICAgICAgICAgICAgaWYoIXJlbGF0ZWRJbWcpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGlmKHJlbGF0ZWRJbWcuc3JjPT10aGlzLmltZy5zcmMpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltZ0Vycm9yPXRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nLnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZU1hcHNbJ2ltZ19icm9rZW4nXS5zdHlsZS5kaXNwbGF5PSdpbmxpbmUtYmxvY2snOwogICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0KHJlbGF0ZWRUaHVtYiwnbmF0dXJhbFNpemUnLEpTT04uc3RyaW5naWZ5KHt3OiAwLCBoOiAwfSkpOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3Jjcz1kYXRhc2V0KHJlbGF0ZWRUaHVtYiwgJ3NyY3MnKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3JjcyAmJiBzcmNzLmxlbmd0aD4wKXNyY3M9c3Jjcy5zcGxpdCgiLCIpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltZy5vbmxvYWQ9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ05hdHVyYWxTaXplPXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOnRoaXMubmF0dXJhbEhlaWdodCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OnRoaXMubmF0dXJhbFdpZHRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmltZ05hdHVyYWxTaXplPWltZ05hdHVyYWxTaXplOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5lbGVNYXBzWydoZWFkLWxlZnQtaW1nLWluZm8tcmVzb2x1dGlvbiddLnRleHRDb250ZW50PWltZ05hdHVyYWxTaXplLncgKyAnIHggJyArIGltZ05hdHVyYWxTaXplLmg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0KHJlbGF0ZWRUaHVtYiwnbmF0dXJhbFNpemUnLEpTT04uc3RyaW5naWZ5KGltZ05hdHVyYWxTaXplKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQga2V5ID0gaW1nTmF0dXJhbFNpemUudyArICJ4IiArIGltZ05hdHVyYWxTaXplLmg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNpemVNYXBba2V5XSA9IChzZWxmLnNpemVNYXBba2V5XSB8fCAwKSArIDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5zaXplTWFwW2tleV0gPT09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmlubmVyVGV4dCA9IGtleTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSBpbWdOYXR1cmFsU2l6ZS53ICsgIi0iICsgaW1nTmF0dXJhbFNpemUudyArICJ4IiArIGltZ05hdHVyYWxTaXplLmggKyAiLSIgKyBpbWdOYXR1cmFsU2l6ZS5oOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGluU2l6ZS5hcHBlbmRDaGlsZChvcHRpb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5maXRUb1NjcmVlbigpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNyY3MgJiYgc3Jjcy5sZW5ndGg+MCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3JjPXNyY3Muc2hpZnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXQocmVsYXRlZFRodW1iLCAnc3Jjcycsc3Jjcy5qb2luKCIsIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3JjKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0KHJlbGF0ZWRUaHVtYiwgJ3NyYycsc3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltZy5zcmM9c3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgdGhpcy5pbWcuc3JjPXJlbGF0ZWRJbWcuc3JjOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nRXJyb3I9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVNYXBzWydpbWdfYnJva2VuJ10uc3R5bGUuZGlzcGxheT0nJzsKICAgICAgICAgICAgICAgICAgICBpZighZGF0YXNldChyZWxhdGVkVGh1bWIsJ25hdHVyYWxTaXplJykpewogICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0KHJlbGF0ZWRUaHVtYiwnbmF0dXJhbFNpemUnLEpTT04uc3RyaW5naWZ5KGltZ05hdHVyYWxTaXplKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBrZXkgPSBpbWdOYXR1cmFsU2l6ZS53ICsgIngiICsgaW1nTmF0dXJhbFNpemUuaDsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaXplTWFwW2tleV0gPSAoc2VsZi5zaXplTWFwW2tleV0gfHwgMCkgKyAxOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5zaXplTWFwW2tleV0gPT09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5pbm5lclRleHQgPSBrZXk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSBpbWdOYXR1cmFsU2l6ZS53ICsgIi0iICsgaW1nTmF0dXJhbFNpemUudyArICJ4IiArIGltZ05hdHVyYWxTaXplLmggKyAiLSIgKyBpbWdOYXR1cmFsU2l6ZS5oOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5waW5TaXplLmFwcGVuZENoaWxkKG9wdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzdHlsZWQoKXsKICAgICAgICAgICAgICAgICAgICBpbWcuc3R5bGUub3BhY2l0eT0xOwogICAgICAgICAgICAgICAgfTsKCgogICAgICAgICAgICAgICAgaWYocHJlZnMuZ2FsbGVyeS50cmFuc2l0aW9uKXsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHN0eWxlZCwwKTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHN0eWxlZCgpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB0aGlzLmVsZU1hcHNbJ2ltZy1wYXJlbnQnXS5hcHBlbmRDaGlsZChpbWcpOwoKICAgICAgICAgICAgICAgIHRoaXMuZml0Q29udGFpbnM9cHJlZnMuZ2FsbGVyeS5maXRUb1NjcmVlbjsvL+mAguW6lOWxj+W5lQoKICAgICAgICAgICAgICAgIHRoaXMuZml0VG9TY3JlZW4oewogICAgICAgICAgICAgICAgICAgIHg6MCwKICAgICAgICAgICAgICAgICAgICB5OjAsCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZih0aGlzLnByZXZpb3VzKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzPWZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nU2Nyb2xsYmFyVi5zY3JvbGxCeSg5OTk5OTkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9uLmNoZWNrKCk7Ly/mo4Dmn6XmmK/lkKblnKjmlLbol4/ph4zpnaLjgIIKCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZpdFRvU2NyZWVuOmZ1bmN0aW9uKHNjYWxlKXsKICAgICAgICAgICAgICAgIHRoaXMucm90YXRlQmlnSW1nKCk7CiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyPXRoaXMuZWxlTWFwc1snaW1nLWNvbnRlbnQnXTsKICAgICAgICAgICAgICAgIHZhciBjb250YWluZXJTaXplPXsKICAgICAgICAgICAgICAgICAgICBoOmNvbnRhaW5lci5jbGllbnRIZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgdzpjb250YWluZXIuY2xpZW50V2lkdGgsCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBpbWc9dGhpcy5pbWc7CgogICAgICAgICAgICAgICAgaWYoIWltZyB8fCAhaW1nLmNsYXNzTGlzdCB8fCAhaW1nLnBhcmVudE5vZGUpcmV0dXJuOwogICAgICAgICAgICAgICAgaW1nLmNsYXNzTGlzdC5yZW1vdmUoJ3B2LWdhbGxlcnktaW1nX3pvb20taW4nKTsKICAgICAgICAgICAgICAgIGltZy5jbGFzc0xpc3QucmVtb3ZlKCdwdi1nYWxsZXJ5LWltZ196b29tLW91dCcpOwoKICAgICAgICAgICAgICAgIHZhciBpbWdTdHk9aW1nLnN0eWxlOwogICAgICAgICAgICAgICAgaW1nU3R5LndpZHRoPScnOwogICAgICAgICAgICAgICAgaW1nU3R5LmhlaWdodD0nJzsKICAgICAgICAgICAgICAgIHZhciBpbWdQYVN0eT1pbWcucGFyZW50Tm9kZS5zdHlsZTsKICAgICAgICAgICAgICAgIGltZ1BhU3R5LndpZHRoPScnOwogICAgICAgICAgICAgICAgaW1nUGFTdHkuaGVpZ2h0PScnOwogICAgICAgICAgICAgICAgaW1nUGFTdHk9dGhpcy5lbGVNYXBzWydpbWctcGFyZW50J10uc3R5bGU7CgogICAgICAgICAgICAgICAgbGV0IHJvdGF0ZTkwID0gdGhpcy5nYWxsZXJ5Um90YXRlID09IDkwIHx8IHRoaXMuZ2FsbGVyeVJvdGF0ZSA9PSAyNzA7CiAgICAgICAgICAgICAgICBsZXQgaW1nTmF0dXJhbFNpemUgPSByb3RhdGU5MCA/IHt3OiB0aGlzLmltZ05hdHVyYWxTaXplLmgsIGg6IHRoaXMuaW1nTmF0dXJhbFNpemUud30gOiB0aGlzLmltZ05hdHVyYWxTaXplOwogICAgICAgICAgICAgICAgdmFyIGNvbnRlbnRTU2l6ZT17CiAgICAgICAgICAgICAgICAgICAgaDpjb250YWluZXIuc2Nyb2xsSGVpZ2h0LAogICAgICAgICAgICAgICAgICAgIHc6Y29udGFpbmVyLnNjcm9sbFdpZHRoLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciBsYXJnZXI9Y29udGVudFNTaXplLmg+Y29udGFpbmVyU2l6ZS5oIHx8IGNvbnRlbnRTU2l6ZS53PmNvbnRhaW5lclNpemUudzsKICAgICAgICAgICAgICAgIGlmIChyb3RhdGU5MCAmJiBsYXJnZXIpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaW1nTmF0dXJhbFNpemUuaCA8IGNvbnRhaW5lclNpemUuaCAmJiBpbWdOYXR1cmFsU2l6ZS53IDwgY29udGFpbmVyU2l6ZS53KSBsYXJnZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgc2NhbGVkPScxMDAlJzsKCiAgICAgICAgICAgICAgICB2YXIgbm9SZXNpemUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmKHRoaXMuZml0Q29udGFpbnMgJiYgIShzY2FsZSAmJiBzY2FsZS54PT0wICYmIHNjYWxlLnk9PTAgJiYgaW1nTmF0dXJhbFNpemUuaC9pbWdOYXR1cmFsU2l6ZS53ID4gMi41KSl7Ly/pgILlupTlsY/luZUKICAgICAgICAgICAgICAgICAgICB0aGlzLnNjYWxlQnlTY3JlZW4gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmltZ1Njcm9sbGJhclYuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nU2Nyb2xsYmFySC5oaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgaWYobGFyZ2VyKXsKICAgICAgICAgICAgICAgICAgICAgICAgaW1nLmNsYXNzTGlzdC5hZGQoJ3B2LWdhbGxlcnktaW1nX3pvb20taW4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGVudFNTaXplLmgvY29udGVudFNTaXplLncgPj0gY29udGFpbmVyU2l6ZS5oL2NvbnRhaW5lclNpemUudyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGVpZ2h0PWNvbnRhaW5lclNpemUuaCAtIDEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvdGF0ZTkwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3R5LndpZHRoPWhlaWdodCArICdweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3R5LnNldFByb3BlcnR5KCd3aWR0aCcsIGhlaWdodCsncHgnLCAnaW1wb3J0YW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1N0eS5oZWlnaHQ9aGVpZ2h0ICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTdHkuc2V0UHJvcGVydHkoJ2hlaWdodCcsIGhlaWdodCsncHgnLCAnaW1wb3J0YW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdQYVN0eS5oZWlnaHQ9aGVpZ2h0ICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1BhU3R5LnNldFByb3BlcnR5KCdoZWlnaHQnLCBoZWlnaHQrJ3B4JywgJ2ltcG9ydGFudCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVkPWhlaWdodC9pbWdOYXR1cmFsU2l6ZS5oOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3aWR0aD1jb250YWluZXJTaXplLncgLSAxMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3RhdGU5MCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1N0eS5oZWlnaHQ9d2lkdGggKyAncHgnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1N0eS5zZXRQcm9wZXJ0eSgnaGVpZ2h0Jywgd2lkdGgrJ3B4JywgJ2ltcG9ydGFudCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTdHkud2lkdGg9d2lkdGggKyAncHgnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1N0eS5zZXRQcm9wZXJ0eSgnd2lkdGgnLCB3aWR0aCsncHgnLCAnaW1wb3J0YW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdQYVN0eS53aWR0aD13aWR0aCArICdweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdQYVN0eS5zZXRQcm9wZXJ0eSgnd2lkdGgnLCB3aWR0aCsncHgnLCAnaW1wb3J0YW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZWQ9d2lkdGgvaW1nTmF0dXJhbFNpemUudzsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVkPShzY2FsZWQqMTAwKS50b0ZpeGVkKDIpICsgJyUnOwogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHByZWZzLmdhbGxlcnkuZml0VG9TY3JlZW5TbWFsbCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGltZ05hdHVyYWxTaXplLmgvaW1nTmF0dXJhbFNpemUudyA+PSBjb250YWluZXJTaXplLmgvY29udGFpbmVyU2l6ZS53KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoZWlnaHQ9Y29udGVudFNTaXplLmgtMTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9aGVpZ2h0PDA/Y29udGVudFNTaXplLmg6aGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvdGF0ZTkwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3R5LndpZHRoPWhlaWdodCArICdweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3R5LnNldFByb3BlcnR5KCd3aWR0aCcsIGhlaWdodCsncHgnLCAnaW1wb3J0YW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1N0eS5oZWlnaHQ9aGVpZ2h0ICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTdHkuc2V0UHJvcGVydHkoJ2hlaWdodCcsIGhlaWdodCsncHgnLCAnaW1wb3J0YW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdQYVN0eS5oZWlnaHQ9aGVpZ2h0ICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1BhU3R5LnNldFByb3BlcnR5KCdoZWlnaHQnLCBoZWlnaHQrJ3B4JywgJ2ltcG9ydGFudCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVkPWhlaWdodC9pbWdOYXR1cmFsU2l6ZS5oOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3aWR0aD1jb250ZW50U1NpemUudy0xMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXdpZHRoPDA/Y29udGVudFNTaXplLnc6d2lkdGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm90YXRlOTApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTdHkuaGVpZ2h0PXdpZHRoICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTdHkuc2V0UHJvcGVydHkoJ2hlaWdodCcsIHdpZHRoKydweCcsICdpbXBvcnRhbnQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3R5LndpZHRoPXdpZHRoICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTdHkuc2V0UHJvcGVydHkoJ3dpZHRoJywgd2lkdGgrJ3B4JywgJ2ltcG9ydGFudCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nUGFTdHkud2lkdGg9d2lkdGggKyAncHgnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nUGFTdHkuc2V0UHJvcGVydHkoJ3dpZHRoJywgd2lkdGgrJ3B4JywgJ2ltcG9ydGFudCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVkPXdpZHRoL2ltZ05hdHVyYWxTaXplLnc7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlZD0oc2NhbGVkKjEwMCkudG9GaXhlZCgyKSArICclJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBub1Jlc2l6ZSA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoaW1nU3R5LndpZHRoID09ICcnICYmIGltZ1N0eS5oZWlnaHQgPT0gIiIgJiYgdGhpcy5pbWdOYXR1cmFsU2l6ZS5oICYmIHRoaXMuaW1nTmF0dXJhbFNpemUudykgewogICAgICAgICAgICAgICAgICAgIGxldCBpbWdXID0gdGhpcy5pbWdOYXR1cmFsU2l6ZS53ICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICBsZXQgaW1nSCA9IHRoaXMuaW1nTmF0dXJhbFNpemUuaCArICdweCc7CiAgICAgICAgICAgICAgICAgICAgbGV0IGltZ1BhVyA9IGltZ05hdHVyYWxTaXplLncgKyAncHgnOwogICAgICAgICAgICAgICAgICAgIGxldCBpbWdQYUggPSBpbWdOYXR1cmFsU2l6ZS5oICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVyU2l6ZS5oIDwgaW1nTmF0dXJhbFNpemUuaCAmJiBjb250YWluZXJTaXplLncgPCBpbWdOYXR1cmFsU2l6ZS53KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNjYWxlQnlTY3JlZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NhbGVCeVNjcmVlbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2FsZUJ5U2NyZWVuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZy5jbGFzc0xpc3QuYWRkKCdwdi1nYWxsZXJ5LWltZ196b29tLWluJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1nTmF0dXJhbFNpemUuaCAvIGltZ05hdHVyYWxTaXplLncgPj0gY29udGFpbmVyU2l6ZS5oIC8gY29udGFpbmVyU2l6ZS53KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpdFdpZHRoID0gY29udGFpbmVyU2l6ZS53IC0gMTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpdEhlaWdodCA9IGltZ05hdHVyYWxTaXplLmggLyBpbWdOYXR1cmFsU2l6ZS53ICogZml0V2lkdGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvdGF0ZTkwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ0ggPSBmaXRXaWR0aCArICJweCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1cgPSBmaXRIZWlnaHQgKyAicHgiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdQYVcgPSBpbWdIOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdQYUggPSBpbWdXOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1cgPSBmaXRXaWR0aCArICJweCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ0ggPSBmaXRIZWlnaHQgKyAicHgiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdQYVcgPSBpbWdXOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdQYUggPSBpbWdIOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpdEhlaWdodCA9IGNvbnRhaW5lclNpemUuaCAtIDEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaXRXaWR0aCA9IGltZ05hdHVyYWxTaXplLncgLyBpbWdOYXR1cmFsU2l6ZS5oICogZml0SGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3RhdGU5MCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdXID0gZml0SGVpZ2h0ICsgInB4IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nSCA9IGZpdFdpZHRoICsgInB4IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nUGFXID0gaW1nSDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nUGFIID0gaW1nVzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdIID0gZml0SGVpZ2h0ICsgInB4IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nVyA9IGZpdFdpZHRoICsgInB4IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nUGFXID0gaW1nVzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nUGFIID0gaW1nSDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaW1nU3R5LndpZHRoID0gaW1nVzsKICAgICAgICAgICAgICAgICAgICBpbWdTdHkuaGVpZ2h0ID0gaW1nSDsKICAgICAgICAgICAgICAgICAgICBpbWdQYVN0eS53aWR0aCA9IGltZ1BhVzsKICAgICAgICAgICAgICAgICAgICBpbWdQYVN0eS5oZWlnaHQgPSBpbWdQYUg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAobm9SZXNpemUpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmltZ1Njcm9sbGJhclYucmVzZXQoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmltZ1Njcm9sbGJhckgucmVzZXQoKTsKCiAgICAgICAgICAgICAgICAgICAgaWYobGFyZ2VyKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNjYWxlQnlTY3JlZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZy5jbGFzc0xpc3QuYWRkKCdwdi1nYWxsZXJ5LWltZ196b29tLW91dCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNjYWxlKXsvL+mAmui/h+m8oOagh+eCueWHu+i/m+ihjOeahOWIh+aNouOAggogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdTY3JvbGxiYXJILnNjcm9sbChjb250YWluZXIuc2Nyb2xsV2lkdGggKiBzY2FsZS54IC0gY29udGFpbmVyU2l6ZS53LzIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdTY3JvbGxiYXJWLnNjcm9sbChjb250YWluZXIuc2Nyb2xsSGVpZ2h0ICogc2NhbGUueSAtIGNvbnRhaW5lclNpemUuaC8yKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBpbWdTY2FsZWRJbmZvPXRoaXMuZWxlTWFwc1snaGVhZC1sZWZ0LWltZy1pbmZvLXNjYWxpbmcnXTsKICAgICAgICAgICAgICAgIGltZ1NjYWxlZEluZm8udGV4dENvbnRlbnQ9J++8iCcrc2NhbGVkKyfvvIknOwogICAgICAgICAgICAgICAgaWYoc2NhbGVkIT0nMTAwJScpewogICAgICAgICAgICAgICAgICAgIGltZ1NjYWxlZEluZm8uc3R5bGUuY29sb3I9JyNFOUNDQ0MnOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgaW1nU2NhbGVkSW5mby5zdHlsZS5jb2xvcj0nJzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBfZGF0YUNhY2hlOiB7fSwKICAgICAgICAgICAgX3NwYW5NYXJrUG9vbDoge30sCiAgICAgICAgICAgIGZpbHRlckltYWdlOiBmdW5jdGlvbihpdGVtVywgaXRlbUgsIHNyYykgewogICAgICAgICAgICAgICAgaWYgKCFpdGVtVyB8fCAhaXRlbUgpIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgaWYgKGl0ZW1XIDwgdGhpcy5zaXplSW5wdXRXLnZhbHVlIHx8IGl0ZW1IIDwgdGhpcy5zaXplSW5wdXRILnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHRoaXMudXJsRmlsdGVyICYmIHNyYykgewogICAgICAgICAgICAgICAgICAgIHNyYyA9IHNyYy5yZXBsYWNlKC9eKGRhdGE6W147XSo7KS4qLywgIiQxIik7CiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnVybEZpbHRlclJlZykgewogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cmxGaWx0ZXJSZWcgPSBuZXcgUmVnRXhwKHRoaXMudXJsRmlsdGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7fQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51cmxGaWx0ZXJSZWcgJiYgIXRoaXMudXJsRmlsdGVyUmVnLnRlc3Qoc3JjKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHRoaXMubG9ja01heFNpemUgJiYgKGl0ZW1XID4gdGhpcy5sb2NrTWF4U2l6ZS53IHx8IGl0ZW1IID4gdGhpcy5sb2NrTWF4U2l6ZS5oKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9LAogICAgICAgICAgICBnZXRTcmNCeVNwYW5NYXJrOiBmdW5jdGlvbihzcGFuTWFyaykgewogICAgICAgICAgICAgICAgbGV0IHBvb2wgPSB0aGlzLl9zcGFuTWFya1Bvb2w7CiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMocG9vbCkuZmluZChrZXkgPT4gcG9vbFtrZXldID09PSBzcGFuTWFyayk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldFByb3BCeVNwYW5NYXJrOiBmdW5jdGlvbihzcGFuTWFyaywga2V5KSB7CiAgICAgICAgICAgICAgICBsZXQgc3JjID0gdGhpcy5nZXRTcmNCeVNwYW5NYXJrKHNwYW5NYXJrKTsKICAgICAgICAgICAgICAgIGlmICghc3JjKSByZXR1cm47CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGFbaV0uc3JjID09IHNyYykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhW2ldW2tleV07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9LAogICAgICAgICAgICBfYXBwZW5kVGh1bWJTcGFuczogZnVuY3Rpb24oZGF0YSwgaW5kZXgpIHsgLy8g5re75Yqg57yp55Wl5Zu+5qCP55qEIHNwYW5zCiAgICAgICAgICAgICAgICB2YXIgaVN0YXRpc0NvcHkgPSB0aGlzLmlTdGF0aXNDb3B5OwoKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaW5kZXggPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZCkgewogICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuaW1nU3BhbnMpLmluZGV4T2YodGhpcy5zZWxlY3RlZCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGluZGV4ID0gMDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgc2l6ZUlucHV0SD10aGlzLnNpemVJbnB1dEg7CiAgICAgICAgICAgICAgICB2YXIgc2l6ZUlucHV0Vz10aGlzLnNpemVJbnB1dFc7CiAgICAgICAgICAgICAgICB2YXIgdGh1bWJuYWlscz10aGlzLmVsZU1hcHNbJ3NpZGViYXItdGh1bWJuYWlscy1jb250YWluZXInXTsKICAgICAgICAgICAgICAgIHZhciBzZWxlY3REYXRhLCBzZWxlY3RTcGFuOwogICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZWN0RGF0YSA9IHRoaXMuZGF0YVtpbmRleF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmmK/mlrDnmoTvvIzliJnmt7vliqDvvIzlkKbliJnph43nva7lubbmt7vliqDjgIIKICAgICAgICAgICAgICAgIGlmICghZGF0YSl7CiAgICAgICAgICAgICAgICAgICAgaWYoc2VsZWN0RGF0YSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcGFuTWFyaz10aGlzLl9zcGFuTWFya1Bvb2xbc2VsZWN0RGF0YS5zcmNdOwogICAgICAgICAgICAgICAgICAgICAgICBpZihzZWxlY3REYXRhLnNpemVXPHNpemVJbnB1dFcudmFsdWUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNpemVJbnB1dFdTcGFuPXRoaXMuZ2FsbGVyeS5xdWVyeVNlbGVjdG9yKCIjbWluc2l6ZVdTcGFuIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplSW5wdXRXLnZhbHVlPXNlbGVjdERhdGEuc2l6ZVc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplSW5wdXRXLnRpdGxlPSJtaW4gd2lkdGg6ICIrc2l6ZUlucHV0Vy52YWx1ZSsicHgiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZUlucHV0V1NwYW4uaW5uZXJIVE1MPWNyZWF0ZUhUTUwoIlc6ICIrTWF0aC5mbG9vcihzaXplSW5wdXRXLnZhbHVlKSsicHgiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZihzZWxlY3REYXRhLnNpemVIPHNpemVJbnB1dEgudmFsdWUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNpemVJbnB1dEhTcGFuPXRoaXMuZ2FsbGVyeS5xdWVyeVNlbGVjdG9yKCIjbWluc2l6ZUhTcGFuIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplSW5wdXRILnZhbHVlPXNlbGVjdERhdGEuc2l6ZUg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplSW5wdXRILnRpdGxlPSJtaW4gaGVpZ2h0OiAiK3NpemVJbnB1dEgudmFsdWUrInB4IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemVJbnB1dEhTcGFuLmlubmVySFRNTD1jcmVhdGVIVE1MKCJIOiAiK01hdGguZmxvb3Ioc2l6ZUlucHV0SC52YWx1ZSkrInB4Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlscy5pbm5lckhUTUwgPSBjcmVhdGVIVE1MKCIiKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9kYXRhQ2FjaGUgPSB7fTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZU1hcHNbJ21heGltaXplLWNvbnRhaW5lciddLmlubmVySFRNTCA9IGNyZWF0ZUhUTUwoIiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICAgICAgdmFyIGNyZWF0ZVNwYW5NYXJrID0gaXRlbSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNwYW5NYXJrPXNlbGYuX3NwYW5NYXJrUG9vbFtpdGVtLnNyY107CiAgICAgICAgICAgICAgICAgICAgaWYoIXNwYW5NYXJrKXsKICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbk1hcmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLm5vQWN0dWFsICYmIGl0ZW0uaW1nICYmIGl0ZW0uaW1nLm5hdHVyYWxIZWlnaHQgJiYgaXRlbS5pbWcubmF0dXJhbFdpZHRoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbk1hcmsuZGF0YXNldC5uYXR1cmFsU2l6ZSA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogaXRlbS5pbWcubmF0dXJhbEhlaWdodCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogaXRlbS5pbWcubmF0dXJhbFdpZHRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBrZXkgPSBpdGVtLmltZy5uYXR1cmFsV2lkdGggKyAieCIgKyBpdGVtLmltZy5uYXR1cmFsSGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2l6ZU1hcFtrZXldID0gKHNlbGYuc2l6ZU1hcFtrZXldIHx8IDApICsgMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5zaXplTWFwW2tleV0gPT09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24uaW5uZXJUZXh0ID0ga2V5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSBpdGVtLmltZy5uYXR1cmFsV2lkdGggKyAiLSIgKyBpdGVtLmltZy5uYXR1cmFsV2lkdGggKyAieCIgKyBpdGVtLmltZy5uYXR1cmFsSGVpZ2h0ICsgIi0iICsgaXRlbS5pbWcubmF0dXJhbEhlaWdodDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5waW5TaXplLmFwcGVuZENoaWxkKG9wdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbk1hcmsuY2xhc3NOYW1lPSJwdi1nYWxsZXJ5LXNpZGViYXItdGh1bWItY29udGFpbmVyIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5NYXJrLmRhdGFzZXQuaW5kZXg9aW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuTWFyay5kYXRhc2V0LnR5cGU9aXRlbS50eXBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbk1hcmsuZGF0YXNldC5zcmM9aXRlbS5zcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuTWFyay5kYXRhc2V0LnNyY3M9aXRlbS5zcmNzP2l0ZW0uc3Jjcy5qb2luKCIsIik6IiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lmKGl0ZW0ueGhyKXNwYW5NYXJrLmRhdGFzZXQueGhyPWVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShpdGVtLnhocikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbk1hcmsuZGF0YXNldC5kZXNjcmlwdGlvbj1lbmNvZGVVUklDb21wb25lbnQoaXRlbS5kZXNjcmlwdGlvbiB8fCAoaXRlbS5pbWcgPyAoaXRlbS5pbWcudGl0bGUgfHwgaXRlbS5pbWcuYWx0IHx8ICIiKSA6ICIiKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuTWFyay5kYXRhc2V0LnRodW1iU3JjPShpdGVtLmltZyAmJiAoaXRlbS5pbWcuY3VycmVudFNyYyB8fCBpdGVtLmltZy5zcmMpKSB8fCBpdGVtLmltZ1NyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aXRsZSA9IGl0ZW0uaW1nID8gKGl0ZW0uaW1nLnRpdGxlIHx8IGl0ZW0uaW1nLmFsdCB8fCAiIikuc2xpY2UoLTIwMCkgOiAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aXRsZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aXRsZS5pbmRleE9mKCdodHRwJykgPT09IDAgfHwgdGl0bGUuaW5kZXhPZignZGF0YScpID09PSAwKSB0aXRsZSA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgdGl0bGUgKz0gJ1xuJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpdGVtU3JjID0gaXRlbS5zcmMucmVwbGFjZSgvXmJsb2I6LiovLCAiIikucmVwbGFjZSgvXihkYXRhW147XSspLiovLCAiJDEuLi4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5NYXJrLnRpdGxlID0gdGl0bGUgKyAoaXRlbVNyYy5sZW5ndGggPiAxNTAgPyBpdGVtU3JjLnNsaWNlKDAsIDExMCkgKyAiIC4uLiAiICsgaXRlbVNyYy5zbGljZSgtMzApIDogaXRlbVNyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuTWFyay5pbm5lckhUTUw9Y3JlYXRlSFRNTCgnPHNwYW4gY2xhc3M9InB2LWdhbGxlcnktdmVydGljYWwtYWxpZ24taGVscGVyIj48L3NwYW4+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1nYWxsZXJ5LXNpZGViYXItdGh1bWItbG9hZGluZyIgdGl0bGU9IicraTE4bigibG9hZGluZyIpKycuLi4uLi4iPjwvc3Bhbj4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5NYXJrLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5NYXJrLmNsYXNzTGlzdC50b2dnbGUoImlnbm9yZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZS5hbHRLZXkgfHwgZS5jdHJsS2V5IHx8IGUubWV0YUtleSB8fCBlLnNoaWZ0S2V5KSAmJiBzZWxmLmxhc3RNYXJrICYmIHNlbGYubGFzdE1hcmsgIT09IHNwYW5NYXJrICYmIHNlbGYubGFzdE1hcmsucGFyZW50Tm9kZSA9PT0gc3Bhbk1hcmsucGFyZW50Tm9kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IEFycmF5LmZyb20odGh1bWJuYWlscy5jaGlsZHJlbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGRyZW4uaW5kZXhPZihzZWxmLmxhc3RNYXJrKSA8IGNoaWxkcmVuLmluZGV4T2Yoc3Bhbk1hcmspKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gc2VsZi5sYXN0TWFyay5uZXh0RWxlbWVudFNpYmxpbmc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gc3Bhbk1hcmsubmV4dEVsZW1lbnRTaWJsaW5nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChjdXJyZW50ICE9PSBudWxsICYmIGN1cnJlbnQgIT09IHNlbGYubGFzdE1hcmsgJiYgY3VycmVudCAhPT0gc3Bhbk1hcmspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQuY2xhc3NMaXN0LnRvZ2dsZSgiaWdub3JlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5uZXh0RWxlbWVudFNpYmxpbmc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sYXN0TWFyayA9IHNwYW5NYXJrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1jYXRjaChlKXt9OwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9zcGFuTWFya1Bvb2xbaXRlbS5zcmNdID0gc3Bhbk1hcms7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vc3Bhbk1hcmsuZGF0YXNldC54aHI9Jyc7CiAgICAgICAgICAgICAgICAgICAgaWYoc3Bhbk1hcmsuZGF0YXNldC5uYXR1cmFsU2l6ZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuYXR1cmFsU2l6ZT1KU09OLnBhcnNlKHNwYW5NYXJrLmRhdGFzZXQubmF0dXJhbFNpemUpOwogICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnNpemVXPW5hdHVyYWxTaXplLnc7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc2l6ZUg9bmF0dXJhbFNpemUuaDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uc2l6ZVcgPT0gMCAmJiBpdGVtLnNpemVIID09IDAgJiYgaXRlbS5pbWcuY29tcGxldGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbk1hcmsuc3R5bGUuZGlzcGxheT0ibm9uZSI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5maWx0ZXJJbWFnZShpdGVtLnNpemVXLCBpdGVtLnNpemVILCBpdGVtLnNyYykpewogICAgICAgICAgICAgICAgICAgICAgICBzcGFuTWFyay5zdHlsZS5kaXNwbGF5PSJub25lIjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzcGFuTWFyay5zdHlsZS5kaXNwbGF5PSIiOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWxzLmFwcGVuZENoaWxkKHNwYW5NYXJrKTsKICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZFZpZXdtb3JlSXRlbShbc3Bhbk1hcmtdKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdFNwYW4gJiYgc2VsZWN0RGF0YSAmJiAoaXRlbS5zcmMgPT0gc2VsZWN0RGF0YS5zcmMgfHwgKGl0ZW0uaW1nICYmIGl0ZW0uaW1nID09IHNlbGVjdERhdGEuaW1nKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0U3BhbiA9IHNwYW5NYXJrOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdChzZWxlY3RTcGFuLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgIChkYXRhIHx8IHRoaXMuZGF0YSkuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgaWYoIWl0ZW0gfHwgIWl0ZW0udHlwZSlyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgaVN0YXRpc0NvcHlbaXRlbS50eXBlXS5jb3VudCsrOwogICAgICAgICAgICAgICAgICAgIGNyZWF0ZVNwYW5NYXJrKGl0ZW0pOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgKGRhdGEgfHwgdGhpcy5kYXRhKS5mb3JFYWNoKGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICAgICAgICBpZighZClyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZGF0YUNhY2hlW2Quc3JjXSA9IHRydWU7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvL+WGmeWFpeexu+WIq+aVsOaNruOAggogICAgICAgICAgICAgICAgdmFyIGdhbGxlcnkgPSB0aGlzLmdhbGxlcnk7CiAgICAgICAgICAgICAgICB2YXIgaW5wdXQsIGxhYmVsLCBpU3RhdGlzQ29weV9pOwoKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gaVN0YXRpc0NvcHkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWlTdGF0aXNDb3B5Lmhhc093blByb3BlcnR5KGkpKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICBpU3RhdGlzQ29weV9pID0gaVN0YXRpc0NvcHlbaV07CiAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBnYWxsZXJ5LnF1ZXJ5U2VsZWN0b3IoJyNwdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbS1jYXRlZ29yeS0nICsgaSk7CiAgICAgICAgICAgICAgICAgICAgaW5wdXQuY2hlY2tlZCA9IGlTdGF0aXNDb3B5X2kuc2hvd247CiAgICAgICAgICAgICAgICAgICAgaWYgKGlTdGF0aXNDb3B5X2kuY291bnQgPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgncHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW1fZGlzYWJsZWQnKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ3B2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtX2Rpc2FibGVkJyk7CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgbGFiZWwgPSBnYWxsZXJ5LnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsW2Zvcj0icHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0tY2F0ZWdvcnktJyArIGkgKyAnIl0nKTsKICAgICAgICAgICAgICAgICAgICBsYWJlbC50ZXh0Q29udGVudCA9IGxhYmVsLnRleHRDb250ZW50LnJlcGxhY2UoL++8iC4q77yJL2ksICcnKSArICfvvIgnICsgaVN0YXRpc0NvcHlfaS5jb3VudCArICfvvIknOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB0aGlzLmltZ1NwYW5zID0gdGh1bWJuYWlscy5jaGlsZHJlbjsKCiAgICAgICAgICAgICAgICB0aGlzLnRodW1iU2Nyb2xsYmFyLnJlc2V0KCk7CiAgICAgICAgICAgICAgICB0aGlzLmJyaWNrc0luc3RhbmNlLnBhY2soKTsKCiAgICAgICAgICAgICAgICBpZighZGF0YSAmJiAoIXNlbGVjdFNwYW4gfHwgKHNlbGVjdFNwYW4uc3R5bGUuZGlzcGxheT09Im5vbmUiICYmICFzZWxlY3REYXRhKSkpewogICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaiBpbiB0aGlzLmltZ1NwYW5zKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmltZ1NwYW5zLmhhc093blByb3BlcnR5KGopKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1clNwYW49dGhpcy5pbWdTcGFuc1tqXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoY3VyU3Bhbi5zdHlsZS5kaXNwbGF5IT0ibm9uZSIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QoY3VyU3BhbiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYoIXNlbGVjdFNwYW4gJiYgdGhpcy5pbWdTcGFucy5sZW5ndGgpc2VsZWN0U3Bhbj10aGlzLmltZ1NwYW5zWzBdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Qoc2VsZWN0U3BhbiwgdHJ1ZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGxvYWQ6ZnVuY3Rpb24oZGF0YSwgZnJvbSwgcmVsb2FkKXsKICAgICAgICAgICAgICAgIGlmKHRoaXMuc2hvd24gfHwgdGhpcy5taW5pbWl6ZWQpey8v5Y+q5YWB6K645omT5byA5LiA5LiqLOivt+WFiOWFs+aOieW9k+WJjeW3sue7j+aJk+W8gOeahOW6kwoKICAgICAgICAgICAgICAgICAgICBpZihmcm9tKXsvL2ZyYW1l5Y+R6YCB6L+H5p2l55qE5pWw5o2u44CCCiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlSUQ6bWVzc2FnZUlELAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZDonc2VuZEZhaWwnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG86ZnJvbSwKICAgICAgICAgICAgICAgICAgICAgICAgfSwnKicpOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMubWluaW1pemVkKXsKICAgICAgICAgICAgICAgICAgICAgICAgX0dNX25vdGlmaWNhdGlvbihpMThuKCdjbG9zZUZpcnN0JykpOwogICAgICAgICAgICAgICAgICAgICAgICBmbGFzaEVsZSh0aGlzLm1heGltaXplVHJpZ2dlcik7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBzZWxmPXRoaXM7CiAgICAgICAgICAgICAgICBpZihmcm9tKXsvL+adpeiHqmZyYW1l77yM6I635Y+W6L+Z5LiqZnJhbWXmiYDlnKjnmoRpZnJhbWXmoIfnrb7jgILlrprkvY3liLDlm77niYfnmoTml7blgJnopoHnlKjliLDjgIIKICAgICAgICAgICAgICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlSUQ6bWVzc2FnZUlELAogICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kOidnZXRJZnJhbWVPYmplY3QnLAogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dJZDpmcm9tLAogICAgICAgICAgICAgICAgICAgIH0sJyonKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwdi1nZXRJZnJhbWVPYmplY3QnLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmlmcmFtZT1lLmRldGFpbDsKICAgICAgICAgICAgICAgICAgICB9LHRydWUpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgaGFzVGFyZ2V0ID0gISFkYXRhLnRhcmdldDsKICAgICAgICAgICAgICAgIHZhciB1bmlxdWUgPSB0aGlzLnVuaXF1ZShkYXRhKTsKICAgICAgICAgICAgICAgIGRhdGEgPSB1bmlxdWUuZGF0YTsKICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGhhc1RhcmdldCA/IHVuaXF1ZS5pbmRleCA6IC0xOwoKICAgICAgICAgICAgICAgIGlmIChyZWxvYWQgJiYgdGhpcy5kYXRhLmxlbmd0aCA+PSBkYXRhLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KCfmsqHmnInmlrDlop7nmoTlm77niYcnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5jbGVhcigpOy8v6L+Y5Y6f5a+56LGh55qE5LiA5Lqb5L+u5pS577yM5Lul5L6/5aSN55So44CCCiAgICAgICAgICAgICAgICB0aGlzLmRhdGE9ZGF0YTsKICAgICAgICAgICAgICAgIHRoaXMuc2hvdyhyZWxvYWQpOwoKICAgICAgICAgICAgICAgIHRoaXMuZnJvbT1mcm9tOy8v5aaC5p6c5p2l6IeqZnJhbWXvvIzpgqPkuYjov5nkuKpmcm9t5bqU6K+l5L+d5a2Y5LqG6YKj5LiqZnJhbWXnmoTnqpflj6NpZO+8jOS+v+S6juS7peWQjumAmuS/oeOAggoKICAgICAgICAgICAgICAgIHRoaXMuX2FwcGVuZFRodW1iU3BhbnMobnVsbCwgaW5kZXgpOwogICAgICAgICAgICAgICAgaWYgKHRoaXMudXJsRmlsdGVyKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRodW1ibmFpbHMgPSB0aGlzLmVsZU1hcHNbJ3NpZGViYXItdGh1bWJuYWlscy1jb250YWluZXInXS5jaGlsZE5vZGVzOwogICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aHVtYm5haWxzKS5maWx0ZXIoZnVuY3Rpb24odGh1bWJuYWlsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aHVtYm5haWwuc3R5bGUuZGlzcGxheSA9PSAibm9uZSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBpZiAodGh1bWJuYWlscy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93VGlwcygiTm8gaW1hZ2VzIG1hdGNoIHRoZSBmaWx0ZXIiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5ydW5PbmNlKCk7CgogICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hUaHVtYlZpc2libGUoKTsKCiAgICAgICAgICAgICAgICB2YXIgcGFnZU9iaiA9IHRoaXMuZ2V0UGFnZSgpLHRleHRTcGFuID0gdGhpcy5lbGVNYXBzWydoZWFkLWNvbW1hbmQtbmV4dFBhZ2UnXS5xdWVyeVNlbGVjdG9yKCJzcGFuIik7CiAgICAgICAgICAgICAgICB0aGlzLmhhdmVNb3JlUGFnZSA9ICEhcGFnZU9iai5wcmUgfHwgISFwYWdlT2JqLm5leHQ7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXZlTW9yZVBhZ2UpIHsKICAgICAgICAgICAgICAgICAgICB0ZXh0U3Bhbi5zdHlsZS5jb2xvcj0iI2U5Y2NjYyI7CiAgICAgICAgICAgICAgICAgICAgdGV4dFNwYW4ucGFyZW50Tm9kZS5wYXJlbnROb2RlLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayI7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRleHRTcGFuLnN0eWxlLmNvbG9yPSIiOwogICAgICAgICAgICAgICAgICAgIHRleHRTcGFuLnBhcmVudE5vZGUucGFyZW50Tm9kZS5zdHlsZS5kaXNwbGF5PSJub25lIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgaGF2ZU1vcmVQYWdlOmZhbHNlLAogICAgICAgICAgICBjbGVhcjpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdGhpcy5fZGF0YUNhY2hlID0ge307CgogICAgICAgICAgICAgICAgdGhpcy5hbGxMb2FkaW5nPVtdOy8v6K+75Y+W5Lit55qE5Zu+54mH5pWw57uECiAgICAgICAgICAgICAgICB0aGlzLmlTdGF0aXNDb3B5PWNsb25lT2JqZWN0KHRoaXMuaW1nU3RhdGlzdGljcyx0cnVlKTsvL+WbvueJh+e7n+iuoeWJr+acrAogICAgICAgICAgICAgICAgaWYodGhpcy5zZWxlY3RlZCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuc2VsZWN0ZWRDbGFzc05hbWUpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQuY2xhc3NMaXN0LnJlbW92ZSgncHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1iX3NlbGVjdGVkJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkPW51bGw7CiAgICAgICAgICAgICAgICBpZih0aGlzLmltZyl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWcuc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWc9bnVsbDsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAvL+ivu+WPlumUmeivr+eahOWbvueJh+WNoOS9jeespgogICAgICAgICAgICAgICAgdGhpcy5lbGVNYXBzWydpbWdfYnJva2VuJ10uc3R5bGUuZGlzcGxheT0nJzsKICAgICAgICAgICAgICAgIC8v5riF56m6ZG9tCiAgICAgICAgICAgICAgICB0aGlzLmVsZU1hcHNbJ3NpZGViYXItdGh1bWJuYWlscy1jb250YWluZXInXS5pbm5lckhUTUw9Y3JlYXRlSFRNTCgnJyk7CiAgICAgICAgICAgICAgICB0aGlzLmVsZU1hcHNbJ2hlYWQtbGVmdC1pbWctaW5mby1yZXNvbHV0aW9uJ10udGV4dENvbnRlbnQ9JzAgeCAwJzsKICAgICAgICAgICAgICAgIHRoaXMuZWxlTWFwc1snaGVhZC1sZWZ0LWltZy1pbmZvLWNvdW50J10udGV4dENvbnRlbnQ9J++8iDEgLyAx77yJJzsKICAgICAgICAgICAgICAgIHRoaXMuZWxlTWFwc1snaGVhZC1sZWZ0LWltZy1pbmZvLXNjYWxpbmcnXS50ZXh0Q29udGVudD0n77yIMTAwJe+8iSc7CiAgICAgICAgICAgICAgICAvL+makOiXj+a7muWKqOadoQogICAgICAgICAgICAgICAgdGhpcy5pbWdTY3JvbGxiYXJWLmhpZGUoKTsKICAgICAgICAgICAgICAgIHRoaXMuaW1nU2Nyb2xsYmFySC5oaWRlKCk7CiAgICAgICAgICAgICAgICB0aGlzLnRodW1iU2Nyb2xsYmFyLmhpZGUoKTsKICAgICAgICAgICAgICAgIC8v6YeN572uc3R5bGU7CiAgICAgICAgICAgICAgICB0aGlzLnRodW1iVmlzaWJsZVN0eWxlLnRleHRDb250ZW50PScnOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgdW5pcXVlOmZ1bmN0aW9uKGRhdGEpewogICAgICAgICAgICAgICAgdmFyIHRhcmdldFNyYzsKICAgICAgICAgICAgICAgIGlmKGRhdGEudGFyZ2V0KXsKICAgICAgICAgICAgICAgICAgICB0YXJnZXRTcmM9ZGF0YS50YXJnZXQuc3JjOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBkYXRhX2ksCiAgICAgICAgICAgICAgICAgICAgZGF0YV9pX3NyYywKICAgICAgICAgICAgICAgICAgICBkYXRhU3Jjcz1bXTsKCiAgICAgICAgICAgICAgICB2YXIgaW5kZXg7CgogICAgICAgICAgICAgICAgZm9yKHZhciBpPTAsaWk9ZGF0YS5sZW5ndGg7aTxpaTtpKyspewogICAgICAgICAgICAgICAgICAgIGRhdGFfaT1kYXRhW2ldOwogICAgICAgICAgICAgICAgICAgIGRhdGFfaV9zcmM9ZGF0YV9pLnNyYzsKICAgICAgICAgICAgICAgICAgICBpZiAoaSArIDEgPCBpaSAmJiBkYXRhX2kuaW1nICYmIGRhdGFfaS5pbWcubm9kZU5hbWUgIT0gJ0lNRycgJiYgZGF0YV9pX3NyYyA9PSBkYXRhW2kgKyAxXS5zcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGktLTsKICAgICAgICAgICAgICAgICAgICAgICAgaWktLTsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKGRhdGFTcmNzLmluZGV4T2YoZGF0YV9pX3NyYykhPS0xKXsvL+W3sue7j+WtmOWcqAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnNwbGljZShpLDEpOy8v56e76ZmkCiAgICAgICAgICAgICAgICAgICAgICAgIGktLTsKICAgICAgICAgICAgICAgICAgICAgICAgaWktLTsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGRhdGFTcmNzLnB1c2goZGF0YV9pX3NyYyk7CgogICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldFNyYz09ZGF0YV9pX3NyYyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PWk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpZih0eXBlb2YgaW5kZXggPT0ndW5kZWZpbmVkJyl7CiAgICAgICAgICAgICAgICAgICAgaW5kZXg9MDsKICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS50YXJnZXQpIGRhdGEudW5zaGlmdChkYXRhLnRhcmdldCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZGVsZXRlIGRhdGEudGFyZ2V0OwoKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgZGF0YTpkYXRhLAogICAgICAgICAgICAgICAgICAgIGluZGV4OmluZGV4LAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAga2V5RG93bkxpc3RlbmVyOmZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgc3dpdGNoKGUua2V5Q29kZSl7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICAgICAgICAgICAgaWYocHJlZnMuaW1nV2luZG93LmNsb3NlLmVzY0tleSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGtleVVwTGlzdGVuZXI6ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICBpZiAoZS5jdHJsS2V5IHx8IGUubWV0YUtleSB8fCBlLmFsdEtleSkgcmV0dXJuOwogICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gZS5rZXkgfHwgU3RyaW5nLmZyb21DaGFyQ29kZShlLmtleUNvZGUpOwogICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0ICE9IHRoaXMuZ2FsbGVyeSkgcmV0dXJuOwogICAgICAgICAgICAgICAgc3dpdGNoKGtleS50b0xvd2VyQ2FzZSgpKXsKICAgICAgICAgICAgICAgICAgICBjYXNlICdyJzoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZz10aGlzLmltZzsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNzc1RyYW5zZm9ybT1pbWcuc3R5bGVbc3VwcG9ydC5jc3NUcmFuc2Zvcm1dOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaVRyYW5zZm9ybT1jc3NUcmFuc2Zvcm0ucmVwbGFjZSgvcm90YXRlXChbXildKlwpL2ksJycpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm90YXRlZFJhZGlhbnM9Y3NzVHJhbnNmb3JtLmluZGV4T2YoInJvdGF0ZSIpIT0tMT9jc3NUcmFuc2Zvcm0ucmVwbGFjZSgvLipyb3RhdGVcKChbLVxkXC5dKykuKi9pLCckMScpOjA7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBQST1NYXRoLlBJOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ2luPXBhcnNlRmxvYXQocm90YXRlZFJhZGlhbnMpICsoZS5zaGlmdEtleT8tOTA6OTApICogUEkvMTgwOwogICAgICAgICAgICAgICAgICAgICAgICBpZihvcmlnaW4+PTIqUEkgfHwgb3JpZ2luPD0tMipQSSB8fCgtMC4xPG9yaWdpbiAmJiBvcmlnaW48MC4xKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW49MDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3R5bGVbc3VwcG9ydC5jc3NUcmFuc2Zvcm1dID0gJyByb3RhdGUoJysgb3JpZ2luICsncmFkKSAnICsgaVRyYW5zZm9ybTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSBwcmVmcy5mbG9hdEJhci5rZXlzLmFjdHVhbDoKICAgICAgICAgICAgICAgICAgICBjYXNlIHByZWZzLmZsb2F0QmFyLmtleXMuY3VycmVudDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuc2hpZnRLZXkpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgaW1nUmVhZHkodGhpcy5zcmMsewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHk6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgSW1nV2luZG93Qyh0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIHByZWZzLmZsb2F0QmFyLmtleXMuZG93bmxvYWQ6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5KSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkSW1nKHRoaXMuaW1nLnNyYywgdGhpcy5zZWxlY3RlZC50aXRsZSwgcHJlZnMuc2F2ZU5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2hvdzpmdW5jdGlvbihyZWxvYWQpewogICAgICAgICAgICAgICAgdGhpcy5zaG93bj10cnVlOwogICAgICAgICAgICAgICAgdGhpcy5hZGRTdHlsZSgpOwogICAgICAgICAgICAgICAgZ2FsbGVyeU1vZGU9dHJ1ZTsKCiAgICAgICAgICAgICAgICBpZiAoIXJlbG9hZCkgewogICAgICAgICAgICAgICAgICAgIHZhciBkZXM9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZGVPdmVyZmxvdz17CiAgICAgICAgICAgICAgICAgICAgICAgIHg6ZGVzLm92ZXJmbG93WCwKICAgICAgICAgICAgICAgICAgICAgICAgeTpkZXMub3ZlcmZsb3dZLAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgZGVzLm92ZXJmbG93PSdoaWRkZW4nOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FsbGVyeS5zdHlsZS5kaXNwbGF5PScnOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FsbGVyeS5mb2N1cygpOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLHRoaXMuX3Jlc2l6ZUhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJyx0aGlzLl9rZXlEb3duTGlzdGVuZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsdGhpcy5fa2V5VXBMaXN0ZW5lcix0cnVlKTsKCiAgICAgICAgICAgICAgICBpZihwcmVmcy5nYWxsZXJ5LmxvYWRNb3JlKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZU1hcHNbJ2hlYWQtY29tbWFuZC1uZXh0UGFnZSddLmNsaWNrKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTaXplSW5wdXRSZXNldCgpOwoKICAgICAgICAgICAgICAgIHZhciBzZWxmPXRoaXM7CiAgICAgICAgICAgICAgICBpZihwcmVmcy5nYWxsZXJ5LmF1dG9PcGVuVmlld21vcmUpewogICAgICAgICAgICAgICAgICAgIHZhciB0b2dnbGVCYXIgPSB0aGlzLmVsZU1hcHNbJ3NpZGViYXItdG9nZ2xlJ107CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWxyZWFkeVNob3cgPSB0b2dnbGVCYXIuc3R5bGUudmlzaWJpbGl0eSA9PSAnaGlkZGVuJzsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhbHJlYWR5U2hvdykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5tYXhpbWl6ZVNpZGViYXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNsb3NlOmZ1bmN0aW9uKHJlbG9hZCl7CiAgICAgICAgICAgICAgICBpZih0aGlzLmxvY2tHYWxsZXJ5KXJldHVybjsKICAgICAgICAgICAgICAgIGlmKHRoaXMuaW1nICYmIHRoaXMuaW1nLnBhcmVudE5vZGUpIHRoaXMuaW1nLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5pbWcpOwogICAgICAgICAgICAgICAgaWYodGhpcy5oaWRlQm9keVN0eWxlLnBhcmVudE5vZGUpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlQm9keVN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5oaWRlQm9keVN0eWxlKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLHRoaXMuX2tleURvd25MaXN0ZW5lcix0cnVlKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJyx0aGlzLl9rZXlVcExpc3RlbmVyLHRydWUpOwogICAgICAgICAgICAgICAgdGhpcy5zaG93bj1mYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMubWluaW1pemVkPWZhbHNlOwoKICAgICAgICAgICAgICAgIGlmICghcmVsb2FkKSB7CiAgICAgICAgICAgICAgICAgICAgZ2FsbGVyeU1vZGU9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYWxsZXJ5LmJsdXIoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbGxlcnkuc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRlcz1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGU7CiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5kZU92ZXJmbG93KXsKICAgICAgICAgICAgICAgICAgICAgICAgZGVzLm92ZXJmbG93WD10aGlzLmRlT3ZlcmZsb3cueDsKICAgICAgICAgICAgICAgICAgICAgICAgZGVzLm92ZXJmbG93WT10aGlzLmRlT3ZlcmZsb3cueTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZVNob3cuZXhpdCgpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbi5leGl0KCk7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsdGhpcy5fcmVzaXplSGFuZGxlcix0cnVlKTsKCiAgICAgICAgICAgICAgICAgICAgLy8g6YCA5Ye65YWo5bGPCiAgICAgICAgICAgICAgICAgICAgdmFyIGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwdi1nYWxsZXJ5LWZ1bGxzY3JlZW5idG4nKTsKICAgICAgICAgICAgICAgICAgICBpZiAoYnRuLmNsYXNzTGlzdC5jb250YWlucygnZnVsbHNjcmVlbmJ0bicpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbEZ1bGxTY3JlZW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gaTE4bigiZW50ZXJGdWxsc2MiKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2Z1bGxzY3JlZW5idG4nKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGN1clBhZ2U6ZG9jdW1lbnQsCiAgICAgICAgICAgIGdldFBhZ2U6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGxldCBwYWdlTnVtPTAscHJlU3RyPSIiLGFmdGVyU3RyPSIiOwogICAgICAgICAgICAgICAgbGV0IHBhZ2VNYXRjaDE9dGhpcy5ocmVmLm1hdGNoKC8oLipbYS16QS1aMC05XC9dW1wtX10oPzpwfHBhZ2UpPykoXGQrKShcLmh0bWw/JHxcLz8kKS9pKTsKICAgICAgICAgICAgICAgIGxldCBwYWdlTWF0Y2gyPXRoaXMuaHJlZi5tYXRjaCgvKC4qW1w/Jl1wKD86YWdlKT89KShcZCspKCR8WyMmXC9dLiopL2kpOwogICAgICAgICAgICAgICAgaWYocGFnZU1hdGNoMSl7CiAgICAgICAgICAgICAgICAgICAgcHJlU3RyPXBhZ2VNYXRjaDFbMV07CiAgICAgICAgICAgICAgICAgICAgcGFnZU51bT1wYWdlTWF0Y2gxWzJdOwogICAgICAgICAgICAgICAgICAgIGFmdGVyU3RyPXBhZ2VNYXRjaDFbM107CiAgICAgICAgICAgICAgICB9ZWxzZSBpZihwYWdlTWF0Y2gyKXsKICAgICAgICAgICAgICAgICAgICBwcmVTdHI9cGFnZU1hdGNoMlsxXTsKICAgICAgICAgICAgICAgICAgICBwYWdlTnVtPXBhZ2VNYXRjaDJbMl07CiAgICAgICAgICAgICAgICAgICAgYWZ0ZXJTdHI9cGFnZU1hdGNoMlszXTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHRoaXMuaHJlZj10aGlzLmhyZWYucmVwbGFjZSgvXC8kLywiIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgY3VyUGFnZT10aGlzLmN1clBhZ2U7CiAgICAgICAgICAgICAgICBsZXQgcHJlPWN1clBhZ2UucXVlcnlTZWxlY3RvcigiYS5wcmV2Iil8fAogICAgICAgICAgICAgICAgICAgIGN1clBhZ2UucXVlcnlTZWxlY3RvcigiYSNwcmV2Iil8fAogICAgICAgICAgICAgICAgICAgIGN1clBhZ2UucXVlcnlTZWxlY3RvcigiYSNsZWZ0Rml4Iil8fAogICAgICAgICAgICAgICAgICAgIGN1clBhZ2UucXVlcnlTZWxlY3RvcigiYS5wcmV2X3BhZ2UiKXx8CiAgICAgICAgICAgICAgICAgICAgY3VyUGFnZS5xdWVyeVNlbGVjdG9yKCIucHJldi1wYWdlPmEiKXx8CiAgICAgICAgICAgICAgICAgICAgY3VyUGFnZS5xdWVyeVNlbGVjdG9yKCIucHJldj5hIik7CiAgICAgICAgICAgICAgICBsZXQgbmV4dD1jdXJQYWdlLnF1ZXJ5U2VsZWN0b3IoImEubmV4dCIpfHwKICAgICAgICAgICAgICAgICAgICBjdXJQYWdlLnF1ZXJ5U2VsZWN0b3IoImEjbmV4dCIpfHwKICAgICAgICAgICAgICAgICAgICBjdXJQYWdlLnF1ZXJ5U2VsZWN0b3IoImEjcmlnaHRGaXgiKXx8CiAgICAgICAgICAgICAgICAgICAgY3VyUGFnZS5xdWVyeVNlbGVjdG9yKCJhLm5leHRfcGFnZSIpfHwKICAgICAgICAgICAgICAgICAgICBjdXJQYWdlLnF1ZXJ5U2VsZWN0b3IoIi5uZXh0LXBhZ2U+YSIpfHwKICAgICAgICAgICAgICAgICAgICBjdXJQYWdlLnF1ZXJ5U2VsZWN0b3IoIi5uZXh0PmEiKTsKICAgICAgICAgICAgICAgIGlmKCFwcmUgJiYgIW5leHQpewogICAgICAgICAgICAgICAgICAgIGxldCBwYWdlRGl2PWN1clBhZ2UucXVlcnlTZWxlY3RvcigiZGl2LndwLXBhZ2VuYXZpIik7CiAgICAgICAgICAgICAgICAgICAgaWYocGFnZURpdil7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXI9cGFnZURpdi5xdWVyeVNlbGVjdG9yKCJzcGFuLmN1cnJlbnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcHJlPWN1ci5wcmV2aW91c1NpYmxpbmc7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQ9Y3VyLm5leHRTaWJsaW5nOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VyPWN1clBhZ2UucXVlcnlTZWxlY3RvcigiZGl2LmFydGljbGUtcGFnaW5nPnNwYW4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoY3VyKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZT1jdXIucHJldmlvdXNFbGVtZW50U2libGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQ9Y3VyLm5leHRFbGVtZW50U2libGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKHByZSAmJiAoIXByZS5ocmVmIHx8IC9qYXZhc2NyaXB0Oi8udGVzdChwcmUuaHJlZi50cmltKCkpKSlwcmU9bnVsbDsKICAgICAgICAgICAgICAgIGlmKG5leHQgJiYgKCFuZXh0LmhyZWYgfHwgL2phdmFzY3JpcHQ6Ly50ZXN0KG5leHQuaHJlZi50cmltKCkpKSluZXh0PW51bGw7CiAgICAgICAgICAgICAgICBpZighcHJlIHx8ICFuZXh0KXsKICAgICAgICAgICAgICAgICAgICBsZXQgYVRhZ3M9Y3VyUGFnZS5xdWVyeVNlbGVjdG9yQWxsKCJhIik7CiAgICAgICAgICAgICAgICAgICAgaWYoIXByZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwcmVmLHByZXMscHJldDsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7aTxhVGFncy5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhVGFnPWFUYWdzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWFUYWcuaHJlZiB8fCAvamF2YXNjcmlwdDovLnRlc3QoYVRhZy5ocmVmLnRyaW0oKSkpY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihwcmVmICYmIHByZXMgJiYgcHJldClicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFwcmVmKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigvKFxzfF4p5LiKW+S4gDFdP1vpobXpoIHlvKDlvLXor53oqbHnq6BdfF5wcmV2aW91cyggcGFnZSk/XHMqJHzliY3jga7jg5rjg7zjgrgvaS50ZXN0KGFUYWcuaW5uZXJIVE1MKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWY9YVRhZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighcHJlcyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYVRhZy5pbm5lckhUTUw9PSImbHQ7Iil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXM9YVRhZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighcHJldCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYVRhZy5pbm5lckhUTUw9PSLCqyIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV0PWFUYWc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYocGFnZU51bT09MSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFUYWcuaHJlZi5pbmRleE9mKHRoaXMuaHJlZi5yZXBsYWNlKC8uKlwvKFteXC9dKykkLywiJDEiKS5yZXBsYWNlKC9bXy1dXGQrLywiIikpIT0tMSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXQ9YVRhZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGFUYWcuaHJlZi5yZXBsYWNlKHByZVN0ciwiIikucmVwbGFjZShhZnRlclN0ciwiIik9PXBhZ2VOdW0tMSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXQ9YVRhZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcHJlPXByZWZ8fHByZXN8fHByZXQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKCFuZXh0KXsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5leHRmLG5leHRzLG5leHR0OwogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDtpPGFUYWdzLmxlbmd0aDtpKyspewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFUYWc9YVRhZ3NbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighYVRhZy5ocmVmIHx8IC9eXHMqamF2YXNjcmlwdDovLnRlc3QoYVRhZy5ocmVmLnRyaW0oKSkpY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihuZXh0ZiAmJiBuZXh0cyAmJiBuZXh0dClicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFuZXh0Zil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoLyhcc3xeKeS4i1vkuIAxXT9b6aG16aCB5byg5by16K+d6Kmx56ugXXxebmV4dCggcGFnZSk/XHMqJHzmrKHjga7jg5rjg7zjgrgvaS50ZXN0KGFUYWcuaW5uZXJIVE1MKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRmPWFUYWc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIW5leHRzKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhVGFnLmlubmVySFRNTD09IiZndDsiKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dHM9YVRhZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighbmV4dHQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFUYWcuaW5uZXJIVE1MPT0iwrsiKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dHQ9YVRhZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihhVGFnLmhyZWYucmVwbGFjZShwcmVTdHIsIiIpLnJlcGxhY2UoYWZ0ZXJTdHIsIiIpPT1wYXJzZUludChwYWdlTnVtKSsxKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dHQ9YVRhZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihhVGFnLmhyZWYuaW5kZXhPZih0aGlzLmhyZWYpIT0tMSAmJiAvXltcL1w/Jl0/W18tXT8ocHxwYWdlKT89P1sxMl1cLz8oXD98JnwkKS9pLnRlc3QoYVRhZy5ocmVmLnJlcGxhY2UodGhpcy5ocmVmLCIiKSkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0dD1hVGFnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJldkVsZSA9IGFUYWcucHJldmlvdXNFbGVtZW50U2libGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZFbGUgJiYgKHByZXZFbGUubm9kZU5hbWUgPT0gJ0InIHx8IHByZXZFbGUubm9kZU5hbWUgPT0gJ1NQQU4nKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC9eXGQrJC8udGVzdChhVGFnLmlubmVyVGV4dCkgJiYgcGFyc2VJbnQoYVRhZy5pbm5lclRleHQpID09IHBhcnNlSW50KHByZXZFbGUuaW5uZXJUZXh0KSArIDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0dCA9IGFUYWc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgbmV4dD1uZXh0Znx8bmV4dHN8fG5leHR0OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKCFwcmUpcHJlPWN1clBhZ2UucXVlcnlTZWxlY3RvcignW3JlbD0icHJldiJdLFtyZWw9InByZXZpb3VzIl0nKTsKICAgICAgICAgICAgICAgIGlmKCFuZXh0KW5leHQ9Y3VyUGFnZS5xdWVyeVNlbGVjdG9yKCdbcmVsPSJuZXh0Il0nKTsKICAgICAgICAgICAgICAgIHJldHVybiB7cHJlOnByZSxuZXh0Om5leHR9OwogICAgICAgICAgICB9LAogICAgICAgICAgICBjb21wbGV0ZVBhZ2VzOltsb2NhdGlvbi5ocmVmXSwKICAgICAgICAgICAgaHJlZjpsb2NhdGlvbi5ocmVmLAogICAgICAgICAgICBwYWdlQWxsUmVhZHk6ZmFsc2UsCiAgICAgICAgICAgIGxvYWRpbmdJbWdOdW06MCwKICAgICAgICAgICAgbG9hZGluZ0ltZ3M6W10sCiAgICAgICAgICAgIHBhZ2VJbWdSZWFkeTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdmFyIHRleHRTcGFuPXRoaXMuZWxlTWFwc1snaGVhZC1jb21tYW5kLW5leHRQYWdlJ10ucXVlcnlTZWxlY3Rvcigic3BhbiIpOwogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVhZHlUaW1lb3V0KTsKICAgICAgICAgICAgICAgIHRoaXMucmVhZHlUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5wYWdlQWxsUmVhZHkgJiYgdGhpcy5sb2FkaW5nSW1nTnVtPD0wKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFNwYW4uaW5uZXJIVE1MPWNyZWF0ZUhUTUwoIjxmb250IGNvbG9yPSdyZWQnPiIraTE4bigibG9hZGVkQWxsIikrIjwvZm9udD4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe3RleHRTcGFuLmlubmVySFRNTD1jcmVhdGVIVE1MKGkxOG4oImxvYWRBbGwiKSk7fSwxNTAwKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCAxMTAwKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGFnZUFjdGlvbjpmdW5jdGlvbihuZXh0LCBzaW5nbGUpewogICAgICAgICAgICAgICAgdmFyIHBhZ2VPYmo9dGhpcy5nZXRQYWdlKCksc2VsZj10aGlzLHRleHRTcGFuPXRoaXMuZWxlTWFwc1snaGVhZC1jb21tYW5kLW5leHRQYWdlJ10ucXVlcnlTZWxlY3Rvcigic3BhbiIpOwogICAgICAgICAgICAgICAgaWYodGV4dFNwYW4uaW5uZXJIVE1MIT1pMThuKCJsb2FkaW5nIikpewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBsb2FkT3Zlcj1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIGlmKCFuZXh0IHx8ICFwcmVmcy5nYWxsZXJ5LmxvYWRBbGwgfHwgc2luZ2xlKXsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlQWxsUmVhZHk9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlSW1nUmVhZHkoKTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jdXJQYWdlPWRvY3VtZW50OwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhyZWY9bG9jYXRpb24uaHJlZjsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlQWN0aW9uKGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgaWYoKG5leHQgJiYgIXBhZ2VPYmoubmV4dCkgfHwgKCFuZXh0ICYmICFwYWdlT2JqLnByZSkpewogICAgICAgICAgICAgICAgICAgIGxvYWRPdmVyKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIHRhcmdldFVybD1uZXh0P3BhZ2VPYmoubmV4dDpwYWdlT2JqLnByZTsKICAgICAgICAgICAgICAgIGlmKHRhcmdldFVybC5ub2RlTmFtZSE9IkEiKXsKICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRBPXRhcmdldFVybC5xdWVyeVNlbGVjdG9yKCJhIik7CiAgICAgICAgICAgICAgICAgICAgaWYoY2hpbGRBKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0VXJsPWNoaWxkQTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUodGFyZ2V0VXJsPXRhcmdldFVybC5wYXJlbnRFbGVtZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldFVybC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpPT0nQScpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0YXJnZXRVcmwpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBocmVmPXRhcmdldFVybC5nZXRBdHRyaWJ1dGUoImhyZWYiKTsKICAgICAgICAgICAgICAgIGlmKHNlbGYuY29tcGxldGVQYWdlcy5pbmRleE9mKGhyZWYpIT0tMSl7CiAgICAgICAgICAgICAgICAgICAgbG9hZE92ZXIoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbXBsZXRlUGFnZXMucHVzaChocmVmKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNlbGYuaHJlZiA9IGNhbm9uaWNhbFVyaShocmVmKTsKICAgICAgICAgICAgICAgIHNlbGYuYWRkUGFnZUltYWdlcyhzZWxmLmhyZWYsIGh0bWwgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChodG1sKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3VyUGFnZSA9IGh0bWw7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChwcmVmcy5nYWxsZXJ5LmxvYWRBbGwgJiYgIXNpbmdsZSkgewogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZUFjdGlvbihuZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgMSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGxvYWRPdmVyKCk7CiAgICAgICAgICAgICAgICB9LCB0cnVlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYWRkUGFnZUltYWdlczogZnVuY3Rpb24odXJsLCBwYWdlQ2IsIGNoZWNrUmVhZHkpIHsKICAgICAgICAgICAgICAgIGxldCBzZWxmID0gdGhpczsKICAgICAgICAgICAgICAgIF9HTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOnsiUmVmZXJlciI6ICsgdXJsfSwKICAgICAgICAgICAgICAgICAgICBjb29raWU6IGNvb2tpZSwKICAgICAgICAgICAgICAgICAgICBvdmVycmlkZU1pbWVUeXBlOiJ0ZXh0L2h0bWw7Y2hhcnNldD0iK2RvY3VtZW50LmNoYXJzZXQsCiAgICAgICAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBodG1sID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5kb2N1bWVudEVsZW1lbnQuaW5uZXJIVE1MID0gZC5yZXNwb25zZVRleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWdzID0gaHRtbC5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wdi1nYWxsZXJ5LWNvbnRhaW5lcicpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlbG9hZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wdi1nYWxsZXJ5LXByZWxvYWRlZC1pbWctY29udGFpbmVyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiYXNlID0gaHRtbC5xdWVyeVNlbGVjdG9yKCJiYXNlIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiYXNlUGF0aCA9IGJhc2UgPyBiYXNlLmhyZWYgOiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBpbWdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoaW1ncykuZmlsdGVyKGZ1bmN0aW9uKGltZyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb250YWluZXIuY29udGFpbnMoaW1nKSB8fCAocHJlbG9hZENvbnRhaW5lciYmcHJlbG9hZENvbnRhaW5lci5jb250YWlucyhpbWcpKSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltZy5nZXRBdHRyaWJ1dGUgJiYgaW1nLmdldEF0dHJpYnV0ZSgic3JjIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3JjQXR0ID0gaW1nLmdldEF0dHJpYnV0ZSgic3JjIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNyY0F0dC5pbmRleE9mKCJodHRwIikgIT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjQXR0ID0gY2Fub25pY2FsVXJpKHNyY0F0dCwgdXJsLCBiYXNlUGF0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZy5zZXRBdHRyaWJ1dGUoInNyYyIsIHNyY0F0dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldHJlYXRtZW50KGltZywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighaW1nLnNyYyB8fCAoaW1nLmdldEF0dHJpYnV0ZSAmJiAhaW1nLmdldEF0dHJpYnV0ZSgic3JjIikpKXJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc3JjPWltZy5zcmMudHJpbSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWlzcmMpcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGZpbmRQaWMoaW1nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LnNyYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLl9kYXRhQ2FjaGVbcmVzdWx0LnNyY10pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RhdGFDYWNoZVtyZXN1bHQuc3JjXSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBsb2FkSW1nKGltZyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWcub25lcnJvciA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gZmluZFBpYyhpbWcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrUmVhZHkpIHNlbGYubG9hZGluZ0ltZ051bSsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC54aHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHJMb2FkLmxvYWQoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHJlc3VsdC5zcmMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhocjogcmVzdWx0LnhociwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2I6IGZ1bmN0aW9uKGltZ1NyYywgaW1nU3JjcywgY2FwdGlvbiwgY2FwdGlvbnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWdTcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdSZWFkeShpbWcsewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkeTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZmluZFBpYyhpbWcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNyYyA9IGltZ1NyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYXB0aW9uKSByZXN1bHQuZGVzY3JpcHRpb24gPSBjYXB0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrUmVhZHkpIHNlbGYubG9hZGluZ0ltZ051bS0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXRhLnB1c2gocmVzdWx0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2FwcGVuZFRodW1iU3BhbnMoW3Jlc3VsdF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkVGh1bWIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja1JlYWR5KSBzZWxmLnBhZ2VJbWdSZWFkeSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrUmVhZHkpIHNlbGYubG9hZGluZ0ltZ051bS0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrUmVhZHkpIHNlbGYucGFnZUltZ1JlYWR5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1nU3JjcyAmJiBpbWdTcmNzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1NyY3MuZm9yRWFjaChzcmMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNyYyA9PSBpbWdTcmMpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSBzcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2FwID0gY2FwdGlvbnMgJiYgY2FwdGlvbnNbaV0gPyBjYXB0aW9uc1tpXSA6IGNhcHRpb247CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdSZWFkeShpbWcsewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWR5OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBmaW5kUGljKGltZyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYXApIHJlc3VsdC5kZXNjcmlwdGlvbiA9IGNhcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXRhLnB1c2gocmVzdWx0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fYXBwZW5kVGh1bWJTcGFucyhbcmVzdWx0XSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZFRodW1iKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tSZWFkeSkgc2VsZi5sb2FkaW5nSW1nTnVtLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrUmVhZHkpIHNlbGYucGFnZUltZ1JlYWR5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uZXJyb3I6ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja1JlYWR5KSBzZWxmLmxvYWRpbmdJbWdOdW0tLTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja1JlYWR5KSBzZWxmLnBhZ2VJbWdSZWFkeSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSByZXN1bHQuc3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nUmVhZHkoaW1nLHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWR5OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZmluZFBpYyhpbWcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja1JlYWR5KSBzZWxmLmxvYWRpbmdJbWdOdW0tLTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRhdGEucHVzaChyZXN1bHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2FwcGVuZFRodW1iU3BhbnMoW3Jlc3VsdF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZFRodW1iKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrUmVhZHkpIHNlbGYucGFnZUltZ1JlYWR5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tSZWFkeSkgc2VsZi5sb2FkaW5nSW1nTnVtLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrUmVhZHkpIHNlbGYucGFnZUltZ1JlYWR5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighcHJlbG9hZENvbnRhaW5lcilwcmVsb2FkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnB2LWdhbGxlcnktcHJlbG9hZGVkLWltZy1jb250YWluZXInKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWxvYWRDb250YWluZXImJnByZWxvYWRDb250YWluZXIuYXBwZW5kQ2hpbGQoaW1nKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZihwcmVmcy5nYWxsZXJ5LmRvd25sb2FkR2FwID4gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRpbmdJbWdzPXNlbGYubG9hZGluZ0ltZ3MuY29uY2F0KGltZ3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXNlbGYubG9hZEludHYpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEludHY9c2V0SW50ZXJ2YWwoKCk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltZz1zZWxmLmxvYWRpbmdJbWdzLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFpbWcpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLmxvYWRJbnR2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEludHY9bnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2hhbmdlU2l6ZUlucHV0UmVzZXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgbG9hZEltZyhpbWcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0scHJlZnMuZ2FsbGVyeS5kb3dubG9hZEdhcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1ncy5mb3JFYWNoKGZ1bmN0aW9uKGltZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRJbWcoaW1nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VDYiAmJiBwYWdlQ2IoaHRtbCk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBvbmVycm9yOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VDYiAmJiBwYWdlQ2IobnVsbCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJ1bk9uY2U6ZnVuY3Rpb24oKXsvL+i/kOihjOS4gOasoeadpeiOt+WPluafkOS6m+aVsOaNruOAggogICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkKSByZXR1cm47CiAgICAgICAgICAgICAgICB2YXIgdGh1bWJTcGFuQ1M9dW5zYWZlV2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5zZWxlY3RlZCk7CiAgICAgICAgICAgICAgICB0aGlzLnRodW1iU3Bhbk91dGVyU2l6ZT10aGlzLmlzSG9yaXpvbnRhbD8KICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkLm9mZnNldFdpZHRoICsgcGFyc2VGbG9hdCh0aHVtYlNwYW5DUy5tYXJnaW5MZWZ0KSArIHBhcnNlRmxvYXQodGh1bWJTcGFuQ1MubWFyZ2luUmlnaHQpIDoKICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQub2Zmc2V0SGVpZ2h0ICsgcGFyc2VGbG9hdCh0aHVtYlNwYW5DUy5tYXJnaW5Ub3ApICsgcGFyc2VGbG9hdCh0aHVtYlNwYW5DUy5tYXJnaW5Cb3R0b20pOwoKCgogICAgICAgICAgICAgICAgdGhpcy5ydW5PbmNlPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgbWluaW1pemU6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTsKICAgICAgICAgICAgICAgIHRoaXMubWF4aW1pemVUcmlnZ2VyLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsKICAgICAgICAgICAgICAgIHRoaXMubWluaW1pemVkPXRydWU7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG5hdmlnYXRlVG9JbWc6ZnVuY3Rpb24odGFyZ2V0SW1nKXsKICAgICAgICAgICAgICAgIHRhcmdldEltZy5zY3JvbGxJbnRvVmlldygpOy8v5YWI6LCD55So5Y6f5pa55rOV77yM5Y+v5Lul6K6pb3ZlcmZsb3cgaGlkZGVu55qE5rua5Yqo5Ye65p2l44CCCgogICAgICAgICAgICAgICAgLy/orqnlm77niYfov5Hlj6/og73nmoTlsYXkuK0KICAgICAgICAgICAgICAgIHZhciBpbWdCQ1JlY3Q9Z2V0Q29udGVudENsaWVudFJlY3QodGFyZ2V0SW1nKTsKICAgICAgICAgICAgICAgIHZhciB3U2l6ZT1nZXRXaW5kb3dTaXplKCk7CgogICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbEJ5KGltZ0JDUmVjdC5sZWZ0IC0gKHdTaXplLncgLSBpbWdCQ1JlY3Qud2lkdGgpLzIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nQkNSZWN0LnRvcCAtICh3U2l6ZS5oIC0gaW1nQkNSZWN0LmhlaWdodCkvMik7CgogICAgICAgICAgICB9LAogICAgICAgICAgICBzd2l0Y2hUaHVtYlZpc2libGU6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHZhciBzdHlsZT10aGlzLnRodW1iVmlzaWJsZVN0eWxlOwogICAgICAgICAgICAgICAgdmFyIGNvdW50PTA7CiAgICAgICAgICAgICAgICB2YXIgc3R5bGVUZXh0PVtdOwogICAgICAgICAgICAgICAgdmFyIGlTdGF0aXNDb3B5PXRoaXMuaVN0YXRpc0NvcHk7CiAgICAgICAgICAgICAgICB2YXIgaVN0YXRpc0NvcHlfaTsKCiAgICAgICAgICAgICAgICBmb3IodmFyIGkgaW4gaVN0YXRpc0NvcHkpewogICAgICAgICAgICAgICAgICAgIGlmKCFpU3RhdGlzQ29weS5oYXNPd25Qcm9wZXJ0eShpKSljb250aW51ZTsKICAgICAgICAgICAgICAgICAgICBpU3RhdGlzQ29weV9pPWlTdGF0aXNDb3B5W2ldOwogICAgICAgICAgICAgICAgICAgIGlmKGlTdGF0aXNDb3B5X2kuc2hvd24pewogICAgICAgICAgICAgICAgICAgICAgICBjb3VudCs9aVN0YXRpc0NvcHlfaS5jb3VudDsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVUZXh0LnB1c2goJy5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWItY29udGFpbmVyW2RhdGEtdHlwZT0iJytpKyciXScpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIC8v5YaZ5YWlc3R5bGU7CiAgICAgICAgICAgICAgICBzdHlsZS50ZXh0Q29udGVudD1zdHlsZVRleHQuam9pbignLCcpICsgJ3tkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9JzsKCiAgICAgICAgICAgICAgICAvL+WIneWni+WMlue8qeeVpeWbvuWMuueahOa7muWKqOadoQogICAgICAgICAgICAgICAgdGhpcy50aHVtYlNjcm9sbGJhci5yZXNldCgpOwogICAgICAgICAgICAgICAgdGhpcy5hcnJvd1Zpc2liKCk7CgogICAgICAgICAgICAgICAgLy/ovb3lhaXnvKnnlaXlm74KICAgICAgICAgICAgICAgIHRoaXMubG9hZFRodW1iKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZvcmNlUmVwYWludDpmdW5jdGlvbigpey8v6Kej5Yazb3BlcmHnmoRmaXhlZOWFg+e0oO+8jOW9k+a7muWKqOadoeS4jeWGjeacgOmrmOWkhOeahOaXtuWAme+8jOS4jemHjee7mGZpeGVk5YWD57Sg55qE6Zeu6aKY44CCCiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5mb3JjZVJlcGFpbnRUaW1lcik7CiAgICAgICAgICAgICAgICB2YXIgc2VsZj10aGlzOwogICAgICAgICAgICAgICAgdGhpcy5mb3JjZVJlcGFpbnRUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgaWYoZW52aXIub3BlcmEpewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZvcmNlUmVwYWludFRpbWVzICUgMiA9PTAgPyB3aW5kb3cuc2Nyb2xsQnkoMCwxKSA6IHdpbmRvdy5zY3JvbGxCeSgwLC0xKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mb3JjZVJlcGFpbnRUaW1lcysrOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LDMzMyk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlc2l6ZUhhbmRsZXI6ZnVuY3Rpb24oKXsvL+eql+WPo+WPmOWMluaXtu+8jOiwg+aVtOS4gOS6m+S4nOilv+OAggogICAgICAgICAgICAgICAgdGhpcy50aHVtYlNjcm9sbGJhci5yZXNldCgpOwogICAgICAgICAgICAgICAgLy90aGlzLnNlbGVjdGVkSW50b1ZpZXcoKTsKICAgICAgICAgICAgICAgIHRoaXMuZml0VG9TY3JlZW4oKTsKICAgICAgICAgICAgICAgIHRoaXMubG9hZFRodW1iKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF9pc0xhc3RTcGFuOiBmdW5jdGlvbihzcGFuKSB7Ly8g55So5LqO5Yik5pat5piv5ZCm6Ieq5Yqo6YeN6L2977yM5piv5ZCm5piv5pyA5ZCO5Yeg5Liq5Zu+54mHCiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZC5jbGllbnRXaWR0aCA9PSAwKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybiB0cnVlOwoKICAgICAgICAgICAgICAgIHZhciBub2RlcyA9IHRoaXMuZWxlTWFwc1snc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lciddLmNoaWxkcmVuOwogICAgICAgICAgICAgICAgdmFyIGltZ1NwYW5zID0gW107CiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwobm9kZXMsIGZ1bmN0aW9uKG5vZGUpewogICAgICAgICAgICAgICAgICAgIGlmKHVuc2FmZVdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5vZGUpLmRpc3BsYXkhPSJub25lIil7CiAgICAgICAgICAgICAgICAgICAgICAgIGltZ1NwYW5zLnB1c2gobm9kZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoaW1nU3BhbnMpLmluZGV4T2Yoc3Bhbik7CiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWwgPSBpbWdTcGFucy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRvdGFsIC0gaW5kZXggPCBwcmVmcy5nYWxsZXJ5LnNjcm9sbEVuZEFuZExvYWRfbnVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXJyb3dWaXNpYjpmdW5jdGlvbihjaGVja0VuZCl7Ly/lvZPlvZPliY3pgInmi6nlhYPntKDnmoTliY3pnaLmiJbogIXlkI7pnaLmsqHmnInlhYPntKDnmoTml7blgJnpmpDol4/mjqfliLbnrq3lpLQKCiAgICAgICAgICAgICAgICB2YXIgaWNwcz10aGlzLmVsZU1hcHNbJ2ltZy1jb250cm9sZXItcHJlJ10uc3R5bGU7CiAgICAgICAgICAgICAgICB2YXIgaWNucz10aGlzLmVsZU1hcHNbJ2ltZy1jb250cm9sZXItbmV4dCddLnN0eWxlOwogICAgICAgICAgICAgICAgdmFyIHNjcHM9dGhpcy5lbGVNYXBzWydzaWRlYmFyLWNvbnRyb2xlci1wcmUnXS5zdHlsZTsKICAgICAgICAgICAgICAgIHZhciBzY25zPXRoaXMuZWxlTWFwc1snc2lkZWJhci1jb250cm9sZXItbmV4dCddLnN0eWxlOwoKICAgICAgICAgICAgICAgIC8v5LiL5LiA5byg55qE566t5aS0CiAgICAgICAgICAgICAgICB2YXIgbmV4dFNwYW4gPSB0aGlzLmdldFRodW1TcGFuKCk7CiAgICAgICAgICAgICAgICBpZiAobmV4dFNwYW4pIHsKICAgICAgICAgICAgICAgICAgICBpY25zLmRpc3BsYXk9Jyc7CiAgICAgICAgICAgICAgICAgICAgc2Nucy5kaXNwbGF5PScnOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgaWNucy5kaXNwbGF5PSdub25lJzsKICAgICAgICAgICAgICAgICAgICBzY25zLmRpc3BsYXk9J25vbmUnOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvLyDmnIDlkI7lh6DlvKDlm77niYfvvIzmu5rliLDlupXpg6jmt7vliqDmlrDnmoTlm77niYcKICAgICAgICAgICAgICAgIGlmIChwcmVmcy5nYWxsZXJ5LnNjcm9sbEVuZEFuZExvYWQgJiYgY2hlY2tFbmQgJiYgKCFuZXh0U3BhbiB8fCB0aGlzLl9pc0xhc3RTcGFuKG5leHRTcGFuKSkpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvRW5kQW5kUmVsb2FkKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy/kuIrkuIDlvKDnmoTnrq3lpLQKICAgICAgICAgICAgICAgIGlmKHRoaXMuZ2V0VGh1bVNwYW4odHJ1ZSkpewogICAgICAgICAgICAgICAgICAgIGljcHMuZGlzcGxheT0nJzsKICAgICAgICAgICAgICAgICAgICBzY3BzLmRpc3BsYXk9Jyc7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBpY3BzLmRpc3BsYXk9J25vbmUnOwogICAgICAgICAgICAgICAgICAgIHNjcHMuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9LAogICAgICAgICAgICBzaW1wbGVTbGlkZVNob3c6ZnVuY3Rpb24oYmFja3dhcmQsaW50ZXJ2YWwpewogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnNsaWRlU2hvd0ludGVydmFsKTsvL+W5u+eBr+aSreaUvu+8jOWPquWFgeiuuOWtmOWcqOS4gOS4qu+8jOWQpuWImeW+l+S5seWllwoKICAgICAgICAgICAgICAgIHZhciBzZWxmPXRoaXM7CiAgICAgICAgICAgICAgICB2YXIgc2xpZGVTaG93SW50ZXJ2YWw9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICB2YXIgYmVmb3JlPXNlbGYuc2VsZWN0ZWQ7CiAgICAgICAgICAgICAgICAgICAgYmFja3dhcmQgPyBzZWxmLnNlbGVjdFByZXZpb3VzKCkgOiBzZWxmLnNlbGVjdE5leHQoKTsKICAgICAgICAgICAgICAgICAgICBpZihiZWZvcmUgPT0gc2VsZi5zZWxlY3RlZCl7Ly/msqHmnInkuIvkuIDkuKrlhYPntKDkuobjgILjgIIKICAgICAgICAgICAgICAgICAgICAgICAgc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LChpbnRlcnZhbD8gaW50ZXJ2YWwgOiA4MDApKTsKCiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlU2hvd0ludGVydmFsPXNsaWRlU2hvd0ludGVydmFsOwoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN0b3AoKXsKICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHNsaWRlU2hvd0ludGVydmFsKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcmV0dXJuIHN0b3A7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICByZWxvYWQ6IGFzeW5jIGZ1bmN0aW9uKCkgey8vIOmHjeaWsOWKoOi9veaJgOacieWbvueJh+WIsOW6k+mHjOmdogogICAgICAgICAgICAgICAgLy8g5Ye95pWw5ZyoIExvYWRpbmdBbmltQyDkuK0KICAgICAgICAgICAgICAgIHZhciBkYXRhID0gYXdhaXQgdGhpcy5nZXRBbGxWYWxpZEltZ3MoKTsKICAgICAgICAgICAgICAgIC8vIOiuvue9ruW9k+WJjemAieS4reeahOWbvueJhwogICAgICAgICAgICAgICAgZGF0YS50YXJnZXQgPSB7CiAgICAgICAgICAgICAgICAgICAgc3JjOiB0aGlzLnNlbGVjdGVkLmRhdGFzZXQuc3JjCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UodHJ1ZSk7CgogICAgICAgICAgICAgICAgdGhpcy5sb2FkKGRhdGEsIG51bGwsIHRydWUpOwogICAgICAgICAgICB9LAogICAgICAgICAgICByZWxvYWROZXc6IGFzeW5jIGZ1bmN0aW9uKCkgey8vIOWKoOi9veaWsOeahOWbvueJh+WIsOW6k+mHjOmdogogICAgICAgICAgICAgICAgdmFyIG5ld2VyID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHZhciBkYXRhID0gYXdhaXQgdGhpcy5nZXRBbGxWYWxpZEltZ3MobmV3ZXIpOwogICAgICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXBwZW5kVGh1bWJTcGFucyhkYXRhKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0QWxsVmFsaWRJbWdzOmFzeW5jIGZ1bmN0aW9uKG5ld2VyLCBjaGVja0xpc3RlbkJnKXsKICAgICAgICAgICAgICAgIGxldCB2YWxpZEltZ3MgPSBbXTsKICAgICAgICAgICAgICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHYtZ2FsbGVyeS1jb250YWluZXInKSwKICAgICAgICAgICAgICAgICAgICBwcmVsb2FkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnB2LWdhbGxlcnktcHJlbG9hZGVkLWltZy1jb250YWluZXInKTsKCiAgICAgICAgICAgICAgICBsZXQgYmdSZWcgPSAvXlxzKnVybFwoXHMqWyInXT8oW15hZFxzJyIjXS4rPylbIiddP1xzKlwpKFteJyJdfCQpL2k7CiAgICAgICAgICAgICAgICBsZXQgYm9keSA9IGdldEJvZHkoZG9jdW1lbnQpOwogICAgICAgICAgICAgICAgbGV0IGxpbmtNZWRpYXMgPSBbXTsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFueWxpemVFbGUodG90YWwsIG5vZGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoL15pZnJhbWUkL2kudGVzdChub2RlLm5vZGVOYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5uYW1lID09ICJwYWdldHVhbC1pZnJhbWUiKSByZXR1cm4gdG90YWw7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbm9kZS5zcmMgfHwgKG5vZGUuc3JjICYmIChub2RlLnNyYyA9PSAiYWJvdXQ6YmxhbmsiIHx8IG5vZGUuc3JjLnJlcGxhY2UoL1wvW15cL10qJC8sIiIpLmluZGV4T2YobG9jYXRpb24uaG9zdG5hbWUpICE9IC0xKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlGbi5mb3JFYWNoLmNhbGwobm9kZS5jb250ZW50V2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyonKSwgZnVuY3Rpb24obil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsID0gYW55bGl6ZUVsZSh0b3RhbCwgbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhlLnRvU3RyaW5nKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b3RhbDsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC9eaW1nJC9pLnRlc3Qobm9kZS5ub2RlTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdG90YWwucHVzaChub2RlKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC9ec3ZnJC9pLnRlc3Qobm9kZS5ub2RlTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuY2xpZW50SGVpZ2h0ICE9IDAgJiYgKCFub2RlLmNsYXNzTGlzdCB8fCAhbm9kZS5jbGFzc0xpc3QuY29udGFpbnMoInBhZ2V0dWFsIikpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWFnZXMgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltYWdlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlGbi5mb3JFYWNoLmNhbGwoaW1hZ2VzLCBmdW5jdGlvbihpbWFnZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3JjID0gaW1hZ2UuaHJlZiAmJiBpbWFnZS5ocmVmLmJhc2VWYWw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2Uuc3JjID0gY2Fub25pY2FsVXJpKHNyYywgaW1hZ2Uub3duZXJEb2N1bWVudC5VUkwsIGltYWdlLm93bmVyRG9jdW1lbnQuYmFzZVVSSSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWwucHVzaChpbWFnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHhtbCA9IG5ldyBYTUxTZXJpYWxpemVyKCkuc2VyaWFsaXplVG9TdHJpbmcobm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IEltZ0Jhc2U2NCA9IGBkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LCR7d2luZG93LmJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHhtbCkpKX1gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNyYyA9IEltZ0Jhc2U2NDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWwucHVzaChub2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoL15jYW52YXMkL2kudGVzdChub2RlLm5vZGVOYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5jbGllbnRIZWlnaHQgIT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGUuc3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc3JjID0gbm9kZS50b0RhdGFVUkwoImltYWdlL3BuZyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkge30KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGUuc3JjICYmIG5vZGUuZGF0YXNldC5zcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc3JjID0gbm9kZS5kYXRhc2V0LnNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5zcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsLnB1c2gobm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC9eYSQvaS50ZXN0KG5vZGUubm9kZU5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZVJlZy50ZXN0KG5vZGUuaHJlZikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcmMgPSBub2RlLmhyZWY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoL1smXD9ddXJsXD0vLnRlc3Qoc3JjKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA9IHNyYy5yZXBsYWNlKC8uKlsmXD9ddXJsXD0oLio/KSgmLip8JCkvLCAiJDEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmMgPSBkZWNvZGVVUklDb21wb25lbnQoc3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvWyZcP11odHRwcz86Ly50ZXN0KHNyYykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmMgPSBzcmMucmVwbGFjZSgvLipbJlw/XShodHRwcz86KS8sICIkMSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA9IGRlY29kZVVSSUNvbXBvbmVudChzcmMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNyYyA9IHNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtNZWRpYXMucHVzaChub2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5zaGFkb3dSb290KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBub2RlcyA9IG5vZGUuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yQWxsKCcqJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsID0gYW55bGl6ZUVsZSh0b3RhbCwgbm9kZXNbaV0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChjaGVja0xpc3RlbkJnICYmICFwcmVmcy5mbG9hdEJhci5saXN0ZW5CZykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG90YWw7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKCFub2RlLmNsYXNzTmFtZSB8fCAhbm9kZS5jbGFzc05hbWUuaW5kZXhPZiB8fCBub2RlLmNsYXNzTmFtZS5pbmRleE9mKCJwdi0iKT09LTEpewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJvcCA9IGdldENvbXB1dGVkU3R5bGUobm9kZSkuYmFja2dyb3VuZEltYWdlOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGFzU3JjID0gL14oYXVkaW98ZW1iZWR8aWZyYW1lfGltZ3xpbnB1dHxzY3JpcHR8c291cmNlfHRyYWNrfHZpZGVvfHN2Z3xjYW52YXMpJC9pLnRlc3Qobm9kZS5ub2RlTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wICE9ICJub25lIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gYmdSZWcuZXhlYyhwcm9wKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGFzU3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcmMgPSBtYXRjaFsxXS5yZXBsYWNlKC9cXCIvZywgJyInKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zcmMgPSBzcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsLnB1c2gobm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1NyYyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3AgPSBwcm9wLnJlcGxhY2UoYmdSZWcsICIkMiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IGJnUmVnLmV4ZWMocHJvcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChtYXRjaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3JjID0gbWF0Y2hbMV0ucmVwbGFjZSgvXFwiL2csICciJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zcmMgPSBzcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsLnB1c2gobm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3AgPSBwcm9wLnJlcGxhY2UoYmdSZWcsICIkMiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IGJnUmVnLmV4ZWMocHJvcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHByb3AgPSBnZXRDb21wdXRlZFN0eWxlKG5vZGUsICc6OmJlZm9yZScpLmJhY2tncm91bmRJbWFnZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3AgIT0gIm5vbmUiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2ggPSBiZ1JlZy5leGVjKHByb3ApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNTcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNyYyA9IG1hdGNoWzFdLnJlcGxhY2UoL1xcIi9nLCAnIicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNyYyA9IHNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWwucHVzaChub2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzU3JjID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcCA9IHByb3AucmVwbGFjZShiZ1JlZywgIiQyIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoID0gYmdSZWcuZXhlYyhwcm9wKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG1hdGNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcmMgPSBtYXRjaFsxXS5yZXBsYWNlKC9cXCIvZywgJyInKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNyYyA9IHNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWwucHVzaChub2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcCA9IHByb3AucmVwbGFjZShiZ1JlZywgIiQyIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoID0gYmdSZWcuZXhlYyhwcm9wKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcHJvcCA9IGdldENvbXB1dGVkU3R5bGUobm9kZSwgJzo6YWZ0ZXInKS5iYWNrZ3JvdW5kSW1hZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wICE9ICJub25lIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gYmdSZWcuZXhlYyhwcm9wKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGFzU3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcmMgPSBtYXRjaFsxXS5yZXBsYWNlKC9cXCIvZywgJyInKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zcmMgPSBzcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsLnB1c2gobm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1NyYyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3AgPSBwcm9wLnJlcGxhY2UoYmdSZWcsICIkMiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IGJnUmVnLmV4ZWMocHJvcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChtYXRjaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3JjID0gbWF0Y2hbMV0ucmVwbGFjZSgvXFwiL2csICciJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zcmMgPSBzcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsLnB1c2gobm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3AgPSBwcm9wLnJlcGxhY2UoYmdSZWcsICIkMiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IGJnUmVnLmV4ZWMocHJvcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpY29uU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKG5vZGUsICc6OmJlZm9yZScpOwogICAgICAgICAgICAgICAgICAgICAgICBwcm9wID0gaWNvblN0eWxlLmNvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcHJvcCB8fCBwcm9wID09PSAibm9uZSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TdHlsZSA9IGdldENvbXB1dGVkU3R5bGUobm9kZSwgJzo6YWZ0ZXInKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3AgPSBpY29uU3R5bGUuY29udGVudDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcCAmJiBwcm9wICE9PSAibm9uZSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3AgPSBwcm9wLnJlcGxhY2UoL1sgJyJdL2csICIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wICYmIHByb3AubGVuZ3RoID09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3JjID0gaWNvbjJCYXNlNjQobm9kZSwgcHJvcCwgaWNvblN0eWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3JjICYmIHNyYyAhPSAiZGF0YTosIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc3JjID0gc3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbC5wdXNoKG5vZGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG90YWw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgaW1nczsKICAgICAgICAgICAgICAgIGlmIChtYXRjaGVkUnVsZS5nYWxsZXJ5KSB7CiAgICAgICAgICAgICAgICAgICAgaW1ncyA9IG1hdGNoZWRSdWxlLmdhbGxlcnkoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaW1ncyA9IEFycmF5LmZyb20oYm9keS5xdWVyeVNlbGVjdG9yQWxsKCcqJykpLmNvbmNhdChbYm9keV0pLnJlZHVjZVJpZ2h0KCh0b3RhbCwgbm9kZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYW55bGl6ZUVsZSh0b3RhbCwgbm9kZSk7CiAgICAgICAgICAgICAgICAgICAgfSwgW10pOwogICAgICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChkb2N1bWVudC5oZWFkLnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmtbcmVsKj0naWNvbiddIiksIG5vZGUgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VSZWcudGVzdChub2RlLmhyZWYpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNyYyA9IG5vZGUuaHJlZjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtNZWRpYXMucHVzaChub2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChkb2N1bWVudC5oZWFkLnF1ZXJ5U2VsZWN0b3JBbGwoJ21ldGFbaXRlbXByb3A9ImltYWdlIl0nKSwgbm9kZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZVJlZy50ZXN0KG5vZGUuY29udGVudCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc3JjID0gbm9kZS5jb250ZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlua01lZGlhcy5wdXNoKG5vZGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgaW1ncyA9IGltZ3MucmV2ZXJzZSgpLnNvcnQoKGEsIGIpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEub2Zmc2V0UGFyZW50ICYmICFiLm9mZnNldFBhcmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYS5vZmZzZXRQYXJlbnQgJiYgYi5vZmZzZXRQYXJlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgICAgICAgICAgIH0pLmNvbmNhdChsaW5rTWVkaWFzLnJldmVyc2UoKSk7CiAgICAgICAgICAgICAgICAgICAgLy8g5o6S6Zmk5bqT6YeM6Z2i55qE5Zu+54mHCiAgICAgICAgICAgICAgICAgICAgaW1ncyA9IGltZ3MuZmlsdGVyKGZ1bmN0aW9uKGltZyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWcucGFyZW50Tm9kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltZy5wYXJlbnROb2RlLmlkPT0iaWNvbnMiIHx8IGltZy5wYXJlbnROb2RlLmlkPT0icGFnZXR1YWwtcHJlbG9hZCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGltZy5wYXJlbnROb2RlLmNsYXNzTGlzdCAmJiBpbWcucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoInNlYXJjaC1qdW1wZXItYnRuIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGltZy5jbGFzc0xpc3QgJiYgaW1nLmNsYXNzTGlzdC5jb250YWlucygicGFnZXR1YWwiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShjb250YWluZXIuY29udGFpbnMoaW1nKSB8fCAocHJlbG9hZENvbnRhaW5lciYmcHJlbG9hZENvbnRhaW5lci5jb250YWlucyhpbWcpKSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYXdhaXQgc2xlZXAoMCk7CiAgICAgICAgICAgICAgICAvLyDlt7Lnu4/lnKjlm77lupPph4zpnaLnmoQKICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaW1nIG9mIGltZ3MpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgaXNJbWcgPSAvXklNRyQvaS50ZXN0KGltZy5ub2RlTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW1nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByZXRyZWF0bWVudChpbWcpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZighaW1nLnNyYyB8fCAoaXNJbWcgJiYgaW1nLmdldEF0dHJpYnV0ZSAmJiAhaW1nLmdldEF0dHJpYnV0ZSgic3JjIikpKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICBpZiAobmV3ZXIgJiYgc2VsZi5fZGF0YUNhY2hlW2ltZy5zcmNdKSBjb250aW51ZTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGZpbmRQaWMoaW1nKTsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3JjID09PSAnZGF0YTosJykgY29udGludWU7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmltZ1NyYy5pbmRleE9mKCdibG9iOicpID09PSAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3JjID09IHJlc3VsdC5pbWdTcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuaW1nU3JjID0gYXdhaXQgZ2V0QmFzZTY0RnJvbUJsb2JVcmwocmVzdWx0LmltZ1NyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNyYyA9IHJlc3VsdC5pbWdTcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNyY3MgPSBbcmVzdWx0LmltZ1NyY107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5pbWdTcmMgPSBhd2FpdCBnZXRCYXNlNjRGcm9tQmxvYlVybChyZXN1bHQuaW1nU3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3JjcyA9IFtyZXN1bHQuaW1nU3JjXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnNpemVIID09IDAgJiYgcmVzdWx0LnNpemVXID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zaXplSCA9IGltZy5uYXR1cmFsSGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNpemVXID0gaW1nLm5hdHVyYWxXaWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YWxpZEltZ3MucHVzaChyZXN1bHQpOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRhdGEucHVzaChyZXN1bHQpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZGF0YUNhY2hlW2ltZy5zcmNdID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWRJbWdzOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzY3JvbGxUb0VuZEFuZFJlbG9hZDogZnVuY3Rpb24oKSB7Ly8g5rua5Yqo5Li756qX5Y+j5Yiw5pyA5bqV6YOo77yM54S25ZCO6Ieq5Yqo6YeN6L295bqT55qE5Zu+54mHCiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1Njcm9sbFRvRW5kQW5kUmVsb2FkaW5nKSByZXR1cm47CiAgICAgICAgICAgICAgICB0aGlzLmlzU2Nyb2xsVG9FbmRBbmRSZWxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgdmFyIHNjcm9sbFRhcmdldDsKICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQgLSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0ID4gMTAwKSB7CiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVGFyZ2V0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChnZXRCb2R5KGRvY3VtZW50KS5zY3JvbGxUb3ApIHsKICAgICAgICAgICAgICAgICAgICBzY3JvbGxUYXJnZXQgPSBnZXRCb2R5KGRvY3VtZW50KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhICYmIHRoaXMuZGF0YS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcEVsZTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICB0ZW1wRWxlID0gdGhpcy5kYXRhW2ldLmltZzsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBFbGUgJiYgdGVtcEVsZS5wYXJlbnROb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodGVtcEVsZSkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAodGVtcEVsZSAmJiAodGVtcEVsZS5zY3JvbGxIZWlnaHQgLSB0ZW1wRWxlLmNsaWVudEhlaWdodCA8IDEwIHx8IHVuc2FmZVdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRlbXBFbGUpLm92ZXJmbG93WSA9PT0gImhpZGRlbiIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wRWxlID0gdGVtcEVsZS5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wRWxlKSBzY3JvbGxUYXJnZXQgPSB0ZW1wRWxlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc2Nyb2xsVGFyZ2V0ID0gc2Nyb2xsVGFyZ2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHNlbGYuaXNTY3JvbGxUb0VuZEFuZFJlbG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHZhciBkZXMgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGU7CiAgICAgICAgICAgICAgICAgICAgZGVzLm92ZXJmbG93ID0gJyc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzZWxmLmhpZGVTY3JvbGxTdHlsZSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IHNjcm9sbEludHYgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNjcm9sbFRvcCA9IHNjcm9sbFRhcmdldC5zY3JvbGxUb3A7CiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRhcmdldC5zY3JvbGxUb3AgKz0gNTAwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsVG9wID09PSBzY3JvbGxUYXJnZXQuc2Nyb2xsVG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHNjcm9sbEludHYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzLm92ZXJmbG93ID0gJ2hpZGRlbic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5yZW1vdmVDaGlsZChzZWxmLmhpZGVTY3JvbGxTdHlsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChzZWxmLnJlbG9hZFRpbWVvdXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWxvYWRUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlbG9hZE5ldygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZFRodW1iKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVsb2FkTmV3KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCAxKTsKICAgICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cG9ydEltYWdlczogZnVuY3Rpb24gKCkgey8vIOWvvOWHuuaJgOacieWbvueJh+WIsOaWsOeql+WPowogICAgICAgICAgICAgICAgdmFyIG5vZGVzID0gdGhpcy5lbGVNYXBzWydzaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyJ10ucXVlcnlTZWxlY3RvckFsbCgnLnB2LWdhbGxlcnktc2lkZWJhci10aHVtYi1jb250YWluZXJbZGF0YS1zcmNdOm5vdCguaWdub3JlKScpLGk7CgogICAgICAgICAgICAgICAgdmFyIGFycj1bXTsKICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7ICsraSkgewogICAgICAgICAgICAgICAgICAgIGlmKHVuc2FmZVdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5vZGVzW2ldKS5kaXNwbGF5PT0ibm9uZSIpYXJyLnB1c2goIiIpOwogICAgICAgICAgICAgICAgICAgIGVsc2UgYXJyLnB1c2goJzxkaXY+PGltZyBzcmM9IicgKyBub2Rlc1tpXS5kYXRhc2V0LnNyYyArICciIC8+PHA+PC9wPjwvZGl2PicpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9IGRvY3VtZW50LnRpdGxlOwoKICAgICAgICAgICAgICAgIHZhciBodG1sID0gJ1wKICAgICAgICAgICAgICAgICA8aGVhZD5cCiAgICAgICAgICAgICAgICAgPHRpdGxlPlBpY3ZpZXdlciBDRSsgJytpMThuKCJleHBvcnRJbWFnZXMiKSsnICcrdGl0bGUrJzwvdGl0bGU+XAogICAgICAgICAgICAgICAgIDxzdHlsZT5cCiAgICAgICAgICAgICAgICAgLnRvVG9we3dpZHRoOjI4cHg7aGVpZ2h0OjI4cHg7Ym9yZGVyLXJhZGl1czoxNHB4O3Bvc2l0aW9uOiBmaXhlZDtyaWdodDoycHg7Ym90dG9tOiAycHg7Y3Vyc29yOiBwb2ludGVyO2JhY2tncm91bmQtY29sb3I6IzAwMDtvcGFjaXR5Oi4zO3BhZGRpbmc6MGVtIWltcG9ydGFudDtib3JkZXI6MHB4IWltcG9ydGFudDt6LWluZGV4OjF9XAogICAgICAgICAgICAgICAgIC50b1RvcDpob3ZlcntvcGFjaXR5OjF9XAogICAgICAgICAgICAgICAgIC50b1RvcD5zcGFue2hlaWdodDoyOHB4O2xpbmUtaGVpZ2h0OjI4cHg7ZGlzcGxheTpibG9jaztjb2xvcjojRkZGO3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtc2l6ZToyMHB4O31cCiAgICAgICAgICAgICAgICAgLmdyaWR7LW1vei1jb2x1bW4tY291bnQ6NDstd2Via2l0LWNvbHVtbi1jb3VudDo0O2NvbHVtbi1jb3VudDo0Oy1tb3otY29sdW1uLWdhcDogMWVtOy13ZWJraXQtY29sdW1uLWdhcDogMWVtO2NvbHVtbi1nYXA6IDFlbTt9XAogICAgICAgICAgICAgICAgIC5ncmlkPmRpdntwYWRkaW5nOiAxZW07bWFyZ2luOiAwIDAgMWVtIDA7LW1vei1wYWdlLWJyZWFrLWluc2lkZTogYXZvaWQ7LXdlYmtpdC1jb2x1bW4tYnJlYWstaW5zaWRlOiBhdm9pZDticmVhay1pbnNpZGU6IGF2b2lkO31cCiAgICAgICAgICAgICAgICAgLmdyaWQ+ZGl2PmltZ3t3aWR0aDogMTAwJTt9XAogICAgICAgICAgICAgICAgIC5saXN0PmRpdiB7dGV4dC1hbGlnbjpjZW50ZXI7fVwKICAgICAgICAgICAgICAgICAubGlzdD5kaXY+aW1nIHsgbWF4LXdpZHRoOiAxMDAlOyB9XAogICAgICAgICAgICAgICAgIC5ncmlkQmlne21hcmdpbjogMHB4O31cCiAgICAgICAgICAgICAgICAgLmdyaWRCaWc+ZGl2IHsgZmxvYXQ6IGxlZnQ7bWFyZ2luOiAwcHggMHB4IDFweCAxcHg7fVwKICAgICAgICAgICAgICAgICAuZ3JpZEJpZz5kaXY+aW1nIHsgbWF4LXdpZHRoOiAxMDAlOyB9XAogICAgICAgICAgICAgICAgIC5zZWxlY3R7Ym9yZGVyOiA1cHggc29saWQgcmVkIWltcG9ydGFudDt9XAogICAgICAgICAgICAgICAgIGJvZHk+ZGl2e2JvcmRlcjogNXB4IHNvbGlkIGJsYWNrO21hcmdpbjogMXB4OyBvdmVyZmxvdzogaGlkZGVuO31cCiAgICAgICAgICAgICAgICAgLnNlbGVjdD5pbWd7dHJhbnNmb3JtOiBzY2FsZTNkKDEuMSwgMS4xLCAxLjEpO31cCiAgICAgICAgICAgICAgICAgYm9keT5kaXY+aW1ne3RyYW5zaXRpb246IHRyYW5zZm9ybSAuM3MgZWFzZSAwczt9XAogICAgICAgICAgICAgICAgIGJvZHk+ZGl2OmhvdmVye2JvcmRlcjogNXB4IHNvbGlkICNkYmRiZGI7IGJhY2tncm91bmQ6ICM4MDgwODAyMDt9XAogICAgICAgICAgICAgICAgIGJvZHk+ZGl2e3Bvc2l0aW9uOiByZWxhdGl2ZTsgY3Vyc29yOiBwb2ludGVyfVwKICAgICAgICAgICAgICAgICBib2R5PmRpdj5we3Bvc2l0aW9uOiBhYnNvbHV0ZTsgbWFyZ2luOiAwOyBiYWNrZ3JvdW5kOiAjZmZmZmZmODA7IHRvcDogMDt9XAogICAgICAgICAgICAgICAgIDwvc3R5bGU+XAogICAgICAgICAgICAgICAgIDwvaGVhZD5cCiAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRvVG9wIj5cCiAgICAgICAgICAgICAgICAgICAgPHNwYW4+77+qPC9zcGFuPlwKICAgICAgICAgICAgICAgICA8L3NwYW4+XAogICAgICAgICAgICAgICAgIDxib2R5IGNsYXNzPSInK3ByZWZzLmdhbGxlcnkuZXhwb3J0VHlwZSsnIj5cCiAgICAgICAgICAgICAgICAgPHAgc3R5bGU9IndpZHRoOjEwMHZ3O2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Ij5cCiAgICAgICAgICAgICAgICAgPGltZyBpZD0iYmlnSW1nIiBzdHlsZT0icG9pbnRlci1ldmVudHM6bm9uZTtwb3NpdGlvbjpmaXhlZDt6LWluZGV4Ojk5OTt3aWR0aDoxMDB2dzt0b3A6MHB4O2FsaWduLXNlbGY6Y2VudGVyOyIgLz48L3A+XAogICAgICAgICAgICAgICAgIDxwPuOAkCcraTE4bigicGljVGl0bGUiKSsn44CR77yaJyArIHRpdGxlICsgJzwvcD5cCiAgICAgICAgICAgICAgICAgPHA+44CQJytpMThuKCJwaWNOdW0iKSsn44CR77yaJyArIG5vZGVzLmxlbmd0aCArICcgPHNlbGVjdCBvbmNoYW5nZT0iZG9jdW1lbnQuYm9keS5jbGFzc05hbWU9dGhpcy5vcHRpb25zW3RoaXMub3B0aW9ucy5zZWxlY3RlZEluZGV4XS52YWx1ZSI+PG9wdGlvbiB2YWx1ZT0iZ3JpZCIgJysocHJlZnMuZ2FsbGVyeS5leHBvcnRUeXBlPT0iZ3JpZCI/InNlbGVjdGVkPSdzZWxlY3RlZCciOiIiKSsnPicraTE4bigiZ3JpZCIpKyc8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJncmlkQmlnIiAnKyhwcmVmcy5nYWxsZXJ5LmV4cG9ydFR5cGU9PSJncmlkQmlnIj8ic2VsZWN0ZWQ9J3NlbGVjdGVkJyI6IiIpKyc+JytpMThuKCJncmlkQmlnIikrJzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Imxpc3QiICcrKHByZWZzLmdhbGxlcnkuZXhwb3J0VHlwZT09Imxpc3QiPyJzZWxlY3RlZD0nc2VsZWN0ZWQnIjoiIikrJz4nK2kxOG4oImxpc3QiKSsnPC9vcHRpb24+IDwvc2VsZWN0PiBcCiAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImJ1dHRvbiIgdmFsdWU9IicraTE4bigiZXhwb3J0SW1hZ2VzVXJsIikrJyIgb25jbGljaz0idmFyIGltZ1N0cj1cJ1wnLHNlbExpc3Q9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcJy5zZWxlY3Q+aW1nXCcpO2lmKHNlbExpc3QubGVuZ3RoPT0wKVtdLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwnaW1nXCcpLGZ1bmN0aW9uKGkpe2ltZ1N0cis9aS5zcmMrXCcgXFxuXCd9KTtlbHNle1tdLmZvckVhY2guY2FsbChzZWxMaXN0LGZ1bmN0aW9uKGkpe2ltZ1N0cis9aS5zcmMrXCcgXFxuXCd9KTt9d2luZG93LnByb21wdChcJycraTE4bigiZXhwb3J0SW1hZ2VzVXJsUG9wIikrJ1wnLGltZ1N0cik7IiAvPlwKICAgICAgICAgICAgICAgICAgKCcraTE4bigicGljVGlwcyIpKycpPC9wPjxwPicraTE4bigic2F2ZVBhZ2VUaXBzIikrIjwvcD4iOwoKICAgICAgICAgICAgICAgIGh0bWwgKz0gYXJyLmpvaW4oJ1xuJykgKwogICAgICAgICAgICAgICAgJzxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij5cCiAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnRvVG9wIikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbigpe1wKICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnNjcm9sbEludG9WaWV3KCk7XAogICAgICAgICAgICAgICAgIH0pO1wKICAgICAgICAgICAgICAgICB2YXIgYmlnSW1nPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNiaWdJbWciKSxib2R5PWRvY3VtZW50LmJvZHk7XAogICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXY+aW1nIiksZnVuY3Rpb24oaSl7XAogICAgICAgICAgICAgICAgIGlmKGkubmF0dXJhbFdpZHRoJiZpLm5hdHVyYWxIZWlnaHQpaS5uZXh0RWxlbWVudFNpYmxpbmcuaW5uZXJUZXh0PWkubmF0dXJhbFdpZHRoKyIgeCAiK2kubmF0dXJhbEhlaWdodDtcCiAgICAgICAgICAgICAgICAgaS5vbmVycm9yPWZ1bmN0aW9uKGUpe2kuc3R5bGUuZGlzcGxheT0ibm9uZSI7aS5wYXJlbnROb2RlLnRpdGxlPSJSZWxvYWQifTtcCiAgICAgICAgICAgICAgICAgaS5vbmxvYWQ9ZnVuY3Rpb24oZSl7aS5zdHlsZS5kaXNwbGF5PSIiO2kucGFyZW50Tm9kZS50aXRsZT0iIjtpZihpLm5hdHVyYWxXaWR0aCYmaS5uYXR1cmFsSGVpZ2h0KWkubmV4dEVsZW1lbnRTaWJsaW5nLmlubmVyVGV4dD1pLm5hdHVyYWxXaWR0aCsiIHggIitpLm5hdHVyYWxIZWlnaHR9O1wKICAgICAgICAgICAgICAgICBpLm9ubW91c2VvdmVyPWkub25tb3VzZW1vdmU9ZnVuY3Rpb24oZSl7YmlnSW1nLnN0eWxlLnRvcD0odGhpcy53aWR0aC90aGlzLmhlaWdodD5ib2R5LmNsaWVudFdpZHRoL2JvZHkuY2xpZW50SGVpZ2h0PzEwKyhib2R5LmNsaWVudEhlaWdodCowLjk1LWJvZHkuY2xpZW50V2lkdGgqdGhpcy5oZWlnaHQvdGhpcy53aWR0aCkqZS5vZmZzZXRZL3RoaXMuaGVpZ2h0OjEwLShib2R5LmNsaWVudFdpZHRoKnRoaXMuaGVpZ2h0L3RoaXMud2lkdGgtYm9keS5jbGllbnRIZWlnaHQqMC45NSkqZS5vZmZzZXRZL3RoaXMuaGVpZ2h0KTtiaWdJbWcuc3JjPWUuY3RybEtleT90aGlzLnNyYzoiIjtiaWdJbWcuc3R5bGUuZGlzcGxheT1lLmN0cmxLZXk/IiI6Im5vbmUiO307XAogICAgICAgICAgICAgICAgIH0pO1wKICAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiYm9keT5kaXYiKSxmdW5jdGlvbihpKXtcCiAgICAgICAgICAgICAgICAgaS5vbmNsaWNrPWZ1bmN0aW9uKGUpe2lmKGkuZmlyc3RDaGlsZC5zdHlsZS5kaXNwbGF5PT0ibm9uZSIpe2kuZmlyc3RDaGlsZC5zdHlsZS5kaXNwbGF5PSIiO2kuZmlyc3RDaGlsZC5zcmM9aS5maXJzdENoaWxkLnNyYztyZXR1cm47fWlmKGUuY3RybEtleSYmaS5maXJzdENoaWxkLnNyYyl7d2luZG93Lm9wZW4oaS5maXJzdENoaWxkLnNyYywiX2JsYW5rIil9ZWxzZXt0aGlzLmNsYXNzTGlzdC50b2dnbGUoInNlbGVjdCIpfX1cCiAgICAgICAgICAgICAgICAgfSk7XAogICAgICAgICAgICAgICAgIDwvc2NyaXB0PjwvYm9keT4nOwogICAgICAgICAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiRmlyZWZveCIpICE9IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGMgPSB1bnNhZmVXaW5kb3cub3BlbigiIiwgIl9ibGFuayIpOwogICAgICAgICAgICAgICAgICAgIGMuZG9jdW1lbnQud3JpdGUoaHRtbCk7CiAgICAgICAgICAgICAgICAgICAgYy5kb2N1bWVudC5jbG9zZSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBfR01fb3BlbkluVGFiKCdkYXRhOnRleHQvaHRtbDtjaGFyc2V0PXV0Zi04LCcgKyBlbmNvZGVVUklDb21wb25lbnQoaHRtbCkse2FjdGl2ZTp0cnVlfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvcHlJbWFnZXM6IGZ1bmN0aW9uKGlzQWxlcnQpIHsKICAgICAgICAgICAgICAgIHZhciBub2RlcyA9IHRoaXMuZWxlTWFwc1snc2lkZWJhci10aHVtYm5haWxzLWNvbnRhaW5lciddLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWItY29udGFpbmVyW2RhdGEtc3JjXTpub3QoLmlnbm9yZSknKTsKICAgICAgICAgICAgICAgIHZhciB1cmxzID0gW107CiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwobm9kZXMsIGZ1bmN0aW9uKG5vZGUpewogICAgICAgICAgICAgICAgICAgIGlmKHVuc2FmZVdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5vZGUpLmRpc3BsYXkhPSJub25lIil7CiAgICAgICAgICAgICAgICAgICAgICAgIHVybHMucHVzaChub2RlLmRhdGFzZXQuc3JjKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBsZXQgY29weURhdGEgPSB1cmxzLmpvaW4oIlxuIik7CgogICAgICAgICAgICAgICAgX0dNX3NldENsaXBib2FyZChjb3B5RGF0YSk7CgogICAgICAgICAgICAgICAgdGhpcy51cmxzVGV4dGFyZWEudmFsdWUgPSBjb3B5RGF0YTsKICAgICAgICAgICAgICAgIHRoaXMudXJsc1RleHRhcmVhQ29uLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwoKICAgICAgICAgICAgICAgIGlmIChpc0FsZXJ0KSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93VGlwcyhpMThuKCJjb3B5U3VjY2VzcyIsdXJscy5sZW5ndGgpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIFByZWxvYWQ6ZnVuY3Rpb24oZWxlLG9yaVRoaXMpewogICAgICAgICAgICAgICAgdGhpcy5lbGU9ZWxlOwogICAgICAgICAgICAgICAgdGhpcy5vcmlUaGlzPW9yaVRoaXM7Ly/kuLt0aGlzCiAgICAgICAgICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgU2Nyb2xsYmFyOmZ1bmN0aW9uKHNjcm9sbGJhcixjb250YWluZXIsaXNIb3Jpem9udGFsKXsKICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsYmFyPXNjcm9sbGJhcjsKICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyPWNvbnRhaW5lcjsKICAgICAgICAgICAgICAgIHRoaXMuaXNIb3Jpem9udGFsPWlzSG9yaXpvbnRhbAogICAgICAgICAgICAgICAgdGhpcy5pbml0KCk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBhZGRTdHlsZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYgKEdhbGxlcnlDLnN0eWxlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFHYWxsZXJ5Qy5zdHlsZS5wYXJlbnROb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEdhbGxlcnlDLnN0eWxlID0gX0dNX2FkZFN0eWxlKEdhbGxlcnlDLnN0eWxlLmlubmVyVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsU1NoZWV0ID0gR2FsbGVyeUMuc3R5bGUuc2hlZXQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIEdhbGxlcnlDLnN0eWxlPV9HTV9hZGRTdHlsZSgnXAogICAgICAgICAgICAgICAgIC8q5pyA5aSW5bGC5a655ZmoKi9cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktY29udGFpbmVyIHtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkO1wKICAgICAgICAgICAgICAgICAgICB0b3A6IDA7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6IDA7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XAogICAgICAgICAgICAgICAgICAgIG1pbi13aWR0aDp1bnNldDtcCiAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDp1bnNldDtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMDtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIHotaW5kZXg6JysocHJlZnMuaW1nV2luZG93LnpJbmRleCAtIDEpKyc7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbml0aWFsO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC8q5YWo5bGAYm9yZGVyLWJveCovXAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWNvbnRhaW5lciBzcGFue1wKICAgICAgICAgICAgICAgICAgICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7XAogICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XAogICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7XAogICAgICAgICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IHVuc2V0O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiBpbml0aWFsO1wKICAgICAgICAgICAgICAgICAgICBmbG9hdDogaW5pdGlhbDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1jb250YWluZXIgKiB7XAogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5pdGlhbDtcCiAgICAgICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IHJvdztcCiAgICAgICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLyrngrnlh7vov5jljp/nmoTlt6XlhbfmnaEqL1wKICAgICAgICAgICAgICAgICAgICBzcGFuLnB2LWdhbGxlcnktbWF4aW1pemUtdHJpZ2dlcntcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246Zml4ZWQ7XAogICAgICAgICAgICAgICAgICAgIGJvdHRvbToxNXB4O1wKICAgICAgICAgICAgICAgICAgICBsZWZ0OjE1cHg7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDojMDAwO1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OjAuNjtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZy1sZWZ0OjEwcHg7XAogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZToxNnB4O1wKICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDowO1wKICAgICAgICAgICAgICAgICAgICBjb2xvcjp3aGl0ZTtcCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOnBvaW50ZXI7XAogICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6M3B4IDNweCAwIDAgIzMzMztcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDo4OTk5OTk5OTg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktbWF4aW1pemUtdHJpZ2dlcjpob3ZlcntcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTowLjk7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgc3Bhbi5wdi1nYWxsZXJ5LW1heGltaXplLXRyaWdnZXItY2xvc2V7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6aW5saW5lLWJsb2NrO1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLWxlZnQ6MTBweDtcCiAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246bWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MzBweDtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzoxMHB4IDA7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOjI0cHg7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6dXJsKCInK3ByZWZzLmljb25zLmxvYWRpbmdDYW5jbGUrJyIpIGNlbnRlciBuby1yZXBlYXQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktbWF4aW1pemUtdHJpZ2dlci1jbG9zZTpob3ZlcntcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjojMzMzO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY2xvc2V7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICB0b3A6MDtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6NDBweDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjMzMzMzMzO1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOnRyYW5zcGFyZW50IG5vLXJlcGVhdCBjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6dXJsKCInK3ByZWZzLmljb25zLmxvYWRpbmdDYW5jbGUrJyIpO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LW1heGltaXplLWNvbnRhaW5lcitwe1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1wKICAgICAgICAgICAgICAgICAgICB6LWluZGV4OiAyO1wKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0NXB4O1wKICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwO1wKICAgICAgICAgICAgICAgICAgICBib3R0b206IDA7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7XAogICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAuM3MgZWFzZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDYwMHB4KSB7XAogICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXI+Lm1heGltaXplQ2hpbGR7XAogICAgICAgICAgICAgICAgICAgICB3aWR0aDpjYWxjKDUwdncgLSA1cHgpO1wKICAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIEBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogNjAwcHgpIHtcCiAgICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LW1heGltaXplLWNvbnRhaW5lcj4ubWF4aW1pemVDaGlsZHtcCiAgICAgICAgICAgICAgICAgICAgIHdpZHRoOmNhbGMoMzN2dyAtIDVweCk7XAogICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA4MDBweCkge1wKICAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktbWF4aW1pemUtY29udGFpbmVyPi5tYXhpbWl6ZUNoaWxke1wKICAgICAgICAgICAgICAgICAgICAgd2lkdGg6Y2FsYygyNXZ3IC0gNXB4KTtcCiAgICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDEwMDBweCkge1wKICAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktbWF4aW1pemUtY29udGFpbmVyPi5tYXhpbWl6ZUNoaWxke1wKICAgICAgICAgICAgICAgICAgICAgd2lkdGg6Y2FsYygyMHZ3IC0gNXB4KTtcCiAgICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDExMzBweCkge1wKICAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktbWF4aW1pemUtY29udGFpbmVyPi5tYXhpbWl6ZUNoaWxke1wKICAgICAgICAgICAgICAgICAgICAgd2lkdGg6Y2FsYygxNi42dncgLSA2cHgpO1wKICAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIEBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogNzk5cHgpIHtcCiAgICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXJhbmdlLWJveD5pbnB1dCB7XAogICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBub25lO1wKICAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdCB7XAogICAgICAgICAgICAgICAgICAgICByaWdodDogMTBweDtcCiAgICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtZ2FsbGVyeS1oZWFkIHtcCiAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XAogICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgICBzcGFuLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtY29udGVudCB7XAogICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDI1cHghaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAgc3Bhbi5wdi1nYWxsZXJ5LXNpZGViYXItdG9nZ2xlIHtcCiAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjVweCFpbXBvcnRhbnQ7XAogICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjY7XAogICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdmlld21vcmU6bm90KC5zaG93bW9yZSkge1wKICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMCFpbXBvcnRhbnQ7XAogICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXJ7XAogICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAzMHB4O1wKICAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci12aWV3bW9yZS5zaG93bW9yZXtcCiAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS41KTtcCiAgICAgICAgICAgICAgICAgICAgIGJvdHRvbTogMTBweDtcCiAgICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LW1heGltaXplLWNvbnRhaW5lciBzcGFuPnB7XAogICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjM7XAogICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXIrcHtcCiAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuMjtcCiAgICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY2xvc2Uge1wKICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjlweCFpbXBvcnRhbnQ7XAogICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcCiAgICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDc5OXB4KSB7XAogICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXJ7XAogICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAzMHB4O1wKICAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktbWF4aW1pemUtY29udGFpbmVyIHNwYW4+cHtcCiAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7XAogICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgc3Bhbi5wdi1nYWxsZXJ5LXRpcHNXb3Jkc3tcCiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiA1MHB4O1wKICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcCiAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6ICLpu5HkvZMiLCAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsICJTZWdvZSBVSSIsICJSb2JvdG8iLFwKICAgICAgICAgICAgICAgICAgICAgICJPeHlnZW4iLCAiVWJ1bnR1IiwgIkhlbHZldGljYSBOZXVlIiwgQXJpYWwsIHNhbnMtc2VyaWYsICJBcHBsZSBDb2xvciBFbW9qaSIsXAogICAgICAgICAgICAgICAgICAgICAgIlNlZ29lIFVJIEVtb2ppIiwgIlNlZ29lIFVJIFN5bWJvbCI7XAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDcwcHg7XAogICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiA3MHB4O1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6IDUwJTtcCiAgICAgICAgICAgICAgICAgICAgdG9wOiAxMCU7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAtMTUwcHg7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgMTBweDtcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDogOTk5OTk5OTk5O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDtcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcCiAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiBhbHBoYShvcGFjaXR5PTY1KTtcCiAgICAgICAgICAgICAgICAgICAgYm94LXNoYWRvdzogNXB4IDVweCAyMHB4IDBweCAjMDAwO1wKICAgICAgICAgICAgICAgICAgICAtbW96LXRyYW5zaXRpb246b3BhY2l0eSAwLjNzIGVhc2UtaW4tb3V0IDBzO1wKICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246b3BhY2l0eSAwLjNzIGVhc2UtaW4tb3V0IDBzO1wKICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOm9wYWNpdHkgMC4zcyBlYXNlLWluLW91dCAwcztcCiAgICAgICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XAogICAgICAgICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1wKICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1wKICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDY1JTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAvKumhtuagjyovXAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtZ2FsbGVyeS1oZWFkIHtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICB0b3A6IDA7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6IDA7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1wKICAgICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAzMHB4O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGF1dG87XAogICAgICAgICAgICAgICAgICAgIHotaW5kZXg6MTtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjpyZ2IoMCwwLDApO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbToxcHggc29saWQgIzMzMzMzMztcCiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjpyaWdodDtcCiAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6MDtcCiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1wKICAgICAgICAgICAgICAgICAgICBjb2xvcjojNzU3NTc1O1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OjQycHg7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1wKICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdy14OiB2aXNpYmxlO1wKICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1wKICAgICAgICAgICAgICAgICAgICBzY3JvbGxiYXItd2lkdGg6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIC1tcy1vdmVyZmxvdy1zdHlsZTogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBzcGFuLnB2LWdhbGxlcnktaGVhZDo6LXdlYmtpdC1zY3JvbGxiYXIge1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDogMCAhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDAgIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkID4gc3BhbntcCiAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246bWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC8q6aG25qCP5bem6L65Ki9cCiAgICAgICAgICAgICAgICAgICAgc3Bhbi5wdi1nYWxsZXJ5LWhlYWQtZmxvYXQtbGVmdHtcCiAgICAgICAgICAgICAgICAgICAgZmxvYXQ6bGVmdDtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OjEwMCU7XAogICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246bGVmdDtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZy1sZWZ0OjVweDtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogdGFibGU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1mbG9hdC1sZWZ0ID4gc3BhbntcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTppbmxpbmUtYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDoxMDAlO1wKICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1mbG9hdC1sZWZ0ID4gc3BhbiA+ICp7XAogICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOm1pZGRsZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWxlZnQtaW1nLWluZm97XAogICAgICAgICAgICAgICAgICAgIGN1cnNvcjpoZWxwO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtbGVmdC1pbWctaW5mby1kZXNjcmlwdGlvbiB7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7XAogICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XAogICAgICAgICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1wKICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1wKICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDZlbTtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5oZXJpdDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1yYW5nZS1ib3h7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1wKICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1yYW5nZS1ib3g+I3BpblNpemV7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMCA1cHg7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDBweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1yYW5nZS1ib3g+c3BhbntcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMCA1cHggMCA1cHg7XAogICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktcmFuZ2UtYm94PmlucHV0e1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcCiAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogYXV0bztcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMDtcCiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBhdXRvO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC8q6aG25qCP6YeM6Z2i55qE5oyJ6ZKu5qC35byPLeW8gOWniyovXAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZHtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTppbmxpbmUtYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIGN1cnNvcjpwb2ludGVyO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MTAwJTtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzowIDhweDtcCiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjpjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1wKICAgICAgICAgICAgICAgICAgICB6LWluZGV4OjE7XAogICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOm1pZGRsZTtcCiAgICAgICAgICAgICAgICAgICAgLW8tdXNlci1zZWxlY3Q6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgLW1vei11c2VyLXNlbGVjdDogLW1vei1ub25lO1wKICAgICAgICAgICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAvKui+heWKqeeCueWHu+S6i+S7tueahOeUn+aIkO+8jGNvdW50ZG93biovXAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZF9vdmVybGF5ZXJ7XAogICAgICAgICAgICAgICAgICAgIHRvcDowO1wKICAgICAgICAgICAgICAgICAgICBsZWZ0OjA7XAogICAgICAgICAgICAgICAgICAgIHJpZ2h0OjA7XAogICAgICAgICAgICAgICAgICAgIGJvdHRvbTowO1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTowO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZCA+ICp7XAogICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOm1pZGRsZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtc2xpZGUtc2hvdy1jb3VudGRvd257XAogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTowLjhlbTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBzcGFuLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLXNsaWRlLXNob3ctYnV0dG9ue1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOjM2cHg7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6aW5saW5lLWJsb2NrO1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDoxOHB4O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MThweDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOjJweCBzb2xpZCAjNzU3NTc1O1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6M3B4O1wKICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDowO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1zbGlkZS1zaG93LWJ1dHRvbi1pbm5lcntcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTppbmxpbmUtYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjpub25lO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItdG9wOjRweCBzb2xpZCB0cmFuc3BhcmVudDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTo0cHggc29saWQgdHJhbnNwYXJlbnQ7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1sZWZ0OjhweCBzb2xpZCAjNzU3NTc1O1wKICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxcHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLXNsaWRlLXNob3ctYnV0dG9uLWlubmVyX3N0b3B7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjojNzU3NTc1O1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMHB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29sbGVjdC1pY29ue1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OmlubGluZS1ibG9jaztcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OjIwcHg7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOjIwcHg7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6dHJhbnNwYXJlbnQgdXJsKCInICsgcHJlZnMuaWNvbnMuZml2ZVBvaW50ZWRTdGFyICsgJyIpIDAgMCBuby1yZXBlYXQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgc3Bhbi5wdi1nYWxsZXJ5LWhlYWQtbGVmdC1sb2NrLWljb257XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6aW5saW5lLWJsb2NrO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MjBweDtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6MjBweDtcCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOnBvaW50ZXI7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6dHJhbnNwYXJlbnQgdXJsKCInICsgcHJlZnMuaWNvbnMubG9jayArICciKSAwIDAgbm8tcmVwZWF0O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtZ2FsbGVyeS1oZWFkLWxlZnQtZmlsdGVyLWljb257XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6aW5saW5lLWJsb2NrO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MjBweDtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6MjBweDtcCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOnBvaW50ZXI7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6dHJhbnNwYXJlbnQgdXJsKCInICsgcHJlZnMuaWNvbnMuZmlsdGVyICsgJyIpIDAgMCBuby1yZXBlYXQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWNvbGxlY3QtaWNvbiB+IC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb2xsZWN0LXRleHQ6OmFmdGVye1wKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiInK2kxOG4oImNvbGxlY3QiKSsnIjtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29sbGVjdC1mYXZvcml0ZSA+IC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb2xsZWN0LWljb257XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtcG9zaXRpb246LTQwcHggMCAhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb2xsZWN0LWZhdm9yaXRlID4gLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWNvbGxlY3QtdGV4dDo6YWZ0ZXJ7XAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IicraTE4bigiY29sbGVjdGVkIikrJyI7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWV4aXQtY29sbGVjdGlvbntcCiAgICAgICAgICAgICAgICAgICAgY29sb3I6IzkzOTMwMCAhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Om5vbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLXVybEZpbHRlcntcCiAgICAgICAgICAgICAgICAgICAgY29sb3I6I2U5Y2NjYyAhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Om5vbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kOmhvdmVye1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiMyNzI3Mjc7XAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiNjY2M7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLypkcm9wbGlzdCovXAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3R7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOmZpeGVkO1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Om5vbmU7XAogICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6MCAwIDNweCAjODA4MDgwO1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiMyNzI3Mjc7XAogICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7XAogICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246bGVmdDtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzoxMHB4O1wKICAgICAgICAgICAgICAgICAgICBjb2xvcjojY2NjO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOi0xcHg7XAogICAgICAgICAgICAgICAgICAgIHotaW5kZXg6OTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW17XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6YmxvY2s7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6MnB4IDVweDtcCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOnBvaW50ZXI7XAogICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOm5vd3JhcDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0tY29sbGVjdC1kZXNjcmlwdGlvbntcCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOmRlZmF1bHQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtLWNvbGxlY3QtZGVzY3JpcHRpb24gPiB0ZXh0YXJlYXtcCiAgICAgICAgICAgICAgICAgICAgcmVzaXplOmJvdGg7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOmF1dG87XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDphdXRvO1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW1fZGlzYWJsZWR7XAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiM3NTc1NzU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIGlucHV0ICsgKntcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZy1sZWZ0OjNweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0gaW5wdXRbdHlwZT1udW1iZXJde1wKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOmxlZnQ7XAogICAgICAgICAgICAgICAgICAgIG1heC13aWR0aDo1MHB4O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MjBweDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7XAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiBibGFjaztcCiAgICAgICAgICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5pdGlhbDtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwIDVweDtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMCA1cHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIGlucHV0W3R5cGU9Y2hlY2tib3hde1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDoyMHB4O1wKICAgICAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbml0aWFsO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDAgNXB4O1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogaW5pdGlhbDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW0gPiAqIHtcCiAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246bWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDogYXV0bztcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBhdXRvO1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC1pdGVtIGxhYmVsIHtcCiAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTppbmxpbmU7XAogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTp1bnNldDtcCiAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IGluaXRpYWw7XAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiBpbmhlcml0O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1kcm9wLWxpc3QtaXRlbSBsYWJlbDphZnRlciB7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtZHJvcC1saXN0LWl0ZW06aG92ZXJ7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IzQwNDA0MDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAvKmNvbnRhaW5lciovXAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb250YWluZXJ7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6aW5saW5lLWJsb2NrO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MTAwJTtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246cmVsYXRpdmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLyogYWZ0ZXLkvKrnsbvnlJ/miJDmoIfor4bkuIvmi4noj5zljZXnmoTkuInop5Llm77moIcqL1wKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29udGFpbmVyID4gLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kOjphZnRlcntcCiAgICAgICAgICAgICAgICAgICAgY29udGVudDoiIjtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTppbmxpbmUtYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOm1pZGRsZTtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOm5vbmU7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci10b3A6N3B4IHNvbGlkICM3NTc1NzU7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1sZWZ0OjVweCBzb2xpZCB0cmFuc3BhcmVudDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OjVweCBzb2xpZCB0cmFuc3BhcmVudDtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6NXB4O1wKICAgICAgICAgICAgICAgICAgICAtbW96LXRyYW5zaXRpb246YWxsIDAuM3MgZWFzZS1pbi1vdXQgMHM7XAogICAgICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjphbGwgMC4zcyBlYXNlLWluLW91dCAwcztcCiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjphbGwgMC4zcyBlYXNlLWluLW91dCAwcztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29udGFpbmVyOmhvdmVye1wKICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OjAgMCAzcHggIzgwODA4MDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29udGFpbmVyOmhvdmVyID4gLnB2LWdhbGxlcnktaGVhZC1jb21tYW5ke1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiMyNzI3Mjc7XAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiNjY2M7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWNvbnRhaW5lcjpob3ZlciA+IC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZDo6YWZ0ZXJ7XAogICAgICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgxODBkZWcpO1wKICAgICAgICAgICAgICAgICAgICAtbW96LXRyYW5zZm9ybTpyb3RhdGUoMTgwZGVnKTtcCiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOnJvdGF0ZSgxODBkZWcpO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItdG9wOjdweCBzb2xpZCAjY2NjO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb250YWluZXI6aG92ZXIgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWNvbGxlY3QtaWNvbntcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjotMjBweCAwO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1jb250YWluZXI6aG92ZXIgLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLXNsaWRlLXNob3ctYnV0dG9ue1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6I2NjYztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29udGFpbmVyOmhvdmVyIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1zbGlkZS1zaG93LWJ1dHRvbi1pbm5lcntcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQtY29sb3I6I2NjYztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29udGFpbmVyOmhvdmVyIC5wdi1nYWxsZXJ5LWhlYWQtY29tbWFuZC1zbGlkZS1zaG93LWJ1dHRvbi1pbm5lcl9zdG9we1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6I2NjYztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29udGFpbmVyOmhvdmVyID4gLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdCwucHYtZ2FsbGVyeS1oZWFkLWNvbW1hbmQtY29udGFpbmVyID4gLnB2LWdhbGxlcnktaGVhZC1jb21tYW5kLWRyb3AtbGlzdC5mb2N1c3tcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpibG9jaztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAvKumhtuagj+mHjOmdoueahOaMiemSruagt+W8jy3nu5PmnZ8qL1wKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1ib2R5IHtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMDtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAzMHB4IHNvbGlkIHRyYW5zcGFyZW50O1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY2xpcDogcGFkZGluZy1ib3g7XAogICAgICAgICAgICAgICAgICAgIHotaW5kZXg6MDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1pbWctY29udGFpbmVyIHtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNsaXA6IHBhZGRpbmctYm94O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAnICsgKHByZWZzLmdhbGxlcnkuYmFja2dyb3VuZENvbG9yIHx8ICdyZ2JhKDIwLDIwLDIwLDAuNzUpJykgKyAnO1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjpyZWxhdGl2ZTtcCiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAuM3MgZWFzZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1pbWctY29udGFpbmVyLXRvcCB7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci10b3A6ICcrIHByZWZzLmdhbGxlcnkuc2lkZWJhclNpemUgKydweCBzb2xpZCB0cmFuc3BhcmVudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1pbWctY29udGFpbmVyLXJpZ2h0IHtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAnKyBwcmVmcy5nYWxsZXJ5LnNpZGViYXJTaXplICsncHggc29saWQgdHJhbnNwYXJlbnQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaW1nLWNvbnRhaW5lci1ib3R0b20ge1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiAnKyBwcmVmcy5nYWxsZXJ5LnNpZGViYXJTaXplICsncHggc29saWQgdHJhbnNwYXJlbnQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaW1nLWNvbnRhaW5lci1sZWZ0IHtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQ6ICcrIHByZWZzLmdhbGxlcnkuc2lkZWJhclNpemUgKydweCBzb2xpZCB0cmFuc3BhcmVudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAvKuWkp+WbvuWMuuWfn+eahOWIh+aNouaOp+WItuaMiemSriovXAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWltZy1jb250cm9sZXJ7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICB0b3A6NTAlO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6NjBweDtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6NTBweDtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDotMzBweDtcCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOnBvaW50ZXI7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6MC4zO1wKICAgICAgICAgICAgICAgICAgICB6LWluZGV4OjE7XAogICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgLjVzIGVhc2U7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtaGlkZSAucHYtZ2FsbGVyeS1pbWctY29udHJvbGVye1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OjA7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgc3Bhbi5wdi1nYWxsZXJ5LWltZy1jb250cm9sZXItcHJle1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOnJnYmEoNzAsNzAsNzAsMC44KSB1cmwoIicrcHJlZnMuaWNvbnMuYXJyb3dMZWZ0KyciKSBuby1yZXBlYXQgY2VudGVyO1wKICAgICAgICAgICAgICAgICAgICBsZWZ0OjEwcHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgc3Bhbi5wdi1nYWxsZXJ5LWltZy1jb250cm9sZXItbmV4dHtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDpyZ2JhKDcwLDcwLDcwLDAuOCkgdXJsKCInK3ByZWZzLmljb25zLmFycm93UmlnaHQrJyIpIG5vLXJlcGVhdCBjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgIHJpZ2h0OjEwcHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaW1nLWNvbnRyb2xlcjpob3ZlcntcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjpyZ2JhKDE0MCwxNDAsMTQwLDAuOCk7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6MC45O1wKICAgICAgICAgICAgICAgICAgICB6LWluZGV4OjI7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLyrmu5rliqjmnaHmoLflvI8tLeW8gOWniyovXAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNjcm9sbGJhci1oLFwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zY3JvbGxiYXItdntcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpub25lO1wKICAgICAgICAgICAgICAgICAgICB6LWluZGV4OjE7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW46MDtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzowO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zY3JvbGxiYXItaHtcCiAgICAgICAgICAgICAgICAgICAgYm90dG9tOjEwcHg7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6MDtcCiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6MDtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OjEwcHg7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbjowIDJweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zY3JvbGxiYXItdntcCiAgICAgICAgICAgICAgICAgICAgdG9wOjA7XAogICAgICAgICAgICAgICAgICAgIGJvdHRvbTowO1wKICAgICAgICAgICAgICAgICAgICByaWdodDoxMHB4O1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDoxMHB4O1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW46MnB4IDA7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2Nyb2xsYmFyLWg6aG92ZXJ7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDoyNXB4O1wKICAgICAgICAgICAgICAgICAgICBib3R0b206MDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zY3JvbGxiYXItdjpob3ZlcntcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6MjVweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zY3JvbGxiYXItaDpob3ZlcixcCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2Nyb2xsYmFyLXY6aG92ZXJ7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6cmdiYSgxMDAsMTAwLDEwMCwwLjkpO1wKICAgICAgICAgICAgICAgICAgICB6LWluZGV4OjI7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2Nyb2xsYmFyLWgtdHJhY2ssXAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNjcm9sbGJhci12LXRyYWNre1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgdG9wOjA7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6MDtcCiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6MDtcCiAgICAgICAgICAgICAgICAgICAgYm90dG9tOjA7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6cmdiYSgxMDAsMTAwLDEwMCwwLjMpO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6MnB4IHNvbGlkIHRyYW5zcGFyZW50O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNjcm9sbGJhci1oLWhhbmRsZSxcCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2Nyb2xsYmFyLXYtaGFuZGxle1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLDAuNSk7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2Nyb2xsYmFyLWgtaGFuZGxle1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MTAwJTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zY3JvbGxiYXItdi1oYW5kbGV7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOjEwMCU7XAogICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNjcm9sbGJhci1oLWhhbmRsZTpob3ZlcixcCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2Nyb2xsYmFyLXYtaGFuZGxlOmhvdmVye1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoODAsMzMsMzMsMSk7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICM1ODU3NTc7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2Nyb2xsYmFyLWgtaGFuZGxlOmFjdGl2ZSxcCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2Nyb2xsYmFyLXYtaGFuZGxlOmFjdGl2ZXtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjpyZ2JhKDU3LDI2LDI2LDEpO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjODc4NDg0O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC8q5rua5Yqo5p2h5qC35byPLS3nu5PmnZ8qL1wKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1pbWctY29udGVudHtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpibG9jaztcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTAwJTtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OjEwMCU7XAogICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OmhpZGRlbjtcCiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjpjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6MDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOm5vbmU7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbjowO1wKICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDowO1wKICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6MDtcCiAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6bm93cmFwO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWltZy1wYXJlbnR7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6aW5saW5lLWZsZXg7XAogICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XAogICAgICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1wKICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDowO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWltZy1wYXJlbnQgdmlkZW8sIC5wdi1nYWxsZXJ5LWltZy1wYXJlbnQ+ZGl2e1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWltZ19icm9rZW57XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOnBvaW50ZXI7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaW1ne1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjpyZWxhdGl2ZTtcLyrovoXliqllLmxheWVyWCxsYXllclkqL1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OmlubGluZS1ibG9jaztcCiAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246bWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDphdXRvO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6YXV0bztcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzowO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6NXB4IHNvbGlkICMzMTMxMzE7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbjoxcHg7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6MC4zO1wKICAgICAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBjb250ZW50LWJveDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI4MjgyOGNjO1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgMDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcCiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC1iYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1wKICAgICAgICAgICAgICAgICAgICAtby1iYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1wKICAgICAgICAgICAgICAgICAgICAnKwogICAgICAgICAgICAgICAgICAgIChwcmVmcy5nYWxsZXJ5LnRyYW5zaXRpb24gPyAoJ1wKICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgMC41cyBlYXNlO1wKICAgICAgICAgICAgICAgICAgICAtbW96LXRyYW5zaXRpb246IG9wYWNpdHkgMC41cyBlYXNlO1wKICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNXMgZWFzZTtcCiAgICAgICAgICAgICAgICAgICAgJykgOiAnJykgKyAnXAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktaW1nX3pvb20tb3V0e1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6JytzdXBwb3J0LmNzc0N1cnNvclZhbHVlLnpvb21PdXQrJztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1pbWdfem9vbS1pbntcCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOicrc3VwcG9ydC5jc3NDdXJzb3JWYWx1ZS56b29tSW4rJztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1jb250YWluZXIucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZS1oaWRlIC5wdi1nYWxsZXJ5LWltZ3tcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOjBweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBzcGFuLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGV7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDoxMnB4O1wKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOmNlbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjpyZ2IoMCwwLDApO1wKICAgICAgICAgICAgICAgICAgICBjb2xvcjojNzU3NTc1O1wKICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTpub3dyYXA7XAogICAgICAgICAgICAgICAgICAgIGN1cnNvcjpwb2ludGVyO1wKICAgICAgICAgICAgICAgICAgICB6LWluZGV4OjI7XAogICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgLjNzIGVhc2UsIG9wYWNpdHkgLjNzIGVhc2U7XAogICAgICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Om5vbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgOmZ1bGxzY3JlZW4gLnB2LWdhbGxlcnktY29udGFpbmVyLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtaGlkZSBzcGFuLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUge1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICA6LXdlYmtpdC1mdWxsLXNjcmVlbiAucHYtZ2FsbGVyeS1jb250YWluZXIucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZS1oaWRlIHNwYW4ucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZSB7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIDotbXMtZnVsbHNjcmVlbiAucHYtZ2FsbGVyeS1jb250YWluZXIucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZS1oaWRlIHNwYW4ucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZSB7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIDpmdWxsc2NyZWVuIC5wdi1nYWxsZXJ5LWNvbnRhaW5lci5wdi1nYWxsZXJ5LXNpZGViYXItdG9nZ2xlLWhpZGUgc3Bhbi5wdi1nYWxsZXJ5LXNpZGViYXItdG9nZ2xlOmhvdmVyIHtcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSFpbXBvcnRhbnQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgOi13ZWJraXQtZnVsbC1zY3JlZW4gLnB2LWdhbGxlcnktY29udGFpbmVyLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtaGlkZSBzcGFuLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGU6aG92ZXIge1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICA6LW1zLWZ1bGxzY3JlZW4gLnB2LWdhbGxlcnktY29udGFpbmVyLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtaGlkZSBzcGFuLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGU6aG92ZXIge1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICA6ZnVsbHNjcmVlbiAucHYtZ2FsbGVyeS1jb250YWluZXIucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZS1oaWRlPi5wdi1nYWxsZXJ5LWhlYWQge1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICA6LXdlYmtpdC1mdWxsLXNjcmVlbiAucHYtZ2FsbGVyeS1jb250YWluZXIucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZS1oaWRlPi5wdi1nYWxsZXJ5LWhlYWQge1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICA6LW1zLWZ1bGxzY3JlZW4gLnB2LWdhbGxlcnktY29udGFpbmVyLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtaGlkZT4ucHYtZ2FsbGVyeS1oZWFkIHtcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMCFpbXBvcnRhbnQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgOmZ1bGxzY3JlZW4gLnB2LWdhbGxlcnktY29udGFpbmVyLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtaGlkZT4ucHYtZ2FsbGVyeS1oZWFkOmhvdmVyIHtcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSFpbXBvcnRhbnQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgOi13ZWJraXQtZnVsbC1zY3JlZW4gLnB2LWdhbGxlcnktY29udGFpbmVyLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtaGlkZT4ucHYtZ2FsbGVyeS1oZWFkOmhvdmVyIHtcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSFpbXBvcnRhbnQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgOi1tcy1mdWxsc2NyZWVuIC5wdi1nYWxsZXJ5LWNvbnRhaW5lci5wdi1nYWxsZXJ5LXNpZGViYXItdG9nZ2xlLWhpZGU+LnB2LWdhbGxlcnktaGVhZDpob3ZlciB7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWNvbnRhaW5lci5wdi1nYWxsZXJ5LXNpZGViYXItdG9nZ2xlLWhpZGU+LnB2LWdhbGxlcnktYm9keT4ucHYtZ2FsbGVyeS1pbWctY29udGFpbmVyPnNwYW4ucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZXtcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMC42O1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAzNXB4O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiMwMDAwMDAwMDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1jb250YWluZXIucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZS1oaWRlPi5wdi1nYWxsZXJ5LWJvZHk+LnB2LWdhbGxlcnktaW1nLWNvbnRhaW5lcj5zcGFuLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGU6aG92ZXJ7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6cmdiKDAgMCAwIC8gNTAlKTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1jb250YWluZXIucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZS1oaWRlPi5wdi1nYWxsZXJ5LWJvZHl7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDBweCBzb2xpZCB0cmFuc3BhcmVudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1jb250YWluZXIucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZS1oaWRlPi5wdi1nYWxsZXJ5LWhlYWR7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7XAogICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgLjNzIGVhc2U7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktY29udGFpbmVyLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtaGlkZT4ucHYtZ2FsbGVyeS1ib2R5Pi5wdi1nYWxsZXJ5LWltZy1jb250YWluZXJ7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWNvbnRhaW5lci5wdi1nYWxsZXJ5LXNpZGViYXItdG9nZ2xlLWhpZGU+LnB2LWdhbGxlcnktaGVhZDpob3ZlcntcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1jb250YWluZXIucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZS1oaWRlIC5wdi1nYWxsZXJ5LWltZy1wYXJlbnQsXAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LWNvbnRhaW5lci5wdi1nYWxsZXJ5LXNpZGViYXItdG9nZ2xlLWhpZGUgLnB2LWdhbGxlcnktaW1ne1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci12aWV3bW9yZXtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XAogICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OjA7XAogICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246Y2VudGVyO1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiMwMDAwMDAzMDtcCiAgICAgICAgICAgICAgICAgICAgY29sb3I6I2ExYTFhMTtcCiAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6bm93cmFwO1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6cG9pbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDogMjtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpub25lO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDMwcHg7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOjMwcHg7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7XAogICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyICFpbXBvcnRhbnQ7XAogICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBhdXRvO1wKICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIC4zcyBlYXNlO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdmlld21vcmU6aG92ZXJ7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IzAwMDAwMDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXIrcDpob3ZlciwucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXIuY2hlY2tlZCtwOmhvdmVye1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LW1heGltaXplLWNvbnRhaW5lci5jaGVja2VkK3B7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuODtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXIrcD4ubmVlZC1jaGVja2Vke1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBub25lO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LW1heGltaXplLWNvbnRhaW5lci5jaGVja2VkK3A+Lm5lZWQtY2hlY2tlZHtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LW1heGltaXplLWNvbnRhaW5lcitwPmlucHV0e1wKICAgICAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogYWxsO1wKICAgICAgICAgICAgICAgICAgICBjb2xvcjogd2hpdGU7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDA7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuODtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNXB4IDEwcHg7XAogICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAxcHg7XAogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXIrcD5pbnB1dDpob3ZlcntcCiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJlZDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXJ7XAogICAgICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMTAwJTtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IGJsYWNrO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogM3B4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LW1heGltaXplLWNvbnRhaW5lci5wdi1nYWxsZXJ5LWZsZXgtbWF4aW1pemV7XAogICAgICAgICAgICAgICAgICAgIGNvbHVtbi1jb3VudDogdW5zZXQ7XAogICAgICAgICAgICAgICAgICAgIC1tb3otY29sdW1uLWNvdW50OiB1bnNldDtcCiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC1jb2x1bW4tY291bnQ6IHVuc2V0O1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1wKICAgICAgICAgICAgICAgICAgICBmbGV4LWZsb3c6IHdyYXA7XAogICAgICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LW1heGltaXplLWNvbnRhaW5lci5wdi1nYWxsZXJ5LWZsZXgtbWF4aW1pemUgc3BhbntcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDE4LjUlO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDMwdmg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktbWF4aW1pemUtY29udGFpbmVyLnB2LWdhbGxlcnktZmxleC1tYXhpbWl6ZSBpbWd7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHVuc2V0O1wKICAgICAgICAgICAgICAgICAgICBtYXgtaGVpZ2h0OiAxMDAlO1wKICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XAogICAgICAgICAgICAgICAgICAgIHRvcDogNTAlO1wKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSkgc2NhbGUzZCgxLCAxLCAxKTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXIucHYtZ2FsbGVyeS1mbGV4LW1heGltaXplIGltZzpob3ZlciB7XAogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKSBzY2FsZTNkKDEuMSwgMS4xLCAxLjEpO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LW1heGltaXplLWNvbnRhaW5lciBzcGFue1wKICAgICAgICAgICAgICAgICAgICAtbW96LXBhZ2UtYnJlYWstaW5zaWRlOiBhdm9pZDtcCiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC1jb2x1bW4tYnJlYWstaW5zaWRlOiBhdm9pZDtcCiAgICAgICAgICAgICAgICAgICAgYnJlYWstaW5zaWRlOiBhdm9pZDtcCiAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IGxlZnQ7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMTVweDtcCiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LW1heGltaXplLWNvbnRhaW5lcj4ubWF4aW1pemVDaGlsZHtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1wKICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoNDAsIDQwLCA0MCwgMC41KTtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiA1cHggc29saWQgIzAwMDAwMDtcCiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwcHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktbWF4aW1pemUtY29udGFpbmVyPi5tYXhpbWl6ZUNoaWxkOmhvdmVye1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoIDQ1ZGVnLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNCkgMjUlLCB0cmFuc3BhcmVudCAyNSUsIHRyYW5zcGFyZW50IDc1JSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjQpIDc1JSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjQpIDEwMCUgKSwgbGluZWFyLWdyYWRpZW50KCA0NWRlZywgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjQpIDI1JSwgdHJhbnNwYXJlbnQgMjUlLCB0cmFuc3BhcmVudCA3NSUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC40KSA3NSUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC40KSAxMDAlICk7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogMjBweCAyMHB4O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIDAsIDEwcHggMTBweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXI+Lm1heGltaXplQ2hpbGQuc2VsZWN0ZWR7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogNXB4IHNvbGlkICNmZjAwMDA1MDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXIgaW1ne1wKICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XAogICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAuM3MgZWFzZSAwcztcCiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZTNkKDEsIDEsIDEpO1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHpvb20taW47XAogICAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDg4cHg7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktbWF4aW1pemUtY29udGFpbmVyPi5tYXhpbWl6ZUNoaWxkOmhvdmVyIGltZyB7XAogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUzZCgxLjEsIDEuMSwgMS4xKTtcCiAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiBicmlnaHRuZXNzKDEuMSkgIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXIucHYtZ2FsbGVyeS1mbGV4LW1heGltaXplPi5tYXhpbWl6ZUNoaWxkOmhvdmVyIGltZyB7XAogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKSBzY2FsZTNkKDEuMSwgMS4xLCAxLjEpO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LW1heGltaXplLWNvbnRhaW5lciBzcGFuPnB7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XAogICAgICAgICAgICAgICAgICAgIG1heC1oZWlnaHQ6IDQwJTtcCiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4O1wKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDAwMDA4MDtcCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6IDA7XAogICAgICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1wKICAgICAgICAgICAgICAgICAgICB3b3JkLWJyZWFrOiBicmVhay1hbGw7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZTtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87XAogICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246YWxsIDAuMnM7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktbWF4aW1pemUtY29udGFpbmVyIHNwYW4+cC5wdi1ib3R0b20tYmFubmVye1wKICAgICAgICAgICAgICAgICAgICBib3R0b206IDA7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDogMzVweDtcCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1wKICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogNDBweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXIgc3Bhbj5wLnB2LWJvdHRvbS1iYW5uZXI+c3Zne1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjBweDtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyMHB4O1wKICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICBmaWxsOiBjdXJyZW50Q29sb3I7XAogICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktbWF4aW1pemUtY29udGFpbmVyIHNwYW4+cC5wdi10b3AtYmFubmVye1wKICAgICAgICAgICAgICAgICAgICB0b3A6IDA7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjVweDtcCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LW1heGltaXplLWNvbnRhaW5lciBzcGFuOmhvdmVyPnB7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LW1heGltaXplLWNvbnRhaW5lciBzcGFuPnA6aG92ZXJ7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDAwMDBjYztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXIgc3Bhbj5wLnB2LWJvdHRvbS1iYW5uZXI6aG92ZXJ7XAogICAgICAgICAgICAgICAgICAgIGNvbG9yOnJlZDtcCiAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6Ym9sZDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXIgc3Bhbj5pbnB1dHtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICB0b3A6IDJweDtcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDoxO1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjBweDtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyMHB4O1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1wKICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwO1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmU7XAogICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXIuY2hlY2tlZCBpbWcsXAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LW1heGltaXplLWNvbnRhaW5lci5jaGVja2VkIHB7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuMztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXIuY2hlY2tlZCBpbnB1dDpjaGVja2VkK2ltZyB7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktbWF4aW1pemUtY29udGFpbmVyLmNoZWNrZWQgc3Bhbj5pbnB1dHtcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXIuY2hlY2tlZCBzcGFuPi5wdi10b3AtYmFubmVye1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjY7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktbWF4aW1pemUtY29udGFpbmVyK3A+aW5wdXQuY29tcGFyZUJ0bntcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXIuY2FuQ29tcGFyZStwPmlucHV0LmNvbXBhcmVCdG57XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1jb250YWluZXIgc3Bhbjpob3Zlcj5pbnB1dHtcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1tYXhpbWl6ZS1zY3JvbGx7XAogICAgICAgICAgICAgICAgICAgIG92ZXJmbG93LXk6IHNjcm9sbDtcCiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3cteDogaGlkZGVuO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIHRvcDogMDtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDogMDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogYmxhY2s7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGU6aG92ZXIsLnB2LWdhbGxlcnktc2lkZWJhci12aWV3bW9yZTpob3ZlcntcCiAgICAgICAgICAgICAgICAgICAgY29sb3I6I2NjYztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZS1oe1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDo4MHB4O1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDotNDBweDtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDo1MCU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci12aWV3bW9yZS1oe1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDotMTVweDtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDo1MCU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtdntcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OjgwcHg7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6LTQwcHg7XAogICAgICAgICAgICAgICAgICAgIHRvcDo1MCU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci12aWV3bW9yZS12e1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MzBweDtcCiAgICAgICAgICAgICAgICAgICAgdG9wOjYlO1wKICAgICAgICAgICAgICAgICAgICB0b3A6IGNhbGMoNTAlIC0gMjVweCk7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtdG9we1wKICAgICAgICAgICAgICAgICAgICB0b3A6LTNweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXZpZXdtb3JlLXRvcHtcCiAgICAgICAgICAgICAgICAgICAgdG9wOjE1cHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci10b2dnbGUtcmlnaHR7XAogICAgICAgICAgICAgICAgICAgIHJpZ2h0Oi0zcHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci12aWV3bW9yZS1yaWdodHtcCiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6MThweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZS1ib3R0b217XAogICAgICAgICAgICAgICAgICAgIGJvdHRvbTotM3B4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdmlld21vcmUtYm90dG9te1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcCiAgICAgICAgICAgICAgICAgICAgYm90dG9tOjE1cHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci12aWV3bW9yZS1ib3R0b20uc2hvd21vcmV7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYig0MiwgNDIsIDQyKTtcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZS1sZWZ0e1wKICAgICAgICAgICAgICAgICAgICBsZWZ0Oi0zcHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci12aWV3bW9yZS1sZWZ0e1wKICAgICAgICAgICAgICAgICAgICBsZWZ0OjE4cHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgc3Bhbi5wdi1nYWxsZXJ5LXNpZGViYXItdG9nZ2xlLWNvbnRlbnR7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6aW5saW5lLWJsb2NrO1wKICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7XAogICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOm5vcm1hbDtcCiAgICAgICAgICAgICAgICAgICAgd29yZC13cmFwOmJyZWFrLXdvcmQ7XAogICAgICAgICAgICAgICAgICAgIG92ZXJmbG93LXdyYXA6YnJlYWstd29yZDtcCiAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6MTZweDtcCiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOjE4cHg7XAogICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246Y2VudGVyO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOjhweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBzcGFuLnB2LWdhbGxlcnktc2lkZWJhci12aWV3bW9yZS1jb250ZW50e1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OmlubGluZS1ibG9jaztcCiAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246bWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTpub3JtYWw7XAogICAgICAgICAgICAgICAgICAgIHdvcmQtd3JhcDpicmVhay13b3JkO1wKICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdy13cmFwOmJyZWFrLXdvcmQ7XAogICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OjE7XAogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZToxNnB4O1wKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOmNlbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZS1jb250ZW50LXYsLnB2LWdhbGxlcnktc2lkZWJhci12aWV3bW9yZS1jb250ZW50LXZ7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOjEuMWVtO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtZ2FsbGVyeS1zaWRlYmFyLXRvZ2dsZS1jb250ZW50LXZ7XAogICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiA2MHB4ICFpbXBvcnRhbnQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLyrkvqfovrnmoI/lvIDlp4sqL1wKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLWNvbnRhaW5lciB7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjpyZ2IoMCwwLDApO1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOjVweDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOm5vbmU7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbjowO1wKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOmNlbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6MDtcCiAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6bm93cmFwO1wKICAgICAgICAgICAgICAgICAgICAtby11c2VyLXNlbGVjdDogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgLW1vei11c2VyLXNlbGVjdDogLW1vei1ub25lO1wKICAgICAgICAgICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLWNvbnRhaW5lci1oIHtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnKyBwcmVmcy5nYWxsZXJ5LnNpZGViYXJTaXplICsncHg7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItY29udGFpbmVyLXYge1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDogJysgcHJlZnMuZ2FsbGVyeS5zaWRlYmFyU2l6ZSArJ3B4O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci1jb250YWluZXItdG9wIHtcCiAgICAgICAgICAgICAgICAgICAgdG9wOiAwO1wKICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjMzMzMzMzO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItY29udGFpbmVyLXJpZ2h0IHtcCiAgICAgICAgICAgICAgICAgICAgdG9wOiAwO1wKICAgICAgICAgICAgICAgICAgICByaWdodDogMDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQ6MXB4IHNvbGlkICMzMzMzMzM7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci1jb250YWluZXItYm90dG9tIHtcCiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAwO1wKICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItdG9wOjFweCBzb2xpZCAjMzMzMzMzO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItY29udGFpbmVyLWxlZnQge1wKICAgICAgICAgICAgICAgICAgICB0b3A6IDA7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6IDA7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yaWdodDoxcHggc29saWQgIzMzMzMzMztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLWNvbnRlbnQge1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMDtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNsaXA6IHBhZGRpbmctYm94O1wKICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1wKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOmxlZnQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci1jb250ZW50LWgge1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiA5MCU7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1sZWZ0OiA0MHB4IHNvbGlkIHRyYW5zcGFyZW50O1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6IDQwcHggc29saWQgdHJhbnNwYXJlbnQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci1jb250ZW50LXYge1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDkwJTtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDQwcHggc29saWQgdHJhbnNwYXJlbnQ7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDQwcHggc29saWQgdHJhbnNwYXJlbnQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgc3Bhbi5wdi1nYWxsZXJ5LXNpZGViYXItY29udHJvbGVye1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6cG9pbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwwLjEpIG5vLXJlcGVhdCBjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci1jb250cm9sZXI6aG92ZXJ7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6cmdiYSgyNTUsMjU1LDI1NSwwLjMpO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItY29udHJvbGVyLXByZS1oLFwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLWNvbnRyb2xlci1uZXh0LWh7XAogICAgICAgICAgICAgICAgICAgIHRvcDowO1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDozNnB4O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MTAwJTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLWNvbnRyb2xlci1wcmUtdixcCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci1jb250cm9sZXItbmV4dC12e1wKICAgICAgICAgICAgICAgICAgICBsZWZ0OjA7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOjEwMCU7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDozNnB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtZ2FsbGVyeS1zaWRlYmFyLWNvbnRyb2xlci1wcmUtaCB7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6IC00MHB4O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoIicrcHJlZnMuaWNvbnMuYXJyb3dMZWZ0KyciKTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBzcGFuLnB2LWdhbGxlcnktc2lkZWJhci1jb250cm9sZXItbmV4dC1oIHtcCiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC00MHB4O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoIicrcHJlZnMuaWNvbnMuYXJyb3dSaWdodCsnIik7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgc3Bhbi5wdi1nYWxsZXJ5LXNpZGViYXItY29udHJvbGVyLXByZS12IHtcCiAgICAgICAgICAgICAgICAgICAgdG9wOiAtNDBweDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCInK3ByZWZzLmljb25zLmFycm93VG9wKyciKTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBzcGFuLnB2LWdhbGxlcnktc2lkZWJhci1jb250cm9sZXItbmV4dC12IHtcCiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAtNDBweDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCInK3ByZWZzLmljb25zLmFycm93Qm90dG9tKyciKTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyIHtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbjowO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzowO1wKICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDowO1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjpyZWxhdGl2ZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyIHNwYW57XAogICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOm1pZGRsZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyLWh7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1sZWZ0OjFweCBzb2xpZCAjNDY0NjQ2O1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6MXB4IHNvbGlkICM0NjQ2NDY7XAogICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOm5vd3JhcDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyLXZ7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci10b3A6MXB4IHNvbGlkICM0NjQ2NDY7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206MXB4IHNvbGlkICM0NjQ2NDY7XAogICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOm5vcm1hbDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyLXRvcCB7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOjVweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyLXJpZ2h0IHtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZy1sZWZ0OjVweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyLWJvdHRvbSB7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOjVweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyLWxlZnQge1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OjVweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBzcGFuLnB2LWdhbGxlcnktc2lkZWJhci10aHVtYi1jb250YWluZXIge1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OmlubGluZS1ibG9jaztcCiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6MnB4IHNvbGlkIHJnYig1Miw1Miw1Mik7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCggNDVkZWcsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC40KSAyNSUsIHRyYW5zcGFyZW50IDI1JSwgdHJhbnNwYXJlbnQgNzUlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNCkgNzUlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNCkgMTAwJSApLCBsaW5lYXItZ3JhZGllbnQoIDQ1ZGVnLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNCkgMjUlLCB0cmFuc3BhcmVudCAyNSUsIHRyYW5zcGFyZW50IDc1JSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjQpIDc1JSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjQpIDEwMCUgKTtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiAyMHB4IDIwcHg7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IDAgMCwgMTBweCAxMHB4O1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6cG9pbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246cmVsYXRpdmU7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6MnB4O1wKICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6MDtcCiAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6MDtcCiAgICAgICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6bm93cmFwO1wKICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICB0b3A6MDtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDowO1wKICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246YWxsIDAuMnMgZWFzZS1pbi1vdXQ7XAogICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246YWxsIDAuMnMgZWFzZS1pbi1vdXQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgc3Bhbi5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWItY29udGFpbmVyLmlnbm9yZSB7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyLWggIC5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWItY29udGFpbmVyIHtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOjAgMnB4O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MTAwJTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1ibmFpbHMtY29udGFpbmVyLXYgIC5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWItY29udGFpbmVyIHtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOjJweCAwO1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDoxMDAlO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWJuYWlsc19oaWRlLXNwYW4gPiAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1iLWNvbnRhaW5lciB7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1iLWNvbnRhaW5lcjpob3ZlciB7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjoycHggc29saWQgcmdiKDU3LDE0OSwyMTEpO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1iX3NlbGVjdGVkIHtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOjJweCBzb2xpZCByZ2IoMjI5LDU5LDYyKTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1iX3NlbGVjdGVkLXRvcCB7XAogICAgICAgICAgICAgICAgICAgIHRvcDo1cHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LWdhbGxlcnktc2lkZWJhci10aHVtYl9zZWxlY3RlZC1yaWdodCB7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6LTVweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1iX3NlbGVjdGVkLWJvdHRvbSB7XAogICAgICAgICAgICAgICAgICAgIHRvcDotNXB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWJfc2VsZWN0ZWQtbGVmdCB7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6NXB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1iLWxvYWRpbmd7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICB0b3A6MDtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDowO1wKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOmNlbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTAwJTtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OjEwMCU7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTowLjY7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6YmxhY2sgdXJsKCInICsgcHJlZnMuaWNvbnMubG9hZGluZyArICciKSBuby1yZXBlYXQgY2VudGVyIDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS1zaWRlYmFyLXRodW1iLWxvYWRpbmc6aG92ZXJ7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6MC44O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXNpZGViYXItdGh1bWIge1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XAogICAgICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJSAhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICBtYXgtaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDogYXV0byAhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDogYXV0byAhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDEwJTtcCiAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMTAlO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXVybHMtdGV4dGFyZWEge1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBub25lO1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XAogICAgICAgICAgICAgICAgICAgIHRvcDogMTB2aDtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDogMTB2dztcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDogMTAwO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1nYWxsZXJ5LXVybHMtdGV4dGFyZWE+dGV4dGFyZWEge1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDogODB2dztcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA4MHZoO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDEwcHggc29saWQgIzI3MjcyNztcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZmZmZmVlO1wKICAgICAgICAgICAgICAgICAgICBjb2xvcjogYmxhY2s7XAogICAgICAgICAgICAgICAgICAgIHRleHQtd3JhcDogbm93cmFwO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtZ2FsbGVyeS11cmxzLXRleHRhcmVhLWNsb3NlLFwKICAgICAgICAgICAgICAgICAgICBzcGFuLnB2LWdhbGxlcnktdXJscy10ZXh0YXJlYS1kb3dubG9hZHtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA0MHB4O1wKICAgICAgICAgICAgICAgICAgICB0b3A6IC0yNXB4O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMjcyNzI3IG5vLXJlcGVhdCBjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgc3Bhbi5wdi1nYWxsZXJ5LXVybHMtdGV4dGFyZWEtY2xvc2U6aG92ZXIsXAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtZ2FsbGVyeS11cmxzLXRleHRhcmVhLWRvd25sb2FkOmhvdmVyIHtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgc3Bhbi5wdi1nYWxsZXJ5LXVybHMtdGV4dGFyZWEtY2xvc2Uge1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC0yNXB4O1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDo0MHB4O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOnVybCgiJytwcmVmcy5pY29ucy5sb2FkaW5nQ2FuY2xlKyciKTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBzcGFuLnB2LWdhbGxlcnktdXJscy10ZXh0YXJlYS1kb3dubG9hZCB7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDogLTI1cHg7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0MHB4O1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1wKICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1wKICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBzcGFuLnB2LWdhbGxlcnktdXJscy10ZXh0YXJlYS1kb3dubG9hZD5zdmcge1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDE1cHg7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxNXB4O1wKICAgICAgICAgICAgICAgICAgICBmaWxsOiB3aGl0ZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtZ2FsbGVyeS12ZXJ0aWNhbC1hbGlnbi1oZWxwZXJ7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6aW5saW5lLWJsb2NrO1wKICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOjA7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDoxMDAlO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW46MDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOjA7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6MDtcCiAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTpoaWRkZW47XAogICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOm5vd3JhcDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjpyZWQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgJyk7CiAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbFNTaGVldD1HYWxsZXJ5Qy5zdHlsZS5zaGVldDsKCiAgICAgICAgICAgICAgICB2YXIgaGVhZD1kb2N1bWVudC5oZWFkOwogICAgICAgICAgICAgICAgdmFyIHN0eWxlMj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgICAgICAgICAgICAgdGhpcy50aHVtYlZpc2libGVTdHlsZT1zdHlsZTI7CiAgICAgICAgICAgICAgICBzdHlsZTIudHlwZT0ndGV4dC9jc3MnOwogICAgICAgICAgICAgICAgaGVhZC5hcHBlbmRDaGlsZChzdHlsZTIpOwoKICAgICAgICAgICAgICAgIC8vIOiuqSBkZXNjcmlwdGlvbiDnmoTmloflrZflhoXlrrnmuqLlh7rnlKjngrnngrnngrkoLi4uKeecgeeVpeWPt+ihqOekugogICAgICAgICAgICAgICAgLy8gLnB2LWdhbGxlcnktaGVhZC1sZWZ0LWltZy1pbmZvLWRlc2NyaXB0aW9uIHsKICAgICAgICAgICAgICAgIC8vICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgICAgIC8vICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKICAgICAgICAgICAgICAgIC8vICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICAgICAgICAgICAgLy8gICAgIHdpZHRoOiAyN2VtOwogICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICB9LAoKICAgICAgICB9OwoKCiAgICAgICAgR2FsbGVyeUMucHJvdG90eXBlLlByZWxvYWQucHJvdG90eXBlPXsvL+mihOivu+WvueixoQogICAgICAgICAgICBpbml0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBpZighdGhpcy5jb250YWluZXIpey8v6aKE6K+755qE5Zu+54mH6YO95LuN6YeM6Z2iCiAgICAgICAgICAgICAgICAgICAgdmFyIGRpdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgICAgICBkaXYuY2xhc3NOYW1lPSdwdi1nYWxsZXJ5LXByZWxvYWRlZC1pbWctY29udGFpbmVyJzsKICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgZ2V0Qm9keShkb2N1bWVudCkuYXBwZW5kQ2hpbGQoZGl2KTsKICAgICAgICAgICAgICAgICAgICBHYWxsZXJ5Qy5wcm90b3R5cGUuUHJlbG9hZC5wcm90b3R5cGUuY29udGFpbmVyPWRpdjsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLm1heD1wcmVmcy5nYWxsZXJ5Lm1heDsKICAgICAgICAgICAgICAgIHRoaXMubmV4dE51bWJlcj0wOwogICAgICAgICAgICAgICAgdGhpcy5uZXh0RWxlPXRoaXMuZWxlOwogICAgICAgICAgICAgICAgdGhpcy5wcmVOdW1iZXI9MDsKICAgICAgICAgICAgICAgIHRoaXMucHJlRWxlPXRoaXMuZWxlOwogICAgICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb249J3ByZSc7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHByZWxvYWQ6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHZhciBlbGU9dGhpcy5nZXRQcmVsb2FkRWxlKCk7CiAgICAgICAgICAgICAgICBpZighZWxlKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy53YWl0Rm9yUmVhZHkoZWxlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgd2FpdEZvclJlYWR5OiBmdW5jdGlvbihlbGUpIHsKICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAgICAgICAgIHZhciBiZWdpbkxvYWRJbWcgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWdSZWFkeSA9IGltZ1JlYWR5KGRhdGFzZXQoZWxlLCdzcmMnKSwgewogICAgICAgICAgICAgICAgICAgICAgICBsb2FkRW5kOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5hYm9ydGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnR5cGUgPT0gJ2Vycm9yJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcmNzID0gZGF0YXNldChlbGUsICdzcmNzJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNyY3MpIHNyY3MgPSBzcmNzLnNwbGl0KCIsIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNyY3MgJiYgc3Jjcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcmMgPSBzcmNzLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXQoZWxlLCAnc3JjcycsIHNyY3Muam9pbigiLCIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNyYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNldChlbGUsICdzcmMnLCBzcmMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi53YWl0Rm9yUmVhZHkoZWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0KGVsZSwncHJlbG9hZGVkJywndHJ1ZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhc2V0KGVsZSwnbmF0dXJhbFNpemUnKSAmJiB0aGlzLm5hdHVyYWxIZWlnaHQgJiYgdGhpcy5uYXR1cmFsV2lkdGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0KGVsZSwnbmF0dXJhbFNpemUnLCBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6IHRoaXMubmF0dXJhbEhlaWdodCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogdGhpcy5uYXR1cmFsV2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBrZXkgPSB0aGlzLm5hdHVyYWxXaWR0aCArICJ4IiArIHRoaXMubmF0dXJhbEhlaWdodDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9yaVRoaXMuc2l6ZU1hcFtrZXldID0gKHNlbGYub3JpVGhpcy5zaXplTWFwW2tleV0gfHwgMCkgKyAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLm9yaVRoaXMuc2l6ZU1hcFtrZXldID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmlubmVyVGV4dCA9IGtleTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gdGhpcy5uYXR1cmFsV2lkdGggKyAiLSIgKyB0aGlzLm5hdHVyYWxXaWR0aCArICJ4IiArIHRoaXMubmF0dXJhbEhlaWdodCArICItIiArIHRoaXMubmF0dXJhbEhlaWdodDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vcmlUaGlzLnBpblNpemUuYXBwZW5kQ2hpbGQob3B0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJlbG9hZCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB0aW1lOjYwICogMTAwMCwvL+mZkOaXtuS4gOWIhumSn++8jOWQpuWImeW8uuWItue7k+adn+W5tuW8gOWni+mihOivu+S4i+S4gOW8oOOAggogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciB4aHIgPSBkYXRhc2V0KGVsZSwgJ3hocicpICE9PSAnc3RvcCcgJiYgdGhpcy5vcmlUaGlzLmdldFByb3BCeVNwYW5NYXJrKGVsZSwgJ3hocicpOwogICAgICAgICAgICAgICAgaWYgKHhocikgewogICAgICAgICAgICAgICAgICAgIHZhciB4aHJFcnJvciA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0KGVsZSwgJ3hocicsICdzdG9wJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXQoZWxlLCAnc3JjJywgZGF0YXNldChlbGUsICd0aHVtYlNyYycpKTsKICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW5Mb2FkSW1nKCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB4aHJMb2FkLmxvYWQoewogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGRhdGFzZXQoZWxlLCdzcmMnKSwKICAgICAgICAgICAgICAgICAgICAgICAgeGhyOiB4aHIsCiAgICAgICAgICAgICAgICAgICAgICAgIGNiOiBmdW5jdGlvbihpbWdTcmMsIGltZ1NyY3MsIGNhcHRpb24sIGNhcHRpb25zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1nU3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNldChlbGUsICdzcmMnLCBpbWdTcmMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXQoZWxlLCAneGhyJywgJ3N0b3AnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FwdGlvbikgZGF0YXNldChlbGUsICdkZXNjcmlwdGlvbicsIGNhcHRpb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luTG9hZEltZygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWdTcmNzICYmIGltZ1NyY3MubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3Jjcy5mb3JFYWNoKHNyYyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3JjID09IGltZ1NyYykgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9IHNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYXAgPSBjYXB0aW9ucyAmJiBjYXB0aW9uc1tpXSA/IGNhcHRpb25zW2ldIDogY2FwdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1JlYWR5KGltZyx7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHk6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGZpbmRQaWMoaW1nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhcCkgcmVzdWx0LmRlc2NyaXB0aW9uID0gY2FwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9yaVRoaXMuZGF0YS5wdXNoKHJlc3VsdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub3JpVGhpcy5fYXBwZW5kVGh1bWJTcGFucyhbcmVzdWx0XSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub3JpVGhpcy5sb2FkVGh1bWIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhockVycm9yKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIG9uZXJyb3I6IHhockVycm9yCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGJlZ2luTG9hZEltZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBnZXRQcmVsb2FkRWxlOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBpZigodGhpcy5tYXg8PXRoaXMubmV4dE51bWJlciAmJiB0aGlzLm1heDw9dGhpcy5wcmVOdW1iZXIpIHx8ICghdGhpcy5uZXh0RWxlICYmICF0aGlzLnByZUVsZSkpewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgZWxlPXRoaXMuZGlyZWN0aW9uPT0ncHJlJz8gdGhpcy5nZXROZXh0KCkgOiB0aGlzLmdldFByZXZpb3VzKCk7CiAgICAgICAgICAgICAgICBpZihlbGUgJiYgIWRhdGFzZXQoZWxlLCdwcmVsb2FkZWQnKSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFByZWxvYWRFbGUoKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldE5leHQ6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHRoaXMubmV4dE51bWJlcisrOwogICAgICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb249J25leHQnOwogICAgICAgICAgICAgICAgaWYoIXRoaXMubmV4dEVsZSlyZXR1cm47CiAgICAgICAgICAgICAgICByZXR1cm4gKHRoaXMubmV4dEVsZSA9IHRoaXMub3JpVGhpcy5nZXRUaHVtU3BhbihmYWxzZSx0aGlzLm5leHRFbGUpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0UHJldmlvdXM6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHRoaXMucHJlTnVtYmVyKys7CiAgICAgICAgICAgICAgICB0aGlzLmRpcmVjdGlvbj0ncHJlJzsKICAgICAgICAgICAgICAgIGlmKCF0aGlzLnByZUVsZSlyZXR1cm47CiAgICAgICAgICAgICAgICByZXR1cm4gKHRoaXMucHJlRWxlID0gdGhpcy5vcmlUaGlzLmdldFRodW1TcGFuKHRydWUsdGhpcy5wcmVFbGUpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYWJvcnQ6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHRoaXMuYWJvcnRlZD10cnVlOwogICAgICAgICAgICAgICAgaWYodGhpcy5pbWdSZWFkeSl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdSZWFkeS5hYm9ydCgpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSwKICAgICAgICB9OwoKCiAgICAgICAgR2FsbGVyeUMucHJvdG90eXBlLlNjcm9sbGJhci5wcm90b3R5cGU9ey8v5rua5Yqo5p2h5a+56LGhCiAgICAgICAgICAgIGluaXQ6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHZhciBiYXI9dGhpcy5zY3JvbGxiYXIuYmFyOwogICAgICAgICAgICAgICAgdGhpcy5zaG93bj1iYXIub2Zmc2V0V2lkdGghPTA7CiAgICAgICAgICAgICAgICB2YXIgc2VsZj10aGlzOwogICAgICAgICAgICAgICAgYmFyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsZnVuY3Rpb24oZSl7Ly/ngrnlh7vmu5rliqjmnaHljLrln5/vvIzor6XlubLngrnku4DkuYjvvIEKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldD1lLnRhcmdldDsKICAgICAgICAgICAgICAgICAgICB2YXIgaGFuZGxlPXNlbGYuc2Nyb2xsYmFyLmhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2YXIgdHJhY2s9c2VsZi5zY3JvbGxiYXIudHJhY2s7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoKHRhcmdldCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgaGFuZGxlOnsvL+aJi+afhO+8m+WKn+iDve+8jOaLluWKqOaJi+afhOadpea7muWKqOeql+WPowogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBybz1zZWxmLmlzSG9yaXpvbnRhbCA/IFsnbGVmdCcsJ2NsaWVudFgnXSA6IFsndG9wJywnY2xpZW50WSddOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9IT2Zmc2V0PXBhcnNlRmxvYXQoaGFuZGxlLnN0eWxlW3Byb1swXV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9DbGllbnQ9ZVtwcm9bMV1dOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb3ZlSGFuZGxlcj1mdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNjcm9sbChvSE9mZnNldCArIGVbcHJvWzFdXSAtIG9DbGllbnQsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVwSGFuZGxlcj1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsbW92ZUhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsdXBIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsbW92ZUhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJyx1cEhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSB0cmFjazp7Ly/ovajpgZPvvJvlip/og73vvIzmjInkvY/kuI3mlL7mnaXov57nu63mu5rliqjkuIDkuKrpobXpnaLnmoTot53nprsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwcm89c2VsZi5pc0hvcml6b250YWwgPyBbJ2xlZnQnLCdvZmZzZXRYJywnbGF5ZXJYJywnY2xpZW50V2lkdGgnLCdvZmZzZXRXaWR0aCddIDogWyd0b3AnICwgJ29mZnNldFknICwnbGF5ZXJZJywnY2xpZW50SGVpZ2h0Jywnb2Zmc2V0SGVpZ2h0J107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xpY2tPZmZzZXQ9dHlwZW9mIGVbcHJvWzFdXT09J3VuZGVmaW5lZCcgPyBlW3Byb1syXV0gOiBlW3Byb1sxXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGFuZGxlT2Zmc2V0PXBhcnNlRmxvYXQoaGFuZGxlLnN0eWxlW3Byb1swXV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZVNpemU9aGFuZGxlW3Byb1s0XV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdW5kZXI9IGNsaWNrT2Zmc2V0ID4gaGFuZGxlT2Zmc2V0IDsvL+eCueWHu+WcqOa7muWKqOaJi+afhOeahOS4i+aWuQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lclNpemU9c2VsZi5jb250YWluZXJbcHJvWzNdXTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zY3JvbGxCeSh1bmRlcj8gKGNvbnRhaW5lclNpemUgLSAxMCkgOiAoLWNvbnRhaW5lclNpemUgKyAxMCkpOy8v5rua5Yqo5LiA5Liq6aG16Z2i6Led56a75bCR5LiA54K5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrU3RvcD1mdW5jdGlvbigpey8v5b2T5omL5p+E5Yiw6L6+54K55Ye75L2N572u5pe25YGc5q2iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZU9mZnNldD1wYXJzZUZsb2F0KGhhbmRsZS5zdHlsZVtwcm9bMF1dKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjbGlja09mZnNldCA+PSBoYW5kbGVPZmZzZXQgJiYgY2xpY2tPZmZzZXQgPD0gKGhhbmRsZU9mZnNldCArIGhhbmRsZVNpemUpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNjcm9sbFRpbWVvdXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHNjcm9sbEludGVydmFsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbEludGVydmFsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbFRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbEludGVydmFsPXNldEludGVydmFsKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja1N0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LDEyMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tTdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LDMwMCk7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrU3RvcCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1cEhhbmRsZXI9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2Nyb2xsVGltZW91dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzY3JvbGxJbnRlcnZhbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsdXBIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLHVwSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgfSx0cnVlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVzZXQ6ZnVuY3Rpb24oKXsvL+WIpOaWrea7muWKqOadoeivpeaYvuekuui/mOaYr+makOiXjwoKICAgICAgICAgICAgICAgIHZhciBwcm89dGhpcy5pc0hvcml6b250YWwgPyBbJ3Njcm9sbFdpZHRoJywnY2xpZW50V2lkdGgnLCd3aWR0aCddIDogWydzY3JvbGxIZWlnaHQnLCdjbGllbnRIZWlnaHQnLCdoZWlnaHQnXTsKCiAgICAgICAgICAgICAgICAvL+WmguaenOWGheWuueWkp+S6juWuueWZqOeahGNvbnRlbnTljLrln58KCiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsU2l6ZT10aGlzLmNvbnRhaW5lcltwcm9bMF1dOwogICAgICAgICAgICAgICAgdmFyIGNsaWVudFNpemU9dGhpcy5jb250YWluZXJbcHJvWzFdXTsKICAgICAgICAgICAgICAgIHZhciBzY3JvbGxNYXg9c2Nyb2xsU2l6ZSAtIGNsaWVudFNpemU7CiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbE1heD1zY3JvbGxNYXg7CiAgICAgICAgICAgICAgICBpZihzY3JvbGxNYXg+MCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYWNrU2l6ZT10aGlzLnNjcm9sbGJhci50cmFja1twcm9bMV1dOwogICAgICAgICAgICAgICAgICAgIHRoaXMudHJhY2tTaXplPXRyYWNrU2l6ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgaGFuZGxlU2l6ZT1NYXRoLmZsb29yKChjbGllbnRTaXplL3Njcm9sbFNpemUpICogdHJhY2tTaXplKTsKICAgICAgICAgICAgICAgICAgICBoYW5kbGVTaXplPU1hdGgubWF4KDIwLGhhbmRsZVNpemUpOy8v6ZmQ5Yi25omL5p+E55qE5pyA5bCP5aSn5bCPOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlU2l6ZT1oYW5kbGVTaXplOwogICAgICAgICAgICAgICAgICAgIHRoaXMub25lPSh0cmFja1NpemUtaGFuZGxlU2l6ZSkgLyBzY3JvbGxNYXg7Ly/kuIDkuKrlg4/ntKDlr7nlupTnmoTmu5rliqjmnaHplb/luqYKICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbGJhci5oYW5kbGUuc3R5bGVbcHJvWzJdXT0gaGFuZGxlU2l6ZSArICdweCc7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGwodGhpcy5nZXRTY3JvbGxlZCgpKTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2hvdzpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYodGhpcy5zaG93bilyZXR1cm47CiAgICAgICAgICAgICAgICB0aGlzLnNob3duPXRydWU7CiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbGJhci5iYXIuc3R5bGUuZGlzcGxheT0nYmxvY2snOwogICAgICAgICAgICB9LAogICAgICAgICAgICBoaWRlOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBpZighdGhpcy5zaG93bilyZXR1cm47CiAgICAgICAgICAgICAgICB0aGlzLnNob3duPWZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxiYXIuYmFyLnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzY3JvbGxCeTpmdW5jdGlvbihkaXN0YW5jZSxoYW5kbGVEaXN0YW5jZSl7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zY3JvbGwodGhpcy5nZXRTY3JvbGxlZCgpICsgKGhhbmRsZURpc3RhbmNlPyBkaXN0YW5jZSAvIHRoaXMub25lIDogZGlzdGFuY2UpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2Nyb2xsQnlQYWdlczpmdW5jdGlvbihudW0pewogICAgICAgICAgICAgICAgdGhpcy5zY3JvbGwodGhpcy5nZXRTY3JvbGxlZCgpICsgKHRoaXMuY29udGFpbmVyWyh0aGlzLmlzSG9yaXpvbnRhbCA/ICdjbGllbnRXaWR0aCcgOiAnY2xpZW50SGVpZ2h0JyldIC0gMTApICogbnVtKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2Nyb2xsOmZ1bmN0aW9uKGRpc3RhbmNlLGhhbmRsZURpc3RhbmNlLHRyYW5zaXRpb24pewogICAgICAgICAgICAgICAgaWYoIXRoaXMuc2hvd24pcmV0dXJuOwoKICAgICAgICAgICAgICAgIC8v5rua5Yqo5a6e6ZmF5rua5Yqo5p2hCiAgICAgICAgICAgICAgICB2YXIgX2Rpc3RhbmNlPWRpc3RhbmNlOwogICAgICAgICAgICAgICAgX2Rpc3RhbmNlPWhhbmRsZURpc3RhbmNlPyBkaXN0YW5jZSAvIHRoaXMub25lIDogZGlzdGFuY2U7CiAgICAgICAgICAgICAgICBfZGlzdGFuY2U9TWF0aC5tYXgoMCxfZGlzdGFuY2UpOwogICAgICAgICAgICAgICAgX2Rpc3RhbmNlPU1hdGgubWluKF9kaXN0YW5jZSx0aGlzLnNjcm9sbE1heCk7CgoKICAgICAgICAgICAgICAgIHZhciBwcm89dGhpcy5pc0hvcml6b250YWw/IFsnbGVmdCcsJ3Njcm9sbExlZnQnXSA6IFsndG9wJywnc2Nyb2xsVG9wJ107CgoKICAgICAgICAgICAgICAgIC8v5rua5Yqo6Jma5ouf5rua5Yqo5p2hCiAgICAgICAgICAgICAgICAvL+agueaNruavlOS+i+i9rOaNouS4uua7muWKqOadoeS4iuW6lOivpea7muWKqOeahOi3neemu+OAggogICAgICAgICAgICAgICAgZGlzdGFuY2U9aGFuZGxlRGlzdGFuY2U/IGRpc3RhbmNlIDogdGhpcy5vbmUgKiBkaXN0YW5jZTsKICAgICAgICAgICAgICAgIC8v5aSE55CG6Z2e5rOV5YC8CiAgICAgICAgICAgICAgICBkaXN0YW5jZT1NYXRoLm1heCgwLGRpc3RhbmNlKTsvL+WmguaenOWAvOWwj+S6jjDpgqPkuYjlj5YwCiAgICAgICAgICAgICAgICBkaXN0YW5jZT1NYXRoLm1pbihkaXN0YW5jZSx0aGlzLnRyYWNrU2l6ZSAtIHRoaXMuaGFuZGxlU2l6ZSk7Ly/lpKfkuo7mnoHpmZDlgLzvvIzlj5bmnoHpmZDlgLwKCiAgICAgICAgICAgICAgICB2YXIgc2hzPXRoaXMuc2Nyb2xsYmFyLmhhbmRsZS5zdHlsZTsKICAgICAgICAgICAgICAgIHZhciBjb250YWluZXI9dGhpcy5jb250YWluZXI7CiAgICAgICAgICAgICAgICBpZih0cmFuc2l0aW9uKXsKICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudHJhbnNpdGlvbkludGVydmFsKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0PTA7CiAgICAgICAgICAgICAgICAgICAgdmFyIGR1cmF0aW9uPTEwOwoKICAgICAgICAgICAgICAgICAgICB2YXIgY1N0YXJ0PXRoaXMuZ2V0U2Nyb2xsZWQoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgY0NoYW5nZT1fZGlzdGFuY2UtY1N0YXJ0OwogICAgICAgICAgICAgICAgICAgIHZhciBzU3RhcnQ9cGFyc2VGbG9hdChzaHNbcHJvWzBdXSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNDaGFuZ2U9ZGlzdGFuY2Utc1N0YXJ0OwoKICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNpdGlvbkludGVydmFsPXNldEludGVydmFsKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjRW5kPVR3ZWVuLkN1YmljLmVhc2VJbk91dChzdGFydCxjU3RhcnQsY0NoYW5nZSxkdXJhdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzRW5kPVR3ZWVuLkN1YmljLmVhc2VJbk91dChzdGFydCxzU3RhcnQsc0NoYW5nZSxkdXJhdGlvbik7CgogICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJbcHJvWzFdXT1jRW5kOwogICAgICAgICAgICAgICAgICAgICAgICBzaHNbcHJvWzBdXT1zRW5kICsgJ3B4JzsKCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0Kys7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHN0YXJ0Pj1kdXJhdGlvbil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRyYW5zaXRpb25JbnRlcnZhbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSwzNSk7CgogICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbkludGVydmFsPXRyYW5zaXRpb25JbnRlcnZhbDsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgbm9TY3JvbGw9c2hzW3Byb1swXV0ucmVwbGFjZSgvKFwuXGQqKT9ccypweC8sIiIpPT1NYXRoLmZsb29yKGRpc3RhbmNlKTsKICAgICAgICAgICAgICAgIHNoc1twcm9bMF1dPWRpc3RhbmNlICsgJ3B4JzsKICAgICAgICAgICAgICAgIGNvbnRhaW5lcltwcm9bMV1dPV9kaXN0YW5jZTsKICAgICAgICAgICAgICAgIHJldHVybiBub1Njcm9sbDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0U2Nyb2xsZWQ6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lclsodGhpcy5pc0hvcml6b250YWwgPyAnc2Nyb2xsTGVmdCcgOiAnc2Nyb2xsVG9wJyldOwogICAgICAgICAgICB9LAogICAgICAgIH07CgoKICAgICAgICAvL+aUvuWkp+mVnAogICAgICAgIGZ1bmN0aW9uIE1hZ25pZmllckMoaW1nLGRhdGEpewogICAgICAgICAgICB0aGlzLmltZz1pbWc7CiAgICAgICAgICAgIHRoaXMuZGF0YT1kYXRhOwogICAgICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICB9OwoKICAgICAgICBNYWduaWZpZXJDLmFsbD1bXTsKICAgICAgICBNYWduaWZpZXJDLnN0eWxlWkluZGV4PTkwMDAwMDAwMDsvL+WFqOWxgHotaW5kZXg7CgogICAgICAgIE1hZ25pZmllckMucHJvdG90eXBlPXsKICAgICAgICAgICAgaW5pdDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgTWFnbmlmaWVyQy56b29tUmFuZ2U9cHJlZnMubWFnbmlmaWVyLndoZWVsWm9vbS5yYW5nZS5zbGljZSgwKS5zb3J0KChhLCBiKT0+e3JldHVybiBhIC0gYn0pOwogICAgICAgICAgICAgICAgTWFnbmlmaWVyQy56b29tUmFuZ2VSPU1hZ25pZmllckMuem9vbVJhbmdlLnNsaWNlKDApLnJldmVyc2UoKTsvL+mZjeW6jwogICAgICAgICAgICAgICAgdGhpcy5hZGRTdHlsZSgpOwogICAgICAgICAgICAgICAgTWFnbmlmaWVyQy5hbGwucHVzaCh0aGlzKTsKICAgICAgICAgICAgICAgIHZhciBjb250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwoKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWU9J3B2LW1hZ25pZmllci1jb250YWluZXInOwogICAgICAgICAgICAgICAgZ2V0Qm9keShkb2N1bWVudCkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTsKCiAgICAgICAgICAgICAgICB0aGlzLm1hZ25pZmllcj1jb250YWluZXI7CgogICAgICAgICAgICAgICAgdmFyIGltZ05hdHVyYWxTaXplPXsKICAgICAgICAgICAgICAgICAgICBoOnRoaXMuaW1nLm5hdHVyYWxIZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgdzp0aGlzLmltZy5uYXR1cmFsV2lkdGgsCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRoaXMuaW1nTmF0dXJhbFNpemU9aW1nTmF0dXJhbFNpemU7CgogICAgICAgICAgICAgICAgdmFyIGNzPWNvbnRhaW5lci5zdHlsZTsKICAgICAgICAgICAgICAgIGNzLnpJbmRleD1NYWduaWZpZXJDLnN0eWxlWkluZGV4Kys7CgoKCiAgICAgICAgICAgICAgICB2YXIgbWF4RGlhPU1hdGguY2VpbChNYXRoLnNxcnQoTWF0aC5wb3coMS8yKmltZ05hdHVyYWxTaXplLncsMikgKyBNYXRoLnBvdygxLzIqaW1nTmF0dXJhbFNpemUuaCwyKSkgKiAyKTsKICAgICAgICAgICAgICAgIHRoaXMubWF4RGlhPW1heERpYTsKCiAgICAgICAgICAgICAgICB2YXIgcmFkaXVzPXByZWZzLm1hZ25pZmllci5yYWRpdXM7CiAgICAgICAgICAgICAgICByYWRpdXM9TWF0aC5taW4obWF4RGlhLzIscmFkaXVzKTsKICAgICAgICAgICAgICAgIHRoaXMucmFkaXVzPXJhZGl1czsKICAgICAgICAgICAgICAgIHZhciBkaWFtZXRlcj1yYWRpdXMgKiAyOwogICAgICAgICAgICAgICAgdGhpcy5kaWFtZXRlcj1kaWFtZXRlcjsKCiAgICAgICAgICAgICAgICBjcy53aWR0aD1kaWFtZXRlciArICdweCc7CiAgICAgICAgICAgICAgICBjcy5oZWlnaHQ9ZGlhbWV0ZXIgKyAncHgnOwogICAgICAgICAgICAgICAgY3MuYm9yZGVyUmFkaXVzPXJhZGl1cysxICsgJ3B4JzsKICAgICAgICAgICAgICAgIGNzLmJhY2tncm91bmRJbWFnZT0ndXJsKCInKyB0aGlzLmltZy5zcmMgKyciKSc7CiAgICAgICAgICAgICAgICBjcy5tYXJnaW5MZWZ0PSAtcmFkaXVzICsncHgnOwogICAgICAgICAgICAgICAgY3MubWFyZ2luVG9wPSAtcmFkaXVzICsncHgnOwoKICAgICAgICAgICAgICAgIHZhciBpbWdQb3M9Z2V0Q29udGVudENsaWVudFJlY3QodGhpcy5kYXRhLmltZyk7CiAgICAgICAgICAgICAgICB2YXIgd1Njcm9sbGVkPWdldFNjcm9sbGVkKCk7CiAgICAgICAgICAgICAgICB2YXIgaW1nUmFuZ2U9ey8v5Zu+54mH5omA5Zyo6IyD5Zu0CiAgICAgICAgICAgICAgICAgICAgeDpbaW1nUG9zLmxlZnQgKyB3U2Nyb2xsZWQueCAsIGltZ1Bvcy5yaWdodCArIHdTY3JvbGxlZC54XSwKICAgICAgICAgICAgICAgICAgICB5OltpbWdQb3MudG9wICsgd1Njcm9sbGVkLnksIGltZ1Bvcy5ib3R0b20gKyB3U2Nyb2xsZWQueV0sCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIGltZ1c9aW1nUmFuZ2UueFsxXSAtIGltZ1JhbmdlLnhbMF07CiAgICAgICAgICAgICAgICB2YXIgaW1nSD1pbWdSYW5nZS55WzFdIC0gaW1nUmFuZ2UueVswXTsKICAgICAgICAgICAgICAgIC8v5aaC5p6c5Zu+54mH5aSq5bCP55qE6K+d77yM6L+b6KGM6IyD5Zu05omp5aSn44CCCiAgICAgICAgICAgICAgICB2YXIgbWluU2l6ZT02MDsKICAgICAgICAgICAgICAgIGlmKGltZ1cgPCBtaW5TaXplKXsKICAgICAgICAgICAgICAgICAgICBpbWdSYW5nZS54WzFdICs9KG1pblNpemUgLSBpbWdXKS8yOwogICAgICAgICAgICAgICAgICAgIGltZ1JhbmdlLnhbMF0gLT0obWluU2l6ZSAtIGltZ1cpLzI7CiAgICAgICAgICAgICAgICAgICAgaW1nVz1taW5TaXplOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGlmKGltZ0ggPCBtaW5TaXplKXsKICAgICAgICAgICAgICAgICAgICBpbWdSYW5nZS55WzFdICs9KG1pblNpemUgLSBpbWdIKS8yOwogICAgICAgICAgICAgICAgICAgIGltZ1JhbmdlLnlbMF0gLT0obWluU2l6ZSAtIGltZ0gpLzI7CiAgICAgICAgICAgICAgICAgICAgaW1nSD1taW5TaXplOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMuaW1nU2l6ZT17CiAgICAgICAgICAgICAgICAgICAgdzppbWdXLAogICAgICAgICAgICAgICAgICAgIGg6aW1nSCwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmltZ1JhbmdlPWltZ1JhbmdlOwoKICAgICAgICAgICAgICAgIHRoaXMuc2V0TW91c2VSYW5nZSgpOwoKCiAgICAgICAgICAgICAgICB0aGlzLm1vdmUoewogICAgICAgICAgICAgICAgICAgIHBhZ2VYOmltZ1JhbmdlLnhbMF0sCiAgICAgICAgICAgICAgICAgICAgcGFnZVk6aW1nUmFuZ2UueVswXSwKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHRoaXMuX2ZvY3VzPXRoaXMuZm9jdXMuYmluZCh0aGlzKTsKICAgICAgICAgICAgICAgIHRoaXMuX2JsdXI9dGhpcy5ibHVyLmJpbmQodGhpcyk7CiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlPXRoaXMubW92ZS5iaW5kKHRoaXMpOwogICAgICAgICAgICAgICAgdGhpcy5fcmVtb3ZlPXRoaXMucmVtb3ZlLmJpbmQodGhpcyk7CiAgICAgICAgICAgICAgICB0aGlzLl9wYXVzZT10aGlzLnBhdXNlLmJpbmQodGhpcyk7CiAgICAgICAgICAgICAgICB0aGlzLl96b29tPXRoaXMuem9vbS5iaW5kKHRoaXMpOwogICAgICAgICAgICAgICAgdGhpcy5fY2xpY2tPdXQ9dGhpcy5jbGlja091dC5iaW5kKHRoaXMpOwogICAgICAgICAgICAgICAgdGhpcy5fa2V5ZG93bj10aGlzLmtleWRvd24uYmluZCh0aGlzKTsKCiAgICAgICAgICAgICAgICBpZiAocHJlZnMubWFnbmlmaWVyLndoZWVsWm9vbS5lbmFibGVkIHx8IHByZWZzLm1hZ25pZmllci53aGVlbFpvb20uc2NhbGVJbWFnZSAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb21MZXZlbD0xOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdERpYT1kaWFtZXRlcjsKICAgICAgICAgICAgICAgICAgICBhZGRXaGVlbEV2ZW50KGNvbnRhaW5lcix0aGlzLl96b29tLGZhbHNlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyx0aGlzLl9mb2N1cyxmYWxzZSk7CiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLHRoaXMuX2JsdXIsZmFsc2UpOwogICAgICAgICAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJyx0aGlzLl9yZW1vdmUsZmFsc2UpOwogICAgICAgICAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyx0aGlzLl9wYXVzZSxmYWxzZSk7CgoKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLHRoaXMuX2tleWRvd24sIHRydWUpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJyx0aGlzLl9tb3ZlLHRydWUpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsdGhpcy5fY2xpY2tPdXQsdHJ1ZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFkZFN0eWxlOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBpZiAoTWFnbmlmaWVyQy5zdHlsZSkgewogICAgICAgICAgICAgICAgICAgIGlmICghTWFnbmlmaWVyQy5zdHlsZS5wYXJlbnROb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIE1hZ25pZmllckMuc3R5bGUgPSBfR01fYWRkU3R5bGUoTWFnbmlmaWVyQy5zdHlsZS5pbm5lclRleHQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBNYWduaWZpZXJDLnN0eWxlPV9HTV9hZGRTdHlsZSgnXAogICAgICAgICAgICAgICAgICAgIC5wdi1tYWduaWZpZXItY29udGFpbmVye1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzowO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW46MDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1vcmlnaW46Ym9yZGVyLWJveDtcCiAgICAgICAgICAgICAgICAgICAgLW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7XAogICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6Ym9yZGVyLWJveDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOjNweCBzb2xpZCAjQ0NDQ0NDO1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOnJnYmEoNDAsIDQwLCA0MCwgMC45KSBuby1yZXBlYXQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LW1hZ25pZmllci1jb250YWluZXJfZm9jdXN7XAogICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDBweCAwcHggNnB4IHJnYmEoMCwgMCwgMCwgMC43KTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtbWFnbmlmaWVyLWNvbnRhaW5lcl9wYXVzZXtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOnJlZDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAnKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2xpY2tPdXQ6ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICBpZighdGhpcy5tYWduaWZpZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCJwdi1tYWduaWZpZXItY29udGFpbmVyX2ZvY3VzIikpewogICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBmb2N1czpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdGhpcy5tYWduaWZpZXIuY2xhc3NMaXN0LmFkZCgncHYtbWFnbmlmaWVyLWNvbnRhaW5lcl9mb2N1cycpOwogICAgICAgICAgICAgICAgdGhpcy5tYWduaWZpZXIuc3R5bGUuekluZGV4PU1hZ25pZmllckMuc3R5bGVaSW5kZXgrKzsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYmx1cjpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdGhpcy5tYWduaWZpZXIuY2xhc3NMaXN0LnJlbW92ZSgncHYtbWFnbmlmaWVyLWNvbnRhaW5lcl9mb2N1cycpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBtb3ZlOmZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgdmFyIG1vdXNlQ29vcj17CiAgICAgICAgICAgICAgICAgICAgeDplLnBhZ2VYLAogICAgICAgICAgICAgICAgICAgIHk6ZS5wYWdlWSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgbW91c2VSYW5nZT10aGlzLm1vdXNlUmFuZ2U7CiAgICAgICAgICAgICAgICB2YXIgaW1nUmFuZ2U9dGhpcy5pbWdSYW5nZTsKCiAgICAgICAgICAgICAgICBpZiggIShtb3VzZUNvb3IueCA+PSBtb3VzZVJhbmdlLnhbMF0gJiYgbW91c2VDb29yLnggPD0gbW91c2VSYW5nZS54WzFdICYmIG1vdXNlQ29vci55ID49IG1vdXNlUmFuZ2UueVswXSAmJiBtb3VzZUNvb3IueSA8PSBtb3VzZVJhbmdlLnlbMV0pKXJldHVybjsvL+WmguaenOS4jeWGjem8oOagh+iMg+WbtAogICAgICAgICAgICAgICAgaWYobW91c2VDb29yLnggPiBpbWdSYW5nZS54WzFdKXsKICAgICAgICAgICAgICAgICAgICBtb3VzZUNvb3IueCA9IGltZ1JhbmdlLnhbMV07CiAgICAgICAgICAgICAgICB9ZWxzZSBpZihtb3VzZUNvb3IueCA8IGltZ1JhbmdlLnhbMF0pewogICAgICAgICAgICAgICAgICAgIG1vdXNlQ29vci54ID0gaW1nUmFuZ2UueFswXTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBpZihtb3VzZUNvb3IueSA+IGltZ1JhbmdlLnlbMV0pewogICAgICAgICAgICAgICAgICAgIG1vdXNlQ29vci55ID0gaW1nUmFuZ2UueVsxXTsKICAgICAgICAgICAgICAgIH1lbHNlIGlmKG1vdXNlQ29vci55IDwgaW1nUmFuZ2UueVswXSl7CiAgICAgICAgICAgICAgICAgICAgbW91c2VDb29yLnkgPSBpbWdSYW5nZS55WzBdOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgbXM9dGhpcy5tYWduaWZpZXIuc3R5bGU7CiAgICAgICAgICAgICAgICBtcy50b3A9IG1vdXNlQ29vci55ICsgJ3B4JzsKICAgICAgICAgICAgICAgIG1zLmxlZnQ9IG1vdXNlQ29vci54ICsgJ3B4JzsKCiAgICAgICAgICAgICAgICB2YXIgcmFkaXVzPXRoaXMucmFkaXVzOwogICAgICAgICAgICAgICAgdmFyIGltZ1NpemU9dGhpcy5pbWdTaXplOwogICAgICAgICAgICAgICAgdmFyIGltZ05hdHVyYWxTaXplPXRoaXMuaW1nTmF0dXJhbFNpemU7CiAgICAgICAgICAgICAgICB2YXIgcHg9LSgobW91c2VDb29yLngtaW1nUmFuZ2UueFswXSkvaW1nU2l6ZS53ICogaW1nTmF0dXJhbFNpemUudykgKyByYWRpdXMgKydweCc7CiAgICAgICAgICAgICAgICB2YXIgcHk9LSgobW91c2VDb29yLnktaW1nUmFuZ2UueVswXSkvaW1nU2l6ZS5oICogaW1nTmF0dXJhbFNpemUuaCkgKyByYWRpdXMgKydweCc7CiAgICAgICAgICAgICAgICBtcy5iYWNrZ3JvdW5kUG9zaXRpb249cHggKyAnICcgKyBweTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0TmV4dFpvb21MZXZlbDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdmFyIGxldmVsOwogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgIGlmKHRoaXMuem9vbU91dCl7Ly/nvKnlsI8KICAgICAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBNYWduaWZpZXJDLnpvb21SYW5nZVIuZmluZChmdW5jdGlvbih2YWx1ZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlIDwgc2VsZi56b29tTGV2ZWwpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw9dmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXZlbCA9IHNlbGYuem9vbUxldmVsICogMC45OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IE1hZ25pZmllckMuem9vbVJhbmdlLmZpbmQoZnVuY3Rpb24odmFsdWUpewogICAgICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZSA+IHNlbGYuem9vbUxldmVsKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsPXZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXZlbCA9IHNlbGYuem9vbUxldmVsICogMS4xOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBsZXZlbDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgem9vbTpmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgIGlmICgoZS5tZXRhS2V5ICE9ICEhcHJlZnMubWFnbmlmaWVyLndoZWVsWm9vbS5tZXRhKSB8fAogICAgICAgICAgICAgICAgICAgKGUuYWx0S2V5ICE9ICEhcHJlZnMubWFnbmlmaWVyLndoZWVsWm9vbS5hbHQpIHx8CiAgICAgICAgICAgICAgICAgICAoZS5jdHJsS2V5ICE9ICEhcHJlZnMubWFnbmlmaWVyLndoZWVsWm9vbS5jdHJsKSB8fAogICAgICAgICAgICAgICAgICAgKGUuc2hpZnRLZXkgIT0gISFwcmVmcy5tYWduaWZpZXIud2hlZWxab29tLnNoaWZ0KSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKGUuZGVsdGFZPT09MClyZXR1cm47Ly/pnZ5Z6L2055qE5rua5YqoCiAgICAgICAgICAgICAgICB2YXIgbXM9dGhpcy5tYWduaWZpZXIuc3R5bGU7CiAgICAgICAgICAgICAgICBpZihwcmVmcy5tYWduaWZpZXIud2hlZWxab29tLnBhdXNlRmlyc3QgJiYgIXRoaXMucGF1c2VkKXsKICAgICAgICAgICAgICAgICAgICBpZiAocHJlZnMubWFnbmlmaWVyLndoZWVsWm9vbS5zY2FsZUltYWdlICE9PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VyU2NhbGUgPSBtcy50cmFuc2Zvcm0ubWF0Y2goL1tcZFwuXSsvKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1clNjYWxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJTY2FsZSA9IHBhcnNlRmxvYXQoY3VyU2NhbGVbMF0pOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgY3VyU2NhbGUgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5kZWx0YVkgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJTY2FsZSArPSAwLjE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJTY2FsZSAtPSAwLjE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1clNjYWxlIDwgMC41KSBjdXJTY2FsZSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgbXMudHJhbnNmb3JtID0gYHNjYWxlKCR7Y3VyU2NhbGV9KWA7CiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoIXByZWZzLm1hZ25pZmllci53aGVlbFpvb20uZW5hYmxlZClyZXR1cm47CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICBpZihlLmRlbHRhWSA8IDApey8v5ZCR5LiK5rua77yM5pS+5aSn77ybCiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5kaWFtZXRlciA+PSB0aGlzLm1heERpYSlyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tT3V0PWZhbHNlOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tT3V0PXRydWU7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIGxldmVsPXRoaXMuZ2V0TmV4dFpvb21MZXZlbCgpOwogICAgICAgICAgICAgICAgaWYoIWxldmVsKXJldHVybjsKCiAgICAgICAgICAgICAgICB0aGlzLnpvb21MZXZlbD1sZXZlbDsKICAgICAgICAgICAgICAgIHZhciBkaWFtZXRlcj10aGlzLmRlZmF1bHREaWEgKiBsZXZlbDsKICAgICAgICAgICAgICAgIGlmKGRpYW1ldGVyID4gdGhpcy5tYXhEaWEpewogICAgICAgICAgICAgICAgICAgIGRpYW1ldGVyID0gdGhpcy5tYXhEaWE7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciByYWRpdXM9ZGlhbWV0ZXIvMgogICAgICAgICAgICAgICAgdGhpcy5kaWFtZXRlcj1kaWFtZXRlcjsKICAgICAgICAgICAgICAgIHZhciBiUmFkaXVzPXRoaXMucmFkaXVzOwogICAgICAgICAgICAgICAgdGhpcy5yYWRpdXM9cmFkaXVzOwogICAgICAgICAgICAgICAgdGhpcy5zZXRNb3VzZVJhbmdlKCk7CiAgICAgICAgICAgICAgICBtcy53aWR0aD1kaWFtZXRlcisncHgnOwogICAgICAgICAgICAgICAgbXMuaGVpZ2h0PWRpYW1ldGVyKydweCc7CiAgICAgICAgICAgICAgICBtcy5ib3JkZXJSYWRpdXM9cmFkaXVzKzEgKyAncHgnOwogICAgICAgICAgICAgICAgbXMubWFyZ2luTGVmdD0tcmFkaXVzKydweCc7CiAgICAgICAgICAgICAgICBtcy5tYXJnaW5Ub3A9LXJhZGl1cysncHgnOwogICAgICAgICAgICAgICAgdmFyIGJCUD1tcy5iYWNrZ3JvdW5kUG9zaXRpb24uc3BsaXQoJyAnKTsKICAgICAgICAgICAgICAgIG1zLmJhY2tncm91bmRQb3NpdGlvbj1wYXJzZUZsb2F0KGJCUFswXSkgKyAocmFkaXVzIC0gYlJhZGl1cykgKyAncHgnICsgJyAnICsgKHBhcnNlRmxvYXQoYkJQWzFdKSArICggcmFkaXVzIC0gYlJhZGl1cykgKyAncHgnKTsKCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHBhdXNlOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBpZih0aGlzLnBhdXNlZCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWduaWZpZXIuY2xhc3NMaXN0LnJlbW92ZSgncHYtbWFnbmlmaWVyLWNvbnRhaW5lcl9wYXVzZScpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsdGhpcy5fbW92ZSx0cnVlKTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHRoaXMubWFnbmlmaWVyLmNsYXNzTGlzdC5hZGQoJ3B2LW1hZ25pZmllci1jb250YWluZXJfcGF1c2UnKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLHRoaXMuX21vdmUsdHJ1ZSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5wYXVzZWQ9IXRoaXMucGF1c2VkOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXRNb3VzZVJhbmdlOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB2YXIgaW1nUmFuZ2U9dGhpcy5pbWdSYW5nZTsKICAgICAgICAgICAgICAgIHZhciByYWRpdXM9dGhpcy5yYWRpdXM7CiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlUmFuZ2U9ey8v6byg5qCH5rS75Yqo6IyD5Zu0CiAgICAgICAgICAgICAgICAgICAgeDpbaW1nUmFuZ2UueFswXS1yYWRpdXMgLCBpbWdSYW5nZS54WzFdICsgcmFkaXVzXSwKICAgICAgICAgICAgICAgICAgICB5OltpbWdSYW5nZS55WzBdLXJhZGl1cyAsIGltZ1JhbmdlLnlbMV0gKyByYWRpdXNdLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAga2V5ZG93bjpmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAyNykgdGhpcy5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVtb3ZlOmZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgaWYgKGUpIHsKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hZ25pZmllci5wYXJlbnROb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWduaWZpZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLm1hZ25pZmllcik7CiAgICAgICAgICAgICAgICAgICAgTWFnbmlmaWVyQy5hbGwuc3BsaWNlKE1hZ25pZmllckMuYWxsLmluZGV4T2YodGhpcyksMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLHRoaXMuX21vdmUsdHJ1ZSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJyx0aGlzLl9jbGlja091dCx0cnVlKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLHRoaXMuX2tleWRvd24sIHRydWUpOwogICAgICAgICAgICB9LAogICAgICAgIH07CgogICAgICAgIC8v5Zu+54mH56qX5Y+jCiAgICAgICAgZnVuY3Rpb24gSW1nV2luZG93QyhpbWcsIGRhdGEsIGFjdHVhbCwgaW5pdFBvcywgcHJldmlldyl7CiAgICAgICAgICAgIHRoaXMubG9hZGVkID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuaW1nID0gaW1nOwogICAgICAgICAgICB0aGlzLmFjdHVhbCA9ICEhYWN0dWFsOwogICAgICAgICAgICB0aGlzLnNyYyA9IGRhdGE/ZGF0YS5zcmM6aW1nLnNyYzsKICAgICAgICAgICAgdGhpcy5kYXRhID0gZGF0YSB8fCBmaW5kUGljKGltZyk7CiAgICAgICAgICAgIHRoaXMuaW5pdFBvcyA9IGluaXRQb3MgfHwgZmFsc2U7CiAgICAgICAgICAgIHRoaXMucHJldmlldyA9ICEhcHJldmlldzsKICAgICAgICAgICAgdGhpcy5pc0ltZyA9IHRoaXMuaW1nLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT0gJ0lNRyc7CiAgICAgICAgICAgIHRoaXMuaW5pdCgpOwogICAgICAgICAgICBpZiAoZGF0YSAmJiB0aGlzLmlzSW1nKSB7CiAgICAgICAgICAgICAgICB0aGlzLmltZy5zcmMgPSBsb2NhdGlvbi5wcm90b2NvbCA9PSAiaHR0cHMiID8gZGF0YS5zcmMucmVwbGFjZSgvXmh0dHA6LywiaHR0cHM6IikgOiBkYXRhLnNyYzsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIEltZ1dpbmRvd0MuYWxsPVtdOy8v5omA5pyJ55qE56qX5Y+j5a+56LGhCiAgICAgICAgSW1nV2luZG93Qy5vdmVybGF5ZXI9bnVsbDsKCgogICAgICAgIEltZ1dpbmRvd0MucHJvdG90eXBlPXsKICAgICAgICAgICAgaW5pdDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgSW1nV2luZG93Qy5zaG93aW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIEltZ1dpbmRvd0Muem9vbVJhbmdlPXByZWZzLmltZ1dpbmRvdy56b29tLnJhbmdlLnNsaWNlKDApLnNvcnQoKGEsIGIpPT57cmV0dXJuIGEgLSBifSk7CiAgICAgICAgICAgICAgICBJbWdXaW5kb3dDLnpvb21SYW5nZVI9SW1nV2luZG93Qy56b29tUmFuZ2Uuc2xpY2UoMCkucmV2ZXJzZSgpOy8v6ZmN5bqPCiAgICAgICAgICAgICAgICB2YXIgc2VsZj10aGlzOwogICAgICAgICAgICAgICAgaWYodW5pcXVlSW1nV2luICYmICF1bmlxdWVJbWdXaW4ucmVtb3ZlZCl7CiAgICAgICAgICAgICAgICAgICAgdW5pcXVlSW1nV2luLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCF0aGlzLnByZXZpZXcpIHsKICAgICAgICAgICAgICAgICAgICAvL+WbvueJh+aYr+WQpuW3sue7j+iiq+aJk+W8gAogICAgICAgICAgICAgICAgICAgIGlmKEltZ1dpbmRvd0MuYWxsLmZpbmQoZnVuY3Rpb24oaXdpbil7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl3aW4uc3JjPT1zZWxmLnNyYyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpd2luLmZpcnN0T3BlbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSkpcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMuYWRkU3R5bGUoKTsKCiAgICAgICAgICAgICAgICB2YXIgaW1nPXRoaXMuaW1nOwogICAgICAgICAgICAgICAgaW1nLmNsYXNzTmFtZT0ncHYtcGljLXdpbmRvdy1waWMgcHYtcGljLWlnbm9yZWQnOwogICAgICAgICAgICAgICAgaW1nLnN0eWxlLmNzc1RleHQ9J1wKICAgICAgICAgICAgICAgICB0b3A6MHB4O1wKICAgICAgICAgICAgICAgICBsZWZ0OjBweDtcCiAgICAgICAgICAgICAgICAgJzsKCiAgICAgICAgICAgICAgICB2YXIgaW1nTmF0dXJhbFNpemU9ewogICAgICAgICAgICAgICAgICAgIGg6aW1nLm5hdHVyYWxIZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgdzppbWcubmF0dXJhbFdpZHRoLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMuaW1nTmF0dXJhbFNpemU9aW1nTmF0dXJhbFNpemU7CiAgICAgICAgICAgICAgICB0aGlzLmZvbGxvd2luZz1mYWxzZTsKCiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5jc3NUZXh0PSdcCiAgICAgICAgICAgICAgICAgY3Vyc29yOnBvaW50ZXI7XAogICAgICAgICAgICAgICAgIHRvcDowcHg7XAogICAgICAgICAgICAgICAgIGxlZnQ6MHB4O1wKICAgICAgICAgICAgICAgICBvcGFjaXR5OjA7XAogICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6YmxhY2sgdXJsKCInK3ByZWZzLmljb25zLmxvYWRpbmcrJyIpIGNlbnRlciBuby1yZXBlYXQ7XAogICAgICAgICAgICAgICAgICc7CiAgICAgICAgICAgICAgICBjb250YWluZXIuY2xhc3NOYW1lPSdwdi1waWMtd2luZG93LWNvbnRhaW5lcic7CiAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MPWNyZWF0ZUhUTUwoCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LWltZ2JveCB0cmFuc2l0aW9uLXRyYW5zZm9ybSI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LXJvdGF0ZS1pbmRpY2F0b3IiPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LXJvdGF0ZS1pbmRpY2F0b3ItcG9pbnRlciI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtcGljLXdpbmRvdy1yb3RhdGUtb3ZlcmxheWVyIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctdG9vbGJhciIgdW5zZWxlY3RhYmxlPSJvbiI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctdGItaGFuZCBwdi1waWMtd2luZG93LXRiLXRvb2wiIHRpdGxlPSInK2kxOG4oImhhbmQiKSsnIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctdGItdG9vbC1iYWRnZS1jb250YWluZXIgcHYtcGljLXdpbmRvdy10Yi10b29sLWV4dGVuZC1tZW51LWNvbnRhaW5lciI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctdGItcm90YXRlIHB2LXBpYy13aW5kb3ctdGItdG9vbCIgdGl0bGU9IicraTE4bigicm90YXRlIikrJyhyKSI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LXRiLXRvb2wtYmFkZ2UiPjA8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctdGItdG9vbC1leHRlbmQtbWVudSBwdi1waWMtd2luZG93LXRiLXRvb2wtZXh0ZW5kLW1lbnUtcm90YXRlIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtcGljLXdpbmRvdy10Yi10b29sLWV4dGVuZC1tZW51LWl0ZW0iIHRpdGxlPSIrOTAiPjxzdmcgY2xhc3M9Imljb24iIHN0eWxlPSJ3aWR0aDogMWVtO2hlaWdodDogMWVtO3ZlcnRpY2FsLWFsaWduOiBtaWRkbGU7ZmlsbDogY3VycmVudENvbG9yO292ZXJmbG93OiBoaWRkZW47IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iNDMzMiI+PHBhdGggZD0iTTQzNS4yIDM2Mi42NjY2NjdsMTc5LjItMTc5LjJMNDM1LjIgMCAzNzUuNDY2NjY3IDU5LjczMzMzM2w3Ni44IDc2LjhIMzQxLjMzMzMzM2MtMTE5LjQ2NjY2NyAwLTIxMy4zMzMzMzMgOTMuODY2NjY3LTIxMy4zMzMzMzMgMjEzLjMzMzMzNHYxNzAuNjY2NjY2aDg1LjMzMzMzM3YtMTcwLjY2NjY2NmMwLTcyLjUzMzMzMyA1NS40NjY2NjctMTI4IDEyOC0xMjhoMTE1LjJMMzc1LjQ2NjY2NyAzMDIuOTMzMzMzbDU5LjczMzMzMyA1OS43MzMzMzR6TTg1My4zMzMzMzMgMzg0SDQyNi42NjY2NjdjLTI1LjYgMC00Mi42NjY2NjcgMTcuMDY2NjY3LTQyLjY2NjY2NyA0Mi42NjY2Njd2NDI2LjY2NjY2NmMwIDI1LjYgMTcuMDY2NjY3IDQyLjY2NjY2NyA0Mi42NjY2NjcgNDIuNjY2NjY3aDQyNi42NjY2NjZjMjUuNiAwIDQyLjY2NjY2Ny0xNy4wNjY2NjcgNDIuNjY2NjY3LTQyLjY2NjY2N1Y0MjYuNjY2NjY3YzAtMjUuNi0xNy4wNjY2NjctNDIuNjY2NjY3LTQyLjY2NjY2Ny00Mi42NjY2Njd6IG0tNDIuNjY2NjY2IDQyNi42NjY2NjdoLTM0MS4zMzMzMzR2LTM0MS4zMzMzMzRoMzQxLjMzMzMzNHYzNDEuMzMzMzM0eiIgcC1pZD0iNDMzMyI+PC9wYXRoPjwvc3ZnPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtcGljLXdpbmRvdy10Yi10b29sLWV4dGVuZC1tZW51LWl0ZW0iIHRpdGxlPSItOTAiPjxzdmcgY2xhc3M9Imljb24iIHN0eWxlPSJ3aWR0aDogMWVtO2hlaWdodDogMWVtO3ZlcnRpY2FsLWFsaWduOiBtaWRkbGU7ZmlsbDogY3VycmVudENvbG9yO292ZXJmbG93OiBoaWRkZW47IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iNDU5NSI+PHBhdGggZD0iTTY4Mi42NjY2NjcgMTM2LjUzMzMzM2gtMTE1LjJsNzYuOC03Ni44TDU4OC44IDAgNDA1LjMzMzMzMyAxNzkuMmwxNzkuMiAxNzkuMkw2NDQuMjY2NjY3IDI5OC42NjY2NjdsLTc2LjgtNzYuOEg2ODIuNjY2NjY3YzcyLjUzMzMzMyAwIDEyOCA1NS40NjY2NjcgMTI4IDEyOHYxNzAuNjY2NjY2aDg1LjMzMzMzM3YtMTcwLjY2NjY2NmMwLTExNS4yLTkzLjg2NjY2Ny0yMTMuMzMzMzMzLTIxMy4zMzMzMzMtMjEzLjMzMzMzNHpNNTk3LjMzMzMzMyAzODRIMTcwLjY2NjY2N2MtMjUuNiAwLTQyLjY2NjY2NyAxNy4wNjY2NjctNDIuNjY2NjY3IDQyLjY2NjY2N3Y0MjYuNjY2NjY2YzAgMjUuNiAxNy4wNjY2NjcgNDIuNjY2NjY3IDQyLjY2NjY2NyA0Mi42NjY2NjdoNDI2LjY2NjY2NmMyNS42IDAgNDIuNjY2NjY3LTE3LjA2NjY2NyA0Mi42NjY2NjctNDIuNjY2NjY3VjQyNi42NjY2NjdjMC0yNS42LTE3LjA2NjY2Ny00Mi42NjY2NjctNDIuNjY2NjY3LTQyLjY2NjY2N3ogbS00Mi42NjY2NjYgNDI2LjY2NjY2N0gyMTMuMzMzMzMzdi0zNDEuMzMzMzM0aDM0MS4zMzMzMzR2MzQxLjMzMzMzNHoiIHAtaWQ9IjQ1OTYiPjwvcGF0aD48L3N2Zz48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctdGItdG9vbC1leHRlbmQtbWVudS1pdGVtIiB0aXRsZT0iMCI+PHN2ZyBjbGFzcz0iaWNvbiIgc3R5bGU9IndpZHRoOiAxZW07aGVpZ2h0OiAxZW07dmVydGljYWwtYWxpZ246IG1pZGRsZTtmaWxsOiBjdXJyZW50Q29sb3I7b3ZlcmZsb3c6IGhpZGRlbjsiIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBwLWlkPSIzNzE2Ij48cGF0aCBkPSJNODY3Ljg5IDU3NC4xNmEzMC43MyAzMC43MyAwIDAgMC0zNy41MiAyMS45MmMtMzggMTQ0LjgzLTE2OS4zMSAyNDYtMzE5LjI1IDI0NmEzMzAuNzEgMzMwLjcxIDAgMCAxLTMwNi4yNy0yMDYuODJoNjAuMjlsLTkyLjc4LTEyMy41LTkxLjgyIDEyMy41aDU4Ljg4cTEuMjMgMy43MiAyLjUzIDcuNEEzOTEuNjUgMzkxLjY1IDAgMCAwIDUxMS4xMiA5MDMuNWMxNzcuODYgMCAzMzMuNTgtMTIwIDM3OC42OS0yOTEuODJhMzAuNzMgMzAuNzMgMCAwIDAtMjEuOTItMzcuNTJ6TTE1My44OCA0NTIuNTdhMzAuNjkgMzAuNjkgMCAwIDAgMzcuMzUtMjIuMkEzMjkuNjggMzI5LjY4IDAgMCAxIDUxMS4xMiAxODJjMTM2LjggMCAyNTYuNTggODIgMzA2LjQgMjA3aC02MC42Nmw5Mi43OCAxMjMuNUw5NDEuNDYgMzg5aC01OC41OGEzOTEuNjMgMzkxLjYzIDAgMCAwLTc1MS4yIDI2LjI0IDMwLjczIDMwLjczIDAgMCAwIDIyLjIgMzcuMzN6IiBwLWlkPSIzNzE3Ij48L3BhdGg+PC9zdmc+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctdGItdG9vbC1iYWRnZS1jb250YWluZXIgcHYtcGljLXdpbmRvdy10Yi10b29sLWV4dGVuZC1tZW51LWNvbnRhaW5lciI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctdGItem9vbSBwdi1waWMtd2luZG93LXRiLXRvb2wiIHRpdGxlPSInK2kxOG4oInNjYWxlIikrJyh6KSI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LXRiLXRvb2wtYmFkZ2UiPjA8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctdGItdG9vbC1leHRlbmQtbWVudSBwdi1waWMtd2luZG93LXRiLXRvb2wtZXh0ZW5kLW1lbnUtem9vbSI+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gaWQ9InB2LXBpYy16b29tLWluIiBjbGFzcz0icHYtcGljLXdpbmRvdy10Yi10b29sLWV4dGVuZC1tZW51LWl0ZW0iIHRpdGxlPSIrMC4xIj48c3ZnIGNsYXNzPSJpY29uIiBzdHlsZT0id2lkdGg6IDFlbTtoZWlnaHQ6IDFlbTt2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO2ZpbGw6IGN1cnJlbnRDb2xvcjtvdmVyZmxvdzogaGlkZGVuOyIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjMxMzQiPjxwYXRoIGQ9Ik03NTQuMiAxNTEuNWgtODkuNXY0Mi43aDg5LjVjNTkuNSAwIDEwOCA0OC40IDEwOCAxMDh2NjcuNmg0Mi43di02Ny42YzAtODMuMS02Ny42LTE1MC43LTE1MC43LTE1MC43ek04NjIuMiA3MzcuM2MwIDU5LjUtNDguNCAxMDgtMTA4IDEwOGgtODkuNVY4ODhoODkuNWM4My4xIDAgMTUwLjctNjcuNiAxNTAuNy0xNTAuN3YtNjcuNmgtNDIuN3Y2Ny42ek0xNjYuMyA3MzcuOHYtNjcuNmgtNDIuN3Y2Ny42YzAgODMuMSA2Ny42IDE1MC43IDE1MC43IDE1MC43aDg5LjV2LTQyLjdoLTg5LjVjLTU5LjUgMC0xMDgtNDguNC0xMDgtMTA4ek00MTYuMyAyNjEuOGgtNDIuOHYxMjZIMjQ3LjZ2NDIuN2gxMjUuOVY1NTZoNDIuOFY0MzAuNWgxMjUuNHYtNDIuN0g0MTYuM3pNNzczLjYgNzg5LjRsMzAuMi0zMC4yLTE5MC4xLTE5MC42YzMyLjctNDQuOCA1Mi05OS45IDUyLTE1OS41IDAtMTQ5LjctMTIxLjYtMjcxLjMtMjcxLjMtMjcxLjMtMTQ5LjMgMC0yNzEuMyAxMjEuNi0yNzEuMyAyNzEuMyAwIDE0OS4zIDEyMS41IDI3MS4zIDI3MS4zIDI3MS4zIDc0LjUgMCAxNDIuMy0zMC4zIDE5MS40LTc5LjNsMTg3LjggMTg4LjN6TTM5NC40IDYzNy43Yy0xMjYgMC0yMjguNi0xMDIuNS0yMjguNi0yMjguNnMxMDIuNS0yMjguNiAyMjguNi0yMjguNlM2MjMgMjgzLjEgNjIzIDQwOS4yIDUyMC41IDYzNy43IDM5NC40IDYzNy43eiIgcC1pZD0iMzEzNSI+PC9wYXRoPjwvc3ZnPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBpZD0icHYtcGljLXpvb20tb3V0IiBjbGFzcz0icHYtcGljLXdpbmRvdy10Yi10b29sLWV4dGVuZC1tZW51LWl0ZW0iIHRpdGxlPSItMC4xIj48c3ZnIGNsYXNzPSJpY29uIiBzdHlsZT0id2lkdGg6IDFlbTtoZWlnaHQ6IDFlbTt2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO2ZpbGw6IGN1cnJlbnRDb2xvcjtvdmVyZmxvdzogaGlkZGVuOyIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI2NzQiPjxwYXRoIGQ9Ik03NTQuMiAxNTEuNWgtODkuNXY0Mi43aDg5LjVjNTkuNSAwIDEwOCA0OC40IDEwOCAxMDh2NjcuNmg0Mi43di02Ny42YzAtODMuMS02Ny42LTE1MC43LTE1MC43LTE1MC43ek04NjIuMiA3MzcuM2MwIDU5LjUtNDguNCAxMDgtMTA4IDEwOGgtODkuNVY4ODhoODkuNWM4My4xIDAgMTUwLjctNjcuNiAxNTAuNy0xNTAuN3YtNjcuNmgtNDIuN3Y2Ny42ek0xNjYuMyA3MzcuOHYtNjcuNmgtNDIuN3Y2Ny42YzAgODMuMSA2Ny42IDE1MC43IDE1MC43IDE1MC43aDg5LjV2LTQyLjdoLTg5LjVjLTU5LjUgMC0xMDgtNDguNC0xMDgtMTA4ek0yNDcuNiAzODcuOGgyOTQuMnY0Mi43SDI0Ny42ek03NzMuNiA3ODkuNGwzMC4yLTMwLjItMTkwLjEtMTkwLjZjMzIuNy00NC44IDUyLTk5LjkgNTItMTU5LjUgMC0xNDkuNy0xMjEuNi0yNzEuMy0yNzEuMy0yNzEuMy0xNDkuMyAwLTI3MS4zIDEyMS42LTI3MS4zIDI3MS4zIDAgMTQ5LjMgMTIxLjYgMjcxLjMgMjcxLjMgMjcxLjMgNzQuNSAwIDE0Mi4zLTMwLjMgMTkxLjQtNzkuM2wxODcuOCAxODguM3pNMzk0LjQgNjM3LjdjLTEyNiAwLTIyOC42LTEwMi41LTIyOC42LTIyOC42czEwMi41LTIyOC42IDIyOC42LTIyOC42UzYyMyAyODMuMSA2MjMgNDA5LjIgNTIwLjUgNjM3LjcgMzk0LjQgNjM3Ljd6IiBwLWlkPSIyNjc1Ij48L3BhdGg+PC9zdmc+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LXRiLXRvb2wtZXh0ZW5kLW1lbnUtaXRlbSIgdGl0bGU9IjEiPjxzdmcgY2xhc3M9Imljb24iIHN0eWxlPSJ3aWR0aDogMWVtO2hlaWdodDogMWVtO3ZlcnRpY2FsLWFsaWduOiBtaWRkbGU7ZmlsbDogY3VycmVudENvbG9yO292ZXJmbG93OiBoaWRkZW47IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcC1pZD0iMzcxNiI+PHBhdGggZD0iTTg2Ny44OSA1NzQuMTZhMzAuNzMgMzAuNzMgMCAwIDAtMzcuNTIgMjEuOTJjLTM4IDE0NC44My0xNjkuMzEgMjQ2LTMxOS4yNSAyNDZhMzMwLjcxIDMzMC43MSAwIDAgMS0zMDYuMjctMjA2LjgyaDYwLjI5bC05Mi43OC0xMjMuNS05MS44MiAxMjMuNWg1OC44OHExLjIzIDMuNzIgMi41MyA3LjRBMzkxLjY1IDM5MS42NSAwIDAgMCA1MTEuMTIgOTAzLjVjMTc3Ljg2IDAgMzMzLjU4LTEyMCAzNzguNjktMjkxLjgyYTMwLjczIDMwLjczIDAgMCAwLTIxLjkyLTM3LjUyek0xNTMuODggNDUyLjU3YTMwLjY5IDMwLjY5IDAgMCAwIDM3LjM1LTIyLjJBMzI5LjY4IDMyOS42OCAwIDAgMSA1MTEuMTIgMTgyYzEzNi44IDAgMjU2LjU4IDgyIDMwNi40IDIwN2gtNjAuNjZsOTIuNzggMTIzLjVMOTQxLjQ2IDM4OWgtNTguNThhMzkxLjYzIDM5MS42MyAwIDAgMC03NTEuMiAyNi4yNCAzMC43MyAzMC43MyAwIDAgMCAyMi4yIDM3LjMzeiIgcC1pZD0iMzcxNyI+PC9wYXRoPjwvc3ZnPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LXRiLWZsaXAtaG9yaXpvbnRhbCBwdi1waWMtd2luZG93LXRiLWNvbW1hbmQiIHRpdGxlPSInK2kxOG4oImhvcml6b250YWxGbGlwIikrJyI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LXRiLWZsaXAtdmVydGljYWwgcHYtcGljLXdpbmRvdy10Yi1jb21tYW5kIiB0aXRsZT0iJytpMThuKCJ2ZXJ0aWNhbEZsaXAiKSsnIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctdGItY29tcGFyZSBwdi1waWMtd2luZG93LXRiLWNvbW1hbmQiIHRpdGxlPSInK2kxOG4oImNvbXBhcmVCdG4iKSsnIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LW1heCIgIHRpdGxlPSInK2kxOG4oImdhbGxlcnkiKSsnKGcpIj48L3NwYW4+JyArCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LWNsb3NlIj48L3NwYW4+JyArCiAgICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9InB2LXBpYy13aW5kb3ctc2Nyb2xsU2lnbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxlbGxpcHNlIHJ5PSI1MDEuNSIgcng9IjMzMS41IiBjeT0iNTEwLjc4NDA4IiBjeD0iNTE0LjY4MjgzIiBzdHJva2U9IiMwMDAiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNNTEyIDIxMi40NjgwMTltLTQzLjEzMjYwNSAwYTQzLjEzMjYwNSA0My4xMzI2MDUgMCAxIDAgODYuMjY1MjEgMCA0My4xMzI2MDUgNDMuMTMyNjA1IDAgMSAwLTg2LjI2NTIxIDBaTTUxMiAzODMuNDAwOTM2bS00My4xMzI2MDUgMGE0My4xMzI2MDUgNDMuMTMyNjA1IDAgMSAwIDg2LjI2NTIxIDAgNDMuMTMyNjA1IDQzLjEzMjYwNSAwIDEgMC04Ni4yNjUyMSAwWk01MTIgNTU0LjMzMzg1M20tNDMuMTMyNjA1IDBhNDMuMTMyNjA1IDQzLjEzMjYwNSAwIDEgMCA4Ni4yNjUyMSAwIDQzLjEzMjYwNSA0My4xMzI2MDUgMCAxIDAtODYuMjY1MjEgMFpNNjA5LjQ0NzczOCA2NTEuNzgxNTkxTDUxMiA3NDkuMjI5MzI5bC05Ny40NDc3MzgtOTcuNDQ3NzM4Yy0xNy41NzI1NDMtMTcuNTcyNTQzLTQzLjEzMjYwNS0xNy41NzI1NDMtNTkuMTA3NjQ0IDBzLTE3LjU3MjU0MyA0My4xMzI2MDUgMCA1OS4xMDc2NDVsMTI3LjgwMDMxMiAxMjcuODAwMzEyYzcuOTg3NTIgNy45ODc1MiAyMC43Njc1NTEgMTIuNzgwMDMxIDMwLjM1MjU3NCAxMi43ODAwMzFzMjAuNzY3NTUxLTQuNzkyNTEyIDMwLjM1MjU3NC0xMi43ODAwMzFsMTI3LjgwMDMxMi0xMjcuODAwMzEyYzE3LjU3MjU0My0xNy41NzI1NDMgMTcuNTcyNTQzLTQzLjEzMjYwNSAwLTU5LjEwNzY0NS0xOS4xNzAwNDctMTcuNTcyNTQzLTQ0LjczMDEwOS0xNy41NzI1NDMtNjIuMzAyNjUyIDB6TTU1NS4xMzI2MDUgMGgtODQuNjY3NzA2QzMwMi43MjY5ODkgMCAxNzEuNzMxNjY5IDEzMi41OTI4MjQgMTcxLjczMTY2OSAyOTguNzMzMjI5djQyNi41MzM1NDJjMCAxNjYuMTQwNDA2IDEzMi41OTI4MjQgMjk4LjczMzIyOSAyOTguNzMzMjMgMjk4LjczMzIyOWg4NC42Njc3MDZjMTY2LjE0MDQwNiAwIDI5OC43MzMyMjktMTMyLjU5MjgyNCAyOTguNzMzMjMtMjk4LjczMzIyOVYyOTguNzMzMjI5Qzg1Mi4yNjgzMzEgMTMyLjU5MjgyNCA3MjEuMjczMDExIDAgNTU1LjEzMjYwNSAwek03NjcuNjAwNjI0IDcyMy42NjkyNjdjMCAxMTkuODEyNzkzLTk0LjI1MjczIDIxMi40NjgwMTktMjEyLjQ2ODAxOSAyMTIuNDY4MDE4aC04NC42Njc3MDZjLTExOS44MTI3OTMgMC0yMTIuNDY4MDE5LTk0LjI1MjczLTIxMi40NjgwMTktMjEyLjQ2ODAxOFYyOTguNzMzMjI5YzAtMTE5LjgxMjc5MyA5NC4yNTI3My0yMTIuNDY4MDE5IDIxMi40NjgwMTktMjEyLjQ2ODAxOGg4NC42Njc3MDZjMTE5LjgxMjc5MyAwIDIxMi40NjgwMTkgOTQuMjUyNzMgMjEyLjQ2ODAxOSAyMTIuNDY4MDE4djQyNC45MzYwMzh6Ij48L3BhdGg+PC9zdmc+JyArCiAgICAgICAgICAgICAgICAgICAgLy8nPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctc2VhcmNoIiB0aXRsZT0iJytpMThuKCJzaW1pbGFySW1hZ2UiKSsnIj48L3NwYW4+JyArCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LXJhbmdlIj48L3NwYW4+JyArCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtd2luZG93LWRlc2NyaXB0aW9uIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctcHJlIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LXBpYy13aW5kb3ctbmV4dCI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1waWMtc2VhcmNoLXN0YXRlIj4nKwogICAgICAgICAgICAgICAgICAgICc8c3Bhbj48L3NwYW4+JytwcmVmcy5pY29ucy5kb3dubG9hZFN2Z0J0bisKICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicpOwoKICAgICAgICAgICAgICAgIGxldCBpbWdib3g9Y29udGFpbmVyLmZpcnN0Q2hpbGQ7CiAgICAgICAgICAgICAgICBpbWdib3guYXBwZW5kQ2hpbGQoaW1nKTsKICAgICAgICAgICAgICAgIHRoaXMuaW1nYm94ID0gaW1nYm94OwoKICAgICAgICAgICAgICAgIHRoaXMuaW1nV2luZG93PWNvbnRhaW5lcjsKCiAgICAgICAgICAgICAgICB2YXIgdG9vbE1hcD17CiAgICAgICAgICAgICAgICAgICAgJ2hhbmQnOmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucHYtcGljLXdpbmRvdy10Yi1oYW5kJyksCiAgICAgICAgICAgICAgICAgICAgJ3JvdGF0ZSc6Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LXRiLXJvdGF0ZScpLAogICAgICAgICAgICAgICAgICAgICd6b29tJzpjb250YWluZXIucXVlcnlTZWxlY3RvcignLnB2LXBpYy13aW5kb3ctdGItem9vbScpLAogICAgICAgICAgICAgICAgICAgICdmaCc6Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LXRiLWZsaXAtaG9yaXpvbnRhbCcpLAogICAgICAgICAgICAgICAgICAgICdmdic6Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LXRiLWZsaXAtdmVydGljYWwnKSwKICAgICAgICAgICAgICAgICAgICAnY29tcGFyZSc6Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LXRiLWNvbXBhcmUnKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMudG9vbE1hcD10b29sTWFwOwoKICAgICAgICAgICAgICAgIHZhciBwcmVCdXR0b249Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LXByZScpOwogICAgICAgICAgICAgICAgcHJlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICBzZWxmLnN3aXRjaEltYWdlKGZhbHNlKTsKICAgICAgICAgICAgICAgIH0sZmFsc2UpOwogICAgICAgICAgICAgICAgdmFyIG5leHRCdXR0b249Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LW5leHQnKTsKICAgICAgICAgICAgICAgIG5leHRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIHNlbGYuc3dpdGNoSW1hZ2UodHJ1ZSk7CiAgICAgICAgICAgICAgICB9LGZhbHNlKTsKICAgICAgICAgICAgICAgIGlmIChnYWxsZXJ5ICYmIChnYWxsZXJ5LnNob3duIHx8IGdhbGxlcnkubWluaW1pemVkKSkgewogICAgICAgICAgICAgICAgICAgIHByZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICAgICAgICAgIG5leHRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuaW1nU3RhdGVCb3ggPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnB2LXBpYy1zZWFyY2gtc3RhdGUnKTsKICAgICAgICAgICAgICAgIHRoaXMuaW1nU3RhdGUgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnB2LXBpYy1zZWFyY2gtc3RhdGU+c3BhbicpOwogICAgICAgICAgICAgICAgdGhpcy5wcmVCdXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnB2LXBpYy13aW5kb3ctcHJlJyk7CiAgICAgICAgICAgICAgICB0aGlzLm5leHRCdXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnB2LXBpYy13aW5kb3ctbmV4dCcpOwogICAgICAgICAgICAgICAgbGV0IGRvd25sb2FkSWNvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucHYtcGljLXNlYXJjaC1zdGF0ZT5zdmcnKTsKICAgICAgICAgICAgICAgIGRvd25sb2FkSWNvbiAmJiBkb3dubG9hZEljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxmLmRhdGEgfHwgIXNlbGYuaW1nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKHNlbGYpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIGlmIChlLmFsdEtleSB8fCBlLmN0cmxLZXkgfHwgZS5tZXRhS2V5IHx8IGUuc2hpZnRLZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX0dNX29wZW5JblRhYihzZWxmLmltZy5zcmMsIHthY3RpdmU6ZmFsc2V9KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZEltZyhzZWxmLmltZy5zcmMsIChzZWxmLmRhdGEuaW1nLnRpdGxlIHx8IHNlbGYuZGF0YS5pbWcuYWx0KSwgcHJlZnMuc2F2ZU5hbWUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIHRydWUpOwoKICAgICAgICAgICAgICAgIC8v5YWz6ZetCiAgICAgICAgICAgICAgICB2YXIgY2xvc2VCdXR0b249Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LWNsb3NlJyk7CiAgICAgICAgICAgICAgICBjbG9zZUJ1dHRvbi5zdHlsZS5jc3NUZXh0PSd0b3A6IC0yMnB4O3JpZ2h0OiAwcHg7JzsKICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VCdXR0b249Y2xvc2VCdXR0b247CiAgICAgICAgICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIH0sZmFsc2UpOwoKICAgICAgICAgICAgICAgIHZhciBtYXhCdXR0b249Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LW1heCcpOwogICAgICAgICAgICAgICAgbWF4QnV0dG9uLnN0eWxlLmNzc1RleHQ9J3RvcDogLTIycHg7cmlnaHQ6IDQ2cHg7JzsKICAgICAgICAgICAgICAgIHRoaXMubWF4QnV0dG9uPW1heEJ1dHRvbjsKICAgICAgICAgICAgICAgIG1heEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsYXN5bmMgZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgaWYoIWdhbGxlcnkpewogICAgICAgICAgICAgICAgICAgICAgICBnYWxsZXJ5PW5ldyBHYWxsZXJ5QygpOwogICAgICAgICAgICAgICAgICAgICAgICBnYWxsZXJ5LmRhdGE9W107CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBhbGxEYXRhPWF3YWl0IGdhbGxlcnkuZ2V0QWxsVmFsaWRJbWdzKCk7CiAgICAgICAgICAgICAgICAgICAgYWxsRGF0YS50YXJnZXQgPSBzZWxmLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgZ2FsbGVyeS5kYXRhPWFsbERhdGE7CiAgICAgICAgICAgICAgICAgICAgZ2FsbGVyeS5sb2FkKGdhbGxlcnkuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIH0sZmFsc2UpOwoKICAgICAgICAgICAgICAgIC8vdmFyIHNlYXJjaEJ1dHRvbj1jb250YWluZXIucXVlcnlTZWxlY3RvcignLnB2LXBpYy13aW5kb3ctc2VhcmNoJyk7CiAgICAgICAgICAgICAgICAvL3NlYXJjaEJ1dHRvbi5zdHlsZS5jc3NUZXh0PSd0b3A6IC0yMnB4O3JpZ2h0OiA1MHB4Oyc7CiAgICAgICAgICAgICAgICAvL3RoaXMuc2VhcmNoQnV0dG9uPXNlYXJjaEJ1dHRvbjsKICAgICAgICAgICAgICAgIHZhciBzcmNzLCBmcm9tOwogICAgICAgICAgICAgICAgaW1nLm9uZXJyb3I9ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgLy9zZXRTZWFyY2hTdGF0ZShpMThuKCJsb2FkTmV4dFNpbWlsYXIiKSxpbWcucGFyZW50Tm9kZSk7CiAgICAgICAgICAgICAgICAgICAgaWYoc2VsZi5yZW1vdmVkIHx8ICFzZWxmLmlzSW1nKXJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oaW1nLnNyYysiICIraTE4bigibG9hZEVycm9yIikpOwogICAgICAgICAgICAgICAgICAgIGlmKCFzZWxmLmRhdGEpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIHZhciBzcmM7CiAgICAgICAgICAgICAgICAgICAgaWYoc2VsZi5kYXRhLnNyY3MpCiAgICAgICAgICAgICAgICAgICAgICAgIHNyYz1zZWxmLmRhdGEuc3Jjcy5zaGlmdCgpOwogICAgICAgICAgICAgICAgICAgIGlmKHNyYylpbWcuc3JjPXNyYzsKICAgICAgICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgICAgICAgICBpZihpbWcuc3JjIT1zZWxmLmRhdGEuaW1nU3JjKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnNyYz1zZWxmLmRhdGEuaW1nU3JjOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZyb208c2VhcmNoU29ydC5sZW5ndGgpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoSW1nQnlJbWcoc2VsZi5pbWcuc3JjLCBzZWxmLmltZy5wYXJlbnROb2RlLCBmdW5jdGlvbihzcmNzLCBpbmRleCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbT1pbmRleDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRhdGEuc3Jjcz1zcmNzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaW1nLnNyYz1zcmNzLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LG51bGwsbnVsbCxmcm9tKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWFyY2hTdGF0ZShpMThuKCJmaW5kTm9QaWMiKSwgc2VsZi5pbWdTdGF0ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2VhcmNoU3RhdGUoIiIsIHNlbGYuaW1nU3RhdGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwyMDAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmN1ckluZGV4ID0gLTE7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhICYmIHRoaXMuZGF0YS5hbGwgJiYgdGhpcy5kYXRhLmFsbC5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRhdGEuYWxsLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuc3JjLmluZGV4T2YodGhpcy5kYXRhLmFsbFtpXS5yZXBsYWNlKC9eKHZpZGVvfGF1ZGlvKTovLCAiIikpICE9PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJJbmRleCA9IGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYucmVtb3ZlZCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuc3R5bGUuYmFja2dyb3VuZD0nJzsKICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5wcmV2aWV3ICYmIGltZy5uYXR1cmFsSGVpZ2h0ID09IDEgJiYgaW1nLm5hdHVyYWxXaWR0aCA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWdXaW5kb3cuc3R5bGUuZGlzcGxheSA9ICIiOwogICAgICAgICAgICAgICAgICAgIHNlbGYuaW1nTmF0dXJhbFNpemUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGg6aW1nLm5hdHVyYWxIZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgICAgIHc6aW1nLm5hdHVyYWxXaWR0aCwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0VG9vbEJhZGdlKCd6b29tJyxzZWxmLnpvb21MZXZlbCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGY9PXVuaXF1ZUltZ1dpbiAmJiBwcmVmcy5mbG9hdEJhci5nbG9iYWxrZXlzLnByZXZpZXdGb2xsb3dNb3VzZSkgewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZvbGxvd1Bvcyh1bmlxdWVJbWdXaW5Jbml0WCwgdW5pcXVlSW1nV2luSW5pdFkpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2VsZi56b29tZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2VsZi5pbWdXaW5kb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCJwdi1waWMtd2luZG93LXNjcm9sbCIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi56b29tTGV2ZWw9MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1nLm5hdHVyYWxIZWlnaHQgJiYgaW1nLm5hdHVyYWxIZWlnaHQgPCAxMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHpvb21MZXZlbCA9IDEwMCAvIGltZy5uYXR1cmFsSGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnpvb20oem9vbUxldmVsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnpvb20oMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYgPT0gdW5pcXVlSW1nV2luKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbml0TWF4U2l6ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZWZzLmltZ1dpbmRvdy5maXRUb1NjcmVlbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZml0VG9TY3JlZW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLmluaXRQb3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmltZ1dpbmRvdy5zdHlsZS5sZWZ0ID0gc2VsZi5pbml0UG9zLmxlZnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWdXaW5kb3cuc3R5bGUudG9wID0gc2VsZi5pbml0UG9zLnRvcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBzZWxmLmNlbnRlcih0cnVlLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBzZWxmLmltZ1dpbmRvdy5zdHlsZS5vcGFjaXR5ID0gMTsKICAgICAgICAgICAgICAgICAgICBzZWxmLmtlZXBTY3JlZW5JbnNpZGUoKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHdTaXplID0gZ2V0V2luZG93U2l6ZSgpOwogICAgICAgICAgICAgICAgICAgIHdTaXplLmggLT0gMTY7CiAgICAgICAgICAgICAgICAgICAgd1NpemUudyAtPSAxNjsKICAgICAgICAgICAgICAgICAgICBzZWxmLmlzTG9uZ0ltZyA9IHNlbGYuaW1nTmF0dXJhbFNpemUuaCA+PSB3U2l6ZS5oICYmIHNlbGYuaW1nTmF0dXJhbFNpemUuaCAvIHNlbGYuaW1nTmF0dXJhbFNpemUudyA+IDIuNTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChpbWdOYXR1cmFsU2l6ZS5oICYmIGltZ05hdHVyYWxTaXplLncpIHsKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuc3R5bGUuYmFja2dyb3VuZD0nJzsKICAgICAgICAgICAgICAgICAgICBzZXRTZWFyY2hTdGF0ZShgPHN0cm9uZz4ke2ltZy5uYXR1cmFsV2lkdGh9IHggJHtpbWcubmF0dXJhbEhlaWdodH08L3N0cm9uZz5gLCBzZWxmLmltZ1N0YXRlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0ltZykgewogICAgICAgICAgICAgICAgICAgIGlmICgvXnZpZGVvJC9pLnRlc3QoaW1nLm5vZGVOYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpbWcubmF0dXJhbEhlaWdodCA9IGltZy52aWRlb0hlaWdodCB8fCAxMDgwOwogICAgICAgICAgICAgICAgICAgICAgICBpbWcubmF0dXJhbFdpZHRoID0gaW1nLnZpZGVvV2lkdGggfHwgMTkyMDsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC9eYXVkaW8kL2kudGVzdChpbWcubm9kZU5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGltZy5uYXR1cmFsSGVpZ2h0ID0gNTA7CiAgICAgICAgICAgICAgICAgICAgICAgIGltZy5uYXR1cmFsV2lkdGggPSAzNTA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpbWcub25sb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvKnNlYXJjaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgc29ydFNlYXJjaCgpOwogICAgICAgICAgICAgICAgICAgIHNlYXJjaEltZ0J5SW1nKHNlbGYuaW1nLnNyYywgc2VsZi5pbWcucGFyZW50Tm9kZSwgZnVuY3Rpb24oc3JjcywgaW5kZXgpewogICAgICAgICAgICAgICAgICAgICAgICBmcm9tPWluZGV4OwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNyY3M9c3JjczsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWcuc3JjPXNyY3Muc2hpZnQoKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0sZmFsc2UpOyovCgogICAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICAqIOivtOaYjgogICAgICAgICAgICAgICAgKiAx44CB5a+55Y6f5p2l55qE6YCC5bqU5bGP5bmV562J5Yqf6IO95Lya5pyJ5b2x5ZON77yM5pqC5pe256aB55So44CCCiAgICAgICAgICAgICAgICAqIDLjgIHliIbkuLogYWJzb2x1dGUg5ZKM6buY6K6k55qEMuenjeaDheWGtQogICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZGVzY3JpcHRpb25TcGFuID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LWRlc2NyaXB0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGRlc2MgPSAodGhpcy5kYXRhLmRlc2NyaXB0aW9uIHx8ICcnKTsKICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLmRhdGEuZGVzY3JpcHRpb24pICYmIEFycmF5LmlzQXJyYXkodGhpcy5kYXRhLmFsbCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1ckluZGV4OwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGN1ckluZGV4ID0gMDsgY3VySW5kZXggPCB0aGlzLmRhdGEuYWxsLmxlbmd0aDsgY3VySW5kZXgrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5zcmMuaW5kZXhPZih0aGlzLmRhdGEuYWxsW2N1ckluZGV4XS5yZXBsYWNlKC9eKHZpZGVvfGF1ZGlvKTovLCAiIikpICE9PSAtMSkgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZGVzYyA9IGRlc2NbY3VySW5kZXhdIHx8IGRlc2NbMF0gfHwgIiI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uU3Bhbi50ZXh0Q29udGVudCA9IGRlc2MudHJpbSgpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nU3RhdGVCb3gudGl0bGUgPSBkZXNjOwogICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uU3Bhbi5zdHlsZS5kaXNwbGF5ID0gZGVzYyA/ICJpbmxpbmUiIDogIm5vbmUiOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb25TcGFuID0gZGVzY3JpcHRpb25TcGFuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciB0b29sYmFyPWNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucHYtcGljLXdpbmRvdy10b29sYmFyJyk7CiAgICAgICAgICAgICAgICB0b29sYmFyLnN0eWxlLmNzc1RleHQ9J1wKICAgICAgICAgICAgICAgIHRvcDogMHB4O1wKICAgICAgICAgICAgICAgIGxlZnQ6IC00MnB4O1wKICAgICAgICAgICAgICAgICc7CiAgICAgICAgICAgICAgICB0aGlzLnRvb2xiYXI9dG9vbGJhcjsKCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVG9vbENsYXNzPSdwdi1waWMtd2luZG93LXRiLXRvb2wtc2VsZWN0ZWQnOwoKICAgICAgICAgICAgICAgIHRoaXMudmlld1JhbmdlPWNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucHYtcGljLXdpbmRvdy1yYW5nZScpOwoKICAgICAgICAgICAgICAgIHRoaXMucm90YXRlSW5kaWNhdG9yPWNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucHYtcGljLXdpbmRvdy1yb3RhdGUtaW5kaWNhdG9yJyk7CiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZUlQb2ludGVyPWNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucHYtcGljLXdpbmRvdy1yb3RhdGUtaW5kaWNhdG9yLXBvaW50ZXInKTsKICAgICAgICAgICAgICAgIHRoaXMucm90YXRlT3ZlcmxheWVyPWNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucHYtcGljLXdpbmRvdy1yb3RhdGUtb3ZlcmxheWVyJyk7CgoKICAgICAgICAgICAgICAgIHRoaXMuaEtleVVwPXRydWU7CiAgICAgICAgICAgICAgICB0aGlzLnJLZXlVcD10cnVlOwogICAgICAgICAgICAgICAgdGhpcy56S2V5VXA9dHJ1ZTsKCiAgICAgICAgICAgICAgICB0aGlzLnNwYWNlS2V5VXA9dHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuY3RybEtleVVwPXRydWU7CiAgICAgICAgICAgICAgICB0aGlzLmFsdEtleVVwPXRydWU7CiAgICAgICAgICAgICAgICB0aGlzLnNoaWZ0S2V5VXA9dHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMubW92aW5nPWZhbHNlOwoKICAgICAgICAgICAgICAgIC8v57yp5pS+5bel5YW355qE5omp5bGV6I+c5Y2VCiAgICAgICAgICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnB2LXBpYy13aW5kb3ctdGItdG9vbC1leHRlbmQtbWVudS16b29tJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQ9ZS50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRleHQ9dGFyZ2V0LnRpdGxlOwogICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2godGV4dCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJzEnOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPTE7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnKzAuMSc6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9c2VsZi56b29tTGV2ZWwgKyAwLjE7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnLTAuMSc6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9c2VsZi56b29tTGV2ZWwgLSAwLjE7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiB2YWx1ZSE9J3VuZGVmaW5lZCcpewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnpvb20odmFsdWUse3g6MCx5OjB9KTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSx0cnVlKTsKCiAgICAgICAgICAgICAgICAvL+aXi+i9rOW3peWFt+eahOaJqeWxleiPnOWNlQogICAgICAgICAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wdi1waWMtd2luZG93LXRiLXRvb2wtZXh0ZW5kLW1lbnUtcm90YXRlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQ9ZS50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRleHQ9dGFyZ2V0LnRpdGxlOwogICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjb252ZXJ0KGRlZyl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWcgKiBNYXRoLlBJLzE4MDsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBzd2l0Y2godGV4dCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJzAnOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPTA7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnKzkwJzp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT1zZWxmLnJvdGF0ZWRSYWRpYW5zICsgY29udmVydCg5MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnLTkwJzp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT1zZWxmLnJvdGF0ZWRSYWRpYW5zIC0gY29udmVydCg5MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICB2YXIgUEk9TWF0aC5QSTsKICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgdmFsdWUhPSd1bmRlZmluZWQnKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodmFsdWU+PTIqUEkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUtPTIqUEk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHZhbHVlPDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUrPTIqUEk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucm90YXRlKHZhbHVlLHRydWUpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LHRydWUpOwoKICAgICAgICAgICAgICAgIHRvb2xiYXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJyxmdW5jdGlvbihlKXsvL+m8oOagh+aMieS4i+mAieaLqeW3peWFtwogICAgICAgICAgICAgICAgICAgIHNlbGYudG9vbGJhckV2ZW50SGFuZGxlcihlKTsKICAgICAgICAgICAgICAgIH0sZmFsc2UpOwoKICAgICAgICAgICAgICAgIHRvb2xiYXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgfSxmYWxzZSk7CgoKICAgICAgICAgICAgICAgIHRvb2xiYXIuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLGZ1bmN0aW9uKGUpey8v6byg5qCH5Y+M5Ye75bel5YW3CiAgICAgICAgICAgICAgICAgICAgc2VsZi50b29sYmFyRXZlbnRIYW5kbGVyKGUpOwogICAgICAgICAgICAgICAgfSxmYWxzZSk7CgoKICAgICAgICAgICAgICAgIC8v6Zi75q2i5rWP6KeI5Zmo5a+55Zu+54mH55qE6buY6K6k5o6n5Yi26KGM5Li6CiAgICAgICAgICAgICAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICB9LGZhbHNlKTsKCiAgICAgICAgICAgICAgICBsZXQgaGlkZVRvb2xiYXJUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzICE9PSB1bmlxdWVJbWdXaW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoImhpZGVUb29sYmFyIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgODAwKTsKICAgICAgICAgICAgICAgIGltZ2JveC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaGlkZVRvb2xiYXJUaW1lcik7CiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoImhpZGVUb29sYmFyIik7CiAgICAgICAgICAgICAgICAgICAgaGlkZVRvb2xiYXJUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgiaGlkZVRvb2xiYXIiKTsKICAgICAgICAgICAgICAgICAgICB9LCA4MDApOwogICAgICAgICAgICAgICAgfSxmYWxzZSk7CiAgICAgICAgICAgICAgICBpbWdib3guYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChoaWRlVG9vbGJhclRpbWVyKTsKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgiaGlkZVRvb2xiYXIiKTsKICAgICAgICAgICAgICAgIH0sZmFsc2UpOwoKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLGZ1bmN0aW9uKGUpey8v5b2T5oyJ5LiL55qE5pe277yM5omn6KGM5bmz56e777yM57yp5pS+77yM5peL6L2s5pON5L2cCiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWdXaW5kb3dFdmVudEhhbmRsZXIoZSk7CiAgICAgICAgICAgICAgICB9LGZhbHNlKTsKCiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsZnVuY3Rpb24oZSl7Ly/lvZPmjInkuIvnmoTml7bvvIzmiafooYzlubPnp7vvvIznvKnmlL7vvIzml4vovazmk43kvZwKICAgICAgICAgICAgICAgICAgICBzZWxmLmltZ1dpbmRvd0V2ZW50SGFuZGxlcihlKTsKICAgICAgICAgICAgICAgIH0seyBwYXNzaXZlOiB0cnVlLCBjYXB0dXJlOiBmYWxzZSB9KTsKCiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGUpey8v6Zi75q2ib3BlcmEgY3RybCvngrnlh7vkv53lrZjlm77niYcKICAgICAgICAgICAgICAgICAgICBzZWxmLmltZ1dpbmRvd0V2ZW50SGFuZGxlcihlKTsKICAgICAgICAgICAgICAgIH0sZmFsc2UpOwoKICAgICAgICAgICAgICAgIGlmKHByZWZzLmltZ1dpbmRvdy56b29tLm1vdXNlV2hlZWxab29tKXsvL+aYr+WQpuS9v+eUqOm8oOagh+e8qeaUvgogICAgICAgICAgICAgICAgICAgIGFkZFdoZWVsRXZlbnQoY29udGFpbmVyLGZ1bmN0aW9uKGUpey8v5rua6L2u57yp5pS+CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldCAmJiAoZS50YXJnZXQuY2xhc3NOYW1lID09ICJwdi1waWMtd2luZG93LW5leHQiIHx8IGUudGFyZ2V0LmNsYXNzTmFtZSA9PSAicHYtcGljLXdpbmRvdy1wcmUiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCAmJiBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWdXaW5kb3dFdmVudEhhbmRsZXIoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChoaWRlVG9vbGJhclRpbWVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoImhpZGVUb29sYmFyIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVUb29sYmFyVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJoaWRlVG9vbGJhciIpOwogICAgICAgICAgICAgICAgICAgICAgICB9LCA4MDApOwogICAgICAgICAgICAgICAgICAgIH0sZmFsc2UpOwogICAgICAgICAgICAgICAgfTsKCgoKICAgICAgICAgICAgICAgIC8v5piv5ZCm54K55Ye75Zu+54mH5aSW6YOo5YWz6ZetCiAgICAgICAgICAgICAgICBpZihwcmVmcy5pbWdXaW5kb3cub3ZlcmxheWVyLnNob3duICYmIHByZWZzLmltZ1dpbmRvdy5jbG9zZS5jbGlja091dHNpZGUpewogICAgICAgICAgICAgICAgICAgIHZhciBjbGlja091dHNpZGU9ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQ9ZS50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFjb250YWluZXIuY29udGFpbnModGFyZ2V0KSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihwcmVmcy5pbWdXaW5kb3cuY2xvc2UuY2xpY2tPdXRzaWRlLGNsaWNrT3V0c2lkZSx0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHRoaXMuY2xpY2tPdXRzaWRlPWNsaWNrT3V0c2lkZTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKHByZWZzLmltZ1dpbmRvdy5jbG9zZS5jbGlja091dHNpZGUsY2xpY2tPdXRzaWRlLHRydWUpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvL+aYr+WQpuWPjOWHu+WbvueJh+acrOi6q+WFs+mXrQogICAgICAgICAgICAgICAgaWYocHJlZnMuaW1nV2luZG93LmNsb3NlLmRibENsaWNrSW1nV2luZG93KXsKICAgICAgICAgICAgICAgICAgICB2YXIgZGJsQ2xpY2tJbWdXaW5kb3c9ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQ9ZS50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldD09Y29udGFpbmVyIHx8IHRhcmdldD09aW1nIHx8IHRhcmdldD09c2VsZi5pbWdTdGF0ZSB8fCB0YXJnZXQ9PXNlbGYucm90YXRlT3ZlcmxheWVyKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLGRibENsaWNrSW1nV2luZG93LHRydWUpOwogICAgICAgICAgICAgICAgfTsKCgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLnByZXZpZXcpIHsKICAgICAgICAgICAgICAgICAgICBJbWdXaW5kb3dDLmFsbC5wdXNoKHRoaXMpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMuX2JsdXI9dGhpcy5ibHVyLmJpbmQodGhpcyk7CiAgICAgICAgICAgICAgICB0aGlzLl9mb2N1c2VkS2V5ZG93bj10aGlzLmZvY3VzZWRLZXlkb3duLmJpbmQodGhpcyk7CiAgICAgICAgICAgICAgICB0aGlzLl9mb2N1c2VkS2V5dXA9dGhpcy5mb2N1c2VkS2V5dXAuYmluZCh0aGlzKTsKCiAgICAgICAgICAgICAgICBpZihwcmVmcy5pbWdXaW5kb3cub3ZlcmxheWVyLnNob3duKXsvL+aYr+WQpuaYvuekuuimhuebluWxggogICAgICAgICAgICAgICAgICAgIHZhciBvdmVybGF5ZXI9SW1nV2luZG93Qy5vdmVybGF5ZXI7CiAgICAgICAgICAgICAgICAgICAgaWYoIW92ZXJsYXllcil7CiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXllcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIEltZ1dpbmRvd0Mub3ZlcmxheWVyPW92ZXJsYXllcjsKICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxheWVyLmNsYXNzTmFtZT0ncHYtcGljLXdpbmRvdy1vdmVybGF5ZXInOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgb3ZlcmxheWVyLnN0eWxlLmJhY2tncm91bmRDb2xvcj1wcmVmcy5pbWdXaW5kb3cub3ZlcmxheWVyLmNvbG9yOwogICAgICAgICAgICAgICAgICAgIGdldEJvZHkoZG9jdW1lbnQpLmFwcGVuZENoaWxkKG92ZXJsYXllcik7CiAgICAgICAgICAgICAgICAgICAgb3ZlcmxheWVyLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBpZihwcmVmcy5pbWdXaW5kb3cuYmFja2dyb3VuZENvbG9yKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmltZ1dpbmRvdy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9cHJlZnMuaW1nV2luZG93LmJhY2tncm91bmRDb2xvcjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoZ2FsbGVyeSAmJiBnYWxsZXJ5LnNob3duKSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGdldEJvZHkoZG9jdW1lbnQpLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5yb3RhdGVkUmFkaWFucz0wOy8v5bey57uP5peL6L2s55qE6KeS5bqmCiAgICAgICAgICAgICAgICB0aGlzLnpvb21MZXZlbD0wOwogICAgICAgICAgICAgICAgdGhpcy56b29tKDEpOwogICAgICAgICAgICAgICAgdGhpcy5zZXRUb29sQmFkZ2UoJ3pvb20nLDEpOwoKICAgICAgICAgICAgICAgIHRoaXMuZmlyc3RPcGVuKCk7CiAgICAgICAgICAgICAgICB0aGlzLmltZ1dpbmRvdy5zdHlsZS5vcGFjaXR5PTE7CgogICAgICAgICAgICAgICAgLy/pgInkuK3pu5jorqTlt6XlhbcKICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0VG9vbChwcmVmcy5pbWdXaW5kb3cuZGVmYXVsdFRvb2wpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBnZW5lQ29tcGFyZUltZzogZnVuY3Rpb24oc3JjLCBwZXJjZW50KSB7CiAgICAgICAgICAgICAgICBsZXQgcGFyZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICAgICAgICBsZXQgY29tcGFyZUltZ0NvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICAgICAgY29tcGFyZUltZ0Nvbi5jbGFzc05hbWUgPSAiY29tcGFyZUltZ0NvbiI7CiAgICAgICAgICAgICAgICBsZXQgY29tcGFyZUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogICAgICAgICAgICAgICAgbGV0IGNvbXBhcmVTbGlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgICAgIGNvbXBhcmVTbGlkZXIuY2xhc3NOYW1lID0gImNvbXBhcmVTbGlkZXIiOwogICAgICAgICAgICAgICAgY29tcGFyZVNsaWRlci50aXRsZSA9ICJSaWdodCBtb3VzZSB0byBib3R0b20sIGhvbGQgdG8gdG9wIjsKICAgICAgICAgICAgICAgIGNvbXBhcmVJbWdDb24uc3R5bGUud2lkdGggPSBwZXJjZW50ICsgIiUiOwogICAgICAgICAgICAgICAgY29tcGFyZVNsaWRlci5zdHlsZS5sZWZ0ID0gcGVyY2VudCArICIlIjsKICAgICAgICAgICAgICAgIGxldCBjb21wYXJlU2xpZGVyQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CiAgICAgICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXM7CiAgICAgICAgICAgICAgICBsZXQgdXBUaW1lciwgaW5pdExlZnQ7CiAgICAgICAgICAgICAgICBsZXQgbW91c2VNb3ZlSGFuZGxlciA9IGUgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICh1cFRpbWVyICYmIE1hdGguYWJzKGluaXRMZWZ0IC0gZS5wYWdlWCkgPiAxMCkgewogICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodXBUaW1lcik7CiAgICAgICAgICAgICAgICAgICAgICAgIHVwVGltZXIgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoY29tcGFyZVNsaWRlckJ1dHRvbi5zdHlsZS5kaXNwbGF5ID09ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsIG1vdXNlTW92ZUhhbmRsZXIpOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJ0b3VjaG1vdmUiLCBtb3VzZU1vdmVIYW5kbGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlID0gKGUuY2hhbmdlZFRvdWNoZXMpID8gZS5jaGFuZ2VkVG91Y2hlc1swXSA6IGU7CiAgICAgICAgICAgICAgICAgICAgbGV0IGEgPSBzZWxmLmltZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgICAgICAgICBsZXQgeCA9IGUucGFnZVggLSBhLmxlZnQ7CiAgICAgICAgICAgICAgICAgICAgeCA9IHggLSB3aW5kb3cucGFnZVhPZmZzZXQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHggPCAwKSB4ID0gMDsKICAgICAgICAgICAgICAgICAgICBpZiAoeCA+IGEud2lkdGgpIHggPSBhLndpZHRoOwogICAgICAgICAgICAgICAgICAgIGNvbXBhcmVJbWdDb24uc3R5bGUud2lkdGggPSB4IC8gYS53aWR0aCAqIDEwMCArICIlIjsKICAgICAgICAgICAgICAgICAgICBjb21wYXJlU2xpZGVyLnN0eWxlLmxlZnQgPSB4IC8gYS53aWR0aCAqIDEwMCArICIlIjsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBsZXQgYmVnaW5TbGlkZSA9IGUgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbXBhcmVTbGlkZXJCdXR0b24uc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgICAgICAgICAgICBpbml0TGVmdCA9IGUucGFnZVg7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHVwVGltZXIpOwogICAgICAgICAgICAgICAgICAgIHVwVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb21wYXJlQm94LmFwcGVuZENoaWxkKHBhcmVudCk7CiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIiwgbW91c2VNb3ZlSGFuZGxlcik7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2htb3ZlIiwgbW91c2VNb3ZlSGFuZGxlcik7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgbGV0IG1vdXNlVXBIYW5kbGVyID0gZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh1cFRpbWVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyZVNsaWRlckJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsIG1vdXNlTW92ZUhhbmRsZXIpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsIG1vdXNlVXBIYW5kbGVyKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaGVuZCIsIG1vdXNlVXBIYW5kbGVyKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBjb21wYXJlU2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsIGJlZ2luU2xpZGUpOwogICAgICAgICAgICAgICAgY29tcGFyZVNsaWRlci5hZGRFdmVudExpc3RlbmVyKCJjb250ZXh0bWVudSIsIGUgPT4gewogICAgICAgICAgICAgICAgICAgIHNlbGYuY29tcGFyZUJveC5pbnNlcnRCZWZvcmUocGFyZW50LCBzZWxmLmNvbXBhcmVCb3guZmlyc3RDaGlsZCk7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNvbXBhcmVTbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsIGJlZ2luU2xpZGUpOwogICAgICAgICAgICAgICAgY29tcGFyZVNsaWRlci5hcHBlbmRDaGlsZChjb21wYXJlU2xpZGVyQnV0dG9uKTsKICAgICAgICAgICAgICAgIGNvbXBhcmVJbWcuc3JjID0gc3JjOwogICAgICAgICAgICAgICAgY29tcGFyZUltZ0Nvbi5hcHBlbmRDaGlsZChjb21wYXJlSW1nKTsKICAgICAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChjb21wYXJlSW1nQ29uKTsKICAgICAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChjb21wYXJlU2xpZGVyKTsKICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnQ7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbXBhcmU6IGZ1bmN0aW9uKG90aGVyU3JjcykgewogICAgICAgICAgICAgICAgaWYgKCFvdGhlclNyY3MgfHwgb3RoZXJTcmNzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNvbXBhcmVCb3gpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgY29tcGFyZUJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICAgICAgICAgIGNvbXBhcmVCb3guY2xhc3NOYW1lID0gImNvbXBhcmVCb3giOwogICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcGFyZUJveCA9IGNvbXBhcmVCb3g7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWcucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChjb21wYXJlQm94KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmltZ1dpbmRvdy5jbGFzc0xpc3QuYWRkKCJjb21wYXJlIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmNvbXBhcmVCb3guaW5uZXJIVE1MID0gY3JlYXRlSFRNTCgiIik7CiAgICAgICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXMsIGNvdW50ID0gMCwgY29tcGFyZUltZ0Nvbkxpc3QgPSBbXSwgdGFyZ2V0Q29tcGFyZUltZzsKICAgICAgICAgICAgICAgIG90aGVyU3Jjcy5mb3JFYWNoKHNyYyA9PiB7CiAgICAgICAgICAgICAgICAgICAgY291bnQrKzsKICAgICAgICAgICAgICAgICAgICBsZXQgcGVyY2VudCA9IDEwMCAtIGNvdW50ICogKDEwMCAvIChvdGhlclNyY3MubGVuZ3RoICsgMSkpOwogICAgICAgICAgICAgICAgICAgIGxldCBjb21wYXJlSW1nID0gc2VsZi5nZW5lQ29tcGFyZUltZyhzcmMsIHBlcmNlbnQpOwogICAgICAgICAgICAgICAgICAgIHNlbGYuY29tcGFyZUJveC5hcHBlbmRDaGlsZChjb21wYXJlSW1nKTsKICAgICAgICAgICAgICAgICAgICBjb21wYXJlSW1nQ29uTGlzdC51bnNoaWZ0KGNvbXBhcmVJbWcuY2hpbGRyZW5bMF0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLCBlID0+IHsKICAgICAgICAgICAgICAgICAgICB0YXJnZXRDb21wYXJlSW1nID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICBsZXQgcGVyY2VudFggPSBlLm9mZnNldFggLyBzZWxmLmltZy5jbGllbnRXaWR0aCAqIDEwMDsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbXBhcmVJbWdDb25MaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb21wYXJlSW1nQ29uID0gY29tcGFyZUltZ0Nvbkxpc3RbaV07CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb21wYXJlV2lkdGggPSBwYXJzZUludChjb21wYXJlSW1nQ29uLnN0eWxlLndpZHRoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlcmNlbnRYIDwgY29tcGFyZVdpZHRoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRDb21wYXJlSW1nID0gY29tcGFyZUltZ0NvbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldENvbXBhcmVJbWcuc3R5bGUub3BhY2l0eSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Q29tcGFyZUltZyA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaW1nLnN0eWxlLm9wYWNpdHkgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBjb21wYXJlSW1nQ29uTGlzdFtjb21wYXJlSW1nQ29uTGlzdC5sZW5ndGggLSAxXS5zdHlsZS5vdmVyZmxvdyA9ICJ2aXNpYmxlIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLCBlID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Q29tcGFyZUltZykgewogICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRDb21wYXJlSW1nLnN0eWxlLm9wYWNpdHkgPSAiIjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmltZy5zdHlsZS5vcGFjaXR5ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBhcmVJbWdDb25MaXN0W2NvbXBhcmVJbWdDb25MaXN0Lmxlbmd0aCAtIDFdLnN0eWxlLm92ZXJmbG93ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLnByZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICAgICAgdGhpcy5uZXh0QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN3aXRjaEltYWdlOmFzeW5jIGZ1bmN0aW9uKGZ3KXsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLmFsbCAmJiB0aGlzLmRhdGEuYWxsLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgaW5pdFBvcyA9IHByZWZzLmltZ1dpbmRvdy5zd2l0Y2hTdG9yZUxvYyA/IHtsZWZ0OiB0aGlzLmltZ1dpbmRvdy5zdHlsZS5sZWZ0LCB0b3A6IHRoaXMuaW1nV2luZG93LnN0eWxlLnRvcH0gOiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIGxldCBpbWdEYXRhID0gdGhpcy5kYXRhOwogICAgICAgICAgICAgICAgICAgIGxldCBjdXJJbmRleDsKICAgICAgICAgICAgICAgICAgICBmb3IgKGN1ckluZGV4ID0gMDsgY3VySW5kZXggPCB0aGlzLmRhdGEuYWxsLmxlbmd0aDsgY3VySW5kZXgrKykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhLnNyYy5pbmRleE9mKHRoaXMuZGF0YS5hbGxbY3VySW5kZXhdLnJlcGxhY2UoL14odmlkZW98YXVkaW8pOi8sICIiKSkgIT09IC0xKSBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGZ3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckluZGV4Kys7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJJbmRleCA9PSB0aGlzLmRhdGEuYWxsLmxlbmd0aCkgY3VySW5kZXggPSAwOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckluZGV4LS07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJJbmRleCA9PSAtMSkgY3VySW5kZXggPSB0aGlzLmRhdGEuYWxsLmxlbmd0aCAtIDE7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGltZ0RhdGEueGhyID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICBpbWdEYXRhLnNyYyA9IHRoaXMuZGF0YS5hbGxbY3VySW5kZXhdOwogICAgICAgICAgICAgICAgICAgIGxldCBvcGVuVHlwZSA9ICJhY3R1YWwiOwogICAgICAgICAgICAgICAgICAgIGlmICh1bmlxdWVJbWdXaW4gJiYgdW5pcXVlSW1nV2luID09IHRoaXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlSW1nV2luID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgb3BlblR5cGUgPSAicG9wdXAiOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBuZXcgTG9hZGluZ0FuaW1DKGltZ0RhdGEsIG9wZW5UeXBlLCBmYWxzZSwgdHJ1ZSwgaW5pdFBvcyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCFnYWxsZXJ5KSB7CiAgICAgICAgICAgICAgICAgICAgZ2FsbGVyeSA9IG5ldyBHYWxsZXJ5QygpOwogICAgICAgICAgICAgICAgICAgIGdhbGxlcnkuZGF0YSA9IFtdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGdhbGxlcnkuc2hvd24gfHwgZ2FsbGVyeS5taW5pbWl6ZWQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgYWxsRGF0YSA9IGF3YWl0IGdhbGxlcnkuZ2V0QWxsVmFsaWRJbWdzKGZhbHNlLCB0cnVlKTsKICAgICAgICAgICAgICAgIGlmIChhbGxEYXRhLmxlbmd0aCA8PSAxKSByZXR1cm47CiAgICAgICAgICAgICAgICBjb25zdCB2YWxpZERhdGEgPSAoZGF0YSwgc3JjKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLmltZyB8fCAhZGF0YS5pbWcucGFyZW50Tm9kZSkgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmltZy5wYXJlbnROb2RlLmNsYXNzTGlzdC5jb250YWlucygicHYtcGljLXdpbmRvdy1jb250YWluZXIiKSkgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnNyYyA9PSBzcmMpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zcmMgJiYgL15kYXRhOi8udGVzdChkYXRhLnNyYykgJiYgZGF0YS5zcmMubGVuZ3RoIDwgMjUwKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5pbWcpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbERhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltZ0RhdGEgPSBhbGxEYXRhW2ldOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1nRGF0YS5pbWcgPT0gdGhpcy5kYXRhLmltZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZ3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT0gYWxsRGF0YS5sZW5ndGggLSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nRGF0YSA9IGFsbERhdGFbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICghdmFsaWREYXRhKGltZ0RhdGEsIHRoaXMuZGF0YS5zcmMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSBhbGxEYXRhLmxlbmd0aCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nRGF0YSA9IGFsbERhdGFbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltZ0RhdGEgJiYgaW1nRGF0YS5pbWcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbml0UG9zID0gcHJlZnMuaW1nV2luZG93LnN3aXRjaFN0b3JlTG9jID8ge2xlZnQ6IHRoaXMuaW1nV2luZG93LnN0eWxlLmxlZnQsIHRvcDogdGhpcy5pbWdXaW5kb3cuc3R5bGUudG9wfSA6IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBMb2FkaW5nQW5pbUMoaW1nRGF0YSwgKHRoaXMuYWN0dWFsID8gImFjdHVhbCIgOiAiY3VycmVudCIpLCBmYWxzZSwgdHJ1ZSwgaW5pdFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdEYXRhID0gYWxsRGF0YVtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCF2YWxpZERhdGEoaW1nRGF0YSwgdGhpcy5kYXRhLnNyYykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGktLTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09IC0xKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdEYXRhID0gYWxsRGF0YVtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1nRGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluaXRQb3MgPSBwcmVmcy5pbWdXaW5kb3cuc3dpdGNoU3RvcmVMb2MgPyB7bGVmdDogdGhpcy5pbWdXaW5kb3cuc3R5bGUubGVmdCwgdG9wOiB0aGlzLmltZ1dpbmRvdy5zdHlsZS50b3B9IDogZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IExvYWRpbmdBbmltQyhpbWdEYXRhLCAodGhpcy5hY3R1YWwgPyAiYWN0dWFsIiA6ICJjdXJyZW50IiksIGZhbHNlLCB0cnVlLCBpbml0UG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhLmltZy5zcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxEYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1nRGF0YSA9IGFsbERhdGFbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1nRGF0YS5pbWcgJiYgaW1nRGF0YS5pbWcuc3JjID09IHRoaXMuZGF0YS5pbWcuc3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZ3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9IGFsbERhdGEubGVuZ3RoIC0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nRGF0YSA9IGFsbERhdGFbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIXZhbGlkRGF0YShpbWdEYXRhLCB0aGlzLmRhdGEuc3JjKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSBhbGxEYXRhLmxlbmd0aCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ0RhdGEgPSBhbGxEYXRhW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltZ0RhdGEgJiYgaW1nRGF0YS5pbWcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5pdFBvcyA9IHByZWZzLmltZ1dpbmRvdy5zd2l0Y2hTdG9yZUxvYyA/IHtsZWZ0OiB0aGlzLmltZ1dpbmRvdy5zdHlsZS5sZWZ0LCB0b3A6IHRoaXMuaW1nV2luZG93LnN0eWxlLnRvcH0gOiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBMb2FkaW5nQW5pbUMoaW1nRGF0YSwgKHRoaXMuYWN0dWFsID8gImFjdHVhbCIgOiAiY3VycmVudCIpLCBmYWxzZSwgdHJ1ZSwgaW5pdFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdEYXRhID0gYWxsRGF0YVtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICghdmFsaWREYXRhKGltZ0RhdGEsIHRoaXMuZGF0YS5zcmMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09IC0xKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nRGF0YSA9IGFsbERhdGFbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1nRGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbml0UG9zID0gcHJlZnMuaW1nV2luZG93LnN3aXRjaFN0b3JlTG9jID8ge2xlZnQ6IHRoaXMuaW1nV2luZG93LnN0eWxlLmxlZnQsIHRvcDogdGhpcy5pbWdXaW5kb3cuc3R5bGUudG9wfSA6IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IExvYWRpbmdBbmltQyhpbWdEYXRhLCAodGhpcy5hY3R1YWwgPyAiYWN0dWFsIiA6ICJjdXJyZW50IiksIGZhbHNlLCB0cnVlLCBpbml0UG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNoYW5nZURhdGE6ZnVuY3Rpb24ocmVzdWx0KXsKICAgICAgICAgICAgICAgIGlmKHRoaXMuc3JjICE9IHJlc3VsdC5zcmMpewogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gcmVzdWx0OwogICAgICAgICAgICAgICAgICAgIHRoaXMuc3JjID0gcmVzdWx0LnNyYzsKICAgICAgICAgICAgICAgICAgICB0aGlzLmltZy5zcmMgPSBsb2NhdGlvbi5wcm90b2NvbCA9PSAiaHR0cHMiP3Jlc3VsdC5zcmMucmVwbGFjZSgvXmh0dHBzPzovLCIiKTpyZXN1bHQuc3JjOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBhZGRTdHlsZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYgKEltZ1dpbmRvd0Muc3R5bGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIUltZ1dpbmRvd0Muc3R5bGUucGFyZW50Tm9kZSkgewogICAgICAgICAgICAgICAgICAgICAgICBJbWdXaW5kb3dDLnN0eWxlID0gX0dNX2FkZFN0eWxlKEltZ1dpbmRvd0Muc3R5bGUuaW5uZXJUZXh0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgSW1nV2luZG93Qy5zdHlsZT1fR01fYWRkU3R5bGUoJ1wKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXIge1wKICAgICAgICAgICAgICAgICAgICAnICsgKHByZWZzLmltZ1dpbmRvdy5maXhlZCA/ICdwb3NpdGlvbjogZml4ZWQ7JyA6ICdwb3NpdGlvbjogYWJzb2x1dGU7JykgKyAnXAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IGluaXRpYWw7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogM3B4IHNvbGlkIHJnYigyNTUgMjU1IDI1NSAvIDUwJSk7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDFweDtcCiAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDA7XAogICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XAogICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGNvbnRlbnQtYm94O1wKICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLW91dDtcCiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjFzIGVhc2Utb3V0O1wKICAgICAgICAgICAgICAgICAgICBvdmVyc2Nyb2xsLWJlaGF2aW9yOiBub25lO1wKICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgNnB4IDJweCByZ2JhKDAsMCwwLDAuMzUpO1wKICAgICAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBjb250ZW50LWJveDtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5pdGlhbDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIzAwMDAwMDgwO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWNvbnRhaW5lciBzcGFuIHtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogaW5pdGlhbDtcCiAgICAgICAgICAgICAgICAgICAgZmxvYXQ6IGluaXRpYWw7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdHJhbnNpdGlvbi1hbGx7XAogICAgICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjogdG9wIDAuMnMgZWFzZSwgbGVmdCAwLjJzIGVhc2U7XAogICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHRvcCAwLjJzIGVhc2UsIGxlZnQgMC4ycyBlYXNlO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWltZ2JveCB7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoNDAsIDQwLCA0MCwgMC42NSk7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctY29udGFpbmVyIC5jb21wYXJlQm94IHtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICB0b3A6IDA7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6IDA7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XAogICAgICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWNvbnRhaW5lciAuY29tcGFyZUJveD5kaXYge1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctY29udGFpbmVyIC5jb21wYXJlQm94PmRpdj4uY29tcGFyZUltZ0NvbiB7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1wKICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcCiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXIgLmNvbXBhcmVCb3g+ZGl2Pi5jb21wYXJlSW1nQ29uPmltZyB7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiBhdXRvO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XAogICAgICAgICAgICAgICAgICAgIG1heC13aWR0aDogdW5zZXQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctY29udGFpbmVyIC5jb21wYXJlQm94PmRpdj4uY29tcGFyZVNsaWRlciB7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgdG9wOiAwO1wKICAgICAgICAgICAgICAgICAgICBib3R0b206IDA7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAycHg7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LDI1NSwyNTUsLjUpO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAwO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiAwO1wKICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMnB4IHJnYmEoMCwwLDAsLjUpO1wKICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogdmlzaWJsZTtcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDogOTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXIgLmNvbXBhcmVCb3g+ZGl2Pi5jb21wYXJlU2xpZGVyPmJ1dHRvbiB7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgdG9wOiBjYWxjKDUwJSAtIDQwcHgpO1wKICAgICAgICAgICAgICAgICAgICBsZWZ0OiAtNHB4O1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTBweDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2RkZDtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiA0cHggc29saWQgI2ZmZjtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA4MHB4O1wKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7XAogICAgICAgICAgICAgICAgICAgIG91dGxpbmU6IDA7XAogICAgICAgICAgICAgICAgICAgIGN1cnNvcjogZXctcmVzaXplO1wKICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMnB4IHJnYmEoMCwwLDAsLjUpO1wKICAgICAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogYWxsO1wKICAgICAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiBub25lO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWNvbnRhaW5lciAuY29tcGFyZUJveD5kaXY+LmNvbXBhcmVTbGlkZXI+YnV0dG9uOmhvdmVyIHtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzc3NztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jbG9zZSxcCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctbWF4LFwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1zZWFyY2gsXAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRvb2xiYXIsXAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRiLXRvb2wtZXh0ZW5kLW1lbnV7XAogICAgICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0O1wKICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnMgZWFzZS1pbi1vdXQ7XAogICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGNvbnRlbnQtYm94O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRvb2xiYXIge1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM1MzUzNTM7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNTtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBkZWZhdWx0O1wKICAgICAgICAgICAgICAgICAgICAtby11c2VyLXNlbGVjdDogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgLW1vei11c2VyLXNlbGVjdDogLW1vei1ub25lO1wKICAgICAgICAgICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXJfZm9jdXM6bm90KC5wcmV2aWV3KT4ucHYtcGljLXdpbmRvdy10b29sYmFyIHtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdG9vbGJhcjpob3ZlcixcCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctY29udGFpbmVyPi5wdi1waWMtd2luZG93LXRvb2xiYXIuaW5zZXJ0OmhvdmVye1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtcGljLXdpbmRvdy1jbG9zZSB7XAogICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICByaWdodDogMHB4O1wKICAgICAgICAgICAgICAgICAgICB0b3A6IC0yMnB4O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB1cmwoIicrcHJlZnMuaWNvbnMuY2xvc2UrJyIpIG5vLXJlcGVhdCBjZW50ZXIgYm90dG9tO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDE3cHg7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0NnB4O1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjU7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjpub25lO1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOjA7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOjJweCFpbXBvcnRhbnQ7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IzE3NzFGRjtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDogMjtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXJfZm9jdXM6bm90KC5wcmV2aWV3KT4ucHYtcGljLXdpbmRvdy1jbG9zZSB7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtcGljLXdpbmRvdy1zZWFyY2gge1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDUwcHg7XAogICAgICAgICAgICAgICAgICAgIHRvcDogLTIycHg7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHVybCgiJytwcmVmcy5pY29ucy5zZWFyY2hCdG4rJyIpIG5vLXJlcGVhdCBjZW50ZXIgYm90dG9tO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDE3cHg7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0NnB4O1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjk7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjpub25lO1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOjA7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOjJweDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjojMTc3MUZGO1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBub25lO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtcGljLXdpbmRvdy1tYXgge1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDQ2cHg7XAogICAgICAgICAgICAgICAgICAgIHRvcDogLTIycHg7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHVybCgiJytwcmVmcy5pY29ucy5tYXhCdG4rJyIpIG5vLXJlcGVhdCBjZW50ZXIgYm90dG9tO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDE3cHg7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0NnB4O1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjU7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjpub25lO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjODY4Njg2O1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOjA7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOjJweCFpbXBvcnRhbnQ7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IzE3NzFGRjtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDogMjtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXI+LnB2LXBpYy13aW5kb3ctbWF4OmhvdmVyLFwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXI+LnB2LXBpYy13aW5kb3ctY2xvc2U6aG92ZXIsXAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWNvbnRhaW5lcj4ucHYtcGljLXdpbmRvdy1tYXguaW5zZXJ0OmhvdmVyLFwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXI+LnB2LXBpYy13aW5kb3ctY2xvc2UuaW5zZXJ0OmhvdmVyIHtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjpyZWQ7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWNvbnRhaW5lcl9mb2N1czpub3QoLnByZXZpZXcpPi5wdi1waWMtd2luZG93LW1heCB7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXNlYXJjaDpob3ZlciB7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6cmVkO1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWNvbnRhaW5lcl9mb2N1czpub3QoLnByZXZpZXcpPi5wdi1waWMtd2luZG93LXNlYXJjaCB7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWRlc2NyaXB0aW9uIHtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogeWVsbG93O1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDAgLTVweCAwIDE1cHghaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAzcHghaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICBjb2xvcjogYmxhY2s7XAogICAgICAgICAgICAgICAgICAgIHRleHQtc2hhZG93OiAwIDAgMXB4ICMwMDAwMDA5OTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1kZXNjcmlwdGlvbjo6YmVmb3JlIHtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1wKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiIiO1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMTBweCBzb2xpZCB0cmFuc3BhcmVudDtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IC0yMnB4O1wKICAgICAgICAgICAgICAgICAgICB0b3A6IC0xcHg7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yaWdodC1jb2xvcjogeWVsbG93O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtcGljLXdpbmRvdy1wcmUsXAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtcGljLXdpbmRvdy1uZXh0e1wKICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgMC4zcyBlYXNlO1wKICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuM3MgZWFzZTtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMHB4O1wKICAgICAgICAgICAgICAgICAgICB0b3A6IGNhbGMoNTAlIC0gNTBweCk7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAzNnB4O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmNjAgbm8tcmVwZWF0IGNlbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1wKICAgICAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBzcGFuLnB2LXBpYy13aW5kb3ctcHJlIHtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDogMDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCInK3ByZWZzLmljb25zLmFycm93TGVmdCsnIik7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgc3Bhbi5wdi1waWMtd2luZG93LW5leHQge1wKICAgICAgICAgICAgICAgICAgICByaWdodDogMDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCInK3ByZWZzLmljb25zLmFycm93UmlnaHQrJyIpO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5jb21wYXJlPi5wdi1waWMtc2VhcmNoLXN0YXRle1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBub25lO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWNvbnRhaW5lcl9mb2N1cz4ucHYtcGljLXNlYXJjaC1zdGF0ZSwucHJldmlldz4ucHYtcGljLXNlYXJjaC1zdGF0ZSB7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6MC44O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWNvbnRhaW5lcl9mb2N1cy5oaWRlVG9vbGJhcj4ucHYtcGljLXdpbmRvdy1pbWdib3h7XAogICAgICAgICAgICAgICAgICAgIGN1cnNvcjogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXJfZm9jdXMuaGlkZVRvb2xiYXI+LnB2LXBpYy1zZWFyY2gtc3RhdGUsXAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWNvbnRhaW5lcl9mb2N1cy5oaWRlVG9vbGJhcj4ucHYtcGljLXdpbmRvdy10b29sYmFyLFwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXJfZm9jdXMuaGlkZVRvb2xiYXI+LnB2LXBpYy13aW5kb3ctbWF4LFwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXJfZm9jdXMuaGlkZVRvb2xiYXI+LnB2LXBpYy13aW5kb3ctY2xvc2UsXAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWNvbnRhaW5lcl9mb2N1cy5oaWRlVG9vbGJhcj4ucHYtcGljLXdpbmRvdy1wcmUsXAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWNvbnRhaW5lcl9mb2N1cy5oaWRlVG9vbGJhcj4ucHYtcGljLXdpbmRvdy1uZXh0e1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OjAhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWNvbnRhaW5lcl9mb2N1czpub3QoLnByZXZpZXcpIC5wdi1waWMtd2luZG93LWltZ2JveDpob3Zlcn4ucHYtcGljLXdpbmRvdy1wcmUsXAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWNvbnRhaW5lcl9mb2N1czpub3QoLnByZXZpZXcpIC5wdi1waWMtd2luZG93LWltZ2JveDpob3Zlcn4ucHYtcGljLXdpbmRvdy1uZXh0e1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OjAuMztcCiAgICAgICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IGFsbDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXI+LnB2LXBpYy13aW5kb3ctcHJlOmhvdmVyLFwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXI+LnB2LXBpYy13aW5kb3ctbmV4dDpob3ZlcntcCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eToxO1wKICAgICAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogYWxsO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LWNvbnRhaW5lcl9mb2N1czpob3Zlcj4ucHYtcGljLXNlYXJjaC1zdGF0ZXtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMCAwIDhweCAwO1wKICAgICAgICAgICAgICAgICAgICB0b3A6IDBweDtcCiAgICAgICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IGFsbDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXI+LnB2LXBpYy13aW5kb3ctcHJlOmhvdmVyfnNwYW4ucHYtcGljLXNlYXJjaC1zdGF0ZSxcCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctY29udGFpbmVyPi5wdi1waWMtd2luZG93LW5leHQ6aG92ZXJ+c3Bhbi5wdi1waWMtc2VhcmNoLXN0YXRle1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OjA7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctY29udGFpbmVyPnNwYW4ucHYtcGljLXNlYXJjaC1zdGF0ZTpob3ZlcntcCiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6dmlzaWJsZTtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDpub25lO1wKICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93Om5vbmU7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDogMzBweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXI+c3Bhbi5wdi1waWMtc2VhcmNoLXN0YXRlOmhvdmVyPnNwYW57XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctY29udGFpbmVyPnNwYW4ucHYtcGljLXNlYXJjaC1zdGF0ZTpob3Zlcj5zdmd7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtcGljLXNlYXJjaC1zdGF0ZSB7XAogICAgICAgICAgICAgICAgICAgIHRvcDogLTIxcHg7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6IDBweDtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDogMTtcCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmZmMDA7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDogMThweDtcCiAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDE4cHg7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6MDtcCiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTtcCiAgICAgICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIC13ZWJraXQtYm94LXNpemluZzogY29udGVudC1ib3g7XAogICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGNvbnRlbnQtYm94O1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxcHg7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYigwIDAgMCAvIDc1JSk7XAogICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IHJnYigyMjEsIDIyMSwgMjIxKSAwcHggMHB4IDFweCBpbnNldDtcCiAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1wKICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1wKICAgICAgICAgICAgICAgICAgICBmb250OiAxM3B4IC8gMS40ZW0gUm9ib3RvLGFyaWFsLHNhbnMtc2VyaWYs5b6u6L2v6ZuF6buRLCJOb3RvIFNhbnMgU0MiO1wKICAgICAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXNlYXJjaC1zdGF0ZT5zcGFuIHtcCiAgICAgICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDFweCA1cHghaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1wKICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtc2VhcmNoLXN0YXRlPnNwYW4+YiB7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHllbGxvdztcCiAgICAgICAgICAgICAgICAgICAgY29sb3I6IGJsYWNrO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IC01cHg7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDNweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXNlYXJjaC1zdGF0ZT5zcGFuPnN0cm9uZyB7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IGluaGVyaXQ7XAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtcGljLXNlYXJjaC1zdGF0ZT4ucHYtaWNvbiB7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyMHB4O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDIwcHg7XAogICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XAogICAgICAgICAgICAgICAgICAgIGZpbGw6IGN1cnJlbnRDb2xvcjtcCiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICBsZWZ0OiAxcHg7XAogICAgICAgICAgICAgICAgICAgIHRvcDogMXB4O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBibGFjaztcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTVweDtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNXB4O1wKICAgICAgICAgICAgICAgICAgICBjb2xvcjogd2hpdGU7XAogICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgYm94LXNpemluZzogY29udGVudC1ib3g7XAogICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy1zZWFyY2gtc3RhdGU+LnB2LWljb246aG92ZXIge1wKICAgICAgICAgICAgICAgICAgICBjb2xvcjogI2ZmZmYwMDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXNlYXJjaC1zdGF0ZT4ucHYtaWNvbiAqIHtcCiAgICAgICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctc2Nyb2xsU2lnbiB7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDBweDtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBhdXRvO1wKICAgICAgICAgICAgICAgICAgICBmaWxsOiBibGFjaztcCiAgICAgICAgICAgICAgICAgICAgdG9wOiAxMHB4O1wKICAgICAgICAgICAgICAgICAgICByaWdodDogMHB4O1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7XAogICAgICAgICAgICAgICAgICAgIC13ZWJraXQtYW5pbWF0aW9uOiBzY3JvbGxfc2lnbl9vcGFjaXR5IDJzIDMgZWFzZS1pbi1vdXQ7XAogICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogc2Nyb2xsX3NpZ25fb3BhY2l0eSAycyAzIGVhc2UtaW4tb3V0O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIEAtd2Via2l0LWtleWZyYW1lcyBzY3JvbGxfc2lnbl9vcGFjaXR5IHtcCiAgICAgICAgICAgICAgICAgICAgICAwJSB7IG9wYWNpdHk6IDAgfVwKICAgICAgICAgICAgICAgICAgICAgIDUwJSB7IG9wYWNpdHk6IDEgfVwKICAgICAgICAgICAgICAgICAgICAgIDEwMCUgeyBvcGFjaXR5OiAwIH1cCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBAa2V5ZnJhbWVzIHNjcm9sbF9zaWduX29wYWNpdHkge1wKICAgICAgICAgICAgICAgICAgICAgIDAlIHsgb3BhY2l0eTogMCB9XAogICAgICAgICAgICAgICAgICAgICAgNTAlIHsgb3BhY2l0eTogMSB9XAogICAgICAgICAgICAgICAgICAgICAgMTAwJSB7IG9wYWNpdHk6IDAgfVwKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXNjcm9sbCB7XAogICAgICAgICAgICAgICAgICAgIG1heC1oZWlnaHQ6IGNhbGMoMTAwdmggLSAycHgpO1wKICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMHZ3O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXNjcm9sbD4ucHYtcGljLXdpbmRvdy1pbWdib3gge1wKICAgICAgICAgICAgICAgICAgICBtYXgtaGVpZ2h0OiBjYWxjKDEwMHZoIC0gMnB4KTtcCiAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDB2dztcCiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3cteTogc2Nyb2xsO1wKICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdy14OiBoaWRkZW47XAogICAgICAgICAgICAgICAgICAgIG92ZXJzY3JvbGwtYmVoYXZpb3I6IGNvbnRhaW47XAogICAgICAgICAgICAgICAgICAgIC1tcy1zY3JvbGwtY2hhaW5pbmc6IGNvbnRhaW47XAogICAgICAgICAgICAgICAgICAgIHNjcm9sbGJhci1jb2xvcjogaW5pdGlhbDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1zY3JvbGw+LnB2LXBpYy13aW5kb3ctc2Nyb2xsU2lnbiB7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXNjcm9sbD4ucHYtcGljLXdpbmRvdy1jbG9zZSxcCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctc2Nyb2xsPi5wdi1waWMtd2luZG93LW1heCB7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctYmxhY2s+LnB2LXBpYy13aW5kb3ctaW1nYm94PmltZyB7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IGJsYWNrIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy13aGl0ZT4ucHYtcGljLXdpbmRvdy1pbWdib3g+aW1nIHtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGUhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uLXRyYW5zZm9ybXtcCiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgZWFzZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAudHJhbnNpdGlvbi1hbGx7XAogICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctcGljIHtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OmlubGluZS1ibG9jaztcLypvcGVyYeaKiuWbvueJh+iuvue9rmRpc3BsYXk6YmxvY2vkvJrlh7rnjrDmuLLmn5Ppl67popjvvIzkvJrmnInmrovlvbHvvIzov5jkvJrlvJXlj5Hlhbbku5blkITnp43pl67popjvvIzlkJPlsL8qL1wKICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6dW5zZXQ7XAogICAgICAgICAgICAgICAgICAgIG1pbi13aWR0aDp1bnNldDtcCiAgICAgICAgICAgICAgICAgICAgbWF4LWhlaWdodDp1bnNldDtcCiAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDp1bnNldDtcCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6aW5oZXJpdDtcCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OmluaGVyaXQ7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6MDtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOjA7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjpub25lO1wKICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctY29udGFpbmVyLnByZXZpZXcge1wKICAgICAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXJfZm9jdXM6bm90KC5wcmV2aWV3KSAucHYtcGljLXdpbmRvdy1pbWdib3gge1wKICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgNnB4IGJsYWNrO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtcGljLXdpbmRvdy1jb250YWluZXJfZm9jdXM6bm90KC5wcmV2aWV3KSAucHYtcGljLXdpbmRvdy1waWMge1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoIDQ1ZGVnLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNCkgMjUlLCB0cmFuc3BhcmVudCAyNSUsIHRyYW5zcGFyZW50IDc1JSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjQpIDc1JSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjQpIDEwMCUgKSwgbGluZWFyLWdyYWRpZW50KCA0NWRlZywgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjQpIDI1JSwgdHJhbnNwYXJlbnQgMjUlLCB0cmFuc3BhcmVudCA3NSUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC40KSA3NSUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC40KSAxMDAlICk7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogMjBweCAyMHB4O1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIDAsIDEwcHggMTBweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBzcGFuLnB2LXBpYy13aW5kb3ctdGItdG9vbCxcCiAgICAgICAgICAgICAgICAgICAgc3Bhbi5wdi1waWMtd2luZG93LXRiLWNvbW1hbmR7XAogICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6Y29udGVudC1ib3g7XAogICAgICAgICAgICAgICAgICAgIC1tb3otYm94LXNpemluZzpjb250ZW50LWJveDtcCiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDI0cHg7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyNHB4O1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDhweCA2cHggNnB4IWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOjA7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCBuby1yZXBlYXQgY2VudGVyO1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItbGVmdDogMnB4IHNvbGlkIHRyYW5zcGFyZW50O1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzg2ODY4NjtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1vcmlnaW46IGNvbnRlbnQtYm94O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRvb2xiYXIgPiBzcGFuOmxhc3QtY2hpbGQge1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiBub25lO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRiLXRvb2w6aG92ZXIsXAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRiLWNvbW1hbmQ6aG92ZXJ7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1sZWZ0OiAycHggc29saWQgcmVkO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRiLXRvb2wtc2VsZWN0ZWR7XAogICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMjFweCAwIHJnYmEoMjU1LDI1NSwyNTUsMC4zKSAsaW5zZXQgMCAtMjFweCAwIHJnYmEoMCwwLDAsMC4zKTtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQ6MnB4IHNvbGlkICMxNzcxRkY7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdG9vbGJhciBzcGFuLnB2LXBpYy13aW5kb3ctdGItaGFuZCB7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiJytwcmVmcy5pY29ucy5oYW5kKyciKSFpbXBvcnRhbnQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdG9vbGJhciBzcGFuLnB2LXBpYy13aW5kb3ctdGItcm90YXRlIHtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCInK3ByZWZzLmljb25zLnJvdGF0ZSsnIikhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRvb2xiYXIgc3Bhbi5wdi1waWMtd2luZG93LXRiLXpvb20ge1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoIicrcHJlZnMuaWNvbnMuem9vbSsnIikhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRvb2xiYXIgc3Bhbi5wdi1waWMtd2luZG93LXRiLWZsaXAtaG9yaXpvbnRhbCB7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiJytwcmVmcy5pY29ucy5mbGlwSG9yaXpvbnRhbCsnIikhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRvb2xiYXIgc3Bhbi5wdi1waWMtd2luZG93LXRiLWZsaXAtdmVydGljYWwge1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoIicrcHJlZnMuaWNvbnMuZmxpcFZlcnRpY2FsKyciKSFpbXBvcnRhbnQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdG9vbGJhciBzcGFuLnB2LXBpYy13aW5kb3ctdGItY29tcGFyZSB7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiJytwcmVmcy5pY29ucy5jb21wYXJlKyciKSFpbXBvcnRhbnQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdGItdG9vbC1iYWRnZS1jb250YWluZXIge1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtcGljLXdpbmRvdy10Yi10b29sLWJhZGdlIHtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICB0b3A6IC0zcHg7XAogICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAxcHg7XAogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDtcCiAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMCAzcHg7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGOTM7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwcHg7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNTtcCiAgICAgICAgICAgICAgICAgICAgY29sb3I6IGJsYWNrO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIHNwYW4ucHYtcGljLXdpbmRvdy10Yi10b29sLWV4dGVuZC1tZW51e1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgdG9wOjA7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0Oi0xcHg7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IzUzNTM1MztcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpub25lO1wKICAgICAgICAgICAgICAgICAgICBsZWZ0OjQwcHg7XAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiNDM0MzQzM7XAogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZToxMnB4O1wKICAgICAgICAgICAgICAgICAgICB0ZXh0LXNoYWRvdzowcHggLTFweCAwcHggYmxhY2s7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6MC43O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRiLXRvb2wtZXh0ZW5kLW1lbnU6aG92ZXJ7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6MC45O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRiLXRvb2wtZXh0ZW5kLW1lbnUtaXRlbXtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpibG9jaztcCiAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6MS41O1wKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOmNlbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzoxMHB4IWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOnBvaW50ZXI7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAycHggc29saWQgdHJhbnNwYXJlbnQ7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjODY4Njg2O1wKICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDIwcHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdGItdG9vbC1leHRlbmQtbWVudS1pdGVtPnN2Z3tcCiAgICAgICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdGItdG9vbC1leHRlbmQtbWVudS1pdGVtOmxhc3QtY2hpbGR7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdGItdG9vbC1leHRlbmQtbWVudS1pdGVtOmhvdmVye1wKICAgICAgICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6MnB4IHNvbGlkIHJlZDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy10Yi10b29sLWV4dGVuZC1tZW51LWl0ZW06YWN0aXZle1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOjExcHggOXB4IDlweCAxMXB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXRiLXRvb2wtZXh0ZW5kLW1lbnUtY29udGFpbmVyOmhvdmVyIC5wdi1waWMtd2luZG93LXRiLXRvb2x7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1sZWZ0OjJweCBzb2xpZCByZWQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctdGItdG9vbC1leHRlbmQtbWVudS1jb250YWluZXI6aG92ZXIgLnB2LXBpYy13aW5kb3ctdGItdG9vbC1leHRlbmQtbWVudXtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpibG9jaztcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy10Yi10b29sLWV4dGVuZC1tZW51LWNvbnRhaW5lcjo6YWZ0ZXJ7XAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IiI7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICByaWdodDoxcHg7XAogICAgICAgICAgICAgICAgICAgIGJvdHRvbToycHg7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOjA7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDowO1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOjA7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbjowO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6M3B4IHNvbGlkICNDM0MzQzM7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci10b3AtY29sb3I6dHJhbnNwYXJlbnQ7XAogICAgICAgICAgICAgICAgICAgIGJvcmRlci1sZWZ0LWNvbG9yOnRyYW5zcGFyZW50O1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OjAuNTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1vdmVybGF5ZXJ7XAogICAgICAgICAgICAgICAgICAgIGhlaWdodDoxMDAlO1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDoxMDAlO1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjpmaXhlZDtcCiAgICAgICAgICAgICAgICAgICAgdG9wOjA7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6MDtcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDogJytwcmVmcy5pbWdXaW5kb3cuekluZGV4Kyc7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgc3Bhbi5wdi1waWMtd2luZG93LXJvdGF0ZS1pbmRpY2F0b3J7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6bm9uZTtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246Zml4ZWQ7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOjI1MHB4O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MjUwcHg7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6MTBweDtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDotMTM1cHg7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0Oi0xMzVweDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDp0cmFuc3BhcmVudCB1cmwoIicrIHByZWZzLmljb25zLnJvdGF0ZUluZGljYXRvckJHICsnIikgbm8tcmVwZWF0IGNlbnRlcjtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICBzcGFuLnB2LXBpYy13aW5kb3ctcm90YXRlLWluZGljYXRvci1wb2ludGVye1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OmJsb2NrO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDphdXRvO1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6YXV0bztcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDp0cmFuc3BhcmVudCB1cmwoIicrIHByZWZzLmljb25zLnJvdGF0ZUluZGljYXRvclBvaW50ZXIgKyciKSBuby1yZXBlYXQgY2VudGVyO1wKICAgICAgICAgICAgICAgICAgICB3aWR0aDo2MHB4O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MjQwcHg7XAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1wKICAgICAgICAgICAgICAgICAgICB0b3A6NXB4O1wKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06cm90YXRlKDAuMWRlZyk7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgLnB2LXBpYy13aW5kb3ctcm90YXRlLW92ZXJsYXllcnsvKuW9k+WIh+aNouWIsOaXi+i9rOW3peWFt+eahOaXtuWAmeaYvuekuui/meS4quimhuebluWxgu+8jOeEtuWQjuaXi+i9rOaMh+ekuuWZqOaYvuekuuWcqOi/meS4quimhuebluWxgueahOS4i+mdoiovXAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICB0b3A6MDtcCiAgICAgICAgICAgICAgICAgICAgYm90dG9tOjA7XAogICAgICAgICAgICAgICAgICAgIGxlZnQ6MDtcCiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6MDtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpub25lO1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgIC5wdi1waWMtd2luZG93LXJhbmdle1wKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOm5vbmU7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOjEwMHB4O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MTAwcHg7XAogICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDBweCAwcHggNXB4IHJnYmEoMCwgMCwgMCwgMC44KTtcCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpub25lO1wKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOjA7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6cmdiYSgyNTUsIDAsIDAsIDAuMTUwKTtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXI6Oi13ZWJraXQtc2Nyb2xsYmFyLCAucHYtcGljLXdpbmRvdy1jb250YWluZXI+LnB2LXBpYy13aW5kb3ctaW1nYm94Ojotd2Via2l0LXNjcm9sbGJhciB7IHdpZHRoOiAwICFpbXBvcnRhbnQgfVwKICAgICAgICAgICAgICAgICAgICAucHYtcGljLXdpbmRvdy1jb250YWluZXIsIC5wdi1waWMtd2luZG93LWNvbnRhaW5lcj4ucHYtcGljLXdpbmRvdy1pbWdib3ggeyAtbXMtb3ZlcmZsb3ctc3R5bGU6IG5vbmU7b3ZlcmZsb3c6IC1tb3otc2Nyb2xsYmFycy1ub25lOyB9XAogICAgICAgICAgICAgICAgICAgICcpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgZmlyc3RPcGVuOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBJbWdXaW5kb3dDLnNlbGVjdGVkVG9vbD0naGFuZCc7CiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuaW1nV2luZG93LmNsYXNzTGlzdC5yZW1vdmUoInB2LXBpYy13aW5kb3ctc2Nyb2xsIik7CiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7CiAgICAgICAgICAgICAgICB2YXIgaW1nV2luZG93PXRoaXMuaW1nV2luZG93OwogICAgICAgICAgICAgICAgdmFyIHNjcm9sbGVkPXByZWZzLmltZ1dpbmRvdy5maXhlZCA/IHt4OjAsIHk6MH0gOiBnZXRTY3JvbGxlZCgpOwogICAgICAgICAgICAgICAgaW1nV2luZG93LnN0eWxlLmxlZnQ9LTUgKyBzY3JvbGxlZC54ICsgJ3B4JzsKICAgICAgICAgICAgICAgIGltZ1dpbmRvdy5zdHlsZS50b3A9LTUgKyBzY3JvbGxlZC55ICsgJ3B4JzsKCiAgICAgICAgICAgICAgICAvL3dpbmRvd+eahOWwuuWvuAogICAgICAgICAgICAgICAgdmFyIHdTaXplPWdldFdpbmRvd1NpemUoKTsKICAgICAgICAgICAgICAgIC8v56m66ZqZCiAgICAgICAgICAgICAgICB3U2l6ZS5oIC09IDE2OwogICAgICAgICAgICAgICAgd1NpemUudyAtPSAxNjsKCiAgICAgICAgICAgICAgICB2YXIgaW1nV2luZG93Q1M9dW5zYWZlV2luZG93LmdldENvbXB1dGVkU3R5bGUoaW1nV2luZG93KTsKICAgICAgICAgICAgICAgIHZhciByZWN0U2l6ZT17CiAgICAgICAgICAgICAgICAgICAgaDpwYXJzZUZsb2F0KGltZ1dpbmRvd0NTLmhlaWdodCksCiAgICAgICAgICAgICAgICAgICAgdzpwYXJzZUZsb2F0KGltZ1dpbmRvd0NTLndpZHRoKSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmlzTG9uZ0ltZz1yZWN0U2l6ZS5oID4gd1NpemUuaCAmJiByZWN0U2l6ZS5oL3JlY3RTaXplLncgPiAyLjU7CiAgICAgICAgICAgICAgICBpZihwcmVmcy5pbWdXaW5kb3cuc3VpdExvbmdJbWcgJiYgdGhpcy5pc0xvbmdJbWcpewogICAgICAgICAgICAgICAgICAgIGlmKHByZWZzLmltZ1dpbmRvdy5maXRUb1NjcmVlbil7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZml0VG9TY3JlZW5XaWR0aCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNlbnRlcihyZWN0U2l6ZS53IDw9IHdTaXplLncsZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nV2luZG93LmNsYXNzTGlzdC5hZGQoInB2LXBpYy13aW5kb3ctc2Nyb2xsIik7CiAgICAgICAgICAgICAgICB9ZWxzZSBpZihwcmVmcy5pbWdXaW5kb3cuZml0VG9TY3JlZW4pewogICAgICAgICAgICAgICAgICAgIHRoaXMuZml0VG9TY3JlZW4oKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNlbnRlcih0cnVlLHRydWUpOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jZW50ZXIocmVjdFNpemUudyA8PSB3U2l6ZS53ICwgcmVjdFNpemUuaCA8PSB3U2l6ZS5oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmluaXRQb3MpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmltZ1dpbmRvdy5zdHlsZS5sZWZ0ID0gdGhpcy5pbml0UG9zLmxlZnQ7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdXaW5kb3cuc3R5bGUudG9wID0gdGhpcy5pbml0UG9zLnRvcDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLmtlZXBTY3JlZW5JbnNpZGUoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAga2VlcFNjcmVlbkluc2lkZTpmdW5jdGlvbigpey8v5L+d5oyB5oyJ6ZKu5Zyo5bGP5bmV6YeM6Z2iLgogICAgICAgICAgICAgICAgdmFyIGltZ1dpbmRvdz10aGlzLmltZ1dpbmRvdzsKICAgICAgICAgICAgICAgIHZhciBpbWdXaW5kb3dGdWxsU2l6ZT17CiAgICAgICAgICAgICAgICAgICAgaDppbWdXaW5kb3cub2Zmc2V0SGVpZ2h0LAogICAgICAgICAgICAgICAgICAgIHc6aW1nV2luZG93Lm9mZnNldFdpZHRoLAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgd2luZG93U2l6ZT1nZXRXaW5kb3dTaXplKCk7CgogICAgICAgICAgICAgICAgZnVuY3Rpb24ga2VlcFNJKG9iaixvZmZzZXREaXJlY3Rpb24sZGVmYXVsdFZhbHVlLCBvdXQpewogICAgICAgICAgICAgICAgICAgIHZhciBvYmpSZWN0PW9iai5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgb2JqU3R5bGU9b2JqLnN0eWxlOwogICAgICAgICAgICAgICAgICAgIHZhciBpbnNlcnQ9ZmFsc2U7CgogICAgICAgICAgICAgICAgICAgIHdoaWxlKG9mZnNldERpcmVjdGlvbi5sZW5ndGgpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgb0Q9b2Zmc2V0RGlyZWN0aW9uWzBdOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgb0RWPWRlZmF1bHRWYWx1ZVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG91dFY9MDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYob3V0KW91dFY9b3V0LnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldERpcmVjdGlvbi5zaGlmdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWUuc2hpZnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9WYWx1ZT1wYXJzZUZsb2F0KG9ialN0eWxlW29EXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdWYWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKG9EKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RvcCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWU9b1ZhbHVlIC0gb2JqUmVjdC50b3AgLSBvdXRWOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9ialJlY3QudG9wLW91dFY8PTApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZT1NYXRoLm1pbihuZXdWYWx1ZSxpbWdXaW5kb3dGdWxsU2l6ZS5oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWU9TWF0aC5tYXgobmV3VmFsdWUsb0RWKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlPW9WYWx1ZSArIChvYmpSZWN0LnJpZ2h0IC0gd2luZG93U2l6ZS53KSArIG91dFY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYob2JqUmVjdC5yaWdodCtvdXRWID49IHdpbmRvd1NpemUudyl7Ly/lsY/luZXlpJYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWU9TWF0aC5taW4obmV3VmFsdWUsaW1nV2luZG93RnVsbFNpemUudyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlPU1hdGgubWF4KG5ld1ZhbHVlLG9EVik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWU9b1ZhbHVlICsgKG9ialJlY3QuYm90dG9tIC0gd2luZG93U2l6ZS5oKSArIG91dFY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYob2JqUmVjdC5ib3R0b20rb3V0ViA+PSB3aW5kb3dTaXplLmgpey8v5bGP5bmV5aSWCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlPU1hdGgubWluKG5ld1ZhbHVlLGltZ1dpbmRvd0Z1bGxTaXplLmgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZT1NYXRoLm1heChuZXdWYWx1ZSxvRFYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsZWZ0JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZT1vVmFsdWUgLSBvYmpSZWN0LmxlZnQgLSBvdXRWOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9ialJlY3QubGVmdC1vdXRWPD0wKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWU9TWF0aC5taW4obmV3VmFsdWUsaW1nV2luZG93RnVsbFNpemUudyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlPU1hdGgubWF4KG5ld1ZhbHVlLG9EVik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydD1pbnNlcnR8fG5ld1ZhbHVlIT09b0RWOwogICAgICAgICAgICAgICAgICAgICAgICBvYmpTdHlsZVtvRF09bmV3VmFsdWUgKyAncHgnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpbnNlcnQgPyBvYmouY2xhc3NMaXN0LmFkZCgiaW5zZXJ0IikgOiBvYmouY2xhc3NMaXN0LnJlbW92ZSgiaW5zZXJ0Iik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAga2VlcFNJKHRoaXMuY2xvc2VCdXR0b24sWyd0b3AnLCdyaWdodCddLFstMjIsMF0pOwogICAgICAgICAgICAgICAga2VlcFNJKHRoaXMubWF4QnV0dG9uLFsndG9wJywncmlnaHQnXSxbLTIyLDQ2XSxbMCw0Nl0pOwogICAgICAgICAgICAgICAgLy9rZWVwU0kodGhpcy5zZWFyY2hCdXR0b24sWyd0b3AnLCdyaWdodCddLFstMjIsNTBdKTsKICAgICAgICAgICAgICAgIGtlZXBTSSh0aGlzLnRvb2xiYXIsWyd0b3AnLCdsZWZ0J10sWzAsLTQyXSk7CgogICAgICAgICAgICAgICAgLy8g5L+d5oyB5rOo6YeK5Zyo5Zu+54mH6YeM6Z2iCiAgICAgICAgICAgICAgICAvL2tlZXBTSSh0aGlzLmRlc2NyaXB0aW9uU3BhbixbJ2JvdHRvbScsICdsZWZ0J10sWy00MCwgMTBdKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaW5pdE1heFNpemU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgbGV0IHdTaXplID0gZ2V0V2luZG93U2l6ZSgpOwogICAgICAgICAgICAgICAgbGV0IG1heFdpZHRoID0gd1NpemUudyAtIDUwLCBtYXhIZWlnaHQgPSB3U2l6ZS5oIC0gNTAsIGxlZnQsIHRvcDsKICAgICAgICAgICAgICAgIGlmIChwcmVmcy5mbG9hdEJhci5wcmV2aWV3TWF4U2l6ZVcgJiYgbWF4V2lkdGggPiBwcmVmcy5mbG9hdEJhci5wcmV2aWV3TWF4U2l6ZVcpIHsKICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aCA9IHByZWZzLmZsb2F0QmFyLnByZXZpZXdNYXhTaXplVzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChwcmVmcy5mbG9hdEJhci5wcmV2aWV3TWF4U2l6ZVcgJiYgbWF4SGVpZ2h0ID4gcHJlZnMuZmxvYXRCYXIucHJldmlld01heFNpemVIKSB7CiAgICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0ID0gcHJlZnMuZmxvYXRCYXIucHJldmlld01heFNpemVIOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHRoaXMuem9vbUxldmVsID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tTGV2ZWwgPSAwOwogICAgICAgICAgICAgICAgICAgIHRoaXMuem9vbSgxKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBsZXQgaW1nV2luZG93Q1MgPSB1bnNhZmVXaW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmltZ1dpbmRvdyk7CiAgICAgICAgICAgICAgICBsZXQgcmVjdFNpemUgPSB7CiAgICAgICAgICAgICAgICAgICAgaDogcGFyc2VGbG9hdChpbWdXaW5kb3dDUy5oZWlnaHQpLAogICAgICAgICAgICAgICAgICAgIHc6IHBhcnNlRmxvYXQoaW1nV2luZG93Q1Mud2lkdGgpLAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBsZXQgc2l6ZSwgY29udGFpbnNTY3JvbGwgPSB0aGlzLmltZ1dpbmRvdy5jbGFzc0xpc3QuY29udGFpbnMoInB2LXBpYy13aW5kb3ctc2Nyb2xsIik7CgogICAgICAgICAgICAgICAgaWYgKHByZWZzLmltZ1dpbmRvdy5maXRUb1NjcmVlblNtYWxsIHx8IHJlY3RTaXplLncgPiBtYXhXaWR0aCB8fCByZWN0U2l6ZS5oID4gbWF4SGVpZ2h0KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY3RTaXplLncgLyByZWN0U2l6ZS5oID4gbWF4V2lkdGggLyBtYXhIZWlnaHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IG1heFdpZHRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogbWF4V2lkdGggLyAocmVjdFNpemUudyAvIHJlY3RTaXplLmgpLAogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWNvbnRhaW5zU2Nyb2xsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNpemUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiBtYXhIZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3OiBtYXhIZWlnaHQgKiAocmVjdFNpemUudyAvIHJlY3RTaXplLmgpLAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgbGV0IGNzID0gdGhpcy5nZXRSb3RhdGVkSW1nQ2xpU2l6ZShzaXplKTsKICAgICAgICAgICAgICAgICAgICBsZXQgbnMgPSB0aGlzLmltZ05hdHVyYWxTaXplOwogICAgICAgICAgICAgICAgICAgIGlmIChjcyAmJiBucyAmJiBjcy53ICYmIG5zLncpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tKGNzLncgLyBucy53KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZvbGxvd1BvczogZnVuY3Rpb24ocG9zWCwgcG9zWSwgaW1tZSkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkgcmV0dXJuOwogICAgICAgICAgICAgICAgaWYgKCFwcmVmcy5mbG9hdEJhci5nbG9iYWxrZXlzLnByZXZpZXdGb2xsb3dNb3VzZSkgcmV0dXJuOwogICAgICAgICAgICAgICAgbGV0IGltZ1dpbmRvdyA9IHRoaXMuaW1nV2luZG93OwogICAgICAgICAgICAgICAgaWYgKCFpbWdXaW5kb3cpIHJldHVybjsKICAgICAgICAgICAgICAgIHRoaXMuZm9sbG93UG9zWCA9IHBvc1g7CiAgICAgICAgICAgICAgICB0aGlzLmZvbGxvd1Bvc1kgPSBwb3NZOwogICAgICAgICAgICAgICAgaWYgKCFpbW1lICYmIHRoaXMuZm9sbG93aW5nKSByZXR1cm47CiAgICAgICAgICAgICAgICBsZXQgd1NpemUgPSBnZXRXaW5kb3dTaXplKCk7CgogICAgICAgICAgICAgICAgbGV0IHBhZGRpbmcxID0gTWF0aC5taW4oMjUwLCB3U2l6ZS5oPj4yLCB3U2l6ZS53Pj4yLCAodGhpcy5pbWcubmF0dXJhbFdpZHRoIHx8IDUwMCk+PjEsICh0aGlzLmltZy5uYXR1cmFsSGVpZ2h0IHx8IDUwMCk+PjEpLCBwYWRkaW5nMiA9IDUwLCBsZWZ0LCB0b3A7Ly/lhoXlpJbkvqfpl7Tot50KICAgICAgICAgICAgICAgIGltZ1dpbmRvdy5zdHlsZS5wb3NpdGlvbiA9ICJmaXhlZCI7CiAgICAgICAgICAgICAgICBsZXQgc2Nyb2xsZWQgPSB7eDogMCwgeTogMH07CgogICAgICAgICAgICAgICAgdGhpcy5pbml0TWF4U2l6ZSgpOwoKICAgICAgICAgICAgICAgIGlmIChpbWdXaW5kb3cub2Zmc2V0V2lkdGggLyBpbWdXaW5kb3cub2Zmc2V0SGVpZ2h0ID4gd1NpemUudyAvIHdTaXplLmgpIHsKICAgICAgICAgICAgICAgICAgICAvL+Wuveadoe+8jOS4iuS4i+WNiuWxjwogICAgICAgICAgICAgICAgICAgIGlmIChwb3NZID4gd1NpemUuaCAvIDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy/kuIoKICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gcG9zWSAtIGltZ1dpbmRvdy5vZmZzZXRIZWlnaHQgLSBwYWRkaW5nMSArIHNjcm9sbGVkLnk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b3AgPCBwYWRkaW5nMj4+MSkgdG9wID0gcGFkZGluZzI+PjE7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy/kuIsKICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gcG9zWSArIHBhZGRpbmcxICsgc2Nyb2xsZWQueTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvcCA+IHdTaXplLmggLSBpbWdXaW5kb3cub2Zmc2V0SGVpZ2h0IC0gMSkgdG9wID0gd1NpemUuaCAtIGltZ1dpbmRvdy5vZmZzZXRIZWlnaHQgLSAxOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gKHdTaXplLncgLSBpbWdXaW5kb3cub2Zmc2V0V2lkdGgpIC8gMjsKICAgICAgICAgICAgICAgICAgICBsZXQgbWF4TGVmdCA9IHBvc1ggKyBwYWRkaW5nMTsKICAgICAgICAgICAgICAgICAgICBpZiAobGVmdCA+IG1heExlZnQpIGxlZnQgPSBtYXhMZWZ0OwogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWluTGVmdCA9IHBvc1ggLSBpbWdXaW5kb3cub2Zmc2V0V2lkdGggLSBwYWRkaW5nMTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlZnQgPCBtaW5MZWZ0KSBsZWZ0ID0gbWluTGVmdDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IGxlZnQgKyBzY3JvbGxlZC54OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvL+eqhOadoe+8jOW3puWPs+WNiuWxjwogICAgICAgICAgICAgICAgICAgIGlmIChwb3NYID4gd1NpemUudyAvIDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy/lt6YKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHBvc1ggLSBpbWdXaW5kb3cub2Zmc2V0V2lkdGggLSBwYWRkaW5nMSArIHNjcm9sbGVkLng7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZWZ0IDwgMSkgbGVmdCA9IDE7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy/lj7MKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHBvc1ggKyBwYWRkaW5nMSArIHNjcm9sbGVkLng7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZWZ0ID4gd1NpemUudyAtIGltZ1dpbmRvdy5vZmZzZXRXaWR0aCAtIDEpIGxlZnQgPSB3U2l6ZS53IC0gaW1nV2luZG93Lm9mZnNldFdpZHRoIC0gMTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdG9wID0gKHdTaXplLmggLSBpbWdXaW5kb3cub2Zmc2V0SGVpZ2h0KSAvIDI7CiAgICAgICAgICAgICAgICAgICAgbGV0IG1heFRvcCA9IHBvc1kgKyBwYWRkaW5nMTsKICAgICAgICAgICAgICAgICAgICBpZiAodG9wID4gbWF4VG9wKSB0b3AgPSBtYXhUb3A7CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtaW5Ub3AgPSBwb3NZIC0gaW1nV2luZG93Lm9mZnNldEhlaWdodCAtIHBhZGRpbmcxOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9wIDwgbWluVG9wKSB0b3AgPSBtaW5Ub3A7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRvcCA9IHRvcCArIHNjcm9sbGVkLnk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZm9sbG93UG9zVGltZXIpOwogICAgICAgICAgICAgICAgaWYgKGltbWUgfHwgIXRoaXMubG9hZGVkKSB7CiAgICAgICAgICAgICAgICAgICAgaW1nV2luZG93LmNsYXNzTGlzdC5yZW1vdmUoInB2LXBpYy13aW5kb3ctdHJhbnNpdGlvbi1hbGwiKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZvbGxvd2luZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMobGVmdCAtIHBhcnNlSW50KGltZ1dpbmRvdy5zdHlsZS5sZWZ0KSkgKyBNYXRoLmFicyh0b3AgLSBwYXJzZUludChpbWdXaW5kb3cuc3R5bGUudG9wKSkgPiA1MCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvbGxvd2luZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGltZ1dpbmRvdy5jbGFzc0xpc3QuYWRkKCJwdi1waWMtd2luZG93LXRyYW5zaXRpb24tYWxsIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9sbG93UG9zVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9sbG93aW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvbGxvd1Bvcyh0aGlzLmZvbGxvd1Bvc1gsIHRoaXMuZm9sbG93UG9zWSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdXaW5kb3cuY2xhc3NMaXN0LmFkZCgicHYtcGljLXdpbmRvdy10cmFuc2l0aW9uLWFsbCIpOwogICAgICAgICAgICAgICAgICAgICAgICB9LCAyNTApOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGltZ1dpbmRvdy5jbGFzc0xpc3QucmVtb3ZlKCJwdi1waWMtd2luZG93LXRyYW5zaXRpb24tYWxsIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaW1nV2luZG93LnN0eWxlLmxlZnQgPSBsZWZ0ICsgJ3B4JzsKICAgICAgICAgICAgICAgIGltZ1dpbmRvdy5zdHlsZS50b3AgPSB0b3AgKyAncHgnOwogICAgICAgICAgICB9LAogICAgICAgICAgICBmaXRUb1NjcmVlbjpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgbGV0IGltZ1dpbmRvdyA9IHRoaXMuaW1nV2luZG93OwogICAgICAgICAgICAgICAgaWYgKCFwcmVmcy5pbWdXaW5kb3cuZml0VG9TY3JlZW4pIHJldHVybjsKICAgICAgICAgICAgICAgIGxldCB3U2l6ZT1nZXRXaW5kb3dTaXplKCk7CiAgICAgICAgICAgICAgICAvL+epuumamQogICAgICAgICAgICAgICAgd1NpemUuaCAtPSA2OwogICAgICAgICAgICAgICAgd1NpemUudyAtPSA2OwoKICAgICAgICAgICAgICAgIGxldCBpbWdXaW5kb3dDUyA9IHVuc2FmZVdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGltZ1dpbmRvdyk7CiAgICAgICAgICAgICAgICBsZXQgcmVjdFNpemUgPSB7CiAgICAgICAgICAgICAgICAgICAgaDogcGFyc2VGbG9hdChpbWdXaW5kb3dDUy5oZWlnaHQpLAogICAgICAgICAgICAgICAgICAgIHc6IHBhcnNlRmxvYXQoaW1nV2luZG93Q1Mud2lkdGgpLAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBsZXQgc2l6ZSA9IHJlY3RTaXplLCBjb250YWluc1Njcm9sbCA9IGltZ1dpbmRvdy5jbGFzc0xpc3QuY29udGFpbnMoInB2LXBpYy13aW5kb3ctc2Nyb2xsIik7CiAgICAgICAgICAgICAgICBpZiAocHJlZnMuaW1nV2luZG93LmZpdFRvU2NyZWVuU21hbGwgfHwgcmVjdFNpemUudyAtIHdTaXplLncgPiAwIHx8IHJlY3RTaXplLmggLSB3U2l6ZS5oID4gMCkgey8v6LaF5Ye65bGP5bmV77yM6YKj5LmI57yp5bCP44CCCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY3RTaXplLncgLyByZWN0U2l6ZS5oID4gd1NpemUudyAvIHdTaXplLmgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IHdTaXplLncsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiB3U2l6ZS53IC8gKHJlY3RTaXplLncgLyByZWN0U2l6ZS5oKSwKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFjb250YWluc1Njcm9sbCkgewogICAgICAgICAgICAgICAgICAgICAgICBzaXplID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogd1NpemUuaCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IHdTaXplLmggKiAocmVjdFNpemUudyAvIHJlY3RTaXplLmgpLAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgbGV0IGNzID0gdGhpcy5nZXRSb3RhdGVkSW1nQ2xpU2l6ZShzaXplKTsKICAgICAgICAgICAgICAgICAgICBsZXQgbnMgPSB0aGlzLmltZ05hdHVyYWxTaXplOwogICAgICAgICAgICAgICAgICAgIGlmIChjcyAmJiBucyAmJiBjcy53ICYmIG5zLncpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tKGNzLncgLyBucy53KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9LAogICAgICAgICAgICBmaXRUb1NjcmVlbldpZHRoOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBsZXQgaW1nV2luZG93ID0gdGhpcy5pbWdXaW5kb3c7CiAgICAgICAgICAgICAgICBpZiAoIXByZWZzLmltZ1dpbmRvdy5maXRUb1NjcmVlbikgcmV0dXJuOwogICAgICAgICAgICAgICAgbGV0IHdTaXplPWdldFdpbmRvd1NpemUoKTsKICAgICAgICAgICAgICAgIHdTaXplLmggLT0gNjsKICAgICAgICAgICAgICAgIHdTaXplLncgLT0gNjsKCiAgICAgICAgICAgICAgICBsZXQgaW1nV2luZG93Q1MgPSB1bnNhZmVXaW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShpbWdXaW5kb3cpOwogICAgICAgICAgICAgICAgbGV0IHJlY3RTaXplID0gewogICAgICAgICAgICAgICAgICAgIGg6IHBhcnNlRmxvYXQoaW1nV2luZG93Q1MuaGVpZ2h0KSwKICAgICAgICAgICAgICAgICAgICB3OiBwYXJzZUZsb2F0KGltZ1dpbmRvd0NTLndpZHRoKSwKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgbGV0IHNpemUgPSByZWN0U2l6ZSwgY29udGFpbnNTY3JvbGwgPSBpbWdXaW5kb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCJwdi1waWMtd2luZG93LXNjcm9sbCIpOwogICAgICAgICAgICAgICAgaWYgKHJlY3RTaXplLncgPiB3U2l6ZS53KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY3RTaXplLncgLyByZWN0U2l6ZS5oID4gd1NpemUudyAvIHdTaXplLmgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHc6IHdTaXplLncsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOiB3U2l6ZS53IC8gKHJlY3RTaXplLncgLyByZWN0U2l6ZS5oKSwKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGxldCBjcyA9IHRoaXMuZ2V0Um90YXRlZEltZ0NsaVNpemUoc2l6ZSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IG5zID0gdGhpcy5pbWdOYXR1cmFsU2l6ZTsKICAgICAgICAgICAgICAgICAgICBpZiAoY3MgJiYgbnMgJiYgY3MudyAmJiBucy53KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuem9vbShjcy53IC8gbnMudyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2VudGVyOmZ1bmN0aW9uKGhvcml6b250YWwsdmVydGljYWwpewogICAgICAgICAgICAgICAgaWYoIWhvcml6b250YWwgJiYgIXZlcnRpY2FsKXJldHVybjsKICAgICAgICAgICAgICAgIHZhciBpbWdXaW5kb3c9dGhpcy5pbWdXaW5kb3c7CiAgICAgICAgICAgICAgICBpZighaW1nV2luZG93KXJldHVybjsKICAgICAgICAgICAgICAgIHZhciB3U2l6ZT1nZXRXaW5kb3dTaXplKCk7CiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsZWQ9cHJlZnMuaW1nV2luZG93LmZpeGVkID8ge3g6MCwgeTowfSA6IGdldFNjcm9sbGVkKCk7CiAgICAgICAgICAgICAgICBpZihob3Jpem9udGFsKWltZ1dpbmRvdy5zdHlsZS5sZWZ0ID0gKHdTaXplLncgLSBpbWdXaW5kb3cub2Zmc2V0V2lkdGgpLzIgKyBzY3JvbGxlZC54ICsncHgnOwogICAgICAgICAgICAgICAgaWYodmVydGljYWwpaW1nV2luZG93LnN0eWxlLnRvcCA9ICh3U2l6ZS5oIC0gaW1nV2luZG93Lm9mZnNldEhlaWdodCkvMiArIHNjcm9sbGVkLnkgKydweCc7CiAgICAgICAgICAgIH0sCgoKICAgICAgICAgICAgbW92ZTpmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgIHRoaXMud29ya2luZz10cnVlOwogICAgICAgICAgICAgICAgdmFyIGN1cnNvcj10aGlzLmN1cnNvcjsKICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlQ3Vyc29yKCdoYW5kaW5nJyk7CgogICAgICAgICAgICAgICAgdmFyIG1vdXNlQ29vcj17CiAgICAgICAgICAgICAgICAgICAgeDplLnBhZ2VYIHx8IGUudG91Y2hlc1swXS5wYWdlWCwKICAgICAgICAgICAgICAgICAgICB5OmUucGFnZVkgfHwgZS50b3VjaGVzWzBdLnBhZ2VZLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciBpbWdXaW5kb3c9dGhpcy5pbWdXaW5kb3c7CiAgICAgICAgICAgICAgICB2YXIgaW1nV1N0eWxlPWltZ1dpbmRvdy5zdHlsZTsKICAgICAgICAgICAgICAgIHZhciBvcmlPZmZzZXQ9ewogICAgICAgICAgICAgICAgICAgIGxlZnQ6cGFyc2VGbG9hdChpbWdXU3R5bGUubGVmdCksCiAgICAgICAgICAgICAgICAgICAgdG9wOnBhcnNlRmxvYXQoaW1nV1N0eWxlLnRvcCksCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgIHZhciBtb3ZlSGFuZGxlcj1mdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBpbWdXU3R5bGUubGVmdD1vcmlPZmZzZXQubGVmdCsgKGUucGFnZVggfHwgZS50b3VjaGVzWzBdLnBhZ2VYKS1tb3VzZUNvb3IueCArJ3B4JzsKICAgICAgICAgICAgICAgICAgICBpbWdXU3R5bGUudG9wPW9yaU9mZnNldC50b3AgKyAoZS5wYWdlWSB8fCBlLnRvdWNoZXNbMF0ucGFnZVkpLW1vdXNlQ29vci55ICsncHgnOwogICAgICAgICAgICAgICAgICAgIHNlbGYua2VlcFNjcmVlbkluc2lkZSgpOwogICAgICAgICAgICAgICAgICAgIHNlbGYubW92aW5nPXRydWU7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIG1vdXNldXBIYW5kbGVyPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIHNlbGYuY2hhbmdlQ3Vyc29yKGN1cnNvcik7CiAgICAgICAgICAgICAgICAgICAgc2VsZi53b3JraW5nPWZhbHNlOwogICAgICAgICAgICAgICAgICAgIGlmKHNlbGYudGVtcEhhbmQgJiYgc2VsZi5zcGFjZUtleVVwKXsvL+WmguaenOaYr+S4tOaXtuWIh+aNouWIsOaKk+aJi+W3peWFt++8jOW5s+enu+WujOaIkOWQjui/lOWbnuS4iuS4quW3peWFtwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRlbXBIYW5kPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNoYW5nZUN1cnNvcihzZWxmLnNlbGVjdGVkVG9vbCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLG1vdmVIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLG1vdXNldXBIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsbW92ZUhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLG1vdXNldXBIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsbW92ZUhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJyxtb3VzZXVwSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsbW92ZUhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsbW91c2V1cEhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJvdGF0ZTpmdW5jdGlvbihvcmlnaW4sdG9wTGVmdCl7CgogICAgICAgICAgICAgICAgdmFyIGltZz10aGlzLmltZzsKICAgICAgICAgICAgICAgIHZhciBpbWdXaW5kb3c9dGhpcy5pbWdXaW5kb3c7CiAgICAgICAgICAgICAgICBpbWdXaW5kb3cuY2xhc3NMaXN0LnJlbW92ZSgicHYtcGljLXdpbmRvdy1zY3JvbGwiKTsKCiAgICAgICAgICAgICAgICB2YXIgaVRyYW5zZm9ybT1pbWcuc3R5bGVbc3VwcG9ydC5jc3NUcmFuc2Zvcm1dLnJlcGxhY2UoL3JvdGF0ZVwoW14pXSpcKS9pLCcnKTsKCiAgICAgICAgICAgICAgICB2YXIgaW1nV2luZG93Q1M9dW5zYWZlV2luZG93LmdldENvbXB1dGVkU3R5bGUoaW1nV2luZG93KTsKICAgICAgICAgICAgICAgIHZhciBpbWdSZWN0U2l6ZT17CiAgICAgICAgICAgICAgICAgICAgaDpwYXJzZUZsb2F0KGltZ1dpbmRvd0NTLmhlaWdodCksCiAgICAgICAgICAgICAgICAgICAgdzpwYXJzZUZsb2F0KGltZ1dpbmRvd0NTLndpZHRoKSwKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIHJlY3RPZmZzZXQ9ewogICAgICAgICAgICAgICAgICAgIHRvcDpwYXJzZUZsb2F0KGltZ1dpbmRvdy5zdHlsZS50b3ApLAogICAgICAgICAgICAgICAgICAgIGxlZnQ6cGFyc2VGbG9hdChpbWdXaW5kb3cuc3R5bGUubGVmdCksCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBpbWdTaXplPXsKICAgICAgICAgICAgICAgICAgICBoOmltZy5jbGllbnRIZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgdzppbWcuY2xpZW50V2lkdGgsCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBpbWdPZmZzZXQ9ewogICAgICAgICAgICAgICAgICAgIHRvcDpwYXJzZUZsb2F0KGltZy5wYXJlbnROb2RlLnN0eWxlLnRvcCksCiAgICAgICAgICAgICAgICAgICAgbGVmdDpwYXJzZUZsb2F0KGltZy5wYXJlbnROb2RlLnN0eWxlLmxlZnQpLAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgc2VsZj10aGlzOwogICAgICAgICAgICAgICAgdmFyIFBJPU1hdGguUEk7CgogICAgICAgICAgICAgICAgdmFyIHJvdGF0ZSA9IGZ1bmN0aW9uIChyYWRpYW5zKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYucm90YXRlZFJhZGlhbnMgPT0gcmFkaWFucykgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLndvcmtpbmcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnBhcmVudE5vZGUuc3R5bGVbc3VwcG9ydC5jc3NUcmFuc2Zvcm1dID0gJyByb3RhdGUoJyArIHJhZGlhbnMgKyAncmFkKSAnICsgaVRyYW5zZm9ybTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpbWcucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKCJ0cmFuc2l0aW9uLXRyYW5zZm9ybSIpOwogICAgICAgICAgICAgICAgICAgICAgICBpbWcucGFyZW50Tm9kZS5zdHlsZVtzdXBwb3J0LmNzc1RyYW5zZm9ybV0gPSAnIHJvdGF0ZSgnKyByYWRpYW5zICsncmFkKSAnICsgaVRyYW5zZm9ybTsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgidHJhbnNpdGlvbi10cmFuc2Zvcm0iKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwwKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc2VsZi5yb3RhdGVJUG9pbnRlci5zdHlsZVtzdXBwb3J0LmNzc1RyYW5zZm9ybV09J3JvdGF0ZSgnKyByYWRpYW5zICsncmFkKSc7Ly/ml4vovazmjIfnpLrlmagKCiAgICAgICAgICAgICAgICAgICAgc2VsZi5yb3RhdGVkUmFkaWFucz1yYWRpYW5zOwogICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0VG9vbEJhZGdlKCdyb3RhdGUnLHJhZGlhbnMvKFBJLzE4MCkpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgYWZ0ZXJpbWdSZWN0U2l6ZT1zZWxmLmdldFJvdGF0ZWRJbWdSZWN0U2l6ZSggcmFkaWFucywgaW1nU2l6ZSApOwogICAgICAgICAgICAgICAgICAgIGltZ1dpbmRvdy5zdHlsZS53aWR0aD1hZnRlcmltZ1JlY3RTaXplLncgKydweCc7CiAgICAgICAgICAgICAgICAgICAgaW1nV2luZG93LnN0eWxlLmhlaWdodD1hZnRlcmltZ1JlY3RTaXplLmggKyAncHgnOwoKICAgICAgICAgICAgICAgICAgICBpZighdG9wTGVmdCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0SW1nV2luZG93T2Zmc2V0KHJlY3RPZmZzZXQsaW1nUmVjdFNpemUsYWZ0ZXJpbWdSZWN0U2l6ZSk7CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRJbWdPZmZzZXQoaW1nT2Zmc2V0LGltZ1JlY3RTaXplLGFmdGVyaW1nUmVjdFNpemUpOwogICAgICAgICAgICAgICAgICAgIHNlbGYua2VlcFNjcmVlbkluc2lkZSgpOwogICAgICAgICAgICAgICAgfTsKCgogICAgICAgICAgICAgICAgaWYodHlwZW9mIG9yaWdpbj09J251bWJlcicpewogICAgICAgICAgICAgICAgICAgIHJvdGF0ZShvcmlnaW4pOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH07CgoKICAgICAgICAgICAgICAgIHRoaXMud29ya2luZz10cnVlOwoKICAgICAgICAgICAgICAgIHZhciBsYXN0Um90YXRlZFJhZGlhbnM9dGhpcy5yb3RhdGVkUmFkaWFuczsKICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRLZXlVcD10cnVlOwogICAgICAgICAgICAgICAgdmFyIHNoaWZ0Um90YXRlU3RlcD1wcmVmcy5pbWdXaW5kb3cuc2hpZnRSb3RhdGVTdGVwIC8gKDE4MC9NYXRoLlBJKTsvL+i9rOaIkOW8p+W6pgoKICAgICAgICAgICAgICAgIHZhciBtb3ZlSGFuZGxlcj1mdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBzZWxmLnJvdGF0ZUluZGljYXRvci5zdHlsZS5kaXNwbGF5PSdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJhZGlhbnM9bGFzdFJvdGF0ZWRSYWRpYW5zICsgTWF0aC5hdGFuMiggZS5jbGllbnRZIC0gb3JpZ2luLnksIGUuY2xpZW50WCAtIG9yaWdpbi54ICk7CiAgICAgICAgICAgICAgICAgICAgaWYocmFkaWFucz49MipQSSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJhZGlhbnMtPTIqUEk7CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYocmFkaWFuczwwKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmFkaWFucys9MipQSTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBpZighc2VsZi5zaGlmdEtleVVwKXsvL+WmguaenOaMieS4i+S6hnNoaWZ06ZSu77yM6YKj5LmI5q2l6L+b57yp5pS+CiAgICAgICAgICAgICAgICAgICAgICAgIHJhZGlhbnMgLT0gcmFkaWFucyAlIHNoaWZ0Um90YXRlU3RlcDsKICAgICAgICAgICAgICAgICAgICAgICAgcmFkaWFucyArPSBzaGlmdFJvdGF0ZVN0ZXA7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByb3RhdGUocmFkaWFucyk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBtb3VzZXVwSGFuZGxlcj1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIHNlbGYud29ya2luZz1mYWxzZTsKICAgICAgICAgICAgICAgICAgICBzZWxmLnJvdGF0ZUluZGljYXRvci5zdHlsZS5kaXNwbGF5PSdub25lJzsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLG1vdmVIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLG1vdXNldXBIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgICAgIHNlbGYuaW1nLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgidHJhbnNpdGlvbi10cmFuc2Zvcm0iKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgc2VsZi5pbWcucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKCJ0cmFuc2l0aW9uLXRyYW5zZm9ybSIpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJyxtb3ZlSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLG1vdXNldXBIYW5kbGVyLHRydWUpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjb252ZXJ0VG9WYWxpZFJhZGlhbnM6ZnVuY3Rpb24ocmFkaWFucyl7CiAgICAgICAgICAgICAgICAvL+i9rOaIkDAtOTDnmoTnrYnku7fop5LluqbjgIIKICAgICAgICAgICAgICAgIHZhciBQST1NYXRoLlBJOwogICAgICAgICAgICAgICAgaWYocmFkaWFucyA+IFBJKXsKICAgICAgICAgICAgICAgICAgICByYWRpYW5zID0gMipQSSAtIHJhZGlhbnM7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgaWYocmFkaWFucyA+IDEvMipQSSl7CiAgICAgICAgICAgICAgICAgICAgcmFkaWFucyA9IFBJIC0gcmFkaWFuczsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gcmFkaWFuczsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0Um90YXRlZEltZ1JlY3RTaXplOmZ1bmN0aW9uKCByYWRpYW5zLCBpbWdTaXplICl7Ly/pgJrov4fml4vovazlkI7nmoTop5Lluqblkozlm77niYfnmoTlpKflsI/vvIzmsYLomZrmi5/nn6nlvaLnmoTlpKflsI8KICAgICAgICAgICAgICAgIGltZ1NpemU9IGltZ1NpemUgPyBpbWdTaXplIDp7CiAgICAgICAgICAgICAgICAgICAgaDp0aGlzLmltZy5jbGllbnRIZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgdzp0aGlzLmltZy5jbGVudFdpZHRoLAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpZih0eXBlb2YgcmFkaWFucz09PSd1bmRlZmluZWQnKXsKICAgICAgICAgICAgICAgICAgICByYWRpYW5zID0gdGhpcy5yb3RhdGVkUmFkaWFuczsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcmFkaWFucz10aGlzLmNvbnZlcnRUb1ZhbGlkUmFkaWFucyhyYWRpYW5zKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIGg6dGhpcy5ub3RFeHBvbmVudGlhbChpbWdTaXplLmgqIE1hdGguY29zKHJhZGlhbnMpICsgaW1nU2l6ZS53ICogTWF0aC5zaW4ocmFkaWFucykpLAogICAgICAgICAgICAgICAgICAgIHc6dGhpcy5ub3RFeHBvbmVudGlhbChpbWdTaXplLmgqIE1hdGguc2luKHJhZGlhbnMpICsgaW1nU2l6ZS53ICogTWF0aC5jb3MocmFkaWFucykpLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0Um90YXRlZEltZ0NsaVNpemU6ZnVuY3Rpb24ocmVjdFNpemUscmFkaWFucyl7Ly/pgJrov4fomZrmi5/nn6nlvaLnmoTlpKflsI/lkozlm77niYfnmoTml4vovazop5LluqbvvIzmsYLlm77niYfnmoTlpKflsI8KCiAgICAgICAgICAgICAgICBpZih0eXBlb2YgcmFkaWFucz09PSd1bmRlZmluZWQnKXsKICAgICAgICAgICAgICAgICAgICByYWRpYW5zID0gdGhpcy5yb3RhdGVkUmFkaWFuczsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcmFkaWFucz10aGlzLmNvbnZlcnRUb1ZhbGlkUmFkaWFucyhyYWRpYW5zKTsKCiAgICAgICAgICAgICAgICBpZihyYWRpYW5zPT0wKXsKICAgICAgICAgICAgICAgICAgICAvL3JhZGlhbnM9TWF0aC5QSS8xODAgKiAxLzEwMDsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjdFNpemU7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBoPShyZWN0U2l6ZS5oLXJlY3RTaXplLncgKiBNYXRoLnRhbihyYWRpYW5zKSkvKE1hdGguY29zKHJhZGlhbnMpLU1hdGguc2luKHJhZGlhbnMpKk1hdGgudGFuKHJhZGlhbnMpKTsKICAgICAgICAgICAgICAgIHZhciB3PShyZWN0U2l6ZS5oIC0gaCpNYXRoLmNvcyhyYWRpYW5zKSkvTWF0aC5zaW4ocmFkaWFucyk7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIGg6aCwKICAgICAgICAgICAgICAgICAgICB3OncsCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2V0SW1nT2Zmc2V0OmZ1bmN0aW9uKG9yaU9mZnNldCxiSW1nU2l6ZSxhSW1nU2l6ZSl7CiAgICAgICAgICAgICAgICB2YXIgaW1nU3R5bGU9dGhpcy5pbWcucGFyZW50Tm9kZS5zdHlsZTsKCiAgICAgICAgICAgICAgICAvL+mBv+WFjeWHuueOsOaMh+aVsOW9ouW8j+eahOaVsOWtl+WSjOWNleS9jeebuOWKoO+8jOWvvOiHtOWPmOaIkOaXoOaViOWAvAogICAgICAgICAgICAgICAgdmFyIHRvcD10aGlzLm5vdEV4cG9uZW50aWFsKG9yaU9mZnNldC50b3AgKyAoYUltZ1NpemUuaC1iSW1nU2l6ZS5oKSoxLzIpICsgJ3B4JzsKICAgICAgICAgICAgICAgIHZhciBsZWZ0PXRoaXMubm90RXhwb25lbnRpYWwob3JpT2Zmc2V0LmxlZnQgKyAoYUltZ1NpemUudy1iSW1nU2l6ZS53KSoxLzIpICsgJ3B4JzsKICAgICAgICAgICAgICAgIGltZ1N0eWxlLnRvcD0gdG9wOwogICAgICAgICAgICAgICAgaW1nU3R5bGUubGVmdD0gbGVmdDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2V0SW1nV2luZG93T2Zmc2V0OmZ1bmN0aW9uKG9yaU9mZnNldCxiSW1nV2luZG93U2l6ZSxhSW1nV2lkbm93U2l6ZSxyYXRpbyl7CiAgICAgICAgICAgICAgICByYXRpbz0gcmF0aW8/IHJhdGlvIDoge3g6MS8yLHk6MS8yfTsKICAgICAgICAgICAgICAgIHZhciBpbWdXaW5kb3dTdHlsZT10aGlzLmltZ1dpbmRvdy5zdHlsZTsKICAgICAgICAgICAgICAgIHZhciB0b3A9b3JpT2Zmc2V0LnRvcCAtIChhSW1nV2lkbm93U2l6ZS5oLWJJbWdXaW5kb3dTaXplLmgpKnJhdGlvLnkgKyAncHgnOwogICAgICAgICAgICAgICAgdmFyIGxlZnQ9b3JpT2Zmc2V0LmxlZnQgLSAoYUltZ1dpZG5vd1NpemUudy1iSW1nV2luZG93U2l6ZS53KSpyYXRpby54ICsgJ3B4JzsKICAgICAgICAgICAgICAgIGltZ1dpbmRvd1N0eWxlLnRvcD0gdG9wOwogICAgICAgICAgICAgICAgaW1nV2luZG93U3R5bGUubGVmdD0gbGVmdDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgem9vbTpmdW5jdGlvbihlLHJhdGlvKXsvL2Xlj6/og73mmK91bmRlZmluZWQs5Y+v6IO95piv5LqL5Lu25a+56LGh77yM5Y+v6IO95piv55u05o6l55qE57yp5pS+57qn5Yir5pWw5a2XCiAgICAgICAgICAgICAgICB2YXIgaW1nV2luZG93PXRoaXMuaW1nV2luZG93OwogICAgICAgICAgICAgICAgdmFyIGltZ1dpbmRvd0NTPXVuc2FmZVdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGltZ1dpbmRvdyk7CiAgICAgICAgICAgICAgICB2YXIgaW1nUmVjdFNpemU9ewogICAgICAgICAgICAgICAgICAgIGg6cGFyc2VGbG9hdChpbWdXaW5kb3dDUy5oZWlnaHQpLAogICAgICAgICAgICAgICAgICAgIHc6cGFyc2VGbG9hdChpbWdXaW5kb3dDUy53aWR0aCksCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciByZWN0T2Zmc2V0PXsKICAgICAgICAgICAgICAgICAgICB0b3A6cGFyc2VGbG9hdChpbWdXaW5kb3cuc3R5bGUudG9wKSwKICAgICAgICAgICAgICAgICAgICBsZWZ0OnBhcnNlRmxvYXQoaW1nV2luZG93LnN0eWxlLmxlZnQpLAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgaW1nPXRoaXMuaW1nOwogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKCiAgICAgICAgICAgICAgICB2YXIgem9vbT1mdW5jdGlvbihsZXZlbCl7Ly/nvKnmlL7liLDmjIflrprnuqfliKsKICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgbGV2ZWw9PSd1bmRlZmluZWQnIHx8IGxldmVsPDAgfHwgbGV2ZWw9PXNlbGYuem9vbUxldmVsKXJldHVybjsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGFmdGVySW1nU2l6ZT17CiAgICAgICAgICAgICAgICAgICAgICAgIGg6c2VsZi5pbWdOYXR1cmFsU2l6ZS5oICogbGV2ZWwgfHwgMTAsCiAgICAgICAgICAgICAgICAgICAgICAgIHc6c2VsZi5pbWdOYXR1cmFsU2l6ZS53ICogbGV2ZWwgfHwgMTAsCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBpbWcud2lkdGg9YWZ0ZXJJbWdTaXplLnc7CiAgICAgICAgICAgICAgICAgICAgaW1nLmhlaWdodD1hZnRlckltZ1NpemUuaDsKICAgICAgICAgICAgICAgICAgICBzZWxmLmltZ2JveC5zdHlsZS53aWR0aD1hZnRlckltZ1NpemUudyArICdweCc7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWdib3guc3R5bGUuaGVpZ2h0PWFmdGVySW1nU2l6ZS5oICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICBpZiAoYWZ0ZXJJbWdTaXplLncgPCA2MCkgewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmltZ1N0YXRlLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbWdTdGF0ZS5zdHlsZS5kaXNwbGF5ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChhZnRlckltZ1NpemUudyA8IDIyMCkgewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1heEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gIjAiOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNsb3NlQnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAiMCI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5tYXhCdXR0b24uc3R5bGUub3BhY2l0eSA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNsb3NlQnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAiIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGFmdGVySW1nU2l6ZS53IDwgMTAwIHx8IGFmdGVySW1nU2l6ZS5oIDwgMTAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJlQnV0dG9uLnN0eWxlLmxlZnQgPSAiLTM2cHgiOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm5leHRCdXR0b24uc3R5bGUucmlnaHQgPSAiLTM2cHgiOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJlQnV0dG9uLnN0eWxlLmxlZnQgPSAiMHB4IjsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5uZXh0QnV0dG9uLnN0eWxlLnJpZ2h0ID0gIjBweCI7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgYWZ0ZXJpbWdSZWN0U2l6ZT1zZWxmLmdldFJvdGF0ZWRJbWdSZWN0U2l6ZSggc2VsZi5yb3RhdGVkUmFkaWFucywgYWZ0ZXJJbWdTaXplICk7CiAgICAgICAgICAgICAgICAgICAgaW1nV2luZG93LnN0eWxlLndpZHRoPWFmdGVyaW1nUmVjdFNpemUudyArJ3B4JzsKICAgICAgICAgICAgICAgICAgICBpbWdXaW5kb3cuc3R5bGUuaGVpZ2h0PWFmdGVyaW1nUmVjdFNpemUuaCArICdweCc7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRJbWdXaW5kb3dPZmZzZXQocmVjdE9mZnNldCxpbWdSZWN0U2l6ZSxhZnRlcmltZ1JlY3RTaXplLHJhdGlvKTsKICAgICAgICAgICAgICAgICAgICBzZWxmLnNldEltZ09mZnNldCh7dG9wOjAsbGVmdDowfSxhZnRlckltZ1NpemUsYWZ0ZXJpbWdSZWN0U2l6ZSk7Ly/lpoLmnpzml4vovazkuobvvIzosIPmlbTlgY/np7sKICAgICAgICAgICAgICAgICAgICBzZWxmLnpvb21MZXZlbD1sZXZlbDsKICAgICAgICAgICAgICAgICAgICBzZWxmLnNldFRvb2xCYWRnZSgnem9vbScsbGV2ZWwpOwogICAgICAgICAgICAgICAgICAgIHNlbGYua2VlcFNjcmVlbkluc2lkZSgpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpZih0eXBlb2YgZSE9J29iamVjdCcpewogICAgICAgICAgICAgICAgICAgIHJhdGlvPXJhdGlvPyByYXRpbyA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgeDoxLzIsCiAgICAgICAgICAgICAgICAgICAgICAgIHk6MS8yLAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgem9vbShlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRoaXMud29ya2luZz10cnVlOwoKICAgICAgICAgICAgICAgIHJhdGlvPXRoaXMuZ2V0Wm9vbVJhdGlvKHsKICAgICAgICAgICAgICAgICAgICB4OmUuY2xpZW50WCwKICAgICAgICAgICAgICAgICAgICB5OmUuY2xpZW50WSwKICAgICAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgICAgICB2YXIgbW92ZWQ7CiAgICAgICAgICAgICAgICB2YXIgbGFzdFBhZ2VYPWUucGFnZVg7CiAgICAgICAgICAgICAgICB2YXIgY3VycmVudExldmVsPXRoaXMuem9vbUxldmVsOwogICAgICAgICAgICAgICAgdmFyIG1vdmVGaXJlZD0wOwogICAgICAgICAgICAgICAgdmFyIG1vdmVIYW5kbGVyPWZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIG1vdmVGaXJlZCsrCiAgICAgICAgICAgICAgICAgICAgaWYobW92ZUZpcmVkIDwgMil7Ly/mnInml7blgJnngrnlh7vnmoTml7blgJnkuI3lsI/lv4PkvJrop6blj5HkuIDlj5Ftb3ZlCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIG1vdmVkPXRydWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhZ2VYPWUucGFnZVg7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxldmVsOwogICAgICAgICAgICAgICAgICAgIGlmKHBhZ2VYID4gbGFzdFBhZ2VYKXsvL+WQkeWPs+enu++8jHpvb21pbuaJqeWkpwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNoYW5nZUN1cnNvcignem9vbScsZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICBsZXZlbD0wLjA1OwogICAgICAgICAgICAgICAgICAgIH1lbHNley8v5ZCR5bem56e777yMem9vbW91dOe8qeWwjwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNoYW5nZUN1cnNvcignem9vbScsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsPS0wLjA1OwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgbGFzdFBhZ2VYPXBhZ2VYOwogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRMZXZlbCArPSBsZXZlbDsKICAgICAgICAgICAgICAgICAgICB6b29tKGN1cnJlbnRMZXZlbCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBtb3VzZXVwSGFuZGxlcj1mdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBzZWxmLndvcmtpbmc9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJyxtb3ZlSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJyxtb3VzZXVwSGFuZGxlcix0cnVlKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGxldmVsPXNlbGYuZ2V0TmV4dFpvb21MZXZlbCgpOwoKICAgICAgICAgICAgICAgICAgICBpZihzZWxmLnpvb21PdXQgJiYgc2VsZi5hbHRLZXlVcCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuem9vbU91dD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBpZighbW92ZWQpey8v5aaC5p6c5rKh5pyJ5bmz56e757yp5pS+44CCCiAgICAgICAgICAgICAgICAgICAgICAgIHpvb20obGV2ZWwpOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHNlbGYuY2hhbmdlQ3Vyc29yKCd6b29tJyxzZWxmLnpvb21PdXQpOwoKICAgICAgICAgICAgICAgICAgICBpZihzZWxmLnRlbXBab29tICYmIHNlbGYuY3RybEtleVVwICYmIHNlbGYuYWx0S2V5VXApewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRlbXBab29tPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNoYW5nZUN1cnNvcihzZWxmLnNlbGVjdGVkVG9vbCk7CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsbW92ZUhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJyxtb3VzZXVwSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0TmV4dFpvb21MZXZlbDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdmFyIGxldmVsOwogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgIGlmKHRoaXMuem9vbU91dCl7Ly/nvKnlsI8KICAgICAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBJbWdXaW5kb3dDLnpvb21SYW5nZVIuZmluZChmdW5jdGlvbih2YWx1ZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlIDwgc2VsZi56b29tTGV2ZWwpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw9dmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWwgPSBzZWxmLnpvb21MZXZlbCAqIDAuOTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBJbWdXaW5kb3dDLnpvb21SYW5nZS5maW5kKGZ1bmN0aW9uKHZhbHVlKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUgPiBzZWxmLnpvb21MZXZlbCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXZlbD12YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWwgPSBzZWxmLnpvb21MZXZlbCAqIDEuMTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbGV2ZWw7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldFpvb21SYXRpbzpmdW5jdGlvbihtb3VzZUNvb3IpewogICAgICAgICAgICAgICAgdmFyIGliY1JlY3Q9dGhpcy5pbWcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICB2YXIgcmF0aW89ewogICAgICAgICAgICAgICAgICAgIHg6KG1vdXNlQ29vci54LWliY1JlY3QubGVmdCkvaWJjUmVjdC53aWR0aCwKICAgICAgICAgICAgICAgICAgICB5Oihtb3VzZUNvb3IueS1pYmNSZWN0LnRvcCkvaWJjUmVjdC5oZWlnaHQsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgaWYocmF0aW8ueDwwKXsKICAgICAgICAgICAgICAgICAgICByYXRpby54PTAKICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJhdGlvLng+MSl7CiAgICAgICAgICAgICAgICAgICAgcmF0aW8ueD0xCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgaWYocmF0aW8ueTwwKXsKICAgICAgICAgICAgICAgICAgICByYXRpby55PTAKICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJhdGlvLnk+MSl7CiAgICAgICAgICAgICAgICAgICAgcmF0aW8ueT0xCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIHJhdGlvOwogICAgICAgICAgICB9LAogICAgICAgICAgICBhZXJpYWxWaWV3OmZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgdGhpcy53b3JraW5nPXRydWU7CiAgICAgICAgICAgICAgICAvL+iusOS9j+eOsOWcqOeahOe8qeaUvuavlOS+iwogICAgICAgICAgICAgICAgdmFyIGNMZXZlbD10aGlzLnpvb21MZXZlbDsKCiAgICAgICAgICAgICAgICB2YXIgd1NpemU9Z2V0V2luZG93U2l6ZSgpOwogICAgICAgICAgICAgICAgd1NpemUuaCAtPSAxNjsKICAgICAgICAgICAgICAgIHdTaXplLncgLT0gMTY7CgogICAgICAgICAgICAgICAgdmFyIGltZ1dpbmRvdz10aGlzLmltZ1dpbmRvdzsKICAgICAgICAgICAgICAgIHZhciBpbWdXaW5kb3dDUz11bnNhZmVXaW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShpbWdXaW5kb3cpOwogICAgICAgICAgICAgICAgdmFyIHJlY3RTaXplPXsKICAgICAgICAgICAgICAgICAgICBoOnBhcnNlRmxvYXQoaW1nV2luZG93Q1MuaGVpZ2h0KSwKICAgICAgICAgICAgICAgICAgICB3OnBhcnNlRmxvYXQoaW1nV2luZG93Q1Mud2lkdGgpLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciByZWN0UmF0aW89cmVjdFNpemUuaC9yZWN0U2l6ZS53OwogICAgICAgICAgICAgICAgdmFyIHdpbmRvd1JhdGlvPXdTaXplLmgvd1NpemUudzsKCiAgICAgICAgICAgICAgICB2YXIgc2l6ZTsKICAgICAgICAgICAgICAgIHZhciByYW5nZVNpemU9e307CiAgICAgICAgICAgICAgICBpZihyZWN0UmF0aW8gPiB3aW5kb3dSYXRpbyl7CiAgICAgICAgICAgICAgICAgICAgc2l6ZT17CiAgICAgICAgICAgICAgICAgICAgICAgIGg6d1NpemUuaCwKICAgICAgICAgICAgICAgICAgICAgICAgdzp3U2l6ZS5oIC8gcmVjdFJhdGlvLAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmFuZ2VTaXplLmg9TWF0aC5taW4od1NpemUuaCAqICAoc2l6ZS5oIC8gcmVjdFNpemUuaCksIHNpemUuaCk7CiAgICAgICAgICAgICAgICAgICAgcmFuZ2VTaXplLnc9TWF0aC5taW4ocmFuZ2VTaXplLmggLyB3aW5kb3dSYXRpbyAsIHNpemUudyk7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBzaXplPXsKICAgICAgICAgICAgICAgICAgICAgICAgdzp3U2l6ZS53LAogICAgICAgICAgICAgICAgICAgICAgICBoOndTaXplLncgKiByZWN0UmF0aW8sCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByYW5nZVNpemUudz1NYXRoLm1pbih3U2l6ZS53ICogIChzaXplLncgLyByZWN0U2l6ZS53KSwgc2l6ZS53KTsKICAgICAgICAgICAgICAgICAgICByYW5nZVNpemUuaD1NYXRoLm1pbihyYW5nZVNpemUudyAqIHdpbmRvd1JhdGlvICwgc2l6ZS5oKTsKICAgICAgICAgICAgICAgIH07CgoKICAgICAgICAgICAgICAgIHRoaXMuem9vbSh0aGlzLmdldFJvdGF0ZWRJbWdDbGlTaXplKHNpemUpLncvdGhpcy5pbWdOYXR1cmFsU2l6ZS53KTsKCiAgICAgICAgICAgICAgICB0aGlzLmNlbnRlcih0cnVlLHRydWUpOwoKICAgICAgICAgICAgICAgIHRoaXMua2VlcFNjcmVlbkluc2lkZSgpOwoKICAgICAgICAgICAgICAgIHZhciB2aWV3UmFuZ2U9dGhpcy52aWV3UmFuZ2U7CiAgICAgICAgICAgICAgICB2YXIgdlJTPXZpZXdSYW5nZS5zdHlsZTsKICAgICAgICAgICAgICAgIHZSUy5kaXNwbGF5PSdibG9jayc7CiAgICAgICAgICAgICAgICB2UlMuaGVpZ2h0PXJhbmdlU2l6ZS5oICsgJ3B4JzsKICAgICAgICAgICAgICAgIHZSUy53aWR0aD1yYW5nZVNpemUudyArICdweCc7CiAgICAgICAgICAgICAgICB2UlMudG9wPTAgKyAncHgnOwogICAgICAgICAgICAgICAgdlJTLmxlZnQ9MCArICdweCc7CgoKCiAgICAgICAgICAgICAgICB2YXIgdmlld1JhbmdlUmVjdD12aWV3UmFuZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsZWQ9cHJlZnMuaW1nV2luZG93LmZpeGVkID8ge3g6MCwgeTowfSA6IGdldFNjcm9sbGVkKCk7CiAgICAgICAgICAgICAgICB2YXIgdmlld1JhbmdlQ2VudGVyQ29vcj17CiAgICAgICAgICAgICAgICAgICAgeDp2aWV3UmFuZ2VSZWN0LmxlZnQgKyBzY3JvbGxlZC54ICsgMS8yICogcmFuZ2VTaXplLncsCiAgICAgICAgICAgICAgICAgICAgeTp2aWV3UmFuZ2VSZWN0LnRvcCArIHNjcm9sbGVkLnkgKyAxLzIgKiByYW5nZVNpemUuaCwKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKCiAgICAgICAgICAgICAgICB2YXIgbW92ZVJhbmdlPXsKICAgICAgICAgICAgICAgICAgICB4Ols4LDgrc2l6ZS53LXJhbmdlU2l6ZS53XSwKICAgICAgICAgICAgICAgICAgICB5Ols4LDgrc2l6ZS5oLXJhbmdlU2l6ZS5oXQogICAgICAgICAgICAgICAgfTsKCgogICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0Vmlld1JhbmdlUG9zaXRpb24ocGFnZVhZKXsKICAgICAgICAgICAgICAgICAgICB2YXIgdG9wPXBhZ2VYWS55IC0gdmlld1JhbmdlQ2VudGVyQ29vci55OwogICAgICAgICAgICAgICAgICAgIHZhciBsZWZ0PXBhZ2VYWS54IC0gdmlld1JhbmdlQ2VudGVyQ29vci54OwogICAgICAgICAgICAgICAgICAgIGlmKHRvcDw9bW92ZVJhbmdlLnlbMF0pewogICAgICAgICAgICAgICAgICAgICAgICB0b3A9bW92ZVJhbmdlLnlbMF07CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYodG9wPj1tb3ZlUmFuZ2UueVsxXSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvcD1tb3ZlUmFuZ2UueVsxXTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHZSUy50b3A9IHRvcCArICdweCc7CiAgICAgICAgICAgICAgICAgICAgaWYobGVmdDw9bW92ZVJhbmdlLnhbMF0pewogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0PW1vdmVSYW5nZS54WzBdOwogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGxlZnQ+PW1vdmVSYW5nZS54WzFdKXsKICAgICAgICAgICAgICAgICAgICAgICAgbGVmdD1tb3ZlUmFuZ2UueFsxXTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHZSUy5sZWZ0PSBsZWZ0ICsgJ3B4JzsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgc2V0Vmlld1JhbmdlUG9zaXRpb24oewogICAgICAgICAgICAgICAgICAgIHg6ZS5wYWdlWCwKICAgICAgICAgICAgICAgICAgICB5OmUucGFnZVksCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB2YXIgbW92ZUhhbmRsZXI9ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgc2V0Vmlld1JhbmdlUG9zaXRpb24oewogICAgICAgICAgICAgICAgICAgICAgICB4OmUucGFnZVgsCiAgICAgICAgICAgICAgICAgICAgICAgIHk6ZS5wYWdlWSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIG1vdXNldXBIYW5kbGVyPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgc2VsZi53b3JraW5nPWZhbHNlOwogICAgICAgICAgICAgICAgICAgIHZpZXdSYW5nZS5zdHlsZS5kaXNwbGF5PSdub25lJzsKICAgICAgICAgICAgICAgICAgICBzZWxmLnpvb20oY0xldmVsKTsKICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsZWQ9cHJlZnMuaW1nV2luZG93LmZpeGVkID8ge3g6MCwgeTowfSA6IGdldFNjcm9sbGVkKCk7CiAgICAgICAgICAgICAgICAgICAgaW1nV2luZG93LnN0eWxlLnRvcD0gLTEzIC0gIHJlY3RTaXplLmggKiAoKHBhcnNlRmxvYXQodlJTLnRvcCkgLSBtb3ZlUmFuZ2UueVswXSkvc2l6ZS5oKSArIHNjcm9sbGVkLnkgKydweCc7CiAgICAgICAgICAgICAgICAgICAgaW1nV2luZG93LnN0eWxlLmxlZnQ9IC0xMyAtIHJlY3RTaXplLncgKiAoKHBhcnNlRmxvYXQodlJTLmxlZnQpIC0gbW92ZVJhbmdlLnhbMF0pL3NpemUudykgKyBzY3JvbGxlZC54ICsncHgnOwoKICAgICAgICAgICAgICAgICAgICAvL+ivtOaYjuWbvueJh+eahOmrmOW6puayoeacieWxj+W5lemrmO+8jOWxheS4rQogICAgICAgICAgICAgICAgICAgIC8v6K+05piO5Zu+54mH55qE5a695bqm5rKh5pyJ5bGP5bmV5a6977yM5bGF5LitCiAgICAgICAgICAgICAgICAgICAgc2VsZi5jZW50ZXIocmFuZ2VTaXplLncgPT0gc2l6ZS53ICwgcmFuZ2VTaXplLmggPT0gc2l6ZS5oKTsKCiAgICAgICAgICAgICAgICAgICAgc2VsZi5rZWVwU2NyZWVuSW5zaWRlKCk7CgogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsbW92ZUhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsbW91c2V1cEhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJyxtb3ZlSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLG1vdXNldXBIYW5kbGVyLHRydWUpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXRUb29sQmFkZ2U6ZnVuY3Rpb24odG9vbCxjb250ZW50KXsKICAgICAgICAgICAgICAgIHZhciBzY2FsZT0wOwogICAgICAgICAgICAgICAgc3dpdGNoKHRvb2wpewogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3pvb20nOnsKICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU9MjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW1nLm5hdHVyYWxXaWR0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2VhcmNoU3RhdGUoYDxzdHJvbmc+JHt0aGlzLmltZy5uYXR1cmFsV2lkdGh9IHggJHt0aGlzLmltZy5uYXR1cmFsSGVpZ2h0fTwvc3Ryb25nPmAgKyAoY29udGVudCAhPT0gMSA/IGAgKCR7cGFyc2VJbnQoY29udGVudCAqIDEwMCl9JSlgIDogIiIpICsgKHRoaXMuY3VySW5kZXggPj0wID8gYCA8Yj5bJHt0aGlzLmN1ckluZGV4ICsgMX0vJHt0aGlzLmRhdGEuYWxsLmxlbmd0aH1dPC9iPmAgOiAiIiksIHRoaXMuaW1nU3RhdGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvblNwYW4gJiYgdGhpcy5pbWdTdGF0ZS5hcHBlbmRDaGlsZCh0aGlzLmRlc2NyaXB0aW9uU3Bhbik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAncm90YXRlJzp7CiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlPTE7CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6YnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb250ZW50PXR5cGVvZiBjb250ZW50PT0nc3RyaW5nJz8gY29udGVudCA6IGNvbnRlbnQudG9GaXhlZChzY2FsZSk7CiAgICAgICAgICAgICAgICB0aGlzLnRvb2xNYXBbdG9vbF0ubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50PWNvbnRlbnQ7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG5vdEV4cG9uZW50aWFsOmZ1bmN0aW9uKG51bSl7Ly/kuI3opoHovazkuLrmjIfmlbDlvaLlir8KICAgICAgICAgICAgICAgIGlmKG51bT4wKXsKICAgICAgICAgICAgICAgICAgICBpZihudW0gPj0gOTk5OTk5OTk5OTk5OTk5OTM0NDYzKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICA5OTk5OTk5OTk5OTk5OTk5MzQ0NjM7CiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYobnVtIDw9IDAuMDAwMDAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAuMDAwMDAxOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9ZWxzZSBpZihudW0gPCAwKXsKICAgICAgICAgICAgICAgICAgICBpZihudW0gPj0gLTAuMDAwMDAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0wLjAwMDAwMTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihudW0gPD0gLTk5OTk5OTk5OTk5OTk5OTkzNDQ2Myl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtOTk5OTk5OTk5OTk5OTk5OTM0NDYzCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgcmV0dXJuIG51bTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGJsdXI6ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICBpZighdGhpcy5mb2N1c2VkKXJldHVybjsKICAgICAgICAgICAgICAgIEltZ1dpbmRvd0Muc2hvd2luZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdmFyIGltZ1dpbmRvdyA9dGhpcy5pbWdXaW5kb3c7CiAgICAgICAgICAgICAgICAvL+eCueWHu2ltZ1dpbm9kd+eahOWklumDqOeahOaXtuWAmeWkseWOu+eEpueCuQogICAgICAgICAgICAgICAgaWYoZSE9PXRydWUgJiYgaW1nV2luZG93LmNvbnRhaW5zKGUudGFyZ2V0KSlyZXR1cm47CiAgICAgICAgICAgICAgICBpbWdXaW5kb3cuY2xhc3NMaXN0LnJlbW92ZSgncHYtcGljLXdpbmRvdy1jb250YWluZXJfZm9jdXMnKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsdGhpcy5fYmx1cix0cnVlKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLHRoaXMuX2ZvY3VzZWRLZXlkb3duLGZhbHNlKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJyx0aGlzLl9mb2N1c2VkS2V5dXAsdHJ1ZSk7CiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUN1cnNvcignZGVmYXVsdCcpOwogICAgICAgICAgICAgICAgSW1nV2luZG93Qy5zZWxlY3RlZFRvb2w9dGhpcy5zZWxlY3RlZFRvb2w7CiAgICAgICAgICAgICAgICB0aGlzLmltZ1dpbmRvdy5zdHlsZS56SW5kZXg9IHByZWZzLmltZ1dpbmRvdy56SW5kZXg7CiAgICAgICAgICAgICAgICB0aGlzLnpJbmRleD1wcmVmcy5pbWdXaW5kb3cuekluZGV4OwogICAgICAgICAgICAgICAgdGhpcy5mb2N1c2VkPWZhbHNlOwogICAgICAgICAgICB9LAogICAgICAgICAgICBmb2N1czpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYodGhpcy5mb2N1c2VkKXJldHVybjsKICAgICAgICAgICAgICAgIHRoaXMudG9vbE1hcC5jb21wYXJlLnN0eWxlLmRpc3BsYXkgPSBJbWdXaW5kb3dDLmFsbC5sZW5ndGggPiAxID8gIiIgOiAibm9uZSI7CiAgICAgICAgICAgICAgICBJbWdXaW5kb3dDLnNob3dpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5pbWdXaW5kb3cuY2xhc3NMaXN0LmFkZCgncHYtcGljLXdpbmRvdy1jb250YWluZXJfZm9jdXMnKTsKICAgICAgICAgICAgICAgIHRoaXMuaW1nV2luZG93LnN0eWxlLnpJbmRleD1wcmVmcy5pbWdXaW5kb3cuekluZGV4KzE7CiAgICAgICAgICAgICAgICB0aGlzLnpJbmRleD1wcmVmcy5pbWdXaW5kb3cuekluZGV4KzE7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJyx0aGlzLl9mb2N1c2VkS2V5ZG93bixmYWxzZSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsdGhpcy5fZm9jdXNlZEtleXVwLHRydWUpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJyx0aGlzLl9ibHVyLHRydWUpOwoKICAgICAgICAgICAgICAgIC8v6L+Y5Y6f6byg5qCH5qC35byP44CCCiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUN1cnNvcih0aGlzLnNlbGVjdGVkVG9vbCk7CgogICAgICAgICAgICAgICAgaWYocHJlZnMuaW1nV2luZG93LnN5bmNTZWxlY3RlZFRvb2wgJiYgSW1nV2luZG93Qy5zZWxlY3RlZFRvb2wpewogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0VG9vbChJbWdXaW5kb3dDLnNlbGVjdGVkVG9vbCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZD10cnVlOwogICAgICAgICAgICB9LAogICAgICAgICAgICBmb2N1c2VkS2V5dXA6ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICB2YXIga2V5Q29kZT1lLmtleUNvZGU7CiAgICAgICAgICAgICAgICB2YXIgdmFsaWQ9WzI3LDMyLDE4LDE2LDcyLDE3LDcyLDgyLDkwLDY3LDM3LDM5XTsKICAgICAgICAgICAgICAgIGlmKHZhbGlkLmluZGV4T2Yoa2V5Q29kZSk9PS0xKXJldHVybjsKCiAgICAgICAgICAgICAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCkpIHJldHVybjsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICAgICAgICBzd2l0Y2goa2V5Q29kZSl7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAzMjp7Ly/nqbrmoLzplK7vvIzkuLTml7bliIfmjaLliLDnp7vliqgKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGFjZUtleVVwPXRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLnRlbXBIYW5kKXJldHVybjsvL+WmguaenOS5i+WJjeayoeacieS4tOaXtuWIh+aNouWIsOaKk+aJi+W3peWFt++8iOW9k+W3sue7j+WcqOW3peS9nOeahOaXtuWAme+8jOaMieS4i+epuuagvOS4jeS8muS4tOaXtuWIh+aNouWIsOaKk+aJi+W3peWFt++8iQogICAgICAgICAgICAgICAgICAgICAgICBpZighdGhpcy53b3JraW5nKXsvL+advuW8gOaMiemUrueahOaXtuWAme+8jOayoeacieWcqOe7p+e7reW5s+enu+S6huOAggogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wSGFuZD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlQ3Vyc29yKHRoaXMuc2VsZWN0ZWRUb29sKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAxODp7Ly9hbHTplK7nm5jliIfmjaLnvKnlsI/mlL7lpKfjgIIKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbHRLZXlVcD10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBpZighdGhpcy56b29tT3V0KXJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMud29ya2luZyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb21PdXQ9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUN1cnNvcignem9vbScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy50ZW1wWm9vbSAmJiB0aGlzLmN0cmxLZXlVcCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wWm9vbT1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUN1cnNvcih0aGlzLnNlbGVjdGVkVG9vbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDE2Oi8vc2hpZnTplK7vvIzml4vovaznmoTml7blgJnmjInkvY9zaGlmdOmUru+8jOatpei/m+e8qeaUvuOAggogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoaWZ0S2V5VXA9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAxNzp7Ly9jdHJs6ZSuCiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmN0cmxrZXlEb3duVGltZXIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZighdGhpcy5qdXN0Q0tleVVwKXsvL+WmguaenOWImuaJjeayoeacieadvuW8gGPvvIzop4Tpgb/liJLor43ova/ku7bnmoRjdHJsK2Pmnb7lvIAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3RybEtleVVwPXRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighdGhpcy50ZW1wWm9vbSlyZXR1cm47Ly/lpoLmnpzmsqHmnInliIfmjaLliLDkuobnvKnmlL4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLndvcmtpbmcgJiYgdGhpcy5hbHRLZXlVcCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wWm9vbT1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUN1cnNvcih0aGlzLnNlbGVjdGVkVG9vbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDY3OnsvL2PplK4KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5qdXN0Q0tleVVwPXRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxmPXRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmp1c3RDS2V5VXBUaW1lcik7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuanVzdENLZXlVcFRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuanVzdENLZXlVcD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9HTV9zZXRDbGlwYm9hcmQoc2VsZi5zcmMpOwogICAgICAgICAgICAgICAgICAgICAgICB9LDEwMCkKICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA3MjovL2jplK4KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oS2V5VXA9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA4MjovL3LplK4KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yS2V5VXA9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA5MDovL3rplK4KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56S2V5VXA9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOToKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hJbWFnZSh0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAzNzoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hJbWFnZShmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmVmcy5pbWdXaW5kb3cuY2xvc2UuZXNjS2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OmJyZWFrOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpZihbNzIsODIsOTBdLmluZGV4T2Yoa2V5Q29kZSkhPS0xKXsKICAgICAgICAgICAgICAgICAgICBpZighdGhpcy53b3JraW5nICYmIHRoaXMucmVzdG9yZUJlZm9yZVRvb2wpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3RvcmVCZWZvcmVUb29sPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFRvb2wodGhpcy5iZWZvcmVUb29sKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZm9jdXNlZEtleWRvd246YXN5bmMgZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICB2YXIga2V5Q29kZT1lLmtleUNvZGU7CiAgICAgICAgICAgICAgICBpZiAoIXByZWZzLmZsb2F0QmFyLmtleXMuZW5hYmxlKSByZXR1cm47CiAgICAgICAgICAgICAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCkpIHJldHVybjsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLmltZyAmJiBlLmtleS50b0xvd2VyQ2FzZSgpID09IHByZWZzLmZsb2F0QmFyLmtleXMuZG93bmxvYWQpIHsKICAgICAgICAgICAgICAgICAgICBkb3dubG9hZEltZyh0aGlzLmltZy5zcmMsICh0aGlzLmRhdGEuaW1nLnRpdGxlIHx8IHRoaXMuZGF0YS5pbWcuYWx0KSwgcHJlZnMuc2F2ZU5hbWUpOwogICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChlLmtleS50b0xvd2VyQ2FzZSgpID09IHByZWZzLmZsb2F0QmFyLmtleXMuZ2FsbGVyeSkgewogICAgICAgICAgICAgICAgICAgIGlmICghZ2FsbGVyeSkgewogICAgICAgICAgICAgICAgICAgICAgICBnYWxsZXJ5ID0gbmV3IEdhbGxlcnlDKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbGxlcnkuZGF0YSA9IFtdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgYWxsRGF0YSA9IGF3YWl0IGdhbGxlcnkuZ2V0QWxsVmFsaWRJbWdzKCk7CiAgICAgICAgICAgICAgICAgICAgYWxsRGF0YS50YXJnZXQgPSB0aGlzLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgZ2FsbGVyeS5kYXRhID0gYWxsRGF0YTsKICAgICAgICAgICAgICAgICAgICBnYWxsZXJ5LmxvYWQoZ2FsbGVyeS5kYXRhKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciB2YWxpZD1bMzIsODIsNzIsOTAsMTgsMTYsMTcsMjcsNjddOy8v5pyJ5pWI55qE5oyJ6ZSuCiAgICAgICAgICAgICAgICBpZih2YWxpZC5pbmRleE9mKGtleUNvZGUpPT0tMSkgcmV0dXJuOwoKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICAgICAgICBpZih0aGlzLndvcmtpbmcpey8vd29ya2luZ+eahOaXtuWAmeS5n+WPr+S7peaOpeWPl+aMieS4i3NoaWZ06ZSu77yM5Lul5L6/5peL6L2s55qE5pe25YCZ5Y+v5Lul5Lu75L2V5pe25YCZ5oyJ5LiLCiAgICAgICAgICAgICAgICAgICAgaWYoa2V5Q29kZT09MTYpey8vc2hpZnTplK4KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGlmdEtleVVwPWZhbHNlOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHN3aXRjaChrZXlDb2RlKXsKICAgICAgICAgICAgICAgICAgICBjYXNlIDgyOnsvL3LplK4s5YiH5o2i5Yiw5peL6L2s5bel5YW3CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMucktleVVwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucktleVVwPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iZWZvcmVUb29sPXRoaXMuc2VsZWN0ZWRUb29sOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYmVmb3JlVG9vbCAhPSAncm90YXRlJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0VG9vbCgncm90YXRlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgUEkgPSBNYXRoLlBJOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5yb3RhdGVkUmFkaWFucyArIChlLnNoaWZ0S2V5ID8gLTkwIDogOTApICogUEkgLyAxODA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPj0gMiAqIFBJKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgLT0gMiAqIFBJOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSAyICogUEk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZSh2YWx1ZSx0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA3Mjp7Ly9o6ZSuLOWIh+aNouWIsOaKk+aJi+W3peWFtwogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmhLZXlVcCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhLZXlVcD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmVmb3JlVG9vbD10aGlzLnNlbGVjdGVkVG9vbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0VG9vbCgnaGFuZCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDkwOnsvL3rplK4s5YiH5o2i5Yiw57yp5pS+5bel5YW3CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuektleVVwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuektleVVwPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iZWZvcmVUb29sPXRoaXMuc2VsZWN0ZWRUb29sOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RUb29sKCd6b29tJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGV2ZWwgPSBlLnNoaWZ0S2V5ID8gKHRoaXMuem9vbUxldmVsIC0gMC41KSA6ICh0aGlzLnpvb21MZXZlbCArIDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGxldmVsICE9ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tKGxldmVsLCB7IHg6IDAsIHk6IDB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1bmlxdWVJbWdXaW4gJiYgdW5pcXVlSW1nV2luID09IHRoaXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJlZnMuZmxvYXRCYXIuZ2xvYmFsa2V5cy5wcmV2aWV3Rm9sbG93TW91c2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2xsb3dQb3ModW5pcXVlSW1nV2luSW5pdFgsIHVuaXF1ZUltZ1dpbkluaXRZLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNlbnRlcih0cnVlLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMzI6ey8v56m65qC86ZSu6Zi75q2iLOS4tOaXtuWIh+aNouWIsOaKk+aJi+WKn+iDvQogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnNwYWNlS2V5VXApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGFjZUtleVVwPWZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5zZWxlY3RlZFRvb2whPSdoYW5kJyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wSGFuZD10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlQ3Vyc29yKCdoYW5kJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDE4OnsvL2FsdOmUrizlnKjlvZPliY3pgInmi6nmmK/nvKnmlL7lt6XlhbfnmoTml7blgJnvvIzmjInkuIvnmoTml7blgJnliIfmjaLliLDnvKnlsI/lip/og70KICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5hbHRLZXlVcCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigodGhpcy5zZWxlY3RlZFRvb2whPSd6b29tJyAmJiAhdGhpcy50ZW1wWm9vbSkgfHwgdGhpcy56b29tT3V0KXJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuem9vbU91dD10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbHRLZXlVcD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlQ3Vyc29yKCd6b29tJyx0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAxNzp7Ly9jdHJs6ZSu5Li05pe25YiH5o2i5Yiw57yp5pS+5bel5YW3CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuY3RybEtleVVwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxmPXRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0cmxrZXlEb3duVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpey8v6KeE6YG/6K+N5YW46L2v5Lu255qEY3RybCtj77yM5LiA556s6Ze05YiH5o2i5Yiw57yp5pS+55qE6Zeu6aKYCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jdHJsS2V5VXA9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2VsZi5zZWxlY3RlZFRvb2whPSd6b29tJyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGVtcFpvb209dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jaGFuZ2VDdXJzb3IoJ3pvb20nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwxMDApOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDY3OnsvL2PplK4KICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY3RybGtleURvd25UaW1lcik7CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMjc6ey8vZXNl5YWz6Zet56qX5Y+jCiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6YnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgdG9vbGJhckV2ZW50SGFuZGxlcjpmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0PWUudGFyZ2V0OwogICAgICAgICAgICAgICAgdmFyIHRvb2xNYXA9dGhpcy50b29sTWFwOwogICAgICAgICAgICAgICAgZm9yKHZhciBpIGluIHRvb2xNYXApewogICAgICAgICAgICAgICAgICAgIGlmKHRvb2xNYXAuaGFzT3duUHJvcGVydHkoaSkgJiYgdG9vbE1hcFtpXT09dGFyZ2V0KXsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKGUudHlwZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdtb3VzZWRvd24nOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFRvb2woaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkYmxjbGljayc6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGJsY2xpY2tDb21tYW5kKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGltZ1dpbmRvd0V2ZW50SGFuZGxlcjpmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgIGlmIChlLmJ1dHRvbiA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFRvb2w9dGhpcy5zZWxlY3RlZFRvb2w7CiAgICAgICAgICAgICAgICBpZihzZWxlY3RlZFRvb2wgPT0gImhhbmQiICYmIHByZWZzLmltZ1dpbmRvdy5zdWl0TG9uZ0ltZyAmJiB0aGlzLmlzTG9uZ0ltZyl7CiAgICAgICAgICAgICAgICAgICAgdmFyIGluU2Nyb2xsPXRoaXMuaW1nV2luZG93LmNsYXNzTGlzdC5jb250YWlucygicHYtcGljLXdpbmRvdy1zY3JvbGwiKTsKICAgICAgICAgICAgICAgICAgICBpZihlLnR5cGUgPT0gIndoZWVsIiAmJiBpblNjcm9sbCkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGlmKGUudHlwZSA9PSAiY2xpY2siICYmICF0aGlzLm1vdmluZyl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3U2l6ZT1nZXRXaW5kb3dTaXplKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbWdXaW5kb3c9dGhpcy5pbWdXaW5kb3c7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxlZD1wcmVmcy5pbWdXaW5kb3cuZml4ZWQgPyB7eDowLCB5OjB9IDogZ2V0U2Nyb2xsZWQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdUb3A9cGFyc2VGbG9hdChpbWdXaW5kb3cuc3R5bGUudG9wKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW5TY3JvbGwpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nV2luZG93LnN0eWxlLnRvcCA9IHBhcnNlRmxvYXQoaW1nV2luZG93LnN0eWxlLnRvcCkgLSBnZXRTY3JvbGxlZChpbWdXaW5kb3cuY2hpbGRyZW5bMF0pLnkgKydweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltZ1dpbmRvdy5jbGFzc0xpc3QucmVtb3ZlKCJwdi1waWMtd2luZG93LXNjcm9sbCIpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3RhdGUoMCx0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nV2luZG93LmNsYXNzTGlzdC5hZGQoInB2LXBpYy13aW5kb3ctc2Nyb2xsIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdXaW5kb3cuY2hpbGRyZW5bMF0uc2Nyb2xsVG9wID0gLXBhcnNlSW50KGltZ1dpbmRvdy5zdHlsZS50b3ApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy5jZW50ZXIodHJ1ZSAsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZighaW5TY3JvbGwpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nV2luZG93LnN0eWxlLnRvcD0gKHdTaXplLmggLSBpbWdXaW5kb3cub2Zmc2V0SGVpZ2h0KS8yICsgc2Nyb2xsZWQueSArJ3B4JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUb3A9cGFyc2VGbG9hdChpbWdXaW5kb3cuc3R5bGUudG9wKS1vcmlnVG9wOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5pbWdXaW5kb3cuc2Nyb2xsVG9wKXRoaXMuaW1nV2luZG93LnNjcm9sbFRvcCA9IHNjcm9sbFRvcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYodGhpcy5pbWdXaW5kb3cucGFnZVlPZmZzZXQpdGhpcy5pbWdXaW5kb3cucGFnZVlPZmZzZXQgPSBzY3JvbGxUb3A7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHRoaXMuaW1nV2luZG93LnNjcm9sbFkpdGhpcy5pbWdXaW5kb3cuc2Nyb2xsWSA9IHNjcm9sbFRvcDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmtlZXBTY3JlZW5JbnNpZGUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzd2l0Y2goZS50eXBlKXsKICAgICAgICAgICAgICAgICAgICBjYXNlICdjbGljayc6ey8v6Zi75q2ib3BlcmHnmoTlm77niYfkv53lrZgKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkVG9vbCA9PT0gImhhbmQiICYmICF0aGlzLm1vdmluZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW1nV2luZG93LmNsYXNzTGlzdC5jb250YWlucygicHYtcGljLXdpbmRvdy1ibGFjayIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdXaW5kb3cuY2xhc3NMaXN0LnJlbW92ZSgicHYtcGljLXdpbmRvdy1ibGFjayIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nV2luZG93LmNsYXNzTGlzdC5hZGQoInB2LXBpYy13aW5kb3ctd2hpdGUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pbWdXaW5kb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCJwdi1waWMtd2luZG93LXdoaXRlIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltZ1dpbmRvdy5jbGFzc0xpc3QucmVtb3ZlKCJwdi1waWMtd2luZG93LXdoaXRlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nV2luZG93LmNsYXNzTGlzdC5hZGQoInB2LXBpYy13aW5kb3ctYmxhY2siKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmluZz1mYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZS5jdHJsS2V5ICYmIGUudGFyZ2V0Lm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk9PSdJTUcnKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdtb3VzZWRvd24nOgogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RvdWNoc3RhcnQnOnsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMuZm9jdXNlZCl7Ly/lpoLmnpzmsqHmnIlmb2N1c++8jOWFiGZvY3VzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmluZz10cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5rZWVwU2NyZWVuSW5zaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0PWUudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgICAgICBpZihlLmJ1dHRvbj09Mil7Ly/nlLHkuo5yb3RhdGXml7blgJnnmoTopobnm5blsYLpl67popjvvIzkv67lpI3lj7PplK7nmoTlm77niYfoj5zljZXlvLnlh7oKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldCE9dGhpcy5yb3RhdGVPdmVybGF5ZXIpcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm90YXRlT3ZlcmxheWVyLnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVwSGFuZGxlcj1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLHVwSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucm90YXRlT3ZlcmxheWVyLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LDEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJyx1cEhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICBpZigoZS5idXR0b24hPTAgJiYgZS50eXBlIT0idG91Y2hzdGFydCIpIHx8ICh0YXJnZXQhPXRoaXMuaW1nV2luZG93ICYmIHRhcmdldCE9dGhpcy5pbWcgJiYgdGFyZ2V0IT10aGlzLnJvdGF0ZU92ZXJsYXllciAmJiB0YXJnZXQhPXRoaXMuaW1nU3RhdGUpKXJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnRlbXBIYW5kKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZShlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYodGhpcy50ZW1wWm9vbSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb20oZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHNlbGVjdGVkVG9vbD09J2hhbmQnKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdG9yZUJlZm9yZVRvb2w9IXRoaXMuaEtleVVwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5oS2V5VXApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZShlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNley8v6bif556w6KeG5Zu+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZXJpYWxWaWV3KGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoc2VsZWN0ZWRUb29sPT0ncm90YXRlJyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ2luPXsvL+aXi+i9rOWOn+eCuQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6ZS5jbGllbnRYIC0gMzAsLy/nqI3lvq7lgY/lt6bkuIDngrnjgIIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OmUuY2xpZW50WSAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBySVM9dGhpcy5yb3RhdGVJbmRpY2F0b3Iuc3R5bGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JJUy5kaXNwbGF5PSdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBySVMudG9wPW9yaWdpbi55ICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJJUy5sZWZ0PW9yaWdpbi54ICsgJ3B4JzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3RvcmVCZWZvcmVUb29sPSF0aGlzLnJLZXlVcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm90YXRlKG9yaWdpbik7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHNlbGVjdGVkVG9vbD09J3pvb20nKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdG9yZUJlZm9yZVRvb2w9IXRoaXMuektleVVwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tKGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICd3aGVlbCc6ewogICAgICAgICAgICAgICAgICAgICAgICBpZighdGhpcy5mb2N1c2VkKXJldHVybjsvL+WmguaenOayoeaciWZvY3VzCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGUuZGVsdGFZPT09MClyZXR1cm47Ly/pnZ5Z6L2055qE5rua5YqoCiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy53b3JraW5nKXJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yaVpvb21PdXQ9dGhpcy56b29tT3V0OwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb21PdXQgPSAhIShlLmRlbHRhWSA+IDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhdGlvPXRoaXMuZ2V0Wm9vbVJhdGlvKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6ZS5jbGllbnRYLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeTplLmNsaWVudFksCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxldmVsPXRoaXMuZ2V0TmV4dFpvb21MZXZlbCgpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb21lZD10cnVlOwoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tKGxldmVsLHJhdGlvKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tT3V0PW9yaVpvb21PdXQ7CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6YnJlYWs7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgZGJsY2xpY2tDb21tYW5kOmZ1bmN0aW9uKHRvb2wpewogICAgICAgICAgICAgICAgdmFyIGRvbmU7CiAgICAgICAgICAgICAgICBzd2l0Y2godG9vbCl7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGFuZCc6ey8v5Y+M5Ye75bGF5LitLOW5tuS4lOmAguW6lOWxj+W5lQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb20oMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZml0VG9TY3JlZW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jZW50ZXIodHJ1ZSx0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5rZWVwU2NyZWVuSW5zaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JvdGF0ZSc6ey8v5Y+M5Ye76L+Y5Y6f5peL6L2sCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMucm90YXRlZFJhZGlhbnM9PTApcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBkb25lPXRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm90YXRlKDAsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3pvb20nOnsvL+WPjOWHu+i/mOWOn+e8qeaUvgogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnpvb21MZXZlbD09MSlyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmU9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tKDEse3g6MCx5OjB9KTsKICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpicmVhazsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYoKHRvb2w9PSdyb3RhdGUnIHx8IHRvb2w9PSd6b29tJykgJiYgZG9uZSl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbGVkPXByZWZzLmltZ1dpbmRvdy5maXhlZCA/IHt4OjAsIHk6MH0gOiBnZXRTY3JvbGxlZCgpOwogICAgICAgICAgICAgICAgICAgIHZhciBpbWdXaW5kb3c9dGhpcy5pbWdXaW5kb3c7CiAgICAgICAgICAgICAgICAgICAgdmFyIGltZ1dpbm9kb3dSZWN0PWltZ1dpbmRvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgaW1nV2luZG93U3R5bGU9aW1nV2luZG93LnN0eWxlOwogICAgICAgICAgICAgICAgICAgIGlmKGltZ1dpbm9kb3dSZWN0LmxlZnQ8NDApewogICAgICAgICAgICAgICAgICAgICAgICBpbWdXaW5kb3dTdHlsZS5sZWZ0PTQwICsgc2Nyb2xsZWQueCArICdweCc7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBpZihpbWdXaW5vZG93UmVjdC50b3A8LTUpewogICAgICAgICAgICAgICAgICAgICAgICBpbWdXaW5kb3dTdHlsZS50b3A9LTUgKyBzY3JvbGxlZC55ICsncHgnOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgdGhpcy5rZWVwU2NyZWVuSW5zaWRlKCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZG9GbGlwQ29tbWFuZDpmdW5jdGlvbihjb21tYW5kKXsKICAgICAgICAgICAgICAgIHZhciBtYXA9ewogICAgICAgICAgICAgICAgICAgIGZ2Olsvc2NhbGVZXChbXildKlwpL2ksJyBzY2FsZVkoLTEpICddLAogICAgICAgICAgICAgICAgICAgIGZoOlsvc2NhbGVYXChbXildKlwpL2ksJyBzY2FsZVgoLTEpICddLAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgaVRyYW5zZm9ybT10aGlzLmltZy5wYXJlbnROb2RlLnN0eWxlW3N1cHBvcnQuY3NzVHJhbnNmb3JtXTsKCiAgICAgICAgICAgICAgICB2YXIgdG9vbENsYXNzTGlzdD10aGlzLnRvb2xNYXBbY29tbWFuZF0uY2xhc3NMaXN0OwoKICAgICAgICAgICAgICAgIGlmKG1hcFtjb21tYW5kXVswXS50ZXN0KGlUcmFuc2Zvcm0pKXsKICAgICAgICAgICAgICAgICAgICBpVHJhbnNmb3JtPWlUcmFuc2Zvcm0ucmVwbGFjZShtYXBbY29tbWFuZF1bMF0sJycpOwogICAgICAgICAgICAgICAgICAgIHRvb2xDbGFzc0xpc3QucmVtb3ZlKHRoaXMuc2VsZWN0ZWRUb29sQ2xhc3MpOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgaVRyYW5zZm9ybSArPSBtYXBbY29tbWFuZF1bMV07CiAgICAgICAgICAgICAgICAgICAgdG9vbENsYXNzTGlzdC5hZGQodGhpcy5zZWxlY3RlZFRvb2xDbGFzcyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy5pbWcucGFyZW50Tm9kZS5zdHlsZVtzdXBwb3J0LmNzc1RyYW5zZm9ybV09aVRyYW5zZm9ybTsKCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlbGVjdFRvb2w6ZnVuY3Rpb24odG9vbCl7CiAgICAgICAgICAgICAgICB2YXIgY29tbWFuZD1bJ2Z2JywnZmgnXTsKICAgICAgICAgICAgICAgIGlmKGNvbW1hbmQuaW5kZXhPZih0b29sKT09LTEpey8v5bel5YW36YCJ5oupCiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5zZWxlY3RlZFRvb2w9PXRvb2wpewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGxldCBzZWxmPXRoaXM7CiAgICAgICAgICAgICAgICAgICAgaWYodG9vbD09ImNvbXBhcmUiKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvcG1vc3Q9MCwgdG9wbW9zdFdpbjsKICAgICAgICAgICAgICAgICAgICAgICAgSW1nV2luZG93Qy5hbGwuZm9yRWFjaChmdW5jdGlvbihpd2luKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl3aW4uekluZGV4ID49IHRvcG1vc3QgJiYgaXdpbiE9c2VsZil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wbW9zdD1pd2luLnpJbmRleDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3Btb3N0V2luPWl3aW47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodG9wbW9zdFdpbil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xNYXAuY29tcGFyZS5zdHlsZS5kaXNwbGF5PSJub25lIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcGFyZShbdG9wbW9zdFdpbi5pbWcuc3JjXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkVG9vbD10aGlzLnNlbGVjdGVkVG9vbDsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVG9vbD10b29sOwogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMudGVtcEhhbmQgfHwgdGhpcy50ZW1wWm9vbSl7Ly/kuLTml7blt6XlhbfkuK3jgILkuI3lj5jpvKDmoIcKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHRoaXMucm90YXRlT3ZlcmxheWVyLnN0eWxlLmRpc3BsYXk9KHRvb2w9PSdyb3RhdGUnPyAnYmxvY2snIDogJ25vbmUnKTsvL+i/meS4quimhuebluWxguaYr+S4uuS6huaNleaNieWPjOWHu+aIluiAheWNleWHu+S6i+S7tuOAggoKICAgICAgICAgICAgICAgICAgICBpZihzZWxlY3RlZFRvb2wpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xNYXBbc2VsZWN0ZWRUb29sXS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuc2VsZWN0ZWRUb29sQ2xhc3MpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sTWFwW3Rvb2xdLmNsYXNzTGlzdC5hZGQodGhpcy5zZWxlY3RlZFRvb2xDbGFzcyk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VDdXJzb3IodG9vbCk7CiAgICAgICAgICAgICAgICB9ZWxzZXsvL+WRveS7pAogICAgICAgICAgICAgICAgICAgIHRoaXMuZG9GbGlwQ29tbWFuZCh0b29sKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNoYW5nZUN1cnNvcjpmdW5jdGlvbih0b29sLHpvb21PdXQpewogICAgICAgICAgICAgICAgaWYodG9vbD09J3pvb20nKXsKICAgICAgICAgICAgICAgICAgICB0b29sKz16b29tT3V0PyAnLW91dCcgOiAnLWluJzsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBpZih0aGlzLmN1cnNvcj09dG9vbClyZXR1cm47CiAgICAgICAgICAgICAgICB0aGlzLmN1cnNvcj10b29sOwoKICAgICAgICAgICAgICAgIHZhciBjdXJzb3I7CgogICAgICAgICAgICAgICAgc3dpdGNoKHRvb2wpewogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hhbmQnOnsKICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yPXN1cHBvcnQuY3NzQ3Vyc29yVmFsdWUuZ3JhYiB8fCAncG9pbnRlcic7CiAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hhbmRpbmcnOnsKICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yPXN1cHBvcnQuY3NzQ3Vyc29yVmFsdWUuZ3JhYmJpbmcgfHwgJ3BvaW50ZXInOwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICd6b29tLWluJzp7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcj1zdXBwb3J0LmNzc0N1cnNvclZhbHVlLnpvb21JbjsKICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnem9vbS1vdXQnOnsKICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yPXN1cHBvcnQuY3NzQ3Vyc29yVmFsdWUuem9vbU91dDsKICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAncm90YXRlJzp7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcj0ncHJvZ3Jlc3MnOwogICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdkZWZhdWx0Jzp7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcj0nJzsKICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBjdXJzb3IhPSd1bmRlZmluZWQnKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmltZ1dpbmRvdy5zdHlsZS5jdXJzb3I9Y3Vyc29yOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICByZW1vdmU6ZnVuY3Rpb24ob3BhY2l0eSl7CiAgICAgICAgICAgICAgICBpZih0aGlzLnJlbW92ZWQpcmV0dXJuOwogICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVkPXRydWU7CiAgICAgICAgICAgICAgICAvL3RoaXMuaW1nV2luZG93LmNsYXNzTGlzdC5yZW1vdmUoInB2LXBpYy13aW5kb3ctdHJhbnNpdGlvbi1hbGwiKTsKICAgICAgICAgICAgICAgIHRoaXMuYmx1cih0cnVlKTsKICAgICAgICAgICAgICAgIGlmKCFvcGFjaXR5KXRoaXMuaW1nV2luZG93LnN0eWxlLm9wYWNpdHk9MDsKICAgICAgICAgICAgICAgIGxldCBzZWxmID0gdGhpczsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlbW92ZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuaXNJbWcpIHNlbGYuaW1nLnNyYz0gcHJlZnMuaWNvbnMuYnJva2VuSW1nX3NtYWxsOy8v5aaC5p6c5Zyo5Yqg6L295Lit5Y+W5raI77yM5Zu+54mH5Lmf5Y+W5raI6K+75Y+W44CCCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaW1nV2luZG93LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2VsZi5pbWdXaW5kb3cpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sMzAwKTsKCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJldmlldykgewogICAgICAgICAgICAgICAgICAgIHZhciBpbmRleD1JbWdXaW5kb3dDLmFsbC5pbmRleE9mKHRoaXMpOwogICAgICAgICAgICAgICAgICAgIEltZ1dpbmRvd0MuYWxsLnNwbGljZShpbmRleCwxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciByZW1vdmVFdmVudD1kb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTsKICAgICAgICAgICAgICAgIHJlbW92ZUV2ZW50LmluaXRDdXN0b21FdmVudCgncHYtcmVtb3ZlSW1nV2luZG93JyxmYWxzZSxmYWxzZSk7CiAgICAgICAgICAgICAgICB0aGlzLmltZ1dpbmRvdy5kaXNwYXRjaEV2ZW50KHJlbW92ZUV2ZW50KTsKCiAgICAgICAgICAgICAgICAvL2ZvY3VzIG5leHQKICAgICAgICAgICAgICAgIGlmKEltZ1dpbmRvd0MuYWxsLmxlbmd0aD09MCl7CiAgICAgICAgICAgICAgICAgICAgaWYoSW1nV2luZG93Qy5vdmVybGF5ZXIpewogICAgICAgICAgICAgICAgICAgICAgICBJbWdXaW5kb3dDLm92ZXJsYXllci5zdHlsZS5kaXNwbGF5PSdub25lJzsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRvcG1vc3Q9MCwgdG9wbW9zdFdpbjsKICAgICAgICAgICAgICAgICAgICBJbWdXaW5kb3dDLmFsbC5mb3JFYWNoKGZ1bmN0aW9uKGl3aW4pewogICAgICAgICAgICAgICAgICAgICAgICBpZihpd2luLnpJbmRleCA+PSB0b3Btb3N0KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcG1vc3Q9aXdpbi56SW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3Btb3N0V2luPWl3aW47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBpZih0b3Btb3N0V2luKXsKICAgICAgICAgICAgICAgICAgICAgICAgdG9wbW9zdFdpbi5mb2N1cygpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0sCgogICAgICAgIH07CgogICAgICAgIGFkZFdoZWVsRXZlbnQoZ2V0Qm9keShkb2N1bWVudCksIGUgPT4gewogICAgICAgICAgICBpZiAodW5pcXVlSW1nV2luICYmICF1bmlxdWVJbWdXaW4ucmVtb3ZlZCkgewogICAgICAgICAgICAgICAgaWYgKHVuaXF1ZUltZ1dpbi5pc0xvbmdJbWcpIHsKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICB1bmlxdWVJbWdXaW4uaW1nLnBhcmVudE5vZGUuc2Nyb2xsVG9wICs9IGUuZGVsdGFZOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh1bmlxdWVJbWdXaW4uY3VySW5kZXggPj0gMCkgewogICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIHVuaXF1ZUltZ1dpbi5zd2l0Y2hJbWFnZShlLmRlbHRhWSA+IDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwgdHJ1ZSk7CgogICAgICAgIHZhciBsYXN0UG9wdXBMb2FkaW5nOwogICAgICAgIC8vIOi9veWFpeWKqOeUuwogICAgICAgIGZ1bmN0aW9uIExvYWRpbmdBbmltQyhkYXRhLCBidXR0b25UeXBlLCB3YWl0SW1nTG9hZCwgb3BlbkluVG9wV2luZG93LCBpbml0UG9zKSB7CiAgICAgICAgICAgIGlmIChMb2FkaW5nQW5pbUMuYWxsLmZpbmQoZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGFycmF5KSB7CiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zcmMgPT0gaXRlbS5kYXRhLnNyYyB8fCBkYXRhLmltZyA9PSBpdGVtLmRhdGEuaW1nKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIGlmIChidXR0b25UeXBlID09PSAicG9wdXAiKSB7CiAgICAgICAgICAgICAgICBpZiAobGFzdFBvcHVwTG9hZGluZykgewogICAgICAgICAgICAgICAgICAgIGxhc3RQb3B1cExvYWRpbmcuY2FuY2VsKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBsYXN0UG9wdXBMb2FkaW5nID0gdGhpczsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmFyZ3MgPSBhcnJheUZuLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTsKICAgICAgICAgICAgaWYgKGRhdGEuc3JjICE9IGRhdGEuaW1nU3JjICYmICFkYXRhLnNyY3MpIHsKICAgICAgICAgICAgICAgIGRhdGEuc3JjcyA9IFtkYXRhLmltZ1NyY107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5kYXRhID0gZGF0YTsvL2RhdGEKICAgICAgICAgICAgdGhpcy5idXR0b25UeXBlID0gYnV0dG9uVHlwZTsvL+eCueWHu+eahOaMiemSruexu+WeiwogICAgICAgICAgICB0aGlzLm9wZW5JblRvcFdpbmRvdyA9IG9wZW5JblRvcFdpbmRvdzsvL+aYr+WQpuWcqOmhtuWxgueql+WPo+aJk+W8gO+8jOWmguaenOWcqGZyYW1l6YeM6Z2i55qE6K+dCiAgICAgICAgICAgIHRoaXMud2FpdEltZ0xvYWQgPSB3YWl0SW1nTG9hZDsvL+aYr+WQpuetieW+heWujOWFqOivu+WPluWQjuaJk+W8gAogICAgICAgICAgICB0aGlzLmluaXRQb3MgPSBpbml0UG9zIHx8IGZhbHNlOwogICAgICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICB9CgogICAgICAgIExvYWRpbmdBbmltQy5hbGw9W107CgogICAgICAgIExvYWRpbmdBbmltQy5wcm90b3R5cGU9ewogICAgICAgICAgICBpbml0OmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBMb2FkaW5nQW5pbUMuYWxsLnB1c2godGhpcyk7CiAgICAgICAgICAgICAgICB0aGlzLmFkZFN0eWxlKCk7CiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKCiAgICAgICAgICAgICAgICBjb250YWluZXIuY2xhc3NOYW1lPSdwdi1sb2FkaW5nLWNvbnRhaW5lcic7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmdBbmltPWNvbnRhaW5lcjsKCiAgICAgICAgICAgICAgICBjb250YWluZXIudGl0bGU9aTE4bigibG9hZGluZyIpKyc6JyArIHRoaXMuZGF0YS5zcmM7CiAgICAgICAgICAgICAgICBsZXQgcmV0cnlTcGFuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgICAgIHJldHJ5U3Bhbi5jbGFzc05hbWU9J3B2LWxvYWRpbmctYnV0dG9uIHB2LWxvYWRpbmctcmV0cnknOwogICAgICAgICAgICAgICAgcmV0cnlTcGFuLnRpdGxlPSdSZXRyeSc7CiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmV0cnlTcGFuKTsKICAgICAgICAgICAgICAgIGxldCBjYW5jZWxTcGFuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgICAgIGNhbmNlbFNwYW4uY2xhc3NOYW1lPSdwdi1sb2FkaW5nLWJ1dHRvbiBwdi1sb2FkaW5nLWNhbmNsZSc7CiAgICAgICAgICAgICAgICBjYW5jZWxTcGFuLnRpdGxlPSdDYW5jZWwnOwogICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNhbmNlbFNwYW4pOwogICAgICAgICAgICAgICAgLypjb250YWluZXIuaW5uZXJIVE1MPQogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtbG9hZGluZy1idXR0b24gcHYtbG9hZGluZy1yZXRyeSIgdGl0bGU9IumHjeivlSI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1sb2FkaW5nLWJ1dHRvbiBwdi1sb2FkaW5nLWNhbmNsZSIgdGl0bGU9IuWPlua2iCI+PC9zcGFuPic7Ki8KCiAgICAgICAgICAgICAgICBpZiAodGhpcy5idXR0b25UeXBlID09ICdwb3B1cCcpewogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5wb2ludGVyRXZlbnRzPSJub25lIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGdldEJvZHkoZG9jdW1lbnQpLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7CgogICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICB2YXIgdGNsPWUudGFyZ2V0LmNsYXNzTGlzdDsKICAgICAgICAgICAgICAgICAgICBpZih0Y2wuY29udGFpbnMoJ3B2LWxvYWRpbmctY2FuY2xlJykpewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbmNlbCgpOwogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHRjbC5jb250YWlucygncHYtbG9hZGluZy1yZXRyeScpKXsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgbmV3IExvYWRpbmdBbmltQyhzZWxmLmFyZ3NbMF0sc2VsZi5hcmdzWzFdLHNlbGYuYXJnc1syXSxzZWxmLmFyZ3NbM10pOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LHRydWUpOwoKICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9zaXRpb24oKTsKCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZGF0YS5ub0FjdHVhbCAmJiAodGhpcy5idXR0b25UeXBlID09ICdjdXJyZW50JyB8fCB0aGlzLmJ1dHRvblR5cGUgPT0gJ2dhbGxlcnknKSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZEltZyh0aGlzLmRhdGEuaW1nU3JjKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRhdGEueGhyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuYnV0dG9uVHlwZSA9PSAnc2VhcmNoJyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0U2VhcmNoKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZnJvbT0wOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNlYXJjaEZ1bj1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaEltZ0J5SW1nKHNlbGYuZGF0YS5pbWdTcmMsIG51bGwsIGZ1bmN0aW9uKHNyY3MsIGluZGV4KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNyYz1zcmNzLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGluZGV4PT0zKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEltZyhzcmMsIHNyY3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb209aW5kZXgrMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEltZyhzcmMsIHNyY3MsIHNlYXJjaEZ1bik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5lcnJvcigi572R57uc6ZSZ6K+vIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZXJyb3IoIuayoeacieaJvuWIsOWOn+WbviIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZyb20pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaEZ1bigpOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZEltZyh0aGlzLmRhdGEuc3JjfHx0aGlzLmRhdGEuaW1nU3JjLCB0aGlzLmRhdGEuc3Jjcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB4aHJMb2FkLmxvYWQoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGlzLmRhdGEuc3JjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyOiB0aGlzLmRhdGEueGhyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2I6IGZ1bmN0aW9uKGltZ1NyYywgaW1nU3JjcywgY2FwdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWdTcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXRhLnNyYyA9IGltZ1NyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltZ1NyY3MgJiYgaW1nU3Jjcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1NyY3MgPSBBcnJheS5mcm9tKG5ldyBTZXQoaW1nU3JjcykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGF0YS5hbGwgPSBpbWdTcmNzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FwdGlvbikgc2VsZi5kYXRhLmRlc2NyaXB0aW9uID0gY2FwdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkSW1nKGltZ1NyYywgaW1nU3Jjcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxmLmRhdGEuaW1nU3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEltZyhzZWxmLmRhdGEuaW1nU3JjLCBpbWdTcmNzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmVycm9yKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZXJyb3IoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBhZGRTdHlsZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYgKExvYWRpbmdBbmltQy5zdHlsZSkgewogICAgICAgICAgICAgICAgICAgIGlmICghTG9hZGluZ0FuaW1DLnN0eWxlLnBhcmVudE5vZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgTG9hZGluZ0FuaW1DLnN0eWxlID0gX0dNX2FkZFN0eWxlKExvYWRpbmdBbmltQy5zdHlsZS5pbm5lclRleHQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBMb2FkaW5nQW5pbUMuc3R5bGU9X0dNX2FkZFN0eWxlKCdcCiAgICAgICAgICAgICAgICAucHYtbG9hZGluZy1jb250YWluZXIge1wKICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcCiAgICAgICAgICAgICAgICB6LWluZGV4Ojk5OTk5OTk5NztcCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBibGFjayB1cmwoIicrcHJlZnMuaWNvbnMubG9hZGluZysnIikgY2VudGVyIG5vLXJlcGVhdDtcCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLW9yaWdpbjogY29udGVudC1ib3g7XAogICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1wKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDFweCAzMHB4IDFweCAycHg7XAogICAgICAgICAgICAgICAgbWFyZ2luOiAwO1wKICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNTtcCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDI0cHg7XAogICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyNHB4O1wKICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDJweCAycHggMHB4ICM2NjY7XAogICAgICAgICAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOiBvcGFjaXR5IDAuMTVzIGVhc2UtaW4tb3V0O1wKICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4xNXMgZWFzZS1pbi1vdXQ7XAogICAgICAgICAgICAgICAgd2lkdGg6IGluaXRpYWw7XAogICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgIC5wdi1sb2FkaW5nLWNvbnRhaW5lcjpob3ZlciB7XAogICAgICAgICAgICAgICAgb3BhY2l0eTogMC45O1wKICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAucHYtbG9hZGluZy1idXR0b24ge1wKICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDI0cHg7XAogICAgICAgICAgICAgICAgd2lkdGg6IDI0cHg7XAogICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1wKICAgICAgICAgICAgICAgIHJpZ2h0OiAwO1wKICAgICAgICAgICAgICAgIHRvcDogMDtcCiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjQ7XAogICAgICAgICAgICAgICAgYmFja2dyb3VuZDp0cmFuc3BhcmVudCBjZW50ZXIgbm8tcmVwZWF0O1wKICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjE1cyBlYXNlLWluLW91dDtcCiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMTVzIGVhc2UtaW4tb3V0O1wKICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAucHYtbG9hZGluZy1idXR0b246aG92ZXIge1wKICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XAogICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgIC5wdi1sb2FkaW5nLWNhbmNsZXtcCiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogYWxsO1wKICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiJytwcmVmcy5pY29ucy5sb2FkaW5nQ2FuY2xlKyciKTtcCiAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgLnB2LWxvYWRpbmctcmV0cnl7XAogICAgICAgICAgICAgICAgZGlzcGxheTpub25lO1wKICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBhbGw7XAogICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCInK3ByZWZzLmljb25zLnJldHJ5KyciKTtcCiAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgLnB2LWxvYWRpbmctY29udGFpbmVyX2Vycm9ye1wKICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6bm9uZTtcCiAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgLnB2LWxvYWRpbmctY29udGFpbmVyX2Vycm9yOjphZnRlcntcCiAgICAgICAgICAgICAgICBjb250ZW50OiInK2kxOG4oImxvYWRFcnJvciIpKyciO1wKICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyNHB4O1wKICAgICAgICAgICAgICAgIGNvbG9yOiByZWQ7XAogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1wKICAgICAgICAgICAgICAgIGRpc3BsYXk6aW5saW5lO1wKICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAucHYtbG9hZGluZy1jb250YWluZXJfZXJyb3IgLnB2LWxvYWRpbmctY2FuY2xle1wKICAgICAgICAgICAgICAgIGRpc3BsYXk6bm9uZTtcCiAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgLnB2LWxvYWRpbmctY29udGFpbmVyX2Vycm9yIC5wdi1sb2FkaW5nLXJldHJ5e1wKICAgICAgICAgICAgICAgIGRpc3BsYXk6YmxvY2s7XAogICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICcpOwogICAgICAgICAgICB9LAogICAgICAgICAgICByZW1vdmU6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGlmKCF0aGlzLnJlbW92ZWQpewogICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlZD10cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZ0FuaW0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmxvYWRpbmdBbmltKTsKICAgICAgICAgICAgICAgICAgICBMb2FkaW5nQW5pbUMuYWxsLnNwbGljZShMb2FkaW5nQW5pbUMuYWxsLmluZGV4T2YodGhpcyksMSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9LAogICAgICAgICAgICBjYW5jZWw6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHRoaXMuaW1nUmVhZHkgJiYgdGhpcy5pbWdSZWFkeS5hYm9ydCgpOwogICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXJyb3I6ZnVuY3Rpb24obXNnLGltZyxlKXsKICAgICAgICAgICAgICAgIGlmKG1zZylkZWJ1Zyhtc2cpOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nQW5pbS5zdHlsZS5wb2ludGVyRXZlbnRzPSIiOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nQW5pbS5jbGFzc0xpc3QuYWRkKCdwdi1sb2FkaW5nLWNvbnRhaW5lcl9lcnJvcicpOwogICAgICAgICAgICAgICAgZGVidWcoJ1BpY3ZpZXdlciBDRSsg6L295YWl5aSn5Zu+6ZSZ6K+v77yaJW8nLCB0aGlzLmRhdGEpOwoKICAgICAgICAgICAgICAgIHZhciBzZWxmPXRoaXM7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIH0sMzAwMCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNldFBvc2l0aW9uOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZGF0YS5pbWcpIHJldHVybjsKICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbj1nZXRDb250ZW50Q2xpZW50UmVjdCh0aGlzLmRhdGEuaW1nKTsKICAgICAgICAgICAgICAgIHZhciBjcz10aGlzLmxvYWRpbmdBbmltLnN0eWxlOwogICAgICAgICAgICAgICAgdmFyIHNjcm9sbGVkPWdldFNjcm9sbGVkKCk7CiAgICAgICAgICAgICAgICBjcy50b3A9cG9zaXRpb24udG9wICsgc2Nyb2xsZWQueSArMSArICdweCc7CiAgICAgICAgICAgICAgICBjcy5sZWZ0PXBvc2l0aW9uLmxlZnQgKyBzY3JvbGxlZC54ICsxICsgJ3B4JzsKICAgICAgICAgICAgICAgIGNzLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyDmoLnmja4gaW1nU3JjIOi9veWFpeWbvueJh++8jGltZ1NyY3Mg5Li65aSH55So5Zu+54mH5Zyw5Z2A77yMaW1nU3JjIOWKoOi9veWksei0peWkh+eUqAogICAgICAgICAgICBsb2FkSW1nOiBhc3luYyBmdW5jdGlvbihpbWdTcmMsIGltZ1NyY3MsIG5leHRGdW4pIHsKICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgICAgICAgICB2YXIgbW9kZSA9IG1hdGNoZWRSdWxlLmdldE1vZGUoaW1nU3JjKTsKICAgICAgICAgICAgICAgIHZhciBtZWRpYTsKICAgICAgICAgICAgICAgIGxldCBsb2FkZWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBtZWRpYS5wbGF5KCk7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkKHRoaXMgfHwgbWVkaWEpOwogICAgICAgICAgICAgICAgICAgIG1lZGlhLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWRlZGRhdGEnLCBsb2FkZWQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHRoaXMuYnV0dG9uVHlwZSA9PT0gJ21hZ25pZmllcicpIHsKICAgICAgICAgICAgICAgICAgICBtZWRpYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwogICAgICAgICAgICAgICAgICAgIG1lZGlhLnNyYyA9IChtb2RlID09PSAidmlkZW8iIHx8IG1vZGUgPT09ICJhdWRpbyIpID8gdGhpcy5kYXRhLmltZ1NyYyA6IGltZ1NyYzsKICAgICAgICAgICAgICAgICAgICBtb2RlID0gIiI7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobW9kZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJ2aWRlbyI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYSA9IGNyZWF0ZVZpZGVvKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5zdHlsZS53aWR0aCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5zdHlsZS5oZWlnaHQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWEuY29udHJvbHMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWEubG9vcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5hdXRvcGxheSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS52b2x1bWUgPSBtYXRjaGVkUnVsZS5tdXRlID8gMCA6IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTcmMgPSBpbWdTcmMucmVwbGFjZSgvXnZpZGVvOi8sICIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWdTcmMuaW5kZXhPZignLm1rdicpICE9PSAtMSkgbWVkaWEudHlwZSA9ICd2aWRlby9tcDQnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaW1nU3JjLmluZGV4T2YoJy5tM3U4JykgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGluaXRWaWRlb2pzKG1lZGlhLCBpbWdTcmMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTcmMgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBvciBpbml0aWFsaXplIFZpZGVvLmpzIHBsYXllcjonLCBlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImF1ZGlvIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhLmNvbnRyb2xzID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhLmF1dG9wbGF5ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhLnZvbHVtZSA9IG1hdGNoZWRSdWxlLm11dGUgPyAwIDogMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1NyYyA9IGltZ1NyYy5yZXBsYWNlKC9eYXVkaW86LywgIiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChpbWdTcmMpIG1lZGlhLnNyYyA9IGltZ1NyYzsKICAgICAgICAgICAgICAgICAgICBjdXJMb2FkaW5nTWVkaWEgPSBtZWRpYTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgb3B0cyA9IHsKICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoL15ibG9iOi8udGVzdChpbWdTcmMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpbWdTcmNzKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcmMgPSBpbWdTcmNzLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNyYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRJbWcoc3JjLCBpbWdTcmNzLCBuZXh0RnVuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2RlID09ICJpbWFnZSIgfHwgbW9kZSA9PSAiIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX0dNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogbWVkaWEuc3JjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYlVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwocmVzcG9uc2UucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRJbWcoYmxvYlVybCwgaW1nU3JjcywgbmV4dEZ1bik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbGVhc2VCbG9iID0gKCkgPT4gVVJMLnJldm9rZU9iamVjdFVSTChibG9iVXJsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHJlbGVhc2VCbG9iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpbWdTcmNzKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNyYyA9IGltZ1NyY3Muc2hpZnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRJbWcoc3JjLCBpbWdTcmNzLCBuZXh0RnVuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmVycm9yKCcnLCB0aGlzLCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5lcnJvcignJywgdGhpcywgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5leHRGdW4pIG5leHRGdW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBzZWxmLmVycm9yKCcnLCB0aGlzLCBlKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBvcHRzW3NlbGYud2FpdEltZ0xvYWQgPyAnbG9hZCcgOiAncmVhZHknXSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWQodGhpcywgZSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAndmlkZW8nIHx8IG1vZGUgPT09ICdhdWRpbycpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaW1nU3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZGRhdGEnLCBsb2FkZWQpOwogICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5sb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLmltZ1JlYWR5ID0gaW1nUmVhZHkobWVkaWEsIG9wdHMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgbG9hZDphc3luYyBmdW5jdGlvbihpbWcsZSl7CiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgdGhpcy5pbWc9aW1nOwogICAgICAgICAgICAgICAgdmFyIGJ1dHRvblR5cGU9dGhpcy5idXR0b25UeXBlOwoKICAgICAgICAgICAgICAgIGlmKGJ1dHRvblR5cGU9PSdnYWxsZXJ5Jyl7CiAgICAgICAgICAgICAgICAgICAgaWYoIWdhbGxlcnkpewogICAgICAgICAgICAgICAgICAgICAgICBnYWxsZXJ5PW5ldyBHYWxsZXJ5QygpOwogICAgICAgICAgICAgICAgICAgICAgICBnYWxsZXJ5LmRhdGE9W107CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBhbGxEYXRhPWF3YWl0IGdhbGxlcnkuZ2V0QWxsVmFsaWRJbWdzKCk7CiAgICAgICAgICAgICAgICAgICAgYWxsRGF0YS50YXJnZXQ9dGhpcy5kYXRhOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YT1hbGxEYXRhOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgc2VsZj10aGlzOwogICAgICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gb3BlbkluVG9wKCl7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGE9c2VsZi5kYXRhOwoKICAgICAgICAgICAgICAgICAgICAvL+WIoOmZpOS4jeiDveWPkemAgeeahOmhueOAggogICAgICAgICAgICAgICAgICAgIHZhciBkZWxDYW50Q2xvbmU9ZnVuY3Rpb24ob2JqKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIW9iailyZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmouaW1nOwogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb2JqLmltZ1BBOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGlmKEFycmF5LmlzQXJyYXkoZGF0YSkpewogICAgICAgICAgICAgICAgICAgICAgICBmcmFtZVNlbnRTdWNjZXNzRGF0YT1mcmFtZVNlbnREYXRhOwogICAgICAgICAgICAgICAgICAgICAgICBmcmFtZVNlbnREYXRhPWNsb25lT2JqZWN0KGRhdGEsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbENhbnRDbG9uZShkYXRhLnRhcmdldCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbihvYmopewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsQ2FudENsb25lKG9iaik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICBkZWxDYW50Q2xvbmUoZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgaWYoIWdhbGxlcnkpewogICAgICAgICAgICAgICAgICAgICAgICBnYWxsZXJ5PW5ldyBHYWxsZXJ5QygpOwogICAgICAgICAgICAgICAgICAgICAgICBnYWxsZXJ5LmRhdGE9W107CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGxldCBhbGxEYXRhPShhd2FpdCBnYWxsZXJ5LmdldEFsbFZhbGlkSW1ncygpKS5tYXAoaXRlbSA9PiBpdGVtLnNyYyk7CiAgICAgICAgICAgICAgICAgICAgYWxsRGF0YSA9IGFsbERhdGEuZmlsdGVyKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWxsRGF0YS5pbmRleE9mKGl0ZW0pID09PSBpbmRleDsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBkYXRhLmFsbCA9IGFsbERhdGE7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUlEOm1lc3NhZ2VJRCwKICAgICAgICAgICAgICAgICAgICAgICAgc3JjOmltZy5zcmMsCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6ZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZDonb3BlbicsCiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblR5cGU6YnV0dG9uVHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgdG86J3RvcCcsCiAgICAgICAgICAgICAgICAgICAgfSwnKicpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpZih0aGlzLm9wZW5JblRvcFdpbmRvdyAmJiBpc0ZyYW1lICYmIHRvcFdpbmRvd1ZhbGlkIT09ZmFsc2UgJiYgYnV0dG9uVHlwZSE9J21hZ25pZmllcicpewogICAgICAgICAgICAgICAgICAgIGlmKHRvcFdpbmRvd1ZhbGlkKXsKICAgICAgICAgICAgICAgICAgICAgICAgb3BlbkluVG9wKCk7CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7Ly/lhYjlj5Hmtojmga/pl67pl67pobblsYLnqpflj6PmmK/kuI3mmK/pnZ5mcmFtZXNldOeql+WPowogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUlEOm1lc3NhZ2VJRCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6J3RvcFdpbmRvd1ZhbGlkJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOid0b3AnLAogICAgICAgICAgICAgICAgICAgICAgICB9LCcqJyk7CgogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwdi10b3BXaW5kb3dWYWxpZCcsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3BXaW5kb3dWYWxpZD1lLmRldGFpbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRvcFdpbmRvd1ZhbGlkKXsvL+WmguaenOmhtuWxgueql+WPo+acieaViAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5JblRvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vcGVuKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9LHRydWUpOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuKCk7CiAgICAgICAgICAgICAgICB9OwoKCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9wZW46ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHN3aXRjaCh0aGlzLmJ1dHRvblR5cGUpewogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BvcHVwJzoKICAgICAgICAgICAgICAgICAgICAgICAgaWYodW5pcXVlSW1nV2luICYmIHVuaXF1ZUltZ1dpbi5zcmMgIT0gdGhpcy5kYXRhLnNyYyAmJiAoIXRoaXMuZGF0YS5zcmNzIHx8ICF0aGlzLmRhdGEuc3Jjcy5pbmNsdWRlcyh1bmlxdWVJbWdXaW4uc3JjKSkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlSW1nV2luLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF1bmlxdWVJbWdXaW4gfHwgdW5pcXVlSW1nV2luLnJlbW92ZWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLnNyYz10aGlzLmltZy5zcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWVJbWdXaW4gPSBuZXcgSW1nV2luZG93Qyh0aGlzLmltZywgdGhpcy5kYXRhLCBudWxsLCBudWxsLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdW5pcXVlSW1nV2luLmltZ1dpbmRvdy5jbGFzc0xpc3QuYWRkKCJwdi1waWMtd2luZG93LXRyYW5zaXRpb24tYWxsIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy91bmlxdWVJbWdXaW4uYmx1cih7dGFyZ2V0OnRoaXMuZGF0YS5pbWd9KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXVuaXF1ZUltZ1dpbi5sb2FkZWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocHJlZnMud2FpdEltZ0xvYWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXF1ZUltZ1dpbi5pbWdXaW5kb3cuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWVJbWdXaW4uaW1nV2luZG93LnN0eWxlLm9wYWNpdHkgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZWZzLmZsb2F0QmFyLmdsb2JhbGtleXMucHJldmlld0ZvbGxvd01vdXNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXF1ZUltZ1dpbi5mb2xsb3dQb3ModW5pcXVlSW1nV2luSW5pdFgsIHVuaXF1ZUltZ1dpbkluaXRZKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWVJbWdXaW4uaW5pdE1heFNpemUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlSW1nV2luLmNlbnRlcih0cnVlLHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjZW50ZXJJbnRlcnZhbCljbGVhckludGVydmFsKGNlbnRlckludGVydmFsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVySW50ZXJ2YWw9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF1bmlxdWVJbWdXaW4gfHwgdW5pcXVlSW1nV2luLnJlbW92ZWQgfHwgdW5pcXVlSW1nV2luLmxvYWRlZCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChjZW50ZXJJbnRlcnZhbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWVJbWdXaW4uY2VudGVyKHRydWUsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sMzAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlSW1nV2luLmltZ1dpbmRvdy5jbGFzc0xpc3QuYWRkKCJwcmV2aWV3Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2dhbGxlcnknOgogICAgICAgICAgICAgICAgICAgICAgICBpZighZ2FsbGVyeSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYWxsZXJ5PW5ldyBHYWxsZXJ5QygpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBnYWxsZXJ5LmxvYWQodGhpcy5kYXRhLHRoaXMuZnJvbSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbGxlcnkuY2hhbmdlTWluVmlldygpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdtYWduaWZpZXInOgogICAgICAgICAgICAgICAgICAgICAgICBuZXcgTWFnbmlmaWVyQyh0aGlzLmltZyx0aGlzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdkb3dubG9hZCc6CiAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkSW1nKHRoaXMuZGF0YS5zcmMgfHwgdGhpcy5kYXRhLmltZ1NyYywgKHRoaXMuZGF0YS5pbWcudGl0bGUgfHwgdGhpcy5kYXRhLmltZy5hbHQpLCBwcmVmcy5zYXZlTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgImNvcHkiOgogICAgICAgICAgICAgICAgICAgICAgICBfR01fc2V0Q2xpcGJvYXJkKHRoaXMuZGF0YS5zcmMgfHwgdGhpcy5kYXRhLmltZ1NyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgIm9wZW4iOgogICAgICAgICAgICAgICAgICAgICAgICBfR01fb3BlbkluVGFiKHRoaXMuZGF0YS5zcmMgfHwgdGhpcy5kYXRhLmltZ1NyYywge2FjdGl2ZTpmYWxzZX0pOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICJjb3B5SW1nIjoKICAgICAgICAgICAgICAgICAgICAgICAgY29weURhdGEodGhpcy5kYXRhLnNyYyB8fCB0aGlzLmRhdGEuaW1nU3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWN0dWFsJzoKICAgICAgICAgICAgICAgICAgICBjYXNlICdzZWFyY2gnOgogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2N1cnJlbnQnOgogICAgICAgICAgICAgICAgICAgIGNhc2UgJ29yaWdpbmFsJzovL29yaWdpbmFsIOaYr+S4uuS6huWFvOWuueS7peWJjeeahOinhOWImQogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmRhdGEuc3JjIT10aGlzLmltZy5zcmMpdGhpcy5kYXRhLnNyYz10aGlzLmltZy5zcmM7CiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBJbWdXaW5kb3dDKHRoaXMuaW1nLCB0aGlzLmRhdGEsIHRoaXMuYnV0dG9uVHlwZSA9PSAnYWN0dWFsJywgdGhpcy5pbml0UG9zIHx8IGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9LAogICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIGNvcHlEYXRhKHVybCkgewogICAgICAgICAgICBpZiAodHlwZW9mIENsaXBib2FyZEl0ZW0gIT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgIHVybFRvQmxvYih1cmwsIChibG9iLCBleHQpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoYmxvYikgewogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZShbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IENsaXBib2FyZEl0ZW0oewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbYmxvYi50eXBlXTogYmxvYgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgdHJ1ZSk7CiAgICAgICAgICAgIH0gZWxzZSBfR01fc2V0Q2xpcGJvYXJkKHVybCk7CiAgICAgICAgfQoKICAgICAgICAvL+W3peWFt+agjwogICAgICAgIGZ1bmN0aW9uIEZsb2F0QmFyQygpewogICAgICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICB9OwoKICAgICAgICBGbG9hdEJhckMucHJvdG90eXBlPXsKICAgICAgICAgICAgaW5pdDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdGhpcy5hZGRTdHlsZSgpOwogICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICAgICAgICBjb250YWluZXIuaWQ9J3B2LWZsb2F0LWJhci1jb250YWluZXInOwogICAgICAgICAgICAgICAgZ2V0Qm9keShkb2N1bWVudCkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTsKICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wO2k8NTtpKyspewogICAgICAgICAgICAgICAgICAgIGxldCBzcGFuQ2hpbGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgICAgICAgICAgIHNwYW5DaGlsZC5jbGFzc05hbWU9J3B2LWZsb2F0LWJhci1idXR0b24nOwogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzcGFuQ2hpbGQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLypjb250YWluZXIuaW5uZXJIVE1MPQogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZmxvYXQtYmFyLWJ1dHRvbiI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1mbG9hdC1iYXItYnV0dG9uIj48L3NwYW4+JysKICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9InB2LWZsb2F0LWJhci1idXR0b24iPjwvc3Bhbj4nKwogICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0icHYtZmxvYXQtYmFyLWJ1dHRvbiI+PC9zcGFuPicrCiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJwdi1mbG9hdC1iYXItYnV0dG9uIj48L3NwYW4+JzsqLwoKICAgICAgICAgICAgICAgIHZhciBidXR0b25zPXsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvbnM9YnV0dG9uczsKICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRyZW49Y29udGFpbmVyLmNoaWxkcmVuOwoKICAgICAgICAgICAgICAgIGFycmF5Rm4uZm9yRWFjaC5jYWxsKHRoaXMuY2hpbGRyZW4sZnVuY3Rpb24oY2hpbGQsaW5kZXgpewogICAgICAgICAgICAgICAgICAgIHZhciB0aXRsZU1hcD17CiAgICAgICAgICAgICAgICAgICAgICAgIGFjdHVhbDppMThuKCJhY3R1YWxCdG4iKS5yZXBsYWNlKC8gP1woQVwpLyxgICgke3ByZWZzLmZsb2F0QmFyLmtleXMuYWN0dWFsLnRvVXBwZXJDYXNlKCl9KWApLAogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2g6aTE4bigic2VhcmNoQnRuIikucmVwbGFjZSgvID9cKFNcKS8sYCAoJHtwcmVmcy5mbG9hdEJhci5rZXlzLnNlYXJjaC50b1VwcGVyQ2FzZSgpfSlgKSwKICAgICAgICAgICAgICAgICAgICAgICAgZ2FsbGVyeTppMThuKCJnYWxsZXJ5QnRuIikucmVwbGFjZSgvID9cKEdcKS8sYCAoJHtwcmVmcy5mbG9hdEJhci5rZXlzLmdhbGxlcnkudG9VcHBlckNhc2UoKX0pYCksCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQ6aTE4bigiY3VycmVudEJ0biIpLnJlcGxhY2UoLyA/XChDXCkvLGAgKCR7cHJlZnMuZmxvYXRCYXIua2V5cy5jdXJyZW50LnRvVXBwZXJDYXNlKCl9KWApLAogICAgICAgICAgICAgICAgICAgICAgICBtYWduaWZpZXI6aTE4bigibWFnbmlmaWVyQnRuIikucmVwbGFjZSgvID9cKE1cKS8sYCAoJHtwcmVmcy5mbG9hdEJhci5rZXlzLm1hZ25pZmllci50b1VwcGVyQ2FzZSgpfSlgKSwKICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWQ6aTE4bigiZG93bmxvYWQiKStgICgke3ByZWZzLmZsb2F0QmFyLmtleXMuZG93bmxvYWQudG9VcHBlckNhc2UoKX0pYCwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHZhciBidXR0b25OYW1lPXByZWZzLmZsb2F0QmFyLmJ1dG9uT3JkZXJbaW5kZXhdOwogICAgICAgICAgICAgICAgICAgIGlmKCFidXR0b25OYW1lKXsKICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQuc3R5bGUuZGlzcGxheT0ibm9uZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYnV0dG9uc1tidXR0b25OYW1lXT1jaGlsZDsKICAgICAgICAgICAgICAgICAgICBjaGlsZC50aXRsZT10aXRsZU1hcFtidXR0b25OYW1lXTsKICAgICAgICAgICAgICAgICAgICBjaGlsZC5jbGFzc0xpc3QuYWRkKCdwdi1mbG9hdC1iYXItYnV0dG9uLScgKyBidXR0b25OYW1lKTsKICAgICAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgICAgICB0aGlzLmZsb2F0QmFyPWNvbnRhaW5lcjsKCgogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgdmFyIGJ1dHRvblR5cGU7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldD1lLnRhcmdldDsKICAgICAgICAgICAgICAgICAgICBmb3IodmFyIHR5cGUgaW4gYnV0dG9ucyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFidXR0b25zLmhhc093blByb3BlcnR5KHR5cGUpKXJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0PT1idXR0b25zW3R5cGVdKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblR5cGU9dHlwZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgaWYoIWJ1dHRvblR5cGUpcmV0dXJuOwoKICAgICAgICAgICAgICAgICAgICBzZWxmLm9wZW4oZSxidXR0b25UeXBlKTsKICAgICAgICAgICAgICAgICAgICBzZWxmLmhpZGUoKTsKCiAgICAgICAgICAgICAgICB9LHRydWUpOwoKCiAgICAgICAgICAgICAgICBhZGRDdXNNb3VzZUV2ZW50KCdtb3VzZWxlYXZlJyxjb250YWluZXIsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuaGlkZVRpbWVyKTsKICAgICAgICAgICAgICAgICAgICBzZWxmLmhpZGVUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgIH0scHJlZnMuZmxvYXRCYXIuaGlkZURlbGF5KTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGFkZEN1c01vdXNlRXZlbnQoJ21vdXNlZW50ZXInLGNvbnRhaW5lcixmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5oaWRlVGltZXIpOwogICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChzZWxmLnNob3dUaW1lcik7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuZ2xvYmFyT3V0VGltZXIpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsSGFuZGxlcj10aGlzLnNjcm9sbEhhbmRsZXIuYmluZCh0aGlzKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYWRkU3R5bGU6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGlmIChGbG9hdEJhckMuc3R5bGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIUZsb2F0QmFyQy5zdHlsZS5wYXJlbnROb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEZsb2F0QmFyQy5zdHlsZSA9IF9HTV9hZGRTdHlsZShGbG9hdEJhckMuc3R5bGUuaW5uZXJUZXh0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgRmxvYXRCYXJDLnN0eWxlPV9HTV9hZGRTdHlsZSgnXAogICAgICAgICAgICAgICAgICAgICNwdi1mbG9hdC1iYXItY29udGFpbmVyIHtcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiBpbml0aWFsO1wKICAgICAgICAgICAgICAgICAgICB0b3A6IDBweDtcCiAgICAgICAgICAgICAgICAgICAgbGVmdDogMHB4O1wKICAgICAgICAgICAgICAgICAgICB6LWluZGV4OjIxNDc0ODM2NDA7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDVweDtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuMzU7XAogICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAwO1wKICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlLWluLW91dDtcCiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0O1wKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Om5vbmU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgI3B2LWZsb2F0LWJhci1jb250YWluZXI6aG92ZXIge1wKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgICNwdi1mbG9hdC1iYXItY29udGFpbmVyIC5wdi1mbG9hdC1iYXItYnV0dG9uIHtcCiAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246bWlkZGxlO1wKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxOHB4O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDE4cHg7XAogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7XAogICAgICAgICAgICAgICAgICAgIG1hcmdpbjowO1wKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XAogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1wKICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAxcHggMCAzcHggMHB4IHJnYmEoMCwwLDAsMC45KTtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQgY2VudGVyIG5vLXJlcGVhdDtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOjEwMCUgMTAwJTtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1vcmlnaW46IGNvbnRlbnQtYm94O1wKICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246IG1hcmdpbi1yaWdodCAwLjE1cyBlYXNlLWluLW91dCAsICB3aWR0aCAwLjE1cyBlYXNlLWluLW91dCAsICBoZWlnaHQgMC4xNXMgZWFzZS1pbi1vdXQgO1wKICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBtYXJnaW4tcmlnaHQgMC4xNXMgZWFzZS1pbi1vdXQgLCAgd2lkdGggMC4xNXMgZWFzZS1pbi1vdXQgLCAgaGVpZ2h0IDAuMTVzIGVhc2UtaW4tb3V0IDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAjcHYtZmxvYXQtYmFyLWNvbnRhaW5lciAucHYtZmxvYXQtYmFyLWJ1dHRvbjpub3QoOmxhc3QtY2hpbGQpe1wKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IC0xNHB4O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgICNwdi1mbG9hdC1iYXItY29udGFpbmVyIC5wdi1mbG9hdC1iYXItYnV0dG9uOmZpcnN0LWNoaWxkIHtcCiAgICAgICAgICAgICAgICAgICAgei1pbmRleDogNDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAjcHYtZmxvYXQtYmFyLWNvbnRhaW5lciAucHYtZmxvYXQtYmFyLWJ1dHRvbjpudGgtY2hpbGQoMikge1wKICAgICAgICAgICAgICAgICAgICB6LWluZGV4OiAzO1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgICNwdi1mbG9hdC1iYXItY29udGFpbmVyIC5wdi1mbG9hdC1iYXItYnV0dG9uOm50aC1jaGlsZCgzKSB7XAogICAgICAgICAgICAgICAgICAgIHotaW5kZXg6IDI7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgI3B2LWZsb2F0LWJhci1jb250YWluZXIgLnB2LWZsb2F0LWJhci1idXR0b246bGFzdC1jaGlsZCB7XAogICAgICAgICAgICAgICAgICAgIHotaW5kZXg6IDE7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgI3B2LWZsb2F0LWJhci1jb250YWluZXI6aG92ZXIgPiAucHYtZmxvYXQtYmFyLWJ1dHRvbiB7XAogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyNHB4O1wKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDI0cHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgI3B2LWZsb2F0LWJhci1jb250YWluZXI6aG92ZXIgPiAucHYtZmxvYXQtYmFyLWJ1dHRvbjpub3QoOmxhc3QtY2hpbGQpIHtcCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA0cHg7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgI3B2LWZsb2F0LWJhci1jb250YWluZXIgLnB2LWZsb2F0LWJhci1idXR0b24tYWN0dWFsIHtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTp1cmwoIicrIHByZWZzLmljb25zLmFjdHVhbCArJyIpIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAjcHYtZmxvYXQtYmFyLWNvbnRhaW5lciAucHYtZmxvYXQtYmFyLWJ1dHRvbi1zZWFyY2gge1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOnVybCgiJysgcHJlZnMuaWNvbnMuc2VhcmNoICsnIikhaW1wb3J0YW50O1wKICAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgICNwdi1mbG9hdC1iYXItY29udGFpbmVyIC5wdi1mbG9hdC1iYXItYnV0dG9uLWdhbGxlcnkge1wKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOnVybCgiJysgcHJlZnMuaWNvbnMuZ2FsbGVyeSArJyIpIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAjcHYtZmxvYXQtYmFyLWNvbnRhaW5lciAucHYtZmxvYXQtYmFyLWJ1dHRvbi1jdXJyZW50IHtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTp1cmwoIicrIHByZWZzLmljb25zLmN1cnJlbnQgKyciKSFpbXBvcnRhbnQ7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgI3B2LWZsb2F0LWJhci1jb250YWluZXIgLnB2LWZsb2F0LWJhci1idXR0b24tbWFnbmlmaWVyIHtcCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTp1cmwoIicrIHByZWZzLmljb25zLm1hZ25pZmllciArJyIpIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAjcHYtZmxvYXQtYmFyLWNvbnRhaW5lciAucHYtZmxvYXQtYmFyLWJ1dHRvbi1kb3dubG9hZCB7XAogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6dXJsKCInKyBwcmVmcy5pY29ucy5kb3dubG9hZCArJyIpIWltcG9ydGFudDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICAnKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3RhcnQ6ZnVuY3Rpb24oZGF0YSl7CgogICAgICAgICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS50eXBlID09ICJsaW5rIikgewogICAgICAgICAgICAgICAgICAgIGRhdGEuaGlkZSA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL+ivu+WPluS4reeahOWbvueJhyzkuI3mmL7npLrmta7liqjmoI8s6LCD5pW06K+75Y+W5Zu+5qCH55qE5L2N572uLgogICAgICAgICAgICAgICAgaWYoTG9hZGluZ0FuaW1DLmFsbC5maW5kKGZ1bmN0aW9uKGl0ZW0saW5kZXgsYXJyYXkpewogICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnNyYyA9PSBpdGVtLmRhdGEuc3JjIHx8IGRhdGEuaW1nID09IGl0ZW0uZGF0YS5pbWcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkpIHJldHVybiBmYWxzZTsKCgogICAgICAgICAgICAgICAgLy/ooqvmlL7lpKfplZznm6/kuIrnmoTlm77niYcs5LiN6KaB5pi+56S65rWu5Yqo5qCPLgogICAgICAgICAgICAgICAgaWYoTWFnbmlmaWVyQy5hbGwuZmluZChmdW5jdGlvbihpdGVtLGluZGV4LGFycmF5KXsKICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnNyYz09aXRlbS5kYXRhLnNyYyl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KSlyZXR1cm4gZmFsc2U7CgogICAgICAgICAgICAgICAgdmFyIHNlbGY9dGhpczsKICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhpZGVUaW1lcik7CgogICAgICAgICAgICAgICAgdmFyIGltZ091dEhhbmRsZXI9ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLGltZ091dEhhbmRsZXIsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuc2hvd1RpbWVyKTsKICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5oaWRlVGltZXIpOwogICAgICAgICAgICAgICAgICAgIHNlbGYuaGlkZVRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5oaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgfSxwcmVmcy5mbG9hdEJhci5oaWRlRGVsYXkpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5nbG9iYXJPdXRUaW1lcik7CiAgICAgICAgICAgICAgICB0aGlzLmdsb2Jhck91dFRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXsvL+eojeW+ruW7tuaXtuOAgumUmeW8gOeUseS6jmNzcyBob3Zlcuagt+W8j+WPkeeUn+eahG91dDsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsaW1nT3V0SGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgICAgIH0sMTUwKTsKCiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zaG93VGltZXIpOwogICAgICAgICAgICAgICAgc2VsZi5kYXRhPWRhdGE7CiAgICAgICAgICAgICAgICBpZiAoZGF0YS5oaWRlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbG9hdEJhci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZmxvYXRCYXIuc3R5bGUub3BhY2l0eSA9IDA7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoIXRoaXMuc2hvd24gfHwgc2VsZi5kYXRhLmltZyE9ZGF0YS5pbWcpewogICAgICAgICAgICAgICAgICAgIHRoaXMuZmxvYXRCYXIuc3R5bGUudHJhbnNpdGlvbj0idW5zZXQiOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZmxvYXRCYXIuc3R5bGUub3BhY2l0eT0wLjAxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5zaG93VGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvdygpOwogICAgICAgICAgICAgICAgfSxwcmVmcy5mbG9hdEJhci5zaG93RGVsYXkpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNldEJ1dHRvbjpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYodGhpcy5idXR0b25zWydhY3R1YWwnXSl7CiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5kYXRhLm5vQWN0dWFsKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXR0b25zWydhY3R1YWwnXS5zdHlsZS5kaXNwbGF5PSdub25lJzsKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXR0b25zWydhY3R1YWwnXS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnZGlzcGxheScpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKHRoaXMuYnV0dG9uc1snbWFnbmlmaWVyJ10pewogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuZGF0YS50eXBlICE9ICJmb3JjZSIgJiYgdGhpcy5kYXRhLmltZy5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09ICdJTUcnKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXR0b25zWydtYWduaWZpZXInXS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnZGlzcGxheScpOwogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvbnNbJ21hZ25pZmllciddLnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuaW1nLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgIT0gJ0lNRycpIHsKICAgICAgICAgICAgICAgICAgICAvL3RoaXMuYnV0dG9uc1snZ2FsbGVyeSddLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgLy90aGlzLmJ1dHRvbnNbJ2N1cnJlbnQnXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvL3RoaXMuYnV0dG9uc1snZ2FsbGVyeSddLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7CiAgICAgICAgICAgICAgICAgICAgLy90aGlzLmJ1dHRvbnNbJ2N1cnJlbnQnXS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnZGlzcGxheScpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXRQb3NpdGlvbjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAvL+WmguaenOWbvueJh+iiq+WIoOmZpOS6hu+8jOaIluiAhemakOiXj+S6huOAggogICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5pbWcub2Zmc2V0V2lkdGggPT0gMCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIHRhcmdldFBvc2kgPSBnZXRDb250ZW50Q2xpZW50UmVjdCh0aGlzLmRhdGEuaW1nKTsKICAgICAgICAgICAgICAgIHZhciBwYSA9IHRoaXMuZGF0YS5pbWcucGFyZW50Tm9kZSwgbGltaXRlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgaWYgKHBhICYmIHBhLnNjcm9sbEhlaWdodCA+IDMwICYmIHBhLnNjcm9sbFdpZHRoID4gMzApIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcGFQb3NpPXBhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICAgICAgICAgIGlmIChwYVBvc2kud2lkdGggPiAzMCAmJiBwYVBvc2kuaGVpZ2h0ID4gMzApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3R5bGUgPSB1bnNhZmVXaW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmRhdGEuaW1nKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0cml4ID0gbmV3IERPTU1hdHJpeFJlYWRPbmx5KHN0eWxlLnRyYW5zZm9ybSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0cmFuc2xhdGVYID0gbWF0cml4Lm00MSwgdHJhbnNsYXRlWSA9IG1hdHJpeC5tNDIsIHNjYWxlWCA9IG1hdHJpeC5tMTEsIHNjYWxlWSA9IG1hdHJpeC5tMjI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2xhdGVZIHx8IHRoaXMuZGF0YS5pbWcub2Zmc2V0VG9wICE9IDAgfHwgKHNjYWxlWSAmJiBzY2FsZVkgIT09IDEpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFQb3NpLmhlaWdodCA8IHRhcmdldFBvc2kuaGVpZ2h0IC0gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFBvc2kudG9wID0gcGFQb3NpLnRvcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNsYXRlWCB8fCB0aGlzLmRhdGEuaW1nLm9mZnNldExlZnQgIT0gMCB8fCAoc2NhbGVYICYmIHNjYWxlWCAhPT0gMSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYVBvc2kud2lkdGggPCB0YXJnZXRQb3NpLndpZHRoIC0gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFBvc2kubGVmdCA9IHBhUG9zaS5sZWZ0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcGEgPSB0aGlzLmRhdGEuaW1nLm9mZnNldFBhcmVudDsKICAgICAgICAgICAgICAgIGlmIChwYSAmJiAhbGltaXRlZCkgewogICAgICAgICAgICAgICAgICAgIHBhUG9zaT1wYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgICAgICAgICBpZiAocGFQb3NpLndpZHRoID4gMzAgJiYgcGFQb3NpLmhlaWdodCA+IDMwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlID0gdW5zYWZlV2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5kYXRhLmltZyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdHJpeCA9IG5ldyBET01NYXRyaXhSZWFkT25seShzdHlsZS50cmFuc2Zvcm0pOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdHJhbnNsYXRlWCA9IG1hdHJpeC5tNDEsIHRyYW5zbGF0ZVkgPSBtYXRyaXgubTQyLCBzY2FsZVggPSBtYXRyaXgubTExLCBzY2FsZVkgPSBtYXRyaXgubTIyOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNsYXRlWSB8fCB0aGlzLmRhdGEuaW1nLm9mZnNldFRvcCAhPSAwIHx8IChzY2FsZVkgJiYgc2NhbGVZICE9PSAxKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhUG9zaS5oZWlnaHQgPCB0YXJnZXRQb3NpLmhlaWdodCAtIDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRQb3NpLnRvcCA9IHBhUG9zaS50b3A7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zbGF0ZVggfHwgdGhpcy5kYXRhLmltZy5vZmZzZXRMZWZ0ICE9IDAgfHwgKHNjYWxlWCAmJiBzY2FsZVggIT09IDEpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFQb3NpLndpZHRoIDwgdGFyZ2V0UG9zaS53aWR0aCAtIDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRQb3NpLmxlZnQgPSBwYVBvc2kubGVmdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciB3aW5kb3dTaXplPWdldFdpbmRvd1NpemUoKTsKICAgICAgICAgICAgICAgIHZhciBpbWc9dGhpcy5kYXRhLmltZzsKCiAgICAgICAgICAgICAgICB2YXIgZmxvYXRCYXJQb3NpPXByZWZzLmZsb2F0QmFyLnBvc2l0aW9uLnRvTG93ZXJDYXNlKCkuc3BsaXQoL1xzKy8pOwoKICAgICAgICAgICAgICAgIHZhciBvZmZzZXRYPXByZWZzLmZsb2F0QmFyLm9mZnNldC54OwogICAgICAgICAgICAgICAgdmFyIG9mZnNldFk9cHJlZnMuZmxvYXRCYXIub2Zmc2V0Lnk7CgogICAgICAgICAgICAgICAgbGV0IGJvZHkgPSBnZXRCb2R5KGRvY3VtZW50KTsKICAgICAgICAgICAgICAgIGxldCBib2R5U3R5bGUgPSB1bnNhZmVXaW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShib2R5KTsKICAgICAgICAgICAgICAgIGxldCBvZmZzZXRQYXJlbnQsIGJvZHlQb3NpOwoKICAgICAgICAgICAgICAgIGlmIChib2R5U3R5bGUucG9zaXRpb24gPT09ICJzdGF0aWMiKSB7CiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0UGFyZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQgPSBib2R5OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYm9keVBvc2kgPSBvZmZzZXRQYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CgoKICAgICAgICAgICAgICAgIHZhciBzY3JvbGxlZD1nZXRTY3JvbGxlZChvZmZzZXRQYXJlbnQpOwogICAgICAgICAgICAgICAgdGFyZ2V0UG9zaS50b3AgPSB0YXJnZXRQb3NpLnRvcCAtIGJvZHlQb3NpLnRvcDsKICAgICAgICAgICAgICAgIHRhcmdldFBvc2kubGVmdCA9IHRhcmdldFBvc2kubGVmdCAtIGJvZHlQb3NpLmxlZnQ7CiAgICAgICAgICAgICAgICB0YXJnZXRQb3NpLmJvdHRvbSA9IGJvZHlQb3NpLmJvdHRvbSAtIHRhcmdldFBvc2kuYm90dG9tOwogICAgICAgICAgICAgICAgdGFyZ2V0UG9zaS5yaWdodCA9IGJvZHlQb3NpLnJpZ2h0IC0gdGFyZ2V0UG9zaS5yaWdodDsKCiAgICAgICAgICAgICAgICB2YXIgZmJzID0gdGhpcy5mbG9hdEJhci5zdHlsZTsKICAgICAgICAgICAgICAgIHZhciBzZXRQb3NpdGlvbiA9IHsKICAgICAgICAgICAgICAgICAgICB0b3A6ZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b3AgPSB0YXJnZXRQb3NpLnRvcDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvcCArIG9mZnNldFkgLSBzY3JvbGxlZC55IDwgMTApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IHNjcm9sbGVkLnk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRZID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmVmcy5mbG9hdEJhci5zdGF5T3V0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gdG9wICsgb2Zmc2V0WSAtIDEwIC0gcHJlZnMuZmxvYXRCYXIuc3RheU91dE9mZnNldFk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IHRvcCArIG9mZnNldFk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0UG9zaS5oZWlnaHQgPD0gNTApIHRvcCAtPSAxMDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmYnMuYm90dG9tID0gJ3Vuc2V0JzsKICAgICAgICAgICAgICAgICAgICAgICAgZmJzLnRvcCA9IHRvcCArICdweCc7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByaWdodDpmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gdGFyZ2V0UG9zaS5yaWdodDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZWZzLmZsb2F0QmFyLnN0YXlPdXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0gcmlnaHQgLSBvZmZzZXRYIC0gcHJlZnMuZmxvYXRCYXIuc3RheU91dE9mZnNldFg7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodCA9IHJpZ2h0IC0gb2Zmc2V0WDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0UG9zaS53aWR0aCA8PSA1MCkgcmlnaHQgKz0gMTA7CiAgICAgICAgICAgICAgICAgICAgICAgIGZicy5sZWZ0ID0gJ3Vuc2V0JzsKICAgICAgICAgICAgICAgICAgICAgICAgZmJzLnJpZ2h0ID0gcmlnaHQgKyAncHgnOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYm90dG9tOmZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm90dG9tID0gdGFyZ2V0UG9zaS5ib3R0b207CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmVmcy5mbG9hdEJhci5zdGF5T3V0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3R0b20gPSBib3R0b20gLSBvZmZzZXRZIC0gNDAgLSBwcmVmcy5mbG9hdEJhci5zdGF5T3V0T2Zmc2V0WTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbSA9IGJvdHRvbSAtIG9mZnNldFkgLSAzMDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0UG9zaS5oZWlnaHQgPD0gNTApIGJvdHRvbSArPSAxMDsKICAgICAgICAgICAgICAgICAgICAgICAgZmJzLnRvcCA9ICd1bnNldCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGZicy5ib3R0b20gPSBib3R0b20gKyAncHgnOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgbGVmdDpmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSB0YXJnZXRQb3NpLmxlZnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZWZ0ICsgb2Zmc2V0WCAtIHNjcm9sbGVkLnggPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gc2Nyb2xsZWQueDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFggPSAwOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZWZzLmZsb2F0QmFyLnN0YXlPdXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gbGVmdCArIG9mZnNldFggLSBwcmVmcy5mbG9hdEJhci5zdGF5T3V0T2Zmc2V0WDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IGxlZnQgKyBvZmZzZXRYOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFBvc2kud2lkdGggPD0gNTApIGxlZnQgLT0gMTA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZmJzLnJpZ2h0ID0gJ3Vuc2V0JzsKICAgICAgICAgICAgICAgICAgICAgICAgZmJzLmxlZnQgPSBsZWZ0ICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGNlbnRlcjpmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSB0YXJnZXRQb3NpLmxlZnQgKyBvZmZzZXRYOwogICAgICAgICAgICAgICAgICAgICAgICBmYnMubGVmdCA9IGxlZnQgKyB0YXJnZXRQb3NpLndpZHRoIC8gMiArICdweCc7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBoaWRlOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b3A9dGFyZ2V0UG9zaS50b3A7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZWZ0PXRhcmdldFBvc2kubGVmdDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocHJlZnMuZmxvYXRCYXIuc3RheU91dCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A9dG9wICsgb2Zmc2V0WSAtIDEwIC0gcHJlZnMuZmxvYXRCYXIuc3RheU91dE9mZnNldFk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0PWxlZnQgKyBvZmZzZXRYIC0gcHJlZnMuZmxvYXRCYXIuc3RheU91dE9mZnNldFg7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wPXRvcCArIG9mZnNldFk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0PWxlZnQgKyBvZmZzZXRYOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldFBvc2kuaGVpZ2h0PD01MCl0b3AtPTEwOwogICAgICAgICAgICAgICAgICAgICAgICBmYnMudG9wPXRvcCArICdweCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldFBvc2kud2lkdGg8PTUwKWxlZnQtPTEwOwogICAgICAgICAgICAgICAgICAgICAgICBmYnMubGVmdD1sZWZ0ICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBzZXRQb3NpdGlvbltmbG9hdEJhclBvc2lbMF1dKCk7CiAgICAgICAgICAgICAgICBpZihmbG9hdEJhclBvc2kubGVuZ3RoPjEpewogICAgICAgICAgICAgICAgICAgIHNldFBvc2l0aW9uW2Zsb2F0QmFyUG9zaVsxXV0oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2hvdzpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYodGhpcy5zZXRQb3NpdGlvbigpKXJldHVybjsKICAgICAgICAgICAgICAgIHRoaXMuc2hvd249dHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuYWRkU3R5bGUoKTsKICAgICAgICAgICAgICAgIHRoaXMuc2V0QnV0dG9uKCk7CiAgICAgICAgICAgICAgICB0aGlzLmZsb2F0QmFyLnN0eWxlLnRyYW5zaXRpb249IiI7CiAgICAgICAgICAgICAgICB0aGlzLmZsb2F0QmFyLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsKICAgICAgICAgICAgICAgIHRoaXMuZmxvYXRCYXIuc3R5bGUub3BhY2l0eT0iIjsKICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhpZGVUaW1lcik7CiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJyx0aGlzLl9zY3JvbGxIYW5kbGVyLHRydWUpOwogICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsdGhpcy5fc2Nyb2xsSGFuZGxlcix0cnVlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaGlkZTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2hvd1RpbWVyKTsKICAgICAgICAgICAgICAgIHRoaXMuZmxvYXRCYXIuc3R5bGUub3BhY2l0eT0wLjAxOwogICAgICAgICAgICAgICAgdGhpcy5zaG93bj1mYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuZmxvYXRCYXIuc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJyx0aGlzLl9zY3JvbGxIYW5kbGVyLHRydWUpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzY3JvbGxIYW5kbGVyOmZ1bmN0aW9uKCl7Ly/mm7TmlrDlnZDmoIcKICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNjcm9sbFVwZGF0ZVRpbWVyKTsKICAgICAgICAgICAgICAgIHZhciBzZWxmPXRoaXM7CiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFVwZGF0ZVRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICBzZWxmLnNldFBvc2l0aW9uKCk7CiAgICAgICAgICAgICAgICB9LDEwMCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9wZW46YXN5bmMgZnVuY3Rpb24oZSxidXR0b25UeXBlKXsKICAgICAgICAgICAgICAgIGlmICghdGhpcy5zaG93biB8fCAhdGhpcy5kYXRhIHx8ICF0aGlzLmRhdGEuaW1nU3JjKSByZXR1cm47CiAgICAgICAgICAgICAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCkpIHJldHVybjsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuaW1nU3JjLmluZGV4T2YoImJsb2I6IikgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBsZXQgYmxvYlVybCA9IGF3YWl0IGdldEJhc2U2NEZyb21CbG9iVXJsKHRoaXMuZGF0YS5pbWdTcmMpOwogICAgICAgICAgICAgICAgICAgIGlmIChibG9iVXJsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzYW1lU3JjID0gKHRoaXMuZGF0YS5zcmMgPT09IHRoaXMuZGF0YS5pbWdTcmMpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEuaW1nU3JjID0gYmxvYlVybDsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLnNyY3MgPSBbdGhpcy5kYXRhLmltZ1NyY107CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzYW1lU3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEuc3JjID0gYmxvYlVybDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChidXR0b25UeXBlID09PSAnZG93bmxvYWQnICYmICF0aGlzLmRhdGEueGhyKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGUuY3RybEtleSB8fCBlLm1ldGFLZXkgfHwgZS5hbHRLZXkgfHwgZS5zaGlmdEtleSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGRvd25sb2FkSW1nKHRoaXMuZGF0YS5zcmMgfHwgdGhpcy5kYXRhLmltZ1NyYywgKHRoaXMuZGF0YS5pbWcudGl0bGUgfHwgdGhpcy5kYXRhLmltZy5hbHQpLCBwcmVmcy5zYXZlTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICBsZXQgYWx0S2V5ID0gZS5hbHRLZXk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGUudHlwZSAhPSAiY2xpY2siICYmIHByZWZzLmZsb2F0QmFyLmdsb2JhbGtleXMuaW52ZXJ0SW5pdFNob3cgJiYgcHJlZnMuZmxvYXRCYXIuZ2xvYmFsa2V5cy5hbHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWx0S2V5ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGxldCBhZGRpdGlvbkVuYWJsZSA9IHByZWZzLmZsb2F0QmFyLmludmVydEFkZGl0aW9uYWxGZWF0dXJlID8gIWFsdEtleSA6IGFsdEtleTsKICAgICAgICAgICAgICAgICAgICBpZiAoYWRkaXRpb25FbmFibGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNyYywgZmVhdHVyZSA9IHByZWZzLmZsb2F0QmFyLmFkZGl0aW9uYWxGZWF0dXJlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uVHlwZSA9PSAnYWN0dWFsJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS54aHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25UeXBlID0gZmVhdHVyZSB8fCAib3BlbiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA9IHRoaXMuZGF0YS5zcmMgfHwgdGhpcy5kYXRhLmltZ1NyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChidXR0b25UeXBlID09ICdjdXJyZW50JykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gdGhpcy5kYXRhLmltZ1NyYzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2goZmVhdHVyZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImNvcHkiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfR01fc2V0Q2xpcGJvYXJkKHNyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIm9wZW4iOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfR01fb3BlbkluVGFiKHNyYywge2FjdGl2ZTpmYWxzZX0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJjb3B5SW1nIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weURhdGEoc3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgd2FpdEltZ0xvYWQgPSBlICYmIGUuY3RybEtleSA/ICFwcmVmcy53YWl0SW1nTG9hZCA6IHByZWZzLndhaXRJbWdMb2FkOyAvL+aMieS9j2N0cmzlj5blj43lkJHlgLwKICAgICAgICAgICAgICAgIHZhciBvcGVuSW5Ub3BXaW5kb3cgPSBlICYmIGUuc2hpZnRLZXkgPyAhcHJlZnMuZnJhbWVzUGljT3BlbkluVG9wV2luZG93IDogcHJlZnMuZnJhbWVzUGljT3BlbkluVG9wV2luZG93OyAvL+aMieS9j3NoaWZ05Y+W5Y+N5ZCR5YC8CiAgICAgICAgICAgICAgICBpZiAoIXdhaXRJbWdMb2FkICYmIGJ1dHRvblR5cGUgPT0gJ21hZ25pZmllcicgJiYgIWVudmlyLmNocm9tZSkgeyAvL+mdnmNocm9tZeeahGJhY2tncm91bmQtaW1hZ2XpnIDopoHlhajpg6jovb3lhaXlkI7miY3og73mmL7npLrlh7rmnaUKICAgICAgICAgICAgICAgICAgICB3YWl0SW1nTG9hZCA9IHRydWU7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgbmV3IExvYWRpbmdBbmltQyh0aGlzLmRhdGEsIGJ1dHRvblR5cGUsIHdhaXRJbWdMb2FkLCBvcGVuSW5Ub3BXaW5kb3cpOwogICAgICAgICAgICAgICAgaWYgKGUudHlwZSA9PSAiY2xpY2siKSB7CiAgICAgICAgICAgICAgICAgICAgZmxvYXRCYXIuaGlkZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB1cGRhdGU6ZnVuY3Rpb24oaW1nLHNyYyl7CiAgICAgICAgICAgICAgICBpZih0aGlzLmRhdGEuaW1nPT1pbWcgJiYgdGhpcy5kYXRhLmltZ1NyYyE9c3JjKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEuc3JjPXNyYzsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEubm9BY3R1YWw9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLnR5cGU9InJ1bGUiOwogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuc2hvd24pewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEJ1dHRvbigpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIC8qKgogICAgICAgICog5o+Q5Y+W6IeqIE1vdXNlb3ZlciBQb3B1cCBJbWFnZSBWaWV3ZXIg6ISa5pys77yM55So5LqOIHhociDmlrnlvI/nmoTojrflj5YKICAgICAgICAqLwogICAgICAgIHZhciB4aHJMb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBfID0ge307CgogICAgICAgICAgICB2YXIgY2FjaGVzID0ge307CiAgICAgICAgICAgIHZhciBoYW5kbGVFcnJvcjsKICAgICAgICAgICAgdmFyIGNhY2hlTnVtID0gMDsKICAgICAgICAgICAgdmFyIHhocjsKICAgICAgICAgICAgdmFyIHVzZUZldGNoID0gZmFsc2U7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgKiBAcGFyYW0gIHEgIOWbvueJh+eahOmAieaLqeWZqOaIluWHveaVsAogICAgICAgICAgICAqIEBwYXJhbSAgYyAg5Zu+54mH6K+05piO55qE6YCJ5oup5Zmo5oiW5Ye95pWwCiAgICAgICAgICAgICovCiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlUGFnZSh1cmwsIHEsIGMsIHBvc3QsIGNiLCBoZWFkZXJzLCBhZnRlcikgewogICAgICAgICAgICAgICAgZG93bmxvYWRQYWdlKHVybCwgcG9zdCwgaGVhZGVycywgYXN5bmMgZnVuY3Rpb24oaHRtbCkgewogICAgICAgICAgICAgICAgICAgIHZhciBpdXJsLCBpdXJscyA9IFtdLCBjYXAsIGNhcHMsIGRvYyA9IGNyZWF0ZURvYyhodG1sKTsKCiAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIHEgPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICBpdXJsID0gYXdhaXQgcShodG1sLCBkb2MsIHVybCArIChwb3N0ID8gYCNweyR7cG9zdH19YCA6ICIiKSwgeGhyLCBHTV9mZXRjaCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdXJsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpdXJsLnVybCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcCA9IGl1cmwuY2FwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl1cmwgPSBpdXJsLnVybDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl1cmwpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXVybCA9IGl1cmwubWFwKHUgPT4gYWZ0ZXIodSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl1cmxzID0gaXVybDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdXJsID0gaXVybHNbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaXVybCA9IGFmdGVyKGl1cmwpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlub2RlcyA9IGZpbmROb2RlcyhxLCBkb2MpOwogICAgICAgICAgICAgICAgICAgICAgICBpbm9kZXMuZm9yRWFjaChmdW5jdGlvbihub2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdXJscy5wdXNoKGFmdGVyKGZpbmRGaWxlKG5vZGUsIHVybCkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGl1cmwgPSBpdXJsc1swXTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBjID09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcCA9IGF3YWl0IGMoaHRtbCwgZG9jLCB1cmwsIHhocik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY25vZGVzID0gZmluZE5vZGVzKGMsIGRvYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXAgPSBjbm9kZXMubGVuZ3RoID8gZmluZENhcHRpb24oY25vZGVzWzBdKSA6IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNhcCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHMgPSBjYXA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXAgPSBjYXBzWzBdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvLyDnvJPlrZgKICAgICAgICAgICAgICAgICAgICBpZiAoaXVybCkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2FjaGVEYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXVybDogaXVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl1cmxzOiBpdXJscywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcDogY2FwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwczogY2FwcwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBjYWNoZXNbdXJsICsgKHBvc3QgfHwgIiIpXSA9IGNhY2hlRGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlTnVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnNldExpc3RJdGVtKCJ4aHJDYWNoZSIsIHVybCArIChwb3N0IHx8ICIiKSwgY2FjaGVEYXRhLCBjYWNoZU51bSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGNiKGl1cmwsIGl1cmxzLCBjYXAsIGNhcHMpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIGRvd25sb2FkUGFnZSh1cmwsIHBvc3QsIGhlYWRlcnMsIGNiKSB7CiAgICAgICAgICAgICAgICB2YXIgb3B0cyA9IHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXEuc3RhdHVzID4gMzk5KSB0aHJvdyAnU2VydmVyIGVycm9yOiAnICsgcmVxLnN0YXR1czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgY2IocmVxLnJlc3BvbnNlVGV4dCwgcmVxLmZpbmFsVXJsIHx8IHVybCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdXNlRmV0Y2ggJiYgcmVxLnJlc3BvbnNlSGVhZGVycy5pbmRleE9mKCJjbG91ZGZsYXJlIikgIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VGZXRjaCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvd25sb2FkUGFnZSh1cmwsIHBvc3QsIGhlYWRlcnMsIGNiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yKGV4KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgb25lcnJvcjogaGFuZGxlRXJyb3IKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBpZiAocG9zdCkgewogICAgICAgICAgICAgICAgICAgIG9wdHMubWV0aG9kID0gJ1BPU1QnOwogICAgICAgICAgICAgICAgICAgIG9wdHMuZGF0YSA9IHBvc3Q7CiAgICAgICAgICAgICAgICAgICAgb3B0cy5oZWFkZXJzID0geydDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLCdSZWZlcmVyJzp1cmx9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGhlYWRlcnMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGhlYWRlcnMgPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0gYXdhaXQgaGVhZGVycyh1cmwgKyAocG9zdCA/IGAjcHske3Bvc3R9fWAgOiAiIiksIHhociwgZ2V0Q29va2llKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgb3B0cy5oZWFkZXJzID0gaGVhZGVyczsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAodXNlRmV0Y2gpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgZmV0Y2hPcHRpb24gPSB7bWV0aG9kOiBvcHRzLm1ldGhvZCB8fCAnR0VUJywgaGVhZGVyczogb3B0cy5oZWFkZXJzfTsKICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5tZXRob2QgJiYgb3B0cy5tZXRob2QgIT0gJ0dFVCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hPcHRpb24uYm9keSA9IG9wdHMuZGF0YSB8fCAnJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZmV0Y2gob3B0cy51cmwsIGZldGNoT3B0aW9uKS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLnRleHQoKSkudGhlbihkYXRhID0+IHtvcHRzLm9ubG9hZCh7cmVzcG9uc2VUZXh0OiBkYXRhfSl9KS5jYXRjaChlID0+IG9wdHMub25lcnJvcihlKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIF9HTV94bWxodHRwUmVxdWVzdChvcHRzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gY3JlYXRlRG9jKHRleHQpIHsKICAgICAgICAgICAgICAgIHZhciBkb2MgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoJ1BpY1ZpZXdlckNFJyk7CiAgICAgICAgICAgICAgICBkb2MuZG9jdW1lbnRFbGVtZW50LmlubmVySFRNTCA9IHRleHQ7CiAgICAgICAgICAgICAgICByZXR1cm4gZG9jOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBmaW5kTm9kZXMocSwgZG9jKSB7CiAgICAgICAgICAgICAgICB2YXIgbm9kZXMgPSBbXSwKICAgICAgICAgICAgICAgICAgICBub2RlOwogICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHEpKSBxID0gW3FdOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBub2RlID0gcXMocVtpXSwgZG9jKTsKICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSAmJiBub2RlLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwobm9kZSwgbiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2Rlcy5wdXNoKG4pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZXM7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGZpbmRGaWxlKG4sIHVybCkgewogICAgICAgICAgICAgICAgcHJldHJlYXRtZW50KG4sIHRydWUpOwogICAgICAgICAgICAgICAgdmFyIHBhdGggPSAobi5kYXRhc2V0ICYmIG4uZGF0YXNldC5zcmMpIHx8IG4uc3JjIHx8IG4uaHJlZiB8fCAobi5jaGlsZHJlbiAmJiBuLmNoaWxkcmVuWzBdICYmICBuLmNoaWxkcmVuWzBdLnNyYyk7CiAgICAgICAgICAgICAgICBpZiAoL152aWRlbyQvaS50ZXN0KG4ubm9kZU5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgcGF0aCA9ICJ2aWRlbzoiICsgcGF0aDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoL15hdWRpbyQvaS50ZXN0KG4ubm9kZU5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgcGF0aCA9ICJhdWRpbzoiICsgcGF0aDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGF0aC5iYXNlVmFsKSBwYXRoID0gcGF0aC5iYXNlVmFsOwogICAgICAgICAgICAgICAgcmV0dXJuIHBhdGggPyBwYXRoLnRyaW0oKSA6IGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBmaW5kQ2FwdGlvbihuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbi5nZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnKSB8fCBuLmdldEF0dHJpYnV0ZSgndGl0bGUnKSB8fCBuLnRleHRDb250ZW50OwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBxcyhzLCBuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbi5xdWVyeVNlbGVjdG9yQWxsKHMpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfLmxvYWQgPSBmdW5jdGlvbihvcHQpIHsKICAgICAgICAgICAgICAgIHhociA9IG9wdC54aHI7CiAgICAgICAgICAgICAgICB2YXIgaW5mbyA9IGNhY2hlc1tvcHQudXJsXSB8fCBzdG9yYWdlLmdldExpc3RJdGVtKCJ4aHJDYWNoZSIsIG9wdC51cmwpOwogICAgICAgICAgICAgICAgY2FjaGVOdW0gPSB4aHIuY2FjaGVOdW0gfHwgMDsKICAgICAgICAgICAgICAgIGlmIChpbmZvKSB7CiAgICAgICAgICAgICAgICAgICAgb3B0LmNiKGluZm8uaXVybCwgaW5mby5pdXJscywgaW5mby5jYXAsIGluZm8uY2Fwcyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yID0gb3B0Lm9uZXJyb3IgfHwgZnVuY3Rpb24oKSB7fTsKICAgICAgICAgICAgICAgIGxldCBwb3N0UGFyYW1zID0gb3B0LnVybC5tYXRjaCgvI3B7KC4qKX0kLyk7CiAgICAgICAgICAgICAgICBpZiAoIW9wdC5wb3N0ICYmIHBvc3RQYXJhbXMpIHsKICAgICAgICAgICAgICAgICAgICBvcHQucG9zdCA9IHBvc3RQYXJhbXNbMV07CiAgICAgICAgICAgICAgICAgICAgb3B0LnVybCA9IG9wdC51cmwucmVwbGFjZSgvI3B7LiovLCAiIik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcGFyc2VQYWdlKG9wdC51cmwsIHhoci5xdWVyeSB8fCB4aHIucSwgeGhyLmNhcHRpb24gfHwgeGhyLmMsIG9wdC5wb3N0LCBvcHQuY2IsIHhoci5oZWFkZXJzLCB4aHIuYWZ0ZXIpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgcmV0dXJuIF87CiAgICAgICAgfSgpOwoKCiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLSBydW4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBmdW5jdGlvbiBwcmV0cmVhdG1lbnQoaW1nLCBmZXRjaEltZykgewogICAgICAgICAgICBpZiAoaW1nLnJlbW92ZUF0dHJpYnV0ZSkgaW1nLnJlbW92ZUF0dHJpYnV0ZSgibG9hZGluZyIpOwogICAgICAgICAgICBpZiAoaW1nLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgIT0gIklNRyIgfHwgKCFmZXRjaEltZyAmJiBpbWcuc3JjICYmICFpbWcuc3Jjc2V0ICYmICEvXmRhdGEvLnRlc3QoaW1nLnNyYykpKSByZXR1cm47CiAgICAgICAgICAgIGlmIChpbWcuc3JjICYmICEvKF5kYXRhfGxvYWRpbmd8bGF6eSkvLnRlc3QoaW1nLnNyYykpIHJldHVybjsKICAgICAgICAgICAgbGV0IHNyYzsKICAgICAgICAgICAgdHBydWxlcy5maW5kKGZ1bmN0aW9uKHJ1bGUsIGluZGV4LCBhcnJheSkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzcmMgPSBydWxlLmNhbGwoaW1nKTsKICAgICAgICAgICAgICAgICAgICBpZiAoc3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgZGVidWcoZXJyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChzcmMpIHsKICAgICAgICAgICAgICAgIGltZy5zcmMgPSBzcmM7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGZpbmRQaWMoaW1nKXsKICAgICAgICAgICAgdmFyIGltZ1BOPWltZzsKICAgICAgICAgICAgdmFyIGltZ1BBLGltZ1BFPVtdOwogICAgICAgICAgICB3aGlsZShpbWdQTj1pbWdQTi5wYXJlbnROb2RlIHx8IGltZ1BOLmhvc3QpewogICAgICAgICAgICAgICAgaWYoaW1nUE4ubm9kZU5hbWUudG9VcHBlckNhc2UoKT09J0EnKXsKICAgICAgICAgICAgICAgICAgICBpbWdQQT1pbWdQTjsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpbWdQTj1pbWc7CiAgICAgICAgICAgIHdoaWxlKGltZ1BOPWltZ1BOLnBhcmVudE5vZGUgfHwgaW1nUE4uaG9zdCl7CiAgICAgICAgICAgICAgICBpZihpbWdQTi5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpPT0nQk9EWScpewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgaW1nUEUucHVzaChpbWdQTik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBpUEFTcmM9aW1nUEE/IGltZ1BBLmhyZWYgOiAnJzsKICAgICAgICAgICAgLy9iYXNlNjTlrZfnrKbkuLLov4fplb/lr7zoh7TmraPliJnljLnphY3ljaHmrbvmtY/op4jlmagKICAgICAgICAgICAgdmFyIGJhc2U2NEltZz0vXmRhdGE6L2kudGVzdChpbWcuc3JjKTsKICAgICAgICAgICAgdmFyIHNyYywgLy8g5aSn5Zu+5Zyw5Z2ACiAgICAgICAgICAgICAgICBzcmNzLCAvLyDlpIfnlKjnmoTlpKflm77lnLDlnYAKICAgICAgICAgICAgICAgIHR5cGUsIC8vIOexu+WIqwogICAgICAgICAgICAgICAgbm9BY3R1YWwgPSBmYWxzZSwgLy/msqHmnInljp/lm74KICAgICAgICAgICAgICAgIGltZ1NyYyA9IGltZy5jdXJyZW50U3JjfHxpbWcuc3JjfHxpbWcuZGF0YXNldC5sYXp5U3JjLCAvLyBpbWcg6IqC54K555qEIHNyYwogICAgICAgICAgICAgICAgeGhyLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb247IC8vIOWbvueJh+eahOazqOmHigogICAgICAgICAgICB2YXIgaW1nQ1N0eWxlID0gdW5zYWZlV2luZG93LmdldENvbXB1dGVkU3R5bGUoaW1nKTsKICAgICAgICAgICAgaWYgKC9ebGluayQvaS50ZXN0KGltZy5ub2RlTmFtZSkpIHsKICAgICAgICAgICAgICAgIGltZ0NTdHlsZSA9IHtoZWlnaHQ6NjQsIHdpZHRoOjY0fTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIS9JTUcvaS50ZXN0KGltZy5ub2RlTmFtZSkgJiYgaW1nQ1N0eWxlICYmIGltZ0NTdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgJiYgaW1nQ1N0eWxlLmJhY2tncm91bmRJbWFnZSAhPSAibm9uZSIpIHsKICAgICAgICAgICAgICAgIGxldCBzaCA9IGltZ0NTdHlsZS5oZWlnaHQsIHN3ID0gaW1nQ1N0eWxlLndpZHRoOwogICAgICAgICAgICAgICAgaWYgKCFpbWcub2Zmc2V0V2lkdGgpIHN3ID0gMTA7CiAgICAgICAgICAgICAgICBpZiAoIWltZy5vZmZzZXRIZWlnaHQpIHNoID0gMTA7CiAgICAgICAgICAgICAgICBpZiAoaW1nQ1N0eWxlLmJhY2tncm91bmRSZXBlYXRYID09ICJyZXBlYXQiKSB7CiAgICAgICAgICAgICAgICAgICAgc3cgPSAxMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChpbWdDU3R5bGUuYmFja2dyb3VuZFJlcGVhdFkgPT0gInJlcGVhdCIpIHsKICAgICAgICAgICAgICAgICAgICBzaCA9IDEwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaW1nQ1N0eWxlID0ge2hlaWdodDpzaCwgd2lkdGg6c3d9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBpbWdDUyA9IHsKICAgICAgICAgICAgICAgIGg6IHBhcnNlRmxvYXQoaW1nQ1N0eWxlLmhlaWdodCkgfHwgaW1nLmhlaWdodCB8fCBpbWcub2Zmc2V0SGVpZ2h0LAogICAgICAgICAgICAgICAgdzogcGFyc2VGbG9hdChpbWdDU3R5bGUud2lkdGgpIHx8IGltZy53aWR0aCB8fCBpbWcub2Zmc2V0V2lkdGgsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmIChpbWdDUy5oID09PSAwICYmIGltZ0NTLncgPT09IDApIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW1nUEUubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaW1nUEVbaV0ub2Zmc2V0SGVpZ2h0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGltZ0NTID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaDogaW1nUEVbaV0ub2Zmc2V0SGVpZ2h0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdzogaW1nUEVbaV0ub2Zmc2V0V2lkdGgKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBpbWdBUz17Ly/lrp7pmYXlsLrlr7jjgIIKICAgICAgICAgICAgICAgIGg6aW1nLm5hdHVyYWxIZWlnaHQgPiAxID8gaW1nLm5hdHVyYWxIZWlnaHQgOiBpbWdDUy5oLAogICAgICAgICAgICAgICAgdzppbWcubmF0dXJhbFdpZHRoID4gMSA/IGltZy5uYXR1cmFsV2lkdGggOiBpbWdDUy53LAogICAgICAgICAgICB9OwogICAgICAgICAgICBpZighc3JjICYmIG1hdGNoZWRSdWxlLnJ1bGVzLmxlbmd0aD4wKXsvLyDpgJrov4fpq5jnuqfop4TliJnojrflj5YuCiAgICAgICAgICAgICAgICAvLyDmjpLpmaQKICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICBsZXQgbmV3U3JjPW1hdGNoZWRSdWxlLmdldEltYWdlKGltZyxpbWdQQSxpbWdQRSk7CiAgICAgICAgICAgICAgICAgICAgaWYobmV3U3JjICYmIGltZ1NyYyE9bmV3U3JjKSBzcmM9bmV3U3JjOwogICAgICAgICAgICAgICAgfWNhdGNoKGVycil7CiAgICAgICAgICAgICAgICAgICAgdGhyb3dFcnJvckluZm8oZXJyKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZihzcmMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzcmMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyY3MgPSBzcmM7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA9IHNyY3Muc2hpZnQoKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHR5cGUgPSAncnVsZSc7CiAgICAgICAgICAgICAgICAgICAgeGhyID0gbWF0Y2hlZFJ1bGUueGhyOwoKICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZFJ1bGUubGF6eUF0dHIpIHsgLy8g55Sx5LqO6YeH55So5LqG5bu26L+f5Yqg6L295oqA5pyv77yM5omA5Lul5Zu+54mH5Y+v6IO95Li6IGxvYWRpbmcuZ2lmCiAgICAgICAgICAgICAgICAgICAgICAgIGltZ1NyYyA9IGltZy5nZXRBdHRyaWJ1dGUobWF0Y2hlZFJ1bGUubGF6eUF0dHIpIHx8IGltZy5zcmM7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZFJ1bGUuZGVzY3JpcHRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRlc2MgPSBtYXRjaGVkUnVsZS5kZXNjcmlwdGlvbiwgYXR0cjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGVzYykgJiYgZGVzYy5sZW5ndGggPT09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHIgPSBkZXNjWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzYyA9IGRlc2NbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBnZXRFbGVtZW50TWl4KGRlc2MsIGltZyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGF0dHIgPyBub2RlLmdldEF0dHJpYnV0ZShhdHRyKSA6IChub2RlLmdldEF0dHJpYnV0ZSgndGl0bGUnKSB8fCBub2RlLnRleHRDb250ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoL15JTUckL2kudGVzdChpbWcubm9kZU5hbWUpICYmICFzcmMgJiYgaVBBU3JjKXsvL+mTvuaOpeWPr+iDveaYr+S4gOW8oOWbvueJhy4uLgogICAgICAgICAgICAgICAgaWYoaVBBU3JjIT1pbWcuc3JjICYmIGltYWdlUmVnLnRlc3QoaVBBU3JjKSl7CiAgICAgICAgICAgICAgICAgICAgc3JjPWlQQVNyYzsKICAgICAgICAgICAgICAgICAgICBpZiAoL1smXD9ddXJsXD0vLnRlc3Qoc3JjKSkgewogICAgICAgICAgICAgICAgICAgICAgICBzcmMgPSBzcmMucmVwbGFjZSgvLipbJlw/XXVybFw9KC4qPykoJi4qfCQpLywgIiQxIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmMgPSBkZWNvZGVVUklDb21wb25lbnQoc3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC9bJlw/XWh0dHBzPzovLnRlc3Qoc3JjKSkgewogICAgICAgICAgICAgICAgICAgICAgICBzcmMgPSBzcmMucmVwbGFjZSgvLipbJlw/XShodHRwcz86KS8sICIkMSIpOwogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gZGVjb2RlVVJJQ29tcG9uZW50KHNyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoc3JjKXR5cGU9J3RwUnVsZSc7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKCFzcmMgJiYgIWJhc2U2NEltZyl7Ly/pgY3ljobpgJrphY3op4TliJkKICAgICAgICAgICAgICAgIHRwcnVsZXMuZmluZChmdW5jdGlvbihydWxlLGluZGV4LGFycmF5KXsKICAgICAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYz1ydWxlLmNhbGwoaW1nLGltZ1BBKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3JjKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH1jYXRjaChlcnIpewogICAgICAgICAgICAgICAgICAgICAgICB0aHJvd0Vycm9ySW5mbyhlcnIpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmKHNyYyl0eXBlPSd0cFJ1bGUnOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZighc3JjIHx8IHNyYz09aW1nU3JjKXsvL+acrOWbvueJh+aYr+WQpuiiq+e8qeaUvi4KICAgICAgICAgICAgICAgIG5vQWN0dWFsPXRydWU7CiAgICAgICAgICAgICAgICBpZighKGltZ0FTLnc9PWltZ0NTLncgJiYgaW1nQVMuaD09aW1nQ1MuaCkpey8v5aaC5p6c5LiN5piv5Lik6ICF5a6M5YWo55u4562JLOmCo+S5iOiiq+e8qeaUvuS6hi4KICAgICAgICAgICAgICAgICAgICBzcmM9aW1nU3JjOwogICAgICAgICAgICAgICAgICAgIHR5cGU9J3NjYWxlJzsKICAgICAgICAgICAgICAgICAgICBpZiAoaW1nQVMuaCA8IHByZWZzLmdhbGxlcnkuc2NhbGVTbWFsbFNpemUgJiYgaW1nQVMudyA8IHByZWZzLmdhbGxlcnkuc2NhbGVTbWFsbFNpemUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nc2NhbGVTbWFsbCc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgc3JjPWltZ1NyYzsKICAgICAgICAgICAgICAgICAgICB0eXBlPSdmb3JjZSc7CiAgICAgICAgICAgICAgICAgICAgaWYgKGltZy5ub2RlTmFtZSA9PSAiQSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBpbWcudGl0bGUgfHwgaW1nLmFsdCB8fCBpbWcuaW5uZXJUZXh0OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoIXNyYylyZXR1cm47CgogICAgICAgICAgICB2YXIgcmV0ID0gewogICAgICAgICAgICAgICAgYWxsOiBtYXRjaGVkUnVsZS5hbGwsCiAgICAgICAgICAgICAgICBzcmM6IHNyYywgICAgICAgICAgICAgICAgICAvLyDlvpfliLDnmoRzcmMKICAgICAgICAgICAgICAgIHNyY3M6IHNyY3MsICAgICAgICAgICAgICAgIC8vIOWkmuS4qiBzcmPvvIzlpLHotKXkuobkvJrlsJ3or5XkuIvkuIDkuKoKICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsICAgICAgICAgICAgICAgIC8vIOmAmui/h+WTquenjeaWueW8j+W+l+WIsOeahAogICAgICAgICAgICAgICAgaW1nU3JjOiBpbWdTcmMsICAgICAgICAgICAgLy8g5aSE55CG55qE5Zu+54mH55qEc3JjCiAgICAgICAgICAgICAgICBpUEFTcmM6IGlQQVNyYywgICAgICAgICAgICAvLyDlm77niYfnmoTnrKzkuIDkuKrniLZh5YWD57Sg55qE6ZO+5o6l5Zyw5Z2ACiAgICAgICAgICAgICAgICBzaXplSDppbWdBUy5oLAogICAgICAgICAgICAgICAgc2l6ZVc6aW1nQVMudywKICAgICAgICAgICAgICAgIGltZ0NTOmltZ0NTLAogICAgICAgICAgICAgICAgaW1nQVM6aW1nQVMsCgogICAgICAgICAgICAgICAgbm9BY3R1YWw6bm9BY3R1YWwsCiAgICAgICAgICAgICAgICB4aHI6IHhociwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiB8fCBpbWcudGl0bGUgfHwgaW1nLmFsdCB8fCAoaW1nLnBhcmVudE5vZGUgJiYgaW1nLnBhcmVudE5vZGUudGl0bGUpIHx8ICcnLAoKICAgICAgICAgICAgICAgIGltZzogaW1nLCAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhueahOWbvueJhwogICAgICAgICAgICAgICAgaW1nUEE6IGltZ1BBLCAgICAgICAgICAgICAgLy8g5Zu+54mH55qE56ys5LiA5Liq54i2YeWFg+e0oAogICAgICAgICAgICB9OwogICAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0TWF0Y2hlZFJ1bGUoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgTWF0Y2hlZFJ1bGVDKCk7CiAgICAgICAgICAgIC8qdmFyIHJ1bGUgPSBzaXRlSW5mby5maW5kKGZ1bmN0aW9uKHNpdGUsIGluZGV4LCBhcnJheSkgewogICAgICAgICAgICAgICAgaWYgKHNpdGUuZW5hYmxlZCAhPSBmYWxzZSAmJiBzaXRlLnVybCAmJiB0b1JFKHNpdGUudXJsKS50ZXN0KF9VUkwpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcmV0dXJuIHJ1bGU7Ki8KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIE1hdGNoZWRSdWxlQygpewogICAgICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHZpZGVvRXh0ZW5zaW9ucyA9IG5ldyBTZXQoWyczZ3BwJywgJ200dicsICdta3YnLCAnbXA0JywgJ29ndicsICd3ZWJtJywgJ20zdTgnXSk7CiAgICAgICAgY29uc3QgYXVkaW9FeHRlbnNpb25zID0gbmV3IFNldChbJ2ZsYWMnLCAnbTRhJywgJ21wMycsICdvZ2EnLCAnb2dnJywgJ29wdXMnLCAnd2F2J10pOwoKICAgICAgICBmdW5jdGlvbiBpc1ZpZGVvTGluayh1cmwpIHsKICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKCcudmlkZW8nKSAhPT0gLTEgfHwgdXJsLmluZGV4T2YoJ3ZpZGVvOicpID09PSAwKQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgvLmdpZihcP3dpZHRoPVxkKiZ8XD8pZm9ybWF0PW1wNC8sICcubXA0PycpLnJlcGxhY2UoL1wvJC8sICIiKTsKICAgICAgICAgICAgaWYgKHVybC5sYXN0SW5kZXhPZignPycpID4gMCkKICAgICAgICAgICAgICAgIHVybCA9IHVybC5zdWJzdHJpbmcoMCwgdXJsLmxhc3RJbmRleE9mKCc/JykpOwogICAgICAgICAgICBjb25zdCBleHQgPSB1cmwuc3Vic3RyaW5nKHVybC5sYXN0SW5kZXhPZignLicpICsgMSkudG9Mb3dlckNhc2UoKTsKCiAgICAgICAgICAgIHJldHVybiB2aWRlb0V4dGVuc2lvbnMuaGFzKGV4dCkKICAgICAgICAgICAgfHwgdXJsLmluZGV4T2YoJ2dvb2dsZXZpZGVvLmNvbS92aWRlb3BsYXliYWNrJykgPiAwCiAgICAgICAgICAgIHx8IHVybC5pbmRleE9mKCd2LnJlZGQuaXQnKSA+IDA7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBpc0F1ZGlvTGluayh1cmwpIHsKICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKCcuYXVkaW8nKSAhPT0gLTEgfHwgdXJsLmluZGV4T2YoJ2F1ZGlvOicpID09PSAwKQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKC9cLyQvLCAiIik7CiAgICAgICAgICAgIGlmICh1cmwubGFzdEluZGV4T2YoJz8nKSA+IDApCiAgICAgICAgICAgICAgICB1cmwgPSB1cmwuc3Vic3RyaW5nKDAsIHVybC5sYXN0SW5kZXhPZignPycpKTsKICAgICAgICAgICAgY29uc3QgZXh0ID0gdXJsLnN1YnN0cmluZyh1cmwubGFzdEluZGV4T2YoJy4nKSArIDEpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIHJldHVybiBhdWRpb0V4dGVuc2lvbnMuaGFzKGV4dCk7CiAgICAgICAgfQoKICAgICAgICBNYXRjaGVkUnVsZUMucHJvdG90eXBlPXsKICAgICAgICAgICAgaW5pdDpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYgKHByZWZzLmN1c3RvbVJ1bGVzKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHByZWZzLmN1c3RvbVJ1bGVzID09IGBbCi8qCiAgewogICAgbmFtZTogIkV4YW1wbGUsIGNhbiBiZSBkZWxldGVkIHNhZmVseSIsCiAgICB1cmw6IC9eaHR0cHM/OlxcL1xcL3d3d1xcLmdvb2dsZVxcLmNvbVxcL3NlYXJjaFxcPy8sCiAgICBnZXRJbWFnZTogZnVuY3Rpb24oYSkge30sCiAgICBzcmM6IC9hdmF0YXIvaSwKICAgIHI6IC9cXD8uKiQvaSwKICAgIHM6ICcnCiAgfQoqL11gKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZzLmN1c3RvbVJ1bGVzID0gIltdIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1c3RvbVJ1bGVzOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJlZnMuY3VzdG9tUnVsZXMuaW5kZXhPZigibmFtZToiKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXN1bnNhZmUoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbVJ1bGVzID0gdW5zYWZlV2luZG93LmV2YWwoY3JlYXRlU2NyaXB0KHByZWZzLmN1c3RvbVJ1bGVzKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21SdWxlcyA9IEpTT04ucGFyc2UocHJlZnMuY3VzdG9tUnVsZXMpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGN1c3RvbVJ1bGVzKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tUnVsZXMuZm9yRWFjaChydWxlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlLmN1c3RvbSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhhc1J1bGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IHNpdGVJbmZvLmxlbmd0aDsgcysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaXRlSW5mb1tzXS5uYW1lID09IHJ1bGUubmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzUnVsZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBzaSBpbiBydWxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l0ZUluZm9bc11bc2ldID0gcnVsZVtzaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc1J1bGUpIHNpdGVJbmZvLnVuc2hpZnQocnVsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJXcm9uZyBydWxlIGZvciBQaWN2aWV3ZXIgQ0UrIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXMsIHIgPSAwLCB1cmxDaGVja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBzZWxmLnJ1bGVzPVtdOwogICAgICAgICAgICAgICAgZnVuY3Rpb24gc2VhcmNoQnlUaW1lKCl7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+ewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZW5kPXIrMjA7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZD1lbmQ+c2l0ZUluZm8ubGVuZ3RoP3NpdGVJbmZvLmxlbmd0aDplbmQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcig7cjxlbmQ7cisrKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzaXRlPXNpdGVJbmZvW3JdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpdGUuZW5hYmxlZCAhPSBmYWxzZSAmJiAoIXNpdGUudXJsIHx8IHRvUkUoc2l0ZS51cmwpLnRlc3QoX1VSTCkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpdGUueGhyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpdGUueGhyLmFmdGVyID0gc3JjID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdTcmMgPSBzZWxmLnJlcGxhY2VCeVJ1bGUoc3JjLCBzaXRlLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5ld1NyYykpIG5ld1NyYyA9IG5ld1NyY1swXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdTcmMgJiYgbmV3U3JjLmxlbmd0aCA/IG5ld1NyYyA6IHNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlTWF0Y2ggPSB0eXBlb2Ygc2l0ZS54aHIudXJsID09PSAic3RyaW5nIiAmJiBzaXRlLnhoci51cmwubWF0Y2goL15cLyguKilcLyhcdyopJC8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVNYXRjaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l0ZS54aHIudXJsID0gdG9SRShyZU1hdGNoWzFdLCByZU1hdGNoWzJdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHNpdGUueGhyLnVybCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1cmxSZSA9IHRvUkUoc2l0ZS54aHIudXJsWzBdLCAiaSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVybFBhcmFtID0gc2l0ZS54aHIudXJsWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l0ZS54aHIudXJsID0gKGEsIHApID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWEgfHwgIWEuaHJlZikgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cmxSZS50ZXN0KGEuaHJlZikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuaHJlZi5yZXBsYWNlKHVybFJlLCB1cmxQYXJhbSk7OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpdGUudXJsICYmICF1cmxDaGVja2VkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybENoZWNrZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2l0ZS5jc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IF9HTV9hZGRTdHlsZShzaXRlLmNzcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS5pZCA9ICdnbS1waWN2aWV3ZXItc2l0ZS1zdHlsZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpdGUubGF6eUF0dHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubGF6eUF0dHIgPSBzaXRlLmxhenlBdHRyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaXRlLmRlc2NyaXB0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRlc2NyaXB0aW9uID0gc2l0ZS5kZXNjcmlwdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2l0ZS5jbGlja1RvT3BlbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jbGlja1RvT3BlbiA9IHNpdGUuY2xpY2tUb09wZW47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpdGUuZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmV4dCA9IHNpdGUuZXh0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaXRlLmdhbGxlcnkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBnYWxsZXJ5ID0gc2l0ZS5nYWxsZXJ5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5nYWxsZXJ5ID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZ2FsbGVyeSA9PT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZ2FsbGVyeSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdhbGxlcnkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaXRlLnZpZGVvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVNYXRjaCA9IHR5cGVvZiBzaXRlLnZpZGVvID09PSAic3RyaW5nIiAmJiBzaXRlLnZpZGVvLm1hdGNoKC9eXC8oLiopXC8oXHcqKSQvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZU1hdGNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l0ZS52aWRlbyA9IHRvUkUocmVNYXRjaFsxXSwgcmVNYXRjaFsyXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnZpZGVvID0gc2l0ZS52aWRlbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2l0ZS5hdWRpbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlTWF0Y2ggPSB0eXBlb2Ygc2l0ZS5hdWRpbyA9PT0gInN0cmluZyIgJiYgc2l0ZS5hdWRpby5tYXRjaCgvXlwvKC4qKVwvKFx3KikkLyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVNYXRjaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpdGUuYXVkaW8gPSB0b1JFKHJlTWF0Y2hbMV0sIHJlTWF0Y2hbMl0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hdWRpbyA9IHNpdGUuYXVkaW87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpdGUuZ2V0RXh0U3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmdldEV4dFNyYyA9IHNpdGUuZ2V0RXh0U3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaXRlLm11dGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubXV0ZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ydWxlcy5wdXNoKHNpdGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVuZDxzaXRlSW5mby5sZW5ndGgpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoQnlUaW1lKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ydWxlcy5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEuY3VzdG9tICYmICFiLmN1c3RvbSkgcmV0dXJuIC0xOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYS5jdXN0b20gJiYgYi5jdXN0b20pIHJldHVybiAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhLnVybCAmJiAhYi51cmwpIHJldHVybiAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWEudXJsICYmIGIudXJsKSByZXR1cm4gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICh1bnNhZmVXaW5kb3cucHZjZXBSdWxlcyAmJiBBcnJheS5pc0FycmF5KHVuc2FmZVdpbmRvdy5wdmNlcFJ1bGVzKSkgewogICAgICAgICAgICAgICAgICAgICAgICB1bnNhZmVXaW5kb3cucHZjZXBSdWxlcy5mb3JFYWNoKHJ1bGUgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZS5jdXN0b20gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhhc1J1bGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgc2l0ZUluZm8ubGVuZ3RoOyBzKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2l0ZUluZm9bc10ubmFtZSA9PSBydWxlLm5hbWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzUnVsZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHNpIGluIHJ1bGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpdGVJbmZvW3NdW3NpXSA9IHJ1bGVbc2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGFzUnVsZSkgc2l0ZUluZm8udW5zaGlmdChydWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc2VhcmNoQnlUaW1lKCk7CiAgICAgICAgICAgICAgICB9LCAxKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVwbGFjZTpmdW5jdGlvbihzdHIsIHIsIHMpewogICAgICAgICAgICAgICAgdmFyIHJlc3VsdHM9W10scnQ7CiAgICAgICAgICAgICAgICBsZXQgcmVNYXRjaCA9IHR5cGVvZiByID09PSAic3RyaW5nIiAmJiByLm1hdGNoKC9eXC8oLiopXC8oXHcrKSQvKTsKICAgICAgICAgICAgICAgIGlmIChyZU1hdGNoKSB7CiAgICAgICAgICAgICAgICAgICAgciA9IHRvUkUocmVNYXRjaFsxXSwgcmVNYXRjaFsyXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZihBcnJheS5pc0FycmF5KHMpKXsKICAgICAgICAgICAgICAgICAgICBzLmZvckVhY2goX3M9PnsKICAgICAgICAgICAgICAgICAgICAgICAgcnQ9c3RyLnJlcGxhY2UociwgX3MpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihydCAmJiBydCE9c3RyKXJlc3VsdHMucHVzaChydCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBydD1zdHIucmVwbGFjZShyLCBzKTsKICAgICAgICAgICAgICAgICAgICBpZihydCAmJiBydCE9c3RyKXJldHVybiBydDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzOwogICAgICAgICAgICB9LAogICAgICAgICAgICByZXBsYWNlQnlSdWxlOiBmdW5jdGlvbihzcmMsIHJ1bGUsIGNoZWNrKSB7CiAgICAgICAgICAgICAgICBpZiAoY2hlY2spIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXJ1bGUuciB8fCAvXmRhdGE6L2kudGVzdChzcmMpKSByZXR1cm4gc3JjOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGV0IG5ld1NyYzsKICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJ1bGUucikpIHsvL3LmnIDlpJrkuIDlsYIKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJ1bGUuci5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3IgPSBydWxlLnJbal07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocnVsZS5zKSkgey8vc+WvueS4inLmnIDlpJrkuKTlsYIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3MgPSBydWxlLnNbal07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3JjID0gdGhpcy5yZXBsYWNlKHNyYywgX3IsIF9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3JjID0gdGhpcy5yZXBsYWNlKHNyYywgX3IsIHJ1bGUucyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3U3JjICYmIG5ld1NyYy5sZW5ndGggJiYgbmV3U3JjICE9PSBzcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbmV3U3JjID0gdGhpcy5yZXBsYWNlKHNyYywgcnVsZS5yLCBydWxlLnMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG5ld1NyYyAmJiBuZXdTcmMubGVuZ3RoID8gbmV3U3JjIDogc3JjOwogICAgICAgICAgICB9LAogICAgICAgICAgICBnZXRNb2RlOiBmdW5jdGlvbihzcmMpIHsKICAgICAgICAgICAgICAgIGlmICghc3JjIHx8ICFzcmMubGVuZ3RoKSByZXR1cm4gIiI7CiAgICAgICAgICAgICAgICBpZiAodGhpcy52aWRlbyAmJiB0aGlzLnZpZGVvLnRlc3Qoc3JjKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAidmlkZW8iOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHRoaXMuYXVkaW8gJiYgdGhpcy5hdWRpby50ZXN0KHNyYykpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gImF1ZGlvIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChpc1ZpZGVvTGluayhzcmMpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJ2aWRlbyI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoaXNBdWRpb0xpbmsoc3JjKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAiYXVkaW8iOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgICAgICB9LAogICAgICAgICAgICBnZXRYaHJMaW5rOiBmdW5jdGlvbihhLCBwKSB7CiAgICAgICAgICAgICAgICB2YXIgbmV3U3JjLCBydWxlOwogICAgICAgICAgICAgICAgdGhpcy54aHIgPSBudWxsOwogICAgICAgICAgICAgICAgdGhpcy54aHJMaW5rID0gZmFsc2U7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucnVsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBydWxlID0gdGhpcy5ydWxlc1tpXTsKICAgICAgICAgICAgICAgICAgICBpZiAocnVsZS5zcmMpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIGlmIChydWxlLnhocikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVsZS54aHIudXJsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVsZS54aHIudXJsLnRlc3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSAmJiBydWxlLnhoci51cmwudGVzdChhLmhyZWYpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NyYyA9IGEuaHJlZjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBydWxlLnhoci51cmwgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEgJiYgYS5tYXRjaGVzKHJ1bGUueGhyLnVybCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NyYyA9IGEuaHJlZjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NyYyA9IHJ1bGUueGhyLnVybC5jYWxsKGEsIGEsIHAsIHJ1bGUueGhyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdTcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnhockxpbmsgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueGhyID0gcnVsZS54aHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld1NyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTcmMgPSBhLmhyZWY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3U3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54aHJMaW5rID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnhociA9IHJ1bGUueGhyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdTcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldEltYWdlOiBmdW5jdGlvbihpbWcsIGEsIHAsIHRhcmdldCkgewogICAgICAgICAgICAgICAgdmFyIG5ld1NyYywgcnVsZTsKICAgICAgICAgICAgICAgIHZhciBiYXNlNjRJbWcgPSAvXmRhdGE6L2kudGVzdChpbWcuc3JjKTsKICAgICAgICAgICAgICAgIHRoaXMuYWxsID0gbnVsbDsKICAgICAgICAgICAgICAgIHRoaXMueGhyID0gbnVsbDsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ydWxlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIHJ1bGUgPSB0aGlzLnJ1bGVzW2ldOwogICAgICAgICAgICAgICAgICAgIGlmIChydWxlLnNyYyAmJiAhdG9SRShydWxlLnNyYykudGVzdChpbWcuc3JjKSkgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUuZXhjbHVkZSAmJiB0b1JFKHJ1bGUuZXhjbHVkZSkudGVzdChpbWcuc3JjKSkgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUueGhyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydWxlLnhoci51cmwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydWxlLnhoci51cmwudGVzdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhICYmIHJ1bGUueGhyLnVybC50ZXN0KGEuaHJlZikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3JjID0gYS5ocmVmOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJ1bGUueGhyLnVybCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSAmJiBhLm1hdGNoZXMocnVsZS54aHIudXJsKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3JjID0gYS5ocmVmOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3JjID0gcnVsZS54aHIudXJsLmNhbGwodGFyZ2V0IHx8IGltZywgYSwgcCwgcnVsZS54aHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1NyYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueGhyID0gcnVsZS54aHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld1NyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54aHIgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NyYyA9IGEuaHJlZjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoYmFzZTY0SW1nICYmICghcnVsZS51cmwgfHwgIXJ1bGUuZ2V0SW1hZ2UpKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICBpZiAobmV3U3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueGhyID0gcnVsZS54aHI7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdTcmM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChydWxlLmdldEltYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NyYyA9IHJ1bGUuZ2V0SW1hZ2UuY2FsbCh0YXJnZXQgfHwgaW1nLCBhLCBwLCBydWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1NyYyAmJiBuZXdTcmMuYWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbCA9IG5ld1NyYy5hbGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTcmMgPSB0aGlzLmFsbFswXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBuZXdTcmMgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIGlmICghYmFzZTY0SW1nICYmIHJ1bGUuciAmJiBpbWcuc3JjICYmICFBcnJheS5pc0FycmF5KG5ld1NyYykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdTcmMpIG5ld1NyYyA9IGltZy5zcmMgfHwgaW1nLmN1cnJlbnRTcmM7CiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NyYyA9IHRoaXMucmVwbGFjZUJ5UnVsZShuZXdTcmMsIHJ1bGUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAobmV3U3JjICYmIG5ld1NyYy5sZW5ndGggPiAwICYmIG5ld1NyYyAhPSAoaW1nLnNyYyB8fCBpbWcuY3VycmVudFNyYykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcocnVsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBuZXdTcmMgPSBudWxsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG5ld1NyYyAmJiBuZXdTcmMubGVuZ3RoID09IDApIG5ld1NyYyA9IG51bGw7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3U3JjOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgdmFyIGlzRnJhbWU9d2luZG93IT13aW5kb3cucGFyZW50OwogICAgICAgIHZhciB0b3BXaW5kb3dWYWxpZDsKICAgICAgICB2YXIgZnJhbWVTZW50RGF0YTsKICAgICAgICB2YXIgZnJhbWVTZW50U3VjY2Vzc0RhdGE7CiAgICAgICAgZnVuY3Rpb24gaGFuZGxlTWVzc2FnZShlKXsKICAgICAgICAgICAgdmFyIGRhdGE9ZS5kYXRhOwogICAgICAgICAgICBpZiggIWRhdGEgfHwgIWRhdGEubWVzc2FnZUlEIHx8IGRhdGEubWVzc2FnZUlEICE9IG1lc3NhZ2VJRCApcmV0dXJuOwogICAgICAgICAgICB2YXIgc291cmNlPWUuc291cmNlLGNvbW1hbmQsY3VzRXZlbnQ7CiAgICAgICAgICAgIGlmKHR5cGVvZiBzb3VyY2U9PSd1bmRlZmluZWQnIHx8IHNvdXJjZSE9PXdpbmRvdyl7CiAgICAgICAgICAgICAgICBpZighaXNGcmFtZSl7CiAgICAgICAgICAgICAgICAgICAgY29tbWFuZD1kYXRhLmNvbW1hbmQ7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoKGNvbW1hbmQpewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdvcGVuJzp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5idXR0b25UeXBlID09PSAnZG93bmxvYWQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRJbWcoZGF0YS5zcmMsIGRvY3VtZW50LnRpdGxlLCBwcmVmcy5zYXZlTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZy5zcmM9ZGF0YS5zcmM7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nUmVhZHkoaW1nLHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkeTpmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2FkaW5nQW5pbUMucHJvdG90eXBlLm9wZW4uY2FsbCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWc6aW1nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTpkYXRhLmRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25UeXBlOmRhdGEuYnV0dG9uVHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb206ZGF0YS5mcm9tLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbmF2aWdhdGVUb0ltZyc6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzRXZlbnQ9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXNFdmVudC5pbml0Q3VzdG9tRXZlbnQoJ3B2LW5hdmlnYXRlVG9JbWcnLGZhbHNlLGZhbHNlLGRhdGEuZXhpc3QpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjdXNFdmVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndG9wV2luZG93VmFsaWQnOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuZnJvbSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUlEOm1lc3NhZ2VJRCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kOid0b3BXaW5kb3dWYWxpZF9mcmFtZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQ6Z2V0Qm9keShkb2N1bWVudCkubm9kZU5hbWUudG9VcHBlckNhc2UoKSE9J0ZSQU1FU0VUJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bzpkYXRhLmZyb20sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCcqJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH1icmVhazsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ9ZGF0YS5jb21tYW5kOwogICAgICAgICAgICAgICAgICAgIHN3aXRjaChjb21tYW5kKXsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbmF2aWdhdGVUb0ltZyc6ewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFmcmFtZVNlbnREYXRhLnVuaXF1ZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVuaXF1ZT1HYWxsZXJ5Qy5wcm90b3R5cGUudW5pcXVlKGZyYW1lU2VudERhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lU2VudERhdGE9dW5pcXVlLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVTZW50RGF0YS51bmlxdWU9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW1nPWZyYW1lU2VudERhdGFbZGF0YS5pbmRleF0uaW1nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4aXN0PShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnModGFyZ2V0SW1nKSAmJiB1bnNhZmVXaW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXRJbWcpLmRpc3BsYXkhPSdub25lJyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZXhpc3QpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGdhbGxlcnkgJiYgZ2FsbGVyeS5zaG93bil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbGxlcnkubWluaW1pemUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR2FsbGVyeUMucHJvdG90eXBlLm5hdmlnYXRlVG9JbWcodGFyZ2V0SW1nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhc2hFbGUodGFyZ2V0SW1nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmZyb20pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlSUQ6bWVzc2FnZUlELAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiduYXZpZ2F0ZVRvSW1nJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3Q6ZXhpc3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOmRhdGEuZnJvbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6ZGF0YS5pbmRleAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sJyonKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzZW5kRmFpbCc6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVTZW50RGF0YT1mcmFtZVNlbnRTdWNjZXNzRGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgfWJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0b3BXaW5kb3dWYWxpZF9mcmFtZSc6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzRXZlbnQ9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXNFdmVudC5pbml0Q3VzdG9tRXZlbnQoJ3B2LXRvcFdpbmRvd1ZhbGlkJyxmYWxzZSxmYWxzZSxkYXRhLnZhbGlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoY3VzRXZlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgLy/pobXpnaLohJrmnKznlKjmnaXovazlj5Hmtojmga8KICAgICAgICAvL+WOn+WboGNocm9tZeeahGNvbnRlbnRzY3JpcHTml6Dms5Xorr/pl67pnZ7oh6rlt7HlpJbnmoTliKvnmoTnqpflj6PjgILpg73kvJrov5Tlm551bmRlZmluZWTvvIzoh6rnhLbkuZ/ml6Dms5XlkJHlhbbku5bnmoTnqpflj6Plj5HpgIHkv6Hmga8s6L+Z6YeM55SocGFnZXNjcmlwdOWBmuS4quS4remXtOS7o+eQhgogICAgICAgIC8v6YCa6K6v6YC76L6RLi5B6aG16Z2i55qEY29udGVudHNjcmlwdOWPkemAgeWIsEHpobXpnaLnmoRwYWdlc2NyaXB077yMcGFnZXNjcmlwdOi9rOS6pOe7mULpobXpnaLnmoRjb250ZW50c2NyaXB0CiAgICAgICAgdmFyIG1lc3NhZ2VJRD0ncHYtMC41MTA2Nzk1NjcwMzEyNTk4JzsKCiAgICAgICAgdmFyIF9pc3Vuc2FmZSA9IG51bGw7CiAgICAgICAgZnVuY3Rpb24gaXN1bnNhZmUoKXsKICAgICAgICAgICAgaWYgKF9pc3Vuc2FmZSA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBfaXN1bnNhZmUgPSB1bnNhZmVXaW5kb3cuZXZhbChjcmVhdGVTY3JpcHQoImZhbHNlIikpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoInVuc2FmZSIpOwogICAgICAgICAgICAgICAgICAgIF9pc3Vuc2FmZSA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIF9pc3Vuc2FmZTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gYWRkUGFnZVNjcmlwdCgpIHsKCiAgICAgICAgICAgIGlmKGlzdW5zYWZlKCkpcmV0dXJuOwogICAgICAgICAgICB2YXIgcGFnZVNjcmlwdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICAgICAgICAgcGFnZVNjcmlwdC5pZCA9ICdwaWN2aWV3ZXItcGFnZS1zY3JpcHQnOwoKICAgICAgICAgICAgdmFyIHBhZ2VTY3JpcHRUZXh0PWZ1bmN0aW9uKG1lc3NhZ2VJRCl7CiAgICAgICAgICAgICAgICB2YXIgZnJhbWVJRD1NYXRoLnJhbmRvbSgpOwogICAgICAgICAgICAgICAgdmFyIGZyYW1lcz17CiAgICAgICAgICAgICAgICAgICAgdG9wOndpbmRvdy50b3AsCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJyxmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YT1lLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgaWYoICFkYXRhIHx8ICFkYXRhLm1lc3NhZ2VJRCB8fCBkYXRhLm1lc3NhZ2VJRCAhPSBtZXNzYWdlSUQgKXJldHVybjsvL+mAmuS/oUlE6K6k6K+BCiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZT1lLnNvdXJjZTsKICAgICAgICAgICAgICAgICAgICBpZihzb3VyY2U9PT13aW5kb3cpey8v5p2l6IeqY29udGVudHNjcmlwdCzlj5HpgIHlh7rljrss5oiW6ICF5bmy5Zib44CCCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEudG8pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5mcm9tPWZyYW1lSUQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFtZXNbZGF0YS50b10ucG9zdE1lc3NhZ2UoZGF0YSwnKicpOwogICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaChkYXRhLmNvbW1hbmQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2dldElmcmFtZU9iamVjdCc6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnJhbWVXaW5kb3c9ZnJhbWVzW2RhdGEud2luZG93SWRdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWZyYW1lcz1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaWZyYW1lJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRJZnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT1pZnJhbWVzLmxlbmd0aC0xIDsgaT49MCA7IGktLSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZnJhbWU9aWZyYW1lc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGlmcmFtZS5jb250ZW50V2luZG93PT09ZnJhbWVXaW5kb3cpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldElmcmFtZT1pZnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VzRXZlbnQ9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1c0V2ZW50LmluaXRDdXN0b21FdmVudCgncHYtZ2V0SWZyYW1lT2JqZWN0JyxmYWxzZSxmYWxzZSx0YXJnZXRJZnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGN1c0V2ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsvL+adpeiHquWIq+eahOeql+WPo+eahO+8jGNvbnRlbnRzY3JpcHTlj6/ku6Xnm7TmjqXmjqXmlLbvvIzov5nph4zkv53lrZjkuIvmnaXoh6rnmoTnqpflj6PnmoTlvJXnlKgKICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVzW2RhdGEuZnJvbV09c291cmNlOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LHRydWUpCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBwYWdlU2NyaXB0LnRleHRDb250ZW50PWNyZWF0ZVNjcmlwdCgnKCcgKyBwYWdlU2NyaXB0VGV4dC50b1N0cmluZygpICsgJykoJysgSlNPTi5zdHJpbmdpZnkobWVzc2FnZUlEKSArJyknKTsKICAgICAgICAgICAgaWYoZG9jdW1lbnQuaGVhZClkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHBhZ2VTY3JpcHQpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xpY2tUb09wZW4oZGF0YSl7CiAgICAgICAgICAgIHZhciBwcmV2ZW50RGVmYXVsdCA9IG1hdGNoZWRSdWxlLmNsaWNrVG9PcGVuLnByZXZlbnREZWZhdWx0OwogICAgICAgICAgICB2YXIgYnV0dG9uID0gbWF0Y2hlZFJ1bGUuY2xpY2tUb09wZW4uYnV0dG9uIHx8IDA7CiAgICAgICAgICAgIHZhciBhbHQgPSAhIW1hdGNoZWRSdWxlLmNsaWNrVG9PcGVuLmFsdDsKICAgICAgICAgICAgdmFyIGN0cmwgPSAhIW1hdGNoZWRSdWxlLmNsaWNrVG9PcGVuLmN0cmw7CiAgICAgICAgICAgIHZhciBzaGlmdCA9ICEhbWF0Y2hlZFJ1bGUuY2xpY2tUb09wZW4uc2hpZnQ7CiAgICAgICAgICAgIHZhciBtZXRhID0gISFtYXRjaGVkUnVsZS5jbGlja1RvT3Blbi5tZXRhOwoKICAgICAgICAgICAgZnVuY3Rpb24gbW91c2VvdXQoKXsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgbW91c2VvdXQsIHRydWUpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihidXR0b24gPT0gMiA/ICdjb250ZXh0bWVudScgOiAnbW91c2Vkb3duJywgY2xpY2ssIHRydWUpOwogICAgICAgICAgICAgICAgaWYoZGF0YS5pbWdQQSAmJiBwcmV2ZW50RGVmYXVsdCl7CiAgICAgICAgICAgICAgICAgICAgZGF0YS5pbWdQQS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrQSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tMaW1pdChlKXsKICAgICAgICAgICAgICAgIGlmKGUuYnV0dG9uIT1idXR0b24gfHwKICAgICAgICAgICAgICAgICAgIGUuYWx0S2V5IT1hbHQgfHwKICAgICAgICAgICAgICAgICAgIGUuY3RybEtleSE9Y3RybCB8fAogICAgICAgICAgICAgICAgICAgZS5zaGlmdEtleSE9c2hpZnQgfHwKICAgICAgICAgICAgICAgICAgIGUubWV0YUtleSE9bWV0YSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGNsaWNrKGUpewogICAgICAgICAgICAgICAgaWYoIWNoZWNrTGltaXQoZSkpcmV0dXJuOwogICAgICAgICAgICAgICAgRmxvYXRCYXJDLnByb3RvdHlwZS5vcGVuLmNhbGwoewogICAgICAgICAgICAgICAgICAgIGRhdGE6ZGF0YSwKICAgICAgICAgICAgICAgIH0sZSxtYXRjaGVkUnVsZS5jbGlja1RvT3Blbi50eXBlKTsKICAgICAgICAgICAgICAgIGlmKHByZXZlbnREZWZhdWx0KXsKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBmdW5jdGlvbiBjbGlja0EoZSl7Ly/pmLvmraJh55qE6buY6K6k6KGM5Li6CiAgICAgICAgICAgICAgICBpZighY2hlY2tMaW1pdChlKSlyZXR1cm47CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGJ1dHRvbiA9PSAyID8gJ2NvbnRleHRtZW51JyA6ICdtb3VzZWRvd24nLCBjbGljaywgdHJ1ZSk7CgogICAgICAgICAgICBpZihkYXRhLmltZ1BBICYmIHByZXZlbnREZWZhdWx0KXsKICAgICAgICAgICAgICAgIGRhdGEuaW1nUEEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja0EsIHRydWUpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpey8v56iN5b6u5bu25pe244CC6ZSZ5byA55Sx5LqOY3NzIGhvdmVy5qC35byP5Y+R55Sf55qEb3V0OwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBtb3VzZW91dCwgdHJ1ZSk7CiAgICAgICAgICAgIH0sMTAwKTsKCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpewogICAgICAgICAgICAgICAgbW91c2VvdXQoKTsKICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHZhciBjYW5jbGVQcmVDVE8sdW5pcXVlSW1nV2luLGNlbnRlckludGVydmFsLGdsb2JhbEZ1bmNFbmFibGVkPWZhbHNlLGlzQ29uZmlnT3Blbj1mYWxzZTsKICAgICAgICBmdW5jdGlvbiBjaGVja0dsb2JhbEtleWRvd24oZSl7CiAgICAgICAgICAgIHJldHVybighKCghZS5jdHJsS2V5ICYmIGUua2V5ICE9PSAnQ29udHJvbCcgJiYgcHJlZnMuZmxvYXRCYXIuZ2xvYmFsa2V5cy5jdHJsKXx8CiAgICAgICAgICAgICAgICAgICAgICghZS5hbHRLZXkgJiYgZS5rZXkgIT09ICdBbHQnICYmIHByZWZzLmZsb2F0QmFyLmdsb2JhbGtleXMuYWx0KXx8CiAgICAgICAgICAgICAgICAgICAgICghZS5zaGlmdEtleSAmJiBlLmtleSAhPT0gJ1NoaWZ0JyAmJiBwcmVmcy5mbG9hdEJhci5nbG9iYWxrZXlzLnNoaWZ0KXx8CiAgICAgICAgICAgICAgICAgICAgICghZS5tZXRhS2V5ICYmIGUua2V5ICE9PSAnTWV0YScgJiYgcHJlZnMuZmxvYXRCYXIuZ2xvYmFsa2V5cy5jb21tYW5kKXx8CiAgICAgICAgICAgICAgICAgICAgICghcHJlZnMuZmxvYXRCYXIuZ2xvYmFsa2V5cy5jdHJsICYmICFwcmVmcy5mbG9hdEJhci5nbG9iYWxrZXlzLmFsdCAmJiAhcHJlZnMuZmxvYXRCYXIuZ2xvYmFsa2V5cy5zaGlmdCAmJiAhcHJlZnMuZmxvYXRCYXIuZ2xvYmFsa2V5cy5jb21tYW5kKSkpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2hlY2tQcmV2aWV3KGUpewogICAgICAgICAgICBpZiAoaXNDb25maWdPcGVuKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIGxldCBzZWxTdHI7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBzZWxTdHIgPSAhc2VsZWN0aW9uQ2xpZW50UmVjdCAmJiBzZWxlY3Rpb25TdHI7CiAgICAgICAgICAgIH1jYXRjaChlKXt9CiAgICAgICAgICAgIGlmIChzZWxTdHIgJiYgc2VsU3RyICE9ICJcbiIpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgbGV0IGtleUFjdGl2ZT0ocHJlZnMuZmxvYXRCYXIuZ2xvYmFsa2V5cy50eXBlID09ICJob2xkIiAmJiBjaGVja0dsb2JhbEtleWRvd24oZSkpIHx8CiAgICAgICAgICAgICAgICAocHJlZnMuZmxvYXRCYXIuZ2xvYmFsa2V5cy50eXBlID09ICJwcmVzcyIgJiYgZ2xvYmFsRnVuY0VuYWJsZWQpOwogICAgICAgICAgICByZXR1cm4gcHJlZnMuZmxvYXRCYXIuZ2xvYmFsa2V5cy5pbnZlcnRJbml0U2hvdz8ha2V5QWN0aXZlOmtleUFjdGl2ZTsKICAgICAgICB9CgogICAgICAgIHZhciB1bnRpbE1vdmVUaW1lciwgbW92ZUhhbmRsZXIsIHVuaXF1ZUltZ1dpbkluaXRYLCB1bmlxdWVJbWdXaW5Jbml0WTsKICAgICAgICBmdW5jdGlvbiB3YWl0VW50aWxNb3ZlKHRhcmdldCwgY2FsbGJhY2spIHsKICAgICAgICAgICAgaWYgKG1vdmVIYW5kbGVyKSBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3ZlSGFuZGxlciwgdHJ1ZSk7CiAgICAgICAgICAgIGlmICh1bnRpbE1vdmVUaW1lcikgY2xlYXJUaW1lb3V0KHVudGlsTW92ZVRpbWVyKTsKCiAgICAgICAgICAgIG1vdmVIYW5kbGVyID0gZSA9PiB7CiAgICAgICAgICAgICAgICB1bmlxdWVJbWdXaW5Jbml0WCA9IGUuY2xpZW50WDsKICAgICAgICAgICAgICAgIHVuaXF1ZUltZ1dpbkluaXRZID0gZS5jbGllbnRZOwogICAgICAgICAgICAgICAgaWYgKHRhcmdldCAhPSBlLnRhcmdldCkgewogICAgICAgICAgICAgICAgICAgIGxldCBwcmVSZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICAgICAgICAgIGxldCBuZXh0UmVjdCA9IGUudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICAgICAgICAgIGlmIChwcmVSZWN0ICYmIG5leHRSZWN0ICYmIChwcmVSZWN0LmxlZnQgPiBuZXh0UmVjdC5sZWZ0IHx8IHByZVJlY3QucmlnaHQgPCBuZXh0UmVjdC5yaWdodCB8fCBwcmVSZWN0LnRvcCA+IG5leHRSZWN0LnRvcCB8fCBwcmVSZWN0LmJvdHRvbSA8IG5leHRSZWN0LmJvdHRvbSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW92ZUhhbmRsZXIsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodW50aWxNb3ZlVGltZXIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3ZlSGFuZGxlciwgdHJ1ZSk7CiAgICAgICAgICAgIHVudGlsTW92ZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3ZlSGFuZGxlciwgdHJ1ZSk7CiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgICB9LCBwcmVmcy5mbG9hdEJhci5zaG93RGVsYXkgfHwgMCkKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNoZWNrRmxvYXRCYXIoX3RhcmdldCwgdHlwZSwgY2FuUHJldmlldywgY2xpZW50WCwgY2xpZW50WSwgYWx0S2V5KSB7CiAgICAgICAgICAgIGxldCB0YXJnZXQgPSBfdGFyZ2V0OwogICAgICAgICAgICBpZiAoIXRhcmdldCB8fCB0YXJnZXQuaWQgPT0gInB2LWZsb2F0LWJhci1jb250YWluZXIiIHx8CiAgICAgICAgICAgICAgICAodGFyZ2V0LnBhcmVudE5vZGUgJiYgKHRhcmdldC5wYXJlbnROb2RlLmlkID09ICJpY29ucyIgfHwgdGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NOYW1lID09ICJzZWFyY2gtanVtcGVyLWJ0biIpKSB8fAogICAgICAgICAgICAgICAgKHRhcmdldC5jbGFzc05hbWUgJiYKICAgICAgICAgICAgICAgICAoL15wdlwtLy50ZXN0KHRhcmdldC5jbGFzc05hbWUpIHx8CiAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc05hbWUgPT0gIndoeC1hIiB8fAogICAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NOYW1lID09ICJ3aHgtYS1ub2RlIiB8fAogICAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NOYW1lID09ICJzZWFyY2gtanVtcGVyLWJ0biIgfHwKICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygicHYtaWNvbiIpIHx8CiAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoImtzLWltYWdlem9vbS1sZW5zIikpKSkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0YXJnZXQubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PSAiUElDVFVSRSIpewogICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoImltZyIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0eXBlID09ICJtb3VzZW1vdmUiKSB7CiAgICAgICAgICAgICAgICBpZiAoKHVuaXF1ZUltZ1dpbiAmJiAhdW5pcXVlSW1nV2luLnJlbW92ZWQgJiYgIXVuaXF1ZUltZ1dpbi5wcmV2aWV3ZWQpKSB7CiAgICAgICAgICAgICAgICAgICAgdW5pcXVlSW1nV2luLmZvbGxvd1BvcyhjbGllbnRYLCBjbGllbnRZKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIWNhblByZXZpZXcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlSW1nV2luLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpICE9ICdJTUcnIHx8ICFjYW5QcmV2aWV3KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyDmianlsZXmqKHlvI/vvIzmo4Dmn6XliY3pnaLkuIDkuKrmmK/lkKbkuLogaW1nCiAgICAgICAgICAgIGlmICh0YXJnZXQubm9kZU5hbWUudG9VcHBlckNhc2UoKSAhPSAnSU1HJyAmJiBtYXRjaGVkUnVsZS5ydWxlcy5sZW5ndGggPiAwICYmIG1hdGNoZWRSdWxlLmV4dCkgewogICAgICAgICAgICAgICAgdmFyIF90eXBlID0gdHlwZW9mIG1hdGNoZWRSdWxlLmV4dDsKICAgICAgICAgICAgICAgIGlmIChfdHlwZSA9PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWF0Y2hlZFJ1bGUuZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3ByZXZpb3VzJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nIHx8IHRhcmdldDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICduZXh0JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcgfHwgdGFyZ2V0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3ByZXZpb3VzLTInOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gKHRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcucHJldmlvdXNFbGVtZW50U2libGluZykgfHwgdGFyZ2V0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdHlwZSA9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gbWF0Y2hlZFJ1bGUuZXh0KHRhcmdldCkgfHwgdGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3dFcnJvckluZm8oZXgpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXQpIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgYmdSZWcgPSAvLip1cmxcKFxzKlsiJ10/KFteYWRccyciI10uKz8pWyInXT9ccypcKShbXiciXXwkKS9pOwogICAgICAgICAgICBsZXQgYmdSZWdMb25nID0gL15ccyp1cmxcKFxzKlsiJ10/KFteYWRccyciI10uKz8pWyInXT9ccypcKShbXiciXXwkKS9pOwogICAgICAgICAgICBsZXQgcmVzdWx0LCB0YXJnZXRCZywgaGFzQmcgPSBub2RlID0+IHsKICAgICAgICAgICAgICAgIGlmKG5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PSAiSFRNTCIgfHwgbm9kZS5ub2RlTmFtZSA9PSAiI2RvY3VtZW50Iil7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG5vZGUuY2xpZW50V2lkdGggPD0gcHJlZnMuZmxvYXRCYXIubWluU2l6ZUxpbWl0LncgfHwgbm9kZS5jbGllbnRIZWlnaHQgPD0gcHJlZnMuZmxvYXRCYXIubWluU2l6ZUxpbWl0LmgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0YXJnZXRCZyA9ICIiOwogICAgICAgICAgICAgICAgbGV0IG5vZGVTdHlsZSA9IHVuc2FmZVdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5vZGUpOwoKICAgICAgICAgICAgICAgIGxldCBiZyA9IG5vZGVTdHlsZS5iYWNrZ3JvdW5kUmVwZWF0WCAhPSAicmVwZWF0IiAmJiBub2RlU3R5bGUuYmFja2dyb3VuZFJlcGVhdFkgIT0gInJlcGVhdCIgJiYgbm9kZVN0eWxlLmJhY2tncm91bmRJbWFnZTsKICAgICAgICAgICAgICAgIGlmIChiZyAmJiBiZyAhPT0gIm5vbmUiKSB7CiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QmcgPSBub2RlU3R5bGUuYmFja2dyb3VuZEltYWdlLm1hdGNoKGJnLmxlbmd0aCA+IDUwMCA/IGJnUmVnTG9uZyA6IGJnUmVnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0QmcpIHsKICAgICAgICAgICAgICAgICAgICBub2RlU3R5bGUgPSB1bnNhZmVXaW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCAiOjpiZWZvcmUiKTsKICAgICAgICAgICAgICAgICAgICBiZyA9IG5vZGVTdHlsZS5iYWNrZ3JvdW5kUmVwZWF0WCAhPSAicmVwZWF0IiAmJiBub2RlU3R5bGUuYmFja2dyb3VuZFJlcGVhdFkgIT0gInJlcGVhdCIgJiYgbm9kZVN0eWxlLmJhY2tncm91bmRJbWFnZTsKICAgICAgICAgICAgICAgICAgICBpZiAoYmcgJiYgYmcgIT09ICJub25lIikgewogICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRCZyA9IG5vZGVTdHlsZS5iYWNrZ3JvdW5kSW1hZ2UubWF0Y2goYmcubGVuZ3RoID4gNTAwID8gYmdSZWdMb25nIDogYmdSZWcpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0QmcpIHsKICAgICAgICAgICAgICAgICAgICBub2RlU3R5bGUgPSB1bnNhZmVXaW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCAiOjphZnRlciIpOwogICAgICAgICAgICAgICAgICAgIGJnID0gbm9kZVN0eWxlLmJhY2tncm91bmRSZXBlYXRYICE9ICJyZXBlYXQiICYmIG5vZGVTdHlsZS5iYWNrZ3JvdW5kUmVwZWF0WSAhPSAicmVwZWF0IiAmJiBub2RlU3R5bGUuYmFja2dyb3VuZEltYWdlOwogICAgICAgICAgICAgICAgICAgIGlmIChiZyAmJiBiZyAhPT0gIm5vbmUiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEJnID0gbm9kZVN0eWxlLmJhY2tncm91bmRJbWFnZS5tYXRjaChiZy5sZW5ndGggPiA1MDAgPyBiZ1JlZ0xvbmcgOiBiZ1JlZyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHRhcmdldEJnKSB7CiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QmcgPSB0YXJnZXRCZ1sxXS5yZXBsYWNlKC9cXCIvZywgJyInKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRCZzsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKHRhcmdldC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpICE9ICdJTUcnKSB7CiAgICAgICAgICAgICAgICBsZXQgbnNyYywgaW1nUE4sIGltZ1BBLCBpbWdQRSA9IFtdOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZFJ1bGUuZ2V0RXh0U3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5zcmMgPSBtYXRjaGVkUnVsZS5nZXRFeHRTcmMuY2FsbCh0YXJnZXQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoIW5zcmMgJiYgdGFyZ2V0LmhyZWYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaW1nUE4gPSB0YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGltZ1BOID0gaW1nUE4ucGFyZW50Tm9kZSB8fCBpbWdQTi5ob3N0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSsrID4gNSB8fCBpbWdQTi5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09ICdCT0RZJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdQRS5wdXNoKGltZ1BOKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBuc3JjID0gbWF0Y2hlZFJ1bGUuZ2V0WGhyTGluayh0YXJnZXQsIGltZ1BFKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoKGV4KSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3dFcnJvckluZm8oZXgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG5zcmMpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgYWxsOwogICAgICAgICAgICAgICAgICAgIGlmIChuc3JjICYmIG5zcmMuYWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsbCA9IG5zcmMuYWxsOwogICAgICAgICAgICAgICAgICAgICAgICBuc3JjID0gYWxsWzBdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBsZXQgc3JjID0gbnNyYywgaW1nU3JjID0gcHJlZnMuZmxvYXRCYXIubGlzdGVuQmcgJiYgaGFzQmcodGFyZ2V0KSA/IHRhcmdldEJnIDogbnNyYzsKICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShuc3JjKSAmJiBuc3JjLmxlbmd0aCA9PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGltZ1NyYyA9IG5zcmNbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA9IG5zcmNbMV07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghbWF0Y2hlZFJ1bGUueGhyTGluaykgewogICAgICAgICAgICAgICAgICAgICAgICBpbWdQTiA9IHRhcmdldDsKICAgICAgICAgICAgICAgICAgICAgICAgaW1nUEUgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltZ1BOLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT0gJ0EnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nUEEgPSBpbWdQTjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoaW1nUE4gPSBpbWdQTi5wYXJlbnROb2RlIHx8IGltZ1BOLmhvc3QpOwogICAgICAgICAgICAgICAgICAgICAgICBpbWdQTiA9IHRhcmdldDsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGltZ1BOID0gaW1nUE4ucGFyZW50Tm9kZSB8fCBpbWdQTi5ob3N0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1nUE4ubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PSAnQk9EWScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nUEUucHVzaChpbWdQTik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gbWF0Y2hlZFJ1bGUuZ2V0SW1hZ2UodGFyZ2V0LCBpbWdQQSwgaW1nUEUpIHx8IHNyYzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbGV0IG5vQWN0dWFsID0gc3JjID09PSBpbWdTcmM7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gewogICAgICAgICAgICAgICAgICAgICAgICBhbGw6IGFsbCB8fCBtYXRjaGVkUnVsZS5hbGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogc3JjLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBtYXRjaGVkUnVsZS54aHJMaW5rICYmIG5vQWN0dWFsID8gImxpbmsiIDogInJ1bGUiLAogICAgICAgICAgICAgICAgICAgICAgICBpbWdTcmM6IGltZ1NyYywKICAgICAgICAgICAgICAgICAgICAgICAgbm9BY3R1YWw6IG5vQWN0dWFsLAogICAgICAgICAgICAgICAgICAgICAgICBpbWc6IHRhcmdldCwKICAgICAgICAgICAgICAgICAgICAgICAgeGhyOiBtYXRjaGVkUnVsZS54aHIKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBjaGVja1VuaXF1ZUltZ1dpbiA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgbGV0IGludmVydCA9ICFjYW5QcmV2aWV3ICYmIHByZWZzLmZsb2F0QmFyLmdsb2JhbGtleXMuaW52ZXJ0SW5pdFNob3cgJiYgcHJlZnMuZmxvYXRCYXIuZ2xvYmFsa2V5cy50eXBlID09ICJob2xkIjsKICAgICAgICAgICAgICAgIGlmIChjYW5QcmV2aWV3IHx8IGludmVydCkgewogICAgICAgICAgICAgICAgICAgIGxldCBmb3JjZVNob3cgPSAoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnR5cGUgIT0gImxpbmsiICYmIHJlc3VsdC50eXBlICE9ICJydWxlIiAmJiByZXN1bHQuc3JjID09IHJlc3VsdC5pbWdTcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuaW1nQVMudyA8IHJlc3VsdC5pbWdDUy53ICogMS4zICYmIHJlc3VsdC5pbWdBUy5oIDwgcmVzdWx0LmltZ0NTLmggKiAxLjMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmltZyAmJiByZXN1bHQuaW1nLmNoaWxkRWxlbWVudENvdW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQudHlwZSA9PSAiZm9yY2UiKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmVmcy5mbG9hdEJhci5nbG9iYWxrZXlzLmludmVydEluaXRTaG93KSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3U2l6ZSA9IGdldFdpbmRvd1NpemUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJlZnMuZmxvYXRCYXIuZ2xvYmFsa2V5cy5pbnZlcnRJbml0U2hvdyAmJiByZXN1bHQuaW1nQVMudyA8PSB3U2l6ZS53ICYmIHJlc3VsdC5pbWdBUy5oIDw9IHdTaXplLmgpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9KSgpOwogICAgICAgICAgICAgICAgICAgIGlmIChmb3JjZVNob3cpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludmVydCkgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaW52ZXJ0KSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHVuaXF1ZUltZ1dpbkluaXRYID0gY2xpZW50WDsKICAgICAgICAgICAgICAgICAgICB1bmlxdWVJbWdXaW5Jbml0WSA9IGNsaWVudFk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHVuaXF1ZUltZ1dpbiAmJiAhdW5pcXVlSW1nV2luLnJlbW92ZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVuaXF1ZUltZ1dpbi5zcmMgPT0gcmVzdWx0LnNyYykgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHVuaXF1ZUltZ1dpbi5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgd2FpdFVudGlsTW92ZShfdGFyZ2V0LCAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBMb2FkaW5nQW5pbUMocmVzdWx0LCAncG9wdXAnLCBwcmVmcy53YWl0SW1nTG9hZCwgcHJlZnMuZnJhbWVzUGljT3BlbkluVG9wV2luZG93KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBpZiAoIXJlc3VsdCkgewogICAgICAgICAgICAgICAgaWYgKHRhcmdldC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpICE9ICdJTUcnICYmIHRhcmdldC5kYXRhc2V0LnJvbGUgPT0gImltZyIpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgaW1nID0gdGFyZ2V0LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignaW1nJyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGltZykgdGFyZ2V0ID0gaW1nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHRhcmdldC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09ICdJTUFHRScpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgc3JjID0gdGFyZ2V0LmhyZWYgJiYgdGFyZ2V0LmhyZWYuYmFzZVZhbDsKICAgICAgICAgICAgICAgICAgICBpZiAoc3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogc3JjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInJ1bGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3JjOiBzcmMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub0FjdHVhbDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZzogdGFyZ2V0LnBhcmVudE5vZGUKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpICE9ICdJTUcnKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbkNsaWVudFJlY3QgJiYKICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50WCA+IHNlbGVjdGlvbkNsaWVudFJlY3QubGVmdCAmJgogICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRYIDwgc2VsZWN0aW9uQ2xpZW50UmVjdC5sZWZ0ICsgc2VsZWN0aW9uQ2xpZW50UmVjdC53aWR0aCAmJgogICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRZID4gc2VsZWN0aW9uQ2xpZW50UmVjdC50b3AgJiYKICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50WSA8IHNlbGVjdGlvbkNsaWVudFJlY3QudG9wICsgc2VsZWN0aW9uQ2xpZW50UmVjdC5oZWlnaHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiBzZWxlY3Rpb25TdHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAibGluayIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTcmM6IHNlbGVjdGlvblN0ciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vQWN0dWFsOnRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWc6IHRhcmdldAogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBjaGVja1VuaXF1ZUltZ1dpbigpOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmbG9hdEJhcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRCYXIgPSBuZXcgRmxvYXRCYXJDKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRCYXIuc3RhcnQocmVzdWx0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09ICJBUkVBIikgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgdmFyIGJyb0VsZSwgYnJvSW1nOwogICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQubm9kZU5hbWUudG9VcHBlckNhc2UoKSAhPSAnQScgJiYgdGFyZ2V0LnBhcmVudE5vZGUgJiYgdGFyZ2V0LnBhcmVudE5vZGUuc3R5bGUgJiYgIS9mbGV4fGdyaWR8dGFibGUvLnRlc3QoZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQucGFyZW50Tm9kZSkuZGlzcGxheSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYnJvRWxlID0gdGFyZ2V0LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChicm9FbGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChicm9FbGUub2Zmc2V0V2lkdGggJiYgYnJvRWxlLm9mZnNldFdpZHRoID4gdGFyZ2V0Lm9mZnNldFdpZHRoPj4xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJyb0VsZS5ub2RlTmFtZSA9PSAiSU1HIikgYnJvSW1nID0gYnJvRWxlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJyb0VsZS5ub2RlTmFtZSA9PSAiUElDVFVSRSIpIGJyb0ltZyA9IGJyb0VsZS5xdWVyeVNlbGVjdG9yKCJpbWciKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZXRDb21wdXRlZFN0eWxlKGJyb0VsZSkucG9zaXRpb24gIT09ICJhYnNvbHV0ZSIpIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvRWxlID0gYnJvRWxlLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJyb0VsZSA9PSB0YXJnZXQpIGJyb0VsZSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFicm9FbGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb0VsZSA9IHRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoYnJvRWxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJyb0VsZS5vZmZzZXRXaWR0aCAmJiBicm9FbGUub2Zmc2V0V2lkdGggPiB0YXJnZXQub2Zmc2V0V2lkdGg+PjEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJyb0VsZS5ub2RlTmFtZSA9PSAiSU1HIikgYnJvSW1nID0gYnJvRWxlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChicm9FbGUubm9kZU5hbWUgPT0gIlBJQ1RVUkUiKSBicm9JbWcgPSBicm9FbGUucXVlcnlTZWxlY3RvcigiaW1nIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZXRDb21wdXRlZFN0eWxlKGJyb0VsZSkucG9zaXRpb24gPT0gImFic29sdXRlIikgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvRWxlID0gYnJvRWxlLm5leHRFbGVtZW50U2libGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChicm9FbGUgPT0gdGFyZ2V0KSBicm9FbGUgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2hpbGRyZW4ubGVuZ3RoID09IDEgJiYgISh0YXJnZXQudGV4dENvbnRlbnQgJiYgdGFyZ2V0LnRleHRDb250ZW50LnRyaW0oKSkgJiYgdGFyZ2V0LmNoaWxkcmVuWzBdLm5vZGVOYW1lID09ICJJTUciKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5jaGlsZHJlblswXTsKICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJlZnMuZmxvYXRCYXIubGlzdGVuQmcgJiYgaGFzQmcodGFyZ2V0KSkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3JjID0gdGFyZ2V0QmcsIG5zcmMgPSBzcmMsIG5vQWN0dWFsID0gdHJ1ZSwgdHlwZSA9ICJzY2FsZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogbnNyYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTcmM6IHNyYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vQWN0dWFsOm5vQWN0dWFsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nOiB0YXJnZXQKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYnJvSW1nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IGJyb0ltZzsKICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0Lm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT0gJ0NBTlZBUycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNyYyA9IHRhcmdldC5zcmMgfHwgdGFyZ2V0LmRhdGFzZXQuc3JjOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbnNyYyA9IHNyYywgbm9BY3R1YWwgPSB0cnVlLCB0eXBlID0gInNjYWxlIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM6IG5zcmMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTcmM6IHNyYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub0FjdHVhbDpub0FjdHVhbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWc6IHRhcmdldAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJlZnMuZmxvYXRCYXIubGlzdGVuQmcgJiYgYnJvRWxlICYmIGhhc0JnKGJyb0VsZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNyYyA9IHRhcmdldEJnLCBuc3JjID0gc3JjLCBub0FjdHVhbCA9IHRydWUsIHR5cGUgPSAic2NhbGUiOwogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM6IG5zcmMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nU3JjOiBzcmMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub0FjdHVhbDpub0FjdHVhbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZzogdGFyZ2V0CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC5wYXJlbnROb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWdzOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lID09ICdBJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1ncyA9IHRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1ncyAmJiBpbWdzLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBpbWdzWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC5wYXJlbnROb2RlLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT0gJ0lNRycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoZWNrRWxlID0gdGFyZ2V0OwogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZShjaGVja0VsZSAmJiAhKGNoZWNrRWxlLnRleHRDb250ZW50ICYmIGNoZWNrRWxlLnRleHRDb250ZW50LnRyaW0oKSkgJiYgY2hlY2tFbGUuY2hpbGRyZW4ubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja0VsZSA9IGNoZWNrRWxlLmNoaWxkcmVuWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrRWxlLm5vZGVOYW1lID09PSAiSU1HIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IGNoZWNrRWxlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hlY2tFbGUubm9kZU5hbWUgPT09ICJQSUNUVVJFIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IGNoZWNrRWxlLnF1ZXJ5U2VsZWN0b3IoImltZyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJlZnMuZmxvYXRCYXIubGlzdGVuQmcgJiYgaGFzQmcoY2hlY2tFbGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNyYyA9IHRhcmdldEJnLCBuc3JjID0gc3JjLCBub0FjdHVhbCA9IHRydWUsIHR5cGUgPSAic2NhbGUiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiBuc3JjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTcmM6IHNyYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9BY3R1YWw6bm9BY3R1YWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZzogY2hlY2tFbGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoIWZvdW5kICYmIHRhcmdldC5jaGlsZHJlbiAmJiB0YXJnZXQuY2hpbGRyZW5bMF0gJiYgdGFyZ2V0LmNoaWxkcmVuWzBdLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT0gJ0lNRycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltZyA9IHRhcmdldC5jaGlsZHJlblswXTsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGltZy5uZXh0RWxlbWVudFNpYmxpbmcgJiYgaW1nLm5leHRFbGVtZW50U2libGluZy5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09ICdJTUcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWcgPSBpbWcubmV4dEVsZW1lbnRTaWJsaW5nOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWN0ID0gaW1nLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsaWVudFkgPj0gcmVjdC50b3AgJiYgY2xpZW50WSA8PSByZWN0LmJvdHRvbSAmJiBjbGllbnRYID49IHJlY3QubGVmdCAgJiYgIGNsaWVudFggPD0gcmVjdC5yaWdodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gaW1nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghZm91bmQgJiYgZG9jdW1lbnQuZWxlbWVudHNGcm9tUG9pbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVsZW1lbnRzID0gZG9jdW1lbnQuZWxlbWVudHNGcm9tUG9pbnQoY2xpZW50WCwgY2xpZW50WSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGVja0xlbiA9IE1hdGgubWluKGVsZW1lbnRzLmxlbmd0aCwgMTApOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoZWNrTGVuOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbGUgPSBlbGVtZW50c1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWxlKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvXmltZyQvaS50ZXN0KGVsZS5ub2RlTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBlbGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByZWZzLmZsb2F0QmFyLmxpc3RlbkJnICYmIGhhc0JnKGVsZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBlbGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNyYyA9IHRhcmdldEJnLCBuc3JjID0gc3JjLCBub0FjdHVhbCA9IHRydWUsIHR5cGUgPSAic2NhbGUiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiBuc3JjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTcmM6IHNyYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9BY3R1YWw6bm9BY3R1YWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZzogdGFyZ2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpICE9ICdBJyAmJiBlbGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PSAnQ0FOVkFTJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcmMgPSBlbGUuc3JjIHx8IGVsZS5kYXRhc2V0LnNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IGVsZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5zcmMgPSBzcmMsIG5vQWN0dWFsID0gdHJ1ZSwgdHlwZSA9ICJzY2FsZSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogbnNyYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTcmM6IHNyYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vQWN0dWFsOm5vQWN0dWFsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nOiB0YXJnZXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCAmJiB0YXJnZXQuc2hhZG93Um9vdCkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1ncyA9IHRhcmdldC5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1ncy5sZW5ndGggPT09IDEpIHRhcmdldCA9IGltZ3NbMF07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghZm91bmQgJiYgcHJlZnMuZmxvYXRCYXIubGlzdGVuQmcgJiYgaGFzQmcodGFyZ2V0LnBhcmVudE5vZGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3JjID0gdGFyZ2V0QmcsIG5zcmMgPSBzcmMsIG5vQWN0dWFsID0gdHJ1ZSwgdHlwZSA9ICJzY2FsZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogbnNyYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdTcmM6IHNyYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vQWN0dWFsOm5vQWN0dWFsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nOiB0YXJnZXQKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICYmICEvXmRhdGE6L2kudGVzdChyZXN1bHQuc3JjKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZFJ1bGUucnVsZXMubGVuZ3RoID4gMCAmJiB0YXJnZXQubm9kZU5hbWUudG9VcHBlckNhc2UoKSAhPSAnSU1HJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNyYyA9IHJlc3VsdC5zcmMsIGltZyA9IHtzcmM6IHNyY30sIHR5cGUsIGltZ1NyYyA9IHNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltZ1BOPXRhcmdldDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1nUEEsaW1nUEU9W107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUoaW1nUE49aW1nUE4ucGFyZW50Tm9kZSB8fCBpbWdQTi5ob3N0KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW1nUE4ubm9kZU5hbWUudG9VcHBlckNhc2UoKT09J0EnKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1BBPWltZ1BOOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nUE49dGFyZ2V0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlKGltZ1BOPWltZ1BOLnBhcmVudE5vZGUgfHwgaW1nUE4uaG9zdCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGltZ1BOLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk9PSdCT0RZJyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdQRS5wdXNoKGltZ1BOKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3U3JjID0gbWF0Y2hlZFJ1bGUuZ2V0SW1hZ2UoaW1nLCBpbWdQQSwgaW1nUEUsIHRhcmdldCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1NyYyAmJiBpbWdTcmMgIT0gbmV3U3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcmNzLCBkZXNjcmlwdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gbmV3U3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzcmMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNzID0gc3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gc3Jjcy5zaGlmdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSAncnVsZSc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZFJ1bGUuZGVzY3JpcHRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkZXNjID0gbWF0Y2hlZFJ1bGUuZGVzY3JpcHRpb24sIGF0dHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkZXNjKSAmJiBkZXNjLmxlbmd0aCA9PT0gMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHIgPSBkZXNjWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2MgPSBkZXNjWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBnZXRFbGVtZW50TWl4KGRlc2MsIGltZyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gYXR0ciA/IG5vZGUuZ2V0QXR0cmlidXRlKGF0dHIpIDogKG5vZGUuZ2V0QXR0cmlidXRlKCd0aXRsZScpIHx8IG5vZGUudGV4dENvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hbGwgPSBtYXRjaGVkUnVsZS5hbGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zcmMgPSBzcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC50eXBlID0gdHlwZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lm5vQWN0dWFsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC54aHIgPSBtYXRjaGVkUnVsZS54aHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uIHx8ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC50eXBlICE9ICJydWxlIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRwcnVsZXMuZmluZChmdW5jdGlvbihydWxlLCBpbmRleCwgYXJyYXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA9IHJ1bGUuY2FsbChpbWcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNyYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcmMgJiYgc3JjICE9IGltZ1NyYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3JjID0gc3JjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQudHlwZSA9ICJ0cFJ1bGUiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQubm9BY3R1YWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghcmVzdWx0ICYmIHRhcmdldC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpICE9ICdJTUcnKSB7CiAgICAgICAgICAgICAgICBsZXQgaSA9IDA7CiAgICAgICAgICAgICAgICB3aGlsZSh0YXJnZXQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaSsrID4gNSkgewogICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCh0YXJnZXQubm9kZU5hbWUgPT0gJ0EnIHx8IHRhcmdldC5ub2RlTmFtZSA9PSAnYScpICYmIGltYWdlUmVnLnRlc3QodGFyZ2V0LmhyZWYpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgc3JjID0gdGFyZ2V0LmhyZWY7CiAgICAgICAgICAgICAgICAgICAgaWYgKC9bJlw/XXVybFw9Ly50ZXN0KHNyYykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gc3JjLnJlcGxhY2UoLy4qWyZcP111cmxcPSguKj8pKCYuKnwkKS8sICIkMSIpOwogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gZGVjb2RlVVJJQ29tcG9uZW50KHNyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvWyZcP11odHRwcz86Ly50ZXN0KHNyYykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gc3JjLnJlcGxhY2UoLy4qWyZcP10oaHR0cHM/OikvLCAiJDEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA9IGRlY29kZVVSSUNvbXBvbmVudChzcmMpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogc3JjLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAibGluayIsCiAgICAgICAgICAgICAgICAgICAgICAgIGltZ1NyYzogc3JjLAogICAgICAgICAgICAgICAgICAgICAgICBub0FjdHVhbDp0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICBpbWc6IHRhcmdldCwKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRhcmdldC50aXRsZSB8fCB0YXJnZXQuaW5uZXJUZXh0CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBjaGVja1VuaXF1ZUltZ1dpbigpOwoKICAgICAgICAgICAgICAgICAgICBpZiAoIWZsb2F0QmFyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0QmFyID0gbmV3IEZsb2F0QmFyQygpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBmbG9hdEJhci5zdGFydChyZXN1bHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgc2l6ZUhpZGUgPSBmYWxzZTsKICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHsKICAgICAgICAgICAgICAgIHByZXRyZWF0bWVudCh0YXJnZXQpCiAgICAgICAgICAgICAgICByZXN1bHQgPSBmaW5kUGljKHRhcmdldCk7CiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5pbWdBUyAmJiAhcmVzdWx0LmltZ0NTKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHNpemVJbmZvID0gewogICAgICAgICAgICAgICAgICAgICAgICB3OiByZXN1bHQuaW1nLm9mZnNldFdpZHRoIHx8IHJlc3VsdC5pbWcuc2Nyb2xsV2lkdGggfHwgdGFyZ2V0Lm9mZnNldFdpZHRoIHx8IHRhcmdldC5zY3JvbGxXaWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgaDogcmVzdWx0LmltZy5vZmZzZXRIZWlnaHQgfHwgcmVzdWx0LmltZy5zY3JvbGxIZWlnaHQgfHwgdGFyZ2V0Lm9mZnNldEhlaWdodCB8fCB0YXJnZXQuc2Nyb2xsSGVpZ2h0CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5pbWdBUyA9IHNpemVJbmZvOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5pbWdDUyA9IHNpemVJbmZvOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHByZWZzLmZsb2F0QmFyLnNob3dXaXRoUnVsZXMgJiYgKHJlc3VsdC50eXBlID09ICJydWxlIiB8fCByZXN1bHQudHlwZSA9PSAidHBSdWxlIikpIHsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIShyZXN1bHQuaW1nQVMudyA9PSByZXN1bHQuaW1nQ1MudyAmJiByZXN1bHQuaW1nQVMuaCA9PSByZXN1bHQuaW1nQ1MuaCkpIHsvL+WmguaenOS4jeaYr+S4pOiAheWujOWFqOebuOetiSzpgqPkuYjooqvnvKnmlL7kuoYuCiAgICAgICAgICAgICAgICAgICAgaWYgKHByZWZzLmZsb2F0QmFyLnNpemVMaW1pdE9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuaW1nQ1MuaCA8PSBwcmVmcy5mbG9hdEJhci5taW5TaXplTGltaXQuaCAmJiByZXN1bHQuaW1nQ1MudyA8PSBwcmVmcy5mbG9hdEJhci5taW5TaXplTGltaXQudykgey8v5pyA5bCP6ZmQ5a6a5Yik5patLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZUhpZGUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuaW1nQ1MuaCA8PSBwcmVmcy5mbG9hdEJhci5taW5TaXplTGltaXQuaCB8fCByZXN1bHQuaW1nQ1MudyA8PSBwcmVmcy5mbG9hdEJhci5taW5TaXplTGltaXQudykgey8v5pyA5bCP6ZmQ5a6a5Yik5patLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZUhpZGUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZiAocHJlZnMuZmxvYXRCYXIuc2l6ZUxpbWl0T3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5pbWdDUy53IDw9IHByZWZzLmZsb2F0QmFyLmZvcmNlU2hvdy5zaXplLncgJiYgcmVzdWx0LmltZ0NTLmggPD0gcHJlZnMuZmxvYXRCYXIuZm9yY2VTaG93LnNpemUuaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZUhpZGUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5pbWdDUy53IDw9IHByZWZzLmZsb2F0QmFyLmZvcmNlU2hvdy5zaXplLncgfHwgcmVzdWx0LmltZ0NTLmggPD0gcHJlZnMuZmxvYXRCYXIuZm9yY2VTaG93LnNpemUuaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZUhpZGUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZGVidWcocmVzdWx0KTsKICAgICAgICAgICAgICAgIGlmICghcmVzdWx0Lm5vQWN0dWFsKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuc3JjcykgewogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3JjcyA9IFtyZXN1bHQuaW1nU3JjXTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmltZ1NyYyAmJiByZXN1bHQuc3Jjcy5qb2luKCIgIikuaW5kZXhPZihyZXN1bHQuaW1nU3JjKSA9PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNyY3MucHVzaChyZXN1bHQuaW1nU3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghZmxvYXRCYXIpIHsKICAgICAgICAgICAgICAgICAgICBmbG9hdEJhciA9IG5ldyBGbG9hdEJhckMoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChyZXN1bHQudHlwZSA9PSAncnVsZScgJiYgbWF0Y2hlZFJ1bGUuY2xpY2tUb09wZW4gJiYgbWF0Y2hlZFJ1bGUuY2xpY2tUb09wZW4uZW5hYmxlZCkgewogICAgICAgICAgICAgICAgICAgIGlmIChjYW5jbGVQcmVDVE8pIHsvL+WPlua2iOS4iuasoeeahO+8jOmYsuatouS4gOasoeeCueWHu+aJk+W8gOWkmuW8oOWbvueJhwogICAgICAgICAgICAgICAgICAgICAgICBjYW5jbGVQcmVDVE8oKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY2FuY2xlUHJlQ1RPID0gY2xpY2tUb09wZW4ocmVzdWx0KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBsZXQgaGlkZSA9IHNpemVIaWRlIHx8IChwcmVmcy5mbG9hdEJhci5wb3NpdGlvbiA9PSAiaGlkZSIgPyB0cnVlIDogYWx0S2V5KTsKICAgICAgICAgICAgICAgIHJlc3VsdC5oaWRlID0gaGlkZTsKICAgICAgICAgICAgICAgIGxldCBjYW5TaG93ID0gZmxvYXRCYXIuc3RhcnQocmVzdWx0KTsKICAgICAgICAgICAgICAgIGlmICghY2hlY2tVbmlxdWVJbWdXaW4oKSAmJiBjYW5TaG93KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZsb2F0QmFyLmZsb2F0QmFyLnN0eWxlLm9wYWNpdHkgPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdEJhci5mbG9hdEJhci5zdHlsZS5vcGFjaXR5ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZsb2F0QmFyLmZsb2F0QmFyLnN0eWxlLmRpc3BsYXkgPSAiaW5pdGlhbCI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBjaGVja0Zsb2F0QmFyVGltZXIsIGluaXRNb3VzZSA9IGZhbHNlOwogICAgICAgIGZ1bmN0aW9uIGdsb2JhbE1vdXNlb3ZlckhhbmRsZXIoZSkgewogICAgICAgICAgICBpZiAoZ2FsbGVyeU1vZGUpIHJldHVybjsvL+W6k+aooeW8j+WFqOWxj+S4rS4uLi4uLgogICAgICAgICAgICBpZiAoZS50YXJnZXQgPT0gSW1nV2luZG93Qy5vdmVybGF5ZXIpIHJldHVybjsKICAgICAgICAgICAgbGV0IGNhblByZXZpZXcgPSBjaGVja1ByZXZpZXcoZSk7CiAgICAgICAgICAgIGlmIChlLnR5cGUgPT0gIm1vdXNlbW92ZSIpIHsKICAgICAgICAgICAgICAgIGlmICghaW5pdE1vdXNlKSB7CiAgICAgICAgICAgICAgICAgICAgaW5pdE1vdXNlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoKHVuaXF1ZUltZ1dpbiAmJiAhdW5pcXVlSW1nV2luLnJlbW92ZWQgJiYgIXVuaXF1ZUltZ1dpbi5wcmV2aWV3ZWQpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNhblByZXZpZXcgfHwgcHJlZnMuZmxvYXRCYXIuZ2xvYmFsa2V5cy5pbnZlcnRJbml0U2hvdykgewogICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWVJbWdXaW5Jbml0WCA9IGUuY2xpZW50WDsKICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlSW1nV2luSW5pdFkgPSBlLmNsaWVudFk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVuaXF1ZUltZ1dpbi5mb2xsb3dQb3ModW5pcXVlSW1nV2luSW5pdFgsIHVuaXF1ZUltZ1dpbkluaXRZKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWVJbWdXaW4ucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFjYW5QcmV2aWV3KSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldCA9IGUudGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQubm9kZU5hbWUgPT0gIlBJQ1RVUkUiKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0Lmxhc3RFbGVtZW50Q2hpbGQgfHwgdGFyZ2V0OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lICE9ICdJTUcnKSByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFpbml0TW91c2UpIHJldHVybjsKICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNoZWNrRmxvYXRCYXJUaW1lcik7CiAgICAgICAgICAgIGNoZWNrRmxvYXRCYXJUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBpZiAoIWUgfHwgIWUudGFyZ2V0IHx8ICFlLnRhcmdldC5wYXJlbnROb2RlKSByZXR1cm47CiAgICAgICAgICAgICAgICBpZiAoZ2FsbGVyeSAmJiBnYWxsZXJ5LnNob3duKSByZXR1cm47CiAgICAgICAgICAgICAgICBjaGVja0Zsb2F0QmFyKGUudGFyZ2V0LCBlLnR5cGUsIGNhblByZXZpZXcsIGUuY2xpZW50WCwgZS5jbGllbnRZLCBlLmFsdEtleSk7CiAgICAgICAgICAgIH0sIDUwKTsKICAgICAgICB9CgogICAgICAgIHZhciBzZWxlY3Rpb25DbGllbnRSZWN0LCBzZWxlY3Rpb25TdHIsIHNlbGVjdGlvbkNoYW5naW5nID0gZmFsc2U7CiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0aW9uY2hhbmdlJywgZSA9PiB7CiAgICAgICAgICAgIGlmIChzZWxlY3Rpb25DaGFuZ2luZykgcmV0dXJuOwogICAgICAgICAgICBzZWxlY3Rpb25DaGFuZ2luZyA9IHRydWU7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgc2VsZWN0aW9uQ2hhbmdpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTsKICAgICAgICAgICAgICAgIHNlbGVjdGlvblN0ciA9IHNlbGVjdGlvbi50b1N0cmluZygpOwogICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvblN0ciAmJiBzZWxlY3Rpb25TdHIubGVuZ3RoIDwgNTAwKSBzZWxlY3Rpb25TdHIgPSBzZWxlY3Rpb25TdHIudHJpbSgpLnJlcGxhY2UoL150P3Q/cD9zPzovLCAiaHR0cHM6Iik7CiAgICAgICAgICAgICAgICBlbHNlIHNlbGVjdGlvblN0ciA9ICcnOwogICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvblN0ciAmJiBpbWFnZVJlZy50ZXN0KHNlbGVjdGlvblN0cikpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCByYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApOwogICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbkNsaWVudFJlY3QgPSByYW5nZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uQ2xpZW50UmVjdCA9IG51bGw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgfSk7CgogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBlID0+IHsKICAgICAgICAgICAgaW5pdE1vdXNlID0gZmFsc2U7CiAgICAgICAgfSk7CgogICAgICAgIHZhciBjdXJMb2FkaW5nTWVkaWE7CiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2VjdXJpdHlwb2xpY3l2aW9sYXRpb24nLCAoZSkgPT4gewogICAgICAgICAgICBpZiAoIWUudmlvbGF0ZWREaXJlY3RpdmUuaW5jbHVkZXMoJ21lZGlhLXNyYycpKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGN1ckxvYWRpbmdNZWRpYSAmJiBjdXJMb2FkaW5nTWVkaWEuc3JjID09IGUuYmxvY2tlZFVSSSkgewogICAgICAgICAgICAgICAgX0dNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgICAgIHVybDogY3VyTG9hZGluZ01lZGlhLnNyYywKICAgICAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICdibG9iJywKICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2JVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHJlc3BvbnNlLnJlc3BvbnNlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxvYWRpbmdNZWRpYS5zcmMgPSBibG9iVXJsOwogICAgICAgICAgICAgICAgICAgICAgICBjdXJMb2FkaW5nTWVkaWEubG9hZCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdXJMb2FkaW5nTWVkaWEucGxheSgpLmNhdGNoKGVyciA9PiBjb25zb2xlLndhcm4oJ1tDU1AgRml4ZXJdIEF1dG9wbGF5IGFmdGVyIGZpeCB3YXMgYmxvY2tlZC4nLCBlcnIpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbGVhc2VCbG9iID0gKCkgPT4gVVJMLnJldm9rZU9iamVjdFVSTChibG9iVXJsKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3VyTG9hZGluZ01lZGlhLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgcmVsZWFzZUJsb2IpOwogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgcmVsZWFzZUJsb2IpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgZnVuY3Rpb24gY3JlYXRlVmlkZW8oKSB7CiAgICAgICAgICAgIGxldCBtZWRpYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7CiAgICAgICAgICAgIG1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoL15ibG9iOi8udGVzdChtZWRpYS5zcmMpKSByZXR1cm47CiAgICAgICAgICAgICAgICBfR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgICAgICAgICAgICAgdXJsOiBtZWRpYS5zcmMsCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicsCiAgICAgICAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChyZXNwb25zZS5yZXNwb25zZSk7CgogICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5zcmMgPSBibG9iVXJsOwogICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5sb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhLnBsYXkoKS5jYXRjaChlcnIgPT4gY29uc29sZS53YXJuKCdbQ1NQIEZpeGVyXSBBdXRvcGxheSBhZnRlciBmaXggd2FzIGJsb2NrZWQuJywgZXJyKSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWxlYXNlQmxvYiA9ICgpID0+IFVSTC5yZXZva2VPYmplY3RVUkwoYmxvYlVybCk7CiAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgcmVsZWFzZUJsb2IpOwogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgcmVsZWFzZUJsb2IpOwogICAgICAgICAgICAgICAgICAgICAgICBjdXJMb2FkaW5nTWVkaWEgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIG1lZGlhOwogICAgICAgIH0KCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gaW5wdXQoc2VsLCB2KSB7CiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgY2hlY2tJbnYgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWwpOwogICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dCkgewogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpOwogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5zY3JvbGxJbnRvVmlldygpOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdFZhbHVlID0gaW5wdXQudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5ub2RlTmFtZSA9PSAiSU5QVVQiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmF0aXZlSW5wdXRWYWx1ZVNldHRlciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93LkhUTUxJbnB1dEVsZW1lbnQucHJvdG90eXBlLCAidmFsdWUiKS5zZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXRpdmVJbnB1dFZhbHVlU2V0dGVyLmNhbGwoaW5wdXQsIHYpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hdGl2ZVRleHRhcmVhVmFsdWVTZXR0ZXIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHdpbmRvdy5IVE1MVGV4dEFyZWFFbGVtZW50LnByb3RvdHlwZSwgInZhbHVlIikuc2V0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF0aXZlVGV4dGFyZWFWYWx1ZVNldHRlci5jYWxsKGlucHV0LCB2KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXZlbnQgPSBuZXcgRXZlbnQoJ2ZvY3VzJywgeyBidWJibGVzOiB0cnVlIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQgPSBuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdHJhY2tlciA9IGlucHV0Ll92YWx1ZVRyYWNrZXI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFja2VyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFja2VyLnNldFZhbHVlKGxhc3RWYWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50ID0gbmV3IEV2ZW50KCdjaGFuZ2UnLCB7IGJ1YmJsZXM6IHRydWUgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGNoZWNrSW52KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZW11Q2xpY2soYnRuKXsKICAgICAgICAgICAgaWYoIVBvaW50ZXJFdmVudClyZXR1cm4gYnRuLmNsaWNrKCk7CiAgICAgICAgICAgIGxldCBldmVudFBhcmFtPXsKICAgICAgICAgICAgICAgIGlzVHJ1c3RlZDogdHJ1ZSwKICAgICAgICAgICAgICAgIGFsdEtleTogZmFsc2UsCiAgICAgICAgICAgICAgICBhemltdXRoQW5nbGU6IDAsCiAgICAgICAgICAgICAgICBidWJibGVzOiB0cnVlLAogICAgICAgICAgICAgICAgYnV0dG9uOiAwLAogICAgICAgICAgICAgICAgYnV0dG9uczogMCwKICAgICAgICAgICAgICAgIGNsaWVudFg6IDEsCiAgICAgICAgICAgICAgICBjbGllbnRZOiAxLAogICAgICAgICAgICAgICAgY2FuY2VsQnViYmxlOiBmYWxzZSwKICAgICAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWUsCiAgICAgICAgICAgICAgICBjb21wb3NlZDogdHJ1ZSwKICAgICAgICAgICAgICAgIGN0cmxLZXk6IGZhbHNlLAogICAgICAgICAgICAgICAgZGVmYXVsdFByZXZlbnRlZDogZmFsc2UsCiAgICAgICAgICAgICAgICBkZXRhaWw6IDEsCiAgICAgICAgICAgICAgICBldmVudFBoYXNlOiAyLAogICAgICAgICAgICAgICAgZnJvbUVsZW1lbnQ6IG51bGwsCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEsCiAgICAgICAgICAgICAgICBpc1ByaW1hcnk6IGZhbHNlLAogICAgICAgICAgICAgICAgbWV0YUtleTogZmFsc2UsCiAgICAgICAgICAgICAgICBwb2ludGVySWQ6IDEsCiAgICAgICAgICAgICAgICBwb2ludGVyVHlwZTogIm1vdXNlIiwKICAgICAgICAgICAgICAgIHByZXNzdXJlOiAwLAogICAgICAgICAgICAgICAgcmVsYXRlZFRhcmdldDogbnVsbCwKICAgICAgICAgICAgICAgIHJldHVyblZhbHVlOiB0cnVlLAogICAgICAgICAgICAgICAgc2hpZnRLZXk6IGZhbHNlLAogICAgICAgICAgICAgICAgdG9FbGVtZW50OiBudWxsLAogICAgICAgICAgICAgICAgdHdpc3Q6IDAsCiAgICAgICAgICAgICAgICB3aGljaDogMQogICAgICAgICAgICB9OwogICAgICAgICAgICBidG4uZm9jdXMoKTsKICAgICAgICAgICAgdmFyIG1vdXNlY2xpY2sgPSBuZXcgUG9pbnRlckV2ZW50KCJtb3VzZW92ZXIiLGV2ZW50UGFyYW0pOwogICAgICAgICAgICBidG4uZGlzcGF0Y2hFdmVudChtb3VzZWNsaWNrKTsKICAgICAgICAgICAgbW91c2VjbGljayA9IG5ldyBQb2ludGVyRXZlbnQoInBvaW50ZXJvdmVyIixldmVudFBhcmFtKTsKICAgICAgICAgICAgYnRuLmRpc3BhdGNoRXZlbnQobW91c2VjbGljayk7CiAgICAgICAgICAgIG1vdXNlY2xpY2sgPSBuZXcgUG9pbnRlckV2ZW50KCJtb3VzZWRvd24iLGV2ZW50UGFyYW0pOwogICAgICAgICAgICBidG4uZGlzcGF0Y2hFdmVudChtb3VzZWNsaWNrKTsKICAgICAgICAgICAgbW91c2VjbGljayA9IG5ldyBQb2ludGVyRXZlbnQoInBvaW50ZXJkb3duIixldmVudFBhcmFtKTsKICAgICAgICAgICAgYnRuLmRpc3BhdGNoRXZlbnQobW91c2VjbGljayk7CiAgICAgICAgICAgIG1vdXNlY2xpY2sgPSBuZXcgUG9pbnRlckV2ZW50KCJtb3VzZXVwIixldmVudFBhcmFtKTsKICAgICAgICAgICAgYnRuLmRpc3BhdGNoRXZlbnQobW91c2VjbGljayk7CiAgICAgICAgICAgIG1vdXNlY2xpY2sgPSBuZXcgUG9pbnRlckV2ZW50KCJwb2ludGVydXAiLGV2ZW50UGFyYW0pOwogICAgICAgICAgICBidG4uZGlzcGF0Y2hFdmVudChtb3VzZWNsaWNrKTsKICAgICAgICAgICAgYnRuLmNsaWNrKCk7CiAgICAgICAgfQoKICAgICAgICBhc3luYyBmdW5jdGlvbiBjbGlja0VsZShzZWwsIGZhaWxBY3Rpb24pIHsKICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICAgICAgICAgIGxldCBjaGVja0ludiA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgZWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWwpOwogICAgICAgICAgICAgICAgICAgIGlmIChlbGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChjaGVja0ludik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVtdUNsaWNrKGVsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihmYWlsQWN0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxBY3Rpb24oKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHNsZWVwKHRpbWUpIHsKICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgICAgIH0sIHRpbWUpOwogICAgICAgICAgICB9KQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaXNLZXlEb3duRWZmZWN0aXZlVGFyZ2V0KHRhcmdldCkgewogICAgICAgICAgICB2YXIgbG9jYWxOYW1lID0gKHRhcmdldC5zaGFkb3dSb290ID8gKHRhcmdldC5zaGFkb3dSb290LmFjdGl2ZUVsZW1lbnQgfHwgdGFyZ2V0KSA6IHRhcmdldCkubG9jYWxOYW1lOwoKICAgICAgICAgICAgLy8g56Gu5L+d5YWJ5qCH5LiN5piv5a6a5L2N5Zyo5paH5a2X6L6T5YWl5qGG5oiW6YCJ5oup5qGGCiAgICAgICAgICAgIGlmIChsb2NhbE5hbWUgPT0gJ3RleHRhcmVhJyB8fCBsb2NhbE5hbWUgPT0gJ2lucHV0JyB8fCBsb2NhbE5hbWUgPT0gJ3NlbGVjdCcpewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyDop4bpopHmkq3mlL7lmagKICAgICAgICAgICAgaWYgKGxvY2FsTmFtZSA9PSAnb2JqZWN0JyB8fCBsb2NhbE5hbWUgPT0gJ2VtYmVkJyl7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIOeZvuW6pui0tOWQp+WbnuWkjei+k+WFpeeahOmXrumimAogICAgICAgICAgICBpZiAodGFyZ2V0LmdldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJykgPT0gJ3RydWUnKXsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBhc3luYyBmdW5jdGlvbiBvcGVuR2FsbGVyeSgpewogICAgICAgICAgICBpZighZ2FsbGVyeSl7CiAgICAgICAgICAgICAgICBnYWxsZXJ5PW5ldyBHYWxsZXJ5QygpOwogICAgICAgICAgICAgICAgZ2FsbGVyeS5kYXRhPVtdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBhbGxEYXRhPWF3YWl0IGdhbGxlcnkuZ2V0QWxsVmFsaWRJbWdzKCk7CiAgICAgICAgICAgIGlmKGFsbERhdGEubGVuZ3RoPDEpcmV0dXJuOwogICAgICAgICAgICBnYWxsZXJ5LmRhdGE9YWxsRGF0YTsKICAgICAgICAgICAgZ2FsbGVyeS5sb2FkKGdhbGxlcnkuZGF0YSk7CiAgICAgICAgICAgIHJldHVybiBnYWxsZXJ5OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0QWN0aXZlRWxlbWVudChyb290KSB7CiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUVsID0gcm9vdC5hY3RpdmVFbGVtZW50OwogICAgICAgICAgICBpZiAoIWFjdGl2ZUVsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoYWN0aXZlRWwuc2hhZG93Um9vdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGdldEFjdGl2ZUVsZW1lbnQoYWN0aXZlRWwuc2hhZG93Um9vdCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYWN0aXZlRWw7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGlucHV0QWN0aXZlKGRvYykgewogICAgICAgICAgICBsZXQgYWN0aXZlRWwgPSBnZXRBY3RpdmVFbGVtZW50KGRvYyk7CiAgICAgICAgICAgIGlmIChhY3RpdmVFbCAmJgogICAgICAgICAgICAgICAgKCgvSU5QVVR8VEVYVEFSRUEvaS50ZXN0KGFjdGl2ZUVsLm5vZGVOYW1lKSAmJgogICAgICAgICAgICAgICAgICBhY3RpdmVFbC5nZXRBdHRyaWJ1dGUoImFyaWEtcmVhZG9ubHkiKSAhPSAidHJ1ZSIKICAgICAgICAgICAgICAgICApIHx8CiAgICAgICAgICAgICAgICAgYWN0aXZlRWwuY29udGVudEVkaXRhYmxlID09ICd0cnVlJwogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgd2hpbGUgKGFjdGl2ZUVsICYmIGFjdGl2ZUVsLm5vZGVOYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUVsLmNvbnRlbnRFZGl0YWJsZSA9PSAndHJ1ZScpIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVFbC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09ICdCT0RZJykgewogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWwgPSBhY3RpdmVFbC5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGtleWRvd24oZXZlbnQpIHsKCiAgICAgICAgICAgIC8vaWYgKEltZ1dpbmRvd0Muc2hvd2luZykgcmV0dXJuOwogICAgICAgICAgICBpZiAoZ2FsbGVyeSAmJiBnYWxsZXJ5LnNob3duKSByZXR1cm47CiAgICAgICAgICAgIGlmIChpbnB1dEFjdGl2ZShkb2N1bWVudCkpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIga2V5ID0gZXZlbnQua2V5OwogICAgICAgICAgICBpZihjaGVja0dsb2JhbEtleWRvd24oZXZlbnQpKXsKICAgICAgICAgICAgICAgIGlmKHByZWZzLmZsb2F0QmFyLmtleXMuZW5hYmxlICYmIGtleT09cHJlZnMuZmxvYXRCYXIua2V5cy5nYWxsZXJ5KXsKICAgICAgICAgICAgICAgICAgICBvcGVuR2FsbGVyeSgpOwogICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsRnVuY0VuYWJsZWQgPSAhZ2xvYmFsRnVuY0VuYWJsZWQ7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9ZWxzZSBpZigoIWdhbGxlcnkgfHwgKCFnYWxsZXJ5LnNob3duICYmICFnYWxsZXJ5Lm1pbmltaXplZCkpICYmIHByZWZzLmZsb2F0QmFyLmdsb2JhbGtleXMudHlwZSA9PSAicHJlc3MiKXsKICAgICAgICAgICAgICAgICAgICBnbG9iYWxGdW5jRW5hYmxlZCA9ICFnbG9iYWxGdW5jRW5hYmxlZDsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIXByZWZzLmZsb2F0QmFyLmtleXMuZW5hYmxlKXsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGV2ZW50KSB7CiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCkpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZmxvYXRCYXIgJiYgaXNLZXlEb3duRWZmZWN0aXZlVGFyZ2V0KGV2ZW50LnRhcmdldCkpIHsKICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHByZWZzLmZsb2F0QmFyLmtleXMpLnNvbWUoZnVuY3Rpb24oYWN0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PSAnZW5hYmxlJyB8fCBhY3Rpb24gPT0gJ3NlYXJjaCcpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09IHByZWZzLmZsb2F0QmFyLmtleXNbYWN0aW9uXSkgewogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdEJhci5vcGVuKGV2ZW50LCBhY3Rpb24pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24ga2V5dXAoZXZlbnQpIHsKICAgICAgICAgICAgbGV0IGlzRnVuY0tleSA9ICFldmVudC5pc1RydXN0ZWQgfHwgZXZlbnQua2V5ID09ICdBbHQnIHx8IGV2ZW50LmtleSA9PSAnQ29udHJvbCcgfHwgZXZlbnQua2V5ID09ICdNZXRhJzsKICAgICAgICAgICAgaWYoaXNGdW5jS2V5ICYmIChwcmVmcy5mbG9hdEJhci5nbG9iYWxrZXlzLnR5cGUgPT0gImhvbGQiIHx8ICFjaGVja1ByZXZpZXcoZXZlbnQpKSAmJiAodW5pcXVlSW1nV2luICYmICF1bmlxdWVJbWdXaW4ucmVtb3ZlZCkpewogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNoZWNrRmxvYXRCYXJUaW1lcik7CiAgICAgICAgICAgICAgICBpZihwcmVmcy5mbG9hdEJhci5nbG9iYWxrZXlzLmNsb3NlQWZ0ZXJQcmV2aWV3KXsKICAgICAgICAgICAgICAgICAgICBpZiAodW5pcXVlSW1nV2luKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVuaXF1ZUltZ1dpbi5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICB1bmlxdWVJbWdXaW4uZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICB1bmlxdWVJbWdXaW4uaW1nV2luZG93LmNsYXNzTGlzdC5yZW1vdmUoInB2LXBpYy13aW5kb3ctdHJhbnNpdGlvbi1hbGwiKTsKICAgICAgICAgICAgICAgICAgICB1bmlxdWVJbWdXaW4uaW1nV2luZG93LmNsYXNzTGlzdC5yZW1vdmUoInByZXZpZXciKTsKICAgICAgICAgICAgICAgICAgICB1bmlxdWVJbWdXaW4ucHJldmlld2VkPXRydWU7CiAgICAgICAgICAgICAgICAgICAgdW5pcXVlSW1nV2luID0gbnVsbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlRWxlRnJvbUpzb24oanNvbikgewogICAgICAgICAgICBsZXQgY29sbGVjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsKICAgICAgICAgICAganNvbi5mb3JFYWNoKGRhdGEgPT4gewogICAgICAgICAgICAgICAgaWYgKC9ec2NyaXB0L2kudGVzdChkYXRhLm5vZGUpKSByZXR1cm47CiAgICAgICAgICAgICAgICBsZXQgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChkYXRhLm5vZGUpOwogICAgICAgICAgICAgICAgaWYgKGRhdGEudGV4dCkgewogICAgICAgICAgICAgICAgICAgIGVsZS5pbm5lclRleHQgPSBkYXRhLnRleHQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoZGF0YS5hdHRyKSB7CiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZGF0YS5hdHRyKS5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvXm9uL2kudGVzdChrZXkpKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoa2V5LCBkYXRhLmF0dHJba2V5XSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jaGlsZHJlbikgewogICAgICAgICAgICAgICAgICAgIGxldCBjaGlsZHJlbiA9IGNyZWF0ZUVsZUZyb21Kc29uKGRhdGEuY2hpbGRyZW4pOwogICAgICAgICAgICAgICAgICAgIGVsZS5hcHBlbmRDaGlsZChjaGlsZHJlbik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLmFwcGVuZENoaWxkKGVsZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbjsKICAgICAgICB9CgogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlTWVzc2FnZSwgdHJ1ZSk7CgogICAgICAgIGFkZFBhZ2VTY3JpcHQoKTsKCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBrZXl1cCwgZmFsc2UpOwogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBnbG9iYWxNb3VzZW92ZXJIYW5kbGVyLCB0cnVlKTsKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBnbG9iYWxNb3VzZW92ZXJIYW5kbGVyLCB0cnVlKTsKCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLGU9PnsKICAgICAgICAgICAgaWYgKGUucmVsYXRlZFRhcmdldCA9PSBJbWdXaW5kb3dDLm92ZXJsYXllcikgcmV0dXJuOwogICAgICAgICAgICBpZih1bmlxdWVJbWdXaW4gJiYgIXVuaXF1ZUltZ1dpbi5yZW1vdmVkKXsKICAgICAgICAgICAgICAgIGlmKGNoZWNrUHJldmlldyhlKSl7CiAgICAgICAgICAgICAgICAgICAgbGV0IHNob3dBcmVhPXVuaXF1ZUltZ1dpbi5kYXRhLmltZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgICAgICAgICBpZihlLmNsaWVudFggPCBzaG93QXJlYS5sZWZ0ICsgMjAgfHwKICAgICAgICAgICAgICAgICAgICAgIGUuY2xpZW50WCA+IHNob3dBcmVhLnJpZ2h0IC0gMjAgfHwKICAgICAgICAgICAgICAgICAgICAgIGUuY2xpZW50WSA8IHNob3dBcmVhLnRvcCArIDIwIHx8CiAgICAgICAgICAgICAgICAgICAgICBlLmNsaWVudFkgPiBzaG93QXJlYS5ib3R0b20gLSAyMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHVuaXF1ZUltZ1dpbiAmJiB1bmlxdWVJbWdXaW4ucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwgdHJ1ZSk7CiAgICAgICAgdmFyIGVkaXRTaXRlc0Z1bmM9ewogICAgICAgICAgICAiTHVuYXBpYyI6IChzcmMsIGluaXRPcGVuKSA9PiB7CiAgICAgICAgICAgICAgICBfR01fb3BlbkluVGFiKCdodHRwczovL3d3dy5sdW5hcGljLmNvbS9lZGl0b3IvaW5kZXgucGhwP2FjdGlvbj11cmwmdXJsPScgKyBzcmMsIHthY3RpdmU6dHJ1ZX0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICAiUGl4bHIgZWFzeSI6IGFzeW5jIChzcmMsIGluaXRPcGVuKSA9PiB7CiAgICAgICAgICAgICAgICBpZihpbml0T3Blbil7CiAgICAgICAgICAgICAgICAgICAgc3RvcmFnZS5zZXRJdGVtKCJlZGl0VXJsIiwgc3JjKTsKICAgICAgICAgICAgICAgICAgICBfR01fb3BlbkluVGFiKCdodHRwczovL3BpeGxyLmNvbS94LycsIHthY3RpdmU6dHJ1ZX0pOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgc3RvcmFnZS5zZXRJdGVtKCJlZGl0VXJsIiwgIiIpOwogICAgICAgICAgICAgICAgICAgIGlmKC9eaHR0cHM6XC9cL3BpeGxyXC5jb21cLy8udGVzdChsb2NhdGlvbi5ocmVmKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNsZWVwKDEwMDApOwogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjbGlja0VsZSgnI3NwbGFzaC1maWxlLW1lbnUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2xpY2tFbGUoJyNzcGxhc2gtZmlsZS11cmwnKTsKICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgaW5wdXQoJyNpbWFnZS11cmwnLCBzcmMpOwogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjbGlja0VsZSgnLmRpYWxvZz4uYnV0dG9ucz5hLmJ1dHRvbi5wb3NpdGl2ZScpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgIlBpeGxyIGFkdmFuY2VkIjogYXN5bmMgKHNyYywgaW5pdE9wZW4pID0+IHsKICAgICAgICAgICAgICAgIGlmKGluaXRPcGVuKXsKICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnNldEl0ZW0oImVkaXRVcmwiLCBzcmMpOwogICAgICAgICAgICAgICAgICAgIF9HTV9vcGVuSW5UYWIoJ2h0dHBzOi8vcGl4bHIuY29tL2UvJywge2FjdGl2ZTp0cnVlfSk7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnNldEl0ZW0oImVkaXRVcmwiLCAiIik7CiAgICAgICAgICAgICAgICAgICAgaWYoL15odHRwczpcL1wvcGl4bHJcLmNvbVwvLy50ZXN0KGxvY2F0aW9uLmhyZWYpKXsKICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2xlZXAoMTAwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNsaWNrRWxlKCcjc3BsYXNoLWZpbGUtbWVudScpOwogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjbGlja0VsZSgnI3NwbGFzaC1maWxlLXVybCcpOwogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBpbnB1dCgnI2ltYWdlLXVybCcsIHNyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNsaWNrRWxlKCcuZGlhbG9nPi5idXR0b25zPmEuYnV0dG9uLnBvc2l0aXZlJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAiUGhvdG9wZWEiOiBhc3luYyAoc3JjLCBpbml0T3BlbikgPT4gewogICAgICAgICAgICAgICAgaWYoaW5pdE9wZW4pewogICAgICAgICAgICAgICAgICAgIHN0b3JhZ2Uuc2V0SXRlbSgiZWRpdFVybCIsIHNyYyk7CiAgICAgICAgICAgICAgICAgICAgX0dNX29wZW5JblRhYignaHR0cHM6Ly93d3cucGhvdG9wZWEuY29tLycsIHthY3RpdmU6dHJ1ZX0pOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgc3RvcmFnZS5zZXRJdGVtKCJlZGl0VXJsIiwgIiIpOwogICAgICAgICAgICAgICAgICAgIGlmKC9eaHR0cHM6XC9cL3d3d1wucGhvdG9wZWFcLmNvbVwvLy50ZXN0KGxvY2F0aW9uLmhyZWYpKXsKICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2xlZXAoMTAwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNsaWNrRWxlKCcudG9wYmFyPnNwYW4+YnV0dG9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNsaWNrRWxlKCcuY21hbmFnZXI+LmNvbnRleHRwYW5lbD5kaXY6bnRoLWNoaWxkKDQpJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNsaWNrRWxlKCcuY21hbmFnZXI+ZGl2Omxhc3QtY2hpbGQ+ZGl2Om50aC1jaGlsZCgzKScpOwogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBpbnB1dCgnc3Bhbi5maXRlbS50aW5wdXQ+aW5wdXQnLCBzcmMpOwogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjbGlja0VsZSgnLmZvcm0+YnV0dG9uJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB2YXIgZWRpdFNpdGVzTmFtZT17fTsKICAgICAgICBmb3IobGV0IGtleSBpbiBlZGl0U2l0ZXNGdW5jKXsKICAgICAgICAgICAgZWRpdFNpdGVzTmFtZVtrZXldPWtleTsKICAgICAgICB9CiAgICAgICAgdmFyIG5ld3NJbml0ZWQgPSBmYWxzZSwgbmV3c05vZGUgPSBudWxsOwoKICAgICAgICBpbml0TGFuZygpOwogICAgICAgIHZhciBjdXN0b21MYW5nT3B0aW9uPXsKICAgICAgICAgICAgJ2F1dG8nOiBpMThuKCJkZWZhdWx0TGFuZyIpCiAgICAgICAgfTsKICAgICAgICBmb3IobGV0IGtleSBpbiBsYW5nTGlzdCl7CiAgICAgICAgICAgIGN1c3RvbUxhbmdPcHRpb25ba2V5XT1sYW5nTGlzdFtrZXldOwogICAgICAgIH0KICAgICAgICBHTV9jb25maWcuaW5pdCh7CiAgICAgICAgICAgIGlkOiAncHYtcHJlZnMnLAogICAgICAgICAgICB0aXRsZTogR01fY29uZmlnLmNyZWF0ZSgnYScsIHsKICAgICAgICAgICAgICAgIGhyZWY6ICdodHRwczovL2hvb3RoaW4uZ2l0aHViLmlvL1VzZXJTY3JpcHRzL1BpY3ZpZXdlciUyMENFJTJCJywKICAgICAgICAgICAgICAgIHRhcmdldDogJ19ibGFuaycsCiAgICAgICAgICAgICAgICB0ZXh0Q29udGVudDogJ1BpY3ZpZXdlciBDRSsgJytpMThuKCJjb25maWciKSwKICAgICAgICAgICAgICAgIHRpdGxlOiBpMThuKCJvcGVuSG9tZVBhZ2UiKQogICAgICAgICAgICB9KSwKICAgICAgICAgICAgaXNUYWJzOiB0cnVlLAogICAgICAgICAgICBza2luOiAndGFiJywKICAgICAgICAgICAgZnJhbWVTdHlsZTogewogICAgICAgICAgICAgICAgbWluV2lkdGg6ICIzNTBweCIsCiAgICAgICAgICAgICAgICB3aWR0aDogKCh2aXN1YWxMZW5ndGgoKGkxOG4oImZsb2F0QmFyIikgKyBpMThuKCJtYWduaWZpZXIiKSArIGkxOG4oImdhbGxlcnkiKSArIGkxOG4oImltZ1dpbmRvdyIpICsgaTE4bigib3RoZXJzIikpLCIxNHB4IiwiYXJpYWwsdGFob21hLG15cmlhZCBwcm8sc2Fucy1zZXJpZiIpICsgMjUwKSB8fCA0ODApICsgJ3B4JywKICAgICAgICAgICAgICAgIHpJbmRleDonMjE0NzQ4MzY0OCcsCiAgICAgICAgICAgICAgICBtYXJnaW46ICcxcHgnLAogICAgICAgICAgICAgICAgYm9yZGVyOiAnMnB4IHNvbGlkIHJnYigwLCAwLCAwKScKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY3NzOiBbCiAgICAgICAgICAgICAgICAiI3B2LXByZWZzIGlucHV0W3R5cGU9J3RleHQnXSB7IHdpZHRoOiA1MHB4OyB9ICIsCiAgICAgICAgICAgICAgICAiI3B2LXByZWZzIGlucHV0W3R5cGU9J251bWJlciddIHsgd2lkdGg6IDUwcHg7IH0gIiwKICAgICAgICAgICAgICAgICIjcHYtcHJlZnMgLmlubGluZSAuY29uZmlnX3ZhciB7IG1hcmdpbi1sZWZ0OiA2cHg7IH0iLAogICAgICAgICAgICAgICAgIiNwdi1wcmVmcyBsYWJlbC5zaXplIHsgd2lkdGg6IDIwNXB4OyB9IiwKICAgICAgICAgICAgICAgICIjcHYtcHJlZnMgc3Bhbi5zZXAteCB7IG1hcmdpbi1sZWZ0OiAwcHggIWltcG9ydGFudDsgfSIsCiAgICAgICAgICAgICAgICAiI3B2LXByZWZzIGxhYmVsLnNlcC14IHsgbWFyZ2luLXJpZ2h0OiA1cHg7IH0iLAogICAgICAgICAgICAgICAgIiNwdi1wcmVmcyBsYWJlbC5mbG9hdEJhci1rZXkgeyBtYXJnaW4tbGVmdDogMjBweDsgd2lkdGg6IDEwMHB4OyB9IiwKICAgICAgICAgICAgICAgICIjcHYtcHJlZnMgaW5wdXQuY29sb3IgeyB3aWR0aDogMTIwcHg7IH0iLAogICAgICAgICAgICAgICAgIiNwdi1wcmVmcyBpbnB1dC5vcmRlciB7IHdpZHRoOiAyNTBweDsgfSIsCiAgICAgICAgICAgICAgICAiI3B2LXByZWZzIC5jb25maWdfaGVhZGVyPmEgeyBib3JkZXItYm90dG9tOiBzb2xpZCAycHg7IH0iLAogICAgICAgICAgICAgICAgIiNwdi1wcmVmcyBhOmhvdmVyIHsgY29sb3I6ICM5ZjlmOWY7IH0iLAogICAgICAgICAgICAgICAgIiNwdi1wcmVmcyBhIHsgY29sb3I6IGJsYWNrOyB9IiwKICAgICAgICAgICAgICAgICIjcHYtcHJlZnMgLnNlY3Rpb25faGVhZGVyX2hvbGRlciB7IHBhZGRpbmctcmlnaHQ6IDEwcHg7IH0iLAogICAgICAgICAgICAgICAgIiNwdi1wcmVmcyB0ZXh0YXJlYSB7IHdpZHRoOiAxMDAlOyB9IiwKICAgICAgICAgICAgICAgICIjcHYtcHJlZnMgLm5hdi10YWJzIHsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgd2lkdGg6IGZpdC1jb250ZW50OyBtYXgtd2lkdGg6IDEwMCU7IG1hcmdpbjogMjAgYXV0bzsgZGlzcGxheTogZmxleDsgb3ZlcmZsb3cteDogYXV0bzsgb3ZlcmZsb3cteTogdmlzaWJsZTsgfSIsCiAgICAgICAgICAgIF0uam9pbignXG4nKSwKICAgICAgICAgICAgZmllbGRzOiB7CiAgICAgICAgICAgICAgICAvLyDmta7liqjlt6XlhbfmoI8KICAgICAgICAgICAgICAgICdmbG9hdEJhci5wb3NpdGlvbic6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigicG9zaXRpb24iKSwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogaTE4bigicG9zaXRpb25UaXBzIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogewogICAgICAgICAgICAgICAgICAgICAgICAndG9wIGxlZnQnOiBpMThuKCJ0b3BMZWZ0IiksCiAgICAgICAgICAgICAgICAgICAgICAgICd0b3AgcmlnaHQnOiBpMThuKCJ0b3BSaWdodCIpLAogICAgICAgICAgICAgICAgICAgICAgICAnYm90dG9tIHJpZ2h0JzogaTE4bigiYm90dG9tUmlnaHQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ2JvdHRvbSBsZWZ0JzogaTE4bigiYm90dG9tTGVmdCIpLAogICAgICAgICAgICAgICAgICAgICAgICAndG9wIGNlbnRlcic6IGkxOG4oInRvcENlbnRlciIpLAogICAgICAgICAgICAgICAgICAgICAgICAnYm90dG9tIGNlbnRlcic6IGkxOG4oImJvdHRvbUNlbnRlciIpLAogICAgICAgICAgICAgICAgICAgICAgICAnaGlkZSc6IGkxOG4oImhpZGUiKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5mbG9hdEJhci5wb3NpdGlvbiwKICAgICAgICAgICAgICAgICAgICBzZWN0aW9uOiBbaTE4bigiZmxvYXRCYXIiKV0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2Zsb2F0QmFyLnN0YXlPdXQnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oInN0YXlPdXQiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZmxvYXRCYXIuc3RheU91dCwKICAgICAgICAgICAgICAgICAgICBsaW5lOiAnc3RhcnQnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2Zsb2F0QmFyLnN0YXlPdXRPZmZzZXRYJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnWDonLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnQnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZmxvYXRCYXIuc3RheU91dE9mZnNldFgKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZmxvYXRCYXIuc3RheU91dE9mZnNldFknOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdZOicsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ludCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5mbG9hdEJhci5zdGF5T3V0T2Zmc2V0WSwKICAgICAgICAgICAgICAgICAgICBhZnRlcjogJyAnK2kxOG4oInB4IiksCiAgICAgICAgICAgICAgICAgICAgbGluZTogJ2VuZCcKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZmxvYXRCYXIuc2hvd0RlbGF5JzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJzaG93RGVsYXkiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW50JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmZsb2F0QmFyLnNob3dEZWxheSwKICAgICAgICAgICAgICAgICAgICBhZnRlcjogJyAnK2kxOG4oIm1zIiksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2Zsb2F0QmFyLmhpZGVEZWxheSc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiaGlkZURlbGF5IiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ludCcsCiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnaGlkZURlbGF5JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmZsb2F0QmFyLmhpZGVEZWxheSwKICAgICAgICAgICAgICAgICAgICBhZnRlcjogJyAnK2kxOG4oIm1zIikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZmxvYXRCYXIuZm9yY2VTaG93LnNpemUudyc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiZm9yY2VTaG93IiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ludCcsCiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnc2l6ZScsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5mbG9hdEJhci5mb3JjZVNob3cuc2l6ZS53LAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpMThuKCJmb3JjZVNob3dUaXAiKSwKICAgICAgICAgICAgICAgICAgICBsaW5lOiAnc3RhcnQnLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdmbG9hdEJhci5mb3JjZVNob3cuc2l6ZS5oJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnIHggJywKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW50JywKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdzZXAteCcsCiAgICAgICAgICAgICAgICAgICAgYWZ0ZXI6ICcgJytpMThuKCJweCIpLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZmxvYXRCYXIuZm9yY2VTaG93LnNpemUuaCwKICAgICAgICAgICAgICAgICAgICBsaW5lOiAnZW5kJywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZmxvYXRCYXIubWluU2l6ZUxpbWl0LncnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oIm1pblNpemVMaW1pdCIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnQnLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NpemUnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZmxvYXRCYXIubWluU2l6ZUxpbWl0LncsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4oIm1pblNpemVMaW1pdFRpcCIpLAogICAgICAgICAgICAgICAgICAgIGxpbmU6ICdzdGFydCcsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2Zsb2F0QmFyLm1pblNpemVMaW1pdC5oJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnIHggJywKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW50JywKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdzZXAteCcsCiAgICAgICAgICAgICAgICAgICAgYWZ0ZXI6ICcgJytpMThuKCJweCIpLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZmxvYXRCYXIubWluU2l6ZUxpbWl0LmgsCiAgICAgICAgICAgICAgICAgICAgbGluZTogJ2VuZCcsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2Zsb2F0QmFyLnNpemVMaW1pdE9yJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJzaXplTGltaXRPciIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBmYWxzZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdmbG9hdEJhci5zaG93V2l0aFJ1bGVzJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJzaG93V2l0aFJ1bGVzIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmZsb2F0QmFyLnNob3dXaXRoUnVsZXMsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4oInNob3dXaXRoUnVsZXNUaXAiKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZmxvYXRCYXIuYnV0b25PcmRlcic6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiYnV0b25PcmRlciIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdvcmRlcicsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdhY3R1YWwsY3VycmVudCxnYWxsZXJ5LG1hZ25pZmllcixkb3dubG9hZCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5mbG9hdEJhci5idXRvbk9yZGVyLmpvaW4oJywgJyksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2Zsb2F0QmFyLmFkZGl0aW9uYWxGZWF0dXJlJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJhZGRpdGlvbmFsRmVhdHVyZSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgJ2NvcHknOiBpMThuKCJjb3B5IiksCiAgICAgICAgICAgICAgICAgICAgICAgICdjb3B5SW1nJzogaTE4bigiY29weUltZyIpLAogICAgICAgICAgICAgICAgICAgICAgICAnb3Blbic6IGkxOG4oIm9wZW5Jbk5ld1RhYiIpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmZsb2F0QmFyLmFkZGl0aW9uYWxGZWF0dXJlIHx8ICdvcGVuJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdmbG9hdEJhci5pbnZlcnRBZGRpdGlvbmFsRmVhdHVyZSc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiaW52ZXJ0QWRkaXRpb25hbEZlYXR1cmUiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZmxvYXRCYXIuaW52ZXJ0QWRkaXRpb25hbEZlYXR1cmUKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZmxvYXRCYXIubGlzdGVuQmcnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImxpc3RlbkJnIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmZsb2F0QmFyLmxpc3RlbkJnLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpMThuKCJsaXN0ZW5CZ1RpcCIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2Zsb2F0QmFyLmdsb2JhbGtleXMuY3RybCc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiZ2xvYmFsa2V5cyIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgYWZ0ZXI6ICJDVFJMICsiLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBsaW5lOiAnc3RhcnQnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2Zsb2F0QmFyLmdsb2JhbGtleXMuYWx0JzogewogICAgICAgICAgICAgICAgICAgIGFmdGVyOiAiQUxUICsiLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnc2VwLXgnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogZmFsc2UsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2Zsb2F0QmFyLmdsb2JhbGtleXMuc2hpZnQnOiB7CiAgICAgICAgICAgICAgICAgICAgYWZ0ZXI6ICJTSElGVCArIiwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NlcC14JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IGZhbHNlLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdmbG9hdEJhci5nbG9iYWxrZXlzLmNvbW1hbmQnOiB7CiAgICAgICAgICAgICAgICAgICAgYWZ0ZXI6ICJNRVRBIiwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NlcC14JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGxpbmU6ICdlbmQnLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdmbG9hdEJhci5nbG9iYWxrZXlzLnR5cGUnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImdsb2JhbGtleXNUeXBlIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogewogICAgICAgICAgICAgICAgICAgICAgICAncHJlc3MnOiBpMThuKCJnbG9iYWxrZXlzUHJlc3MiKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ2hvbGQnOiBpMThuKCJnbG9iYWxrZXlzSG9sZCIpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmZsb2F0QmFyLmdsb2JhbGtleXMudHlwZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdmbG9hdEJhci5nbG9iYWxrZXlzLmludmVydEluaXRTaG93JzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJpbml0U2hvdyIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5mbG9hdEJhci5nbG9iYWxrZXlzLmludmVydEluaXRTaG93CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2Zsb2F0QmFyLmdsb2JhbGtleXMuY2xvc2VBZnRlclByZXZpZXcnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImNsb3NlQWZ0ZXJQcmV2aWV3IiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmZsb2F0QmFyLmdsb2JhbGtleXMuY2xvc2VBZnRlclByZXZpZXcKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZmxvYXRCYXIucHJldmlld01heFNpemVXJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJwcmV2aWV3TWF4U2l6ZSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnQnLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NpemUnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMucHJldmlld01heFNpemVXIHx8IDAsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4oInByZXZpZXdNYXhTaXplVGlwIiksCiAgICAgICAgICAgICAgICAgICAgbGluZTogJ3N0YXJ0JywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZmxvYXRCYXIucHJldmlld01heFNpemVIJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnIHggJywKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW50JywKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdzZXAteCcsCiAgICAgICAgICAgICAgICAgICAgYWZ0ZXI6ICcgJytpMThuKCJweCIpLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMucHJldmlld01heFNpemVIIHx8IDAsCiAgICAgICAgICAgICAgICAgICAgbGluZTogJ2VuZCcsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2Zsb2F0QmFyLmdsb2JhbGtleXMucHJldmlld0ZvbGxvd01vdXNlJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJwcmV2aWV3Rm9sbG93TW91c2UiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZmxvYXRCYXIuZ2xvYmFsa2V5cy5wcmV2aWV3Rm9sbG93TW91c2UKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAvLyDmjInplK4KICAgICAgICAgICAgICAgICdmbG9hdEJhci5rZXlzLmVuYWJsZSc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigia2V5c0VuYWJsZSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5mbG9hdEJhci5rZXlzLmVuYWJsZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdmbG9hdEJhci5rZXlzLmFjdHVhbCc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigia2V5c0FjdHVhbCIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdmbG9hdEJhci1rZXknLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZmxvYXRCYXIua2V5cy5hY3R1YWwsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4oImtleXNBY3R1YWxUaXAiKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIC8qJ2Zsb2F0QmFyLmtleXMuc2VhcmNoJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJrZXlzU2VhcmNoIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2Zsb2F0QmFyLWtleScsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5mbG9hdEJhci5rZXlzLnNlYXJjaCwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogaTE4bigia2V5c1NlYXJjaFRpcCIpCiAgICAgICAgICAgICAgICB9LCovCiAgICAgICAgICAgICAgICAnZmxvYXRCYXIua2V5cy5jdXJyZW50JzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJrZXlzQ3VycmVudCIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdmbG9hdEJhci1rZXknLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZmxvYXRCYXIua2V5cy5jdXJyZW50LAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpMThuKCJrZXlzQ3VycmVudFRpcCIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2Zsb2F0QmFyLmtleXMubWFnbmlmaWVyJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJrZXlzTWFnbmlmaWVyIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2Zsb2F0QmFyLWtleScsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5mbG9hdEJhci5rZXlzLm1hZ25pZmllciwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogaTE4bigia2V5c01hZ25pZmllclRpcCIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2Zsb2F0QmFyLmtleXMuZ2FsbGVyeSc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigia2V5c0dhbGxlcnkiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZmxvYXRCYXIta2V5JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmZsb2F0QmFyLmtleXMuZ2FsbGVyeSwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogaTE4bigia2V5c0dhbGxlcnlUaXAiKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdmbG9hdEJhci5rZXlzLmRvd25sb2FkJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJkb3dubG9hZCIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdmbG9hdEJhci1rZXknLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZmxvYXRCYXIua2V5cy5kb3dubG9hZAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdmbG9hdEJhci5kaXNhYmxlS2V5U2l0ZXMnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImRpc2FibGVLZXlTaXRlcyIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0YXJlYScsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5mbG9hdEJhci5kaXNhYmxlS2V5U2l0ZXMKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgLy8g5pS+5aSn6ZWcCiAgICAgICAgICAgICAgICAnbWFnbmlmaWVyLnJhZGl1cyc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigibWFnbmlmaWVyUmFkaXVzIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ludCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5tYWduaWZpZXIucmFkaXVzLAogICAgICAgICAgICAgICAgICAgIHNlY3Rpb246IFtpMThuKCJtYWduaWZpZXIiKV0sCiAgICAgICAgICAgICAgICAgICAgYWZ0ZXI6ICcgJytpMThuKCJweCIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ21hZ25pZmllci53aGVlbFpvb20uZW5hYmxlZCc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigibWFnbmlmaWVyV2hlZWxab29tRW5hYmxlZCIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5tYWduaWZpZXIud2hlZWxab29tLmVuYWJsZWQsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ21hZ25pZmllci53aGVlbFpvb20uc2NhbGVJbWFnZSc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigibWFnbmlmaWVyU2NhbGVJbWFnZSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5tYWduaWZpZXIud2hlZWxab29tLnNjYWxlSW1hZ2UgIT09IGZhbHNlLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdtYWduaWZpZXIud2hlZWxab29tLmN0cmwnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICcnLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgYWZ0ZXI6ICJDVFJMICsiLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgbGluZTogJ3N0YXJ0JwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdtYWduaWZpZXIud2hlZWxab29tLmFsdCc6IHsKICAgICAgICAgICAgICAgICAgICBhZnRlcjogIkFMVCArIiwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NlcC14JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IGZhbHNlLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdtYWduaWZpZXIud2hlZWxab29tLnNoaWZ0JzogewogICAgICAgICAgICAgICAgICAgIGFmdGVyOiAiU0hJRlQgKyIsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdzZXAteCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBmYWxzZSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnbWFnbmlmaWVyLndoZWVsWm9vbS5tZXRhJzogewogICAgICAgICAgICAgICAgICAgIGFmdGVyOiAiTUVUQSIsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdzZXAteCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBsaW5lOiAnZW5kJywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnbWFnbmlmaWVyLndoZWVsWm9vbS5yYW5nZSc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigibWFnbmlmaWVyV2hlZWxab29tUmFuZ2UiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dGFyZWEnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMubWFnbmlmaWVyLndoZWVsWm9vbS5yYW5nZS5qb2luKCcsICcpLAogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAvLyDlm77lupMKICAgICAgICAgICAgICAgICdnYWxsZXJ5LmRlZmF1bHRTaXplTGltaXQudyc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiZGVmYXVsdFNpemVMaW1pdCIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnQnLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NpemUnLAogICAgICAgICAgICAgICAgICAgIHNlY3Rpb246IFtpMThuKCJnYWxsZXJ5IildLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZ2FsbGVyeS5kZWZhdWx0U2l6ZUxpbWl0LncsCiAgICAgICAgICAgICAgICAgICAgbGluZTogJ3N0YXJ0JywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZ2FsbGVyeS5kZWZhdWx0U2l6ZUxpbWl0LmgnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICcgeCAnLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnQnLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NlcC14JywKICAgICAgICAgICAgICAgICAgICBhZnRlcjogJyAnK2kxOG4oInB4IiksCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5nYWxsZXJ5LmRlZmF1bHRTaXplTGltaXQuaCwKICAgICAgICAgICAgICAgICAgICBsaW5lOiAnZW5kJywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZ2FsbGVyeS5maXRUb1NjcmVlbic6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiZ2FsbGVyeUZpdFRvU2NyZWVuIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmdhbGxlcnkuZml0VG9TY3JlZW4sCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4oImdhbGxlcnlGaXRUb1NjcmVlblRpcCIpLAogICAgICAgICAgICAgICAgICAgIGxpbmU6ICdzdGFydCcsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2dhbGxlcnkuZml0VG9TY3JlZW5TbWFsbCc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiZ2FsbGVyeUZpdFRvU2NyZWVuU21hbGwiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZ2FsbGVyeS5maXRUb1NjcmVlblNtYWxsLAogICAgICAgICAgICAgICAgICAgIGxpbmU6ICdlbmQnLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdnYWxsZXJ5LnNjcm9sbEVuZFRvQ2hhbmdlJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJnYWxsZXJ5U2Nyb2xsRW5kVG9DaGFuZ2UiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZ2FsbGVyeS5zY3JvbGxFbmRUb0NoYW5nZSwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogaTE4bigiZ2FsbGVyeVNjcm9sbEVuZFRvQ2hhbmdlVGlwIikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZ2FsbGVyeS5iYWNrZ3JvdW5kQ29sb3InOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImJhY2tncm91bmRDb2xvciIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdjb2xvcicsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5nYWxsZXJ5LmJhY2tncm91bmRDb2xvciB8fCAncmdiYSgyMCwyMCwyMCwwLjc1KScsCiAgICAgICAgICAgICAgICAgICAgbGluZTogJ2VuZCcKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZ2FsbGVyeS5leHBvcnRUeXBlJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJnYWxsZXJ5RXhwb3J0VHlwZSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgJ2dyaWQnOiBpMThuKCJncmlkIiksCiAgICAgICAgICAgICAgICAgICAgICAgICdncmlkQmlnJzogaTE4bigiZ3JpZEJpZyIpLAogICAgICAgICAgICAgICAgICAgICAgICAnbGlzdCc6IGkxOG4oImxpc3QiKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5nYWxsZXJ5LmV4cG9ydFR5cGUsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2dhbGxlcnkubG9hZE1vcmUnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImdhbGxlcnlBdXRvTG9hZCIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5nYWxsZXJ5LmxvYWRNb3JlCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2dhbGxlcnkubG9hZEFsbCc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiZ2FsbGVyeUxvYWRBbGwiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZ2FsbGVyeS5sb2FkQWxsLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpMThuKCJnYWxsZXJ5TG9hZEFsbFRpcCIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2dhbGxlcnkudmlld21vcmVFbmRsZXNzJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJ2aWV3bW9yZUVuZGxlc3MiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZ2FsbGVyeS52aWV3bW9yZUVuZGxlc3MKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZ2FsbGVyeS5kb3dubG9hZFdpdGhaaXAnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImdhbGxlcnlEb3dubG9hZFdpdGhaaXAiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZ2FsbGVyeS5kb3dubG9hZFdpdGhaaXAKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZ2FsbGVyeS5kb3dubG9hZEdhcCc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiZ2FsbGVyeURvd25sb2FkR2FwIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ludCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5nYWxsZXJ5LmRvd25sb2FkR2FwLAogICAgICAgICAgICAgICAgICAgIGFmdGVyOiAnIG1zJywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZ2FsbGVyeS5mb3JtYXRDb252ZXJzaW9uJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJmb3JtYXRDb252ZXJzaW9uIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHRhcmVhJywKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ3dlYnA+cG5nXG54LWljb24+cG5nJywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmdhbGxlcnkuZm9ybWF0Q29udmVyc2lvbiB8fCAnJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdnYWxsZXJ5LmFyaWEySG9zdCc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiYXJpYTJIb3N0IiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ29yZGVyJywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmdhbGxlcnkuYXJpYTJIb3N0IHx8ICdodHRwOi8vbG9jYWxob3N0OjY4MDAnLAogICAgICAgICAgICAgICAgICAgIGFmdGVyOiAnL2pzb25ycGMnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2dhbGxlcnkuYXJpYTJUb2tlbic6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiYXJpYTJUb2tlbiIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmdhbGxlcnkuYXJpYTJUb2tlbiB8fCAnJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdnYWxsZXJ5LnNjYWxlU21hbGxTaXplJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJnYWxsZXJ5U2NhbGVTbWFsbFNpemUxIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ludCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5nYWxsZXJ5LnNjYWxlU21hbGxTaXplLAogICAgICAgICAgICAgICAgICAgIGFmdGVyOiBpMThuKCJnYWxsZXJ5U2NhbGVTbWFsbFNpemUyIikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZ2FsbGVyeS5zaG93U21hbGxTaXplJzp7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImdhbGxlcnlTaG93U21hbGxTaXplIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmdhbGxlcnkuc2hvd1NtYWxsU2l6ZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdnYWxsZXJ5LnRyYW5zaXRpb24nOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImdhbGxlcnlUcmFuc2l0aW9uIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmdhbGxlcnkudHJhbnNpdGlvbgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdnYWxsZXJ5LmRpc2FibGVBcnJvdyc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiZ2FsbGVyeURpc2FibGVBcnJvdyIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5nYWxsZXJ5LmRpc2FibGVBcnJvdwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdnYWxsZXJ5LnNpZGViYXJQb3NpdGlvbic6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiZ2FsbGVyeVNpZGViYXJQb3NpdGlvbiIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgJ2JvdHRvbSc6IGkxOG4oImJvdHRvbSIpLAogICAgICAgICAgICAgICAgICAgICAgICAncmlnaHQnOiBpMThuKCJyaWdodCIpLAogICAgICAgICAgICAgICAgICAgICAgICAnbGVmdCc6IGkxOG4oImxlZnQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ3RvcCc6IGkxOG4oInRvcCIpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmdhbGxlcnkuc2lkZWJhclBvc2l0aW9uLAogICAgICAgICAgICAgICAgICAgIGxpbmU6ICdzdGFydCcsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2dhbGxlcnkuc2lkZWJhclNpemUnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImdhbGxlcnlTaWRlYmFyU2l6ZSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnQnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZ2FsbGVyeS5zaWRlYmFyU2l6ZSwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogaTE4bigiZ2FsbGVyeVNpZGViYXJTaXplVGlwIiksCiAgICAgICAgICAgICAgICAgICAgYWZ0ZXI6ICcgJytpMThuKCJweCIpLAogICAgICAgICAgICAgICAgICAgIGxpbmU6ICdlbmQnLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdnYWxsZXJ5Lm1heCc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiZ2FsbGVyeU1heDEiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbnVtYmVyJywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmdhbGxlcnkubWF4LAogICAgICAgICAgICAgICAgICAgIGFmdGVyOiBpMThuKCJnYWxsZXJ5TWF4MiIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2dhbGxlcnkuYXV0b1pvb20nOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImdhbGxlcnlBdXRvWm9vbSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5nYWxsZXJ5LmF1dG9ab29tLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpMThuKCJnYWxsZXJ5QXV0b1pvb21UaXAiKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdnYWxsZXJ5LmRlc2NyaXB0aW9uTGVuZ3RoJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJnYWxsZXJ5RGVzY3JpcHRpb25MZW5ndGgxIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ludCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5nYWxsZXJ5LmRlc2NyaXB0aW9uTGVuZ3RoLAogICAgICAgICAgICAgICAgICAgIGFmdGVyOiBpMThuKCJnYWxsZXJ5RGVzY3JpcHRpb25MZW5ndGgyIikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZ2FsbGVyeS5hdXRvT3BlblZpZXdtb3JlJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJhdXRvT3BlblZpZXdtb3JlIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmdhbGxlcnkuYXV0b09wZW5WaWV3bW9yZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdnYWxsZXJ5LmF1dG9PcGVuU2l0ZXMnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImdhbGxlcnlBdXRvT3BlblNpdGVzIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHRhcmVhJywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmdhbGxlcnkuYXV0b09wZW5TaXRlcwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdnYWxsZXJ5LnNlYXJjaERhdGEnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImdhbGxlcnlTZWFyY2hEYXRhIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHRhcmVhJywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmdhbGxlcnkuc2VhcmNoRGF0YQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdnYWxsZXJ5LmVkaXRTaXRlJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJnYWxsZXJ5RWRpdFNpdGUiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBlZGl0U2l0ZXNOYW1lLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZ2FsbGVyeS5lZGl0U2l0ZSwKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgLy8g5Zu+54mH56qX5Y+jCiAgICAgICAgICAgICAgICAnaW1nV2luZG93LmZpdFRvU2NyZWVuJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJpbWdXaW5kb3dGaXRUb1NjcmVlbiIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5pbWdXaW5kb3cuZml0VG9TY3JlZW4sCiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbjogW2kxOG4oImltZ1dpbmRvdyIpXSwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogaTE4bigiaW1nV2luZG93Rml0VG9TY3JlZW5UaXAiKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnaW1nV2luZG93LmZpdFRvU2NyZWVuU21hbGwnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImltZ1dpbmRvd0ZpdFRvU2NyZWVuV2hlblNtYWxsIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmltZ1dpbmRvdy5maXRUb1NjcmVlblNtYWxsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2ltZ1dpbmRvdy5zdWl0TG9uZ0ltZyc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigic3VpdExvbmdJbWciKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuaW1nV2luZG93LnN1aXRMb25nSW1nCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2ltZ1dpbmRvdy5zd2l0Y2hTdG9yZUxvYyc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigic3dpdGNoU3RvcmVMb2MiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuaW1nV2luZG93LnN3aXRjaFN0b3JlTG9jCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2ltZ1dpbmRvdy5kZWZhdWx0VG9vbCc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiaW1nV2luZG93RGVmYXVsdFRvb2wiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICdoYW5kJzogaTE4bigiaGFuZCIpLAogICAgICAgICAgICAgICAgICAgICAgICAncm90YXRlJzogaTE4bigicm90YXRlIiksCiAgICAgICAgICAgICAgICAgICAgICAgICd6b29tJzogaTE4bigiem9vbSIpLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5pbWdXaW5kb3cuZGVmYXVsdFRvb2wsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2ltZ1dpbmRvdy5jbG9zZS5lc2NLZXknOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImltZ1dpbmRvd0VzY0tleSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5pbWdXaW5kb3cuY2xvc2UuZXNjS2V5LAogICAgICAgICAgICAgICAgICAgIGxpbmU6ICdzdGFydCcsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2ltZ1dpbmRvdy5jbG9zZS5kYmxDbGlja0ltZ1dpbmRvdyc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiaW1nV2luZG93RGJsQ2xpY2tJbWdXaW5kb3ciKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuaW1nV2luZG93LmNsb3NlLmRibENsaWNrSW1nV2luZG93LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdpbWdXaW5kb3cuY2xvc2UuY2xpY2tPdXRzaWRlJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJpbWdXaW5kb3dDbGlja091dHNpZGUiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICcnOiBpMThuKCJub25lIiksCiAgICAgICAgICAgICAgICAgICAgICAgICdjbGljayc6IGkxOG4oImNsaWNrIiksCiAgICAgICAgICAgICAgICAgICAgICAgICdkYmxjbGljayc6IGkxOG4oImRibGNsaWNrIiksCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmltZ1dpbmRvdy5jbG9zZS5jbGlja091dHNpZGUsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4oImltZ1dpbmRvd0NsaWNrT3V0c2lkZVRpcCIpLAogICAgICAgICAgICAgICAgICAgIGxpbmU6ICdlbmQnLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdpbWdXaW5kb3cuYmFja2dyb3VuZENvbG9yJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJiYWNrZ3JvdW5kQ29sb3IiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnY29sb3InLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuaW1nV2luZG93LmJhY2tncm91bmRDb2xvciwKICAgICAgICAgICAgICAgICAgICBsaW5lOiAnZW5kJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdpbWdXaW5kb3cub3ZlcmxheWVyLnNob3duJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJpbWdXaW5kb3dPdmVybGF5ZXJTaG93biIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5pbWdXaW5kb3cub3ZlcmxheWVyLnNob3duLAogICAgICAgICAgICAgICAgICAgIGxpbmU6ICdzdGFydCcsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2ltZ1dpbmRvdy5vdmVybGF5ZXIuY29sb3InOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImltZ1dpbmRvd092ZXJsYXllckNvbG9yIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2NvbG9yJywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmltZ1dpbmRvdy5vdmVybGF5ZXIuY29sb3IsCiAgICAgICAgICAgICAgICAgICAgbGluZTogJ2VuZCcKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnaW1nV2luZG93LnNoaWZ0Um90YXRlU3RlcCc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiaW1nV2luZG93U2hpZnRSb3RhdGVTdGVwMSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnQnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuaW1nV2luZG93LnNoaWZ0Um90YXRlU3RlcCwKICAgICAgICAgICAgICAgICAgICBhZnRlcjogaTE4bigiaW1nV2luZG93U2hpZnRSb3RhdGVTdGVwMiIpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2ltZ1dpbmRvdy56b29tLm1vdXNlV2hlZWxab29tJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJpbWdXaW5kb3dNb3VzZVdoZWVsWm9vbSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5pbWdXaW5kb3cuem9vbS5tb3VzZVdoZWVsWm9vbSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnaW1nV2luZG93Lnpvb20ucmFuZ2UnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImltZ1dpbmRvd1pvb21SYW5nZSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0YXJlYScsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5pbWdXaW5kb3cuem9vbS5yYW5nZS5qb2luKCcsICcpLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpMThuKCJpbWdXaW5kb3dab29tUmFuZ2VUaXAiKSwKICAgICAgICAgICAgICAgICAgICBhdHRyOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJzcGVsbGNoZWNrIjogImZhbHNlIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnaW1nV2luZG93LmZpeGVkJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJwb3NpdGlvbkZpeGVkIiksCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5pbWdXaW5kb3cuZml4ZWQsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnaW1nV2luZG93LnpJbmRleCc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogInotSW5kZXgiLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuaW1nV2luZG93LnpJbmRleCwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW50JywKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgLy8g5YW25a6DCiAgICAgICAgICAgICAgICAnd2FpdEltZ0xvYWQnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oIndhaXRJbWdMb2FkIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLndhaXRJbWdMb2FkLAogICAgICAgICAgICAgICAgICAgIHNlY3Rpb246IFtpMThuKCJvdGhlcnMiKV0sCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4oIndhaXRJbWdMb2FkVGlwIikKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnY3VzdG9tTGFuZyc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigiY3VzdG9tTGFuZyIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IGN1c3RvbUxhbmdPcHRpb24sCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiBwcmVmcy5jdXN0b21MYW5nLAogICAgICAgICAgICAgICAgICAgIGxpbmU6ICdlbmQnLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdzYXZlTmFtZSc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigic2F2ZU5hbWUiKSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIDA6IGkxOG4oImRlZmF1bHQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgMTogaTE4bigidGV4dEZpcnN0IiksCiAgICAgICAgICAgICAgICAgICAgICAgIDI6IGkxOG4oIm9ubHlVcmwiKSwKICAgICAgICAgICAgICAgICAgICAgICAgMzogaTE4bigidXJsQW5kVGV4dCIpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IChwcmVmcy5zYXZlTmFtZSB8fCAwKSwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogaTE4bigic2F2ZU5hbWVUaXAiKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnc2F2ZU5hbWVBZGRUaXRsZSc6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogaTE4bigic2F2ZU5hbWVBZGRUaXRsZSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHQiOiAhIXByZWZzLnNhdmVOYW1lQWRkVGl0bGUKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnZGVidWcnOiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkxOG4oImRlYnVnIiksCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdCI6IHByZWZzLmRlYnVnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgJ2N1c3RvbVJ1bGVzJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBHTV9jb25maWcuY3JlYXRlKCdhJywgewogICAgICAgICAgICAgICAgICAgICAgICBocmVmOiAnaHR0cHM6Ly9naXRodWIuY29tL2hvb3RoaW4vVXNlclNjcmlwdHMvdHJlZS9tYXN0ZXIvUGljdmlld2VyJTIwQ0UlMkIjLWN1c3RvbS1ydWxlcy1leGFtcGxlJywKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiAnX2JsYW5rJywKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbnRlbnQ6IGkxOG4oImN1c3RvbVJ1bGVzIikKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dGFyZWEnLAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuY3VzdG9tUnVsZXMKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8qJ2ZpcnN0RW5naW5lJzogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpMThuKCJmaXJzdEVuZ2luZSIpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgIlRpbmV5ZSI6IlRpbmV5ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJHb29nbGUiOiJHb29nbGUiLAogICAgICAgICAgICAgICAgICAgICAgICAiQmFpZHUiOiJCYWlkdSIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICJkZWZhdWx0IjogcHJlZnMuZmlyc3RFbmdpbmUsCiAgICAgICAgICAgICAgICB9LCovCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV2ZW50czogewogICAgICAgICAgICAgICAgb3BlbjogYXN5bmMgZnVuY3Rpb24oZG9jLCB3aW4sIGZyYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgaXNDb25maWdPcGVuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsZXQgc2F2ZUJ0biA9IGRvYy5xdWVyeVNlbGVjdG9yKCIjIit0aGlzLmlkKyJfc2F2ZUJ0biIpOwogICAgICAgICAgICAgICAgICAgIGxldCBjbG9zZUJ0biA9IGRvYy5xdWVyeVNlbGVjdG9yKCIjIit0aGlzLmlkKyJfY2xvc2VCdG4iKTsKICAgICAgICAgICAgICAgICAgICBsZXQgcmVzZXRMaW5rID0gZG9jLnF1ZXJ5U2VsZWN0b3IoIiMiK3RoaXMuaWQrIl9yZXNldExpbmsiKTsKICAgICAgICAgICAgICAgICAgICBsZXQgY3VzdG9tSW5wdXQgPSBkb2MucXVlcnlTZWxlY3RvcigiIyIrdGhpcy5pZCsiX2ZpZWxkX2N1c3RvbVJ1bGVzIik7CiAgICAgICAgICAgICAgICAgICAgY3VzdG9tSW5wdXQuc3R5bGUuaGVpZ2h0ID0gIjE4OHB4IjsKICAgICAgICAgICAgICAgICAgICBjdXN0b21JbnB1dC5zZXRBdHRyaWJ1dGUoInNwZWxsY2hlY2siLCAiZmFsc2UiKTsKICAgICAgICAgICAgICAgICAgICBzYXZlQnRuLnRleHRDb250ZW50ID0gaTE4bigic2F2ZUJ0biIpOwogICAgICAgICAgICAgICAgICAgIHNhdmVCdG4udGl0bGUgPSBpMThuKCJzYXZlQnRuVGlwcyIpOwogICAgICAgICAgICAgICAgICAgIHNhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1c3RvbUlucHV0LnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VzdG9tSW5wdXQudmFsdWUudHJpbSgpLmluZGV4T2YoIlsiKSAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIlRoZSBydWxlcyBtdXN0IGJlIGVuY2xvc2VkIGluIHNxdWFyZSBicmFja2V0cyAoW10pLiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1c3RvbVJ1bGVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXN0b21JbnB1dC52YWx1ZS5pbmRleE9mKCJuYW1lOiIpICE9PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzdW5zYWZlKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2FmZVdpbmRvdy5ldmFsKGNyZWF0ZVNjcmlwdChjdXN0b21JbnB1dC52YWx1ZSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tSW5wdXQudmFsdWUgPSBKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKGN1c3RvbUlucHV0LnZhbHVlKSwgbnVsbCwgNCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgiV3JvbmcgcnVsZToiICsgZXJyLnRvU3RyaW5nKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgY2xvc2VCdG4udGV4dENvbnRlbnQ9aTE4bigiY2xvc2VCdG4iKTsKICAgICAgICAgICAgICAgICAgICBjbG9zZUJ0bi50aXRsZT1pMThuKCJjbG9zZUJ0blRpcHMiKTsKICAgICAgICAgICAgICAgICAgICByZXNldExpbmsudGV4dENvbnRlbnQ9aTE4bigicmVzZXRMaW5rIik7CiAgICAgICAgICAgICAgICAgICAgcmVzZXRMaW5rLnRpdGxlPWkxOG4oInJlc2V0TGlua1RpcHMiKTsKICAgICAgICAgICAgICAgICAgICBsZXQgc2VhcmNoRGF0YT1kb2MuZ2V0RWxlbWVudEJ5SWQodGhpcy5pZCsiX2ZpZWxkX2dhbGxlcnkuc2VhcmNoRGF0YSIpOwogICAgICAgICAgICAgICAgICAgIGlmKHNlYXJjaERhdGEgJiYgc2VhcmNoRGF0YS52YWx1ZT09IiIpewogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hEYXRhLnZhbHVlPWRlZmF1bHRTZWFyY2hEYXRhOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBsZXQgYWJvdXQgPSBkb2MuZ2V0RWxlbWVudEJ5SWQodGhpcy5pZCArICJfc2VjdGlvbl80Iik7CiAgICAgICAgICAgICAgICAgICAgaWYgKGFib3V0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV3c05vZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3c0VsZXMgPSBjcmVhdGVFbGVGcm9tSnNvbihbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlOiAiZGl2IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogIk1hZGUgd2l0aCDinaTvuI8gYnkgQCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiAid2lkdGg6IGNhbGMoMTAwJSAtIDhweCk7IHRleHQtYWxpZ246IGNlbnRlcjsiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZTogImEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICJIb290aGluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY6ICJodHRwczovL3d3dy5ob290aGluLmNvbS8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6ICJfYmxhbmsiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlOiAiYnIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6ICJhIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAiU3RhciBNZSBvbiDwn5CxR2l0aHViIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY6ICJodHRwczovL2dpdGh1Yi5jb20vaG9vdGhpbi9Vc2VyU2NyaXB0cyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogIl9ibGFuayIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6ICJiciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZTogInNwYW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICJKb2luIG91ciAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6ICJhIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAiRGlzY29yZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmOiAiaHR0cHM6Ly9kaXNjb3JkLmNvbS9pbnZpdGUva2VxeXBYQzZ3RCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogIl9ibGFuayIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZTogImltZyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogImh0dHBzOi8vczIubG9saS5uZXQvMjAyMy8wMi8wNi9hZlRNeGVBU200OHo1dkUuanBnIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiAid2lkdGg6IDEwMCU7IG1hcmdpbi10b3A6IDVweDsgbWF4LWhlaWdodDogMTgwcHg7IGRpc3BsYXk6IG5vbmU7IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubG9hZDogInRoaXMuc3R5bGUuZGlzcGxheT0nJyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlOiAiZGl2IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6ICJ3aWR0aDogMTAwJTsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IG1hcmdpbi10b3A6IDVweDsgZm9udC1zaXplOiAxNHB4OyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlOiAiaW1nIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogImh0dHBzOi8va28tZmkuY29tL2Zhdmljb24tMzJ4MzIucG5nIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6ICJtYXJnaW4tcmlnaHQ6IDVweDsgaGVpZ2h0OiAyNXB4OyBkaXNwbGF5OiBub25lOyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubG9hZDogInRoaXMuc3R5bGUuZGlzcGxheT0nJyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6ICJhIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAiS28tZmkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogImh0dHBzOi8va28tZmkuY29tL2hvb3RoaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogIm1hcmdpbi1yaWdodDogMTBweDsiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6ICJfYmxhbmsiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlOiAiaW1nIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogImh0dHBzOi8vc3RhdGljLmFmZGlhbmNkbi5jb20vZmF2aWNvbi5pY28iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogIm1hcmdpbi1yaWdodDogNXB4OyBoZWlnaHQ6IDIwcHg7IGRpc3BsYXk6IG5vbmU7IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25sb2FkOiAidGhpcy5zdHlsZS5kaXNwbGF5PScnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZTogImEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICLniLHlj5HnlLUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogImh0dHBzOi8vYWZkaWFuLmNvbS9AaG9vdGhpbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogIl9ibGFuayIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld3NOb2RlLnN0eWxlLnBhZGRpbmcgPSAiNXB4IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld3NOb2RlLmFwcGVuZENoaWxkKG5ld3NFbGVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3V0LmFwcGVuZENoaWxkKG5ld3NOb2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5ld3NJbml0ZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdzID0gYXdhaXQgR01fZmV0Y2goYGh0dHBzOi8vaG9vdGhpbi5jb20vc2NyaXB0cy9wdmNlcC8ke2xhbmd9YCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpLmNhdGNoKGUgPT4ge30pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3c0luaXRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5ld3MpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdzRWxlcyA9IGNyZWF0ZUVsZUZyb21Kc29uKG5ld3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld3NFbGVzICYmIG5ld3NFbGVzLmNoaWxkRWxlbWVudENvdW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld3NOb2RlKSBhYm91dC5yZW1vdmVDaGlsZChuZXdzTm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3c05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdzTm9kZS5hcHBlbmRDaGlsZChuZXdzRWxlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYWJvdXQuYXBwZW5kQ2hpbGQobmV3c05vZGUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzYXZlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBsb2FkUHJlZnMoKTsKICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnNldEl0ZW0oImN1c3RvbUxhbmciLCBwcmVmcy5jdXN0b21MYW5nKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjbG9zZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgaXNDb25maWdPcGVuID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCgoKICAgICAgICBsb2FkUHJlZnMoKTsKCiAgICAgICAgdmFyIGhpZGVJY29uPXN0b3JhZ2UuZ2V0TGlzdEl0ZW0oImhpZGVJY29uIiwgbG9jYXRpb24uaG9zdG5hbWUpIHx8IGZhbHNlOwogICAgICAgIHZhciBoaWRlSWNvblN0eWxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgICAgaGlkZUljb25TdHlsZS50ZXh0Q29udGVudD1gI3B2LWZsb2F0LWJhci1jb250YWluZXJ7ZGlzcGxheTpub25lIWltcG9ydGFudH1gOwogICAgICAgIGlmKGhpZGVJY29uKXsKICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChoaWRlSWNvblN0eWxlKTsKICAgICAgICB9CiAgICAgICAgX0dNX3JlZ2lzdGVyTWVudUNvbW1hbmQoaTE4bigib3BlbkNvbmZpZyIpLCBvcGVuUHJlZnMpOwogICAgICAgIF9HTV9yZWdpc3Rlck1lbnVDb21tYW5kKGkxOG4oIm9wZW5HYWxsZXJ5IiksIG9wZW5HYWxsZXJ5KTsKICAgICAgICBfR01fcmVnaXN0ZXJNZW51Q29tbWFuZChpMThuKCJoaWRlSWNvbiIpICsgKGhpZGVJY29uID8gIuKYke+4jyIgOiAiIiksICgpID0+IHsKICAgICAgICAgICAgaGlkZUljb249IWhpZGVJY29uOwogICAgICAgICAgICBzdG9yYWdlLnNldExpc3RJdGVtKCJoaWRlSWNvbiIsIGxvY2F0aW9uLmhvc3RuYW1lLCBoaWRlSWNvbik7CiAgICAgICAgICAgIGlmKGhpZGVJY29uKXsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoaGlkZUljb25TdHlsZSk7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5yZW1vdmVDaGlsZChoaWRlSWNvblN0eWxlKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIF9HTV9yZWdpc3Rlck1lbnVDb21tYW5kKGkxOG4oInJ1bGVSZXF1ZXN0IiksICgpID0+IHsKICAgICAgICAgICAgX0dNX29wZW5JblRhYigiaHR0cHM6Ly9naXRodWIuY29tL2hvb3RoaW4vVXNlclNjcmlwdHMvaXNzdWVzL25ldz9sYWJlbHM9UGljdmlld2VyJTIwQ0UlMkImdGVtcGxhdGU9Y3VzdG9tLXJ1bGUtcmVxdWVzdC5tZCZ0aXRsZT1SZXF1ZXN0JTIwUGljdmlld2VyJTIwQ0UlMkIlMjBzdXBwb3J0JTIwZm9yJTIwIiArIGxvY2F0aW9uLmhvc3RuYW1lLCB7YWN0aXZlOnRydWV9KTsKICAgICAgICB9KTsKCiAgICAgICAgZnVuY3Rpb24gaW5pdEtleUlucHV0cygpIHsKICAgICAgICAgICAgaWYgKCFHTV9jb25maWcuZnJhbWUgfHwgIUdNX2NvbmZpZy5mcmFtZS5jb250ZW50RG9jdW1lbnQpIHJldHVybjsKICAgICAgICAgICAgbGV0IGtleUlucHV0cyA9IEdNX2NvbmZpZy5mcmFtZS5jb250ZW50RG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQuZmxvYXRCYXIta2V5Jyk7CiAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChrZXlJbnB1dHMsIGlucHV0ID0+IHsKICAgICAgICAgICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZSgncmVhZE9ubHknLCAncmVhZG9ubHknKTsKICAgICAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCBlID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnIHx8IGUua2V5ID09PSAnQmFja3NwYWNlJykgaW5wdXQudmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlucHV0LnZhbHVlID0gZS5rZXk7CiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBtYXRjaGVkUnVsZSA9IGdldE1hdGNoZWRSdWxlKCk7CiAgICAgICAgbGV0IGVkaXRVcmw9c3RvcmFnZS5nZXRJdGVtKCJlZGl0VXJsIik7CiAgICAgICAgaWYoZWRpdFVybCl7CiAgICAgICAgICAgIGxldCBlZGl0RnVuYz1lZGl0U2l0ZXNGdW5jW3ByZWZzLmdhbGxlcnkuZWRpdFNpdGVdOwogICAgICAgICAgICBpZighZWRpdEZ1bmMpZWRpdEZ1bmM9ZWRpdFNpdGVzRnVuY1tPYmplY3Qua2V5cyhlZGl0U2l0ZXNGdW5jKVswXV07CiAgICAgICAgICAgIGlmKGVkaXRGdW5jKXsKICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09ICdjb21wbGV0ZScpewogICAgICAgICAgICAgICAgICAgIGVkaXRGdW5jKGVkaXRVcmwpOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgbGV0IHJlYWR5c3RhdGVjaGFuZ2VIYW5kbGVyID0gZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09ICdjb21wbGV0ZScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRGdW5jKGVkaXRVcmwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVhZHlzdGF0ZWNoYW5nZScsIHJlYWR5c3RhdGVjaGFuZ2VIYW5kbGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVhZHlzdGF0ZWNoYW5nZScsIHJlYWR5c3RhdGVjaGFuZ2VIYW5kbGVyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIGNvbmZpZ1N0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKICAgICAgICBjb25maWdTdHlsZS50ZXh0Q29udGVudCA9ICIjcHYtcHJlZnMgeyBkaXNwbGF5OiBpbml0aWFsOyB9IjsKICAgICAgICBjb25maWdTdHlsZS50eXBlID0gJ3RleHQvY3NzJzsKICAgICAgICBpZiAobG9jYXRpb24uaG9zdG5hbWUgPT0gImhvb3RoaW4uZ2l0aHViLmlvIiAmJiBsb2NhdGlvbi5wYXRobmFtZSA9PSAiL1VzZXJTY3JpcHRzL1BpY3ZpZXdlciUyMENFKy8iKSB7CiAgICAgICAgICAgIG9wZW5QcmVmcygpOwogICAgICAgIH0gZWxzZSBpZiAobG9jYXRpb24uaG9zdG5hbWUgPT0gImhvb3RoaW4uZ2l0aHViLmlvIiAmJiBsb2NhdGlvbi5wYXRobmFtZSA9PSAiL1VzZXJTY3JpcHRzL1BpY3ZpZXdlciUyMENFKy9nYWxsZXJ5Lmh0bWwiKSB7CiAgICAgICAgICAgIGxldCBnYWxsZXJ5ID0gbmV3IEdhbGxlcnlDKCk7CiAgICAgICAgICAgIGdhbGxlcnkuZGF0YSA9IFtdOwogICAgICAgICAgICBnYWxsZXJ5LmxvY2tHYWxsZXJ5ID0gdHJ1ZTsKICAgICAgICAgICAgdmFyIGFsbERhdGEgPSBhd2FpdCBnYWxsZXJ5LmdldEFsbFZhbGlkSW1ncygpOwogICAgICAgICAgICBnYWxsZXJ5LmRhdGEgPSBhbGxEYXRhOwogICAgICAgICAgICBnYWxsZXJ5LmxvYWQoZ2FsbGVyeS5kYXRhKTsKICAgICAgICAgICAgbGV0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMobG9jYXRpb24uc2VhcmNoKTsKICAgICAgICAgICAgbGV0IHZpZXdNb3JlID0gc2VhcmNoUGFyYW1zLmdldCgibW9kZSIpOwogICAgICAgICAgICBsZXQgaW1ncyA9IHNlYXJjaFBhcmFtcy5nZXQoImltZ3MiKTsKICAgICAgICAgICAgaWYgKGltZ3MpIHsKICAgICAgICAgICAgICAgIGdhbGxlcnkuYWRkSW1hZ2VVcmxzKGltZ3MpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh2aWV3TW9yZSA9PSAiMSIpIHsKICAgICAgICAgICAgICAgIGdhbGxlcnkubWF4aW1pemVTaWRlYmFyKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IGltZ0NvbiA9IGdhbGxlcnkuZWxlTWFwc1snaW1nLWNvbnRlbnQnXSwgd2FpdGluZ0RvdWJsZSA9IGZhbHNlLCBvcGVuSW1hZ2VUaW1lcjsKICAgICAgICAgICAgaW1nQ29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQgPT0gaW1nQ29uKSB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG9wZW5JbWFnZVRpbWVyKTsKICAgICAgICAgICAgICAgICAgICBpZiAod2FpdGluZ0RvdWJsZSkgewogICAgICAgICAgICAgICAgICAgICAgICB3YWl0aW5nRG91YmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbGxlcnkub3BlbkltYWdlcyh7YWx0S2V5OiB0cnVlfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgd2FpdGluZ0RvdWJsZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgb3BlbkltYWdlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdGluZ0RvdWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBnYWxsZXJ5Lm9wZW5JbWFnZXMoZSk7CiAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgdHJ1ZSk7CiAgICAgICAgfSBlbHNlIGlmIChwcmVmcy5nYWxsZXJ5LmF1dG9PcGVuU2l0ZXMpIHsKICAgICAgICAgICAgbGV0IHNpdGVzQXJyPXByZWZzLmdhbGxlcnkuYXV0b09wZW5TaXRlcy5zcGxpdCgiXG4iKTsKICAgICAgICAgICAgZm9yKGxldCBzPTA7czxzaXRlc0Fyci5sZW5ndGg7cysrKXsKICAgICAgICAgICAgICAgIGxldCBzaXRlUmVnPXNpdGVzQXJyW3NdLnRyaW0oKTsKICAgICAgICAgICAgICAgIGxldCBhdXRvVmlld01vcmU9c2l0ZVJlZ1swXT09IkAiOwogICAgICAgICAgICAgICAgaWYoYXV0b1ZpZXdNb3JlKXNpdGVSZWc9c2l0ZVJlZy5zdWJzdHIoMSk7CiAgICAgICAgICAgICAgICBpZihuZXcgUmVnRXhwKHNpdGVSZWcpLnRlc3QoX1VSTCkpewogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYXN5bmMgZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGdhbGxlcnkgPSBhd2FpdCBvcGVuR2FsbGVyeSgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FsbGVyeSAmJiBhdXRvVmlld01vcmUpIGdhbGxlcnkubWF4aW1pemVTaWRlYmFyKCk7CiAgICAgICAgICAgICAgICAgICAgfSwyMDAwKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8g5rOo5YaM5oyJ6ZSuCiAgICAgICAgbGV0IGRpc2FibGVLZXkgPSBmYWxzZTsKICAgICAgICBpZiAocHJlZnMuZmxvYXRCYXIuZGlzYWJsZUtleVNpdGVzKSB7CiAgICAgICAgICAgIGxldCBzaXRlc0FyciA9IHByZWZzLmZsb2F0QmFyLmRpc2FibGVLZXlTaXRlcy5zcGxpdCgiXG4iKTsKICAgICAgICAgICAgZm9yKGxldCBzID0gMDsgcyA8IHNpdGVzQXJyLmxlbmd0aDsgcysrKSB7CiAgICAgICAgICAgICAgICBsZXQgc2l0ZVJlZyA9IHNpdGVzQXJyW3NdLnRyaW0oKTsKICAgICAgICAgICAgICAgIGlmIChuZXcgUmVnRXhwKHNpdGVSZWcpLnRlc3QoX1VSTCkpIHsKICAgICAgICAgICAgICAgICAgICBkaXNhYmxlS2V5ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIWRpc2FibGVLZXkpIHsKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGtleWRvd24sIHRydWUpOwogICAgICAgIH0KCiAgICAgICAgbGV0IGNhbkltcG9ydCA9IGZhbHNlOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcnVsZUltcG9ydEhvc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGxvY2F0aW9uLmhvc3QuaW5kZXhPZihydWxlSW1wb3J0SG9zdFtpXSkgIT09IC0xKSB7CiAgICAgICAgICAgICAgICBjYW5JbXBvcnQgPSB0cnVlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGNhbkltcG9ydCkgewogICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gewogICAgICAgICAgICAgICAgaWYgKCFydWxlSW1wb3J0VXJsUmVnLnRlc3QobG9jYXRpb24uaHJlZikpIHJldHVybjsKICAgICAgICAgICAgICAgIGlmICgvcHJlfGNvZGUvaS50ZXN0KGUudGFyZ2V0Lm5vZGVOYW1lKSkgewogICAgICAgICAgICAgICAgICAgIGxldCBjb250ZW50ID0gZS50YXJnZXQuaW5uZXJUZXh0LnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICBpZiAoLyJuYW1lIjovLnRlc3QoY29udGVudCkgJiYgLyIocnx4aHIpIjovLnRlc3QoY29udGVudCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwaWN2aWV3ZXJDRS5jb25maWcuY3VyVGFiJywgNCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgd2ViUnVsZSA9IEpTT04ucGFyc2UoY29udGVudC5yZXBsYWNlKC9eXC9cLy4qL2csICIiKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VzdG9tUnVsZXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmllbGRzQ3VzdG9tUnVsZXMgPSBHTV9jb25maWcuZmllbGRzLmN1c3RvbVJ1bGVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZWZzLmN1c3RvbVJ1bGVzLmluZGV4T2YoJyJuYW1lIjonKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21SdWxlcyA9IEpTT04ucGFyc2UocHJlZnMuY3VzdG9tUnVsZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21SdWxlcyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tUnVsZXMucHVzaCh3ZWJSdWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc0N1c3RvbVJ1bGVzLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkoY3VzdG9tUnVsZXMsIG51bGwsIDQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlblByZWZzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGUudG9TdHJpbmcoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHRydWUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gb3BlblByZWZzKCkgewogICAgICAgICAgICBsZXQgZmllbGRzU2VhcmNoRGF0YSA9IEdNX2NvbmZpZy5maWVsZHNbImdhbGxlcnkuc2VhcmNoRGF0YSJdOwogICAgICAgICAgICBpZiAoZmllbGRzU2VhcmNoRGF0YSAmJiBmaWVsZHNTZWFyY2hEYXRhLnZhbHVlKSB7CiAgICAgICAgICAgICAgICBmaWVsZHNTZWFyY2hEYXRhLnZhbHVlID0gZmllbGRzU2VhcmNoRGF0YS52YWx1ZS5yZXBsYWNlKC8mYW1wOy9nLCAiJiIpLnJlcGxhY2UoLyZndDsvZywgIj4iKS5yZXBsYWNlKC8mbHQ7L2csICI8IikucmVwbGFjZSgvJi9nLCAiJmFtcDsiKS5yZXBsYWNlKC8+L2csICImZ3Q7IikucmVwbGFjZSgvPC9nLCAiJmx0OyIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBmaWVsZHNDdXN0b21SdWxlcyA9IEdNX2NvbmZpZy5maWVsZHMuY3VzdG9tUnVsZXM7CiAgICAgICAgICAgIGlmIChmaWVsZHNDdXN0b21SdWxlcyAmJiBmaWVsZHNDdXN0b21SdWxlcy52YWx1ZSkgewogICAgICAgICAgICAgICAgZmllbGRzQ3VzdG9tUnVsZXMudmFsdWUgPSBmaWVsZHNDdXN0b21SdWxlcy52YWx1ZS5yZXBsYWNlKC8mYW1wOy9nLCAiJiIpLnJlcGxhY2UoLyZndDsvZywgIj4iKS5yZXBsYWNlKC8mbHQ7L2csICI8IikucmVwbGFjZSgvJi9nLCAiJmFtcDsiKS5yZXBsYWNlKC8+L2csICImZ3Q7IikucmVwbGFjZSgvPC9nLCAiJmx0OyIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoY29uZmlnU3R5bGUpOwogICAgICAgICAgICBHTV9jb25maWcub3BlbigpOwogICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoR01fY29uZmlnLmZyYW1lKTsKCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PnsKICAgICAgICAgICAgICAgIGlmIChHTV9jb25maWcuZnJhbWUgJiYgR01fY29uZmlnLmZyYW1lLmNvbnRlbnREb2N1bWVudC5ib2R5LmlubmVySFRNTCA9PT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICBfR01fb3BlbkluVGFiKCJodHRwczovL2hvb3RoaW4uZ2l0aHViLmlvL1VzZXJTY3JpcHRzL1BpY3ZpZXdlciUyMENFKy8iLCB7YWN0aXZlOnRydWV9KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoR01fY29uZmlnLmZyYW1lICYmIEdNX2NvbmZpZy5mcmFtZS5zdHlsZSAmJiBHTV9jb25maWcuZnJhbWUuc3R5bGUuZGlzcGxheSA9PSAibm9uZSIpIHsKICAgICAgICAgICAgICAgICAgICBHTV9jb25maWcuZnJhbWUuc3JjPSIiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaW5pdEtleUlucHV0cygpOwogICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGxvYWRQcmVmcygpIHsKICAgICAgICAgICAgLy8g5qC55o2uIEdNX2NvbmZpZyDnmoQga2V5IOi9veWFpeiuvue9ruWIsCBwcmVmcwogICAgICAgICAgICBPYmplY3Qua2V5cyhHTV9jb25maWcuZmllbGRzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleVN0cikgewogICAgICAgICAgICAgICAgdmFyIGtleXMgPSBrZXlTdHIuc3BsaXQoJy4nKTsKICAgICAgICAgICAgICAgIHZhciBsYXN0S2V5ID0ga2V5cy5wb3AoKTsKCiAgICAgICAgICAgICAgICB2YXIgbGFzdFByZWYgPSBwcmVmczsKICAgICAgICAgICAgICAgIHZhciBjdXJLZXkgPSBrZXlzLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICB3aGlsZShjdXJLZXkpewogICAgICAgICAgICAgICAgICAgIGxhc3RQcmVmID0gbGFzdFByZWZbY3VyS2V5XTsKICAgICAgICAgICAgICAgICAgICBjdXJLZXkgPSBrZXlzLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gR01fY29uZmlnLmdldChrZXlTdHIpOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgICAgIC8vIOeJueauiueahAogICAgICAgICAgICAgICAgICAgIGlmIChrZXlTdHIgPT0gJ21hZ25pZmllci53aGVlbFpvb20ucmFuZ2UnIHx8IGtleVN0ciA9PSAnaW1nV2luZG93Lnpvb20ucmFuZ2UnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQcmVmW2xhc3RLZXldID0gdmFsdWUuc3BsaXQoL1ss77yMXVxzKi8pLm1hcChmdW5jdGlvbihzKSB7IHJldHVybiBwYXJzZUZsb2F0KHMpfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKGtleVN0ciA9PSAnZmxvYXRCYXIuYnV0b25PcmRlcicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFByZWZbbGFzdEtleV0gPSB2YWx1ZS50cmltKCkuc3BsaXQoL1xzKlss77yMXVxzKi8pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQcmVmW2xhc3RLZXldID0gdmFsdWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2UgJiYgbG9jYWxTdG9yYWdlLnNldEl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXN0b3JhZ2UuZ2V0SXRlbSgnaW5pdGVkJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BpY3ZpZXdlckNFLmNvbmZpZy5jdXJUYWInLCA0KTsKICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZS5zZXRJdGVtKCdpbml0ZWQnLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2goZSkge30KICAgICAgICAgICAgaWYgKHR5cGVvZiBwcmVmcy5nYWxsZXJ5LmZvcm1hdENvbnZlcnNpb24gPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgIHByZWZzLmdhbGxlcnkuZm9ybWF0Q29udmVyc2lvbiA9ICJ3ZWJwPnBuZyI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcHJlZnMuZ2FsbGVyeS5mb3JtYXRDb252ZXJzaW9uLnNwbGl0KCJcbiIpLmZvckVhY2goc3RyID0+IHsKICAgICAgICAgICAgICAgIGxldCBwYWlyID0gc3RyLnNwbGl0KCI+Iik7CiAgICAgICAgICAgICAgICBpZiAocGFpci5sZW5ndGggIT09IDIpIHJldHVybjsKICAgICAgICAgICAgICAgIGZvcm1hdERpY3Quc2V0KHBhaXJbMF0udHJpbSgpLCBwYWlyWzFdLnRyaW0oKSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgZGVidWcgPSBwcmVmcy5kZWJ1ZyA/IGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSkgOiBmdW5jdGlvbigpIHt9OwogICAgICAgIH0KCiAgICB9OwoKICAgIGZ1bmN0aW9uIGRyYXdUb2Jhc2U2NChpbWcpewogICAgICAgIGNhbnZhcy53aWR0aCA9IGltZy5uYXR1cmFsV2lkdGggfHwgaW1nLndpZHRoOwogICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWcubmF0dXJhbEhlaWdodCB8fCBpbWcuaGVpZ2h0OwogICAgICAgIGxldCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDApOwogICAgICAgIHJldHVybiBjYW52YXMudG9EYXRhVVJMKCJpbWFnZS9wbmciKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbml0MigpewogICAgICAgIGluaXQodG9wT2JqZWN0LHdpbmRvdyxkb2N1bWVudCxhcnJheUZuLGVudmlyLHN0b3JhZ2UsdW5zYWZlV2luZG93KTsKICAgIH07CgoKICAgIC8v5aSn6Ie05qOA5rWL6L+Q6KGM546v5aKDCiAgICB2YXIgZW52aXI9ewogICAgICAgIGllOnR5cGVvZiBkb2N1bWVudC5kb2N1bWVudE1vZGUgPT0gJ251bWJlcicsCiAgICAgICAgZmlyZWZveDp0eXBlb2YgWFBDTmF0aXZlV3JhcHBlciA9PSAnZnVuY3Rpb24nLAogICAgICAgIG9wZXJhOiEhd2luZG93Lm9wZXJhLAogICAgICAgIGNocm9tZTohIXdpbmRvdy5jaHJvbWUsCiAgICB9OwoKICAgIC8vaWXnmoTor53vvIzkuI3mlK/mjIEgPCBpZTnnmoTniYjmnKwKICAgIGlmKGVudmlyLmllICYmIGRvY3VtZW50LmRvY3VtZW50TW9kZSA8IDkpewogICAgICAgIHJldHVybjsKICAgIH07CgoKICAgIHZhciBhcnJheUZuPShmdW5jdGlvbigpewogICAgICAgIHZhciBhcnJheVByb3RvPUFycmF5LnByb3RvdHlwZTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBmaW5kOmFycmF5UHJvdG8uZmluZCwKICAgICAgICAgICAgc2xpY2U6YXJyYXlQcm90by5zbGljZSwKICAgICAgICAgICAgZm9yRWFjaDphcnJheVByb3RvLmZvckVhY2gsCiAgICAgICAgICAgIHNvbWU6YXJyYXlQcm90by5zb21lLAogICAgICAgICAgICBldmVyeTphcnJheVByb3RvLmV2ZXJ5LAogICAgICAgICAgICBtYXA6YXJyYXlQcm90by5tYXAsCiAgICAgICAgICAgIGZpbHRlcjphcnJheVByb3RvLmZpbHRlciwKICAgICAgICAgICAgaW5kZXhPZjphcnJheVByb3RvLmluZGV4T2YsCiAgICAgICAgICAgIGxhc3RJbmRleE9mOmFycmF5UHJvdG8ubGFzdEluZGV4T2YsCiAgICAgICAgfTsKCiAgICB9KSgpOwoKICAgIHZhciBzdG9yYWdlPXsKICAgICAgICBzdXBwb3J0R006IHR5cGVvZiBHTV9nZXRWYWx1ZT09J2Z1bmN0aW9uJyAmJiB0eXBlb2YgR01fZ2V0VmFsdWUoJ2EnLCdiJykhPSd1bmRlZmluZWQnLC8vY2hyb21l55qEZ23lh73mlbDlvI/nqbrlh73mlbAKICAgICAgICBteEFwcFN0b3JhZ2U6KGZ1bmN0aW9uKCl7Ly/lgrLmuLjmianlsZXlgqjlrZjmjqXlj6MKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5leHRlcm5hbC5teEdldFJ1bnRpbWUoKS5zdG9yYWdlOwogICAgICAgICAgICB9Y2F0Y2goZSl7CiAgICAgICAgICAgIH07CiAgICAgICAgfSkoKSwKICAgICAgICBvcGVyYVVKU1N0b3JhZ2U6KGZ1bmN0aW9uKCl7Ly9vcGVyYSB1c2VyanPlhajlsYDlrZjlgqjmjqXlj6MKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5vcGVyYS5zY3JpcHRTdG9yYWdlOwogICAgICAgICAgICB9Y2F0Y2goZSl7CiAgICAgICAgICAgIH07CiAgICAgICAgfSkoKSwKICAgICAgICBzZXRJdGVtOmZ1bmN0aW9uKGtleSx2YWx1ZSl7CiAgICAgICAgICAgIGlmICh0aGlzLnN1cHBvcnRHTSkgewogICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoa2V5LCB2YWx1ZSk7CiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09ICIiICYmIHR5cGVvZiBHTV9kZWxldGVWYWx1ZSAhPSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgICAgIEdNX2RlbGV0ZVZhbHVlKGtleSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcGVyYVVKU1N0b3JhZ2UpIHsKICAgICAgICAgICAgICAgIHRoaXMub3BlcmFVSlNTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5teEFwcFN0b3JhZ2UpIHsKICAgICAgICAgICAgICAgIHRoaXMubXhBcHBTdG9yYWdlLnNldENvbmZpZyhrZXksIHZhbHVlKTsKICAgICAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGdldEl0ZW06ZnVuY3Rpb24oa2V5KXsKICAgICAgICAgICAgdmFyIHZhbHVlOwogICAgICAgICAgICBpZih0aGlzLnN1cHBvcnRHTSl7CiAgICAgICAgICAgICAgICB2YWx1ZT1HTV9nZXRWYWx1ZShrZXkpOwogICAgICAgICAgICB9ZWxzZSBpZih0aGlzLm9wZXJhVUpTU3RvcmFnZSl7CiAgICAgICAgICAgICAgICB2YWx1ZT10aGlzLm9wZXJhVUpTU3RvcmFnZS5nZXRJdGVtKGtleSk7CiAgICAgICAgICAgIH1lbHNlIGlmKHRoaXMubXhBcHBTdG9yYWdlKXsKICAgICAgICAgICAgICAgIHZhbHVlPXRoaXMubXhBcHBTdG9yYWdlLmdldENvbmZpZyhrZXkpOwogICAgICAgICAgICB9ZWxzZSBpZih3aW5kb3cubG9jYWxTdG9yYWdlKXsKICAgICAgICAgICAgICAgIHZhbHVlPXdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpOwogICAgICAgICAgICB9OwogICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfSwKICAgICAgICBnZXRMaXN0SXRlbTogZnVuY3Rpb24obGlzdCwga2V5KSB7CiAgICAgICAgICAgIHZhciB2YWx1ZTsKICAgICAgICAgICAgdmFyIGxpc3REYXRhID0gdGhpcy5nZXRJdGVtKGxpc3QpOwogICAgICAgICAgICBpZiAobGlzdERhdGEpIHsKICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsaXN0RGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gbGlzdERhdGFbaV07CiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuayA9PSBrZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBkYXRhLnY7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfSwKICAgICAgICBzZXRMaXN0SXRlbTogZnVuY3Rpb24obGlzdCwga2V5LCB2YWx1ZSwgbGltaXROdW0gPSA1MCkgewogICAgICAgICAgICB2YXIgbGlzdERhdGEgPSB0aGlzLmdldEl0ZW0obGlzdCk7CiAgICAgICAgICAgIGlmICghbGlzdERhdGEgfHwgIWxpc3REYXRhLmZpbHRlcikgbGlzdERhdGEgPSBbXTsKICAgICAgICAgICAgbGlzdERhdGEgPSBsaXN0RGF0YS5maWx0ZXIoZGF0YSA9PiBkYXRhICYmIGRhdGEuayAhPSBrZXkpOwogICAgICAgICAgICBpZiAodmFsdWUpIHsKICAgICAgICAgICAgICAgIGxpc3REYXRhLnVuc2hpZnQoe2s6IGtleSwgdjogdmFsdWV9KTsKICAgICAgICAgICAgICAgIGlmIChsaXN0RGF0YS5sZW5ndGggPiBsaW1pdE51bSkgbGlzdERhdGEucG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5zZXRJdGVtKGxpc3QsIGxpc3REYXRhKTsKICAgICAgICB9CiAgICB9OwoKICAgIGZ1bmN0aW9uIGdldFVybCh1cmwsIGNhbGxiYWNrLCBvbkVycm9yKXsKICAgICAgICBfR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICB1cmw6IHVybC50cmltKCksCiAgICAgICAgICAgIG9ubG9hZDogY2FsbGJhY2ssCiAgICAgICAgICAgIG9uZXJyb3I6IG9uRXJyb3IKICAgICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRTZWFyY2hTdGF0ZSh3b3JkcywgaW1nU3RhdGUpewogICAgICAgIGlmIChpbWdTdGF0ZSkgaW1nU3RhdGUuaW5uZXJIVE1MPWNyZWF0ZUhUTUwod29yZHMpOwogICAgfQoKICAgIHZhciBzZWFyY2hTb3J0PVsiVGluZXllIiwiR29vZ2xlIiwiQmFpZHUiXTsKICAgIGZ1bmN0aW9uIHNvcnRTZWFyY2goKXsKICAgICAgICBmb3IodmFyIGk9MDtpPHNlYXJjaFNvcnQubGVuZ3RoO2krKyl7CiAgICAgICAgICAgIGlmKHNlYXJjaFNvcnRbaV09PXByZWZzLmZpcnN0RW5naW5lKXsKICAgICAgICAgICAgICAgIHNlYXJjaFNvcnQuc3BsaWNlKGksMSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBzZWFyY2hTb3J0LnVuc2hpZnQocHJlZnMuZmlyc3RFbmdpbmUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlYXJjaEltZ0J5SW1nKGltZ1NyYywgaW1nQ29uLCBjYWxsQmFjaywgb25FcnJvciwgbm9uZVJlc3VsdCwgc2VhcmNoRnJvbSl7CiAgICAgICAgbGV0IHNyY3M9W107CiAgICAgICAgdmFyIHNlYXJjaEJhaWR1PWZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHNldFNlYXJjaFN0YXRlKGkxOG4oImJlZ2luU2VhcmNoSW1nIiwi55m+5bqmIiksaW1nQ29uKTsKICAgICAgICAgICAgZ2V0VXJsKCJodHRwOi8vaW1hZ2UuYmFpZHUuY29tL24vc2FtZT9xdWVyeUltYWdlVXJsPSIrZW5jb2RlVVJJQ29tcG9uZW50KGltZ1NyYykrIiZpc2d1ZXNzd29yZD0xJnJuPTMwJmZyPXBjJnBuPTAmc29ydD1zaXplIiwgZnVuY3Rpb24oZCl7CiAgICAgICAgICAgICAgICBsZXQgYmFpZHVKc29uOwogICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgIGJhaWR1SnNvbj1KU09OLnBhcnNlKGQucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgIH1jYXRjaChlKXsKICAgICAgICAgICAgICAgICAgICBzZXRTZWFyY2hTdGF0ZShpMThuKCJmaW5kTm9QaWMiKSxpbWdDb24pOwogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2VhcmNoU3RhdGUoIiIsaW1nQ29uKTsKICAgICAgICAgICAgICAgICAgICB9LDIwMDApOwogICAgICAgICAgICAgICAgICAgIHNlYXJjaE5leHQoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZihiYWlkdUpzb24uZGF0YVswXSl7CiAgICAgICAgICAgICAgICAgICAgc3Jjcz1bXTsKICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGltZ0RhdGEgb2YgYmFpZHVKc29uLmRhdGEpewogICAgICAgICAgICAgICAgICAgICAgICBpZihzcmNzLmxlbmd0aD4yKWJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBzcmNzLnB1c2goaW1nRGF0YS5vYmpVUkwpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBzZXRTZWFyY2hTdGF0ZShpMThuKCJmaW5kT3ZlckJlZ2luTG9hZCIsWyLnmb7luqYiLHNyY3MubGVuZ3RoXSksaW1nQ29uKTsKICAgICAgICAgICAgICAgICAgICBjYWxsQmFja0Z1bihzcmNzKTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHNlYXJjaE5leHQoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIG9uRXJyb3IpOwogICAgICAgIH07CiAgICAgICAgdmFyIHNlYXJjaEdvb2dsZT1mdW5jdGlvbigpewogICAgICAgICAgICBzZXRTZWFyY2hTdGF0ZShpMThuKCJiZWdpblNlYXJjaEltZyIsIkdvb2dsZSIpLGltZ0Nvbik7CiAgICAgICAgICAgIGdldFVybCgiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9zZWFyY2hieWltYWdlP3NhZmU9b2ZmJmltYWdlX3VybD0iK2VuY29kZVVSSUNvbXBvbmVudChpbWdTcmMpLCBmdW5jdGlvbihkKXsKICAgICAgICAgICAgICAgIGxldCBnb29nbGVIdG1sPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgnJyk7CiAgICAgICAgICAgICAgICBnb29nbGVIdG1sLmRvY3VtZW50RWxlbWVudC5pbm5lckhUTUwgPSBkLnJlc3BvbnNlVGV4dDsKICAgICAgICAgICAgICAgIGxldCBzaXplVXJsPWdvb2dsZUh0bWwucXVlcnlTZWxlY3RvcigiZGl2LmNhcmQtc2VjdGlvbj5kaXY+ZGl2PnNwYW4uZ2w+YSIpOwogICAgICAgICAgICAgICAgaWYoc2l6ZVVybCl7CiAgICAgICAgICAgICAgICAgICAgZ2V0VXJsKCJodHRwczovL3d3dy5nb29nbGUuY29tIitzaXplVXJsLmdldEF0dHJpYnV0ZSgiaHJlZiIpLCBmdW5jdGlvbihkKXsKICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlSHRtbC5kb2N1bWVudEVsZW1lbnQuaW5uZXJIVE1MID0gZC5yZXNwb25zZVRleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWdzPWdvb2dsZUh0bWwucXVlcnlTZWxlY3RvckFsbCgiZGl2LnJnX21ldGEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW1ncy5sZW5ndGg9PTApe3NlYXJjaE5leHQoKTtyZXR1cm47fQogICAgICAgICAgICAgICAgICAgICAgICBzcmNzPVtdOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDtpPGltZ3MubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzcmNzLmxlbmd0aD4yKWJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGpzb25EYXRhPUpTT04ucGFyc2UoaW1nc1tpXS5pbm5lckhUTUwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Jjcy5wdXNoKGpzb25EYXRhLm91KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWFyY2hTdGF0ZShpMThuKCJmaW5kT3ZlckJlZ2luTG9hZCIsWyJHb29nbGUiLHNyY3MubGVuZ3RoXSksaW1nQ29uKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FsbEJhY2tGdW4oc3Jjcyk7CiAgICAgICAgICAgICAgICAgICAgfSwgb25FcnJvcik7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBzZWFyY2hOZXh0KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIG9uRXJyb3IpOwogICAgICAgIH07CiAgICAgICAgdmFyIHNlYXJjaFRpbmV5ZT1mdW5jdGlvbigpewogICAgICAgICAgICBzZXRTZWFyY2hTdGF0ZShpMThuKCJiZWdpblNlYXJjaEltZyIsIlRpbmV5ZSIpLGltZ0Nvbik7CiAgICAgICAgICAgIGdldFVybCgiaHR0cHM6Ly93d3cudGluZXllLmNvbS9zZWFyY2g/dXJsPSIrZW5jb2RlVVJJQ29tcG9uZW50KGltZ1NyYykrIiZzb3J0PXNpemUiLCBmdW5jdGlvbihkKXsKICAgICAgICAgICAgICAgIGxldCB0aW5leWVIdG1sPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgnJyk7CiAgICAgICAgICAgICAgICB0aW5leWVIdG1sLmRvY3VtZW50RWxlbWVudC5pbm5lckhUTUwgPSBkLnJlc3BvbnNlVGV4dDsKICAgICAgICAgICAgICAgIGxldCBzZWFyY2hJbWc9dGluZXllSHRtbC5xdWVyeVNlbGVjdG9yQWxsKCIubWF0Y2gtZGV0YWlscz5kaXYubWF0Y2g6Zmlyc3Qtb2YtdHlwZT5wLmltYWdlLWxpbms6Zmlyc3Qtb2YtdHlwZT5hIik7CiAgICAgICAgICAgICAgICBpZihzZWFyY2hJbWcubGVuZ3RoPjApewogICAgICAgICAgICAgICAgICAgIHNyY3M9W107CiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxzZWFyY2hJbWcubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNyY3MubGVuZ3RoPjIpYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIHNyY3MucHVzaChzZWFyY2hJbWdbaV0uaHJlZik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHNldFNlYXJjaFN0YXRlKGkxOG4oImZpbmRPdmVyQmVnaW5Mb2FkIixbIlRpbmV5ZSIsc3Jjcy5sZW5ndGhdKSxpbWdDb24pOwogICAgICAgICAgICAgICAgICAgIGNhbGxCYWNrRnVuKHNyY3MpOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgc2VhcmNoTmV4dCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBvbkVycm9yKTsKICAgICAgICB9OwogICAgICAgIHZhciBzZWFyY2hOZXh0PWZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHNlYXJjaEZyb20rKzsKICAgICAgICAgICAgaWYoc2VhcmNoRnJvbTw9c2VhcmNoU29ydC5sZW5ndGgpc3dpdGNoU2VhcmNoKCk7CiAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICBpZihub25lUmVzdWx0KW5vbmVSZXN1bHQoKTsKICAgICAgICAgICAgICAgIHNldFNlYXJjaFN0YXRlKGkxOG4oImZpbmROb1BpYyIpLGltZ0Nvbik7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgc2V0U2VhcmNoU3RhdGUoIiIsaW1nQ29uKTsKICAgICAgICAgICAgICAgIH0sMjAwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHZhciBjYWxsQmFja0Z1bj1mdW5jdGlvbihzcmNzKXsKICAgICAgICAgICAgY2FsbEJhY2soc3Jjcywgc2VhcmNoRnJvbSk7CiAgICAgICAgfTsKICAgICAgICBpZighc2VhcmNoRnJvbSlzZWFyY2hGcm9tPTE7CiAgICAgICAgdmFyIHN3aXRjaFNlYXJjaD1mdW5jdGlvbigpewogICAgICAgICAgICBzd2l0Y2goc2VhcmNoU29ydFtzZWFyY2hGcm9tLTFdKXsKICAgICAgICAgICAgICAgIGNhc2UgIkJhaWR1IjoKICAgICAgICAgICAgICAgICAgICBzZWFyY2hCYWlkdSgpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAiR29vZ2xlIjoKICAgICAgICAgICAgICAgICAgICBzZWFyY2hHb29nbGUoKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgIlRpbmV5ZSI6CiAgICAgICAgICAgICAgICAgICAgc2VhcmNoVGluZXllKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHNlYXJjaFRpbmV5ZSgpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBzd2l0Y2hTZWFyY2goKTsKICAgIH0KCiAgICBpZiAod2luZG93LnRvcCAhPSB3aW5kb3cuc2VsZikgewogICAgICAgIGlmICh3aW5kb3cuc2VsZi5pbm5lcldpZHRoID09PSAwICYmIHdpbmRvdy5zZWxmLmlubmVySGVpZ2h0ID09PSAwKSB7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9PSAiY29tcGxldGUiKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGUgPT4gewogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LnNlbGYuaW5uZXJXaWR0aCA+IDI1MCAmJiB3aW5kb3cuc2VsZi5pbm5lckhlaWdodCA+IDI1MCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdDIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGluaXQyKCk7CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICBpbml0MigpOwogICAgfQoKfSkodGhpcyx3aW5kb3csZG9jdW1lbnQsKHR5cGVvZiB1bnNhZmVXaW5kb3c9PSd1bmRlZmluZWQnPyB3aW5kb3cgOiB1bnNhZmVXaW5kb3cpKTs=","requires":[{"meta":{"name":"GM_config%20CN.js","url":"https://update.greasyfork.org/scripts/6158/23710/GM_config%20CN.js","ts":1758060364733,"mimetype":"text/javascript"},"source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIEdNX2NvbmZpZyBDTgovLyBAbmFtZXNwYWNlICAgaHR0cHM6Ly9naXRodWIuY29tL3l3emhhaXFpLwovLyBAZGVzY3JpcHRpb24gc2l6emxlbWN0d2l6emxlIOeahCBHTV9jb25maWcg5bqT5Lit5paH54mI5pysCi8vIEBzb3VyY2UgICAgICBodHRwczovL2dpdGh1Yi5jb20veXd6aGFpcWkvR01fY29uZmlnCi8vIEB2ZXJzaW9uICAgICAxLjEKCi8vIEBjb3B5cmlnaHQgICBzaXp6bGVtY3R3aXp6bGUKCi8vIEBncmFudCAgICAgICBHTV9nZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgR01fc2V0VmFsdWUKLy8gQGdyYW50ICAgICAgIEdNX2RlbGV0ZVZhbHVlCi8vIEBsaWNlbnNlICAgICBMR1BMIDMKLy8gPT0vVXNlclNjcmlwdD09CgovKgogIOS/ruaUueivtOaYjgogICAgMeOAgeaUueaIkOS4reaWhyAi56Gu5a6aIuOAgSLlj5bmtogiIOaMiemSruOAggogICAgMuOAgXNlbGVjdCDmlrDlop7kuoYgdGV4dENvbnRlbnRzIOaVsOe7hOOAggoqLwoKLyoKQ29weXJpZ2h0IDIwMDkrLCBHTV9jb25maWcgQ29udHJpYnV0b3JzIChodHRwczovL2dpdGh1Yi5jb20vc2l6emxlbWN0d2l6emxlL0dNX2NvbmZpZykKCkdNX2NvbmZpZyBDb250cmlidXRvcnM6CiAgICAgICAgTWlrZSBNZWRsZXkgPG1lZGxleW1pbmRAZ21haWwuY29tPgogICAgICAgIEpvZSBTaW1tb25zCiAgICAgICAgSXp6eSBTb2Z0CiAgICAgICAgTWFydGkgTWFydHoKCkdNX2NvbmZpZyBpcyBkaXN0cmlidXRlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS4KCiAgICAgICAgR01fY29uZmlnIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKICAgICAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKICAgICAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcgogICAgICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCgogICAgICAgIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAogICAgICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiAgICAgICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZQogICAgICAgIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgoKICAgICAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UKICAgICAgICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KKi8KCi8vIFRoZSBHTV9jb25maWcgY29uc3RydWN0b3IKZnVuY3Rpb24gR01fY29uZmlnU3RydWN0KCkgewogICAgLy8gY2FsbCBpbml0KCkgaWYgc2V0dGluZ3Mgd2VyZSBwYXNzZWQgdG8gY29uc3RydWN0b3IKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7CiAgICAgICAgR01fY29uZmlnSW5pdCh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIHRoaXMub25Jbml0KCk7CiAgICB9Cn0KCi8vIFRoaXMgaXMgdGhlIGluaXRpYWxpemVyIGZ1bmN0aW9uCmZ1bmN0aW9uIEdNX2NvbmZpZ0luaXQoY29uZmlnLCBhcmdzKSB7CiAgICAvLyBJbml0aWFsaXplIGluc3RhbmNlIHZhcmlhYmxlcwogICAgaWYgKHR5cGVvZiBjb25maWcuZmllbGRzID09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgY29uZmlnLmZpZWxkcyA9IHt9OwogICAgICAgIGNvbmZpZy5vbkluaXQgPSBjb25maWcub25Jbml0IHx8IGZ1bmN0aW9uKCkge307CiAgICAgICAgY29uZmlnLm9uT3BlbiA9IGNvbmZpZy5vbk9wZW4gfHwgZnVuY3Rpb24oKSB7fTsKICAgICAgICBjb25maWcub25TYXZlID0gY29uZmlnLm9uU2F2ZSB8fCBmdW5jdGlvbigpIHt9OwogICAgICAgIGNvbmZpZy5vbkNsb3NlID0gY29uZmlnLm9uQ2xvc2UgfHwgZnVuY3Rpb24oKSB7fTsKICAgICAgICBjb25maWcub25SZXNldCA9IGNvbmZpZy5vblJlc2V0IHx8IGZ1bmN0aW9uKCkge307CiAgICAgICAgY29uZmlnLmlzT3BlbiA9IGZhbHNlOwogICAgICAgIGNvbmZpZy50aXRsZSA9ICfnlKjmiLfohJrmnKzorr7nva4nOwogICAgICAgIGNvbmZpZy5jc3MgPSB7CiAgICAgICAgICAgIGJhc2ljOiBbCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAqIHsgZm9udC1mYW1pbHk6IGFyaWFsLHRhaG9tYSxteXJpYWQgcHJvLHNhbnMtc2VyaWY7IH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgeyBiYWNrZ3JvdW5kOiAjRkZGOyB9IiwKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIGlucHV0W3R5cGU9J3JhZGlvJ10geyBtYXJnaW4tcmlnaHQ6IDhweDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuaW5kZW50NDAgeyBtYXJnaW4tbGVmdDogNDAlOyB9IiwKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIC5maWVsZF9sYWJlbCB7IGZvbnQtc2l6ZTogMTJweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1yaWdodDogNnB4OyB9IiwKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIC5yYWRpb19sYWJlbCB7IGZvbnQtc2l6ZTogMTJweDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuYmxvY2sgeyBkaXNwbGF5OiBibG9jazsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuc2F2ZWNsb3NlX2J1dHRvbnMgeyBtYXJnaW46IDE2cHggMTBweCAxMHB4OyBwYWRkaW5nOiAycHggMTJweDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAucmVzZXQsICNHTV9jb25maWcgLnJlc2V0IGEsIiArCiAgICAgICAgICAgICAgICAgICIgI0dNX2NvbmZpZ19idXR0b25zX2hvbGRlciB7IGNvbG9yOiAjMDAwOyB0ZXh0LWFsaWduOiByaWdodDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuY29uZmlnX2hlYWRlciB7IGZvbnQtc2l6ZTogMjBwdDsgbWFyZ2luOiAwOyB9IiwKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIC5jb25maWdfZGVzYywgI0dNX2NvbmZpZyAuc2VjdGlvbl9kZXNjLCAjR01fY29uZmlnIC5yZXNldCB7IGZvbnQtc2l6ZTogOXB0OyB9IiwKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIC5jZW50ZXIgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgLnNlY3Rpb25faGVhZGVyX2hvbGRlciB7IG1hcmdpbi10b3A6IDhweDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuY29uZmlnX3ZhciB7IG1hcmdpbjogMCAwIDRweDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuc2VjdGlvbl9oZWFkZXIgeyBiYWNrZ3JvdW5kOiAjNDE0MTQxOyBib3JkZXI6IDFweCBzb2xpZCAjMDAwOyBjb2xvcjogI0ZGRjsiLAogICAgICAgICAgICAgICAgIiBmb250LXNpemU6IDEzcHQ7IG1hcmdpbjogMDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuc2VjdGlvbl9kZXNjIHsgYmFja2dyb3VuZDogI0VGRUZFRjsgYm9yZGVyOiAxcHggc29saWQgI0NDQzsgY29sb3I6ICM1NzU3NTc7IiArCiAgICAgICAgICAgICAgICAgICIgZm9udC1zaXplOiA5cHQ7IG1hcmdpbjogMCAwIDZweDsgfSIsCiAgICAgICAgICAgICAgICAvLyBuZXdlcgogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgaW5wdXRbdHlwZT0nbnVtYmVyJ10geyB3aWR0aDogNjBweDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAubmF2LXRhYnMgeyBtYXJnaW46IDEwIDB9IiwKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIC5uYXYtdGFicyA+IGRpdiB7IGRpc3BsYXk6IGlubGluZTsgcGFkZGluZzogM3B4IDEwcHg7IH0iLAogICAgICAgICAgICAgICAgIiNwdi1wcmVmcyAuc2VjdGlvbl9oZWFkZXJfaG9sZGVyIHsgcGFkZGluZy1sZWZ0OiAxMHB4OyB9IiwKICAgICAgICAgICAgICAgIF0uam9pbignXG4nKSArICdcbicsCiAgICAgICAgICAgIHNraW5fdGFiOiBbCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyB7IGJhY2tncm91bmQ6ICNFRUU7IH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgdGV4dGFyZWEgeyB3aWR0aDogOTglOyBoZWlnaHQ6IDQ1cHg7IG1hcmdpbi10b3A6IDVweDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuZmllbGRfbGFiZWwgeyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtd2VpZ2h0OiBub3JtYWw7IH0iLAogICAgICAgICAgICAgICAgLy8g5Zyo5ZCM5LiA6KGM5YaF55qE6K6+572uCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuaW5saW5lIGlucHV0W3R5cGU9J2NoZWNrYm94J10geyBtYXJnaW4tbGVmdDogMDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuaW5saW5lIC5jb25maWdfdmFyIHsgbWFyZ2luLWxlZnQ6IDE1cHg7IH0iLAogICAgICAgICAgICAgICAgLy8g5YaF5a655qC35byPCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuY29uZmlnX3ZhciB7IGZvbnQtc2l6ZTogMTJweDsgcGFkZGluZzogNXB4OyBtYXJnaW46IDA7IH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgLmNvbmZpZ19oZWFkZXIgYSB7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgY29sb3I6ICMwMDA7IH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgLm5hdi10YWJzIHsgbWFyZ2luOiAyMCAwfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAubmF2LXRhYnMgPiBkaXYgeyBmb250LXNpemU6IDE0cHg7IGNvbG9yOiAjOTk5OyBjdXJzb3I6IHBvaW50ZXI7IHBhZGRpbmc6IDEwcHggMjBweDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAubmF2LXRhYnMgPiAuYWN0aXZlIHsgY3Vyc29yOiBkZWZhdWx0OyBjb2xvcjogI0ZGRjsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAubmF2LXRhYnMgPiBkaXY6aG92ZXIgeyBjb2xvcjogI0ZGRjsgfSIsCiAgICAgICAgICAgICAgICBdLmpvaW4oJ1xuJykgKyAnXG4nLAogICAgICAgICAgICBza2luXzE6IFsgIC8vIOS7vyBNb3VzZW92ZXIgUG9wdXAgSW1hZ2UgVmlld2VyIOagt+W8jwogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgeyBiYWNrZ3JvdW5kOiAjRUVFOyB9IiwKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIHRleHRhcmVhIHsgd2lkdGg6IDk4JTsgaGVpZ2h0OiA0NXB4OyBtYXJnaW4tdG9wOiA1cHg7IH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgLmNvbmZpZ192YXIgeyBmb250LXNpemU6IDEycHg7IH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgLmlubGluZSAuY29uZmlnX3ZhciB7IG1hcmdpbi1sZWZ0OiAxNXB4OyB9IiwKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIC5maWVsZF9sYWJlbCB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC13ZWlnaHQ6IG5vcm1hbDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyB7IHBhZGRpbmc6IDIwcHggMzBweDsgbWFyZ2luOiAwOyB9IiwKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIC5jb25maWdfaGVhZGVyIHsgbWFyZ2luLWJvdHRvbTogMTBweDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyBkaXYuY29uZmlnX3ZhciB7IHBhZGRpbmc6IDdweCAwOyB9IiwKICAgICAgICAgICAgICAgIF0uam9pbignXG4nKSArICdcbicsCiAgICAgICAgICAgIGJhc2ljUHJlZml4OiAiR01fY29uZmlnIiwKICAgICAgICAgICAgc3R5bGlzaDogIiIKICAgICAgICB9OwogICAgfQoKICAgIGlmIChhcmdzLmxlbmd0aCA9PSAxICYmCiAgICAgICAgdHlwZW9mIGFyZ3NbMF0uaWQgPT0gInN0cmluZyIgJiYKICAgICAgICB0eXBlb2YgYXJnc1swXS5hcHBlbmRDaGlsZCAhPSAiZnVuY3Rpb24iKSB2YXIgc2V0dGluZ3MgPSBhcmdzWzBdOwogICAgZWxzZSB7CiAgICAgICAgLy8gUHJvdmlkZSBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eSB3aXRoIGFyZ3VtZW50IHN0eWxlIGludGlhbGl6YXRpb24KICAgICAgICB2YXIgc2V0dGluZ3MgPSB7fTsKCiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIEdNX2NvbmZpZy5pbml0KCkgYXJndW1lbnRzCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcmdzLmxlbmd0aCwgYXJnOyBpIDwgbDsgKytpKSB7CiAgICAgICAgICAgIGFyZyA9IGFyZ3NbaV07CgogICAgICAgICAgICAvLyBBbiBlbGVtZW50IHRvIHVzZSBhcyB0aGUgY29uZmlnIHdpbmRvdwogICAgICAgICAgICBpZiAodHlwZW9mIGFyZy5hcHBlbmRDaGlsZCA9PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgICBzZXR0aW5ncy5mcmFtZSA9IGFyZzsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiBhcmcpIHsKICAgICAgICAgICAgICAgIGNhc2UgJ29iamVjdCc6CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiBpbiBhcmcpIHsgLy8gY291bGQgYmUgYSBjYWxsYmFjayBmdW5jdGlvbnMgb3Igc2V0dGluZ3Mgb2JqZWN0CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnW2pdICE9ICJmdW5jdGlvbiIpIHsgLy8gd2UgYXJlIGluIHRoZSBzZXR0aW5ncyBvYmplY3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnW2pdID09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuZnJhbWVTdHlsZSA9IGFyZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuZmllbGRzID0gYXJnOyAvLyBzdG9yZSBzZXR0aW5ncyBvYmplY3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBsZWF2ZSB0aGUgbG9vcAogICAgICAgICAgICAgICAgICAgICAgICB9IC8vIG90aGVyd2lzZSBpdCBtdXN0IGJlIGEgY2FsbGJhY2sgZnVuY3Rpb24KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZXR0aW5ncy5ldmVudHMpIHNldHRpbmdzLmV2ZW50cyA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5ldmVudHNbal0gPSBhcmdbal07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnZnVuY3Rpb24nOiAvLyBwYXNzaW5nIGEgYmFyZSBmdW5jdGlvbiBpcyBzZXQgdG8gb3BlbiBjYWxsYmFjawogICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmV2ZW50cyA9IHtvcGVuOiBhcmd9OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzogLy8gY291bGQgYmUgY3VzdG9tIENTUyBvciB0aGUgdGl0bGUgc3RyaW5nCiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKC9bXHdcLl0rXHMqXHtccypbXHctXStccyo6XHMqXHcrW1xzfFxTXSpcfS8udGVzdChhcmcpKQogICAgICAgICAgICAgICAgICAgIGlmICgvW1x3XC5dK1xzKlx7XHMqW1x3LV0rXHMqOltcc3xcU10qXH0vLnRlc3QoYXJnKSkKICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuY3NzID0gYXJnOwogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZykKICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MudGl0bGUgPSBhcmc7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLyogSW5pdGlhbGl6ZSBldmVyeXRoaW5nIHVzaW5nIHRoZSBuZXcgc2V0dGluZ3Mgb2JqZWN0ICovCiAgICAvLyBTZXQgdGhlIGlkCiAgICBpZiAoc2V0dGluZ3MuaWQpIGNvbmZpZy5pZCA9IHNldHRpbmdzLmlkOwogICAgZWxzZSBpZiAodHlwZW9mIGNvbmZpZy5pZCA9PSAidW5kZWZpbmVkIikgY29uZmlnLmlkID0gJ0dNX2NvbmZpZyc7CgogICAgLy8gU2V0IHRoZSB0aXRsZQogICAgaWYgKHNldHRpbmdzLnRpdGxlKSBjb25maWcudGl0bGUgPSBzZXR0aW5ncy50aXRsZTsKCiAgICAvLyBTZXQgdGhlIGN1c3RvbSBjc3MKICAgIGlmIChzZXR0aW5ncy5jc3MpIGNvbmZpZy5jc3Muc3R5bGlzaCA9IHNldHRpbmdzLmNzczsKCiAgICBpZiAoc2V0dGluZ3Muc2tpbikgewogICAgICAgIHZhciBza2luID0gY29uZmlnLmNzc1snc2tpbl8nICsgc2V0dGluZ3Muc2tpbl07CiAgICAgICAgaWYgKHNraW4pIHsKICAgICAgICAgICAgY29uZmlnLmNzcy5iYXNpYyArPSBza2luOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBTZXQgdGhlIGZyYW1lCiAgICBpZiAoc2V0dGluZ3MuZnJhbWUpIGNvbmZpZy5mcmFtZSA9IHNldHRpbmdzLmZyYW1lOwogICAgaWYgKHNldHRpbmdzLmZyYW1lU3R5bGUpIGNvbmZpZy5mcmFtZVN0eWxlID0gc2V0dGluZ3MuZnJhbWVTdHlsZTsKCiAgICBjb25maWcuaXNUYWJzID0gc2V0dGluZ3MuaXNUYWJzOwoKICAgIC8vIFNldCB0aGUgZXZlbnQgY2FsbGJhY2tzCiAgICBpZiAoc2V0dGluZ3MuZXZlbnRzKSB7CiAgICAgICAgdmFyIGV2ZW50cyA9IHNldHRpbmdzLmV2ZW50czsKICAgICAgICBmb3IgKHZhciBlIGluIGV2ZW50cykKICAgICAgICAgICAgY29uZmlnWyJvbiIgKyBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZS5zbGljZSgxKV0gPSBldmVudHNbZV07CiAgICB9CgogICAgLy8gQ3JlYXRlIHRoZSBmaWVsZHMKICAgIGlmIChzZXR0aW5ncy5maWVsZHMpIHsKICAgICAgICB2YXIgc3RvcmVkID0gY29uZmlnLnJlYWQoKSwgLy8gcmVhZCB0aGUgc3RvcmVkIHNldHRpbmdzCiAgICAgICAgICAgICAgICBmaWVsZHMgPSBzZXR0aW5ncy5maWVsZHMsCiAgICAgICAgICAgICAgICBjdXN0b21UeXBlcyA9IHNldHRpbmdzLnR5cGVzIHx8IHt9OwoKICAgICAgICBmb3IgKHZhciBpZCBpbiBmaWVsZHMpIHsKICAgICAgICAgICAgdmFyIGZpZWxkID0gZmllbGRzW2lkXTsKCiAgICAgICAgICAgIC8vIGZvciBlYWNoIGZpZWxkIGRlZmluaXRpb24gY3JlYXRlIGEgZmllbGQgb2JqZWN0CiAgICAgICAgICAgIGlmIChmaWVsZCkKICAgICAgICAgICAgICAgIGNvbmZpZy5maWVsZHNbaWRdID0gbmV3IEdNX2NvbmZpZ0ZpZWxkKGZpZWxkLCBzdG9yZWRbaWRdLCBpZCwKICAgICAgICAgICAgICAgICAgICBjdXN0b21UeXBlc1tmaWVsZC50eXBlXSk7CiAgICAgICAgICAgIGVsc2UgaWYgKGNvbmZpZy5maWVsZHNbaWRdKSBkZWxldGUgY29uZmlnLmZpZWxkc1tpZF07CiAgICAgICAgfQogICAgfQoKICAgIC8vIElmIHRoZSBpZCBoYXMgY2hhbmdlZCB3ZSBtdXN0IG1vZGlmeSB0aGUgZGVmYXVsdCBzdHlsZQogICAgaWYgKGNvbmZpZy5pZCAhPSBjb25maWcuY3NzLmJhc2ljUHJlZml4KSB7CiAgICAgICAgY29uZmlnLmNzcy5iYXNpYyA9IGNvbmZpZy5jc3MuYmFzaWMucmVwbGFjZSgKICAgICAgICAgICAgbmV3IFJlZ0V4cCgnIycgKyBjb25maWcuY3NzLmJhc2ljUHJlZml4LCAnZ20nKSwgJyMnICsgY29uZmlnLmlkKTsKICAgICAgICBjb25maWcuY3NzLmJhc2ljUHJlZml4ID0gY29uZmlnLmlkOwogICAgfQp9CgpHTV9jb25maWdTdHJ1Y3QucHJvdG90eXBlID0gewogICAgLy8gU3VwcG9ydCBvbGQgbWV0aG9kIG9mIGluaXRhbGl6aW5nCiAgICBpbml0OiBmdW5jdGlvbigpIHsKICAgICAgICBHTV9jb25maWdJbml0KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgdGhpcy5vbkluaXQoKTsKICAgIH0sCgogICAgLy8gY2FsbCBHTV9jb25maWcub3BlbigpIGZyb20geW91ciBzY3JpcHQgdG8gb3BlbiB0aGUgbWVudQogICAgb3BlbjogZnVuY3Rpb24gKCkgewogICAgICAgIC8vIERpZSBpZiB0aGUgbWVudSBpcyBhbHJlYWR5IG9wZW4gb24gdGhpcyBwYWdlCiAgICAgICAgLy8gWW91IGNhbiBoYXZlIG11bHRpcGxlIGluc3RhbmNlcyBidXQgeW91IGNhbid0IG9wZW4gdGhlIHNhbWUgaW5zdGFuY2UgdHdpY2UKICAgICAgICB2YXIgbWF0Y2ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmlkKTsKICAgICAgICBpZiAobWF0Y2ggJiYgKG1hdGNoLnRhZ05hbWUgPT0gIklGUkFNRSIgfHwgbWF0Y2guY2hpbGROb2Rlcy5sZW5ndGggPiAwKSkgcmV0dXJuOwoKICAgICAgICAvLyBTb21ldGltZXMgInRoaXMiIGdldHMgb3ZlcndyaXR0ZW4gc28gY3JlYXRlIGFuIGFsaWFzCiAgICAgICAgdmFyIGNvbmZpZyA9IHRoaXM7CgogICAgICAgIC8vIEZ1bmN0aW9uIHRvIGJ1aWxkIHRoZSBtaWdodHkgY29uZmlnIHdpbmRvdyA6KQogICAgICAgIGZ1bmN0aW9uIGJ1aWxkQ29uZmlnV2luIChib2R5LCBoZWFkKSB7CiAgICAgICAgICAgIHZhciBjcmVhdGUgPSBjb25maWcuY3JlYXRlLAogICAgICAgICAgICAgICAgICAgIGZpZWxkcyA9IGNvbmZpZy5maWVsZHMsCiAgICAgICAgICAgICAgICAgICAgY29uZmlnSWQgPSBjb25maWcuaWQsCiAgICAgICAgICAgICAgICAgICAgYm9keVdyYXBwZXIgPSBjcmVhdGUoJ2RpdicsIHtpZDogY29uZmlnSWQgKyAnX3dyYXBwZXInfSk7CgogICAgICAgICAgICAvLyBBcHBlbmQgdGhlIHN0eWxlIHdoaWNoIGlzIG91ciBkZWZhdWx0IHN0eWxlIHBsdXMgdGhlIHVzZXIgc3R5bGUKICAgICAgICAgICAgaGVhZC5hcHBlbmRDaGlsZCgKICAgICAgICAgICAgICAgIGNyZWF0ZSgnc3R5bGUnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiAndGV4dC9jc3MnLAogICAgICAgICAgICAgICAgdGV4dENvbnRlbnQ6IGNvbmZpZy5jc3MuYmFzaWMgKyBjb25maWcuY3NzLnN0eWxpc2gKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgLy8gQWRkIGhlYWRlciBhbmQgdGl0bGUKICAgICAgICAgICAgYm9keVdyYXBwZXIuYXBwZW5kQ2hpbGQoY3JlYXRlKCdkaXYnLCB7CiAgICAgICAgICAgICAgICBpZDogY29uZmlnSWQgKyAnX2hlYWRlcicsCiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdjb25maWdfaGVhZGVyIGJsb2NrIGNlbnRlcicKICAgICAgICAgICAgfSwgY29uZmlnLnRpdGxlKSk7CgogICAgICAgICAgICAvLyBBcHBlbmQgZWxlbWVudHMKICAgICAgICAgICAgdmFyIHNlY3Rpb24gPSBib2R5V3JhcHBlciwKICAgICAgICAgICAgICAgICAgICBzZWNOdW0gPSAwOyAvLyBTZWN0aW9uIGNvdW50CiAgICAgICAgICAgIHZhciBsYXN0UGFyZW50Tm9kZSA9IG51bGw7CgogICAgICAgICAgICAvLyBsb29wIHRocm91Z2ggZmllbGRzCiAgICAgICAgICAgIGZvciAodmFyIGlkIGluIGZpZWxkcykgewogICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gZmllbGRzW2lkXSwKICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MgPSBmaWVsZC5zZXR0aW5nczsKCiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2VjdGlvbikgeyAvLyB0aGUgc3RhcnQgb2YgYSBuZXcgc2VjdGlvbgogICAgICAgICAgICAgICAgICAgIHNlY3Rpb24gPSBib2R5V3JhcHBlci5hcHBlbmRDaGlsZChjcmVhdGUoJ2RpdicsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NlY3Rpb25faGVhZGVyX2hvbGRlcicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogY29uZmlnSWQgKyAnX3NlY3Rpb25fJyArIHNlY051bQogICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc2V0dGluZ3Muc2VjdGlvbikgIT09ICdbb2JqZWN0IEFycmF5XScpCiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLnNlY3Rpb24gPSBbc2V0dGluZ3Muc2VjdGlvbl07CgogICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zZWN0aW9uWzBdKQogICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLmFwcGVuZENoaWxkKGNyZWF0ZSgnZGl2JywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnc2VjdGlvbl9oZWFkZXIgY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjb25maWdJZCArICdfc2VjdGlvbl9oZWFkZXJfJyArIHNlY051bQogICAgICAgICAgICAgICAgICAgICAgICB9LCBzZXR0aW5ncy5zZWN0aW9uWzBdKSk7CgogICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zZWN0aW9uWzFdKQogICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLmFwcGVuZENoaWxkKGNyZWF0ZSgncCcsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NlY3Rpb25fZGVzYyBjZW50ZXInLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbmZpZ0lkICsgJ19zZWN0aW9uX2Rlc2NfJyArIHNlY051bQogICAgICAgICAgICAgICAgICAgICAgICB9LCBzZXR0aW5ncy5zZWN0aW9uWzFdKSk7CiAgICAgICAgICAgICAgICAgICAgKytzZWNOdW07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmxpbmUgPT0gJ3N0YXJ0JyAmJiBsYXN0UGFyZW50Tm9kZSkgeyAgLy8g5YiH5o2i5Yiw5LiL5LiA6KGMCiAgICAgICAgICAgICAgICAgICAgbGFzdFBhcmVudE5vZGUgPSBudWxsOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBmaWVsZCBlbGVtZW50cyBhbmQgYXBwZW5kIHRvIGN1cnJlbnQgc2VjdGlvbgogICAgICAgICAgICAgICAgKGxhc3RQYXJlbnROb2RlIHx8IHNlY3Rpb24pLmFwcGVuZENoaWxkKChmaWVsZC53cmFwcGVyID0gZmllbGQudG9Ob2RlKGNvbmZpZ0lkLCBsYXN0UGFyZW50Tm9kZSkpKTsKCiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MubGluZSA9PSAnc3RhcnQnKSB7CiAgICAgICAgICAgICAgICAgICAgbGFzdFBhcmVudE5vZGUgPSBmaWVsZC53cmFwcGVyOwogICAgICAgICAgICAgICAgICAgIGxhc3RQYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2lubGluZScpCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNldHRpbmdzLmxpbmUgPT0gJ2VuZCcpIHsKICAgICAgICAgICAgICAgICAgICBsYXN0UGFyZW50Tm9kZSA9IG51bGw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIEFkZCBzYXZlIGFuZCBjbG9zZSBidXR0b25zCiAgICAgICAgICAgIGJvZHlXcmFwcGVyLmFwcGVuZENoaWxkKGNyZWF0ZSgnZGl2JywKICAgICAgICAgICAgICAgIHtpZDogY29uZmlnSWQgKyAnX2J1dHRvbnNfaG9sZGVyJ30sCgogICAgICAgICAgICAgICAgY3JlYXRlKCdidXR0b24nLCB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbmZpZ0lkICsgJ19zYXZlQnRuJywKICAgICAgICAgICAgICAgICAgICB0ZXh0Q29udGVudDogJ+ehruWumicsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfpg6jliIbpgInpobnpnIDopoHliLfmlrDpobXpnaLmiY3og73nlJ/mlYgnLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NhdmVjbG9zZV9idXR0b25zJywKICAgICAgICAgICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLAoKICAgICAgICAgICAgICAgIGNyZWF0ZSgnYnV0dG9uJywgewogICAgICAgICAgICAgICAgICAgIGlkOiBjb25maWdJZCArICdfY2xvc2VCdG4nLAogICAgICAgICAgICAgICAgICAgIHRleHRDb250ZW50OiAn5Y+W5raIJywKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+WPlua2iOacrOasoeiuvue9ru+8jOaJgOaciemAiemhuei/mOWOnycsCiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnc2F2ZWNsb3NlX2J1dHRvbnMnLAogICAgICAgICAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSwKCiAgICAgICAgICAgICAgICBjcmVhdGUoJ2RpdicsCiAgICAgICAgICAgICAgICAgICAge2NsYXNzTmFtZTogJ3Jlc2V0X2hvbGRlciBibG9jayd9LAoKICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCBsaW5rCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlKCdhJywgewogICAgICAgICAgICAgICAgICAgICAgICBpZDogY29uZmlnSWQgKyAnX3Jlc2V0TGluaycsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDb250ZW50OiAn5oGi5aSN6buY6K6k6K6+572uJywKICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogJyMnLAogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+aBouWkjeaJgOacieiuvue9rueahOWGheWuueS4uum7mOiupOWAvCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3Jlc2V0JywKICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5yZXNldCgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICApKSk7CgogICAgICAgICAgICBib2R5LmFwcGVuZENoaWxkKGJvZHlXcmFwcGVyKTsgLy8gUGFpbnQgZXZlcnl0aGluZyB0byB3aW5kb3cgYXQgb25jZQogICAgICAgICAgICBjb25maWcuY2VudGVyKCk7IC8vIFNob3cgYW5kIGNlbnRlciBpZnJhbWUKICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGNvbmZpZy5jZW50ZXIsIGZhbHNlKTsgLy8gQ2VudGVyIGZyYW1lIG9uIHJlc2l6ZQoKICAgICAgICAgICAgLy8gQ2FsbCB0aGUgb3BlbigpIGNhbGxiYWNrIGZ1bmN0aW9uCiAgICAgICAgICAgIGNvbmZpZy5vbk9wZW4oY29uZmlnLmZyYW1lLmNvbnRlbnREb2N1bWVudCB8fCBjb25maWcuZnJhbWUub3duZXJEb2N1bWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5mcmFtZS5jb250ZW50V2luZG93IHx8IHdpbmRvdywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5mcmFtZSk7CgogICAgICAgICAgICBpZiAoY29uZmlnLmlzVGFicykgewogICAgICAgICAgICAgICAgY29uZmlnLnRvVGFicygpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBDbG9zZSBmcmFtZSBvbiB3aW5kb3cgY2xvc2UKICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjb25maWcuY2xvc2UoKTsKICAgICAgICAgICAgfSwgZmFsc2UpOwoKICAgICAgICAgICAgLy8gTm93IHRoYXQgZXZlcnl0aGluZyBpcyBsb2FkZWQsIG1ha2UgaXQgdmlzaWJsZQogICAgICAgICAgICBjb25maWcuZnJhbWUuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgICAgIGNvbmZpZy5pc09wZW4gPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgLy8gQ2hhbmdlIHRoaXMgaW4gdGhlIG9uT3BlbiBjYWxsYmFjayB1c2luZyB0aGlzLmZyYW1lLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnJykKICAgICAgICB2YXIgZGVmYXVsdFN0eWxlID0gJ2JvdHRvbTogYXV0bzsgYm9yZGVyOiAxcHggc29saWQgIzAwMDsgZGlzcGxheTogbm9uZTsgaGVpZ2h0OiA3NSU7JwoJCQkrICcgbGVmdDogMDsgbWFyZ2luOiAwOyBtYXgtaGVpZ2h0OiA5NSU7IG1heC13aWR0aDogOTUlOyBvcGFjaXR5OiAwOycKCQkJKyAnIG92ZXJmbG93OiBhdXRvOyBwYWRkaW5nOiAwOyBwb3NpdGlvbjogZml4ZWQ7IHJpZ2h0OiBhdXRvOyB0b3A6IDA7JwoJCQkrICcgd2lkdGg6IDc1JTsgei1pbmRleDogOTk5OTk5OTk5Oyc7CgogICAgICAgIC8vIEVpdGhlciB1c2UgdGhlIGVsZW1lbnQgcGFzc2VkIHRvIGluaXQoKSBvciBjcmVhdGUgYW4gaWZyYW1lCiAgICAgICAgaWYgKHRoaXMuZnJhbWUpIHsKICAgICAgICAgICAgdGhpcy5mcmFtZS5pZCA9IHRoaXMuaWQ7IC8vIEFsbG93cyBmb3IgcHJlZml4aW5nIHN0eWxlcyB3aXRoIHRoZSBjb25maWcgaWQKICAgICAgICAgICAgdGhpcy5mcmFtZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgZGVmYXVsdFN0eWxlKTsKICAgICAgICAgICAgYnVpbGRDb25maWdXaW4odGhpcy5mcmFtZSwgdGhpcy5mcmFtZS5vd25lckRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIENyZWF0ZSBmcmFtZQogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCh0aGlzLmZyYW1lID0gdGhpcy5jcmVhdGUoJ2lmcmFtZScsIHsKICAgICAgICAgICAgICAgIGlkOiB0aGlzLmlkLAogICAgICAgICAgICAgICAgc3R5bGU6IGRlZmF1bHRTdHlsZQogICAgICAgICAgICB9KSkpOwoKICAgICAgICAgICAgaWYgKHRoaXMuZnJhbWVTdHlsZSkgewogICAgICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5mcmFtZVN0eWxlKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICAgICAgICAgICAgICAgIGNvbmZpZy5mcmFtZS5zdHlsZVtrZXldID0gY29uZmlnLmZyYW1lU3R5bGVba2V5XTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIEluIFdlYktpdCBzcmMgY2FuJ3QgYmUgc2V0IHVudGlsIGl0IGlzIGFkZGVkIHRvIHRoZSBwYWdlCiAgICAgICAgICAgIHRoaXMuZnJhbWUuc3JjID0gJ2Fib3V0OmJsYW5rJzsKICAgICAgICAgICAgLy8gd2Ugd2FpdCBmb3IgdGhlIGlmcmFtZSB0byBsb2FkIGJlZm9yZSB3ZSBjYW4gbW9kaWZ5IGl0CiAgICAgICAgICAgIHRoaXMuZnJhbWUuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZnJhbWUgPSBjb25maWcuZnJhbWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIGJvZHkgPSBmcmFtZS5jb250ZW50RG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXTsKICAgICAgICAgICAgICAgICAgICBib2R5LmlkID0gY29uZmlnLmlkOyAvLyBBbGxvd3MgZm9yIHByZWZpeGluZyBzdHlsZXMgd2l0aCB0aGUgY29uZmlnIGlkCiAgICAgICAgICAgICAgICAgICAgYnVpbGRDb25maWdXaW4oYm9keSwgZnJhbWUuY29udGVudERvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0pOwogICAgICAgICAgICB9LCBmYWxzZSk7CiAgICAgICAgfQogICAgfSwKCiAgICBzYXZlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGZvcmdvdHRlbiA9IHRoaXMud3JpdGUoKTsKICAgICAgICB0aGlzLm9uU2F2ZShmb3Jnb3R0ZW4pOyAvLyBDYWxsIHRoZSBzYXZlKCkgY2FsbGJhY2sgZnVuY3Rpb24KICAgIH0sCgogICAgY2xvc2U6IGZ1bmN0aW9uKCkgewogICAgICAgIGlmICghdGhpcy5mcmFtZSkgcmV0dXJuOwogICAgICAgIC8vIElmIGZyYW1lIGlzIGFuIGlmcmFtZSB0aGVuIHJlbW92ZSBpdAogICAgICAgIGlmICh0aGlzLmZyYW1lLmNvbnRlbnREb2N1bWVudCkgewogICAgICAgICAgICB0aGlzLnJlbW92ZSh0aGlzLmZyYW1lKTsKICAgICAgICAgICAgdGhpcy5mcmFtZSA9IG51bGw7CiAgICAgICAgfSBlbHNlIHsgLy8gZWxzZSB3aXBlIGl0cyBjb250ZW50CiAgICAgICAgICAgIHRoaXMuZnJhbWUuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgIHRoaXMuZnJhbWUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICB9CgogICAgICAgIC8vIE51bGwgb3V0IGFsbCB0aGUgZmllbGRzIHNvIHdlIGRvbid0IGxlYWsgbWVtb3J5CiAgICAgICAgdmFyIGZpZWxkcyA9IHRoaXMuZmllbGRzOwogICAgICAgIGZvciAodmFyIGlkIGluIGZpZWxkcykgewogICAgICAgICAgICB2YXIgZmllbGQgPSBmaWVsZHNbaWRdOwogICAgICAgICAgICBmaWVsZC53cmFwcGVyID0gbnVsbDsKICAgICAgICAgICAgZmllbGQubm9kZSA9IG51bGw7CiAgICAgICAgfQoKICAgICAgICB0aGlzLm9uQ2xvc2UoKTsgLy8gIENhbGwgdGhlIGNsb3NlKCkgY2FsbGJhY2sgZnVuY3Rpb24KICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlOwogICAgfSwKCiAgICBzZXQ6IGZ1bmN0aW9uIChuYW1lLCB2YWwpIHsKICAgICAgICB0aGlzLmZpZWxkc1tuYW1lXS52YWx1ZSA9IHZhbDsKICAgIH0sCgogICAgZ2V0OiBmdW5jdGlvbiAobmFtZSkgewogICAgICAgIHJldHVybiB0aGlzLmZpZWxkc1tuYW1lXS52YWx1ZTsKICAgIH0sCgogICAgd3JpdGU6IGZ1bmN0aW9uIChzdG9yZSwgb2JqKSB7CiAgICAgICAgaWYgKCFvYmopIHsKICAgICAgICAgICAgdmFyIHZhbHVlcyA9IHt9LAogICAgICAgICAgICAgICAgICAgIGZvcmdvdHRlbiA9IHt9LAogICAgICAgICAgICAgICAgICAgIGZpZWxkcyA9IHRoaXMuZmllbGRzOwoKICAgICAgICAgICAgZm9yICh2YXIgaWQgaW4gZmllbGRzKSB7CiAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSBmaWVsZHNbaWRdOwogICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gZmllbGQudG9WYWx1ZSgpOwoKICAgICAgICAgICAgICAgIGlmIChmaWVsZC5zYXZlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzW2lkXSA9IHZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC52YWx1ZSA9IHZhbHVlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXNbaWRdID0gZmllbGQudmFsdWU7CiAgICAgICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgICAgICBmb3Jnb3R0ZW5baWRdID0gdmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZShzdG9yZSB8fCB0aGlzLmlkLCB0aGlzLnN0cmluZ2lmeShvYmogfHwgdmFsdWVzKSk7CiAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICAgIHRoaXMubG9nKCJHTV9jb25maWcgZmFpbGVkIHRvIHNhdmUgc2V0dGluZ3MhIik7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZm9yZ290dGVuOwogICAgfSwKCiAgICByZWFkOiBmdW5jdGlvbiAoc3RvcmUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgcnZhbCA9IHRoaXMucGFyc2VyKHRoaXMuZ2V0VmFsdWUoc3RvcmUgfHwgdGhpcy5pZCwgJ3t9JykpOwogICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAgICB0aGlzLmxvZygiR01fY29uZmlnIGZhaWxlZCB0byByZWFkIHNhdmVkIHNldHRpbmdzISIpOwogICAgICAgICAgICB2YXIgcnZhbCA9IHt9OwogICAgICAgIH0KICAgICAgICByZXR1cm4gcnZhbDsKICAgIH0sCgogICAgcmVzZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZmllbGRzID0gdGhpcy5maWVsZHM7CgogICAgICAgIC8vIFJlc2V0IGFsbCB0aGUgZmllbGRzCiAgICAgICAgZm9yICh2YXIgaWQgaW4gZmllbGRzKSBmaWVsZHNbaWRdLnJlc2V0KCk7CgogICAgICAgIHRoaXMub25SZXNldCgpOyAvLyBDYWxsIHRoZSByZXNldCgpIGNhbGxiYWNrIGZ1bmN0aW9uCiAgICB9LAoKICAgIGNyZWF0ZTogZnVuY3Rpb24gKCkgewogICAgICAgIHN3aXRjaChhcmd1bWVudHMubGVuZ3RoKSB7CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgIHZhciBBID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYXJndW1lbnRzWzBdKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgdmFyIEEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGFyZ3VtZW50c1swXSksCiAgICAgICAgICAgICAgICAgICAgICAgIEIgPSBhcmd1bWVudHNbMV07CiAgICAgICAgICAgICAgICBmb3IgKHZhciBiIGluIEIpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYi5pbmRleE9mKCJvbiIpID09IDApCiAgICAgICAgICAgICAgICAgICAgICAgIEEuYWRkRXZlbnRMaXN0ZW5lcihiLnN1YnN0cmluZygyKSwgQltiXSwgZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCIsc3R5bGUsYWNjZXNza2V5LGlkLG5hbWUsc3JjLGhyZWYsd2hpY2gsZm9yIi5pbmRleE9mKCIsIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLnRvTG93ZXJDYXNlKCkpICE9IC0xKQogICAgICAgICAgICAgICAgICAgICAgICBBLnNldEF0dHJpYnV0ZShiLCBCW2JdKTsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgQltiXSAhPSAndW5kZWZpbmVkJykKICAgICAgICAgICAgICAgICAgICAgICAgQVtiXSA9IEJbYl07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1syXSA9PSAic3RyaW5nIikKICAgICAgICAgICAgICAgICAgICBBLmlubmVySFRNTCA9IGFyZ3VtZW50c1syXTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMiwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgKytpKQogICAgICAgICAgICAgICAgICAgICAgICBBLmFwcGVuZENoaWxkKGFyZ3VtZW50c1tpXSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBBOwogICAgfSwKCiAgICBjZW50ZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZnJhbWU7CiAgICAgICAgaWYgKCFub2RlKSByZXR1cm47CiAgICAgICAgdmFyIHN0eWxlID0gbm9kZS5zdHlsZSwKICAgICAgICAgICAgICAgIGJlZm9yZU9wYWNpdHkgPSBzdHlsZS5vcGFjaXR5OwogICAgICAgIGlmIChzdHlsZS5kaXNwbGF5ID09ICdub25lJykgc3R5bGUub3BhY2l0eSA9ICcwJzsKICAgICAgICBzdHlsZS5kaXNwbGF5ID0gJyc7CiAgICAgICAgc3R5bGUudG9wID0gTWF0aC5mbG9vcigod2luZG93LmlubmVySGVpZ2h0IC8gMikgLSAobm9kZS5vZmZzZXRIZWlnaHQgLyAyKSkgKyAncHgnOwogICAgICAgIHN0eWxlLmxlZnQgPSBNYXRoLmZsb29yKCh3aW5kb3cuaW5uZXJXaWR0aCAvIDIpIC0gKG5vZGUub2Zmc2V0V2lkdGggLyAyKSkgKyAncHgnOwogICAgICAgIHN0eWxlLm9wYWNpdHkgPSAnMSc7CiAgICB9LAoKICAgIHJlbW92ZTogZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgaWYgKGVsICYmIGVsLnBhcmVudE5vZGUpIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpOwogICAgfSwKCiAgICB0b1RhYnM6IGZ1bmN0aW9uKCkgeyAgLy8g6L2s5Li6IHRhYiDnmoTlvaLlvI8KICAgICAgICB2YXIgYm9keSA9IHRoaXMuZnJhbWUudGFnTmFtZSA9PSAnSUZSQU1FJyA/IHRoaXMuZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudCA6IHRoaXMuZnJhbWUsCiAgICAgICAgICAgIGNvbmZpZ0lkID0gdGhpcy5pZDsKICAgICAgICB2YXIgJCA9IGZ1bmN0aW9uKGlkKSB7CiAgICAgICAgICAgIHJldHVybiBib2R5LmdldEVsZW1lbnRCeUlkKGNvbmZpZ0lkICsgJ18nICsgaWQpOwogICAgICAgIH07CgogICAgICAgIHZhciBoZWFkZXJzID0gYm9keS5xdWVyeVNlbGVjdG9yQWxsKCcuc2VjdGlvbl9oZWFkZXInKTsKICAgICAgICBpZiAoIWhlYWRlcnMubGVuZ3RoKSByZXR1cm47CgogICAgICAgIHZhciBhbmNoID0gdGhpcy5jcmVhdGUoJ2RpdicsIHsKICAgICAgICAgICAgLy8gaWQ6IGNvbmZpZ0lkICsgJ190YWJfaG9sZGVyJywKICAgICAgICAgICAgY2xhc3NOYW1lOiAnbmF2LXRhYnMnLAogICAgICAgIH0pOwoKICAgICAgICBmb3IgKHZhciBpID0gMCwgaGVhZGVyOyBpIDwgaGVhZGVycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBoZWFkZXIgPSBoZWFkZXJzW2ldOwogICAgICAgICAgICBpZiAoaSA9PSAwKSB7CiAgICAgICAgICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYW5jaC5hcHBlbmRDaGlsZChoZWFkZXIpOwogICAgICAgIH0KCiAgICAgICAgYW5jaC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMudG9nZ2xlVGFiLmJpbmQodGhpcyksIGZhbHNlKTsKCiAgICAgICAgJCgnc2VjdGlvbl8wJykucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYW5jaCwgJCgnc2VjdGlvbl8wJykpOwoKICAgICAgICB2YXIgY3VyVGFiID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BpY3ZpZXdlckNFLmNvbmZpZy5jdXJUYWInKSB8fCAwOwogICAgICAgIHRoaXMudG9nZ2xlVGFiKHBhcnNlSW50KGN1clRhYiwgMTApKTsKICAgIH0sCiAgICB0b2dnbGVUYWI6IGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgYm9keSA9IHRoaXMuZnJhbWUudGFnTmFtZSA9PSAnSUZSQU1FJyA/IHRoaXMuZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudCA6IHRoaXMuZnJhbWUsCiAgICAgICAgICAgIGNvbmZpZ0lkID0gdGhpcy5pZDsKCiAgICAgICAgdmFyIGN1clRhYiA9IHR5cGVvZiBlID09ICdudW1iZXInID8gZSA6IC9cXyhcZCspLy5leGVjKGUudGFyZ2V0LmlkKVsxXTsKCiAgICAgICAgW10uZm9yRWFjaC5jYWxsKGJvZHkucXVlcnlTZWxlY3RvckFsbCgnLnNlY3Rpb25faGVhZGVyJyksIGZ1bmN0aW9uKGhlYWRlciwgaSkgewogICAgICAgICAgICBpZiAoaSA9PSBjdXJUYWIpIHsKICAgICAgICAgICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBbXS5mb3JFYWNoLmNhbGwoYm9keS5xdWVyeVNlbGVjdG9yQWxsKCcuc2VjdGlvbl9oZWFkZXJfaG9sZGVyJyksIGZ1bmN0aW9uKGhvbGRlciwgaSkgewogICAgICAgICAgICBob2xkZXIuc3R5bGUuZGlzcGxheSA9IChpID09IGN1clRhYikgPyAnYmxvY2snIDogJ25vbmUnOwogICAgICAgIH0pOwoKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGljdmlld2VyQ0UuY29uZmlnLmN1clRhYicsIGN1clRhYikKICAgIH0KfTsKCi8vIERlZmluZSBhIGJ1bmNoIG9mIEFQSSBzdHVmZgooZnVuY3Rpb24oKSB7CiAgICB2YXIgaXNHTSA9IHR5cGVvZiBHTV9nZXRWYWx1ZSAhPSAndW5kZWZpbmVkJyAmJgogICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIEdNX2dldFZhbHVlKCdhJywgJ2InKSAhPSAndW5kZWZpbmVkJywKICAgICAgICAgICAgc2V0VmFsdWUsIGdldFZhbHVlLCBzdHJpbmdpZnksIHBhcnNlcjsKCiAgICAvLyBEZWZpbmUgdmFsdWUgc3RvcmluZyBhbmQgcmVhZGluZyBBUEkKICAgIGlmICghaXNHTSkgewogICAgICAgIHNldFZhbHVlID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7CiAgICAgICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShuYW1lLCB2YWx1ZSk7CiAgICAgICAgfTsKICAgICAgICBnZXRWYWx1ZSA9IGZ1bmN0aW9uKG5hbWUsIGRlZil7CiAgICAgICAgICAgIHZhciBzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0obmFtZSk7CiAgICAgICAgICAgIHJldHVybiBzID09IG51bGwgPyBkZWYgOiBzCiAgICAgICAgfTsKCiAgICAgICAgLy8gV2Ugb25seSBzdXBwb3J0IEpTT04gcGFyc2VyIG91dHNpZGUgR00KICAgICAgICBzdHJpbmdpZnkgPSBKU09OLnN0cmluZ2lmeTsKICAgICAgICBwYXJzZXIgPSBKU09OLnBhcnNlOwogICAgfSBlbHNlIHsKICAgICAgICBzZXRWYWx1ZSA9IEdNX3NldFZhbHVlOwogICAgICAgIGdldFZhbHVlID0gR01fZ2V0VmFsdWU7CiAgICAgICAgc3RyaW5naWZ5ID0gdHlwZW9mIEpTT04gPT0gInVuZGVmaW5lZCIgPwogICAgICAgICAgICBmdW5jdGlvbihvYmopIHsKICAgICAgICAgICAgICAgIHJldHVybiBvYmoudG9Tb3VyY2UoKTsKICAgICAgICB9IDogSlNPTi5zdHJpbmdpZnk7CiAgICAgICAgcGFyc2VyID0gdHlwZW9mIEpTT04gPT0gInVuZGVmaW5lZCIgPwogICAgICAgICAgICBmdW5jdGlvbihqc29uRGF0YSkgewogICAgICAgICAgICAgICAgcmV0dXJuIChuZXcgRnVuY3Rpb24oJ3JldHVybiAnICsganNvbkRhdGEgKyAnOycpKSgpOwogICAgICAgIH0gOiBKU09OLnBhcnNlOwogICAgfQoKICAgIEdNX2NvbmZpZ1N0cnVjdC5wcm90b3R5cGUuaXNHTSA9IGlzR007CiAgICBHTV9jb25maWdTdHJ1Y3QucHJvdG90eXBlLnNldFZhbHVlID0gc2V0VmFsdWU7CiAgICBHTV9jb25maWdTdHJ1Y3QucHJvdG90eXBlLmdldFZhbHVlID0gZ2V0VmFsdWU7CiAgICBHTV9jb25maWdTdHJ1Y3QucHJvdG90eXBlLnN0cmluZ2lmeSA9IHN0cmluZ2lmeTsKICAgIEdNX2NvbmZpZ1N0cnVjdC5wcm90b3R5cGUucGFyc2VyID0gcGFyc2VyOwogICAgR01fY29uZmlnU3RydWN0LnByb3RvdHlwZS5sb2cgPSAgd2luZG93LmNvbnNvbGUgPwogICAgICAgIGNvbnNvbGUubG9nIDogKGlzR00gJiYgdHlwZW9mIEdNX2xvZyAhPSAndW5kZWZpbmVkJyA/CiAgICAgICAgICAgIEdNX2xvZyA6ICh3aW5kb3cub3BlcmEgPwogICAgICAgICAgICAgICAgb3BlcmEucG9zdEVycm9yIDogZnVuY3Rpb24oKXsgLyogbm8gbG9nZ2luZyAqLyB9CiAgICApKTsKfSkoKTsKCmZ1bmN0aW9uIEdNX2NvbmZpZ0RlZmF1bHRWYWx1ZSh0eXBlLCBvcHRpb25zKSB7CiAgICB2YXIgdmFsdWU7CgogICAgaWYgKHR5cGUgJiYgdHlwZS5pbmRleE9mKCd1bnNpZ25lZCAnKSA9PSAwKQogICAgICAgIHR5cGUgPSB0eXBlLnN1YnN0cmluZyg5KTsKCiAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICBjYXNlICdyYWRpbyc6IGNhc2UgJ3NlbGVjdCc6CiAgICAgICAgICAgIHZhbHVlID0gb3B0aW9uc1swXTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnY2hlY2tib3gnOgogICAgICAgICAgICB2YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdpbnQnOiBjYXNlICdpbnRlZ2VyJzoKICAgICAgICBjYXNlICdmbG9hdCc6IGNhc2UgJ251bWJlcic6CiAgICAgICAgICAgIHZhbHVlID0gMDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdmFsdWUgPSAnJzsKICAgIH0KCiAgICByZXR1cm4gdmFsdWU7Cn0KCmZ1bmN0aW9uIEdNX2NvbmZpZ0ZpZWxkKHNldHRpbmdzLCBzdG9yZWQsIGlkLCBjdXN0b21UeXBlKSB7CiAgICAvLyBTdG9yZSB0aGUgZmllbGQncyBzZXR0aW5ncwogICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzOwogICAgdGhpcy5pZCA9IGlkOwogICAgdGhpcy5ub2RlID0gbnVsbDsKICAgIHRoaXMud3JhcHBlciA9IG51bGw7CiAgICB0aGlzLnNhdmUgPSB0eXBlb2Ygc2V0dGluZ3Muc2F2ZSA9PSAidW5kZWZpbmVkIiA/IHRydWUgOiBzZXR0aW5ncy5zYXZlOwoKICAgIC8vIEJ1dHRvbnMgYXJlIHN0YXRpYyBhbmQgZG9uJ3QgaGF2ZSBhIHN0b3JlZCB2YWx1ZQogICAgaWYgKHNldHRpbmdzLnR5cGUgPT0gImJ1dHRvbiIpIHRoaXMuc2F2ZSA9IGZhbHNlOwogICAgaWYgKHNldHRpbmdzLnR5cGUgPT0gInNwYW4iKSB0aGlzLnNhdmUgPSBmYWxzZTsKCiAgICAvLyBpZiBhIGRlZmF1bHQgdmFsdWUgd2Fzbid0IHBhc3NlZCB0aHJvdWdoIGluaXQoKSB0aGVuCiAgICAvLyAgIGlmIHRoZSB0eXBlIGlzIGN1c3RvbSB1c2UgaXRzIGRlZmF1bHQgdmFsdWUKICAgIC8vICAgZWxzZSB1c2UgZGVmYXVsdCB2YWx1ZSBmb3IgdHlwZQogICAgLy8gZWxzZSB1c2UgdGhlIGRlZmF1bHQgdmFsdWUgcGFzc2VkIHRocm91Z2ggaW5pdCgpCiAgICB0aGlzWydkZWZhdWx0J10gPSB0eXBlb2Ygc2V0dGluZ3NbJ2RlZmF1bHQnXSA9PSAidW5kZWZpbmVkIiA/CiAgICAgICAgY3VzdG9tVHlwZSA/CiAgICAgICAgICAgIGN1c3RvbVR5cGVbJ2RlZmF1bHQnXQogICAgICAgICAgICA6IEdNX2NvbmZpZ0RlZmF1bHRWYWx1ZShzZXR0aW5ncy50eXBlLCBzZXR0aW5ncy5vcHRpb25zKQogICAgICAgIDogc2V0dGluZ3NbJ2RlZmF1bHQnXTsKCiAgICAvLyBTdG9yZSB0aGUgZmllbGQncyB2YWx1ZQogICAgdGhpcy52YWx1ZSA9IHR5cGVvZiBzdG9yZWQgPT0gInVuZGVmaW5lZCIgPyB0aGlzWydkZWZhdWx0J10gOiBzdG9yZWQ7CgogICAgLy8gU2V0dXAgbWV0aG9kcyBmb3IgYSBjdXN0b20gdHlwZQogICAgaWYgKGN1c3RvbVR5cGUpIHsKICAgICAgICB0aGlzLnRvTm9kZSA9IGN1c3RvbVR5cGUudG9Ob2RlOwogICAgICAgIHRoaXMudG9WYWx1ZSA9IGN1c3RvbVR5cGUudG9WYWx1ZTsKICAgICAgICB0aGlzLnJlc2V0ID0gY3VzdG9tVHlwZS5yZXNldDsKICAgIH0KfQoKR01fY29uZmlnRmllbGQucHJvdG90eXBlID0gewogICAgY3JlYXRlOiBHTV9jb25maWdTdHJ1Y3QucHJvdG90eXBlLmNyZWF0ZSwKCiAgICB0b05vZGU6IGZ1bmN0aW9uKGNvbmZpZ0lkLCBsYXN0UGFyZW50Tm9kZSkgewogICAgICAgIHZhciBmaWVsZCA9IHRoaXMuc2V0dGluZ3MsCiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMudmFsdWUsCiAgICAgICAgICAgICAgICBvcHRpb25zID0gZmllbGQub3B0aW9ucywKICAgICAgICAgICAgICAgIHR5cGUgPSBmaWVsZC50eXBlLAogICAgICAgICAgICAgICAgaWQgPSB0aGlzLmlkLAogICAgICAgICAgICAgICAgbGFiZWxQb3MgPSBmaWVsZC5sYWJlbFBvcywKICAgICAgICAgICAgICAgIGNyZWF0ZSA9IHRoaXMuY3JlYXRlOwoKICAgICAgICBmdW5jdGlvbiBhZGRMYWJlbChwb3MsIGxhYmVsRWwsIHBhcmVudE5vZGUsIGJlZm9yZUVsKSB7CiAgICAgICAgICAgIGlmICghYmVmb3JlRWwpIHsKICAgICAgICAgICAgICAgIGJlZm9yZUVsID0gbGFzdFBhcmVudE5vZGUgPyBwYXJlbnROb2RlLmxhc3RDaGlsZCA6IHBhcmVudE5vZGUuZmlyc3RDaGlsZDsgIC8vIG9uZUxpbmUg55qE5L+u5q2jCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHN3aXRjaCAocG9zKSB7CiAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6IGNhc2UgJ2JlbG93JzoKICAgICAgICAgICAgICAgICAgICBpZiAocG9zID09ICdiZWxvdycpCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoY3JlYXRlKCdicicsIHt9KSk7CiAgICAgICAgICAgICAgICAgICAgcGFyZW50Tm9kZS5hcHBlbmRDaGlsZChsYWJlbEVsKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyA9PSAnYWJvdmUnKQogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnROb2RlLmluc2VydEJlZm9yZShjcmVhdGUoJ2JyJywge30pLCBiZWZvcmVFbCk7CiAgICAgICAgICAgICAgICAgICAgcGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobGFiZWxFbCwgYmVmb3JlRWwpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgcmV0Tm9kZSA9IGNyZWF0ZShsYXN0UGFyZW50Tm9kZSA/ICdzcGFuJyA6ICdkaXYnLCB7IGNsYXNzTmFtZTogJ2NvbmZpZ192YXInLAogICAgICAgICAgICAgICAgICAgIGlkOiBjb25maWdJZCArICdfJyArIGlkICsgJ192YXInLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBmaWVsZC50aXRsZSB9KSwKICAgICAgICAgICAgZmlyc3RQcm9wOwogICAgICAgIGlmIChsYXN0UGFyZW50Tm9kZSAmJiBmaWVsZC5jbGFzc05hbWUpIHJldE5vZGUuY2xhc3NMaXN0LmFkZChmaWVsZC5jbGFzc05hbWUpOwoKICAgICAgICAvLyBSZXRyaWV2ZSB0aGUgZmlyc3QgcHJvcAogICAgICAgIGZvciAodmFyIGkgaW4gZmllbGQpIHsgZmlyc3RQcm9wID0gaTsgYnJlYWs7IH0KCiAgICAgICAgdmFyIGxhYmVsID0gZmllbGQubGFiZWwgJiYgdHlwZSAhPSAiYnV0dG9uIiA/CiAgICAgICAgICAgIGNyZWF0ZSgnbGFiZWwnLCB7CiAgICAgICAgICAgICAgICBpZDogY29uZmlnSWQgKyAnXycgKyBpZCArICdfZmllbGRfbGFiZWwnLAogICAgICAgICAgICAgICAgZm9yOiBjb25maWdJZCArICdfZmllbGRfJyArIGlkLAogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZmllbGRfbGFiZWwnCiAgICAgICAgICAgIH0sIGZpZWxkLmxhYmVsKSA6IG51bGw7CgogICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgICBjYXNlICdzcGFuJzoKICAgICAgICAgICAgICAgIGxhYmVsID0gbnVsbDsKCiAgICAgICAgICAgICAgICB0aGlzLm5vZGUgPSBjcmVhdGUoJ3NwYW4nLCB7CiAgICAgICAgICAgICAgICAgICAgaW5uZXJIVE1MOiBmaWVsZC5sYWJlbCwKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdmaWVsZF9sYWJlbCcsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGZpZWxkLnRpdGxlLAogICAgICAgICAgICAgICAgICAgIHN0eWxlOiBmaWVsZC5zdHlsZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXROb2RlID0gdGhpcy5ub2RlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ3RleHRhcmVhJzoKICAgICAgICAgICAgICAgIHJldE5vZGUuYXBwZW5kQ2hpbGQoKHRoaXMubm9kZSA9IGNyZWF0ZSgndGV4dGFyZWEnLCB7CiAgICAgICAgICAgICAgICAgICAgaW5uZXJIVE1MOiB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICBpZDogY29uZmlnSWQgKyAnX2ZpZWxkXycgKyBpZCwKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdibG9jaycgKyAoZmllbGQuY2xhc3NOYW1lID8gKCIgIiArIGZpZWxkLmNsYXNzTmFtZSkgOiAnJyksCiAgICAgICAgICAgICAgICAgICAgY29sczogKGZpZWxkLmNvbHMgPyBmaWVsZC5jb2xzIDogMjApLAogICAgICAgICAgICAgICAgICAgIHJvd3M6IChmaWVsZC5yb3dzID8gZmllbGQucm93cyA6IDIpLAogICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBmaWVsZC5wbGFjZWhvbGRlcgogICAgICAgICAgICAgICAgfSkpKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdyYWRpbyc6CiAgICAgICAgICAgICAgICB2YXIgd3JhcCA9IGNyZWF0ZSgnZGl2JywgewogICAgICAgICAgICAgICAgICAgIGlkOiBjb25maWdJZCArICdfZmllbGRfJyArIGlkLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZmllbGQuY2xhc3NOYW1lCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMubm9kZSA9IHdyYXA7CgogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG9wdGlvbnMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcmFkTGFiZWwgPSBjcmVhdGUoJ2xhYmVsJywgewogICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyYWRpb19sYWJlbCcKICAgICAgICAgICAgICAgICAgICB9LCBvcHRpb25zW2ldKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHJhZCA9IHdyYXAuYXBwZW5kQ2hpbGQoY3JlYXRlKCdpbnB1dCcsIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG9wdGlvbnNbaV0sCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyYWRpbycsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGlkLAogICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBvcHRpb25zW2ldID09IHZhbHVlCiAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgcmFkTGFiZWxQb3MgPSBsYWJlbFBvcyAmJgogICAgICAgICAgICAgICAgICAgICAgICAobGFiZWxQb3MgPT0gJ2xlZnQnIHx8IGxhYmVsUG9zID09ICdyaWdodCcpID8KICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxQb3MgOiBmaXJzdFByb3AgPT0gJ29wdGlvbnMnID8gJ2xlZnQnIDogJ3JpZ2h0JzsKCiAgICAgICAgICAgICAgICAgICAgYWRkTGFiZWwocmFkTGFiZWxQb3MsIHJhZExhYmVsLCB3cmFwLCByYWQpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldE5vZGUuYXBwZW5kQ2hpbGQod3JhcCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnc2VsZWN0JzoKICAgICAgICAgICAgICAgIHZhciB3cmFwID0gY3JlYXRlKCdzZWxlY3QnLCB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbmZpZ0lkICsgJ19maWVsZF8nICsgaWQsCiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBmaWVsZC5jbGFzc05hbWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5ub2RlID0gd3JhcDsKCiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zKSkgeyAgLy8g6L2s5Li6IG9iamVjdCDnmoTmoLzlvI8KICAgICAgICAgICAgICAgICAgICB2YXIgbmV3T3B0aW9ucyA9IHt9OwogICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbihvcHRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmV3T3B0aW9uc1tvcHRpb25dID0gb3B0aW9uOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBuZXdPcHRpb25zOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKG9wdGlvbnMpLmZvckVhY2goZnVuY3Rpb24ob3B0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgd3JhcC5hcHBlbmRDaGlsZChjcmVhdGUoJ29wdGlvbicsIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG9wdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IG9wdGlvbiA9PSB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICB9LCBvcHRpb25zW29wdGlvbl0pKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0Tm9kZS5hcHBlbmRDaGlsZCh3cmFwKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OiAvLyBmaWVsZHMgdXNpbmcgaW5wdXQgZWxlbWVudHMKICAgICAgICAgICAgICAgIHZhciBwcm9wcyA9IHsKICAgICAgICAgICAgICAgICAgICBpZDogY29uZmlnSWQgKyAnX2ZpZWxkXycgKyBpZCwKICAgICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0eXBlID09ICdidXR0b24nID8gZmllbGQubGFiZWwgOiB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGZpZWxkLmNsYXNzTmFtZQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICdjaGVja2JveCc6CiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLmNoZWNrZWQgPSB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYnV0dG9uJzoKICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2l6ZSA9IGZpZWxkLnNpemUgPyBmaWVsZC5zaXplIDogMjU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZC5zY3JpcHQpIGZpZWxkLmNsaWNrID0gZmllbGQuc2NyaXB0OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGQuY2xpY2spIHByb3BzLm9uY2xpY2sgPSBmaWVsZC5jbGljazsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGlkZGVuJzoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHlwZSA9IHRleHQsIGludCwgb3IgZmxvYXQKICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMudHlwZSA9ICd0ZXh0JzsKICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuc2l6ZSA9IGZpZWxkLnNpemUgPyBmaWVsZC5zaXplIDogMjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnBsYWNlaG9sZGVyID0gZmllbGQucGxhY2Vob2xkZXI7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0Tm9kZS5hcHBlbmRDaGlsZCgodGhpcy5ub2RlID0gY3JlYXRlKCdpbnB1dCcsIHByb3BzKSkpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGxhYmVsKSB7CiAgICAgICAgICAgIC8vIElmIHRoZSBsYWJlbCBpcyBwYXNzZWQgZmlyc3QsIGluc2VydCBpdCBiZWZvcmUgdGhlIGZpZWxkCiAgICAgICAgICAgIC8vIGVsc2UgaW5zZXJ0IGl0IGFmdGVyCiAgICAgICAgICAgIGlmICghbGFiZWxQb3MpCiAgICAgICAgICAgICAgICBsYWJlbFBvcyA9IGZpcnN0UHJvcCA9PSAibGFiZWwiIHx8IHR5cGUgPT0gInJhZGlvIiA/CiAgICAgICAgICAgICAgICAgICAgImxlZnQiIDogInJpZ2h0IjsKCiAgICAgICAgICAgIGlmICgnY2xhc3NOYW1lJyBpbiBmaWVsZCkgewogICAgICAgICAgICAgICAgbGFiZWwuY2xhc3NOYW1lICs9ICcgJyArIGZpZWxkLmNsYXNzTmFtZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGZpZWxkLnN0eWxlICYmIGZpZWxkLnN0eWxlLmxhYmVsKSB7CiAgICAgICAgICAgICAgICBsYWJlbC5zdHlsZS5jc3NUZXh0ID0gZmllbGQuc3R5bGUubGFiZWw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFkZExhYmVsKGxhYmVsUG9zLCBsYWJlbCwgcmV0Tm9kZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoZmllbGQuYWZ0ZXIpIHsKICAgICAgICAgICAgcmV0Tm9kZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShmaWVsZC5hZnRlcikpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJldE5vZGU7CiAgICB9LAoKICAgIHRvVmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBub2RlID0gdGhpcy5ub2RlLAogICAgICAgICAgICAgICAgZmllbGQgPSB0aGlzLnNldHRpbmdzLAogICAgICAgICAgICAgICAgdHlwZSA9IGZpZWxkLnR5cGUsCiAgICAgICAgICAgICAgICB1bnNpZ25lZCA9IGZhbHNlLAogICAgICAgICAgICAgICAgcnZhbCA9IG51bGw7CgogICAgICAgIGlmICghbm9kZSkgcmV0dXJuIHJ2YWw7CgogICAgICAgIGlmICh0eXBlICYmIHR5cGUuaW5kZXhPZigndW5zaWduZWQgJykgPT0gMCkgewogICAgICAgICAgICB0eXBlID0gdHlwZS5zdWJzdHJpbmcoOSk7CiAgICAgICAgICAgIHVuc2lnbmVkID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgICBjYXNlICdjaGVja2JveCc6CiAgICAgICAgICAgICAgICBydmFsID0gbm9kZS5jaGVja2VkOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ3NlbGVjdCc6CiAgICAgICAgICAgICAgICBydmFsID0gbm9kZVtub2RlLnNlbGVjdGVkSW5kZXhdLnZhbHVlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ3JhZGlvJzoKICAgICAgICAgICAgICAgIHZhciByYWRpb3MgPSBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJhZGlvcy5sZW5ndGg7IGkgPCBsZW47ICsraSkKICAgICAgICAgICAgICAgICAgICBpZiAocmFkaW9zW2ldLmNoZWNrZWQpCiAgICAgICAgICAgICAgICAgICAgICAgIHJ2YWwgPSByYWRpb3NbaV0udmFsdWU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnYnV0dG9uJzoKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdpbnQnOiBjYXNlICdpbnRlZ2VyJzoKICAgICAgICAgICAgY2FzZSAnZmxvYXQnOiBjYXNlICdudW1iZXInOgogICAgICAgICAgICAgICAgdmFyIG51bSA9IE51bWJlcihub2RlLnZhbHVlKTsKICAgICAgICAgICAgICAgIHZhciB3YXJuID0gJ0ZpZWxkIGxhYmVsZWQgIicgKyBmaWVsZC5sYWJlbCArICciIGV4cGVjdHMgYScgKwogICAgICAgICAgICAgICAgICAgICh1bnNpZ25lZCA/ICcgcG9zaXRpdmUgJyA6ICduICcpICsgJ2ludGVnZXIgdmFsdWUnOwoKICAgICAgICAgICAgICAgIGlmIChpc05hTihudW0pIHx8ICh0eXBlLnN1YnN0cigwLCAzKSA9PSAnaW50JyAmJgogICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmNlaWwobnVtKSAhPSBNYXRoLmZsb29yKG51bSkpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICh1bnNpZ25lZCAmJiBudW0gPCAwKSkgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KHdhcm4gKyAnLicpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghdGhpcy5fY2hlY2tOdW1iZXJSYW5nZShudW0sIHdhcm4pKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgcnZhbCA9IG51bTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgcnZhbCA9IG5vZGUudmFsdWU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIHJldHVybiBydmFsOyAvLyB2YWx1ZSByZWFkIHN1Y2Nlc3NmdWxseQogICAgfSwKCiAgICByZXNldDogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLm5vZGUsCiAgICAgICAgICAgICAgICBmaWVsZCA9IHRoaXMuc2V0dGluZ3MsCiAgICAgICAgICAgICAgICB0eXBlID0gZmllbGQudHlwZTsKCiAgICAgICAgaWYgKCFub2RlKSByZXR1cm47CgogICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgICBjYXNlICdjaGVja2JveCc6CiAgICAgICAgICAgICAgICBub2RlLmNoZWNrZWQgPSB0aGlzWydkZWZhdWx0J107CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnc2VsZWN0JzoKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBub2RlLm9wdGlvbnMubGVuZ3RoOyBpIDwgbGVuOyArK2kpCiAgICAgICAgICAgICAgICBpZiAobm9kZS5vcHRpb25zW2ldLnZhbHVlID09IHRoaXNbJ2RlZmF1bHQnXSkKICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zZWxlY3RlZEluZGV4ID0gaTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdyYWRpbyc6CiAgICAgICAgICAgICAgICB2YXIgcmFkaW9zID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByYWRpb3MubGVuZ3RoOyBpIDwgbGVuOyArK2kpCiAgICAgICAgICAgICAgICAgICAgaWYgKHJhZGlvc1tpXS52YWx1ZSA9PSB0aGlzWydkZWZhdWx0J10pCiAgICAgICAgICAgICAgICAgICAgICAgIHJhZGlvc1tpXS5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdidXR0b24nIDoKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgbm9kZS52YWx1ZSA9IHRoaXNbJ2RlZmF1bHQnXTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICB9LAoKICAgIHJlbW92ZTogZnVuY3Rpb24oZWwpIHsKICAgICAgICBHTV9jb25maWdTdHJ1Y3QucHJvdG90eXBlLnJlbW92ZShlbCB8fCB0aGlzLndyYXBwZXIpOwogICAgICAgIHRoaXMud3JhcHBlciA9IG51bGw7CiAgICAgICAgdGhpcy5ub2RlID0gbnVsbDsKICAgIH0sCgogICAgcmVsb2FkOiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMud3JhcHBlcjsKICAgICAgICBpZiAod3JhcHBlcikgewogICAgICAgICAgICB2YXIgZmllbGRQYXJlbnQgPSB3cmFwcGVyLnBhcmVudE5vZGU7CiAgICAgICAgICAgIGZpZWxkUGFyZW50Lmluc2VydEJlZm9yZSgodGhpcy53cmFwcGVyID0gdGhpcy50b05vZGUoKSksIHdyYXBwZXIpOwogICAgICAgICAgICB0aGlzLnJlbW92ZSh3cmFwcGVyKTsKICAgICAgICB9CiAgICB9LAoKICAgIF9jaGVja051bWJlclJhbmdlOiBmdW5jdGlvbihudW0sIHdhcm4pIHsKICAgICAgICB2YXIgZmllbGQgPSB0aGlzLnNldHRpbmdzOwogICAgICAgIGlmICh0eXBlb2YgZmllbGQubWluID09ICJudW1iZXIiICYmIG51bSA8IGZpZWxkLm1pbikgewogICAgICAgICAgICBhbGVydCh3YXJuICsgJyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJyArIGZpZWxkLm1pbiArICcuJyk7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZC5tYXggPT0gIm51bWJlciIgJiYgbnVtID4gZmllbGQubWF4KSB7CiAgICAgICAgICAgIGFsZXJ0KHdhcm4gKyAnIGxlc3MgdGhhbiBvciBlcXVhbCB0byAnICsgZmllbGQubWF4ICsgJy4nKTsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9OwoKLy8gQ3JlYXRlIGRlZmF1bHQgaW5zdGFuY2Ugb2YgR01fY29uZmlnCnZhciBHTV9jb25maWcgPSBuZXcgR01fY29uZmlnU3RydWN0KCk7Cg=="},{"meta":{"name":"pvcep_rules.js","url":"https://update.greasyfork.org/scripts/438080/1655629/pvcep_rules.js","ts":1758060364728,"mimetype":"text/javascript"},"source":"LyoKUFZDRVAgLSBSdWxlcyBmb3IgUGljdmlld2VyIENFKwo8aHR0cHM6Ly9naXRodWIuY29tL2hvb3RoaW4vVXNlclNjcmlwdHMvYmxvYi9tYXN0ZXIvUGljdmlld2VyJTIwQ0UlMkIvcHZjZXBfcnVsZXMuanM+CgooYykgMjAyMS0yMDI0IEhvb3RoaW4gPHJpeGl4aSBbYXRdIGdtYWlsLmNvbT4KTGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgoKbWluaW11bQp7CiAgbmFtZTogc2l0ZSBuYW1lCiAgcjogcmVndWxhciBpbWFnZSB1cmwgb3Igc3RyaW5nIHRvIGJlIHJlcGxhY2VkCiAgczogcmVwbGFjZW1lbnQgdGFyZ2V0IHN0cmluZwp9Cm9yCnsKICBuYW1lOiBzaXRlIG5hbWUKICBnZXRJbWFnZShhLCBwKTogUmVwbGFjZSB0aGUgaW1hZ2UgVVJMIHdoZW4gcG9pbnRpbmcgdG8gYW4gaW1hZ2UsICdhJyByZWZlcnMgdG8gdGhlIGZpcnN0IHBhcmVudCBBIGVsZW1lbnQsIGFuZCAncCcgaXMgYW4gYXJyYXkgb2YgYWxsIHBhcmVudCBlbGVtZW50cywgc2VlIHRoZSBleGFtcGxlIGJlbG93IGZvciBkZXRhaWxzCn0KT3RoZXIgcGFyYW1ldGVyIGl0ZW1zIGNhbiBiZSBhZGRlZCBhcyBuZWVkZWQuCk5vdGUgdGhhdCBjc3MvZXh0L3hoci9sYXp5QXR0ciAobGF6eSBsb2FkZWQgb3JpZ2luYWwgaW1hZ2UgVVJMIGF0dHJpYnV0ZSBuYW1lKS9kZXNjcmlwdGlvbiAoZGVzY3JpcHRpb24gd2hlbiBjb2xsZWN0aW5nIGltYWdlcywgc3VwcG9ydCBzZWxlY3RvciBvciB4cGF0aCkvY2xpY2tUb09wZW4gc2hvdWxkIG9ubHkgYmUgdXNlZCBhZnRlciBzcGVjaWZ5aW5nIHRoZSB1cmwuCnhociBpcyB1c2VkIHRvIG9idGFpbiB0aGUgYXR0cmlidXRlcyBvZiB0aGUgcGljdHVyZXMgb24gdGhlIGlubmVyIHBhZ2VzLgogICAgMS4gRmlyc3QsIHVzZSB4aHIudXJsKCkgdG8gZmlsdGVyIGFuZCByZXR1cm4gdGhlIHVybCBvZiB0aGUgcGFyZW50IGEgdGFnLCBhbmQgdGhlbiB0aGUgc2NyaXB0IHdpbGwgYXV0b21hdGljYWxseSBncmFiIHRoZSB3ZWJwYWdlIHBvaW50ZWQgdG8gYnkgdGhlIHVybC4KICAgIDIuIEFuZCBnZXQgcGljdHVyZXMgdGhyb3VnaCB4aHIuCiAgICAgICAgMi4xIHhoci5xdWVyeSBpcyB0aGUgcGljdHVyZSAoeW91IGNhbiBGb3IgbXVsdGlwbGUsIG11bHRpcGxlIHdpbGwgYmUgYWRkZWQgdG8gdGhlIGdhbGxlcnkpIHNlbGVjdG9yIG9yIGZ1bmN0aW9uCiAgICAgICAgMi4yIHhoci5jYXB0aW9uIGlzIHRoZSBkZXNjcmlwdGlvbiBvZiBwaWN0dXJlCklmIHRoZSBtb3VzZSBwb2ludHMgdG8gYW4gb2JqZWN0IG90aGVyIHRoYW4gYSBwaWN0dXJlLCB5b3UgY2FuIHVzZSBnZXRFeHRTcmMgdG8gZ2VuZXJhdGUgdGhlIGRlc2lyZWQgcGljdHVyZSB1cmwsIHNlZSB0aGUgeW91dHViZSBleGFtcGxlIGJlbG93IGZvciBkZXRhaWxzCmV4dCBpcyB0aGUgbWV0aG9kIGZvciBjYXB0dXJpbmcgbmVhcmJ5IGltYWdlIGVsZW1lbnRzIHdoZW4gdGhlIG1vdXNlIGhvdmVycyBvdmVyIGEgbm9uLWltYWdlIGVsZW1lbnQuICJwcmV2aW91cyIgaW5kaWNhdGVzIGRldGVjdGluZyB0aGUgcHJldmlvdXMgc2libGluZyBub2RlLCAicHJldmlvdXMtMiIgaW5kaWNhdGVzIGRldGVjdGluZyB0aGUgc2Vjb25kIHNpYmxpbmcgbm9kZSBpbiByZXZlcnNlIG9yZGVyLCBhbmQgIm5leHQiIGluZGljYXRlcyBkZXRlY3RpbmcgdGhlIG5leHQgc2libGluZyBub2RlLgpnZXRFeHRTcmMgaXMgdGhlIG1ldGhvZCBmb3IgZGlyZWN0bHkgb2J0YWluaW5nIHRoZSBpbWFnZSBVUkwgYmFzZWQgb24gYSBub24taW1hZ2UgZWxlbWVudC4KICovCnZhciBzaXRlSW5mbyA9IFsKICAgIHsKICAgICAgICBuYW1lOiAiZ29vZ2xlIOWbvueJh+aQnOe0oiIsCiAgICAgICAgLy/ntrLlnYDkvovlrZAgKCDmlrnkvr/muKzoqablkozmn6XnnIsgKQogICAgICAgIGV4YW1wbGU6ICJodHRwOi8vd3d3Lmdvb2dsZS5jb20uaGsvc2VhcmNoP3E9ZmlyZWZveCZ0Ym09aXNjaCIsCiAgICAgICAgLy/mmK/lkKbllZ/nlKgKICAgICAgICBlbmFibGVkOiB0cnVlLAogICAgICAgIC8v56uZ6bue5q2j5YmH77yM5Yy56YWN56uZ6buedXJs6Kmy5qKd6KaP5YmH5omN5pyD55Sf5pWICiAgICAgICAgdXJsOiAvaHR0cHM/OlwvXC93d3cuZ29vZ2xlKFwuXHd7MSwzfSl7MSwzfVwvc2VhcmNoXD8uKiYodGJtPWlzY2h8dWRtPTIpLywKICAgICAgICAvL+m8oOaomem7nuaTiuebtOaOpeaJk+mWi++8iOWDheeVtumrmOe0muimj+WJh+eahGdldEltYWdlKCnmiJbogIVyL3Pmm7/mj5vmnInov5Tlm57lgLznmoTmmYLlgJnnlJ/mlYjvvIkKICAgICAgICBjbGlja1RvT3BlbjogewogICAgICAgICAgICBlbmFibGVkOiBmYWxzZSwKICAgICAgICAgICAgcHJldmVudERlZmF1bHQ6IHRydWUsLy/mmK/lkKblmJfoqabpmLvmraLpu57mk4rnmoTpu5joqo3ooYzngrrvvIjmr5TlpoLlpoLmnpzmmK/kvaDpu57nmoTmmK/kuIDlgIvpj4jmjqXvvIzpu5joqo3ooYzngrrmmK/miZPplovpgJnlgIvpj4jmjqXvvIzlpoLmnpzmmK90cnVl77yManPmnIPlmJfoqabpmLvmraLpj4jmjqXnmoTmiZPploso5aaC5p6c5oOz6Ieo5pmC5omT6ZaL6YCZ5YCL6Y+I5o6l77yM6KuL5L2/55So5Y+z6Y2155qE5omT6ZaL5ZG95LukKe+8iQogICAgICAgICAgICBidXR0b246IDAsLy8w77ya6byg5qiZ5bem6Y21IDHvvJrmu77ovKrmjInpiJXmiJbkuK3plpPmjInpiJXvvIjlpoLmnpzmnInvvIkgMu+8mum8oOaomeWPs+mNteOAgum7mOiqjeeCuiAwCiAgICAgICAgICAgIGFsdDogZmFsc2UsLy/mmK/lkKbpnIDopoHmjInkuIthbHTpjbUKICAgICAgICAgICAgY3RybDogZmFsc2UsLy/mmK/lkKbpnIDopoHmjInkuItjdHJs6Y21CiAgICAgICAgICAgIHNoaWZ0OiBmYWxzZSwvL+aYr+WQpumcgOimgeaMieS4i3NoaWZ06Y21CiAgICAgICAgICAgIG1ldGE6IGZhbHNlLC8v5piv5ZCm6ZyA6KaB5oyJ5LiLbWV0YemNtQogICAgICAgICAgICB0eXBlOiAnYWN0dWFsJywvL+m7mOiqjeeahOaJk+mWi+aWueW8jzogJ2FjdHVhbCco5b2I5Ye6LOWOn+Wni+WclueJhykgJ21hZ25pZmllcico5pS+5aSn6Y+hKSAnY3VycmVudCco5b2I5Ye6LOeVtuWJjeWclueJhykKICAgICAgICB9LAogICAgICAgIGdldEltYWdlOiBmdW5jdGlvbihhKSB7CiAgICAgICAgICAgIC8v542y5Y+W5ZyW54mH5a+m6Zqb5Zyw5Z2A55qE6JmV55CG5Ye95pW4LAogICAgICAgICAgICAvL3RoaXMg54K655W25YmN6byg5qiZ5oe45rWu5ZyW54mH55qE5byV55SoLAogICAgICAgICAgICAvL+esrOS4gOWAi+WPg+aVuOeCuueVtuWJjeWclueJh+eahOeItuWFg+e0oOS4reesrOS4gOWAi2HlhYPntKAo5Y+v6IO95LiN5a2Y5ZyoKQogICAgICAgICAgICAvL+esrOS6jOWAi+WPg+aVuOeCuuS/neWtmOeVtuWJjeWclueJh+aJgOacieeItuWFg+e0oOeahOaVuOe1hAogICAgICAgICAgICBpZighYSkgcmV0dXJuOwogICAgICAgICAgICBsZXQganNhY3Rpb24gPSBhLmdldEF0dHJpYnV0ZSgianNhY3Rpb24iKTsKICAgICAgICAgICAgaWYgKGEuaHJlZi5tYXRjaCgvaW1ndXJsPSguKj8pJi9pKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChSZWdFeHAuJDEpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGpzYWN0aW9uICYmIGpzYWN0aW9uLmluZGV4T2YoJ3RvdWNoc3RhcnQnKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHRvdWNoTGlzdCA9IFtuZXcgVG91Y2goewogICAgICAgICAgICAgICAgICAgIGlkZW50aWZpZXI6IDEsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgY2xpZW50WDogMCwKICAgICAgICAgICAgICAgICAgICBjbGllbnRZOiAwCiAgICAgICAgICAgICAgICB9KV07CiAgICAgICAgICAgICAgICB2YXIgZmFrZUV2ZW50ID0gbmV3IFRvdWNoRXZlbnQoJ3RvdWNoc3RhcnQnLCB7YnViYmxlczogdHJ1ZSwgdG91Y2hlczogdG91Y2hMaXN0fSk7CiAgICAgICAgICAgICAgICBhLmRpc3BhdGNoRXZlbnQoZmFrZUV2ZW50KTsKICAgICAgICAgICAgICAgIGZha2VFdmVudCA9IG5ldyBUb3VjaEV2ZW50KCd0b3VjaGVuZCcsIHtidWJibGVzOiB0cnVlfSk7CiAgICAgICAgICAgICAgICBhLmRpc3BhdGNoRXZlbnQoZmFrZUV2ZW50KTsKICAgICAgICAgICAgICAgIGlmIChhLmhyZWYubWF0Y2goL2ltZ3VybD0oLio/KSYvaSkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KFJlZ0V4cC4kMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8g6Ieq5a6a576p5qij5byPCiAgICAgICAgLy8gY3NzOiAnJywKCiAgICAgICAgLy8g5aaC5p6c5ZyW54mH6JeP5Zyo6Z2eaW1n5qiZ57Gk5b6M6Z2i77yM5L2/55So5q2k6aCF542y5Y+W6KKr6YGu5pOL55qEaW1n5YWD57Sg44CCCiAgICAgICAgLy8g5YW25LitcHJldmlvdXPku6PooajliY3pnaLkuIDlgIvlhYPntKDvvIxwcmV2aW91cy0y5Luj6KGo5YmN6Z2i56ys5LqM5YCL5YWD57Sg77yMbmV4dOS7o+ihqOW+jOmdouS4gOWAi+WFg+e0oOOAggogICAgICAgIC8vIOaIluiAheebtOaOpeeUqOWHveaVuOeNsuWPlu+8jOWCs+WFpeeVtuWJjeWFg+e0oO+8jOi/lOWbnuafpeaJvuWIsOeahOWFg+e0oOaIluaYr251bGzjgIIKICAgICAgICAvLyBleHQ6ICdwcmV2aW91cy0yJywKCiAgICAgICAgLy8g5o6S6Zmk55qE5ZyW54mH5q2j5YmHCiAgICAgICAgLy8gZXhjbHVkZTogL3dlaXhpbl9jb2RlXC5wbmckL2ksCgogICAgICAgIC8vIOmcgOimgeabv+aPm+eahOWclueJh+ato+WJh++8jOWMuemFjeS4iuWclueJh3VybOipsuaineimj+WJh+aJjeeUn+aViAogICAgICAgIC8vIHNyYzogL2F2YXRhci9pLAoKICAgICAgICAvLyDmraPliYfmiJblrZfnrKbkuLLmqqLmuKzlhaflrrnvvIzlj6/ku6XngrrlkKvmnInlpJrntYTopo/liYfnmoTmlbjntYTvvIzoi6XngrrlrZfnrKbkuLLliYflj6rpgLLooYzlrZfnrKbkuLLmm7/mj5sKICAgICAgICAvLyByOiAvXD8uKiQvaSwKCiAgICAgICAgLy8g5q2j5YmH5oiW5a2X56ym5Liy5pu/5o+b5YWn5a6577yM5Y+v5Lul6IiH5LiK5LiA5qKd5LiA5LiA5bCN5oeJ77yM5Lmf5Y+v5Lul5Lul5pW457WE5bCN5oeJ5qqi5ris5q2j5YmH55qE5YW25Lit5LiA5qKd77yM5q+U5aaC5biM5pyb5pyJ5aSa5YCL57WQ5p6c5ZiX6Kmm6aGv56S65Y6f5ZyWCiAgICAgICAgLy8gczogJycKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIjEyM3JmIiwKICAgICAgICB1cmw6IC8xMjNyZlwuY29tLywKICAgICAgICByOiAvdXNcLjEyM3JmXC5jb21cL1xkK3dtXC8vaSwKICAgICAgICBzOiAicHJldmlld3MuMTIzcmYuY29tL2ltYWdlcy8iCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICIxMjYiLAogICAgICAgIHNyYzogL1wuMTI2XC5uZXQvaSwKICAgICAgICByOiAvXC9cZCtcLlxkK3hcZCtcLlxkK1wuKFteXC5dKykkL2ksCiAgICAgICAgczogJy81LjUwMDB4NTAwMC4xMDAuJDEnCiAgICB9LAogICAgewogICAgICAgIG5hbWU6IjE3OC5jb20iLAogICAgICAgIGVuYWJsZWQ6dHJ1ZSwKICAgICAgICB1cmw6L15odHRwcz86XC9cLyg/Olx3K1wuKSsxNzhcLmNvbVwvL2ksCiAgICAgICAgY2xpY2tUb09wZW46ewogICAgICAgICAgICBlbmFibGVkOnRydWUsCiAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OnRydWUsCiAgICAgICAgICAgIHR5cGU6J2FjdHVhbCcsCiAgICAgICAgfSwKICAgICAgICBnZXRJbWFnZTpmdW5jdGlvbihhKXsKICAgICAgICAgICAgaWYoIWEpcmV0dXJuOwogICAgICAgICAgICB2YXIgcmVnPS9eaHR0cHM/OlwvXC8oPzpcdytcLikrMTc4XC5jb21cLy4rPyhodHRwcz86XC9cL2ltZ1xkKi4xNzguY29tXC9bXi5dK1wuKD86anBnfGpwZWd8cG5nfGdpZnxibXApKS9pOwogICAgICAgICAgICByZXR1cm4gKGEuaHJlZi5tYXRjaChyZWcpIHx8IFtdKVsxXTsKICAgICAgICB9CiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICIyNG1laXR1IiwKICAgICAgICB1cmw6IC8yNG1laXR1XC5jb218MjVtZWludlwuY29tfGFpc2ltZWludlwuY29tfDI0dHVwaWFuXC5jb218MjRtZWludlwufDI0bW50cFwufDI0Y29zXC58MjRmaFwufDI0c2hpcGluXC58MjRtblwuLywKICAgICAgICByOiBbL1wvbShbXlwvXSspJC9pLAogICAgICAgICAgICAvaW1nc1wuL2ldLAogICAgICAgIHM6IFsiLyQxIiwiYmltZy4iXQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiYmluZyDlm77niYfmkJzntKIiLAogICAgICAgIGV4YW1wbGU6Imh0dHA6Ly9jbi5iaW5nLmNvbS9pbWFnZXMvc2VhcmNoP3E9JUU3JUJFJThFJUU1JUE1JUIzIiwKICAgICAgICBlbmFibGVkOnRydWUsCiAgICAgICAgdXJsOiAvXmh0dHBzPzpcL1wvW14uXSpcLmJpbmdcLmNvbVwvaW1hZ2VzXC8vaSwKICAgICAgICBnZXRJbWFnZTpmdW5jdGlvbihhKXsKICAgICAgICAgICAgaWYgKCFhKSByZXR1cm47CiAgICAgICAgICAgIHZhciBvbGRzcmM9dGhpcy5zcmM7CiAgICAgICAgICAgIHZhciAkID0gLyxpbWd1cmw6IihbXiJdKykvLmV4ZWMoYS5nZXRBdHRyaWJ1dGUoJ20nKSk7CiAgICAgICAgICAgIHZhciBuZXdzcmM9ICQgPyAkWzFdIDogJyc7CiAgICAgICAgICAgIGlmKG5ld3NyYyE9b2xkc3JjKXJldHVybiBuZXdzcmM7CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiLnmb7luqbotLTlkKciLAogICAgICAgIGVuYWJsZWQ6dHJ1ZSwKICAgICAgICB1cmw6L15odHRwcz86XC9cL3RpZWJhXC5iYWlkdVwuW15cL10rXC8vaSwKICAgICAgICByOiBbL1wvc3lzXC9wb3J0cmFpdC9pLAogICAgICAgICAgICAvXihodHRwOlwvXC90aWViYXBpY1wuYmFpZHVcLmNvbVwvZm9ydW1cLylhYihwaWNcL2l0ZW1cL1tcdy5dKykvaV0sCiAgICAgICAgczogWyIvc3lzL3BvcnRyYWl0bCIsICIkMSQyIl0sCiAgICAgICAgZ2V0SW1hZ2U6IGZ1bmN0aW9uKGEsIHApIHsKICAgICAgICAgICAgbGV0IGJzcmMgPSB0aGlzLmdldEF0dHJpYnV0ZSgnYnBpYycpOwogICAgICAgICAgICByZXR1cm4gYnNyYyB8fCBudWxsOwogICAgICAgIH0sCiAgICAgICAgeGhyOiB7CiAgICAgICAgICAgIHVybDogZnVuY3Rpb24oYSwgcCkgewogICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNyYykgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICBsZXQgcGlkID0gdGhpcy5zcmMubWF0Y2goL1wuYmFpZHVcLmNvbVwvZm9ydW1cL3cuKlwvKFx3KylcLi8pOwogICAgICAgICAgICAgICAgaWYgKCFwaWQpIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgcGlkID0gcGlkWzFdOwogICAgICAgICAgICAgICAgbGV0IHRpZCA9IDA7CiAgICAgICAgICAgICAgICBsZXQgdGlkbSA9IGxvY2F0aW9uLmhyZWYubWF0Y2goL1wvcFwvKFxkKykvKTsKICAgICAgICAgICAgICAgIGlmICh0aWRtKSB0aWQgPSB0aWRtWzFdOwogICAgICAgICAgICAgICAgaWYgKHRpZCkgewogICAgICAgICAgICAgICAgICAgIGxldCBrdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCN3ZDJgKTsKICAgICAgICAgICAgICAgICAgICBpZiAoa3cgJiYga3cudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGBodHRwczovL3RpZWJhLmJhaWR1LmNvbS9waG90by9idy9waWN0dXJlL2d1aWRlP2t3PSR7a3cudmFsdWV9JnRpZD0ke3RpZH0mcGljX2lkPSR7cGlkfSZzZWVfbHo9MCZmcm9tX3BhZ2U9MCZhbHQ9anZpZXdgOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9LAogICAgICAgICAgICBxdWVyeTogZnVuY3Rpb24oaHRtbCwgZG9jLCB1cmwpIHsKICAgICAgICAgICAgICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShodG1sKTsKICAgICAgICAgICAgICAgIGlmICghZGF0YSkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICBsZXQgcGlkID0gdXJsLm1hdGNoKC8mcGljX2lkPShcdyspLylbMV07CiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gZGF0YS5kYXRhLnBpY19saXN0KSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHBpYyA9IGRhdGEuZGF0YS5waWNfbGlzdFtrZXldOwogICAgICAgICAgICAgICAgICAgIGlmIChwaWMuaW1nLnNjcmVlbi5pZCA9PSBwaWQpIHJldHVybiBwaWMuaW1nLnNjcmVlbi53YXRlcnVybDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAi55m+5bqm5Zu+54mH5pCc57SiIiwKICAgICAgICBleGFtcGxlOiAiaHR0cDovL2ltYWdlLmJhaWR1LmNvbS9pP2llPXV0Zi04JndvcmQ9JUU5JUEzJThFJUU2JTk5JUFGJm9xPSVFOSVBMyU4RSVFNiU5OSIsCiAgICAgICAgZW5hYmxlZDogdHJ1ZSwKICAgICAgICB1cmw6IC9eaHR0cHM/OlwvXC9pbWFnZVwuYmFpZHVcLmNvbVwvLiomd29yZD0vaSwKICAgICAgICBnZXRJbWFnZTogZnVuY3Rpb24oYSkgewogICAgICAgICAgICBpZiAoIWEpIHJldHVybjsKICAgICAgICAgICAgdmFyIHJlZyA9IC8mb2JqdXJsPShodHRwLio/XC4oPzpqcGd8anBlZ3xwbmd8Z2lmfGJtcHx3ZWJwKSkvaTsKICAgICAgICAgICAgaWYgKGEuaHJlZi5tYXRjaChyZWcpKSB7CiAgICAgICAgICAgICAgICBsZXQgdXJsID0gUmVnRXhwLiQxOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB1cmwgPSBkZWNvZGVVUklDb21wb25lbnQodXJsKTsKICAgICAgICAgICAgICAgICAgICB1cmwgPSBkZWNvZGVVUklDb21wb25lbnQodXJsKTsKICAgICAgICAgICAgICAgIH1jYXRjaChlKXt9CiAgICAgICAgICAgICAgICByZXR1cm4gdXJsOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiLosYbnk6MiLAogICAgICAgIGV4YW1wbGU6Imh0dHA6Ly9tb3ZpZS5kb3ViYW4uY29tL3Bob3Rvcy9waG90by8xMDAwNjU2MTU1LyIsCiAgICAgICAgZW5hYmxlZDogdHJ1ZSwKICAgICAgICB1cmw6L15odHRwcz86XC9cL1teLl0qXC5kb3ViYW5cLmNvbS9pLAogICAgICAgIGdldEltYWdlOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHZhciBvbGRzcmMgPSB0aGlzLnNyYywKICAgICAgICAgICAgICAgIG5ld3NyYyA9IG9sZHNyYzsKICAgICAgICAgICAgdmFyIHBpYyA9IC9cL3ZpZXdcL3Bob3RvXC8oPzpwaG90b3xhbGJ1bWNvdmVyfGFsYnVtaWNvbnx0aHVtYnxzcXhzKVwvcHVibGljXC8vaTsKICAgICAgICAgICAgdmFyIG1vdmllQ292ZXIgPSAvXC92aWV3XC9tb3ZpZV9wb3N0ZXJfY292ZXJcL1tzaV1wc3RcL3B1YmxpY1wvL2k7CiAgICAgICAgICAgIHZhciBib29rQ292ZXIgPSAvXC92aWV3XC9hcmtfYXJ0aWNsZV9jb3ZlclwvY3V0XC9wdWJsaWNcLy9pOwogICAgICAgICAgICB2YXIgc3BpYyA9IC8oaW1nXGQrLmRvdWJhbi5jb20pXC9bc21dcGljXC8vaTsKICAgICAgICAgICAgdmFyIHJhdGlvID0gL3NfcmF0aW9fcG9zdGVyL2k7CiAgICAgICAgICAgIGlmKC9cL3N1YmplY3RcL1xkK1wvZGlzY3Vzc2lvbi8udGVzdChsb2NhdGlvbi5ocmVmKSl7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocGljLnRlc3Qob2xkc3JjKSkgewogICAgICAgICAgICAgICAgbmV3c3JjID0gb2xkc3JjLnJlcGxhY2UocGljLCAnL3ZpZXcvcGhvdG8vcmF3L3B1YmxpYy8nKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChtb3ZpZUNvdmVyLnRlc3Qob2xkc3JjKSkgewogICAgICAgICAgICAgICAgbmV3c3JjID0gb2xkc3JjLnJlcGxhY2UobW92aWVDb3ZlciwgJy92aWV3L3Bob3RvL3Jhdy9wdWJsaWMvJyk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoYm9va0NvdmVyLnRlc3Qob2xkc3JjKSkgewogICAgICAgICAgICAgICAgbmV3c3JjID0gb2xkc3JjLnJlcGxhY2UoYm9va0NvdmVyLCAnL3ZpZXcvYXJrX2FydGljbGVfY292ZXIvcmV0aW5hL3B1YmxpYy8nKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChzcGljLnRlc3Qob2xkc3JjKSkgewogICAgICAgICAgICAgICAgbmV3c3JjID0gb2xkc3JjLnJlcGxhY2Uoc3BpYywgJyQxL2xwaWMvJyk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmF0aW8udGVzdChvbGRzcmMpKSB7CiAgICAgICAgICAgICAgICBuZXdzcmMgPSBvbGRzcmMucmVwbGFjZShyYXRpbywgJ2wnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbmV3c3JjID09IG9sZHNyYyA/IG51bGwgOiBbbmV3c3JjLG5ld3NyYy5yZXBsYWNlKC9waG90b1wvcmF3LywicGhvdG8vcGhvdG8iKV07CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiJiaWxpYmlsaSIsCiAgICAgICAgZW5hYmxlZDp0cnVlLAogICAgICAgIHVybDovXmh0dHBzPzpcL1wvW14uXStcLmJpbGliaWxpLmNvbS9pLAogICAgICAgIHI6IC9cZCtfXGQrXC98XGQrX3hcZCtcLmpwZyR8QFxkK3dfXGQraC4qXC53ZWJwJHxfXGQreFxkK1wuanBnJC9pLAogICAgICAgIHM6ICIiCiAgICB9LAogICAgLyp7CiBuYW1lOiAiZGV2aWFudGFydCIsCiBleGFtcGxlOiAiaHR0cDovL3d3dy5kZXZpYW50YXJ0LmNvbSIsCiBlbmFibGVkOnRydWUsCiB1cmw6L15odHRwcz86XC9cL1teLl0qXC5kZXZpYW50YXJ0XC5jb20vaSwKIGdldEltYWdlOmZ1bmN0aW9uKGEsIHApewogICAgIGxldCBpZCxzZWxmPXRoaXM7CiAgICAgaWYocFsxXSAmJiBwWzFdLmRhdGFzZXQuaG9vaz09ImRldmlhdGlvbl9saW5rIil7CiAgICAgICAgIGlkPXBbMV0uaHJlZi5yZXBsYWNlKC8uKj8oXGQrKSQvLCIkMSIpOwogICAgIH1lbHNlIGlmKHBbMl0gJiYgcFsyXS5kYXRhc2V0Lmhvb2s9PSJkZXZpYXRpb25fbGluayIpewogICAgICAgICBpZD1wWzJdLmhyZWYucmVwbGFjZSgvLio/KFxkKykkLywiJDEiKTsKICAgICB9CiAgICAgaWYoL1w/dG9rZW4vLnRlc3QodGhpcy5zcmMpKXsKICAgICAgICAgaWYoIXRoaXMuZGF0YXNldC5wdnNyYyAmJiBpZCl7CiAgICAgICAgICAgICB0aGlzLmRhdGFzZXQucHZzcmM9InQiOwogICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAianNvbiIsCiAgICAgICAgICAgICAgICAgdXJsOiAnL19uYXBpL3NoYXJlZF9hcGkvZGV2aWF0aW9uL2V4dGVuZGVkX2ZldGNoP2RldmlhdGlvbmlkPScraWQrJyZ0eXBlPWFydCZpbmNsdWRlX3Nlc3Npb249ZmFsc2UnLAogICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgICAgICAgICB2YXIgbWVkaWEgPSAoZC5yZXNwb25zZSAmJiBkLnJlc3BvbnNlLmRldmlhdGlvbik/ZC5yZXNwb25zZS5kZXZpYXRpb24ubWVkaWE6bnVsbDsKICAgICAgICAgICAgICAgICAgICAgdmFyIGZ1bGx2aWV3ID0gbWVkaWEgJiYgbWVkaWEudHlwZXMgJiYgbWVkaWEudHlwZXMuZmluZCh0PT57cmV0dXJuIHQudD09J2Z1bGx2aWV3J30pOwogICAgICAgICAgICAgICAgICAgICBpZihtZWRpYSAmJiBtZWRpYS5iYXNlVXJpICYmIGZ1bGx2aWV3ICYmIG1lZGlhLnRva2VuKXsKICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRVcmw9bWVkaWEuYmFzZVVyaSsoZnVsbHZpZXcuYz9mdWxsdmlldy5jLnJlcGxhY2UoIjxwcmV0dHlOYW1lPiIsbWVkaWEucHJldHR5TmFtZSkucmVwbGFjZSgvLHFfXGQrLywiLHFfMTAwIik6IiIpKyI/dG9rZW49IittZWRpYS50b2tlblswXTsKICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGF0YXNldC5wdnNyYz1yZXN1bHRVcmw7CiAgICAgICAgICAgICAgICAgICAgICAgICBpZihmbG9hdEJhcil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRCYXIudXBkYXRlKHNlbGYsIHNlbGYuZGF0YXNldC5wdnNyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICB9KTsKICAgICAgICAgfWVsc2UgaWYodGhpcy5kYXRhc2V0LnB2c3JjIT0idCIgJiYgaWQpewogICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YXNldC5wdnNyYzsKICAgICAgICAgfQogICAgIH0KICAgICByZXR1cm4gbnVsbDsKIH0sCn0sCnsKICAgIG5hbWU6ImRldmlhbnRhcnQiLAogICAgdXJsOi9eaHR0cHM/OlwvXC9bXi5dKlwuZGV2aWFudGFydFwuY29tL2ksCiAgICB4aHI6IHsKICAgICAgICB1cmw6ICdhW2RhdGEtaG9vayA9ICJkZXZpYXRpb25fbGluayJdJywKICAgICAgICBxdWVyeTogJ1twcm9wZXJ0eT0iY29udGVudFVybCJdJwogICAgfQp9LCovCiAgICB7CiAgICAgICAgbmFtZToiZGV2aWFudGFydCIsCiAgICAgICAgdXJsOi9eaHR0cHM/OlwvXC9bXi5dKlwuZGV2aWFudGFydFwuY29tL2ksCiAgICAgICAgZ2V0SW1hZ2U6IGZ1bmN0aW9uKGEsIHApIHsKICAgICAgICAgICAgaWYgKGEpIHsKICAgICAgICAgICAgICAgIGxldCBtZWRpYSA9T2JqZWN0LmtleXMoYSkuZmlsdGVyKHByb3AgPT4gcHJvcC5pbmRleE9mKCJfX3JlYWN0UHJvcHMiKSA9PT0gMCk7CiAgICAgICAgICAgICAgICBpZiAobWVkaWEgJiYgYVttZWRpYV0gJiYgYVttZWRpYV0uY2hpbGRyZW4gJiYgYVttZWRpYV0uY2hpbGRyZW4ucHJvcHMgJiYgYVttZWRpYV0uY2hpbGRyZW4ucHJvcHMuZGV2aWF0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgbWVkaWEgPSBhW21lZGlhXS5jaGlsZHJlbi5wcm9wcy5kZXZpYXRpb24ubWVkaWE7CiAgICAgICAgICAgICAgICAgICAgbGV0IGZ1bGx2aWV3ID0gbWVkaWEudHlwZXMuZmlsdGVyKGQgPT4gZC50ID09PSAiZnVsbHZpZXciKTsKICAgICAgICAgICAgICAgICAgICBsZXQgZXh0ID0gbWVkaWEuYmFzZVVyaS5tYXRjaCgvXC5cdyskLyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZ1bGx2aWV3ICYmIGV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBmdWxsdmlldyA9IGZ1bGx2aWV3WzBdOwogICAgICAgICAgICAgICAgICAgICAgICBleHQgPSBleHRbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZWRpYS5iYXNlVXJpICsgYC92MS9maWxsL3dfJHtmdWxsdmlldy53fSxoXyR7ZnVsbHZpZXcuaH0vJHttZWRpYS5wcmV0dHlOYW1lfS1mdWxsdmlldyR7ZXh0fT90b2tlbj1gICsgbWVkaWEudG9rZW5bMF07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0aGlzLnNyYyAmJiB0aGlzLnNyYy5yZXBsYWNlKC8scV9cZCssLywgIixxXzEwMCwiKS5yZXBsYWNlKC9cL3YxXC9maWxsXC9bXj9dK1wtcHJlXC5cdytcPy8sICI/Iik7CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAn6Iqx55Oj572RJywKICAgICAgICB1cmw6IC9eaHR0cHM/OlwvXC9odWFiYW5cLmNvbVwvL2ksCiAgICAgICAgZXh0OiAncHJldmlvdXMtMicsCiAgICAgICAgcjogWy8oLippbWcuaGIuYWljZG4uY29tXC8uKilfZncoPzoyMzZ8MzIwKSQvaSwgL19md1xkK1x3Ky9pXSwKICAgICAgICBzOiBbJyQxX2Z3NjU4JywgJyddLAogICAgICAgIGRlc2NyaXB0aW9uOiAnLi8uLi9mb2xsb3dpbmctc2libGluZzo6cFtAY2xhc3M9ImRlc2NyaXB0aW9uIl0nLAogICAgICAgIGV4Y2x1ZGU6IC93ZWl4aW5fY29kZVwucG5nJC9pCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJ3aWtpcGVkaWEiLAogICAgICAgIGVuYWJsZWQ6dHJ1ZSwKICAgICAgICB1cmw6L15odHRwcz86XC9cLy4rXC53aWtpcGVkaWFcLm9yZ1wvL2ksCiAgICAgICAgcjogLyhodHRwcz86XC9cLy4qKVwvdGh1bWIoXC8uKilcL1xkK3B4LS4qL2ksCiAgICAgICAgczogIiQxJDIiCiAgICB9LAogICAgewogICAgICAgIG5hbWU6Iuayquaxn+eijueijiIsCiAgICAgICAgZW5hYmxlZDp0cnVlLAogICAgICAgIHVybDovXmh0dHBzPzpcL1wvKFteLl0rXC4pKig/Onllc2hqXC5jb218aGplbmdsaXNoXC5jb218aHVqaWFuZ1wuY29tKS9pLAogICAgICAgIHI6IC9eKGh0dHBzPzpcL1wvKD86W14uXStcLikqaGpmaWxlLmNuXC8uKykoXyg/OnN8bSkpKFwuXHcrKSQvaSwKICAgICAgICBzOiAnJDEkMycKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogJ+Wkp+S8l+eCueivhCcsCiAgICAgICAgZXhhbXBsZTogJ2h0dHA6Ly93d3cuZGlhbnBpbmcuY29tL3Nob3AvMTc4NzMyOTYvcGhvdG9zJywKICAgICAgICB1cmw6IC9eaHR0cHM/OlwvXC93d3cuZGlhbnBpbmcuY29tXC9zaG9wL2ksCiAgICAgICAgcjogLyguKz9kcGZpbGVcLmNvbVwvLispXCgyNDBjMTgwXClcLyh0aHVtYlwuLispL2ksCiAgICAgICAgczogJyQxKDcwMHg3MDApLyQyJwogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAndHJha3QudHYnLAogICAgICAgIHVybDogL15odHRwOlwvXC90cmFrdFwudHZcLy9pLAogICAgICAgIGV4YW1wbGU6ICdodHRwOi8vdHJha3QudHYvc2hvd3MnLAogICAgICAgIHI6IC8oLipcL2ltYWdlc1wvcG9zdGVyc1wvXGQrKS0oPzozMDB8MTM4KVwuanBnXD8oXGQrKSQvaSwKICAgICAgICBzOiAiJDEuanBnPyQyIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAn572R5piT5LqR6Z+z5LmQJywKICAgICAgICB1cmw6ICdodHRwczovL211c2ljLjE2My5jb20vKicsCiAgICAgICAgZXh0OiAncHJldmlvdXMnLAogICAgICAgIGdldEltYWdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIG9sZHNyYyA9IHRoaXMuc3JjOwogICAgICAgICAgICBpZih0aGlzLmRhdGEpewogICAgICAgICAgICAgICAgdmFyIG5ld3NyYyA9IHRoaXMuZGF0YSgnc3JjJyk7CiAgICAgICAgICAgICAgICBpZiAob2xkc3JjICE9IG5ld3NyYykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdzcmM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG9sZHNyYy5tYXRjaCgvKC4qKVw/cGFyYW09XGQreVxkKy8pKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gUmVnRXhwLiQxOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAi576O5aWz6JaE5oOF6aaGIiwKICAgICAgICB1cmw6IC9eaHR0cDpcL1wvYm9xaW5nZ3VhblwuY29tXC8vaSwKICAgICAgICBleGFtcGxlOiAnaHR0cDovL2JvcWluZ2d1YW4uY29tL1BpY3R1cmUvMzE2MzcnLAogICAgICAgIGxhenlBdHRyOiAnZGF0YS1vcmlnaW5hbCcsCiAgICAgICAgZ2V0SW1hZ2U6IGZ1bmN0aW9uKGEpIHsKICAgICAgICAgICAgdmFyIG9sZHNyYyA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLW9yaWdpbmFsJykgfHwgdGhpcy5zcmM7CiAgICAgICAgICAgIGlmIChvbGRzcmMpIHsKICAgICAgICAgICAgICAgIHZhciBuZXdzcmMgPSBvbGRzcmMucmVwbGFjZSgvIVthLXpcZF0rJC8sICcnKTsKICAgICAgICAgICAgICAgIHJldHVybiBuZXdzcmMgPT0gb2xkc3JjID8gJycgOiBuZXdzcmM7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgewogICAgICAgIG5hbWU6IuaegemZkOS4u+mimOekvuWMuiIsCiAgICAgICAgZW5hYmxlZDp0cnVlLAogICAgICAgIHVybDovXmh0dHBzPzpcL1wvYmJzXC50aGVtZXhcLm5ldFwvLisvaSwKICAgICAgICBjbGlja1RvT3Blbjp7CiAgICAgICAgICAgIGVuYWJsZWQ6dHJ1ZSwKICAgICAgICAgICAgcHJldmVudERlZmF1bHQ6dHJ1ZSwKICAgICAgICAgICAgdHlwZTonYWN0dWFsJywKICAgICAgICB9LAogICAgICAgIHI6IC9eKGh0dHBzPzpcL1wvYmJzXC50aGVtZXhcLm5ldFwvYXR0YWNobWVudFwucGhwXD8uKykmdGh1bWI9MSguKykvaSwKICAgICAgICBzOiAnJDEkMicKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZToib3BlcmHlrpjmlrnorrrlnZsiLAogICAgICAgIGV4YW1wbGU6Imh0dHA6Ly9iYnMub3BlcmFjaGluYS5jb20iLAogICAgICAgIGVuYWJsZWQ6dHJ1ZSwKICAgICAgICB1cmw6L15odHRwOlwvXC9iYnNcLm9wZXJhY2hpbmFcLmNvbS9pLAogICAgICAgIHNyYzogL2ZpbGUucGhwXD9pZD1cZCskL2ksCiAgICAgICAgcjogLy4qLywKICAgICAgICBzOiAiJDEmbW9kZT12aWV3IgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAnZ2l0aHViIOS/ruatoycsCiAgICAgICAgdXJsOiAvXmh0dHBzPzpcL1wvZ2l0aHViXC5jb21cLy9pLAogICAgICAgIGNsaWNrVG9PcGVuOiB7CiAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLAogICAgICAgICAgICBwcmV2ZW50RGVmYXVsdDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ2FjdHVhbCcsCiAgICAgICAgfSwKICAgICAgICBnZXRJbWFnZTogZnVuY3Rpb24oYSkgewogICAgICAgICAgICBpZiAoYSAmJiBhLmhyZWYuaW5kZXhPZignL2Jsb2IvbWFzdGVyLycpID4gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3JjOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAn5LyY576O5Zu+JywKICAgICAgICB1cmw6IC9odHRwOlwvXC8oPzp3d3dcLik/dG9waXRcLm1lXC8vLAogICAgICAgIGxhenlBdHRyOiAnZGF0YS1vcmlnaW5hbCcsCiAgICAgICAgeGhyOiB7CiAgICAgICAgICAgIHVybDogL3RvcGl0XC5tZVwvaXRlbVwvXGQrLywKICAgICAgICAgICAgcXVlcnk6IFsnYVtkb3dubG9hZF0nLCAnYSNpdGVtLXRpcCddLAogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogJ+WNiuasoeWFgycsCiAgICAgICAgdXJsOiAvXmh0dHBzPzpcL1wvYmN5XC5uZXRcLy8sCiAgICAgICAgcjogWy9cL1xkWFxkJHxcL3dcZCskL2ksCiAgICAgICAgICAgICIvY292ZXIvIiwKICAgICAgICAgICAgL1wvKG1pZGRsZXxzbWFsbClcLmpwZy9pXSwKICAgICAgICBzOiBbIiIsICIvcG9zdC8iLCAiL2JpZy5qcGciXQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAnU3RlYW1wb3dlcmVkJywKICAgICAgICB1cmw6IC9cLnN0ZWFtcG93ZXJlZFwuY29tLywKICAgICAgICByOiAvXC5cZCt4XGQrXC5qcGcvaSwKICAgICAgICBzOiAiLmpwZyIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogJ1N0ZWFtY29tbXVuaXR5JywKICAgICAgICB1cmw6IC9zdGVhbWNvbW11bml0eVwuY29tLywKICAgICAgICByOiAvb3V0cHV0XC1xdWFsaXR5PVxkKyZmaXQ9aW5zaWRlXHxcZCtcOlxkKy9pLAogICAgICAgIHM6ICJvdXRwdXQtcXVhbGl0eT0xMDAmZml0PWluc2lkZXwwOjAiCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICfnn6XkuY4nLAogICAgICAgIHVybDogLyh6aGlodXx6aGltZylcLmNvbS8sCiAgICAgICAgcjogL18oYnxxaGR8eHN8c3xsfFxkKyh4XGQrfHcpKVwuL2ksCiAgICAgICAgczogIi4iCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICc1MDBweCcsCiAgICAgICAgdXJsOiAvNTAwcHhcLi8sCiAgICAgICAgcjogWy9cL3clM0RcZCtfaCUzRFxkK1wvdjIuKi9pLAogICAgICAgICAgICAvXigoPzooPzpwcD9jZG58c1xcZFxcLmFtYXpvbmF3c1xcLmNvbVwvcGhvdG9zfGdwXFxkK1xcLndhY1xcLmVkZ2VjYXN0Y2RuXFwubmV0XC84MDY2MTRcL3Bob3Rvc1wvcGhvdG9zKVxcLjUwMHB4fGRqbGhnZ2lwY3lsbG9cXC5jbG91ZGZyb250KVxcLig/Om5ldHxvcmcpXC9cXGQrXC9bXFxkYS1mXXs0MH1cLylcXGQrXFwuL10sCiAgICAgICAgczogWyIvbSUzRDIwNDhfayUzRDFfb2YlM0QxL3YyIiwKICAgICAgICAgICAgIiQxMjA0OC5qcGciXQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAnTnlhYScsCiAgICAgICAgdXJsOiAvbnlhYVwuc2UvLAogICAgICAgIHI6IC91cGxvYWRcL3NtYWxsXC8vaSwKICAgICAgICBzOiAidXBsb2FkL2JpZy8iCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJpdHVuZXMiLAogICAgICAgIHVybDogL2l0dW5lc1wuYXBwbGVcLmNvbS8sCiAgICAgICAgcjogL1xkK3hcZCtiYlwuL2ksCiAgICAgICAgczogIjE0MDB4MTQwMGJiLiIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIuaxvei9puS5i+WutiIsCiAgICAgICAgdXJsOiAvXC5hdXRvaG9tZVwuY29tXC5jbi8sCiAgICAgICAgcjogLyhcP2ltYWdlVmlldy4qfFxkK3hcZCtfXGQrX3xmX21ffHRffHNfKS9pLAogICAgICAgIHM6ICIiCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICLmmJPovaYiLAogICAgICAgIHVybDogL1wuYml0YXV0b1wuY29tLywKICAgICAgICByOiAvX1xkK1wuanBnJC9pLAogICAgICAgIHM6ICJfMTIuanBnIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAi54ix5Y2hIiwKICAgICAgICB1cmw6IC9cLnhjYXJcLmNvbVwuY24vLAogICAgICAgIHI6IC9cLVxkK3hcZCtcLmpwZy9pLAogICAgICAgIHM6ICIiCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICLlpKrlubPmtIvmsb3ovaYiLAogICAgICAgIHVybDogL1wucGNhdXRvXC5jb21cLmNuLywKICAgICAgICByOiAvX1xkK3hcZCtcLmpwZyQvaSwKICAgICAgICBzOiAiLmpwZyIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIuaWsOa1quaxvei9piIsCiAgICAgICAgdXJsOiAvXC5hdXRvXC5zaW5hXC5jb21cLmNuLywKICAgICAgICByOiAvX1xkK1wuanBnJC9pLAogICAgICAgIHM6ICJfc3JjLmpwZyIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogImdyZWFzeWZvcmsiLAogICAgICAgIHVybDogLyhncmVhc3lmb3JrfHNsZWF6eWZvcmspXC5vcmcvLAogICAgICAgIGdldEltYWdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYodGhpcy5wYXJlbnROb2RlICYmIHRoaXMucGFyZW50Tm9kZS5ub2RlTmFtZT09IkEiICYmIC9hbWF6b25hd3NcLmNvbS8udGVzdCh0aGlzLnBhcmVudE5vZGUuaHJlZikpewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50Tm9kZS5ocmVmOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0aGlzLnNyYyAmJiB0aGlzLnNyYy5yZXBsYWNlKC9cL3RodW1iXC8vaSwiL29yaWdpbmFsLyIpLnJlcGxhY2UoL1wvdGh1bWJuYWlsc1wvL2ksIi8iKS5yZXBsYWNlKC8oXC9mb3J1bVwvdXBsb2Fkc1wvdXNlcnBpY3NcLy4qXC8pbihbXlwvXSspJC8sIiQxcCQyIik7CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiZHJpYmJibGUiLAogICAgICAgIHVybDogL2RyaWJiYmxlXC5jb20vLAogICAgICAgIHI6IFsvX3RlYXNlciguW15cLl0rKSQvaSwKICAgICAgICAgICAgL18xeFwuL2ksCiAgICAgICAgICAgIC9cP2NvbXByZXNzPS4qL10sCiAgICAgICAgczogWyIkMSIsIi4iLCIiXQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAi55m+5bqm55m+56eRIiwKICAgICAgICB1cmw6IC9iYWlrZVwuYmFpZHVcLmNvbS8sCiAgICAgICAgcjogWy8uKmJkc3RhdGljXC5jb20uKlwvKFteXC9dKylcLmpwZy9pLAogICAgICAgICAgICAvKC4qYmtpbWdcLmNkblwuYmNlYm9zXC5jb20uKlw/eC1iY2UtcHJvY2Vzcz1pbWFnZSkuKi9pXSwKICAgICAgICBzOiBbImh0dHA6Ly9pbWdzcmMuYmFpZHUuY29tL2JhaWtlL3BpYy9pdGVtLyQxLmpwZyIsCiAgICAgICAgICAgICIkMSJdCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJudnNoZW5zIiwKICAgICAgICB1cmw6IC9udnNoZW5zXC5jb218b252c2hlblwuY29tLywKICAgICAgICByOiAvKFxpbWdcLm9udnNoZW5cLmNvbS4qKSg/OnRodW1iXC98X3MpKC4qKS9pLAogICAgICAgIHM6ICIkMSQyIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiVHVtYmxyIiwKICAgICAgICB1cmw6IC90dW1ibHJcLmNvbS8sCiAgICAgICAgZXhjbHVkZTogL1wvYXZhdGFyXy9pLAogICAgICAgIHI6IC9bXlwvXSoobWVkaWFcLnR1bWJsclwuY29tLipfKVxkKyhcLlteXC5dKykkL2ksCiAgICAgICAgczogIiQxcmF3JDIiCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJUdW1ibHIiLAogICAgICAgIHVybDogL3R1bWJsclwuY29tLywKICAgICAgICBzcmM6IC9cL2F2YXRhcl8vaSwKICAgICAgICByOiAvKG1lZGlhXC50dW1ibHJcLmNvbS4qXylbXl9dKyhcLlteXC5dKykkL2ksCiAgICAgICAgczogIiQxNTEyJDIiCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJBY2dnZXQiLAogICAgICAgIHVybDogL2FjZzE4XC51c3xhY2dnZXRcLi8sCiAgICAgICAgcjogLyhwaWNcLmFjZ2dldFwuY29tXC90aHVtYlwvKXdcZCtfaFxkK1wvL2ksCiAgICAgICAgczogIiQxdzk5OTlfaDk5OTkvIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiUGl4aXYiLAogICAgICAgIHVybDogL3BpeGl2XC5uZXR8cHhpbWdcLm5ldC8sCiAgICAgICAgc3JjOiAvcHhpbWdcLm5ldFwvY1wvXGQreFxkKy9pLAogICAgICAgIHI6IFsvcHhpbWdcLm5ldFwvY1wvXGQreFxkKy4qXC9pbWdcLyguKilfLiokL2ksIC8ocGl4aXYubmV0XC9pbWdcZCtcL2ltZ1wvLitcL1xkKylfW21zXVwuKFx3ezIsNX0pJC9pXSwKICAgICAgICBzOiBbWyJweGltZy5uZXQvaW1nLW9yaWdpbmFsL2ltZy8kMS5qcGciLCJweGltZy5uZXQvaW1nLW9yaWdpbmFsL2ltZy8kMS5wbmciXSwKICAgICAgICAgICAgIiQxLiQyIl0sCiAgICAgICAgZ2V0SW1hZ2U6IGZ1bmN0aW9uKGEsIHApIHsKICAgICAgICAgICAgaWYgKHRoaXMuc3JjICYmIGEgJiYgLyhcL2FydHdvcmtzXC98bWVtYmVyX2lsbHVzdFwucGhwXD9tb2RlPSJ8XC9ncm91cFwvKS8udGVzdChhLmhyZWYpKSB7CiAgICAgICAgICAgICAgICBsZXQgZGF0ZU1hdGNoID0gdGhpcy5zcmMubWF0Y2goL1wvaW1nXC8oXGQrXC8oXGRcZFwvPyg/IVxkezN9KSl7NX0pXC8oXGQrKV8vKTsKICAgICAgICAgICAgICAgIGxldCBjb3VudE1hdGNoID0gYS5vdXRlckhUTUwubWF0Y2goLzxzcGFuPihcZCspPFwvc3Bhbj4vKTsKICAgICAgICAgICAgICAgIGlmIChkYXRlTWF0Y2ggJiYgY291bnRNYXRjaCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB7YWxsOkFycmF5KHBhcnNlSW50KGNvdW50TWF0Y2hbMV0pKS5rZXlzKCkucmVkdWNlKAogICAgICAgICAgICAgICAgICAgICAgKGFjYywgY3VyKSA9PiBhY2MuY29uY2F0KGBodHRwczovL2kucHhpbWcubmV0L2ltZy1tYXN0ZXIvaW1nLyR7ZGF0ZU1hdGNoWzFdfS8ke2RhdGVNYXRjaFszXX1fcCR7Y3VyfV9tYXN0ZXIxMjAwLmpwZ2ApLAogICAgICAgICAgICAgICAgICAgICAgW10KICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIldhbGxoYXZlbiIsCiAgICAgICAgdXJsOiAvd2FsbGhhdmVuXC4vLAogICAgICAgIHNyYzogL3dhbGxwYXBlcnNcL3RodW1iXC9zbWFsbFwvdGh8dGhcLndhbGxoYXZlblwuY2NcLyhzbWFsbHxsZylcLy9pLAogICAgICAgIHI6IFsvd2FsbHBhcGVyc1wvdGh1bWJcL3NtYWxsXC90aCguKilcLi9pLAogICAgICAgICAgICAvdGhcLndhbGxoYXZlblwuY2NcLyhzbWFsbHxsZylcLyguKik/XC8oLiopXC4uKi9pXSwKICAgICAgICBzOiBbWyJ3YWxscGFwZXJzL2Z1bGwvd2FsbGhhdmVuJDEuanBnIiwid2FsbHBhcGVycy9mdWxsL3dhbGxoYXZlbiQxLnBuZyJdLAogICAgICAgICAgICBbIncud2FsbGhhdmVuLmNjL2Z1bGwvJDIvd2FsbGhhdmVuLSQzLmpwZyIsIncud2FsbGhhdmVuLmNjL2Z1bGwvJDIvd2FsbGhhdmVuLSQzLnBuZyJdXSwKICAgICAgICBnZXRJbWFnZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGxldCBzcmNSZWcxID0gL3dhbGxwYXBlcnNcL3RodW1iXC9zbWFsbFwvdGgoLiopXC4vaTsKICAgICAgICAgICAgbGV0IHNyY1JlZzIgPSAvdGhcLndhbGxoYXZlblwuY2NcLyhzbWFsbHxsZylcLyguKik/XC8oLiopXC4uKi9pOwogICAgICAgICAgICBsZXQgcmVzMSA9ICJ3YWxscGFwZXJzL2Z1bGwvd2FsbGhhdmVuJDEuIjsKICAgICAgICAgICAgbGV0IHJlczIgPSAidy53YWxsaGF2ZW4uY2MvZnVsbC8kMi93YWxsaGF2ZW4tJDMuIjsKICAgICAgICAgICAgbGV0IHBuZywgbmU7CiAgICAgICAgICAgIGlmICh0aGlzLm5leHRFbGVtZW50U2libGluZyAmJiB0aGlzLm5leHRFbGVtZW50U2libGluZy5uZXh0RWxlbWVudFNpYmxpbmcpIHsKICAgICAgICAgICAgICAgIG5lID0gdGhpcy5uZXh0RWxlbWVudFNpYmxpbmcubmV4dEVsZW1lbnRTaWJsaW5nOwogICAgICAgICAgICAgICAgaWYgKG5lLmNsYXNzTmFtZSAhPSAidGh1bWItaW5mbyIpIG5lID0gbnVsbDsKICAgICAgICAgICAgICAgIGVsc2UgcG5nID0gISFuZS5xdWVyeVNlbGVjdG9yKCcucG5nJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHNyY1JlZzEudGVzdCh0aGlzLnNyYykpIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZSA/IHRoaXMuc3JjLnJlcGxhY2Uoc3JjUmVnMSwgcmVzMSArIChwbmcgPyAicG5nIiA6ICJqcGciKSkgOiBbdGhpcy5zcmMucmVwbGFjZShzcmNSZWcxLCByZXMxICsgImpwZyIpLCB0aGlzLnNyYy5yZXBsYWNlKHNyY1JlZzEsIHJlczEgKyAicG5nIildOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzcmNSZWcyLnRlc3QodGhpcy5zcmMpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmUgPyB0aGlzLnNyYy5yZXBsYWNlKHNyY1JlZzIsIHJlczIgKyAocG5nID8gInBuZyIgOiAianBnIikpIDogW3RoaXMuc3JjLnJlcGxhY2Uoc3JjUmVnMiwgcmVzMiArICJqcGciKSwgdGhpcy5zcmMucmVwbGFjZShzcmNSZWcyLCByZXMyICsgInBuZyIpXTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogImxvZnRlciIsCiAgICAgICAgdXJsOiAvbG9mdGVyXC4vLAogICAgICAgIGdldEltYWdlOiBmdW5jdGlvbihhKSB7CiAgICAgICAgICAgIGlmKGEgJiYgYS5ocmVmICYmIGEuaGFzQXR0cmlidXRlKCJiaWdpbWdzcmMiKSl7CiAgICAgICAgICAgICAgICByZXR1cm4gYS5nZXRBdHRyaWJ1dGUoImJpZ2ltZ3NyYyIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0aGlzLnNyYy5yZXBsYWNlKC9cPy4qL2ksIiIpOwogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogInNvaHUiLAogICAgICAgIHVybDogLyhzb2h1fHNvaHVjcylcLmNvbS8sCiAgICAgICAgcjogLyhzb2h1Y3NcLmNvbVwvKS4qXC8oaW1hZ2VzXC98b3NcLykvaSwKICAgICAgICBzOiAiJDEkMiIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIm1vZWdpcmwiLAogICAgICAgIHVybDogLyhtb2VnaXJsfG1lbmduaWFuZylcLm9yZy8sCiAgICAgICAgcjogLyhjb21tb24pXC90aHVtYiguKilcL1teXC9dKy9pLAogICAgICAgIHM6ICIkMSQyIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiZmFuZm91IiwKICAgICAgICB1cmw6IC9mYW5mb3VcLmNvbS8sCiAgICAgICAgcjogL0AuKy9pLAogICAgICAgIHM6ICIiCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJtZWl0dWRhdGEiLAogICAgICAgIHVybDogL21laXBhaVwuY29tLywKICAgICAgICByOiAvIXRodW1iLisvaSwKICAgICAgICBzOiAiIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAibWFmZW5nd28iLAogICAgICAgIHVybDogL21hZmVuZ3dvXC5jbi8sCiAgICAgICAgcjogL1w/aW1hZ2VNb2dyLiovaSwKICAgICAgICBzOiAiIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiZGlzY29yZGFwcCIsCiAgICAgICAgdXJsOiAvKGRpc2NvcmRhcHBcLnxkaXNjb3JkXC4pKGNvbXxuZXQpLywKICAgICAgICByOiBbL1w/d2lkdGg9XGQrJmhlaWdodD1cZCskL2ksIC8uKlwvZXh0ZXJuYWxcLy4qXC8oaHR0cHM/KVwvKC4qKVw/Zm9ybWF0LiovLCAvbWVkaWFcLmRpc2NvcmRhcHBcLm5ldC9dLAogICAgICAgIHM6IFsiIiwgIiQxOi8vJDIiLCAiY2RuLmRpc2NvcmRhcHAuY29tIl0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIuaOqOeJuSIsCiAgICAgICAgdXJsOiAvaHR0cHM6XC9cLyh3d3dcLik/KHh8dHdpdHRlcilcLmNvbXxwYnNcLnR3aW1nXC5jb20vLAogICAgICAgIGRlc2NyaXB0aW9uOiBbIi4vLi4iLCAiYXJpYS1sYWJlbCJdLAogICAgICAgIGdldEltYWdlOiBmdW5jdGlvbihhLCBwKXsKICAgICAgICAgICAgbGV0IG5ld3NyYyA9IHRoaXMuc3JjLnJlcGxhY2UoIl9ub3JtYWwuIiwiLiIpLnJlcGxhY2UoIl8yMDB4MjAwLiIsIi4iKS5yZXBsYWNlKCJfbWluaS4iLCIuIikucmVwbGFjZSgiX2JpZ2dlci4iLCIuIikucmVwbGFjZSgvX3hcZCtcLi8sIi4iKTsKICAgICAgICAgICAgaWYgKG5ld3NyYyAhPSB0aGlzLnNyYykgcmV0dXJuIG5ld3NyYzsKICAgICAgICAgICAgaWYgKC9cLnN2ZyQvLnRlc3QobmV3c3JjKSkgcmV0dXJuOwogICAgICAgICAgICBuZXdzcmM9bmV3c3JjLnJlcGxhY2UoL1w/Zm9ybWF0PS9pLCAiLiIpLnJlcGxhY2UoL1wmbmFtZT0vaSwgIjoiKS5yZXBsYWNlKC9cLig/PVteXC5cL10qJCkvLCAiP2Zvcm1hdD0iKS5yZXBsYWNlKCAvKDpsYXJnZXw6bWVkaXVtfDpzbWFsbHw6b3JpZ3w6dGh1bWJ8OltcZHhdKykvaSwgIiIpOwogICAgICAgICAgICBpZiAobmV3c3JjICE9IHRoaXMuc3JjKSB7CiAgICAgICAgICAgICAgICBpZiAoYSAmJiBhLnJvbGUgPT0gJ2xpbmsnKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gYS5ocmVmLm1hdGNoKC9cLyhbXlwvXSspXC9zdGF0dXNcLyhbXlwvXSspXC9waG90b1wvKFxkKykvKTsKICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSBwWzE0XSAmJiBwWzE0XS5xdWVyeVNlbGVjdG9yKCd0aW1lJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsdCA9IG1hdGNoWzFdICsgIiAtICIgKyB0aW1lLmlubmVyVGV4dCArICJfIiArIG1hdGNoWzNdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG5ld3NyYysiJm5hbWU9b3JpZyI7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGV4dDogZnVuY3Rpb24odGFyZ2V0KSB7CiAgICAgICAgICAgIGlmKHRhcmdldC5wYXJlbnROb2RlICYmIHRhcmdldC5wYXJlbnROb2RlLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpewogICAgICAgICAgICAgICAgbGV0IGltZ3M9dGFyZ2V0LnBhcmVudE5vZGUucHJldmlvdXNFbGVtZW50U2libGluZy5xdWVyeVNlbGVjdG9yQWxsKCJpbWciKTsKICAgICAgICAgICAgICAgIGlmKGltZ3MubGVuZ3RoPT0xKXJldHVybiBpbWdzWzBdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIkZhbmRvbSIsCiAgICAgICAgdXJsOiAvXGJmYW5kb21cLmNvbS8sCiAgICAgICAgcjogWy9zY2FsZVwtdG9cLXdpZHRoXC1kb3duXC9cZCsvaSwKICAgICAgICAgICAgL3NtYXJ0XC93aWR0aFwvXGQrXC9oZWlnaHRcL1xkKy9pXSwKICAgICAgICBzOiBbIiIsIiJdCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJ5YW5kZSIsCiAgICAgICAgdXJsOiAveWFuZGVcLnJlfGtvbmFjaGFuXC4obmV0fGNvbSkvLAogICAgICAgIGdldEltYWdlOiBmdW5jdGlvbihhLCBwKSB7CiAgICAgICAgICAgIGlmKHBbMV0gJiYgcFsxXS5uZXh0U2libGluZyAmJiBwWzFdLm5leHRTaWJsaW5nLmNsYXNzTGlzdCAmJgogICAgICAgICAgICAgICBwWzFdLm5leHRTaWJsaW5nLmNsYXNzTGlzdC5jb250YWlucygibGFyZ2VpbWciKSl7CiAgICAgICAgICAgICAgICByZXR1cm4gcFsxXS5uZXh0U2libGluZy5ocmVmLnJlcGxhY2UoL1wvKHByZXZpZXd8anBlZ3xzYW1wbGUpXC8oLipcLilqcGckLywgIi9pbWFnZS8kMnBuZyIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0aGlzLnNyYy5yZXBsYWNlKC9cLyhwcmV2aWV3fGpwZWd8c2FtcGxlKVwvKC4qXC4panBnJC8sICIvaW1hZ2UvJDJwbmciKTsKICAgICAgICB9CiAgICB9LAogICAgewogICAgICAgIG5hbWU6Iue7heWjq+a8q+eUuyIsCiAgICAgICAgdXJsOi9eaHR0cHM/OlwvXC8od3d3XC4pP3duYWNnXC4vLAogICAgICAgIHNyYzogL1wvXC90KFx3XC5xeS4qZGF0YVwvKXRcLy8sCiAgICAgICAgcjogL1wvXC90KFx3XC5xeS4qZGF0YVwvKXRcLy8sCiAgICAgICAgczogIi8vaW1nJDEiLAogICAgICAgIHhocjogewogICAgICAgICAgICB1cmw6IGZ1bmN0aW9uKGEsIHApIHsKICAgICAgICAgICAgICAgIGlmIChwICYmIHBbMV0gJiYgcFsxXS5jbGFzc05hbWUgPT09ICdwaWNfYm94IHRiJyAmJiBhICYmIGEuaHJlZikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmhyZWY7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHF1ZXJ5OiAnI3BpY2FyZWEnCiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiJ4bHlzYXVjIiwKICAgICAgICB1cmw6L15odHRwcz86XC9cL3hseXNhdWNcLmNvbVwvLywKICAgICAgICByOiAvXC94XC8oXGQrXC5qcGcpLywKICAgICAgICBzOiAiL2QvJDEiLAogICAgICAgIGV4dDogZnVuY3Rpb24odGFyZ2V0KSB7CiAgICAgICAgICAgIGlmICh0YXJnZXQucGFyZW50Tm9kZS5jbGFzc05hbWUgPT09ICdpbWdiZycgfHwgdGFyZ2V0LmNsYXNzTmFtZSA9PT0gJ3BwX2hvdmVyQ29udGFpbmVyJyl7CiAgICAgICAgICAgICAgICBsZXQgaW1nID0gdGFyZ2V0LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcigiaW1nIik7CiAgICAgICAgICAgICAgICBpZiAoaW1nKSByZXR1cm4gaW1nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIkU2MjEiLAogICAgICAgIHVybDogL1xiZTYyMVwubmV0LywKICAgICAgICBnZXRJbWFnZTogZnVuY3Rpb24oYSwgcCkgewogICAgICAgICAgICBpZihwWzJdICYmIHBbMl0uZGF0YXNldC5maWxlVXJsKXsKICAgICAgICAgICAgICAgIHJldHVybiBwWzJdLmRhdGFzZXQuZmlsZVVybDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGhpcy5zcmM7CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiUGludGVyZXN0IiwKICAgICAgICB1cmw6IC9cYnBpbnRlcmVzdFwuY29tLywKICAgICAgICBnZXRJbWFnZTogZnVuY3Rpb24oYSwgcCkgewogICAgICAgICAgICBpZih0aGlzLnNyY3NldCl7CiAgICAgICAgICAgICAgICB2YXIgc3Jjcz10aGlzLnNyY3NldC5zcGxpdCgiLCIpLG1pblNpemU9MCxuZXdTcmM7CiAgICAgICAgICAgICAgICBzcmNzLmZvckVhY2goc3JjaT0+ewogICAgICAgICAgICAgICAgICAgIGxldCBzcmNJbmZvPXNyY2kudHJpbSgpLnNwbGl0KCIgIiksY3VyU2l6ZT1wYXJzZUludChzcmNJbmZvWzFdKTsKICAgICAgICAgICAgICAgICAgICBpZihzcmNJbmZvWzFdICYmIChjdXJTaXplPm1pblNpemUgfHwgbWluU2l6ZT09MCkpewogICAgICAgICAgICAgICAgICAgICAgICBtaW5TaXplPWN1clNpemU7CiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NyYz1zcmNJbmZvWzBdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYobmV3U3JjKXJldHVybiBuZXdTcmM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3JjLnJlcGxhY2UoL1wvXGQreFwvL2ksICIvNzM2eC8iKTsKICAgICAgICB9CiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJaaGlzaGVqaSIsCiAgICAgICAgdXJsOiAvXGJ6aGlzaGVqaVwuY29tLywKICAgICAgICByOiAvdGh1bWJuYWlsXC8uKi9pLAogICAgICAgIHM6ICIiCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJpbWdib3giLAogICAgICAgIHNyYzogL1xiaW1nYm94XC5jb20vLAogICAgICAgIHI6IC90aHVtYnMoXGRcLmltZ2JveC4qKV90XC4vaSwKICAgICAgICBzOiAiaW1hZ2VzJDFfby4iCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJUd2l0Y2giLAogICAgICAgIHVybDogL15odHRwczpcL1wvKHd3d1wudHdpdGNoXC50dlwvfHd3d1wucmVkZGl0XC5jb21cL3JcL1R3aXRjaENsaXBzXC8pLywKICAgICAgICB4aHI6IHsKICAgICAgICAgICAgdXJsOiBmdW5jdGlvbihhLCBwLCB4aHIpIHsKICAgICAgICAgICAgICAgIGlmICghYSkgcmV0dXJuOwogICAgICAgICAgICAgICAgaWYgKCEvdHdpdGNoXC50di8udGVzdChhLmhyZWYpKSByZXR1cm47CiAgICAgICAgICAgICAgICBsZXQgbSA9IGEuaHJlZi5tYXRjaCgvKFwvY2xpcFwvfGNsaXBzXC50d2l0Y2hcLnR2XC8pKFteP117MSx9KS8pOwogICAgICAgICAgICAgICAgaWYgKG0pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc2x1ZyA9IG1bMl07CiAgICAgICAgICAgICAgICAgICAgdmFyIG9wZXJhdGlvbk5hbWVDbGlwID0gIlZpZGVvQWNjZXNzVG9rZW5fQ2xpcCI7CiAgICAgICAgICAgICAgICAgICAgdmFyIG9wZXJhdGlvbk5hbWVMaXZlT3JWT0QgPSAiUGxheWJhY2tBY2Nlc3NUb2tlbiI7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNoYTI1Nkhhc2hDbGlwID0gIjM2Yjg5ZDI1MDdmY2UyOWU1Y2E1NTFkZjc1NmQyN2MxY2ZlMDc5ZTI2MDk2NDJiNDM5MGFhNGMzNTc5NmViMTEiOwogICAgICAgICAgICAgICAgICAgIHZhciBzaGEyNTZIYXNoTGl2ZU9yVk9EID0gIjA4MjgxMTlkZWQxYzEzNDc3OTY2NDM0ZTE1ODAwZmY1N2RkYWNmMTNiYTE5MTFjMTI5ZGMyMjAwNzA1YjA3MTIiOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBgaHR0cHM6Ly9ncWwudHdpdGNoLnR2L2dxbCNwe3sib3BlcmF0aW9uTmFtZSI6IiR7b3BlcmF0aW9uTmFtZUNsaXB9IiwidmFyaWFibGVzIjp7InNsdWciOiIke3NsdWd9In0sImV4dGVuc2lvbnMiOnsicGVyc2lzdGVkUXVlcnkiOnsidmVyc2lvbiI6MSwic2hhMjU2SGFzaCI6IiR7c2hhMjU2SGFzaENsaXB9In19fX1gOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBtID0gYS5ocmVmLm1hdGNoKC8oPzptXC58d3d3XC4pP3R3aXRjaFwudHZcLyg/Oig/IWRpcmVjdG9yeXxkb3dubG9hZHN8am9ic3xzdG9yZXx0d2l0Y2hhcnRpc3RzfHR1cmJvfHByaXZhY3kpKFx3KykkfCg/Olx3K1wvKT92aWRlb3NcLyhcZCspKS8pOwogICAgICAgICAgICAgICAgICAgIGlmIChtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgaHR0cHM6Ly9ncWwudHdpdGNoLnR2L2dxbCNwe3sib3BlcmF0aW9uTmFtZSI6IlBsYXliYWNrQWNjZXNzVG9rZW5fVGVtcGxhdGUiLCJxdWVyeSI6InF1ZXJ5IFBsYXliYWNrQWNjZXNzVG9rZW5fVGVtcGxhdGUoJGxvZ2luOiBTdHJpbmchLCAkaXNMaXZlOiBCb29sZWFuISwgJHZvZElEOiBJRCEsICRpc1ZvZDogQm9vbGVhbiEsICRwbGF5ZXJUeXBlOiBTdHJpbmchLCAkcGxhdGZvcm06IFN0cmluZyEpIHsgIHN0cmVhbVBsYXliYWNrQWNjZXNzVG9rZW4oY2hhbm5lbE5hbWU6ICRsb2dpbiwgcGFyYW1zOiB7cGxhdGZvcm06ICRwbGF0Zm9ybSwgcGxheWVyQmFja2VuZDogXFwibWVkaWFwbGF5ZXJcXCIsIHBsYXllclR5cGU6ICRwbGF5ZXJUeXBlfSkgQGluY2x1ZGUoaWY6ICRpc0xpdmUpIHsgICAgdmFsdWUgICAgc2lnbmF0dXJlICAgYXV0aG9yaXphdGlvbiB7IGlzRm9yYmlkZGVuIGZvcmJpZGRlblJlYXNvbkNvZGUgfSAgIF9fdHlwZW5hbWUgIH0gIHZpZGVvUGxheWJhY2tBY2Nlc3NUb2tlbihpZDogJHZvZElELCBwYXJhbXM6IHtwbGF0Zm9ybTogJHBsYXRmb3JtLCBwbGF5ZXJCYWNrZW5kOiBcXCJtZWRpYXBsYXllclxcIiwgcGxheWVyVHlwZTogJHBsYXllclR5cGV9KSBAaW5jbHVkZShpZjogJGlzVm9kKSB7ICAgIHZhbHVlICAgIHNpZ25hdHVyZSAgIF9fdHlwZW5hbWUgIH19IiwidmFyaWFibGVzIjp7ImlzTGl2ZSI6JHttWzFdPyd0cnVlJzonZmFsc2UnfSwibG9naW4iOiIke21bMV18fCcnfSIsImlzVm9kIjp0cnVlLCJ2b2RJRCI6IiR7bVsyXXx8Jyd9IiwicGxheWVyVHlwZSI6InNpdGUiLCJwbGF0Zm9ybSI6IndlYiJ9fX1gOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgaGVhZGVyczogZnVuY3Rpb24odXJsLCB4aHIsIGdldENvb2tpZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsiQ2xpZW50LUlEIjoia2ltbmU3OGt4M25jeDZicmdvNG12NndraTVoMWtvIiwgIlgtRGV2aWNlLUlkIjogZ2V0Q29va2llKCd1bmlxdWVfaWQnKSB8fCBnZXRDb29raWUoJ3VuaXF1ZV9pZF9kdXJhYmxlJykgfHwgJ2Q1NmU4NDYzYzU3YzdjZDcnfQogICAgICAgICAgICB9LAogICAgICAgICAgICBjYWNoZU51bTogMjAsCiAgICAgICAgICAgIHF1ZXJ5OiBmdW5jdGlvbihodG1sLCBkb2MsIHUsIHhocikgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBsZXQgciA9IEpTT04ucGFyc2UoaHRtbCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHIuZGF0YS5jbGlwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzaWduYXR1cmUgPSByLmRhdGEuY2xpcC5wbGF5YmFja0FjY2Vzc1Rva2VuLnNpZ25hdHVyZTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRva2VuID0gci5kYXRhLmNsaXAucGxheWJhY2tBY2Nlc3NUb2tlbi52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHQgPSBKU09OLnBhcnNlKHRva2VuKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNsaXBfdXJpID0gci5kYXRhLmNsaXAudmlkZW9RdWFsaXRpZXNbMF0uc291cmNlVVJMOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZnVsbHNpemVVcmwgPSBjbGlwX3VyaSArICc/c2lnPScgKyBzaWduYXR1cmUgKyAnJnRva2VuPScgKyBlbmNvZGVVUklDb21wb25lbnQodG9rZW4pOwoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt1cmw6IFsidmlkZW86IiArIGZ1bGxzaXplVXJsXSwgY2FwOiAiIn07CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG0gPSB1Lm1hdGNoKC8ibG9naW4iOiIoLio/KSIuKiJ2b2RJRCI6IiguKj8pIi8pOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG9rZW5zID0gci5kYXRhLnN0cmVhbVBsYXliYWNrQWNjZXNzVG9rZW4gfHwgci5kYXRhLnZpZGVvUGxheWJhY2tBY2Nlc3NUb2tlbjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0b2tlbnMpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhleCA9IFsnQScsICdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnMCcsICcxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOSddOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXJsID0gbVsxXSA/ICdhcGkvY2hhbm5lbC9obHMnOiAndm9kJzsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHAgPSBNYXRoLmZsb29yKDk5OTk5OSAqIE1hdGgucmFuZG9tKCkpOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgaWQgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzMjsgaSsrKSBpZCArPSBoZXhbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTYpXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGB2aWRlbzpodHRwczovL3VzaGVyLnR0dm53Lm5ldC8ke3VybH0vJHttWzFdfHxtWzJdfS5tM3U4P2FjbWI9ZXlKQmNIQldaWEp6YVc5dUlqb2lZamxoTmpVNFpXTXRNVGN5TVMwMFkyRmpMVGhrTWpndFpqazBObUptWTJFM1l6VXdJbjAlM0QmYWxsb3dfc291cmNlPXRydWUmcD0ke3B9JnBsYXRmb3JtPXdlYiZwbGF5X3Nlc3Npb25faWQ9JHtpZH0mc2lnPSR7dG9rZW5zLnNpZ25hdHVyZX0mc3VwcG9ydGVkX2NvZGVjcz1hdjEsaDI2NCZ0b2tlbj0ke2VuY29kZVVSSUNvbXBvbmVudCh0b2tlbnMudmFsdWUpfSZ0cmFuc2NvZGVfbW9kZT1jYnJfdjFgOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggeyB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJzdHJlYW1haW4iLAogICAgICAgIHVybDogL15odHRwczpcL1wvKHN0cmVhbWFpblwuY29tXC98d3d3XC5yZWRkaXRcLmNvbVwvKS8sCiAgICAgICAgeGhyOiB7CiAgICAgICAgICAgIHVybDogL15odHRwczpcL1wvc3RyZWFtYWluXC5jb21cLy4qXC93YXRjaCQvLAogICAgICAgICAgICBxdWVyeTogJyNwbGF5Ym9iLXZpZGVvJwogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIlJlZGRpdCIsCiAgICAgICAgdXJsOiAvXGJyZWRkaXRcLmNvbXxyZWRkXC5pdC8sCiAgICAgICAgZ2V0SW1hZ2U6IGZ1bmN0aW9uKGEsIHApIHsKICAgICAgICAgICAgaWYgKGEgJiYgL3Jldmlld1wucmVkZFwuaXQvLnRlc3QoYS5ocmVmKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGEuaHJlZjsKICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNyY3NldCkgewogICAgICAgICAgICAgICAgbGV0IHNyY3MgPSB0aGlzLnNyY3NldC5zcGxpdCgvW3h3XSxccyovaSk7CiAgICAgICAgICAgICAgICBsZXQgbWF4U2l6ZSA9IDA7CiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gIiI7CiAgICAgICAgICAgICAgICBzcmNzLmZvckVhY2goc3Jjc2V0ID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgc3JjQXJyID0gc3Jjc2V0LnNwbGl0KCIgIik7CiAgICAgICAgICAgICAgICAgICAgbGV0IGN1clNpemUgPSBwYXJzZUludChzcmNBcnJbMV0pOwogICAgICAgICAgICAgICAgICAgIGlmIChzcmNBcnJbMF0uaW5kZXhPZigiP3dpZHRoIikgPT0gLTEpIHJldHVybiBzcmNBcnJbMF07CiAgICAgICAgICAgICAgICAgICAgaWYgKGN1clNpemUgPiBtYXhTaXplKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1heFNpemUgPSBjdXJTaXplOwogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBzcmNBcnJbMF07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5zcmMuaW5kZXhPZigiP3dpZHRoIikgIT09IC0xKSByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICB9IGVsc2UgaWYgKC9eaHR0cHM/OlwvXC9wcmV2aWV3XC4vLnRlc3QodGhpcy5zcmMpKXsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNyYy5yZXBsYWNlKCJwcmV2aWV3IiwgImkiKS5yZXBsYWNlKC9cPy4qLywgIiIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0aGlzLnNyYzsKICAgICAgICB9LAogICAgICAgIGdldEV4dFNyYzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmdldEF0dHJpYnV0ZSgicmVhc29uIikgPT0gIm5zZnciKSB7CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQpIHJldHVybjsKICAgICAgICAgICAgICAgIGxldCBpbWcgPSB0aGlzLmZpcnN0RWxlbWVudENoaWxkLnF1ZXJ5U2VsZWN0b3IoImltZyIpOwogICAgICAgICAgICAgICAgaWYgKCFpbWcpIHJldHVybjsKICAgICAgICAgICAgICAgIHJldHVybiBpbWcuc3JjLnJlcGxhY2UoL15odHRwczpcL1wvcHJldmlld1wucmVkZFwuaXRcLyguKilcPy4qLywgImh0dHBzOi8vaS5yZWRkLml0LyQxIik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHhocjogewogICAgICAgICAgICB1cmw6IGZ1bmN0aW9uKGEsIHAsIHNlbGYpIHsKICAgICAgICAgICAgICAgIGxldCBhSHJlZiA9IGEgJiYgYS5ocmVmOwogICAgICAgICAgICAgICAgaWYgKC9cL1wvdi5yZWRkXC5pdFwvXHcrXC8/JC8udGVzdChhSHJlZikpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYUhyZWYgKyAnL0RBU0hQbGF5bGlzdC5tcGQnOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvXmh0dHBzOlwvXC93d3dcLnJlZGRpdFwuY29tXC9nYWxsZXJ5XC8vLnRlc3QoYUhyZWYpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFIcmVmLnJlcGxhY2UoLy4qKHJlZGRpdFwuY29tXC8pZ2FsbGVyeVwvKFtcZGEtel0rKS4qLywgImh0dHBzOi8vd3d3LiQxYnlfaWQvdDNfJDIuanNvbiIpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvcmVkZ2lmc1wuY29tXC8vLnRlc3QoYUhyZWYpKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXBpVXJsID0gJ2h0dHBzOi8vYXBpLnJlZGdpZnMuY29tL3YyJzsKICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGYucmVkZ2lmc1Rva2VuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVkZ2lmc1Rva2VuID0gIjEiOwogICAgICAgICAgICAgICAgICAgICAgICBmZXRjaChgJHthcGlVcmx9L2F1dGgvdGVtcG9yYXJ5YCkudGhlbihyZXMgPT4gcmVzLmpzb24oKSkudGhlbigoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS50b2tlbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVkZ2lmc1Rva2VuID0gZGF0YS50b2tlbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlVcmwgKyAiL2dpZnMvIiArIGFIcmVmLnJlcGxhY2UoLy4qcmVkZ2lmcy5jb21cLyguLlwvKT8oXHcrXC8pPyhcdyspKD86XC5cdyspPy8sICckMycpOzsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocFsxXSAmJiBwWzFdLmNsYXNzTGlzdCAmJiBwWzFdLmNsYXNzTGlzdC5jb250YWlucygic2VhcmNoLXJlc3VsdCIpKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmsgPSBwWzFdLnF1ZXJ5U2VsZWN0b3IoImEuc2VhcmNoLWxpbmsiKTsKICAgICAgICAgICAgICAgICAgICBpZiAobGluayAmJiBsaW5rLmhyZWYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC9cL1wvdi5yZWRkXC5pdFwvXHcrXC8/JC8udGVzdChsaW5rLmhyZWYpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGluay5ocmVmICsgJy9EQVNIUGxheWxpc3QubXBkJzsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvXmh0dHBzOlwvXC93d3dcLnJlZGRpdFwuY29tXC9nYWxsZXJ5XC8vLnRlc3QobGluay5ocmVmKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpbmsuaHJlZjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYSAmJiB0aGlzLnNyYyAmJiBwWzJdICYmIHBbMl0ubm9kZU5hbWUgPT0gIkZBQ0VQTEFURS1JTUciKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuaHJlZjsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocFszXSkgewogICAgICAgICAgICAgICAgICAgIGxldCBhID0gcFszXS5xdWVyeVNlbGVjdG9yKCJhLmdyb3VwIik7CiAgICAgICAgICAgICAgICAgICAgaWYgKGEpIHJldHVybiBhLmhyZWY7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihwWzNdLnByZXZpb3VzRWxlbWVudFNpYmxpbmcgJiYgcFszXS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmdldEF0dHJpYnV0ZSgnc2xvdCcpID09ICdmdWxsLXBvc3QtbGluaycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBbM10ucHJldmlvdXNFbGVtZW50U2libGluZy5ocmVmOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgaGVhZGVyczogKHVybCwgc2VsZikgPT4gewogICAgICAgICAgICAgICAgaWYgKC9yZWRnaWZzXC5jb21cLy8udGVzdCh1cmwpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgQXV0aG9yaXphdGlvbjpgQmVhcmVyICR7c2VsZi5yZWRnaWZzVG9rZW59YCB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBxdWVyeTogZnVuY3Rpb24oaHRtbCwgZG9jLCB1cmwpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKC9yZWRnaWZzXC5jb21cLy8udGVzdCh1cmwpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXRhOwogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoaHRtbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmdpZikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuZ2lmLnVybHMuZ2lmIHx8IGRhdGEuZ2lmLnVybHMuaGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC9cL2J5X2lkXC8vLnRlc3QodXJsKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGh0bWwpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGRhdGEuZGF0YS5jaGlsZHJlblswXS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGRhdGEuZ2FsbGVyeV9kYXRhICYmIGRhdGEuZ2FsbGVyeV9kYXRhLml0ZW1zIHx8IFtdKS5tYXAoZnVuY3Rpb24oYywgaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHU9ZGF0YS5tZWRpYV9tZXRhZGF0YVtjLm1lZGlhX2lkXS5zCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh1LnUgPyB1LnUucmVwbGFjZSgvcHJldmlldyhcLnJlZGQuaXRcL1teP10rKS4qLywgJ2kkMScpIDogKHUubXA0ID8gdS5tcDQgKyAnI21wNCcgOiB1LmdpZikpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICghaSA/ICdbJyArIG5ldyBEYXRlKGRhdGEuY3JlYXRlZF91dGMqMWUzKS50b0xvY2FsZVN0cmluZygpICsgJyB8ICcgKyBkYXRhLnRpdGxlICsgJ10gJyA6ICcnKSArIChjLmNhcHRpb24gfHwgJycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvXC9yXC8vLnRlc3QodXJsKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1ncyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCJpbWdbc3JjKj0ncHJldmlldy5yZWRkLml0LyddLGltZ1tkYXRhLWxhenktc3JjXj0naHR0cHM6Ly9wcmV2aWV3LnJlZGQuaXQvJ10iKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVybHMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGltZ3MsIGltZyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWltZy5zcmMgJiYgaW1nLmdldEF0dHJpYnV0ZSgiZGF0YS1sYXp5LXNyYyIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9IGltZy5nZXRBdHRyaWJ1dGUoImRhdGEtbGF6eS1zcmMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaW1nLnNyY3NldCAmJiBpbWcuZ2V0QXR0cmlidXRlKCJkYXRhLWxhenktc3Jjc2V0IikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3Jjc2V0ID0gaW1nLmdldEF0dHJpYnV0ZSgiZGF0YS1sYXp5LXNyY3NldCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltZy5zcmNzZXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3JjcyA9IGltZy5zcmNzZXQuc3BsaXQoL1t4d10sXHMqL2kpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXhTaXplID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Jjcy5mb3JFYWNoKHNyY3NldCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcmNBcnIgPSBzcmNzZXQuc3BsaXQoIiAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1clNpemUgPSBwYXJzZUludChzcmNBcnJbMV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3JjQXJyWzBdLmluZGV4T2YoIj93aWR0aCIpID09IC0xKSByZXR1cm4gdXJscy5wdXNoKHNyY0FyclswXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJTaXplID4gbWF4U2l6ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4U2l6ZSA9IGN1clNpemU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBzcmNBcnJbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1nLnNyYy5pbmRleE9mKCI/d2lkdGgiKSAhPT0gLTEpIHJldHVybiB1cmxzLnB1c2gocmVzdWx0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybHMucHVzaChpbWcuc3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cmxzLmxlbmd0aCkgcmV0dXJuIHVybHM7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBqc29uID0gZG9jLnF1ZXJ5U2VsZWN0b3IoIltwYWNrYWdlZC1tZWRpYS1qc29uXSIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lZGlhSnNvbiA9IGpzb24uZ2V0QXR0cmlidXRlKCJwYWNrYWdlZC1tZWRpYS1qc29uIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVkaWFKc29uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UobWVkaWFKc29uKS5wbGF5YmFja01wNHMucGVybXV0YXRpb25zLnBvcCgpLnNvdXJjZS51cmw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgeG1sRG9jID0gKG5ldyBET01QYXJzZXIoKSkucGFyc2VGcm9tU3RyaW5nKGh0bWwsICdhcHBsaWNhdGlvbi94bWwnKTsKICAgICAgICAgICAgICAgICAgICB2YXIgaGlnaGVzdFJlcyA9IFtdLnNsaWNlLmNhbGwoeG1sRG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ1JlcHJlc2VudGF0aW9uW2ZyYW1lUmF0ZV0nKSkKICAgICAgICAgICAgICAgICAgICAuc29ydChmdW5jdGlvbiAocjEsIHIyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3MSA9IHBhcnNlSW50KHIxLmdldEF0dHJpYnV0ZSgnd2lkdGgnKSksIHcyID0gcGFyc2VJbnQocjIuZ2V0QXR0cmlidXRlKCd3aWR0aCcpKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHcxID4gdzIgPyAtMSA6ICh3MSA8IHcyID8gMSA6IDApOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmZpbmQoZnVuY3Rpb24gKHJlcHIpIHsgcmV0dXJuICEhcmVwci5xdWVyeVNlbGVjdG9yKCdCYXNlVVJMJyk7IH0pOwoKICAgICAgICAgICAgICAgICAgICBpZiAoaGlnaGVzdFJlcykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmFzZVVybCA9IGhpZ2hlc3RSZXMucXVlcnlTZWxlY3RvcignQmFzZVVSTCcpLnRleHRDb250ZW50LnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJhc2VVcmwuaW5kZXhPZignLy8nKSAhPT0gLTEgPyBiYXNlVXJsIDogdXJsLnJlcGxhY2UoJ0RBU0hQbGF5bGlzdC5tcGQnLCBiYXNlVXJsKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiaW1ndXJMaW5rIiwKICAgICAgICB4aHI6IHsKICAgICAgICAgICAgdXJsOiBmdW5jdGlvbihhLCBwKSB7CiAgICAgICAgICAgICAgICBpZiAoIWEpIHJldHVybjsKICAgICAgICAgICAgICAgIGNvbnN0IGltZ3VyUmVnID0gL15odHRwcz86XC9cLyg/Oig/OltpbV0uKT8oPzppbWd1ci4oPzpjb218aW8pfGZpbG1vdC4oPzpjb218b3JnKSlcLysoPzooPzooYXxnYWxsZXJ5KD8hXC9yYW5kb218XC9jdXN0b20pfHQoPzpvcGljKT9cL1teL10rKXxyXC9bXi9dKylcLyg/OlteLS9dKy0pKihbXldfXXs1fSg/OlteX1ddezJ9KT8pfCg/OlteV19dezV9KD86W15XX117Mn0pP1ssJl0pK1teX1ddezV9KD86W15XX117Mn0pPykpLiovOwogICAgICAgICAgICAgICAgaWYgKGEuaHJlZi5tYXRjaCAmJiBpbWd1clJlZy50ZXN0KGEuaHJlZikpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtID0gYS5ocmVmLm1hdGNoKGltZ3VyUmVnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbVsxXSA/ICdodHRwczovL2ltZ3VyLmNvbS8nICsgKG1bMV0gPT0gJ2EnID8gJ2EvJyArIG1bMl0gKyAnL2VtYmVkJyA6IG1bMV0gKyAnLycgKyBtWzJdICsgJy9oaXQuanNvbicpIDogbVswXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgcXVlcnk6IGZ1bmN0aW9uKGh0bWwsIGRvYywgdXJsKSB7CiAgICAgICAgICAgICAgICBpZiAoL15odHRwczpcL1wvaW1ndXJcLmNvbVwvLy50ZXN0KHVybCkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgY2FwID0gW10sIHVybHMgPSBbXSwgaW0sIGcsIGMsIHgsIGksIHQsIHUsIGwgPSAnLy9pLmltZ3VyLmNvbS8nLCBwNDA0PSc0MDQgcGFnZTwvdGl0bGU+JzsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGh0bWwgPT0gJ3N0cmluZycgJiYgaHRtbFswXSE9J3snKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihodG1sLmxhc3RJbmRleE9mKHA0MDQsIDMwMCkgPiAtMSkgdGhyb3cgdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSBodG1sLm1hdGNoKC8oPzphbGJ1bXxpbWFnZSlccypbOj1dICsoW15cblxyXSspLC8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IEpTT04ucGFyc2UoeFsxXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSB3aW5kb3cudDsgaWYgKHdpbmRvdy50KSBkZWxldGUgd2luZG93LnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXQmJid0aXRsZScgaW4geCl0ID0geDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguYWxidW1faW1hZ2VzJiYoeD14LmFsYnVtX2ltYWdlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LmltYWdlcyYmKHg9eC5pbWFnZXMpfHx4Lml0ZW1zJiYoeD14Lml0ZW1zKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw9SlNPTi5wYXJzZShodG1sKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGh0bWwuYWxidW0pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg9aHRtbC5hbGJ1bQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQ9e3RpdGxlOngudGl0bGUsIGRlc2NyaXB0aW9uOiB4LmRlc2NyaXB0aW9ufQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg9eC5pbWFnZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeD1odG1sLmRhdGEuaW1hZ2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeC5pc19hbGJ1bSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0PXt0aXRsZTp4LnRpdGxlLCBkZXNjcmlwdGlvbjogeC5kZXNjcmlwdGlvbn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHguYWxidW1faW1hZ2VzLmNvdW50ICE9IHguYWxidW1faW1hZ2VzLmltYWdlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy50PXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4PXguYWxidW1faW1hZ2VzLmltYWdlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cudCkgZGVsZXRlIHdpbmRvdy50OwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXgpdGhyb3cgaHRtbC5sYXN0SW5kZXhPZihwNDA0LCAzMDApID4gLTE7CgogICAgICAgICAgICAgICAgICAgICAgICB0ID0gdCAmJiBbdC50aXRsZSwgdC5kZXNjcmlwdGlvbl0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oJyAtICcpIHx8ICExCiAgICAgICAgICAgICAgICAgICAgICAgIHggPSBBcnJheS5pc0FycmF5KHgpP3g6W3hdCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB4Lmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbSA9IHhbaV0uaW1hZ2V8fHhbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gW2ltLnRpdGxlLCBpbS5jYXB0aW9uLCBpbS5kZXNjcmlwdGlvbl0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oJyAtICcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpICYmIHQgJiYgdCE9YykgYz0nWycrdCsnXSAnICsgYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltLmV4dCA9IGltLmV4dCB8fCB4W2ldLmxpbmtzLm9yaWdpbmFsLm1hdGNoKC9cLlteLl0rJC8pWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9ICgnJytpbS5hbmltYXRlZCk9PSd0cnVlJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGwgKyBpbS5oYXNoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJscy5wdXNoKCFnICYmIGltLndpZHRoIDw9IDEyMDAgJiYgaW0uaGVpZ2h0IDw9IDEyMDAgPyB1ICsgaW0uZXh0IDogKGcgPyBbdSArICcubXA0JywgdSArICcuZ2lmJ10gOiBbJyMnICsgdSArIGltLmV4dCwgdSArICdoJyArIGltLmV4dF0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcC5wdXNoKGMpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHt9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVybHMubGVuZ3RoID8ge3VybDogdXJscywgY2FwOiBjYXB9IDogbnVsbAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiUnVsZTM0aGVudGFpIiwKICAgICAgICB1cmw6IC9cYnJ1bGUzNGhlbnRhaVwubmV0LywKICAgICAgICByOiAiL190aHVtYnMvIiwKICAgICAgICBzOiAiL19pbWFnZXMvIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiUnVsZTM0IiwKICAgICAgICB1cmw6IC9cYihydWxlMzRcLnh4eHxyZWFsYm9vcnVcLmNvbSkvLAogICAgICAgIHNyYzogL1wvKHRodW1ibmFpbHN8c2FtcGxlcylcLyguKilcLyh0aHVtYm5haWx8c2FtcGxlKV8vaSwKICAgICAgICB4aHI6IHsKICAgICAgICAgICAgdXJsOiBmdW5jdGlvbihhLCBwKSB7CiAgICAgICAgICAgICAgICBpZiAoIWEpIHJldHVybjsKICAgICAgICAgICAgICAgIGNvbnN0IHJlID0gL15odHRwcz86XC9cLyg/Ond3d1wuKT8oPzoocmVhbGJvb3J1XC5jb218cnVsZTM0XC54eHgpKVwvaW5kZXhcLnBocFw/cGFnZT1wb3N0JnM9dmlldyZpZD0oXGQrKS4qLzsKICAgICAgICAgICAgICAgIGNvbnN0IG0gPSBhLmhyZWYubWF0Y2gocmUpOwogICAgICAgICAgICAgICAgaWYgKG0pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbVsxXSA9PSAicnVsZTM0Lnh4eCIgPyBgaHR0cHM6Ly9hcGkuJHttWzFdfS9pbmRleC5waHA/cGFnZT1kYXBpJnM9cG9zdCZxPWluZGV4JmlkPSR7bVsyXX0manNvbj0xYCA6IGBodHRwczovLyR7bVsxXX0vaW5kZXgucGhwP3BhZ2U9ZGFwaSZzPXBvc3QmcT1pbmRleCZpZD0ke21bMl19Jmpzb249MWA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHF1ZXJ5OiBmdW5jdGlvbihodG1sLCBkb2MsIHVybCkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBvID0gSlNPTi5wYXJzZShodG1sKTsKICAgICAgICAgICAgICAgICAgICBsZXQgdXJsID0gb1swXTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXJsLmZpbGVfdXJsIHx8IGBodHRwczovLyR7bG9jYXRpb24uaG9zdG5hbWV9L2ltYWdlcy8ke3VybC5kaXJlY3Rvcnl9LyR7dXJsLmltYWdlfWA7CiAgICAgICAgICAgICAgICB9IGNhdGNoIHsgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiUGhvdG9zaWdodCIsCiAgICAgICAgdXJsOiAvXGJwaG90b3NpZ2h0XC5ydS8sCiAgICAgICAgcjogLyhjZG55XC5kZS4qXC8pdFwvL2ksCiAgICAgICAgczogIiQxeC8iCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJYaWFvaG9uZ3NodSIsCiAgICAgICAgdXJsOiAvXGJ4aWFvaG9uZ3NodVwuY29tLywKICAgICAgICBleHQ6IGZ1bmN0aW9uKHRhcmdldCkgewogICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTmFtZSA9PSAnY2hhbmdlLXBpYycpIHsKICAgICAgICAgICAgICAgIHZhciBpbWdzPXRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJyksaT0wOwogICAgICAgICAgICAgICAgZm9yKGk9MDtpPGltZ3MubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAgICAgaWYoaW1nc1tpXS5zdHlsZS5kaXNwbGF5IT0ibm9uZSIpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbWdzW2ldLmNoaWxkTm9kZXNbMF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRhcmdldDsKICAgICAgICB9LAogICAgICAgIHI6IFsvXC93XC9cZCtcLyhoXC9cZCtcLyk/KHFcL1xkK1wvKT8vaSwgLy4qXC54aHNjZG5cLmNvbS4qXC8oXHcrKSghLip8JCkvaV0sCiAgICAgICAgczogWyIvdy8xMDgwLyIsICJodHRwczovL3Nucy1pbWctYmQueGhzY2RuLmNvbS8kMSJdCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJZb3V0dWJlIiwKICAgICAgICB1cmw6IC9cYnlvdXR1YmVcLmNvbS8sCiAgICAgICAgZXh0OiBmdW5jdGlvbih0YXJnZXQpIHsKICAgICAgICAgICAgaWYgKHRhcmdldC50YWdOYW1lID09ICJ5dGQtdGh1bWJuYWlsIiB8fCB0YXJnZXQuaWQgPT0gInRodW1ibmFpbC1jb250YWluZXIiKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoImltZyIpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBnZXRFeHRTcmM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBsZXQgbmV3c3JjID0gIiI7CiAgICAgICAgICAgIGlmICh0aGlzLmlkID09ICJ0aHVtYm5haWwtY29udGFpbmVyIiAmJiB0aGlzLmNoaWxkcmVuWzBdLmhhc0F0dHJpYnV0ZSgibG9hZGVkIikpIHsKICAgICAgICAgICAgICAgIGxldCBpbWcgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpOwogICAgICAgICAgICAgICAgaWYgKCFpbWcpIHJldHVybjsKICAgICAgICAgICAgICAgIG5ld3NyYyA9IGltZy5zcmM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG5ld3NyYy5yZXBsYWNlKC9cPy4qJC9pLCIiKS5yZXBsYWNlKC9cL2FuX3dlYnBcLyhbXlwvXSspXC9tcWRlZmF1bHRfNnNcLndlYnAvLCAiL3ZpLyQxL2hxZGVmYXVsdC5qcGciKTsKICAgICAgICB9LAogICAgICAgIGdldEltYWdlOiBmdW5jdGlvbihhLCBwKSB7CiAgICAgICAgICAgIHZhciBuZXdzcmM9dGhpcy5zcmM7CiAgICAgICAgICAgIGlmKHBbMl0gJiYgdGhpcy5jbGFzc0xpc3QuY29udGFpbnMoJ3l0ZC1tb3ZpbmctdGh1bWJuYWlsLXJlbmRlcmVyJykpewogICAgICAgICAgICAgICAgbmV3c3JjID0gcFsyXS5xdWVyeVNlbGVjdG9yKCJpbWciKS5zcmM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoIW5ld3NyYyB8fCBuZXdzcmMuaW5kZXhPZigiaS55dGltZy5jb20iKSA9PSAtMSkgcmV0dXJuOwogICAgICAgICAgICByZXR1cm4gbmV3c3JjLnJlcGxhY2UoL1w/LiokL2ksIiIpLnJlcGxhY2UoL1wvYW5fd2VicFwvKFteXC9dKylcL21xZGVmYXVsdF82c1wud2VicC8sICIvdmkvJDEvaHFkZWZhdWx0LmpwZyIpOwogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIjU4OGt1IiwKICAgICAgICB1cmw6IC81ODhrdVwuY29tLywKICAgICAgICByOiAvIVwvZncuKi8sCiAgICAgICAgczogIiIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogImliYW90dSIsCiAgICAgICAgdXJsOiAvaWJhb3R1XC5jb20vLAogICAgICAgIGV4dDogJ3ByZXZpb3VzJywKICAgICAgICByOiAiIWZ3YzIzOCIsCiAgICAgICAgczogIiF3dzcwMDIiCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICI1OHBpYyIsCiAgICAgICAgdXJsOiAvNThwaWNcLmNvbS8sCiAgICAgICAgZXh0OiBmdW5jdGlvbih0YXJnZXQpewogICAgICAgICAgICBpZih0YXJnZXQuY2xhc3NOYW1lPT0ibm8tbG9naW4iICYmIHRhcmdldC5zdHlsZS5vcGFjaXR5PT0iIil7CiAgICAgICAgICAgICAgICB0YXJnZXQuc3R5bGUub3BhY2l0eT0wLjk5OwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e3RhcmdldC5zdHlsZS5kaXNwbGF5PSJub25lIjt9LDEwMDApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0sCiAgICAgICAgcjogLyEuKi9pLAogICAgICAgIHM6ICIhdzEwMjQiCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJnZWxib29ydSIsCiAgICAgICAgdXJsOiAvZ2VsYm9vcnVcLmNvbS8sCiAgICAgICAgc3JjOiAvKHRodW1ibmFpbHN8c2FtcGxlcylcLyguKilcLyh0aHVtYm5haWx8c2FtcGxlKV8vaSwKICAgICAgICByOiAvLipcLyh0aHVtYm5haWxzfHNhbXBsZXMpXC8oLiopXC8odGh1bWJuYWlsfHNhbXBsZSlfKC4qKVwuLiovaSwKICAgICAgICBzOiBbImh0dHBzOi8vaW1nNC5nZWxib29ydS5jb20vaW1hZ2VzLyQyLyQ0LnBuZyIsImh0dHBzOi8vaW1nNC5nZWxib29ydS5jb20vaW1hZ2VzLyQyLyQ0LmpwZyIsImh0dHBzOi8vaW1nNC5nZWxib29ydS5jb20vaW1hZ2VzLyQyLyQ0LmpwZWciXQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiZG9ubWFpIiwKICAgICAgICB1cmw6IC9kb25tYWlcLnVzLywKICAgICAgICBzcmM6IC8odGh1bWJuYWlsc3xzYW1wbGUpXC8oLiopXC8odGh1bWJuYWlsfHNhbXBsZSlffFwvXGQreFxkK1wvL2ksCiAgICAgICAgcjogWy9cLyh0aHVtYm5haWxzfHNhbXBsZSlcLyguKilcLyh0aHVtYm5haWx8c2FtcGxlKV8oLiopL2ksCiAgICAgICAgICAgIC9cL1xkK3hcZCtcLyguKilcLi4qL2kKICAgICAgICAgICBdLAogICAgICAgIHM6IFsiL29yaWdpbmFsLyQyLyQ0IixbIi9vcmlnaW5hbC8kMS5qcGciLCAiL29yaWdpbmFsLyQxLnBuZyJdXQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiZXJvc2JlcnJ5IiwKICAgICAgICB1cmw6IC9lcm9zYmVycnlcLmNvbS8sCiAgICAgICAgcjogLyhcL1xkK1wvKXRuXyhcZCtcLlteXC9dKykkL2ksCiAgICAgICAgczogIiQxJDIiCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJqYXZkYiIsCiAgICAgICAgdXJsOiAvamF2ZGIvLAogICAgICAgIHI6ICIvdGh1bWJzLyIsCiAgICAgICAgczogIi9jb3ZlcnMvIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiamF2YnVzIiwKICAgICAgICB1cmw6IC9qYXZidXNcLnxidXNqYXZcLi8sCiAgICAgICAgcjogL1wvdGh1bWJzPyhcL1x3KylcLmpwZyQvaSwKICAgICAgICBzOiAiL2NvdmVyJDFfYi5qcGciCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJhdm1vbyIsCiAgICAgICAgdXJsOiAvYXZtb29cLi8sCiAgICAgICAgcjogInBzLmpwZyIsCiAgICAgICAgczogInBsLmpwZyIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogImFzaWFuc2lzdGVyIiwKICAgICAgICB1cmw6IC9hc2lhbnNpc3RlclwuY29tLywKICAgICAgICByOiAiX3QuIiwKICAgICAgICBzOiAiLiIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogImppYW5zaHUiLAogICAgICAgIHVybDogL2ppYW5zaHVcLmNvbS8sCiAgICAgICAgcjogLyh1cGxvYWQtaW1hZ2VzXC5qaWFuc2h1XC5pb1wvLiopXD8uKi9pLAogICAgICAgIHM6ICIkMSIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogImFydHN0YXRpb24iLAogICAgICAgIGV4dDogJ25leHQnLAogICAgICAgIHVybDogL2FydHN0YXRpb25cLmNvbS8sCiAgICAgICAgcjogL1wvKFxkezE0fVwvKT9zbWFsbGVyX3NxdWFyZVwvL2ksCiAgICAgICAgczogIi9sYXJnZS8iLAogICAgICAgIHhocjogewogICAgICAgICAgICB1cmw6IGZ1bmN0aW9uKGEsIHApIHsKICAgICAgICAgICAgICAgIGlmIChhICYmIGEuaHJlZi5tYXRjaCgnL2FydHdvcmsvJykpIHJldHVybiBhLmhyZWYucmVwbGFjZSgnL2FydHdvcmsvJywgJy9wcm9qZWN0cy8nKSArICcuanNvbic7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHF1ZXJ5OiBmdW5jdGlvbihodG1sKSB7CiAgICAgICAgICAgICAgICBsZXQgZGF0YXMgPSBKU09OLnBhcnNlKGh0bWwpOwogICAgICAgICAgICAgICAgbGV0IHVybHMgPSBbXTsKICAgICAgICAgICAgICAgIGRhdGFzLmFzc2V0cy5mb3JFYWNoKGQgPT4gewogICAgICAgICAgICAgICAgICAgIHVybHMucHVzaChkLmltYWdlX3VybCkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIHVybHM7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJmbGlja3IiLAogICAgICAgIHVybDogL2ZsaWNrclwuY29tLywKICAgICAgICBleHQ6IGZ1bmN0aW9uKHRhcmdldCl7CiAgICAgICAgICAgIGlmKHRhcmdldC5ub2RlTmFtZT09IkEiICYmIHRhcmdldC5jbGFzc05hbWU9PSJvdmVybGF5IiAmJiB0YXJnZXQucGFyZW50Tm9kZSAmJiB0YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlICYmIHRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZSl7CiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlOwogICAgICAgICAgICB9ZWxzZSBpZih0YXJnZXQubm9kZU5hbWU9PSJESVYiICYmIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoInBob3RvLW5vdGVzLXNjcmFwcHktdmlldyIpKXsKICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQucHJldmlvdXNFbGVtZW50U2libGluZy5xdWVyeVNlbGVjdG9yKCIubWFpbi1waG90byIpOwogICAgICAgICAgICB9ZWxzZSBpZih0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCJjb250ZXh0LXRodW1iIikpewogICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9LAogICAgICAgIHI6IC9fXHdcLi9pLAogICAgICAgIHM6ICJfYy4iCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJ3aWtpYXJ0IiwKICAgICAgICB1cmw6IC93aWtpYXJ0XC5vcmcvLAogICAgICAgIHI6IC8hLiovaSwKICAgICAgICBzOiAnJwogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiZGlzY3V6IiwKICAgICAgICByOiBbLyguK1wvYXR0YWNobWVudHM/XC8uKylcLnRodW1iXC5cd3syLDV9JC9pLAogICAgICAgICAgICAvKCh3cC1jb250ZW50fG1vZWNkblwub3JnKVwvdXBsb2Fkc1wvLiopXC1cZCt4XGQrKC1jKT8vaSwKICAgICAgICAgICAgLy4qKD86dXJsfHNyYyk9KGh0dHBzPzpcL1wvLipcLig/OmpwZ3xqcGVnfHBuZ3xnaWZ8Ym1wKSkuKi9pLAogICAgICAgICAgICAvLip0aHVtYlwucGhwXD9zcmM9KFteJl0qKS4qL2ldLAogICAgICAgIHM6ICckMScKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIndlaWJvIOinhumikSIsCiAgICAgICAgdXJsOiAvXmh0dHBzOlwvXC8od3d3XC58c1wufG1cLik/d2VpYm9cLmNvbS8sCiAgICAgICAgZ2V0RXh0U3JjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdob3Zlck1hc2snKSkgewogICAgICAgICAgICAgICAgbGV0IHZpZGVvID0gdGhpcy5wYXJlbnROb2RlLmZpcnN0RWxlbWVudENoaWxkOwogICAgICAgICAgICAgICAgaWYgKHZpZGVvICYmIHZpZGVvLm5vZGVOYW1lID09ICdWSURFTycpIHJldHVybiBbdmlkZW8ucG9zdGVyLCB2aWRlby5zcmNdOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB2aWRlbzogL3ZpZGVvJC8KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIndlaWJvIiwKICAgICAgICByOiAvKFwuc2luYWltZ1wuKGNufGNvbSlcLykoPzpibWlkZGxlfG9yajM2MHxtd1xkKykvaSwKICAgICAgICBzOiAnJDFsYXJnZScKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIndlaWJvMiIsCiAgICAgICAgcjogLyhcLnNpbmFpbWdcLihjbnxjb20pXC8pKD86c3F1YXJlfHRodW1ibmFpbCkvaSwKICAgICAgICBzOiAnJDFtdzEwMjQnCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJzaW5hIGhlYWQiLAogICAgICAgIHI6IC8oXC5zaW5haW1nXC4oY258Y29tKVwvXGQrKVwvNTBcLy9pLAogICAgICAgIHM6ICckMS8xODAvJwogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAi5paw5rWq55u45YaMIiwKICAgICAgICBzcmM6IC9cLnNpbmFpbWdcLihjbnxjb20pXC90aHVtYlxkK1wvXHcrL2ksCiAgICAgICAgcjogL3RodW1iXGQrLywKICAgICAgICBzOiAnbXc2OTAnCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJzaW5hIHNwb3J0cyIsCiAgICAgICAgc3JjOiAva1wuc2luYWltZ1wuY25cL25cLy9pLAogICAgICAgIHI6IC9rXC5zaW5haW1nXC5jblwvblwvKC4qKVwvKHdcZCspP2hcZCtbXlwvXSskLywKICAgICAgICBzOiAnbi5zaW5haW1nLmNuLyQxJwogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiZ3JhdmF0YXIiLAogICAgICAgIHNyYzogL1xiZ3JhdmF0YXJcLmNvbVwvYXZhdGFyXC98XC9ncmF2YXRhclwvL2ksCiAgICAgICAgcjogLyhhdmF0YXJcLy4qW1w/Jl1zPSkuKi8sCiAgICAgICAgczogJyQxMTkyMCcKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogInVjU2VydmVyQXZhdGFyIiwKICAgICAgICBzcmM6IC9cYnVjX3NlcnZlclwvYXZhdGFyXC5waHAvaSwKICAgICAgICByOiAvKHVjX3NlcnZlclwvYXZhdGFyXC5waHBcP3VpZD1cZCsmc2l6ZT0pLiovLAogICAgICAgIHM6ICckMWJpZycKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIm1kIiwKICAgICAgICBzcmM6IC9cLm1kXC4vaSwKICAgICAgICByOiAvXC5tZChcLlteXC5dKykkL2ksCiAgICAgICAgczogJyQxJwogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAidGh1bWJuYWlsIiwKICAgICAgICBzcmM6IC9cLnRodW1ibmFpbFwuL2ksCiAgICAgICAgcjogL1wudGh1bWJuYWlsKFwuW15cLl0rKSQvaSwKICAgICAgICBzOiAnJDEnCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJ5dGltZyIsCiAgICAgICAgc3JjOiAvaVwueXRpbWdcLmNvbS9pLAogICAgICAgIGV4Y2x1ZGU6IC9tcWRlZmF1bHRfNnMvaSwKICAgICAgICByOiAvXD8uKiQvaSwKICAgICAgICBzOiAnJwogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAibWVpdHVhbiIsCiAgICAgICAgdXJsOiAvXC5tZWl0dWFuXC5uZXQvaSwKICAgICAgICByOiAvXC9hdmF0YXJcL1x3ezJ9L2ksCiAgICAgICAgczogJy9hdmF0YXIvbzAnCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJoZHNsYiIsCiAgICAgICAgc3JjOiAvaGRzbGJcLmNvbVwvL2ksCiAgICAgICAgcjogL0AuKi9pLAogICAgICAgIHM6ICcnCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJjb29sYXBrIiwKICAgICAgICB1cmw6IC9cLmNvb2xhcGtcLmNvbVwvL2ksCiAgICAgICAgcjogL1wuc1wuXHcrJC9pLAogICAgICAgIHM6ICcnCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJhaWNkbiIsCiAgICAgICAgc3JjOiAvXC5haWNkblwuY29tXC8vaSwKICAgICAgICByOiAvX2Z3XGQrJC9pLAogICAgICAgIHM6ICcnCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJkdWl0YW5nIiwKICAgICAgICB1cmw6IC9kdWl0YW5nXC5jb21cLy9pLAogICAgICAgIHI6IC8udGh1bWIuKFxkK18pP1xkKihfYyk/XC4vaSwKICAgICAgICBzOiAnLicKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogImltZ3VyIiwKICAgICAgICBzcmM6IC9pbWd1clwuY29tXC8vaSwKICAgICAgICByOiBbL2goXC5bXlwvXSspJC9pLC9tYXh3aWR0aD1cZCsvaSwvYlwuL10sCiAgICAgICAgczogWyIkMSIsIm1heHdpZHRoPTk5OTk5IiwiLiJdCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJkbW0iLAogICAgICAgIHNyYzogL3BpY3NcLmRtbVwuY29cLmpwL2ksCiAgICAgICAgcjogInBzLmpwZyIsCiAgICAgICAgczogInBsLmpwZyIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIndoZCIsCiAgICAgICAgc3JjOiAvXC93XC9cZCtcL2hcL1xkKygkfFwvfFw/KS9pLAogICAgICAgIHI6IC9cL3dcL1xkK1wvaFwvXGQrL2ksCiAgICAgICAgczogIiIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIueZvuW6puWbvueJh+OAgei0tOWQp+etiSIsCiAgICAgICAgc3JjOiAvKGhpcGhvdG9zfGltZ3NyYylcLmJhaWR1XC5jb20vaSwKICAgICAgICByOiAvKGhpcGhvdG9zfGltZ3NyYylcLmJhaWR1XC5jb21cLyguKz8pXC8uKz8oWzAtOWEtZl17NDB9KS9pLAogICAgICAgIHM6ICIkMS5iYWlkdS5jb20vJDIvcGljL2l0ZW0vJDMiCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJHb29nbGVDb250ZW50IiwKICAgICAgICBzcmM6IC9cL3dcL1xkK1wvaFwvXGQrKCR8XC98XD8pL2ksCiAgICAgICAgZ2V0SW1hZ2U6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgdmFyICQgPSAvXigoPzooPzpsaHxncHx5dClcZCtcLmcoPzpvb2dsZXVzZXJjb250ZW58Z3BoKXxcZFwuYnBcLmJsb2dzcG8pdFwuY29tXC8pKD86KFtfLV0oPzpbXHdcLV17MTF9XC8pezR9KVteXC9dKyhcL1tePyNdKyk/fChbXj1dKykpLiovaS5leGVjKHRoaXMuc3JjKTsKICAgICAgICAgICAgdmFyIG5ld3NyYz0gJCA/ICgnaHR0cDovLycgKyAkWzFdICsgKCRbNF0gPyAkWzRdICsgJz0nIDogJFsyXSkgKyAnczI2MzQnICsgKCRbM10gfHwgJycpKSA6ICcnOwogICAgICAgICAgICBpZihuZXdzcmMhPXRoaXMuc3JjKXJldHVybiBuZXdzcmM7CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiZG91YmFuIiwKICAgICAgICB1cmw6IC9cYmRvdWJhblwuY29tL2ksCiAgICAgICAgZ2V0SW1hZ2U6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgdmFyICQgPSAvKGltZ1xkK1wuZG91YmFuXC5jb21cLykoPzoodmlld1wvKSg/OnBob3RvfG1vdmllX3Bvc3Rlcl9jb3ZlcilcLyg/IWxhcmdlKVteXC9dK3woaWNvblwvdSg/PVxkKSl8W3NtXSg/PXBpY1wvKSkoLiopL2kuZXhlYyh0aGlzLnNyYyk7CiAgICAgICAgICAgIHZhciBuZXdzcmM9ICQgPyAoJ2h0dHA6Ly8nICsgJFsxXSArICgkWzJdID8gJFsyXSArICdwaG90by9waG90bycgOiAoKCRbM118fCcnKSArICdsJykpICsgJFs0XSkgOiAnJzsKICAgICAgICAgICAgaWYobmV3c3JjIT10aGlzLnNyYylyZXR1cm4gbmV3c3JjOwogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogInRhb2Jhb2NkbiIsCiAgICAgICAgc3JjOiAvKHRhb2Jhb2NkbnxhbGljZG4pXC5jb20vaSwKICAgICAgICByOiBbLy4qKCg/OmltZ1xkXGRcLnRhb2Jhb2NkbnxpbWcoPzpbXi5dKlwuPyl7MSwyfT9cLmFsaWNkbilcLmNvbVwvKSg/OmltZ1wvfHRwc1wvaHR0cDpcL1wvaW1nXGRcZCtcLnRhb2Jhb2NkblwuY29tXC8pPygoPzppbWdleHRyYXxiYW9cL3VwbG9hZGVkKVwvLitcLig/OmpwZT9nfHBuZ3xnaWZ8Ym1wKSlfLitcLmpwZyQvaSwKICAgICAgICAgICAgLyguKlwuYWxpY2RuXC5jb21cLy4qPykoKC5qcGd8LnBuZykoXC58XylcZCt4XGQrLiopXC5qcGcoX1wud2VicCk/JC9pLAogICAgICAgICAgICAvKC4qXC5hbGljZG5cLmNvbVwvLio/KSgoXC58XylcZCt4XGQrLip8XC5zZWFyY2h8XC5zdW1tKVwuanBnKF9cLndlYnApPyQvaV0sCiAgICAgICAgczogWyJodHRwOi8vJDEkMiIsCiAgICAgICAgICAgICIkMSQzIiwKICAgICAgICAgICAgIiQxLmpwZyJdCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJ0YW9iYW8iLAogICAgICAgIHVybDogL1xiaXRlbVwudGFvYmFvXC5jb20vaSwKICAgICAgICByOiBbLy4qKCg/OmltZ1xkXGRcLnRhb2Jhb2NkbnxpbWcoPzpbXi5dKlwuPyl7MSwyfT9cLmFsaWNkbilcLmNvbVwvKSg/OmltZ1wvfHRwc1wvaHR0cDpcL1wvaW1nXGRcZCtcLnRhb2Jhb2NkblwuY29tXC8pPygoPzppbWdleHRyYXxiYW9cL3VwbG9hZGVkKVwvLitcLig/OmpwZT9nfHBuZ3xnaWZ8Ym1wKSlfLitcLmpwZyQvaSwKICAgICAgICAgICAgLyguKlwuYWxpY2RuXC5jb21cLy4qPykoKC5qcGd8LnBuZykoXC58XylcZCt4XGQrLiopXC5qcGcoX1wud2VicCk/JC9pLAogICAgICAgICAgICAvKC4qXC5hbGljZG5cLmNvbVwvLio/KSgoXC58XylcZCt4XGQrLip8XC5zZWFyY2h8XC5zdW1tKVwuanBnKF9cLndlYnApPyQvaV0sCiAgICAgICAgczogWyJodHRwOi8vJDEkMiIsCiAgICAgICAgICAgICIkMSQzIiwKICAgICAgICAgICAgIiQxLmpwZyJdLAogICAgICAgIGdldEV4dFNyYzpmdW5jdGlvbigpewogICAgICAgICAgICBpZih0aGlzLnRhZ05hbWU9PSdBJyAmJiB0aGlzLnN0eWxlLmJhY2tncm91bmQpewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3R5bGUuYmFja2dyb3VuZC5yZXBsYWNlKC8uKnVybFwoWyciXShodHRwcz86KT8oLiopWyciXVwpLiovLCJodHRwczokMiIpLnJlcGxhY2UoL19cZCt4XGQrXC5cdyskLywiIikKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogInlpaGFvZGlhbmltZyIsCiAgICAgICAgdXJsOiAvXGJ5aGRcLmNvbS9pLAogICAgICAgIHNyYzogL3lpaGFvZGlhbmltZ1wuY29tL2ksCiAgICAgICAgcjogLyguKlwueWloYW9kaWFuaW1nXC5jb21cLy4qKV9cZCt4XGQrXC5qcGckL2ksCiAgICAgICAgczogIiQxLmpwZyIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogImpkIiwKICAgICAgICB1cmw6IC9cYmpkXC5jb20vaSwKICAgICAgICBzcmM6IC8zNjBidXlpbWdcLmNvbS9pLAogICAgICAgIHI6IFsvKC4qMzYwYnV5aW1nXC5jb21cLyluXGRcLy4rP1xfKC4qKS9pLAogICAgICAgICAgICAvKC4qMzYwYnV5aW1nXC5jb21cLyluXGRcLyguKikvaSwKICAgICAgICAgICAgLyguKjM2MGJ1eWltZ1wuY29tXC8uKilzXGQreFxkK18oLiopL2ldLAogICAgICAgIHM6IFsiJDFpbWd6b25lLyQyIiwiJDFuMC8kMiIsIiQxJDIiXQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiZGFuZ2RhbmciLAogICAgICAgIHVybDogL1xiZGFuZ2RhbmdcLmNvbS9pLAogICAgICAgIHNyYzogL1xiZGRpbWdcLmNuL2ksCiAgICAgICAgcjogLyguKmRkaW1nLmNuXC8uKj8pX1tid11fKFxkK1wuanBnJCkvaSwKICAgICAgICBzOiAiJDFfZV8kMiIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogImR1b2thbiIsCiAgICAgICAgdXJsOiAvXGJkdW9rYW5cLmNvbS9pLAogICAgICAgIHI6IC8oY292ZXIucmVhZC5kdW9rYW4uY29tLio/XC5qcGcpIVx3KyQvaSwKICAgICAgICBzOiAiJDEiCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJ5eWV0cyIsCiAgICAgICAgdXJsOiAvXGJ5eWV0c1wuY29tL2ksCiAgICAgICAgcjogL14ocmVzXC55eWV0c1wuY29tLio/XC9mdHBcLyg/OmF0dGFjaG1lbnRcLyk/XGQrXC9cZCspXC9bbXNdXyguKikvaSwKICAgICAgICBzOiAiaHR0cDovLyQxLyQyIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAibW96aWxsYSIsCiAgICAgICAgdXJsOiAvYWRkb25zXC5tb3ppbGxhXC5vcmcvaSwKICAgICAgICByOiAiYWRkb25zLmNkbi5tb3ppbGxhLm5ldC91c2VyLW1lZGlhL3ByZXZpZXdzL3RodW1icy8iLAogICAgICAgIHM6ICIvdGh1bWJzL2Z1bGwvIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiZmlyZWZveCIsCiAgICAgICAgdXJsOiAvZmlyZWZveFwubmV0XC5jbi9pLAogICAgICAgIHI6ICJ3d3cuZmlyZWZveC5uZXQuY24vYXR0YWNobWVudC90aHVtYi8iLAogICAgICAgIHM6ICJ3d3cuZmlyZWZveC5uZXQuY24vYXR0YWNobWVudC8iCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJjcnNreSIsCiAgICAgICAgdXJsOiAvXC5jcnNreVwuY29tL2ksCiAgICAgICAgcjogL3BpY1wuY3Jza3lcLmNvbS4qX3NcLmdpZiQvaSwKICAgICAgICBzOiAiL19zLi8uLyIsCiAgICAgICAgZXhhbXBsZTogImh0dHA6Ly93d3cuY3Jza3kuY29tL3NvZnQvNTM1Ny5odG1sIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiem9sIiwKICAgICAgICB1cmw6IC9cLnpvbFwuY29tL2ksCiAgICAgICAgcjogLyhcdytcLnpvbC1pbWdcLmNvbVwuY25cL3Byb2R1Y3RcL1xkKylfXGQreFxkK1wvKC4qXC5qcGcpL2ksCiAgICAgICAgczogIiQxLyQyIiwKICAgICAgICBleGFtcGxlOiAiaHR0cDovL2RldGFpbC56b2wuY29tLmNuLzI0MC8yMzk4NTcvcGljLnNodG1sIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAieWVza3kiLAogICAgICAgIHVybDogL1wueWVza3lcLmNvbS9pLAogICAgICAgIHI6IC9fXGQreFxkK1wuKFthLXpdKykkL2ksCiAgICAgICAgczogIi4kMSIsCiAgICAgICAgZXhhbXBsZTogImh0dHA6Ly9nYW1lLnllc2t5LmNvbS90dXBpYW4vMTY1LzM3OTY4NjY1LnNodG1sIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiLlt7Tlk4jlp4bnibkiLAogICAgICAgIHVybDovXmh0dHBzOlwvXC9cdytcLmdhbWVyXC5jb21cLnR3LywKICAgICAgICBzcmM6IC9iYWhhbXV0XC5jb21cLnR3LywKICAgICAgICByOiAiL1MvIiwKICAgICAgICBzOiAiL0IvIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAic2dhbWVyIiwKICAgICAgICB1cmw6IC9cLnNnYW1lclwuY29tL2ksCiAgICAgICAgcjogL1wvcyhbXlwuXC9dK1wuW2Etel0rJCkvaSwKICAgICAgICBzOiAiLyQxIiwKICAgICAgICBleGFtcGxlOiAiaHR0cDovL2RvdGEyLnNnYW1lci5jb20vYWxidW1zLzIwMTQwNy84MjYzXzMzMDg2Ni5odG1sIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAibmhlbnRhaSIsCiAgICAgICAgdXJsOiAvXGJuaGVudGFpXC4vaSwKICAgICAgICByOiBbLyhjZG5cLi4qXGQrKXQoXC5bYS16XSspJC8sIC9cL1wvXHcrKFwuLipcLykoXGQrKXQoXC5bYS16XSspJC9pXSwKICAgICAgICBzOiBbIiQxJDIiLCIvL2kkMSQyJDMiXSwKICAgICAgICBleGFtcGxlOiAiaHR0cDovL25oZW50YWkubmV0L2cvMTEzNDc1LyIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIkdpdGh1YkF2YXRhcnMiLAogICAgICAgIHVybDogL1xiZ2l0aHViXC5jb20vaSwKICAgICAgICByOiAvKGF2YXRhcnNcZCpcLmdpdGh1YnVzZXJjb250ZW50XC5jb20uKilcPy4qJC9pLAogICAgICAgIHM6ICIkMSIsCiAgICAgICAgZXhhbXBsZTogImh0dHBzOi8vYXZhdGFyczIuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3UvMzIzMzI3NS8iCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJnZ3BodCIsCiAgICAgICAgc3JjOiAvXGJnZ3BodFwuY29tL2ksCiAgICAgICAgcjogLz1zXGQrLiovaSwKICAgICAgICBzOiAiPXM5OTk5IgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAia29kYW5zaGEiLAogICAgICAgIHVybDogL1xia29kYW5zaGFcLmNvXC5qcC9pLAogICAgICAgIHNyYzogL1xia29kYW5zaGFcLmNvXC5qcC9pLAogICAgICAgIHI6ICd0X29nX2ltYWdlX2NlbnRlcicsCiAgICAgICAgczogJ2NfbGltaXQnCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJmYW5zZXZlbiIsCiAgICAgICAgdXJsOiAvXGJmYW5zZXZlblwuY29tL2ksCiAgICAgICAgc3JjOiAvXGJmYW5zZXZlblwuY29tL2ksCiAgICAgICAgcjogL3c9XGQrJmg9XGQrL2ksCiAgICAgICAgczogJ3c9OTk5OSZoPTk5OTknCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJhcHBzdG9yZSIsCiAgICAgICAgdXJsOiAvXmh0dHBzOlwvXC9hcHBzXC5hcHBsZVwuY29tXC8vaSwKICAgICAgICBnZXRJbWFnZTpmdW5jdGlvbigpewogICAgICAgICAgICBpZih0aGlzLnBhcmVudE5vZGUubm9kZU5hbWU9PSJQSUNUVVJFIil7CiAgICAgICAgICAgICAgICBsZXQgc291cmNlPXRoaXMucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCJzb3VyY2U6bGFzdC1vZi10eXBlIik7CiAgICAgICAgICAgICAgICBsZXQgbWF4U2l6ZT0wOwogICAgICAgICAgICAgICAgbGV0IHJlc3VsdD0iIjsKICAgICAgICAgICAgICAgIHNvdXJjZS5zcmNzZXQuc3BsaXQoIiwgIikuZm9yRWFjaChzcmNzZXQ9PnsKICAgICAgICAgICAgICAgICAgICBsZXQgc3JjQXJyPXNyY3NldC5zcGxpdCgiICIpOwogICAgICAgICAgICAgICAgICAgIGxldCBjdXJTaXplPXBhcnNlSW50KHNyY0FyclsxXSk7CiAgICAgICAgICAgICAgICAgICAgaWYoY3VyU2l6ZT5tYXhTaXplKXsKICAgICAgICAgICAgICAgICAgICAgICAgbWF4U2l6ZT1jdXJTaXplOwogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ9c3JjQXJyWzBdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICB9LAogICAgewogICAgICAgIG5hbWU6ImNvb21lci5wYXJ0eSAmIGtlbW9uby5wYXJ0eSIsCiAgICAgICAgdXJsOi9eaHR0cHM6XC9cLyhjb29tZXJ8a2Vtb25vKVwucGFydHlcLy4qXC9wb3N0XC8vLAogICAgICAgIGdldEltYWdlOmZ1bmN0aW9uKGEpewogICAgICAgICAgICBpZihhKSByZXR1cm4gYS5ocmVmOwogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZToiaW5zdGFncmFtIiwKICAgICAgICB1cmw6L15odHRwcz86XC9cL1teLl0rXC5pbnN0YWdyYW1cLmNvbS9pLAogICAgICAgIGV4dDogZnVuY3Rpb24odGFyZ2V0KSB7CiAgICAgICAgICAgIGlmKHRhcmdldCAmJiB0YXJnZXQucHJldmlvdXNFbGVtZW50U2libGluZyl7CiAgICAgICAgICAgICAgICBsZXQgaW1ncz10YXJnZXQucHJldmlvdXNFbGVtZW50U2libGluZy5xdWVyeVNlbGVjdG9yQWxsKCJpbWciKTsKICAgICAgICAgICAgICAgIGlmKGltZ3MgJiYgaW1ncy5sZW5ndGg9PTEpcmV0dXJuIGltZ3NbMF07CiAgICAgICAgICAgIH1lbHNlIGlmKHRhcmdldC50YWdOYW1lPT0nVUwnICYmIHRhcmdldC5wYXJlbnROb2RlICYmIHRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUgJiYgdGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS50YWdOYW1lPT0nQScpewogICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignaW1nJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHhocjogewogICAgICAgICAgICB1cmw6IGZ1bmN0aW9uKGEsIHApIHsKICAgICAgICAgICAgICAgIGlmICghYSkgcmV0dXJuOwogICAgICAgICAgICAgICAgY29uc3QgcmUgPSAvXC8ocHxyZWVsKVwvKFteL117MSx9KS8KICAgICAgICAgICAgICAgIGNvbnN0IG0gPSBhLmhyZWYubWF0Y2gocmUpOwogICAgICAgICAgICAgICAgaWYgKG0gJiYgYS5xdWVyeVNlbGVjdG9yKCdzdmcnKSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNob3J0Y29kZSA9IG1bMl07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG93ZXIgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwcGVyID0gbG93ZXIudG9VcHBlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBudW1iZXJzID0gJzAxMjM0NTY3ODknOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlnX2FscGhhYmV0ID0gdXBwZXIgKyBsb3dlciArIG51bWJlcnMgKyAnLV8nOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBzaG9ydGNvZGUucmVwbGFjZSgvXFMvZywgbSA9PiAoaWdfYWxwaGFiZXQuaW5kZXhPZihtKSA+Pj4gMCkudG9TdHJpbmcoMikucGFkU3RhcnQoNiwgJzAnKSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IG1lZGlhSWQgPSBCaWdJbnQoJzBiJyArIG8pLnRvU3RyaW5nKDEwKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYGh0dHBzOi8vd3d3Lmluc3RhZ3JhbS5jb20vYXBpL3YxL21lZGlhLyR7bWVkaWFJZH0vaW5mby9gOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBoZWFkZXJzOiB7IlgtSUctQXBwLUlEIjoiOTM2NjE5NzQzMzkyNDU5In0sCiAgICAgICAgICAgIGNhY2hlTnVtOiAyMCwKICAgICAgICAgICAgcXVlcnk6IGZ1bmN0aW9uKGh0bWwpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IEpTT04ucGFyc2UoaHRtbCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbXMwID0gby5pdGVtc1swXTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB2aWRlb3MgPSBpdGVtczAudmlkZW9fdmVyc2lvbnM7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VzID0gaXRlbXMwLmltYWdlX3ZlcnNpb25zMjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXJvdXNlbCA9IGl0ZW1zMC5jYXJvdXNlbF9tZWRpYTsKICAgICAgICAgICAgICAgICAgICBpZiAodmlkZW9zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZGVvVXJsID0gInZpZGVvOiIgKyB2aWRlb3NbMF0udXJsOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmlkZW9BdWRpb1N1YnRpdGxlc1VybCA9IHZpZGVvVXJsOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXB0aW9uID0gKGl0ZW1zMC5jYXB0aW9uID8gaXRlbXMwLmNhcHRpb24udGV4dCA6IChpdGVtczAuYWNjZXNzaWJpbGl0eV9jYXB0aW9uID8gaXRlbXMwLmFjY2Vzc2liaWxpdHlfY2FwdGlvbiA6IGl0ZW1zMC51c2VyLmZ1bGxfbmFtZSkpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge3VybDogW3ZpZGVvVXJsXSwgY2FwOiBjYXB0aW9ufTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNhcm91c2VsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBnYWxsZXJ5ID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcHRpb24gPSAoaXRlbXMwLmNhcHRpb24gPyBpdGVtczAuY2FwdGlvbi50ZXh0IDogKGl0ZW1zMC5hY2Nlc3NpYmlsaXR5X2NhcHRpb24gPyBpdGVtczAuYWNjZXNzaWJpbGl0eV9jYXB0aW9uIDogaXRlbXMwLnVzZXIuZnVsbF9uYW1lKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhcm91c2VsLm1hcChjID0+IHsgZ2FsbGVyeS5wdXNoKGMudmlkZW9fdmVyc2lvbnMgPyBjLnZpZGVvX3ZlcnNpb25zWzBdLnVybCA6IGMuaW1hZ2VfdmVyc2lvbnMyLmNhbmRpZGF0ZXNbMF0udXJsKTsgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7dXJsOiBnYWxsZXJ5LCBjYXA6IGNhcHRpb259OwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW1hZ2VzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlc1VybCA9IGltYWdlcy5jYW5kaWRhdGVzWzBdLnVybDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGltYWdlc1VybDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIHsgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiaGVudGFpLWNvc3BsYXlzIiwKICAgICAgICB1cmw6IC9eaHR0cHM6XC9cLyguKlwuKT8oaGVudGFpXC1jb3NwbGF5c3xwb3JuXC1pbWFnZXNcLXh4eClcLmNvbS8sCiAgICAgICAgcjogL1wvcD1bXGR4XSsoXC9cZCtcLlx3KykkL2ksCiAgICAgICAgczogJyQxJwogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiJiZXRhLmtlbW9uby5wYXJ0eSIsCiAgICAgICAgdXJsOi9eaHR0cHM6XC9cLyhcdytcLik/a2Vtb25vXC5wYXJ0eVwvLipcL3Bvc3RcLy8sCiAgICAgICAgZ2V0SW1hZ2U6ZnVuY3Rpb24oYSl7CiAgICAgICAgICAgIGlmKGEpIHJldHVybiBhLmhyZWY7CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiJpbWRiIiwKICAgICAgICB1cmw6L15odHRwcz86XC9cL3d3d1wuaW1kYlwuY29tLywKICAgICAgICBzcmM6IC9tZWRpYVwtYW1hem9uLywKICAgICAgICByOiAvQC4qKFwuXHcpL2ksCiAgICAgICAgczogJ0AkMScKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZToibnNmdy54eHgiLAogICAgICAgIHVybDovXmh0dHBzPzpcL1wvbnNmd1wueHh4LywKICAgICAgICBzcmM6IC90aHVtYm5haWxzLywKICAgICAgICB4aHI6IHsKICAgICAgICAgICAgdXJsOiBmdW5jdGlvbihhLHApIHsKICAgICAgICAgICAgICAgIGlmIChhICYmIGEuY2xhc3NOYW1lPT09J3NsaWRlcl9pbml0X2hyZWYnICYmIGEuaHJlZiAmJiAhdGhpcy5uZXh0RWxlbWVudFNpYmxpbmcpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5ocmVmOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBxdWVyeTogJy5zaC1zZWN0aW9uX19pbWFnZT5pbWcnLAogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIumbqueQgyIsCiAgICAgICAgdXJsOiAvXmh0dHBzPzpcL1wveHVlcWl1XC5jb21cLy8sCiAgICAgICAgc3JjOiAvXmh0dHBzPzpcL1wveHFpbWdcLmltZWRhb1wuY29tXC8vaSwKICAgICAgICByOiAvIVxkKyh4XGQrW2Etel0/KT9cLlx3KyQvLAogICAgICAgIHM6ICcnCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICLlsI/kvJforrrlnZsiLAogICAgICAgIHVybDogL15odHRwcz86XC9cL21ldGFcLmFwcGlublwubmV0LywKICAgICAgICBzcmM6IC9tZXRhXC1jZG4vLAogICAgICAgIHI6IC9cL29wdGltaXplZFwvKC4qKV9cZCtfXGQreFxkKyhcLlx3KykkLywKICAgICAgICBzOiAiL29yaWdpbmFsLyQxJDIiCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICLor7Hmg5Hnpo/liKnlm74iLAogICAgICAgIHVybDogL3d3d1wueWhmbHRcLmNvbS8sCiAgICAgICAgc3JjOiAvaW1nc1wueWhmbHRcLmNvbS8sCiAgICAgICAgcjogL2ltZ3MoXC4uKlwvKXEvLAogICAgICAgIHM6ICJwaWMkMSIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIlNhbmtha3UgQ29tcGxleCIsCiAgICAgICAgdXJsOi9zYW5rYWt1Y29tcGxleFwuY29tLywKICAgICAgICB4aHI6ewogICAgICAgICAgICB1cmw6IFsiXmh0dHBzPzovLyg/Ond3d1xcLik/KHNhbmtha3UpY29tcGxleChcXC5jb20vKSg/Olxcd3syfS8pPyhwb3N0KXM/Lyg/OnNob3cvKT8oW2EtekEtWjAtOV0rKS4qIiwgImh0dHBzOi8vJDFhcGkkMiQzcy8kNC9mdSJdLAogICAgICAgICAgICBxdWVyeTogZnVuY3Rpb24oaHRtbCwgZG9jLCB1cmwpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlID0gL15odHRwcz86XC9cLygoPzppZG9sfGNoYW58d3d3KVwuKT8oc2Fua2FrdSljb21wbGV4KFwuY29tXC8pKD86XHd7Mn1cLyk/KHBvc3Qpcz9cLyg/OnNob3dcLyk/KFthLXpBLVowLTldKykuKi87CiAgICAgICAgICAgICAgICBjb25zdCAkID0gdXJsLm1hdGNoKHJlKTsKICAgICAgICAgICAgICAgIGlmKGh0bWxbMF0hPT0neycpIHJldHVybjsKICAgICAgICAgICAgICAgIGxldCBtZXRhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZCA+IG1ldGFbbmFtZT0icmVmZXJyZXIiXScpOwogICAgICAgICAgICAgICAgaWYgKCFtZXRhKSB7CiAgICAgICAgICAgICAgICAgICAgbWV0YSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ21ldGEnKTsKICAgICAgICAgICAgICAgICAgICBtZXRhLm5hbWUgPSAncmVmZXJyZXInOwogICAgICAgICAgICAgICAgICAgIG1ldGEuY29udGVudCA9ICdzYW1lLW9yaWdpbic7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChtZXRhKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWV0YS5hdHRyaWJ1dGVzLmNvbnRlbnQudmFsdWUgIT09ICdzYW1lLW9yaWdpbicpIHsKICAgICAgICAgICAgICAgICAgICBtZXRhLmF0dHJpYnV0ZXMuY29udGVudC52YWx1ZSA9ICdzYW1lLW9yaWdpbic7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBsZXQgbG93cmVzX3VybCwgaGlnaHJlc191cmw7CiAgICAgICAgICAgICAgICBsb3dyZXNfdXJsID0gaHRtbC5tYXRjaCgvKD86KD86UmVzaXplZDogPGF8PGEgaWQ9Imxvd3JlcyJbXj5dKz8pIGhyZWY9fHNhbXBsZV91cmwiOiA/KSIoW14iXSspLyk/LlsxXTsKICAgICAgICAgICAgICAgIGhpZ2hyZXNfdXJsID0gaHRtbC5tYXRjaCgvKD86KD86T3JpZ2luYWw6IDxhfDxhIGlkPSJoaWdocmVzIltePl0rPykgaHJlZj0ifGZpbGVfdXJsIjoiPykoW14oLCIpXSspLyk/LlsxXTsKICAgICAgICAgICAgICAgIHJldHVybiBoaWdocmVzX3VybDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZToi5p6B566A5aOB57q4IiwKICAgICAgICB1cmw6L2h0dHBzOlwvXC9ielwuenp6bWhcLmNuXC8vaSwKICAgICAgICBnZXRJbWFnZTogZnVuY3Rpb24oYSxwKXsKICAgICAgICAgICAgaWYocCYmcFsxXSYmcFsxXS5jbGFzc0xpc3QuY29udGFpbnMoImltZy1ib3giKSl7CiAgICAgICAgICAgICAgICBsZXQgc2F2ZUVsZT1wWzFdLnF1ZXJ5U2VsZWN0b3IoImEiKTsKICAgICAgICAgICAgICAgIGlmKHNhdmVFbGUpIHJldHVybiBzYXZlRWxlLmhyZWY7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJibG9nZ2VyIiwKICAgICAgICBzcmM6IC9ibG9nZ2VyXC5nb29nbGV1c2VyY29udGVudFwuY29tXC9pbWcvLAogICAgICAgIHI6IC9cL1tzd11cZCtcLy4qLywKICAgICAgICBzOiAiL3MwIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAi54WO6JuLIiwKICAgICAgICB1cmw6IC9eaHR0cHM6XC9cL2phbmRhblwubmV0XC8vLAogICAgICAgIHI6IFsvXC8odGh1bWJcZCt8bXdcZCspXC8vLCAvIXNxdWFyZS9dLAogICAgICAgIHM6IFsiL2xhcmdlLyIsICIiXQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiLovonlpJznmb3lhZQiLAogICAgICAgIHVybDovNDdcLjEwMVwuMTM3XC4yMzUvLAogICAgICAgIHI6InRodW1iIiwKICAgICAgICBzOiJyZWd1bGFyIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiQ2l2aXRhaSIsCiAgICAgICAgdXJsOiAvXmh0dHBzOlwvXC9jaXZpdGFpXC5jb21cLy8sCiAgICAgICAgcjogL1wvd2lkdGg9XGQrXC8vLAogICAgICAgIHM6ICIvIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAi57ay5piT6Zuy6Z+z5qiCIiwKICAgICAgICB1cmw6IC9eaHR0cHM6XC9cL211c2ljXC4xNjNcLmNvbVwvLywKICAgICAgICBnZXRFeHRTcmM6ZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnRhZ05hbWUgPT09ICdBJyAmJiB0aGlzLmNsYXNzTmFtZSA9PT0gIm1zayIpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuc3JjLnJlcGxhY2UoL1w/cGFyYW09XGQreVxkKy8sICIiKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcjogL1w/cGFyYW09XGQreVxkKy8sCiAgICAgICAgczogIiIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIkRsc2l0ZSIsCiAgICAgICAgc3JjOiAvXmh0dHBzOlwvXC9pbWdcLmRsc2l0ZVwuanBcLy8sCiAgICAgICAgcjogL1wvcmVzaXplXC8oLiopX1xkK3hcZCsvLAogICAgICAgIHM6ICIvbW9kcHViLyQxIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAicG9zdHlwZSIsCiAgICAgICAgdXJsOiAvXmh0dHBzOlwvXC93d3dcLnBvc3R5cGVcLmNvbVwvLywKICAgICAgICByOiBbL1wvcmVzaXplKFwvLipcLylcZCt4XGQreFxkK1wvXHcrP1wvLywgL1w/dz0uKi9dLAogICAgICAgIHM6IFsiJDEiLCAiIl0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogInBpY2NvbWEganAiLAogICAgICAgIHVybDogL15odHRwczpcL1wvcGljY29tYVwuY29tXC8vLAogICAgICAgIHI6IFsvKHRodW1ibmFpbHxjb3ZlcilfeFxkLywgL3hcZCQvXSwKICAgICAgICBzOiBbImNvdmVyX3gzIiwgIngzIl0sCiAgICAgICAgZ2V0RXh0U3JjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKHRoaXMuY2hpbGRyZW5bMF0gJiYgdGhpcy5jaGlsZHJlblswXS5ub2RlTmFtZSA9PT0gIklNRyIpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuWzBdLnNyYy5yZXBsYWNlKC8odGh1bWJuYWlsfGNvdmVyKV94XGQvLCAiY292ZXJfeDMiKS5yZXBsYWNlKC94XGQkLywgIngzIik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJidW5rciIsCiAgICAgICAgdXJsOiAvYnVua3JcLnNpLywKICAgICAgICByOiAvXC90aHVtYnMoXC8uKilwbmcvLAogICAgICAgIHM6ICIkMWpwZyIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZToidmsiLAogICAgICAgIHVybDovdmtcLmNvbS8sCiAgICAgICAgeGhyOnsKICAgICAgICAgICAgdXJsOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucygicGhvdG9zX3JvdyIpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlyc3RFbGVtZW50Q2hpbGQgJiYgdGhpcy5maXJzdEVsZW1lbnRDaGlsZC5ocmVmOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBxdWVyeTogZnVuY3Rpb24oaHRtbCwgZG9jKSB7CiAgICAgICAgICAgICAgICBsZXQgciA9IGRvYy5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9Im9nOmltYWdlIl0nKTsKICAgICAgICAgICAgICAgIGlmICghcikgcmV0dXJuOwogICAgICAgICAgICAgICAgciA9IHIuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpOwogICAgICAgICAgICAgICAgaWYgKCFyKSByZXR1cm47CiAgICAgICAgICAgICAgICByID0gci5tYXRjaCgvXC8oW1x3XC1dKylcLihqcGd8cG5nKS8pOwogICAgICAgICAgICAgICAgaWYgKCFyKSByZXR1cm47CiAgICAgICAgICAgICAgICByID0gclsxXTsKICAgICAgICAgICAgICAgIHIgPSBodG1sLm1hdGNoKG5ldyBSZWdFeHAoYCJ6X3NyYyI6IihbXiJdKj8ke3J9W14iXSo/KSIsInpfImApKTsKICAgICAgICAgICAgICAgIHJldHVybiByICYmIHJbMV07CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJzc3BhaSIsCiAgICAgICAgdXJsOiAvXmh0dHBzPzpcL1wvc3NwYWlcLmNvbVwvLywKICAgICAgICByOiAvXD9pbWFnZU1vZ3IuKi8sCiAgICAgICAgczogIiIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogImxhLWNyb2l4IiwKICAgICAgICB1cmw6IC9eaHR0cHM/OlwvXC93d3dcLmxhXC1jcm9peFwuY29tXC8vLAogICAgICAgIHI6IC9cL1xkK3hcZCtcLy8sCiAgICAgICAgczogIi94LyIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZToiZS1oZW50YWkiLAogICAgICAgIHVybDovXmh0dHBzPzpcL1wvKGVcLXxleCloZW50YWlcLm9yZ1wvL2ksCiAgICAgICAgeGhyOiB7CiAgICAgICAgICAgIHVybDogZnVuY3Rpb24oYSwgcCkgewogICAgICAgICAgICAgICAgaWYgKCFhIHx8ICEvYmxhbmtcLmdpZiQvLnRlc3QodGhpcy5zcmMpKSByZXR1cm47CiAgICAgICAgICAgICAgICBjb25zdCByZSA9IC9cL3NcLy9pOwogICAgICAgICAgICAgICAgY29uc3QgbSA9IGEuaHJlZi5tYXRjaChyZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gbSAmJiBhLmhyZWY7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHF1ZXJ5OiBmdW5jdGlvbihodG1sLCBkb2MpIHsKICAgICAgICAgICAgICAgIGxldCBpbWcgPSBkb2MucXVlcnlTZWxlY3RvcigiI2ltZyIpOwogICAgICAgICAgICAgICAgcmV0dXJuIGltZyAmJiBpbWcuc3JjOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiJ0dXJib2ltYWdlaG9zdCIsCiAgICAgICAgdXJsOi9eaHR0cHM/OlwvXC93d3dcLnR1cmJvaW1hZ2Vob3N0XC5jb21cLy9pLAogICAgICAgIHhocjogewogICAgICAgICAgICB1cmw6ICIuYmJjX2xpbmsiLAogICAgICAgICAgICBxdWVyeTogIiNpbWFnZWlkIgogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZToiZnJlZXBpayIsCiAgICAgICAgdXJsOi9eaHR0cHM/OlwvXC93d3dcLmZyZWVwaWtcLmNvbVwvL2ksCiAgICAgICAgeGhyOiB7CiAgICAgICAgICAgIHVybDogIi5zaG93Y2FzZV9fbGluayIsCiAgICAgICAgICAgIHF1ZXJ5OiAiaW1nW2ZldGNocHJpb3JpdHldIgogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogImltZ3RyYWZmaWMiLAogICAgICAgIHI6IC9eKGh0dHBzOlwvXC9pbWd0cmFmZmljXC5jb21cL1xkKylzXC8vLAogICAgICAgIHM6ICIkMS8iCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJkYWlseW1haWwiLAogICAgICAgIHVybDogL15odHRwczpcL1wvKHd3d1wuKT9kYWlseW1haWxcLmNvXC51a1wvL2ksCiAgICAgICAgeGhyOiB7CiAgICAgICAgICAgIHVybDogImFbaHJlZio9Jy9hcnRpY2xlJ10iLAogICAgICAgICAgICBxdWVyeTogInZpZGVvLGltZy5pbWctc2hhcmUsW2RhdGEtdGVzdGlkPSdpbWFnZS1jb21wb25lbnQnXT5pbWciCiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiemVyb2NoYW4iLAogICAgICAgIHVybDogL15odHRwczpcL1wvKHd3d1wuKT96ZXJvY2hhblwubmV0XC8vaSwKICAgICAgICB4aHI6IHsKICAgICAgICAgICAgdXJsOiAiYS50aHVtYiIsCiAgICAgICAgICAgIHF1ZXJ5OiAiI2xhcmdlPmEucHJldmlldyIKICAgICAgICB9CiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJydXRyYWNrZXIiLAogICAgICAgIHVybDogL15odHRwczpcL1wvcnV0cmFja2VyXC5uZXRcLy9pLAogICAgICAgIGdldEltYWdlOiBmdW5jdGlvbihhKSB7CiAgICAgICAgICAgIGlmIChhICYmIC9mYXN0cGljXC5ydS8udGVzdChhLmhyZWYpKSB7CiAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlZCA9IGEuaHJlZi5tYXRjaCgvXC4oXHcrKVwuaHRtbCgmfCQpLyk7CiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlZCAmJiB0aGlzLnNyYy5yZXBsYWNlKCIvdGh1bWIvIiwgIi9iaWcvIikucmVwbGFjZSgvXHcrKFw/Lip8JCkvLCBtYXRjaGVkWzFdKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogInJ1bGUzNC5wYWhlYWwiLAogICAgICAgIHVybDogL15odHRwczpcL1wvcnVsZTM0XC5wYWhlYWxcLm5ldFwvLywKICAgICAgICBnZXRJbWFnZTogZnVuY3Rpb24oYSwgcCkgewogICAgICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5zcmMubWF0Y2goLy4qXC9fdGh1bWJzXC8oKC4uKSguLikuKilcLy8pOwogICAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICByZXN1bHQgPSBgaHR0cHM6Ly9yMzRpLnBhaGVhbC1jZG4ubmV0LyR7cmVzdWx0WzJdfS8ke3Jlc3VsdFszXX0vJHtyZXN1bHRbMV19YDsKICAgICAgICAgICAgICAgIGlmIChwWzFdICYmIHBbMV0uZGF0YXNldC5leHQgPT09ICJtcDQiKSByZXN1bHQgPSAidmlkZW86IiArIHJlc3VsdDsKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJhbWF6b24iLAogICAgICAgIHVybDogL15odHRwcz86XC9cL3d3d1wuYW1hem9uXC4vLAogICAgICAgIGxhenlBdHRyOiAiZGF0YS1hLWhpcmVzIiwKICAgICAgICByOiBbL18/KF9BQ198X0NSMCkuKlwuLywgL1wuX1MuXGQrXF8/L10sCiAgICAgICAgczogWyIiLCAiIl0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogImhlbnRhaWdpZnoiLAogICAgICAgIHVybDogL15odHRwczpcL1wvaGVudGFpZ2lmelwuY29tLywKICAgICAgICByOiAvLXRodW1ibmFpbC4qLywKICAgICAgICBzOiAiLmdpZiIKICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogIkJhbmd1bWkiLAogICAgICAgIHVybDogL15odHRwczpcL1wvKGJnbXxiYW5ndW1pKVwudHZcLy8sCiAgICAgICAgcjogWyIvYy8iLCIvbS8iXSwKICAgICAgICBzOiAiL2wvIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAicG9ybmdpZm1hZyIsCiAgICAgICAgdXJsOiAvXmh0dHBzOlwvXC9wb3JuZ2lmbWFnXC5jb20vLAogICAgICAgIHhocjogewogICAgICAgICAgICB1cmw6ICIudGh1bWItaW1hZ2U+YSIsCiAgICAgICAgICAgIHF1ZXJ5OiAiLnNpbmdsZS1pbWFnZT5pbWciCiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiYmVoYW5jZSIsCiAgICAgICAgdXJsOiAvXmh0dHBzOlwvXC93d3dcLmJlaGFuY2VcLm5ldC8sCiAgICAgICAgeGhyOiB7CiAgICAgICAgICAgIHVybDogL15cL2dhbGxlcnlcLy8sCiAgICAgICAgICAgIHF1ZXJ5OiAiaW1nW2NsYXNzXj0nSW1hZ2VFbGVtZW50LWltYWdlJ10iCiAgICAgICAgfSwKICAgICAgICBnZXRFeHRTcmM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBpZiAodGhpcy5jbGFzc05hbWUgJiYgdGhpcy5jbGFzc05hbWUuaW5kZXhPZiAmJiB0aGlzLmNsYXNzTmFtZS5pbmRleE9mKCJQcm9qZWN0Q292ZXJOZXVlLWxpbmsiKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgIGxldCBpbWcgPSB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCJwaWN0dXJlPmltZyIpOwogICAgICAgICAgICAgICAgaWYgKGltZykgcmV0dXJuIGltZy5zcmM7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJwb3N0aW1nIGhvc3QiLAogICAgICAgIHNyYzogL15odHRwczpcL1wvaVwucG9zdGltZ1wuY2MvLAogICAgICAgIHhocjogewogICAgICAgICAgICB1cmw6IC9eaHR0cHM6XC9cL3Bvc3RpbWdcLmNjXC8vLAogICAgICAgICAgICBxdWVyeTogIiNtYWluLWltYWdlIgogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogInBvc3RpbWcgTGluayIsCiAgICAgICAgeGhyOiB7CiAgICAgICAgICAgIHVybDogL15odHRwczpcL1wvcG9zdGltZ1wuY2NcLy8sCiAgICAgICAgICAgIHF1ZXJ5OiBmdW5jdGlvbihodG1sLCBkb2MsIHVybCkgewogICAgICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKCJnYWxsZXJ5IikgIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgdXJscyA9IFtdOwogICAgICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChkb2MucXVlcnlTZWxlY3RvckFsbCgiI3RodW1iLWxpc3Q+LnRodW1iLWNvbnRhaW5lciIpLCBlbGUgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgaG90bGluayA9IGVsZS5kYXRhc2V0LmhvdGxpbms7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuYW1lID0gZWxlLmRhdGFzZXQubmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGV4dCA9IGVsZS5kYXRhc2V0LmV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhvdGxpbmsgJiYgbmFtZSAmJiBleHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybHMucHVzaChgaHR0cHM6Ly9pLnBvc3RpbWcuY2MvJHtob3RsaW5rfS8ke25hbWV9LiR7ZXh0fWApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHVybHMubGVuZ3RoKSByZXR1cm4gdXJsczsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxldCBpbWcgPSBkb2MucXVlcnlTZWxlY3RvcigiI2Rvd25sb2FkIik7CiAgICAgICAgICAgICAgICBpZiAoaW1nKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGltZy5ocmVmOwogICAgICAgICAgICAgICAgfSBlbHNlIGltZyA9IGRvYy5xdWVyeVNlbGVjdG9yKCIjbWFpbi1pbWFnZSIpOwogICAgICAgICAgICAgICAgcmV0dXJuIGltZyAmJiBpbWcuc3JjOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAicG9zdGltZyIsCiAgICAgICAgdXJsOiAvXmh0dHBzOlwvXC9wb3N0aW1nXC5jYy8sCiAgICAgICAgeGhyOiB7CiAgICAgICAgICAgIHVybDogIi50aHVtYj5hIiwKICAgICAgICAgICAgcXVlcnk6ICIjbWFpbi1pbWFnZSIKICAgICAgICB9CiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJpbWFnZWJhbSIsCiAgICAgICAgc3JjOiAvXmh0dHBzOlwvXC90aHVtYnNcZCpcLmltYWdlYmFtXC5jb21cLy8sCiAgICAgICAgeGhyOiB7CiAgICAgICAgICAgIHVybDogZnVuY3Rpb24oYSwgcCkgewogICAgICAgICAgICAgICAgbGV0IGltYWdlSWQgPSB0aGlzLnNyYy5tYXRjaCgvXC8oXHcrKVxfXHdcLi8pOwogICAgICAgICAgICAgICAgaWYgKCFpbWFnZUlkKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgIHJldHVybiBgaHR0cHM6Ly93d3cuaW1hZ2ViYW0uY29tL3ZpZXcvJHtpbWFnZUlkWzFdfWA7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHF1ZXJ5OiAiLm1haW4taW1hZ2UiCiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiWXVwb28gbWFpbiIsCiAgICAgICAgdXJsOiAvXGJ5dXBvb1wuY29tXC8vLAogICAgICAgIHhocjogewogICAgICAgICAgICB1cmw6IC9eXC9hbGJ1bXNcLy8sCiAgICAgICAgICAgIHF1ZXJ5OiAiW2RhdGEtdHlwZT1waG90b10+aW1nW2RhdGEtc3JjXSIsCiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiR29vZ2xlIHJldmlldyIsCiAgICAgICAgdXJsOiAvXGJnb29nbGVcLmNvbVwvLywKICAgICAgICByOiBbLz13XGQrXC1oXGQrXC1cdy8sIC89c1xkKy9dLAogICAgICAgIHM6IFsiPXMwLXYxIiwgIj1zMCJdCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJNQUwgQW5pbWUvTWFuZ2EiLAogICAgICAgIHNyYzogL15odHRwczpcL1wvY2RuXC5teWFuaW1lbGlzdFwubmV0LywKICAgICAgICByOiAvKFwvclwvXGQreFxkKyk/KFwvaW1hZ2VzXC8oYW5pbWV8bWFuZ2EpXC9cZCtcL1xkKylcLih3ZWJwfGpwZykuKy8sCiAgICAgICAgczogIiQybC5qcGciCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJhZmRpYW5jZG4iLAogICAgICAgIHVybDogL15odHRwczpcL1wvYWZkaWFuXC5uZXRcLy8sCiAgICAgICAgcjogIi8ody9cXGQrLyk/aC9cXGQrL2kiLAogICAgICAgIHM6ICIiCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICLmkLrnqIsiLAogICAgICAgIHVybDogL15odHRwczpcL1wvKHd3d1wufG1cLik/Y3RyaXBcLmNvbS8sCiAgICAgICAgcjogL18oQ3xEKV9cZFteXC5dKi9pLAogICAgICAgIHM6ICIiCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJub3pvbWkiLAogICAgICAgIHVybDogIl5odHRwczovL25vem9taVxcLmxhIiwKICAgICAgICByOiAiLy8vcXRuKFxcLi4qKVxcLlxcdytcXC53ZWJwL2kiLAogICAgICAgIHM6ICIvL3ckMS53ZWJwIgogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiaGVudGFpemFwIiwKICAgICAgICB1cmw6IC9cYmhlbnRhaXphcFwuY29tXC8vLAogICAgICAgIHI6IC90XC5qcGckLywKICAgICAgICBzOiAiLndlYnAiCiAgICB9LAogICAgewogICAgICAgIG5hbWU6ICJXamNvZGVzIiwKICAgICAgICB1cmw6IC9eaHR0cHM6XC9cL1teXC5dK1wud2pjb2Rlc1wuY29tXC8vLAogICAgICAgIGdldEltYWdlOiBmdW5jdGlvbihhLCBwKSB7CiAgICAgICAgICAgIGlmICghcFswXSkgcmV0dXJuOwogICAgICAgICAgICBsZXQgZHRFbGU7CiAgICAgICAgICAgIGlmIChkdEVsZSA9IHBbMF0ucXVlcnlTZWxlY3RvcigiW2Q9dF0iKSkgewogICAgICAgICAgICAgICAgbGV0IG9uY2xpY2sgPSBkdEVsZS5nZXRBdHRyaWJ1dGUoIm9uY2xpY2siKTsKICAgICAgICAgICAgICAgIGlmIChvbmNsaWNrKSByZXR1cm4gb25jbGljay5yZXBsYWNlKC8uKmRvd25sb2FkX2ZpbGVcKCcoW14nXSspLiovLCAiJDEiKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICAgbmFtZTogImFuaW1lLXBpY3R1cmVzIiwKICAgICAgICB1cmw6IC9eaHR0cHM6XC9cL2FuaW1lXC1waWN0dXJlc1wubmV0XC8vLAogICAgICAgIHhocjogewogICAgICAgICAgICB1cmw6IC9eXC9wb3N0c1wvLywKICAgICAgICAgICAgcXVlcnk6ICJhLmljb24tZG93bmxvYWQiCiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAiaGVudGFpLXNoYXJpbmciLAogICAgICAgIHVybDogL15odHRwczpcL1wvaGVudGFpXC1zaGFyaW5nXC5uZXRcLy8sCiAgICAgICAgZ2V0SW1hZ2U6IGZ1bmN0aW9uKGEsIHApIHsKICAgICAgICAgICAgaWYgKGEgJiYgYS5ocmVmLmluZGV4T2YoImh0dHBzOi8vaGVudGFpLXNoYXJpbmcubmV0L255YWEvIikgPT0gMCkgewogICAgICAgICAgICAgICAgbGV0IGxpbmsgPSBhdG9iKGEuaHJlZi5yZXBsYWNlKCJodHRwczovL2hlbnRhaS1zaGFyaW5nLm5ldC9ueWFhLyIsICIiKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gL1wuKD86anBlP3xwbilnLy50ZXN0KGxpbmspID8gbGluayA6ICcnOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICBuYW1lOiAic3RyZWFtYWluIiwKICAgICAgICB1cmw6ICJeaHR0cHM6Ly8od3d3XFwuKT9pbWcoPzppbm58c2VkKVxcLmNvbS8iLAogICAgICAgIHhocjogewogICAgICAgICAgICB1cmw6ICIvXmh0dHBzOi8vKHd3d1xcLik/aW1nKD86aW5ufHNlZClcXC5jb20vcC9bXFx3LV0vIiwKICAgICAgICAgICAgcXVlcnk6ICcuc3dpcGVyLXNsaWRlLC5kb3dubG9hZHMgYScKICAgICAgICB9CiAgICB9Cl07Cg=="},{"meta":{"name":"pvcep_lang.js","url":"https://update.greasyfork.org/scripts/440698/1653424/pvcep_lang.js","ts":1758060364744,"mimetype":"text/javascript"},"source":"Y29uc3QgbGFuZ0RhdGEgPSBbIAp7CiAgICBuYW1lOiAiRW5nbGlzaCIsCiAgICBtYXRjaDogWyJlbiJdLAogICAgbGFuZzogewogICAgICAgIC8vRW5nbGlzaCBieSBSWC0zMjAwLgogICAgICAgIHNhdmVCdG46ICJPSyIsCiAgICAgICAgc2F2ZU5hbWU6ICJTYXZlIG5hbWUiLAogICAgICAgIHNhdmVOYW1lVGlwOiAiU2F2ZSBpbWFnZXMgd2l0aCB0aGUgbmFtZSIsCiAgICAgICAgc2F2ZU5hbWVBZGRUaXRsZTogIkFkZCB0aXRsZSB0byBzYXZlIG5hbWUiLAogICAgICAgIHNpemU6ICJTaXplIiwKICAgICAgICBhbGw6ICJBbGwiLAogICAgICAgIGJpZ1NpemU6ICJCaWcgU2l6ZSIsCiAgICAgICAgaWNvblNpemU6ICJJY29uIiwKICAgICAgICBhcmlhMkhvc3Q6ICJBcmlhMiBzZXJ2ZXIiLAogICAgICAgIGFyaWEyVG9rZW46ICJBcmlhMiB0b2tlbiIsCiAgICAgICAgcG9zdDJBcmlhMjogIlBvc3QgdG8gYXJpYTIiLAogICAgICAgIGRlZmF1bHQ6ICJEZWZhdWx0IiwKICAgICAgICB0ZXh0Rmlyc3Q6ICJJbmZvIGZpcnN0IGlmIGV4aXN0IiwKICAgICAgICBvbmx5VXJsOiAiT25seSB3aXRoIFVSTCIsCiAgICAgICAgdXJsQW5kVGV4dDogIlVSTCArIEluZm8iLAogICAgICAgIGRvd25sb2FkOiAiRG93bmxvYWQiLAogICAgICAgIHNhdmVCdG5UaXBzOiAic29tZSBvcHRpb25zIG5lZWQgdG8gcmVmcmVzaCB0aGUgcGFnZSB0byB0YWtlIGVmZmVjdCIsCiAgICAgICAgYWRkaXRpb25hbEZlYXR1cmU6ICJBZGRpdGlvbmFsIGZlYXR1cmUsIHRha2UgZWZmZWN0IHdoZW4gYWx0a2V5IGlzIHByZXNzZWQiLAogICAgICAgIGludmVydEFkZGl0aW9uYWxGZWF0dXJlOiAiSW52ZXJ0IHNob3J0Y3V0IGtleXMsIHVzZSBhZGRpdGlvbmFsIGZlYXR1cmVzIGJ5IGRlZmF1bHQiLAogICAgICAgIGNvcHk6ICJDb3B5IGxpbmsiLAogICAgICAgIGNvcHlJbWc6ICJDb3B5IGltYWdlIGRhdGEiLAogICAgICAgIG9wZW5Jbk5ld1RhYjogIk9wZW4gaW4gTmV3IFRhYiIsCiAgICAgICAgY2xvc2VCdG46ICJDYW5jZWwiLAogICAgICAgIGludmVydEJ0bjogIkludmVydCIsCiAgICAgICAgY29tcGFyZUJ0bjogIkNvbXBhcmUiLAogICAgICAgIHNlbGVjdEFsbEJ0bjogIlNlbGVjdCBBbGwiLAogICAgICAgIGNsb3NlQnRuVGlwczogImNhbmNlbCB0aGlzIHNldHRpbmcgYW5kIHJlc3RvcmUgYWxsIG9wdGlvbnMiLAogICAgICAgIHJlc2V0TGluazogIlJlc3RvcmUgZGVmYXVsdCBzZXR0aW5ncyIsCiAgICAgICAgcmVzZXRMaW5rVGlwczogInJlc3RvcmUgYWxsIHNldHRpbmdzIHRvIGRlZmF1bHQgdmFsdWVzIiwKICAgICAgICBzaGFyZTogIlNoYXJlIiwKICAgICAgICBzdWl0TG9uZ0ltZzogIlN1aXQgbG9uZyBwaWNzIGluIHNjcm9sbCB3aW5kb3ciLAogICAgICAgIGdsb2JhbGtleXM6ICJHbG9iYWwga2V5cyBmb3IgcHJldmlldzogIiwKICAgICAgICBnbG9iYWxrZXlzUHJlc3M6ICJQcmVzcyB0byB0b2dnbGUgcHJldmlldyIsCiAgICAgICAgZ2xvYmFsa2V5c0hvbGQ6ICJIb2xkIHRvIGVuYWJsZSBwcmV2aWV3IiwKICAgICAgICBnbG9iYWxrZXlzVHlwZTogIk1ldGhvZCB0byBlbmFibGUgcHJldmlldyIsCiAgICAgICAgY2xvc2VBZnRlclByZXZpZXc6ICJDbG9zZSB0aGUgcGljdHVyZSB3aW5kb3cgYWZ0ZXIgcHJldmlldyIsCiAgICAgICAgcHJldmlld01heFNpemU6ICJNYXhpbXVtIHNpemUgb2YgcHJldmlldyB3aW5kb3ciLAogICAgICAgIHByZXZpZXdNYXhTaXplVGlwOiAiV2hlbiB0aGUgcHJldmlldyB3aW5kb3cgaXMgbGFyZ2VyIHRoYW4gdGhlIHNldCBzaXplLCBzY2FsZSB0aGUgcHJldmlldyB3aW5kb3cuIDAgPSBkaXNhYmxlZCIsCiAgICAgICAgbG9hZEFsbDogIkxvYWQgbW9yZSBwYWdlcyIsCiAgICAgICAgbG9hZGVkQWxsOiAiTG9hZCBjb21wbGV0ZWQiLAogICAgICAgIGxvYWRpbmc6ICJMb2FkaW5nIC4uLiIsCiAgICAgICAgbG9hZEFsbFRpcDogIkxvYWQgdGhlIHBpY3R1cmUgb24gdGhlIG5leHQgcGFnZSIsCiAgICAgICAgdmlld21vcmVFbmRsZXNzOiAiTG9hZCBtb3JlIHBpY3MgaW4gdmlld21vcmUgd2hlbiBzY3JvbGwgdG8gYm90dG9tIiwKICAgICAgICBmaWRkbGU6ICJPcGVyYXRlIiwKICAgICAgICBmaWRkbGVUaXA6ICJQb3AtdXAgcGljdHVyZXMgZm9yIGNvbXBsZXggb3BlcmF0aW9ucyIsCiAgICAgICAgYWRkSW1hZ2VVcmxzOiAiQWRkIGltYWdlIiwKICAgICAgICBhZGRJbWFnZVVybHNUaXBzOiAiQWRkIG1vcmUgaW1hZ2VzIHZpYSB1cmwiLAogICAgICAgIG9wZW5JbWFnZXM6ICJMb2NhbCBpbWFnZSIsCiAgICAgICAgb3BlbkltYWdlc1RpcHM6ICJDbGljayB0byBpbXBvcnQgbG9jYWwgaW1hZ2VzIiwKICAgICAgICBjbG9zZUZpcnN0OiAiQ2xvc2UgdGhlIGV4aXN0aW5nIEdhbGxlcnkgZmlyc3QiLAogICAgICAgIGNvbGxlY3Q6ICJDb2xsZWN0aW9uIiwKICAgICAgICBjb2xsZWN0ZWQ6ICJIYXMgYmVlbiBjb2xsZWN0ZWQiLAogICAgICAgIGV4aXRDb2xsZWN0aW9uOiAiRXhpdCBjb2xsZWN0aW9uIiwKICAgICAgICBleGl0Q29sbGVjdGlvblRpcDogIkNsaWNrIHRvIGV4aXQgdGhlIGNvbGxlY3Rpb24gbW9kZSIsCiAgICAgICAgbm9Db2xsZWN0aW9uWWV0OiAiWW91IGhhdmUgbm8gcGljdHVyZSBpbiB0aGUgY29sbGVjdGlvbiIsCiAgICAgICAgY29sbGVjdERldGFpbDogIkRlc2NyaXB0aW9uIiwKICAgICAgICBjb2xsZWN0RGV0YWlsVGlwOiAiQWRkIHNvbWUgZGVzY3JpcHRpb25zIHRvIHlvdXIgZmF2b3JpdGUgcGljdHVyZXMiLAogICAgICAgIHBsYXlTbGlkZTogIlBsYXkgc2xpZGVzaG93IiwKICAgICAgICBzbGlkZUdhcDogIkludGVydmFsIChzKSIsCiAgICAgICAgc2xpZGVHYXBUaXA6ICJJbnRlcnZhbCwgdW5pdCAoc2Vjb25kcykiLAogICAgICAgIHNsaWRlQmFjazogIkJhY2siLAogICAgICAgIHNsaWRlQmFja1RpcDogIlBsYXkgZnJvbSBiYWNrIHRvIGZyb250IiwKICAgICAgICBzbGlkZVJhbmRvbTogIlJhbmRvbSIsCiAgICAgICAgc2xpZGVXYWl0OiAiV2FpdCBmb3IgaW1hZ2UgcmVhZGluZyIsCiAgICAgICAgc2xpZGVXYWl0VGlwOiAiVGhlIGNvdW50ZG93biBzdGFydHMgYWZ0ZXIgZWFjaCBpbWFnZSBpcyBjb21wbGV0ZWx5IHJlYWQuIiwKICAgICAgICBzbGlkZVNraXBFcnJvcjogIlNraXAgZXJyb3IgcGljdHVyZXMiLAogICAgICAgIHNsaWRlU2tpcEVycm9yVGlwOiAiUXVpY2tseSBza2lwIHRvIHJlYWQgdGhlIGVycm9yIHBpY3R1cmVzIiwKICAgICAgICB0eXBlOiAiQ2F0ZWdvcnkiLAogICAgICAgIHR5cGVUaXA6ICJTZWxlY3QgaW1hZ2UgY2F0ZWdvcnkiLAogICAgICAgIHNob3dXaXRoUnVsZXM6ICJGb3JjZSBzaG93IGljb24gd2l0aCBydWxlIiwKICAgICAgICBzaG93V2l0aFJ1bGVzVGlwOiAiU2hvdyBpY29uIGlmIHRoZSBpbWFnZSBtYXRjaGVkIHJ1bGVzIG5vIG1hdHRlciB3aGljaCBzaXplIGl0IGlzIiwKICAgICAgICBhZHZhbmNlZFJ1bGVzOiAiQWR2YW5jZWQgUnVsZXMiLAogICAgICAgIGFkdmFuY2VkUnVsZXNUaXA6ICJNYXRjaGVkIGJ5IGFkdmFuY2VkIHJ1bGVzIiwKICAgICAgICB0cFJ1bGVzOiAiV2lsZGNhcmQgcnVsZXMiLAogICAgICAgIHRwUnVsZXNUaXA6ICJNYXRjaGVkIGJ5IHdpbGRjYXJkIHJ1bGVzIiwKICAgICAgICBzY2FsZVJ1bGVzOiAiWm9vbWVkIiwKICAgICAgICBzY2FsZVJ1bGVzVGlwOiAiVGhlIGltYWdlIHdoaWNoIGlzIGZpbmRlZCBhdXRvbWF0aWNhbGx5IGJ1dCBzY2FsZWQiLAogICAgICAgIG5vU2NhbGVSdWxlczogIk5vIHNjYWxpbmciLAogICAgICAgIG5vU2NhbGVSdWxlc1RpcDogIlRoZSBpbWFnZSB3aGljaCBpcyBmaW5kZWQgYXV0b21hdGljYWxseSBidXQgd2l0aG91dCBzY2FsZSIsCiAgICAgICAgc21hbGxSdWxlczogIlNtYWxsIHNpemUiLAogICAgICAgIHNtYWxsUnVsZXNUaXA6ICJTbWFsbCBzaXplIGltYWdlLCB0aGUgYWN0dWFsIHNpemUgb2YgdGhlIGhlaWdodCBhbmQgd2lkdGggYXJlIGxlc3MgdGhhbiAjdCMgcGl4ZWxzIiwKICAgICAgICBsb2NrU2l6ZVRpcDogIkxvY2sgdGhlIG1heCBzaXplIiwKICAgICAgICBjb21tYW5kOiAiQ29tbWFuZCIsCiAgICAgICAgY29tbWFuZFRpcDogIkNvbW1hbmQgTWVudSIsCiAgICAgICAgb25saW5lRWRpdDogIk9ubGluZSBlZGl0aW5nIiwKICAgICAgICBvbmxpbmVFZGl0VGlwOiAiRWRpdCB0aGlzIGltYWdlIG9ubGluZSB1c2luZyAjdCMiLAogICAgICAgIG9wZW5Jbk5ld1dpbmRvdzogIk9wZW4gaW4gbmV3IHdpbmRvdyIsCiAgICAgICAgb3BlbkluTmV3V2luZG93VGlwOiAiT3BlbiBpbWFnZSBpbiBuZXcgd2luZG93IiwKICAgICAgICBmaW5kSW5QYWdlOiAiRmluZCBJbiBQYWdlIiwKICAgICAgICBmaW5kSW5QYWdlVGlwOiAiU2Nyb2xsIHRvIHRoZSBjdXJyZW50IGltYWdlIGluIHBhZ2UiLAogICAgICAgIHZpZXdDb2xsZWN0aW9uOiAiVmlldyBDb2xsZWN0aW9uIiwKICAgICAgICB2aWV3Q29sbGVjdGlvblRpcDogIlZpZXcgYWxsIGNvbGxlY3RlZCBpbWFnZXMiLAogICAgICAgIGluQ29sbGVjdGlvbjogIlVuYWJsZSB0byB1c2UgaW4gQ29sbGVjdGlvbiBtb2RlIiwKICAgICAgICBjYW50RmluZDogIlRoZSBpbWFnZSBpcyBub3QgaW4gdGhlIGRvY3VtZW50LCBvciBpdCBpcyBoaWRkZW4gYW5kIGNhbm5vdCBiZSBsb2NhdGVkISIsCiAgICAgICAgZXhwb3J0SW1hZ2VzOiAiRXhwb3J0IGFsbCBJbWFnZXMiLAogICAgICAgIGV4cG9ydEltYWdlc1RpcDogIkV4cG9ydCBhbGwgc2hvd24gYmlnIHNpemUgaW1hZ2VzIHRvIG5ldyB3aW5kb3ciLAogICAgICAgIGRvd25sb2FkSW1hZ2U6ICJEb3dubG9hZCBhbGwgc2hvd24iLAogICAgICAgIGRvd25sb2FkSW1hZ2VUaXA6ICJEb3dubG9hZCB0aGUgY3VycmVudCBzaG93biBwaWN0dXJlcyIsCiAgICAgICAgY29weUltYWdlc1VybDogIkNvcHkgYWxsIGltYWdlcyBVcmxzIiwKICAgICAgICBjb3B5SW1hZ2VzVXJsVGlwOiAiQ29weSBhbGwgc2hvd24gYmlnIHNpemUgaW1hZ2UgVXJscyIsCiAgICAgICAgY29weVN1Y2Nlc3M6ICJDb3BpZWQgI3QjIFVybHMgc3VjY2Vzc2Z1bGx5IiwKICAgICAgICBhdXRvUmVmcmVzaDogIkF1dG8gbG9hZCBwYWdlIiwKICAgICAgICBhdXRvUmVmcmVzaFRpcDogIldoZW4gdGhlIGxhc3QgZmV3IGltYWdlcyBhcmUgdmlld2VkLCBzY3JvbGwgdGhlIHdpbmRvdyB0byB0aGUgYm90dG9tLCBzbyB0aGF0IHNvbWUgd2VicGFnZSB3aWxsIGxvYWQgdGhlIG5ldyBpbWFnZXMiLAogICAgICAgIGVudGVyRnVsbHNjOiAiRW50ZXIgZnVsbCBzY3JlZW4iLAogICAgICAgIGV4aXRGdWxsc2M6ICJFeGl0IGZ1bGwgc2NyZWVuIiwKICAgICAgICBjb25maWc6ICJTZXR0aW5ncyIsCiAgICAgICAgb3BlbkNvbmZpZzogIk9wZW4gU2V0dGluZ3MiLAogICAgICAgIHJ1bGVSZXF1ZXN0OiAiUnVsZSBSZXF1ZXN0IiwKICAgICAgICBjbG9zZUdhbGxlcnk6ICJDbG9zZSBHYWxsZXJ5IiwKICAgICAgICByZXR1cm5Ub0dhbGxlcnk6ICJCYWNrIHRvIHRoZSBHYWxsZXJ5IiwKICAgICAgICBwaWNJbmZvOiAiQ2xpY2sgdG8gY2hhbmdlIiwKICAgICAgICBwaWNOb3RlOiAiSW1nIGFubm90YXRpb24iLAogICAgICAgIHVybEZpbHRlcjogIlVybCBmaWx0ZXIiLAogICAgICAgIHVybEZpbHRlclRpcDogIklucHV0IGtleSB3b3JkcyBvciBSZWdleHAgdG8gZmlsdGVyIFVybHMiLAogICAgICAgIHJlc29sdXRpb246ICJJbWcgUmVzb2x1dGlvbiIsCiAgICAgICAgcGljTnVtOiAiTnVtYmVyIG9mIHBpY3R1cmVzIiwKICAgICAgICBwaWNUaXBzOiAiVmlldyBwaWN0dXJlcyB3aXRoIENUUkwga2V5IiwKICAgICAgICBzYXZlUGFnZVRpcHM6ICJTYXZlIHRoaXMgcGFnZSB0byBkb3dubG9hZCBhbGwgcGljcyIsCiAgICAgICAgc2NhbGVSYXRpbzogIlNjYWxpbmcgcmF0aW8iLAogICAgICAgIHNpbWlsYXJJbWFnZTogIlNlYXJjaGluZyBieSBpbWFnZSIsCiAgICAgICAgc2NhbGU6ICJab29tIiwKICAgICAgICBob3Jpem9udGFsRmxpcDogIkhvcml6b250YWwgZmxpcCIsCiAgICAgICAgdmVydGljYWxGbGlwOiAiVmVydGljYWwgZmxpcCIsCiAgICAgICAgYWN0dWFsQnRuOiAiVmlldyBvcmlnaW5hbCAoQSkiLAogICAgICAgIHNlYXJjaEJ0bjogIkZpbmQgdGhlIG9yaWdpbmFsIGltYWdlIChTKSIsCiAgICAgICAgZ2FsbGVyeUJ0bjogIlZpZXcgZ2FsbGVyeSAoRykiLAogICAgICAgIGN1cnJlbnRCdG46ICJWaWV3IGN1cnJlbnQgKEMpIiwKICAgICAgICBtYWduaWZpZXJCdG46ICJNYWduaWZpZXIgLyBab29NIChNKSIsCiAgICAgICAgcGljVGl0bGU6ICJQaWN0dXJlIFRpdGxlIiwKICAgICAgICBleHBvcnRJbWFnZXNVcmw6ICJFeHBvcnQgaW1hZ2UgVXJsIiwKICAgICAgICBleHBvcnRJbWFnZXNVcmxQb3A6ICJDdHJsK0MgdG8gY29weSBpbWFnZSBVcmwiLAogICAgICAgIGJlZ2luU2VhcmNoSW1nOiAiI3QjIGJlZ2luIFNlYXJjaCBJbWcgLi4uIiwKICAgICAgICBmaW5kTm9QaWM6ICJUaGUgb3JpZ2luYWwgaW1hZ2Ugd2FzIG5vdCBmb3VuZCIsCiAgICAgICAgZmluZE92ZXJCZWdpbkxvYWQ6ICIjdCMgZW5kIG9mIHRoZSBtYXAsIGZpbmQgI3QjIG1hdGNoaW5nIHBpY3R1cmVzLCBzdGFydCBsb2FkaW5nIHRoZSBmaXJzdCBvbmUiLAogICAgICAgIGxvYWROZXh0U2ltaWxhcjogIlRoZSBvcmlnaW5hbCBpbWFnZSBmYWlsZWQgdG8gbG9hZCwgdHJ5IHRvIGxvYWQgdGhlIG5leHQgcmVzdWx0Li4uIiwKICAgICAgICBsb2FkRXJyb3I6ICJMb2FkIGZhaWxlZCIsCiAgICAgICAgb3BlbkhvbWVQYWdlOiAiT3BlbiBIb21lIHBhZ2UiLAogICAgICAgIHBvc2l0aW9uOiAiRGlzcGxheSBwb3NpdGlvbiIsCiAgICAgICAgcG9zaXRpb25UaXBzOiAiSG9sZCBBTFQgdG8gaGlkZSIsCiAgICAgICAgdG9wTGVmdDogIlRoZSB0b3AgbGVmdCBjb3JuZXIgb2YgdGhlIHBpY3R1cmUiLAogICAgICAgIHRvcFJpZ2h0OiAiVGhlIHRvcCByaWdodCBjb3JuZXIgb2YgdGhlIHBpY3R1cmUiLAogICAgICAgIGJvdHRvbVJpZ2h0OiAiVGhlIGJvdHRvbSByaWdodCBjb3JuZXIgb2YgdGhlIHBpY3R1cmUiLAogICAgICAgIGJvdHRvbUxlZnQ6ICJUaGUgYm90dG9tIGxlZnQgY29ybmVyIG9mIHRoZSBwaWN0dXJlIiwKICAgICAgICB0b3BDZW50ZXI6ICJCZXNpZGUgdGhlIHBpY3R1cmUiLAogICAgICAgIGJvdHRvbUNlbnRlcjogIkJlbG93IHRoZSBwaWN0dXJlIiwKICAgICAgICBmbG9hdEJhcjogIlRvb2xiYXIiLAogICAgICAgIHByZXZpZXdGb2xsb3dNb3VzZTogIlNob3cgcHJldmlldyBiZXNpZGUgbW91c2UiLAogICAgICAgIHNob3dEZWxheTogIlNob3cgZGVsYXkiLAogICAgICAgIG1zOiAibXMiLAogICAgICAgIGhpZGU6ICJIaWRlIiwKICAgICAgICBoaWRlRGVsYXk6ICJIaWRlIGRlbGF5IiwKICAgICAgICBmb3JjZVNob3c6ICJTaG93IHRvb2xiYXIgb3ZlciBOb24tem9vbWVkIGltYWdlIGJleW9uZCB0aGF0IHNpemUsICIsCiAgICAgICAgZm9yY2VTaG93VGlwOiAiU2hvdyBmbG9hdGluZyB0b29sYmFyIHdoZW4gbm9uLXNjYWxlZCBpbWFnZSBzaXplIGV4Y2VlZHMgdGhlIHNpemUgc2V0IGJlbG93IiwKICAgICAgICBzaXplTGltaXRPcjogIkVmZmVjdGVkIGJ5IGhlaWdodCBPUiB3aWR0aCBvbmx5IiwKICAgICAgICBweDogInB4IiwKICAgICAgICBtaW5TaXplTGltaXQ6ICJTaG93IHRvb2xiYXIgb3ZlciBab29tZWQgaW1hZ2UgYmV5b25kIHRoYXQgc2l6ZSIsCiAgICAgICAgbWluU2l6ZUxpbWl0VGlwOiAiQWZ0ZXIgdGhlIGltYWdlIGlzIHNjYWxlZCAodGhlIG9yaWdpbmFsIHNpemUgb2YgdGhlIGltYWdlIGRvZXMgbm90IG1hdGNoIHRoZSBhY3R1YWwgc2l6ZSksIHRoZSBmbG9hdGluZyB0b29sYmFyIGlzIGRpc3BsYXllZCB3aGVuIHRoZSBzaG93biBpbWFnZSBsZW5ndGggaXMgZ3JlYXRlciB0aGFuIHRoZSBzZXQgdmFsdWUuIiwKICAgICAgICBkZWZhdWx0U2l6ZUxpbWl0OiAiRGVmYXVsdCBzaXplIGxpbWl0IGZvciBnYWxsZXJ5IiwKICAgICAgICBsaXN0ZW5CZzogIkxpc3RlbmluZyBiYWNrZ3JvdW5kIGltYWdlIiwKICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICJCYWNrZ3JvdW5kIENvbG9yIiwKICAgICAgICBsaXN0ZW5CZ1RpcDogIlNob3cgdG9vbGJhciBvbiB0aGUgZWxlbWVudCB3aXRoIHRoZSBiYWNrZ3JvdW5kIGltYWdlIiwKICAgICAgICBidXRvbk9yZGVyOiAiU29ydCBvZiB0b29sYmFyIGljb25zIiwKICAgICAgICBrZXlzRW5hYmxlOiAiRW5hYmxlIHNob3J0Y3V0cyIsCiAgICAgICAga2V5c0FjdHVhbDogIk9wZW4gdGhlIGJpZyBwaWN0dXJlIiwKICAgICAgICBrZXlzQWN0dWFsVGlwOiAiUHJlc3MgdGhpcyBidXR0b24gdG8gb3BlbiBhIGxhcmdlIGltYWdlIHdoZW4gZmxvYXRpbmcgYmFyIGFwcGVhcnMiLAogICAgICAgIGtleXNTZWFyY2g6ICJGaW5kIHRoZSBvcmlnaW5hbCBpbWFnZSIsCiAgICAgICAga2V5c1NlYXJjaFRpcDogIlByZXNzIHRoaXMgYnV0dG9uIHRvIGZpbmQgdGhlIG9yaWdpbmFsIGltYWdlIHdoZW4gZmxvYXRpbmcgYmFyIGFwcGVhcnMiLAogICAgICAgIGhlYWRTZWFyY2hUaXA6ICJTZWFyY2ggYnkgaW1hZ2UiLAogICAgICAgIGhlYWRTZWFyY2hBbGw6ICJTZWFyY2ggQWxsIiwKICAgICAgICBrZXlzQ3VycmVudDogIk9wZW4gdGhlIGN1cnJlbnQgcGljdHVyZSIsCiAgICAgICAga2V5c0N1cnJlbnRUaXA6ICJQcmVzcyB0aGlzIGJ1dHRvbiB0byBvcGVuIHRoZSBjdXJyZW50IGltYWdlIHdoZW4gZmxvYXRpbmcgYmFyIGFwcGVhcnMiLAogICAgICAgIGtleXNNYWduaWZpZXI6ICJPcGVuIHRoZSBtYWduaWZpZXIgdG8gb2JzZXJ2ZSIsCiAgICAgICAga2V5c01hZ25pZmllclRpcDogIlByZXNzIHRoaXMgYnV0dG9uIHRvIG9wZW4gdGhlIG1hZ25pZmllciB3aGVuIGZsb2F0aW5nIGJhciBhcHBlYXJzIiwKICAgICAgICBrZXlzR2FsbGVyeTogIk9wZW4gR2FsbGVyee+8iEdsb2JhbCB3aXRoIGZ1bmNLZXlz77yJIiwKICAgICAgICBrZXlzR2FsbGVyeVRpcDogIlByZXNzIHRoaXMgYnV0dG9uIHRvIG9wZW4gdGhlIEdhbGxlcnkgd2hlbiBmbG9hdGluZyBiYXIgYXBwZWFycyIsCiAgICAgICAgb3BlbkdhbGxlcnk6ICJPcGVuIEdhbGxlcnkiLAogICAgICAgIG1hZ25pZmllcjogIlpvb20iLAogICAgICAgIG1hZ25pZmllclJhZGl1czogIkRlZmF1bHQgcmFkaXVzIiwKICAgICAgICBtYWduaWZpZXJXaGVlbFpvb21FbmFibGVkOiAiRW5hYmxlIHdoZWVsIHpvb20iLAogICAgICAgIG1hZ25pZmllcldoZWVsWm9vbVJhbmdlOiAiWm9vbSByYXRpbyBmb3IgbWFnbmlmaWVyIiwKICAgICAgICBtYWduaWZpZXJTY2FsZUltYWdlOiAiWm9vbSBpbWFnZSBieSB3aGVlbCIsCiAgICAgICAgZ2FsbGVyeTogIkdhbGxlcnkiLAogICAgICAgIGdhbGxlcnlGaXRUb1NjcmVlbjogIlNjYWxlIHRoZSBpbWFnZSB0byBmaXQgdGhlIHNjcmVlbiIsCiAgICAgICAgZ2FsbGVyeUZpdFRvU2NyZWVuU21hbGw6ICJTY2FsZSB0aGUgc21hbGwgaW1hZ2UgYWxzbyIsCiAgICAgICAgZ2FsbGVyeUZpdFRvU2NyZWVuVGlwOiAiQWRhcHQgdG8gYmUgY29udGFpbiwgbm90IGNvdmVyIiwKICAgICAgICBnYWxsZXJ5U2Nyb2xsRW5kVG9DaGFuZ2U6ICJTd2l0Y2ggdGhlIGltYWdlIGFmdGVyIHRoZSBsb25nIHBpY3R1cmUgc2Nyb2xscyB0byB0aGUgZW5kIiwKICAgICAgICBnYWxsZXJ5U2Nyb2xsRW5kVG9DaGFuZ2VUaXA6ICJWYWxpZCBhZnRlciBjYW5jZWxpbmcgdGhlIHByZXZpb3VzIG9wdGlvbiIsCiAgICAgICAgZ2FsbGVyeUV4cG9ydFR5cGU6ICJEZWZhdWx0IHNvcnQgd2hlbiBpbWFnZXMgZXhwb3J0ZWQiLAogICAgICAgIGdyaWQ6ICJUaWxlIHNvcnRpbmciLAogICAgICAgIGdyaWRCaWc6ICJvcmlnaW5hbCBzb3J0aW5nIiwKICAgICAgICBsaXN0OiAiTGlzdCBzb3J0aW5nIiwKICAgICAgICBnYWxsZXJ5QXV0b0xvYWQ6ICJBdXRvbWF0aWNhbGx5IGxvYWQgbW9yZSBpbWFnZXMgb24gbmV4dCBwYWdlIiwKICAgICAgICBnYWxsZXJ5TG9hZEFsbDogIkF1dG9tYXRpY2FsbHkgcHJvY2VzcyBhbGwgcGFnZXMgd2hlbiBsb2FkaW5nIG1vcmUgaW1hZ2VzIiwKICAgICAgICBnYWxsZXJ5TG9hZEFsbFRpcDogIlRvbyBtYW55IHBhZ2VzIG1heSBhZmZlY3QgdGhlIGV4cGVyaWVuY2UiLAogICAgICAgIGdhbGxlcnlEb3dubG9hZFdpdGhaaXA6ICJDb21wcmVzcyB0byBaSVAgd2hlbiBkb3dubG9hZCBhbGwiLAogICAgICAgIGdhbGxlcnlEb3dubG9hZFdpdGhaaXBBbGVydDogIkNvbXByZXNzaW5nLCB3YWl0IGZvciBhIHdoaWxlIHBsZWFzZSIsCiAgICAgICAgZ2FsbGVyeVNjYWxlU21hbGxTaXplMTogIlRoZSBhY3R1YWwgc2l6ZSBpcyBsZXNzIHRoYW4gdGhlIGhlaWdodCBhbmQgd2lkdGgiLAogICAgICAgIGdhbGxlcnlTY2FsZVNtYWxsU2l6ZTI6ICJQaXhlbHMgYXJlIGdyb3VwZWQgaW50byBzbWFsbCBzaXplIGltYWdlcyIsCiAgICAgICAgZ2FsbGVyeVNob3dTbWFsbFNpemU6ICJTaG93IHNtYWxsIHNpemUgcGljdHVyZXMgYnkgZGVmYXVsdCIsCiAgICAgICAgZ2FsbGVyeVRyYW5zaXRpb246ICJTaG93IGVmZmVjdHMgd2hlbiBnYWxsZXJ5IHN3aXRjaCIsCiAgICAgICAgZ2FsbGVyeVNpZGViYXJQb3NpdGlvbjogIlRodW1ibmFpbCBiYXIgcG9zaXRpb24iLAogICAgICAgIGJvdHRvbTogIkJvdHRvbSIsCiAgICAgICAgcmlnaHQ6ICJSaWdodCIsCiAgICAgICAgbGVmdDogIkxlZnQiLAogICAgICAgIHRvcDogIlRvcCIsCiAgICAgICAgZ2FsbGVyeVNpZGViYXJTaXplOiAiSGVpZ2h0IiwKICAgICAgICBnYWxsZXJ5U2lkZWJhclNpemVUaXA6ICJUaGUgaGVpZ2h0IG9mIHRoZSB0aHVtYm5haWwgYmFyIChpZiBpdCBpcyBob3Jpem9udGFsKSBvciB0aGUgd2lkdGggKGlmIGl0IGlzIHZlcnRpY2FsKSIsCiAgICAgICAgZ2FsbGVyeU1heDE6ICJNYXhpbXVtIHByZWZldGNoIiwKICAgICAgICBnYWxsZXJ5TWF4MjogIlBpY3R1cmVzIChiZWZvcmUgYW5kIGFmdGVyKSIsCiAgICAgICAgZ2FsbGVyeUF1dG9ab29tOiAiWm9vbSBjaGFuZ2VzIGJhY2sgdG8gMTAwJSAoY2hyb21lKSIsCiAgICAgICAgZ2FsbGVyeUF1dG9ab29tVGlwOiAiSWYgeW91IHpvb20gaW4sIGNoYW5nZSB0aGUgem9vbSBvZiB0aGUgaW1hZ2UgYW5kIHNpZGViYXIgc2VjdGlvbnMgYmFjayB0byAxMDAlIGFuZCBpbmNyZWFzZSB0aGUgdmlld2FibGUgYXJlYSAob25seSB2YWxpZCB1bmRlciBjaHJvbWUpIiwKICAgICAgICBnYWxsZXJ5RGVzY3JpcHRpb25MZW5ndGgxOiAiTWF4aW11bSBvZiBhbm5vdGF0aW9uIGlzIiwKICAgICAgICBnYWxsZXJ5RGVzY3JpcHRpb25MZW5ndGgyOiAiQ2hhcmFjdGVycyIsCiAgICAgICAgZ2FsbGVyeUF1dG9PcGVuU2l0ZXM6ICJSZWd1bGFycyBvZiB1cmxzIGZvciBhdXRvIG9wZW5pbmcgZ2FsbGVyeSwgb25lIHBlciBsaW5lLCBzdGFydCB3aXRoIEAgZm9yIFZpZXdNb3JlIiwKICAgICAgICBkaXNhYmxlS2V5U2l0ZXM6ICJSZWd1bGFycyBvZiB1cmxzIGZvciBkaXNhYmxpbmcgc2hvcnRjdXQga2V5cywgb25lIHBlciBsaW5lIiwKICAgICAgICBhdXRvT3BlblZpZXdtb3JlOiAiQXV0byB2aWV3IG1vcmUgd2hlbiBvcGVuIGdhbGxlcnkiLAogICAgICAgIGdhbGxlcnlTZWFyY2hEYXRhOiAiU2l0ZSBydWxlcyBmb3Igc2VhcmNoLCBlbXB0eSBpdCB0byByZXN0b3JlIiwKICAgICAgICBnYWxsZXJ5RWRpdFNpdGU6ICJPbmxpbmUgZWRpdGluZyBzaXRlIiwKICAgICAgICBpbWdXaW5kb3c6ICJJbWdXaW5kb3ciLAogICAgICAgIGltZ1dpbmRvd0ZpdFRvU2NyZWVuOiAiQWRhcHQgdG8gdGhlIHNjcmVlbiIsCiAgICAgICAgaW1nV2luZG93Rml0VG9TY3JlZW5UaXA6ICJBZGFwdCB0byBiZSBjb250YWluLCBub3QgY292ZXIiLAogICAgICAgIGltZ1dpbmRvd0ZpdFRvU2NyZWVuV2hlblNtYWxsOiAiQWRhcHQgdG8gdGhlIHNjcmVlbiBldmVuIHdoZW4gaXQncyBzbWFsbCIsCiAgICAgICAgaW1nV2luZG93RGVmYXVsdFRvb2w6ICJUaGUgdG9vbCBzZWxlY3RlZCBieSBkZWZhdWx0IHdoZW4gb3BlbmluZyB0aGUgd2luZG93IiwKICAgICAgICBoYW5kOiAiSGFuZCIsCiAgICAgICAgcm90YXRlOiAiUm90YXRlIiwKICAgICAgICB6b29tOiAiTWFnbmlmaWVyIiwKICAgICAgICBpbWdXaW5kb3dFc2NLZXk6ICJFc2Mga2V5IHRvIGNsb3NlIiwKICAgICAgICBpbWdXaW5kb3dEYmxDbGlja0ltZ1dpbmRvdzogIkRvdWJsZSBjbGljayB0byBjbG9zZSIsCiAgICAgICAgaW1nV2luZG93Q2xpY2tPdXRzaWRlOiAiQ2xpY2sgb3ZlcmxheWVyIHRvIGNsb3NlIGJ5IiwKICAgICAgICBpbWdXaW5kb3dDbGlja091dHNpZGVUaXA6ICJPbmx5IGVuYWJsZSB3aGVuIE92ZXJsYXllciBpcyBzaG93biIsCiAgICAgICAgbm9uZTogIk5vbmUiLAogICAgICAgIGNsaWNrOiAiQ2xpY2siLAogICAgICAgIGRibGNsaWNrOiAiRG91YmxlIGNsaWNrIiwKICAgICAgICBpbWdXaW5kb3dPdmVybGF5ZXJTaG93bjogIk92ZXJsYXkiLAogICAgICAgIGltZ1dpbmRvd092ZXJsYXllckNvbG9yOiAiQ29sb3IgYW5kIE9wYWNpdHkiLAogICAgICAgIGltZ1dpbmRvd1NoaWZ0Um90YXRlU3RlcDE6ICJSb3RhdGUgd2hlbiBob2xkIGRvd24gdGhlIFNoaWZ0IGtleSBvbiBldmVyeSAiLAogICAgICAgIGltZ1dpbmRvd1NoaWZ0Um90YXRlU3RlcDI6ICJEZWdyZWUiLAogICAgICAgIGltZ1dpbmRvd01vdXNlV2hlZWxab29tOiAiTW91c2VXaGVlbCBab29tIiwKICAgICAgICBpbWdXaW5kb3dab29tUmFuZ2U6ICJab29tIFJhbmdlIiwKICAgICAgICBpbWdXaW5kb3dab29tUmFuZ2VUaXA6ICJab29tIHJhdGlvIChtdXN0IGJlIHBvc2l0aXZlKSIsCiAgICAgICAgb3RoZXJzOiAiT3RoZXIiLAogICAgICAgIHdhaXRJbWdMb2FkOiAiU3RhcnQgdG8gcGVyZm9ybSBvcGVyYXRpb25zIHN1Y2ggYXMgem9vbWluZyB1bnRpbCBpbWFnZSBpcyBsb2FkZWQiLAogICAgICAgIHdhaXRJbWdMb2FkVGlwOiAiV2hlbiBob2xkaW5nIGRvd24gdGhlIEN0cmwga2V5LCB5b3UgY2FuIHRlbXBvcmFyaWx5IGV4ZWN1dGUgb3Bwb3NpdGUgdG8gdGhpcyBzZXR0aW5nIiwKICAgICAgICBkZWJ1ZzogIkRlYnVnIG1vZGUiLAogICAgICAgIGN1c3RvbVJ1bGVzOiAiQ3VzdG9tIHJ1bGVzIGZvciBsYXJnZSBpbWFnZSIsCiAgICAgICAgZmlyc3RFbmdpbmU6ICJQcmVmZXJyZWQgKGZpcnN0KSBzZWFyY2ggZW5naW5lIiwKICAgICAgICByZWZyZXNoV2hlbkVycm9yOiAiUmVhZCBlcnJvciwgY2xpY2sgdG8gb3ZlcmxvYWQiLAogICAgICAgIHN3aXRjaFNsaWRlOiAiU3dpdGNoIHNpZGViYXIiLAogICAgICAgIHZpZXdtb3JlOiAiVmlldyBtb3JlIiwKICAgICAgICBjb3VudERvd246ICJDb3VudERvd24iLAogICAgICAgIGN1c3RvbUxhbmc6ICJDdXN0b20gbGFuZ3VhZ2UiLAogICAgICAgIGRlZmF1bHRMYW5nOiAiQXV0byBkZXRlY3QiLAogICAgICAgIGhpZGVJY29uOiAiSGlkZSBpY29uIiwKICAgICAgICBpbml0U2hvdzogIlNob3cgcHJldmlldyBieSBkZWZhdWx0IiwKICAgICAgICBzdGF5T3V0OiAiTGV0IGZsb2F0IGJhciBzdGF5IG91dCBvZiB0aGUgaW1hZ2UiLAogICAgICAgIGdhbGxlcnlEb3dubG9hZEdhcDogIkRvd25sb2FkIGludGVydmFsIiwKICAgICAgICBmb3JtYXRDb252ZXJzaW9uOiAiQ29udmVydCB0aGUgaW1hZ2UgZm9ybWF0IHdoZW4gZG93bmxvYWRpbmcuIE9uZSBydWxlIHBlciBsaW5lIiwKICAgICAgICBnYWxsZXJ5RGlzYWJsZUFycm93OiAiRGlzYWJsZSBhcnJvdyBrZXkiLAogICAgICAgIHBvc2l0aW9uRml4ZWQ6ICJGaXhlZCBwb3NpdGlvbiIsCiAgICAgICAgc3dpdGNoU3RvcmVMb2M6ICJNZW1vcnkgcG9zaXRpb24gcmV0ZW50aW9uIGR1cmluZyBzd2l0Y2hpbmciCiAgICB9Cn0sIAp7CiAgICBuYW1lOiAiQXJhYmljIiwKICAgIG1hdGNoOiBbImFyIiwgImFyLUFFIiwgImFyLUJIIiwgImFyLURaIiwgImFyLUVHIiwgImFyLUlRIiwgImFyLUpPIiwgImFyLUtXIiwgImFyLUxCIiwgImFyLUxZIiwgImFyLU1BIiwgImFyLU9NIiwgImFyLVFBIiwgImFyLVNBIiwgImFyLVNZIiwgImFyLVROIiwgImFyLVlFIl0sCiAgICBlbmNvZGU6IHRydWUsIC8vIEluIEZpcmVmb3gsIEFyYWJpYyBjaGFyYWN0ZXJzIG1heSBjYXVzZSBpc3N1ZXMuCiAgICBsYW5nOiB7CiAgICAgICAgLy8gVHJhbnNsYXRlZCBieSBQcmFua3N0ZXIgMTk5ICh2ZmdnZjk1NTY1KS4KICAgICAgICBzYXZlQnRuOiAiJUQ4JUFEJUQ5JTgxJUQ4JUI4IiwKICAgICAgICBzYXZlTmFtZTogIiVEOCVBRCVEOSU4MSVEOCVCOCUyMCVEOCVBNyVEOSU4NCVEOCVBNyVEOCVCMyVEOSU4NSIsCiAgICAgICAgc2F2ZU5hbWVUaXA6ICIlRDglQTclRDglQUQlRDklODElRDglQjglMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElMjAlRDglQTglRDglQTclRDklODQlRDglQTclRDglQjMlRDklODUiLAogICAgICAgIHNhdmVOYW1lQWRkVGl0bGU6ICJBZGQgdGl0bGUgdG8gc2F2ZSBuYW1lIiwKICAgICAgICBzaXplOiAiU2l6ZSIsCiAgICAgICAgYWxsOiAiQWxsIiwKICAgICAgICBiaWdTaXplOiAiQmlnIFNpemUiLAogICAgICAgIGljb25TaXplOiAiSWNvbiIsCiAgICAgICAgYXJpYTJIb3N0OiAiJUQ4JUFFJUQ4JUE3JUQ4JUFGJUQ5JTg1JTIwQXJpYTIiLAogICAgICAgIGFyaWEyVG9rZW46ICIlRDglQjElRDklODUlRDglQjIlMjBBcmlhMiIsCiAgICAgICAgcG9zdDJBcmlhMjogIiVEOCVBNyVEOSU4NCVEOSU4NiVEOCVCNCVEOCVCMSUyMCVEOCVBNSVEOSU4NCVEOSU4OSUyMGFyaWEyIiwKICAgICAgICBkZWZhdWx0OiAiJUQ4JUE3JUQ5JTgxJUQ4JUFBJUQ4JUIxJUQ4JUE3JUQ4JUI2JUQ5JThBIiwKICAgICAgICB0ZXh0Rmlyc3Q6ICIlRDglQTclRDklODQlRDklODUlRDglQjklRDklODQlRDklODglRDklODUlRDglQTclRDglQUElMjAlRDglQTMlRDklODglRDklODQlRDglQTclRDklOEIlMjAlRDglQTUlRDglQjAlRDglQTclMjAlRDklODMlRDglQTclRDklODYlRDglQUElMjAlRDklODUlRDklODglRDglQUMlRDklODglRDglQUYlRDglQTkiLAogICAgICAgIG9ubHlVcmw6ICIlRDklODElRDklODIlRDglQjclMjAlRDklODUlRDglQjklMjAlRDglQTclRDklODQlRDglQjElRDglQTclRDglQTglRDglQjciLAogICAgICAgIHVybEFuZFRleHQ6ICIlRDglQTclRDklODQlRDglQjElRDglQTclRDglQTglRDglQjclMjArJTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUI5JUQ5JTg0JUQ5JTg4JUQ5JTg1JUQ4JUE3JUQ4JUFBIiwKICAgICAgICBkb3dubG9hZDogIiVEOCVBQSVEOSU4NiVEOCVCMiVEOSU4QSVEOSU4NCIsCiAgICAgICAgc2F2ZUJ0blRpcHM6ICIlRDglQTglRDglQjklRDglQjYlMjAlRDglQTclRDklODQlRDglQUUlRDklOEElRDglQTclRDglQjElRDglQTclRDglQUElMjAlRDglQUElRDglQUQlRDglQUElRDglQTclRDglQUMlMjAlRDglQTUlRDklODQlRDklODklMjAlRDglQUElRDglQUQlRDglQUYlRDklOEElRDglQUIlMjAlRDglQTclRDklODQlRDglQjUlRDklODElRDglQUQlRDglQTklMjAlRDklODQlRDglQUElRDglQjclRDglQTglRDklOEElRDklODIlRDklODclRDglQTciLAogICAgICAgIGFkZGl0aW9uYWxGZWF0dXJlOiAiJUQ5JTg1JUQ5JThBJUQ4JUIyJUQ4JUE5JTIwJUQ4JUE1JUQ4JUI2JUQ4JUE3JUQ5JTgxJUQ5JThBJUQ4JUE5JUQ4JThDJTIwJUQ4JUFBJUQ4JUEzJUQ4JUFFJUQ4JUIwJTIwJUQ4JUFBJUQ4JUEzJUQ4JUFCJUQ5JThBJUQ4JUIxJTIwJUQ4JUI5JUQ5JTg2JUQ4JUFGJTIwJUQ4JUE3JUQ5JTg0JUQ4JUI2JUQ4JUJBJUQ4JUI3JTIwJUQ4JUI5JUQ5JTg0JUQ5JTg5JTIwJUQ5JTg1JUQ5JTgxJUQ4JUFBJUQ4JUE3JUQ4JUFEJTIwQWx0IiwKICAgICAgICBpbnZlcnRBZGRpdGlvbmFsRmVhdHVyZTogIiVEOCVCOSVEOSU4MyVEOCVCMyUyMCVEOSU4NSVEOSU4MSVEOCVBNyVEOCVBQSVEOSU4QSVEOCVBRCUyMCVEOCVBNyVEOSU4NCVEOCVBNyVEOCVBRSVEOCVBQSVEOCVCNSVEOCVBNyVEOCVCMSVEOCU4QyUyMCVEOCVBNyVEOCVCMyVEOCVBQSVEOCVBRSVEOCVBRiVEOSU4NSUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOSU4QSVEOCVCMiVEOCVBNyVEOCVBQSUyMCVEOCVBNyVEOSU4NCVEOCVBNSVEOCVCNiVEOCVBNyVEOSU4MSVEOSU4QSVEOCVBOSUyMCVEOCVBNyVEOSU4MSVEOCVBQSVEOCVCMSVEOCVBNyVEOCVCNiVEOSU4QSVEOSU4QiVEOCVBNyIsCiAgICAgICAgY29weTogIiVEOSU4NiVEOCVCMyVEOCVBRSUyMCVEOCVBNyVEOSU4NCVEOCVCMSVEOCVBNyVEOCVBOCVEOCVCNyIsCiAgICAgICAgY29weUltZzogIiVEOSU4NiVEOCVCMyVEOCVBRSUyMCVEOCVBOCVEOSU4QSVEOCVBNyVEOSU4NiVEOCVBNyVEOCVBQSUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSIsCiAgICAgICAgb3BlbkluTmV3VGFiOiAiJUQ5JTgxJUQ4JUFBJUQ4JUFEJTIwJUQ5JTgxJUQ5JThBJTIwJUQ4JUI5JUQ5JTg0JUQ4JUE3JUQ5JTg1JUQ4JUE5JTIwJUQ4JUFBJUQ4JUE4JUQ5JTg4JUQ5JThBJUQ4JUE4JTIwJUQ4JUFDJUQ4JUFGJUQ5JThBJUQ4JUFGJUQ4JUE5IiwKICAgICAgICBjbG9zZUJ0bjogIiVEOCVBNSVEOSU4NCVEOCVCQSVEOCVBNyVEOCVBMSIsCiAgICAgICAgaW52ZXJ0QnRuOiAiJUQ4JUI5JUQ5JTgzJUQ4JUIzIiwKICAgICAgICBjb21wYXJlQnRuOiAiJUQ5JTg1JUQ5JTgyJUQ4JUE3JUQ4JUIxJUQ5JTg2JUQ4JUE5IiwKICAgICAgICBzZWxlY3RBbGxCdG46ICIlRDglQUElRDglQUQlRDglQUYlRDklOEElRDglQUYlMjAlRDglQTclRDklODQlRDklODMlRDklODQiLAogICAgICAgIGNsb3NlQnRuVGlwczogIiVEOCVBNSVEOSU4NCVEOCVCQSVEOCVBNyVEOCVBMSUyMCVEOSU4NyVEOCVCMCVEOCVBNyUyMCVEOCVBNyVEOSU4NCVEOCVBNSVEOCVCOSVEOCVBRiVEOCVBNyVEOCVBRiUyMCVEOSU4OCVEOCVBNyVEOCVCMyVEOCVBQSVEOCVCOSVEOCVBNyVEOCVBRiVEOCVBOSUyMCVEOCVBQyVEOSU4NSVEOSU4QSVEOCVCOSUyMCVEOCVBNyVEOSU4NCVEOCVBRSVEOSU4QSVEOCVBNyVEOCVCMSVEOCVBNyVEOCVBQSIsCiAgICAgICAgcmVzZXRMaW5rOiAiJUQ4JUE3JUQ4JUIzJUQ4JUFBJUQ4JUI5JUQ4JUE3JUQ4JUFGJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUE1JUQ4JUI5JUQ4JUFGJUQ4JUE3JUQ4JUFGJUQ4JUE3JUQ4JUFBJTIwJUQ4JUE3JUQ5JTg0JUQ4JUE3JUQ5JTgxJUQ4JUFBJUQ4JUIxJUQ4JUE3JUQ4JUI2JUQ5JThBJUQ4JUE5IiwKICAgICAgICByZXNldExpbmtUaXBzOiAiJUQ4JUE3JUQ4JUIzJUQ4JUFBJUQ4JUI5JUQ4JUE3JUQ4JUFGJUQ4JUE5JTIwJUQ4JUFDJUQ5JTg1JUQ5JThBJUQ4JUI5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUE1JUQ4JUI5JUQ4JUFGJUQ4JUE3JUQ4JUFGJUQ4JUE3JUQ4JUFBJTIwJUQ4JUE1JUQ5JTg0JUQ5JTg5JTIwJUQ4JUE3JUQ5JTg0JUQ5JTgyJUQ5JThBJUQ5JTg1JTIwJUQ4JUE3JUQ5JTg0JUQ4JUE3JUQ5JTgxJUQ4JUFBJUQ4JUIxJUQ4JUE3JUQ4JUI2JUQ5JThBJUQ4JUE5IiwKICAgICAgICBzaGFyZTogIiVEOSU4NSVEOCVCNCVEOCVBNyVEOCVCMSVEOSU4MyVEOCVBOSIsCiAgICAgICAgc3VpdExvbmdJbWc6ICIlRDglQUElRDklODYlRDglQTclRDglQjMlRDglQTglMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElMjAlRDglQTclRDklODQlRDglQjclRDklODglRDklOEElRDklODQlRDglQTklMjAlRDklODElRDklOEElMjAlRDklODYlRDglQTclRDklODElRDglQjAlRDglQTklMjAlRDglQTclRDklODQlRDglQUElRDklODUlRDglQjElRDklOEElRDglQjEiLAogICAgICAgIGdsb2JhbGtleXM6ICIlRDglQTclRDklODQlRDklODUlRDklODElRDglQTclRDglQUElRDklOEElRDglQUQlMjAlRDglQTclRDklODQlRDglQjklRDglQTclRDklODUlRDglQTklMjAlRDklODQlRDklODQlRDklODUlRDglQjklRDglQTclRDklOEElRDklODYlRDglQTk6JTIwIiwKICAgICAgICBnbG9iYWxrZXlzUHJlc3M6ICIlRDglQTclRDglQjYlRDglQkElRDglQjclMjAlRDklODQlRDglQUElRDglQTglRDglQUYlRDklOEElRDklODQlMjAlRDglQTclRDklODQlRDklODUlRDglQjklRDglQTclRDklOEElRDklODYlRDglQTkiLAogICAgICAgIGdsb2JhbGtleXNIb2xkOiAiJUQ4JUE3JUQ4JUI2JUQ4JUJBJUQ4JUI3JTIwJUQ5JTg1JUQ4JUI5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUE3JUQ4JUIzJUQ4JUFBJUQ5JTg1JUQ4JUIxJUQ4JUE3JUQ4JUIxJTIwJUQ5JTg0JUQ4JUFBJUQ5JTg1JUQ5JTgzJUQ5JThBJUQ5JTg2JTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUI5JUQ4JUE3JUQ5JThBJUQ5JTg2JUQ4JUE5IiwKICAgICAgICBnbG9iYWxrZXlzVHlwZTogIiVEOCVCNyVEOCVCMSVEOSU4QSVEOSU4MiVEOCVBOSUyMCVEOCVBQSVEOSU4NSVEOSU4MyVEOSU4QSVEOSU4NiUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVCOSVEOCVBNyVEOSU4QSVEOSU4NiVEOCVBOSIsCiAgICAgICAgY2xvc2VBZnRlclByZXZpZXc6ICIlRDglQTUlRDglQkElRDklODQlRDglQTclRDklODIlMjAlRDklODYlRDglQTclRDklODElRDglQjAlRDglQTklMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElRDglQTklMjAlRDglQTglRDglQjklRDglQUYlMjAlRDglQTclRDklODQlRDklODUlRDglQjklRDglQTclRDklOEElRDklODYlRDglQTkiLAogICAgICAgIHByZXZpZXdNYXhTaXplOiAiJUQ4JUE3JUQ5JTg0JUQ4JUFEJUQ4JUFDJUQ5JTg1JTIwJUQ4JUE3JUQ5JTg0JUQ4JUEzJUQ5JTgyJUQ4JUI1JUQ5JTg5JTIwJUQ5JTg0JUQ5JTg2JUQ4JUE3JUQ5JTgxJUQ4JUIwJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUI5JUQ4JUE3JUQ5JThBJUQ5JTg2JUQ4JUE5IiwKICAgICAgICBwcmV2aWV3TWF4U2l6ZVRpcDogIiVEOCVCOSVEOSU4NiVEOCVBRiVEOSU4NSVEOCVBNyUyMCVEOCVBQSVEOSU4MyVEOSU4OCVEOSU4NiUyMCVEOSU4NiVEOCVBNyVEOSU4MSVEOCVCMCVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVCOSVEOCVBNyVEOSU4QSVEOSU4NiVEOCVBOSUyMCVEOCVBMyVEOSU4MyVEOCVBOCVEOCVCMSUyMCVEOSU4NSVEOSU4NiUyMCVEOCVBNyVEOSU4NCVEOCVBRCVEOCVBQyVEOSU4NSUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVBRCVEOCVBRiVEOCVBRiVEOCU4QyUyMCVEOSU4MiVEOSU4NSUyMCVEOCVBOCVEOCVBQSVEOSU4MiVEOSU4NCVEOSU4QSVEOCVCNSUyMCVEOSU4NiVEOCVBNyVEOSU4MSVEOCVCMCVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVCOSVEOCVBNyVEOSU4QSVEOSU4NiVEOCVBOS4lMjAwJTIwPSUyMCVEOSU4NSVEOCVCOSVEOCVCNyVEOSU4NCIsCiAgICAgICAgbG9hZEFsbDogIiVEOCVBQSVEOCVBRCVEOSU4NSVEOSU4QSVEOSU4NCUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVCMiVEOSU4QSVEOCVBRiUyMCVEOSU4NSVEOSU4NiUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4MSVEOCVBRCVEOCVBNyVEOCVBQSIsCiAgICAgICAgbG9hZGVkQWxsOiAiJUQ4JUFBJUQ5JTg1JTIwJUQ4JUE3JUQ5JTg0JUQ4JUFBJUQ4JUFEJUQ5JTg1JUQ5JThBJUQ5JTg0IiwKICAgICAgICBsb2FkaW5nOiAiJUQ4JUFDJUQ4JUE3JUQ4JUIxJUQ5JThEJTIwJUQ4JUE3JUQ5JTg0JUQ4JUFBJUQ4JUFEJUQ5JTg1JUQ5JThBJUQ5JTg0JTIwLi4uIiwKICAgICAgICBsb2FkQWxsVGlwOiAiJUQ4JUFBJUQ4JUFEJUQ5JTg1JUQ5JThBJUQ5JTg0JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ4JUE5JTIwJUQ5JTgxJUQ5JThBJTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTgxJUQ4JUFEJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUFBJUQ4JUE3JUQ5JTg0JUQ5JThBJUQ4JUE5IiwKICAgICAgICB2aWV3bW9yZUVuZGxlc3M6ICIlRDglQUElRDglQUQlRDklODUlRDklOEElRDklODQlMjAlRDglQTclRDklODQlRDklODUlRDglQjIlRDklOEElRDglQUYlMjAlRDklODUlRDklODYlMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElMjAlRDglQjklRDklODYlRDglQUYlMjAlRDglQTclRDklODQlRDglQUElRDklODUlRDglQjElRDklOEElRDglQjElMjAlRDglQTUlRDklODQlRDklODklMjAlRDglQTclRDklODQlRDglQTMlRDglQjMlRDklODElRDklODQiLAogICAgICAgIGZpZGRsZTogIiVEOCVBQSVEOCVCNCVEOCVCQSVEOSU4QSVEOSU4NCIsCiAgICAgICAgZmlkZGxlVGlwOiAiJUQ4JUI4JUQ5JTg3JUQ5JTg4JUQ4JUIxJTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJTIwJUQ5JTg0JUQ5JTg0JUQ4JUI5JUQ5JTg1JUQ5JTg0JUQ5JThBJUQ4JUE3JUQ4JUFBJTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUI5JUQ5JTgyJUQ4JUFGJUQ4JUE5IiwKICAgICAgICBhZGRJbWFnZVVybHM6ICIlRDglQTUlRDglQjYlRDglQTclRDklODElRDglQTklMjAlRDglQjUlRDklODglRDglQjElRDglQTkiLAogICAgICAgIGFkZEltYWdlVXJsc1RpcHM6ICIlRDglQTUlRDglQjYlRDglQTclRDklODElRDglQTklMjAlRDglQTclRDklODQlRDklODUlRDglQjIlRDklOEElRDglQUYlMjAlRDklODUlRDklODYlMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElMjAlRDglQjklRDglQTglRDglQjElMjAlRDglQTclRDklODQlRDglQjElRDglQTclRDglQTglRDglQjciLAogICAgICAgIG9wZW5JbWFnZXM6ICIlRDglQjUlRDklODglRDglQjElRDglQTklMjAlRDklODUlRDglQUQlRDklODQlRDklOEElRDglQTkiLAogICAgICAgIG9wZW5JbWFnZXNUaXBzOiAiJUQ4JUE3JUQ5JTg2JUQ5JTgyJUQ4JUIxJTIwJUQ5JTg0JUQ4JUE3JUQ4JUIzJUQ4JUFBJUQ5JThBJUQ4JUIxJUQ4JUE3JUQ4JUFGJTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUFEJUQ5JTg0JUQ5JThBJUQ4JUE5IiwKICAgICAgICBjbG9zZUZpcnN0OiAiJUQ4JUEzJUQ4JUJBJUQ5JTg0JUQ5JTgyJTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUI5JUQ4JUIxJUQ4JUI2JTIwJUQ4JUE3JUQ5JTg0JUQ4JUFEJUQ4JUE3JUQ5JTg0JUQ5JThBJTIwJUQ4JUEzJUQ5JTg4JUQ5JTg0JUQ4JUE3JUQ5JThCIiwKICAgICAgICBjb2xsZWN0OiAiJUQ5JTg1JUQ4JUFDJUQ5JTg1JUQ5JTg4JUQ4JUI5JUQ4JUE5IiwKICAgICAgICBjb2xsZWN0ZWQ6ICIlRDglQUElRDklODUlMjAlRDglQTclRDklODQlRDglQUMlRDklODUlRDglQjkiLAogICAgICAgIGV4aXRDb2xsZWN0aW9uOiAiJUQ4JUE3JUQ5JTg0JUQ4JUFFJUQ4JUIxJUQ5JTg4JUQ4JUFDJTIwJUQ5JTg1JUQ5JTg2JTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUFDJUQ5JTg1JUQ5JTg4JUQ4JUI5JUQ4JUE5IiwKICAgICAgICBleGl0Q29sbGVjdGlvblRpcDogIiVEOCVBNyVEOSU4NiVEOSU4MiVEOCVCMSUyMCVEOSU4NCVEOSU4NCVEOCVBRSVEOCVCMSVEOSU4OCVEOCVBQyUyMCVEOSU4NSVEOSU4NiUyMCVEOSU4OCVEOCVCNiVEOCVCOSUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVBQyVEOSU4NSVEOSU4OCVEOCVCOSVEOCVBOSIsCiAgICAgICAgbm9Db2xsZWN0aW9uWWV0OiAiJUQ5JTg0JUQ5JThBJUQ4JUIzJTIwJUQ5JTg0JUQ4JUFGJUQ5JThBJUQ5JTgzJTIwJUQ4JUEzJUQ5JThBJTIwJUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ4JUE5JTIwJUQ5JTgxJUQ5JThBJTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUFDJUQ5JTg1JUQ5JTg4JUQ4JUI5JUQ4JUE5IiwKICAgICAgICBjb2xsZWN0RGV0YWlsOiAiJUQ5JTg4JUQ4JUI1JUQ5JTgxIiwKICAgICAgICBjb2xsZWN0RGV0YWlsVGlwOiAiJUQ4JUEzJUQ4JUI2JUQ5JTgxJTIwJUQ4JUE4JUQ4JUI5JUQ4JUI2JTIwJUQ4JUE3JUQ5JTg0JUQ4JUEzJUQ5JTg4JUQ4JUI1JUQ4JUE3JUQ5JTgxJTIwJUQ4JUE1JUQ5JTg0JUQ5JTg5JTIwJUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ5JTgzJTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ5JTgxJUQ4JUI2JUQ5JTg0JUQ4JUE5IiwKICAgICAgICBwbGF5U2xpZGU6ICIlRDglQUElRDglQjQlRDglQkElRDklOEElRDklODQlMjAlRDglQTclRDklODQlRDglQjQlRDglQjElRDglQTclRDglQTYlRDglQUQiLAogICAgICAgIHNsaWRlR2FwOiAiJUQ4JUE3JUQ5JTg0JUQ5JTgxJUQ4JUE3JUQ4JUI1JUQ5JTg0JTIwKCVEOCVBQiVEOSU4OCVEOCVBNyVEOSU4NiVEOSU4QSkiLAogICAgICAgIHNsaWRlR2FwVGlwOiAiJUQ4JUE3JUQ5JTg0JUQ5JTgxJUQ4JUE3JUQ4JUI1JUQ5JTg0JUQ4JThDJTIwJUQ5JTg4JUQ4JUFEJUQ4JUFGJUQ4JUE5JTIwKCVEOCVBQiVEOSU4OCVEOCVBNyVEOSU4NiVEOSU4QSkiLAogICAgICAgIHNsaWRlQmFjazogIiVEOCVCMSVEOCVBQyVEOSU4OCVEOCVCOSIsCiAgICAgICAgc2xpZGVCYWNrVGlwOiAiJUQ4JUE3JUQ5JTg0JUQ4JUFBJUQ4JUI0JUQ4JUJBJUQ5JThBJUQ5JTg0JTIwJUQ5JTg1JUQ5JTg2JTIwJUQ4JUE3JUQ5JTg0JUQ4JUFFJUQ5JTg0JUQ5JTgxJTIwJUQ4JUE1JUQ5JTg0JUQ5JTg5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUEzJUQ5JTg1JUQ4JUE3JUQ5JTg1IiwKICAgICAgICBzbGlkZVJhbmRvbTogIlJhbmRvbSIsCiAgICAgICAgc2xpZGVXYWl0OiAiJUQ4JUE3JUQ5JTg2JUQ4JUFBJUQ4JUI4JUQ4JUIxJTIwJUQ5JTgyJUQ4JUIxJUQ4JUE3JUQ4JUExJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ4JUE5IiwKICAgICAgICBzbGlkZVdhaXRUaXA6ICIlRDklOEElRDglQTglRDglQUYlRDglQTMlMjAlRDglQTclRDklODQlRDglQjklRDglQUYlMjAlRDglQTclRDklODQlRDglQUElRDklODYlRDglQTclRDglQjIlRDklODQlRDklOEElMjAlRDglQTglRDglQjklRDglQUYlMjAlRDklODIlRDglQjElRDglQTclRDglQTElRDglQTklMjAlRDklODMlRDklODQlMjAlRDglQjUlRDklODglRDglQjElRDglQTklMjAlRDglQTglRDglQTclRDklODQlRDklODMlRDglQTclRDklODUlRDklODQuIiwKICAgICAgICBzbGlkZVNraXBFcnJvcjogIiVEOCVBQSVEOCVBRSVEOCVCNyVEOSU4QSUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSUyMCVEOCVBNyVEOSU4NCVEOCVBRSVEOCVBNyVEOCVCNyVEOCVBNiVEOCVBOSIsCiAgICAgICAgc2xpZGVTa2lwRXJyb3JUaXA6ICIlRDglQUElRDglQUUlRDglQjclRDklOEElMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElMjAlRDglQTclRDklODQlRDglQUUlRDglQTclRDglQjclRDglQTYlRDglQTklMjAlRDglQTglRDglQjMlRDglQjElRDglQjklRDglQTkiLAogICAgICAgIHR5cGU6ICIlRDglQTclRDklODQlRDklODElRDglQTYlRDglQTkiLAogICAgICAgIHR5cGVUaXA6ICIlRDglQTclRDglQUUlRDglQUElRDglQjElMjAlRDklODElRDglQTYlRDglQTklMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElRDglQTkiLAogICAgICAgIHNob3dXaXRoUnVsZXM6ICIlRDglQTUlRDglQjglRDklODclRDglQTclRDglQjElMjAlRDglQTclRDklODQlRDglQTMlRDklOEElRDklODIlRDklODglRDklODYlRDglQTklMjAlRDglQTglRDglQTclRDklODQlRDklODIlRDklODglRDglQTclRDglQjklRDglQUYiLAogICAgICAgIHNob3dXaXRoUnVsZXNUaXA6ICIlRDglQjklRDglQjElRDglQjYlMjAlRDglQTclRDklODQlRDglQTMlRDklOEElRDklODIlRDklODglRDklODYlRDglQTklMjAlRDglQTUlRDglQjAlRDglQTclMjAlRDklODMlRDglQTclRDklODYlRDglQUElMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElRDglQTklMjAlRDglQUElRDglQUElRDglQjclRDglQTclRDglQTglRDklODIlMjAlRDklODUlRDglQjklMjAlRDglQTclRDklODQlRDklODIlRDklODglRDglQTclRDglQjklRDglQUYlMjAlRDglQTglRDglQkElRDglQjYlMjAlRDglQTclRDklODQlRDklODYlRDglQjglRDglQjElMjAlRDglQjklRDklODYlMjAlRDglQUQlRDglQUMlRDklODUlRDklODclRDglQTciLAogICAgICAgIGFkdmFuY2VkUnVsZXM6ICIlRDglQTclRDklODQlRDklODIlRDklODglRDglQTclRDglQjklRDglQUYlMjAlRDglQTclRDklODQlRDklODUlRDglQUElRDklODIlRDglQUYlRDklODUlRDglQTkiLAogICAgICAgIGFkdmFuY2VkUnVsZXNUaXA6ICIlRDklODUlRDglQjclRDglQTclRDglQTglRDklODIlRDglQTklMjAlRDglQTglRDglQTclRDklODQlRDklODIlRDklODglRDglQTclRDglQjklRDglQUYlMjAlRDglQTclRDklODQlRDklODUlRDglQUElRDklODIlRDglQUYlRDklODUlRDglQTkiLAogICAgICAgIHRwUnVsZXM6ICIlRDklODIlRDklODglRDglQTclRDglQjklRDglQUYlMjAlRDglQTclRDklODQlRDglQTglRDglQUYlRDklODQiLAogICAgICAgIHRwUnVsZXNUaXA6ICIlRDklODUlRDglQjclRDglQTclRDglQTglRDklODIlRDglQTklMjAlRDglQTglRDklODIlRDklODglRDglQTclRDglQjklRDglQUYlMjAlRDglQTclRDklODQlRDglQTglRDglQUYlRDklODQiLAogICAgICAgIHNjYWxlUnVsZXM6ICIlRDklODUlRDklODMlRDglQTglRDglQjElRDglQTkiLAogICAgICAgIHNjYWxlUnVsZXNUaXA6ICIlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElRDglQTklMjAlRDglQTclRDklODQlRDglQUElRDklOEElMjAlRDglQUElRDklODUlMjAlRDglQTclRDklODQlRDglQjklRDglQUIlRDklODglRDglQjElMjAlRDglQjklRDklODQlRDklOEElRDklODclRDglQTclMjAlRDglQUElRDklODQlRDklODIlRDglQTclRDglQTYlRDklOEElRDklOEIlRDglQTclMjAlRDklODglRDklODQlRDklODMlRDklODYlMjAlRDglQUElRDklODUlMjAlRDglQUElRDklODMlRDglQTglRDklOEElRDglQjElRDklODclRDglQTciLAogICAgICAgIG5vU2NhbGVSdWxlczogIiVEOCVBOCVEOCVBRiVEOSU4OCVEOSU4NiUyMCVEOCVBQSVEOSU4MyVEOCVBOCVEOSU4QSVEOCVCMSIsCiAgICAgICAgbm9TY2FsZVJ1bGVzVGlwOiAiJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUFBJUQ5JThBJTIwJUQ4JUFBJUQ5JTg1JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI5JUQ4JUFCJUQ5JTg4JUQ4JUIxJTIwJUQ4JUI5JUQ5JTg0JUQ5JThBJUQ5JTg3JUQ4JUE3JTIwJUQ4JUFBJUQ5JTg0JUQ5JTgyJUQ4JUE3JUQ4JUE2JUQ5JThBJUQ5JThCJUQ4JUE3JTIwJUQ5JTg4JUQ5JTg0JUQ5JTgzJUQ5JTg2JTIwJUQ4JUE4JUQ4JUFGJUQ5JTg4JUQ5JTg2JTIwJUQ4JUFBJUQ5JTgzJUQ4JUE4JUQ5JThBJUQ4JUIxIiwKICAgICAgICBzbWFsbFJ1bGVzOiAiJUQ4JUFEJUQ4JUFDJUQ5JTg1JTIwJUQ4JUI1JUQ4JUJBJUQ5JThBJUQ4JUIxIiwKICAgICAgICBzbWFsbFJ1bGVzVGlwOiAiJUQ4JUE4JUQ5JTgzJUQ4JUIzJUQ5JTg0JTIwI3QjJTIwJUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ4JUE5JTIwJUQ4JUI1JUQ4JUJBJUQ5JThBJUQ4JUIxJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUFEJUQ4JUFDJUQ5JTg1JUQ4JThDJTIwJUQ4JUE3JUQ5JTg0JUQ4JUFEJUQ4JUFDJUQ5JTg1JTIwJUQ4JUE3JUQ5JTg0JUQ5JTgxJUQ4JUI5JUQ5JTg0JUQ5JThBJTIwJUQ5JTg0JUQ5JTg0JUQ4JUE3JUQ4JUIxJUQ4JUFBJUQ5JTgxJUQ4JUE3JUQ4JUI5JTIwJUQ5JTg4JUQ4JUE3JUQ5JTg0JUQ4JUI5JUQ4JUIxJUQ4JUI2JTIwJUQ4JUEzJUQ5JTgyJUQ5JTg0JTIwJUQ5JTg1JUQ5JTg2IiwKICAgICAgICBsb2NrU2l6ZVRpcDogIiVEOSU4MiVEOSU4MSVEOSU4NCUyMCVEOCVBNyVEOSU4NCVEOCVBRCVEOCVBQyVEOSU4NSUyMCVEOCVBNyVEOSU4NCVEOCVBMyVEOSU4MiVEOCVCNSVEOSU4OSIsCiAgICAgICAgY29tbWFuZDogIiVEOCVBMyVEOSU4NSVEOCVCMSIsCiAgICAgICAgY29tbWFuZFRpcDogIiVEOSU4MiVEOCVBNyVEOCVBNiVEOSU4NSVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOCVBMyVEOSU4OCVEOCVBNyVEOSU4NSVEOCVCMSIsCiAgICAgICAgb25saW5lRWRpdDogIiVEOCVBQSVEOCVBRCVEOCVCMSVEOSU4QSVEOCVCMSUyMCVEOCVCOSVEOCVBOCVEOCVCMSUyMCVEOCVBNyVEOSU4NCVEOCVBNSVEOSU4NiVEOCVBQSVEOCVCMSVEOSU4NiVEOCVBQSIsCiAgICAgICAgb25saW5lRWRpdFRpcDogIiN0IyUyMCVEOCVBQSVEOCVBRCVEOCVCMSVEOSU4QSVEOCVCMSUyMCVEOSU4NyVEOCVCMCVEOSU4NyUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSUyMCVEOCVCOSVEOCVBOCVEOCVCMSUyMCVEOCVBNyVEOSU4NCVEOCVBNSVEOSU4NiVEOCVBQSVEOCVCMSVEOSU4NiVEOCVBQSUyMCVEOCVBOCVEOCVBNyVEOCVCMyVEOCVBQSVEOCVBRSVEOCVBRiVEOCVBNyVEOSU4NSIsCiAgICAgICAgb3BlbkluTmV3V2luZG93OiAiJUQ5JTgxJUQ4JUFBJUQ4JUFEJTIwJUQ5JTgxJUQ5JThBJTIwJUQ5JTg2JUQ4JUE3JUQ5JTgxJUQ4JUIwJUQ4JUE5JTIwJUQ4JUFDJUQ4JUFGJUQ5JThBJUQ4JUFGJUQ4JUE5IiwKICAgICAgICBvcGVuSW5OZXdXaW5kb3dUaXA6ICIlRDklODElRDglQUElRDglQUQlMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElRDglQTklMjAlRDklODElRDklOEElMjAlRDklODYlRDglQTclRDklODElRDglQjAlRDglQTklMjAlRDglQUMlRDglQUYlRDklOEElRDglQUYlRDglQTkiLAogICAgICAgIGZpbmRJblBhZ2U6ICIlRDglQTglRDglQUQlRDglQUIlMjAlRDklODElRDklOEElMjAlRDglQTclRDklODQlRDglQjUlRDklODElRDglQUQlRDglQTkiLAogICAgICAgIGZpbmRJblBhZ2VUaXA6ICIlRDglQTclRDklODQlRDglQUElRDklODUlRDglQjElRDklOEElRDglQjElMjAlRDglQTUlRDklODQlRDklODklMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElRDglQTklMjAlRDglQTclRDklODQlRDglQUQlRDglQTclRDklODQlRDklOEElRDglQTklMjAlRDklODElRDklOEElMjAlRDglQTclRDklODQlRDglQjUlRDklODElRDglQUQlRDglQTkiLAogICAgICAgIHZpZXdDb2xsZWN0aW9uOiAiJUQ4JUI5JUQ4JUIxJUQ4JUI2JTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUFDJUQ5JTg1JUQ5JTg4JUQ4JUI5JUQ4JUE5IiwKICAgICAgICB2aWV3Q29sbGVjdGlvblRpcDogIiVEOCVCOSVEOCVCMSVEOCVCNiUyMCVEOCVBQyVEOSU4NSVEOSU4QSVEOCVCOSUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVBQyVEOSU4NSVEOCVCOSVEOCVBOSIsCiAgICAgICAgaW5Db2xsZWN0aW9uOiAiJUQ4JUJBJUQ5JThBJUQ4JUIxJTIwJUQ5JTgyJUQ4JUE3JUQ4JUFGJUQ4JUIxJTIwJUQ4JUI5JUQ5JTg0JUQ5JTg5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUE3JUQ4JUIzJUQ4JUFBJUQ4JUFFJUQ4JUFGJUQ4JUE3JUQ5JTg1JTIwJUQ5JTgxJUQ5JThBJTIwJUQ5JTg4JUQ4JUI2JUQ4JUI5JTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUFDJUQ5JTg1JUQ5JTg4JUQ4JUI5JUQ4JUE5IiwKICAgICAgICBjYW50RmluZDogIiVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSUyMCVEOSU4NCVEOSU4QSVEOCVCMyVEOCVBQSUyMCVEOSU4MSVEOSU4QSUyMCVEOCVBNyVEOSU4NCVEOSU4OCVEOCVBQiVEOSU4QSVEOSU4MiVEOCVBOSVEOCU4QyUyMCVEOCVBMyVEOSU4OCUyMCVEOSU4NSVEOCVBRSVEOSU4MSVEOSU4QSVEOCVBOSUyMCVEOSU4OCVEOSU4NCVEOCVBNyUyMCVEOSU4QSVEOSU4NSVEOSU4MyVEOSU4NiUyMCVEOCVBNyVEOSU4NCVEOCVCOSVEOCVBQiVEOSU4OCVEOCVCMSUyMCVEOCVCOSVEOSU4NCVEOSU4QSVEOSU4NyVEOCVBNyEiLAogICAgICAgIGV4cG9ydEltYWdlczogIiVEOCVBQSVEOCVCNSVEOCVBRiVEOSU4QSVEOCVCMSUyMCVEOCVBQyVEOSU4NSVEOSU4QSVEOCVCOSUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSIsCiAgICAgICAgZXhwb3J0SW1hZ2VzVGlwOiAiJUQ4JUFBJUQ4JUI1JUQ4JUFGJUQ5JThBJUQ4JUIxJTIwJUQ4JUFDJUQ5JTg1JUQ5JThBJUQ4JUI5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJTIwJUQ4JUE3JUQ5JTg0JUQ5JTgzJUQ4JUE4JUQ5JThBJUQ4JUIxJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUI5JUQ4JUIxJUQ5JTg4JUQ4JUI2JUQ4JUE5JTIwJUQ4JUE1JUQ5JTg0JUQ5JTg5JTIwJUQ5JTg2JUQ4JUE3JUQ5JTgxJUQ4JUIwJUQ4JUE5JTIwJUQ4JUFDJUQ4JUFGJUQ5JThBJUQ4JUFGJUQ4JUE5IiwKICAgICAgICBkb3dubG9hZEltYWdlOiAiJUQ4JUFBJUQ5JTg2JUQ4JUIyJUQ5JThBJUQ5JTg0JTIwJUQ4JUFDJUQ5JTg1JUQ5JThBJUQ4JUI5JTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUI5JUQ4JUIxJUQ5JTg4JUQ4JUI2IiwKICAgICAgICBkb3dubG9hZEltYWdlVGlwOiAiJUQ4JUFBJUQ5JTg2JUQ4JUIyJUQ5JThBJUQ5JTg0JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJTIwJUQ4JUE3JUQ5JTg0JUQ4JUFEJUQ4JUE3JUQ5JTg0JUQ5JThBJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUI5JUQ4JUIxJUQ5JTg4JUQ4JUI2JUQ4JUE5IiwKICAgICAgICBjb3B5SW1hZ2VzVXJsOiAiJUQ5JTg2JUQ4JUIzJUQ4JUFFJTIwJUQ4JUIxJUQ5JTg4JUQ4JUE3JUQ4JUE4JUQ4JUI3JTIwJUQ4JUFDJUQ5JTg1JUQ5JThBJUQ4JUI5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxIiwKICAgICAgICBjb3B5SW1hZ2VzVXJsVGlwOiAiJUQ5JTg2JUQ4JUIzJUQ4JUFFJTIwJUQ4JUIxJUQ5JTg4JUQ4JUE3JUQ4JUE4JUQ4JUI3JTIwJUQ4JUFDJUQ5JTg1JUQ5JThBJUQ4JUI5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJTIwJUQ4JUE3JUQ5JTg0JUQ5JTgzJUQ4JUE4JUQ5JThBJUQ4JUIxJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUI5JUQ4JUIxJUQ5JTg4JUQ4JUI2JUQ4JUE5IiwKICAgICAgICBjb3B5U3VjY2VzczogIiVEOCVBQSVEOSU4NSUyMCVEOSU4NiVEOCVCMyVEOCVBRSUyMCN0IyUyMCVEOCVCMSVEOSU4OCVEOCVBNyVEOCVBOCVEOCVCNyUyMCVEOCVBOCVEOSU4NiVEOCVBQyVEOCVBNyVEOCVBRCIsCiAgICAgICAgYXV0b1JlZnJlc2g6ICIlRDglQUElRDglQUQlRDklODUlRDklOEElRDklODQlMjAlRDglQTclRDklODQlRDglQjUlRDklODElRDglQUQlRDglQTklMjAlRDglQUElRDklODQlRDklODIlRDglQTclRDglQTYlRDklOEElRDklOEIlRDglQTciLAogICAgICAgIGF1dG9SZWZyZXNoVGlwOiAiJUQ4JUI5JUQ5JTg2JUQ4JUFGJTIwJUQ4JUI5JUQ4JUIxJUQ4JUI2JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJTIwJUQ4JUE3JUQ5JTg0JUQ5JTgyJUQ5JTg0JUQ5JThBJUQ5JTg0JUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUEzJUQ4JUFFJUQ5JThBJUQ4JUIxJUQ4JUE5JUQ4JThDJTIwJUQ5JTgyJUQ5JTg1JTIwJUQ4JUE4JUQ4JUE3JUQ5JTg0JUQ4JUFBJUQ5JTg1JUQ4JUIxJUQ5JThBJUQ4JUIxJTIwJUQ4JUE1JUQ5JTg0JUQ5JTg5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUEzJUQ4JUIzJUQ5JTgxJUQ5JTg0JUQ4JThDJTIwJUQ4JUE4JUQ4JUFEJUQ5JThBJUQ4JUFCJTIwJUQ4JUFBJUQ5JTgyJUQ5JTg4JUQ5JTg1JTIwJUQ4JUE4JUQ4JUI5JUQ4JUI2JTIwJUQ4JUI1JUQ5JTgxJUQ4JUFEJUQ4JUE3JUQ4JUFBJTIwJUQ4JUE3JUQ5JTg0JUQ5JTg4JUQ5JThBJUQ4JUE4JTIwJUQ4JUE4JUQ4JUFBJUQ4JUFEJUQ5JTg1JUQ5JThBJUQ5JTg0JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJTIwJUQ4JUE3JUQ5JTg0JUQ4JUFDJUQ4JUFGJUQ5JThBJUQ4JUFGJUQ4JUE5IiwKICAgICAgICBlbnRlckZ1bGxzYzogIiVEOCVBRiVEOCVBRSVEOSU4OCVEOSU4NCUyMCVEOSU4NSVEOSU4NCVEOCVBMSUyMCVEOCVBNyVEOSU4NCVEOCVCNCVEOCVBNyVEOCVCNCVEOCVBOSIsCiAgICAgICAgZXhpdEZ1bGxzYzogIiVEOCVBRSVEOCVCMSVEOSU4OCVEOCVBQyUyMCVEOSU4NSVEOSU4NiUyMCVEOSU4NSVEOSU4NCVEOCVBMSUyMCVEOCVBNyVEOSU4NCVEOCVCNCVEOCVBNyVEOCVCNCVEOCVBOSIsCiAgICAgICAgY29uZmlnOiAiJUQ4JUE3JUQ5JTg0JUQ4JUE1JUQ4JUI5JUQ4JUFGJUQ4JUE3JUQ4JUFGJUQ4JUE3JUQ4JUFBIiwKICAgICAgICBvcGVuQ29uZmlnOiAiJUQ5JTgxJUQ4JUFBJUQ4JUFEJTIwJUQ4JUE3JUQ5JTg0JUQ4JUE1JUQ4JUI5JUQ4JUFGJUQ4JUE3JUQ4JUFGJUQ4JUE3JUQ4JUFBIiwKICAgICAgICBydWxlUmVxdWVzdDogIiVEOCVCNyVEOSU4NCVEOCVBOCUyMCVEOCVBNyVEOSU4NCVEOSU4MiVEOSU4OCVEOCVBNyVEOCVCOSVEOCVBRiIsCiAgICAgICAgY2xvc2VHYWxsZXJ5OiAiJUQ4JUE1JUQ4JUJBJUQ5JTg0JUQ4JUE3JUQ5JTgyJTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUI5JUQ4JUIxJUQ4JUI2IiwKICAgICAgICByZXR1cm5Ub0dhbGxlcnk6ICIlRDglQTclRDklODQlRDglQjklRDklODglRDglQUYlRDglQTklMjAlRDglQTUlRDklODQlRDklODklMjAlRDglQTclRDklODQlRDklODUlRDglQjklRDglQjElRDglQjYiLAogICAgICAgIHBpY0luZm86ICIlRDglQTclRDklODYlRDklODIlRDglQjElMjAlRDklODQlRDglQUElRDglQkElRDklOEElRDklOEElRDglQjEiLAogICAgICAgIHBpY05vdGU6ICIlRDglQUElRDglQjklRDklODQlRDklOEElRDklODIlMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElRDglQTkiLAogICAgICAgIHVybEZpbHRlcjogIiVEOSU4NSVEOCVCMSVEOCVCNCVEOCVBRCUyMCVEOCVBNyVEOSU4NCVEOCVCMSVEOCVBNyVEOCVBOCVEOCVCNyIsCiAgICAgICAgdXJsRmlsdGVyVGlwOiAiJUQ4JUEzJUQ4JUFGJUQ4JUFFJUQ5JTg0JTIwJUQ5JTgzJUQ5JTg0JUQ5JTg1JUQ4JUE3JUQ4JUFBJTIwJUQ4JUIxJUQ4JUE2JUQ5JThBJUQ4JUIzJUQ5JThBJUQ4JUE5JTIwJUQ4JUEzJUQ5JTg4JTIwJUQ4JUFBJUQ4JUI5JUQ4JUE4JUQ5JThBJUQ4JUIxJUQ4JUE3JUQ4JUFBJTIwJUQ5JTg1JUQ5JTg2JUQ4JUFBJUQ4JUI4JUQ5JTg1JUQ4JUE5JTIwJUQ5JTg0JUQ4JUFBJUQ4JUI1JUQ5JTgxJUQ5JThBJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUIxJUQ5JTg4JUQ4JUE3JUQ4JUE4JUQ4JUI3IiwKICAgICAgICByZXNvbHV0aW9uOiAiJUQ4JUFGJUQ5JTgyJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ4JUE5IiwKICAgICAgICBwaWNOdW06ICIlRDglQjklRDglQUYlRDglQUYlMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjEiLAogICAgICAgIHBpY1RpcHM6ICJDVFJMJTIwJUQ4JUI5JUQ4JUIxJUQ4JUI2JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJTIwJUQ4JUE4JUQ4JUE3JUQ4JUIzJUQ4JUFBJUQ4JUFFJUQ4JUFGJUQ4JUE3JUQ5JTg1IiwKICAgICAgICBzYXZlUGFnZVRpcHM6ICIlRDglQTclRDglQUQlRDklODElRDglQjglMjAlRDklODclRDglQjAlRDklODclMjAlRDglQTclRDklODQlRDglQjUlRDklODElRDglQUQlRDglQTklMjAlRDklODQlRDglQUElRDklODYlRDglQjIlRDklOEElRDklODQlMjAlRDglQUMlRDklODUlRDklOEElRDglQjklMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjEiLAogICAgICAgIHNjYWxlUmF0aW86ICIlRDklODYlRDglQjMlRDglQTglRDglQTklMjAlRDglQTclRDklODQlRDglQUElRDklODMlRDglQTglRDklOEElRDglQjEiLAogICAgICAgIHNpbWlsYXJJbWFnZTogIiVEOCVBNyVEOSU4NCVEOCVBOCVEOCVBRCVEOCVBQiUyMCVEOCVBOCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSIsCiAgICAgICAgc2NhbGU6ICIlRDglQUElRDklODMlRDglQTglRDklOEElRDglQjEiLAogICAgICAgIGhvcml6b250YWxGbGlwOiAiJUQ4JUE3JUQ5JTg2JUQ4JUI5JUQ5JTgzJUQ4JUE3JUQ4JUIzJTIwJUQ4JUEzJUQ5JTgxJUQ5JTgyJUQ5JThBIiwKICAgICAgICB2ZXJ0aWNhbEZsaXA6ICIlRDglQTclRDklODYlRDglQjklRDklODMlRDglQTclRDglQjMlMjAlRDglQjklRDklODUlRDklODglRDglQUYlRDklOEEiLAogICAgICAgIGFjdHVhbEJ0bjogIiVEOCVCOSVEOCVCMSVEOCVCNiUyMCVEOCVBNyVEOSU4NCVEOCVBMyVEOCVCNSVEOSU4NCVEOSU4QSUyMChBKSIsCiAgICAgICAgc2VhcmNoQnRuOiAiJUQ4JUE3JUQ5JTg0JUQ4JUE4JUQ4JUFEJUQ4JUFCJTIwJUQ4JUI5JUQ5JTg2JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUEzJUQ4JUI1JUQ5JTg0JUQ5JThBJUQ4JUE5JTIwKFMpIiwKICAgICAgICBnYWxsZXJ5QnRuOiAiJUQ4JUI5JUQ4JUIxJUQ4JUI2JTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUI5JUQ4JUIxJUQ4JUI2JTIwKEcpIiwKICAgICAgICBjdXJyZW50QnRuOiAiJUQ4JUI5JUQ4JUIxJUQ4JUI2JTIwJUQ4JUE3JUQ5JTg0JUQ4JUFEJUQ4JUE3JUQ5JTg0JUQ5JThBJUQ4JUE5JTIwKEMpIiwKICAgICAgICBtYWduaWZpZXJCdG46ICIlRDklODUlRDklODMlRDglQTglRDglQjEvJUQ4JUFBJUQ5JTgzJUQ4JUE4JUQ5JThBJUQ4JUIxJTIwKE0pIiwKICAgICAgICBwaWNUaXRsZTogIiVEOCVCOSVEOSU4NiVEOSU4OCVEOCVBNyVEOSU4NiUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSIsCiAgICAgICAgZXhwb3J0SW1hZ2VzVXJsOiAiJUQ4JUFBJUQ4JUI1JUQ4JUFGJUQ5JThBJUQ4JUIxJTIwJUQ4JUIxJUQ5JTg4JUQ4JUE3JUQ4JUE4JUQ4JUI3JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxIiwKICAgICAgICBleHBvcnRJbWFnZXNVcmxQb3A6ICJDdHJsK0MlMjAlRDklODQlRDklODYlRDglQjMlRDglQUUlMjAlRDglQjElRDklODglRDglQTclRDglQTglRDglQjclMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjEiLAogICAgICAgIGJlZ2luU2VhcmNoSW1nOiAiI3QjJTIwJUQ4JUE3JUQ5JTg0JUQ4JUE4JUQ4JUFGJUQ4JUExJTIwJUQ5JTgxJUQ5JThBJTIwJUQ4JUE3JUQ5JTg0JUQ4JUE4JUQ4JUFEJUQ4JUFCJTIwJUQ4JUI5JUQ5JTg2JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ4JUE5JTIwLi4uIiwKICAgICAgICBmaW5kTm9QaWM6ICIlRDklODQlRDklODUlMjAlRDklOEElRDglQUElRDklODUlMjAlRDglQTclRDklODQlRDglQjklRDglQUIlRDklODglRDglQjElMjAlRDglQjklRDklODQlRDklODklMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElRDglQTklMjAlRDglQTclRDklODQlRDglQTMlRDglQjUlRDklODQlRDklOEElRDglQTkiLAogICAgICAgIGZpbmRPdmVyQmVnaW5Mb2FkOiAiI3QjJTIwJUQ5JTg2JUQ5JTg3JUQ4JUE3JUQ5JThBJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUFFJUQ4JUIxJUQ5JThBJUQ4JUI3JUQ4JUE5JUQ4JThDJTIwJUQ4JUE3JUQ5JTg0JUQ4JUI5JUQ4JUFCJUQ5JTg4JUQ4JUIxJTIwJUQ4JUI5JUQ5JTg0JUQ5JTg5JTIwI3QjJTIwJUQ4JUI1JUQ5JTg4JUQ4JUIxJTIwJUQ5JTg1JUQ4JUFBJUQ4JUI3JUQ4JUE3JUQ4JUE4JUQ5JTgyJUQ4JUE5JUQ4JThDJTIwJUQ4JUE4JUQ4JUFGJUQ4JUExJTIwJUQ4JUFBJUQ4JUFEJUQ5JTg1JUQ5JThBJUQ5JTg0JTIwJUQ4JUE3JUQ5JTg0JUQ4JUEzJUQ5JTg4JUQ5JTg0JUQ5JTg5IiwKICAgICAgICBsb2FkTmV4dFNpbWlsYXI6ICIlRDklODElRDglQjQlRDklODQlMjAlRDglQUElRDglQUQlRDklODUlRDklOEElRDklODQlMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElRDglQTklMjAlRDglQTclRDklODQlRDglQTMlRDglQjUlRDklODQlRDklOEElRDglQTklRDglOEMlMjAlRDglQUQlRDglQTclRDklODglRDklODQlMjAlRDglQUElRDglQUQlRDklODUlRDklOEElRDklODQlMjAlRDglQTclRDklODQlRDklODYlRDglQUElRDklOEElRDglQUMlRDglQTklMjAlRDglQTclRDklODQlRDglQUElRDglQTclRDklODQlRDklOEElRDglQTkuLi4iLAogICAgICAgIGxvYWRFcnJvcjogIiVEOSU4MSVEOCVCNCVEOSU4NCUyMCVEOCVBNyVEOSU4NCVEOCVBQSVEOCVBRCVEOSU4NSVEOSU4QSVEOSU4NCIsCiAgICAgICAgb3BlbkhvbWVQYWdlOiAiJUQ5JTgxJUQ4JUFBJUQ4JUFEJTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTgxJUQ4JUFEJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUIxJUQ4JUE2JUQ5JThBJUQ4JUIzJUQ5JThBJUQ4JUE5IiwKICAgICAgICBwb3NpdGlvbjogIiVEOSU4OCVEOCVCNiVEOCVCOSUyMCVEOCVBNyVEOSU4NCVEOCVCOSVEOCVCMSVEOCVCNiIsCiAgICAgICAgcG9zaXRpb25UaXBzOiAiJUQ5JTg0JUQ4JUE1JUQ4JUFFJUQ5JTgxJUQ4JUE3JUQ4JUExJTIwQUxUJTIwJUQ4JUE3JUQ4JUI2JUQ4JUJBJUQ4JUI3JTIwJUQ5JTg1JUQ4JUI5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUE3JUQ4JUIzJUQ4JUFBJUQ5JTg1JUQ4JUIxJUQ4JUE3JUQ4JUIxJTIwJUQ4JUI5JUQ5JTg0JUQ5JTg5IiwKICAgICAgICB0b3BMZWZ0OiAiJUQ4JUE3JUQ5JTg0JUQ4JUIyJUQ4JUE3JUQ5JTg4JUQ5JThBJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI5JUQ5JTg0JUQ5JTg4JUQ5JThBJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ5JThBJUQ4JUIzJUQ4JUIxJUQ5JTg5JTIwJUQ5JTg1JUQ5JTg2JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ4JUE5IiwKICAgICAgICB0b3BSaWdodDogIiVEOCVBNyVEOSU4NCVEOCVCMiVEOCVBNyVEOSU4OCVEOSU4QSVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOCVCOSVEOSU4NCVEOSU4OCVEOSU4QSVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOSU4QSVEOSU4NSVEOSU4NiVEOSU4OSUyMCVEOSU4NSVEOSU4NiUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSIsCiAgICAgICAgYm90dG9tUmlnaHQ6ICIlRDglQTclRDklODQlRDglQjIlRDglQTclRDklODglRDklOEElRDglQTklMjAlRDglQTclRDklODQlRDglQjMlRDklODElRDklODQlRDklOEElRDglQTklMjAlRDglQTclRDklODQlRDklOEElRDklODUlRDklODYlRDklODklMjAlRDklODUlRDklODYlMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElRDglQTkiLAogICAgICAgIGJvdHRvbUxlZnQ6ICIlRDglQTclRDklODQlRDglQjIlRDglQTclRDklODglRDklOEElRDglQTklMjAlRDglQTclRDklODQlRDglQjMlRDklODElRDklODQlRDklOEElRDglQTklMjAlRDglQTclRDklODQlRDklOEElRDglQjMlRDglQjElRDklODklMjAlRDklODUlRDklODYlMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElRDglQTkiLAogICAgICAgIHRvcENlbnRlcjogIiVEOCVBOCVEOCVBQyVEOCVBNyVEOSU4NiVEOCVBOCUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSIsCiAgICAgICAgYm90dG9tQ2VudGVyOiAiJUQ4JUEzJUQ4JUIzJUQ5JTgxJUQ5JTg0JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ4JUE5IiwKICAgICAgICBmbG9hdEJhcjogIiVEOCVCNCVEOCVCMSVEOSU4QSVEOCVCNyUyMCVEOCVBNyVEOSU4NCVEOCVBMyVEOCVBRiVEOSU4OCVEOCVBNyVEOCVBQSIsCiAgICAgICAgcHJldmlld0ZvbGxvd01vdXNlOiAiJUQ4JUI5JUQ4JUIxJUQ4JUI2JTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUI5JUQ4JUE3JUQ5JThBJUQ5JTg2JUQ4JUE5JTIwJUQ4JUE4JUQ4JUFDJUQ4JUE3JUQ5JTg2JUQ4JUE4JTIwJUQ4JUE3JUQ5JTg0JUQ5JTgxJUQ4JUEzJUQ4JUIxJUQ4JUE5IiwKICAgICAgICBzaG93RGVsYXk6ICIlRDglQUElRDglQTMlRDglQUUlRDklOEElRDglQjElMjAlRDglQTclRDklODQlRDglQjklRDglQjElRDglQjYiLAogICAgICAgIG1zOiAiJUQ5JTg1JUQ5JTg0JUQ5JTg0JUQ5JThBJTIwJUQ4JUFCJUQ4JUE3JUQ5JTg2JUQ5JThBJUQ4JUE5IiwKICAgICAgICBoaWRlOiAiJUQ4JUE1JUQ4JUFFJUQ5JTgxJUQ4JUE3JUQ4JUExIiwKICAgICAgICBoaWRlRGVsYXk6ICIlRDglQUElRDglQTMlRDglQUUlRDklOEElRDglQjElMjAlRDglQTclRDklODQlRDglQTUlRDglQUUlRDklODElRDglQTclRDglQTEiLAogICAgICAgIGZvcmNlU2hvdzogIiVEOCVCOSVEOCVCMSVEOCVCNiUyMCVEOCVCNCVEOCVCMSVEOSU4QSVEOCVCNyUyMCVEOCVBNyVEOSU4NCVEOCVBMyVEOCVBRiVEOSU4OCVEOCVBNyVEOCVBQSUyMCVEOSU4MSVEOSU4OCVEOSU4MiUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSUyMCVEOCVCQSVEOSU4QSVEOCVCMSUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOSU4MyVEOCVBOCVEOCVCMSVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOCVBQSVEOSU4QSUyMCVEOCVBQSVEOCVBQSVEOCVBQyVEOCVBNyVEOSU4OCVEOCVCMiUyMCVEOSU4NyVEOCVCMCVEOCVBNyUyMCVEOCVBNyVEOSU4NCVEOCVBRCVEOCVBQyVEOSU4NSVEOCU4QyIsCiAgICAgICAgZm9yY2VTaG93VGlwOiAiJUQ4JUI5JUQ4JUIxJUQ4JUI2JTIwJUQ4JUI0JUQ4JUIxJUQ5JThBJUQ4JUI3JTIwJUQ4JUE3JUQ5JTg0JUQ4JUEzJUQ4JUFGJUQ5JTg4JUQ4JUE3JUQ4JUFBJTIwJUQ4JUE3JUQ5JTg0JUQ4JUI5JUQ4JUE3JUQ4JUE2JUQ5JTg1JTIwJUQ4JUI5JUQ5JTg2JUQ4JUFGJUQ5JTg1JUQ4JUE3JTIwJUQ5JThBJUQ4JUFBJUQ4JUFDJUQ4JUE3JUQ5JTg4JUQ4JUIyJTIwJUQ4JUFEJUQ4JUFDJUQ5JTg1JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ4JUE5JTIwJUQ4JUJBJUQ5JThBJUQ4JUIxJTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ5JTgzJUQ4JUE4JUQ4JUIxJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUFEJUQ4JUFDJUQ5JTg1JTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUFEJUQ4JUFGJUQ4JUFGJTIwJUQ4JUEzJUQ4JUFGJUQ5JTg2JUQ4JUE3JUQ5JTg3IiwKICAgICAgICBzaXplTGltaXRPcjogIiVEOSU4MSVEOCVCOSVEOCVBNyVEOSU4NCUyMCVEOCVBOCVEOCVBNyVEOSU4NCVEOCVCNyVEOSU4OCVEOSU4NCUyMCVEOCVBMyVEOSU4OCUyMCVEOCVBNyVEOSU4NCVEOCVCOSVEOCVCMSVEOCVCNiUyMCVEOSU4MSVEOSU4MiVEOCVCNyIsCiAgICAgICAgcHg6ICIlRDglQTglRDklODMlRDglQjMlRDklODQiLAogICAgICAgIG1pblNpemVMaW1pdDogIiVEOCVCOSVEOCVCMSVEOCVCNiUyMCVEOCVCNCVEOCVCMSVEOSU4QSVEOCVCNyUyMCVEOCVBNyVEOSU4NCVEOCVBMyVEOCVBRiVEOSU4OCVEOCVBNyVEOCVBQSUyMCVEOSU4MSVEOSU4OCVEOSU4MiUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOSU4MyVEOCVBOCVEOCVCMSVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOCVBQSVEOSU4QSUyMCVEOCVBQSVEOCVBQSVEOCVBQyVEOCVBNyVEOSU4OCVEOCVCMiUyMCVEOSU4NyVEOCVCMCVEOCVBNyUyMCVEOCVBNyVEOSU4NCVEOCVBRCVEOCVBQyVEOSU4NSIsCiAgICAgICAgbWluU2l6ZUxpbWl0VGlwOiAiJUQ4JUE4JUQ4JUI5JUQ4JUFGJTIwJUQ4JUFBJUQ5JTgzJUQ4JUE4JUQ5JThBJUQ4JUIxJTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ4JUE5JTIwKCVEOSU4NCVEOCVBNyUyMCVEOSU4QSVEOCVBQSVEOCVCNyVEOCVBNyVEOCVBOCVEOSU4MiUyMCVEOCVBNyVEOSU4NCVEOCVBRCVEOCVBQyVEOSU4NSUyMCVEOCVBNyVEOSU4NCVEOCVBMyVEOCVCNSVEOSU4NCVEOSU4QSUyMCVEOSU4NCVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSUyMCVEOSU4NSVEOCVCOSUyMCVEOCVBNyVEOSU4NCVEOCVBRCVEOCVBQyVEOSU4NSUyMCVEOCVBNyVEOSU4NCVEOSU4MSVEOCVCOSVEOSU4NCVEOSU4QSklRDglOEMlMjAlRDklOEElRDglQUElRDklODUlMjAlRDglQjklRDglQjElRDglQjYlMjAlRDglQjQlRDglQjElRDklOEElRDglQjclMjAlRDglQTclRDklODQlRDglQTMlRDglQUYlRDklODglRDglQTclRDglQUElMjAlRDglQTclRDklODQlRDglQjklRDglQTclRDglQTYlRDklODUlMjAlRDglQjklRDklODYlRDglQUYlRDklODUlRDglQTclMjAlRDklOEElRDklODMlRDklODglRDklODYlMjAlRDglQjclRDklODglRDklODQlMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElRDglQTklMjAlRDglQTclRDklODQlRDklODUlRDglQjklRDglQjElRDklODglRDglQjYlRDglQTklMjAlRDglQTMlRDklODMlRDglQTglRDglQjElMjAlRDklODUlRDklODYlMjAlRDglQTclRDklODQlRDklODIlRDklOEElRDklODUlRDglQTklMjAlRDglQTclRDklODQlRDklODUlRDglQUQlRDglQUYlRDglQUYlRDglQTkuIiwKICAgICAgICBkZWZhdWx0U2l6ZUxpbWl0OiAiJUQ4JUFEJUQ4JUFGJTIwJUQ4JUE3JUQ5JTg0JUQ4JUFEJUQ4JUFDJUQ5JTg1JTIwJUQ4JUE3JUQ5JTg0JUQ4JUE3JUQ5JTgxJUQ4JUFBJUQ4JUIxJUQ4JUE3JUQ4JUI2JUQ5JThBJTIwJUQ5JTg0JUQ5JTg0JUQ5JTg1JUQ4JUI5JUQ4JUIxJUQ4JUI2IiwKICAgICAgICBsaXN0ZW5CZzogIiVEOCVBNyVEOCVCMyVEOCVBQSVEOSU4NSVEOCVBNyVEOCVCOSUyMCVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOCVBRSVEOSU4NCVEOSU4MSVEOSU4QSVEOCVBOSIsCiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAiJUQ5JTg0JUQ5JTg4JUQ5JTg2JTIwJUQ4JUE3JUQ5JTg0JUQ4JUFFJUQ5JTg0JUQ5JTgxJUQ5JThBJUQ4JUE5IiwKICAgICAgICBsaXN0ZW5CZ1RpcDogIiVEOCVCOSVEOCVCMSVEOCVCNiUyMCVEOCVCNCVEOCVCMSVEOSU4QSVEOCVCNyUyMCVEOCVBNyVEOSU4NCVEOCVBMyVEOCVBRiVEOSU4OCVEOCVBNyVEOCVBQSUyMCVEOCVCOSVEOSU4NCVEOSU4OSUyMCVEOCVBNyVEOSU4NCVEOCVCOSVEOSU4NiVEOCVCNSVEOCVCMSUyMCVEOCVBNyVEOSU4NCVEOCVCMCVEOSU4QSUyMCVEOSU4QSVEOCVBRCVEOCVBQSVEOSU4OCVEOSU4QSUyMCVEOCVCOSVEOSU4NCVEOSU4OSUyMCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSUyMCVEOCVBRSVEOSU4NCVEOSU4MSVEOSU4QSVEOCVBOSIsCiAgICAgICAgYnV0b25PcmRlcjogIiVEOCVBQSVEOCVCMSVEOCVBQSVEOSU4QSVEOCVBOCUyMCVEOCVCMSVEOSU4NSVEOSU4OCVEOCVCMiUyMCVEOCVCNCVEOCVCMSVEOSU4QSVEOCVCNyUyMCVEOCVBNyVEOSU4NCVEOCVBMyVEOCVBRiVEOSU4OCVEOCVBNyVEOCVBQSIsCiAgICAgICAga2V5c0VuYWJsZTogIiVEOCVBQSVEOSU4NSVEOSU4MyVEOSU4QSVEOSU4NiUyMCVEOCVBNyVEOSU4NCVEOCVBNyVEOCVBRSVEOCVBQSVEOCVCNSVEOCVBNyVEOCVCMSVEOCVBNyVEOCVBQSIsCiAgICAgICAga2V5c0FjdHVhbDogIiVEOSU4MSVEOCVBQSVEOCVBRCUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOSU4MyVEOCVBOCVEOSU4QSVEOCVCMSVEOCVBOSIsCiAgICAgICAga2V5c0FjdHVhbFRpcDogIiVEOCVBNyVEOCVCNiVEOCVCQSVEOCVCNyUyMCVEOCVCOSVEOSU4NCVEOSU4OSUyMCVEOSU4NyVEOCVCMCVEOCVBNyUyMCVEOCVBNyVEOSU4NCVEOCVCMiVEOCVCMSUyMCVEOSU4NCVEOSU4MSVEOCVBQSVEOCVBRCUyMCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSUyMCVEOSU4MyVEOCVBOCVEOSU4QSVEOCVCMSVEOCVBOSUyMCVEOCVCOSVEOSU4NiVEOCVBRiVEOSU4NSVEOCVBNyUyMCVEOSU4QSVEOCVCOCVEOSU4NyVEOCVCMSUyMCVEOCVCNCVEOCVCMSVEOSU4QSVEOCVCNyUyMCVEOCVBNyVEOSU4NCVEOCVBMyVEOCVBRiVEOSU4OCVEOCVBNyVEOCVBQSUyMCVEOCVBNyVEOSU4NCVEOCVCOSVEOCVBNyVEOCVBNiVEOSU4NSIsCiAgICAgICAga2V5c1NlYXJjaDogIiVEOCVBNyVEOSU4NCVEOCVBOCVEOCVBRCVEOCVBQiUyMCVEOCVCOSVEOSU4NiUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOCVBMyVEOCVCNSVEOSU4NCVEOSU4QSVEOCVBOSIsCiAgICAgICAga2V5c1NlYXJjaFRpcDogIiVEOCVBNyVEOCVCNiVEOCVCQSVEOCVCNyUyMCVEOCVCOSVEOSU4NCVEOSU4OSUyMCVEOSU4NyVEOCVCMCVEOCVBNyUyMCVEOCVBNyVEOSU4NCVEOCVCMiVEOCVCMSUyMCVEOSU4NCVEOSU4NCVEOCVBOCVEOCVBRCVEOCVBQiUyMCVEOCVCOSVEOSU4NiUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOCVBMyVEOCVCNSVEOSU4NCVEOSU4QSVEOCVBOSUyMCVEOCVCOSVEOSU4NiVEOCVBRiVEOSU4NSVEOCVBNyUyMCVEOSU4QSVEOCVCOCVEOSU4NyVEOCVCMSUyMCVEOCVCNCVEOCVCMSVEOSU4QSVEOCVCNyUyMCVEOCVBNyVEOSU4NCVEOCVBMyVEOCVBRiVEOSU4OCVEOCVBNyVEOCVBQSUyMCVEOCVBNyVEOSU4NCVEOCVCOSVEOCVBNyVEOCVBNiVEOSU4NSIsCiAgICAgICAgaGVhZFNlYXJjaFRpcDogIiVEOCVBNyVEOSU4NCVEOCVBOCVEOCVBRCVEOCVBQiUyMCVEOCVBOCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSIsCiAgICAgICAgaGVhZFNlYXJjaEFsbDogIiVEOCVBNyVEOSU4NCVEOCVBOCVEOCVBRCVEOCVBQiUyMCVEOSU4MSVEOSU4QSUyMCVEOCVBNyVEOSU4NCVEOSU4MyVEOSU4NCIsCiAgICAgICAga2V5c0N1cnJlbnQ6ICIlRDklODElRDglQUElRDglQUQlMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElRDglQTklMjAlRDglQTclRDklODQlRDglQUQlRDglQTclRDklODQlRDklOEElRDglQTkiLAogICAgICAgIGtleXNDdXJyZW50VGlwOiAiJUQ4JUE3JUQ4JUI2JUQ4JUJBJUQ4JUI3JTIwJUQ4JUI5JUQ5JTg0JUQ5JTg5JTIwJUQ5JTg3JUQ4JUIwJUQ4JUE3JTIwJUQ4JUE3JUQ5JTg0JUQ4JUIyJUQ4JUIxJTIwJUQ5JTg0JUQ5JTgxJUQ4JUFBJUQ4JUFEJTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUFEJUQ4JUE3JUQ5JTg0JUQ5JThBJUQ4JUE5JTIwJUQ4JUI5JUQ5JTg2JUQ4JUFGJUQ5JTg1JUQ4JUE3JTIwJUQ5JThBJUQ4JUI4JUQ5JTg3JUQ4JUIxJTIwJUQ4JUI0JUQ4JUIxJUQ5JThBJUQ4JUI3JTIwJUQ4JUE3JUQ5JTg0JUQ4JUEzJUQ4JUFGJUQ5JTg4JUQ4JUE3JUQ4JUFBJTIwJUQ4JUE3JUQ5JTg0JUQ4JUI5JUQ4JUE3JUQ4JUE2JUQ5JTg1IiwKICAgICAgICBrZXlzTWFnbmlmaWVyOiAiJUQ5JTgxJUQ4JUFBJUQ4JUFEJTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ5JTgzJUQ4JUE4JUQ4JUIxJTIwJUQ5JTg0JUQ5JTg0JUQ5JTg1JUQ4JUIxJUQ4JUE3JUQ5JTgyJUQ4JUE4JUQ4JUE5IiwKICAgICAgICBrZXlzTWFnbmlmaWVyVGlwOiAiJUQ4JUE3JUQ4JUI2JUQ4JUJBJUQ4JUI3JTIwJUQ4JUI5JUQ5JTg0JUQ5JTg5JTIwJUQ5JTg3JUQ4JUIwJUQ4JUE3JTIwJUQ4JUE3JUQ5JTg0JUQ4JUIyJUQ4JUIxJTIwJUQ5JTg0JUQ5JTgxJUQ4JUFBJUQ4JUFEJTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ5JTgzJUQ4JUE4JUQ4JUIxJTIwJUQ4JUI5JUQ5JTg2JUQ4JUFGJUQ5JTg1JUQ4JUE3JTIwJUQ5JThBJUQ4JUI4JUQ5JTg3JUQ4JUIxJTIwJUQ4JUI0JUQ4JUIxJUQ5JThBJUQ4JUI3JTIwJUQ4JUE3JUQ5JTg0JUQ4JUEzJUQ4JUFGJUQ5JTg4JUQ4JUE3JUQ4JUFBJTIwJUQ4JUE3JUQ5JTg0JUQ4JUI5JUQ4JUE3JUQ4JUE2JUQ5JTg1IiwKICAgICAgICBrZXlzR2FsbGVyeTogIiVEOSU4MSVEOCVBQSVEOCVBRCUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVCOSVEOCVCMSVEOCVCNiUyMCglRDglQjklRDglQTclRDklODQlRDklODUlRDklOEElMjAlRDklODUlRDglQjklMjAlRDklODUlRDklODElRDglQTclRDglQUElRDklOEElRDglQUQlMjAlRDglQTclRDklODQlRDklODglRDglQjglRDglQTclRDglQTYlRDklODEpIiwKICAgICAgICBrZXlzR2FsbGVyeVRpcDogIiVEOCVBNyVEOCVCNiVEOCVCQSVEOCVCNyUyMCVEOCVCOSVEOSU4NCVEOSU4OSUyMCVEOSU4NyVEOCVCMCVEOCVBNyUyMCVEOCVBNyVEOSU4NCVEOCVCMiVEOCVCMSUyMCVEOSU4NCVEOSU4MSVEOCVBQSVEOCVBRCUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVCOSVEOCVCMSVEOCVCNiUyMCVEOCVCOSVEOSU4NiVEOCVBRiVEOSU4NSVEOCVBNyUyMCVEOSU4QSVEOCVCOCVEOSU4NyVEOCVCMSUyMCVEOCVCNCVEOCVCMSVEOSU4QSVEOCVCNyUyMCVEOCVBNyVEOSU4NCVEOCVBMyVEOCVBRiVEOSU4OCVEOCVBNyVEOCVBQSUyMCVEOCVBNyVEOSU4NCVEOCVCOSVEOCVBNyVEOCVBNiVEOSU4NSIsCiAgICAgICAgb3BlbkdhbGxlcnk6ICIlRDklODElRDglQUElRDglQUQlMjAlRDglQTclRDklODQlRDklODUlRDglQjklRDglQjElRDglQjYiLAogICAgICAgIG1hZ25pZmllcjogIiVEOCVBQSVEOSU4MyVEOCVBOCVEOSU4QSVEOCVCMSIsCiAgICAgICAgbWFnbmlmaWVyUmFkaXVzOiAiJUQ5JTg2JUQ4JUI1JUQ5JTgxJTIwJUQ4JUE3JUQ5JTg0JUQ5JTgyJUQ4JUI3JUQ4JUIxJTIwJUQ4JUE3JUQ5JTg0JUQ4JUE3JUQ5JTgxJUQ4JUFBJUQ4JUIxJUQ4JUE3JUQ4JUI2JUQ5JThBIiwKICAgICAgICBtYWduaWZpZXJXaGVlbFpvb21FbmFibGVkOiAiJUQ4JUFBJUQ5JTg1JUQ5JTgzJUQ5JThBJUQ5JTg2JTIwJUQ4JUFBJUQ5JTgzJUQ4JUE4JUQ5JThBJUQ4JUIxJTIwJUQ4JUE3JUQ5JTg0JUQ4JUI5JUQ4JUFDJUQ5JTg0JUQ4JUE5IiwKICAgICAgICBtYWduaWZpZXJXaGVlbFpvb21SYW5nZTogIiVEOSU4NiVEOCVCMyVEOCVBOCVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOCVBQSVEOSU4MyVEOCVBOCVEOSU4QSVEOCVCMSUyMCVEOSU4NCVEOSU4NCVEOSU4NSVEOSU4MyVEOCVBOCVEOCVCMSIsCiAgICAgICAgbWFnbmlmaWVyU2NhbGVJbWFnZTogIiVEOCVBQSVEOSU4MyVEOCVBOCVEOSU4QSVEOCVCMSUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSUyMCVEOCVBOCVEOCVBNyVEOSU4NCVEOCVCOSVEOCVBQyVEOSU4NCVEOCVBOSIsCiAgICAgICAgZ2FsbGVyeTogIiVEOCVBNyVEOSU4NCVEOSU4NSVEOCVCOSVEOCVCMSVEOCVCNiIsCiAgICAgICAgZ2FsbGVyeUZpdFRvU2NyZWVuOiAiJUQ4JUFBJUQ5JTgzJUQ4JUE4JUQ5JThBJUQ4JUIxJTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ4JUE5JTIwJUQ5JTg0JUQ4JUFBJUQ5JTg2JUQ4JUE3JUQ4JUIzJUQ4JUE4JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI0JUQ4JUE3JUQ4JUI0JUQ4JUE5IiwKICAgICAgICBnYWxsZXJ5Rml0VG9TY3JlZW5TbWFsbDogIiVEOCVBQSVEOSU4MyVEOCVBOCVEOSU4QSVEOCVCMSUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOCVCQSVEOSU4QSVEOCVCMSVEOCVBOSUyMCVEOCVBMyVEOSU4QSVEOCVCNiVEOSU4QiVEOCVBNyIsCiAgICAgICAgZ2FsbGVyeUZpdFRvU2NyZWVuVGlwOiAiJUQ4JUE3JUQ5JTg0JUQ4JUFBJUQ5JTgzJUQ5JThBJUQ5JTgxJTIwJUQ5JTg0JUQ5JThBJUQ5JTgzJUQ5JTg4JUQ5JTg2JTIwJUQ5JThBJUQ4JUFEJUQ4JUFBJUQ5JTg4JUQ5JThBJUQ4JThDJTIwJUQ5JTg4JUQ5JTg0JUQ5JThBJUQ4JUIzJTIwJUQ5JThBJUQ4JUJBJUQ4JUI3JUQ5JThBIiwKICAgICAgICBnYWxsZXJ5U2Nyb2xsRW5kVG9DaGFuZ2U6ICIlRDglQUElRDglQTglRDglQUYlRDklOEElRDklODQlMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElRDglQTklMjAlRDglQTglRDglQjklRDglQUYlMjAlRDglQTclRDklODQlRDglQUElRDklODUlRDglQjElRDklOEElRDglQjElMjAlRDglQTUlRDklODQlRDklODklMjAlRDklODYlRDklODclRDglQTclRDklOEElRDglQTklMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElRDglQTklMjAlRDglQTclRDklODQlRDglQjclRDklODglRDklOEElRDklODQlRDglQTkiLAogICAgICAgIGdhbGxlcnlTY3JvbGxFbmRUb0NoYW5nZVRpcDogIiVEOSU4MSVEOCVCOSVEOCVBNyVEOSU4NCUyMCVEOCVBOCVEOCVCOSVEOCVBRiUyMCVEOCVBNSVEOSU4NCVEOCVCQSVEOCVBNyVEOCVBMSUyMCVEOCVBNyVEOSU4NCVEOCVBRSVEOSU4QSVEOCVBNyVEOCVCMSUyMCVEOCVBNyVEOSU4NCVEOCVCMyVEOCVBNyVEOCVBOCVEOSU4MiIsCiAgICAgICAgZ2FsbGVyeUV4cG9ydFR5cGU6ICIlRDglQTclRDklODQlRDglQUElRDglQjElRDglQUElRDklOEElRDglQTglMjAlRDglQTclRDklODQlRDglQTclRDklODElRDglQUElRDglQjElRDglQTclRDglQjYlRDklOEElMjAlRDglQjklRDklODYlRDglQUYlMjAlRDglQUElRDglQjUlRDglQUYlRDklOEElRDglQjElMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjEiLAogICAgICAgIGdyaWQ6ICIlRDglQUElRDglQjElRDglQUElRDklOEElRDglQTglMjAlRDglQTclRDklODQlRDglQTglRDklODQlRDglQTclRDglQjciLAogICAgICAgIGdyaWRCaWc6ICIlRDglQTclRDklODQlRDglQUElRDglQjElRDglQUElRDklOEElRDglQTglMjAlRDglQTclRDklODQlRDglQTMlRDglQjUlRDklODQlRDklOEEiLAogICAgICAgIGxpc3Q6ICIlRDglQUElRDglQjElRDglQUElRDklOEElRDglQTglMjAlRDglQTclRDklODQlRDklODIlRDglQTclRDglQTYlRDklODUlRDglQTkiLAogICAgICAgIGdhbGxlcnlBdXRvTG9hZDogIiVEOCVBQSVEOCVBRCVEOSU4NSVEOSU4QSVEOSU4NCUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVCMiVEOSU4QSVEOCVBRiUyMCVEOSU4NSVEOSU4NiUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSUyMCVEOCVBQSVEOSU4NCVEOSU4MiVEOCVBNyVEOCVBNiVEOSU4QSVEOSU4QiVEOCVBNyUyMCVEOSU4MSVEOSU4QSUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4MSVEOCVBRCVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOCVBQSVEOCVBNyVEOSU4NCVEOSU4QSVEOCVBOSIsCiAgICAgICAgZ2FsbGVyeUxvYWRBbGw6ICIlRDklODUlRDglQjklRDglQTclRDklODQlRDglQUMlRDglQTklMjAlRDglQUMlRDklODUlRDklOEElRDglQjklMjAlRDglQTclRDklODQlRDglQjUlRDklODElRDglQUQlRDglQTclRDglQUElMjAlRDglQUElRDklODQlRDklODIlRDglQTclRDglQTYlRDklOEElRDklOEIlRDglQTclMjAlRDglQjklRDklODYlRDglQUYlMjAlRDglQUElRDglQUQlRDklODUlRDklOEElRDklODQlMjAlRDglQTclRDklODQlRDklODUlRDglQjIlRDklOEElRDglQUYlMjAlRDklODUlRDklODYlMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjEiLAogICAgICAgIGdhbGxlcnlMb2FkQWxsVGlwOiAiJUQ5JTgyJUQ4JUFGJTIwJUQ4JUFBJUQ4JUE0JUQ4JUFCJUQ4JUIxJTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTgxJUQ4JUFEJUQ4JUE3JUQ4JUFBJTIwJUQ4JUE3JUQ5JTg0JUQ5JTgzJUQ4JUFCJUQ5JThBJUQ4JUIxJUQ4JUE5JTIwJUQ4JUI5JUQ5JTg0JUQ5JTg5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUFBJUQ4JUFDJUQ4JUIxJUQ4JUE4JUQ4JUE5IiwKICAgICAgICBnYWxsZXJ5RG93bmxvYWRXaXRoWmlwOiAiJUQ4JUI2JUQ4JUJBJUQ4JUI3JTIwJUQ4JUE1JUQ5JTg0JUQ5JTg5JTIwWklQJTIwJUQ4JUI5JUQ5JTg2JUQ4JUFGJTIwJUQ4JUFBJUQ5JTg2JUQ4JUIyJUQ5JThBJUQ5JTg0JTIwJUQ4JUE3JUQ5JTg0JUQ5JTgzJUQ5JTg0IiwKICAgICAgICBnYWxsZXJ5RG93bmxvYWRXaXRoWmlwQWxlcnQ6ICIlRDglQUMlRDglQTclRDglQjElRDklOEQlMjAlRDglQTclRDklODQlRDglQjYlRDglQkElRDglQjclRDglOEMlMjAlRDklOEElRDglQjElRDglQUMlRDklODklMjAlRDglQTclRDklODQlRDglQTclRDklODYlRDglQUElRDglQjglRDglQTclRDglQjElMjAlRDklODIlRDklODQlRDklOEElRDklODQlRDglQTclRDklOEIiLAogICAgICAgIGdhbGxlcnlTY2FsZVNtYWxsU2l6ZTE6ICIlRDglQTclRDklODQlRDglQUQlRDglQUMlRDklODUlMjAlRDglQTclRDklODQlRDklODElRDglQjklRDklODQlRDklOEElMjAlRDglQTMlRDklODIlRDklODQlMjAlRDklODUlRDklODYlMjAlRDglQTclRDklODQlRDglQTclRDglQjElRDglQUElRDklODElRDglQTclRDglQjklMjAlRDklODglRDglQTclRDklODQlRDglQjklRDglQjElRDglQjYiLAogICAgICAgIGdhbGxlcnlTY2FsZVNtYWxsU2l6ZTI6ICIlRDglQTclRDklODQlRDglQTglRDklODMlRDglQjMlRDklODQlRDglQTclRDglQUElMjAlRDklODUlRDglQjUlRDklODYlRDklODElRDglQTklMjAlRDklODMlRDglQjUlRDklODglRDglQjElMjAlRDglQjUlRDglQkElRDklOEElRDglQjElRDglQTklMjAlRDglQTclRDklODQlRDglQUQlRDglQUMlRDklODUiLAogICAgICAgIGdhbGxlcnlTaG93U21hbGxTaXplOiAiJUQ4JUI5JUQ4JUIxJUQ4JUI2JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ4JUJBJUQ5JThBJUQ4JUIxJUQ4JUE5JTIwJUQ4JUE3JUQ5JTgxJUQ4JUFBJUQ4JUIxJUQ4JUE3JUQ4JUI2JUQ5JThBJUQ5JThCJUQ4JUE3IiwKICAgICAgICBnYWxsZXJ5VHJhbnNpdGlvbjogIiVEOCVCOSVEOCVCMSVEOCVCNiUyMCVEOCVBNyVEOSU4NCVEOCVBQSVEOCVBMyVEOCVBQiVEOSU4QSVEOCVCMSVEOCVBNyVEOCVBQSUyMCVEOCVCOSVEOSU4NiVEOCVBRiUyMCVEOCVBNyVEOSU4NCVEOCVBQSVEOCVBOCVEOCVBRiVEOSU4QSVEOSU4NCUyMCVEOCVBOCVEOSU4QSVEOSU4NiUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSUyMCVEOSU4MSVEOSU4QSUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVCOSVEOCVCMSVEOCVCNiIsCiAgICAgICAgZ2FsbGVyeVNpZGViYXJQb3NpdGlvbjogIiVEOSU4OCVEOCVCNiVEOCVCOSUyMCVEOCVCNCVEOCVCMSVEOSU4QSVEOCVCNyUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVCNSVEOCVCQSVEOCVCMSVEOCVBOSIsCiAgICAgICAgYm90dG9tOiAiJUQ4JUE3JUQ5JTg0JUQ4JUEzJUQ4JUIzJUQ5JTgxJUQ5JTg0IiwKICAgICAgICByaWdodDogIiVEOCVBNyVEOSU4NCVEOSU4QSVEOSU4NSVEOSU4QSVEOSU4NiIsCiAgICAgICAgbGVmdDogIiVEOCVBNyVEOSU4NCVEOSU4QSVEOCVCMyVEOCVBNyVEOCVCMSIsCiAgICAgICAgdG9wOiAiJUQ4JUE3JUQ5JTg0JUQ4JUEzJUQ4JUI5JUQ5JTg0JUQ5JTg5IiwKICAgICAgICBnYWxsZXJ5U2lkZWJhclNpemU6ICIlRDglQTclRDklODQlRDglQTclRDglQjElRDglQUElRDklODElRDglQTclRDglQjkiLAogICAgICAgIGdhbGxlcnlTaWRlYmFyU2l6ZVRpcDogIiVEOCVBNyVEOCVCMSVEOCVBQSVEOSU4MSVEOCVBNyVEOCVCOSUyMCVEOCVCNCVEOCVCMSVEOSU4QSVEOCVCNyUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVCNSVEOCVCQSVEOCVCMSVEOCVBOSUyMCglRDglQTUlRDglQjAlRDglQTclMjAlRDklODMlRDglQTclRDklODYlMjAlRDglQTMlRDklODElRDklODIlRDklOEElRDklOEIlRDglQTcpJTIwJUQ4JUEzJUQ5JTg4JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI5JUQ4JUIxJUQ4JUI2JTIwKCVEOCVBNSVEOCVCMCVEOCVBNyUyMCVEOSU4MyVEOCVBNyVEOSU4NiUyMCVEOCVCMSVEOCVBMyVEOCVCMyVEOSU4QSVEOSU4QiVEOCVBNykiLAogICAgICAgIGdhbGxlcnlNYXgxOiAiJUQ4JUE3JUQ5JTg0JUQ4JUFBJUQ4JUFEJUQ5JTg1JUQ5JThBJUQ5JTg0JTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUIzJUQ4JUE4JUQ5JTgyJTIwJUQ4JUE3JUQ5JTg0JUQ4JUEzJUQ5JTgyJUQ4JUI1JUQ5JTg5IiwKICAgICAgICBnYWxsZXJ5TWF4MjogIiVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSUyMCglRDklODIlRDglQTglRDklODQlMjAlRDklODglRDglQTglRDglQjklRDglQUYpIiwKICAgICAgICBnYWxsZXJ5QXV0b1pvb206ICIlRDglQTclRDklODQlRDglQUElRDklODMlRDglQTglRDklOEElRDglQjElMjAlRDklOEElRDglQjklRDklODglRDglQUYlMjAlRDglQTUlRDklODQlRDklODklMjAxMDAlMjUlMjAoJUQ5JTgzJUQ4JUIxJUQ5JTg4JUQ5JTg1KSIsCiAgICAgICAgZ2FsbGVyeUF1dG9ab29tVGlwOiAiJUQ4JUE1JUQ4JUIwJUQ4JUE3JTIwJUQ5JTgyJUQ5JTg1JUQ4JUFBJTIwJUQ4JUE4JUQ4JUE3JUQ5JTg0JUQ4JUFBJUQ5JTgzJUQ4JUE4JUQ5JThBJUQ4JUIxJUQ4JThDJTIwJUQ5JTgyJUQ5JTg1JTIwJUQ4JUE4JUQ4JUFBJUQ4JUJBJUQ5JThBJUQ5JThBJUQ4JUIxJTIwJUQ4JUFBJUQ5JTgzJUQ4JUE4JUQ5JThBJUQ4JUIxJTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ4JUE5JTIwJUQ5JTg4JUQ4JUEzJUQ4JUFDJUQ4JUIyJUQ4JUE3JUQ4JUExJTIwJUQ4JUI0JUQ4JUIxJUQ5JThBJUQ4JUI3JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUI1JUQ4JUJBJUQ4JUIxJUQ4JUE5JTIwJUQ4JUE1JUQ5JTg0JUQ5JTg5JTIwMTAwJTI1JTIwJUQ5JTg4JUQ4JUIyJUQ5JThBJUQ4JUE3JUQ4JUFGJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUIzJUQ4JUE3JUQ4JUFEJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ5JTgyJUQ4JUE3JUQ4JUE4JUQ5JTg0JUQ4JUE5JTIwJUQ5JTg0JUQ5JTg0JUQ4JUI5JUQ4JUIxJUQ4JUI2JTIwKCVEOCVCNSVEOCVBNyVEOSU4NCVEOCVBRCUyMCVEOSU4MSVEOSU4MiVEOCVCNyUyMCVEOSU4MSVEOSU4QSUyMCVEOSU4MyVEOCVCMSVEOSU4OCVEOSU4NSkiLAogICAgICAgIGdhbGxlcnlEZXNjcmlwdGlvbkxlbmd0aDE6ICIlRDglQTclRDklODQlRDglQUQlRDglQUYlMjAlRDglQTclRDklODQlRDglQTMlRDklODIlRDglQjUlRDklODklMjAlRDklODQlRDklODQlRDglQUElRDglQjklRDklODQlRDklOEElRDklODIlMjAlRDklODclRDklODgiLAogICAgICAgIGdhbGxlcnlEZXNjcmlwdGlvbkxlbmd0aDI6ICIlRDglQTclRDklODQlRDglQTMlRDglQUQlRDglQjElRDklODEiLAogICAgICAgIGdhbGxlcnlBdXRvT3BlblNpdGVzOiAiJUQ4JUI5JUQ5JTg2JUQ4JUE3JUQ5JTg4JUQ5JThBJUQ5JTg2JTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ5JTg4JUQ4JUE3JUQ5JTgyJUQ4JUI5JTIwJUQ5JTg0JUQ5JTgxJUQ4JUFBJUQ4JUFEJTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUI5JUQ4JUIxJUQ4JUI2JTIwJUQ4JUFBJUQ5JTg0JUQ5JTgyJUQ4JUE3JUQ4JUE2JUQ5JThBJUQ5JThCJUQ4JUE3JUQ4JThDJTIwJUQ5JTg4JUQ4JUE3JUQ4JUFEJUQ4JUFGJTIwJUQ5JTgxJUQ5JThBJTIwJUQ5JTgzJUQ5JTg0JTIwJUQ4JUIzJUQ4JUI3JUQ4JUIxJUQ4JThDJTIwJUQ5JThBJUQ4JUE4JUQ4JUFGJUQ4JUEzJTIwJUQ4JUE4JUQ5JTgwJTIwQCUyMCVEOSU4NCVEOCVCOSVEOCVCMSVEOCVCNiUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVCMiVEOSU4QSVEOCVBRiIsCiAgICAgICAgZGlzYWJsZUtleVNpdGVzOiAiUmVndWxhcnMgb2YgdXJscyBmb3IgZGlzYWJsaW5nIHNob3J0Y3V0IGtleXMsIG9uZSBwZXIgbGluZSIsCiAgICAgICAgYXV0b09wZW5WaWV3bW9yZTogIiVEOCVCOSVEOCVCMSVEOCVCNiUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVCMiVEOSU4QSVEOCVBRiUyMCVEOCVBQSVEOSU4NCVEOSU4MiVEOCVBNyVEOCVBNiVEOSU4QSVEOSU4QiVEOCVBNyUyMCVEOCVCOSVEOSU4NiVEOCVBRiUyMCVEOSU4MSVEOCVBQSVEOCVBRCUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVCOSVEOCVCMSVEOCVCNiIsCiAgICAgICAgZ2FsbGVyeVNlYXJjaERhdGE6ICIlRDklODIlRDklODglRDglQTclRDglQjklRDglQUYlMjAlRDglQTclRDklODQlRDklODUlRDklODglRDglQTclRDklODIlRDglQjklMjAlRDklODQlRDklODQlRDglQTglRDglQUQlRDglQUIlRDglOEMlMjAlRDglQTMlRDklODElRDglQjElRDglQkElRDklODclRDglQTclMjAlRDklODQlRDglQTclRDglQjMlRDglQUElRDglQjklRDglQTclRDglQUYlRDglQTkiLAogICAgICAgIGdhbGxlcnlFZGl0U2l0ZTogIiVEOCVBQSVEOCVBRCVEOCVCMSVEOSU4QSVEOCVCMSUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOSU4OCVEOSU4MiVEOCVCOSUyMCVEOCVCOSVEOCVBOCVEOCVCMSUyMCVEOCVBNyVEOSU4NCVEOCVBNSVEOSU4NiVEOCVBQSVEOCVCMSVEOSU4NiVEOCVBQSIsCiAgICAgICAgaW1nV2luZG93OiAiJUQ5JTg2JUQ4JUE3JUQ5JTgxJUQ4JUIwJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ4JUE5IiwKICAgICAgICBpbWdXaW5kb3dGaXRUb1NjcmVlbjogIiVEOCVBNyVEOSU4NCVEOCVBQSVEOSU4MyVEOSU4QSVEOSU4MSUyMCVEOSU4NSVEOCVCOSUyMCVEOCVBNyVEOSU4NCVEOCVCNCVEOCVBNyVEOCVCNCVEOCVBOSIsCiAgICAgICAgaW1nV2luZG93Rml0VG9TY3JlZW5UaXA6ICIlRDglQTclRDklODQlRDglQUElRDklODMlRDklOEElRDklODElMjAlRDklODQlRDklOEElRDklODMlRDklODglRDklODYlMjAlRDklOEElRDglQUQlRDglQUElRDklODglRDklOEElRDglOEMlMjAlRDklODglRDklODQlRDklOEElRDglQjMlMjAlRDklOEElRDglQkElRDglQjclRDklOEEiLAogICAgICAgIGltZ1dpbmRvd0ZpdFRvU2NyZWVuV2hlblNtYWxsOiAiJUQ4JUE3JUQ5JTg0JUQ4JUFBJUQ5JTgzJUQ5JThBJUQ5JTgxJTIwJUQ5JTg1JUQ4JUI5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUI0JUQ4JUE3JUQ4JUI0JUQ4JUE5JTIwJUQ4JUFEJUQ4JUFBJUQ5JTg5JTIwJUQ5JTg4JUQ4JUE1JUQ5JTg2JTIwJUQ5JTgzJUQ4JUE3JUQ5JTg2JUQ4JUFBJTIwJUQ4JUI1JUQ4JUJBJUQ5JThBJUQ4JUIxJUQ4JUE5IiwKICAgICAgICBpbWdXaW5kb3dEZWZhdWx0VG9vbDogIiVEOCVBNyVEOSU4NCVEOCVBMyVEOCVBRiVEOCVBNyVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVBRSVEOCVBQSVEOCVBNyVEOCVCMSVEOCVBOSUyMCVEOCVBNyVEOSU4MSVEOCVBQSVEOCVCMSVEOCVBNyVEOCVCNiVEOSU4QSVEOSU4QiVEOCVBNyUyMCVEOCVCOSVEOSU4NiVEOCVBRiUyMCVEOSU4MSVEOCVBQSVEOCVBRCUyMCVEOCVBNyVEOSU4NCVEOSU4NiVEOCVBNyVEOSU4MSVEOCVCMCVEOCVBOSIsCiAgICAgICAgaGFuZDogIiVEOCVBNyVEOSU4NCVEOSU4QSVEOCVBRiIsCiAgICAgICAgcm90YXRlOiAiJUQ4JUFBJUQ4JUFGJUQ5JTg4JUQ5JThBJUQ4JUIxIiwKICAgICAgICB6b29tOiAiJUQ5JTg1JUQ5JTgzJUQ4JUE4JUQ4JUIxIiwKICAgICAgICBpbWdXaW5kb3dFc2NLZXk6ICJFc2MlMjAlRDglOEMlMjAlRDklODQlRDklODQlRDglQTUlRDglQkElRDklODQlRDglQTclRDklODIiLAogICAgICAgIGltZ1dpbmRvd0RibENsaWNrSW1nV2luZG93OiAiJUQ4JUE3JUQ5JTg0JUQ5JTg2JUQ5JTgyJUQ4JUIxJTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUIyJUQ4JUFGJUQ5JTg4JUQ4JUFDJTIwJUQ5JTg0JUQ5JTg0JUQ4JUE1JUQ4JUJBJUQ5JTg0JUQ4JUE3JUQ5JTgyIiwKICAgICAgICBpbWdXaW5kb3dDbGlja091dHNpZGU6ICIlRDglQTclRDklODQlRDklODYlRDklODIlRDglQjElMjAlRDglQUUlRDglQTclRDglQjElRDglQUMlMjAlRDglQTclRDklODQlRDklODYlRDglQTclRDklODElRDglQjAlRDglQTklMjAlRDklODQlRDklODQlRDglQTUlRDglQkElRDklODQlRDglQTclRDklODIiLAogICAgICAgIGltZ1dpbmRvd0NsaWNrT3V0c2lkZVRpcDogIiVEOSU4MSVEOCVCOSVEOCVBNyVEOSU4NCVEOCVBOSUyMCVEOSU4MSVEOSU4MiVEOCVCNyUyMCVEOCVCOSVEOSU4NiVEOCVBRiUyMCVEOCVCOSVEOCVCMSVEOCVCNiUyMCVEOCVBNyVEOSU4NCVEOCVCNyVEOCVBOCVEOSU4MiVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOCVCMiVEOCVBNyVEOCVBNiVEOCVBRiVEOCVBOSIsCiAgICAgICAgbm9uZTogIiVEOSU4NCVEOCVBNyUyMCVEOCVCNCVEOSU4QSVEOCVBMSIsCiAgICAgICAgY2xpY2s6ICIlRDklODYlRDklODIlRDglQjElRDglQTkiLAogICAgICAgIGRibGNsaWNrOiAiJUQ5JTg2JUQ5JTgyJUQ4JUIxJUQ4JUE5JTIwJUQ5JTg1JUQ4JUIyJUQ4JUFGJUQ5JTg4JUQ4JUFDJUQ4JUE5IiwKICAgICAgICBpbWdXaW5kb3dPdmVybGF5ZXJTaG93bjogIiVEOCVBNyVEOSU4NCVEOCVCNyVEOCVBOCVEOSU4MiVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOCVCMiVEOCVBNyVEOCVBNiVEOCVBRiVEOCVBOSIsCiAgICAgICAgaW1nV2luZG93T3ZlcmxheWVyQ29sb3I6ICIlRDglQTclRDklODQlRDklODQlRDklODglRDklODYlMjAlRDklODglRDglQTclRDklODQlRDglQjklRDglQUElRDglQTclRDklODUlRDglQTkiLAogICAgICAgIGltZ1dpbmRvd1NoaWZ0Um90YXRlU3RlcDE6ICJTaGlmdCUyMCVEOCVBQSVEOCVBRiVEOSU4OCVEOSU4QSVEOCVCMSUyMCVEOSU4NCVEOSU4NCVEOSU4MyVEOSU4NCUyMCVEOCVCOSVEOSU4NiVEOCVBRiUyMCVEOCVBNyVEOSU4NCVEOCVCNiVEOCVCQSVEOCVCNyUyMCVEOCVCOSVEOSU4NCVEOSU4OSIsCiAgICAgICAgaW1nV2luZG93U2hpZnRSb3RhdGVTdGVwMjogIiVEOCVBRiVEOCVCMSVEOCVBQyVEOCVBOSIsCiAgICAgICAgaW1nV2luZG93TW91c2VXaGVlbFpvb206ICIlRDglQUElRDklODMlRDglQTglRDklOEElRDglQjElMjAlRDglQTglRDglQTclRDglQjMlRDglQUElRDglQUUlRDglQUYlRDglQTclRDklODUlMjAlRDglQjklRDglQUMlRDklODQlRDglQTklMjAlRDglQTclRDklODQlRDklODElRDglQTMlRDglQjElRDglQTkiLAogICAgICAgIGltZ1dpbmRvd1pvb21SYW5nZTogIiVEOSU4NiVEOCVCNyVEOCVBNyVEOSU4MiUyMCVEOCVBNyVEOSU4NCVEOCVBQSVEOSU4MyVEOCVBOCVEOSU4QSVEOCVCMSIsCiAgICAgICAgaW1nV2luZG93Wm9vbVJhbmdlVGlwOiAiJUQ5JTg2JUQ4JUIzJUQ4JUE4JUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUFBJUQ5JTgzJUQ4JUE4JUQ5JThBJUQ4JUIxJTIwKCVEOSU4QSVEOCVBQyVEOCVBOCUyMCVEOCVBMyVEOSU4NiUyMCVEOCVBQSVEOSU4MyVEOSU4OCVEOSU4NiUyMCVEOSU4NSVEOSU4OCVEOCVBQyVEOCVBOCVEOCVBOSkiLAogICAgICAgIG90aGVyczogIiVEOCVBMyVEOCVBRSVEOCVCMSVEOSU4OSIsCiAgICAgICAgd2FpdEltZ0xvYWQ6ICIlRDglQTclRDklODQlRDglQTglRDglQUYlRDglQTElMjAlRDklODElRDklOEElMjAlRDglQUElRDklODYlRDklODElRDklOEElRDglQjAlMjAlRDglQTclRDklODQlRDglQjklRDklODUlRDklODQlRDklOEElRDglQTclRDglQUElMjAlRDklODUlRDglQUIlRDklODQlMjAlRDglQTclRDklODQlRDglQUElRDklODMlRDglQTglRDklOEElRDglQjElMjAlRDglQUQlRDglQUElRDklODklMjAlRDklOEElRDglQUElRDklODUlMjAlRDglQUElRDglQUQlRDklODUlRDklOEElRDklODQlMjAlRDglQTclRDklODQlRDglQjUlRDklODglRDglQjElRDglQTkiLAogICAgICAgIHdhaXRJbWdMb2FkVGlwOiAiJUQ5JThBJUQ5JTg1JUQ5JTgzJUQ5JTg2JUQ5JTgzJTIwJUQ5JTg1JUQ4JUE0JUQ5JTgyJUQ4JUFBJUQ5JThCJUQ4JUE3JTIwJUQ4JUFBJUQ5JTg2JUQ5JTgxJUQ5JThBJUQ4JUIwJTIwJUQ4JUE3JUQ5JTg0JUQ4JUI5JUQ5JTgzJUQ4JUIzJTIwJUQ5JTg0JUQ5JTg3JUQ4JUIwJUQ4JUE3JTIwJUQ4JUE3JUQ5JTg0JUQ4JUE1JUQ4JUI5JUQ4JUFGJUQ4JUE3JUQ4JUFGJTIwJUQ4JThDQ3RybCUyMCVEOCVCOSVEOSU4NiVEOCVBRiUyMCVEOCVBNyVEOSU4NCVEOCVCNiVEOCVCQSVEOCVCNyUyMCVEOSU4NSVEOCVCOSUyMCVEOCVBNyVEOSU4NCVEOCVBNyVEOCVCMyVEOCVBQSVEOSU4NSVEOCVCMSVEOCVBNyVEOCVCMSUyMCVEOCVCOSVEOSU4NCVEOSU4OSIsCiAgICAgICAgZGVidWc6ICIlRDklODglRDglQjYlRDglQjklMjAlRDglQTclRDklODQlRDglQUElRDglQjUlRDglQUQlRDklOEElRDglQUQiLAogICAgICAgIGN1c3RvbVJ1bGVzOiAiJUQ4JUE3JUQ5JTg0JUQ5JTgyJUQ5JTg4JUQ4JUE3JUQ4JUI5JUQ4JUFGJTIwJUQ4JUE3JUQ5JTg0JUQ5JTg1JUQ4JUFFJUQ4JUI1JUQ4JUI1JUQ4JUE5JTIwJUQ5JTg0JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ5JTgzJUQ4JUE4JUQ5JThBJUQ4JUIxJUQ4JUE5IiwKICAgICAgICBmaXJzdEVuZ2luZTogIiVEOSU4NSVEOCVBRCVEOCVCMSVEOSU4MyUyMCVEOCVBNyVEOSU4NCVEOCVBOCVEOCVBRCVEOCVBQiUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOSU4MSVEOCVCNiVEOSU4NCUyMCglRDglQTclRDklODQlRDglQTMlRDklODglRDklODQpIiwKICAgICAgICByZWZyZXNoV2hlbkVycm9yOiAiJUQ4JUFFJUQ4JUI3JUQ4JUEzJTIwJUQ5JTgxJUQ5JThBJTIwJUQ4JUE3JUQ5JTg0JUQ5JTgyJUQ4JUIxJUQ4JUE3JUQ4JUExJUQ4JUE5JUQ4JThDJTIwJUQ4JUE3JUQ5JTg2JUQ5JTgyJUQ4JUIxJTIwJUQ5JTg0JUQ4JUE1JUQ4JUI5JUQ4JUE3JUQ4JUFGJUQ4JUE5JTIwJUQ4JUE3JUQ5JTg0JUQ4JUFBJUQ4JUFEJUQ5JTg1JUQ5JThBJUQ5JTg0IiwKICAgICAgICBzd2l0Y2hTbGlkZTogIiVEOCVBQSVEOCVBOCVEOCVBRiVEOSU4QSVEOSU4NCUyMCVEOCVBNyVEOSU4NCVEOCVCNCVEOCVCMSVEOSU4QSVEOCVCNyUyMCVEOCVBNyVEOSU4NCVEOCVBQyVEOCVBNyVEOSU4NiVEOCVBOCVEOSU4QSIsCiAgICAgICAgdmlld21vcmU6ICIlRDglQjklRDglQjElRDglQjYlMjAlRDglQTclRDklODQlRDklODUlRDglQjIlRDklOEElRDglQUYiLAogICAgICAgIGNvdW50RG93bjogIiVEOCVBNyVEOSU4NCVEOCVCOSVEOCVBRiUyMCVEOCVBNyVEOSU4NCVEOCVBQSVEOSU4NiVEOCVBNyVEOCVCMiVEOSU4NCVEOSU4QSIsCiAgICAgICAgY3VzdG9tTGFuZzogIiVEOCVBNyVEOSU4NCVEOSU4NCVEOCVCQSVEOCVBOSUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVBRSVEOCVCNSVEOCVCNSVEOCVBOSIsCiAgICAgICAgZGVmYXVsdExhbmc6ICIlRDglQTclRDklODQlRDklODMlRDglQjQlRDklODElMjAlRDglQTclRDklODQlRDglQUElRDklODQlRDklODIlRDglQTclRDglQTYlRDklOEEiLAogICAgICAgIGhpZGVJY29uOiAiJUQ4JUE1JUQ4JUFFJUQ5JTgxJUQ4JUE3JUQ4JUExJTIwJUQ4JUE3JUQ5JTg0JUQ4JUEzJUQ5JThBJUQ5JTgyJUQ5JTg4JUQ5JTg2JUQ4JUE5IiwKICAgICAgICBpbml0U2hvdzogIiVEOCVCOSVEOSU4MyVEOCVCMyUyMCVEOCVBNyVEOSU4NCVEOCVBNyVEOCVBRSVEOCVBQSVEOCVCNSVEOCVBNyVEOCVCMSUyMCVEOSU4NCVEOCVCOSVEOCVCMSVEOCVCNiUyMCVEOCVBNyVEOSU4NCVEOSU4NSVEOCVCOSVEOCVBNyVEOSU4QSVEOSU4NiVEOCVBOSUyMCVEOCVBNyVEOSU4MSVEOCVBQSVEOCVCMSVEOCVBNyVEOCVCNiVEOSU4QSVEOSU4QiVEOCVBNyIsCiAgICAgICAgc3RheU91dDogIiVEOCVBRiVEOCVCOSUyMCVEOCVCNCVEOCVCMSVEOSU4QSVEOCVCNyUyMCVEOCVBNyVEOSU4NCVEOCVBMyVEOCVBRiVEOSU4OCVEOCVBNyVEOCVBQSUyMCVEOCVBNyVEOSU4NCVEOCVCOSVEOCVBNyVEOCVBNiVEOSU4NSUyMCVEOSU4QSVEOCVBOCVEOSU4MiVEOSU4OSUyMCVEOCVBRSVEOCVBNyVEOCVCMSVEOCVBQyUyMCVEOCVBNyVEOSU4NCVEOCVCNSVEOSU4OCVEOCVCMSVEOCVBOSIsCiAgICAgICAgZ2FsbGVyeURvd25sb2FkR2FwOiAiJUQ4JUE3JUQ5JTg0JUQ5JTgxJUQ4JUE3JUQ4JUI1JUQ5JTg0JTIwJUQ4JUE3JUQ5JTg0JUQ4JUIyJUQ5JTg1JUQ5JTg2JUQ5JThBJTIwJUQ5JTg0JUQ5JTg0JUQ4JUFBJUQ5JTg2JUQ4JUIyJUQ5JThBJUQ5JTg0IiwKICAgICAgICBmb3JtYXRDb252ZXJzaW9uOiAiJUQ4JUFBJUQ4JUFEJUQ5JTg4JUQ5JThBJUQ5JTg0JTIwJUQ4JUFBJUQ5JTg2JUQ4JUIzJUQ5JThBJUQ5JTgyJTIwJUQ4JUE3JUQ5JTg0JUQ4JUI1JUQ5JTg4JUQ4JUIxJUQ4JUE5JTIwJUQ4JUI5JUQ5JTg2JUQ4JUFGJTIwJUQ4JUE3JUQ5JTg0JUQ4JUFBJUQ5JTg2JUQ4JUIyJUQ5JThBJUQ5JTg0LiUyMCVEOSU4MiVEOCVBNyVEOCVCOSVEOCVBRiVEOCVBOSUyMCVEOSU4OCVEOCVBNyVEOCVBRCVEOCVBRiVEOCVBOSUyMCVEOSU4MSVEOSU4QSUyMCVEOSU4MyVEOSU4NCUyMCVEOCVCMyVEOCVCNyVEOCVCMSIsCiAgICAgICAgZ2FsbGVyeURpc2FibGVBcnJvdzogIiVEOCVBQSVEOCVCOSVEOCVCNyVEOSU4QSVEOSU4NCUyMCVEOSU4NSVEOSU4MSVEOCVBQSVEOCVBNyVEOCVBRCUyMCVEOCVBNyVEOSU4NCVEOCVCMyVEOSU4NyVEOSU4NSIsCiAgICAgICAgcG9zaXRpb25GaXhlZDogIiVEOSU4NSVEOSU4OCVEOCVCNiVEOCVCOSUyMCVEOCVBQiVEOCVBNyVEOCVBOCVEOCVBQSIsCiAgICAgICAgc3dpdGNoU3RvcmVMb2M6ICIlRDglQTclRDklODQlRDglQTclRDglQUQlRDglQUElRDklODElRDglQTclRDglQjglMjAlRDglQTglRDklODUlRDklODglRDklODIlRDglQjklMjAlRDglQTclRDklODQlRDglQjAlRDglQTclRDklODMlRDglQjElRDglQTklMjAlRDglQTMlRDglQUIlRDklODYlRDglQTclRDglQTElMjAlRDglQTclRDklODQlRDglQUElRDglQTglRDglQUYlRDklOEElRDklODQiCiAgICB9Cn0sCnsKICAgIG5hbWU6ICLnroDkvZPkuK3mlociLAogICAgbWF0Y2g6IFsiemgtQ04iLCAiemgtU0ciXSwKICAgIGxhbmc6IHsKICAgICAgICBzYXZlQnRuOiAi56Gu5a6aIiwKICAgICAgICBzYXZlTmFtZTogIuS/neWtmOWbvueJh+WQjSIsCiAgICAgICAgc2F2ZU5hbWVUaXA6ICLkvb/nlKjpooTorr7mqKHlvI/kv53lrZjlm77niYciLAogICAgICAgIHNhdmVOYW1lQWRkVGl0bGU6ICLkv53lrZjml7bmt7vliqDpobXpnaLmoIfpopgiLAogICAgICAgIHNpemU6ICLlsLrlr7giLAogICAgICAgIGFsbDogIuaJgOaciSIsCiAgICAgICAgYmlnU2l6ZTogIuWkp+WwuuWvuCIsCiAgICAgICAgaWNvblNpemU6ICLlm77moIciLAogICAgICAgIGFyaWEySG9zdDogImFyaWEyIOacjeWKoeWZqOWcsOWdgCIsCiAgICAgICAgYXJpYTJUb2tlbjogImFyaWEyIOWvhumSpSIsCiAgICAgICAgcG9zdDJBcmlhMjogIuWPkemAgeiHsyBhcmlhMiIsCiAgICAgICAgZGVmYXVsdDogIum7mOiupCIsCiAgICAgICAgdGV4dEZpcnN0OiAi5LyY5YWI5L2/55So5Zu+54mH5o+P6L+wIiwKICAgICAgICBvbmx5VXJsOiAi5LuF5L2/55SoIFVSTCDkuK3nmoTmlofku7blkI0iLAogICAgICAgIHVybEFuZFRleHQ6ICJVUkwgKyDmlofku7bmj4/ov7AiLAogICAgICAgIGRvd25sb2FkOiAi5LiL6L29IiwKICAgICAgICBzYXZlQnRuVGlwczogIumDqOWIhumAiemhuemcgOimgeWIt+aWsOmhtemdouaJjeiDveeUn+aViCIsCiAgICAgICAgYWRkaXRpb25hbEZlYXR1cmU6ICLpop3lpJblip/og73vvIzmjInkvY8gYWx0IOaXtueUn+aViCIsCiAgICAgICAgaW52ZXJ0QWRkaXRpb25hbEZlYXR1cmU6ICLlj43ovazlv6vmjbfplK7vvIzpu5jorqTkvb/nlKjpop3lpJblip/og70iLAogICAgICAgIGNvcHk6ICLlpI3liLbpk77mjqUiLAogICAgICAgIGNvcHlJbWc6ICLlpI3liLblm77niYciLAogICAgICAgIG9wZW5Jbk5ld1RhYjogIuWcqOaWsOagh+etvumhteaJk+W8gCIsCiAgICAgICAgY2xvc2VCdG46ICLlj5bmtogiLAogICAgICAgIGludmVydEJ0bjogIuWPjemAiSIsCiAgICAgICAgY29tcGFyZUJ0bjogIuWvueavlCIsCiAgICAgICAgc2VsZWN0QWxsQnRuOiAi5YWo6YCJIiwKICAgICAgICBjbG9zZUJ0blRpcHM6ICLlj5bmtojmnKzmrKHorr7nva7vvIzmiYDmnInpgInpobnov5jljp8iLAogICAgICAgIHJlc2V0TGluazogIuaBouWkjem7mOiupOiuvue9riIsCiAgICAgICAgcmVzZXRMaW5rVGlwczogIuaBouWkjeaJgOacieiuvue9rueahOWGheWuueS4uum7mOiupOWAvCIsCiAgICAgICAgc2hhcmU6ICLliIbkuqsiLAogICAgICAgIHN1aXRMb25nSW1nOiAi6ZW/5Zu+5Zyo5rua5Yqo56qX5Y+j5pi+56S6IiwKICAgICAgICBnbG9iYWxrZXlzOiAi6aKE6KeI5Yqf6IO96ZSu57uE5ZCIOiAiLAogICAgICAgIGdsb2JhbGtleXNQcmVzczogIuaVsuWHu+WIh+aNoumihOiniCIsCiAgICAgICAgZ2xvYmFsa2V5c0hvbGQ6ICLmjInkvY/lvIDlkK/pooTop4giLAogICAgICAgIGdsb2JhbGtleXNUeXBlOiAi6aKE6KeI6Kem5Y+R5pa55byP77yaIiwKICAgICAgICBjbG9zZUFmdGVyUHJldmlldzogIumihOiniOe7k+adn+WFs+mXreWbvueJh+eql+WPoyIsCiAgICAgICAgcHJldmlld01heFNpemU6ICLpooTop4jnqpflj6PmnIDlpKflsLrlr7giLAogICAgICAgIHByZXZpZXdNYXhTaXplVGlwOiAi5b2T6aKE6KeI56qX5Y+j5aSn5LqO6K6+5a6a5bC65a+45pe277yM57yp5pS+6aKE6KeI56qX5Y+j44CCMCDkuLrnpoHnlKgiLAogICAgICAgIGxvYWRBbGw6ICLliqDovb3mm7TlpJrpobUiLAogICAgICAgIGxvYWRlZEFsbDogIuWKoOi9veWujOavlSIsCiAgICAgICAgbG9hZGluZzogIuato+WcqOWKoOi9vSIsCiAgICAgICAgbG9hZEFsbFRpcDogIuWKoOi9veS4i+S4gOmhteeahOWbvueJhyIsCiAgICAgICAgdmlld21vcmVFbmRsZXNzOiAi5p+l55yL5pu05aSa6YeM5rua5Yqo5Yiw5bqV6Ieq5Yqo5Yqg6L295LiL5LiA6aG1IiwKICAgICAgICBmaWRkbGU6ICLlvLnlh7rlm77niYciLAogICAgICAgIGZpZGRsZVRpcDogIuW8ueWHuuWbvueJh+i/m+ihjOWkjeadguaTjeS9nCIsCiAgICAgICAgYWRkSW1hZ2VVcmxzOiAi5re75Yqg5Zu+54mHIiwKICAgICAgICBhZGRJbWFnZVVybHNUaXBzOiAi6YCa6L+HIHVybCDmt7vliqDmm7TlpJrlm77niYciLAogICAgICAgIG9wZW5JbWFnZXM6ICLmnKzlnLDlm77niYciLAogICAgICAgIG9wZW5JbWFnZXNUaXBzOiAi54K55Ye75a+85YWl5pys5Zyw5Zu+54mHIiwKICAgICAgICBjbG9zZUZpcnN0OiAi6K+35YWI5YWz5o6J5b2T5YmN5bey57uP5omT5byA55qE5bqTIiwKICAgICAgICBjb2xsZWN0OiAi5pS26JePIiwKICAgICAgICBjb2xsZWN0ZWQ6ICLlt7LmlLbol48iLAogICAgICAgIGV4aXRDb2xsZWN0aW9uOiAi6YCA5Ye65pS26JePIiwKICAgICAgICBleGl0Q29sbGVjdGlvblRpcDogIueCueWHu+mAgOWHuuaUtuiXj+aooeW8jyIsCiAgICAgICAgbm9Db2xsZWN0aW9uWWV0OiAi5L2g6L+Y5pyo5pyJ5pS26JeP5Lu75L2V5Zu+54mHIiwKICAgICAgICBjb2xsZWN0RGV0YWlsOiAi5o+P6L+wIiwKICAgICAgICBjb2xsZWN0RGV0YWlsVGlwOiAi57uZ5pS26JeP55qE5Zu+54mH5re75Yqg5LiA5Lqb5o+P6L+w5ZCnIiwKICAgICAgICBwbGF5U2xpZGU6ICLmkq3mlL7lubvnga/niYciLAogICAgICAgIHNsaWRlR2FwOiAi6Ze06ZqUKHMpIiwKICAgICAgICBzbGlkZUdhcFRpcDogIumXtOmalOaXtumXtO+8jOWNleS9jSjnp5IpIiwKICAgICAgICBzbGlkZUJhY2s6ICLlkI7pgIAiLAogICAgICAgIHNsaWRlQmFja1RpcDogIuS7juWQjuW+gOWJjeaSreaUviIsCiAgICAgICAgc2xpZGVSYW5kb206ICLpmo/mnLrmkq3mlL4iLAogICAgICAgIHNsaWRlV2FpdDogIuetieW+heWbvueJh+ivu+WPliIsCiAgICAgICAgc2xpZGVXYWl0VGlwOiAi5LuO5q+P5byg5Zu+54mH5a6M5YWo6K+75Y+W5a6M5oiQ5ZCO5omN5byA5aeL5YCS6K6h5pe2IiwKICAgICAgICBzbGlkZVNraXBFcnJvcjogIui3s+i/h+mUmeivr+WbvueJhyIsCiAgICAgICAgc2xpZGVTa2lwRXJyb3JUaXA6ICLlv6vpgJ/ot7Pov4for7vlj5bplJnor6/nmoTlm77niYciLAogICAgICAgIHR5cGU6ICLnsbvliKsiLAogICAgICAgIHR5cGVUaXA6ICLpgInmi6nlm77niYfnsbvliKsiLAogICAgICAgIHNob3dXaXRoUnVsZXM6ICLljLnphY3liLDop4TliJnlsLHmmL7npLoiLAogICAgICAgIHNob3dXaXRoUnVsZXNUaXA6ICLlj6ropoHljLnphY3liLDop4TliJnvvIzkuI3orrrlsLrlr7jkuLrkvZXpg73kvJrmmL7npLrlm77moIciLAogICAgICAgIGFkdmFuY2VkUnVsZXM6ICLpq5jnuqfop4TliJkiLAogICAgICAgIGFkdmFuY2VkUnVsZXNUaXA6ICLnlLHpq5jnuqfop4TliJnljLnphY3lh7rmnaXnmoQiLAogICAgICAgIHRwUnVsZXM6ICLpgJrphY3op4TliJkiLAogICAgICAgIHRwUnVsZXNUaXA6ICLnlLHpgJrphY3op4TliJnljLnphY3lh7rmnaXnmoQiLAogICAgICAgIHNjYWxlUnVsZXM6ICLnvKnmlL7ov4fnmoQiLAogICAgICAgIHNjYWxlUnVsZXNUaXA6ICJqc+iHquWKqOafpeaJvu+8jOebuOWvuemhtemdouaYvuekuueahOWbvueJh+aciee8qeaUvui/h+eahCIsCiAgICAgICAgbm9TY2FsZVJ1bGVzOiAi5peg57yp5pS+6L+HIiwKICAgICAgICBub1NjYWxlUnVsZXNUaXA6ICJqc+iHquWKqOafpeaJvu+8jOaXoOe8qeaUvui/h+eahO+8jOS9huaYr+a7oei2s+S4gOWumueahOWkp+WwjyIsCiAgICAgICAgc21hbGxSdWxlczogIuWwj+WwuuWvuOeahCIsCiAgICAgICAgc21hbGxSdWxlc1RpcDogIuWwj+WwuuWvuOWbvueJh++8jOWunumZheWwuuWvuOeahOmrmOWSjOWuvemDveWwj+S6jiN0I+WDj+e0oCIsCiAgICAgICAgbG9ja1NpemVUaXA6ICLplIHlrprmnIDlpKflsLrlr7giLAogICAgICAgIGNvbW1hbmQ6ICLlkb3ku6QiLAogICAgICAgIGNvbW1hbmRUaXA6ICLlkb3ku6Toj5zljZUiLAogICAgICAgIG9ubGluZUVkaXQ6ICLlnKjnur/nvJbovpEiLAogICAgICAgIG9ubGluZUVkaXRUaXA6ICLkvb/nlKgjdCPlnKjnur/nvJbovpHor6Xlm77niYciLAogICAgICAgIG9wZW5Jbk5ld1dpbmRvdzogIuaWsOeql+WPo+aJk+W8gCIsCiAgICAgICAgb3BlbkluTmV3V2luZG93VGlwOiAi5paw56qX5Y+j5omT5byA5Zu+54mHIiwKICAgICAgICBmaW5kSW5QYWdlOiAi5a6a5L2N5Yiw5Zu+54mHIiwKICAgICAgICBmaW5kSW5QYWdlVGlwOiAi5rua5Yqo5Yiw5b2T5YmN5Zu+54mH5omA5Zyo55qE5L2N572uIiwKICAgICAgICB2aWV3Q29sbGVjdGlvbjogIuafpeeci+aUtuiXjyIsCiAgICAgICAgdmlld0NvbGxlY3Rpb25UaXA6ICLmn6XnnIvmiYDmnInmlLbol4/nmoTlm77niYciLAogICAgICAgIGluQ29sbGVjdGlvbjogIuaUtuiXj+aooeW8j+S4re+8jOaXoOazleS9v+eUqCIsCiAgICAgICAgY2FudEZpbmQ6ICLlm77niYfkuI3lnKjmlofmoaPkuK3vvIzmiJbogIXooqvpmpDol4/kuobvvIzml6Dms5XlrprkvY3vvIEiLAogICAgICAgIGV4cG9ydEltYWdlczogIuWvvOWHuuaYvuekuuWkp+WbviIsCiAgICAgICAgZXhwb3J0SW1hZ2VzVGlwOiAi5a+85Ye65omA5pyJ5pi+56S65Lit55qE5Zu+54mH5Yiw5paw56qX5Y+jIiwKICAgICAgICBkb3dubG9hZEltYWdlOiAi5LiL6L295b2T5YmN5omA5pyJIiwKICAgICAgICBkb3dubG9hZEltYWdlVGlwOiAi5LiL6L295b2T5YmN5bqT5Lit5omA5pyJ5pi+56S65Zu+54mHIiwKICAgICAgICBjb3B5SW1hZ2VzVXJsOiAi5aSN5Yi25pi+56S65aSn5Zu+IiwKICAgICAgICBjb3B5SW1hZ2VzVXJsVGlwOiAi5aSN5Yi25omA5pyJ5pi+56S65Lit55qE5aSn5Zu+5Zyw5Z2AIiwKICAgICAgICBjb3B5U3VjY2VzczogIuW3suaIkOWKn+WkjeWItiAjdCMg5byg5aSn5Zu+5Zyw5Z2AIiwKICAgICAgICBhdXRvUmVmcmVzaDogIuiHquWKqOmHjei9vSIsCiAgICAgICAgYXV0b1JlZnJlc2hUaXA6ICLmnIDlkI7lh6DlvKDlm77niYfml7bvvIzmu5rliqjkuLvnqpflj6PliLDmnIDlupXpg6jvvIznhLblkI7oh6rliqjliqDovb3mlrDnmoTlm77niYciLAogICAgICAgIGVudGVyRnVsbHNjOiAi6L+b5YWl5YWo5bGPIiwKICAgICAgICBleGl0RnVsbHNjOiAi6YCA5Ye65YWo5bGPIiwKICAgICAgICBjb25maWc6ICLorr7nva4iLAogICAgICAgIG9wZW5Db25maWc6ICLmiZPlvIDorr7nva4iLAogICAgICAgIHJ1bGVSZXF1ZXN0OiAi6YCC6YWN6K+35rGCIiwKICAgICAgICBjbG9zZUdhbGxlcnk6ICLlhbPpl63lupMiLAogICAgICAgIHJldHVyblRvR2FsbGVyeTogIuWbnuWIsOW6kyIsCiAgICAgICAgcGljSW5mbzogIueCueWHu+S/ruaUuSIsCiAgICAgICAgcGljTm90ZTogIuWbvueJh+azqOmHiiIsCiAgICAgICAgdXJsRmlsdGVyOiAi6L+H5ruk6ZO+5o6lIiwKICAgICAgICB1cmxGaWx0ZXJUaXA6ICLovpPlhaXlhbPplK7lrZfmiJbmraPliJnooajovr7lvI/ov4fmu6Tpk77mjqUiLAogICAgICAgIHJlc29sdXRpb246ICLliIbovqjnjociLAogICAgICAgIHNjYWxlUmF0aW86ICLnvKnmlL7mr5QiLAogICAgICAgIHNpbWlsYXJJbWFnZTogIuS7peWbvuaQnOWbviIsCiAgICAgICAgc2NhbGU6ICLnvKnmlL4iLAogICAgICAgIGhvcml6b250YWxGbGlwOiAi5rC05bmz57+76L2sIiwKICAgICAgICB2ZXJ0aWNhbEZsaXA6ICLlnoLnm7Tnv7vovawiLAogICAgICAgIGFjdHVhbEJ0bjogIuafpeeci+WOn+WniyhBKSIsCiAgICAgICAgc2VhcmNoQnRuOiAi5p+l5om+5Y6f5Zu+KFMpIiwKICAgICAgICBnYWxsZXJ5QnRuOiAi5p+l55yL5bqTKEcpIiwKICAgICAgICBjdXJyZW50QnRuOiAi5p+l55yL5b2T5YmNKEMpIiwKICAgICAgICBtYWduaWZpZXJCdG46ICLmlL7lpKfplZwoTSkiLAogICAgICAgIHBpY1RpdGxlOiAi5Zu+54mH5qCH6aKYIiwKICAgICAgICBwaWNOdW06ICLlm77niYfmlbDph48iLAogICAgICAgIHBpY1RpcHM6ICLmjInkvY9DdHJs5pS+5aSnIiwKICAgICAgICBzYXZlUGFnZVRpcHM6ICLkvb/nlKjigJznvZHpobXlj6blrZjkuLrigJ3ljbPlj6/kv53lrZjmiYDmnInlm77niYciLAogICAgICAgIGV4cG9ydEltYWdlc1VybDogIuWvvOWHuuWbvueJh+mTvuaOpSIsCiAgICAgICAgZXhwb3J0SW1hZ2VzVXJsUG9wOiAiQ3RybCtD5aSN5Yi25Zu+54mH6ZO+5o6lIiwKICAgICAgICBiZWdpblNlYXJjaEltZzogIiN0I+ivhuWbvuW8gOWni+KApuKApiIsCiAgICAgICAgZmluZE5vUGljOiAi5pyq5om+5Yiw5Y6f5Zu+IiwKICAgICAgICBmaW5kT3ZlckJlZ2luTG9hZDogIiN0I+ivhuWbvue7k+adn++8jOWFseaJvuWIsCN0I+W8oOWMuemFjeWbvueJh++8jOW8gOWni+WKoOi9veesrOS4gOW8oCIsCiAgICAgICAgbG9hZE5leHRTaW1pbGFyOiAi5Y6f5Zu+5Yqg6L295aSx6LSl77yM5bCd6K+V5Yqg6L295LiL5LiA57uT5p6c4oCm4oCmIiwKICAgICAgICBsb2FkRXJyb3I6ICLliqDovb3lpLHotKUiLAogICAgICAgIG9wZW5Ib21lUGFnZTogIueCueWHu+atpOWkhOaJk+W8gOS4u+mhtSIsCiAgICAgICAgcG9zaXRpb246ICLmmL7npLrkvY3nva4iLAogICAgICAgIHBvc2l0aW9uVGlwczogIuaMieS9j0FMVOmakOiXjyIsCiAgICAgICAgdG9wTGVmdDogIuWbvueJh+W3puS4iuinkiIsCiAgICAgICAgdG9wUmlnaHQ6ICLlm77niYflj7PkuIrop5IiLAogICAgICAgIGJvdHRvbVJpZ2h0OiAi5Zu+54mH5Y+z5LiL6KeSIiwKICAgICAgICBib3R0b21MZWZ0OiAi5Zu+54mH5bem5LiL6KeSIiwKICAgICAgICB0b3BDZW50ZXI6ICLlm77niYfmraPkuIrmlrkiLAogICAgICAgIGJvdHRvbUNlbnRlcjogIuWbvueJh+ato+S4i+aWuSIsCiAgICAgICAgZmxvYXRCYXI6ICLmta7liqjlt6XlhbfmoI8iLAogICAgICAgIHByZXZpZXdGb2xsb3dNb3VzZTogIuS9v+W+l+mihOiniOWbvui3n+maj+m8oOagh+aMh+mSiCIsCiAgICAgICAgc2hvd0RlbGF5OiAi5pi+56S65bu25pe2IiwKICAgICAgICBtczogIuavq+enkiIsCiAgICAgICAgaGlkZTogIumakOiXjyIsCiAgICAgICAgaGlkZURlbGF5OiAi6ZqQ6JeP5bu25pe2IiwKICAgICAgICBmb3JjZVNob3c6ICLpnZ7nvKnmlL7lm77niYfvvIzotoXov4for6XlsLrlr7jvvIzmmL7npLrmta7moYYiLAogICAgICAgIGZvcmNlU2hvd1RpcDogIumdnue8qeaUvueahOWbvueJh+Wkp+Wwj+i2hei/h+S4i+mdouiuvuWumueahOWwuuWvuOaXtuaYvuekuua1ruWKqOW3peWFt+agjyIsCiAgICAgICAgc2l6ZUxpbWl0T3I6ICLku6XkuIrplb/lrr3mnaHku7blj6rpnIDmu6HotrPlhbbkuIAiLAogICAgICAgIHB4OiAi5YOP57SgIiwKICAgICAgICBtaW5TaXplTGltaXQ6ICLnvKnmlL7lm77niYfvvIzotoXov4for6XlsLrlr7jvvIzmmL7npLrmta7moYYiLAogICAgICAgIG1pblNpemVMaW1pdFRpcDogIuWbvueJh+iiq+e8qeaUvijlm77niYfljp/lp4vlpKflsI/kuI7lrp7pmYXlpKflsI/kuI3kuIDoh7Qp5ZCOLOaYvuekuumVv+WuveWkp+S6juiuvuWumuWAvOaXtuaYvuekuua1ruWKqOW3peWFt+agjyIsCiAgICAgICAgZGVmYXVsdFNpemVMaW1pdDogIuWbvuW6k+m7mOiupOetm+mAieWwuuWvuCIsCiAgICAgICAgbGlzdGVuQmc6ICLnm5HlkKzog4zmma/lm74iLAogICAgICAgIGJhY2tncm91bmRDb2xvcjogIuiDjOaZr+minOiJsiIsCiAgICAgICAgbGlzdGVuQmdUaXA6ICLlnKjmnInog4zmma/lm77nmoTlhYPntKDkuIrmmL7npLrmgqzmta7moYYiLAogICAgICAgIGJ1dG9uT3JkZXI6ICLlt6XlhbfmoI/lm77moIfmjpLluo8iLAogICAgICAgIGtleXNFbmFibGU6ICLlkK/nlKjku6XkuIvlv6vmjbfplK4iLAogICAgICAgIGtleXNBY3R1YWw6ICLmiZPlvIDlpKflm74iLAogICAgICAgIGtleXNBY3R1YWxUaXA6ICLlvZPlh7rnjrDmgqzmta7mnaHml7bmjInkuIvmraTmjInplK7miZPlvIDlpKflm74iLAogICAgICAgIGtleXNTZWFyY2g6ICLmn6Xmib7ljp/lm74iLAogICAgICAgIGtleXNTZWFyY2hUaXA6ICLlvZPlh7rnjrDmgqzmta7mnaHml7bmjInkuIvmraTmjInplK7mn6Xmib7ljp/lm74iLAogICAgICAgIGhlYWRTZWFyY2hUaXA6ICLmkJzlm74iLAogICAgICAgIGhlYWRTZWFyY2hBbGw6ICLmkJzntKLku6XkuIrlhajpg6giLAogICAgICAgIGtleXNDdXJyZW50OiAi5omT5byA5b2T5YmN5Zu+54mHIiwKICAgICAgICBrZXlzQ3VycmVudFRpcDogIuW9k+WHuueOsOaCrOa1ruadoeaXtuaMieS4i+atpOaMiemUruaJk+W8gOW9k+WJjeaYvuekuueahOWbvueJhyIsCiAgICAgICAga2V5c01hZ25pZmllcjogIuaJk+W8gOaUvuWkp+mVnOinguWvnyIsCiAgICAgICAga2V5c01hZ25pZmllclRpcDogIuW9k+WHuueOsOaCrOa1ruadoeaXtuaMieS4i+atpOaMiemUruaJk+W8gOaUvuWkp+mVnOinguWvnyIsCiAgICAgICAga2V5c0dhbGxlcnk6ICLmiZPlvIDlm77lupPvvIjliqDlip/og73plK7kuLrlhajlsYDvvIkiLAogICAgICAgIGtleXNHYWxsZXJ5VGlwOiAi5b2T5Ye6546w5oKs5rWu5p2h5pe25oyJ5LiL5q2k5oyJ6ZSu5omT5byA5Zu+5bqTIiwKICAgICAgICBvcGVuR2FsbGVyeTogIuaJk+W8gOWbvuW6kyIsCiAgICAgICAgbWFnbmlmaWVyOiAi5pS+5aSn6ZWcIiwKICAgICAgICBtYWduaWZpZXJSYWRpdXM6ICLpu5jorqTljYrlvoQiLAogICAgICAgIG1hZ25pZmllcldoZWVsWm9vbUVuYWJsZWQ6ICLlkK/nlKjmu5rova7nvKnmlL4iLAogICAgICAgIG1hZ25pZmllcldoZWVsWm9vbVJhbmdlOiAi5rua6L2u57yp5pS+55qE5YCN546HIiwKICAgICAgICBtYWduaWZpZXJTY2FsZUltYWdlOiAi55So5rua6L2u57yp5pS+5Zu+54mHIiwKICAgICAgICBnYWxsZXJ5OiAi5Zu+5bqTIiwKICAgICAgICBnYWxsZXJ5Rml0VG9TY3JlZW46ICLlr7nlm77niYfov5vooYznvKnmlL7ku6XpgILlupTlsY/luZUiLAogICAgICAgIGdhbGxlcnlGaXRUb1NjcmVlblNtYWxsOiAi5bCP5Zu+5Lmf57yp5pS+5Lul6YCC5bqU5bGP5bmVIiwKICAgICAgICBnYWxsZXJ5Rml0VG9TY3JlZW5UaXA6ICLpgILlupTmlrnlvI/kuLpjb250YWlu77yM6Z2eY292ZXIiLAogICAgICAgIGdhbGxlcnlTY3JvbGxFbmRUb0NoYW5nZTogIuWkp+Wbvua7muWKqOWIsOW6leWQjuWIh+aNouWbvueJhyIsCiAgICAgICAgZ2FsbGVyeVNjcm9sbEVuZFRvQ2hhbmdlVGlwOiAi5Y+W5raI5LiK5LiA6YCJ6aG55ZCO5omN5pyJ5pWIIiwKICAgICAgICBnYWxsZXJ5RXhwb3J0VHlwZTogIuWbvueJh+WvvOWHuum7mOiupOaOkuW6jyIsCiAgICAgICAgZ3JpZDogIuW5s+mTuuaOkuW6jyIsCiAgICAgICAgZ3JpZEJpZzogIuWOn+WbvuW5s+mTuiIsCiAgICAgICAgbGlzdDogIuWIl+ihqOaOkuW6jyIsCiAgICAgICAgZ2FsbGVyeUF1dG9Mb2FkOiAi6Ieq5Yqo5Yqg6L295pu05aSa5Zu+54mHIiwKICAgICAgICBnYWxsZXJ5TG9hZEFsbDogIuWKoOi9veabtOWkmuWbvueJh+aXtuiHquWKqOWkhOeQhuWFqOmDqOmhtSIsCiAgICAgICAgZ2FsbGVyeUxvYWRBbGxUaXA6ICLoi6XpobXmlbDov4flpJrlj6/og73lvbHlk43kvZPpqowiLAogICAgICAgIGdhbGxlcnlEb3dubG9hZFdpdGhaaXA6ICLkuIvovb3miYDmnInml7bmiZPljIXmiJB6aXAiLAogICAgICAgIGdhbGxlcnlEb3dubG9hZFdpdGhaaXBBbGVydDogIuS4i+i9veWHhuWkh+S4re+8jOivt+iAkOW/g+etieWAmeaVsOWNgeenkiIsCiAgICAgICAgZ2FsbGVyeVNjYWxlU21hbGxTaXplMTogIuWunumZheWwuuWvuOeahOmrmOWSjOWuvemDveWwj+S6jiAiLAogICAgICAgIGdhbGxlcnlTY2FsZVNtYWxsU2l6ZTI6ICIg5YOP57Sg5YiZ5b2S5YWl5bCP5bC65a+45Zu+54mHIiwKICAgICAgICBnYWxsZXJ5U2hvd1NtYWxsU2l6ZTogIum7mOiupOaYvuekuuWwj+WwuuWvuOWbvueJhyIsCiAgICAgICAgZ2FsbGVyeVRyYW5zaXRpb246ICLmmL7npLrlm77lupPliIfmjaLlm77niYfnmoTnibnmlYgiLAogICAgICAgIGdhbGxlcnlTaWRlYmFyUG9zaXRpb246ICLnvKnnlaXlm77moI/kvY3nva4iLAogICAgICAgIGJvdHRvbTogIuW6lemDqCIsCiAgICAgICAgcmlnaHQ6ICLlj7PkvqciLAogICAgICAgIGxlZnQ6ICLlt6bkvqciLAogICAgICAgIHRvcDogIumhtumDqCIsCiAgICAgICAgZ2FsbGVyeVNpZGViYXJTaXplOiAi6auY5bqmIiwKICAgICAgICBnYWxsZXJ5U2lkZWJhclNpemVUaXA6ICLnvKnnlaXlm77moI/nmoTpq5jvvIjlpoLmnpzmmK/msLTlubPmlL7nva7vvInmiJbogIXlrr3vvIjlpoLmnpzmmK/lnoLnm7TmlL7nva7vvIkiLAogICAgICAgIGdhbGxlcnlNYXgxOiAi5pyA5aSa6aKE6K+7ICIsCiAgICAgICAgZ2FsbGVyeU1heDI6ICIg5byg5Zu+54mH77yI5YmN5ZCO5ZCE5aSa5bCR5byg77yJIiwKICAgICAgICBnYWxsZXJ5QXV0b1pvb206ICLnvKnmlL7mlLnlm54gMTAwJe+8iGNocm9tZe+8iSIsCiAgICAgICAgZ2FsbGVyeUF1dG9ab29tVGlwOiAi5aaC5p6c5pyJ5pS+5aSn77yM5YiZ5oqK5Zu+54mH5Y+KIHNpZGViYXIg6YOo5YiG55qE57yp5pS+5pS55ZueIDEwMCXvvIzlop7lpKflj6/op4bpnaLnp6/vvIjku4XlnKggY2hyb21lIOS4i+acieaViO+8iSIsCiAgICAgICAgZ2FsbGVyeURlc2NyaXB0aW9uTGVuZ3RoMTogIuazqOmHiueahOacgOWkp+WuveW6piIsCiAgICAgICAgZ2FsbGVyeURlc2NyaXB0aW9uTGVuZ3RoMjogIiDkuKrlrZfnrKYiLAogICAgICAgIGdhbGxlcnlBdXRvT3BlblNpdGVzOiAi6Ieq5Yqo5omT5byA5Zu+5bqT55qE572R5Z2A5q2j5YiZ77yM5LiA6KGM5LiA5p2h77yM6Iul5byA5aS05YqgQOWImeiHquWKqOWxleW8gOWbvuW6kyIsCiAgICAgICAgZGlzYWJsZUtleVNpdGVzOiAi56aB55So5b+r5o236ZSu55qE572R5Z2A5q2j5YiZ77yM5LiA6KGM5LiA5p2hIiwKICAgICAgICBhdXRvT3BlblZpZXdtb3JlOiAi5omT5byA5Zu+5bqT5pe26Ieq5Yqo5bGV5byAIiwKICAgICAgICBnYWxsZXJ5U2VhcmNoRGF0YTogIuaQnOWbvuermeeCueiuvue9ru+8jOa4heepuui/mOWOnyIsCiAgICAgICAgZ2FsbGVyeUVkaXRTaXRlOiAi5Zyo57q/57yW6L6R56uZ54K5IiwKICAgICAgICBpbWdXaW5kb3c6ICLlm77niYfnqpflj6MiLAogICAgICAgIGltZ1dpbmRvd0ZpdFRvU2NyZWVuOiAi6YCC5bqU5bGP5bmV77yM5bm25LiU5rC05bmz5Z6C55u05bGF5LitIiwKICAgICAgICBpbWdXaW5kb3dGaXRUb1NjcmVlblRpcDogIumAguW6lOaWueW8j+S4umNvbnRhaW7vvIzpnZ5jb3ZlciIsCiAgICAgICAgaW1nV2luZG93Rml0VG9TY3JlZW5XaGVuU21hbGw6ICLljbPkvb/mmK/lsI/lm77niYfkuZ/mi4nkvLjoh7PpgILlupTlsY/luZUiLAogICAgICAgIGltZ1dpbmRvd0RlZmF1bHRUb29sOiAi5omT5byA56qX5Y+j5pe26buY6K6k6YCJ5oup55qE5bel5YW3IiwKICAgICAgICBoYW5kOiAi5oqT5omLIiwKICAgICAgICByb3RhdGU6ICLml4vovawiLAogICAgICAgIHpvb206ICLmlL7lpKfplZwiLAogICAgICAgIGltZ1dpbmRvd0VzY0tleTogIkVzY+mUruWFs+mXrSIsCiAgICAgICAgaW1nV2luZG93RGJsQ2xpY2tJbWdXaW5kb3c6ICLlj4zlh7vlm77niYfnqpflj6PlhbPpl60iLAogICAgICAgIGltZ1dpbmRvd0NsaWNrT3V0c2lkZTogIueCueWHu+WbvueJh+WklumDqO+8iOimhuebluWxgu+8ieWFs+mXrSIsCiAgICAgICAgaW1nV2luZG93Q2xpY2tPdXRzaWRlVGlwOiAi5LuF5b2T6KaG55uW5bGC5pi+56S65pe255Sf5pWIIiwKICAgICAgICBub25lOiAi5pegIiwKICAgICAgICBjbGljazogIuWNleWHuyIsCiAgICAgICAgZGJsY2xpY2s6ICLlj4zlh7siLAogICAgICAgIGltZ1dpbmRvd092ZXJsYXllclNob3duOiAi6KaG55uW5bGCIiwKICAgICAgICBpbWdXaW5kb3dPdmVybGF5ZXJDb2xvcjogIuminOiJsuWSjOS4jemAj+aYjuW6piIsCiAgICAgICAgaW1nV2luZG93U2hpZnRSb3RhdGVTdGVwMTogIuaXi+i9rOaXtu+8jOaMieS9j3NoaWZ06ZSu77yM5peL6L2s55qE5q2l6L+bIiwKICAgICAgICBpbWdXaW5kb3dTaGlmdFJvdGF0ZVN0ZXAyOiAiIOW6piIsCiAgICAgICAgaW1nV2luZG93TW91c2VXaGVlbFpvb206ICLmu5rova7nvKnmlL4iLAogICAgICAgIGltZ1dpbmRvd1pvb21SYW5nZTogIua7mui9rue8qeaUvuavlOS+iyIsCiAgICAgICAgaW1nV2luZG93Wm9vbVJhbmdlVGlwOiAi57yp5pS+5q+U5L6LKOW/hemhu+S4uuato+aVsCkiLAogICAgICAgIG90aGVyczogIuWFtuWugyIsCiAgICAgICAgd2FpdEltZ0xvYWQ6ICLnrYnlm77niYflrozlhajovb3lhaXlkI7vvIzmiY3lvIDlp4vmiafooYzlvLnlh7rmlL7lpKfnrYnmk43kvZwiLAogICAgICAgIHdhaXRJbWdMb2FkVGlwOiAi5oyJ5L2PY3RybOmUrueahOaXtuWAmSzlj6/ku6XkuLTml7bmiafooYzlkozov5nkuKrorr7lrprnm7jlj43nmoTorr7lrpoiLAogICAgICAgIGRlYnVnOiAi6LCD6K+V5qih5byPIiwKICAgICAgICBjdXN0b21SdWxlczogIuiHquWumuS5ieWkp+WbvuinhOWImSIsCiAgICAgICAgZmlyc3RFbmdpbmU6ICLpppbpgInmkJzlm77lvJXmk44iLAogICAgICAgIHJlZnJlc2hXaGVuRXJyb3I6ICLor7vlj5bplJnor6/vvIzngrnlh7vph43ovb0iLAogICAgICAgIHN3aXRjaFNsaWRlOiAi5byA5YWz5L6n6L655qCPIiwKICAgICAgICB2aWV3bW9yZTogIuWxleW8gOabtOWkmiIsCiAgICAgICAgY291bnREb3duOiAi5YCS6K6h5pe2IiwKICAgICAgICBjdXN0b21MYW5nOiAi6K6+5a6a6K+t6KiAIiwKICAgICAgICBkZWZhdWx0TGFuZzogIuiHquWKqOmAieaLqSIsCiAgICAgICAgaGlkZUljb246ICLpmpDol4/lm77moIciLAogICAgICAgIGluaXRTaG93OiAi6buY6K6k5pi+56S66aKE6KeIIiwKICAgICAgICBzdGF5T3V0OiAi5L2/5rWu5Yqo5bel5YW35qCP5pi+56S65Zyo5Zu+54mH5aSW6YOoIiwKICAgICAgICBnYWxsZXJ5RG93bmxvYWRHYXA6ICLkuIvovb3pl7TpmpTml7bpl7QiLAogICAgICAgIGZvcm1hdENvbnZlcnNpb246ICLkuIvovb3ml7bovazmjaLlm77niYfmoLzlvI/vvIzkuIDooYzkuIDmnaEiLAogICAgICAgIGdhbGxlcnlEaXNhYmxlQXJyb3c6ICLnpoHnlKjmlrnlkJHplK4iLAogICAgICAgIHBvc2l0aW9uRml4ZWQ6ICLlm7rlrprkvY3nva4iLAogICAgICAgIHN3aXRjaFN0b3JlTG9jOiAi5YiH5o2i5pe26K6w5b+G5L2N572uIgogICAgfQp9LAp7CiAgICBuYW1lOiAi5q2j6auU5Lit5paHIiwKICAgIG1hdGNoOiBbInpoIiwgInpoLVRXIiwgInpoLUhLIiwgInpoLU1PIl0sCiAgICBsYW5nOiB7CiAgICAgICAgc2F2ZUJ0bjogIueiuuWumiIsCiAgICAgICAgc2F2ZU5hbWU6ICLkv53lrZjlnJbniYflkI0iLAogICAgICAgIHNhdmVOYW1lVGlwOiAi5L2/55So6aCQ6Kit5qih5byP5L+d5a2Y5ZyW54mHIiwKICAgICAgICBzYXZlTmFtZUFkZFRpdGxlOiAi5L+d5a2Y5pmC5re75Yqg6aCB6Z2i5qiZ6aGMIiwKICAgICAgICBzaXplOiAi5bC65a+4IiwKICAgICAgICBhbGw6ICLmiYDmnIkiLAogICAgICAgIGJpZ1NpemU6ICLlpKflsLrlr7giLAogICAgICAgIGljb25TaXplOiAi5ZyW56S6IiwKICAgICAgICBhcmlhMkhvc3Q6ICJhcmlhMiDkvLrmnI3lmajkvY3lnYAiLAogICAgICAgIGFyaWEyVG9rZW46ICJhcmlhMiDlr4bpkbAiLAogICAgICAgIHBvc3QyQXJpYTI6ICLlr4TpgIHoh7MgYXJpYTIiLAogICAgICAgIGRlZmF1bHQ6ICLpu5joqo0iLAogICAgICAgIHRleHRGaXJzdDogIuWEquWFiOS9v+eUqOWclueJh+aPj+i/sCIsCiAgICAgICAgb25seVVybDogIuWDheS9v+eUqCBVUkwg5Lit55qE5paH5Lu25ZCNIiwKICAgICAgICB1cmxBbmRUZXh0OiAiVVJMICsg5paH5Lu25o+P6L+wIiwKICAgICAgICBkb3dubG9hZDogIuS4i+i8iSIsCiAgICAgICAgc2F2ZUJ0blRpcHM6ICLpg6jliIbpgbjpoIXpnIDopoHliLfmlrDpoIHpnaLmiY3og73nlJ/mlYgiLAogICAgICAgIGFkZGl0aW9uYWxGZWF0dXJlOiAi6aGN5aSW5Yqf6IO977yM5oyJ5L2PIGFsdCDmmYLnlJ/mlYgiLAogICAgICAgIGludmVydEFkZGl0aW9uYWxGZWF0dXJlOiAi5Y+N6L2J5b+r5o236Y2177yM6buY6KqN5L2/55So6aGN5aSW5Yqf6IO9IiwKICAgICAgICBjb3B5OiAi6KSH6KO96Y+I5o6lIiwKICAgICAgICBjb3B5SW1nOiAi6KSH6KO95ZyW54mHIiwKICAgICAgICBvcGVuSW5OZXdUYWI6ICLlnKjmlrDmqJnnsaTpoIHmiZPplosiLAogICAgICAgIGNsb3NlQnRuOiAi5Y+W5raIIiwKICAgICAgICBpbnZlcnRCdG46ICLlj43pgbgiLAogICAgICAgIGNvbXBhcmVCdG46ICLlsI3mr5QiLAogICAgICAgIHNlbGVjdEFsbEJ0bjogIuWFqOmBuCIsCiAgICAgICAgY2xvc2VCdG5UaXBzOiAi5Y+W5raI5pys5qyh6Kit572u77yM5omA5pyJ6YG46aCF6YKE5Y6fIiwKICAgICAgICByZXNldExpbms6ICLmgaLlvqnpu5joqo3oqK3nva4iLAogICAgICAgIHJlc2V0TGlua1RpcHM6ICLmgaLlvqnmiYDmnInoqK3nva7nmoTlhaflrrnngrrpu5joqo3lgLwiLAogICAgICAgIHNoYXJlOiAi5YiG5LqrIiwKICAgICAgICBzdWl0TG9uZ0ltZzogIumVt+WcluWcqOa7vuWLleimlueql+mhr+ekuiIsCiAgICAgICAgZ2xvYmFsa2V5czogIumgkOimveWKn+iDvemNtee1hOWQiDogIiwKICAgICAgICBnbG9iYWxrZXlzUHJlc3M6ICLmlbLmk4rliIfmj5vpoJDopr0iLAogICAgICAgIGdsb2JhbGtleXNIb2xkOiAi5oyJ5L2P6ZaL5ZWf6aCQ6Ka9IiwKICAgICAgICBnbG9iYWxrZXlzVHlwZTogIumgkOimveinuOeZvOaWueW8j++8miIsCiAgICAgICAgY2xvc2VBZnRlclByZXZpZXc6ICLpoJDopr3ntZDmnZ/pl5zplonlnJbniYfoppbnqpciLAogICAgICAgIHByZXZpZXdNYXhTaXplOiAi6aCQ6Ka96KaW56qX5pyA5aSn5bC65a+4IiwKICAgICAgICBwcmV2aWV3TWF4U2l6ZVRpcDogIueVtumgkOimveimlueql+Wkp+aWvOioreWumuWwuuWvuOaZgu+8jOe4ruaUvumgkOimveimlueql+OAgjAg54K65YGc55SoIiwKICAgICAgICBsb2FkQWxsOiAi6LyJ5YWl5pu05aSaIiwKICAgICAgICBsb2FkZWRBbGw6ICLovInlhaXlroznlaIiLAogICAgICAgIGxvYWRpbmc6ICLmraPlnKjovInlhaUiLAogICAgICAgIGxvYWRBbGxUaXA6ICLovInlhaXkuIvkuIDpoIHnmoTlnJbniYciLAogICAgICAgIHZpZXdtb3JlRW5kbGVzczogIuafpeeci+abtOWkmuijj+a7vuWLleWIsOW6leiHquWLleWKoOi8ieS4i+S4gOmggSIsCiAgICAgICAgZmlkZGxlOiAi5b2I5Ye65ZyW54mHIiwKICAgICAgICBmaWRkbGVUaXA6ICLlvYjlh7rlnJbniYfpgLLooYzopIfpm5zmk43kvZwiLAogICAgICAgIGFkZEltYWdlVXJsczogIua3u+WKoOWclueJhyIsCiAgICAgICAgYWRkSW1hZ2VVcmxzVGlwczogIumAmumBjiB1cmwg5re75Yqg5pu05aSa5ZyW54mHIiwKICAgICAgICBvcGVuSW1hZ2VzOiAi5pys5Zyw5ZyW54mHIiwKICAgICAgICBvcGVuSW1hZ2VzVGlwczogIum7nuaTiuWwjuWFpeacrOWcsOWclueJhyIsCiAgICAgICAgY2xvc2VGaXJzdDogIuiri+WFiOmXnOmWieeVtuWJjeW3sue2k+aJk+mWi+eahOW6qyIsCiAgICAgICAgY29sbGVjdDogIuaUtuiXjyIsCiAgICAgICAgY29sbGVjdGVkOiAi5bey5pS26JePIiwKICAgICAgICBleGl0Q29sbGVjdGlvbjogIumAgOWHuuaUtuiXjyIsCiAgICAgICAgZXhpdENvbGxlY3Rpb25UaXA6ICLpu57mk4rpgIDlh7rmlLbol4/mqKHlvI8iLAogICAgICAgIG5vQ29sbGVjdGlvbllldDogIuS9oOmChOacqOacieaUtuiXj+S7u+S9leWclueJhyIsCiAgICAgICAgY29sbGVjdERldGFpbDogIuaPj+i/sCIsCiAgICAgICAgY29sbGVjdERldGFpbFRpcDogIue1puaUtuiXj+eahOWclueJh+a3u+WKoOS4gOS6m+aPj+i/sOWQpyIsCiAgICAgICAgcGxheVNsaWRlOiAi5pKt5pS+5bm754eI54mHIiwKICAgICAgICBzbGlkZUdhcDogIumWk+malChzKSIsCiAgICAgICAgc2xpZGVHYXBUaXA6ICLplpPpmpTmmYLplpPvvIzllq7kvY0o56eSKSIsCiAgICAgICAgc2xpZGVCYWNrOiAi5b6M6YCAIiwKICAgICAgICBzbGlkZUJhY2tUaXA6ICLlvp7lvozlvoDliY3mkq3mlL4iLAogICAgICAgIHNsaWRlUmFuZG9tOiAi6Zqo5qmf5pKt5pS+IiwKICAgICAgICBzbGlkZVdhaXQ6ICLnrYnlvoXlnJbniYforoDlj5YiLAogICAgICAgIHNsaWRlV2FpdFRpcDogIuW+nuavj+W8teWclueJh+WujOWFqOiugOWPluWujOaIkOW+jOaJjemWi+Wni+WAkuioiOaZgiIsCiAgICAgICAgc2xpZGVTa2lwRXJyb3I6ICLot7PpgY7pjK/oqqTlnJbniYciLAogICAgICAgIHNsaWRlU2tpcEVycm9yVGlwOiAi5b+r6YCf6Lez6YGO6K6A5Y+W6Yyv6Kqk55qE5ZyW54mHIiwKICAgICAgICB0eXBlOiAi6aGe5YilIiwKICAgICAgICB0eXBlVGlwOiAi6YG45pOH5ZyW54mH6aGe5YilIiwKICAgICAgICBzaG93V2l0aFJ1bGVzOiAi5Yy56YWN5Yiw6KaP5YmH5bCx6aGv56S6IiwKICAgICAgICBzaG93V2l0aFJ1bGVzVGlwOiAi5Y+q6KaB5Yy56YWN5Yiw6KaP5YmH77yM5LiN6KuW5bC65a+454K65L2V6YO95pyD6aGv56S65ZyW5qiZIiwKICAgICAgICBhZHZhbmNlZFJ1bGVzOiAi6auY57Sa6KaP5YmHIiwKICAgICAgICBhZHZhbmNlZFJ1bGVzVGlwOiAi55Sx6auY57Sa6KaP5YmH5Yy56YWN5Ye65L6G55qEIiwKICAgICAgICB0cFJ1bGVzOiAi6YCa6YWN6KaP5YmHIiwKICAgICAgICB0cFJ1bGVzVGlwOiAi55Sx6YCa6YWN6KaP5YmH5Yy56YWN5Ye65L6G55qEIiwKICAgICAgICBzY2FsZVJ1bGVzOiAi57iu5pS+6YGO55qEIiwKICAgICAgICBzY2FsZVJ1bGVzVGlwOiAianPoh6rli5Xmn6Xmib7vvIznm7jlsI3poIHpnaLpoa/npLrnmoTlnJbniYfmnInnuK7mlL7pgY7nmoQiLAogICAgICAgIG5vU2NhbGVSdWxlczogIueEoee4ruaUvumBjiIsCiAgICAgICAgbm9TY2FsZVJ1bGVzVGlwOiAianPoh6rli5Xmn6Xmib7vvIznhKHnuK7mlL7pgY7nmoTvvIzkvYbmmK/mu7/otrPkuIDlrprnmoTlpKflsI8iLAogICAgICAgIHNtYWxsUnVsZXM6ICLlsI/lsLrlr7jnmoQiLAogICAgICAgIHNtYWxsUnVsZXNUaXA6ICLlsI/lsLrlr7jlnJbniYfvvIzlr6bpmpvlsLrlr7jnmoTpq5jlkozlr6zpg73lsI/mlrwjdCPlg4/ntKAiLAogICAgICAgIGxvY2tTaXplVGlwOiAi6Y6W5a6a5pyA5aSn5bC65a+4IiwKICAgICAgICBjb21tYW5kOiAi5ZG95LukIiwKICAgICAgICBjb21tYW5kVGlwOiAi5ZG95Luk6I+c5ZauIiwKICAgICAgICBvbmxpbmVFZGl0OiAi5Zyo57ea57eo6LyvIiwKICAgICAgICBvbmxpbmVFZGl0VGlwOiAi5L2/55SoI3Qj5Zyo57ea57eo6Lyv6Kmy5ZyW54mHIiwKICAgICAgICBvcGVuSW5OZXdXaW5kb3c6ICLmlrDnqpflj6PmiZPplosiLAogICAgICAgIG9wZW5Jbk5ld1dpbmRvd1RpcDogIuaWsOeql+WPo+aJk+mWi+WclueJhyIsCiAgICAgICAgZmluZEluUGFnZTogIuWumuS9jeWIsOWclueJhyIsCiAgICAgICAgZmluZEluUGFnZVRpcDogIua7vuWLleWIsOeVtuWJjeWclueJh+aJgOWcqOeahOS9jee9riIsCiAgICAgICAgdmlld0NvbGxlY3Rpb246ICLmn6XnnIvmlLbol48iLAogICAgICAgIHZpZXdDb2xsZWN0aW9uVGlwOiAi5p+l55yL5omA5pyJ5pS26JeP55qE5ZyW54mHIiwKICAgICAgICBpbkNvbGxlY3Rpb246ICLmlLbol4/mqKHlvI/kuK3vvIznhKHms5Xkvb/nlKgiLAogICAgICAgIGNhbnRGaW5kOiAi5ZyW54mH5LiN5Zyo5paH5qqU5Lit77yM5oiW6ICF6KKr6Zqx6JeP5LqG77yM54Sh5rOV5a6a5L2N77yBIiwKICAgICAgICBleHBvcnRJbWFnZXM6ICLlsI7lh7rpoa/npLrlpKflnJYiLAogICAgICAgIGV4cG9ydEltYWdlc1RpcDogIuWwjuWHuuaJgOaciemhr+ekuuS4reeahOWclueJh+WIsOaWsOeql+WPoyIsCiAgICAgICAgZG93bmxvYWRJbWFnZTogIuS4i+i8ieeVtuWJjeaJgOaciSIsCiAgICAgICAgZG93bmxvYWRJbWFnZVRpcDogIuS4i+i8ieeVtuWJjeW6q+S4reaJgOaciemhr+ekuuWclueJhyIsCiAgICAgICAgY29weUltYWdlc1VybDogIuikh+ijvemhr+ekuuWkp+WcliIsCiAgICAgICAgY29weUltYWdlc1VybFRpcDogIuikh+ijveaJgOaciemhr+ekuuS4reeahOWkp+WcluWcsOWdgCIsCiAgICAgICAgY29weVN1Y2Nlc3M6ICLlt7LmiJDlip/opIfoo70gI3QjIOW8teWkp+WcluWcsOWdgCIsCiAgICAgICAgYXV0b1JlZnJlc2g6ICLoh6rli5Xph43ovIkiLAogICAgICAgIGF1dG9SZWZyZXNoVGlwOiAi5pyA5b6M5bm+5by15ZyW54mH5pmC77yM5ru+5YuV5Li756qX5Y+j5Yiw5pyA5bqV6YOo77yM54S25b6M6Ieq5YuV6LyJ5YWl5paw55qE5ZyW54mHIiwKICAgICAgICBlbnRlckZ1bGxzYzogIumAsuWFpeWFqOWxjyIsCiAgICAgICAgZXhpdEZ1bGxzYzogIumAgOWHuuWFqOWxjyIsCiAgICAgICAgY29uZmlnOiAi6Kit572uIiwKICAgICAgICBvcGVuQ29uZmlnOiAi5omT6ZaL6Kit572uIiwKICAgICAgICBydWxlUmVxdWVzdDogIumBqemFjeiri+axgiIsCiAgICAgICAgY2xvc2VHYWxsZXJ5OiAi6Zec6ZaJ5bqrIiwKICAgICAgICByZXR1cm5Ub0dhbGxlcnk6ICLlm57liLDluqsiLAogICAgICAgIHBpY0luZm86ICLpu57mk4rkv67mlLkiLAogICAgICAgIHBpY05vdGU6ICLlnJbniYfms6jph4siLAogICAgICAgIHVybEZpbHRlcjogIumBjua/vumAo+e1kCIsCiAgICAgICAgdXJsRmlsdGVyVGlwOiAi6Ly45YWl6Zec6Y215a2X5oiW5q2j5YmH6KGo6YGU5byP6YGO5r++6YCj57WQIiwKICAgICAgICByZXNvbHV0aW9uOiAi6Kej5p6Q5bqmIiwKICAgICAgICBzY2FsZVJhdGlvOiAi57iu5pS+5q+UIiwKICAgICAgICBzaW1pbGFySW1hZ2U6ICLku6XlnJbmkJzlnJYiLAogICAgICAgIHNjYWxlOiAi57iu5pS+IiwKICAgICAgICBob3Jpem9udGFsRmxpcDogIuawtOW5s+e/u+i9iSIsCiAgICAgICAgdmVydGljYWxGbGlwOiAi5Z6C55u057+76L2JIiwKICAgICAgICBhY3R1YWxCdG46ICLmn6XnnIvljp/lp4soQSkiLAogICAgICAgIHNlYXJjaEJ0bjogIuafpeaJvuWOn+WclihTKSIsCiAgICAgICAgZ2FsbGVyeUJ0bjogIuafpeeci+W6qyhHKSIsCiAgICAgICAgY3VycmVudEJ0bjogIuafpeeci+eVtuWJjShDKSIsCiAgICAgICAgbWFnbmlmaWVyQnRuOiAi5pS+5aSn6Y+hKE0pIiwKICAgICAgICBwaWNUaXRsZTogIuWclueJh+aomemhjCIsCiAgICAgICAgcGljTnVtOiAi5ZyW54mH5pW46YePIiwKICAgICAgICBwaWNUaXBzOiAi5oyJ5L2PQ3RybOaUvuWkpyIsCiAgICAgICAgc2F2ZVBhZ2VUaXBzOiAi5L2/55So44CM57ay6aCB5Y+m5a2Y54K644CN5Y2z5Y+v5L+d5a2Y5omA5pyJ5ZyW54mHIiwKICAgICAgICBleHBvcnRJbWFnZXNVcmw6ICLlsI7lh7rlnJbniYfpj4jmjqUiLAogICAgICAgIGV4cG9ydEltYWdlc1VybFBvcDogIkN0cmwrQ+ikh+ijveWclueJh+mPiOaOpSIsCiAgICAgICAgYmVnaW5TZWFyY2hJbWc6ICIjdCPorZjlnJbplovlp4vigKbigKYiLAogICAgICAgIGZpbmROb1BpYzogIuacquaJvuWIsOWOn+WcliIsCiAgICAgICAgZmluZE92ZXJCZWdpbkxvYWQ6ICIjdCPorZjlnJbntZDmnZ/vvIzlhbHmib7liLAjdCPlvLXljLnphY3lnJbniYfvvIzplovlp4vovInlhaXnrKzkuIDlvLUiLAogICAgICAgIGxvYWROZXh0U2ltaWxhcjogIuWOn+Wclui8ieWFpeWkseaVl++8jOWYl+ippui8ieWFpeS4i+S4gOe1kOaenOKApuKApiIsCiAgICAgICAgbG9hZEVycm9yOiAi6LyJ5YWl5aSx5pWXIiwKICAgICAgICBvcGVuSG9tZVBhZ2U6ICLpu57mk4rmraTomZXmiZPplovkuLvpoIEiLAogICAgICAgIHBvc2l0aW9uOiAi6aGv56S65L2N572uIiwKICAgICAgICBwb3NpdGlvblRpcHM6ICLmjInkvY9BTFTpmrHol48iLAogICAgICAgIHRvcExlZnQ6ICLlnJbniYflt6bkuIrop5IiLAogICAgICAgIHRvcFJpZ2h0OiAi5ZyW54mH5Y+z5LiK6KeSIiwKICAgICAgICBib3R0b21SaWdodDogIuWclueJh+WPs+S4i+inkiIsCiAgICAgICAgYm90dG9tTGVmdDogIuWclueJh+W3puS4i+inkiIsCiAgICAgICAgdG9wQ2VudGVyOiAi5ZyW54mH5q2j5LiK5pa5IiwKICAgICAgICBib3R0b21DZW50ZXI6ICLlnJbniYfmraPkuIvmlrkiLAogICAgICAgIGZsb2F0QmFyOiAi5rWu5YuV5bel5YW35qyEIiwKICAgICAgICBwcmV2aWV3Rm9sbG93TW91c2U6ICLkvb/lvpfpoJDopr3lnJbot5/pmqjpvKDmqJnmjIfph50iLAogICAgICAgIHNob3dEZWxheTogIumhr+ekuuW7tuaZgiIsCiAgICAgICAgbXM6ICLmr6vnp5IiLAogICAgICAgIGhpZGU6ICLpmrHol48iLAogICAgICAgIGhpZGVEZWxheTogIumaseiXj+W7tuaZgiIsCiAgICAgICAgZm9yY2VTaG93OiAi6Z2e57iu5pS+5ZyW54mH77yM6LaF6YGO6Kmy5bC65a+477yM6aGv56S65rWu5qGGIiwKICAgICAgICBmb3JjZVNob3dUaXA6ICLpnZ7nuK7mlL7nmoTlnJbniYflpKflsI/otoXpgY7kuIvpnaLoqK3lrprnmoTlsLrlr7jmmYLpoa/npLrmta7li5Xlt6XlhbfmrIQiLAogICAgICAgIHNpemVMaW1pdE9yOiAi5Lul5LiK6ZW35a+s5qKd5Lu25Y+q6ZyA5ru/6Laz5YW25LiAIiwKICAgICAgICBweDogIuWDj+e0oCIsCiAgICAgICAgbWluU2l6ZUxpbWl0OiAi57iu5pS+5ZyW54mH77yM6LaF6YGO6Kmy5bC65a+477yM6aGv56S65rWu5qGGIiwKICAgICAgICBtaW5TaXplTGltaXRUaXA6ICLlnJbniYfooqvnuK7mlL4o5ZyW54mH5Y6f5aeL5aSn5bCP6IiH5a+m6Zqb5aSn5bCP5LiN5LiA6Ie0KeW+jCzpoa/npLrplbflr6zlpKfmlrzoqK3lrprlgLzmmYLpoa/npLrmta7li5Xlt6XlhbfmrIQiLAogICAgICAgIGRlZmF1bHRTaXplTGltaXQ6ICLlnJbluqvpu5joqo3nr6npgbjlsLrlr7giLAogICAgICAgIGxpc3RlbkJnOiAi55uj6IG96IOM5pmv5ZyWIiwKICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICLog4zmma/poZToibIiLAogICAgICAgIGxpc3RlbkJnVGlwOiAi5Zyo5pyJ6IOM5pmv5ZyW55qE5YWD57Sg5LiK6aGv56S65oe45rWu5qGGIiwKICAgICAgICBidXRvbk9yZGVyOiAi5bel5YW35qyE5ZyW5qiZ5o6S5bqPIiwKICAgICAgICBrZXlzRW5hYmxlOiAi5ZWf55So5Lul5LiL5b+r5o236Y21IiwKICAgICAgICBrZXlzQWN0dWFsOiAi5omT6ZaL5aSn5ZyWIiwKICAgICAgICBrZXlzQWN0dWFsVGlwOiAi55W25Ye654++5oe45rWu5qKd5pmC5oyJ5LiL5q2k5oyJ6Y215omT6ZaL5aSn5ZyWIiwKICAgICAgICBrZXlzU2VhcmNoOiAi5p+l5om+5Y6f5ZyWIiwKICAgICAgICBrZXlzU2VhcmNoVGlwOiAi55W25Ye654++5oe45rWu5qKd5pmC5oyJ5LiL5q2k5oyJ6Y215p+l5om+5Y6f5ZyWIiwKICAgICAgICBoZWFkU2VhcmNoVGlwOiAi5pCc5ZyWIiwKICAgICAgICBoZWFkU2VhcmNoQWxsOiAi5pCc57Si5Lul5LiK5YWo6YOoIiwKICAgICAgICBrZXlzQ3VycmVudDogIuaJk+mWi+eVtuWJjeWclueJhyIsCiAgICAgICAga2V5c0N1cnJlbnRUaXA6ICLnlbblh7rnj77mh7jmta7mop3mmYLmjInkuIvmraTmjInpjbXmiZPplovnlbbliY3poa/npLrnmoTlnJbniYciLAogICAgICAgIGtleXNNYWduaWZpZXI6ICLmiZPplovmlL7lpKfpj6Hop4Dlr58iLAogICAgICAgIGtleXNNYWduaWZpZXJUaXA6ICLnlbblh7rnj77mh7jmta7mop3mmYLmjInkuIvmraTmjInpjbXmiZPplovmlL7lpKfpj6Hop4Dlr58iLAogICAgICAgIGtleXNHYWxsZXJ5OiAi5omT6ZaL5ZyW5bqr77yI5Yqg5Yqf6IO96Y2154K65YWo5bGA77yJIiwKICAgICAgICBrZXlzR2FsbGVyeVRpcDogIueVtuWHuuePvuaHuOa1ruaineaZguaMieS4i+atpOaMiemNteaJk+mWi+WcluW6qyIsCiAgICAgICAgb3BlbkdhbGxlcnk6ICLmiZPplovlnJbluqsiLAogICAgICAgIG1hZ25pZmllcjogIuaUvuWkp+mPoSIsCiAgICAgICAgbWFnbmlmaWVyUmFkaXVzOiAi6buY6KqN5Y2K5b6RIiwKICAgICAgICBtYWduaWZpZXJXaGVlbFpvb21FbmFibGVkOiAi5ZWf55So5ru+6Lyq57iu5pS+IiwKICAgICAgICBtYWduaWZpZXJXaGVlbFpvb21SYW5nZTogIua7vui8que4ruaUvueahOWAjeeOhyIsCiAgICAgICAgbWFnbmlmaWVyU2NhbGVJbWFnZTogIueUqOa7vui8que4ruaUvuWclueJhyIsCiAgICAgICAgZ2FsbGVyeTogIuWcluW6qyIsCiAgICAgICAgZ2FsbGVyeUZpdFRvU2NyZWVuOiAi5bCN5ZyW54mH6YCy6KGM57iu5pS+5Lul6YGp5oeJ5bGP5bmVIiwKICAgICAgICBnYWxsZXJ5Rml0VG9TY3JlZW5TbWFsbDogIuWwj+WcluS5n+e4ruaUvuS7pemBqeaHieWxj+W5lSIsCiAgICAgICAgZ2FsbGVyeUZpdFRvU2NyZWVuVGlwOiAi6YGp5oeJ5pa55byP54K6Y29udGFpbu+8jOmdnmNvdmVyIiwKICAgICAgICBnYWxsZXJ5U2Nyb2xsRW5kVG9DaGFuZ2U6ICLlpKflnJbmu77li5XliLDlupXlvozliIfmj5vlnJbniYciLAogICAgICAgIGdhbGxlcnlTY3JvbGxFbmRUb0NoYW5nZVRpcDogIuWPlua2iOS4iuS4gOmBuOmgheW+jOaJjeacieaViCIsCiAgICAgICAgZ2FsbGVyeUV4cG9ydFR5cGU6ICLlnJbniYflsI7lh7rpu5joqo3mjpLluo8iLAogICAgICAgIGdyaWQ6ICLlubPpi6rmjpLluo8iLAogICAgICAgIGdyaWRCaWc6ICLljp/lnJblubPpi6oiLAogICAgICAgIGxpc3Q6ICLliJfooajmjpLluo8iLAogICAgICAgIGdhbGxlcnlBdXRvTG9hZDogIuiHquWLlei8ieWFpeabtOWkmuWclueJhyIsCiAgICAgICAgZ2FsbGVyeUxvYWRBbGw6ICLovInlhaXmm7TlpJrlnJbniYfmmYLoh6rli5XomZXnkIblhajpg6jpoIEiLAogICAgICAgIGdhbGxlcnlMb2FkQWxsVGlwOiAi6Iul6aCB5pW46YGO5aSa5Y+v6IO95b2x6Z+/6auU6amXIiwKICAgICAgICBnYWxsZXJ5RG93bmxvYWRXaXRoWmlwOiAi5LiL6LyJ5omA5pyJ5pmC5omT5YyF5oiQemlwIiwKICAgICAgICBnYWxsZXJ5RG93bmxvYWRXaXRoWmlwQWxlcnQ6ICLmraPlnKjmiZPljIXvvIzoq4vogJDlv4PnrYnlgJnmlbjljYHnp5IiLAogICAgICAgIGdhbGxlcnlTY2FsZVNtYWxsU2l6ZTE6ICLlr6bpmpvlsLrlr7jnmoTpq5jlkozlr6zpg73lsI/mlrwgIiwKICAgICAgICBnYWxsZXJ5U2NhbGVTbWFsbFNpemUyOiAiIOWDj+e0oOWJh+atuOWFpeWwj+WwuuWvuOWclueJhyIsCiAgICAgICAgZ2FsbGVyeVNob3dTbWFsbFNpemU6ICLpu5joqo3poa/npLrlsI/lsLrlr7jlnJbniYciLAogICAgICAgIGdhbGxlcnlUcmFuc2l0aW9uOiAi6aGv56S65ZyW5bqr5YiH5o+b5ZyW54mH55qE54m55pWIIiwKICAgICAgICBnYWxsZXJ5U2lkZWJhclBvc2l0aW9uOiAi57iu55Wl5ZyW5qyE5L2N572uIiwKICAgICAgICBib3R0b206ICLlupXpg6giLAogICAgICAgIHJpZ2h0OiAi5Y+z5YG0IiwKICAgICAgICBsZWZ0OiAi5bem5YG0IiwKICAgICAgICB0b3A6ICLpoILpg6giLAogICAgICAgIGdhbGxlcnlTaWRlYmFyU2l6ZTogIumrmOW6piIsCiAgICAgICAgZ2FsbGVyeVNpZGViYXJTaXplVGlwOiAi57iu55Wl5ZyW5qyE55qE6auY77yI5aaC5p6c5piv5rC05bmz5pS+572u77yJ5oiW6ICF5a+s77yI5aaC5p6c5piv5Z6C55u05pS+572u77yJIiwKICAgICAgICBnYWxsZXJ5TWF4MTogIuacgOWkmumgkOiugCAiLAogICAgICAgIGdhbGxlcnlNYXgyOiAiIOW8teWclueJh++8iOWJjeW+jOWQhOWkmuWwkeW8te+8iSIsCiAgICAgICAgZ2FsbGVyeUF1dG9ab29tOiAi57iu5pS+5pS55ZueIDEwMCXvvIhjaHJvbWXvvIkiLAogICAgICAgIGdhbGxlcnlBdXRvWm9vbVRpcDogIuWmguaenOacieaUvuWkp++8jOWJh+aKiuWclueJh+WPiiBzaWRlYmFyIOmDqOWIhueahOe4ruaUvuaUueWbniAxMDAl77yM5aKe5aSn5Y+v6KaW6Z2i56mN77yI5YOF5ZyoIGNocm9tZSDkuIvmnInmlYjvvIkiLAogICAgICAgIGdhbGxlcnlEZXNjcmlwdGlvbkxlbmd0aDE6ICLms6jph4vnmoTmnIDlpKflr6zluqYiLAogICAgICAgIGdhbGxlcnlEZXNjcmlwdGlvbkxlbmd0aDI6ICIg5YCL5a2X5YWDIiwKICAgICAgICBnYWxsZXJ5QXV0b09wZW5TaXRlczogIuiHquWLleaJk+mWi+WcluW6q+eahOe2suWdgOato+WJh++8jOS4gOihjOS4gOaine+8jOiLpeWJjee2tEDliYfoh6rli5XlsZXplovlnJbluqsiLAogICAgICAgIGRpc2FibGVLZXlTaXRlczogIuWBnOeUqOW/q+mAn+mNteeahOe2suWdgOato+imj++8jOS4gOihjOS4gOainSIsCiAgICAgICAgYXV0b09wZW5WaWV3bW9yZTogIuaJk+mWi+WcluW6q+aZguiHquWLleWxlemWiyIsCiAgICAgICAgZ2FsbGVyeVNlYXJjaERhdGE6ICLmkJzlnJbnq5npu57oqK3nva7vvIzmuIXnqbrpgoTljp8iLAogICAgICAgIGdhbGxlcnlFZGl0U2l0ZTogIuWcqOe3mue3qOi8r+ermem7niIsCiAgICAgICAgaW1nV2luZG93OiAi5ZyW54mH56qX5Y+jIiwKICAgICAgICBpbWdXaW5kb3dGaXRUb1NjcmVlbjogIumBqeaHieWxj+W5le+8jOS4puS4lOawtOW5s+WeguebtOWxheS4rSIsCiAgICAgICAgaW1nV2luZG93Rml0VG9TY3JlZW5UaXA6ICLpganmh4nmlrnlvI/ngrpjb250YWlu77yM6Z2eY292ZXIiLAogICAgICAgIGltZ1dpbmRvd0ZpdFRvU2NyZWVuV2hlblNtYWxsOiAi5Y2z5L2/5piv5bCP5ZyW54mH5Lmf5ouJ5Ly46Iez6YGp5oeJ5bGP5bmVIiwKICAgICAgICBpbWdXaW5kb3dEZWZhdWx0VG9vbDogIuaJk+mWi+eql+WPo+aZgum7mOiqjemBuOaTh+eahOW3peWFtyIsCiAgICAgICAgaGFuZDogIuaKk+aJiyIsCiAgICAgICAgcm90YXRlOiAi5peL6L2JIiwKICAgICAgICB6b29tOiAi5pS+5aSn6Y+hIiwKICAgICAgICBpbWdXaW5kb3dFc2NLZXk6ICJFc2PpjbXpl5zplokiLAogICAgICAgIGltZ1dpbmRvd0RibENsaWNrSW1nV2luZG93OiAi6ZuZ5pOK5ZyW54mH56qX5Y+j6Zec6ZaJIiwKICAgICAgICBpbWdXaW5kb3dDbGlja091dHNpZGU6ICLpu57mk4rlnJbniYflpJbpg6jpl5zplonvvIjopobok4vlsaTvvIkiLAogICAgICAgIGltZ1dpbmRvd0NsaWNrT3V0c2lkZVRpcDogIuWDheeVtuimhuiTi+WxpOmhr+ekuuaZgueUn+aViCIsCiAgICAgICAgbm9uZTogIueEoSIsCiAgICAgICAgY2xpY2s6ICLllq7mk4oiLAogICAgICAgIGRibGNsaWNrOiAi6ZuZ5pOKIiwKICAgICAgICBpbWdXaW5kb3dPdmVybGF5ZXJTaG93bjogIuimhuiTi+WxpCIsCiAgICAgICAgaW1nV2luZG93T3ZlcmxheWVyQ29sb3I6ICLpoY/oibLlkozkuI3pgI/mmI7luqYiLAogICAgICAgIGltZ1dpbmRvd1NoaWZ0Um90YXRlU3RlcDE6ICLml4vovYnmmYLvvIzmjInkvY9zaGlmdOmNte+8jOaXi+i9ieeahOatpemAsiIsCiAgICAgICAgaW1nV2luZG93U2hpZnRSb3RhdGVTdGVwMjogIiDluqYiLAogICAgICAgIGltZ1dpbmRvd01vdXNlV2hlZWxab29tOiAi5ru+6Lyq57iu5pS+IiwKICAgICAgICBpbWdXaW5kb3dab29tUmFuZ2U6ICLmu77ovKrnuK7mlL7mr5TkvosiLAogICAgICAgIGltZ1dpbmRvd1pvb21SYW5nZVRpcDogIue4ruaUvuavlOS+iyjlv4XpoIjngrrmraPmlbgpIiwKICAgICAgICBvdGhlcnM6ICLlhbblroMiLAogICAgICAgIHdhaXRJbWdMb2FkOiAi562J5ZyW54mH5a6M5YWo6LyJ5YWl5b6M77yM5omN6ZaL5aeL5Z+36KGM5b2I5Ye65pS+5aSn562J5pON5L2cIiwKICAgICAgICB3YWl0SW1nTG9hZFRpcDogIuaMieS9j2N0cmzpjbXnmoTmmYLlgJks5Y+v5Lul6Ieo5pmC5Z+36KGM5ZKM6YCZ5YCL6Kit5a6a55u45Y+N55qE6Kit5a6aIiwKICAgICAgICBkZWJ1ZzogIuiqv+ippuaooeW8jyIsCiAgICAgICAgY3VzdG9tUnVsZXM6ICLoh6rlrprnvqnlpKflnJbopo/liYciLAogICAgICAgIGZpcnN0RW5naW5lOiAi6aaW6YG45pCc5ZyW5byV5pOOIiwKICAgICAgICByZWZyZXNoV2hlbkVycm9yOiAi6K6A5Y+W6Yyv6Kqk77yM6bue5pOK6YeN6LyJIiwKICAgICAgICBzd2l0Y2hTbGlkZTogIumWi+mXnOWBtOmCiuashCIsCiAgICAgICAgdmlld21vcmU6ICLlsZXplovmm7TlpJoiLAogICAgICAgIGNvdW50RG93bjogIuWAkuioiOaZgiIsCiAgICAgICAgY3VzdG9tTGFuZzogIuioreWumuiqnuiogCIsCiAgICAgICAgZGVmYXVsdExhbmc6ICLoh6rli5Xpgbjmk4ciLAogICAgICAgIGhpZGVJY29uOiAi6Zqx6JeP5ZyW5qiZIiwKICAgICAgICBpbml0U2hvdzogIum7mOiqjemhr+ekuumgkOimvSIsCiAgICAgICAgc3RheU91dDogIuS9v+a1ruWLleW3peWFt+ashOmhr+ekuuWcqOWclueJh+WklumDqCIsCiAgICAgICAgZ2FsbGVyeURvd25sb2FkR2FwOiAi5LiL6LyJ6ZaT6ZqU5pmC6ZaTIiwKICAgICAgICBmb3JtYXRDb252ZXJzaW9uOiAi5LiL6LyJ5pmC6L2J5o+b5ZyW54mH5qC85byP77yM5LiA6KGM5LiA5qKdIiwKICAgICAgICBnYWxsZXJ5RGlzYWJsZUFycm93OiAi56aB55So5pa55ZCR6Y21IiwKICAgICAgICBwb3NpdGlvbkZpeGVkOiAi5Zu65a6a5L2N572uIiwKICAgICAgICBzd2l0Y2hTdG9yZUxvYzogIuWIh+aPm+aZguiomOaGtuS9jee9riIKICAgIH0KfSwKewogICAgbmFtZTogIlBvcnR1Z3XDqnMgKEJyYXNpbCkiLAogICAgbWF0Y2g6IFsicHQtQlIiXSwKICAgIGxhbmc6IHsKICAgICAgICAvLyBUcmFkdXppZG8gcG9yIFRoaWFnbyBSYW1vcyAodGhpYWdvanJhbW9zQG91dGxvb2suY29tKS4KICAgICAgICBzYXZlQnRuOiAiQ29uY2x1aXIiLAogICAgICAgIHNhdmVOYW1lOiAiTm9tZSBkbyBhcnF1aXZvIiwKICAgICAgICBzYXZlTmFtZVRpcDogIlNhbHZhciBpbWFnZW5zIGNvbSBvIG5vbWUiLAogICAgICAgIHNhdmVOYW1lQWRkVGl0bGU6ICJBZGljaW9uYXIgdMOtdHVsbyBhbyBub21lIGRvIGFycXVpdm8iLAogICAgICAgIHNpemU6ICJUYW1hbmhvIiwKICAgICAgICBhbGw6ICJUb2RvcyIsCiAgICAgICAgYmlnU2l6ZTogIlRhbWFuaG8gZ3JhbmRlIiwKICAgICAgICBpY29uU2l6ZTogIsONY29uZSIsCiAgICAgICAgYXJpYTJIb3N0OiAiU2Vydmlkb3IgQXJpYTIiLAogICAgICAgIGFyaWEyVG9rZW46ICJUb2tlbiBkbyBBcmlhMiIsCiAgICAgICAgcG9zdDJBcmlhMjogIkVudmlhciBwYXJhIG8gYXJpYTIiLAogICAgICAgIGRlZmF1bHQ6ICJQYWRyw6NvIiwKICAgICAgICB0ZXh0Rmlyc3Q6ICJJbmZvcm1hw6fDtWVzIHByaW1laXJvLCBzZSBleGlzdGlyZW0iLAogICAgICAgIG9ubHlVcmw6ICJTb21lbnRlIGNvbSBVUkwiLAogICAgICAgIHVybEFuZFRleHQ6ICJVUkwgKyBJbmZvcm1hw6fDtWVzIiwKICAgICAgICBkb3dubG9hZDogIkJhaXhhciIsCiAgICAgICAgc2F2ZUJ0blRpcHM6ICJDb25jbHVpciBlIHNhbHZhci4gQXR1YWxpemUgYSBww6FnaW5hIHNlIG5lY2Vzc8OhcmlvLiIsCiAgICAgICAgYWRkaXRpb25hbEZlYXR1cmU6ICJGdW5jaW9uYWxpZGFkZSBhZGljaW9uYWwsIGF0aXZhZGEgYW8gcHJlc3Npb25hciBhIHRlY2xhIEFsdCIsCiAgICAgICAgaW52ZXJ0QWRkaXRpb25hbEZlYXR1cmU6ICJJbnZlcnRlciB0ZWNsYXMgZGUgYXRhbGhvLCB1c2FyIHJlY3Vyc29zIGFkaWNpb25haXMgcG9yIHBhZHLDo28iLAogICAgICAgIGNvcHk6ICJDb3BpYXIgbGluayIsCiAgICAgICAgY29weUltZzogIkNvcGlhciBkYWRvcyBkYSBpbWFnZW0iLAogICAgICAgIG9wZW5Jbk5ld1RhYjogIkFicmlyIGVtIHVtYSBub3ZhIGFiYSIsCiAgICAgICAgY2xvc2VCdG46ICJTYWlyIiwKICAgICAgICBpbnZlcnRCdG46ICJJbnZlcnRlciIsCiAgICAgICAgY29tcGFyZUJ0bjogIkNvbXBhcmFyIiwKICAgICAgICBzZWxlY3RBbGxCdG46ICJTZWxlY2lvbmFyIHR1ZG8iLAogICAgICAgIGNsb3NlQnRuVGlwczogIlNhaXIgc2VtIGFwbGljYXIgYXMgbXVkYW7Dp2FzIiwKICAgICAgICByZXNldExpbms6ICJSZXN0YXVyYXIgUGFkcsO1ZXMiLAogICAgICAgIHJlc2V0TGlua1RpcHM6ICJSZXN0YXVyYXIgYXMgY29uZmlndXJhw6fDtWVzIGFvcyBwYWRyw7VlcyIsCiAgICAgICAgc2hhcmU6ICJDb21wYXJ0aWxoYXIiLAogICAgICAgIHN1aXRMb25nSW1nOiAiQWp1c3RhciBpbWFnZW5zIGxvbmdhcyBuYSBqYW5lbGEgZGUgcm9sYWdlbSIsCiAgICAgICAgZ2xvYmFsa2V5czogIlRlY2xhcyBkZSBhdGFsaG8gcGFyYSB2aXN1YWxpemHDp8OjbzogIiwKICAgICAgICBnbG9iYWxrZXlzUHJlc3M6ICJQcmVzc2lvbmUgcGFyYSBhbHRlcm5hciBvIG1vZG8gZGUgdmlzdWFsaXphw6fDo28iLAogICAgICAgIGdsb2JhbGtleXNIb2xkOiAiTWFudGVuaGEgcHJlc3Npb25hZG8gcGFyYSB1c2FyIG8gbW9kbyBkZSB2aXN1YWxpemHDp8OjbyIsCiAgICAgICAgZ2xvYmFsa2V5c1R5cGU6ICJNw6l0b2RvIGRlIGF0aXZhw6fDo28gZG8gbW9kbyBkZSB2aXN1YWxpemHDp8OjbyIsCiAgICAgICAgY2xvc2VBZnRlclByZXZpZXc6ICJGZWNoYXIgYSBqYW5lbGEgZGUgaW1hZ2VtIGFww7NzIGEgdmlzdWFsaXphw6fDo28iLAogICAgICAgIHByZXZpZXdNYXhTaXplOiAiVGFtYW5obyBtw6F4aW1vIGRhIGphbmVsYSBkZSBwcsOpLXZpc3VhbGl6YcOnw6NvIiwKICAgICAgICBwcmV2aWV3TWF4U2l6ZVRpcDogIlF1YW5kbyBhIGphbmVsYSBkZSAgcHLDqS12aXN1YWxpemHDp8OjbyBleGNlZGVyIGVzdGUgdGFtYW5obywgc2Vyw6EgcmVkaW1lbnNpb25hZGEuIDAgPSBkZXNhdGl2YWRvIiwKICAgICAgICBsb2FkQWxsOiAiQ2FycmVnYXIgbWFpcyIsCiAgICAgICAgbG9hZGVkQWxsOiAiQ2FycmVnYW1lbnRvIGNvbmNsdcOtZG8iLAogICAgICAgIGxvYWRpbmc6ICJDYXJyZWdhbmRvLi4uIiwKICAgICAgICBsb2FkQWxsVGlwOiAiQ2FycmVnYXIgaW1hZ2VucyBkYSBwcsOzeGltYSBww6FnaW5hIiwKICAgICAgICB2aWV3bW9yZUVuZGxlc3M6ICJDYXJyZWdhciBtYWlzIGltYWdlbnMgZW0gXCJWZXIgbWFpc1wiIGFvIHJvbGFyIHBhcmEgYmFpeG8iLAogICAgICAgIGZpZGRsZTogIk1hbmlwdWxhciIsCiAgICAgICAgZmlkZGxlVGlwOiAiQWJyaXIgaW1hZ2VucyBlbSBwb3AtdXAgcGFyYSBtYW5pcHVsYcOnw6NvIGF2YW7Dp2FkYSIsCiAgICAgICAgYWRkSW1hZ2VVcmxzOiAiQWRpY2lvbmFyIGltYWdlbSBwb3IgVVJMIiwKICAgICAgICBhZGRJbWFnZVVybHNUaXBzOiAiQWRpY2lvbmFyIG1haXMgaW1hZ2VucyBwb3IgVVJMIiwKICAgICAgICBvcGVuSW1hZ2VzOiAiSW1hZ2VucyBsb2NhaXMiLAogICAgICAgIG9wZW5JbWFnZXNUaXBzOiAiQ2xpcXVlIHBhcmEgaW1wb3J0YXIgaW1hZ2VucyBkbyBzZXUgZGlzcG9zaXRpdm8iLAogICAgICAgIGNsb3NlRmlyc3Q6ICJGZWNoZSBhIGdhbGVyaWEgZXhpc3RlbnRlIHByaW1laXJvIiwKICAgICAgICBjb2xsZWN0OiAiQ29sZcOnw6NvIiwKICAgICAgICBjb2xsZWN0ZWQ6ICJBZGljaW9uYWRvKGEpIMOgIGNvbGXDp8OjbyIsCiAgICAgICAgZXhpdENvbGxlY3Rpb246ICJTYWlyIGRhIGNvbGXDp8OjbyIsCiAgICAgICAgZXhpdENvbGxlY3Rpb25UaXA6ICJTYWlyIGRvIG1vZG8gZGUgY29sZcOnw6NvIiwKICAgICAgICBub0NvbGxlY3Rpb25ZZXQ6ICJWb2PDqiBhaW5kYSBuw6NvIHRlbSBuZW5odW1hIGltYWdlbSBuYSBjb2xlw6fDo28iLAogICAgICAgIGNvbGxlY3REZXRhaWw6ICJEZXNjcmnDp8OjbyBkYSBjb2xlw6fDo28iLAogICAgICAgIGNvbGxlY3REZXRhaWxUaXA6ICJBZGljaW9uZSBkZXNjcmnDp8O1ZXMgw6BzIHN1YXMgaW1hZ2VucyBmYXZvcml0YXMiLAogICAgICAgIHBsYXlTbGlkZTogIlJlcHJvZHV6aXIgYXByZXNlbnRhw6fDo28gZGUgc2xpZGVzIiwKICAgICAgICBzbGlkZUdhcDogIkludGVydmFsbyAoc2VndW5kb3MpIiwKICAgICAgICBzbGlkZUdhcFRpcDogIlRlbXBvIGVudHJlIHNsaWRlcyAoZW0gc2VndW5kb3MpIiwKICAgICAgICBzbGlkZUJhY2s6ICJWb2x0YXIiLAogICAgICAgIHNsaWRlQmFja1RpcDogIlJlcHJvZHV6aXIgZGUgdHLDoXMgcGFyYSBmcmVudGUiLAogICAgICAgIHNsaWRlUmFuZG9tOiAiQWxlYXTDs3JpbyIsCiAgICAgICAgc2xpZGVXYWl0OiAiQWd1YXJkYXIgY2FycmVnYW1lbnRvIGRhIGltYWdlbSIsCiAgICAgICAgc2xpZGVXYWl0VGlwOiAiQSBjb250YWdlbSByZWdyZXNzaXZhIGNvbWXDp2EgYXDDs3MgY2FkYSBpbWFnZW0gc2VyIGNvbXBsZXRhbWVudGUgY2FycmVnYWRhIiwKICAgICAgICBzbGlkZVNraXBFcnJvcjogIlB1bGFyIGltYWdlbnMgY29tIGVycm8iLAogICAgICAgIHNsaWRlU2tpcEVycm9yVGlwOiAiUHVsYXIgaW1hZ2VucyBxdWUgbsOjbyBjYXJyZWdhcmFtIGNvcnJldGFtZW50ZSIsCiAgICAgICAgdHlwZTogIkNhdGVnb3JpYSIsCiAgICAgICAgdHlwZVRpcDogIlNlbGVjaW9uYXIgYSBjYXRlZ29yaWEgZGEgaW1hZ2VtIiwKICAgICAgICBzaG93V2l0aFJ1bGVzOiAiRXhpYmlyIMOtY29uZSBtZXNtbyBjb20gcmVncmEiLAogICAgICAgIHNob3dXaXRoUnVsZXNUaXA6ICJNb3N0cmFyIMOtY29uZSBzZSBhIGltYWdlbSBjb3JyZXNwb25kZXIgw6BzIHJlZ3JhcywgaWdub3JhbmRvIG8gdGFtYW5obyIsCiAgICAgICAgYWR2YW5jZWRSdWxlczogIlJlZ3JhcyBhdmFuw6dhZGFzIiwKICAgICAgICBhZHZhbmNlZFJ1bGVzVGlwOiAiQ29ycmVzcG9uZGUgw6BzIHJlZ3JhcyBhdmFuw6dhZGFzIiwKICAgICAgICB0cFJ1bGVzOiAiUmVncmFzIGNvbSBjdXJpbmdhIiwKICAgICAgICB0cFJ1bGVzVGlwOiAiQ29ycmVzcG9uZGUgw6BzIHJlZ3JhcyBjb20gY3VyaW5nYSIsCiAgICAgICAgc2NhbGVSdWxlczogIkFtcGxpYWRvIiwKICAgICAgICBzY2FsZVJ1bGVzVGlwOiAiSW1hZ2VtIGVuY29udHJhZGEgYXV0b21hdGljYW1lbnRlLCBtYXMgYW1wbGlhZGEiLAogICAgICAgIG5vU2NhbGVSdWxlczogIlNlbSBhbXBsaWHDp8OjbyIsCiAgICAgICAgbm9TY2FsZVJ1bGVzVGlwOiAiSW1hZ2VtIGVuY29udHJhZGEgYXV0b21hdGljYW1lbnRlLCBzZW0gYW1wbGlhw6fDo28iLAogICAgICAgIHNtYWxsUnVsZXM6ICJUYW1hbmhvIHBlcXVlbm8iLAogICAgICAgIHNtYWxsUnVsZXNUaXA6ICJJbWFnZW0gcGVxdWVuYSwgY29tIGFsdHVyYSBlIGxhcmd1cmEgbWVub3JlcyBxdWUgI3QjIHBpeGVscyIsCiAgICAgICAgbG9ja1NpemVUaXA6ICJCbG9xdWVhciB0YW1hbmhvIG3DoXhpbW8iLAogICAgICAgIGNvbW1hbmQ6ICJDb21hbmRvcyIsCiAgICAgICAgY29tbWFuZFRpcDogIk1lbnUgZGUgY29tYW5kb3MiLAogICAgICAgIG9ubGluZUVkaXQ6ICJFZGl0YXIgb25saW5lIiwKICAgICAgICBvbmxpbmVFZGl0VGlwOiAiRWRpdGUgZXN0YSBpbWFnZW0gb25saW5lIHVzYW5kbyAjdCMiLAogICAgICAgIG9wZW5Jbk5ld1dpbmRvdzogIkFicmlyIGVtIG5vdmEgamFuZWxhIiwKICAgICAgICBvcGVuSW5OZXdXaW5kb3dUaXA6ICJBYnJpciBpbWFnZW0gZW0gbm92YSBqYW5lbGEiLAogICAgICAgIGZpbmRJblBhZ2U6ICJMb2NhbGl6YXIgbmEgcMOhZ2luYSIsCiAgICAgICAgZmluZEluUGFnZVRpcDogIlJvbGFyIGF0w6kgYSBpbWFnZW0gYXR1YWwgbmEgcMOhZ2luYSIsCiAgICAgICAgdmlld0NvbGxlY3Rpb246ICJWZXIgY29sZcOnw6NvIiwKICAgICAgICB2aWV3Q29sbGVjdGlvblRpcDogIlZlciB0b2RhcyBhcyBpbWFnZW5zIGRhIGNvbGXDp8OjbyIsCiAgICAgICAgaW5Db2xsZWN0aW9uOiAiTsOjbyBwb2RlIHNlciB1c2FkbyBubyBtb2RvIENvbGXDp8OjbyIsCiAgICAgICAgY2FudEZpbmQ6ICJBIGltYWdlbSBuw6NvIGZvaSBlbmNvbnRyYWRhIG5vIGRvY3VtZW50byBvdSBlc3TDoSBvY3VsdGEhIiwKICAgICAgICBleHBvcnRJbWFnZXM6ICJFeHBvcnRhciB0b2RhcyBhcyBpbWFnZW5zIiwKICAgICAgICBleHBvcnRJbWFnZXNUaXA6ICJFeHBvcnRhciB0b2RhcyBhcyBpbWFnZW5zIGFtcGxpYWRhcyBwYXJhIHVtYSBub3ZhIGphbmVsYSIsCiAgICAgICAgZG93bmxvYWRJbWFnZTogIkJhaXhhciB0b2RhcyBhcyBpbWFnZW5zIGV4aWJpZGFzIiwKICAgICAgICBkb3dubG9hZEltYWdlVGlwOiAiQmFpeGFyIGFzIGltYWdlbnMgcXVlIGVzdMOjbyBzZW5kbyBleGliaWRhcyIsCiAgICAgICAgY29weUltYWdlc1VybDogIkNvcGlhciBVUkxzIGRlIHRvZGFzIGFzIGltYWdlbnMiLAogICAgICAgIGNvcHlJbWFnZXNVcmxUaXA6ICJDb3BpYXIgYXMgVVJMcyBkZSB0b2RhcyBhcyBpbWFnZW5zIGFtcGxpYWRhcyIsCiAgICAgICAgY29weVN1Y2Nlc3M6ICIjdCMgVVJMcyBjb3BpYWRhcyBjb20gc3VjZXNzbyIsCiAgICAgICAgYXV0b1JlZnJlc2g6ICJBdHVhbGl6YXIgcMOhZ2luYSBhdXRvbWF0aWNhbWVudGUiLAogICAgICAgIGF1dG9SZWZyZXNoVGlwOiAiQXR1YWxpemFyIGEgcMOhZ2luYSBhbyBjaGVnYXIgYW8gZmltLCBwYXJhIHF1ZSBub3ZhcyBpbWFnZW5zIHNlamFtIGNhcnJlZ2FkYXMiLAogICAgICAgIGVudGVyRnVsbHNjOiAiVGVsYSBjaGVpYSIsCiAgICAgICAgZXhpdEZ1bGxzYzogIlNhaXIgZGEgdGVsYSBjaGVpYSIsCiAgICAgICAgY29uZmlnOiAiQ29uZmlndXJhw6fDtWVzIiwKICAgICAgICBvcGVuQ29uZmlnOiAiQWJyaXIgY29uZmlndXJhw6fDtWVzIiwKICAgICAgICBydWxlUmVxdWVzdDogIlNvbGljaXRhciByZWdyYSIsCiAgICAgICAgY2xvc2VHYWxsZXJ5OiAiRmVjaGFyIGdhbGVyaWEiLAogICAgICAgIHJldHVyblRvR2FsbGVyeTogIlZvbHRhciBwYXJhIGEgR2FsZXJpYSIsCiAgICAgICAgcGljSW5mbzogIkNsaXF1ZSBwYXJhIGVkaXRhciIsCiAgICAgICAgcGljTm90ZTogIkFub3Rhw6fDo28gZGEgaW1hZ2VtIiwKICAgICAgICB1cmxGaWx0ZXI6ICJGaWx0cm8gZGUgVVJMIiwKICAgICAgICB1cmxGaWx0ZXJUaXA6ICJJbnNpcmEgcGFsYXZyYXMtY2hhdmUgb3UgUmVnZXhwIHBhcmEgZmlsdHJhciBVUkxzIiwKICAgICAgICByZXNvbHV0aW9uOiAiUmVzb2x1w6fDo28iLAogICAgICAgIHBpY051bTogIk7Dum1lcm8gZGUgaW1hZ2VucyIsCiAgICAgICAgcGljVGlwczogIlVzZSBhIHRlY2xhIENUUkwgcGFyYSB2ZXIgYXMgaW1hZ2VucyIsCiAgICAgICAgc2F2ZVBhZ2VUaXBzOiAiU2FsdmUgYSBww6FnaW5hIHBhcmEgYmFpeGFyIHRvZGFzIGFzIGltYWdlbnMiLAogICAgICAgIHNjYWxlUmF0aW86ICJQcm9wb3LDp8OjbyBkZSBlc2NhbGEiLAogICAgICAgIHNpbWlsYXJJbWFnZTogIkJ1c2NhbmRvIGltYWdlbnMgc2ltaWxhcmVzIiwKICAgICAgICBzY2FsZTogIlpvb20iLAogICAgICAgIGhvcml6b250YWxGbGlwOiAiRXNwZWxoYXIgaG9yaXpvbnRhbG1lbnRlIiwKICAgICAgICB2ZXJ0aWNhbEZsaXA6ICJFc3BlbGhhciB2ZXJ0aWNhbG1lbnRlIiwKICAgICAgICBhY3R1YWxCdG46ICJPcmlnaW5hbCAoQSkiLAogICAgICAgIHNlYXJjaEJ0bjogIkJ1c2NhciBvcmlnaW5hbCAoUykiLAogICAgICAgIGdhbGxlcnlCdG46ICJHYWxlcmlhIChHKSIsCiAgICAgICAgY3VycmVudEJ0bjogIkF0dWFsIChDKSIsCiAgICAgICAgbWFnbmlmaWVyQnRuOiAiTHVwYSAvIFpvb20gKE0pIiwKICAgICAgICBwaWNUaXRsZTogIlTDrXR1bG8gZGEgaW1hZ2VtIiwKICAgICAgICBleHBvcnRJbWFnZXNVcmw6ICJFeHBvcnRhciBVUkwgZGEgaW1hZ2VtIiwKICAgICAgICBleHBvcnRJbWFnZXNVcmxQb3A6ICJDdHJsK0MgcGFyYSBjb3BpYXIgVVJMIGRhIGltYWdlbSIsCiAgICAgICAgYmVnaW5TZWFyY2hJbWc6ICIjdCMgQnVzY2FuZG8gaW1hZ2VucyBzaW1pbGFyZXMuLi4iLAogICAgICAgIGZpbmROb1BpYzogIkltYWdlbSBvcmlnaW5hbCBuw6NvIGVuY29udHJhZGEiLAogICAgICAgIGZpbmRPdmVyQmVnaW5Mb2FkOiAiQnVzY2EgY29uY2x1w61kYSwgI3QjIGltYWdlbnMgZW5jb250cmFkYXMuIENhcnJlZ2FuZG8gYSBwcmltZWlyYS4uLiIsCiAgICAgICAgbG9hZE5leHRTaW1pbGFyOiAiRXJybyBhbyBjYXJyZWdhciBhIGltYWdlbSBvcmlnaW5hbCwgdGVudGFuZG8gY2FycmVnYXIgbyBwcsOzeGltbyByZXN1bHRhZG8uLi4iLAogICAgICAgIGxvYWRFcnJvcjogIkZhbGhhIGFvIGNhcnJlZ2FyIiwKICAgICAgICBvcGVuSG9tZVBhZ2U6ICJBYnJpciBww6FnaW5hIGluaWNpYWwiLAogICAgICAgIHBvc2l0aW9uOiAiUG9zacOnw6NvIiwKICAgICAgICBwb3NpdGlvblRpcHM6ICJQcmVzc2lvbmUgQUxUIHBhcmEgb2N1bHRhciIsCiAgICAgICAgdG9wTGVmdDogIkNhbnRvIHN1cGVyaW9yIGVzcXVlcmRvIGRhIGltYWdlbSIsCiAgICAgICAgdG9wUmlnaHQ6ICJDYW50byBzdXBlcmlvciBkaXJlaXRvIGRhIGltYWdlbSIsCiAgICAgICAgYm90dG9tUmlnaHQ6ICJDYW50byBpbmZlcmlvciBkaXJlaXRvIGRhIGltYWdlbSIsCiAgICAgICAgYm90dG9tTGVmdDogIkNhbnRvIGluZmVyaW9yIGVzcXVlcmRvIGRhIGltYWdlbSIsCiAgICAgICAgdG9wQ2VudGVyOiAiQW8gbGFkbyBkYSBpbWFnZW0iLAogICAgICAgIGJvdHRvbUNlbnRlcjogIkFiYWl4byBkYSBpbWFnZW0iLAogICAgICAgIGZsb2F0QmFyOiAiQmFycmEgZGUgZmVycmFtZW50YXMgZmx1dHVhbnRlIiwKICAgICAgICBwcmV2aWV3Rm9sbG93TW91c2U6ICJNb3N0cmFyIHZpc3VhbGl6YcOnw6NvIGFvIGxhZG8gZG8gbW91c2UiLAogICAgICAgIHNob3dEZWxheTogIkF0cmFzbyBwYXJhIGV4aWJpciIsCiAgICAgICAgbXM6ICJtcyIsCiAgICAgICAgaGlkZTogIk9jdWx0YXIiLAogICAgICAgIGhpZGVEZWxheTogIkF0cmFzbyBwYXJhIG9jdWx0YXIiLAogICAgICAgIGZvcmNlU2hvdzogIk1vc3RyYXIgYmFycmEgZGUgZmVycmFtZW50YXMgc29icmUgaW1hZ2VucyBuw6NvIGFtcGxpYWRhcyBtYWlvcmVzIHF1ZToiLAogICAgICAgIGZvcmNlU2hvd1RpcDogIkV4aWJpciBhIGJhcnJhIGRlIGZlcnJhbWVudGFzIGZsdXR1YW50ZSBxdWFuZG8gbyB0YW1hbmhvIGRhIGltYWdlbSBvcmlnaW5hbCBleGNlZGVyIG8gdmFsb3IgZGVmaW5pZG8gYWJhaXhvIiwKICAgICAgICBzaXplTGltaXRPcjogIkFmZXRhZG8gYXBlbmFzIHBlbGEgYWx0dXJhIE9VIGxhcmd1cmEiLAogICAgICAgIHB4OiAicHgiLAogICAgICAgIG1pblNpemVMaW1pdDogIk1vc3RyYXIgYmFycmEgZW0gaW1hZ2VucyBhbXBsaWFkYXMgbWFpb3JlcyBxdWU6IiwKICAgICAgICBtaW5TaXplTGltaXRUaXA6ICJBcMOzcyBvIHpvb20sIGEgYmFycmEgZmx1dHVhbnRlIHNlcsOhIGV4aWJpZGEgc2UgYSBpbWFnZW0gZm9yIG1haW9yIHF1ZSBvIHZhbG9yIGRlZmluaWRvLiIsCiAgICAgICAgZGVmYXVsdFNpemVMaW1pdDogIkxpbWl0ZSBkZSB0YW1hbmhvIHBhZHLDo28gbmEgZ2FsZXJpYSIsCiAgICAgICAgbGlzdGVuQmc6ICJEZXRlY3RhbmRvIGltYWdlbSBkZSBmdW5kbyIsCiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAiQ29yIGRlIGZ1bmRvIiwKICAgICAgICBsaXN0ZW5CZ1RpcDogIk1vc3RyYXIgYmFycmEgZW0gZWxlbWVudG9zIGNvbSBpbWFnZW0gZGUgZnVuZG8iLAogICAgICAgIGJ1dG9uT3JkZXI6ICJPcmRlbSBkb3Mgw61jb25lcyBuYSBiYXJyYSIsCiAgICAgICAga2V5c0VuYWJsZTogIkF0aXZhciB0ZWNsYXMgZGUgYXRhbGhvIiwKICAgICAgICBrZXlzQWN0dWFsOiAiQWJyaXIgaW1hZ2VtIGFtcGxpYWRhIiwKICAgICAgICBrZXlzQWN0dWFsVGlwOiAiUHJlc3Npb25lIHBhcmEgYWJyaXIgYSBpbWFnZW0gYW1wbGlhZGEgcXVhbmRvIGEgYmFycmEgZmx1dHVhbnRlIGFwYXJlY2VyIiwKICAgICAgICBrZXlzU2VhcmNoOiAiQnVzY2FyIGltYWdlbSBvcmlnaW5hbCIsCiAgICAgICAga2V5c1NlYXJjaFRpcDogIlByZXNzaW9uZSBwYXJhIGJ1c2NhciBhIGltYWdlbSBvcmlnaW5hbCBxdWFuZG8gYSBiYXJyYSBmbHV0dWFudGUgYXBhcmVjZXIiLAogICAgICAgIGhlYWRTZWFyY2hUaXA6ICJQZXNxdWlzYXIgcG9yIGltYWdlbSIsCiAgICAgICAgaGVhZFNlYXJjaEFsbDogIlBlc3F1aXNhciB0dWRvIiwKICAgICAgICBrZXlzQ3VycmVudDogIkFicmlyIGltYWdlbSBhdHVhbCIsCiAgICAgICAga2V5c0N1cnJlbnRUaXA6ICJQcmVzc2lvbmUgcGFyYSBhYnJpciBhIGltYWdlbSBhdHVhbCBxdWFuZG8gYSBiYXJyYSBmbHV0dWFudGUgYXBhcmVjZXIiLAogICAgICAgIGtleXNNYWduaWZpZXI6ICJBYnJpciBsdXBhIiwKICAgICAgICBrZXlzTWFnbmlmaWVyVGlwOiAiUHJlc3Npb25lIHBhcmEgYWJyaXIgYSBsdXBhIHF1YW5kbyBhIGJhcnJhIGZsdXR1YW50ZSBhcGFyZWNlciIsCiAgICAgICAga2V5c0dhbGxlcnk6ICJBYnJpciBHYWxlcmlhIChUZWNsYXMgZGUgYXRhbGhvKSIsCiAgICAgICAga2V5c0dhbGxlcnlUaXA6ICJQcmVzc2lvbmUgcGFyYSBhYnJpciBhIEdhbGVyaWEgcXVhbmRvIGEgYmFycmEgZmx1dHVhbnRlIGFwYXJlY2VyIiwKICAgICAgICBvcGVuR2FsbGVyeTogIkFicmlyIGdhbGVyaWEiLAogICAgICAgIG1hZ25pZmllcjogIkx1cGEiLAogICAgICAgIG1hZ25pZmllclJhZGl1czogIlJhaW8gcGFkcsOjbyIsCiAgICAgICAgbWFnbmlmaWVyV2hlZWxab29tRW5hYmxlZDogIkhhYmlsaXRhciB6b29tIGNvbSBhIHJvZGEgZG8gbW91c2UiLAogICAgICAgIG1hZ25pZmllcldoZWVsWm9vbVJhbmdlOiAiRmF0b3IgZGUgem9vbSBkYSBsdXBhIiwKICAgICAgICBtYWduaWZpZXJTY2FsZUltYWdlOiAiQW1wbGlhciBpbWFnZW0gY29tIGEgcm9kYSBkbyBtb3VzZSIsCiAgICAgICAgZ2FsbGVyeTogIkdhbGVyaWEiLAogICAgICAgIGdhbGxlcnlGaXRUb1NjcmVlbjogIkFqdXN0YXIgaW1hZ2VtIMOgIHRlbGEiLAogICAgICAgIGdhbGxlcnlGaXRUb1NjcmVlblNtYWxsOiAiQWp1c3RhciB0YW1iw6ltIGltYWdlbnMgcGVxdWVuYXMiLAogICAgICAgIGdhbGxlcnlGaXRUb1NjcmVlblRpcDogIkFkYXB0YXIgcGFyYSBjYWJlciBuYSB0ZWxhLCBuw6NvIGNvYnJpciIsCiAgICAgICAgZ2FsbGVyeVNjcm9sbEVuZFRvQ2hhbmdlOiAiVHJvY2FyIGltYWdlbSBhbyByb2xhciBhdMOpIG8gZmltIiwKICAgICAgICBnYWxsZXJ5U2Nyb2xsRW5kVG9DaGFuZ2VUaXA6ICJWw6FsaWRvIGFww7NzIGRlc21hcmNhciBhIG9ww6fDo28gYW50ZXJpb3IiLAogICAgICAgIGdhbGxlcnlFeHBvcnRUeXBlOiAiQ2xhc3NpZmljYcOnw6NvIHBhZHLDo28gYW8gZXhwb3J0YXIgaW1hZ2VucyIsCiAgICAgICAgZ3JpZDogIk1vc2FpY28iLAogICAgICAgIGdyaWRCaWc6ICJPcmlnaW5hbCIsCiAgICAgICAgbGlzdDogIkxpc3RhIiwKICAgICAgICBnYWxsZXJ5QXV0b0xvYWQ6ICJDYXJyZWdhciBpbWFnZW5zIGF1dG9tYXRpY2FtZW50ZSIsCiAgICAgICAgZ2FsbGVyeUxvYWRBbGw6ICJQcm9jZXNzYXIgdG9kYXMgYXMgcMOhZ2luYXMgYXV0b21hdGljYW1lbnRlIiwKICAgICAgICBnYWxsZXJ5TG9hZEFsbFRpcDogIkF0ZW7Dp8OjbzogQ2FycmVnYXIgbXVpdGFzIHDDoWdpbmFzIHBvZGUgYWZldGFyIG8gZGVzZW1wZW5obyIsCiAgICAgICAgZ2FsbGVyeURvd25sb2FkV2l0aFppcDogIkNvbXBhY3RhciBwYXJhIFpJUCBhbyBiYWl4YXIgdHVkbyIsCiAgICAgICAgZ2FsbGVyeURvd25sb2FkV2l0aFppcEFsZXJ0OiAiQ29tcGFjdGFuZG8sIGFndWFyZGUuLi4iLAogICAgICAgIGdhbGxlcnlTY2FsZVNtYWxsU2l6ZTE6ICJJbWFnZW5zIG1lbm9yZXMgcXVlIiwKICAgICAgICBnYWxsZXJ5U2NhbGVTbWFsbFNpemUyOiAiU2Vyw6NvIGFncnVwYWRhcyIsCiAgICAgICAgZ2FsbGVyeVNob3dTbWFsbFNpemU6ICJNb3N0cmFyIGltYWdlbnMgZGUgdGFtYW5obyBwZXF1ZW5vIHBvciBwYWRyw6NvIiwKICAgICAgICBnYWxsZXJ5VHJhbnNpdGlvbjogIkVmZWl0b3MgZGUgdHJhbnNpw6fDo28gbmEgZ2FsZXJpYSIsCiAgICAgICAgZ2FsbGVyeVNpZGViYXJQb3NpdGlvbjogIlBvc2nDp8OjbyBkYSBiYXJyYSBsYXRlcmFsIiwKICAgICAgICBib3R0b206ICJJbmZlcmlvciIsCiAgICAgICAgcmlnaHQ6ICJEaXJlaXRhIiwKICAgICAgICBsZWZ0OiAiRXNxdWVyZGEiLAogICAgICAgIHRvcDogIlN1cGVyaW9yIiwKICAgICAgICBnYWxsZXJ5U2lkZWJhclNpemU6ICJUYW1hbmhvIGRhIGJhcnJhIGxhdGVyYWwiLAogICAgICAgIGdhbGxlcnlTaWRlYmFyU2l6ZVRpcDogIkFsdHVyYSAoc2UgaG9yaXpvbnRhbCkgb3UgbGFyZ3VyYSAoc2UgdmVydGljYWwpIGRhIGJhcnJhIGxhdGVyYWwiLAogICAgICAgIGdhbGxlcnlNYXgxOiAiTcOheGltbyBkZSBpbWFnZW5zIGVtIGNhY2hlIiwKICAgICAgICBnYWxsZXJ5TWF4MjogIkltYWdlbnMgKGFudGVzIGUgZGVwb2lzKSIsCiAgICAgICAgZ2FsbGVyeUF1dG9ab29tOiAiWm9vbSB2b2x0YSBwYXJhIDEwMCUgKGFwZW5hcyBDaHJvbWUpIiwKICAgICAgICBnYWxsZXJ5QXV0b1pvb21UaXA6ICJBbyBhbXBsaWFyLCBvIHpvb20gZGEgaW1hZ2VtIGUgZGEgYmFycmEgbGF0ZXJhbCB2b2x0YSBwYXJhIDEwMCUsIGF1bWVudGFuZG8gYSDDoXJlYSB2aXPDrXZlbCAoYXBlbmFzIG5vIENocm9tZSkiLAogICAgICAgIGdhbGxlcnlEZXNjcmlwdGlvbkxlbmd0aDE6ICJMaW1pdGUgZGUgY2FyYWN0ZXJlcyBkYSBhbm90YcOnw6NvOiIsCiAgICAgICAgZ2FsbGVyeURlc2NyaXB0aW9uTGVuZ3RoMjogIkNhcmFjdGVyZXMiLAogICAgICAgIGdhbGxlcnlBdXRvT3BlblNpdGVzOiAiRXhwcmVzc8O1ZXMgcmVndWxhcmVzIHBhcmEgYWJyaXIgYSBnYWxlcmlhIGF1dG9tYXRpY2FtZW50ZSwgdW1hIHBvciBsaW5oYSwgaW5pY2llIGNvbSBAIHBhcmEgJ1ZlciBtYWlzJyIsCiAgICAgICAgZGlzYWJsZUtleVNpdGVzOiAiUmVndWxhcmVzIGRlIFVSTHMgcGFyYSBkZXNhYmlsaXRhciB0ZWNsYXMgZGUgYXRhbGhvLCB1bWEgcG9yIGxpbmhhIiwKICAgICAgICBhdXRvT3BlblZpZXdtb3JlOiAiQWJyaXIgJ1ZlciBtYWlzJyBhdXRvbWF0aWNhbWVudGUgbmEgZ2FsZXJpYSIsCiAgICAgICAgZ2FsbGVyeVNlYXJjaERhdGE6ICJSZWdyYXMgZGUgYnVzY2EgZG8gc2l0ZSwgZGVpeGUgZW0gYnJhbmNvIHBhcmEgcmVkZWZpbmlyIiwKICAgICAgICBnYWxsZXJ5RWRpdFNpdGU6ICJFZGl0b3Igb25saW5lIiwKICAgICAgICBpbWdXaW5kb3c6ICJWaXN1YWxpemFkb3IgZGUgSW1hZ2VtIiwKICAgICAgICBpbWdXaW5kb3dGaXRUb1NjcmVlbjogIkFqdXN0YXIgw6AgdGVsYSIsCiAgICAgICAgaW1nV2luZG93Rml0VG9TY3JlZW5UaXA6ICJBanVzdGFyIHBhcmEgY2FiZXIsIG7Do28gY29icmlyIiwKICAgICAgICBpbWdXaW5kb3dGaXRUb1NjcmVlbldoZW5TbWFsbDogIkFqdXN0YXIgw6AgdGVsYSBtZXNtbyBzZSBwZXF1ZW5hIiwKICAgICAgICBpbWdXaW5kb3dEZWZhdWx0VG9vbDogIkZlcnJhbWVudGEgcGFkcsOjbyBhbyBhYnJpciIsCiAgICAgICAgaGFuZDogIk3Do28iLAogICAgICAgIHJvdGF0ZTogIkdpcmFyIiwKICAgICAgICB6b29tOiAiWm9vbSIsCiAgICAgICAgaW1nV2luZG93RXNjS2V5OiAiRXNjIHBhcmEgZmVjaGFyIiwKICAgICAgICBpbWdXaW5kb3dEYmxDbGlja0ltZ1dpbmRvdzogIkNsaXF1ZSBkdXBsbyBwYXJhIGZlY2hhciIsCiAgICAgICAgaW1nV2luZG93Q2xpY2tPdXRzaWRlOiAiQ2xpcXVlIGZvcmEgcGFyYSBmZWNoYXIiLAogICAgICAgIGltZ1dpbmRvd0NsaWNrT3V0c2lkZVRpcDogIkF0aXZvIGFwZW5hcyBjb20gYSBzb2JyZXBvc2nDp8OjbyB2aXPDrXZlbCIsCiAgICAgICAgbm9uZTogIk5lbmh1bSIsCiAgICAgICAgY2xpY2s6ICJDbGlxdWUiLAogICAgICAgIGRibGNsaWNrOiAiQ2xpcXVlIGR1cGxvIiwKICAgICAgICBpbWdXaW5kb3dPdmVybGF5ZXJTaG93bjogIlNvYnJlcG9zacOnw6NvIiwKICAgICAgICBpbWdXaW5kb3dPdmVybGF5ZXJDb2xvcjogIkNvciBlIG9wYWNpZGFkZSIsCiAgICAgICAgaW1nV2luZG93U2hpZnRSb3RhdGVTdGVwMTogIkdpcmFyIGNvbSBTaGlmdCBwcmVzc2lvbmFkbyBhIGNhZGEiLAogICAgICAgIGltZ1dpbmRvd1NoaWZ0Um90YXRlU3RlcDI6ICJHcmF1cyIsCiAgICAgICAgaW1nV2luZG93TW91c2VXaGVlbFpvb206ICJab29tIGNvbSBhIHJvZGEgZG8gbW91c2UiLAogICAgICAgIGltZ1dpbmRvd1pvb21SYW5nZTogIkludGVydmFsbyBkZSB6b29tIiwKICAgICAgICBpbWdXaW5kb3dab29tUmFuZ2VUaXA6ICJGYXRvciBkZSB6b29tIChkZXZlIHNlciBwb3NpdGl2bykiLAogICAgICAgIG90aGVyczogIk91dHJvcyIsCiAgICAgICAgd2FpdEltZ0xvYWQ6ICJBZ3VhcmRhciBjYXJyZWdhbWVudG8gYW50ZXMgZGUgYXBsaWNhciB6b29tIGUgb3V0cmFzIG9wZXJhw6fDtWVzIiwKICAgICAgICB3YWl0SW1nTG9hZFRpcDogIlByZXNzaW9uZSBDdHJsIHBhcmEgaWdub3JhciIsCiAgICAgICAgZGVidWc6ICJNb2RvIGRlIGRlcHVyYcOnw6NvIiwKICAgICAgICBjdXN0b21SdWxlczogIlJlZ3JhcyBwZXJzb25hbGl6YWRhcyBwYXJhIGltYWdlbnMgZ3JhbmRlcyIsCiAgICAgICAgZmlyc3RFbmdpbmU6ICJNZWNhbmlzbW8gZGUgYnVzY2EgcHJpbmNpcGFsIiwKICAgICAgICByZWZyZXNoV2hlbkVycm9yOiAiRXJybyBhbyBjYXJyZWdhciwgY2xpcXVlIHBhcmEgdGVudGFyIG5vdmFtZW50ZSIsCiAgICAgICAgc3dpdGNoU2xpZGU6ICJBbHRlcm5hciBiYXJyYSBsYXRlcmFsIiwKICAgICAgICB2aWV3bW9yZTogIlZlciBtYWlzIiwKICAgICAgICBjb3VudERvd246ICJDb250YWdlbSByZWdyZXNzaXZhIiwKICAgICAgICBjdXN0b21MYW5nOiAiSWRpb21hIHBlcnNvbmFsaXphZG8iLAogICAgICAgIGRlZmF1bHRMYW5nOiAiRGV0ZWN0YXIgYXV0b21hdGljYW1lbnRlIiwKICAgICAgICBoaWRlSWNvbjogIk9jdWx0YXIgw61jb25lIiwKICAgICAgICBpbml0U2hvdzogIkludmVydGVyIGF0YWxobyBwYXJhIG1vc3RyYXIgYSB2aXN1YWxpemHDp8OjbyBwb3IgcGFkcsOjbyIsCiAgICAgICAgc3RheU91dDogIk1hbnRlciBhIGJhcnJhIGZvcmEgZGEgaW1hZ2VtIiwKICAgICAgICBnYWxsZXJ5RG93bmxvYWRHYXA6ICJJbnRlcnZhbG8gZW50cmUgZG93bmxvYWRzIiwKICAgICAgICBmb3JtYXRDb252ZXJzaW9uOiAiQ29udmVydGVyIGZvcm1hdG8gYW8gYmFpeGFyLiBVbWEgcmVncmEgcG9yIGxpbmhhIiwKICAgICAgICBnYWxsZXJ5RGlzYWJsZUFycm93OiAiRGVzYXRpdmFyIHNldGFzIGRvIHRlY2xhZG8iLAogICAgICAgIHBvc2l0aW9uRml4ZWQ6ICJQb3Npw6fDo28gZml4YSIsCiAgICAgICAgc3dpdGNoU3RvcmVMb2M6ICJNYW50ZXIgcG9zacOnw6NvIGFvIHRyb2NhciBkZSBhYmEiCiAgICB9Cn0sCnsKICAgIG5hbWU6ICJQb3J0dWd1w6pzIiwKICAgIG1hdGNoOiBbInB0Il0sCiAgICBsYW5nOiB7CiAgICAgICAgLy9Qb3J0dWd1w6pzIHBvciBBc3Ryb0NvZWxlc3Rpcy4KICAgICAgICBzYXZlQnRuOiAiU2FsdmFyIiwKICAgICAgICBzYXZlTmFtZTogIk5vbWUgYW8gc2FsdmFyIiwKICAgICAgICBzYXZlTmFtZVRpcDogIkNvbW8gc2Vyw6EgZGVmaW5pZG8gbyBub21lIGRvIGFycXVpdm8gZGEgaW1hZ2VtIGFvIHNhbHZhLWxhIiwKICAgICAgICBzYXZlTmFtZUFkZFRpdGxlOiAiQWRpY2lvbmUgbyB0w610dWxvIGRhIHDDoWdpbmEgYW8gZ3VhcmRhciIsCiAgICAgICAgc2l6ZTogInRhbWFuaG8iLAogICAgICAgIGFsbDogInR1ZG8iLAogICAgICAgIGJpZ1NpemU6ICJ0YW1hbmhvIGdyYW5kZSIsCiAgICAgICAgaWNvblNpemU6ICLDrWNvbmUiLAogICAgICAgIGFyaWEySG9zdDogIlNlcnZpZG9yIGFyaWEyIiwKICAgICAgICBhcmlhMlRva2VuOiAiVG9rZW4gYXJpYTIiLAogICAgICAgIHBvc3QyQXJpYTI6ICJQb3N0YXIgZW0gYXJpYTIiLAogICAgICAgIGRlZmF1bHQ6ICJQYWRyw6NvIiwKICAgICAgICB0ZXh0Rmlyc3Q6ICJJbmZvcm1hw6fDtWVzIHByaW1laXJvIHNlIGV4aXN0aXJlbSIsCiAgICAgICAgb25seVVybDogIkFwZW5hcyBvIFVSTCIsCiAgICAgICAgdXJsQW5kVGV4dDogIlVSTCArIEluZm9ybWHDp8O1ZXMiLAogICAgICAgIGRvd25sb2FkOiAiQmFpeGFyIiwKICAgICAgICBzYXZlQnRuVGlwczogIlRhbHZleiB2b2PDqiBwcmVjaXNlIGF0dWFsaXphciBhIHDDoWdpbmEgcGFyYSBxdWUgYWxndW1hIG9ww6fDtWVzIGVudHJlbSBlbSB2aWdvciIsCiAgICAgICAgYWRkaXRpb25hbEZlYXR1cmU6ICJSZWN1cnNvcyBhZGljaW9uYWlzLCBlbnRyYW0gZW0gdmlnb3IgcXVhbmRvIGFsdCDDqSBwcmVzc2lvbmFkbyIsCiAgICAgICAgaW52ZXJ0QWRkaXRpb25hbEZlYXR1cmU6ICJJbnZlcnRlciB0ZWNsYXMgZGUgYXRhbGhvLCB1c2FyIHJlY3Vyc29zIGFkaWNpb25haXMgcG9yIHBhZHLDo28iLAogICAgICAgIGNvcHk6ICJDb3BpYXIgbGluayIsCiAgICAgICAgY29weUltZzogIkNvcGlhciBkYWRvcyBkYSBpbWFnZW0iLAogICAgICAgIG9wZW5Jbk5ld1RhYjogIkFicmlyIGVtIG5vdmEgYWJhIiwKICAgICAgICBjbG9zZUJ0bjogIkNhbmNlbGFyIiwKICAgICAgICBpbnZlcnRCdG46ICJJbnZlcnRlciIsCiAgICAgICAgY29tcGFyZUJ0bjogIkNvbXBhcmFyIiwKICAgICAgICBzZWxlY3RBbGxCdG46ICJTZWxlY2lvbmUgdHVkbyIsCiAgICAgICAgY2xvc2VCdG5UaXBzOiAiRGVzY2FydGEgYXMgYWx0ZXJhw6fDtWVzIGUgcmVzdGF1cmEgYXMgY29uZmlndXJhw6fDtWVzIGFudGVyaW9yZXMiLAogICAgICAgIHJlc2V0TGluazogIlJlc3RhdXJhciBkZWZpbmnDp8O1ZXMgb3JpZ2luYWlzIiwKICAgICAgICByZXNldExpbmtUaXBzOiAiRGVzY2FydGEgYXMgYWx0ZXJhw6fDtWVzIGUgcmVzdGF1cmEgdG9kYXMgYXMgY29uZmlndXJhw6fDtWVzIG9yaWdpbmFpcyIsCiAgICAgICAgc2hhcmU6ICJDb21wYXJ0aWxoYXIiLAogICAgICAgIHN1aXRMb25nSW1nOiAiQWRhcHRhciBpbWFnZW5zIGxvbmdhcyBuYSBqYW5lbGEgZGUgcm9sYWdlbSIsCiAgICAgICAgZ2xvYmFsa2V5czogIkF0YWxobyBwYXJhIGF0aXZhciBhIFByw6ktdmlzdWFsaXphw6fDo28iLAogICAgICAgIGdsb2JhbGtleXNQcmVzczogIlByZXNzaW9uYXIgcGFyYSBhdGl2YXIiLAogICAgICAgIGdsb2JhbGtleXNIb2xkOiAiU2VndXJhciBwYXJhIGF0aXZhciIsCiAgICAgICAgZ2xvYmFsa2V5c1R5cGU6ICJNw6l0b2RvIGRlIGF0aXZhw6fDo28gZGEgUHLDqS12aXN1YWxpemHDp8OjbyIsCiAgICAgICAgY2xvc2VBZnRlclByZXZpZXc6ICJGZWNoYXIgYSBqYW5lbGEgZGEgaW1hZ2VtIGFww7NzIGEgUHLDqS12aXN1YWxpemHDp8OjbyIsCiAgICAgICAgcHJldmlld01heFNpemU6ICJUYW1hbmhvIG3DoXhpbW8gZGEgamFuZWxhIGRlIHZpc3VhbGl6YcOnw6NvIiwKICAgICAgICBwcmV2aWV3TWF4U2l6ZVRpcDogIlF1YW5kbyBhIGphbmVsYSBkZSB2aXN1YWxpemHDp8OjbyBmb3IgbWFpb3IgcXVlIG8gdGFtYW5obyBkZWZpbmlkbywgZGltZW5zaW9uZSBhIGphbmVsYSBkZSB2aXN1YWxpemHDp8Ojby4gMCBlc3TDoSBkZXNhYmlsaXRhZG8iLAogICAgICAgIGxvYWRBbGw6ICJDYXJyZWdhciBtYWlzIHDDoWdpbmFzIiwKICAgICAgICBsb2FkZWRBbGw6ICJDYXJyZWdhbWVudG8gY29uY2x1w61kbyIsCiAgICAgICAgbG9hZGluZzogIkNhcnJlZ2FuZG8uLi4gIiwKICAgICAgICBsb2FkQWxsVGlwOiAiQ2FycmVnYSBtYWlzIHDDoWdpbmFzIHBhcmEgYWRpY2lvbmFyIG1haXMgaW1hZ2VucyDDoCBnYWxlcmlhIiwKICAgICAgICB2aWV3bW9yZUVuZGxlc3M6ICJSb2xhciBhdMOpIG8gZmluYWwgbm8gbW9kbyBWZXIgTWFpcyBjYXJyZWdhIGF1dG9tYXRpY2FtZW50ZSBhIHByw7N4aW1hIHDDoWdpbmEiLAogICAgICAgIGZpZGRsZTogIk9wZXJhw6fDtWVzIiwKICAgICAgICBmaWRkbGVUaXA6ICJBYnJlIGEgaW1hZ2VtIGF0dWFsIGVtIHVtYSBqYW5lbGEgZmx1dHVhbnRlIHBhcmEgcmVhbGl6YXIgb3BlcmHDp8O1ZXMgY29tcGxleGFzIiwKICAgICAgICBhZGRJbWFnZVVybHM6ICJBZGljaW9uYXIgaW1hZ2VucyIsCiAgICAgICAgYWRkSW1hZ2VVcmxzVGlwczogIkFkaWNpb25lIG1haXMgaW1hZ2VucyDDoCBnYWxlcmlhIHVzYW5kbyBsaW5rcyIsCiAgICAgICAgb3BlbkltYWdlczogIkltYWdlbSBsb2NhbCIsCiAgICAgICAgb3BlbkltYWdlc1RpcHM6ICJDbGlxdWUgcGFyYSBpbXBvcnRhciBpbWFnZW5zIGxvY2FpcyIsCiAgICAgICAgY2xvc2VGaXJzdDogIkZlY2hhciBhIEdhbGVyaWEgZXhpc3RlbnRlIHByaW1laXJvIiwKICAgICAgICBjb2xsZWN0OiAiQ29sZcOnw6NvIiwKICAgICAgICBjb2xsZWN0ZWQ6ICJBZGljaW9uYWRhIMOgIENvbGXDp8OjbyIsCiAgICAgICAgZXhpdENvbGxlY3Rpb246ICJTYWlyIGRhIENvbGXDp8OjbyIsCiAgICAgICAgZXhpdENvbGxlY3Rpb25UaXA6ICJDbGlxdWUgcGFyYSBzYWlyIGRvIG1vZG8gZGUgQ29sZcOnw6NvIiwKICAgICAgICBub0NvbGxlY3Rpb25ZZXQ6ICJOw6NvIGjDoSBpbWFnZW5zIG5hIGNvbGXDp8OjbyIsCiAgICAgICAgY29sbGVjdERldGFpbDogIkRlc2NyacOnw6NvIiwKICAgICAgICBjb2xsZWN0RGV0YWlsVGlwOiAiQWRpY2lvbmUgdW1hIGRlc2NyacOnw6NvIMOgIHN1YSBjb2xlw6fDo28gZGUgaW1hZ2VucyBmYXZvcml0YXMiLAogICAgICAgIHBsYXlTbGlkZTogIkFwcmVzZW50YcOnw6NvIGRlIFNsaWRlcyIsCiAgICAgICAgc2xpZGVHYXA6ICJJbnRlcnZhbG8iLAogICAgICAgIHNsaWRlR2FwVGlwOiAiSW50ZXJ2YWxvIGRlIHRlbXBvLCBlbSBzZWd1bmRvcyIsCiAgICAgICAgc2xpZGVCYWNrOiAiRGUgdHLDoXMgcGFyYSBmcmVudGUiLAogICAgICAgIHNsaWRlQmFja1RpcDogIlJlcHJvZHV6IGEgYXByZXNlbnRhw6fDo28gZGUgU2xpZGVzIGRlIHRyw6FzIHBhcmEgZnJlbnRlIiwKICAgICAgICBzbGlkZVJhbmRvbTogIlJhbmRvbSIsCiAgICAgICAgc2xpZGVXYWl0OiAiQWd1YXJkYXIgYSBsZWl0dXJhIGRhIGltYWdlbSIsCiAgICAgICAgc2xpZGVXYWl0VGlwOiAiQSBjb250YWdlbSByZWdyZXNzaXZhIHPDsyBjb21lw6dhIGRlcG9pcyBxdWUgYSBpbWFnZW0gw6kgdG90YWxtZW50ZSBjYXJyZWdhZGEiLAogICAgICAgIHNsaWRlU2tpcEVycm9yOiAiSWdub3JhciBpbWFnZW5zIGNvbSBlcnJvIiwKICAgICAgICBzbGlkZVNraXBFcnJvclRpcDogIklnbm9yYSBhcyBpbWFnZW5zIHF1ZSBuw6NvIHBvZGVtIHNlciBjYXJyZWdhZGFzIiwKICAgICAgICB0eXBlOiAiQ2F0ZWdvcmlhcyIsCiAgICAgICAgdHlwZVRpcDogIk9yZ2FuaXphIGFzIGltYWdlbnMgcG9yIHJlZ3Jhcy4gQW8gZGVzbWFyY2FyIHVtYSByZWdyYSwgYXMgaW1hZ2VucyBjb3JyZXNwb25kZW50ZXMgZmljYXLDo28gb2N1bHRhcyIsCiAgICAgICAgc2hvd1dpdGhSdWxlczogIkZvcsOnYXIgYSBleGliacOnw6NvIGRhIEJhcnJhIGRlIEZlcnJhbWVudGFzIiwKICAgICAgICBzaG93V2l0aFJ1bGVzVGlwOiAiTW9zdHJhIGEgQmFycmEgZGUgRmVycmFtZW50YXMgc2UgYSBpbWFnZW0gY29ycmVzcG9uZGVyIMOgcyByZWdyYXMsIG7Do28gaW1wb3J0YSBvIHRhbWFuaG8iLAogICAgICAgIGFkdmFuY2VkUnVsZXM6ICJSZWdyYXMgQXZhbsOnYWRhcyIsCiAgICAgICAgYWR2YW5jZWRSdWxlc1RpcDogIkltYWdlbnMgY29tcGF0w612ZWlzIGNvbSBhcyByZWdyYXMgYXZhbsOnYWRhcyIsCiAgICAgICAgdHBSdWxlczogIlJlZ3JhcyBDdXJpbmdhIiwKICAgICAgICB0cFJ1bGVzVGlwOiAiSW1hZ2VucyBjb21wYXTDrXZlaXMgY29tIGFzIHJlZ3JhcyBjdXJpbmdhIiwKICAgICAgICBzY2FsZVJ1bGVzOiAiSW1hZ2VucyBhbXBsaWFkYXMiLAogICAgICAgIHNjYWxlUnVsZXNUaXA6ICJJbWFnZW5zIGF1dG9tYXRpY2FtZW50ZSBjYXJyZWdhZGFzIGUgYW1wbGlhZGFzIiwKICAgICAgICBub1NjYWxlUnVsZXM6ICJJbWFnZW5zIG7Do28gYW1wbGlhZGFzIiwKICAgICAgICBub1NjYWxlUnVsZXNUaXA6ICJJbWFnZW5zIGF1dG9tYXRpY2FtZW50ZSBjYXJyZWdhZGFzLCBtYXMgbsOjbyBhbXBsaWFkYXMiLAogICAgICAgIHNtYWxsUnVsZXM6ICJJbWFnZW5zIHBlcXVlbmFzIiwKICAgICAgICBzbWFsbFJ1bGVzVGlwOiAiSW1hZ2VucyBwZXF1ZW5hcyBjdWpvIHRhbWFuaG8gcmVhbCBkYSBhbHR1cmEgZSBsYXJndXJhIHPDo28gbWVub3JlcyBxdWUgI3QjIHDDrXhlaXMiLAogICAgICAgIGxvY2tTaXplVGlwOiAiQmxvcXVlYXIgdGFtYW5obyBtw6F4aW1vIiwKICAgICAgICBjb21tYW5kOiAiQcOnw7VlcyIsCiAgICAgICAgY29tbWFuZFRpcDogIk1lbnUgZGUgQcOnw7VlcyBkYSBHYWxlcmlhIiwKICAgICAgICBvbmxpbmVFZGl0OiAiRWRpdGFyIGEgaW1hZ2VtIGF0dWFsIiwKICAgICAgICBvbmxpbmVFZGl0VGlwOiAiRWRpdGUgYSBpbWFnZW0gYXR1YWwgdXNhbmRvIG8gc2VydmnDp28gb25saW5lICN0IyIsCiAgICAgICAgb3BlbkluTmV3V2luZG93OiAiQWJyaXIgZW0gbm92YSBqYW5lbGEiLAogICAgICAgIG9wZW5Jbk5ld1dpbmRvd1RpcDogIkFicmUgYSBpbWFnZW0gYXR1YWwgZW0gdW1hIG5vdmEgZ3VpYSIsCiAgICAgICAgZmluZEluUGFnZTogIkxvY2FsaXphciBhIGltYWdlbSBuYSBww6FnaW5hIiwKICAgICAgICBmaW5kSW5QYWdlVGlwOiAiUm9sZSBhIHDDoWdpbmEgYXTDqSBvbmRlIGVzdMOhIGEgaW1hZ2VtIGF0dWFsIiwKICAgICAgICB2aWV3Q29sbGVjdGlvbjogIlZlciBhIGNvbGXDp8OjbyIsCiAgICAgICAgdmlld0NvbGxlY3Rpb25UaXA6ICJWZWphIHRvZGFzIGFzIGltYWdlbnMgYWRpY2lvbmFkYXMgw6Agc3VhIGNvbGXDp8OjbyIsCiAgICAgICAgaW5Db2xsZWN0aW9uOiAiSW1wb3Nzw612ZWwgdXNhciBuYSBDb2xlw6fDo28iLAogICAgICAgIGNhbnRGaW5kOiAiQSBpbWFnZW0gbsOjbyBlc3TDoSBubyBkb2N1bWVudG8gb3UgZXN0w6Egb2N1bHRhIGUgbsOjbyBwb2RlIHNlciBsb2NhbGl6YWRhISIsCiAgICAgICAgZXhwb3J0SW1hZ2VzOiAiRXhwb3J0YXIgdG9kYXMgYXMgaW1hZ2VucyIsCiAgICAgICAgZXhwb3J0SW1hZ2VzVGlwOiAiQWJyZSB0b2RhcyBhcyBpbWFnZW5zIGdyYW5kZXMgZGEgZ2FsZXJpYSBlbSB1bWEgbm92YSBndWlhIiwKICAgICAgICBkb3dubG9hZEltYWdlOiAiQmFpeGFyIHRvZGFzIGFzIGltYWdlbnMiLAogICAgICAgIGRvd25sb2FkSW1hZ2VUaXA6ICJCYWl4YSB0b2RhcyBhcyBpbWFnZW5zIGRhIGdhbGVyaWEgKERJQ0E6IFVzZSBhIG9ww6fDo28gZGUgY29tcGFjdGHDp8OjbyBaSVApIiwKICAgICAgICBjb3B5SW1hZ2VzVXJsOiAiQ29waWFyIG9zIGxpbmtzIGRhcyBpbWFnZW5zIiwKICAgICAgICBjb3B5SW1hZ2VzVXJsVGlwOiAiQ29waWEgb3MgbGlua3MgZGFzIGltYWdlbnMgZGEgR2FsZXJpYSBwYXJhIGEgc3VhIMOhcmVhIGRlIHRyYW5zZmVyw6puY2lhIiwKICAgICAgICBjb3B5U3VjY2VzczogIiN0IyBsaW5rcyBjb3BpYWRvcyBjb20gc3VjZXNzbyEiLAogICAgICAgIGF1dG9SZWZyZXNoOiAiQXV0byBjYXJyZWdhciBhIHDDoWdpbmEiLAogICAgICAgIGF1dG9SZWZyZXNoVGlwOiAiUXVhbmRvIGFzIMO6bHRpbWFzIGltYWdlbnMgZm9yZW0gdmlzdWFsaXphZGFzLCBhIHDDoWdpbmEgZGVzY2Vyw6EgYXV0b21hdGljYW1lbnRlIHBhcmEgY2FycmVnYXIgbWFpcyBpbWFnZW5zIiwKICAgICAgICBlbnRlckZ1bGxzYzogIkVudHJhciBlbSB0ZWxhIGNoZWlhIiwKICAgICAgICBleGl0RnVsbHNjOiAiU2FpciBkYSB0ZWxhIGNoZWlhIiwKICAgICAgICBjb25maWc6ICJDb25maWd1cmHDp8O1ZXMiLAogICAgICAgIG9wZW5Db25maWc6ICJDb25maWd1cmHDp8O1ZXMiLAogICAgICAgIHJ1bGVSZXF1ZXN0OiAiUGVkaWRvIGRlIHJlZ3JhIiwKICAgICAgICBjbG9zZUdhbGxlcnk6ICJTYWlyIGRhIEdhbGVyaWEiLAogICAgICAgIHJldHVyblRvR2FsbGVyeTogIlZvbHRhciBwYXJhIGEgR2FsZXJpYSIsCiAgICAgICAgcGljSW5mbzogIkNsaXF1ZSBwYXJhIGFsdGVyYXIiLAogICAgICAgIHBpY05vdGU6ICJBbm90YcOnw6NvIGRhIGltYWdlbSIsCiAgICAgICAgdXJsRmlsdGVyOiAiRmlsdHJhciBvcyBsaW5rcyIsCiAgICAgICAgdXJsRmlsdGVyVGlwOiAiRmlsdHJlIG9zIGxpbmtzIHVzYW5kbyBwYWxhdnJhcy1jaGF2ZSBvdSBleHByZXNzw7VlcyByZWd1bGFyZXMiLAogICAgICAgIHJlc29sdXRpb246ICJSZXNvbHXDp8OjbyBkYSBpbWFnZW0iLAogICAgICAgIHNjYWxlUmF0aW86ICJSZWxhw6fDo28gZGUgZXNjYWxhIGRhIGltYWdlbSIsCiAgICAgICAgc2ltaWxhckltYWdlOiAiUGVzcXVpc2EgcG9yIEltYWdlbSIsCiAgICAgICAgc2NhbGU6ICJBbXBsaWFyIiwKICAgICAgICBob3Jpem9udGFsRmxpcDogIkludmVydGVyIGhvcml6b250YWxtZW50ZSIsCiAgICAgICAgdmVydGljYWxGbGlwOiAiSW52ZXJ0ZXIgdmVydGljYWxtZW50ZSIsCiAgICAgICAgYWN0dWFsQnRuOiAiVmVyIGEgaW1hZ2VtIG9yaWdpbmFsIChBKSIsCiAgICAgICAgc2VhcmNoQnRuOiAiUGVzcXVpc2FyIGEgaW1hZ2VtIG9yaWdpbmFsIChTKSIsCiAgICAgICAgZ2FsbGVyeUJ0bjogIkFicmlyIGEgaW1hZ2VtIG5hIGdhbGVyaWEgKEcpIiwKICAgICAgICBjdXJyZW50QnRuOiAiVmVyIGEgaW1hZ2VtIGF0dWFsIChDKSIsCiAgICAgICAgbWFnbmlmaWVyQnRuOiAiQW1wbGlhciB1c2FuZG8gYSBMdXBhIChNKSIsCiAgICAgICAgcGljVGl0bGU6ICJUw610dWxvIGRhIGltYWdlbSIsCiAgICAgICAgcGljTnVtOiAiUXVhbnRpZGFkZSBkZSBpbWFnZW5zIiwKICAgICAgICBwaWNUaXBzOiAiU2VndXJlIENUUkwgZSBwYXNzZSBvIG1vdXNlIHNvYnJlIHVtYSBpbWFnZW0gcGFyYSB2w6otbGEgYW1wbGlhZGEiLAogICAgICAgIHNhdmVQYWdlVGlwczogIkNUUkwrUyBwYXJhIHNhbHZhciBlc3NhIHDDoWdpbmEgZSBiYWl4YXIgdG9kYXMgYXMgaW1hZ2VucyIsCiAgICAgICAgZXhwb3J0SW1hZ2VzVXJsOiAiRXhwb3J0YXIgVVJMIGRhIGltYWdlbSIsCiAgICAgICAgZXhwb3J0SW1hZ2VzVXJsUG9wOiAiVXNlIEN0cmwrQyBwYXJhIGNvcGlhciBvcyBsaW5rcyBkYXMgaW1hZ2VucyIsCiAgICAgICAgYmVnaW5TZWFyY2hJbWc6ICIjdCMgaW5pY2lhbmRvIGEgUGVzcXVpc2EgcG9yIEltYWdlbS4uLiAiLAogICAgICAgIGZpbmROb1BpYzogIkEgaW1hZ2VtIG9yaWdpbmFsIG7Do28gZm9pIGVuY29udHJhZGEiLAogICAgICAgIGZpbmRPdmVyQmVnaW5Mb2FkOiAiI3QjIGZpbSBkYSBwZXNxdWlzYS4gRm9yYW0gZW5jb250cmFkYXMgI3QjIGltYWdlbnMgY29ycmVzcG9uZGVudGVzLCBjYXJyZWdhbmRvIGEgcHJpbWVpcmEuLi4gIiwKICAgICAgICBsb2FkTmV4dFNpbWlsYXI6ICJBIGltYWdlbSBvcmlnaW5hbCBmYWxob3UgYW8gY2FycmVnYXIsIHRlbnRhbmRvIGNhcnJlZ2FyIG8gcHLDs3hpbW8gcmVzdWx0YWRvLi4uICIsCiAgICAgICAgbG9hZEVycm9yOiAiRmFsaGEgYW8gY2FycmVnYXIiLAogICAgICAgIG9wZW5Ib21lUGFnZTogIkFicmlyIHDDoWdpbmEgaW5pY2lhbCIsCiAgICAgICAgcG9zaXRpb246ICJQb3Npw6fDo28gZGEgQmFycmEgZGUgRmVycmFtZW50YXMiLAogICAgICAgIHBvc2l0aW9uVGlwczogIlNlZ3VyZSBBTFQgcGFyYSBvY3VsdGFyIGEgQmFycmEgZGUgRmVycmFtZW50YXMiLAogICAgICAgIHRvcExlZnQ6ICJDYW50byBzdXBlcmlvciBlc3F1ZXJkbyIsCiAgICAgICAgdG9wUmlnaHQ6ICJDYW50byBzdXBlcmlvciBkaXJlaXRvIiwKICAgICAgICBib3R0b21SaWdodDogIkNhbnRvIGluZmVyaW9yIGRpcmVpdG8iLAogICAgICAgIGJvdHRvbUxlZnQ6ICJDYW50byBpbmZlcmlvciBlc3F1ZXJkbyIsCiAgICAgICAgdG9wQ2VudGVyOiAiQW8gbGFkbyBkYSBpbWFnZW0iLAogICAgICAgIGJvdHRvbUNlbnRlcjogIkFiYWl4byBkYSBpbWFnZW0iLAogICAgICAgIGZsb2F0QmFyOiAiQmFycmEgZGUgRmVycmFtZW50YXMiLAogICAgICAgIHByZXZpZXdGb2xsb3dNb3VzZTogIk1vc3RyYXIgYSBwcsOpLXZpc3VhbGl6YcOnw6NvIGFvIGxhZG8gZG8gbW91c2UiLAogICAgICAgIHNob3dEZWxheTogIkF0cmFzbyBwYXJhIGV4aWJpciBhIEJhcnJhIGRlIEZlcnJhbWVudGFzIiwKICAgICAgICBtczogIm1zIiwKICAgICAgICBoaWRlOiAiT2N1bHRhciBhIEJhcnJhIGRlIEZlcnJhbWVudGFzIiwKICAgICAgICBoaWRlRGVsYXk6ICJBdHJhc28gcGFyYSBvY3VsdGFyIGEgQmFycmEgZGUgRmVycmFtZW50YXMiLAogICAgICAgIGZvcmNlU2hvdzogIkV4aWJpciBhIEJhcnJhIGRlIEZlcnJhbWVudGFzIHNvYnJlIGltYWdlbnMgbsOjbyBhbXBsaWFkYXMiLAogICAgICAgIGZvcmNlU2hvd1RpcDogIkV4aWJlIGEgQmFycmEgZGUgRmVycmFtZW50YXMgcXVhbmRvIG8gdGFtYW5obyBkYSBpbWFnZW0gbsOjbyBhbXBsaWFkYSBleGNlZGUgbyB0YW1hbmhvIGRlZmluaWRvIGFvIGxhZG8iLAogICAgICAgIHNpemVMaW1pdE9yOiAiRXhpYmlyIHNlIGNvcnJlc3BvbmRlciBwb3IgYWx0dXJhIE9VIGxhcmd1cmEiLAogICAgICAgIHB4OiAicHgiLAogICAgICAgIG1pblNpemVMaW1pdDogIkV4aWJpciBhIEJhcnJhIGRlIEZlcnJhbWVudGFzIHNvYnJlIGltYWdlbnMgYW1wbGlhZGFzIiwKICAgICAgICBtaW5TaXplTGltaXRUaXA6ICJFeGliZSBhIEJhcnJhIGRlIEZlcnJhbWVudGFzIHF1YW5kbyBvIHRhbWFuaG8gZGEgaW1hZ2VtIGFtcGxpYWRhICh0YW1hbmhvIG9yaWdpbmFsIMOpIGRpZmVyZW50ZSBkbyB0YW1hbmhvIHJlYWwpIGV4Y2VkZXIgbyB0YW1hbmhvIGRlZmluaWRvIGFvIGxhZG8iLAogICAgICAgIGRlZmF1bHRTaXplTGltaXQ6ICJMaW1pdGUgZGUgdGFtYW5obyBwYWRyw6NvIHBhcmEgaW1hZ2VucyBkYSBHYWxlcmlhIiwKICAgICAgICBsaXN0ZW5CZzogIk1vbml0b3JhciBpbWFnZW5zIGVtIHNlZ3VuZG8gcGxhbm8iLAogICAgICAgIGJhY2tncm91bmRDb2xvcjogIkNvciBkbyBwbGFubyBkZSBmdW5kbyIsCiAgICAgICAgbGlzdGVuQmdUaXA6ICJFeGliZSBhIEJhcnJhIGRlIEZlcnJhbWVudGFzIGVtIHVtYSBpbWFnZW0gbm8gcGxhbm8gZGUgZnVuZG8iLAogICAgICAgIGJ1dG9uT3JkZXI6ICJPcmRlbSBkYXMgZmVycmFtZW50YXMiLAogICAgICAgIGtleXNFbmFibGU6ICJBdGFsaG9zIHBhcmEgYXRpdmFyIGEgZmVycmFtZW50YXMiLAogICAgICAgIGtleXNBY3R1YWw6ICJBYnJpciBhIGltYWdlbSBvcmlnaW5hbCIsCiAgICAgICAga2V5c0FjdHVhbFRpcDogIlByZXNzaW9uZSBlc3RhIHRlY2xhIHBhcmEgYWJyaXIgYSBpbWFnZW0gb3JpZ2luYWwgcXVhbmRvIGEgQmFycmEgZGUgRmVycmFtZW50YXMgYXBhcmVjZXIiLAogICAgICAgIGtleXNTZWFyY2g6ICJFbmNvbnRyZSBhIGltYWdlbSBvcmlnaW5hbCIsCiAgICAgICAga2V5c1NlYXJjaFRpcDogIlByZXNzaW9uZSBlc3RhIHRlY2xhIHBhcmEgcGVzcXVpc2FyIGEgaW1hZ2VtIG9yaWdpbmFsIHF1YW5kbyBhIEJhcnJhIGRlIEZlcnJhbWVudGFzIGFwYXJlY2VyIiwKICAgICAgICBoZWFkU2VhcmNoVGlwOiAiVXNlIHVtIGRlc3NlcyBzaXRlcyBwYXJhIHBlc3F1aXNhciBwb3IgaW1hZ2VucyBzZW1lbGhhbnRlcyIsCiAgICAgICAgaGVhZFNlYXJjaEFsbDogIlBlc3F1aXNhciBlbSB0b2RvcyBvcyBzaXRlcyIsCiAgICAgICAga2V5c0N1cnJlbnQ6ICJBYnJpciBhIGltYWdlbSBhdHVhbCIsCiAgICAgICAga2V5c0N1cnJlbnRUaXA6ICJQcmVzc2lvbmUgZXN0YSB0ZWNsYSBwYXJhIGFicmlyIGEgaW1hZ2VtIGF0dWFsIHF1YW5kbyBhIEJhcnJhIGRlIEZlcnJhbWVudGFzIGFwYXJlY2VyIiwKICAgICAgICBrZXlzTWFnbmlmaWVyOiAiVXNhciBhIGZlcnJhbWVudGEgTHVwYSIsCiAgICAgICAga2V5c01hZ25pZmllclRpcDogIlByZXNzaW9uZSBlc3RhIHRlY2xhIHBhcmEgdXNhciBhIEx1cGEgcXVhbmRvIGEgQmFycmEgZGUgRmVycmFtZW50YXMgYXBhcmVjZXIiLAogICAgICAgIGtleXNHYWxsZXJ5OiAiQWJyaXIgYSBpbWFnZW0gbmEgR2FsZXJpYSIsCiAgICAgICAga2V5c0dhbGxlcnlUaXA6ICJQcmVzc2lvbmUgZXN0YSB0ZWNsYSBwYXJhIGFicmlyIGEgaW1hZ2VtIG5hIEdhbGVyaWEgcXVhbmRvIGEgQmFycmEgZGUgRmVycmFtZW50YXMgYXBhcmVjZXIiLAogICAgICAgIG9wZW5HYWxsZXJ5OiAiQWJyaXIgYSBHYWxlcmlhIiwKICAgICAgICBtYWduaWZpZXI6ICJMdXBhIiwKICAgICAgICBtYWduaWZpZXJSYWRpdXM6ICJUYW1hbmhvIHBhZHLDo28gZGEgbHVwYSIsCiAgICAgICAgbWFnbmlmaWVyV2hlZWxab29tRW5hYmxlZDogIlBlcm1pdGlyIGFtcGxpYcOnw6NvIGNvbSBhIHJvZGEgZG8gbW91c2UiLAogICAgICAgIG1hZ25pZmllcldoZWVsWm9vbVJhbmdlOiAiRmFpeGEgZGUgYW1wbGlhw6fDo28gZGEgbHVwYSIsCiAgICAgICAgbWFnbmlmaWVyU2NhbGVJbWFnZTogIlpvb20gaW1hZ2UgYnkgd2hlZWwiLAogICAgICAgIGdhbGxlcnk6ICJHYWxlcmlhIiwKICAgICAgICBnYWxsZXJ5Rml0VG9TY3JlZW46ICJBbXBsaWFyIGEgaW1hZ2VtIHBhcmEgY2FiZXIgbmEgdGVsYSIsCiAgICAgICAgZ2FsbGVyeUZpdFRvU2NyZWVuU21hbGw6ICJBbXBsaWFyIGltYWdlbnMgcGVxdWVuYXMgdGFtYsOpbSIsCiAgICAgICAgZ2FsbGVyeUZpdFRvU2NyZWVuVGlwOiAiQW1wbGlhIGEgaW1hZ2VtIHBhcmEgY2FiZXIsIG7Do28gY29icmlyIiwKICAgICAgICBnYWxsZXJ5U2Nyb2xsRW5kVG9DaGFuZ2U6ICJNdWRhciBkZSBpbWFnZW0gYW8gcm9sYXIgYXTDqSBvIGZpbmFsIiwKICAgICAgICBnYWxsZXJ5U2Nyb2xsRW5kVG9DaGFuZ2VUaXA6ICJNdWRhIGF1dG9tYXRpY2FtZW50ZSBwYXJhIGEgcHLDs3hpbWEgaW1hZ2VtIGFvIHJvbGFyIHVtYSBpbWFnZW0gbG9uZ2EuIFbDoWxpZG8gYXDDs3MgY2FuY2VsYXIgYSBvcMOnw6NvIGFudGVyaW9yIiwKICAgICAgICBnYWxsZXJ5RXhwb3J0VHlwZTogIkNsYXNzaWZpY2HDp8OjbyBwYWRyw6NvIGRhcyBpbWFnZW5zIGV4cG9ydGFkYXMiLAogICAgICAgIGdyaWQ6ICJDbGFzc2lmaWNhw6fDo28gZW0gYmxvY29zIiwKICAgICAgICBncmlkQmlnOiAiQ2xhc3NpZmljYcOnw6NvIG9yaWdpbmFsIiwKICAgICAgICBsaXN0OiAiQ2xhc3NpZmljYcOnw6NvIGVtIGxpc3RhIiwKICAgICAgICBnYWxsZXJ5QXV0b0xvYWQ6ICJDYXJyZWdhciBhdXRvbWF0aWNhbWVudGUgbWFpcyBpbWFnZW5zIG5hIHDDoWdpbmEiLAogICAgICAgIGdhbGxlcnlMb2FkQWxsOiAiUHJvY2Vzc2FyIGF1dG9tYXRpY2FtZW50ZSBhIHDDoWdpbmEgYW8gY2FycmVnYXIgbWFpcyBpbWFnZW5zIiwKICAgICAgICBnYWxsZXJ5TG9hZEFsbFRpcDogIlByb2Nlc3NhciBtdWl0byB1bWEgcMOhZ2luYSBwb2RlIGFmZXRhciBhIHN1YSBleHBlcmnDqm5jaWEiLAogICAgICAgIGdhbGxlcnlEb3dubG9hZFdpdGhaaXA6ICJDb21wcmltaXIgcGFyYSB1bSBhcnF1aXZvIFpJUCBxdWFuZG8gYmFpeGFyIiwKICAgICAgICBnYWxsZXJ5RG93bmxvYWRXaXRoWmlwQWxlcnQ6ICJDb21wcmltaW5kbywgZXNwZXJlIHVtIHBvdWNvIHBvciBmYXZvciIsCiAgICAgICAgZ2FsbGVyeVNjYWxlU21hbGxTaXplMTogIlNlIGEgYWx0dXJhIGUgYSBsYXJndXJhIHJlYWlzIGZvcmVtIG1lbm9yIHF1ZSAiLAogICAgICAgIGdhbGxlcnlTY2FsZVNtYWxsU2l6ZTI6ICIgcMOteGVpcywgYSBpbWFnZW0gc2Vyw6EgY2xhc3NpZmljYWRhIGNvbW8gcGVxdWVuYSIsCiAgICAgICAgZ2FsbGVyeVNob3dTbWFsbFNpemU6ICJFeGliaXIgaW1hZ2VucyBwZXF1ZW5hcyBwb3IgcGFkcsOjbyIsCiAgICAgICAgZ2FsbGVyeVRyYW5zaXRpb246ICJFeGliaXIgZWZlaXRvcyBkZSB0cmFuc2nDp8OjbyBkZSBpbWFnZW5zIG5hIGdhbGVyaWEiLAogICAgICAgIGdhbGxlcnlTaWRlYmFyUG9zaXRpb246ICJQb3Npw6fDo28gZGEgYmFycmEgZGUgbWluaWF0dXJhcyIsCiAgICAgICAgYm90dG9tOiAiSW5mZXJpb3IiLAogICAgICAgIHJpZ2h0OiAiRGlyZWl0YSIsCiAgICAgICAgbGVmdDogIkVzcXVlcmRhIiwKICAgICAgICB0b3A6ICJTdXBlcmlvciIsCiAgICAgICAgZ2FsbGVyeVNpZGViYXJTaXplOiAiVGFtYW5obyIsCiAgICAgICAgZ2FsbGVyeVNpZGViYXJTaXplVGlwOiAiQSBhbHR1cmEgKHNlIGZvciBob3Jpem9udGFsKSBvdSBhIGxhcmd1cmEgKHNlIGZvciB2ZXJ0aWNhbCkgZGEgYmFycmEgZGUgbWluaWF0dXJhcyIsCiAgICAgICAgZ2FsbGVyeU1heDE6ICJDYWNoZSBtw6F4aW1vIGRlICIsCiAgICAgICAgZ2FsbGVyeU1heDI6ICIgaW1hZ2VucyAoYW50ZXMgZSBkZXBvaXMpIiwKICAgICAgICBnYWxsZXJ5QXV0b1pvb206ICJBIGFtcGxpYcOnw6NvIHZvbHRhIHBhcmEgMTAwJSAoQ2hyb21lKSIsCiAgICAgICAgZ2FsbGVyeUF1dG9ab29tVGlwOiAiQW8gYW1wbGlhciwgYWx0ZXJhIG8gem9vbSBkYSBpbWFnZW0gZSBkYSBiYXJyYSBkZSBtaW5pYXR1cmFzIGRlIHZvbHRhIHBhcmEgMTAwJSwgYXVtZW50YW5kbyBhIMOhcmVhIHZpc8OtdmVsICh2w6FsaWRvIGFwZW5hcyBubyBDaHJvbWUpIiwKICAgICAgICBnYWxsZXJ5RGVzY3JpcHRpb25MZW5ndGgxOiAiTGFyZ3VyYSBtw6F4aW1hIGRvIGNvbWVudMOhcmlvIMOpIGRlICIsCiAgICAgICAgZ2FsbGVyeURlc2NyaXB0aW9uTGVuZ3RoMjogIiBjYXJhY3RlcmVzIiwKICAgICAgICBnYWxsZXJ5QXV0b09wZW5TaXRlczogIlJlZ3JhcyBkZSBsaW5rcyBwYXJhIGFicmlyIGEgR2FsZXJpYSBhdXRvbWF0aWNhbWVudGUuIENvbWVjZSBjb20gQCBwYXJhIG8gbW9kbyBWZXIgTWFpcy4gRXNjcmV2YSB1bWEgcmVncmEgcG9yIGxpbmhhIiwKICAgICAgICBkaXNhYmxlS2V5U2l0ZXM6ICJSZWd1bGFyZXMgZGUgVVJMcyBwYXJhIGRlc2F0aXZhciB0ZWNsYXMgZGUgYXRhbGhvLCB1bWEgcG9yIGxpbmhhIiwKICAgICAgICBhdXRvT3BlblZpZXdtb3JlOiAiRXhwYW5kaXIgbyBtb2RvIFZlciBNYWlzIGFvIGFicmlyIGEgR2FsZXJpYSIsCiAgICAgICAgZ2FsbGVyeVNlYXJjaERhdGE6ICJSZWdyYXMgZGUgc2l0ZXMgcGFyYSBwZXNxdWlzYSBwb3IgaW1hZ2VtLiBFc3ZhemllIHBhcmEgcmVzdGF1cmFyIiwKICAgICAgICBnYWxsZXJ5RWRpdFNpdGU6ICJTaXRlIGRlIGVkacOnw6NvIG9ubGluZSIsCiAgICAgICAgaW1nV2luZG93OiAiSW1hZ2VtIiwKICAgICAgICBpbWdXaW5kb3dGaXRUb1NjcmVlbjogIkFkYXB0YXIgYSBpbWFnZW0gw6AgdGVsYSIsCiAgICAgICAgaW1nV2luZG93Rml0VG9TY3JlZW5UaXA6ICJBZGFwdGEgYSBpbWFnZW0gw6AgdGVsYSBzZW0gcGVybWl0aXIgcXVlIGVsYSBmaXF1ZSBmb3JhIGRhIHZpc8OjbyIsCiAgICAgICAgaW1nV2luZG93Rml0VG9TY3JlZW5XaGVuU21hbGw6ICJBZGFwdGFyIGEgaW1hZ2VtIMOgIHRlbGEsIG1lc21vIHNlIGZvciBwZXF1ZW5hIiwKICAgICAgICBpbWdXaW5kb3dEZWZhdWx0VG9vbDogIkZlcnJhbWVudGEgcGFkcsOjbyBhbyBleGliaXIgYSBpbWFnZW0gZmx1dHVhbnRlIiwKICAgICAgICBoYW5kOiAiTW92ZXIiLAogICAgICAgIHJvdGF0ZTogIkdpcmFyIiwKICAgICAgICB6b29tOiAiTHVwYSIsCiAgICAgICAgaW1nV2luZG93RXNjS2V5OiAiRmVjaGFyIGNvbSBhIHRlY2xhIEVzYyIsCiAgICAgICAgaW1nV2luZG93RGJsQ2xpY2tJbWdXaW5kb3c6ICJGZWNoYXIgY29tIGNsaXF1ZSBkdXBsbyIsCiAgICAgICAgaW1nV2luZG93Q2xpY2tPdXRzaWRlOiAiRmVjaGFyIGFvIGNsaWNhciBuYSBzb2JyZXBvc2nDp8OjbyIsCiAgICAgICAgaW1nV2luZG93Q2xpY2tPdXRzaWRlVGlwOiAiU8OzIHRlbSBlZmVpdG8gcXVhbmRvIGEgb3DDp8OjbyBTT0JSRVBPU0nDh8ODTyBlc3TDoSBtYXJjYWRhIiwKICAgICAgICBub25lOiAiTmVuaHVtIiwKICAgICAgICBjbGljazogIkNsaXF1ZSDDum5pY28iLAogICAgICAgIGRibGNsaWNrOiAiQ2xpcXVlIGR1cGxvIiwKICAgICAgICBpbWdXaW5kb3dPdmVybGF5ZXJTaG93bjogIlNvYnJlcG9zacOnw6NvIiwKICAgICAgICBpbWdXaW5kb3dPdmVybGF5ZXJDb2xvcjogIkNvciBlIE9wYWNpZGFkZSIsCiAgICAgICAgaW1nV2luZG93U2hpZnRSb3RhdGVTdGVwMTogIlNlZ3VyZSBTaGlmdCBwYXJhIGdpcmFyIGEgY2FkYSAiLAogICAgICAgIGltZ1dpbmRvd1NoaWZ0Um90YXRlU3RlcDI6ICIgZ3JhdShzKSIsCiAgICAgICAgaW1nV2luZG93TW91c2VXaGVlbFpvb206ICJQZXJtaXRpciBhIGFtcGxpYcOnw6NvIGNvbSBhIHJvZGEgZG8gbW91c2UiLAogICAgICAgIGltZ1dpbmRvd1pvb21SYW5nZTogIkZhaXhhIGRlIGFtcGxpYcOnw6NvIiwKICAgICAgICBpbWdXaW5kb3dab29tUmFuZ2VUaXA6ICJWYWxvcmVzIHVzYWRvcyBhbyBhbXBsaWFyIGEgaW1hZ2VtIChwcmVjaXNhbSBzZXIgcG9zaXRpdm9zKSIsCiAgICAgICAgb3RoZXJzOiAiT3V0cm9zIiwKICAgICAgICB3YWl0SW1nTG9hZDogIkFndWFyZGFyIG8gY2FycmVnYXJyZWdhbWVudG8gZGEgaW1hZ2VtIGFudGVzIGRlIHJlYWxpemFyIG9wZXJhw6fDtWVzIGNvbW8gQW1wbGlhciIsCiAgICAgICAgd2FpdEltZ0xvYWRUaXA6ICJQcmVzc2lvbmFuZG8gQ3RybCB2b2PDqiBwb2RlIHRlbXBvcmFyaWFtZW50ZSBpZ25vcmFyIGVzdGEgY29uZmlndXJhw6fDo28iLAogICAgICAgIGRlYnVnOiAiTW9kbyBkZSBkZXB1cmHDp8OjbyIsCiAgICAgICAgY3VzdG9tUnVsZXM6ICJSZWdyYXMgcGVyc29uYWxpemFkYXMgcGFyYSBpbWFnZW5zIGdyYW5kZXMiLAogICAgICAgIGZpcnN0RW5naW5lOiAiTW90b3IgZGUgYnVzY2EgcHJlZmVyZW5jaWFsIChwcmltZWlybykiLAogICAgICAgIHJlZnJlc2hXaGVuRXJyb3I6ICJFcnJvIGRlIGxlaXR1cmEsIGNsaXF1ZSBwYXJhIHJlY2FycmVnYXIiLAogICAgICAgIHN3aXRjaFNsaWRlOiAiQWx0ZXJuYXIgYSBiYXJyYSBsYXRlcmFsIiwKICAgICAgICB2aWV3bW9yZTogIlZlciBNYWlzIiwKICAgICAgICBjb3VudERvd246ICJDb250YWdlbSByZWdyZXNzaXZhIiwKICAgICAgICBjdXN0b21MYW5nOiAiRGVmaW5pciBvIGlkaW9tYSIsCiAgICAgICAgZGVmYXVsdExhbmc6ICJBdXRvIiwKICAgICAgICBoaWRlSWNvbjogIk9jdWx0YXIgYSBCYXJyYSBkZSBGZXJyYW1lbnRhcyIsCiAgICAgICAgaW5pdFNob3c6ICJJbnZlcnRlciBhdGFsaG8gcGFyYSBleGliaXIgYSBQcsOpLXZpc3VhbGl6YcOnw6NvIHBvciBwYWRyw6NvIiwKICAgICAgICBzdGF5T3V0OiAiUGVybWl0aXIgcXVlIGEgQmFycmEgZGUgRmVycmFtZW50YXMgZmlxdWUgZm9yYSBkYSBpbWFnZW0iLAogICAgICAgIGdhbGxlcnlEb3dubG9hZEdhcDogIkludGVydmFsbyBwYXJhIGJhaXhhciIsCiAgICAgICAgZm9ybWF0Q29udmVyc2lvbjogIkNvbnZlcnRhIG8gZm9ybWF0byBkYSBpbWFnZW0gZHVyYW50ZSBvIGRvd25sb2FkLCB1bWEgbGluaGEgcG9yIGxpbmhhIiwKICAgICAgICBnYWxsZXJ5RGlzYWJsZUFycm93OiAiRGVzYXRpdmFyIGFzIHRlY2xhcyBkZSBzZXRhIiwKICAgICAgICBwb3NpdGlvbkZpeGVkOiAiUG9zacOnw6NvIGZpeGEiLAogICAgICAgIHN3aXRjaFN0b3JlTG9jOiAiUG9zacOnw6NvIGRhIG1lbcOzcmlhIGFvIGFsdGVybmFyIgogICAgfQp9LAp7CiAgICBuYW1lOiAi0KDRg9GB0YHQutC40LkiLAogICAgbWF0Y2g6IFsicnUiLCAicnUtUlUiXSwKICAgIGxhbmc6IHsKICAgICAgICAvL9Cg0YPRgdGB0LrQuNC5INC/0LXRgNC10LLQvtC0IGJ5IFJYLTMyMDAg0LggdmFuamEtc2FuLgogICAgICAgIHNhdmVCdG46ICLQodC+0YXRgNCw0L3QuNGC0YwiLAogICAgICAgIHNhdmVOYW1lOiAi0KHQvtGF0YDQsNC90Y/RgtGMINC90LDQt9Cy0LDQvdC40LUiLAogICAgICAgIHNhdmVOYW1lVGlwOiAi0JjRgdC/0L7Qu9GM0LfRg9C50YLQtSDQtNC70Y8g0YHQvtGF0YDQsNC90LXQvdC40Y8g0LjQt9C+0LHRgNCw0LbQtdC90LjQuSDRgSDQvtGA0LjQs9C40L3QsNC70YzQvdGL0Lwg0L3QsNC30LLQsNC90LjQtdC8IiwKICAgICAgICBzYXZlTmFtZUFkZFRpdGxlOiAi0JTQvtCx0LDQstC40YLRjCDQt9Cw0LPQvtC70L7QstC+0Log0YHRgtGA0LDQvdC40YbRiyDQv9GA0Lgg0YHQvtGF0YDQsNC90LXQvdC40LgiLAogICAgICAgIHNpemU6ICLRgNCw0LfQvNC10YAiLAogICAgICAgIGFsbDogItCy0YHQtSIsCiAgICAgICAgYmlnU2l6ZTogItCx0L7Qu9GM0YjQvtC5INGA0LDQt9C80LXRgCIsCiAgICAgICAgaWNvblNpemU6ICLQt9C90LDRh9C+0LoiLAogICAgICAgIGFyaWEySG9zdDogItCh0LXRgNCy0LXRgCBhcmlhMiIsCiAgICAgICAgYXJpYTJUb2tlbjogItCi0L7QutC10L0gYXJpYTIiLAogICAgICAgIHBvc3QyQXJpYTI6ICLQntC/0YPQsdC70LjQutC+0LLQsNGC0Ywg0LIgYXJpYTIiLAogICAgICAgIGRlZmF1bHQ6ICLQn9C+INGD0LzQvtC70YfQsNC90LjRjiIsCiAgICAgICAgdGV4dEZpcnN0OiAi0J7Qv9C40YHQsNC90LjQtSDQuNC30L7QsdGA0LDQttC10L3QuNGPIiwKICAgICAgICBvbmx5VXJsOiAi0KLQvtC70YzQutC+INC40LzRjyDRhNCw0LnQu9CwINGDINGB0YHRi9C70LrQuCIsCiAgICAgICAgdXJsQW5kVGV4dDogItCh0YHRi9C70LrQsCArINC+0L/QuNGB0LDQvdC40LUg0YTQsNC50LvQsCIsCiAgICAgICAgZG93bmxvYWQ6ICLQodC60LDRh9Cw0YLRjCIsCiAgICAgICAgc2F2ZUJ0blRpcHM6ICLQp9GC0L7QsdGLINC90LXQutC+0YLQvtGA0YvQtSDQv9Cw0YDQsNC80LXRgtGA0Ysg0LLRgdGC0YPQv9C40LvQuCDQsiDRgdC40LvRgywg0L3QtdC+0LHRhdC+0LTQuNC80L4g0L7QsdC90L7QstC40YLRjCDRgdGC0YDQsNC90LjRhtGDLiIsCiAgICAgICAgYWRkaXRpb25hbEZlYXR1cmU6ICLQlNC+0L/QvtC70L3QuNGC0LXQu9GM0L3Ri9C1INGE0YPQvdC60YbQuNC4LCDQstGB0YLRg9C/0LDRjtGCINCyINGB0LjQu9GDINC/0YDQuCDQvdCw0LbQsNGC0LjQuCDQutC70LDQstC40YjQuCBBbHQiLAogICAgICAgIGludmVydEFkZGl0aW9uYWxGZWF0dXJlOiAi0JjQvdCy0LXRgNGC0LjRgNC+0LLQsNGC0Ywg0YHQvtGH0LXRgtCw0L3QuNGPINC60LvQsNCy0LjRiCwg0LjRgdC/0L7Qu9GM0LfQvtCy0LDRgtGMINC00L7Qv9C+0LvQvdC40YLQtdC70YzQvdGL0LUg0YTRg9C90LrRhtC40Lgg0L/QviDRg9C80L7Qu9GH0LDQvdC40Y4iLAogICAgICAgIGNvcHk6ICLQmtC+0L/QuNGA0L7QstCw0YLRjCDRgdGB0YvQu9C60YMiLAogICAgICAgIGNvcHlJbWc6ICLQmtC+0L/QuNGA0L7QstCw0YLRjCDQtNCw0L3QvdGL0LUg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyIsCiAgICAgICAgb3BlbkluTmV3VGFiOiAi0J7RgtC60YDRi9GC0Ywg0LIg0L3QvtCy0L7QuSDQstC60LvQsNC00LrQtSIsCiAgICAgICAgY2xvc2VCdG46ICLQl9Cw0LrRgNGL0YLRjCIsCiAgICAgICAgaW52ZXJ0QnRuOiAi0J7RgtC60LDRgtC40YLRjCIsCiAgICAgICAgY29tcGFyZUJ0bjogItCh0YDQsNCy0L3QuNCy0LDRgtGMIiwKICAgICAgICBzZWxlY3RBbGxCdG46ICLQktGL0LHRgNCw0YLRjCDQstGB0LUiLAogICAgICAgIGNsb3NlQnRuVGlwczogItCe0YLQvNC10L3Rj9C10YIg0Y3RgtGDINC90LDRgdGC0YDQvtC50LrRgyDQuCDQstC+0YHRgdGC0LDQvdCw0LLQu9C40LLQsNC10YIg0LLRgdC1INC/0LDRgNCw0LzQtdGC0YDRiyIsCiAgICAgICAgcmVzZXRMaW5rOiAi0JLQvtGB0YHRgtCw0L3QvtCy0LjRgtGMINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOIiwKICAgICAgICByZXNldExpbmtUaXBzOiAi0JLQvtGB0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdGCINGB0L7QtNC10YDQttC40LzQvtC1INCy0YHQtdGFINC/0LDRgNCw0LzQtdGC0YDQvtCyINC6INC30L3QsNGH0LXQvdC40Y/QvCDQv9C+INGD0LzQvtC70YfQsNC90LjRjiIsCiAgICAgICAgc2hhcmU6ICLQn9C+0LTQtdC70LjRgtGM0YHRjyIsCiAgICAgICAgc3VpdExvbmdJbWc6ICLQntGC0L7QsdGA0LDQttCw0YLRjCDQv9GA0L7QutGA0YPRgtC60YMg0LTQu9GPINGB0LvQuNGI0LrQvtC8INC00LvQuNC90L3Ri9GFINC40LfQvtCx0YDQsNC20LXQvdC40LkiLAogICAgICAgIGdsb2JhbGtleXM6ICLQmtC+0LzQsdC40L3QsNGG0LjRjyDQutC70LDQstC40Ygg0L/RgNC10LTQv9GA0L7RgdC80L7RgtGA0LA6ICIsCiAgICAgICAgZ2xvYmFsa2V5c1ByZXNzOiAi0J3QsNC20LzQuNGC0LUsINGH0YLQvtCx0Ysg0L7RgtC60YDRi9GC0Ywg0L/RgNC10LTQstCw0YDQuNGC0LXQu9GM0L3Ri9C5INC/0YDQvtGB0LzQvtGC0YAiLAogICAgICAgIGdsb2JhbGtleXNIb2xkOiAi0J3QsNC20LzQuNGC0LUg0Lgg0YPQtNC10YDQttC40LLQsNC50YLQtSwg0YfRgtC+0LHRiyDQvtGC0LrRgNGL0YLRjCDQv9GA0LXQtNCy0LDRgNC40YLQtdC70YzQvdGL0Lkg0L/RgNC+0YHQvNC+0YLRgCIsCiAgICAgICAgZ2xvYmFsa2V5c1R5cGU6ICLQnNC10YLQvtC0INC30LDQv9GD0YHQutCwINC/0YDQtdC00L/RgNC+0YHQvNC+0YLRgNCwOiAiLAogICAgICAgIGNsb3NlQWZ0ZXJQcmV2aWV3OiAi0JfQsNC60YDRi9Cy0LDRgtGMINC+0LrQvdC+INC40LfQvtCx0YDQsNC20LXQvdC40Y8sINC60L7Qs9C00LAg0L/RgNC10LTQv9GA0L7RgdC80L7RgtGAINC30LDQstC10YDRiNCw0LXRgtGB0Y8iLAogICAgICAgIHByZXZpZXdNYXhTaXplOiAi0JzQsNC60YHQuNC80LDQu9GM0L3Ri9C5INGA0LDQt9C80LXRgCDQvtC60L3QsCDQv9GA0LXQtNCy0LDRgNC40YLQtdC70YzQvdC+0LPQviDQv9GA0L7RgdC80L7RgtGA0LAiLAogICAgICAgIHByZXZpZXdNYXhTaXplVGlwOiAi0JXRgdC70Lgg0L7QutC90L4g0L/RgNC10LTQstCw0YDQuNGC0LXQu9GM0L3QvtCz0L4g0L/RgNC+0YHQvNC+0YLRgNCwINCx0L7Qu9GM0YjQtSDQt9Cw0LTQsNC90L3QvtCz0L4g0YDQsNC30LzQtdGA0LAsINC80LDRgdGI0YLQsNCx0LjRgNGD0LnRgtC1INC+0LrQvdC+INC/0YDQtdC00LLQsNGA0LjRgtC10LvRjNC90L7Qs9C+INC/0YDQvtGB0LzQvtGC0YDQsC4g0JfQvdCw0YfQtdC90LjQtSAwINC+0YLQutC70Y7Rh9C10L3QviIsCiAgICAgICAgbG9hZEFsbDogItCX0LDQs9GA0YPQttCw0YLRjCDQsdC+0LvRjNGI0LUg0YHRgtGA0LDQvdC40YYiLAogICAgICAgIGxvYWRlZEFsbDogItCX0LDQs9GA0YPQt9C60LAg0LfQsNCy0LXRgNGI0LXQvdCwIiwKICAgICAgICBsb2FkaW5nOiAi0JfQsNCz0YDRg9C30LrQsCIsCiAgICAgICAgbG9hZEFsbFRpcDogItCX0LDQs9GA0YPQttCw0YLRjCDQuNC30L7QsdGA0LDQttC10L3QuNGPINGB0L4g0YHQu9C10LTRg9GO0YnQtdC5INGB0YLRgNCw0L3QuNGG0YsiLAogICAgICAgIHZpZXdtb3JlRW5kbGVzczogItCf0YDQvtC60YDRg9GC0LjRgtC1INGB0YLRgNCw0L3QuNGG0YMg0LTQviDQutC+0L3RhtCwLCDRh9GC0L7QsdGLINCw0LLRgtC+0LzQsNGC0LjRh9C10YHQutC4INC30LDQs9GA0YPQttCw0YLRjCDRgdC70LXQtNGD0Y7RidGD0Y4g0YHRgtGA0LDQvdC40YbRgyIsCiAgICAgICAgZmlkZGxlOiAi0JLRgdC/0LvRi9Cy0LDRjtGJ0LXQtSDQuNC30L7QsdGA0LDQttC10L3QuNC1IiwKICAgICAgICBmaWRkbGVUaXA6ICLQktGB0L/Qu9GL0LLQsNGO0YnQuNC1INC40LfQvtCx0YDQsNC20LXQvdC40Y8g0LTQu9GPINGB0LvQvtC20L3Ri9GFINC+0L/QtdGA0LDRhtC40LkiLAogICAgICAgIGFkZEltYWdlVXJsczogItCU0L7QsdCw0LLQuNGC0Ywg0LjQt9C+0LHRgNCw0LbQtdC90LjQtSIsCiAgICAgICAgYWRkSW1hZ2VVcmxzVGlwczogItCU0L7QsdCw0LLQu9GP0LnRgtC1INCx0L7Qu9GM0YjQtSDQuNC30L7QsdGA0LDQttC10L3QuNC5INC/0L4g0YHRgdGL0LvQutC1IiwKICAgICAgICBvcGVuSW1hZ2VzOiAi0JvQvtC60LDQu9GM0L3QvtC1INC40LfQvtCx0YDQsNC20LXQvdC40LUiLAogICAgICAgIG9wZW5JbWFnZXNUaXBzOiAi0J3QsNC20LzQuNGC0LUsINGH0YLQvtCx0Ysg0LjQvNC/0L7RgNGC0LjRgNC+0LLQsNGC0Ywg0LvQvtC60LDQu9GM0L3Ri9C1INC40LfQvtCx0YDQsNC20LXQvdC40Y8iLAogICAgICAgIGNsb3NlRmlyc3Q6ICLQodC90LDRh9Cw0LvQsCDQt9Cw0LrRgNC+0LnRgtC1INCy0YHQtSDQs9Cw0LvQtdGA0LXQuCwg0LrQvtGC0L7RgNGL0LUg0YHQtdC50YfQsNGBINC+0YLQutGA0YvRgtGLLiIsCiAgICAgICAgY29sbGVjdDogItCU0L7QsdCw0LLQuNGC0Ywg0LIg0LrQvtC70LvQtdC60YbQuNGOIiwKICAgICAgICBjb2xsZWN0ZWQ6ICLQkiDQutC+0LvQu9C10LrRhtC40LgiLAogICAgICAgIGV4aXRDb2xsZWN0aW9uOiAi0JfQsNC60YDRi9GC0Ywg0LrQvtC70LvQtdC60YbQuNGOIiwKICAgICAgICBleGl0Q29sbGVjdGlvblRpcDogItCd0LDQttC80LjRgtC1LCDRh9GC0L7QsdGLINCy0YvQudGC0Lgg0LjQtyDRgNC10LbQuNC80LAg0LrQvtC70LvQtdC60YbQuNC+0L3QuNGA0L7QstCw0L3QuNGPIiwKICAgICAgICBub0NvbGxlY3Rpb25ZZXQ6ICLQkiDQstCw0YjQtdC5INC60L7Qu9C70LXQutGG0LjQuCDQvdC10YIg0L3QuCDQvtC00L3QvtCz0L4g0LjQt9C+0LHRgNCw0LbQtdC90LjRjyIsCiAgICAgICAgY29sbGVjdERldGFpbDogItCe0L/QuNGB0LDQvdC40LUiLAogICAgICAgIGNvbGxlY3REZXRhaWxUaXA6ICLQlNC+0LHQsNCy0YzRgtC1INC+0L/QuNGB0LDQvdC40LUg0Log0LjQt9C+0LHRgNCw0LbQtdC90LjRj9C8INCyINC60L7Qu9C70LXQutGG0LjQuCIsCiAgICAgICAgcGxheVNsaWRlOiAi0JLQvtGB0L/RgNC+0LjQt9Cy0LXRgdGC0Lgg0YHQu9Cw0LnQtC3RiNC+0YMiLAogICAgICAgIHNsaWRlR2FwOiAi0JjQvdGC0LXRgNCy0LDQuyjQvtCyKSIsCiAgICAgICAgc2xpZGVHYXBUaXA6ICLQktGA0LXQvNGPINC40L3RgtC10YDQstCw0LvQsCwg0LIg0YHQtdC60YPQvdC00LDRhSIsCiAgICAgICAgc2xpZGVCYWNrOiAi0J7RgiDQutC+0L3RhtCwIiwKICAgICAgICBzbGlkZUJhY2tUaXA6ICLQktC+0YHQv9GA0L7QuNC30LLQtdC00LXQvdC40LUg0L7RgiDQutC+0L3RhtCwINC6INC90LDRh9Cw0LvRgyIsCiAgICAgICAgc2xpZGVSYW5kb206ICJSYW5kb20iLAogICAgICAgIHNsaWRlV2FpdDogItCe0LbQuNC00LDQvdC40LUg0YHRh9C40YLRi9Cy0LDQvdC40Y8g0LjQt9C+0LHRgNCw0LbQtdC90LjRjyIsCiAgICAgICAgc2xpZGVXYWl0VGlwOiAi0J7QsdGA0LDRgtC90YvQuSDQvtGC0YHRh9GR0YIg0L3QsNGH0LjQvdCw0ZHRgtGB0Y8g0YLQvtC70YzQutC+INC/0L7RgdC70LUg0YLQvtCz0L4sINC60LDQuiDQstGB0LUg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyDQsdGD0LTRg9GCINC/0L7Qu9C90L7RgdGC0YzRjiDRgdGH0LjRgtCw0L3RiyIsCiAgICAgICAgc2xpZGVTa2lwRXJyb3I6ICLQn9GA0L7Qv9GD0YHQutCw0YLRjCDQuNC30L7QsdGA0LDQttC10L3QuNGPINGBINC+0YjQuNCx0LrQvtC5IiwKICAgICAgICBzbGlkZVNraXBFcnJvclRpcDogItCR0YvRgdGC0YDQviDQv9GA0L7Qv9GD0YHQutCw0YLRjCDQuNC30L7QsdGA0LDQttC10L3QuNGPLCDQutC+0YLQvtGA0YvQtSDRgdGH0LjRgtGL0LLQsNGO0YLRgdGPINGBINC+0YjQuNCx0LrQvtC5IiwKICAgICAgICB0eXBlOiAi0KLQuNC/IiwKICAgICAgICB0eXBlVGlwOiAi0JLRi9Cx0LXRgNC40YLQtSDRgtC40L8g0LjQt9C+0LHRgNCw0LbQtdC90LjQuSIsCiAgICAgICAgc2hvd1dpdGhSdWxlczogItCe0YLQvtCx0YDQsNC20LDQtdGC0YHRjyDQv9GA0Lgg0YHQvtC+0YLQstC10YLRgdGC0LLQuNC4INC/0YDQsNCy0LjQu9CwIiwKICAgICAgICBzaG93V2l0aFJ1bGVzVGlwOiAi0JXRgdC70Lgg0L/RgNCw0LLQuNC70L4g0YHQvtCx0LvRjtC00LXQvdC+LCDQuNC60L7QvdC60LAg0LHRg9C00LXRgiDQvtGC0L7QsdGA0LDQttCw0YLRjNGB0Y8g0L3QtdC30LDQstC40YHQuNC80L4g0L7RgiDRgNCw0LfQvNC10YDQsCIsCiAgICAgICAgYWR2YW5jZWRSdWxlczogItCg0LDRgdGI0LjRgNC10L3QvdGL0LUg0L/RgNCw0LLQuNC70LAiLAogICAgICAgIGFkdmFuY2VkUnVsZXNUaXA6ICLQodC+0L7RgtCy0LXRgtGB0YLQstGD0LXRgiDRgNCw0YHRiNC40YDQtdC90L3Ri9C8INC/0YDQsNCy0LjQu9Cw0LwiLAogICAgICAgIHRwUnVsZXM6ICLQn9GA0LDQstC40LvQsCDQv9C+0LTRgdGC0LDQvdC+0LLQvtGH0L3Ri9GFINC30L3QsNC60L7QsiIsCiAgICAgICAgdHBSdWxlc1RpcDogItCh0L7QvtGC0LLQtdGC0YHRgtCy0YPQtdGCINC/0YDQsNCy0LjQu9GDINC/0L7QtNGB0YLQsNC90L7QstC+0YfQvdGL0YUg0LfQvdCw0LrQvtCyIiwKICAgICAgICBzY2FsZVJ1bGVzOiAi0JzQsNGB0YjRgtCw0LHQuNGA0L7QstCw0L3QvdGL0LUiLAogICAgICAgIHNjYWxlUnVsZXNUaXA6ICJKUyDQsNCy0YLQvtC80LDRgtC40YfQtdGB0LrQuCDQvtCx0L3QsNGA0YPQttCw0LXRgiwg0YfRgtC+INC40LfQvtCx0YDQsNC20LXQvdC40Y8g0L7RgtC+0LHRgNCw0LbQsNC10LzRi9C1INC90LAg0YHRgtGA0LDQvdC40YbQtSwg0LHRi9C70Lgg0LzQsNGB0YjRgtCw0LHQuNGA0L7QstCw0L3RiyIsCiAgICAgICAgbm9TY2FsZVJ1bGVzOiAi0JHQtdC3INC80LDRgdGI0YLQsNCx0LjRgNC+0LLQsNC90LjRjyIsCiAgICAgICAgbm9TY2FsZVJ1bGVzVGlwOiAiSlMg0LDQstGC0L7QvNCw0YLQuNGH0LXRgdC60Lgg0L7QsdC90LDRgNGD0LbQsNC10YIsINGH0YLQviDQuNC30L7QsdGA0LDQttC10L3QuNGPINC+0YLQvtCx0YDQsNC20LDQtdC80YvQtSDQvdCwINGB0YLRgNCw0L3QuNGG0LUsINC90LUg0LHRi9C70Lgg0LzQsNGB0YjRgtCw0LHQuNGA0L7QstCw0L3RiyIsCiAgICAgICAgc21hbGxSdWxlczogItCd0LXQsdC+0LvRjNGI0L7QuSDRgNCw0LfQvNC10YAiLAogICAgICAgIHNtYWxsUnVsZXNUaXA6ICLQmNC30L7QsdGA0LDQttC10L3QuNGPINC90LXQsdC+0LvRjNGI0L7Qs9C+INGA0LDQt9C80LXRgNCwLCDQstGL0YHQvtGC0LAg0Lgg0YjQuNGA0LjQvdCwINGE0LDQutGC0LjRh9C10YHQutC+0LPQviDRgNCw0LfQvNC10YDQsCDQvNC10L3RjNGI0LUsINGH0LXQvCAjdCMg0L/QuNC60YHQtdC70LXQuSIsCiAgICAgICAgbG9ja1NpemVUaXA6ICLQl9Cw0YTQuNC60YHQuNGA0L7QstCw0YLRjCDQvNCw0LrRgdC40LzQsNC70YzQvdGL0Lkg0YDQsNC30LzQtdGAIiwKICAgICAgICBjb21tYW5kOiAi0JrQvtC80LDQvdC00LAiLAogICAgICAgIGNvbW1hbmRUaXA6ICLQnNC10L3RjiDQutC+0LzQsNC90LQiLAogICAgICAgIG9ubGluZUVkaXQ6ICLQntC90LvQsNC50L0t0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtSIsCiAgICAgICAgb25saW5lRWRpdFRpcDogItCe0YLRgNC10LTQsNC60YLQuNGA0YPQudGC0LUg0Y3RgtC+INC40LfQvtCx0YDQsNC20LXQvdC40LUg0L7QvdC70LDQudC9INGBINC/0L7QvNC+0YnRjNGOICN0IyIsCiAgICAgICAgb3BlbkluTmV3V2luZG93OiAi0J7RgtC60YDRi9GC0Ywg0LIg0L3QvtCy0L7QvCDQvtC60L3QtSIsCiAgICAgICAgb3BlbkluTmV3V2luZG93VGlwOiAi0J7RgtC60YDRi9GC0Ywg0LjQt9C+0LHRgNCw0LbQtdC90LjQtSDQsiDQvdC+0LLQvtC8INC+0LrQvdC1IiwKICAgICAgICBmaW5kSW5QYWdlOiAi0J/QtdGA0LXQudGC0Lgg0Log0LjQt9C+0LHRgNCw0LbQtdC90LjRjiIsCiAgICAgICAgZmluZEluUGFnZVRpcDogItCf0YDQvtC60YDRg9GH0LjQstCw0LXRgiDRgtGD0LTQsCwg0LPQtNC1INC90LDRhdC+0LTQuNGC0YHRjyDRgtC10LrRg9GJ0LXQtSDQuNC30L7QsdGA0LDQttC10L3QuNC1IiwKICAgICAgICB2aWV3Q29sbGVjdGlvbjogItCe0YLQutGA0YvRgtGMINC60L7Qu9C70LXQutGG0LjRjiIsCiAgICAgICAgdmlld0NvbGxlY3Rpb25UaXA6ICLQn9C+0YHQvNC+0YLRgNC40YLQtSDQstGB0LUg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyDQsiDQutC+0LvQu9C10LrRhtC40LgiLAogICAgICAgIGluQ29sbGVjdGlvbjogItCd0LXQtNC+0YHRgtGD0L/QvdC+INCyINGA0LXQttC40LzQtSDQutC+0LvQu9C10LrRhtC40L7QvdC40YDQvtCy0LDQvdC40Y8iLAogICAgICAgIGNhbnRGaW5kOiAi0JjQt9C+0LHRgNCw0LbQtdC90LjQtSDQvtGC0YHRg9GC0YHRgtCy0YPQtdGCINCyINC00L7QutGD0LzQtdC90YLQtSDQuNC70Lgg0YHQutGA0YvRgtC+INC4INC90LUg0LzQvtC20LXRgiDQsdGL0YLRjCDQvdCw0LnQtNC10L3QviEiLAogICAgICAgIGV4cG9ydEltYWdlczogItCt0LrRgdC/0L7RgNGC0LjRgNC+0LLQsNGC0Ywg0L/QvtC60LDQt9Cw0L3QvdGL0LUg0YPQstC10LvQuNGH0LXQvdC90YvQtSDQuNC30L7QsdGA0LDQttC10L3QuNGPIiwKICAgICAgICBleHBvcnRJbWFnZXNUaXA6ICLQrdC60YHQv9C+0YDRgtC40YDRg9C50YLQtSDQstGB0LUg0L7RgtC+0LHRgNCw0LbQsNC10LzRi9C1INC40LfQvtCx0YDQsNC20LXQvdC40Y8g0LIg0L3QvtCy0L7QtSDQvtC60L3QviIsCiAgICAgICAgZG93bmxvYWRJbWFnZTogItCh0LrQsNGH0LDRgtGMINCy0YHQtSDRgtC10LrRg9GJ0LjQtSIsCiAgICAgICAgZG93bmxvYWRJbWFnZVRpcDogItCh0LrQsNGH0LDQudGC0LUg0LLRgdC1INC+0YLQvtCx0YDQsNC20LDQtdC80YvQtSDQuNC30L7QsdGA0LDQttC10L3QuNGPINCyINGC0LXQutGD0YnQtdC5INCz0LDQu9C10YDQtdC1IiwKICAgICAgICBjb3B5SW1hZ2VzVXJsOiAi0JrQvtC/0LjRgNC+0LLQsNGC0Ywg0L/QvtC60LDQt9Cw0L3Ri9C1INGD0LLQtdC70LjRh9C10L3QvdGL0LUg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyIsCiAgICAgICAgY29weUltYWdlc1VybFRpcDogItCh0LrQvtC/0LjRgNGD0LnRgtC1INGB0YHRi9C70LrQuCDQstGB0LXRhSDQv9C+0LrQsNC30LDQvdC90YvRhSDQuNC30L7QsdGA0LDQttC10L3QuNC5INCx0L7Qu9GM0YjQtdCz0L4g0YDQsNC30LzQtdGA0LAiLAogICAgICAgIGNvcHlTdWNjZXNzOiAi0KHRgdGL0LvQutCwINGD0LLQtdC70LjRh9C10L3QvdC+0LPQviDQuNC30L7QsdGA0LDQttC10L3QuNGPICN0IyDRg9GB0L/QtdGI0L3QviDRgdC60L7Qv9C40YDQvtCy0LDQvdCwIiwKICAgICAgICBhdXRvUmVmcmVzaDogItCQ0LLRgtC+0L/QtdGA0LXQt9Cw0LPRgNGD0LfQutCwIiwKICAgICAgICBhdXRvUmVmcmVzaFRpcDogItCa0L7Qs9C00LAg0LTQvtC50LTRkdGC0LUg0LTQviDQv9C+0YHQu9C10LTQvdC40YUg0LjQt9C+0LHRgNCw0LbQtdC90LjQuSwg0L/RgNC+0LrRgNGD0YLQuNGC0LUg0LPQu9Cw0LLQvdC+0LUg0L7QutC90L4g0LLQvdC40Lcg0LTQu9GPINCw0LLRgtC+0LzQsNGC0LjRh9C10YHQutC+0Lkg0LfQsNCz0YDRg9C30LrQuCDQvdC+0LLRi9GFINC40LfQvtCx0YDQsNC20LXQvdC40LkuIiwKICAgICAgICBlbnRlckZ1bGxzYzogItCf0L7Qu9C90L7RjdC60YDQsNC90L3Ri9C5INGA0LXQttC40LwiLAogICAgICAgIGV4aXRGdWxsc2M6ICLQktGL0LnRgtC4INC40Lcg0L/QvtC70L3QvtGN0LrRgNCw0L3QvdC+0LPQviDRgNC10LbQuNC80LAiLAogICAgICAgIGNvbmZpZzogItCf0LDRgNCw0LzQtdGC0YDRiyIsCiAgICAgICAgb3BlbkNvbmZpZzogItCe0YLQutGA0YvRgtGMINC/0LDRgNCw0LzQtdGC0YDRiyIsCiAgICAgICAgcnVsZVJlcXVlc3Q6ICLQl9Cw0L/RgNC+0YEg0L/RgNCw0LLQuNC7IiwKICAgICAgICBjbG9zZUdhbGxlcnk6ICLQl9Cw0LrRgNGL0YLRjCDQs9Cw0LvQtdGA0LXRjiIsCiAgICAgICAgcmV0dXJuVG9HYWxsZXJ5OiAi0JLQtdGA0L3Rg9GC0YzRgdGPINCyINCz0LDQu9C10YDQtdGOIiwKICAgICAgICBwaWNJbmZvOiAi0J3QsNC20LzQuNGC0LUsINGH0YLQvtCx0Ysg0LjQt9C80LXQvdC40YLRjCIsCiAgICAgICAgcGljTm90ZTogItCX0LDQvNC10YLQutCwINC6INC40LfQvtCx0YDQsNC20LXQvdC40Y4iLAogICAgICAgIHVybEZpbHRlcjogItCk0LjQu9GM0YLRgNC+0LLQsNGC0Ywg0YHRgdGL0LvQutC4IiwKICAgICAgICB1cmxGaWx0ZXJUaXA6ICLQktCy0LXQtNC40YLQtSDQutC70Y7Rh9C10LLRi9C1INGB0LvQvtCy0LAg0LjQu9C4INGA0LXQs9GD0LvRj9GA0L3Ri9C1INCy0YvRgNCw0LbQtdC90LjRjyDQtNC70Y8g0YTQuNC70YzRgtGA0LDRhtC40Lgg0YHRgdGL0LvQvtC6IiwKICAgICAgICByZXNvbHV0aW9uOiAi0KDQsNC30YDQtdGI0LXQvdC40LUiLAogICAgICAgIHNjYWxlUmF0aW86ICLQmtC+0Y3RhNGE0LjRhtC40LXQvdGCINC80LDRgdGI0YLQsNCx0LjRgNC+0LLQsNC90LjRjyIsCiAgICAgICAgc2ltaWxhckltYWdlOiAi0J/QvtC40YHQuiDQv9C+INC40LfQvtCx0YDQsNC20LXQvdC40Y4iLAogICAgICAgIHNjYWxlOiAi0JzQsNGB0YjRgtCw0LEiLAogICAgICAgIGhvcml6b250YWxGbGlwOiAi0J7RgtGA0LDQt9C40YLRjCDQv9C+INCz0L7RgNC40LfQvtC90YLQsNC70LgiLAogICAgICAgIHZlcnRpY2FsRmxpcDogItCe0YLRgNCw0LfQuNGC0Ywg0L/QviDQstC10YDRgtC40LrQsNC70LgiLAogICAgICAgIGFjdHVhbEJ0bjogItCe0YLQutGA0YvRgtGMINC+0YDQuNCz0LjQvdCw0LsgKNCQKSIsCiAgICAgICAgc2VhcmNoQnRuOiAi0J3QsNC50YLQuCDQvtGA0LjQs9C40L3QsNC70YzQvdC+0LUg0LjQt9C+0LHRgNCw0LbQtdC90LjQtSAoUykiLAogICAgICAgIGdhbGxlcnlCdG46ICLQntGC0LrRgNGL0YLRjCDQs9Cw0LvQtdGA0LXRjiAoRykiLAogICAgICAgIGN1cnJlbnRCdG46ICLQntGC0LrRgNGL0YLRjCDRgtC10LrRg9GJ0LXQtSAoQykiLAogICAgICAgIG1hZ25pZmllckJ0bjogItCe0YLQutGA0YvRgtGMINC70YPQv9GDIChNKSIsCiAgICAgICAgcGljVGl0bGU6ICLQn9C+0LTQv9C40YHRjCDQuiDQuNC30L7QsdGA0LDQttC10L3QuNGOIiwKICAgICAgICBwaWNOdW06ICLQmtC+0LvQuNGH0LXRgdGC0LLQviDQuNC30L7QsdGA0LDQttC10L3QuNC5IiwKICAgICAgICBwaWNUaXBzOiAi0KPQtNC10YDQttC40LLQsNC50YLQtSBDdHJsLCDRh9GC0L7QsdGLINGD0LLQtdC70LjRh9C40YLRjCDQvNCw0YHRiNGC0LDQsSIsCiAgICAgICAgc2F2ZVBhZ2VUaXBzOiAi0JjRgdC/0L7Qu9GM0LfRg9C50YLQtSDCq9Ch0L7RhdGA0LDQvdC40YLRjCDRgdGC0YDQsNC90LjRhtGDINC60LDQusK7LCDRh9GC0L7QsdGLINGB0L7RhdGA0LDQvdC40YLRjCDQstGB0LUg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyIsCiAgICAgICAgZXhwb3J0SW1hZ2VzVXJsOiAi0K3QutGB0L/QvtGA0YIg0YHRgdGL0LvQutC4INC40LfQvtCx0YDQsNC20LXQvdC40LUiLAogICAgICAgIGV4cG9ydEltYWdlc1VybFBvcDogItCd0LDQttC80LjRgtC1IEN0cmwrQywg0YfRgtC+0LHRiyDRgdC60L7Qv9C40YDQvtCy0LDRgtGMINGB0YHRi9C70LrRgyDQvdCwINC40LfQvtCx0YDQsNC20LXQvdC40LUiLAogICAgICAgIGJlZ2luU2VhcmNoSW1nOiAi0KDQsNGB0L/QvtC30L3QsNCy0LDQvdC40LUg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyAjdCMuLi4iLAogICAgICAgIGZpbmROb1BpYzogItCe0YDQuNCz0LjQvdCw0LvRjNC90L7QtSDQuNC30L7QsdGA0LDQttC10L3QuNC1INC90LUg0L3QsNC50LTQtdC90L4iLAogICAgICAgIGZpbmRPdmVyQmVnaW5Mb2FkOiAi0JfQsNCy0LXRgNGI0LXQvdC+INGA0LDRgdC/0L7Qt9C90LDQstCw0L3QuNGPICN0Iywg0LLRgdC10LPQviDQvdCw0LnQtNC10L3QviAjdCMg0L/QvtC00YXQvtC00Y/RidC40YUg0LjQt9C+0LHRgNCw0LbQtdC90LjQuSwg0L3QsNGH0LjQvdCw0LXQvCDQt9Cw0LPRgNGD0LfQutGDINC/0LXRgNCy0L7Qs9C+IiwKICAgICAgICBsb2FkTmV4dFNpbWlsYXI6ICLQndC1INGD0LTQsNC70L7RgdGMINC30LDQs9GA0YPQt9C40YLRjCDQvtGA0LjQs9C40L3QsNC70YzQvdC+0LUg0LjQt9C+0LHRgNCw0LbQtdC90LjQtSwg0L/QvtC/0YDQvtCx0YPQudGC0LUg0LfQsNCz0YDRg9C30LjRgtGMINGB0LvQtdC00YPRjtGJ0LjQuSDRgNC10LfRg9C70YzRgtCw0YIuLi4iLAogICAgICAgIGxvYWRFcnJvcjogItCe0YjQuNCx0LrQsCDQt9Cw0LPRgNGD0LfQutC4IiwKICAgICAgICBvcGVuSG9tZVBhZ2U6ICLQndCw0LbQvNC40YLQtSDQt9C00LXRgdGMLCDRh9GC0L7QsdGLINC+0YLQutGA0YvRgtGMINC00L7QvNCw0YjQvdGO0Y4g0YHRgtGA0LDQvdC40YbRgyIsCiAgICAgICAgcG9zaXRpb246ICLQn9C+0LrQsNC30LDRgtGMINGA0LDRgdC/0L7Qu9C+0LbQtdC90LjQtSIsCiAgICAgICAgcG9zaXRpb25UaXBzOiAi0KfRgtC+0LHRiyDRgdC60YDRi9GC0YwsINC90LDQttC80LjRgtC1INGD0LTQtdGA0LbQuNCy0LDRjyBBbHQiLAogICAgICAgIHRvcExlZnQ6ICLQktC10YDRhdC90LjQuSDQu9C10LLRi9C5INGD0LPQvtC7INC40LfQvtCx0YDQsNC20LXQvdC40Y8iLAogICAgICAgIHRvcFJpZ2h0OiAi0JLQtdGA0YXQvdC40Lkg0L/RgNCw0LLRi9C5INGD0LPQvtC7INC40LfQvtCx0YDQsNC20LXQvdC40Y8iLAogICAgICAgIGJvdHRvbVJpZ2h0OiAi0J3QuNC20L3QuNC5INC/0YDQsNCy0YvQuSDRg9Cz0L7QuyDQuNC30L7QsdGA0LDQttC10L3QuNGPIiwKICAgICAgICBib3R0b21MZWZ0OiAi0J3QuNC20L3QuNC5INC70LXQstGL0Lkg0YPQs9C+0Lsg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyIsCiAgICAgICAgdG9wQ2VudGVyOiAi0J3QsNC0INC40LfQvtCx0YDQsNC20LXQvdC40LXQvCIsCiAgICAgICAgYm90dG9tQ2VudGVyOiAi0J/QvtC0INC40LfQvtCx0YDQsNC20LXQvdC40LXQvCIsCiAgICAgICAgZmxvYXRCYXI6ICLQn9C70LDQstCw0Y7RidCw0Y8g0L/QsNC90LXQu9GMIiwKICAgICAgICBwcmV2aWV3Rm9sbG93TW91c2U6ICLQl9Cw0YHRgtCw0LLQuNGC0Ywg0L/RgNC10LTQstCw0YDQuNGC0LXQu9GM0L3Ri9C5INC/0YDQvtGB0LzQvtGC0YAg0YHQu9C10LTQvtCy0LDRgtGMINC30LAg0YPQutCw0LfQsNGC0LXQu9C10Lwg0LzRi9GI0LgiLAogICAgICAgIHNob3dEZWxheTogItCX0LDQtNC10YDQttC60LAg0LTQviDQvtGC0L7QsdGA0LDQttC10L3QuNGPIiwKICAgICAgICBtczogItC80YEuIiwKICAgICAgICBoaWRlOiAi0KHQutGA0YvRgtGMIiwKICAgICAgICBoaWRlRGVsYXk6ICLQl9Cw0LTQtdGA0LbQutCwINC00L4g0YHQutGA0YvRgtC40Y8iLAogICAgICAgIGZvcmNlU2hvdzogItCY0LfQvtCx0YDQsNC20LXQvdC40Y8g0LHQtdC3INC80LDRgdGI0YLQsNCx0LjRgNC+0LLQsNC90LjRjywg0L/RgNC10LLRi9GI0LDRjtGJ0LjQtSDRjdGC0L7RgiDRgNCw0LfQvNC10YAsINC+0YLQvtCx0YDQsNC20LDRjtGCINC/0LvQsNCy0LDRjtGJ0YPRjiDQv9Cw0L3QtdC70YwiLAogICAgICAgIGZvcmNlU2hvd1RpcDogItCe0YLQvtCx0YDQsNC20LDRgtGMINC/0LvQsNCy0LDRjtGJ0YPRjiDQv9Cw0L3QtdC70YwsINC60L7Qs9C00LAg0YDQsNC30LzQtdGAINC90LXQvNCw0YHRiNGC0LDQsdC40YDQvtCy0LDQvdC90L7Qs9C+INC40LfQvtCx0YDQsNC20LXQvdC40Y8g0L/RgNC10LLRi9GI0LDQtdGCINGA0LDQt9C80LXRgCwg0YPRgdGC0LDQvdC+0LLQu9C10L3QvdGL0Lkg0L3QuNC20LUiLAogICAgICAgIHNpemVMaW1pdE9yOiAi0JTQvtC70LbQvdC+INCx0YvRgtGMINGB0L7QsdC70Y7QtNC10L3QviDRgtC+0LvRjNC60L4g0L7QtNC90L4g0LjQtyDQstGL0YjQtdGD0LrQsNC30LDQvdC90YvRhSDRg9GB0LvQvtCy0LjQuSDQtNC70LjQvdGLINC4INGI0LjRgNC40L3RiyIsCiAgICAgICAgcHg6ICLQv9C40LrRgS4iLAogICAgICAgIG1pblNpemVMaW1pdDogItCc0LDRgdGI0YLQsNCx0LjRgNC+0LLQsNGC0Ywg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyDRgdCy0LXRgNGFINGN0YLQvtCz0L4g0YDQsNC30LzQtdGA0LAg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0L/Qu9Cw0LLQsNGO0YnQtdC5INC/0LDQvdC10LvQuCIsCiAgICAgICAgbWluU2l6ZUxpbWl0VGlwOiAi0J/RgNC4INC80LDRgdGI0YLQsNCx0LjRgNC+0LLQsNC90LjQuCDQuNC30L7QsdGA0LDQttC10L3QuNGPICjQvtGA0LjQs9C40L3QsNC70YzQvdGL0Lkg0YDQsNC30LzQtdGAINC60L7RgtC+0YDQvtCz0L4g0L3QtSDRgdC+0LLQv9Cw0LTQsNC10YIg0YEg0YTQsNC60YLQuNGH0LXRgdC60LjQvCksINC60L7Qs9C00LAg0LTQu9C40L3QsCDQuCDRiNC40YDQuNC90LAg0LHQvtC70YzRiNC1INGD0YHRgtCw0L3QvtCy0LvQtdC90L3QvtCz0L4g0LfQvdCw0YfQtdC90LjRjywg0L7RgtC+0LHRgNCw0LbQsNC10YLRgdGPINC/0LvQsNCy0LDRjtGJ0LDRjyDQv9Cw0L3QtdC70YwuIiwKICAgICAgICBkZWZhdWx0U2l6ZUxpbWl0OiAi0KTQuNC70YzRgtGAINGA0LDQt9C80LXRgNCwINCz0LDQu9C10YDQtdC4INC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOIiwKICAgICAgICBsaXN0ZW5CZzogItCf0YDQvtGB0LvRg9GI0LjQstCw0YLRjCDRhNC+0L3QvtCy0YvQtSDQuNC30L7QsdGA0LDQttC10L3QuNGPIiwKICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICLQptCy0LXRgiDRhNC+0L3QsCIsCiAgICAgICAgbGlzdGVuQmdUaXA6ICLQntGC0L7QsdGA0LDQttCw0LXRgiDQv9C70LDQstCw0Y7RidGD0Y4g0L/QsNC90LXQu9GMINC90LAg0Y3Qu9C10LzQtdC90YLQtSDRgSDRhNC+0L3QvtCy0YvQvCDQuNC30L7QsdGA0LDQttC10L3QuNC10LwiLAogICAgICAgIGJ1dG9uT3JkZXI6ICLQodC+0YDRgtC40YDQvtCy0LrQsCDQuNC60L7QvdC+0Log0L/Qu9Cw0LLQsNGO0YnQtdC5INC/0LDQvdC10LvQuCIsCiAgICAgICAga2V5c0VuYWJsZTogItCS0LrQu9GO0YfQuNGC0Ywg0YHQu9C10LTRg9GO0YnQuNC1INGB0L7Rh9C10YLQsNC90LjRjyDQutC70LDQstC40YgiLAogICAgICAgIGtleXNBY3R1YWw6ICLQntGC0LrRgNGL0YLRjCDRg9Cy0LXQu9C40YfQtdC90L3QvtC1INC40LfQvtCx0YDQsNC20LXQvdC40LUiLAogICAgICAgIGtleXNBY3R1YWxUaXA6ICLQmtC+0LPQtNCwINC/0L7Rj9Cy0LjRgtGB0Y8g0L/Qu9Cw0LLQsNGO0YnQsNGPINC/0LDQvdC10LvRjCwg0L3QsNC20LzQuNGC0LUg0Y3RgtGDINC60L3QvtC/0LrRgywg0YfRgtC+0LHRiyDQvtGC0LrRgNGL0YLRjCDRg9Cy0LXQu9C40YfQtdC90L3QvtC1INC40LfQvtCx0YDQsNC20LXQvdC40LUiLAogICAgICAgIGtleXNTZWFyY2g6ICLQndCw0LnRgtC4INC+0YDQuNCz0LjQvdCw0LvRjNC90L7QtSDQuNC30L7QsdGA0LDQttC10L3QuNC1IiwKICAgICAgICBrZXlzU2VhcmNoVGlwOiAi0JrQvtCz0LTQsCDQv9C+0Y/QstC40YLRgdGPINC/0LvQsNCy0LDRjtGJ0LDRjyDQv9Cw0L3QtdC70YwsINC90LDQttC80LjRgtC1INGN0YLRgyDQutC90L7Qv9C60YMsINGH0YLQvtCx0Ysg0L3QsNC50YLQuCDQvtGA0LjQs9C40L3QsNC70YzQvdC+0LUg0LjQt9C+0LHRgNCw0LbQtdC90LjQtSIsCiAgICAgICAgaGVhZFNlYXJjaFRpcDogItCf0L7QuNGB0Log0LjQt9C+0LHRgNCw0LbQtdC90LjQuSIsCiAgICAgICAgaGVhZFNlYXJjaEFsbDogItCS0YvQv9C+0LvQvdGP0LnRgtC1INC/0L7QuNGB0Log0L/QviDQstGB0LXQvNGDINCy0YvRiNC10L/QtdGA0LXRh9C40YHQu9C10L3QvdC+0LzRgyIsCiAgICAgICAga2V5c0N1cnJlbnQ6ICLQntGC0LrRgNGL0YLRjCDRgtC10LrRg9GJ0LXQtSDQuNC30L7QsdGA0LDQttC10L3QuNC1IiwKICAgICAgICBrZXlzQ3VycmVudFRpcDogItCa0L7Qs9C00LAg0L/QvtGP0LLQuNGC0YHRjyDQv9C70LDQstCw0Y7RidCw0Y8gINC/0LDQvdC10LvRjCwg0L3QsNC20LzQuNGC0LUg0Y3RgtGDINC60L3QvtC/0LrRgywg0YfRgtC+0LHRiyDQvtGC0LrRgNGL0YLRjCDQvtGC0L7QsdGA0LDQttCw0LXQvNC+0LUg0LIg0LTQsNC90L3Ri9C5INC80L7QvNC10L3RgiDQuNC30L7QsdGA0LDQttC10L3QuNC1IiwKICAgICAgICBrZXlzTWFnbmlmaWVyOiAi0J7RgtC60YDRi9GC0Ywg0LvRg9C/0YMiLAogICAgICAgIGtleXNNYWduaWZpZXJUaXA6ICLQmtC+0LPQtNCwINC/0L7Rj9Cy0LjRgtGB0Y8g0L/Qu9Cw0LLQsNGO0YnQsNGPINC/0LDQvdC10LvRjCwg0L3QsNC20LzQuNGC0LUg0Y3RgtGDINC60L3QvtC/0LrRgywg0YfRgtC+0LHRiyDQvtGC0LrRgNGL0YLRjCDQu9GD0L/RgyDQuCDRgNCw0YHRgdC80L7RgtGA0LXRgtGMINC40LfQvtCx0YDQsNC20LXQvdC40LUiLAogICAgICAgIGtleXNHYWxsZXJ5OiAi0J7RgtC60YDRi9GC0Ywg0LPQsNC70LXRgNC10Y4gKNC/0LvRjtGBINGE0YPQvdC60YbQuNC+0L3QsNC70YzQvdGL0LUg0LrQu9Cw0LLQuNGI0Lgg0LTQu9GPINCz0LvQvtCx0LDQu9GM0L3QvtCz0L4pIiwKICAgICAgICBrZXlzR2FsbGVyeVRpcDogItCa0L7Qs9C00LAg0L/QvtGP0LLQuNGC0YHRjyDQv9C70LDQstCw0Y7RidCw0Y8g0L/QsNC90LXQu9GMLCDQvdCw0LbQvNC40YLQtSDRjdGC0YMg0LrQvdC+0L/QutGDLCDRh9GC0L7QsdGLINC+0YLQutGA0YvRgtGMINCz0LDQu9C10YDQtdGOIiwKICAgICAgICBvcGVuR2FsbGVyeTogItCe0YLQutGA0YvRgtGMINCz0LDQu9C10YDQtdGOIiwKICAgICAgICBtYWduaWZpZXI6ICLQm9GD0L/QsCIsCiAgICAgICAgbWFnbmlmaWVyUmFkaXVzOiAi0KDQsNC00LjRg9GBINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOIiwKICAgICAgICBtYWduaWZpZXJXaGVlbFpvb21FbmFibGVkOiAi0JLQutC70Y7Rh9C40YLRjCDQvNCw0YHRiNGC0LDQsdC40YDQvtCy0LDQvdC40LUg0L/RgNC+0LrRgNGD0YLQutC+0Lkg0LrQvtC70ZHRgdC40LrQvtC8INC80YvRiNC4IiwKICAgICAgICBtYWduaWZpZXJXaGVlbFpvb21SYW5nZTogItCc0L3QvtC20LjRgtC10LvRjCDQvNCw0YHRiNGC0LDQsdC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0LrRgNGD0YLQutC+0Lkg0LrQvtC70ZHRgdC40LrQvtC8INC80YvRiNC60LgiLAogICAgICAgIG1hZ25pZmllclNjYWxlSW1hZ2U6ICJab29tIGltYWdlIGJ5IHdoZWVsIiwKICAgICAgICBnYWxsZXJ5OiAi0JPQsNC70LXRgNC10Y8iLAogICAgICAgIGdhbGxlcnlGaXRUb1NjcmVlbjogItCc0LDRgdGI0YLQsNCx0LjRgNC+0LLQsNGC0Ywg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyDQv9C+0LQg0YDQsNC30LzQtdGAINGN0LrRgNCw0L3QsCIsCiAgICAgICAgZ2FsbGVyeUZpdFRvU2NyZWVuU21hbGw6ICLQnNCw0LvQtdC90YzQutC40LUg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyDRgtCw0LrQttC1INC80LDRgdGI0YLQsNCx0LjRgNGD0LXRgtGB0Y8g0LIg0YHQvtC+0YLQstC10YLRgdGC0LLQuNC4INGBINGA0LDQt9C80LXRgNC+0Lwg0Y3QutGA0LDQvdCwIiwKICAgICAgICBnYWxsZXJ5Rml0VG9TY3JlZW5UaXA6ICLQnNC10YLQvtC0INCw0LTQsNC/0YLQsNGG0LjQuCAtINGB0L7QtNC10YDQttCw0YLRjCwg0LAg0L3QtSDQv9C+0LrRgNGL0LLQsNGC0YwiLAogICAgICAgIGdhbGxlcnlTY3JvbGxFbmRUb0NoYW5nZTogItCf0LXRgNC10LrQu9GO0YfQsNGC0Ywg0LjQt9C+0LHRgNCw0LbQtdC90LjQtSDQv9C+0YHQu9C1INC/0YDQvtC60YDRg9GC0LrQuCDQtNC+INC60L7QvdGG0LAg0LLQvdC40LciLAogICAgICAgIGdhbGxlcnlTY3JvbGxFbmRUb0NoYW5nZVRpcDogItCg0LDQsdC+0YLQsNC10YIg0YLQvtC70YzQutC+INC/0L7RgdC70LUg0L7RgtC80LXQvdGLINC/0YDQtdC00YvQtNGD0YnQtdCz0L4g0L/QsNGA0LDQvNC10YLRgNCwIiwKICAgICAgICBnYWxsZXJ5RXhwb3J0VHlwZTogItCt0LrRgdC/0L7RgNGCINGB0L7RgNGC0LjRgNC+0LLQutC4INC40LfQvtCx0YDQsNC20LXQvdC40Lkg0L/QviDRg9C80L7Qu9GH0LDQvdC40Y4iLAogICAgICAgIGdyaWQ6ICLQodC10YLQutCwIiwKICAgICAgICBncmlkQmlnOiAi0J7RgNC40LPQuNC90LDQu9GM0L3QvtC1INC40LfQvtCx0YDQsNC20LXQvdC40LUg0LIg0YHQtdGC0LrQtSIsCiAgICAgICAgbGlzdDogItCh0L/QuNGB0L7QuiIsCiAgICAgICAgZ2FsbGVyeUF1dG9Mb2FkOiAi0JDQstGC0L7Qt9Cw0LPRgNGD0LbQsNGC0Ywg0LHQvtC70YzRiNC1INC40LfQvtCx0YDQsNC20LXQvdC40LkiLAogICAgICAgIGdhbGxlcnlMb2FkQWxsOiAi0JDQstGC0L7QvNCw0YLQuNGH0LXRgdC60Lgg0L7QsdGA0LDQsdCw0YLRi9Cy0LDRgtGMINCy0YHQtSDRgdGC0YDQsNC90LjRhtGLINC/0YDQuCDQt9Cw0LPRgNGD0LfQutC1INCx0L7Qu9GM0YjQtdCz0L4g0LrQvtC70LjRh9C10YHRgtCy0LAg0LjQt9C+0LHRgNCw0LbQtdC90LjQuSIsCiAgICAgICAgZ2FsbGVyeUxvYWRBbGxUaXA6ICLQldGB0LvQuCDRgdGC0YDQsNC90LjRhiDRgdC70LjRiNC60L7QvCDQvNC90L7Qs9C+LCDRjdGC0L4g0LzQvtC20LXRgiDQv9C+0LLQu9C40Y/RgtGMINC90LAg0YHQutC+0YDQvtGB0YLRjCDRgNCw0LHQvtGC0YsiLAogICAgICAgIGdhbGxlcnlEb3dubG9hZFdpdGhaaXA6ICLQodC60LDRh9C40LLQsNGC0Ywg0LLRgdC1INCyIHppcC3QsNGA0YXQuNCy0LUiLAogICAgICAgIGdhbGxlcnlEb3dubG9hZFdpdGhaaXBBbGVydDogItCf0L7QtNCz0L7RgtC+0LLQutCwINGB0LrQsNGH0LjQstCw0L3QuNGPLCDQv9C+0LTQvtC20LTQuNGC0LUg0L3QtdGB0LrQvtC70YzQutC+INGB0LXQutGD0L3QtCIsCiAgICAgICAgZ2FsbGVyeVNjYWxlU21hbGxTaXplMTogItCV0YHQu9C4INCy0YvRgdC+0YLQsCDQuCDRiNC40YDQuNC90LAg0YTQsNC60YLQuNGH0LXRgdC60L7Qs9C+INGA0LDQt9C80LXRgNCwINC80LXQvdGM0YjQtSAiLAogICAgICAgIGdhbGxlcnlTY2FsZVNtYWxsU2l6ZTI6ICIg0L/QuNC60YEuLCDRgtC+INC+0L3QviDQutC70LDRgdGB0LjRhNC40YbQuNGA0YPQtdGC0YHRjyDQutCw0Log0LjQt9C+0LHRgNCw0LbQtdC90LjQtSDQvNCw0LvQtdC90YzQutC+0LPQviDRgNCw0LfQvNC10YDQsCIsCiAgICAgICAgZ2FsbGVyeVNob3dTbWFsbFNpemU6ICLQn9C+INGD0LzQvtC70YfQsNC90LjRjiDQvtGC0L7QsdGA0LDQttCw0YLRjCDQuNC30L7QsdGA0LDQttC10L3QuNGPINC80LDQu9C10L3RjNC60L7Qs9C+INGA0LDQt9C80LXRgNCwIiwKICAgICAgICBnYWxsZXJ5VHJhbnNpdGlvbjogItCe0YLQvtCx0YDQsNC20LDRgtGMINGN0YTRhNC10LrRgtGLINC/0LXRgNC10LrQu9GO0YfQtdC90LjRjyDQuNC30L7QsdGA0LDQttC10L3QuNC5INCyINCz0LDQu9C10YDQtdC1IiwKICAgICAgICBnYWxsZXJ5U2lkZWJhclBvc2l0aW9uOiAi0KDQsNGB0L/QvtC70L7QttC10L3QuNC1INC/0LDQvdC10LvQuCDQuNC60L7QvdC+0LoiLAogICAgICAgIGJvdHRvbTogItCh0L3QuNC30YMiLAogICAgICAgIHJpZ2h0OiAi0KHQv9GA0LDQstCwIiwKICAgICAgICBsZWZ0OiAi0KHQu9C10LLQsCIsCiAgICAgICAgdG9wOiAi0KHQstC10YDRhdGDIiwKICAgICAgICBnYWxsZXJ5U2lkZWJhclNpemU6ICLQktGL0YHQvtGC0LAiLAogICAgICAgIGdhbGxlcnlTaWRlYmFyU2l6ZVRpcDogItCS0YvRgdC+0YLQsCAo0L/RgNC4INCz0L7RgNC40LfQvtC90YLQsNC70YzQvdC+0Lwg0YDQsNGB0L/QvtC70L7QttC10L3QuNC4KSDQuNC70Lgg0YjQuNGA0LjQvdCwICjQv9GA0Lgg0LLQtdGA0YLQuNC60LDQu9GM0L3QvtC8INGA0LDRgdC/0L7Qu9C+0LbQtdC90LjQuCkg0L/QsNC90LXQu9C4INC40LrQvtC90L7QuiIsCiAgICAgICAgZ2FsbGVyeU1heDE6ICLQnNCw0LrRgdC40LzQsNC70YzQvdC+0LUg0LrQvtC70LjRh9C10YHRgtCy0L4g0LjQt9C+0LHRgNCw0LbQtdC90LjQuSDQtNC70Y8gIiwKICAgICAgICBnYWxsZXJ5TWF4MjogIiDQv9GA0LXQtNC/0YDQvtGB0LzQvtGC0YDQsCAo0YHQutC+0LvRjNC60L4g0LTQviDQuCDQv9C+0YHQu9C1KSIsCiAgICAgICAgZ2FsbGVyeUF1dG9ab29tOiAi0JLQtdGA0L3Rg9GC0Ywg0LzQsNGB0YjRgtCw0LEg0L3QsCAxMDAlIChjaHJvbWUpIiwKICAgICAgICBnYWxsZXJ5QXV0b1pvb21UaXA6ICLQldGB0LvQuCDQtdGB0YLRjCDRg9Cy0LXQu9C40YfQtdC90LjQtSwg0LjQt9C80LXQvdC40YLQtSDQvNCw0YHRiNGC0LDQsSDQuNC30L7QsdGA0LDQttC10L3QuNGPINC4INCx0L7QutC+0LLQvtC5INC/0LDQvdC10LvQuCDQvtCx0YDQsNGC0L3QviDQvdCwIDEwMCUsINGH0YLQvtCx0Ysg0YPQstC10LvQuNGH0LjRgtGMINCy0LjQt9GD0LDQu9GM0L3Rg9GOINC+0LHQu9Cw0YHRgtGMICjQtNC+0L/Rg9GB0YLQuNC80L4g0YLQvtC70YzQutC+INCyIENocm9tZSkiLAogICAgICAgIGdhbGxlcnlEZXNjcmlwdGlvbkxlbmd0aDE6ICLQnNCw0LrRgS4g0YjQuNGA0LjQvdCwINC60L7QvNC80LXQvdGC0LDRgNC40Y8g0YHQvtGB0YLQsNCy0LvRj9C10YIiLAogICAgICAgIGdhbGxlcnlEZXNjcmlwdGlvbkxlbmd0aDI6ICIg0YHQuNC80LLQvtC70LAiLAogICAgICAgIGdhbGxlcnlBdXRvT3BlblNpdGVzOiAi0JDQstGC0L7QvtGC0LrRgNGL0LLQsNGC0Ywg0YHRgdGL0LvQutC4INC/0YDQsNCy0LjQu9CwINCz0LDQu9C10YDQtdC4LCDQv9C+INC+0LTQvdC+0Lkg0YHRgtGA0L7QutC1INC30LAg0YDQsNC3LCDQuCDQsNCy0YLQvtGA0LDRgdGI0LjRgNGP0YLRjCDQs9Cw0LvQtdGA0LXRjiwg0LXRgdC70Lgg0L7QvdC+INC90LDRh9C40L3QsNC10YLRgdGPINGBIEAiLAogICAgICAgIGRpc2FibGVLZXlTaXRlczogItCf0L7RgdGC0L7Rj9C90L3Ri9C1IFVSTC3QsNC00YDQtdGB0LAg0LTQu9GPINC+0YLQutC70Y7Rh9C10L3QuNGPINGB0L7Rh9C10YLQsNC90LjQuSDQutC70LDQstC40YgsINC/0L4g0L7QtNC90L7QvNGDINCyINGB0YLRgNC+0LrQtSIsCiAgICAgICAgYXV0b09wZW5WaWV3bW9yZTogItCQ0LLRgtC+0YDQsNGB0YjQuNGA0Y/RgtGMINC/0YDQuCDQvtGC0LrRgNGL0YLQuNC4INCz0LDQu9C10YDQtdC4IiwKICAgICAgICBnYWxsZXJ5U2VhcmNoRGF0YTogItCf0L7QuNGB0Log0L3QsNGB0YLRgNC+0LXQuiDRgdCw0LnRgtCwLCDQvtGH0LjRgdGC0LrQsCDQuCDQstC+0YHRgdGC0LDQvdC+0LLQu9C10L3QuNC1IiwKICAgICAgICBnYWxsZXJ5RWRpdFNpdGU6ICLQodCw0LnRgiDQvtC90LvQsNC50L0t0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyIsCiAgICAgICAgaW1nV2luZG93OiAi0J7QutC90L4g0LjQt9C+0LHRgNCw0LbQtdC90LjRjyIsCiAgICAgICAgaW1nV2luZG93Rml0VG9TY3JlZW46ICLQkNC00LDQv9GC0LjRgNC+0LLQsNGC0Ywg0L/QvtC0INGA0LDQt9C80LXRgCDRjdC60YDQsNC90LAiLAogICAgICAgIGltZ1dpbmRvd0ZpdFRvU2NyZWVuVGlwOiAi0JzQtdGC0L7QtCDQsNC00LDQv9GC0LDRhtC40LggLSBjb250YWluLCDQsCDQvdC1IGNvdmVyIiwKICAgICAgICBpbWdXaW5kb3dGaXRUb1NjcmVlbldoZW5TbWFsbDogItCU0LDQttC1INC80LDQu9C10L3RjNC60LjQtSDQuNC30L7QsdGA0LDQttC10L3QuNGPINGA0LDRgdGC0Y/Qs9C40LLQsNGO0YLRgdGPINC/0L4g0YDQsNC30LzQtdGA0YMg0Y3QutGA0LDQvdCwIiwKICAgICAgICBpbWdXaW5kb3dEZWZhdWx0VG9vbDogItCY0L3RgdGC0YDRg9C80LXQvdGCLCDQstGL0LHRgNCw0L3QvdGL0Lkg0L/QviDRg9C80L7Qu9GH0LDQvdC40Y4g0L/RgNC4INC+0YLQutGA0YvRgtC40Lgg0L7QutC90LAiLAogICAgICAgIGhhbmQ6ICLQl9Cw0YXQstCw0YIiLAogICAgICAgIHJvdGF0ZTogItCS0YDQsNGJ0LXQvdC40LUiLAogICAgICAgIHpvb206ICLQnNCw0YHRiNGC0LDQsSIsCiAgICAgICAgaW1nV2luZG93RXNjS2V5OiAi0J3QsNC20LzQuNGC0LUgRXNjINC00LvRjyDQt9Cw0LrRgNGL0YLQuNGPIiwKICAgICAgICBpbWdXaW5kb3dEYmxDbGlja0ltZ1dpbmRvdzogItCU0LLQsNC20LTRiyDRidGR0LvQutC90LjRgtC1INC/0L4g0L7QutC90YMg0YEg0LjQt9C+0LHRgNCw0LbQtdC90LjQtdC8INC00LvRjyDQt9Cw0LrRgNGL0YLQuNGPIiwKICAgICAgICBpbWdXaW5kb3dDbGlja091dHNpZGU6ICLQqdGR0LvQutC90LjRgtC1INC30LAg0L/RgNC10LTQtdC70LDQvNC4INC40LfQvtCx0YDQsNC20LXQvdC40Y8gKNC+0LLQtdGA0LvQtdC10LwpINC00LvRjyDQt9Cw0LrRgNGL0YLQuNGPIiwKICAgICAgICBpbWdXaW5kb3dDbGlja091dHNpZGVUaXA6ICLQlNC10LnRgdGC0LLRg9C10YIg0YLQvtC70YzQutC+INC/0YDQuCDQvtGC0L7QsdGA0LDQttC10L3QuNC4INC+0LLQtdGA0LvQtdGPIiwKICAgICAgICBub25lOiAi0J3QuNGH0LXQs9C+IiwKICAgICAgICBjbGljazogItCp0LXQu9GH0L7QuiIsCiAgICAgICAgZGJsY2xpY2s6ICLQlNCy0L7QudC90L7QuSDRidC10LvRh9C+0LoiLAogICAgICAgIGltZ1dpbmRvd092ZXJsYXllclNob3duOiAi0J7QstC10YDQu9C10LkiLAogICAgICAgIGltZ1dpbmRvd092ZXJsYXllckNvbG9yOiAi0KbQstC10YIg0Lgg0L3QtdC/0YDQvtC30YDQsNGH0L3QvtGB0YLRjCIsCiAgICAgICAgaW1nV2luZG93U2hpZnRSb3RhdGVTdGVwMTogItCf0YDQuCDQstGA0LDRidC10L3QuNC4INGD0LTQtdGA0LbQuNCy0LDQudGC0LUgU2hpZnQg0Lgg0LLRgNCw0YnQsNC50YLQtSDRgSDRiNCw0LPQvtC8INCyIiwKICAgICAgICBpbWdXaW5kb3dTaGlmdFJvdGF0ZVN0ZXAyOiAiINCz0YDQsNC00YPRgdC+0LIiLAogICAgICAgIGltZ1dpbmRvd01vdXNlV2hlZWxab29tOiAi0JzQsNGB0YjRgtCw0LHQuNGA0L7QstCw0L3QuNC1INC60L7Qu9C10YHQvtC8INC/0YDQvtC60YDRg9GC0LrQuCIsCiAgICAgICAgaW1nV2luZG93Wm9vbVJhbmdlOiAi0JzQsNGB0YjRgtCw0LHQuNGA0L7QstCw0L3QuNC1INC60L7Qu9C10YHQvtC8INC/0YDQvtC60YDRg9GC0LrQuCIsCiAgICAgICAgaW1nV2luZG93Wm9vbVJhbmdlVGlwOiAi0JzQsNGB0YjRgtCw0LHQuNGA0L7QstCw0L3QuNC1ICjQtNC+0LvQttC90L4g0LHRi9GC0Ywg0L/QvtC70L7QttC40YLQtdC70YzQvdGL0Lwg0YfQuNGB0LvQvtC8KSIsCiAgICAgICAgb3RoZXJzOiAi0JTRgNGD0LPQvtC1IiwKICAgICAgICB3YWl0SW1nTG9hZDogItCf0L7QtNC+0LbQtNC40YLQtSwg0L/QvtC60LAg0LjQt9C+0LHRgNCw0LbQtdC90LjQtSDQv9C+0LvQvdC+0YHRgtGM0Y4g0LfQsNCz0YDRg9C30LjRgtGB0Y8sINC/0YDQtdC20LTQtSDRh9C10Lwg0LLRi9C/0L7Qu9C90Y/RgtGMINGC0LDQutC40LUg0L7Qv9C10YDQsNGG0LjQuCwg0LrQsNC6INC80LDRgdGI0YLQsNCx0LjRgNC+0LLQsNC90LjQtSDQstC+INCy0YHQv9C70YvQstCw0Y7RidC10Lwg0L7QutC90LUuIiwKICAgICAgICB3YWl0SW1nTG9hZFRpcDogItCj0LTQtdGA0LbQuNCy0LDRjyBDdHJsLCDQvNC+0LbQvdC+INCy0YDQtdC80LXQvdC90L4g0LLRi9C/0L7Qu9C90LjRgtGMINC90LDRgdGC0YDQvtC50LrRgywg0L/RgNC+0YLQuNCy0L7Qv9C+0LvQvtC20L3Rg9GOINGN0YLQvtC5IiwKICAgICAgICBkZWJ1ZzogItCe0YLQu9Cw0LTQutCwIiwKICAgICAgICBjdXN0b21SdWxlczogItCf0L7Qu9GM0LfQvtCy0LDRgtC10LvRjNGB0LrQuNC1INC/0YDQsNCy0LjQu9CwINC00LvRjyDQsdC+0LvRjNGI0LjRhSDQuNC30L7QsdGA0LDQttC10L3QuNC5IiwKICAgICAgICBmaXJzdEVuZ2luZTogItCf0YDQtdC00L/QvtGH0LjRgtCw0LXQvNCw0Y8g0L/QvtC40YHQutC+0LLQsNGPINGB0LjRgdGC0LXQvNCwIiwKICAgICAgICByZWZyZXNoV2hlbkVycm9yOiAi0J7RiNC40LHQutCwINGH0YLQtdC90LjRjywg0L3QsNC20LzQuNGC0LUg0LTQu9GPINC/0LXRgNC10LfQsNCz0YDRg9C30LrQuCIsCiAgICAgICAgc3dpdGNoU2xpZGU6ICLQn9C10YDQtdC60LvRjtGH0LjRgtGMINC90LjQttC90Y7RjiDQv9Cw0L3QtdC70YwiLAogICAgICAgIHZpZXdtb3JlOiAi0KDQsNC30LLQtdGA0L3Rg9GC0Ywg0LHQvtC70YzRiNC1IiwKICAgICAgICBjb3VudERvd246ICLQntCx0YDQsNGC0L3Ri9C5INC+0YLRgdGH0ZHRgiIsCiAgICAgICAgY3VzdG9tTGFuZzogItCv0LfRi9C6IiwKICAgICAgICBkZWZhdWx0TGFuZzogItCQ0LLRgtC+0LLRi9Cx0L7RgCIsCiAgICAgICAgaGlkZUljb246ICLQodC60YDRi9GC0Ywg0LjQutC+0L3QutGDIiwKICAgICAgICBpbml0U2hvdzogItCY0L3QstC10YDRgtC40YDQvtCy0LDRgtGMINGB0L7Rh9C10YLQsNC90LjRjyDQutC70LDQstC40YgsINC/0YDQtdC00L/RgNC+0YHQvNC+0YLRgCDQvtGC0L7QsdGA0LDQttCw0LXRgtGB0Y8g0L/QviDRg9C80L7Qu9GH0LDQvdC40Y4iLAogICAgICAgIHN0YXlPdXQ6ICLQodC00LXQu9Cw0YLRjCDRgtCw0LosINGH0YLQvtCx0Ysg0L/Qu9Cw0LLQsNGO0YnQsNGPINC/0LDQvdC10LvRjCDQvtGC0L7QsdGA0LDQttCw0LvQsNGB0Ywg0LfQsCDQv9GA0LXQtNC10LvQsNC80Lgg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyIsCiAgICAgICAgZ2FsbGVyeURvd25sb2FkR2FwOiAi0JjQvdGC0LXRgNCy0LDQuyDRgdC60LDRh9C40LLQsNC90LjRjyIsCiAgICAgICAgZm9ybWF0Q29udmVyc2lvbjogItCf0YDQtdC+0LHRgNCw0LfQvtCy0YvQstCw0YLRjCDRhNC+0YDQvNCw0YIg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyDQv9GA0Lgg0LfQsNCz0YDRg9C30LrQtSwg0L/QviDQvtC00L3QvtC5INGB0YLRgNC+0LrQtSDQsiDRgdGC0YDQvtC60LUiLAogICAgICAgIGdhbGxlcnlEaXNhYmxlQXJyb3c6ICLQntGC0LrQu9GO0YfQuNGC0Ywg0LrQu9Cw0LLQuNGI0Lgg0YHQviDRgdGC0YDQtdC70LrQsNC80LgiLAogICAgICAgIHBvc2l0aW9uRml4ZWQ6ICLQpNC40LrRgdC40YDQvtCy0LDQvdC90LDRjyDQv9C+0LfQuNGG0LjRjyIsCiAgICAgICAgc3dpdGNoU3RvcmVMb2M6ICLQodC+0YXRgNCw0L3Rj9GC0Ywg0L/QvtC30LjRhtC40Y4g0LIg0L/QsNC80Y/RgtC4INCy0L4g0LLRgNC10LzRjyDQv9C10YDQtdC60LvRjtGH0LXQvdC40Y8iCiAgICB9Cn0sCnsKICAgIG5hbWU6ICJUw7xya8OnZSIsCiAgICBtYXRjaDogWyJ0ciIsICJ0ci1UUiJdLAogICAgbGFuZzogewogICAgICAgIC8vVHVya2lzaCBieSBQVUZGMU4uCiAgICAgICAgc2F2ZUJ0bjogIlRhbWFtIiwKICAgICAgICBzYXZlTmFtZTogIsSwc21pIGtheWRldCIsCiAgICAgICAgc2F2ZU5hbWVUaXA6ICJHw7Zyw7xudMO8bGVyaSBpc2ltbGUga2F5ZGV0IiwKICAgICAgICBzYXZlTmFtZUFkZFRpdGxlOiAiS2F5ZGVkZXJrZW4gc2F5ZmEgYmHFn2zEscSfxLEgZWtsZXlpbiIsCiAgICAgICAgc2l6ZTogImJveXV0IiwKICAgICAgICBhbGw6ICJoZXBzaSIsCiAgICAgICAgYmlnU2l6ZTogImLDvHnDvGsgYm95IiwKICAgICAgICBpY29uU2l6ZTogInNpbWdlIiwKICAgICAgICBhcmlhMkhvc3Q6ICJBcmlhMiBTdW51Y3VzdSIsCiAgICAgICAgYXJpYTJUb2tlbjogIkFyaWEyIEJlbGlydGVjaSIsCiAgICAgICAgcG9zdDJBcmlhMjogIkFyeWEyJ3llIGfDtm5kZXIiLAogICAgICAgIGRlZmF1bHQ6ICJWYXJzYXnEsWxhbiIsCiAgICAgICAgdGV4dEZpcnN0OiAiVmFyc2Egw7ZuY2UgYmlsZ2kiLAogICAgICAgIG9ubHlVcmw6ICJZYWxuxLF6Y2EgVVJMIGlsZSIsCiAgICAgICAgdXJsQW5kVGV4dDogIlVSTCArIEJpbGdpIiwKICAgICAgICBkb3dubG9hZDogIsSwbmRpciIsCiAgICAgICAgc2F2ZUJ0blRpcHM6ICJiYXrEsSBheWFybGFyxLFuIGV0a2lsaSBvbGFiaWxtZXNpIGnDp2luIHNheWZhbsSxbiB5ZW5pbGVubWVzaSBnZXJla2lyIiwKICAgICAgICBhZGRpdGlvbmFsRmVhdHVyZTogIkVrIMO2emVsbGlrbGVyLCBhbHRhIGJhc8SxbGTEscSfxLFuZGEgZXRraW5sZcWfaXIiLAogICAgICAgIGludmVydEFkZGl0aW9uYWxGZWF0dXJlOiAiS8Sxc2F5b2wgdHXFn2xhcsSxbsSxIHRlcnMgw6dldmlyLCB2YXJzYXnEsWxhbiBvbGFyYWsgZWsgw7Z6ZWxsaWtsZXJpIGt1bGxhbiIsCiAgICAgICAgY29weTogIkJhxJ9sYW50xLF5xLEga29weWFsYSIsCiAgICAgICAgY29weUltZzogIkfDtnLDvG50w7wgdmVyaWxlcmluaSBrb3B5YWxhIiwKICAgICAgICBvcGVuSW5OZXdUYWI6ICJZZW5pIFNla21lZGUgQcOnIiwKICAgICAgICBjbG9zZUJ0bjogIsSwcHRhbCBFdCIsCiAgICAgICAgaW52ZXJ0QnRuOiAiVGVyc2luZSDDh2V2aXIiLAogICAgICAgIGNvbXBhcmVCdG46ICJLxLF5YXNsYW1hayIsCiAgICAgICAgc2VsZWN0QWxsQnRuOiAiSGVwc2luaSBzZcOnIiwKICAgICAgICBjbG9zZUJ0blRpcHM6ICJidSBheWFyxLEgaXB0YWwgZXQgdmUgdMO8bSBheWFybGFyxLEgdmFyc2F5xLFsYW4gaGFsaW5lIGTDtm5kw7xyIiwKICAgICAgICByZXNldExpbms6ICJBeWFybGFyxLEgdmFyc2F5xLFsYW5hIGTDtm5kw7xyIiwKICAgICAgICByZXNldExpbmtUaXBzOiAidMO8bSBheWFybGFyxLEgdmFyc2F5xLFsYW4gZGXEn2VybGVyaW5lIGTDtm5kw7xyw7xyIiwKICAgICAgICBzaGFyZTogIlBheWxhxZ8iLAogICAgICAgIHN1aXRMb25nSW1nOiAiVXp1biByZXNpbWxlcmkga2F5ZMSxcm1hIHBlbmNlcmVzaW5lIG90dXJ0IiwKICAgICAgICBnbG9iYWxrZXlzOiAiw5ZuaXpsZW1lIGnDp2luIGV2cmVuc2VsIHR1xZ9sYXI6ICIsCiAgICAgICAgZ2xvYmFsa2V5c1ByZXNzOiAiw5ZuaXpsZW1leWkgZGXEn2nFn3Rpcm1layBpw6dpbiBiYXPEsW4iLAogICAgICAgIGdsb2JhbGtleXNIb2xkOiAiw5ZuaXpsZW1leWkgYWt0aWYgZXRtZWsgacOnaW4gYmFzxLFsxLEgdHV0dW4iLAogICAgICAgIGdsb2JhbGtleXNUeXBlOiAiw5ZuaXpsZW1leWkgZXRraW5sZcWfdGlybWUgecO2bnRlbWkiLAogICAgICAgIGNsb3NlQWZ0ZXJQcmV2aWV3OiAiUmVzaW0gcGVuY2VyZXNpbmkgw7ZuaXpsZW1lZGVuIHNvbnJhIGthcGF0xLFuIiwKICAgICAgICBwcmV2aWV3TWF4U2l6ZTogIsOWbml6bGVtZSBwZW5jZXJlc2luaW4gbWFrc2ltdW0gYm95dXR1IiwKICAgICAgICBwcmV2aWV3TWF4U2l6ZVRpcDogIsOWbml6bGVtZSBwZW5jZXJlc2kgYXlhcmxhbmFuIGJveXV0dGFuIGLDvHnDvGsgb2xkdcSfdW5kYSDDtm5pemxlbWUgcGVuY2VyZXNpbmkgw7Zsw6dla2xlbmRpcmluLiAwIGRldnJlIGTEscWfxLEgYsSxcmFrxLFsxLFyIiwKICAgICAgICBsb2FkQWxsOiAiRGFoYSBmYXpsYSBzYXlmYSB5w7xrbGUiLAogICAgICAgIGxvYWRlZEFsbDogIlnDvGtsZW1lIHRhbWFtbGFuZMSxIiwKICAgICAgICBsb2FkaW5nOiAiWcO8a2xlbml5b3IgLi4uIiwKICAgICAgICBsb2FkQWxsVGlwOiAiUmVzbWkgc29ucmFraSBzYXlmYXlhIHnDvGtsZXlpbiIsCiAgICAgICAgdmlld21vcmVFbmRsZXNzOiAiRGFoYSBGYXpsYSBHw7ZyJ2RleWtlbiBhxZ9hxJ/EsSBrYXlkxLFyxLFuY2EgZGFoYSDDp29rIHJlc2ltIHnDvGtsZXlpbiIsCiAgICAgICAgZmlkZGxlOiAiWcO2bmV0aW4iLAogICAgICAgIGZpZGRsZVRpcDogIkRhaGEga29tcGxla3MgacWfbGVtbGVyIGnDp2luIGHDp8SxbMSxciByZXNpbWxlciIsCiAgICAgICAgYWRkSW1hZ2VVcmxzOiAiUmVzaW0gZWtsZSIsCiAgICAgICAgYWRkSW1hZ2VVcmxzVGlwczogIkxpbmsgaWxlIGRhaGEgZmF6bGEgcmVzaW0gZWtsZSIsCiAgICAgICAgb3BlbkltYWdlczogIlllcmVsIHJlc2ltIiwKICAgICAgICBvcGVuSW1hZ2VzVGlwczogIlllcmVsIGfDtnJzZWxsZXJpIGnDp2UgYWt0YXJtYWsgacOnaW4gdMSxa2xhecSxbiIsCiAgICAgICAgY2xvc2VGaXJzdDogIsOWbmNlIG1ldmN1dCBvbGFuIEdhbGVyaSd5aSBrYXBhdMSxbiIsCiAgICAgICAgY29sbGVjdDogIktvbGVrc2l5b25sYXIiLAogICAgICAgIGNvbGxlY3RlZDogIktvbGVrc2l5b25hIGVrbGVuZGkiLAogICAgICAgIGV4aXRDb2xsZWN0aW9uOiAiS29sZWtzaXlvbmRhbiDDp8SxayIsCiAgICAgICAgZXhpdENvbGxlY3Rpb25UaXA6ICJLb2xla3NpeW9uIG1vZHVuZGFuIMOnxLFrbWFrIGnDp2luIHTEsWtsYXnEsW4iLAogICAgICAgIG5vQ29sbGVjdGlvbllldDogIktvbGVrc2l5b251bmRhIGhpw6cgZm90b8SfcmFmxLFuIHlvayIsCiAgICAgICAgY29sbGVjdERldGFpbDogIkHDp8Sxa2xhbWEiLAogICAgICAgIGNvbGxlY3REZXRhaWxUaXA6ICJGYXZvcmkgcmVzaW1sZXJpbmUgYcOnxLFrbGFtYSBla2xlIiwKICAgICAgICBwbGF5U2xpZGU6ICJTdW51IGfDtnN0ZXJpc2luaSBveW5hdCIsCiAgICAgICAgc2xpZGVHYXA6ICJBcmFsxLFrIChsYXIpIiwKICAgICAgICBzbGlkZUdhcFRpcDogIkFyYWzEsWssIGJpcmltIChzYW5peWUpIiwKICAgICAgICBzbGlkZUJhY2s6ICJHZXJpIiwKICAgICAgICBzbGlkZUJhY2tUaXA6ICJHZXJpZGVuIGlsZXJpeWUgZG/En3J1IG95bmF0IiwKICAgICAgICBzbGlkZVJhbmRvbTogIlJhbmRvbSIsCiAgICAgICAgc2xpZGVXYWl0OiAiUmVzaW1sZXJpbiBva3VubWFzxLEgacOnaW4gYmVrbGV5aW4iLAogICAgICAgIHNsaWRlV2FpdFRpcDogIkdlcmlzYXnEsW0gaGVyIHJlc2ltIG9rdW5kdWt0YW4gc29ucmEgYmHFn2xhci4iLAogICAgICAgIHNsaWRlU2tpcEVycm9yOiAiSGF0YWzEsSByZXNpbWxlcmkgYXRsYSIsCiAgICAgICAgc2xpZGVTa2lwRXJyb3JUaXA6ICJIxLF6bMSxY2Egb2t1bm1hIGhhdGFzxLEgb2xhbiByZXNpbWxlcmkgYXRsYXnEsW4iLAogICAgICAgIHR5cGU6ICJLYXRlZ29yaWxlciIsCiAgICAgICAgdHlwZVRpcDogIlJlc2ltIGthdGVnb3Jpc2luaSBzZcOnaW4iLAogICAgICAgIHNob3dXaXRoUnVsZXM6ICJLdXJhbGzEsSBzaW1nZSBnw7ZzdGVybWV5ZSB6b3JsYSIsCiAgICAgICAgc2hvd1dpdGhSdWxlc1RpcDogIlJlc21pbiBib3l1dHUgbmUgb2x1cnNhIG9sc3VuIGt1cmFsbGEgdXl1xZ91eW9yc2Egc2ltZ2V5aSBnw7ZzdGVyIiwKICAgICAgICBhZHZhbmNlZFJ1bGVzOiAiR2VsacWfbWnFnyBLdXJhbGxhciIsCiAgICAgICAgYWR2YW5jZWRSdWxlc1RpcDogIkdlbGnFn21pxZ8ga3VyYWxsYXJsYSB1eXXFn2FubGFyIiwKICAgICAgICB0cFJ1bGVzOiAiSm9rZXIga2FyYWt0ZXIga3VyYWxsYXLEsSIsCiAgICAgICAgdHBSdWxlc1RpcDogIkpva2VyIGthcmFrdGVyIGt1cmFsbGFyxLF5bGEgdXl1xZ9hbmxhciIsCiAgICAgICAgc2NhbGVSdWxlczogIllha8SxbmxhxZ90xLFybWEiLAogICAgICAgIHNjYWxlUnVsZXNUaXA6ICJPdG9tYXRpayBvbGFyYWsgYnVsdW5hbiBhbWEgw7Zsw6dla2xlbmRpcmlsbWnFnyBnw7Zyw7xudMO8IiwKICAgICAgICBub1NjYWxlUnVsZXM6ICLDlmzDp2VrbGVuZGlybWUgeW9rIiwKICAgICAgICBub1NjYWxlUnVsZXNUaXA6ICJPdG9tYXRpayBvbGFyYWsgYnVsdW5hbiBhbWEgw7Zsw6dla2xlbmRpcmlsbWVtacWfIGfDtnLDvG50w7wiLAogICAgICAgIHNtYWxsUnVsZXM6ICJLw7zDp8O8ayBib3l1dCIsCiAgICAgICAgc21hbGxSdWxlc1RpcDogIlnDvGtzZWtsacSfaSB2ZSBnZW5pxZ9sacSfaW4gZ2Vyw6dlayBib3l1dHUgI3QjIHBpa3NlbGRlbiBheiBvbGFuIGvDvMOnw7xrIGJveXV0bHUgZ8O2csO8bnTDvC4iLAogICAgICAgIGxvY2tTaXplVGlwOiAiTWFrc2ltdW0gYsO8ecO8a2zDvMSfw7wga2lsaXRsZSIsCiAgICAgICAgY29tbWFuZDogIktvbXV0IiwKICAgICAgICBjb21tYW5kVGlwOiAiS29tdXQgTWVuw7xzw7wiLAogICAgICAgIG9ubGluZUVkaXQ6ICJGb3RvxJ9yYWbEsSDDp2V2cmltacOnaSBkw7x6ZW5sZSIsCiAgICAgICAgb25saW5lRWRpdFRpcDogIiN0IyBrdWxsYW5hcmFrIGJ1IHJlc21pIMOnZXZyaW1pw6dpIG9sYXJhayBkw7x6ZW5sZXlpbiIsCiAgICAgICAgb3BlbkluTmV3V2luZG93OiAiWWVuaSBwZW5jZXJlZGUgYcOnIiwKICAgICAgICBvcGVuSW5OZXdXaW5kb3dUaXA6ICJSZXNtaSB5ZW5pIHBlbmNlcmVkZSBhw6ciLAogICAgICAgIGZpbmRJblBhZ2U6ICJTYXlmYWRhIGJ1bCIsCiAgICAgICAgZmluZEluUGFnZVRpcDogIlNheWZhZGFraSBzZcOnaWxpIHJlc21lIGRvxJ9ydSBrYXlkxLFyxLFuIiwKICAgICAgICB2aWV3Q29sbGVjdGlvbjogIktvbGVrc2l5b25sYXLEsSBnw7Zyw7xudMO8bGUiLAogICAgICAgIHZpZXdDb2xsZWN0aW9uVGlwOiAiS29sZWtzaXlvbmxhcmEgZWtsZW5tacWfIHTDvG0gcmVzaW1sZXJpIGfDtnIiLAogICAgICAgIGluQ29sbGVjdGlvbjogIktvbGVrc2l5b24gbW9kdXlsYSBrdWxsYW7EsWxhbcSxeW9yIiwKICAgICAgICBjYW50RmluZDogIlJlc2ltIGTDtmvDvG1hbmRhIGRlxJ9pbCwgeWEgZGEgZ2l6bGVubWnFnyB2ZSB5ZXJpIGJ1bHVuYW3EsXlvciEiLAogICAgICAgIGV4cG9ydEltYWdlczogIlTDvG0gUmVzaW1sZXJpIGTEscWfYSBha3RhciIsCiAgICAgICAgZXhwb3J0SW1hZ2VzVGlwOiAiR8O2c3RlcmlsZW4gdMO8bSB5w7xrc2VrIGJveXV0bHUgcmVzaW1sZXJpIHllbmkgcGVuY2VyZXllIGFrdGFyIiwKICAgICAgICBkb3dubG9hZEltYWdlOiAiR8O2c3RlcmlsZW5sZXJpbiB0w7xtw7xuw7wgaW5kaXIiLAogICAgICAgIGRvd25sb2FkSW1hZ2VUaXA6ICLFnnUgYW5kYSBnw7ZzdGVyaWxlbiB0w7xtIHJlc2ltbGVyaSBpbmRpcmluIiwKICAgICAgICBjb3B5SW1hZ2VzVXJsOiAiVMO8bSByZXNpbWxlcmluIGxpbmtpbmkga29weWFsYXnEsW4iLAogICAgICAgIGNvcHlJbWFnZXNVcmxUaXA6ICJZw7xrc2VrIGJveXV0bHUgb2xhcmFrIGfDtnN0ZXJpbGVuIHTDvG0gcmVzaW1sZXJpbiBsaW5raW5pIGtvcHlhbGF5xLFuIiwKICAgICAgICBjb3B5U3VjY2VzczogIiN0IyB0YW5lIGxpbmsgYmHFn2FyxLF5bGEga29weWFsYW5kxLEiLAogICAgICAgIGF1dG9SZWZyZXNoOiAiU2F5ZmF5xLEgb3RvbWF0aWsgb2xhcmFrIHnDvGtsZSIsCiAgICAgICAgYXV0b1JlZnJlc2hUaXA6ICJLYWxhbiBzb24gYmlya2HDpyByZXNpbSBnw7Zyw7xudMO8bGVuZGnEn2luZGUsIHdlYiBzYXlmYWxhcsSxbsSxbiB5ZW5pIHJlc2ltbGVyaSB5w7xrbGVtZXNpIGnDp2luIHBlbmNlcmV5aSBlbiBhbHRhIGtheWTEsXLEsW4uIiwKICAgICAgICBlbnRlckZ1bGxzYzogIlRhbSBla3JhbmEgZ2XDp2luIiwKICAgICAgICBleGl0RnVsbHNjOiAiVGFtIGVrcmFuZGFuIMOnxLFrxLFuIiwKICAgICAgICBjb25maWc6ICJBeWFybGFyIiwKICAgICAgICBvcGVuQ29uZmlnOiAiQXlhcmxhcsSxIEHDp8SxbiIsCiAgICAgICAgcnVsZVJlcXVlc3Q6ICJLdXJhbCBUYWxlYmkiLAogICAgICAgIGNsb3NlR2FsbGVyeTogIkdhbGVyaXlpIGthcGF0xLFuIiwKICAgICAgICByZXR1cm5Ub0dhbGxlcnk6ICJHYWxlcml5ZSBnZXJpIGTDtm7DvG4iLAogICAgICAgIHBpY0luZm86ICJEZcSfacWfdGlybWVrIGnDp2luIHTEsWtsYXnEsW4iLAogICAgICAgIHBpY05vdGU6ICJSZXNpbSBlayBhw6fEsWtsYW1hc8SxIiwKICAgICAgICB1cmxGaWx0ZXI6ICJMaW5rIHPDvHpnZcOnaSIsCiAgICAgICAgdXJsRmlsdGVyVGlwOiAiTGlua2xlcmkgc8O8emdlw6d0ZW4gZ2XDp2lybWVrIGnDp2luIGFuYWh0YXIga2VsaW1lbGVyaSB2ZXlhIG5vcm1hbCBpZmFkZWxlcmkgZ2lyaW4iLAogICAgICAgIHJlc29sdXRpb246ICJHw7Zyw7xudMO8IMOHw7Z6w7xuw7xybMO8xJ/DvCIsCiAgICAgICAgcGljTnVtOiAiUmVzaW1sZXJpbiBzYXnEsXPEsSIsCiAgICAgICAgcGljVGlwczogIkNUUkwgdHXFn3V5bGEgcmVzaW1sZXJpIGfDtnLDvG4iLAogICAgICAgIHNhdmVQYWdlVGlwczogIkJ1IHNheWZhecSxIHTDvG0gcmVzaW1sZXJpIGluZGlybWVrIGnDp2luIGtheWRldCIsCiAgICAgICAgc2NhbGVSYXRpbzogIsOWbMOnZWtsZW1lIG9yYW7EsSIsCiAgICAgICAgc2ltaWxhckltYWdlOiAiR8O2cnNlbCBhcmFtYSIsCiAgICAgICAgc2NhbGU6ICJZYWvEsW5sYcWfdMSxciIsCiAgICAgICAgaG9yaXpvbnRhbEZsaXA6ICJZYXRheSDDp2V2aXIiLAogICAgICAgIHZlcnRpY2FsRmxpcDogIkRpa2V5IMOnZXZpciIsCiAgICAgICAgYWN0dWFsQnRuOiAiS2F5bmHEn8SxIGfDtnLDvG50w7xsZSAoQSkiLAogICAgICAgIHNlYXJjaEJ0bjogIktheW5hayByZXNtaSBidWwgKFMpIiwKICAgICAgICBnYWxsZXJ5QnRuOiAiR2FsZXJpeWkgZ8O2ciAoRykiLAogICAgICAgIGN1cnJlbnRCdG46ICJNZXZjdXQgb2xhbsSxIGfDtnLDvG50w7xsZSAoQykiLAogICAgICAgIG1hZ25pZmllckJ0bjogIkLDvHnDvHRlw6cgLyBZYWvEsW5sYcWfdMSxcm1hIChNKSIsCiAgICAgICAgcGljVGl0bGU6ICJSZXNpbSBCYcWfbMSxxJ/EsSIsCiAgICAgICAgZXhwb3J0SW1hZ2VzVXJsOiAiUmVzaW0gTGlua2luaSBkxLHFn2EgYWt0YXIiLAogICAgICAgIGV4cG9ydEltYWdlc1VybFBvcDogIkxpbmtpIGtvcHlhbGFtYWsgacOnaW4gQ3RybCtDJ3lpIGt1bGxhbiIsCiAgICAgICAgYmVnaW5TZWFyY2hJbWc6ICIjdCMgaWxlIEfDtnJzZWwgQXJhbWEnecSxIGJhxZ9sYXQgLi4uIiwKICAgICAgICBmaW5kTm9QaWM6ICJLYXluYWsgcmVzaW0gYnVsdW5hbWFkxLEiLAogICAgICAgIGZpbmRPdmVyQmVnaW5Mb2FkOiAiI3QjIGhhcml0YW7EsW4gc29udSwgI3QjIGlsZSBlxZ9sZcWfZW4gcmVzaW1sZXJpIGJ1bCwgaWxraW5pIHnDvGtsZW1leWUgYmHFn2xhIiwKICAgICAgICBsb2FkTmV4dFNpbWlsYXI6ICJLYXluYWsgcmVzaW0gecO8a2xlbmVtZWRpLCBzb25yYWtpIHNvbnVjdSB5w7xrbGVtZXlpIGRlbmV5aW4uLi4iLAogICAgICAgIGxvYWRFcnJvcjogIlnDvGtsZW1lIGJhxZ9hcsSxc8SxeiIsCiAgICAgICAgb3BlbkhvbWVQYWdlOiAiQW5hIFNheWZhJ3nEsSBhw6ciLAogICAgICAgIHBvc2l0aW9uOiAiR8O2csO8bnTDvGxlbWUga29udW11IiwKICAgICAgICBwb3NpdGlvblRpcHM6ICJHaXpsZW1layBpw6dpbiBBTFQgdHXFn3VuYSBiYXPEsWzEsSB0dXR1biIsCiAgICAgICAgdG9wTGVmdDogIlJlc21pbiBzb2wgw7xzdCBrw7bFn2VzaSIsCiAgICAgICAgdG9wUmlnaHQ6ICJSZXNtaW4gc2HEnyDDvHN0IGvDtsWfZXNpIiwKICAgICAgICBib3R0b21SaWdodDogIlJlc21pbiBzYcSfIGFsdCBrw7bFn2VzaSIsCiAgICAgICAgYm90dG9tTGVmdDogIlJlc21pbiBzb2wgYWx0IGvDtsWfZXNpIiwKICAgICAgICB0b3BDZW50ZXI6ICJSZXNtaW4geWFuxLEiLAogICAgICAgIGJvdHRvbUNlbnRlcjogIlJlc21pbiBhbHTEsSIsCiAgICAgICAgZmxvYXRCYXI6ICJBcmHDpyDDh3VidcSfdSIsCiAgICAgICAgcHJldmlld0ZvbGxvd01vdXNlOiAiRmFyZW5pbiB5YW7EsW5kYSDDtm4gaXpsZW1leWkgZ8O2c3RlciIsCiAgICAgICAgc2hvd0RlbGF5OiAiR2VjaWttZXlpIGfDtnN0ZXIiLAogICAgICAgIG1zOiAibWlsaXNhbml5ZSIsCiAgICAgICAgaGlkZTogIkdpemxlIiwKICAgICAgICBoaWRlRGVsYXk6ICJHZWNpa21leWkgZ2l6bGUiLAogICAgICAgIGZvcmNlU2hvdzogIkJ1IGJveXV0dW4gw7xzdMO8bmRla2kgeWFrxLFubGHFn3TEsXLEsWxtYW3EscWfIHJlc2ltbGVyZGUgYXJhw6cgw6d1YnXEn3VudSBnw7ZzdGVyLCAiLAogICAgICAgIGZvcmNlU2hvd1RpcDogIsOWbMOnZWtsZW5kaXJpbG1lbWnFnyBnw7Zyw7xudMO8bsO8biBib3l1dHUgYcWfYcSfxLFkYSBheWFybGFuYW4gYsO8ecO8a2zDvMSfw7wgYcWfdMSxxJ/EsW5kYSBrYXlhbiBhcmHDpyDDp3VidcSfdW51IGfDtnN0ZXIiLAogICAgICAgIHNpemVMaW1pdE9yOiAiWWFsbsSxemNhIHnDvGtzZWtsaWsgWUEgREEgZ2VuacWfbGlrdGVuIGV0a2lsZW5pciIsCiAgICAgICAgcHg6ICJwaWtzZWwiLAogICAgICAgIG1pblNpemVMaW1pdDogIkJ1IGJveXV0dW4gw7xzdMO8bmRla2kgeWFrxLFubGHFn3TEsXLEsWxtxLHFnyByZXNpbWxlcmRlIGFyYcOnIMOndWJ1xJ91bnUgZ8O2c3RlciIsCiAgICAgICAgbWluU2l6ZUxpbWl0VGlwOiAiR8O2csO8bnTDvCDDtmzDp2VrbGVuZGlyaWxkaWt0ZW4gc29ucmEgKGfDtnLDvG50w7xuw7xuIG9yaWppbmFsIGJveXV0dSBnZXLDp2VrIGJveXV0bGEgZcWfbGXFn21leiksIGfDtnN0ZXJpbGVuIGfDtnLDvG50w7xuw7xuIHV6dW5sdcSfdSBheWFybGFubcSxxZ8gZGXEn2VyZGVuIGLDvHnDvGsgb2xkdcSfdW5kYSBrYXlhbiBhcmHDpyDDp3VidcSfdSBnw7Zyw7xudMO8bGVuaXIuIiwKICAgICAgICBkZWZhdWx0U2l6ZUxpbWl0OiAiR2FsZXJpIGnDp2luIHZhcnNhecSxbGFuIGJveXV0IGxpbWl0aSIsCiAgICAgICAgbGlzdGVuQmc6ICJBcmthIHBsYW4gcmVzbWkgZGlubGVtZSIsCiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAiQXJrYSBwbGFuIHJlbmdpIiwKICAgICAgICBsaXN0ZW5CZ1RpcDogIsOWxJ9lZGUsIGFyYcOnIMOndWJ1xJ91bnUgYXJrYSBwbGFuIHJlc21peWxlIGJlcmFiZXIgZ8O2c3RlciIsCiAgICAgICAgYnV0b25PcmRlcjogIkFyYcOnIMOndWJ1xJ91IHNpbWdlbGVyaW5pbiBzxLFyYWxhbWFzxLEiLAogICAgICAgIGtleXNFbmFibGU6ICJLxLFzYXlvbHUgYWt0aWYgZXQiLAogICAgICAgIGtleXNBY3R1YWw6ICJSZXNtaSBiw7x5w7xrIGHDpyIsCiAgICAgICAga2V5c0FjdHVhbFRpcDogIktheWFuIGFyYcOnIMOndWJ1xJ91IGfDtnLDvG5kw7zEn8O8bmRlIHJlc21pIGLDvHnDvGsgb2xhcmFrIGHDp21hayBpw6dpbiBidSBkw7zEn21leWUgdMSxa2xhecSxbiIsCiAgICAgICAga2V5c1NlYXJjaDogIktheW5hayByZXNtaSBidWx1biIsCiAgICAgICAga2V5c1NlYXJjaFRpcDogIktheWFuIGFyYcOnIMOndWJ1xJ91IGfDtnLDvG5kw7zEn8O8bmRlIGtheW5hayByZXNtaSBidWxtYWsgacOnaW4gYnUgZMO8xJ9tZXllIHTEsWtsYXnEsW4iLAogICAgICAgIGhlYWRTZWFyY2hUaXA6ICJHw7Zyc2VsIGFyYW1hIiwKICAgICAgICBoZWFkU2VhcmNoQWxsOiAiSGVwc2luaSBBcmEiLAogICAgICAgIGtleXNDdXJyZW50OiAiTWV2Y3V0IG9sYW4gcmVzbWkgYcOnxLFuIiwKICAgICAgICBrZXlzQ3VycmVudFRpcDogIktheWFuIGFyYcOnIMOndWJ1xJ91IGfDtnLDvG5kw7zEn8O8bmRlIG1ldmN1dCBnw7Zyw7xudMO8ecO8IGHDp21hayBpw6dpbiBidSBkw7zEn21leWUgdMSxa2xhecSxbiIsCiAgICAgICAga2V5c01hZ25pZmllcjogIkfDtnpsZW1sZW1layBpw6dpbiBiw7x5w7x0ZcOnaSBhw6fEsW4iLAogICAgICAgIGtleXNNYWduaWZpZXJUaXA6ICJLYXlhbiBhcmHDpyDDp3VidcSfdSBnw7Zyw7xuZMO8xJ/DvG5kZSBiw7x5w7x0ZcOnaSBhw6dtYWsgacOnaW4gYnUgZMO8xJ9tZXllIHTEsWtsYXnEsW4iLAogICAgICAgIGtleXNHYWxsZXJ5OiAiR2FsZXJpJ3lpIGHDp8SxbiAoRXZyZW5zZWwgdHXFnyBpbGUgZm9ua3NpeW9uIHR1xZ91bmEgYmFzxLFuKSIsCiAgICAgICAga2V5c0dhbGxlcnlUaXA6ICJLYXlhbiBhcmHDpyDDp3VidcSfdSBnw7Zyw7xuZMO8xJ/DvG5kZSBHYWxlcmkneWkgYcOnbWFrIGnDp2luIGJ1IGTDvMSfbWV5ZSB0xLFrbGF5xLFuIiwKICAgICAgICBvcGVuR2FsbGVyeTogIkdhbGVyaSd5aSBBw6fEsW4iLAogICAgICAgIG1hZ25pZmllcjogIllha8SxbmxhxZ90xLFyIiwKICAgICAgICBtYWduaWZpZXJSYWRpdXM6ICJWYXJzYXnEsWxhbiB5YXLEscOnYXAiLAogICAgICAgIG1hZ25pZmllcldoZWVsWm9vbUVuYWJsZWQ6ICJGYXJlIHRla2VybGXEn2l5bGUgeWFrxLFubGHFn3TEsXJtYXnEsSBldGlubGXFn3RpciIsCiAgICAgICAgbWFnbmlmaWVyV2hlZWxab29tUmFuZ2U6ICJCw7x5w7x0ZcOnIGnDp2luIHlha8SxbmxhxZ90xLFybWEgb3JhbsSxIiwKICAgICAgICBtYWduaWZpZXJTY2FsZUltYWdlOiAiWm9vbSBpbWFnZSBieSB3aGVlbCIsCiAgICAgICAgZ2FsbGVyeTogIkdhbGVyaSIsCiAgICAgICAgZ2FsbGVyeUZpdFRvU2NyZWVuOiAiR8O2csO8bnTDvHnDvCBla3JhbmEgc8SxxJ9hY2FrIMWfZWtpbGRlIMO2bMOnZWtsZW5kaXIiLAogICAgICAgIGdhbGxlcnlGaXRUb1NjcmVlblNtYWxsOiAiQXlyxLFjYSBrw7zDp8O8ayByZXNtaSBkZSDDtmzDp2VrbGVuZGlyIiwKICAgICAgICBnYWxsZXJ5Rml0VG9TY3JlZW5UaXA6ICLEsMOnaW5lIGFsbWFrIGnDp2luIHV5Z3VsYXnEsW4sIMOnZXZyZWxlbWVrIGnDp2luIGRlxJ9pbCIsCiAgICAgICAgZ2FsbGVyeVNjcm9sbEVuZFRvQ2hhbmdlOiAiVXp1biByZXNpbSBzb251bmEga2FkYXIga2F5ZMSxcsSxbGTEsWt0YSBzb25yYSByZXNtaSBkZcSfacWfdGlyIiwKICAgICAgICBnYWxsZXJ5U2Nyb2xsRW5kVG9DaGFuZ2VUaXA6ICLDlm5jZWtpIHNlw6dlbmVrIGlwdGFsIGVkaWxpcnNlIGdlw6dlcmxpZGlyIiwKICAgICAgICBnYWxsZXJ5RXhwb3J0VHlwZTogIkfDtnLDvG50w7xsZXIgZMSxxZ9hcsSxIGFrdGFyxLFsZMSxxJ/EsW5kYSBraSB2YXJzYXnEsWxhbiBzxLFyYWxhbWEiLAogICAgICAgIGdyaWQ6ICJLYXJvIHPEsXJhbGFtYSIsCiAgICAgICAgZ3JpZEJpZzogIsOWemfDvG4gc8SxcmFsYW1hIiwKICAgICAgICBsaXN0OiAiTGlzdGUgc8SxcmFsYW1hc8SxIiwKICAgICAgICBnYWxsZXJ5QXV0b0xvYWQ6ICJTb25yYWtpIHNheWZhZGEgb3RvbWF0aWsgb2xhcmFrIGRhaGEgZmF6bGEgcmVzaW0gecO8a2xlIiwKICAgICAgICBnYWxsZXJ5TG9hZEFsbDogIkRhaGEgZmF6bGEgcmVzaW0gecO8a2xlcmtlbiB0w7xtIHNheWZhbGFyxLEgb3RvbWF0aWsgb2xhcmFrIGnFn2xleWluIiwKICAgICAgICBnYWxsZXJ5TG9hZEFsbFRpcDogIsOHb2sgZmF6bGEgc2F5ZmEgZGVuZXlpbWluaXppIGV0a2lsZXllYmlsaXIiLAogICAgICAgIGdhbGxlcnlEb3dubG9hZFdpdGhaaXA6ICJIZXBzaW5pIGluZGlyaXJrZW4gWklQIG9sYXJhayBhcsWfaXZsZSIsCiAgICAgICAgZ2FsbGVyeURvd25sb2FkV2l0aFppcEFsZXJ0OiAiQXLFn2l2bGVuaXlvciwgbMO8dGZlbiBiaXIgc8O8cmUgYmVrbGV5aW4iLAogICAgICAgIGdhbGxlcnlTY2FsZVNtYWxsU2l6ZTE6ICJHZXLDp2VrIGJveXV0IHnDvGtzZWtsaWsgdmUgZ2VuacWfbGlrdGVuIGRhaGEgYXoiLAogICAgICAgIGdhbGxlcnlTY2FsZVNtYWxsU2l6ZTI6ICJQaWtzZWxsZXIga8O8w6fDvGsgYm95dXRsdSByZXNpbWxlciBoYWxpbmRlIGdydXBsYW5kxLFyxLFsxLFyIiwKICAgICAgICBnYWxsZXJ5U2hvd1NtYWxsU2l6ZTogIlZhcnNhecSxbGFuIG9sYXJhayBrw7zDp8O8ayBib3l1dGx1IHJlc2ltbGVyaSBnw7ZzdGVyIiwKICAgICAgICBnYWxsZXJ5VHJhbnNpdGlvbjogIkdhbGVyaSBkZcSfacWfdGnEn2luZGUgZWZla3RsZXJpIGfDtnN0ZXIiLAogICAgICAgIGdhbGxlcnlTaWRlYmFyUG9zaXRpb246ICJLw7zDp8O8ayByZXNpbSDDp3VidcSfdSBrb251bXUiLAogICAgICAgIGJvdHRvbTogIkFsdCIsCiAgICAgICAgcmlnaHQ6ICJTYcSfIiwKICAgICAgICBsZWZ0OiAiU29sIiwKICAgICAgICB0b3A6ICLDnHN0IiwKICAgICAgICBnYWxsZXJ5U2lkZWJhclNpemU6ICJZw7xrc2VrbGlrIiwKICAgICAgICBnYWxsZXJ5U2lkZWJhclNpemVUaXA6ICJLw7zDp8O8ayByZXNpbSDDp3VidcSfdW51biAoeWF0YXkgaXNlKSB5w7xrc2VrbGnEn2kgdmV5YSAoZGlrZXkgaXNlKSBnZW5pxZ9sacSfaSIsCiAgICAgICAgZ2FsbGVyeU1heDE6ICJNYWtzaW11bSDDtm5iZWxsZWtsZW1lIiwKICAgICAgICBnYWxsZXJ5TWF4MjogIlJlc2ltbGVyICjDtm5jZXNpIHZlIHNvbnJhc8SxKSIsCiAgICAgICAgZ2FsbGVyeUF1dG9ab29tOiAiWWFrxLFubGHFn3TEsXJtYSAlMTAwJ2UgZ2VyaSBkw7ZuZXIgKENocm9tZSkiLAogICAgICAgIGdhbGxlcnlBdXRvWm9vbVRpcDogIllha8SxbmxhxZ90xLFyxLFyc2FuxLF6LCByZXNtaW4gdmUga2VuYXIgYXJhw6cgw6d1YnXEn3UgYsO2bMO8bWxlcmluaW4geWFrxLFubGHFn3TEsXJtYXPEsW7EsSB0ZWtyYXIgJTEwMCdlIGdlcmkgZMO2bmRlcmluIHZlIGfDtnLDvG50w7xsZW5lYmlsaXIgYWxhbsSxIGFydMSxcsSxbiAoeWFsbsSxemNhIENocm9tZSBpw6dpbiBnZcOnZXJsaWRpcikiLAogICAgICAgIGdhbGxlcnlEZXNjcmlwdGlvbkxlbmd0aDE6ICJNYWtzaW11bSBhw6fEsWtsYW1hIiwKICAgICAgICBnYWxsZXJ5RGVzY3JpcHRpb25MZW5ndGgyOiAiS2FyYWt0ZXJsZXIiLAogICAgICAgIGdhbGxlcnlBdXRvT3BlblNpdGVzOiAiSGVyIHNhdMSxcmRhIGJpciB0YW5lIG9sbWFrIMO8emVyZSwgb3RvbWF0aWsgb2xhcmFrIGHDp8SxbGFuIGdhbGVyaSBpw6dpbiBMaW5rbGVyaW4gdmFyc2F5xLFsYW5sYXLEsSwgQCBpbGUgRGFoYSBGYXpsYSBHw7ZyIGnDp2luIiwKICAgICAgICBkaXNhYmxlS2V5U2l0ZXM6ICJLxLFzYXlvbCB0dcWfbGFyxLFuxLEgZGV2cmUgZMSxxZ/EsSBixLFyYWttYWsgacOnaW4ga3VsbGFuxLFsYW4gVVJMJ2xlcmluIG5vcm1hbGxlcmksIGhlciBzYXTEsXJhIGJpciB0YW5lIGdlbGVjZWsgxZ9la2lsZGUiLAogICAgICAgIGF1dG9PcGVuVmlld21vcmU6ICJHYWxlcml5aSBhw6dhcmtlbiBkYWhhIGZhemxhIGfDtnLDvG50w7x5w7wgb3RvbWF0aWsgb2xhcmFrIGfDtnLDvG50w7xsZSIsCiAgICAgICAgZ2FsbGVyeVNlYXJjaERhdGE6ICJBcmFtYSBpw6dpbiBzaXRlIGt1cmFsbGFyxLEsIGdlcmkgecO8a2xlbWVrIGnDp2luIGJvxZ8gYsSxcmFrxLFuIiwKICAgICAgICBnYWxsZXJ5RWRpdFNpdGU6ICLDh2V2cmltacOnaSBmb3RvxJ9yYWYgZMO8emVubGVtZSBzaXRlc2kiLAogICAgICAgIGltZ1dpbmRvdzogIlJlc2ltIMOHZXLDp2V2ZXNpIiwKICAgICAgICBpbWdXaW5kb3dGaXRUb1NjcmVlbjogIkVrcmFuYSB1eWFybGF5xLFuIiwKICAgICAgICBpbWdXaW5kb3dGaXRUb1NjcmVlblRpcDogIsSww6dpbmUgYWxtYWsgacOnaW4gdXlhcmxhecSxbiwgw6dldnJlbGVtZWsgacOnaW4gZGXEn2lsIiwKICAgICAgICBpbWdXaW5kb3dGaXRUb1NjcmVlbldoZW5TbWFsbDogIkvDvMOnw7xra2VuIGJpbGUgZWtyYW5hIHV5YXJsYXnEsW4iLAogICAgICAgIGltZ1dpbmRvd0RlZmF1bHRUb29sOiAiUGVuY2VyZXlpIGHDp2Fya2VuIHZhcnNhecSxbGFuIG9sYXJhayBzZcOnaWxlbiBhcmHDpyIsCiAgICAgICAgaGFuZDogIkVsIiwKICAgICAgICByb3RhdGU6ICJEw7ZuZMO8ciIsCiAgICAgICAgem9vbTogIkLDvHnDvHRlw6ciLAogICAgICAgIGltZ1dpbmRvd0VzY0tleTogIkthcGF0bWFrIGnDp2luIEVzYyd5ZSBiYXPEsW4iLAogICAgICAgIGltZ1dpbmRvd0RibENsaWNrSW1nV2luZG93OiAiS2FwYXRtYWsgacOnaW4gaWtpIGtlcmUgdMSxa2xhecSxbiIsCiAgICAgICAgaW1nV2luZG93Q2xpY2tPdXRzaWRlOiAiS2FwYXRtYWsgacOnaW4ga2F0bWFuxLFuIMO8c3TDvG5lIHTEsWtsYXnEsW4iLAogICAgICAgIGltZ1dpbmRvd0NsaWNrT3V0c2lkZVRpcDogIllhbG7EsXpjYSDDnHN0IEthdG1hbiBnw7ZzdGVyaWxkacSfaW5kZSBldGtpbmxlxZ90aXJpbiIsCiAgICAgICAgbm9uZTogIkhpw6diaXJpc2kiLAogICAgICAgIGNsaWNrOiAiVMSxa2xhIiwKICAgICAgICBkYmxjbGljazogIsOHaWZ0IHTEsWtsYSIsCiAgICAgICAgaW1nV2luZG93T3ZlcmxheWVyU2hvd246ICJLYXBsYW1hIiwKICAgICAgICBpbWdXaW5kb3dPdmVybGF5ZXJDb2xvcjogIlJlbmsgdmUgT3Bha2zEsWsiLAogICAgICAgIGltZ1dpbmRvd1NoaWZ0Um90YXRlU3RlcDE6ICJIZXIgc2VmZXJpbmRlIFNoaWZ0IHR1xZ91bnUgYmFzxLFsxLEgdHV0dHXEn3VudXpkYSBkw7ZuZMO8csO8bi4gIiwKICAgICAgICBpbWdXaW5kb3dTaGlmdFJvdGF0ZVN0ZXAyOiAiRGVyZWNlIiwKICAgICAgICBpbWdXaW5kb3dNb3VzZVdoZWVsWm9vbTogIkZhcmUgVGVrZXJsZcSfaSBZYWvEsW5sYcWfdMSxcm1hc8SxIiwKICAgICAgICBpbWdXaW5kb3dab29tUmFuZ2U6ICJZYWvEsW5sYcWfdMSxcm1hIEFyYWzEscSfxLEiLAogICAgICAgIGltZ1dpbmRvd1pvb21SYW5nZVRpcDogIllha8SxbmxhxZ90xLFybWEgb3JhbsSxIChwb3ppdGlmIG9sbWFsxLFkxLFyKSIsCiAgICAgICAgb3RoZXJzOiAiRGnEn2VybGVyaSIsCiAgICAgICAgd2FpdEltZ0xvYWQ6ICJHw7Zyw7xudMO8IHnDvGtsZW5lbmUga2FkYXIgeWFrxLFubGHFn3TEsXJtYSBnaWJpIGnFn2xlbWxlcmkgZ2Vyw6dla2xlxZ90aXJtZXllIGJhxZ9sYXnEsW4iLAogICAgICAgIHdhaXRJbWdMb2FkVGlwOiAiQ3RybCB0dcWfdW51IGJhc8SxbMSxIHR1dGFya2VuLCBnZcOnaWNpIG9sYXJhayBidSBheWFyxLFuIHrEsXR0xLFuxLEgw6dhbMSxxZ90xLFyYWJpbGlyc2luaXouIiwKICAgICAgICBkZWJ1ZzogIkhhdGEgYXnEsWtsYW1hIG1vZHUiLAogICAgICAgIGN1c3RvbVJ1bGVzOiAiQsO8ecO8ayByZXNpbSBpw6dpbiDDtnplbCBrdXJhbGxhciIsCiAgICAgICAgZmlyc3RFbmdpbmU6ICJUZXJjaWggZWRpbGVuIChpbGspIGFyYW1hIG1vdG9ydSIsCiAgICAgICAgcmVmcmVzaFdoZW5FcnJvcjogIk9rdW1hIGhhdGFzxLEsIGHFn8SxcsSxIHnDvGtsZW1layBpw6dpbiB0xLFrbGF5xLFuIiwKICAgICAgICBzd2l0Y2hTbGlkZTogIktlbmFyIMOndWJ1xJ91bnUgZGXEn2nFn3RpciIsCiAgICAgICAgdmlld21vcmU6ICJEYWhhIEZhemxhc8SxbsSxIEfDtnIiLAogICAgICAgIGNvdW50RG93bjogIkdlcmkgU2F5xLFtIiwKICAgICAgICBjdXN0b21MYW5nOiAiRGlsaSBTZcOnaW4iLAogICAgICAgIGRlZmF1bHRMYW5nOiAiT3RvbWF0aWsgQWxnxLFsYW1hIiwKICAgICAgICBoaWRlSWNvbjogIlNpbWdleWkgZ2l6bGUiLAogICAgICAgIGluaXRTaG93OiAiVmFyc2F5xLFsYW4gb2xhcmFrIMO2bml6bGVtZXlpIGfDtnN0ZXJtZWsgacOnaW4ga8Sxc2F5b2x1IHRlcnNpbmUgw6dldmlyIiwKICAgICAgICBzdGF5T3V0OiAiS2F5YW4gYXJhw6cgw6d1YnXEn3VudW4gZ8O2csO8bnTDvG7DvG4gZMSxxZ/EsW5kYSBrYWxtYXPEsW5hIGl6aW4gdmVyaW4iLAogICAgICAgIGdhbGxlcnlEb3dubG9hZEdhcDogIsSwbmRpcm1lIGFyYWzEscSfxLEiLAogICAgICAgIGZvcm1hdENvbnZlcnNpb246ICLEsG5kaXJpcmtlbiByZXNpbSBmb3JtYXTEsW7EsSBoZXIgc2F0xLFyYSBiaXIgc2F0xLFyIG9sYWNhayDFn2VraWxkZSBkw7Zuw7zFn3TDvHLDvG4iLAogICAgICAgIGdhbGxlcnlEaXNhYmxlQXJyb3c6ICJPayB0dcWfbGFyxLFuxLEgZGV2cmUgZMSxxZ/EsSBixLFyYWvEsW4iLAogICAgICAgIHBvc2l0aW9uRml4ZWQ6ICJzYWJpdCBrb251bSIsCiAgICAgICAgc3dpdGNoU3RvcmVMb2M6ICJBbmFodGFybGFtYSBzxLFyYXPEsW5kYSBoYWbEsXphIGtvbnVtdSIKICAgIH0KfSwKewogICAgbmFtZTogIuaXpeacrOiqniIsCiAgICBtYXRjaDogWyJqYSIsImphLUpQIl0sCiAgICBsYW5nOiB7CiAgICAgICAgc2F2ZUJ0bjogIuS/neWtmCIsCiAgICAgICAgc2F2ZU5hbWU6ICLkv53lrZjlkI0iLAogICAgICAgIHNhdmVOYW1lVGlwOiAi55S75YOP44KS5ZCN5YmN44Gn5L+d5a2YIiwKICAgICAgICBzYXZlTmFtZUFkZFRpdGxlOiAi5L+d5a2Y5pmC44Gr44Oa44O844K444K/44Kk44OI44Or44KS6L+95Yqg44GZ44KLIiwKICAgICAgICBzaXplOiAi44K144Kk44K6IiwKICAgICAgICBhbGw6ICLjgZnjgbnjgaYiLAogICAgICAgIGJpZ1NpemU6ICLjg5Pjg4PjgrDjgrXjgqTjgroiLAogICAgICAgIGljb25TaXplOiAi44Ki44Kk44Kz44OzIiwKICAgICAgICBhcmlhMkhvc3Q6ICJBcmlhMiDjgrXjg7zjg5Djg7wiLAogICAgICAgIGFyaWEyVG9rZW46ICJBcmlhMiDjg4jjg7zjgq/jg7MiLAogICAgICAgIHBvc3QyQXJpYTI6ICJBcmlhMiDjgavmipXnqL8iLAogICAgICAgIGRlZmF1bHQ6ICLliJ3mnJ/oqK3lrpoiLAogICAgICAgIHRleHRGaXJzdDogIuaDheWgseOBjOWtmOWcqOOBmeOCi+WgtOWQiOOAgeWFiOOBq+ihqOekuiIsCiAgICAgICAgb25seVVybDogIlVSTOOBruOBvyIsCiAgICAgICAgdXJsQW5kVGV4dDogIlVSTCArIOaDheWgsSIsCiAgICAgICAgZG93bmxvYWQ6ICLjg4Djgqbjg7Pjg63jg7zjg4kiLAogICAgICAgIHNhdmVCdG5UaXBzOiAi5LiA6YOo44Gu44Kq44OX44K344On44Oz44Gv44CB44Oa44O844K444KS5pu05paw44GX44Gq44GE44Go5pyJ5Yq544Gr44Gq44KK44G+44Gb44KTIiwKICAgICAgICBhZGRpdGlvbmFsRmVhdHVyZTogIui/veWKoOapn+iDvSAoQWx0IOOCreODvOOCkuaKvOOBmeOBqOacieWKuSkiLAogICAgICAgIGludmVydEFkZGl0aW9uYWxGZWF0dXJlOiAi44K344On44O844OI44Kr44OD44OI44Kt44O844KS5Y+N6LuiICjml6Llrprjgafov73liqDmqZ/og73jgpLkvb/nlKgpIiwKICAgICAgICBjb3B5OiAi44Oq44Oz44Kv44KS44Kz44OU44O8IiwKICAgICAgICBjb3B5SW1nOiAi55S75YOP44OH44O844K/44KS44Kz44OU44O8IiwKICAgICAgICBvcGVuSW5OZXdUYWI6ICLmlrDjgZfjgYTjgr/jg5bjgafplovjgY8iLAogICAgICAgIGNsb3NlQnRuOiAi44Kt44Oj44Oz44K744OrIiwKICAgICAgICBpbnZlcnRCdG46ICLlj43ou6IiLAogICAgICAgIGNvbXBhcmVCdG46ICLmr5TovIMiLAogICAgICAgIHNlbGVjdEFsbEJ0bjogIuWFqOOBpumBuOaKniIsCiAgICAgICAgY2xvc2VCdG5UaXBzOiAi6Kit5a6a44KS44Kt44Oj44Oz44K744Or44GX44CB44GZ44G544Gm44Gu44Kq44OX44K344On44Oz44KS5b6p5YWD44GX44G+44GZIiwKICAgICAgICByZXNldExpbms6ICLliJ3mnJ/oqK3lrprjgavmiLvjgZkiLAogICAgICAgIHJlc2V0TGlua1RpcHM6ICLjgZnjgbnjgabjga7oqK3lrprjgpLliJ3mnJ/lgKTjgavmiLvjgZfjgb7jgZkiLAogICAgICAgIHNoYXJlOiAi5YWx5pyJIiwKICAgICAgICBzdWl0TG9uZ0ltZzogIumVt+OBhOeUu+WDj+OCkuOCueOCr+ODreODvOODq+OCpuOCo+ODs+ODieOCpuOBq+WQiOOCj+OBm+OCiyIsCiAgICAgICAgZ2xvYmFsa2V5czogIuODl+ODrOODk+ODpeODvOOBruOBn+OCgeOBruOCsOODreODvOODkOODq+OCreODvDogIiwKICAgICAgICBnbG9iYWxrZXlzUHJlc3M6ICLmirzjgZnjgajjg5fjg6zjg5Pjg6Xjg7zjgpLliIfjgormm7/jgYjjgb7jgZkiLAogICAgICAgIGdsb2JhbGtleXNIb2xkOiAi44OX44Os44OT44Ol44O844KS5pyJ5Yq544Gr44GZ44KL44Gr44Gv44CB5oq844GX57aa44GR44G+44GZIiwKICAgICAgICBnbG9iYWxrZXlzVHlwZTogIuODl+ODrOODk+ODpeODvOOCkuacieWKueOBq+OBmeOCi+aWueazlSIsCiAgICAgICAgY2xvc2VBZnRlclByZXZpZXc6ICLjg5fjg6zjg5Pjg6Xjg7zlvozjgIHnlLvlg4/jgqbjgqPjg7Pjg4njgqbjgpLplonjgZjjgosiLAogICAgICAgIHByZXZpZXdNYXhTaXplOiAi44OX44Os44OT44Ol44O8IOOCpuOCo+ODs+ODieOCpuOBruacgOWkp+OCteOCpOOCuiIsCiAgICAgICAgcHJldmlld01heFNpemVUaXA6ICLjg5fjg6zjg5Pjg6Xjg7wg44Km44Kj44Oz44OJ44Km44GM6Kit5a6a44GX44Gf44K144Kk44K644KI44KK5aSn44GN44GE5aC05ZCI44CB44OX44Os44OT44Ol44O8IOOCpuOCo+ODs+ODieOCpuOCkuaLoeWkp+e4ruWwj+OBl+OBvuOBmeOAgjAg44Gv54Sh5Yq544Gn44GZIiwKICAgICAgICBsb2FkQWxsOiAi44GV44KJ44Gr6Kqt44G/6L6844KAIiwKICAgICAgICBsb2FkZWRBbGw6ICLoqq3jgb/ovrzjgb/lrozkuoYiLAogICAgICAgIGxvYWRpbmc6ICLoqq3jgb/ovrzjgb/kuK0uLi4iLAogICAgICAgIGxvYWRBbGxUaXA6ICLmrKHjga7jg5rjg7zjgrjjga7nlLvlg4/jgpLoqq3jgb/ovrzjgb/jgb7jgZkiLAogICAgICAgIHZpZXdtb3JlRW5kbGVzczogIuOCueOCr+ODreODvOODq+ODkOODvOOBruacgOS4i+mDqOOBvuOBp+OCueOCr+ODreODvOODq+OBmeOCi+OBqOOAgeOBleOCieOBq+WkmuOBj+OBrueUu+WDj+OBjOiqreOBv+i+vOOBvuOCjOOBvuOBmSIsCiAgICAgICAgZmlkZGxlOiAi5pON5L2cIiwKICAgICAgICBmaWRkbGVUaXA6ICLopIfpm5Hjgarmk43kvZzjgpLooYzjgYbjgZ/jgoHjga7nlLvlg4/jg53jg4Pjg5fjgqLjg4Pjg5ciLAogICAgICAgIGFkZEltYWdlVXJsczogIueUu+WDj+OCkui/veWKoCIsCiAgICAgICAgYWRkSW1hZ2VVcmxzVGlwczogIlVSTCDjgYvjgonjgZXjgonjgavlpJrjgY/jga7nlLvlg4/jgpLov73liqAiLAogICAgICAgIG9wZW5JbWFnZXM6ICLjg63jg7zjgqvjg6vnlLvlg48iLAogICAgICAgIG9wZW5JbWFnZXNUaXBzOiAi44Ot44O844Kr44Or55S75YOP44KS44Kk44Oz44Od44O844OI44GZ44KL44Gr44Gv44CB44Kv44Oq44OD44Kv44GX44Gm44GP44Gg44GV44GEIiwKICAgICAgICBjbG9zZUZpcnN0OiAi5pyA5Yid44Gr5pei5a2Y44Gu44Ku44Oj44Op44Oq44O844KS6ZaJ44GY44G+44GZIiwKICAgICAgICBjb2xsZWN0OiAi44Kz44Os44Kv44K344On44OzIiwKICAgICAgICBjb2xsZWN0ZWQ6ICLjgrPjg6zjgq/jgrfjg6fjg7Pjgavov73liqDmuIjjgb8iLAogICAgICAgIGV4aXRDb2xsZWN0aW9uOiAi44Kz44Os44Kv44K344On44Oz44KS57WC5LqGIiwKICAgICAgICBleGl0Q29sbGVjdGlvblRpcDogIuOCs+ODrOOCr+OCt+ODp+ODs+ODouODvOODieOCkue1guS6huOBmeOCi+OBq+OBr+OAgeOCr+ODquODg+OCr+OBl+OBpuOBj+OBoOOBleOBhCIsCiAgICAgICAgbm9Db2xsZWN0aW9uWWV0OiAi44Kz44Os44Kv44K344On44Oz5YaF44Gr55S75YOP44Gv44GC44KK44G+44Gb44KTIiwKICAgICAgICBjb2xsZWN0RGV0YWlsOiAi6Kqs5piOIiwKICAgICAgICBjb2xsZWN0RGV0YWlsVGlwOiAi44GK5rCX44Gr5YWl44KK44Gu55S75YOP44Gr6Kqs5piO44KS6L+95Yqg44GX44G+44GZIiwKICAgICAgICBwbGF5U2xpZGU6ICLjgrnjg6njgqTjg4njgrfjg6fjg7zjgpLlho3nlJ8iLAogICAgICAgIHNsaWRlR2FwOiAi6ZaT6ZqUICjnp5IpIiwKICAgICAgICBzbGlkZUdhcFRpcDogIumWk+malCAo5Y2Y5L2NOiDnp5IpIiwKICAgICAgICBzbGlkZUJhY2s6ICLmiLvjgosiLAogICAgICAgIHNsaWRlQmFja1RpcDogIuWJjeOBi+OCieW+jOOCjeOBq+WGjeeUnyIsCiAgICAgICAgc2xpZGVSYW5kb206ICLjgrfjg6Pjg4Pjg5Xjg6siLAogICAgICAgIHNsaWRlV2FpdDogIueUu+WDj+iqreOBv+i+vOOBv+OCkuW+heOBpCIsCiAgICAgICAgc2xpZGVXYWl0VGlwOiAi5ZCE55S75YOP44GM5a6M5YWo44Gr6Kqt44G/6L6844G+44KM44KL44Go44CB44Kr44Km44Oz44OI44OA44Km44Oz44GM5aeL44G+44KK44G+44GZIiwKICAgICAgICBzbGlkZVNraXBFcnJvcjogIuOCqOODqeODvOeUu+WDj+OCkuOCueOCreODg+ODlyIsCiAgICAgICAgc2xpZGVTa2lwRXJyb3JUaXA6ICLjgqjjg6njg7znlLvlg4/jgpLoqq3jgb/ovrzjgoDjgZ/jgoHjgavjgIHjgZnjgZDjgavjgrnjgq3jg4Pjg5fjgZfjgb7jgZkiLAogICAgICAgIHR5cGU6ICLjgqvjg4bjgrTjg6oiLAogICAgICAgIHR5cGVUaXA6ICLnlLvlg4/jgqvjg4bjgrTjg6rjgpLpgbjmip4iLAogICAgICAgIHNob3dXaXRoUnVsZXM6ICLjg6vjg7zjg6vjgafjgqLjgqTjgrPjg7PjgpLlvLfliLbnmoTjgavooajnpLoiLAogICAgICAgIHNob3dXaXRoUnVsZXNUaXA6ICLnlLvlg4/jga7jgrXjgqTjgrrjgavplqLkv4LjgarjgY/jgIHjg6vjg7zjg6vjgavkuIDoh7TjgZnjgovloLTlkIjjga/jgqLjgqTjgrPjg7PjgpLooajnpLrjgZfjgb7jgZkiLAogICAgICAgIGFkdmFuY2VkUnVsZXM6ICLpq5jluqbjgarjg6vjg7zjg6siLAogICAgICAgIGFkdmFuY2VkUnVsZXNUaXA6ICLpq5jluqbjgarjg6vjg7zjg6vjgavkuIDoh7QiLAogICAgICAgIHRwUnVsZXM6ICLjg6/jgqTjg6vjg4njgqvjg7zjg4njg6vjg7zjg6siLAogICAgICAgIHRwUnVsZXNUaXA6ICLjg6/jgqTjg6vjg4njgqvjg7zjg4njg6vjg7zjg6vjgavkuIDoh7QiLAogICAgICAgIHNjYWxlUnVsZXM6ICLmi6HlpKciLAogICAgICAgIHNjYWxlUnVsZXNUaXA6ICLoh6rli5XnmoTjgavmpJzlh7rjgZXjgozjgIHmi6HlpKfjgZXjgozjgZ/nlLvlg48iLAogICAgICAgIG5vU2NhbGVSdWxlczogIuaLoeWkp+OBquOBlyIsCiAgICAgICAgbm9TY2FsZVJ1bGVzVGlwOiAi6Ieq5YuV55qE44Gr5qSc5Ye644GV44KM44Gf44GM44CB5ouh5aSn44GV44KM44Gm44GE44Gq44GE55S75YOPIiwKICAgICAgICBzbWFsbFJ1bGVzOiAi5bCP44GV44Gq44K144Kk44K6IiwKICAgICAgICBzbWFsbFJ1bGVzVGlwOiAi44K144Kk44K644Gu5bCP44GV44GE55S75YOPICjpq5jjgZUgeCDluYXjga7lrp/lr7jjgYwgI3QjIOODlOOCr+OCu+ODq+acqua6gCkiLAogICAgICAgIGxvY2tTaXplVGlwOiAi5pyA5aSn44K144Kk44K644KS44Ot44OD44KvIiwKICAgICAgICBjb21tYW5kOiAi44Kz44Oe44Oz44OJIiwKICAgICAgICBjb21tYW5kVGlwOiAi44Kz44Oe44Oz44OJ44Oh44OL44Ol44O8IiwKICAgICAgICBvbmxpbmVFZGl0OiAi44Kq44Oz44Op44Kk44Oz57eo6ZuGIiwKICAgICAgICBvbmxpbmVFZGl0VGlwOiAiI3QjIOOCkuS9v+eUqOOBl+OBpuOBk+OBrueUu+WDj+OCkuOCquODs+ODqeOCpOODs+OBp+e3qOmbhiIsCiAgICAgICAgb3BlbkluTmV3V2luZG93OiAi5paw44GX44GE44Km44Kj44Oz44OJ44Km44Gn6ZaL44GPIiwKICAgICAgICBvcGVuSW5OZXdXaW5kb3dUaXA6ICLnlLvlg4/jgpLmlrDjgZfjgYTjgqbjgqPjg7Pjg4njgqbjgafplovjgY8iLAogICAgICAgIGZpbmRJblBhZ2U6ICLjg5rjg7zjgrjlhoXjgpLmpJzntKIiLAogICAgICAgIGZpbmRJblBhZ2VUaXA6ICLjg5rjg7zjgrjlhoXjga7nj77lnKjjga7nlLvlg4/jgavjgrnjgq/jg63jg7zjg6siLAogICAgICAgIHZpZXdDb2xsZWN0aW9uOiAi44Kz44Os44Kv44K344On44Oz44KS6KaL44KLIiwKICAgICAgICB2aWV3Q29sbGVjdGlvblRpcDogIuWPjumbhuOBl+OBn+OBmeOBueOBpuOBrueUu+WDj+OCkuimi+OCiyIsCiAgICAgICAgaW5Db2xsZWN0aW9uOiAi44Kz44Os44Kv44K344On44Oz44Oi44O844OJ44Gn44Gv5L2/55So44Gn44GN44G+44Gb44KTIiwKICAgICAgICBjYW50RmluZDogIueUu+WDj+OBr+aWh+abuOWGheOBq+WtmOWcqOOBl+OBquOBhOOBi+OAgemdnuihqOekuuOBp+S9jee9ruOBjOeJueWumuOBp+OBjeOBvuOBm+OCk++8gSIsCiAgICAgICAgZXhwb3J0SW1hZ2VzOiAi44GZ44G544Gm44Gu55S75YOP44KS44Ko44Kv44K544Od44O844OIIiwKICAgICAgICBleHBvcnRJbWFnZXNUaXA6ICLooajnpLrjgZXjgozjgabjgYTjgovjgZnjgbnjgabjga7pq5jnlLvos6rnlLvlg4/jgpLmlrDjgZfjgYTjgqbjgqPjg7Pjg4njgqbjgavjgqjjgq/jgrnjg53jg7zjg4giLAogICAgICAgIGRvd25sb2FkSW1hZ2U6ICLjgZnjgbnjgabjg4Djgqbjg7Pjg63jg7zjg4kiLAogICAgICAgIGRvd25sb2FkSW1hZ2VUaXA6ICLnj77lnKjooajnpLrjgZXjgozjgabjgYTjgovjgZnjgbnjgabjga7nlLvlg4/jgpLjg4Djgqbjg7Pjg63jg7zjg4kiLAogICAgICAgIGNvcHlJbWFnZXNVcmw6ICLjgZnjgbnjgabjga7nlLvlg48gVVJMIOOCkuOCs+ODlOODvCIsCiAgICAgICAgY29weUltYWdlc1VybFRpcDogIuihqOekuuOBleOCjOOBpuOBhOOCi+OBmeOBueOBpuOBrumrmOeUu+izqueUu+WDj+OBriBVUkwg44KS44Kz44OU44O8IiwKICAgICAgICBjb3B5U3VjY2VzczogIiN0IyDlgIvjga4gVVJMIOOCkuOCs+ODlOODvOOBl+OBvuOBl+OBnyIsCiAgICAgICAgYXV0b1JlZnJlc2g6ICLoh6rli5Xjgafjg5rjg7zjgrjjgpLjg63jg7zjg4kiLAogICAgICAgIGF1dG9SZWZyZXNoVGlwOiAi5pyA5b6M44Gu5pWw5p6a44Gu55S75YOP44GM6KGo56S644GV44KM44Gf44KJ44CB44Km44Kj44Oz44OJ44Km44KS5LiL44G+44Gn44K544Kv44Ot44O844Or44GX44Gm44CB5paw44GX44GE55S75YOP44KS6Kqt44G/6L6844KA44KI44GG44Gr44Km44Kn44OW44Oa44O844K444Gr5oyH56S644GX44G+44GZIiwKICAgICAgICBlbnRlckZ1bGxzYzogIuODleODq+OCueOCr+ODquODvOODs+ihqOekuiIsCiAgICAgICAgZXhpdEZ1bGxzYzogIuODleODq+OCueOCr+ODquODvOODs+OCkumWieOBmOOCiyIsCiAgICAgICAgY29uZmlnOiAi6Kit5a6aIiwKICAgICAgICBvcGVuQ29uZmlnOiAi6Kit5a6a44KS6ZaL44GPIiwKICAgICAgICBydWxlUmVxdWVzdDogIuODq+ODvOODq+imgeaxgiIsCiAgICAgICAgY2xvc2VHYWxsZXJ5OiAi44Ku44Oj44Op44Oq44O844KS6ZaJ44GY44KLIiwKICAgICAgICByZXR1cm5Ub0dhbGxlcnk6ICLjgq7jg6Pjg6njg6rjg7zjgavmiLvjgosiLAogICAgICAgIHBpY0luZm86ICLjgq/jg6rjg4Pjgq/jgZfjgablpInmm7QiLAogICAgICAgIHBpY05vdGU6ICLnlLvlg4/ms6jph4giLAogICAgICAgIHVybEZpbHRlcjogIlVSTCDjg5XjgqPjg6vjgr/jg7wiLAogICAgICAgIHVybEZpbHRlclRpcDogIuOCreODvOODr+ODvOODieOBvuOBn+OBr+ato+imj+ihqOePvuOCkuWFpeWKm+OBl+OBpiBVUkwg44KS44OV44Kj44Or44K/44Oq44Oz44KwIiwKICAgICAgICByZXNvbHV0aW9uOiAi55S75YOP6Kej5YOP5bqmIiwKICAgICAgICBwaWNOdW06ICLnlLvlg4/mlbAiLAogICAgICAgIHBpY1RpcHM6ICJDVFJMIOOCreODvOOCkuaKvOOBl+OBquOBjOOCieeUu+WDj+OCkuihqOekuiIsCiAgICAgICAgc2F2ZVBhZ2VUaXBzOiAi44GT44Gu44Oa44O844K444KS5L+d5a2Y44GX44Gm44GZ44G544Gm44Gu55S75YOP44KS44OA44Km44Oz44Ot44O844OJIiwKICAgICAgICBzY2FsZVJhdGlvOiAi44K544Kx44O844Or5q+U546HIiwKICAgICAgICBzaW1pbGFySW1hZ2U6ICLnlLvlg4/mpJzntKIiLAogICAgICAgIHNjYWxlOiAi44K644O844OgIiwKICAgICAgICBob3Jpem9udGFsRmxpcDogIuawtOW5s+aWueWQkeOBq+WPjei7oiIsCiAgICAgICAgdmVydGljYWxGbGlwOiAi5Z6C55u05pa55ZCR44Gr5Y+N6LuiIiwKICAgICAgICBhY3R1YWxCdG46ICLjgqrjg6rjgrjjg4rjg6vooajnpLogKEEpIiwKICAgICAgICBzZWFyY2hCdG46ICLjgqrjg6rjgrjjg4rjg6vnlLvlg4/jgpLmjqLjgZkgKFMpIiwKICAgICAgICBnYWxsZXJ5QnRuOiAi44Ku44Oj44Op44Oq44O86KGo56S6IChHKSIsCiAgICAgICAgY3VycmVudEJ0bjogIuePvuWcqOihqOekuiAoQykiLAogICAgICAgIG1hZ25pZmllckJ0bjogIuaLoeWkp+mPoSAvIOOCuuODvOODoCAoTSkiLAogICAgICAgIHBpY1RpdGxlOiAi55S75YOP44K/44Kk44OI44OrIiwKICAgICAgICBleHBvcnRJbWFnZXNVcmw6ICLnlLvlg48gVVJMIOOCqOOCr+OCueODneODvOODiCIsCiAgICAgICAgZXhwb3J0SW1hZ2VzVXJsUG9wOiAiQ3RybCtDIOOBp+eUu+WDjyBVUkwg44KS44Kz44OU44O8IiwKICAgICAgICBiZWdpblNlYXJjaEltZzogIiN0IyDnlLvlg4/mpJzntKLplovlp4suLi4iLAogICAgICAgIGZpbmROb1BpYzogIuOCquODquOCuOODiuODq+eUu+WDj+OBjOimi+OBpOOBi+OCiuOBvuOBm+OCkyIsCiAgICAgICAgZmluZE92ZXJCZWdpbkxvYWQ6ICIjdCMg44Oe44OD44OX44Gu57WC44KP44KK44CBI3QjIOWAi+OBruS4gOiHtOeUu+WDj+OBjOimi+OBpOOBi+OCiuOBvuOBl+OBn+OAguacgOWIneOBrueUu+WDj+OBruiqreOBv+i+vOOBv+OCkumWi+Wni+OBl+OBvuOBmSIsCiAgICAgICAgbG9hZE5leHRTaW1pbGFyOiAi44Kq44Oq44K444OK44Or55S75YOP44Gu6Kqt44G/6L6844G/44Gr5aSx5pWX44GX44G+44GX44Gf44CC5qyh44Gu57WQ5p6c44KS6Kqt44G/6L6844G/44G+44GZLi4uIiwKICAgICAgICBsb2FkRXJyb3I6ICLoqq3jgb/ovrzjgb/jgqjjg6njg7wiLAogICAgICAgIG9wZW5Ib21lUGFnZTogIuODm+ODvOODoOODmuODvOOCuOOCkumWi+OBjyIsCiAgICAgICAgcG9zaXRpb246ICLooajnpLrkvY3nva4iLAogICAgICAgIHBvc2l0aW9uVGlwczogIkFMVCDjgq3jg7zjgpLmirzjgZnjgajpnZ7ooajnpLoiLAogICAgICAgIHRvcExlZnQ6ICLnlLvlg4/jga7lt6bkuIoiLAogICAgICAgIHRvcFJpZ2h0OiAi55S75YOP44Gu5Y+z5LiKIiwKICAgICAgICBib3R0b21SaWdodDogIueUu+WDj+OBruWPs+S4iyIsCiAgICAgICAgYm90dG9tTGVmdDogIueUu+WDj+OBruW3puS4iyIsCiAgICAgICAgdG9wQ2VudGVyOiAi55S75YOP44Gu5qiqIiwKICAgICAgICBib3R0b21DZW50ZXI6ICLnlLvlg4/jga7kuIsiLAogICAgICAgIGZsb2F0QmFyOiAi44OE44O844Or44OQ44O8IiwKICAgICAgICBwcmV2aWV3Rm9sbG93TW91c2U6ICLjg57jgqbjgrnjga7mqKrjgavjg5fjg6zjg5Pjg6Xjg7zjgpLooajnpLoiLAogICAgICAgIHNob3dEZWxheTogIuihqOekuumBheW7tiIsCiAgICAgICAgbXM6ICLjg5/jg6rnp5IiLAogICAgICAgIGhpZGU6ICLpnZ7ooajnpLoiLAogICAgICAgIGhpZGVEZWxheTogIumdnuihqOekuuOBvuOBp+OBrumBheW7tiIsCiAgICAgICAgZm9yY2VTaG93OiAi44OE44O844Or44OQ44O844Gu5by35Yi26KGo56S6OiDmjIflrprjgrXjgqTjgrrjgpLotoXjgYjjgovpnZ7mi6HlpKfnlLvlg4/kuIrjgavooajnpLoiLAogICAgICAgIGZvcmNlU2hvd1RpcDogIuaMh+WumuOCteOCpOOCuuOCkui2heOBiOOCi+mdnuaLoeWkp+eUu+WDj+OBjOOBguOCi+WgtOWQiOOAgeODleODreODvOODhuOCo+ODs+OCsOODhOODvOODq+ODkOODvOOCkuihqOekuuOBl+OBvuOBmSIsCiAgICAgICAgc2l6ZUxpbWl0T3I6ICLpq5jjgZXjgb7jgZ/jga/luYXjga7jgb/jgYzlr77osaEiLAogICAgICAgIHB4OiAicHgiLAogICAgICAgIG1pblNpemVMaW1pdDogIuaMh+WumuOCteOCpOOCuuOCkui2heOBiOOCi+aLoeWkp+eUu+WDj+S4iuOBq+ODhOODvOODq+ODkOODvOOCkuihqOekuiIsCiAgICAgICAgbWluU2l6ZUxpbWl0VGlwOiAi55S75YOP44GM5ouh5aSn44GV44KM44Gf5b6MICjlhYPjga7nlLvlg4/jgrXjgqTjgrrjgajlrp/pmpvjga7jgrXjgqTjgrrjgYzkuIDoh7TjgZfjgarjgYTloLTlkIgp44CB6KGo56S644GV44KM44KL55S75YOP44Gu6ZW344GV44GM6Kit5a6a5YCk44KS6LaF44GI44KL44Go44CB44OV44Ot44O844OG44Kj44Oz44Kw44OE44O844Or44OQ44O844GM6KGo56S644GV44KM44G+44GZIiwKICAgICAgICBkZWZhdWx0U2l6ZUxpbWl0OiAi44Ku44Oj44Op44Oq44O844Gu44OH44OV44Kp44Or44OI44K144Kk44K65Yi26ZmQIiwKICAgICAgICBsaXN0ZW5CZzogIuiDjOaZr+eUu+WDj+OBruebo+imliIsCiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAi6IOM5pmv6ImyIiwKICAgICAgICBsaXN0ZW5CZ1RpcDogIuiDjOaZr+eUu+WDj+OCkuaMgeOBpOimgee0oOS4iuOBq+ODhOODvOODq+ODkOODvOOCkuihqOekuiIsCiAgICAgICAgYnV0b25PcmRlcjogIuODhOODvOODq+ODkOODvOOCouOCpOOCs+ODs+OBruS4puOBs+mghiIsCiAgICAgICAga2V5c0VuYWJsZTogIuOCt+ODp+ODvOODiOOCq+ODg+ODiOOCkuacieWKueOBq+OBmeOCiyIsCiAgICAgICAga2V5c0FjdHVhbDogIuWkp+OBjeOBqueUu+WDj+OCkumWi+OBjyIsCiAgICAgICAga2V5c0FjdHVhbFRpcDogIuODleODreODvOODhuOCo+ODs+OCsOODkOODvOOBjOihqOekuuOBleOCjOOBpuOBhOOCi+OBqOOBjeOBq+OAgeOBk+OBruODnOOCv+ODs+OCkuaKvOOBmeOBqOWkp+OBjeOBqueUu+WDj+OCkumWi+OBjeOBvuOBmSIsCiAgICAgICAga2V5c1NlYXJjaDogIuOCquODquOCuOODiuODq+eUu+WDj+OCkuaOouOBmSIsCiAgICAgICAga2V5c1NlYXJjaFRpcDogIuODleODreODvOODhuOCo+ODs+OCsOODkOODvOOBjOihqOekuuOBleOCjOOBpuOBhOOCi+OBqOOBjeOBq+OAgeOBk+OBruODnOOCv+ODs+OCkuaKvOOBmeOBqOOAgeOCquODquOCuOODiuODq+eUu+WDj+OCkuaOouOBl+OBvuOBmSIsCiAgICAgICAgaGVhZFNlYXJjaFRpcDogIueUu+WDj+aknOe0oiIsCiAgICAgICAgaGVhZFNlYXJjaEFsbDogIuOBmeOBueOBpuaknOe0oiIsCiAgICAgICAga2V5c0N1cnJlbnQ6ICLnj77lnKjjga7nlLvlg4/jgpLplovjgY8iLAogICAgICAgIGtleXNDdXJyZW50VGlwOiAi44OV44Ot44O844OG44Kj44Oz44Kw44OQ44O844GM6KGo56S644GV44KM44Gm44GE44KL44Go44GN44Gr44CB44GT44Gu44Oc44K/44Oz44KS5oq844GZ44Go54++5Zyo44Gu55S75YOP44KS6ZaL44GN44G+44GZIiwKICAgICAgICBrZXlzTWFnbmlmaWVyOiAi5ouh5aSn6Y+h44KS6ZaL44GE44Gm6Kaz5a+fIiwKICAgICAgICBrZXlzTWFnbmlmaWVyVGlwOiAi44OV44Ot44O844OG44Kj44Oz44Kw44OQ44O844GM6KGo56S644GV44KM44Gm44GE44KL44Go44GN44Gr44CB44GT44Gu44Oc44K/44Oz44KS5oq844GZ44Go5ouh5aSn6Y+h44KS6ZaL44GN44G+44GZIiwKICAgICAgICBrZXlzR2FsbGVyeTogIuOCruODo+ODqeODquODvOOCkumWi+OBjyAo44Kw44Ot44O844OQ44Or5qmf6IO944Kt44O85LuY44GNKSIsCiAgICAgICAga2V5c0dhbGxlcnlUaXA6ICLjg5Xjg63jg7zjg4bjgqPjg7PjgrDjg5Djg7zjgYzooajnpLrjgZXjgozjgabjgYTjgovjgajjgY3jgavjgIHjgZPjga7jg5zjgr/jg7PjgpLmirzjgZnjgajjgq7jg6Pjg6njg6rjg7zjgpLplovjgY3jgb7jgZkiLAogICAgICAgIG9wZW5HYWxsZXJ5OiAi44Ku44Oj44Op44Oq44O844KS6ZaL44GPIiwKICAgICAgICBtYWduaWZpZXI6ICLjgrrjg7zjg6AiLAogICAgICAgIG1hZ25pZmllclJhZGl1czogIuODh+ODleOCqeODq+ODiOOBruWNiuW+hCIsCiAgICAgICAgbWFnbmlmaWVyV2hlZWxab29tRW5hYmxlZDogIuODm+OCpOODvOODq+OBq+OCiOOCi+OCuuODvOODoOOCkuacieWKueOBq+OBmeOCiyIsCiAgICAgICAgbWFnbmlmaWVyV2hlZWxab29tUmFuZ2U6ICLmi6HlpKfpj6Hjga7jgrrjg7zjg6Dmr5TnjociLAogICAgICAgIG1hZ25pZmllclNjYWxlSW1hZ2U6ICLjg5vjgqTjg7zjg6vmk43kvZzjgafnlLvlg4/jgpLmi6HlpKcv57iu5bCPIiwKICAgICAgICBnYWxsZXJ5OiAi44Ku44Oj44Op44Oq44O8IiwKICAgICAgICBnYWxsZXJ5Rml0VG9TY3JlZW46ICLnlLvpnaLjgavlj47jgb7jgovjgojjgYbjgavnlLvlg4/jgpLnuK7lsI/jg7vmi6HlpKciLAogICAgICAgIGdhbGxlcnlGaXRUb1NjcmVlblNtYWxsOiAi5bCP44GV44Gq55S75YOP44KC5ouh5aSnIiwKICAgICAgICBnYWxsZXJ5Rml0VG9TY3JlZW5UaXA6ICLjga/jgb/lh7rjgZXjgarjgYTjgojjgYbjgavoqr/mlbQgKOimhuOCj+OBquOBhCkiLAogICAgICAgIGdhbGxlcnlTY3JvbGxFbmRUb0NoYW5nZTogIumVt+OBhOeUu+WDj+OBjOacgOW+jOOBvuOBp+OCueOCr+ODreODvOODq+OBleOCjOOBn+OCieOAgeasoeOBrueUu+WDj+OBq+WIh+OCiuabv+OBiCIsCiAgICAgICAgZ2FsbGVyeVNjcm9sbEVuZFRvQ2hhbmdlVGlwOiAi5Lul5YmN44Gu44Kq44OX44K344On44Oz44KS54Sh5Yq544Gr44GX44Gf5b6M44Gr5pyJ5Yq5IiwKICAgICAgICBnYWxsZXJ5RXhwb3J0VHlwZTogIueUu+WDj+OCkuOCqOOCr+OCueODneODvOODiOOBmeOCi+mam+OBruODh+ODleOCqeODq+ODiOOBruOCveODvOODiOmghiIsCiAgICAgICAgZ3JpZDogIuOCv+OCpOODq+ihqOekuiIsCiAgICAgICAgZ3JpZEJpZzogIuOCquODquOCuOODiuODq+mghiIsCiAgICAgICAgbGlzdDogIuODquOCueODiOihqOekuiIsCiAgICAgICAgZ2FsbGVyeUF1dG9Mb2FkOiAi5qyh44Gu44Oa44O844K444Gu55S75YOP44KS6Ieq5YuV55qE44Gr6Kqt44G/6L6844KAIiwKICAgICAgICBnYWxsZXJ5TG9hZEFsbDogIuOBleOCieOBq+iqreOBv+i+vOOCgOOBqOOBjeOBq+OBmeOBueOBpuOBruODmuODvOOCuOOCkuiHquWLleeahOOBq+WHpueQhiIsCiAgICAgICAgZ2FsbGVyeUxvYWRBbGxUaXA6ICLjg5rjg7zjgrjmlbDjgYzlpJrjgZnjgY7jgovjgajjgIHli5XkvZzjgavlvbHpn7/jgYzlh7rjgovlj6/og73mgKfjgYzjgYLjgorjgb7jgZkiLAogICAgICAgIGdhbGxlcnlEb3dubG9hZFdpdGhaaXA6ICLjgZnjgbnjgabjg4Djgqbjg7Pjg63jg7zjg4nmmYLjgasgWklQIOWcp+e4riIsCiAgICAgICAgZ2FsbGVyeURvd25sb2FkV2l0aFppcEFsZXJ0OiAi5Zyn57iu5Lit44CB44GX44Gw44KJ44GP44GK5b6F44Gh44GP44Gg44GV44GEIiwKICAgICAgICBnYWxsZXJ5U2NhbGVTbWFsbFNpemUxOiAi5a6f6Zqb44Gu44K144Kk44K644GM5bmF44Go6auY44GV44GM5bCP44GV44GP44GmIiwKICAgICAgICBnYWxsZXJ5U2NhbGVTbWFsbFNpemUyOiAi44OU44Kv44K744Or44GM5bCP44GV44GE55S75YOP44Gr44Kw44Or44O844OX5YyWIiwKICAgICAgICBnYWxsZXJ5U2hvd1NtYWxsU2l6ZTogIuODh+ODleOCqeODq+ODiOOBp+Wwj+OBleOBquOCteOCpOOCuuOBrueUu+WDj+OCkuihqOekuiIsCiAgICAgICAgZ2FsbGVyeVRyYW5zaXRpb246ICLjgq7jg6Pjg6njg6rjg7zjga7liIfjgormm7/jgYjmmYLjgavooajnpLrlirnmnpwiLAogICAgICAgIGdhbGxlcnlTaWRlYmFyUG9zaXRpb246ICLjgrXjg6Djg43jgqTjg6vjg5Djg7zjga7kvY3nva4iLAogICAgICAgIGJvdHRvbTogIuS4iyIsCiAgICAgICAgcmlnaHQ6ICLlj7MiLAogICAgICAgIGxlZnQ6ICLlt6YiLAogICAgICAgIHRvcDogIuS4iiIsCiAgICAgICAgZ2FsbGVyeVNpZGViYXJTaXplOiAi6auY44GVIiwKICAgICAgICBnYWxsZXJ5U2lkZWJhclNpemVUaXA6ICLjgrXjg6Djg43jgqTjg6vjg5Djg7zjga7pq5jjgZUgKOaoquWQkeOBjSkg44G+44Gf44Gv5bmFICjnuKblkJHjgY0pIiwKICAgICAgICBnYWxsZXJ5TWF4MTogIuODl+ODquODleOCp+ODg+ODgeaVsCAo5pyA5aSnKSIsCiAgICAgICAgZ2FsbGVyeU1heDI6ICLnlLvlg48gKOWJjeW+jCkiLAogICAgICAgIGdhbGxlcnlBdXRvWm9vbTogIuOCuuODvOODoOOCkiAxMDAlIOOBq+aIu+OBmSAoQ2hyb21lKSIsCiAgICAgICAgZ2FsbGVyeUF1dG9ab29tVGlwOiAi44K644O844Og44Kk44Oz44GX44Gf5aC05ZCI44CB55S75YOP44Go44K144Kk44OJ44OQ44O844K744Kv44K344On44Oz44Gu44K644O844Og44KSIDEwMCUg44Gr5oi744GX44CB6KGo56S66aCY5Z+f44KS5bqD44GS44G+44GZIChDaHJvbWUg44Gu44G/5pyJ5Yq5KSIsCiAgICAgICAgZ2FsbGVyeURlc2NyaXB0aW9uTGVuZ3RoMTogIuazqOmHiOOBruacgOWkp+aWh+Wtl+aVsOOBryIsCiAgICAgICAgZ2FsbGVyeURlc2NyaXB0aW9uTGVuZ3RoMjogIuaWh+Wtl+OBp+OBmSIsCiAgICAgICAgZ2FsbGVyeUF1dG9PcGVuU2l0ZXM6ICLoh6rli5Xjgq7jg6Pjg6njg6rjg7zplovplonjga4gVVJMIOODq+ODvOODqyAoMeihjDHjgaTjgIFAIOOBp+Wni+OBvuOCi+ihjOOBr+OAjOOCguOBo+OBqOimi+OCi+OAjSkiLAogICAgICAgIGRpc2FibGVLZXlTaXRlczogIuOCt+ODp+ODvOODiOOCq+ODg+ODiCDjgq3jg7zjgpLnhKHlirnjgavjgZnjgosgVVJMIOOBruato+imj+ihqOePviAoMeihjDHjgaQpIiwKICAgICAgICBhdXRvT3BlblZpZXdtb3JlOiAi44Ku44Oj44Op44Oq44O844KS6ZaL44GP44Go6Ieq5YuV55qE44Gr44CM44KC44Gj44Go6KaL44KL44CNIiwKICAgICAgICBnYWxsZXJ5U2VhcmNoRGF0YTogIuaknOe0ouOCteOCpOODiOODq+ODvOODqyAo56m644Gr44GZ44KL44GT44Go44Gn5b6p5YWDKSIsCiAgICAgICAgZ2FsbGVyeUVkaXRTaXRlOiAi44Kq44Oz44Op44Kk44Oz57eo6ZuG44K144Kk44OIIiwKICAgICAgICBpbWdXaW5kb3c6ICLnlLvlg4/jgqbjgqPjg7Pjg4njgqYiLAogICAgICAgIGltZ1dpbmRvd0ZpdFRvU2NyZWVuOiAi55S76Z2i44Gr5Y+O44G+44KL44KI44GG44Gr6Kq/5pW0IiwKICAgICAgICBpbWdXaW5kb3dGaXRUb1NjcmVlblRpcDogIuOBr+OBv+WHuuOBleOBquOBhOOCiOOBhuOBq+iqv+aVtCAo6KaG44KP44Gq44GEKSIsCiAgICAgICAgaW1nV2luZG93Rml0VG9TY3JlZW5XaGVuU21hbGw6ICLlsI/jgZXjgYTnlLvlg4/jgafjgoLnlLvpnaLjgavlj47jgb7jgovjgojjgYbjgavoqr/mlbQiLAogICAgICAgIGltZ1dpbmRvd0RlZmF1bHRUb29sOiAi44Km44Kj44Oz44OJ44Km44KS6ZaL44GE44Gf44Go44GN44Gr44OH44OV44Kp44Or44OI44Gn6YG45oqe44GV44KM44Gm44GE44KL44OE44O844OrIiwKICAgICAgICBoYW5kOiAi44OP44Oz44OJIiwKICAgICAgICByb3RhdGU6ICLlm57ou6IiLAogICAgICAgIHpvb206ICLmi6HlpKfpj6EiLAogICAgICAgIGltZ1dpbmRvd0VzY0tleTogIkVzYyDjgq3jg7zjgafplonjgZjjgosiLAogICAgICAgIGltZ1dpbmRvd0RibENsaWNrSW1nV2luZG93OiAi44OA44OW44Or44Kv44Oq44OD44Kv44Gn6ZaJ44GY44KLIiwKICAgICAgICBpbWdXaW5kb3dDbGlja091dHNpZGU6ICLjgqrjg7zjg5Djg7zjg6zjgqTlpJbjgpLjgq/jg6rjg4Pjgq/jgZfjgabplonjgZjjgosiLAogICAgICAgIGltZ1dpbmRvd0NsaWNrT3V0c2lkZVRpcDogIuOCquODvOODkOODvOODrOOCpOOBjOihqOekuuOBleOCjOOBpuOBhOOCi+WgtOWQiOOBruOBv+acieWKuSIsCiAgICAgICAgbm9uZTogIuOBquOBlyIsCiAgICAgICAgY2xpY2s6ICLjgq/jg6rjg4Pjgq8iLAogICAgICAgIGRibGNsaWNrOiAi44OA44OW44Or44Kv44Oq44OD44KvIiwKICAgICAgICBpbWdXaW5kb3dPdmVybGF5ZXJTaG93bjogIuOCquODvOODkOODvOODrOOCpCIsCiAgICAgICAgaW1nV2luZG93T3ZlcmxheWVyQ29sb3I6ICLoibLjgajpgI/mmI7luqYiLAogICAgICAgIGltZ1dpbmRvd1NoaWZ0Um90YXRlU3RlcDE6ICJTaGlmdCDjgq3jg7zjgpLmirzjgZfjgarjgYzjgokiLAogICAgICAgIGltZ1dpbmRvd1NoaWZ0Um90YXRlU3RlcDI6ICLluqbjgZrjgaTlm57ou6IiLAogICAgICAgIGltZ1dpbmRvd01vdXNlV2hlZWxab29tOiAi44Ob44Kk44O844Or44Gr44KI44KL44K644O844OgIiwKICAgICAgICBpbWdXaW5kb3dab29tUmFuZ2U6ICLjgrrjg7zjg6Dnr4Tlm7IiLAogICAgICAgIGltZ1dpbmRvd1pvb21SYW5nZVRpcDogIuOCuuODvOODoOWAjeeOhyAo5q2j5pWw44Gn44GC44KL5b+F6KaB44GM44GC44KK44G+44GZKSIsCiAgICAgICAgb3RoZXJzOiAi44Gd44Gu5LuWIiwKICAgICAgICB3YWl0SW1nTG9hZDogIueUu+WDj+OBjOiqreOBv+i+vOOBvuOCjOOCi+OBvuOBp+OAgeOCuuODvOODoOOBquOBqeOBruaTjeS9nOOCkumWi+Wni+OBl+OBquOBhCIsCiAgICAgICAgd2FpdEltZ0xvYWRUaXA6ICJDdHJsIOOCreODvOOCkuaKvOOBl+OBquOBjOOCieaKvOOBmeOBqOOAgeS4gOaZgueahOOBq+OBk+OBruioreWumuOBruWPjeWvvuOCkuWun+ihjOOBp+OBjeOBvuOBmSIsCiAgICAgICAgZGVidWc6ICLjg4fjg5Djg4PjgrDjg6Ljg7zjg4kiLAogICAgICAgIGN1c3RvbVJ1bGVzOiAi5aSn44GN44GE55S75YOP44Gu44Kr44K544K/44Og44Or44O844OrIiwKICAgICAgICBmaXJzdEVuZ2luZTogIuWEquWFiOaknOe0ouOCqOODs+OCuOODsyAoMSDnlarnm67jga7mpJzntKLjgqjjg7Pjgrjjg7MpIiwKICAgICAgICByZWZyZXNoV2hlbkVycm9yOiAi6Kqt44G/6L6844G/44Ko44Op44O844CB44Kv44Oq44OD44Kv44GX44Gm5YaN6Kqt44G/6L6844G/IiwKICAgICAgICBzd2l0Y2hTbGlkZTogIuOCteOCpOODieODkOODvOOCkuWIh+OCiuabv+OBiOOCiyIsCiAgICAgICAgdmlld21vcmU6ICLjgoLjgaPjgajopovjgosiLAogICAgICAgIGNvdW50RG93bjogIuOCq+OCpuODs+ODiOODgOOCpuODsyIsCiAgICAgICAgY3VzdG9tTGFuZzogIuOCq+OCueOCv+ODoOiogOiqniIsCiAgICAgICAgZGVmYXVsdExhbmc6ICLoh6rli5XmpJzlh7oiLAogICAgICAgIGhpZGVJY29uOiAi44Ki44Kk44Kz44Oz44KS6Zqg44GZIiwKICAgICAgICBpbml0U2hvdzogIuODh+ODleOCqeODq+ODiOOBp+ODl+ODrOODk+ODpeODvOOCkuihqOekuiIsCiAgICAgICAgc3RheU91dDogIuODleODreODvOODiOODkOODvOOCkueUu+WDj+WkluOBq+eVmeOCgeOCiyIsCiAgICAgICAgZ2FsbGVyeURvd25sb2FkR2FwOiAi44OA44Km44Oz44Ot44O844OJ6ZaT6ZqUIiwKICAgICAgICBmb3JtYXRDb252ZXJzaW9uOiAi44OA44Km44Oz44Ot44O844OJ5pmC44Gr55S75YOP5b2i5byP44KS5aSJ5o+b44GX44G+44GZ44CCMSDooYzjgasgMSDooYwiLAogICAgICAgIGdhbGxlcnlEaXNhYmxlQXJyb3c6ICLnn6LljbDjgq3jg7zjgpLnhKHlirnjgavjgZnjgosiLAogICAgICAgIHBvc2l0aW9uRml4ZWQ6ICLlm7rlrprkvY3nva4iLAogICAgICAgIHN3aXRjaFN0b3JlTG9jOiAi5YiH44KK5pu/44GI5Lit44Gr5L2N572u44KS5L+d5oyBIgogICAgfQp9LAp7CiAgICBuYW1lOiAi0KPQutGA0LDRl9C90YHRjNC60LAiLAogICAgbWF0Y2g6IFsidWsiLCAidWstVUEiXSwKICAgIGxhbmc6IHsKICAgICAgICAvL9Cj0LrRgNCw0ZfQvdGB0YzQutC40Lkg0L/QtdGA0LXQutC70LDQtCBieSBNYVNIaU5pSy4KICAgICAgICBzYXZlQnRuOiAi0JfQsdC10YDQtdCz0YLQuCIsCiAgICAgICAgc2F2ZU5hbWU6ICLQndCw0LfQstCwINGE0LDQudC70YMiLAogICAgICAgIHNhdmVOYW1lVGlwOiAi0JLQuNC60L7RgNC40YHRgtC+0LLRg9C50YLQtSDQtNC70Y8g0LfQsdC10YDQtdC20LXQvdC90Y8g0LfQvtCx0YDQsNC20LXQvdGMINGW0Lcg0L7RgNC40LPRltC90LDQu9GM0L3QvtGOINC90LDQt9Cy0L7RjiIsCiAgICAgICAgc2F2ZU5hbWVBZGRUaXRsZTogItCU0L7QtNCw0LnRgtC1INC90LDQt9Cy0YMg0YHRgtC+0YDRltC90LrQuCDQv9GW0LQg0YfQsNGBINC30LHQtdGA0LXQttC10L3QvdGPIiwKICAgICAgICBzaXplOiAi0YDQvtC30LzRltGAIiwKICAgICAgICBhbGw6ICLQstGB0ZYiLAogICAgICAgIGJpZ1NpemU6ICLQstC10LvQuNC60LjQuSDRgNC+0LfQvNGW0YAiLAogICAgICAgIGljb25TaXplOiAi0LfQvdCw0YfQvtC6IiwKICAgICAgICBhcmlhMkhvc3Q6ICLQodC10YDQstC10YAgQXJpYTIiLAogICAgICAgIGFyaWEyVG9rZW46ICLQnNCw0YDQutC10YAgQXJpYTIiLAogICAgICAgIHBvc3QyQXJpYTI6ICLQntC/0YPQsdC70ZbQutGD0LLQsNGC0Lgg0LIgYXJpYTIiLAogICAgICAgIGRlZmF1bHQ6ICLQl9CwINC30LDQvNC+0LLRh9GD0LLQsNC90L3Rj9C8IiwKICAgICAgICB0ZXh0Rmlyc3Q6ICLQntC/0LjRgSDRgdC/0L7Rh9Cw0YLQutGDICjRj9C60YnQviDRltGB0L3Rg9GUKSIsCiAgICAgICAgb25seVVybDogItCi0ZbQu9GM0LrQuCBVUkwiLAogICAgICAgIHVybEFuZFRleHQ6ICLQn9C+0YHQuNC70LDQvdC90Y8gKyDQvtC/0LjRgSDRhNCw0LnQu9GDIiwKICAgICAgICBkb3dubG9hZDogItCX0LDQstCw0L3RgtCw0LbQuNGC0LgiLAogICAgICAgIHNhdmVCdG5UaXBzOiAi0KnQvtCxINC00LXRj9C60ZYg0L/QsNGA0LDQvNC10YLRgNC4INCy0YHRgtGD0L/QuNC70Lgg0LIg0YHQuNC70YMsINC90LXQvtCx0YXRltC00L3QviDQvtC90L7QstC40YLQuCDRgdGC0L7RgNGW0L3QutGDLiIsCiAgICAgICAgYWRkaXRpb25hbEZlYXR1cmU6ICLQlNC+0LTQsNGC0LrQvtCy0ZYg0YTRg9C90LrRhtGW0ZcsINC/0L7Rh9C40L3QsNGO0YLRjCDQtNGW0Y/RgtC4LCDQutC+0LvQuCDQvdCw0YLQuNGB0L3Rg9GC0L4g0LrQu9Cw0LLRltGI0YMgQWx0IiwKICAgICAgICBpbnZlcnRBZGRpdGlvbmFsRmVhdHVyZTogItCG0L3QstC10YDRgtGD0LLQsNGC0Lgg0LrQvtC80LHRltC90LDRhtGW0Zcg0LrQu9Cw0LLRltGILCDQstC40LrQvtGA0LjRgdGC0L7QstGD0LLQsNGC0Lgg0LTQvtC00LDRgtC60L7QstGWINGE0YPQvdC60YbRltGXINC30LAg0LfQsNC80L7QstGH0YPQstCw0L3QvdGP0LwiLAogICAgICAgIGNvcHk6ICLQmtC+0L/RltGO0LLQsNGC0Lgg0L/QvtGB0LjQu9Cw0L3QvdGPIiwKICAgICAgICBjb3B5SW1nOiAi0JrQvtC/0ZbRjtCy0LDRgtC4INC00LDQvdGWINC30L7QsdGA0LDQttC10L3QvdGPIiwKICAgICAgICBvcGVuSW5OZXdUYWI6ICLQktGW0LTQutGA0LjRgtC4INCyINC90L7QstGW0Lkg0LLQutC70LDQtNGG0ZYiLAogICAgICAgIGNsb3NlQnRuOiAi0JfQsNC60YDQuNGC0LgiLAogICAgICAgIGludmVydEJ0bjogItCS0ZbQtNC90L7QstC40YLQuCIsCiAgICAgICAgY29tcGFyZUJ0bjogItCf0L7RgNGW0LLQvdGP0YLQuCIsCiAgICAgICAgc2VsZWN0QWxsQnRuOiAi0JLQuNCx0YDQsNGC0Lgg0LLRgdC1IiwKICAgICAgICBjbG9zZUJ0blRpcHM6ICLQodC60LDRgdC+0LLRg9GUINGG0ZYg0L3QsNC70LDRiNGC0YPQstCw0L3QvdGPINGC0LAg0LLRltC00L3QvtCy0LvRjtGUINGD0YHRliDQv9Cw0YDQsNC80LXRgtGA0LgiLAogICAgICAgIHJlc2V0TGluazogItCh0LrQuNC90YPRgtC4INC90LDQu9Cw0YjRgtGD0LLQsNC90L3RjyIsCiAgICAgICAgcmVzZXRMaW5rVGlwczogItCS0ZbQtNC90L7QstC70Y7RlCDQstC80ZbRgdGCINGD0YHRltGFINC/0LDRgNCw0LzQtdGC0YDRltCyINC00L4g0LfQvdCw0YfQtdC90Ywg0LfQsCDQt9Cw0LzQvtCy0YfRg9Cy0LDQvdC90Y/QvCIsCiAgICAgICAgc2hhcmU6ICLQn9C+0LTRltC70LjRgtC40YHRjCIsCiAgICAgICAgc3VpdExvbmdJbWc6ICLQktGW0LTQvtCx0YDQsNC30LjRgtC4INC/0L7QstC30YPQvdC+0Log0LTQu9GPINC30LDQvdCw0LTRgtC+INC00L7QstCz0LjRhSDQt9C+0LHRgNCw0LbQtdC90YwiLAogICAgICAgIGdsb2JhbGtleXM6ICLQmtC+0LzQsdGW0L3QsNGG0ZbRjyDQutC70LDQstGW0Ygg0L/QvtC/0LXRgNC10LTQvdGM0L7Qs9C+INC/0LXRgNC10LPQu9GP0LTRgzoiLAogICAgICAgIGdsb2JhbGtleXNQcmVzczogItCd0LDRgdGC0LjQvdGW0YLRjCwg0YnQvtCxINCy0ZbQtNC60YDQuNGC0Lgg0L/QvtC/0LXRgNC10LTQvdGW0Lkg0L/QtdGA0LXQs9C70Y/QtCIsCiAgICAgICAgZ2xvYmFsa2V5c0hvbGQ6ICLQndCw0YHRgtC40YHQvdGW0YLRjCDRliDRg9GC0YDQuNC80YPQudGC0LUsINGJ0L7QsSDQstGW0LTQutGA0LjRgtC4INC/0L7Qv9C10YDQtdC00L3RltC5INC/0LXRgNC10LPQu9GP0LQiLAogICAgICAgIGdsb2JhbGtleXNUeXBlOiAi0JzQtdGC0L7QtCDQt9Cw0L/Rg9GB0LrRgyDQv9C+0L/QtdGA0LXQtNC90YzQvtCz0L4g0L/QtdGA0LXQs9C70Y/QtNGDOiIsCiAgICAgICAgY2xvc2VBZnRlclByZXZpZXc6ICLQl9Cw0LrRgNC40LLQsNGC0Lgg0LLRltC60L3QviDQt9C+0LHRgNCw0LbQtdC90L3Rjywg0LrQvtC70Lgg0L/QvtC/0LXRgNC10LTQvdGW0Lkg0L/QtdGA0LXQs9C70Y/QtCDQt9Cw0LLQtdGA0YjQtdC90L4iLAogICAgICAgIHByZXZpZXdNYXhTaXplOiAi0JzQsNC60YHQuNC80LDQu9GM0L3QuNC5INGA0L7Qt9C80ZbRgCDQstGW0LrQvdCwINC/0L7Qv9C10YDQtdC00L3RjNC+0LPQviDQv9C10YDQtdCz0LvRj9C00YMiLAogICAgICAgIHByZXZpZXdNYXhTaXplVGlwOiAi0K/QutGJ0L4g0LLRltC60L3QviDQv9C+0L/QtdGA0LXQtNC90YzQvtCz0L4g0L/QtdGA0LXQs9C70Y/QtNGDINCx0ZbQu9GM0YjQtSDQstGB0YLQsNC90L7QstC70LXQvdC+0LPQviDRgNC+0LfQvNGW0YDRgywg0LzQsNGB0YjRgtCw0LHRg9C50YLQtSDQstGW0LrQvdC+INC/0L7Qv9C10YDQtdC00L3RjNC+0LPQviDQv9C10YDQtdCz0LvRj9C00YMuIDAg0LLQuNC80LrQvdC10L3QviIsCiAgICAgICAgbG9hZEFsbDogItCX0LDQstCw0L3RgtCw0LbQuNGC0Lgg0LHRltC70YzRiNC1INGB0YLQvtGA0ZbQvdC+0LoiLAogICAgICAgIGxvYWRlZEFsbDogItCX0LDQstCw0L3RgtCw0LbQtdC90L3RjyDQt9Cw0LLQtdGA0YjQtdC90L4iLAogICAgICAgIGxvYWRpbmc6ICLQl9Cw0LLQsNC90YLQsNC20LXQvdC90Y8iLAogICAgICAgIGxvYWRBbGxUaXA6ICLQl9Cw0LLQsNC90YLQsNC20LjRgtC4INC30L7QsdGA0LDQttC10L3RjyDQtyDQvdCw0YHRgtGD0L/QvdC+0Zcg0YHRgtC+0YDRltC90LrQuCIsCiAgICAgICAgdmlld21vcmVFbmRsZXNzOiAi0J/RgNC+0LrRgNGD0YLRltGC0Ywg0YHRgtC+0YDRltC90LrRgyDQtNC+INC60ZbQvdGG0Y8sINGJ0L7QsSDQsNCy0YLQvtC80LDRgtC40YfQvdC+INC30LDQstCw0L3RgtCw0LbQuNGC0Lgg0L3QsNGB0YLRg9C/0L3RgyIsCiAgICAgICAgZmlkZGxlOiAi0KHQv9C70LjQstCw0Y7Rh9C1INC30L7QsdGA0LDQttC10L3QvdGPIiwKICAgICAgICBmaWRkbGVUaXA6ICLQodC/0LvQuNCy0LDRjtGH0LUg0LfQvtCx0YDQsNC20LXQvdC90Y8g0LTQu9GPINGB0LrQu9Cw0LTQvdC40YUg0L7Qv9C10YDQsNGG0ZbQuSIsCiAgICAgICAgYWRkSW1hZ2VVcmxzOiAi0JTQvtC00LDRgtC4INC30L7QsdGA0LDQttC10L3QvdGPIiwKICAgICAgICBhZGRJbWFnZVVybHNUaXBzOiAi0JTQvtC00LDQstCw0LnRgtC1INCx0ZbQu9GM0YjQtSDQt9C+0LHRgNCw0LbQtdC90Ywg0Lcg0L/QvtGB0LjQu9Cw0L3QvdGPIiwKICAgICAgICBvcGVuSW1hZ2VzOiAi0JvQvtC60LDQu9GM0L3QtSDQt9C+0LHRgNCw0LbQtdC90L3RjyIsCiAgICAgICAgb3BlbkltYWdlc1RpcHM6ICLQndCw0YLQuNGB0L3RltGC0YwsINGJ0L7QsSDRltC80L/QvtGA0YLRg9Cy0LDRgtC4INC70L7QutCw0LvRjNC90ZYg0LfQvtCx0YDQsNC20LXQvdC90Y8iLAogICAgICAgIGNsb3NlRmlyc3Q6ICLQodC/0LXRgNGI0YMg0LfQsNC60YDQuNC50YLQtSDRg9GB0ZYg0L/QvtGC0L7Rh9C90ZYg0LPQsNC70LXRgNC10ZcuIiwKICAgICAgICBjb2xsZWN0OiAi0JTQvtC00LDRgtC4INGDINC60L7Qu9C10LrRhtGW0Y4iLAogICAgICAgIGNvbGxlY3RlZDogItCjINC60L7Qu9C10LrRhtGW0ZciLAogICAgICAgIGV4aXRDb2xsZWN0aW9uOiAi0JfQsNC60YDQuNGC0Lgg0LrQvtC70LXQutGG0ZbRjiIsCiAgICAgICAgZXhpdENvbGxlY3Rpb25UaXA6ICLQndCw0YLQuNGB0L3RltGC0YwsINGJ0L7QsSDQstGW0LTQvNGW0L3QuNGC0Lgg0YDQtdC20LjQvCDQutC+0LvQtdC60YbRltC+0L3Rg9Cy0LDQvdC90Y8iLAogICAgICAgIG5vQ29sbGVjdGlvbllldDogItCjINCy0LDRiNGW0Lkg0LrQvtC70LXQutGG0ZbRlyDQvdC10LzQsNGUINC20L7QtNC90L7Qs9C+INC30L7QsdGA0LDQttC10L3QvdGPIiwKICAgICAgICBjb2xsZWN0RGV0YWlsOiAi0J7Qv9C40YEiLAogICAgICAgIGNvbGxlY3REZXRhaWxUaXA6ICLQlNC+0LTQsNC50YLQtSDQvtC/0LjRgSDQtNC+INC30L7QsdGA0LDQttC10L3RjCDRgyDQutC+0LvQtdC60YbRltGXIiwKICAgICAgICBwbGF5U2xpZGU6ICLQl9Cw0L/Rg9GB0YLQuNGC0Lgg0YHQu9Cw0LnQtC3RiNC+0YMiLAogICAgICAgIHNsaWRlR2FwOiAi0IbQvdGC0LXRgNCy0LDQuyjRltCyKSIsCiAgICAgICAgc2xpZGVHYXBUaXA6ICLQp9Cw0YEg0ZbQvdGC0LXRgNCy0LDQu9GDLCDRgyDRgdC10LrRg9C90LTQsNGFIiwKICAgICAgICBzbGlkZUJhY2s6ICLQlyDQutGW0L3RhtGPIiwKICAgICAgICBzbGlkZUJhY2tUaXA6ICLQktGW0LTRgtCy0L7RgNC10L3QvdGPINCy0ZbQtCDQutGW0L3RhtGPINC00L4g0L/QvtGH0LDRgtC60YMiLAogICAgICAgIHNsaWRlUmFuZG9tOiAiUmFuZG9tIiwKICAgICAgICBzbGlkZVdhaXQ6ICLQntGH0ZbQutGD0LLQsNC90L3RjyDQt9GH0LjRgtGD0LLQsNC90L3RjyDQt9C+0LHRgNCw0LbQtdC90L3RjyIsCiAgICAgICAgc2xpZGVXYWl0VGlwOiAi0JfQstC+0YDQvtGC0L3RltC5INCy0ZbQtNC70ZbQuiDQv9C+0YfQvdC10YLRjNGB0Y8g0YLRltC70YzQutC4INC60L7Qu9C4INGD0YHRliDQt9C+0LHRgNCw0LbQtdC90L3RjyDQsdGD0LTRg9GC0Ywg0L/QvtCy0L3RltGB0YLRjiDQt9GH0LjRgtCw0L3RliIsCiAgICAgICAgc2xpZGVTa2lwRXJyb3I6ICLQn9GA0L7Qv9GD0YHQutCw0YLQuCDQt9C+0LHRgNCw0LbQtdC90L3RjyDQtyDQv9C+0LzQuNC70LrQsNC80LgiLAogICAgICAgIHNsaWRlU2tpcEVycm9yVGlwOiAi0KjQstC40LTQutC+INC/0YDQvtC/0YPRgdC60LDRgtC4INC30L7QsdGA0LDQttC10L3QvdGPLCDRj9C60ZYg0LfRh9C40YLRg9GO0YLRjNGB0Y8g0Lcg0L/QvtC80LjQu9C60L7RjiIsCiAgICAgICAgdHlwZTogItCi0LjQvyIsCiAgICAgICAgdHlwZVRpcDogItCe0LHQtdGA0ZbRgtGMINGC0LjQvyDQt9C+0LHRgNCw0LbQtdC90YwiLAogICAgICAgIHNob3dXaXRoUnVsZXM6ICLQn9GA0LjQvNGD0YHQvtCy0L4g0LLRltC00L7QsdGA0LDQt9C40YLQuCDQv9Cw0L3QtdC70Ywg0ZbQvdGB0YLRgNGD0LzQtdC90YLRltCyIiwKICAgICAgICBzaG93V2l0aFJ1bGVzVGlwOiAi0J/QvtC60LDQt9GD0LLQsNGC0Lgg0ZbQutC+0L3QutGDLCDRj9C60YnQviDQt9C+0LHRgNCw0LbQtdC90L3RjyDQstGW0LTQv9C+0LLRltC00LDRlCDQv9GA0LDQstC40LvQsNC8LCDQvdC10LfQsNC70LXQttC90L4g0LLRltC0INC50L7Qs9C+INGA0L7Qt9C80ZbRgNGDIiwKICAgICAgICBhZHZhbmNlZFJ1bGVzOiAi0KDQvtC30YjQuNGA0LXQvdGWINC/0YDQsNCy0LjQu9CwIiwKICAgICAgICBhZHZhbmNlZFJ1bGVzVGlwOiAi0JLRltC00L/QvtCy0ZbQtNCw0ZQg0YDQvtC30YjQuNGA0LXQvdC40Lwg0L/RgNCw0LLQuNC70LDQvCIsCiAgICAgICAgdHBSdWxlczogItCf0YDQsNCy0LjQu9CwINC/0ZbQtNGB0YLQsNCy0L3QuNGFINC30L3QsNC60ZbQsiIsCiAgICAgICAgdHBSdWxlc1RpcDogItCS0ZbQtNC/0L7QstGW0LTQsNGUINC/0YDQsNCy0LjQu9GDINC/0ZbQtNGB0YLQsNCy0L3QuNGFINC30L3QsNC60ZbQsiIsCiAgICAgICAgc2NhbGVSdWxlczogItCc0LDRgdGI0YLQsNCx0L7QstCw0L3RliIsCiAgICAgICAgc2NhbGVSdWxlc1RpcDogIkpTINCw0LLRgtC+0LzQsNGC0LjRh9C90L4g0LLQuNGP0LLQu9GP0ZQsINGJ0L4g0LfQvtCx0YDQsNC20LXQvdC90Y8g0L3QsCDRgdGC0L7RgNGW0L3RhtGWLCDQsdGD0LvQuCDQvNCw0YHRiNGC0LDQsdC+0LLQsNC90ZYiLAogICAgICAgIG5vU2NhbGVSdWxlczogItCR0LXQtyDQvNCw0YHRiNGC0LDQsdGD0LLQsNC90L3RjyIsCiAgICAgICAgbm9TY2FsZVJ1bGVzVGlwOiAiSlMg0LDQstGC0L7QvNCw0YLQuNGH0L3QviDQstC40Y/QstC70Y/RlCwg0YnQviDQt9C+0LHRgNCw0LbQtdC90L3RjyDQvdCwINGB0YLQvtGA0ZbQvdGG0ZYsINC90LUg0LHRg9C70Lgg0LzQsNGB0YjRgtCw0LHQvtCy0LDQvdGWIiwKICAgICAgICBzbWFsbFJ1bGVzOiAi0J3QtdCy0LXQu9C40LrQuNC5INGA0L7Qt9C80ZbRgCIsCiAgICAgICAgc21hbGxSdWxlc1RpcDogItCX0L7QsdGA0LDQttC10L3QvdGPINC80LDQu9C+0LPQviDRgNC+0LfQvNGW0YDRgywg0YTQsNC60YLQuNGH0L3QuNC5INGA0L7Qt9C80ZbRgCDQstC40YHQvtGC0Lgg0YLQsCDRiNC40YDQuNC90Lgg0LzQtdC90YjQtSAjdCMg0L/RltC60YHQtdC70ZbQsiIsCiAgICAgICAgbG9ja1NpemVUaXA6ICLQl9Cw0YTRltC60YHRg9Cy0LDRgtC4INC80LDQutGB0LjQvNCw0LvRjNC90LjQuSDRgNC+0LfQvNGW0YAiLAogICAgICAgIGNvbW1hbmQ6ICLQmtC+0LzQsNC90LTQuCIsCiAgICAgICAgY29tbWFuZFRpcDogItCc0LXQvdGOINC60L7QvNCw0L3QtCIsCiAgICAgICAgb25saW5lRWRpdDogItCe0L3Qu9Cw0LnQvS3RgNC10LTQsNCz0YPQstCw0L3QvdGPIiwKICAgICAgICBvbmxpbmVFZGl0VGlwOiAi0JLRltC00YDQtdC00LDQs9GD0LnRgtC1INGG0LUg0LfQvtCx0YDQsNC20LXQvdC90Y8g0L7QvdC70LDQudC9INC30LAg0LTQvtC/0L7QvNC+0LPQvtGOICN0IyIsCiAgICAgICAgb3BlbkluTmV3V2luZG93OiAi0JLRltC00LrRgNC40YLQuCDRgyDQvdC+0LLQvtC80YMg0LLRltC60L3RliIsCiAgICAgICAgb3BlbkluTmV3V2luZG93VGlwOiAi0JLRltC00LrRgNC40LLQsNGUINC30L7QsdGA0LDQttC10L3QvdGPINGDINC90L7QstC+0LzRgyDQstGW0LrQvdGWIiwKICAgICAgICBmaW5kSW5QYWdlOiAi0JfQvdCw0LnRgtC4INC90LAg0YHRgtC+0YDRltC90YbRliIsCiAgICAgICAgZmluZEluUGFnZVRpcDogItCf0YDQvtC60YDRg9GH0YPRlCDQtNC+INC/0L7RgtC+0YfQvdC+0LPQviDQt9C+0LHRgNCw0LbQtdC90L3RjyIsCiAgICAgICAgdmlld0NvbGxlY3Rpb246ICLQktGW0LTQutGA0LjRgtC4INC60L7Qu9C10LrRhtGW0Y4iLAogICAgICAgIHZpZXdDb2xsZWN0aW9uVGlwOiAi0J/QtdGA0LXQs9C70Y/QvdGD0YLQuCDRg9GB0ZYg0LfQvtCx0YDQsNC20LXQvdC90Y8g0LrQvtC70LXQutGG0ZbRlyIsCiAgICAgICAgaW5Db2xsZWN0aW9uOiAi0J3QtdC00L7RgdGC0YPQv9C90L4g0LIg0YDQtdC20LjQvNGWINC60L7Qu9C10LrRhtGW0L7QvdGD0LLQsNC90L3RjyIsCiAgICAgICAgY2FudEZpbmQ6ICLQl9C+0LHRgNCw0LbQtdC90L3RjyDQstGW0LTRgdGD0YLQvdGUINGDINC00L7QutGD0LzQtdC90YLRliDQsNCx0L4g0YHRhdC+0LLQsNC90L4g0YLQsCDQvdC1INC80L7QttC1INCx0YPRgtC4INC30L3QsNC50LTQtdC90L4hIiwKICAgICAgICBleHBvcnRJbWFnZXM6ICLQldC60YHQv9C+0YDRgtGD0LLQsNGC0Lgg0L/QvtC60LDQt9Cw0L3RliDQt9Cx0ZbQu9GM0YjQtdC90ZYg0LfQvtCx0YDQsNC20LXQvdC90Y8iLAogICAgICAgIGV4cG9ydEltYWdlc1RpcDogItCV0LrRgdC/0L7RgNGC0YPQudGC0LUg0YPRgdGWINCy0ZbQtNC+0LHRgNCw0LbRg9Cy0LDQvdGWINC30L7QsdGA0LDQttC10L3QvdGPINCyINC90L7QstC1INCy0ZbQutC90L4iLAogICAgICAgIGRvd25sb2FkSW1hZ2U6ICLQl9Cw0LLQsNC90YLQsNC20LjRgtC4INGD0YHRliDQv9C+0LrQsNC30LDQvdGWIiwKICAgICAgICBkb3dubG9hZEltYWdlVGlwOiAi0JfQsNCy0LDQvdGC0LDQttC40YLQuCDRg9GB0ZYg0LLRltC00L7QsdGA0LDQttGD0LLQsNC90ZYg0LfQvtCx0YDQsNC20LXQvdC90Y8g0LIg0L/QvtGC0L7Rh9C90ZbQuSDQs9Cw0LvQtdGA0LXRlyIsCiAgICAgICAgY29weUltYWdlc1VybDogItCa0L7Qv9GW0Y7QstCw0YLQuCDQt9Cx0ZbQu9GM0YjQtdC90ZYg0LfQvtCx0YDQsNC20LXQvdC90Y8iLAogICAgICAgIGNvcHlJbWFnZXNVcmxUaXA6ICLQodC60L7Qv9GW0Y7QudGC0LUg0L/QvtGB0LjQu9Cw0L3QvdGPINGD0YHRltGFINC/0L7QutCw0LfQsNC90LjRhSDQt9C+0LHRgNCw0LbQtdC90Ywg0LLQtdC70LjQutC+0LPQviDRgNC+0LfQvNGW0YDRgyIsCiAgICAgICAgY29weVN1Y2Nlc3M6ICLQn9C+0YHQuNC70LDQvdC90Y8g0LfQsdGW0LvRjNGI0LXQvdC+0LPQviDQt9C+0LHRgNCw0LbQtdC90L3RjyAjdCMg0YPRgdC/0ZbRiNC90L4g0YHQutC+0L/RltC50L7QstCw0L3QsCIsCiAgICAgICAgYXV0b1JlZnJlc2g6ICLQkNCy0YLQvtC+0L3QvtCy0LvQtdC90L3RjyIsCiAgICAgICAgYXV0b1JlZnJlc2hUaXA6ICLQmtC+0LvQuCDQtNGW0LnQtNC10YLQtSDQtNC+INC+0YHRgtCw0L3QvdGW0YUg0LfQvtCx0YDQsNC20LXQvdGMLCDQv9GA0L7QutGA0YPRgtGW0YLRjCDQs9C+0LvQvtCy0L3QtSDQstGW0LrQvdC+INCy0L3QuNC3INC00LvRjyDQsNCy0YLQvtC80LDRgtC40YfQvdC+0LPQviDQt9Cw0LLQsNC90YLQsNC20LXQvdC90Y8g0L3QvtCy0LjRhSDQt9C+0LHRgNCw0LbQtdC90YwuIiwKICAgICAgICBlbnRlckZ1bGxzYzogItCf0L7QstC90L7QtdC60YDQsNC90L3QuNC5INGA0LXQttC40LwiLAogICAgICAgIGV4aXRGdWxsc2M6ICLQktC40LnRgtC4INC3INC/0L7QstC90L7QtdC60YDQsNC90L3QvtCz0L4g0YDQtdC20LjQvNGDIiwKICAgICAgICBjb25maWc6ICLQndCw0LvQsNGI0YLRg9Cy0LDQvdC90Y8iLAogICAgICAgIG9wZW5Db25maWc6ICLQktGW0LTQutGA0LjRgtC4INC90LDQu9Cw0YjRgtGD0LLQsNC90L3RjyIsCiAgICAgICAgcnVsZVJlcXVlc3Q6ICLQn9GA0LDQstC40LvQviDQl9Cw0L/QuNGCIiwKICAgICAgICBjbG9zZUdhbGxlcnk6ICLQl9Cw0LrRgNC40YLQuCDQs9Cw0LvQtdGA0LXRjiIsCiAgICAgICAgcmV0dXJuVG9HYWxsZXJ5OiAi0J/QvtCy0LXRgNC90YPRgtC40YHRjCDRgyDQs9Cw0LvQtdGA0LXRjiIsCiAgICAgICAgcGljSW5mbzogItCd0LDRgtC40YHQvdGW0YLRjCwg0YnQvtCxINC30LzRltC90LjRgtC4IiwKICAgICAgICBwaWNOb3RlOiAi0J3QvtGC0LDRgtC60LAg0LTQviDQt9C+0LHRgNCw0LbQtdC90L3RjyIsCiAgICAgICAgdXJsRmlsdGVyOiAi0KTRltC70YzRgtGA0YPQstCw0YLQuCDQv9C+0YHQuNC70LDQvdC90Y8iLAogICAgICAgIHVybEZpbHRlclRpcDogItCS0LLQtdC00ZbRgtGMINC60LvRjtGH0L7QstGWINGB0LvQvtCy0LAg0LDQsdC+INGA0LXQs9GD0LvRj9GA0L3RliDQstC40YDQsNC30Lgg0LTQu9GPINGE0ZbQu9GM0YLRgNCw0YbRltGXINC/0L7RgdC40LvQsNC90YwiLAogICAgICAgIHJlc29sdXRpb246ICLQoNC+0LfQtNGW0LvRjNC90LAg0LfQtNCw0YLQvdGW0YHRgtGMIiwKICAgICAgICBzY2FsZVJhdGlvOiAi0JrQvtC10YTRltGG0ZbRlNC90YIg0LzQsNGB0YjRgtCw0LHRg9Cy0LDQvdC90Y8iLAogICAgICAgIHNpbWlsYXJJbWFnZTogItCf0L7RiNGD0Log0L/QviDQt9C+0LHRgNCw0LbQtdC90L3RjiIsCiAgICAgICAgc2NhbGU6ICLQnNCw0YHRiNGC0LDQsSIsCiAgICAgICAgaG9yaXpvbnRhbEZsaXA6ICLQktGW0LTQtNC30LXRgNC60LDQu9C40YLQuCDQv9C+INCz0L7RgNC40LfQvtC90YLQsNC70ZYiLAogICAgICAgIHZlcnRpY2FsRmxpcDogItCS0ZbQtNC00LfQtdGA0LrQsNC70LjRgtC4INC/0L4g0LLQtdGA0YLQuNC60LDQu9GWIiwKICAgICAgICBhY3R1YWxCdG46ICLQktGW0LTQutGA0LjRgtC4INC+0YDQuNCz0ZbQvdCw0LsgKNCQKSIsCiAgICAgICAgc2VhcmNoQnRuOiAi0JfQvdCw0LnRgtC4INC+0YDQuNCz0ZbQvdCw0LvRjNC90LUg0LfQvtCx0YDQsNC20LXQvdC90Y8gKFMpIiwKICAgICAgICBnYWxsZXJ5QnRuOiAi0JLRltC00LrRgNC40YLQuCDQs9Cw0LvQtdGA0LXRjiAoRykiLAogICAgICAgIGN1cnJlbnRCdG46ICLQktGW0LTQutGA0LjRgtC4INC/0L7RgtC+0YfQvdC1IChDKSIsCiAgICAgICAgbWFnbmlmaWVyQnRuOiAi0JLRltC00LrRgNC40YLQuCDQu9GD0L/RgyAoTSkiLAogICAgICAgIHBpY1RpdGxlOiAi0J/RltC00L/QuNGBINC30L7QsdGA0LDQttC10L3QvdGPIiwKICAgICAgICBwaWNOdW06ICLQmtGW0LvRjNC60ZbRgdGC0Ywg0LfQvtCx0YDQsNC20LXQvdGMIiwKICAgICAgICBwaWNUaXBzOiAi0KPRgtGA0LjQvNGD0LnRgtC1IEN0cmwsINGJ0L7QsSDQt9Cx0ZbQu9GM0YjQuNGC0Lgg0LzQsNGB0YjRgtCw0LEiLAogICAgICAgIHNhdmVQYWdlVGlwczogItCS0LjQutC+0YDQuNGB0YLQvtCy0YPQudGC0LUgwqvQl9Cx0LXRgNC10LPRgtC4INGB0YLQvtGA0ZbQvdC60YMg0Y/QusK7LCDRidC+0LEg0LfQsdC10YDQtdCz0YLQuCDRg9GB0ZYg0LfQvtCx0YDQsNC20LXQvdC90Y8iLAogICAgICAgIGV4cG9ydEltYWdlc1VybDogItCV0LrRgdC/0L7RgNGCINC/0L7RgdC40LvQsNC90L3RjyDQt9C+0LHRgNCw0LbQtdC90L3RjyIsCiAgICAgICAgZXhwb3J0SW1hZ2VzVXJsUG9wOiAi0J3QsNGC0LjRgdC90ZbRgtGMIEN0cmwrQywg0YnQvtCxINGB0LrQvtC/0ZbRjtCy0LDRgtC4INC/0L7RgdC40LvQsNC90L3RjyDQvdCwINC30L7QsdGA0LDQttC10L3QvdGPIiwKICAgICAgICBiZWdpblNlYXJjaEltZzogItCg0L7Qt9C/0ZbQt9C90LDQstCw0L3QvdGPINC30L7QsdGA0LDQttC10L3QvdGPICN0Iy4uLiIsCiAgICAgICAgZmluZE5vUGljOiAi0J7RgNC40LPRltC90LDQu9GM0L3QtSDQt9C+0LHRgNCw0LbQtdC90L3RjyDQvdC1INC30L3QsNC50LTQtdC90L4iLAogICAgICAgIGZpbmRPdmVyQmVnaW5Mb2FkOiAi0JfQsNCy0LXRgNGI0LXQvdC+INGA0L7Qt9C/0ZbQt9C90LDQstCw0L3QvdGPICN0Iywg0YPRgdGM0L7Qs9C+INC30L3QsNC50LTQtdC90L4gI3QjINCy0ZbQtNC/0L7QstGW0LTQvdC40YUg0LfQvtCx0YDQsNC20LXQvdGMLCDQv9C+0YfQuNC90LDRjiDQt9Cw0LLQsNC90YLQsNC20YPQstCw0YLQuCDQv9C10YDRiNC40LkuLi4iLAogICAgICAgIGxvYWROZXh0U2ltaWxhcjogItCd0LUg0LLQtNCw0LvQvtGB0Ywg0LfQsNCy0LDQvdGC0LDQttC40YLQuCDQvtGA0LjQs9GW0L3QsNC70YzQvdC1INC30L7QsdGA0LDQttC10L3QvdGPLCDRgdC/0YDQvtCx0YPQudGC0LUg0L3QsNGB0YLRg9C/0L3QuNC5INGA0LXQt9GD0LvRjNGC0LDRgi4uLiIsCiAgICAgICAgbG9hZEVycm9yOiAi0J/QvtC80LjQu9C60LAg0LfQsNCy0LDQvdGC0LDQttC10L3QvdGPIiwKICAgICAgICBvcGVuSG9tZVBhZ2U6ICLQndCw0YLQuNGB0L3RltGC0Ywg0YLRg9GCLCDRidC+0LEg0LLRltC00LrRgNC40YLQuCDQtNC+0LzQsNGI0L3RjiDRgdGC0L7RgNGW0L3QutGDIiwKICAgICAgICBwb3NpdGlvbjogItCg0L7Qt9GC0LDRiNGD0LLQsNC90L3RjyDQv9C70LDQstCw0Y7Rh9C+0Zcg0L/QsNC90LXQu9GWIiwKICAgICAgICBwb3NpdGlvblRpcHM6ICLQqdC+0LEg0L/RgNC40YXQvtCy0LDRgtC4LCDQvdCw0YLQuNGB0L3RltGC0Ywg0YPRgtGA0LjQvNGD0Y7Rh9C4IEFsdCIsCiAgICAgICAgdG9wTGVmdDogItCS0LXRgNGF0L3RltC5INC70ZbQstC40Lkg0LrRg9GCINC30L7QsdGA0LDQttC10L3QvdGPIiwKICAgICAgICB0b3BSaWdodDogItCS0LXRgNGF0L3RltC5INC/0YDQsNCy0LjQuSDQutGD0YIg0LfQvtCx0YDQsNC20LXQvdC90Y8iLAogICAgICAgIGJvdHRvbVJpZ2h0OiAi0J3QuNC20L3RltC5INC/0YDQsNCy0LjQuSDQutGD0YIg0LfQvtCx0YDQsNC20LXQvdC90Y8iLAogICAgICAgIGJvdHRvbUxlZnQ6ICLQndC40LbQvdGW0Lkg0LvRltCy0LjQuSDQutGD0YIg0LfQvtCx0YDQsNC20LXQvdC90Y8iLAogICAgICAgIHRvcENlbnRlcjogItCd0LDQtCDQt9C+0LHRgNCw0LbQtdC90L3Rj9C8IiwKICAgICAgICBib3R0b21DZW50ZXI6ICLQn9GW0LQg0LfQvtCx0YDQsNC20LXQvdC90Y/QvCIsCiAgICAgICAgZmxvYXRCYXI6ICLQn9C70LDQstGD0YfQsCDQv9Cw0L3QtdC70YwiLAogICAgICAgIHByZXZpZXdGb2xsb3dNb3VzZTogItCf0L7QutCw0LfQsNGC0Lgg0L/QvtC/0LXRgNC10LTQvdGW0Lkg0L/QtdGA0LXQs9C70Y/QtCDQv9C+0YDRg9GHINC3INC80LjRiNC60L7RjiIsCiAgICAgICAgc2hvd0RlbGF5OiAi0JfQsNGC0YDQuNC80LrQsCDQv9C10YDQtdC0INCy0ZbQtNC+0LHRgNCw0LbQtdC90L3Rj9C8IiwKICAgICAgICBtczogItC80YEuIiwKICAgICAgICBoaWRlOiAi0J/RgNC40YXQvtCy0LDRgtC4IiwKICAgICAgICBoaWRlRGVsYXk6ICLQl9Cw0YLRgNC40LzQutCwINC00L4g0L/RgNC40YXQvtCy0YPQstCw0L3QvdGPIiwKICAgICAgICBmb3JjZVNob3c6ICLQktGW0LTQvtCx0YDQsNC20LDRgtC4INC/0LDQvdC10LvRjCDRltC90YHRgtGA0YPQvNC10L3RgtGW0LIg0L3QsCDQvdC10LfQsdGW0LvRjNGI0LXQvdC40YUg0LfQvtCx0YDQsNC20LXQvdC90Y/RhSIsCiAgICAgICAgZm9yY2VTaG93VGlwOiAi0J/QvtC60LDQt9GD0LLQsNGC0Lgg0L/Qu9Cw0LLQsNGO0YfRgyDQv9Cw0L3QtdC70Ywg0ZbQvdGB0YLRgNGD0LzQtdC90YLRltCyLCDQutC+0LvQuCDRgNC+0LfQvNGW0YAg0L3QtdC80LDRgdGI0YLQsNCx0L7QstCw0L3QvtCz0L4g0LfQvtCx0YDQsNC20LXQvdC90Y8g0L/QtdGA0LXQstC40YnRg9GUINCy0YHRgtCw0L3QvtCy0LvQtdC90LjQuSDQvdC40LbRh9C1INGA0L7Qt9C80ZbRgCIsCiAgICAgICAgc2l6ZUxpbWl0T3I6ICLQktC/0LvQuNCy0LDRlCDQu9C40YjQtSDQvdCwINCy0LjRgdC+0YLRgyDQsNCx0L4g0YjQuNGA0LjQvdGDIiwKICAgICAgICBweDogItC/0ZbQutGBLiIsCiAgICAgICAgbWluU2l6ZUxpbWl0OiAi0JzQsNGB0YjRgtCw0LHRg9Cy0LDRgtC4INC30L7QsdGA0LDQttC10L3QvdGPINC/0L7QvdCw0LQg0YbQtdC5INGA0L7Qt9C80ZbRgCDQtNC70Y8g0LLRltC00L7QsdGA0LDQttC10L3QvdGPINC/0LvQsNCy0LDRjtGH0L7RlyDQv9Cw0L3QtdC70ZYiLAogICAgICAgIG1pblNpemVMaW1pdFRpcDogItCf0YDQuCDQvNCw0YHRiNGC0LDQsdGD0LLQsNC90L3RliDQt9C+0LHRgNCw0LbQtdC90L3RjyAo0L7RgNC40LPRltC90LDQu9GM0L3QuNC5INGA0L7Qt9C80ZbRgCDRj9C60L7Qs9C+INC90LUg0YHQv9GW0LIt0L/QsNC00LDRlCDQtyDRhNCw0LrRgtC40YfQvdC40LwpLCDQutC+0LvQuCDQtNC+0LLQttC40L3QsCDQuSDRiNC40YDQuNC90LAg0LHRltC70YzRiNC1INCy0YHRgtCw0L3QvtCy0LvQtdC90L7Qs9C+INC30L3QsNGH0LXQvdC90Y8sINCy0ZbQtNC+0LHRgNCw0LbQsNGC0Lgg0L/Qu9Cw0LLQsNGO0YfRgyDQv9Cw0L3QtdC70YwuIiwKICAgICAgICBkZWZhdWx0U2l6ZUxpbWl0OiAi0KTRltC70YzRgtGAINGA0L7Qt9C80ZbRgNGDINCz0LDQu9C10YDQtdGXINC30LAg0LfQsNC80L7QstGH0YPQstCw0L3QvdGP0LwiLAogICAgICAgIGxpc3RlbkJnOiAi0J/RgNC+0YHQu9GD0YXQvtCy0YPQstCw0YLQuCDRhNC+0L3QvtCy0ZYg0LfQvtCx0YDQsNC20LXQvdC90Y8iLAogICAgICAgIGJhY2tncm91bmRDb2xvcjogItCa0L7Qu9GW0YAg0YTQvtC90YMiLAogICAgICAgIGxpc3RlbkJnVGlwOiAi0JLRltC00L7QsdGA0LDQttCw0ZQg0L/Qu9Cw0LLQsNGO0YfRgyDQv9Cw0L3QtdC70Ywg0L3QsCDQtdC70LXQvNC10L3RgtGWINC3INGE0L7QvdC+0LLQuNC8INC30L7QsdGA0LDQttC10L3QvdGP0LwiLAogICAgICAgIGJ1dG9uT3JkZXI6ICLQodC+0YDRgtGD0LLQsNC90L3RjyDRltC60L7QvdC+0Log0L/Qu9Cw0LLQsNGO0YfQvtGXINC/0LDQvdC10LvRliIsCiAgICAgICAga2V5c0VuYWJsZTogItCS0LLRltC80LrQvdGD0YLQuCDQvdCw0YHRgtGD0L/QvdGWINC60L7QvNCx0ZbQvdCw0YbRltGXINC60LvQsNCy0ZbRiCIsCiAgICAgICAga2V5c0FjdHVhbDogItCS0ZbQtNC60YDQuNGC0Lgg0L7RgNC40LPRltC90LDQu9GM0L3QtSDQt9C+0LHRgNCw0LbQtdC90L3RjyIsCiAgICAgICAga2V5c0FjdHVhbFRpcDogItCa0L7Qu9C4INC3J9GP0LLQuNGC0YzRgdGPINC/0LvQsNCy0LDRjtGH0LAg0L/QsNC90LXQu9GMLCDQvdCw0YLQuNGB0L3RltGC0Ywg0YbRjiDQutC90L7Qv9C60YMsINGJ0L7QsSDQstGW0LTQutGA0LjRgtC4INC30LHRltC70YzRiNC10L3QtSDQt9C+0LHRgNCw0LbQtdC90L3RjyIsCiAgICAgICAga2V5c1NlYXJjaDogItCX0L3QsNC50YLQuCDQvtGA0LjQs9GW0L3QsNC70YzQvdC1INC30L7QsdGA0LDQttC10L3QvdGPIiwKICAgICAgICBrZXlzU2VhcmNoVGlwOiAi0JrQvtC70Lgg0Lcn0Y/QstC40YLRjNGB0Y8g0L/Qu9Cw0LLQsNGO0YfQsCDQv9Cw0L3QtdC70YwsINC90LDRgtC40YHQvdGW0YLRjCDRhtGOINC60L3QvtC/0LrRgywg0YnQvtCxINC30L3QsNC50YLQuCDQvtGA0LjQs9GW0L3QsNC70YzQvdC1INC30L7QsdGA0LDQttC10L3QvdGPIiwKICAgICAgICBoZWFkU2VhcmNoVGlwOiAi0J/QvtGI0YPQuiDQv9C+INC30L7QsdGA0LDQttC10L3QvdGOIiwKICAgICAgICBoZWFkU2VhcmNoQWxsOiAi0J/QvtGI0YPQuiDQsiDRg9GB0ZbRhSDRgdC40YHRgtC10LzQsNGFIiwKICAgICAgICBrZXlzQ3VycmVudDogItCS0ZbQtNC60YDQuNGC0Lgg0L/QvtGC0L7Rh9C90LUg0LfQvtCx0YDQsNC20LXQvdC90Y8iLAogICAgICAgIGtleXNDdXJyZW50VGlwOiAi0JrQvtC70Lgg0Lcn0Y/QstC40YLRjNGB0Y8g0L/Qu9Cw0LLQsNGO0YfQsCDQv9Cw0L3QtdC70YwsINC90LDRgtC40YHQvdGW0YLRjCDRhtGOINC60L3QvtC/0LrRgywg0YnQvtCxINCy0ZbQtNC60YDQuNGC0Lgg0LfQvtCx0YDQsNC20LXQvdC90Y8sINGJ0L4g0LLRltC00L7QsdGA0LDQttCw0ZTRgtGM0YHRjyDQsiDQtNCw0L3QuNC5INC80L7QvNC10L3RgiIsCiAgICAgICAga2V5c01hZ25pZmllcjogItCS0ZbQtNC60YDQuNGC0Lgg0LvRg9C/0YMiLAogICAgICAgIGtleXNNYWduaWZpZXJUaXA6ICLQmtC+0LvQuCDQtyfRj9Cy0LjRgtGM0YHRjyDQv9C70LDQstCw0Y7Rh9CwINC/0LDQvdC10LvRjCwg0L3QsNGC0LjRgdC90ZbRgtGMINGG0Y4g0LrQvdC+0L/QutGDLCDRidC+0LEg0LLRltC00LrRgNC40YLQuCDQu9GD0L/RgyDRliDRgNC+0LfQs9C70Y/QvdGD0YLQuCDQt9C+0LHRgNCw0LbQtdC90L3RjyIsCiAgICAgICAga2V5c0dhbGxlcnk6ICLQktGW0LTQutGA0LjRgtC4INCz0LDQu9C10YDQtdGOICgrINGE0YPQvdC60YbRltC+0L3QsNC70YzQvdGWINC60LvQsNCy0ZbRiNGWINC00LvRjyDQs9C70L7QsdCw0LvRjNC90L7Qs9C+KSIsCiAgICAgICAga2V5c0dhbGxlcnlUaXA6ICLQmtC+0LvQuCDQtyfRj9Cy0LjRgtGM0YHRjyDQv9C70LDQstCw0Y7Rh9CwINC/0LDQvdC10LvRjCwg0L3QsNGC0LjRgdC90ZbRgtGMINGG0Y4g0LrQvdC+0L/QutGDLCDRidC+0LEg0LLRltC00LrRgNC40YLQuCDQs9Cw0LvQtdGA0LXRjiIsCiAgICAgICAgb3BlbkdhbGxlcnk6ICLQktGW0LTQutGA0LjRgtC4INCz0LDQu9C10YDQtdGOIiwKICAgICAgICBtYWduaWZpZXI6ICLQm9GD0L/QsCIsCiAgICAgICAgbWFnbmlmaWVyUmFkaXVzOiAi0KDQsNC00ZbRg9GBINC30LAg0LfQsNC80L7QstGH0YPQstCw0L3QvdGP0LwiLAogICAgICAgIG1hZ25pZmllcldoZWVsWm9vbUVuYWJsZWQ6ICLQktCy0ZbQvNC60L3Rg9GC0Lgg0LzQsNGB0YjRgtCw0LHRg9Cy0LDQvdC90Y8g0LrQvtC70ZbRidCw0YLQutC+0Lwg0LzQuNGI0ZYiLAogICAgICAgIG1hZ25pZmllcldoZWVsWm9vbVJhbmdlOiAi0JzQvdC+0LbQvdC40Log0LzQsNGB0YjRgtCw0LHRg9Cy0LDQvdC90Y8g0LrQvtC70ZbRidCw0YLQutC+0Lwg0LzQuNGI0ZYiLAogICAgICAgIG1hZ25pZmllclNjYWxlSW1hZ2U6ICJab29tIGltYWdlIGJ5IHdoZWVsIiwKICAgICAgICBnYWxsZXJ5OiAi0JPQsNC70LXRgNC10Y8iLAogICAgICAgIGdhbGxlcnlGaXRUb1NjcmVlbjogItCc0LDRgdGI0YLQsNCx0YPQstCw0YLQuCDQt9C+0LHRgNCw0LbQtdC90L3RjyDQv9GW0LQg0YDQvtC30LzRltGAINC10LrRgNCw0L3RgyIsCiAgICAgICAgZ2FsbGVyeUZpdFRvU2NyZWVuU21hbGw6ICLQnNCw0LvQtdC90YzQutGWINC30L7QsdGA0LDQttC10L3QvdGPINGC0LDQutC+0LYg0LzQsNGB0YjRgtCw0LHRg9GO0YLRjNGB0Y8g0LLRltC00L/QvtCy0ZbQtNC90L4g0LTQviDRgNC+0LfQvNGW0YDRgyDQtdC60YDQsNC90LAiLAogICAgICAgIGdhbGxlcnlGaXRUb1NjcmVlblRpcDogItCc0LXRgtC+0LQg0LDQtNCw0L/RgtCw0YbRltGXIC0g0YPRgtGA0LjQvNGD0LLQsNGC0LgsINCwINC90LUg0L/QvtC60YDQuNCy0LDRgtC4IiwKICAgICAgICBnYWxsZXJ5U2Nyb2xsRW5kVG9DaGFuZ2U6ICLQn9C10YDQtdC80LrQvdGD0YLQuCDQt9C+0LHRgNCw0LbQtdC90L3RjyDQv9GW0YHQu9GPINC/0YDQvtC60YDRg9GC0LrQuCDQtNC+INC60ZbQvdGG0Y8g0LLQvdC40LciLAogICAgICAgIGdhbGxlcnlTY3JvbGxFbmRUb0NoYW5nZVRpcDogItCf0YDQsNGG0Y7RlCDRgtGW0LvRjNC60Lgg0L/RltGB0LvRjyDRgdC60LDRgdGD0LLQsNC90L3RjyDQv9C+0L/QtdGA0LXQtNC90YzQvtCz0L4g0L/QsNGA0LDQvNC10YLRgNCwIiwKICAgICAgICBnYWxsZXJ5RXhwb3J0VHlwZTogItCh0L7RgNGC0YPQstCw0L3QvdGPINC30LAg0LfQsNC80L7QstGH0YPQstCw0L3QvdGP0Lwg0L/RgNC4INC10LrRgdC/0L7RgNGC0ZYg0LfQvtCx0YDQsNC20LXQvdGMIiwKICAgICAgICBncmlkOiAi0KHRltGC0LrQsCIsCiAgICAgICAgZ3JpZEJpZzogItCe0YDQuNCz0ZbQvdCw0LvRjNC90LUg0LfQvtCx0YDQsNC20LXQvdC90Y8g0LIg0YHRltGC0YbRliIsCiAgICAgICAgbGlzdDogItCh0L/QuNGB0L7QuiIsCiAgICAgICAgZ2FsbGVyeUF1dG9Mb2FkOiAi0JDQstGC0L7Qt9Cw0LLQsNC90YLQsNC20YPQstCw0YLQuCDQsdGW0LvRjNGI0LUg0LfQvtCx0YDQsNC20LXQvdGMIiwKICAgICAgICBnYWxsZXJ5TG9hZEFsbDogItCQ0LLRgtC+0LzQsNGC0LjRh9C90L4g0L7Qv9GA0LDRhtGM0L7QstGD0LLQsNGC0Lgg0YPRgdGWINGB0YLQvtGA0ZbQvdC60Lgg0L/RgNC4INC30LDQstCw0L3RgtCw0LbQtdC90L3RliDQsdGW0LvRjNGI0L7RlyDQutGW0LvRjNC60L7RgdGC0ZYg0LfQvtCx0YDQsNC20LXQvdGMIiwKICAgICAgICBnYWxsZXJ5TG9hZEFsbFRpcDogItCv0LrRidC+INGB0YLQvtGA0ZbQvdC+0Log0LfQsNC90LDQtNGC0L4g0LHQsNCz0LDRgtC+LCDRhtC1INC80L7QttC1INCy0L/Qu9C40L3Rg9GC0Lgg0L3QsCDRiNCy0LjQtNC60ZbRgdGC0Ywg0YDQvtCx0L7RgtC4IiwKICAgICAgICBnYWxsZXJ5RG93bmxvYWRXaXRoWmlwOiAi0JfQsNCy0LDQvdGC0LDQttGD0LLQsNGC0Lgg0YPRgdC1INCyIHppcC3QsNGA0YXRltCy0ZYiLAogICAgICAgIGdhbGxlcnlEb3dubG9hZFdpdGhaaXBBbGVydDogItCf0ZbQtNCz0L7RgtC+0LLQutCwINC30LDQstCw0L3RgtCw0LbQtdC90L3Rjywg0LfQsNGH0LXQutCw0LnRgtC1INC00LXQutGW0LvRjNC60LAg0YHQtdC60YPQvdC0IiwKICAgICAgICBnYWxsZXJ5U2NhbGVTbWFsbFNpemUxOiAi0K/QutGJ0L4g0LLQuNGB0L7RgtCwINC5INGI0LjRgNC40L3QsCDRhNCw0LrRgtC40YfQvdC+0LPQviDRgNC+0LfQvNGW0YDRgyDQvNC10L3RiNCwIiwKICAgICAgICBnYWxsZXJ5U2NhbGVTbWFsbFNpemUyOiAiINC/0ZbQutGBLiwg0YLQviDQstC+0L3QviDQutC70LDRgdC40YTRltC60YPRlNGC0YzRgdGPINGP0Log0LfQvtCx0YDQsNC20LXQvdC90Y8g0LzQsNC70LXQvdGM0LrQvtCz0L4g0YDQvtC30LzRltGA0YMiLAogICAgICAgIGdhbGxlcnlTaG93U21hbGxTaXplOiAi0JfQsCDQt9Cw0LzQvtCy0YfRg9Cy0LDQvdC90Y/QvCDQstGW0LTQvtCx0YDQsNC20LDRgtC4INC30L7QsdGA0LDQttC10L3QvdGPINC80LDQu9C10L3RjNC60L7Qs9C+INGA0L7Qt9C80ZbRgNGDIiwKICAgICAgICBnYWxsZXJ5VHJhbnNpdGlvbjogItCf0L7QutCw0LfRg9Cy0LDRgtC4INC10YTQtdC60YLQuCDQv9GA0Lgg0L/QtdGA0LXQvNC40LrQsNC90L3RliDQs9Cw0LvQtdGA0LXRlyIsCiAgICAgICAgZ2FsbGVyeVNpZGViYXJQb3NpdGlvbjogItCg0L7Qt9GC0LDRiNGD0LLQsNC90L3RjyDQv9Cw0L3QtdC70ZYg0ZbQutC+0L3QvtC6IiwKICAgICAgICBib3R0b206ICLQl9C90LjQt9GDIiwKICAgICAgICByaWdodDogItCh0L/RgNCw0LLQsCIsCiAgICAgICAgbGVmdDogItCX0LvRltCy0LAiLAogICAgICAgIHRvcDogItCX0LLQtdGA0YXRgyIsCiAgICAgICAgZ2FsbGVyeVNpZGViYXJTaXplOiAi0JLQuNGB0L7RgtCwIiwKICAgICAgICBnYWxsZXJ5U2lkZWJhclNpemVUaXA6ICLQktC40YHQvtGC0LAgKNC/0YDQuCDQs9C+0YDQuNC30L7QvdGC0LDQu9GM0L3QvtC80YMg0L/QvtC70L7QttC10L3QvdGWKSDQsNCx0L4g0YjQuNGA0LjQvdCwICjQv9GA0Lgg0LLQtdGA0YLQuNC60LDQu9GM0L3QvtC80YMg0L/QvtC70L7QttC10L3QvdGWKSDQv9Cw0L3QtdC70ZYg0ZbQutC+0L3QvtC6IiwKICAgICAgICBnYWxsZXJ5TWF4MTogItCc0LDQutGB0LjQvNCw0LvRjNC90LAg0LrRltC70YzQutGW0YHRgtGMINC00LvRjyAiLAogICAgICAgIGdhbGxlcnlNYXgyOiAiINC30L7QsdGA0LDQttC10L3RjCjQvdGPKSAo0LTQviDRgtCwINC/0ZbRgdC70Y8pIiwKICAgICAgICBnYWxsZXJ5QXV0b1pvb206ICLQl9C80ZbQvdCwINC80LDRgdGI0YLQsNCx0YMg0LTQviAxMDAlIChjaHJvbWUpIiwKICAgICAgICBnYWxsZXJ5QXV0b1pvb21UaXA6ICLQr9C60YnQviDRlCDQt9Cx0ZbQu9GM0YjQtdC90L3Rjywg0LfQvNGW0L3RltGC0Ywg0LzQsNGB0YjRgtCw0LEg0LfQvtCx0YDQsNC20LXQvdC90Y8g0ZYg0LHRltGH0L3QvtGXINC/0LDQvdC10LvRliDQvdCw0LfQsNC0INC00L4gMTAwJSwg0YnQvtCxINC30LHRltC70YzRiNC40YLQuCDQstGW0LfRg9Cw0LvRjNC90YMg0L7QsdC70LDRgdGC0YwgKNC00L7Qv9GD0YHRgtC40LzQviDRgtGW0LvRjNC60Lgg0LIgQ2hyb21lKSIsCiAgICAgICAgZ2FsbGVyeURlc2NyaXB0aW9uTGVuZ3RoMTogItCc0LDQutGBLiDQtNC+0LbQstC40L3QsCDQutC+0LzQtdC90YLQsNGA0Y8g0YHQutC70LDQtNCw0ZQiLAogICAgICAgIGdhbGxlcnlEZXNjcmlwdGlvbkxlbmd0aDI6ICIg0YHQuNC80LLQvtC7KNC4KSIsCiAgICAgICAgZ2FsbGVyeUF1dG9PcGVuU2l0ZXM6ICLQkNCy0YLQvtCy0ZbQtNC60YDQuNCy0LDRgtC4INC/0L7RgdC40LvQsNC90L3RjyDQv9GA0LDQstC40Lsg0LPQsNC70LXRgNC10ZcsINC/0L4g0L7QtNC90L7QvNGDINGA0Y/QtNC60YMg0LfQsCDRgNCw0LcsINGWINCw0LLRgtC+0YDQvtC30YjQuNGA0Y7QstCw0YLQuCDQs9Cw0LvQtdGA0LXRjiwg0Y/QutGJ0L4g0LLQvtC90L4g0L/QvtGH0LjQvdCw0ZTRgtGM0YHRjyDQtyBAIiwKICAgICAgICBkaXNhYmxlS2V5U2l0ZXM6ICLRgNC10LPRg9C70Y/RgNC90LjQuSDQstC40YDQsNC3IFVSTC3QsNC00YDQtdGBINC00LvRjyDQstC40LzQutC90LXQvdC90Y8g0LrQvtC80LHRltC90LDRhtGW0Lkg0LrQu9Cw0LLRltGILCDQv9C+INC+0LTQvdC+0LzRgyDQvdCwINGA0Y/QtNC+0LoiLAogICAgICAgIGF1dG9PcGVuVmlld21vcmU6ICLQkNCy0YLQvtGA0L7Qt9GI0LjRgNGO0LLQsNGC0Lgg0L/RgNC4INCy0ZbQtNC60YDQuNGC0YLRliDQs9Cw0LvQtdGA0LXRlyIsCiAgICAgICAgZ2FsbGVyeVNlYXJjaERhdGE6ICLQn9C+0YjRg9C6INC90LDQu9Cw0YjRgtGD0LLQsNC90Ywg0YHQsNC50YLRgywg0L7Rh9C40YnQtdC90L3RjyDRgtCwINCy0ZbQtNC90L7QstC70LXQvdC90Y8iLAogICAgICAgIGdhbGxlcnlFZGl0U2l0ZTogItCh0LDQudGCINC+0L3Qu9Cw0LnQvS3RgNC10LTQsNCz0YPQstCw0L3QvdGPIiwKICAgICAgICBpbWdXaW5kb3c6ICLQktGW0LrQvdC+INC30L7QsdGA0LDQttC10L3QvdGPIiwKICAgICAgICBpbWdXaW5kb3dGaXRUb1NjcmVlbjogItCQ0LTQsNC/0YLRg9GU0YLRjNGB0Y8g0L/RltC0INGA0L7Qt9C80ZbRgCDQtdC60YDQsNC90YMg0ZYg0LLQuNGA0ZbQstC90Y7RlNGC0YzRgdGPIiwKICAgICAgICBpbWdXaW5kb3dGaXRUb1NjcmVlblRpcDogItCc0LXRgtC+0LQg0LDQtNCw0L/RgtCw0YbRltGXIC0gY29udGFpbiwg0LAg0L3QtSBjb3ZlciIsCiAgICAgICAgaW1nV2luZG93Rml0VG9TY3JlZW5XaGVuU21hbGw6ICLQndCw0LLRltGC0Ywg0LzQsNC70LXQvdGM0LrRliDQt9C+0LHRgNCw0LbQtdC90L3RjyDRgNC+0LfRgtGP0LPRg9GO0YLRjNGB0Y8g0L/RltC0INGA0L7Qt9C80ZbRgCDQtdC60YDQsNC90YMiLAogICAgICAgIGltZ1dpbmRvd0RlZmF1bHRUb29sOiAi0IbQvdGB0YLRgNGD0LzQtdC90YIsINCy0LjQsdGA0LDQvdC40Lkg0LfQsCDQt9Cw0LzQvtCy0YfRg9Cy0LDQvdC90Y/QvCDQv9GA0Lgg0LLRltC00LrRgNC40YLRgtGWINCy0ZbQutC90LAiLAogICAgICAgIGhhbmQ6ICLQl9Cw0YXQstCw0YIiLAogICAgICAgIHJvdGF0ZTogItCe0LHQtdGA0YLQsNC90L3RjyIsCiAgICAgICAgem9vbTogItCc0LDRgdGI0YLQsNCxIiwKICAgICAgICBpbWdXaW5kb3dFc2NLZXk6ICLQndCw0YLQuNGB0L3RltGC0YwgRXNjINC00LvRjyDQt9Cw0LrRgNC40YLRgtGPIiwKICAgICAgICBpbWdXaW5kb3dEYmxDbGlja0ltZ1dpbmRvdzogItCU0LLRltGH0ZYg0LrQu9Cw0YbQvdGW0YLRjCDQv9C+INCy0ZbQutC90YMg0ZbQtyDQt9C+0LHRgNCw0LbQtdC90L3Rj9C8INC00LvRjyDQt9Cw0LrRgNC40YLRgtGPIiwKICAgICAgICBpbWdXaW5kb3dDbGlja091dHNpZGU6ICLQmtC70LDRhtC90ZbRgtGMINC30LAg0LzQtdC20LDQvNC4INC30L7QsdGA0LDQttC10L3QvdGPICjQvtCy0LXRgNC70LXRlNC8KSDQtNC70Y8g0LfQsNC60YDQuNGC0YLRjyIsCiAgICAgICAgaW1nV2luZG93Q2xpY2tPdXRzaWRlVGlwOiAi0JTRltGUINGC0ZbQu9GM0LrQuCDQv9GA0Lgg0LLRltC00L7QsdGA0LDQttC10L3QvdGWINC+0LLQtdGA0LvQtdGPIiwKICAgICAgICBub25lOiAi0J3RltGH0L7Qs9C+IiwKICAgICAgICBjbGljazogItCa0LvRltC6IiwKICAgICAgICBkYmxjbGljazogItCf0L7QtNCy0ZbQudC90LjQuSDQutC70ZbQuiIsCiAgICAgICAgaW1nV2luZG93T3ZlcmxheWVyU2hvd246ICLQntCy0LXRgNC70LXQuSIsCiAgICAgICAgaW1nV2luZG93T3ZlcmxheWVyQ29sb3I6ICLQmtC+0LvRltGAINC5INC90LXQv9GA0L7Qt9C+0YDRltGB0YLRjCIsCiAgICAgICAgaW1nV2luZG93U2hpZnRSb3RhdGVTdGVwMTogItCe0LHQtdGA0YLQsNC50YLQtSwg0YPRgtGA0LjQvNGD0Y7Rh9C4INC60LvQsNCy0ZbRiNGDIFNoaWZ0INC90LAg0LrQvtC20L3RliIsCiAgICAgICAgaW1nV2luZG93U2hpZnRSb3RhdGVTdGVwMjogIiDQs9GA0LDQtNGD0YHRltCyIiwKICAgICAgICBpbWdXaW5kb3dNb3VzZVdoZWVsWm9vbTogItCc0LDRgdGI0YLQsNCx0YPQstCw0L3QvdGPINC60L7Qu9C10YHQvtC8INC/0YDQvtC60YDRg9GC0LrQuCIsCiAgICAgICAgaW1nV2luZG93Wm9vbVJhbmdlOiAi0JzQsNGB0YjRgtCw0LHRg9Cy0LDQvdC90Y8g0LrQvtC70LXRgdC+0Lwg0L/RgNC+0LrRgNGD0YLQutC4IiwKICAgICAgICBpbWdXaW5kb3dab29tUmFuZ2VUaXA6ICLQnNCw0YHRiNGC0LDQsdGD0LLQsNC90L3RjyAo0LzQsNGUINCx0YPRgtC4INC00L7QtNCw0YLQvdC40Lwg0YfQuNGB0LvQvtC8KSIsCiAgICAgICAgb3RoZXJzOiAi0IbQvdGI0LUiLAogICAgICAgIHdhaXRJbWdMb2FkOiAi0JfQsNGH0LXQutCw0LnRgtC1LCDQv9C+0LrQuCDQt9C+0LHRgNCw0LbQtdC90L3RjyDQv9C+0LLQvdGW0YHRgtGOINC30LDQstCw0L3RgtCw0LbQuNGC0YzRgdGPLCDQv9C10YDRiCDQvdGW0LYg0LLQuNC60L7QvdGD0LLQsNGC0Lgg0YLQsNC60ZYg0L7Qv9C10YDQsNGG0ZbRlywg0Y/QuiDQvNCw0YHRiNGC0LDQsdGD0LLQsNC90L3RjyDRgyDRgdC/0LvQuNCy0LDRjtGH0L7QvNGDINCy0ZbQutC90ZYuIiwKICAgICAgICB3YWl0SW1nTG9hZFRpcDogItCj0YLRgNC40LzRg9GO0YfQuCBDdHJsLCDQvNC+0LbQvdCwINGC0LjQvNGH0LDRgdC+0LLQviDQstC40LrQvtC90LDRgtC4INC90LDQu9Cw0YjRgtGD0LLQsNC90L3Rjywg0L/RgNC+0YLQuNC70LXQttC90LUg0YbRjNC+0LzRgyIsCiAgICAgICAgZGVidWc6ICLQlNC10LHQsNCzINC80LXQvdGOIiwKICAgICAgICBjdXN0b21SdWxlczogItCa0L7RgNC40YHRgtGD0LLQsNGG0YzQutGWINC/0YDQsNCy0LjQu9CwINC00LvRjyDQstC10LvQuNC60LjRhSDQt9C+0LHRgNCw0LbQtdC90YwiLAogICAgICAgIGZpcnN0RW5naW5lOiAi0JHQsNC20LDQvdCwINC/0L7RiNGD0LrQvtCy0LAg0YHQuNGB0YLQtdC80LAiLAogICAgICAgIHJlZnJlc2hXaGVuRXJyb3I6ICLQn9C+0LzQuNC70LrQsCDRh9C40YLQsNC90L3Rjywg0L3QsNGC0LjRgdC90ZbRgtGMINC00LvRjyDQv9C10YDQtdC30LDQstCw0L3RgtCw0LbQtdC90L3RjyIsCiAgICAgICAgc3dpdGNoU2xpZGU6ICLQn9C10YDQtdC80LrQvdGD0YLQuCDQvdC40LbQvdGOINC/0LDQvdC10LvRjCIsCiAgICAgICAgdmlld21vcmU6ICLQoNC+0LfQs9C+0YDQvdGD0YLQuCDQsdGW0LvRjNGI0LUiLAogICAgICAgIGNvdW50RG93bjogItCX0LLQvtGA0L7RgtC90ZbQuSDQstGW0LTQu9GW0LoiLAogICAgICAgIGN1c3RvbUxhbmc6ICLQnNC+0LLQsCIsCiAgICAgICAgZGVmYXVsdExhbmc6ICLQkNCy0YLQvtCy0LjQsdGW0YAiLAogICAgICAgIGhpZGVJY29uOiAi0J/RgNC40YXQvtCy0LDRgtC4INGW0LrQvtC90LrRgyIsCiAgICAgICAgaW5pdFNob3c6ICLQhtC90LLQtdGA0YLRg9Cy0LDRgtC4INC60L7QvNCx0ZbQvdCw0YbRltGOINC60LvQsNCy0ZbRiCDQtNC70Y8g0L/QvtC/0LXRgNC10LTQvdGM0L7Qs9C+INC/0LXRgNC10LPQu9GP0LTRgyDQt9CwINC30LDQvNC+0LLRh9GD0LLQsNC90L3Rj9C8IiwKICAgICAgICBzdGF5T3V0OiAi0JTQvtC30LLQvtC70LjRgtC4INC/0LvQsNCy0YPRh9GW0Lkg0L/QsNC90LXQu9GWINC30LDQu9C40YjQuNGC0LjRgdGMINC/0L7Qt9CwINC30L7QsdGA0LDQttC10L3QvdGP0LwiLAogICAgICAgIGdhbGxlcnlEb3dubG9hZEdhcDogItCG0L3RgtC10YDQstCw0Lsg0LfQsNCy0LDQvdGC0LDQttC10L3QvdGPIiwKICAgICAgICBmb3JtYXRDb252ZXJzaW9uOiAi0J/QtdGA0LXRgtCy0L7RgNC40YLQuCDRhNC+0YDQvNCw0YIg0LfQvtCx0YDQsNC20LXQvdC90Y8g0L/RltC0INGH0LDRgSDQt9Cw0LLQsNC90YLQsNC20LXQvdC90Y8uINCe0LTQuNC9INGA0Y/QtNC+0Log0L3QsCDRgNGP0LTQvtC6IiwKICAgICAgICBnYWxsZXJ5RGlzYWJsZUFycm93OiAi0JLQuNC80LrQvdGD0YLQuCDQutC70LDQstGW0YjRliDQt9GWINGB0YLRgNGW0LvQutCw0LzQuCIsCiAgICAgICAgcG9zaXRpb25GaXhlZDogItCk0ZbQutGB0L7QstCw0L3QtSDQv9C+0LvQvtC20LXQvdC90Y8iLAogICAgICAgIHN3aXRjaFN0b3JlTG9jOiAi0J/QvtC70L7QttC10L3QvdGPINC/0LDQvCfRj9GC0ZYg0L/RgNC4INC/0LXRgNC10LzQuNC60LDQvdC90ZYiCiAgICB9Cn0KXTsKdmFyIGxhbmdMaXN0ID0ge307CmxhbmdEYXRhLmZvckVhY2gobGFuZyA9PiB7CiAgICBsYW5nTGlzdFtsYW5nLm1hdGNoWzBdXSA9IGxhbmcubmFtZTsKfSk7CnZhciBpMThuRGF0YSA9IHt9OwpmdW5jdGlvbiBzZXRMYW5nKGxhKSB7CiAgICBpMThuRGF0YSA9IGxhbmdEYXRhWzBdLmxhbmc7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhbmdEYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IGxhbmcgPSBsYW5nRGF0YVtpXTsKICAgICAgICBpZiAobGFuZyAmJiBsYW5nLm1hdGNoLmluZGV4T2YobGEpICE9PSAtMSkgewogICAgICAgICAgICBpMThuRGF0YSA9IGxhbmcubGFuZzsKICAgICAgICAgICAgaWYgKGxhbmcuZW5jb2RlKSB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBrIGluIGkxOG5EYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgaTE4bkRhdGFba10gPSBkZWNvZGVVUkkoaTE4bkRhdGFba10pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgIH0KfQo="}]},{"name":"Enable Right Click and Copy Link/Button Text on Drag","options":{"check_for_updates":true,"user_modified":null,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":null,"unwrap":null,"run_at":null,"run_in":null,"tags":[],"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["*://*/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"orig_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_run_in":[],"orig_noframes":null,"orig_tags":[]}},"storage":{"ts":1756027954451,"data":{}},"enabled":false,"position":10,"file_url":"https://update.greasyfork.org/scripts/497612/Enable%20Right%20Click%20and%20Copy%20LinkButton%20Text%20on%20Drag.user.js","uuid":"04e4100f-bc50-4c89-a17c-766845c3a813","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBFbmFibGUgUmlnaHQgQ2xpY2sgYW5kIENvcHkgTGluay9CdXR0b24gVGV4dCBvbiBEcmFnCi8vIEB2ZXJzaW9uICAgICAgMy4wCi8vIEBkZXNjcmlwdGlvbiAgRW5hYmxlIHJpZ2h0LWNsaWNrIGNvbnRleHQgbWVudSBvbiBzaXRlcyB0aGF0IGRpc2FibGUgaXQsIGNvcHkgdGhlIHRleHQgb2YgYSBsaW5rIG9yIGJ1dHRvbiB0byB0aGUgY2xpcGJvYXJkIHdoZW4gZHJhZ2dlZCBzbGlnaHRseSwgYW5kIHJlbW92ZSBhZGRlZCBzb3VyY2UgbGlua3MgZnJvbSBjb3BpZWQgdGV4dAovLyBAZGVzY3JpcHRpb246ZGUgRXJtw7ZnbGljaHQgZGFzIEtvbnRleHRtZW7DvCBtaXQgZGVyIHJlY2h0ZW4gTWF1c3Rhc3RlIGF1ZiBXZWJzaXRlcywgZGllIGVzIGRlYWt0aXZpZXJlbiwgdW5kIGtvcGllcnQgZGVuIFRleHQgZWluZXMgTGlua3Mgb2RlciBlaW5lciBTY2hhbHRmbMOkY2hlIGluIGRpZSBad2lzY2hlbmFibGFnZSwgd2VubiBlciBsZWljaHQgZ2V6b2dlbiB3aXJkLCB1bmQgZW50ZmVybnQgaGluenVnZWbDvGd0ZSBRdWVsbGVubGlua3MgYXVzIGtvcGllcnRlbSBUZXh0Ci8vIEBkZXNjcmlwdGlvbjpydSDQktC60LvRjtGH0LjRgtGMINC60L7QvdGC0LXQutGB0YLQvdC+0LUg0LzQtdC90Y4g0L/RgNCw0LLQvtC5INC60L3QvtC/0LrQvtC5INC80YvRiNC4INC90LAg0YHQsNC50YLQsNGFLCDQutC+0YLQvtGA0YvQtSDQtdCz0L4g0L7RgtC60LvRjtGH0LDRjtGCLCDQutC+0L/QuNGA0L7QstCw0YLRjCDRgtC10LrRgdGCINGB0YHRi9C70LrQuCDQuNC70Lgg0LrQvdC+0L/QutC4INCyINCx0YPRhNC10YAg0L7QsdC80LXQvdCwINC/0YDQuCDQvdC10LHQvtC70YzRiNC+0Lwg0L/QtdGA0LXRgtCw0YHQutC40LLQsNC90LjQuCDQuCDRg9C00LDQu9GP0YLRjCDQtNC+0LHQsNCy0LvQtdC90L3Ri9C1INGB0YHRi9C70LrQuCDQvdCwINC40YHRgtC+0YfQvdC40Log0LjQtyDRgdC60L7Qv9C40YDQvtCy0LDQvdC90L7Qs9C+INGC0LXQutGB0YLQsAovLyBAZGVzY3JpcHRpb246dWsg0KPQstGW0LzQutC90YPRgtC4INC60L7QvdGC0LXQutGB0YLQvdC1INC80LXQvdGOINC/0YDQsNCy0L7RjiDQutC90L7Qv9C60L7RjiDQvNC40YjRliDQvdCwINGB0LDQudGC0LDRhSwg0Y/QutGWINC50L7Qs9C+INCy0LjQvNC40LrQsNGO0YLRjCwg0LrQvtC/0ZbRjtCy0LDRgtC4INGC0LXQutGB0YIg0L/QvtGB0LjQu9Cw0L3QvdGPINCw0LHQviDQutC90L7Qv9C60Lgg0LIg0LHRg9GE0LXRgCDQvtCx0LzRltC90YMg0L/RgNC4INC90LXQstC10LvQuNC60L7QvNGDINC/0LXRgNC10YLRj9Cz0YPQstCw0L3QvdGWINGC0LAg0LLQuNC00LDQu9GP0YLQuCDQtNC+0LTQsNC90ZYg0L/QvtGB0LjQu9Cw0L3QvdGPINC90LAg0LTQttC10YDQtdC70L4g0Lcg0LrQvtC/0ZbQudC+0LLQsNC90L7Qs9C+INGC0LXQutGB0YLRgwovLyBAZGVzY3JpcHRpb246emgg5Zyo56aB55So5Y+z6ZSu6I+c5Y2V55qE572R56uZ5LiK5ZCv55So5Y+z6ZSu6I+c5Y2V77yM5bm25Zyo56iN5b6u5ouW5Yqo5pe25bCG6ZO+5o6l5oiW5oyJ6ZKu55qE5paH5pys5aSN5Yi25Yiw5Ymq6LS05p2/77yM5bm25LuO5aSN5Yi255qE5paH5pys5Lit5Yig6Zmk5re75Yqg55qE5p2l5rqQ6ZO+5o6lCi8vIEBkZXNjcmlwdGlvbjpqYSDlj7Pjgq/jg6rjg4Pjgq/jga7jgrPjg7Pjg4bjgq3jgrnjg4jjg6Hjg4vjg6Xjg7zjgpLnhKHlirnjgavjgZnjgovjgrXjgqTjg4jjgaflj7Pjgq/jg6rjg4Pjgq/jgpLmnInlirnjgavjgZfjgIHjg6rjg7Pjgq/jgoTjg5zjgr/jg7Pjga7jg4bjgq3jgrnjg4jjgpLlsJHjgZfjg4njg6njg4PjgrDjgZfjgabjgq/jg6rjg4Pjg5fjg5zjg7zjg4njgavjgrPjg5Tjg7zjgZfjgIHjgrPjg5Tjg7zjgZfjgZ/jg4bjgq3jgrnjg4jjgYvjgonov73liqDjgZXjgozjgZ/jgr3jg7zjgrnjg6rjg7Pjgq/jgpLliYrpmaTjgZfjgb7jgZkKLy8gQGRlc2NyaXB0aW9uOm5sIFNjaGFrZWwgaGV0IHJlY2h0ZXJtdWlza25vcC1jb250ZXh0bWVudSBpbiBvcCBzaXRlcyBkaWUgZGl0IHVpdHNjaGFrZWxlbiBlbiBrb3BpZWVyIGRlIHRla3N0IHZhbiBlZW4gbGluayBvZiBrbm9wIG5hYXIgaGV0IGtsZW1ib3JkIHdhbm5lZXIgZGV6ZSBsaWNodCB3b3JkdCBnZXNsZWVwdCBlbiB2ZXJ3aWpkZXIgdG9lZ2V2b2VnZGUgYnJvbm5lbmxpbmtzIHVpdCBnZWtvcGllZXJkZSB0ZWtzdAovLyBAZGVzY3JpcHRpb246cHQgQXRpdmFyIG8gbWVudSBkZSBjb250ZXh0byBkbyBib3TDo28gZGlyZWl0byBkbyBtb3VzZSBlbSBzaXRlcyBxdWUgbyBkZXNhdGl2YW0gZSBjb3BpYXIgbyB0ZXh0byBkZSB1bSBsaW5rIG91IGJvdMOjbyBwYXJhIGEgw6FyZWEgZGUgdHJhbnNmZXLDqm5jaWEgcXVhbmRvIGFycmFzdGFkbyBsaWdlaXJhbWVudGUgZSByZW1vdmVyIGxpbmtzIGRlIGZvbnRlIGFkaWNpb25hZG9zIGRvIHRleHRvIGNvcGlhZG8KLy8gQGRlc2NyaXB0aW9uOmVzIEhhYmlsaXRhciBlbCBtZW7DuiBjb250ZXh0dWFsIGRlIGNsaWMgZGVyZWNobyBlbiBzaXRpb3MgcXVlIGxvIGRlc2hhYmlsaXRhbiB5IGNvcGlhciBlbCB0ZXh0byBkZSB1biBlbmxhY2UgbyBib3TDs24gYWwgcG9ydGFwYXBlbGVzIGN1YW5kbyBzZSBhcnJhc3RyYSBsaWdlcmFtZW50ZSB5IGVsaW1pbmFyIGxvcyBlbmxhY2VzIGRlIG9yaWdlbiBhZ3JlZ2Fkb3MgZGVsIHRleHRvIGNvcGlhZG8KLy8gQGRlc2NyaXB0aW9uOml0IEFiaWxpdGEgaWwgbWVudSBjb250ZXN0dWFsZSBkZWwgdGFzdG8gZGVzdHJvIGRlbCBtb3VzZSBzdSBzaXRpIGNoZSBsbyBkaXNhYmlsaXRhbm8gZSBjb3BpYSBpbCB0ZXN0byBkaSB1biBjb2xsZWdhbWVudG8gbyBwdWxzYW50ZSBuZWdsaSBhcHB1bnRpIHF1YW5kbyB2aWVuZSB0cmFzY2luYXRvIGxlZ2dlcm1lbnRlIGUgcmltdW92ZSBpIGNvbGxlZ2FtZW50aSBhbGxhIGZvbnRlIGFnZ2l1bnRpIGRhbCB0ZXN0byBjb3BpYXRvCi8vIEBkZXNjcmlwdGlvbjphciDYqtmF2YPZitmGINmC2KfYptmF2Kkg2KfZhNmG2YLYsSDYqNiy2LEg2KfZhNmF2KfZiNizINin2YTYo9mK2YXZhiDYudmE2Ykg2KfZhNmF2YjYp9mC2Lkg2KfZhNiq2Yog2KrYudi32YTZh9inINmI2YbYs9iuINmG2LUg2KfZhNix2KfYqNi3INij2Ygg2KfZhNiy2LEg2KXZhNmJINin2YTYrdin2YHYuNipINi52YbYryDYs9it2KjZhyDZgtmE2YrZhNin2Ysg2YjYpdiy2KfZhNipINix2YjYp9io2Lcg2KfZhNmF2LXYr9ixINin2YTZhdi22KfZgdipINmF2YYg2KfZhNmG2LUg2KfZhNmF2YbYs9mI2K4KLy8gQGRlc2NyaXB0aW9uOmZyIEFjdGl2ZXIgbGUgbWVudSBjb250ZXh0dWVsIGR1IGNsaWMgZHJvaXQgc3VyIGxlcyBzaXRlcyBxdWkgbGUgZMOpc2FjdGl2ZW50IGV0IGNvcGllciBsZSB0ZXh0ZSBkJ3VuIGxpZW4gb3UgZCd1biBib3V0b24gZGFucyBsZSBwcmVzc2UtcGFwaWVycyBsb3JzcXUnaWwgZXN0IGzDqWfDqHJlbWVudCBnbGlzc8OpIGV0IHN1cHByaW1lciBsZXMgbGllbnMgZGUgc291cmNlIGFqb3V0w6lzIGR1IHRleHRlIGNvcGnDqQovLyBAZGVzY3JpcHRpb246cGwgV8WCxIVjeiBtZW51IGtvbnRla3N0b3dlIGtsaWtuacSZY2lhIHByYXd5bSBwcnp5Y2lza2llbSBteXN6eSBuYSBzdHJvbmFjaCwga3TDs3JlIGplIHd5xYLEhWN6YWrEhSwgaSBza29waXVqIHRla3N0IGxpbmt1IGx1YiBwcnp5Y2lza3UgZG8gc2Nob3drYSBwbyBsZWtraW0gcHJ6ZWNpxIVnbmnEmWNpdSBpIHVzdcWEIGRvZGFuZSBsaW5raSDFunLDs2TFgm93ZSB6IHNrb3Bpb3dhbmVnbyB0ZWtzdHUKLy8gQGRlc2NyaXB0aW9uOmhpIOCkieCkqCDgpLjgpL7gpIfgpJ/gpYvgpIIg4KSq4KSwIOCksOCkvuCkh+Ckny3gpJXgpY3gpLLgpL/gpJUg4KS44KSC4KSm4KSw4KWN4KStIOCkruClh+CkqOClgiDgpLjgpJXgpY3gpLfgpK4g4KSV4KSw4KWH4KSCIOCknOCliyDgpIfgpLjgpYcg4KSF4KSV4KWN4KS34KSuIOCkleCksOCkpOClhyDgpLngpYjgpIIg4KSU4KSwIOCksuCkv+CkguCklSDgpK/gpL4g4KSs4KSf4KSoIOCkleClhyDgpJ/gpYfgpJXgpY3gpLjgpY3gpJ8g4KSV4KWLIOCkueCksuCljeCkleClhyDgpLjgpYcg4KSW4KWA4KSC4KSa4KSo4KWHIOCkquCksCDgpJXgpY3gpLLgpL/gpKrgpKzgpYvgpLDgpY3gpKEg4KSq4KSwIOCkleClieCkquClgCDgpJXgpLDgpYfgpIIg4KSU4KSwIOCkleClieCkquClgCDgpJXgpL/gpI8g4KSX4KSPIOCkn+Clh+CkleCljeCkuOCljeCknyDgpLjgpYcg4KSc4KWL4KSh4KS84KWHIOCkl+CkjyDgpLjgpY3gpLDgpYvgpKQg4KSy4KS/4KSC4KSVIOCkqOCkv+CkleCkvuCksuClh+CkggovLyBAZGVzY3JpcHRpb246Ym4g4Kah4Ka+4KaoIOCmleCnjeCmsuCmv+CmlSDgppXgpqjgpp/gp4fgppXgp43gprjgpp8g4Kau4KeH4Kao4KeBIOCmuOCmleCnjeCmt+CmriDgppXgprDgp4Hgpqgg4Kav4Ka+IOCmj+Cmn+CmvyDgpoXgppXgp43gprfgpq4g4KaV4Kaw4KeHIOCmj+CmrOCmgiDgprngpr7gprLgppXgpr7gpq3gpr7gpqzgp4cg4Kaf4KeH4Kao4KeHIOCmqOCmv+Cmr+CmvOCnhyDgppfgp4fgprLgp4cg4Kay4Ka/4KaZ4KeN4KaVIOCmrOCmviDgpqzgp4vgpqTgpr7gpq7gp4fgprAg4Kaq4Ka+4Kag4KeN4KavIOCmleCnjeCmsuCmv+CmquCmrOCni+CmsOCnjeCmoeCnhyDgppXgpqrgpr8g4KaV4Kaw4KeB4KaoIOCmj+CmrOCmgiDgppXgpqrgpr8g4KaV4Kaw4Ka+IOCmquCmvuCmoOCnjeCmryDgpqXgp4fgppXgp4cg4Kav4KeL4KaXIOCmleCmsOCmviDgpongpqTgp43gprgg4Kay4Ka/4KaZ4KeN4KaV4KaX4KeB4Kay4Ka/IOCmuOCmsOCmvuCmqAovLyBAZGVzY3JpcHRpb246a28g7Jik66W47Kq9IO2BtOumrSDsu6jthY3siqTtirgg66mU64m066W8IOu5hO2ZnOyEse2ZlO2VmOuKlCDsgqzsnbTtirjsl5DshJwg7Jik66W47Kq9IO2BtOumreydhCDtmZzshLHtmZTtlZjqs6Ag66eB7YGsIOuYkOuKlCDrsoTtirwg7YWN7Iqk7Yq466W8IOyVveqwhCDrk5zrnpjqt7jtlZjrqbQg7YG066a967O065Oc7JeQIOuzteyCrO2VmOqzoCDrs7XsgqzrkJwg7YWN7Iqk7Yq47JeQ7IScIOy2lOqwgOuQnCDshozsiqQg66eB7YGs66W8IOygnOqxsO2VqeuLiOuLpAovLyBAZGVzY3JpcHRpb246dmkgS8OtY2ggaG/huqF0IG1lbnUgbmfhu68gY+G6o25oIGNodeG7mXQgcGjhuqNpIHRyw6puIGPDoWMgdHJhbmcgd2ViIHbDtCBoaeG7h3UgaMOzYSBuw7MgdsOgIHNhbyBjaMOpcCB2xINuIGLhuqNuIGPhu6dhIGxpw6puIGvhur90IGhv4bq3YyBuw7p0IHbDoG8gYuG6o25nIHThuqFtIGtoaSBrw6lvIG5o4bq5IHbDoCBsb+G6oWkgYuG7jyBjw6FjIGxpw6puIGvhur90IG5ndeG7k24gxJHGsOG7o2MgdGjDqm0gdOG7qyB2xINuIGLhuqNuIMSRw6Mgc2FvIGNow6lwCi8vIEBkZXNjcmlwdGlvbjp0ciBTYcSfIHTEsWtsYW1hIGJhxJ9sYW0gbWVuw7xzw7xuw7wgZGV2cmUgZMSxxZ/EsSBixLFyYWthbiBzaXRlbGVyZGUgc2HEnyB0xLFrbGFtYSBiYcSfbGFtIG1lbsO8c8O8bsO8IGV0a2lubGXFn3RpcmluIHZlIGJpciBiYcSfbGFudMSxIHZleWEgZMO8xJ9tZW5pbiBtZXRuaW5pIGhhZmlmw6dlIHPDvHLDvGtsZWRpxJ9pbml6ZGUgcGFub3lhIGtvcHlhbGF5xLFuIHZlIGtvcHlhbGFuYW4gbWV0aW5kZW4gZWtsZW5lbiBrYXluYWsgYmHEn2xhbnTEsWxhcsSxIGthbGTEsXLEsW4KLy8gQGRlc2NyaXB0aW9uOnRoIOC5gOC4m+C4tOC4lOC5g+C4iuC5ieC4h+C4suC4meC5gOC4oeC4meC4ueC4hOC4peC4tOC4geC4guC4p+C4suC4muC4meC5gOC4p+C5h+C4muC5hOC4i+C4leC5jOC4l+C4teC5iOC4m+C4tOC4lOC5g+C4iuC5ieC4h+C4suC4meC5geC4peC4sOC4hOC4seC4lOC4peC4reC4geC4guC5ieC4reC4hOC4p+C4suC4oeC4guC4reC4h+C4peC4tOC4h+C4geC5jOC4q+C4o+C4t+C4reC4m+C4uOC5iOC4oeC5hOC4m+C4ouC4seC4h+C4hOC4peC4tOC4m+C4muC4reC4o+C5jOC4lOC5gOC4oeC4t+C5iOC4reC4luC4ueC4geC4peC4suC4geC5gOC4muC4siDguYYg4LmB4Lil4Liw4Lil4Lia4Lil4Li04LiH4LiB4LmM4LiX4Li14LmI4LmA4Lie4Li04LmI4Lih4LiI4Liy4LiB4LiC4LmJ4Lit4LiE4Lin4Liy4Lih4LiX4Li14LmI4LiE4Lix4LiU4Lil4Lit4LiBCi8vIEBkZXNjcmlwdGlvbjpheiBTYXl0ZGEgc2HEnyBrbGlrIGtvbnRla3N0IG1lbnl1c3VudSBha3RpdmzJmcWfZGlyaW4sIGxpbmsgdsmZIHlhIGTDvHltyZluaW4gbcmZdG5pbmkgecO8bmfDvGxjyZkgc8O8csO8a2zJmW3JmWtsyZkgcGFub3lhIGtvcHlhbGF5xLFuIHbJmSBrb3B5YWxhbm3EscWfIG3JmXRuyZkgyZlsYXbJmSBlZGlsbWnFnyBtyZluYsmZIGxpbmtsyZlyaW5pIHNpbGluCi8vIEBkZXNjcmlwdGlvbjpreiDQodCw0LnRgtGC0LDRgNC00LAg0L7SoyDQttCw0psg0LHQsNGC0YvRgNC80LAg0LrQvtC90YLQtdC60YHRgtGC0ZbQuiDQvNOZ0LfRltGA0ZbQvSDSm9C+0YHRi9Kj0YvQtywg0YHRltC70YLQtdC80LUg0L3QtdC80LXRgdC1INCx0LDRgtGL0YDQvNCwINC805nRgtGW0L3RltC9INC20LXSo9GW0Lsg0YLQsNGA0YLRi9C/LCDQsNC70LzQsNGB0YMg0LHRg9GE0LXRgNGW0L3QtSDQutOp0YjRltGA0ZbSo9GW0Lcg0LbTmdC90LUg0LrTqdGI0ZbRgNGW0LvQs9C10L0g0LzTmdGC0ZbQvdC90LXQvSDSm9C+0YHRi9C70pPQsNC9INC00LXRgNC10LrQutOp0Lcg0YHRltC70YLQtdC80LXQu9C10YDRltC9INCw0LvRi9C/INGC0LDRgdGC0LDSo9GL0LcKLy8gQGRlc2NyaXB0aW9uOnV6IFNheXRsYXJkYSBvJ25nIHR1Z21hIGtvbnRla3N0IG1lbnl1c2luaSB5b3FpbmcsIGhhdm9sYSB5b2tpIHR1Z21hIG1hdG5pbmkgb3pnaW5hIHN1ZHJhYiwgYWxtYXNoaXNoIGJ1ZmVyaWdhIG51c3hhIGtvJ2NoaXJpbmcgdmEgbnVzeGFsYW5nYW4gbWF0bmdhIHFvJ3NoaWxnYW4gbWFuYmEgaGF2b2xhbGFyaW5pIG9saWIgdGFzaGxhbmcKLy8gQGljb24gICAgICAgICAgIGh0dHBzOi8vaWRlLm9ubC9pbWcvc2NyaXB0L2NvcHlsaW5rZHJhZy5wbmcKLy8gQG5hbWVzcGFjZSAgICAgIGh0dHBzOi8vaWRlLm9ubC9zY3JpcHRzLzMwLWtvcGlyb3ZhbmllLXRla3N0YS1zc3lsb2stcy1wb21vc2NoanUtdGFtcGVybW9ua2V5Lmh0bWwKLy8gQGxpY2Vuc2UgICAgICAgIE1JVAovLyBAbWF0Y2ggICAgICAgICAgKjovLyovKgovLyBAZ3JhbnQgICAgICAgICAgbm9uZQovLyBAYXV0aG9yICAgICAgICAgU2l0ZWdvCi8vIEBkb3dubG9hZFVSTCBodHRwczovL3VwZGF0ZS5ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzQ5NzYxMi9FbmFibGUlMjBSaWdodCUyMENsaWNrJTIwYW5kJTIwQ29weSUyMExpbmtCdXR0b24lMjBUZXh0JTIwb24lMjBEcmFnLnVzZXIuanMKLy8gQHVwZGF0ZVVSTCBodHRwczovL3VwZGF0ZS5ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzQ5NzYxMi9FbmFibGUlMjBSaWdodCUyMENsaWNrJTIwYW5kJTIwQ29weSUyMExpbmtCdXR0b24lMjBUZXh0JTIwb24lMjBEcmFnLm1ldGEuanMKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgLy8g0JzQsNGB0YHQuNCyINC00L7QvNC10L3QvtCyINC00LvRjyDQuNGB0LrQu9GO0YfQtdC90LjQuQogICAgLy8gQXJyYXkgb2YgZG9tYWlucyBmb3IgZXhjZXB0aW9ucwogICAgY29uc3QgZXhjbHVkZWREb21haW5zID0gWwogICAgICAgICdjb2lubWFya2V0Y2FwLmNvbScsCiAgICAgICAgJ2Fub3RoZXItZXhhbXBsZS5jb20nLAogICAgICAgICd5ZXRhbm90aGVyLWV4YW1wbGUuY29tJwogICAgXTsKCiAgICAvLyBHZXR0aW5nIHRoZSBjdXJyZW50IGRvbWFpbgogICAgY29uc3QgY3VycmVudERvbWFpbiA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZTsKCiAgICAvLyBDaGVja2luZyBpZiB0aGUgY3VycmVudCBkb21haW4gaXMgaW4gdGhlIGV4Y2VwdGlvbiBhcnJheQogICAgaWYgKGV4Y2x1ZGVkRG9tYWlucy5pbmNsdWRlcyhjdXJyZW50RG9tYWluKSkgewogICAgICAgIHJldHVybjsgLy8gU3RvcCBzY3JpcHQgZXhlY3V0aW9uIGlmIHRoZSBkb21haW4gaXMgaW4gZXhjZXB0aW9ucwogICAgfQoKICAgIC8vIEZ1bmN0aW9uIHRvIHJlbW92ZSBldmVudCBsaXN0ZW5lcnMgYW5kIGlubGluZSBzY3JpcHRzIGJsb2NraW5nIHJpZ2h0LWNsaWNrCiAgICBmdW5jdGlvbiBlbmFibGVSaWdodENsaWNrKGUpIHsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgfQoKICAgIC8vIE92ZXJyaWRpbmcgY29udGV4dCBtZW51IGV2ZW50cwogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBlbmFibGVSaWdodENsaWNrLCB0cnVlKTsKCiAgICAvLyBSZW1vdmluZyBpbmxpbmUgb25jb250ZXh0bWVudSBhdHRyaWJ1dGVzCiAgICBmdW5jdGlvbiByZW1vdmVCbG9ja2luZ0F0dHJpYnV0ZXMobm9kZSkgewogICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKCdvbmNvbnRleHRtZW51Jyk7CiAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoJ29uY29weScpOwogICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKCdvbnNlbGVjdHN0YXJ0Jyk7CiAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoJ3Vuc2VsZWN0YWJsZScpOwogICAgICAgIG5vZGUuc3R5bGUudXNlclNlbGVjdCA9ICdhdXRvJzsKICAgICAgICBub2RlLnN0eWxlLndlYmtpdFVzZXJTZWxlY3QgPSAnYXV0byc7CiAgICAgICAgbm9kZS5zdHlsZS5Nb3pVc2VyU2VsZWN0ID0gJ2F1dG8nOwogICAgICAgIG5vZGUuc3R5bGUubXNVc2VyU2VsZWN0ID0gJ2F1dG8nOwogICAgfQoKICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyonKS5mb3JFYWNoKGZ1bmN0aW9uKG5vZGUpIHsKICAgICAgICByZW1vdmVCbG9ja2luZ0F0dHJpYnV0ZXMobm9kZSk7CiAgICB9KTsKCiAgICAvLyBNdXRhdGlvbiBvYnNlcnZlciB0byBoYW5kbGUgZHluYW1pY2FsbHkgYWRkZWQgZWxlbWVudHMKICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24obXV0YXRpb25zKSB7CiAgICAgICAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24obXV0YXRpb24pIHsKICAgICAgICAgICAgbXV0YXRpb24uYWRkZWROb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKG5vZGUpIHsKICAgICAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAxKSB7IC8vIEVsZW1lbnQgbm9kZQogICAgICAgICAgICAgICAgICAgIHJlbW92ZUJsb2NraW5nQXR0cmlidXRlcyhub2RlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9KTsKCiAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LCB7CiAgICAgICAgY2hpbGRMaXN0OiB0cnVlLAogICAgICAgIHN1YnRyZWU6IHRydWUKICAgIH0pOwoKICAgIC8vIFZhcmlhYmxlcyBmb3IgZHJhZyBkZXRlY3Rpb24gYW5kIGNvcHlpbmcgdGV4dAogICAgbGV0IHN0YXJ0WCwgc3RhcnRZLCBkcmFnZ2luZyA9IGZhbHNlLCB0YXJnZXRFbGVtZW50ID0gbnVsbDsKCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbihldmVudCkgewogICAgICAgIGlmIChldmVudC50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnYScgfHwgZXZlbnQudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2J1dHRvbicpIHsKICAgICAgICAgICAgc3RhcnRYID0gZXZlbnQuY2xpZW50WDsKICAgICAgICAgICAgc3RhcnRZID0gZXZlbnQuY2xpZW50WTsKICAgICAgICAgICAgZHJhZ2dpbmcgPSB0cnVlOwogICAgICAgICAgICB0YXJnZXRFbGVtZW50ID0gZXZlbnQudGFyZ2V0OwogICAgICAgIH0KICAgIH0pOwoKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgaWYgKGRyYWdnaW5nKSB7CiAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KE1hdGgucG93KGV2ZW50LmNsaWVudFggLSBzdGFydFgsIDIpICsgTWF0aC5wb3coZXZlbnQuY2xpZW50WSAtIHN0YXJ0WSwgMikpOwogICAgICAgICAgICBpZiAoZGlzdGFuY2UgPiA1KSB7IC8vIENvbnNpZGVyIGl0IGEgZHJhZyBpZiBtb3ZlZCBtb3JlIHRoYW4gNSBwaXhlbHMKICAgICAgICAgICAgICAgIGlmICh0YXJnZXRFbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudFRleHQgPSB0YXJnZXRFbGVtZW50LnRleHRDb250ZW50LnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChlbGVtZW50VGV4dCkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUZXh0IGNvcGllZCB0byBjbGlwYm9hcmQ6JywgZWxlbWVudFRleHQpOwogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvdWxkIG5vdCBjb3B5IHRleHQ6ICcsIGVycik7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50ID0gbnVsbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwoKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBmdW5jdGlvbigpIHsKICAgICAgICBkcmFnZ2luZyA9IGZhbHNlOwogICAgICAgIHRhcmdldEVsZW1lbnQgPSBudWxsOwogICAgfSk7CgogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGZ1bmN0aW9uKCkgewogICAgICAgIGRyYWdnaW5nID0gZmFsc2U7CiAgICAgICAgdGFyZ2V0RWxlbWVudCA9IG51bGw7CiAgICB9KTsKCiAgICAvLyBSZW1vdmUgYWRkaXRpb25hbCB0ZXh0IGFkZGVkIHRvIGNsaXBib2FyZAogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29weScsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk7CiAgICAgICAgaWYgKCFzZWxlY3Rpb24ucmFuZ2VDb3VudCkgcmV0dXJuOwogICAgICAgIGNvbnN0IGNvcGllZFRleHQgPSBzZWxlY3Rpb24udG9TdHJpbmcoKS50cmltKCk7CiAgICAgICAgZXZlbnQuY2xpcGJvYXJkRGF0YS5zZXREYXRhKCd0ZXh0L3BsYWluJywgY29waWVkVGV4dCk7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIH0sIHRydWUpOwoKfSkoKTsK"},{"name":"No Ads - YouTube AdBlocker | Ad Skipper | Free YouTube Music | Ad Remover | Remove Adblock Warning","options":{"check_for_updates":true,"user_modified":null,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":null,"unwrap":null,"run_at":null,"run_in":null,"tags":[],"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["https://*.youtube.com/*","https://www.youtube-nocookie.com/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"orig_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_run_in":[],"orig_noframes":null,"orig_tags":[]}},"storage":{"ts":1756027347663,"data":{}},"enabled":false,"position":11,"file_url":"https://update.greasyfork.org/scripts/504197/No%20Ads%20-%20YouTube%20AdBlocker%20%7C%20Ad%20Skipper%20%7C%20Free%20YouTube%20Music%20%7C%20Ad%20Remover%20%7C%20Remove%20Adblock%20Warning.user.js","uuid":"2079db2d-4a06-4f9b-b5ae-545ba0c44e67","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBObyBBZHMgLSBZb3VUdWJlIEFkQmxvY2tlciB8IEFkIFNraXBwZXIgfCBGcmVlIFlvdVR1YmUgTXVzaWMgfCBBZCBSZW1vdmVyIHwgUmVtb3ZlIEFkYmxvY2sgV2FybmluZwovLyBAbmFtZXNwYWNlICAgIGh0dHA6Ly90YW1wZXJtb25rZXkubmV0LwovLyBAdmVyc2lvbiAgICAgIDMuOTUKLy8gQGF1dXRob3IgICAgICBndjNkZXYKLy8gQGRlc2NyaXB0aW9uICBTa2lwcyBhbGwgWW91VHViZSBhZHMgaW5zdGFudGx5IGFuZCByZW1vdmVzIGJhbm5lcnMvb3ZlcmxheXMuIENvbXBsZXRlbHkgdW5kZXRlY3RhYmxlIGFkIGJsb2NrZXIuIEVuam95IGFkLWZyZWUgWW91VHViZSBtdXNpYyBwbGF5bGlzdHMgYW5kIHZpZGVvcyB3aXRoIG5vIGludGVycnVwdGlvbnMuIFJlbW92ZXMgYWRibG9jayBkZXRlY3Rpb24gd2FybmluZ3MuCi8vIEBkZXNjcmlwdGlvbjpkZSDDnGJlcnNwcmluZ3QgYWxsZSBZb3VUdWJlLVdlcmJ1bmcgc29mb3J0IHVuZCBlbnRmZXJudCBCYW5uZXIvT3ZlcmxheXMuIFbDtmxsaWcgdW5lbnRkZWNrYmFyZXIgV2VyYmVibG9ja2VyLiBHZW5pZcOfZW4gU2llIHdlcmJlZnJlaWUgWW91VHViZS1NdXNpay1QbGF5bGlzdHMgdW5kIFZpZGVvcyBvaG5lIFVudGVyYnJlY2h1bmdlbi4gRW50ZmVybnQgQWRibG9jay1Fcmtlbm51bmdzd2FybnVuZ2VuLgovLyBAZGVzY3JpcHRpb246ZXMgT21pdGUgdG9kb3MgbG9zIGFudW5jaW9zIGRlIFlvdVR1YmUgYWwgaW5zdGFudGUgeSBlbGltaW5hIGJhbm5lcnMvc3VwZXJwb3NpY2lvbmVzLiBCbG9xdWVhZG9yIGRlIGFudW5jaW9zIGNvbXBsZXRhbWVudGUgaW5kZXRlY3RhYmxlLiBEaXNmcnV0YSBkZSBsaXN0YXMgZGUgcmVwcm9kdWNjacOzbiB5IHZpZGVvcyBkZSBtw7pzaWNhIGRlIFlvdVR1YmUgc2luIGludGVycnVwY2lvbmVzLiBFbGltaW5hIGxhcyBhZHZlcnRlbmNpYXMgZGUgZGV0ZWNjacOzbiBkZSBBZGJsb2NrLgovLyBAZGVzY3JpcHRpb246ZnIgUGFzc2UgdG91dGVzIGxlcyBwdWJsaWNpdMOpcyBZb3VUdWJlIGluc3RhbnRhbsOpbWVudCBldCBzdXBwcmltZSBsZXMgYmFubmnDqHJlcy9zdXBlcnBvc2l0aW9ucy4gQmxvcXVldXIgZGUgcHVibGljaXTDqSB0b3RhbGVtZW50IGluZMOpdGVjdGFibGUuIFByb2ZpdGV6IGRlIHBsYXlsaXN0cyBldCB2aWTDqW9zIFlvdVR1YmUgc2FucyBwdWJsaWNpdMOpIG5pIGludGVycnVwdGlvbnMuIFN1cHByaW1lIGxlcyBhdmVydGlzc2VtZW50cyBkZSBkw6l0ZWN0aW9uIGRlIGJsb3F1ZXVyIGRlIHB1YmxpY2l0w6kuCi8vIEBkZXNjcmlwdGlvbjpqYSDjgZnjgbnjgabjga5Zb3VUdWJl5bqD5ZGK44KS5Y2z5bqn44Gr44K544Kt44OD44OX44GX44CB44OQ44OK44O8L+OCquODvOODkOODvOODrOOCpOOCkuWJiumZpOOBl+OBvuOBmeOAguWujOWFqOOBq+aknOWHuuOBleOCjOOBquOBhOW6g+WRiuODluODreODg+OCq+ODvOOAguW6g+WRiuOBquOBl+OBp1lvdVR1YmXjga7pn7Pmpb3jg5fjg6zjgqTjg6rjgrnjg4jjgajjg5Pjg4fjgqrjgpLkuK3mlq3jgarjgY/mpb3jgZfjgoHjgb7jgZnjgIJBZGJsb2Nr5qSc5Ye66K2m5ZGK44KS5YmK6Zmk44GX44G+44GZ44CCCi8vIEBkZXNjcmlwdGlvbjp6aCDljbPml7bot7Pov4fmiYDmnIlZb3VUdWJl5bm/5ZGK5bm25Yig6Zmk5qiq5bmFL+imhuebluWxguOAguWujOWFqOaXoOazleajgOa1i+WIsOeahOW5v+WRiuaLpuaIquWZqOOAguS6q+WPl+aXoOW5v+WRiueahFlvdVR1YmXpn7PkuZDmkq3mlL7liJfooajlkozop4bpopHvvIzml6DlubLmibDjgILnp7vpmaTlub/lkYrmi6bmiKrmo4DmtYvorablkYrjgIIKLy8gQGRlc2NyaXB0aW9uOml0IFNhbHRhIHR1dHRpIGdsaSBhbm51bmNpIGRpIFlvdVR1YmUgaXN0YW50YW5lYW1lbnRlIGUgcmltdW92ZSBiYW5uZXIvc292cmFwcG9zaXppb25pLiBCbG9jY28gYW5udW5jaSBjb21wbGV0YW1lbnRlIG5vbiByaWxldmFiaWxlLiBHb2RpdGkgcGxheWxpc3QgZSB2aWRlbyBtdXNpY2FsaSBkaSBZb3VUdWJlIHNlbnphIGludGVycnV6aW9uaSBwdWJibGljaXRhcmllLiBSaW11b3ZlIGdsaSBhdnZpc2kgZGkgcmlsZXZhbWVudG8gZGkgQWRibG9jay4KLy8gQGRlc2NyaXB0aW9uOnB0IElnbm9yYSB0b2RvcyBvcyBhbsO6bmNpb3MgZG8gWW91VHViZSBpbnN0YW50YW5lYW1lbnRlIGUgcmVtb3ZlIGJhbm5lcnMvc29icmVwb3Npw6fDtWVzLiBCbG9xdWVhZG9yIGRlIGFuw7puY2lvcyBjb21wbGV0YW1lbnRlIGluZGV0ZWN0w6F2ZWwuIERlc2ZydXRlIGRlIHBsYXlsaXN0cyBlIHbDrWRlb3MgZGUgbcO6c2ljYSBkbyBZb3VUdWJlIHNlbSBpbnRlcnJ1cMOnw7Vlcy4gUmVtb3ZlIG9zIGF2aXNvcyBkZSBkZXRlY8Onw6NvIGRlIEFkYmxvY2suCi8vIEBkZXNjcmlwdGlvbjpydSDQnNCz0L3QvtCy0LXQvdC90L4g0L/RgNC+0L/Rg9GB0LrQsNC10YIg0LLRgdC1INC+0LHRitGP0LLQu9C10L3QuNGPINC90LAgWW91VHViZSDQuCDRg9C00LDQu9GP0LXRgiDQsdCw0L3QvdC10YDRiy/QvdCw0LvQvtC20LXQvdC40Y8uINCf0L7Qu9C90L7RgdGC0YzRjiDQvdC10LfQsNC80LXRgtC90YvQuSDQsdC70L7QutC40YDQvtCy0YnQuNC6INGA0LXQutC70LDQvNGLLiDQndCw0YHQu9Cw0LbQtNCw0LnRgtC10YHRjCDQv9C70LXQudC70LjRgdGC0LDQvNC4INC4INCy0LjQtNC10L4g0L3QsCBZb3VUdWJlINCx0LXQtyDRgNC10LrQu9Cw0LzRiyDQuCDQv9C10YDQtdGA0YvQstC+0LIuINCj0LTQsNC70Y/QtdGCINC/0YDQtdC00YPQv9GA0LXQttC00LXQvdC40Y8g0L4g0LHQu9C+0LrQuNGA0L7QstC60LUg0YDQtdC60LvQsNC80YsuCi8vIEBkZXNjcmlwdGlvbjprbyDrqqjrk6AgWW91VHViZSDqtJHqs6Drpbwg7KaJ7IucIOqxtOuEiOubsOqzoCDrsLDrhIgv7Jik67KE66CI7J2066W8IOygnOqxsO2VqeuLiOuLpC4g7JmE7KCE7Z6IIO2DkOyngOuQmOyngCDslYrripQg6rSR6rOgIOywqOuLqOq4sC4g6rSR6rOgIOyXhuydtCDspJHri6gg7JeG64qUIFlvdVR1YmUg7J2M7JWFIOyerOyDneuqqeuhneqzvCDrj5nsmIHsg4HsnYQg7KaQ6riw7Iut7Iuc7JikLiBBZGJsb2NrIOqwkOyngCDqsr3qs6Drpbwg7KCc6rGw7ZWp64uI64ukLgovLyBAZGVzY3JpcHRpb246aGkg4KS44KSt4KWAIFlvdVR1YmUg4KS14KS/4KSc4KWN4KSe4KS+4KSq4KSo4KWL4KSCIOCkleCliyDgpKTgpYHgpLDgpILgpKQg4KS44KWN4KSV4KS/4KSqIOCkleCksOClh+CkgiDgpJTgpLAg4KSs4KWI4KSo4KSwL+Ckk+CkteCksOCksuClhyDgpLngpJ/gpL4g4KSm4KWH4KSC4KWkIOCkquClguCksOClgCDgpKTgpLDgpLkg4KS44KWHIOCkheCkpuClg+CktuCljeCkryDgpLXgpL/gpJzgpY3gpJ7gpL7gpKrgpKgg4KSs4KWN4KSy4KWJ4KSV4KSw4KWkIOCkrOCkv+CkqOCkviDgpJXgpL/gpLjgpYAg4KSw4KWB4KSV4KS+4KS14KSfIOCkleClhyDgpLXgpL/gpJzgpY3gpJ7gpL7gpKrgpKgt4KSu4KWB4KSV4KWN4KSkIFlvdVR1YmUg4KS44KSC4KSX4KWA4KSkIOCkquCljeCksuClh+CksuCkv+CkuOCljeCknyDgpJTgpLAg4KS14KWA4KSh4KS/4KSv4KWLIOCkleCkviDgpIbgpKjgpILgpKYg4KSy4KWH4KSC4KWkIEFkYmxvY2sg4KSq4KS54KSa4KS+4KSoIOCkmuClh+CkpOCkvuCkteCkqOCkv+Ckr+Cli+CkgiDgpJXgpYsg4KS54KSf4KS+IOCkpuClh+CkpOCkviDgpLngpYjgpaQKLy8gQG1hdGNoICAgICAgICBodHRwczovLyoueW91dHViZS5jb20vKgovLyBAbWF0Y2ggICAgICAgIGh0dHBzOi8vd3d3LnlvdXR1YmUtbm9jb29raWUuY29tLyoKLy8gQGljb24gICAgICAgICBodHRwczovL2kuaWJiLmNvL1pNd3dtWG0vU2NyZWVuc2hvdC0yMDI0LTA4LTIyLWF0LTEyLTA1LTUxLUFNLXJlbW92ZWJnLXByZXZpZXcucG5nCi8vIEBncmFudCAgICAgICAgbm9uZQovLyBAbGljZW5zZSAgICAgIE1JVAovLyBAZG93bmxvYWRVUkwgaHR0cHM6Ly91cGRhdGUuZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy81MDQxOTcvTm8lMjBBZHMlMjAtJTIwWW91VHViZSUyMEFkQmxvY2tlciUyMCU3QyUyMEFkJTIwU2tpcHBlciUyMCU3QyUyMEZyZWUlMjBZb3VUdWJlJTIwTXVzaWMlMjAlN0MlMjBBZCUyMFJlbW92ZXIlMjAlN0MlMjBSZW1vdmUlMjBBZGJsb2NrJTIwV2FybmluZy51c2VyLmpzCi8vIEB1cGRhdGVVUkwgaHR0cHM6Ly91cGRhdGUuZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy81MDQxOTcvTm8lMjBBZHMlMjAtJTIwWW91VHViZSUyMEFkQmxvY2tlciUyMCU3QyUyMEFkJTIwU2tpcHBlciUyMCU3QyUyMEZyZWUlMjBZb3VUdWJlJTIwTXVzaWMlMjAlN0MlMjBBZCUyMFJlbW92ZXIlMjAlN0MlMjBSZW1vdmUlMjBBZGJsb2NrJTIwV2FybmluZy5tZXRhLmpzCi8vID09L1VzZXJTY3JpcHQ9PQoKCgpsZXQgb2dWb2x1bWUgPSAxLCBwYlJhdGUgPSAxLCBtYW51YWxQYXVzZSA9IGZhbHNlOwoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4gewogICAgaWYgKGV2ZW50LmNvZGUgPT09ICdTcGFjZScpIHsKICAgICAgICBtYW51YWxQYXVzZSA9IHRydWU7CiAgICB9Cn0pOwoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGxheScsICgpID0+IHsKICAgIG1hbnVhbFBhdXNlID0gZmFsc2U7Cn0pOwoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLCAoKSA9PiB7CiAgICBtYW51YWxQYXVzZSA9IHRydWU7Cn0pOwoKY29uc3QgbWFuaXAgPSAoYWN0aW9ucykgPT4gewogICAgYWN0aW9ucy5mb3JFYWNoKCh7IHNlbGVjdG9yLCBhY3Rpb24sIGZ1bmMgfSkgPT4gewogICAgICAgIGxldCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpOwogICAgICAgIGVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7CiAgICAgICAgICAgIGlmKGVsZW1lbnQhPT1udWxsICYmIGVsZW1lbnQhPT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgaWYoZWxlbWVudC5zdHlsZS5kaXNwbGF5IT09Im5vbmUiKXsKICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aW9uID09PSAncmVtb3ZlJykgewogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSAnaGlkZScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSAnY2xpY2snKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xpY2soKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ3JlbW92ZS1ydW4nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGV2YWwoZnVuYyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9KTsKfTsKCmNvbnN0IHBsYXlWaWQgPSAoKSA9PiB7CiAgICBjb25zdCB2aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoInZpZGVvIik7CiAgICBpZih2aWRlbyE9PW51bGwpewogICAgICAgIGlmKCF2aWRlby5wbGF5aW5nICYmICFtYW51YWxQYXVzZSAmJiB2aWRlby5jdXJyZW50VGltZTwxKXsKICAgICAgICAgICAgdmlkZW8ucGxheSgpOwogICAgICAgIH0KICAgIH0KfQoKT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLCAncGxheWluZycsIHsKICAgIGdldDogZnVuY3Rpb24oKXsKICAgICAgICByZXR1cm4gISEodGhpcy5jdXJyZW50VGltZSA+IDAgJiYgIXRoaXMucGF1c2VkICYmICF0aGlzLmVuZGVkICYmIHRoaXMucmVhZHlTdGF0ZSA+IDIpOwogICAgfQp9KTsKCgovKmNvbnN0IHJlbW92ZVNob3J0cyA9ICgpID0+IHsKICAgIGlmKHNob3VsZF9SZW1vdmVfU2hvcnRzID09IHRydWUpewogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5zdHlsZS1zY29wZS55dGQtcmljaC1zaGVsZi1yZW5kZXJlciAjdGl0bGUtY29udGFpbmVyIikuZm9yRWFjaCgoc2hlbGYpID0+IHsKICAgICAgICAgICAgaWYgKHNoZWxmLmlubmVyVGV4dCA9PT0gIlNob3J0cyIpIHsKICAgICAgICAgICAgICAgIHNoZWxmLmNsb3Nlc3QoJ3l0ZC1yaWNoLXNoZWxmLXJlbmRlcmVyJykucmVtb3ZlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KfTsqLwoKCmNvbnN0IHNpbXVsYXRlQ2xpY2sgPSAoZWxlbWVudCk9PnsKICAgIHRyeXsKICAgICAgICBjb25zdCBtb3VzZURvd25FdmVudCA9IG5ldyBNb3VzZUV2ZW50KCdtb3VzZWRvd24nLCB7CiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsCiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWUsCiAgICAgICAgICAgIHZpZXc6IHdpbmRvdywKICAgICAgICAgICAgY2xpZW50WDogZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LAogICAgICAgICAgICBjbGllbnRZOiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCwKICAgICAgICAgICAgYnV0dG9uOiAwCiAgICAgICAgfSk7CgogICAgICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChtb3VzZURvd25FdmVudCk7CgogICAgICAgIGNvbnN0IG1vdXNlVXBFdmVudCA9IG5ldyBNb3VzZUV2ZW50KCdtb3VzZXVwJywgewogICAgICAgICAgICBidWJibGVzOiB0cnVlLAogICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlLAogICAgICAgICAgICB2aWV3OiB3aW5kb3csCiAgICAgICAgICAgIGNsaWVudFg6IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCwKICAgICAgICAgICAgY2xpZW50WTogZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AsCiAgICAgICAgICAgIGJ1dHRvbjogMAogICAgICAgIH0pOwogICAgICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChtb3VzZVVwRXZlbnQpOwogICAgICAgIGNvbnN0IGNsaWNrRXZlbnQgPSBuZXcgTW91c2VFdmVudCgnY2xpY2snLCB7CiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsCiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWUsCiAgICAgICAgICAgIHZpZXc6IHdpbmRvdywKICAgICAgICAgICAgY2xpZW50WDogZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LAogICAgICAgICAgICBjbGllbnRZOiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCwKICAgICAgICAgICAgYnV0dG9uOiAwCiAgICAgICAgfSk7CiAgICAgICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KGNsaWNrRXZlbnQpOwogICAgfWNhdGNoKGUpe30KfQoKY29uc3Qgc2ltdWxhdGVOYXRpdmVUb3VjaCA9IChlbGVtZW50KSA9PiB7CiAgICB0cnl7CiAgICAgICAgY29uc3QgdG91Y2hQb2ludCA9IG5ldyBUb3VjaCh7CiAgICAgICAgICAgIGlkZW50aWZpZXI6IERhdGUubm93KCksCiAgICAgICAgICAgIHRhcmdldDogZWxlbWVudCwKICAgICAgICAgICAgY2xpZW50WDogMTIsCiAgICAgICAgICAgIGNsaWVudFk6IDM0LAogICAgICAgICAgICByYWRpdXNYOiA1NiwKICAgICAgICAgICAgcmFkaXVzWTogNzgsCiAgICAgICAgICAgIHJvdGF0aW9uQW5nbGU6IDAsCiAgICAgICAgICAgIGZvcmNlOiAxCiAgICAgICAgfSk7CgogICAgICAgIGNvbnN0IHRvdWNoU3RhcnQgPSBuZXcgVG91Y2hFdmVudCgndG91Y2hzdGFydCcsIHsKICAgICAgICAgICAgYnViYmxlczogdHJ1ZSwKICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZSwKICAgICAgICAgICAgdmlldzogd2luZG93LAogICAgICAgICAgICB0b3VjaGVzOiBbdG91Y2hQb2ludF0sCiAgICAgICAgICAgIHRhcmdldFRvdWNoZXM6IFt0b3VjaFBvaW50XSwKICAgICAgICAgICAgY2hhbmdlZFRvdWNoZXM6IFt0b3VjaFBvaW50XQogICAgICAgIH0pOwogICAgICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudCh0b3VjaFN0YXJ0KTsKCiAgICAgICAgY29uc3QgdG91Y2hFbmQgPSBuZXcgVG91Y2hFdmVudCgndG91Y2hlbmQnLCB7CiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsCiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWUsCiAgICAgICAgICAgIHZpZXc6IHdpbmRvdywKICAgICAgICAgICAgdG91Y2hlczogW10sCiAgICAgICAgICAgIHRhcmdldFRvdWNoZXM6IFtdLAogICAgICAgICAgICBjaGFuZ2VkVG91Y2hlczogW3RvdWNoUG9pbnRdCiAgICAgICAgfSk7CiAgICAgICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KHRvdWNoRW5kKTsKICAgIH1jYXRjaChlKXt9Cn07CgoKY29uc3QgcmV2ID0gYAogICAgeXRkLXJpY2gtaXRlbS1yZW5kZXJlcjpoYXMoeXRkLWFkLXNsb3QtcmVuZGVyZXIpLAogICAgI3BsYXllci1hZHMsCiAgICAjcGFuZWxzOmhhcyh5dGQtYWRzLWVuZ2FnZW1lbnQtcGFuZWwtY29udGVudC1yZW5kZXJlciksCiAgICB5dGQtYWQtc2xvdC1yZW5kZXJlciwKICAgICNtYXN0aGVhZC1hZCwKICAgIHl0ZC1yZWVsLXZpZGVvLXJlbmRlcmVyOmhhcyh5dGQtYWQtc2xvdC1yZW5kZXJlciksCiAgICB0cC15dC1wYXBlci1kaWFsb2c6aGFzKCNmZWVkYmFjay55dGQtZW5mb3JjZW1lbnQtbWVzc2FnZS12aWV3LW1vZGVsKSwKICAgIC55dC1tZWFsYmFyLXByb21vLXJlbmRlcmVyIHsKICAgICAgICB2aXNpYmlsaXR5OiBoaWRkZW47CiAgICAgICAgaGVpZ2h0OiAwOwogICAgICAgIG1hcmdpbjogMDsKICAgICAgICBwYWRkaW5nOiAwOwogICAgfQpgOwoKY29uc3Qgc3R5bGVTaGVldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CnN0eWxlU2hlZXQudHlwZSA9ICd0ZXh0L2Nzcyc7CnN0eWxlU2hlZXQuaW5uZXJUZXh0ID0gcmV2Owpkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlU2hlZXQpOwoKc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgdHJ5ewoKICAgICAgICBtYW5pcChbCiAgICAgICAgICAgIHsgc2VsZWN0b3I6ICJ0cC15dC1wYXBlci1kaWFsb2c6aGFzKCNmZWVkYmFjay55dGQtZW5mb3JjZW1lbnQtbWVzc2FnZS12aWV3LW1vZGVsKSIsIGFjdGlvbjogJ3JlbW92ZS1ydW4nLCBmdW5jOiBwbGF5VmlkKCl9LAogICAgICAgICAgICB7IHNlbGVjdG9yOiAiLnl0cC1hZC1vdmVybGF5LWNsb3NlLWJ1dHRvbiIsIGFjdGlvbjogJ2NsaWNrJyB9LAogICAgICAgICAgICB7IHNlbGVjdG9yOiAiLnN0eWxlLXNjb3BlLnl0ZC13YXRjaC1uZXh0LXNlY29uZGFyeS1yZXN1bHRzLXJlbmRlcmVyLnNwYXJrbGVzLWxpZ2h0LWN0YS5Hb29nbGVBY3RpdmVWaWV3RWxlbWVudCIsIGFjdGlvbjogJ2hpZGUnIH0sCiAgICAgICAgICAgIHsgc2VsZWN0b3I6ICIuc3R5bGUtc2NvcGUueXRkLWl0ZW0tc2VjdGlvbi1yZW5kZXJlci5zcGFya2xlcy1saWdodC1jdGEiLCBhY3Rpb246ICdoaWRlJyB9LAogICAgICAgICAgICB7IHNlbGVjdG9yOiAiLnl0cC1hZC1tZXNzYWdlLWNvbnRhaW5lciIsIGFjdGlvbjogJ2hpZGUnIH0sCiAgICAgICAgICAgIHsgc2VsZWN0b3I6ICIuc3R5bGUtc2NvcGUueXRkLWNvbXBhbmlvbi1zbG90LXJlbmRlcmVyIiwgYWN0aW9uOiAncmVtb3ZlJyB9LAogICAgICAgICAgICB7IHNlbGVjdG9yOiAiI21hc3RoZWFkLWFkIiwgYWN0aW9uOiAncmVtb3ZlJyB9LAogICAgICAgICAgICB7IHNlbGVjdG9yOiAieXRkLWFkLXNsb3QtcmVuZGVyZXIiLCBhY3Rpb246ICdyZW1vdmUnIH0sCiAgICAgICAgICAgIHsgc2VsZWN0b3I6ICJ5dGQtcmVlbC1zaGVsZi1yZW5kZXJlciIsIGFjdGlvbjogJ3JlbW92ZScgfSwKICAgICAgICAgICAgeyBzZWxlY3RvcjogInl0ZC1wbGF5ZXItbGVnYWN5LWRlc2t0b3Atd2F0Y2gtYWRzLXJlbmRlcmVyIiwgYWN0aW9uOiAnaGlkZSd9LAogICAgICAgICAgICB7IHNlbGVjdG9yOiAiLnl0cC1hZC1wbGF5ZXItb3ZlcmxheS1sYXlvdXQiLCBhY3Rpb246ICdoaWRlJyB9LAogICAgICAgICAgICB7IHNlbGVjdG9yOiAieXRkLXJlZWwtdmlkZW8tcmVuZGVyZXI6aGFzKC55dGQtYWQtc2xvdC1yZW5kZXJlcikiLCBhY3Rpb246ICJyZW1vdmUifSwKICAgICAgICAgICAgeyBzZWxlY3RvcjogInl0ZC1pbi1mZWVkLWFkLWxheW91dC1yZW5kZXJlciIsIGFjdGlvbjogJ3JlbW92ZScgfSwKICAgICAgICAgICAgeyBzZWxlY3RvcjogInl0ZC1lbmdhZ2VtZW50LXBhbmVsLXNlY3Rpb24tbGlzdC1yZW5kZXJlclt0YXJnZXQtaWQ9J2VuZ2FnZW1lbnQtcGFuZWwtYWRzJ10iLCBhY3Rpb246ICdoaWRlJyB9LAogICAgICAgICAgICB7IHNlbGVjdG9yOiAieXRkLXBvcHVwLWNvbnRhaW5lcjpoYXMoYVtocmVmPScvcHJlbWl1bSddKSIsIGFjdGlvbjogJ2hpZGUnIH0sCiAgICAgICAgICAgIHsgc2VsZWN0b3I6ICJ5dC1tZWFsYmFyLXByb21vLXJlbmRlcmVyIiwgYWN0aW9uOiAnaGlkZScgfQogICAgICAgIF0pOwoKICAgICAgICBsZXQgdmlkZW9TdHJlYW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJ2aWRlbyIpLAogICAgICAgICAgICBza2lwQWRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAueXRwLXNraXAtYWQtYnV0dG9uLC55dHAtYWQtc2tpcC1idXR0b24sLnl0cC1hZC1za2lwLWJ1dHRvbi1tb2Rlcm5gKTsKCgogICAgICAgIGlmICh2aWRlb1N0cmVhbSkgewoKICAgICAgICAgICAgbGV0IGFkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnZpZGVvLWFkcy55dHAtYWQtbW9kdWxlIikuZmlyc3RDaGlsZCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIueXRwLWV4cC1wcHAtdXBkYXRlLmFkLWNyZWF0ZWQuYWQtc2hvd2luZy5hZC1pbnRlcnJ1cHRpbmciKTsKICAgICAgICAgICAgaWYgKGFkICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCJhZCBub3QgbnVsbCIpCiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGFkKTsKICAgICAgICAgICAgICAgIGlmKGFkLmNoaWxkRWxlbWVudENvdW50ID4gMCl7CiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygiYWQgY2hpbGRyZW4gaGlnaGVyIHRoYW4gMCIpCiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygic2tpcHBpbmcgd2l0aCBzcGVlZCIpCiAgICAgICAgICAgICAgICAgICAgdmlkZW9TdHJlYW0ucGxheWJhY2tSYXRlID0gMTY7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTih2aWRlb1N0cmVhbS5kdXJhdGlvbikgJiYgaXNGaW5pdGUodmlkZW9TdHJlYW0uZHVyYXRpb24pICYmCiAgICAgICAgICAgICAgICAgICAgICAgICFpc05hTih2aWRlb1N0cmVhbS5jdXJyZW50VGltZSkgJiYgaXNGaW5pdGUodmlkZW9TdHJlYW0uY3VycmVudFRpbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvU3RyZWFtLmN1cnJlbnRUaW1lICs9IHZpZGVvU3RyZWFtLmR1cmF0aW9uOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2aWRlb1N0cmVhbS5tdXRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgICAgIHBiUmF0ZSA9IHZpZGVvU3RyZWFtLnBsYXliYWNrUmF0ZTsKICAgICAgICAgICAgICAgICAgICB2aWRlb1N0cmVhbS5tdXRlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIHBiUmF0ZSA9IHZpZGVvU3RyZWFtLnBsYXliYWNrUmF0ZTsKICAgICAgICAgICAgICAgIHZpZGVvU3RyZWFtLm11dGVkID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChza2lwQWRCdXR0b24gIT09IG51bGwpIHsKICAgICAgICAgICAgc2tpcEFkQnV0dG9uLmNsaWNrKCk7CiAgICAgICAgICAgIHNpbXVsYXRlQ2xpY2soc2tpcEFkQnV0dG9uKTsKICAgICAgICAgICAgc2ltdWxhdGVOYXRpdmVUb3VjaChza2lwQWRCdXR0b24pOwogICAgICAgICAgICBjb25zb2xlLmxvZygic2tpcEFkIGJ1dHRvbiBjbGlja2VkLiIpOwogICAgICAgIH0KCiAgICB9Y2F0Y2goZSl7fQoKfSwgMTApOwoKCg=="},{"name":"youtube-ad-speeder-and-playback-speed-saver","options":{"check_for_updates":true,"user_modified":null,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":null,"unwrap":null,"run_at":null,"run_in":null,"tags":[],"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["*://*.youtube.com/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"orig_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_run_in":[],"orig_noframes":null,"orig_tags":[]}},"storage":{"ts":1758143898039,"data":{}},"enabled":false,"position":12,"file_url":"https://update.greasyfork.org/scripts/549837/youtube-ad-speeder-and-playback-speed-saver.user.js","uuid":"f40ff1e2-3304-4ed9-9f0f-525e64ad19d1","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICB5b3V0dWJlLWFkLXNwZWVkZXItYW5kLXBsYXliYWNrLXNwZWVkLXNhdmVyCi8vIEBuYW1lOmVuICAgICAgWW91VHViZSBBZCBTcGVlZGVyICYgUGxheWJhY2sgU3BlZWQgU2F2ZXIKLy8gQG5hbWU6dHIgICAgICBZb3VUdWJlIFJla2xhbSBIxLF6bGFuZMSxcsSxY8SxIHZlIE95bmF0bWEgSMSxesSxIEhhdMSxcmxhecSxY8SxCi8vIEBuYW1lOmF6ICAgICAgWW91VHViZSBSZWtsYW0gU8O8csmZdGzJmXlpY2lzaSB2yZkgT3luYXRtYSBTw7xyyZl0aW5pIFlhZGRhIFNheGxhbWF5YW4KLy8gQG5hbWU6cnUgICAgICBZb3VUdWJlINCj0YHQutC+0YDQuNGC0LXQu9GMINGB0LrQvtGA0L7RgdGC0Lgg0YDQtdC60LvQsNC80Ysg0Lgg0LfQsNC/0L7QvNC40L3QsNC90LjRjyDRgdC60L7RgNC+0YHRgtC4INCy0L7RgdC/0YDQvtC40LfQstC10LTQtdC90LjRjwovLyBAZGVzY3JpcHRpb24gIEF1dG9tYXRpY2FsbHkgc3BlZWRzIHVwIFlvdVR1YmUgYWRzLCByZW1lbWJlcnMgcGxheWJhY2sgc3BlZWQsIGFuZCBkaXNwbGF5cyBjdXJyZW50IHNwZWVkCi8vIEBkZXNjcmlwdGlvbjp0ciBZb3VUdWJlIHJla2xhbWxhcsSxbsSxIG90b21hdGlrIGjEsXpsYW5kxLFyxLFyLCBveW5hdG1hIGjEsXrEsW7EsSBoYXTEsXJsYXIgdmUgZ8O2c3RlcmlyCi8vIEBkZXNjcmlwdGlvbjpheiBZb3VUdWJlIHJla2xhbWxhcsSxbsSxIGF2dG9tYXRpayBzw7xyyZl0bMmZbmRpcmlyLCBveHVtYSBzw7xyyZl0aW5pIHlhZGRhIHNheGxhecSxciB2yZkgZ8O2c3TJmXJpcgovLyBAZGVzY3JpcHRpb246cnUg0JDQstGC0L7QvNCw0YLQuNGH0LXRgdC60Lgg0YPRgdC60L7RgNGP0LXRgiDRgNC10LrQu9Cw0LzRgyDQvdCwIFlvdVR1YmUsINC30LDQv9C+0LzQuNC90LDQtdGCINC4INC/0L7QutCw0LfRi9Cy0LDQtdGCINGB0LrQvtGA0L7RgdGC0Ywg0LLQvtGB0L/RgNC+0LjQt9Cy0LXQtNC10L3QuNGPCi8vIEBhdXRob3IgICAgICAgT3J1YyBRYWZhcm92IChPcnI4ODgpCi8vIEB2ZXJzaW9uICAgICAgMS4wLjAKLy8gQGxpY2Vuc2UgICAgICBNSVQKLy8gQGNvbnRyaWJ1dGlvblVSTCBodHRwczovL2dpdGh1Yi5jb20vb3Jyc3R1ZGlvL3lvdXR1YmUtYWQtc3BlZWRlci1hbmQtcGxheWJhY2stc3BlZWQtc2F2ZXIKLy8gQG5hbWVzcGFjZSAgICBodHRwczovL2dpdGh1Yi5jb20vb3Jyc3R1ZGlvCi8vIEBob21lcGFnZVVSTCAgaHR0cHM6Ly9naXRodWIuY29tL29ycnN0dWRpby95b3V0dWJlLWFkLXNwZWVkZXItYW5kLXBsYXliYWNrLXNwZWVkLXNhdmVyCi8vIEBzdXBwb3J0VVJMICAgaHR0cHM6Ly9naXRodWIuY29tL29ycnN0dWRpby95b3V0dWJlLWFkLXNwZWVkZXItYW5kLXBsYXliYWNrLXNwZWVkLXNhdmVyL2lzc3VlcwovLyBAbWF0Y2ggICAgICAgICo6Ly8qLnlvdXR1YmUuY29tLyoKLy8gQGljb24gICAgICAgICBodHRwczovL3d3dy5nb29nbGUuY29tL3MyL2Zhdmljb25zP3N6PTY0JmRvbWFpbj15b3V0dWJlLmNvbQovLyBAZ3JhbnQgICAgICAgIG5vbmUKLy8gQHJ1bi1hdCAgICAgICBkb2N1bWVudC1pZGxlCi8vIEBkb3dubG9hZFVSTCBodHRwczovL3VwZGF0ZS5ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzU0OTgzNy95b3V0dWJlLWFkLXNwZWVkZXItYW5kLXBsYXliYWNrLXNwZWVkLXNhdmVyLnVzZXIuanMKLy8gQHVwZGF0ZVVSTCBodHRwczovL3VwZGF0ZS5ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzU0OTgzNy95b3V0dWJlLWFkLXNwZWVkZXItYW5kLXBsYXliYWNrLXNwZWVkLXNhdmVyLm1ldGEuanMKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgY29uc3QgREVCVUcgPSBmYWxzZTsgLy8gU2V0IHRvIHRydWUgZm9yIGRldmVsb3BtZW50CiAgICBmdW5jdGlvbiBsb2coLi4uYXJncykgewogICAgICAgIGlmIChERUJVRykgY29uc29sZS5sb2coJ1tBZFNraXBwZXJdJywgLi4uYXJncyk7CiAgICB9CgogICAgbGV0IGlzQWRQbGF5aW5nID0gZmFsc2U7CiAgICBsZXQgdmlkZW9FbGVtZW50ID0gbnVsbDsKICAgIGxldCBtYWluVmlkZW9VcmwgPSBudWxsOwogICAgCiAgICAvLyDQpdGA0LDQvdC40LvQuNGJ0LUg0L3QsNGB0YLRgNC+0LXQugogICAgY29uc3Qgc3RvcmUgPSB7CiAgICAgICAgZ2V0IHJhdGUoKSB7CiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ5dC1wbGF5YmFjay1yYXRlIikpIHx8IDEuMDsKICAgICAgICB9LAogICAgICAgIHNldCByYXRlKHYpIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInl0LXBsYXliYWNrLXJhdGUiLCB2KTsKICAgICAgICB9CiAgICB9OwoKICAgIC8vINCk0YPQvdC60YbQuNGPINC00LvRjyDRg9GB0LrQvtGA0LXQvdC40Y8g0YDQtdC60LvQsNC80YsKICAgIGZ1bmN0aW9uIHNwZWVkVXBBZCgpIHsKICAgICAgICBpZiAoIXZpZGVvRWxlbWVudCkgcmV0dXJuOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZpZGVvRWxlbWVudC5wbGF5YmFja1JhdGUgPSAxNjsKICAgICAgICAgICAgdmlkZW9FbGVtZW50Lm11dGVkID0gdHJ1ZTsKICAgICAgICAgICAgbG9nKCfQo9GB0LrQvtGA0Y/QtdC8INGA0LXQutC70LDQvNGDJyk7CiAgICAgICAgICAgIHVwZGF0ZVNwZWVkSW5kaWNhdG9yKDE2KTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGxvZygn0J7RiNC40LHQutCwINC/0YDQuCDRg9GB0LrQvtGA0LXQvdC40Lgg0YDQtdC60LvQsNC80Ys6JywgZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vINCh0L7Qt9C00LDQtdC8INC4INC+0LHQvdC+0LLQu9GP0LXQvCDQuNC90LTQuNC60LDRgtC+0YAg0YHQutC+0YDQvtGB0YLQuAogICAgZnVuY3Rpb24gdXBkYXRlU3BlZWRJbmRpY2F0b3IocmF0ZSkgewogICAgICAgIGxldCBpbmRpY2F0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcueXRwLXNwZWVkLWluZGljYXRvcicpOwogICAgICAgIAogICAgICAgIGlmICghaW5kaWNhdG9yKSB7CiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnl0cC1yaWdodC1jb250cm9scycpOwogICAgICAgICAgICBpZiAoIWNvbnRyb2xzKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgCiAgICAgICAgICAgIGluZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3l0cC1idXR0b24geXRwLXNwZWVkLWluZGljYXRvcic7CiAgICAgICAgICAgIGluZGljYXRvci5zdHlsZS5taW5XaWR0aCA9ICc0MHB4JzsKICAgICAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInOwogICAgICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuZm9udFNpemUgPSAnMTJweCc7CiAgICAgICAgICAgIGluZGljYXRvci5zdHlsZS5mb250V2VpZ2h0ID0gJzUwMCc7CiAgICAgICAgICAgIGluZGljYXRvci5zdHlsZS5jb2xvciA9ICcjZmZmJzsKICAgICAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JzsKICAgICAgICAgICAgaW5kaWNhdG9yLnRpdGxlID0gJ9Ci0LXQutGD0YnQsNGPINGB0LrQvtGA0L7RgdGC0Ywg0LLQvtGB0L/RgNC+0LjQt9Cy0LXQtNC10L3QuNGPJzsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vINCS0YHRgtCw0LLQu9GP0LXQvCDQv9C10YDQtdC0INC/0LXRgNCy0YvQvCDRjdC70LXQvNC10L3RgtC+0Lwg0L/RgNCw0LLQvtC5INC/0LDQvdC10LvQuCDRg9C/0YDQsNCy0LvQtdC90LjRjwogICAgICAgICAgICBjb250cm9scy5pbnNlcnRCZWZvcmUoaW5kaWNhdG9yLCBjb250cm9scy5maXJzdENoaWxkKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaW5kaWNhdG9yLnRleHRDb250ZW50ID0gcmF0ZSA9PT0gMSA/ICcxLjB4JyA6IHJhdGUudG9GaXhlZCgxKSArICd4JzsKICAgICAgICByZXR1cm4gaW5kaWNhdG9yOwogICAgfQoKICAgIC8vINCk0YPQvdC60YbQuNGPINGB0LHRgNC+0YHQsCDRgdC60L7RgNC+0YHRgtC4CiAgICBmdW5jdGlvbiByZXNldFBsYXliYWNrKCkgewogICAgICAgIGlmICghdmlkZW9FbGVtZW50KSByZXR1cm47CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSA9IHN0b3JlLnJhdGU7CiAgICAgICAgICAgIHZpZGVvRWxlbWVudC5tdXRlZCA9IGZhbHNlOwogICAgICAgICAgICBsb2coYNCS0L7Qt9Cy0YDQsNGJ0LDQtdC8INGB0L7RhdGA0LDQvdC10L3QvdGD0Y4g0YHQutC+0YDQvtGB0YLRjDogJHtzdG9yZS5yYXRlfXhgKTsKICAgICAgICAgICAgdXBkYXRlU3BlZWRJbmRpY2F0b3Ioc3RvcmUucmF0ZSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBsb2coJ9Ce0YjQuNCx0LrQsCDQv9GA0Lgg0YHQsdGA0L7RgdC1INGB0LrQvtGA0L7RgdGC0Lg6JywgZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0Y/QstC70Y/QtdGC0YHRjyDQu9C4INCy0LjQtNC10L4g0YDQtdC60LvQsNC80L7QuQogICAgZnVuY3Rpb24gaXNBZFZpZGVvKHVybCkgewogICAgICAgIGlmICghdXJsKSByZXR1cm4gZmFsc2U7CiAgICAgICAgCiAgICAgICAgLy8g0J7RgdC90L7QstC90YvQtSDQv9GA0LjQt9C90LDQutC4INGA0LXQutC70LDQvNC90L7Qs9C+INCy0LjQtNC10L4KICAgICAgICBjb25zdCBhZFBhdHRlcm5zID0gWwogICAgICAgICAgICAvZ29vZ2xldmlkZW9cLmNvbVwvdmlkZW9wbGF5YmFja1w/Lio/Jig/IW1pbWU9dmlkZW8lMkZtcDR8bWltZT1hdWRpbyUyRm1wNCkvLAogICAgICAgICAgICAvZ29vZ2xldmlkZW9cLmNvbVwvcHRyYWNraW5nXD8vLAogICAgICAgICAgICAvZG91YmxlY2xpY2tcLm5ldFwvLio/XC9hZC8sCiAgICAgICAgICAgIC95b3V0dWJlXC5jb21cL2FwaVwvc3RhdHNcL2Fkcy8sCiAgICAgICAgICAgIC95b3V0dWJlXC5jb21cL2FwaVwvc3RhdHNcL3FvZVw/LwogICAgICAgIF07CgogICAgICAgIC8vINCU0L7Qv9C+0LvQvdC40YLQtdC70YzQvdGL0LUg0L/RgNC+0LLQtdGA0LrQuCDQv9C+IERPTQogICAgICAgIGNvbnN0IGFkSW5kaWNhdG9ycyA9IFsKICAgICAgICAgICAgJy52aWRlby1hZHMueXRwLWFkLW1vZHVsZScsCiAgICAgICAgICAgICcuYWQtc2hvd2luZycsCiAgICAgICAgICAgICcuYWQtaW50ZXJydXB0aW5nJywKICAgICAgICAgICAgJy55dHAtYWQtcGxheWVyLW92ZXJsYXknLAogICAgICAgICAgICAnLnl0cC1hZC1za2lwLWJ1dHRvbicsCiAgICAgICAgICAgICcueXRwLXNraXAtYWQtYnV0dG9uJywKICAgICAgICAgICAgJy52aWRlb0FkVWlTa2lwQnV0dG9uJwogICAgICAgIF07CgogICAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCBVUkwg0L3QsCDRgdC+0L7RgtCy0LXRgtGB0YLQstC40LUg0YjQsNCx0LvQvtC90LDQvCDRgNC10LrQu9Cw0LzRiwogICAgICAgIGNvbnN0IGlzQWRCeVVybCA9IGFkUGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdCh1cmwpKTsKICAgICAgICAKICAgICAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0L3QsNC70LjRh9C40LUg0YDQtdC60LvQsNC80L3Ri9GFINGN0LvQtdC80LXQvdGC0L7QsiDQsiBET00KICAgICAgICBjb25zdCBoYXNBZEVsZW1lbnRzID0gYWRJbmRpY2F0b3JzLnNvbWUoc2VsZWN0b3IgPT4gewogICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpOwogICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShlbGVtZW50cykuc29tZShlbCA9PiAKICAgICAgICAgICAgICAgIGVsLm9mZnNldFBhcmVudCAhPT0gbnVsbCAmJiAKICAgICAgICAgICAgICAgIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsKS5kaXNwbGF5ICE9PSAnbm9uZScKICAgICAgICAgICAgKTsKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIGlzQWRCeVVybCB8fCBoYXNBZEVsZW1lbnRzOwogICAgfQoKICAgIC8vINCe0LHRgNCw0LHQvtGC0YfQuNC6INC40LfQvNC10L3QtdC90LjQuQogICAgZnVuY3Rpb24gaGFuZGxlVmlkZW9DaGFuZ2UoKSB7CiAgICAgICAgaWYgKCF2aWRlb0VsZW1lbnQgfHwgIXZpZGVvRWxlbWVudC5zcmMpIHJldHVybjsKCiAgICAgICAgY29uc3QgY3VycmVudFVybCA9IHZpZGVvRWxlbWVudC5zcmM7CiAgICAgICAgY29uc3QgaXNBZCA9IGlzQWRWaWRlbyhjdXJyZW50VXJsKTsKICAgICAgICAKICAgICAgICBsb2coJ9Ci0LXQutGD0YnQtdC1INCy0LjQtNC10L46JywgewogICAgICAgICAgICB1cmw6IGN1cnJlbnRVcmwsCiAgICAgICAgICAgIGlzQWQ6IGlzQWQsCiAgICAgICAgICAgIGN1cnJlbnRUaW1lOiB2aWRlb0VsZW1lbnQuY3VycmVudFRpbWUsCiAgICAgICAgICAgIGR1cmF0aW9uOiB2aWRlb0VsZW1lbnQuZHVyYXRpb24KICAgICAgICB9KTsKCiAgICAgICAgLy8g0JXRgdC70Lgg0Y3RgtC+INC+0YHQvdC+0LLQvdC+0LUg0LLQuNC00LXQvgogICAgICAgIGlmICghaXNBZCkgewogICAgICAgICAgICBpZiAobWFpblZpZGVvVXJsICE9PSBjdXJyZW50VXJsKSB7CiAgICAgICAgICAgICAgICBtYWluVmlkZW9VcmwgPSBjdXJyZW50VXJsOwogICAgICAgICAgICAgICAgbG9nKCfQntCx0L3QvtCy0LvQtdC90L4g0L7RgdC90L7QstC90L7QtSDQstC40LTQtdC+OicsIG1haW5WaWRlb1VybCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGlzQWRQbGF5aW5nKSB7CiAgICAgICAgICAgICAgICBsb2coJ9Cg0LXQutC70LDQvNCwINC30LDQutC+0L3Rh9C40LvQsNGB0YwsINCy0L7Qt9Cy0YDQsNGJ0LDQtdC8INC90L7RgNC80LDQu9GM0L3Rg9GOINGB0LrQvtGA0L7RgdGC0YwnKTsKICAgICAgICAgICAgICAgIGlzQWRQbGF5aW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICByZXNldFBsYXliYWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8g0JXRgdC70Lgg0Y3RgtC+INGA0LXQutC70LDQvNCwCiAgICAgICAgbG9nKCfQntCx0L3QsNGA0YPQttC10L3QsCDRgNC10LrQu9Cw0LzQsCwg0YPRgdC60L7RgNGP0LXQvC4uLicpOwogICAgICAgIGlzQWRQbGF5aW5nID0gdHJ1ZTsKICAgICAgICBzcGVlZFVwQWQoKTsKICAgIH0KCiAgICAvLyDQndCw0YHRgtGA0L7QudC60LAg0L3QsNCx0LvRjtC00LDRgtC10LvRjyDQt9CwINCy0LjQtNC10L4KICAgIGZ1bmN0aW9uIHNldHVwVmlkZW9PYnNlcnZlcigpIHsKICAgICAgICBpZiAoIXZpZGVvRWxlbWVudCB8fCB2aWRlb0VsZW1lbnQuZGF0YXNldC5vYnNlcnZlclNldCkgcmV0dXJuOwogICAgICAgIAogICAgICAgIHZpZGVvRWxlbWVudC5kYXRhc2V0Lm9ic2VydmVyU2V0ID0gJ3RydWUnOwogICAgICAgIAogICAgICAgIC8vINCS0L7RgdGB0YLQsNC90LDQstC70LjQstCw0LXQvCDRgdC+0YXRgNCw0L3QtdC90L3Rg9GOINGB0LrQvtGA0L7RgdGC0YwKICAgICAgICBpZiAoc3RvcmUucmF0ZSAmJiBzdG9yZS5yYXRlICE9PSAxLjApIHsKICAgICAgICAgICAgdmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSA9IHN0b3JlLnJhdGU7CiAgICAgICAgICAgIGxvZyhg0JLQvtGB0YHRgtCw0L3QvtCy0LvQtdC90LAg0YHQvtGF0YDQsNC90LXQvdC90LDRjyDRgdC60L7RgNC+0YHRgtGMOiAke3N0b3JlLnJhdGV9eGApOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyDQntCx0YDQsNCx0L7RgtGH0LjQuiDQuNC30LzQtdC90LXQvdC40Y8g0YHQutC+0YDQvtGB0YLQuAogICAgICAgIHZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdyYXRlY2hhbmdlJywgKCkgPT4gewogICAgICAgICAgICBpZiAoIWlzQWRQbGF5aW5nKSB7ICAvLyDQndC1INGB0L7RhdGA0LDQvdGP0LXQvCDRgdC60L7RgNC+0YHRgtGMINC00LvRjyDRgNC10LrQu9Cw0LzRiwogICAgICAgICAgICAgICAgc3RvcmUucmF0ZSA9IHZpZGVvRWxlbWVudC5wbGF5YmFja1JhdGU7CiAgICAgICAgICAgICAgICBsb2coYNCh0L7RhdGA0LDQvdC10L3QsCDQvdC+0LLQsNGPINGB0LrQvtGA0L7RgdGC0Yw6ICR7c3RvcmUucmF0ZX14YCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdXBkYXRlU3BlZWRJbmRpY2F0b3IodmlkZW9FbGVtZW50LnBsYXliYWNrUmF0ZSk7CiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgLy8g0JjQvdC40YbQuNCw0LvQuNC30LjRgNGD0LXQvCDQuNC90LTQuNC60LDRgtC+0YAg0L/RgNC4INC30LDQs9GA0YPQt9C60LUKICAgICAgICB1cGRhdGVTcGVlZEluZGljYXRvcih2aWRlb0VsZW1lbnQucGxheWJhY2tSYXRlKTsKICAgICAgICAKICAgICAgICAvLyDQndCw0LHQu9GO0LTQsNC10Lwg0LfQsCDQuNC30LzQtdC90LXQvdC40Y/QvNC4INCw0YLRgNC40LHRg9GC0L7QsiDQstC40LTQtdC+CiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7CiAgICAgICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKG11dGF0aW9uID0+IHsKICAgICAgICAgICAgICAgIGlmIChtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lID09PSAnc3JjJykgewogICAgICAgICAgICAgICAgICAgIGxvZygn0JjQt9C80LXQvdC10L0gc3JjINCy0LjQtNC10L46JywgdmlkZW9FbGVtZW50LnNyYyk7CiAgICAgICAgICAgICAgICAgICAgaGFuZGxlVmlkZW9DaGFuZ2UoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CgogICAgICAgIG9ic2VydmVyLm9ic2VydmUodmlkZW9FbGVtZW50LCB7CiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsCiAgICAgICAgICAgIGF0dHJpYnV0ZUZpbHRlcjogWydzcmMnXQogICAgICAgIH0pOwoKICAgICAgICAvLyDQodC70YPRiNCw0LXQvCDRgdC+0LHRi9GC0LjRjyDQstC+0YHQv9GA0L7QuNC30LLQtdC00LXQvdC40Y8KICAgICAgICBbJ3BsYXknLCAncGxheWluZycsICdwYXVzZScsICdzZWVraW5nJywgJ3NlZWtlZCcsICd0aW1ldXBkYXRlJ10uZm9yRWFjaChldmVudCA9PiB7CiAgICAgICAgICAgIHZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCAoKSA9PiB7CiAgICAgICAgICAgICAgICBsb2coYNCh0L7QsdGL0YLQuNC1ICR7ZXZlbnR9YCwgewogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lOiB2aWRlb0VsZW1lbnQuY3VycmVudFRpbWUsCiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHZpZGVvRWxlbWVudC5kdXJhdGlvbiwKICAgICAgICAgICAgICAgICAgICBwYXVzZWQ6IHZpZGVvRWxlbWVudC5wYXVzZWQKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaGFuZGxlVmlkZW9DaGFuZ2UoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9CgogICAgLy8g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8KICAgIGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgICAgLy8g0J3QsNGF0L7QtNC40Lwg0LLQuNC00LXQvtGN0LvQtdC80LXQvdGCCiAgICAgICAgY29uc3QgZmluZFZpZGVvID0gKCkgPT4gewogICAgICAgICAgICBjb25zdCB2aWRlb3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndmlkZW8nKTsKICAgICAgICAgICAgcmV0dXJuIHZpZGVvcy5sZW5ndGggPiAwID8gdmlkZW9zWzBdIDogbnVsbDsKICAgICAgICB9OwoKICAgICAgICAvLyDQndCw0YHRgtGA0L7QudC60LAg0L3QsNCx0LvRjtC00LDRgtC10LvRjyDQt9CwINC/0L7Rj9Cy0LvQtdC90LjQtdC8INCy0LjQtNC10L4KICAgICAgICBjb25zdCBzZXR1cE9ic2VydmVyID0gKCkgPT4gewogICAgICAgICAgICB2aWRlb0VsZW1lbnQgPSBmaW5kVmlkZW8oKTsKICAgICAgICAgICAgaWYgKHZpZGVvRWxlbWVudCkgewogICAgICAgICAgICAgICAgc2V0dXBWaWRlb09ic2VydmVyKCk7CiAgICAgICAgICAgICAgICAvLyDQn9C10YDQstC+0L3QsNGH0LDQu9GM0L3QsNGPINC/0YDQvtCy0LXRgNC60LAg0YEg0LfQsNC00LXRgNC20LrQvtC5INC00LvRjyDQt9Cw0LPRgNGD0LfQutC4INC80LXRgtCw0LTQsNC90L3Ri9GFCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGhhbmRsZVZpZGVvQ2hhbmdlLCAxMDAwKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIC8vINCe0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyBTUEEt0L3QsNCy0LjQs9Cw0YbQuNC4CiAgICAgICAgY29uc3QgaGFuZGxlTmF2aWdhdGlvbiA9ICgpID0+IHsKICAgICAgICAgICAgdmlkZW9FbGVtZW50ID0gbnVsbDsKICAgICAgICAgICAgbWFpblZpZGVvVXJsID0gbnVsbDsKICAgICAgICAgICAgaXNBZFBsYXlpbmcgPSBmYWxzZTsKICAgICAgICAgICAgc2V0VGltZW91dChzZXR1cE9ic2VydmVyLCAxMDAwKTsgLy8g0JTQsNC10Lwg0LLRgNC10LzRjyDQvdCwINC30LDQs9GA0YPQt9C60YMg0L3QvtCy0L7QuSDRgdGC0YDQsNC90LjRhtGLCiAgICAgICAgfTsKCiAgICAgICAgLy8g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8KICAgICAgICBzZXR1cE9ic2VydmVyKCk7CiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigneXQtbmF2aWdhdGUtZmluaXNoJywgaGFuZGxlTmF2aWdhdGlvbik7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3l0LW5hdmlnYXRlLWZpbmlzaCcsIGhhbmRsZU5hdmlnYXRpb24pOwogICAgfQoKICAgIC8vINCX0LDQv9GD0YHQugogICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdsb2FkaW5nJykgewogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBpbml0KTsKICAgIH0gZWxzZSB7CiAgICAgICAgaW5pdCgpOwogICAgfQp9KSgpOwo="}]}